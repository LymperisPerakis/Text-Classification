                  Z86017/Z16017
                  PCMCIA Interface Solution
                  Product Specification
                  PS012002-1201
ZiLOG Worldwide Headquarters • 910 E. Hamilton Avenue • Campbell, CA 95008
      Telephone: 408.558.8500 • Fax: 408.558.8300 • www.ZiLOG.com


  is publication is subject to replacement by a later edition. To determine whether a later edition
 ists, or to request copies of publications, contact
 LOG Worldwide Headquarters
 0 E. Hamilton Avenue
  mpbell, CA 95008
 lephone: 408.558.8500
 x: 408.558.8300
ww.ZiLOG.com
indows is a registered trademark of Microsoft Corporation.
ocument Disclaimer
2001 by ZiLOG, Inc. All rights reserved. Information in this publication concerning the devices,
plications, or technology described is intended to suggest possible uses and may be superseded. ZiLOG,
 C. DOES NOT ASSUME LIABILITY FOR OR PROVIDE A REPRESENTATION OF ACCURACY OF
  E INFORMATION, DEVICES, OR TECHNOLOGY DESCRIBED IN THIS DOCUMENT. ZiLOG
LSO DOES NOT ASSUME LIABILITY FOR INTELLECTUAL PROPERTY INFRINGEMENT
  LATED IN ANY MANNER TO USE OF INFORMATION, DEVICES, OR TECHNOLOGY
ESCRIBED HEREIN OR OTHERWISE. Except with the express written approval ZiLOG, use of
 ormation, devices, or technology as critical components of life support systems is not authorized. No
enses or other rights are conveyed, implicitly or otherwise, by this document under any intellectual property
 hts.
S012002-1201


                                                                               iii
reface
      Thank you for your interest in Zilog’s PCMCIA interface solution. This
      Reference Manual describes the programming and operation of the
      Z86017 and Z16017 PCMCIA adapter chips.
      This Reference Manual is organized in the following way:
      •   PCMCIA Interface Overview
          This chapter is an introductory section that provides an overview of
          the architecture of the device.
      •   Addressing Modes
          This chapter describes the addressing modes supported by the
          Z86017/Z16017 architecture to ensure PCMCIA compatibility.
      •   Programming Internal Registers
          This chapter describes the serial interface modes.
      •   Configuration Registers
          This chapter describes the functions of the Z86017/Z16017 internal
          registers.
      •   Appendix A
          This appendix gives an overview of the Z86017/Z16017
          multifunction pins.
      •   Appendix B
          This appendix provides Absolute Maximum Ratings, DC Electrical
          Characteristics, and Timing Specifications related to the Z86017/
          Z1601.
      •   Appendix C
          This appendix provides various Z86017/Z16017 timing diagrams.
face                                                             PS012002-1201


            • Appendix D
              This appendix provides part numbers and ordering information.
            • Appendix E
              This appendix provides a description of the Z8601700ZCO PCMCIA
              Interface Development Kit.
S012002-1201                                                             Preface


                                                                                                                                 v
Table of Contents
Preface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . iii
Table of Contents . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .v
List of Figures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . vii
List of Tables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . xi
PCMCIA Interface Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .1
                 Features . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .1
                       General Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .2
                 Pin Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .12
                 Pin Identification . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .14
                 Pin Functions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .18
                       PCMCIA Signals . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .18
                       Peripheral or ATA/IDE Signals . . . . . . . . . . . . . . . . . . . . . . . . . . . .21
                       Serial Interface Signals . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .24
                       Peripheral Control Signals . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .25
Addressing Modes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .27
Programming Internal Registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33
                 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .33
                 EEPROM Register. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36
                 Word-to-Byte Operation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .76
Configuration Registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .79
PS012002-1201                                                                                       Table of Contents


            Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79
            Configuration Registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80
ppendix A: Multifunction Pins . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .87
            Overview of Multifunction Pins . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87
ppendix B: Electrical Characteristics and Timing . . . . . . . . . . . . . . . . . . . .93
            internal attribute memory timing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96
            017 Device Slew Delay . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108
ppendix C: Timing Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .113
ppendix D: Packaging and Ordering Information . . . . . . . . . . . . . . . . . . .117
            20 Mhz PCMCIA Adapter Chips . . . . . . . . . . . . . . . . . . . . . . . . . . . .                     117
                Package . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   117
                Temperature . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       117
                Speed . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 117
                Environmental . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       117
                Package Dimensions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .            119
ppendix E: PCMCIA Interface Development Kit . . . . . . . . . . . . . . . . . . . .121
            General Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
            Z86017 Specifications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
                Power Requirements: . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
                Dimensions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
            Kit Contents . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 122
                Evaluation Board . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 122
                ZPCMCIA0ZDP PCMCIA Extender Card . . . . . . . . . . . . . . . . . 122
S012002-1201                                                                                  Table of Contents


                                                                                                                              vii
List of Figures
Preface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . iii
Table of Contents . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .v
List of Figures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . vii
List of Tables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . xi
PCMCIA Interface Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .1
                 Figure 1.         ZX6017 Functional Block Diagram . . . . . . . . . . . . . . . . . . .3
                 Figure 2.         Serial Port Master Mode Control . . . . . . . . . . . . . . . . . . . . .5
                 Figure 3.         Serial Port Slave Mode Control . . . . . . . . . . . . . . . . . . . . . .7
                 Figure 4.         EEPROM Programming Through the PCMCIA
                                   Interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .8
                 Figure 5.         Connection Block Diagram . . . . . . . . . . . . . . . . . . . . . . . . . .9
                 Figure 6.         Serial Interface Diagram . . . . . . . . . . . . . . . . . . . . . . . . . . .10
                 Figure 7.         Attribute and Configuration Memory Diagram . . . . . . . . .11
                 Figure 8.         ZX6017 100-Pin VQFP Pin Configuration . . . . . . . . . . . . .12
                 Figure 9.         Z86M17 and Z16M17 (Mirror Image) 100-Pin VQFP
                                   Pin Configuration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .13
Addressing Modes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .27
Programming Internal Registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .33
                 Figure 10. Word-to-Byte Timing . . . . . . . . . . . . . . . . . . . . . . . . . . . . .76
                 Figure 11. Word-to-Byte Mode Data Path . . . . . . . . . . . . . . . . . . . . . .77
Configuration Registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .79
PS012002-1201                                                                                           List of Figures


ppendix A: Multifunction Pins . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .87
            Figure 12. Z16017BA PC_RDY/BSY/IREQ/HINT Pin . . . . . . . . . . .                           87
            Figure 13. Z86017BA PC_WP//IOIS16//IOIS16 Pin . . . . . . . . . . . . .                      88
            Figure 14. Z16017BA PC_WP//IOIS16//IOIS16 Pin . . . . . . . . . . . . .                      89
            Figure 15. Z86017BA (Overview of Internal Structure) . . . . . . . . . .                     90
            Figure 16. Z16017BA (Overview of Internal Structure) . . . . . . . . . .                     91
ppendix B: Electrical Characteristics and Timing . . . . . . . . . . . . . . . . . . . .93
            Figure 17. PCMCIA Read Memory Timing, No Wait States . . . . . . . 97
            Figure 18. PCMCIA Read Memory Timing, Wait State Enabled . . . 98
            Figure 19. PCMCIA Write Memory Timing, No Wait States . . . . . 101
            Figure 20. PCMCIA Write Memory Timing, Wait State Enabled . . 102
            Figure 21. I/O Read Timing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 104
            Figure 22. I/O Write Timing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106
            Figure 23. Skew Timing Between PCMCIA and ATA/IDE or
                       Peripheral Bus . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 107
            Figure 24. 017 Slew Delay Derating Curve (Typical) . . . . . . . . . . . 108
            Figure 25. FMaster Mode Read EEPROM Timing . . . . . . . . . . . . . 110
            Figure 26. Slave Interface Timing (Read) . . . . . . . . . . . . . . . . . . . . 111
ppendix C: Timing Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .113
            Figure 27. Z16017BA Reset Timing PCMCIA Mode . . . . . . . . . . . 113
            Figure 28. PCMCIA ATA/IDE 16-Bit I/O Write
                       (Register 24 = 01, Internal IOIS 16 is selected) . . . . . . . 114
            Figure 29. PCMCIA ATA / IDE 8-Bit Long Read
                       (Reading 512-byte data plus 6-byte ECC) . . . . . . . . . . . . 115
ppendix D: Packaging and Ordering Information . . . . . . . . . . . . . . . . . . .117
            Figure 30. Example Package Name . . . . . . . . . . . . . . . . . . . . . . . . . 118
            Figure 31. 100-Lead VQFP Package Diagram . . . . . . . . . . . . . . . . . 119
S012002-1201                                                                            List of Figures


                                                                                        ix
Appendix E: PCMCIA Interface Development Kit . . . . . . . . . . . . . . . . . . . .121
List of Figures                                                   PS012001-0901


S012002-1201 List of Figures

                                                                                                                                  xi
List of Tables
Preface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . iii
Table of Contents . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .v
List of Figures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . vii
List of Tables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . xi
PCMCIA Interface Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .1
                 Table 1.          Device Features . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .1
                 Table 2.          Power Connections . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .2
                 Table 3.          100-Pin VQFP Pin Identification . . . . . . . . . . . . . . . . . . . .14
Addressing Modes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .27
                 Table 4.          ZX6017 Addressing Modes . . . . . . . . . . . . . . . . . . . . . . . .27
                 Table 5.          Programming PCMCIA_ATA ZX6017 Configuration Regis-
                                   ters . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .29
                 Table 6.          PCMCIA Common Memory Mode . . . . . . . . . . . . . . . . . .30
                 Table 7.          PCMCIA I/O Mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .31
                 Table 8.          PCMCIA_ATA Memory Mapped Access . . . . . . . . . . . . .31
                 Table 9.          PCMCIA_ATA I/O Mapped Access . . . . . . . . . . . . . . . . .32
Programming Internal Registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .33
                 Table 10.         ZX6017 Card Configuration Registers . . . . . . . . . . . . . . . .33
                 Table 11.         Interface Configuration Register: Address 00h . . . . . . . . .36
                 Table 12.         Master Clock . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .38
                 Table 13.         Interrupt Enable Register: Address 01h . . . . . . . . . . . . . . .39
PS012002-1201                                                                                                List of Tables


            Table 14. Interface Configuration Register 1: Address 02h . . . . . . .                    41
            Table 15. PCMCIA PDIAG Pin Functions . . . . . . . . . . . . . . . . . . . .               42
            Table 16.  PCMCIA DASP Pin Functions . . . . . . . . . . . . . . . . . . . . .             43
            Table 17. Host Chip Select Designations . . . . . . . . . . . . . . . . . . . . .          44
            Table 18. Audio Pin Configurations . . . . . . . . . . . . . . . . . . . . . . . . .       44
            Table 19. Interface Configuration Register 2: Address 03h . . . . . . .                    45
            Table 20. Interface Configuration Register 3: Address 04h . . . . . . .                    46
            Table 21. ATA Register Selection Designations . . . . . . . . . . . . . . . .              47
            Table 22. Reset Conditions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47
            Table 23. PCMCIA CCR Base Address Register: Address 05h . . . .                            48
            Table 24. CCR Location Examples, Register 5 . . . . . . . . . . . . . . . . .              49
            Table 25. PCMCIA Interrupt Status Register: Address 06h . . . . . . .                      50
            Table 26. PCMCIA Exception Status Register: Address 07h . . . . . .                        51
            Table 27. ATA Sample Mode Bit . . . . . . . . . . . . . . . . . . . . . . . . . . .        52
            Table 28. Attribute Memory Address Register: Address 08h . . . . . .                       52
            Table 29. Attribute Memory Data Register: Address 09h . . . . . . . . .                    53
            Table 30. Window 1 Control Register: Address 10h . . . . . . . . . . . . .                 54
            Table 31. Window 1 Start Address LSB: Address 11h . . . . . . . . . . .                    55
            Table 32. Window 1 Start/Range Address MSB: Address 12h . . . . .                          55
            Table 33. Window 1 Range Address LSB: Address 13h . . . . . . . . . .                      56
            Table 34. Window 2 Control Register: Address 14h . . . . . . . . . . . . .                 56
            Table 35. Window 2 Start Address LSB: Address 15h . . . . . . . . . . .                    57
            Table 36. Window 2 Start/Range Address MSB: Address 16h . . . . .                          58
            Table 37. Window 2 Range Address LSB: Address 17h . . . . . . . . . .                      58
            Table 38. Window 3 Control Register: Address 18h . . . . . . . . . . . . .                 59
            Table 39. Window 3 Start Address LSB: Address 19h . . . . . . . . . . .                    60
            Table 40. Window 3 Start/Range Address MSB: Address 1Ah . . . .                            60
            Table 41. Window 3 Range Address LSB: Address 1Bh . . . . . . . . .                        61
S012002-1201                                                                          List of Tables


                                                                                                                      xiii
               Table 42. EEPROM Valid flag Byte Register: Address 1Eh . . . . . . .61
               Table 43. EEPROM Address/Status CCR5 Back Door: Address 20h 61
               Table 44. EEPROM Data CCR6 Back Door: Address 21h . . . . . . . .62
               Table 45. EEPROM Command CCR7 Back Door: Address 22h . . . .62
               Table 46. Revision Control Register: Address 23h . . . . . . . . . . . . . . .63
               Table 47. Revision Number Register: Address 24h . . . . . . . . . . . . . .63
               Table 48. Bus Control 1 Register: Address 26h . . . . . . . . . . . . . . . . .64
               Table 49. IOIS16 Address Control Register: Address 27h . . . . . . . . .66
               Table 50. 16-Bit_Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .67
               Table 51. 8-Bit _CTRL . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .67
               Table 52. Power Management Timer Count Value: Address 2Ah . . .68
               Table 53. Power Management control Register: Address 2Bh . . . . . .69
               Table 54. Interface Configuration Register 4: Address 2Ch . . . . . . . .70
               Table 55. Power Management Clock Select . . . . . . . . . . . . . . . . . . . .71
               Table 56. Configuration Index Compare Register 1: Address 2Dh . .72
               Table 57. Configuration Index Compare Register 2: Address 2Eh . .72
               Table 58. Bus Control Register: Address 2Fh . . . . . . . . . . . . . . . . . .74
               Table 59. Strobe Width and Access Delay . . . . . . . . . . . . . . . . . . . . .75
               Table 60. PCMICA Host Read and Write Address Examples, . . . . . .78
Configuration Registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .79
               Table 61. PCMCIA Address xx0h to xx8h, Configuration Register De-
                         code . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .79
               Table 62. ZiLOG EEPROM Programming Extensions . . . . . . . . . . .80
               Table 63. PCMCIA Configuration Option Register
                         CCR0: Address 0Ah . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .80
               Table 64. PCMCIA Card Status Register CCR1: Address 0Bh . . . . .81
               Table 65. PCMCIA Pin Replacement Register CCR2: Address 0Ch .82
               Table 66. PCMCIA socket and Copy Register CCR3: Address 0Dh .83
List of Tables                                                                               PS012001-0901


            Table 67.  PCMCIA I/O Event Indication CCR4: Address 1Fh . . . . . 84
ppendix A: Multifunction Pins . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .87
ppendix B: Electrical Characteristics and Timing . . . . . . . . . . . . . . . . . . . .93
            Table 68.  Absolute Maximum Ratings . . . . . . . . . . . . . . . . . . . . . . . 93
            Table 69.  DC Electrical Characteristics . . . . . . . . . . . . . . . . . . . . . . . 94
            Table 70.  Internal Attribute Memory Timing . . . . . . . . . . . . . . . . . . 96
            Table 71.  PCMCIA Memory Write Timing . . . . . . . . . . . . . . . . . . . 99
            Table 72.  I/O Read Timing Specification . . . . . . . . . . . . . . . . . . . . 103
            Table 73.  I/O Write Timing Specification . . . . . . . . . . . . . . . . . . . . 105
            Table 74.  Skew Timing Between PCMCIA And ATA/IDE or
                       Peripheral Bus . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106
            Table 75.  Serial Interface Timing . . . . . . . . . . . . . . . . . . . . . . . . . . 109
ppendix C: Timing Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .113
ppendix D: Packaging and Ordering Information . . . . . . . . . . . . . . . . . . .117
ppendix E: PCMCIA Interface Development Kit . . . . . . . . . . . . . . . . . . . .121
S012002-1201                                                                             List of Tables


                                                                                        1
CMCIA Interface Overview
ATURES
        Table 1. Device Features
          Device           RAM (Bytes)      Speed            Package
          Z86017           256              20               100-Pin VQFP
          Z86M171          256              20               100-Pin VQFP
          Z16017           256              20               100-Pin VQFP
          Z16M171          256              20               100-Pin VQFP
        NOTES:
            1.Mirror Image Bond-Out Options
            •    PCMCIA Configuration Registers
            •    Sequencer for programming attribute memory using EEPROM
                 content, MASTER mode
            •    Serial Peripheral Interface (SPI) circuitry allows control through the
                 local microprocessor, SLAVE mode
            •    PCMCIA to I/O peripheral
            •    PCMCIA to ATA/IDE translation
            •    ATA/IDE to ATA/IDE mapping, PASSHROUGH mode
            •    Operates from a 3.0V to 5.5V power supply
            •    Conforms to PCMCIA standards
            •    Low power dissipation
            •    Mirror image bond-out option (Z86M17/Z16M17)
            •    On-chip generation of IOIS16 in I/O mode (Z16017)
MCIA Interface Overview                                                 PS012002-1201


       General Description
            The Z86017/Z16017 (ZX6017) are general-purpose PCMCIA adapter
            chips used on the card side of the interface. For increased versatility,
            “mirror image” bond-out versions, the Z86M17 and Z16M17, are also
            available. These chips are easily configured to allow access to all types of
            memory or I/O-mapping peripherals, such as Ethernet controllers,
            Universal Asynchronous Receiver/Transmitters (UART), modems,
            rotating disk memory, and so on. The ZX6017 can be used in a stand-
            alone configuration without the use of a local processor when all
            necessary data for Attribute Memory, Card Configuration Registers
            (CCR), Memory/I/O maps, and so on, are being provided by a local serial
            EEPROM. The serial EEPROM is read automatically using an internal
            EEPROM sequencer. The ZX6017 can also be configured by a local
            microprocessor, when one is being used on the card.
            Throughout this document, references to the ZX6017 device applies
            equally to the Z86017 and Z16017, unless otherwise specified.
            Note: All Signals with an overline ( ) are active Low, that is, B/W
                     (WORD is active Low); B/W (BYTE is active Low, only).
            Power connections follow conventional descriptions below:
                Table 2. Power Connections
                  Connection      Circuit           Device
                  Power           VCC               VDD
                  Ground          GND               VSS
            The ZX6017 can be programmed by one of two ways: an external 256
            byte serial EEPROM can be connected to the serial port interface, or a
            microprocessor can be connected to this port to provide a higher level of
            control. Figure 1 depicts the functional block diagram for the ZX6017.
S012002-1201                                               PCMCIA Interface Overview


                                                                                                                    3
                                    Address
                                    Decoder
                                    PCMCIA                                                            ATA/IDE
                                  Configuration                     Window                                or
                                    Registers                       Decoder                          Peripheral
                                                                                                        Bus
                                                                                  Peripheral Bus
  PCMCIA
                   PCMCIA Bus
  Interface
                                    PCMCIA                       Peripheral Bus
   PC_A[25:11]                      Memory
                                                                    Interface
                                    and I/O                          (16-Bit)
                                    (16-Bit)
                                                      Control        EEPROM
                                Attribute Memory     Registers       Sequencer
                                   (256 Bytes)                                                       Local Serial
                                                                                                      EEPROM
                                                                       SPI                                 µP
                                                                      Control                           SPI Port
                 Figure 1.        ZX6017 Functional Block Diagram
                 Power-On Reset
                 The ZX6017 defaults to the Memory Only interface as outlined in the
                 PCMCIA specification upon deassertion of Power-On Reset /POR). The
                 hardware sets Busy on the PC_RDY/BSY pin and then addresses the
                 EE_MASTER pin. If the EE_MASTER pin is unconnected or pulled
                 High, the ZX6017 serial interface defaults to the Master mode and an
                 external EEPROM is required. If this pin is pulled Low, the SLAVE mode
                 is selected and an external microprocessor is required to configure the
                 ZX6017 through the serial interface pins.
                 Next, the hardware addresses the PC_ATA//HOE pin. If the PC_ATA/
                 HOE pin is held Low for 40 clocks (PC_MCLK_IN) after POR
                 deassertion, the ZX6017 is enabled for ATA/IDE to ATA/IDE
                 PASSTHROUGH mode. The PASSTHROUGH mode is for systems that
MCIA Interface Overview                                                                            PS012002-1201


            use the physical PCMCIA 68-pin connector but do not support PCMCIA
            protocol. If this pin is held High (PC_ATA/HOE), the device is placed
            into the PCMCIA mode. The override bits in register 00H determine what
            mode(s) the user can support.
            Serial Port Operation (Master) Mode
            After the ZX6017 determines that an external EEPROM is present (see
            Figure 2), the Ready/Busy pin on the PCMCIA interface is set to Busy.
            The ZX6017 internal sequencer starts up and reads EEPROM address
            1eh. If EEPROM address 1Eh is loaded with a 1Ch then the EEPROM’s
            data is considered to be valid. After that, the internal sequencer resets its
            address counter back to zero. Data from EEPROM’s addresses [00-2F] is
            read out and put into the on-board registers of the ZX6017. The EEPROM
            sequencer then reads EEPROM addresses 30h to FFh and each byte is
            moved into the ZX6017 on-board attribute memory addresses 00-CFh.
            After loading the registers and attribute memory, the sequencer completes
            by clearing the Ready/Busy pin on the PCMCIA interface indicating 1
            “Ready.” If EEPROM address 1Eh does not contain 1Ch, then the
            sequencer stops. The PCMCIA Ready/Busy pin stays in the Busy state,
            the on-board registers of the ZX6017 remain in their default state, and
            attribute memory data is unknown. The user can program the off-board
            EEPROM through the PCMCIA interface by means of three special
            registers and ignore Busy.
S012002-1201                                                 PCMCIA Interface Overview


                                                                                                             5
                       PCMCIA Bus                       Local Peripheral Bus
                      PC_DATA 15:0          Z86017      ATA_DATA 15:0
                                                        ATA_HCS0
                                                        ATA_HCS1           Chip Selects
                                            Attribute
                        PC_HA 10:0          Memory
                                                        ATA_HA0
                                                        ATA_HA1            Address Selects
            PC_RDY//BSY/IREQ/HINT           Window 1    ATA_HA2
                 PC_WAIT/IOCHRDY           Start/Range
                   PC_HCE1/HCS0             Decoder     ATA_HIOR             I/O R/W              General
 PCMCIA                                                 ATA_HIOW              Strobes            Peripheral
                   PC_HCE2/HCS1                                                                Bus Interface
   Host               PC_ATA/HOE
                                            Window 2                        Memory R/W
                          PC_HIOR          Start/Range  ATA_MRD
                                                                              Strobes
                         PC_HIOW            Decoder     ATA_MWR
                          PC_HWE                        ATA_IOCHRDY
                    PC_REG/DACK                         ATA_IREQ
               PC_HRESET/HRESET             Window 3    ATA_IOCS16
                                           Start/Range  ATA_RESET
                                            Decoder     ATA_DREQ/BVD1
                                                        ATA_PDASP/EXTP_WP
                                                        ATA_PDIAG/ATA_BHE/RING_IN
                                             ATA/IDE    ATA_DACK/BVD2
                                             Window
          PC_BVD1/STSCHG/PDIAG              Decoder
             PC_WP/IOIS16/IOCS16                        EXTP_PWDN
                                                                                       CLK
        PC_BVD2/SPKR/DASP/DREQ           EEPROM or µP   EXTP_AUDIO
                  PC_INPACK/DREQ            Control     EXTP_STSCHG/RES2
                                                        PC_MCLK_IN
                                                        POR                                 POR
                                                        EE_CS
                                                        EE_SK                                   0.1 µF
                                                        EE_DI
                                                        EE_MASTER
                                                        EE_DO
                                                        M_PINT
                                                                                CS    CK DO DI
                                                                                    EEPROM
                                                                               GND ORG NC VCC
               Figure 2.         Serial Port Master Mode Control
               Serial Port Operation (SLAVE) Mode
               When the ZX6017 is placed in serial port SLAVE mode (EE_Master
               signal grounded on POR), the EEPROM sequencer is disabled and the
               user must provide external hardware (microprocessor) with serial
               interface to program CCRs and attribute memory. Additionally, if the
MCIA Interface Overview                                                                   PS012002-1201


            POR signal is deasserted, the user must provide a clock source on the
            PC_MCLK_IN pin in the range of 1-20MHz.
            The external hardware can program the on-board registers and the
            attribute memory by selecting the ZX6017 and pulling the EE_CS pin
            High. The external hardware must set up the data to be sent to the
            ZX6017 on the EE_DI pin and strobe the EE_SK pin. The first byte of
            data is the address selected by the user, the second byte is the command
            byte and the third byte is the data. The external hardware must provide 24
            clocks in order to read or write to a location in the ZX6017 (see Figure 26,
            Slave Interface Timing, in Appendix B).
            To program the on-board attribute memory, the user must first write to it.
            Accomplish this programming by writing the address location of the
            attribute memory to be written (or read) in the attribute RAM data address
            register at location 08h. When this step has been accomplished, the user
            then writes (or reads) the attribute RAM data register 09h with the data to
            be read or written at that location.
            Note: The attribute RAM address register auto-incriments after reading
                      or writing to the attribute RAM data register.
            Figure 3 demonstrates programming the ZX6017 in SLAVE Mode. The
            external user’s hardware writes to register 00 and selects the clock divide
            by and the override mode (if needed). The READY/BUSY pin remains
            set to 0 to indicate BUSY, and a local µP interrupt polarity is selected.
            The user programs registers 01-05, followed by registers 0Ah-2Fh. The
            user writes to the attribute memory by setting the address in the address
            register 08h and in the loop on data register 09h with the user’s attribute
            memory data. The user completes the operation by writing back to
            register 00 to clear the READY/READY status.
S012002-1201                                                 PCMCIA Interface Overview


                                                                                                               7
                        PCMCIA Bus                       Local Peripheral Bus
                       PC_DATA 15:0          Z86017      ATA_DATA 15:0
                                                         ATA_HCS0
                                             Attribute   ATA_HCS1           Chip Selects
                         PC_HA 10:0          Memory
                                                         ATA_HA0
                                                         ATA_HA1            Address Selects
                                             Window 1    ATA_HA2
            PC_RDY/BSY/IREQ/HINT
                                            Start/Range
                 PC_WAIT/IOCHRDY             Decoder     ATA_HIOR                                  General
                    PC_HCE1/HCS0
                                                         ATA_HIOW                                 Peripheral
 PCMCIA             PC_HCE2/HCS1                                                                 Bus Interface
   Host                PC_ATA/HOE            Window 2
                          PC_HIOR           Start/Range  ATA_MRD             Memory R/W
                          PC_HIOW            Decoder     ATA_MWR               Strobes
                           PC_HWE                        ATA_IOCHRDY
                     PC_REG/DACK                         ATA_IREQ
               PC_HRESET/HRESET              Window 3    ATA_IOCS16
                                            Start/Range
                                             Decoder     ATA_RESET
                                                         ATA_DREQ/BVD1
                                                         ATA_PDASP/EXTP_WP
                                              ATA/IDE    ATA_PDIAG/ATA_BHE/RING_IN
                                              Window     ATA_DACK/BVD2
                                             Decoder
          PC_BVD1//STSCHG//PDIAG
             PC_WP//IOIS16//IOCS16                       EXTP_PWDN
                                                                                            CLK
        PC_BVD2//SPKR//DASP/DREQ          EEPROM or µP   EXTP_AUDIO
                  PC_INPACK/DREQ             Control     EXTP_STSCHG/RES2
                                                         PC_MCLK_IN                             POR
                                                         /POR
                                                         EE_CS
                                                                                                    0.1 µF
                                                         EE_SK
                                                         EE_DI
                                                         EE_MASTER
                                                         EE_DO                         Local µP
                                                         M_PINT
              Figure 3.          Serial Port Slave Mode Control
              EEPROM Programming Through the PCMCIA
              Interface
              The ZX6017 can program the serial EEPROM through the PCMCIA
              interface. EEPROM programming is accomplished by means of three
              special registers that are accessed identically to the CCR registers as
              defined by the PCMCIA specification (Figure 4). These registers are
              fixed at addresses 7F0, 7F2, and 7F4. The host software reads and writes
              each byte of the EEPROM through these registers and configures the
MCIA Interface Overview                                                                   PS012002-1201


                      ZX6017 device. After the host writes new values to the EEPROM
                      through these registers, the new values are loaded into the ZX6017 at
                      Power-On Reset (POR).
                     Note: The values written register 05h offset the CCR registers and the
                                     three special EEPROM programming registers on the next POR.
                                PCMCIA Bus                      Local Peripheral Bus
                              PC_DATA 15:0           Z86017     ATA_DATA 15:0
                                                      Attribute ATA_HCS0
                                                      Memory    ATA_HCS1           Chip Selects
                                 PC_HA 10:0
                                                                ATA_HA0
                                                     Window 1                      Address Selects
                                                    Start/Range ATA_HA1
                                                      Decoder   ATA_HA2
                 PC_RDY/BSY/IREQ/HINT
                        PC_WAIT/IOCHRDY
                          PC_HCE1/HCS0               Window 2   ATA_HIOR             I/O R/W               General
   PCMCIA                                           Start/Range ATAA_HIOW             Strobes            Peripheral
                          PC_HCE2/HCS1                                                                  Bus Interface
     Host                     PC_ATA/HOE              Decoder
                                   PC_HIOR                      ATA_MRD             Memory R/W
                                                     Window 3                         Strobes
                                   PC_HIOW                      ATA_MWR
                                    PC_HWE          Start/Range ATA_IOCHRDY
                                                      Decoder
                            PC_REG/DACK                         ATA_IREQ
                      PC_HRESET/HRESET                          ATA_IOCS16
                                                      ATA/IDE   ATA_RESET
                                                      Window
                                                      Decoder   ATA_DREQ/BVD1
                                                                ATA_PDASP/EXTP_WP
                                                     EEPROM     ATA_PDIAG/ATA_BHE/RING_IN
                                                    Programming ATA_DACK/BVD2
               PC_BVD1//STSCHG/PDIAG                  Registers
                   PC_WP/IOIS16/IOCS16                          EXTP_PWDN
             PC_BVD2//SPKR/DASP/DREQ                            EXTP_AUDIO                         CLK
                         PC_INPACK/DREQ                         EXTP_STSCHG/RES2
       EEPROM Programming Registers
                                                                PC_MCLK_IN
          7F0H    EEPROM Address/Status                                                                   POR
                                                                /POR
          7F2H    EEPROM Data
                                                                EE_CS
          7F4H    EEPROM Command                                                                               0.1 µF
                                                                EE_SK
      EEPROM Commands                                           EE_DI
                                                                EE_MASTER
          A8H   Read                                            EE_DO
          AAH   Write
          ABH   Erase                                           M_PINT
          ACH   Disable Write                                                                 CS    CK DO DI
          ADH   Enable Write or Erase                                                              EEPROM
                                                                                            GNDORG NC VCC
                      Figure 4.           EEPROM Programming Through the PCMCIA
                                          Interface
S012002-1201                                                                PCMCIA Interface Overview


                                                                                                       9
                                               Address Mapping Circuit
      Internal Bus, IB7-IB0 and Controls
                                  Window 0 Address 03, 04
       PCMCIA Address             ATA/IDE Map
        and Control Bus            - Special Register
                                      Mapping Circuit
                                      for ATA/IDE
                                                                        Actual Address
                               Window 1 Address
                                                                          And Strobes
           Additional          Address Range 10, 11,12,13
              Chip               Register
             Select
              and              Starting
            Range                Address Register                                  HCS0
                               Address Control                         Chip Select
                                                                          Logic    HCS1
                                 Register
                                   - Memory                                and
                                   - I/O                                Address
                                                                          Logic    IOWR
                                   - External Chip Select
                                                                                   IORD
                                Window 2 Address
                                                                                   MRD
                                Address Range 14,15,16,17
                                 Register
                                                                                   MWR
                                Starting
                                 Address Register                                  HA2-HA0
                                Address Control
                                 Register
                                   - Memory
                                   - I/O
                                   - External Chip Select
                               Window 3 Address
                               Address Range 18,19,1A,1B
                                Register
                               Starting
                                Address Register
                               Address Control
                                Register
                                  - Memory
                                  - I/O
                                  - External Chip Select
                Figure 5.            Connection Block Diagram
MCIA Interface Overview                                                                  PS012002-1201


                    EE_DI Serial Data In          Serial to Parallel
                                                   Shift Register
                                                  Parallel to Serial        EE_DO Serial Data Out
                                                   Shift Register
      EE_Master
      1 = Master            Serial Bus Sequencer                     EE_SK Serial Clock
      0 = Slave              - Master
                             - Slave                                 EE_CS Chip Select
            PCMCIA EEPROM
            ADDRESS Register
                                                  Address Register
           PCMCIA EEPROM
             DATA Register
                                                    Data Register
                                                                                                  Internal Bus
           PCMCIA EEPROM                                                                     IB7-IB0 and Controls
           Command Register
                                                                                     Buffer
                                                 Control Register
                                                  - Read/Write, etc.
                 Figure 6.         Serial Interface Diagram
S012002-1201                                                                    PCMCIA Interface Overview


                                                                                                         11
                                                                                            Internal Bus
                   Internal Bus                                                                IB7-IB0
                      IB7-IB0     Data
                                    In                                                XCVR
                                               256 Bytes of
                                            Attribute Memory
                                                                 Data                         PCMCIA
                                                                  Out                        Output Bus
                                                 Address                                Bus
                                                                                        Mux
     PCMCIA       Address
                  Counter/
                    Latch
                                   Configuration Option Register,     PCMCIA
                                               Register 0               Bus
             Internal
               Bus
                                   Card Configuration and Status,
                                               Register 1
                                                                        Bus
                                                                        Mux
                Bus                  Pin Replacement Register,
                Mux                            Register 2
                                                                               Internal Bus
                                                                                  IB7-IB0
                                     Socket and Copy Register,        Internal
                                               Register 3               Bus
                                          I/O Event Register
                                               Register 4
            PCMCIA
               Bus
                                   EEPROM Extension Registers,
                                Address, Status, Command and Data
                                          Revision Register
                                              Read Only
             Figure 7.          Attribute and Configuration Memory Diagram
MCIA Interface Overview                                                                  PS012002-1201


IN DESCRIPTION
                                                                                    PC_DATA3
                                 PC_DATA15                                          VDD
                                                                                                         EXTP_APWDN
                                                                                                                                         EE_MASTER
                                                                                                         PC_MCLK_IN
                                                PC_DATA7
                                 PC_HCE1/HCS0               PC_DATA6    PC_DATA5                         V_PINT
                                                                                    EXTP_STSCHG/RES2
                                                                                                         POR
                                 VDD                        VSS         PC_DATA11                        ATA_MWR
                                                PC_DATA13
                                                                                                         EE_D1
                                                                                    EXTP_AUDIO
                                                                                                         EE_D0
                                 PC_DATA14                  PC_DATA12   PC_DATA4                         EE_CS
                                75                  70                       65                 60                                 55    51
              PC_HA10      76                                                                                                                   50   EE_SK
                   VSS                                                                                                                               ATA_MRD
         PC_HCE2//HCS1                                                                                                                               ATA_DREQ/BVD1
           PC_ATA//HOE                                                                                                                               ATA_DACK/BVD2
              PC_HIOR      80                                                                                                                        ATA_PDASP/EXTP_WP
              PC_HIOW                                                                                                                           45   ATA_PDIAG/ATA_BHE/RING_IN
                  VDD                                                                                                                                VSS
                PC_HA9                                                                                                                               ATA_HCS1
                PC_HA8                                                                                                                               ATA_HCS0
               PC_HWE      85                                                                                                                        ATA_HA2
  PC_RDY/BSY/IREQ/HINT                                                                                                                          40   ATA_HA0
                PC_HA7                                                                                                                               ATA_HA1
                   VSS
                                                                   Z86017/Z16017                                                                     VDD
                PC_HA6                                             100-Pin VQFP                                                                      ATA_IOCS16
                PC_HA5     90                                                                                                                        ATA_IREQ
                PC_HA4                                                                                                                          35   ATA_IOCHRDY
    PC_HRESET/HRESET                                                                                                                                 ATA_HIOR
                   VDD                                                                                                                               ATA_HIOW
      PC_WAIT/IOCHRDY                                                                                                                                VSS
                PC_HA3     95                                                                                                                        ATA_DATA15
       PC_INPACK/DREQ                                                                                                                           30   ATA_DATA0
                PC_HA2                                                                                                                               ATA_DATA14
         PC_REG//DACK                                                                                                                                ATA_DATA1
               PC_HA1                                                                                                                                ATA_DATA13
C_BVD2/SPKR/DASP/DREQ      100                                                                                                                  26   ATA_DATA2
                                1               5                       10                 15                                 20        25
                   Pin 1
                                          PC_BVD1/STSCHG/PDIAG
                                                                                                          VSS     ATA_DATA5
                                                                                                                                      VSS
                                 PC_HA0
                                                       PC_DATA0                                                                 ATA_DATA4
                                                       PC_DATA8                                                                ATA_DATA11
                                                              VSS                                                               ATA_DATA3
                                                                                                    ATA_DATA6    ATA_DATA10
                                                       PC_DATA1
                                                       PC_DATA9                                                                      VDD
                                                       PC_DATA2                                                                ATA_DATA12
                                                      PC_DATA10
                                                                                             ATA_DATA9/PACK_IN
                                             PC_WP/IOIS16/IOCS16
                                                     ATA_HRESET
                                                      ATA_DATA7
                                                ATA_DATA8/RES1
                                                             VDD
                    Figure 8.                ZX6017 100-Pin VQFP Pin Configuration
S012002-1201                                                                                                                            PCMCIA Interface Overview


                                                                                                                           13
                                  PC_HAO
                                  PC_BVD1//STSCHG//PDIAG
                                  PC_DATA0                             ATA_DATA9/PACK_IN
                                  PC_DATA8                             ATA_DATA5
                                  VSS
                                  PC_DATA1                             ATA_DATA10
                                  PC_DATA9
                                  PC_DATA2                             VSS
                                  PC_DATA10                            ATA_DATA4
                                  PC_WP//IOS16//IOCS16
                                  ATA_HRESET                           ATA_DATA11
                                  ATA-DATA7                            ATA_DATA3
                                  ATA_DATA8/RES1
                                  VDD                                  VDD
                                  VSS
                                  ATA_DATA6                            ATA_DATA12
                                 75        70           65        60             55   51
  VD2//SPKR//DASP/DREQ      76                                                             50   ATA_DATA2
                 PC_HA1                                                                         ATA_DATA13
          PC_REG//DACK                                                                          ATA_DATA1
                 PC_HA2                                                                         ATA_DATA14
        PC_INPACK/DREQ      80                                                                  ATA_DATA0
                 PC_HA3                                                                    45   ATA_DATA15
       PC_WAIT/IOCHRDY                                                                          VSS
                    VDD                                                                         ATA_HIOW
    PC_HRESET/HRESET                                                                            ATA_HIOR
                 PC_HA4     85                                                                  ATA_IOCHRDY
                                                                                           40   ATA_IREQ
                 PC_HA5                         Z86M17 and Z16M17                               ATA_IOCS16
                 PC_HA6
                    VSS                            100-Pin VQFP                                 VDD
                 PC_HA7                                                                         ATA_HA1
  PC_RDY/BSY/IREQ/HINT      90                                                                  ATA_HA0
               PC_HWE                                                                      35   ATA_HA2
                PC_HA8                                                                          ATA_HCSO
                PC_HA9                                                                          ATA_HCS1
                   VDD                                                                          VSS
              PC_HIOW       95                                                                                      N
                                                                                                ATA_PDIAG/ATA_BHE/RING_I
               PC_HIOR                                                                     30   ATA_PDASP/EXTP_WP
           PC_ATA//HOE                                                                          ATA_DACK/BVD2
         PC_HCE2//HCS1                                                                          ATA_DREQ/BVD1
                    VSS                                                                         ATA_MRD
               PC_HA10      100                                                            26   EE_SK
                                 1     5           10        15             20        25
                    Pin 1
                                         PC_DATA15
                                    PC_HCE1//HCSO
                                                VDD
                                         PC_DATA14
                                          PC_DATA7
                                         PC_DATA13
                                          PC_DATA6
                                                VSS
                                         PC_DATA12
                                          PC_DATA5
                                         PC_DATA11
                                          PC_DATA4
                                          PC_DATA3
                                                VDD
                                 EXTP_STSCHG/RES2
                                        EXTP_AUDIO
                                        EXTP_PWDN
                                        PC_MCLK_IN
                                             M_PINT
                                               /POR
                                          ATA_MWR
                                              EE_DI
                                              EE_D0
                                             EE_CS
                                        EE_MASTER
                    Figure 9.         Z86M17 and Z16M17 (Mirror Image) 100-Pin VQFP
                                      Pin Configuration
MCIA Interface Overview                                                                             PS012002-1201


IN IDENTIFICATION
ble 3. 100-Pin VQFP Pin Identification
X6017 M17 Name                         Description
       75    PC_HA0                    PCMCIA Address, Bit 0
       74    PC_BVD1//STSCHG//PDIAG    Battery Voltage Detect 1, Status Change, PDiag
       73    PC_DATA0                  PCMCIA Data, Bit 0
       72    PC_DATA8                  PCMCIA Data, Bit 8
       71    VSS                       Ground
       70    PC_DATA1                  PCMCIA Data, Bit 1
       69    PC_DATA9                  PCMCIA Data, Bit 9
       68    PC_DATA2                  PCMCIA Data, Bit 2
       67    PC_DATA10                 PCMCIA Data, Bit 10
       66    PC_WP//IOIS16//IOCS16     Write Protect PCMCIA I/O Is 16-Bit Transfers
       65    ATA_HRESET                AT Host RESET
       64    ATA_DATA7                 AT Host Data, Bit 7
       63    ATA_DATA8/RES1            AT Host Data, Bit 8, Reserved Input 1
       62    VDD                       Supply Voltage
       61    VSS                       Ground
       60    ATA_DATA6                 AT Host Data, Bit 6
       59    ATA_DATA9/PACK_IN         AT Host Data, Bit 9, PACK_IN
       58    ATA_DATA5                 AT Host Data, Bit 5
       57    ATA_DATA10                AT Host Data, Bit 10
       56    VSS                       Ground
       55    ATA_DATA4                 AT Host Data, Bit 4
       54    ATA_DATA11                AT Host Data, Bit 11
       53    ATA_DATA3                 AT Host Data, Bit 3
       52    VDD                       Supply Voltage
       51    ATA_DATA12                AT Host Data, Bit 12
       50    ATA_DATA2                 AT Host Data, Bit 2
       49    ATA_DATA13                AT Host Data, Bit 13
       48    ATA_DATA1                 AT Host Data, Bit 1
S012002-1201                                             PCMCIA Interface Overview


                                                                                    15
le 3. 100-Pin VQFP Pin Identification (Continued)
6017 M17 Name                          Description
      47    ATA_DATA14                 AT Host Data, Bit 14
      46    ATA_DATA0                  AT Host Data, Bit 0
      45    ATA_DATA15                 AT Host Data, Bit 15
      44    VSS                        Ground
      43    ATA_HIOW                   AT Host I/O Write Strobe
      42    ATA_HIOR                   AT Host I/O Read Strobe
      41    ATA_IOCHRDY                AT Host I/O Channel Ready
      40    ATA_IREQ                   AT Host Interrupt Request
      39    ATA_IOCS16                 AT Host I/O Is 16 Bits Wide
      38    VDD                        Supply Voltage
      37    ATA_HA1                    AT Host Address, Bit 1
      36    ATA_HA0                    AT Host Address, Bit 0
      35    ATA_HA2                    AT Host Address, Bit 2
      34    ATA_HCS0                   AT Host Chip Select 0
      33    ATA_HCS1                   AT Host Chip Select 1
      32    VSS                        Ground
      31    ATA_PDIAG/ATA_BHE/         PDIAG I/O, Byte High Enable, RING_IN
            Ring_IN
      30    ATA_PDASP/EXTP_WP          PDASP I/O or Write Protect In
      29    ATA_DACK/BVD2              AT Host DMA Acknowledge, Battery Voltage
                                       Input 2
      28    ATA_DREQ/BVD1              AT Host DMA Request, Battery Voltage Input 1
      27    ATA_MRD                    AT Host Memory Read Strobe
      26    EE_SK                      EEPROM Data Clock
      25    EE_MASTER                  EEPROM Is Master
      24    EE_CS                      EEPROM Data Chip Select
      23    EE_DO                      EEPROM Data Out
      22    EE_DI                      EEPROM Data In
      21    ATA_MWR                    AT Host Memory Write Strobe
      20    POR                        Power-On Reset
      19    M_PINT                     Local Processor Interrupt
      18    PC_MCLK_IN                 Master Clock In
MCIA Interface Overview                                              PS012002-1201


ble 3. 100-Pin VQFP Pin Identification (Continued)
X6017 M17 Name                          Description
       17    EXTP_PWDN                  Power Down Output
       16    EXTP_AUDIO                 Audio Input
       15    EXTP_STSCHG/RES2           Status Change Input, Reserved Input 2
       14    VDD                        Supply Voltage
       13    PC_DATA3                   PCMCIA Data, Bit 3
       12    PC_DATA4                   PCMCIA Data, Bit 4
       11    PC_DATA11                  PCMCIA Data, Bit 11
       10    PC_DATA5                   PCMCIA Data, Bit 5
       9     PC_DATA12                  PCMCIA Data, Bit 12
       8     VSS                        Ground
       7     PC_DATA6                   PCMCIA Data, Bit 6
       6     PC_DATA13                  PCMCIA Data, Bit 13
       5     PC_DATA7                   PCMCIA Data, Bit 7
       4     PC_DATA14                  PCMCIA Data, Bit 14
       3     VDD                        Supply Voltage
       2     PC_HCE1//HCS0              PCMCIA Card Enable 1 ATA Chip Select 0
       1     PC_DATA15                  PCMCIA Data, Bit 15
       100   PC_HA10                    PCMCIA Address, Bit 10
       99    VSS                        Ground
       98    PC_HCE2//HCS1              PCMCIA Card Enable 2 ATA Chip Select 1
       97    PC_ATA//HOE                Mode Select/PCMCIA Output Enable
       96    PC_HIOR                    PCMCIA I/O Read Strobe
       95    PC_HIOW                    PCMCIA I/O Write Strobe
       94    VDD                        Supply Voltage
       93    PC_HA9                     PCMCIA Address, Bit 9
       92    PC_HA8                     PCMCIA Address, Bit 8
       91    PC_HWE                     PCMCIA Write Enable
       90    PC_RDY//BSY//IREQ/HINT     PCMCIA Ready/Busy, Interrupt Request
       89    PC_HA7                     PCMCIA Address, Bit 7
       88    VSS                        Ground
       87    PC_HA6                     PCMCIA Address, Bit 6
       86    PC_HA5                     PCMCIA Address, Bit 5
S012002-1201                                              PCMCIA Interface Overview


                                                                                 17
le 3. 100-Pin VQFP Pin Identification (Continued)
6017 M17 Name                          Description
      85    PC_HA4                     PCMCIA Address, Bit 4
      84    PC_HRESET//HRESET          PCMCIA Reset
      83    VDD                        Supply Voltage
      82    PC_WAIT/IOCHRDY            PCMCIA Wait, /IOCHRDY
      81    PC_HA3                     PCMCIA Address, Bit 3
      80    PC_INPACK/DREQ             PCMCIA Input Acknowledge, DREQ
      79    PC_HA2                     PCMCIA Address, Bit 2
      78    PC_REG//DACK               PCMCIA Register Signal, DACK
      77    PC_HA1                     PCMCIA Address, Bit 1
      76    PC_BVD2//SPKR//DASP/       PCMCIA Battery Voltage Detect 2, Speaker
            DREQ                       Output, DASP, DREQ
MCIA Interface Overview                                            PS012002-1201


IN FUNCTIONS
       PCMCIA Signals
            • PC_DATA<15:0> ( I/O, Tristate, 8 mA)
              PCMCIA Mode: 16-bit host Data bus.
              ATA/IDE Mode: 16-bit host Data bus.
            • PC_HA<10:3> (Input)
              PCMCIA Mode: Host Address lines: 10,9,8,7,6,5,4,3.
              ATA/IDE Mode: Not used.
            • PC_HA<2:0> I(nput)
              PCMCIA Mode: Host Address lines: 2,1,0.
              ATA/IDE Mode: Host Address lines: 2,1,0.
            • PC_HCE1//HCS0 (Input, 100K Pull-Up)
              PCMCIA Mode: This signal is Card Enable 1 (active Low).
              ATA/IDE Mode: Host Chip Select 0 (active Low).
            • PC_HCE2//HCS1 (Input, 100K Pull-Up)
              PCMCIA Mode: This signal is Card Enable 2 (active Low).
              ATA/IDE Mode: Host Chip Select 1 (active Low).
            • PC_REG/DACK (Input, 100K Pull-Up)
              PCMCIA Mode: (/REG), Register bit is asserted when the host
              selects I/O or Attribute Memory.
              ATA/IDE Mode: Data acknowledge (/DACK) defined in ATA. Issued
              during DMA data transfers on the data bus.
            • PC_ATA//HOE ( Input, 100K Pull-Up)
              PCMCIA Mode: Memory Output Enable Strobe.
              ATA/IDE Mode: When pulled Low on Power-On Reset, this signal
              indicates ATA/IDE mode.
            • PC_HWE (Input, 100K Pull-Up)
              PCMCIA Mode: Memory Write Enable Strobe.
              ATA/IDE Mode: Not used.
S012002-1201                                          PCMCIA Interface Overview


                                                                                      19
            •   PC_HIOR (Input, 100K Pull-Up)
                PCMCIA Mode: In PCMCIA I/O mode, this is the Input/Output Read
                Strobe.
                ATA/IDE Mode: Input/Output Read Strobe.
            •   PC_HIOW (Input, 100K Pull-Up)
                PCMCIA Mode: In PCMCIA I/O mode, this is the Input/Output
                Write Strobe.
                ATA/IDE Mode: Input/Output Write Strobe.
            •   PC_HRESET/HRESET(Input, Schmitt-Triggered, 100K Pull-Up)
                PCMCIA Mode: Active High input Reset signal.
                ATA/IDE Mode: Active Low input Reset signal.
            •   PC_RDY/BSY/IREQ/HINT (Output, 8 mA)
                PCMCIA Mode: In PCMCIA memory mode, this signal is READY/
                BUSY. This signal will be asserted BUSY by the RESET logic. In
                PCMCIA I/O mode, this signal is /IREQ.
                ATA/IDE Mode: When enabled, the HINT signal is used to interrupt
                the host (active High).
            •   PC_WP//IOIS16//IOCS16 (Output, Tri-State, 8 mA)
                PCMCIA Mode: In PCMCIA memory mode, this signal is Write
                Protected. In PCMCIA I/O mode, this signal is IOIS16 and indicates
                that a 16-bit capable I/O device is being accessed on the PCMCIA
                bus.
                ATA/IDE Mode: I/O chip select 16 indicates that a 16- bit transfer is
                active on the bus.
            •   PC_WAIT/IOCHRDY (Output, Tri-State, 8 mA)
                PCMCIA Mode: Insert Wait States when held active and the chip is
                being selected in I/O or memory mode.
                ATA/IDE Mode: Inserts Wait States when held active, and when the
                chip is being selected.
            •   PC_INPACK/DREQ (Output, Tri-State, 8 mA)
                PCMCIA Mode: In PCMCIA I/O mode this signal is Input
                Acknowledge. It is asserted by the card when the card is selected and
MCIA Interface Overview                                               PS012002-1201


              can respond to an I/O cycle at the address on the address bus.
              ATA/IDE Mode: This signal is Data request (DREQ), defined in ATA.
              It is issued during DMA data transfers on the data bus.
            • PC_BVD1/STSCHG/PDIAG (I/O, 8 mA)
              PCMCIA Memory Mode: Battery Voltage Detect 1, output.
              PCMCIA I/O Mode: Status Changed. This signal is used to indicate
              the change of status in the Pin Replacement Register (I/O Mode) or
              state of the BVD1 input when in Memory Mode.
              ATA/IDE Mode: Passed diagnostics.
            • PC_BVD2/SPKR/DASP/DREQ (I/O, Tri-State, 10 mA)
              PCMCIA Memory Mode: Battery Voltage Detect 2, output.
              PCMCIA I/O Mode: SPKR, inverted AUDIO_EXTP signal, output;
              PCMCIA ATA Mode: ATA Data Request is the input pin for this
              signal, when DMA Enable bit is set in Window Start/Range Address
              registers.
              ATA/IDE Mode: Drive active/Slave present DASP.
            • ATA_DATA<15:10> (I/O, Tri-State, 8 mA)
              ATA/IDE Mode: Host Data Bus, bits: 15,14,13,12,11,10.
S012002-1201                                            PCMCIA Interface Overview


                                                                                      21
      Peripheral or ATA/IDE Signals
            •   ATA_DATA<15:10> (I/O, Tri-State, 8 mA)
                ATA/IDE Mode: Host Data Bus, bits: 15,14,13,12,11,10.
                Peripheral Mode: Peripheral data bus, bits: 15, 14, 13, 12, 11,10.
            •   ATA_DATA9/PACK_IN (I/O, Tri-State, 8 mA)
                ATA/IDE Mode: Host Data Bus, bit: 9.
                Peripheral Mode: When 8-bit mode is enabled (on the Local side)
                ATA_DATA9 can be used as a PACK_IN input.
            •   ATA_DATA8/RES1 (I/O, Tri-State, 8 mA)
                ATA/IDE Mode: Host Data Bus, bit: 8.
                Peripheral Mode: When 8-bit mode is enabled (on the Local side),
                ATA_DATA8 can be used as a RES1 input.
            •   ATA_DATA<7:0> (I/O, Tri-State, 8 mA)
                ATA/IDE Mode: Host Data Bus, bits: 7,6,5,4,3,2,1,0.
                Peripheral Mode: Peripheral Data Bus, bits: 7,6,5,4,3,2,1,0.
            •   ATA_HA<2:0> (Output, 8 mA)
                ATA/IDE Mode: ATA Host Address bits used to address the IDE
                interface chip.
                Peripheral Mode: Lower three bits offset from starting address.
            •   ATA_HCS0 (Output, 8 mA)
                ATA/IDE Mode: ATA Host Chip Select 0, used to select the IDE
                interface chip.
                Peripheral Mode: Chip Select 0 used as a chip select for an external
                peripheral device as defined by the address range and offset register
                definition.
            •   ATA_HCS1 (Output, 8 mA)
                ATA/IDE Mode: ATA Host Chip Select 1, used to select the IDE
                interface chip.
                Peripheral Mode: Chip Select 1 used as a chip select for an external
                peripheral device as defined by the address range and offset register
                definition.
MCIA Interface Overview                                               PS012002-1201


            • ATA_HIOR (Output, 8 mA)
              ATA/IDE Mode: ATA Host I/O Read Strobe.
              Peripheral Mode: I/O read strobe or memory read strobe, depending
              on configuration.
            • ATA_HIOW (Output, 8 mA)
              ATA/IDE Mode: ATA Host I/O Write Strobe.
              Peripheral Mode: I/O Write Strobe or Memory Write Strobe,
              depending on configuration.
            • ATA_IOCS16 (Input, 100K Pull-Up)
              ATA/IDE Mode: I/O channel is 16 bits wide; input on the local ATA
              bus.
              Peripheral Mode: I/O access is 16 bits wide.
            • ATA_IREQ (Input)
              ATA/IDE Mode: ATA/IDE host Interrupt Request.
              Peripheral Mode: Interrupt Request.
            • ATA_IOCHRDY (Input, 100K Pull-Up)
              ATA/IDE Mode: ATA/IDE I/O Channel Ready-Input.
              Peripheral Mode: I/O Channel Ready.
            • ATA_HRESET (Output, 8 mA)
              ATA/IDE Mode: ATA Host Reset-Output to the ATA/IDE controller
              (programmable).
              Peripheral Mode: Host reset output to the peripheral device if
              PCMCIA signal is active (programmable).
            • ATA_DREQ/BVD1 (Input)
              ATA/IDE Mode: ATA/IDE DMA request from the ATA/IDE
              controller.
              Peripheral Mode: Peripheral bus DMA Request or when in memory
              mode Battery Voltage 1 Detect input.
            • ATA_DACK/BVD2 (I/O, 8 mA)
              ATA/IDE Mode: ATA/IDE host DMA Acknowledge.
              Peripheral Mode: Peripheral Bus DMA Acknowledge. DMA
S012002-1201                                           PCMCIA Interface Overview


                                                                                      23
                acknowledge is generated by the ZX6017 whenever DMA
                Acknowledge is enabled in the Window Start/Range Address
                registers and the address corresponds to the DMA address; or Battery
                Voltage 2 Detect input in memory mode.
            •   ATA_PDASP/EXTP_WP (I/O, Tri-State, 8 mA)
                ATA/IDE Mode: ATA/IDE bus side PDASP signal controlled by
                internal bits ZEN_EXT_PDASP (Input) or ZEN_INT_PDASP
                (Output).
                Peripheral Mode: When configured as a Write Protect input, this pin
                will disable Write on the peripheral bus side.
            •   ATA_PDIAG/ATA_BHE/RING_IN (I/O, Tri-State, 8 mA)
                ATA/IDE Mode: ATA/IDE bus side PDIAG signal controlled by
                internal bits ZEN_EXT_PDIAG (Input) or ZEN_INT_PDIAG
                (Output).
                Peripheral Mode: When configured as Byte High Enable for memory
                boards, ATA_BHE indicates High byte available, or it can be
                configured to be the RING_IN input signal for the I/O event indicator
                CCR4.
            •   ATA_MRD (Output, 8 mA)
                ATA/IDE Mode: Not used.
                Peripheral Mode: External Memory Read Strobe.
            •   ATA_MWR (Output, 8 mA)
                ATA/IDE Mode: Not used.
                Peripheral Mode: External Memory Write Strobe.
MCIA Interface Overview                                              PS012002-1201


       Serial Interface Signals
            •  EE_DO (Output, 8 mA, Tri-State)
               Master Mode: EEPROM data out Serial data, valid during EE_SK
               edge. In master mode, this signal is an output.
               Slave Mode: In slave mode, this signal is an output.
            •  EE_SK (I/O, 8 mA)
               Master Mode: EEPROM data clock. This signal is an output in master
               mode. It is active during R/W cycle only.
               Slave Mode: In slave mode, this signal is an input.
            •  EE_CS (I/O, 8 mA)
               Master Mode: EEPROM data chip select. This signal is an output in
               master mode.
               Slave Mode: In slave mode this signal is an input. This signal is active
               High.
            •  EE_DI (Input, 100K Pull-Up)
               Master Mode: EEPROM data in. This signal is an input in master
               mode.
               Slave Mode: In slave mode, this signal is an input.
            •  EE_MASTER (Input, Schmitt-Triggered, 100K Pull-Up)
               Master/Slave mode detect: When set Low, no EEPROM is present.
               When set High EEPROM is present.
S012002-1201                                             PCMCIA Interface Overview


                                                                                         25
      Peripheral Control Signals
            •   POR (Input, Schmitt-Triggered, 100K Pull-Up)
                Local Power-On Reset signal. A 0.1mF capacitor is recommended on
                this pin to GND to generate a POR.
            •   M_PINT (Output, Tri-State, 8 mA)
                Interrupt to local microprocessor
            •   PC_MCLK_IN (Input, Schmitt-Triggered)
                Master Clock In. This is an input signal. This clock signal is used to
                generate all internal timing. All local bus signals are asynchronous to
                this clock.
            •   EXTP_STSCHG/RES2 (Input, 100K Pull-Up)
                Status Change Input. This signal outputs the value of the status
                changed line on the PCMCIA bus if enabled in the CCR register, or it
                is an input for bit 7 (RSVDEVT3) in CCR4.
            •   EXTP_AUDIO (Input 100K Pull-Up)
                Audio Input. This input signal reflects the audio output. This signal is
                active High, and the Speaker output on the PCMCIA bus is active
                Low.
            •   EXTP_PWDN (Output, 8 mA)
                Power Down Output. This signal reflects the state of the Power Down
                bit in the CCR.
            •   VSS (Input)
                Ground.
            •   VDD (Input)
                Supply Voltage.
MCIA Interface Overview                                                 PS012002-1201


S012002-1201 PCMCIA Interface Overview

                                                                                             27
 ddressing Modes
              •   The ZX6017 supports all PCMCIA Addressing Modes:
              •   PCMCIA Common Memory Mode
              •   PCMCIA I/O Mode
              •   PCMCIA ATA_IDE Mode
              •   Pass-through ATA/IDE-to-ATA/IDE Mode
              Note: This mode is for users who have a 68-pin PCMCIA connector,
                      but are using ATA/IDE protocol instead of PCMCIA protocol.
              The overall ZX6017 mode of operation is controlled by the Interface
              Configuration Register (00h) bits 3,2. 00 in these two bits sets the device
              to ATA/IDE mode if the PC_ATA/HOE pin is Low on power-up and into
              PCMCIA mode if the pin is High. The default for this register is 00 and
              the PC_ATA/HOE pin determines the mode of operation, PCMCIA or
              ATA/IDE. Table 4 describes these addressing modes.
 le 4. ZX6017 Addressing Modes
ode/Bus                   PCMCIA       Peripheral Bus        Comments
emory                     Memory       Memory
O                         I/O          I/O
  MCIA_ATA_Memory         Memory       ATA
  MCIA_ATA_I/O            I/O          Primary ATA           Contiguous block of at least
                                       Secondary ATA         16 I/O registers is assigned to
                                       Contiguous ATA        one card.
 ss-Through Mode          ATA/IDE      ATA/IDE
              To place the ZX6017 into proper Addressing mode, a set of Configuration
              Registers and Memory Maps reside on-chip.
dressing Modes                                                            PS012002-1201


            The four on-chip address maps are:
            •   Memory_Map_1
            •   Memory_Map_2
            •   Memory_Map_3
            •   PCMCIA_ATA/IDE Map
            Memory_Map_1, _2 and _3 support PCMCIA Memory/IO Mode. The
            chip can be configured in PCMCIA Mode either by:
            •   Pulling the PC_ATA/HOE pin High during RESET;
            or by
            •   Writing 10 in Override bits (bits 3, 2) in the Interface Configuration
                Register 0 (address 00h), and 0 in bits 0, 1, 2, 6 of the Interface
                Configuration Register 02 (address 03h).
            After placing the device into PCMCIA Mode, each Map can be
            configured independently through its set of configuration registers.
            Each Memory Map contains a set of Configuration Registers consisting
            of:
            •   Window Control Register
            •   Window Start Address LSB Register
            •   Window Start/Range Address MSB
            •   Window Range Address LSB
            The PCMCIA_ATA/IDE Map enables chip operation in PCMCIA_ATA/
            IDE mode. When in this mode, the chip responds to different types of
            accesses, depending on the content of the following registers:
            •   Interface Configuration Register 02, address 03h (bits 0, 1, 6)
            •   Interface Configuration Register 03, address 04h (bits 0, 1, 2, 3)
            •   PCMCIA Exception Status Register, address 071h (bit 0)
S012002-1201                                                          Addressing Modes


                                                                                     29
              Table 5 describes programming PCMCIA_ATA ZX6017 Configuration
              Registers.
e 5. Programming PCMCIA_ATA ZX6017 Configuration Registers
_2
        ICR_02[6] ICR_03[3:0] CICR_1[7:0] CICR_2[7:0] CCR0[5:0] addr
 03     addr03    addr04       addr2DH    addr2EH     addr0AH 07[0} Description
        x         xxxx         xxxxxxxx   xxxxxxxx    xxxxx     1    Chip operates
                                                                     in ATA/IDE-
                                                                     to-ATA/IDE
                                                                     passthrough
                                                                     mode
        0         xxxx         xxxxxxxx   xxxxxxxx    xxxxx     0    PCMCIA
                                                                     Mode
        1         1111         FFH        FFH         00011     0    Enabled access
                                                                     to Primary set
                                                                     of IDE Task
                                                                     File Registers
                                                                     (1Fo-1F7)
        1         1111         FFH        FFH         00011     0    Enabled access
                                                                     to Primary set
                                                                     of IDE Task
                                                                     File Registers
                                                                     (3F6-3F7)
        1         1111         FFH        FFH         00010     0    Enabled access
                                                                     to Secondary
                                                                     set of IDE Task
                                                                     File Registers
dressing Modes                                                     PS012002-1201


 le 5. Programming PCMCIA_ATA ZX6017 Configuration Registers (Continued)
R_2
0]        ICR_02[6] ICR_03[3:0] CICR_1[7:0] CICR_2[7:0] CCR0[5:0] addr
 r03      addr03    addr04       addr2DH      addr2EH   addr0AH 07[0} Description
          1         1111         FFH          FFH       00001      0      PCMCIA_AA
                                                                          Independent
                                                                          IO Mode. Chip
                                                                          responds to
                                                                          any 1/0 access
                                                                          in the range
                                                                          000 to 00Fh
          1         1111         FFH          FFH       00000      0      PCMCIA
                                                                          Independent
                                                                          Memory
                                                                          Mode.
                                                                          Chip responds
                                                                          to any Memory
                                                                          access in the
                                                                          range 000-
                                                                          00Fh
                Tables 6 through Table 9 provide ZX6017 addressing information in each
                mode.
 ble 6. PCMCIA Common Memory Mode
 unction Mode       REG      CE2   CE1     A0     0E   WE      D15-D8       D7-D0
 tandby Mode        X        H     H       X      X    X       High-Z       High-Z
  yte Access        H        H     L       L      L    H       High-Z       Even-Byte
                    H        H     L       H      L    H       High-Z       Odd-Byte
Word Access         H        L     L       Z      L    H       Odd-Byte     Even-Byte
  dd-Byte only      H        L     H       X      H    L       Odd-Byte     XX
 ccess
S012002-1201                                                         Addressing Modes


                                                                           31
 le 7. PCMCIA I/O Mode
  nction Mode      REG  CE2  CE1    A0    OE     WE  D15-D8      D7-D0
andby Mode         X    H    H      X     X      X   High-Z      High-Z
  te Access        H    H    L      L     L      H   High-Z      Even-byte
                   H    H    L      H     L      H   High-Z      Odd-byte
ord Access         H    L    L      Z     L      H   Odd-byte    Even-byte
    Inhibit        H    X    X      X     L      H   High-Z      High-Z
  d-byte only      L    L    H      X     L      H   Odd-byte    High-Z
cess
  te Access        L    H    L      L     H      L   X           Even-byte
                   L    H    L      H     H      L   X           Odd-Byte
ord Access         L    L    L      L     H      L   Odd-byte    Even-byte
    Inhibit        H    X    X      X     H      L   X           X
  d-byte only      L    L    H      X     H      L   Odd-byte    X
cess
 le 8. PCMCIA_ATA Memory Mapped Access
EG#       A10 A[9:4] A3  A2  A1   A0   OE#              WE#
          L   X      L   L   L    L    Read Data        Write Data
          L   X      L   L   L    H    Error            Feature
          L   X      L   L   H    L    Sector Count     Sector Count
          L   X      L   L   H    H    Sector Number    Sector Number
          L   X      L   H   L    L    Cylinder Low     Cylinder Low
          L   X      L   H   L    H    Cylinder High    Cylinder High
          L   X      L   H   H    L    Drive/Head       Drive/Head
dressing Modes                                              PS012002-1201


 ble 8. PCMCIA_ATA Memory Mapped Access
REG#      A10   A[9:4]   A3   A2 A1   A0   OE#                 WE#
H         L     X        L    H  H    H    Status              Status
H         L     X        H    L  L    L    Duplicate Even      Duplicate Even
                                           Read Data           Write Data
H         L     X        H    L  L    H    Duplicate Odd       Duplicate Odd
                                           Read Data           Write Data
H         L     X        H    H  L    H    Duplicate Error     Duplicate Feature
H         L     X        H    H  H    L    Alt Status          Device Control
H         L     X        H    H  H    H    Drive Address       Reserved
H         H     X        X    X  X    L    Even Read Data      Even Write Data
H         H     X        X    X  X    H    Odd Read Data       Odd Write Data
 ble 9. PCMCIA_ATA I/O Mapped Access
         Primary       Secondary  Contiguous
 EG#     A[9:0]        A[9:0]     A[3:0]       IORD# = L         IOWR# = L
         1F0H          170H       00H          Read Data         Write Data
         1F1H          171H       01H          Error             Feature
         1F2H          172H       02H          Sector Count      Sector Count
         1F3H          173H       03H          Sector Number     Sector Number
         1F4H          174H       04H          Cylinder Low      Cylinder Low
         1F5H          175H       05H          Cylinder High     Cylinder High
         1F6H          176H       06H          Drive/Head        Drive/Head
         1F7H          177        07H          Status            Command
         –             –          08H          Duplicate Even    Duplicate Even
                                               Read Data         Write Data
         –             –          09H          Duplicate Odd     Duplicate Odd
                                               Read Data         Write Data
         –             –          0DH          Duplicate Error   Duplicate
                                                                 Feature
         1F6H          376H       0EH          Alt Status        Device Control
         3F7H          377H       0FH          Drive Access      Reserved
S012002-1201                                                    Addressing Modes


                                                                                     33
rogramming Internal Registers
TRODUCTION
            As stated in “Addressing Modes” on page 27, the ZX6017 devices feature
            a set of on-chip programmable registers that can be programmed either by
            using the on-board EEPROM Sequencer (MASTER Mode) or by Local
            Microprocessor (SLAVE Mode). A set of Card Configuration Registers
            can be accessed from the PCMCIA interface. Table 10 lists the
            programmable registers.
           Table 10.    ZX6017 Card Configuration Registers
PROM    PCMCIA                                                    POR
dress   Address       Register’s Name                   Access    Value  Comments
        NA            Interface Configuration Rg 0      R/W       00h
        NA            Interrupt Enable Rg               R/W       00h
        NA            Interface Configuration Rg 1      R/W       00h
        NA            Interface Configuration Rg 2      R/W       00h
        NA            Interface Configuration Rg 3      R/W       00h
        NA            PCMCIA CCR’s Base Rg              R/W       00h
        NA            PCMCIA Interrupt Status Rg        R         00h    Note1
        NA            PCMCIA Exception Status Rg        R         00h    Note1
        NA            Attribute RAM Address Rg          W         XX     Note1
        NA            Attribute RAM Data Rg             R/W       XX     Note1
h       XX0h          PCMCIA Configuration Option Rg    R/W       00h    Note2
                      (CCR0)
        XX2h          PCMCIA Card Configuration and     R/W       00h    Note2
                      Status Rg (CCR1)
        XX4h          PCMCIA Pin Replacement Rg (CCR2)  R/W       00h    Note2
h       XX6h          PCMCIA Socket and Copy Rg (CCR3)  R/W       00h    Note2
 –0Fh                 Reserved                                    XX
        NA            Window 1 Control Rg               R/W       01h
        NA            Window 1 Start Address LSB Rg     R/W       00h
 gramming Internal Registers                                          PS012002-1201


           Table 10.   ZX6017 Card Configuration Registers (Continued)
EPROM    PCMCIA                                                POR
ddress   Address     Register’s Name                    Access Value    Comments
 h       NA          Window 1 Start/Range Address MSB   R/W    00h
                     Rg
 h       NA          Window 1 Range Address LSB Rg      R/W    00h
 h       NA          Window 2 Control Rg                R/W    01h
 h       NA          Window 2 Start Address LSB Rg      R/W    00h
 h       NA          Window 2 Start/Range Address MSB   R/W    00h
                     Rg
 h       NA          Window 2 Range Address LSB Rg      R/W    00h
 h       NA          Window 3 Control Rg                R/W    01h
 h       NA          Window 3 Start Address LSB Rg      R/W    00h
Ah       NA          Window 3 Start/Range Address MSB   R/W    00h
                     Rg
Bh       NA          Window 3 Range Address LSB Rg      R/W    00h
Ch–1Dh               Reserved                                  XX
 h       NA          EEPROM Valid Flag Byte Rg (1Ch)    R/W    00h      Master Mode
                                                                        only
 h       XX8h        PCMCIA I/O Event Indication Rg     R/W    00h      Note2, Note3
                     (CCR4)
 h       7F0h        EEPROM Addr/Status Rg (CCR5)       R/W    00h      Note1
                     Back Door
 h       7F2h        EEPROM Data Rg (CCR6) Back Door    R/W    00h      Note1
 h       7F4h        EEPROM Command Rg (CCR7) Back      R/W    00h      Note1
                     Door
 h       NA          Revision Control Rg                R/W    00h      Note3
 h       7F6h        Revision Number Rg                 R               Note4
 h                   Reserved                           R/W    XX
 h       NA          Bus Control Rg 1                   R/W    00h      Note5
 h       NA          IOIS16 Address Control Rg          R/W    00h      Note5
S012002-1201                                          Programming Internal Registers


                                                                                                                                  35
                     Table 10.         ZX6017 Card Configuration Registers (Continued)
PROM             PCMCIA                                                                              POR
dress            Address            Register’s Name                                   Access         Value          Comments
                 NA                 ATA/IDE Dual Drive Control Rg                     R/W            00h            Note3
                                    Reserved                                          R/W            00h
h                NA                 Power Management Timer Count Value                R/W            00h            Note3
                                    Rg
                 NA                 Power Management Control Rg                       R/W            00h            Note3
                 NA                 Interface Con•guration Rg 4                       R/W            00h            Note3
h                NA                 Con•guration Index Compare Rg 1                   R/W            00h            Note3
                 NA                 Con•guration Index Compare Rg 2                   R/W            00h            Note3
                 NA                 Bus Control Rg 2                                  R/W            00h            Note3
 –FFh                               User-Definable Attribute Memory                   R/W            XXh            Note6
                                    Location 00h–CFh (208-byte)
 ES:
en the ZX6017 is in Master Mode, the user should program this location in EEPROM with 00h.
e PCMCIA base address for these registers could be set in the range of 000h–400h. At Power-On Reset
OR), the base is set to 000h.
er must write the Revision Number (see ZX6017 top mark) to the Revision Control register to unlock these registers.
  Z86017 BA Revision Number is 10h (see device top mark).
 se registers are only available on the Z16017.
en the ZX6017 is in Master Mode, data at EEPROM addresses 30h–FFh are written locations 00h–CFh of the on-board Attribute Memory.
 lave Mode, Attribute Memory is programmed through registers 08h and 09h.
 gramming Internal Registers                                                                                PS012002-1201


EPROM REGISTER
EPROM Register
ddress: SELECT 00h
ame: Interface Configuration Register 0
ype: Read/Write
             Table 11.    Interface Configuration Register: Address 00h
it Placement Bit Name                   Description
its 1–0      Set Internal               Internal Clock Divider. On Power-On Reset, clock divide-
                                        by-32 selects the Master Clock. On Power-On Reset, set
                                        these bits to 0 0. Table 12 describes Master Clock
                                        Settings.
                                        Bit 1         Bit 0
                                        0             0     Slowest Clock, Clock In divide-by-32
                                        1             1     Clock In divide-by-16
                                        1             0     Clock In divide-by-4
                                        1             1     Clock In
its 3–2      EN_OVERIDE                Overrides PCMCIA ATA mode bits, /PC_ATA//HOE
                                        selection on the PCMCIA interface. On Power-On Reset,
                                        both bits are set to 0. Sample /PC_ATA//HOE.
                                        Bit 3         Bit 2
                                        0             0       PC_ATA/HOE Sampled to Set Mode
                                        0             1       Forces ATA/IDE Pass Through Mode
                                        1             0       Forces PCMCIA Mode
                                        1             1       Reserved
S012002-1201                                                  Programming Internal Registers


                                                                                                     37
           Table 11.  Interface Configuration Register: Address 00h (Continued)
 Placement  Bit Name                Description
4           EN_RDY_BSY              When this bit is set to 1, the PC_RDY/BSY/REQ/HINT
                                    pin is configured as RDY//BSY. To con•gure this pin as an
                                    IREQ/HINT, set this bit to 0. On Power-On Reset, the
                                    ZX6017 automatically reads the EEPROM and also
                                    determines if a PCMCIA device is connected. After the
                                    entire attribute memory is loaded and the chip initialization
                                    is complete, the READY/BSY signal on the PCMCIA bus
                                    indicates READY. Without an EEPROM, the device
                                    indicates READY whenever this bit is set and the ZX6017
                                    has determined a PCMCIA bus is connected.
5           EN_CTR_IRQ              Enables PCMCIA Interrupt Mode. Enables ATA_IREQ pin
                                    to control PC_IREQ in I/O Mode. This bit is active when
                                    set to 1. On Power-On Reset, this bit is set to 0.
6           EN_INT_POL              Enable local (M_PINT) processor interrupt polarity active
                                    Low. This bit is active when set to 1. On Power-On Reset,
                                    this bit is set to 0. Interrupt is active High. M_PINT is a tri-
                                    state driven signal. Whenever an interrupt is present and
                                    enabled, M_PINT is driven. If the interrupt is programmed
                                    active High, then M_PINT is driven from tri-state to High.
                                    If the interrupt polarity selects active Low interrupts, then
                                    the interrupt is driven from tri-state to active Low. Also see
                                    Register 2Ch.
7           EN_ATA_BHE              When this bit is set to 1, it enables the ATA_PDIAG/
                                    ATA_BHE/RING_IN pin to be used as a Byte High Enable
                                    pin on a local interface side. Byte High Enable is used to
                                    signify that a PCMCIA host is requesting or sending data
                                    on the high byte bus pins ATA_DATA[15-8] of the local
                                    bus. For ATA_BHE, also see Register 2Fh. When set to 0,
                                    ATA_PDIAG/ATA_BHE/RING_IN is used as a local
                                    bidirectional PDIAG pin. On Power-On Reset, this bit is
                                    set to 0.
gramming Internal Registers                                                      PS012002-1201


                      Table 12.         Master Clock
                                                                   EEPROM
Register 0            Register 0                                   CLK                     Interrupt
Bit 1                 Bit 9                   Clock In             Timing                  Pulse1Width            Comments
                      0                       50 ns                6.4 µs                  204 µs
                      1                       50 ns                3.2 µs                  102 µs
                      0                       50 ns                800 ns                  25 µs                  Recommended
                      1                       50 ns                200 ns                  5.25 µs
                      0                       100 ns               12.8 µs                 404 µs
                      1                       100 ns               6.4 µs                  204 µs
                      0                       100 ns               1.6 µs                  50 µs
                      1                       100 ns               400 ns                  12.5 µs                Recommended
OTES:
The pulse width of the /PC.IREQ signal in pulse mode is dependent on the clock period of the master clock input (TPMCKIN). The pulse
width of the /PC.IREQ signal is equal to 192 x TPMCKIN.
S012002-1201                                                                         Programming Internal Registers


                                                                                                     39
PROM Register
dress: SELECT 01h
me: Interrupt Enable Register
pe: Read/Write
            Table 13. Interrupt Enable Register: Address 01h
 Placement  Bit Name               Description
0           EN_PC_INT0             Enables Local Processor interrupt when PCMCIA host has
                                   written CCR0, the Con•guration Option Register. This
                                   interrupt stays present until this bit is set to 0. This bit is
                                   active when set to 1. On Power-On Reset, this bit is set to
                                   0. Also see Registers 06h, 2Ch.
1           EN_PC_INT1             Enables Local Processor interrupt when PCMCIA host has
                                   written CCR1, the Card Status Register. This interrupt
                                   stays present until this bit is set to 0. This bit is active when
                                   set to 1. On Power-On Reset, this bit is set to 0. Also see
                                   Registers 06h, 2Ch.
2           EN_PC_INT2             Enables Local Processor interrupt when PCMCIA host has
                                   written CCR2, the Pin Replacement Register. This
                                   interrupt stays present until this bit is set to 0. This bit is
                                   active when set to 1. On Power-On Reset, this bit is set to
                                   0. Also see Registers 06h, 2Ch.
3           EN_PC_INT3             Enables Local Processor interrupt when PCMCIA host has
                                   written CCR3, the Socket and Copy Register. This
                                   interrupt stays present until this bit is set to 0. This bit is
                                   active when set to 1. On Power-On Reset, this bit is set to
                                   0. Also see Registers 06h, 2Ch.
4           EN_PC_INT4             Enables Local Processor interrupt when ATA_IREQ is
                                   asserted. This interrupt stays present until this bit is set to
                                   0. This bit is active when set to 1. On Power-On Reset, this
                                   bit is set to 0. Also see Registers 06h, 2Ch.
5           EN_EXTP_WP             Enables external write protect pin as an input when set to
                                   1. When set to 0, this bit is DASP on the local AT bus side.
                                   On Power-On Reset, this bit is set to 0.
gramming Internal Registers                                                     PS012002-1201


             Table 13. Interrupt Enable Register: Address 01h (Continued)
it Placement Bit Name               Description
it 6         CCR0_OVERIDE           ATA_DASP is used as a DASP pin. Also see Register 02h.
                                    Card Con•guration Register 0 is normally written after
                                    Power-On Reset by the PCMCIA host. If Interrupts are
                                    allowed by the local processor or EEPROM, then the
                                    PCMCIA READY/BSY signal is configured as an
                                    interrupt signal only when the Card Configuration Register
                                    is written. If the local processor does not require the
                                    PCMCIA host to write to CCR0, bit CCR0_OVERIDE can
                                    be set to force the internal logic to select the PCMCIA
                                    READY/BSY as the Interrupt pin, if interrupts are enabled.
                                    This bit is active when set to 1. On Power-On Reset, set
                                    this bit to 0, no override selected. PCMCIA host must
                                    select interrupts and write to the Card Con•guration
                                    Register 0.
it 7         EN_INPACK              Enable PCMCIA Input acknowledge when set to 1. On
                                    Power-On Reset, this bit is set to 0.
S012002-1201                                               Programming Internal Registers


                                                                                                     41
PROM Register
dress: SELECT 02h
me: Interface Configuration Register 1
pe: Read/Write
 le 14. Interface Configuration Register 1: Address 02h
 Placement    Bit Name                Description
0             PDIAG_SET               When set to 1, this bit activates PDIAG on the PCMCIA
                                      bus side. On Power-On Reset, this bit is set to 0.
1             EN_PDIAG                When set to 1, this bit drives the PCMCIA pin on the
                                      PCMCIA side. On Power-On Reset, this bit is set to 0
                                      (Table 15). Also see Registers 04h, 07h.
2             PDASP_SET               When set to 1, this bit sets the DASP pin on the PCMCIA
                                      side. On Power-On Reset, this bit is set to 0.
3             EN_DASP                 When set to 1, this bit drives the DASP pin on the
                                      PCMCIA side. On Power-On Reset, this bit is set to 0
                                      (Table 16).
4             EN_OR_CS01              When set to 1, this bit is active and ATA_HCS0 has the
                                      same level as ATA_HCS1. On Power-On Reset, this bit is
                                      set to 0 (Table 17). Also see Register 03h (Table 19).
5             EN_SPKR                 When set to 1, this bit is active and connects
                                      EXTP_AUDIO (inverted) to the PC_BVD2//SPKR//
                                      DASP/DREQ pin. On Power-On Reset, this bit is set to 0
                                      (Table 18).
6             EN_DASP_INT             When set to 1, DASP is generated internally. On Power-On
                                      Reset, this bit is set to 0.
7             EN_DASP_EXT             When set to 1, DASP is generated externally from the
                                      AT_DASP pin on the local AT bus side. On Power-On
                                      Reset, this bit is set to 0. Also see Register 01h (Table 13).
gramming Internal Registers                                                     PS012002-1201


               Table 15.  PCMCIA PDIAG Pin Functions
                                                    PCMCI      Register 7
egister2 Register2  Register 4 Register4            A          Bit5,PCM
t 1      Bit 0      Bit 7      Bit 6     ATA_PDI PDIAG         CIA
N_PDI    PDIAG_S    EN_PDIAG   EN_PDIAG AG          OUT        PDIAG
G        ET         _EXT       _INT      Pin I/O    I/O        Input      Comments
         X          X          X         X          Float - Z  PDIAG-     Input mode
                                                               OUT
         1          0          1         X          Float - Z PDIAG-      Input mode
                                                               OUT
         1          0          1         X          1 (Output) 1          Output 1
                                                                          (totem)
         0          0          1         X          0 (Output) 0          Output 0
                                                                          (totem)
         0          1          0         0 (Input)  0 (Output) 0          Output
                                                                          generated
                                                                          from ATA-
                                                                          PDIAG.
         0          1          0         1 (Input)  Float - Z  PDIAG-     Output
                                                               OUT        floated by
                                                                          ATA-PDIAG
                                                                          when set to
                                                                          1.
         0          0          1         0 (Output) 0 (Input)  0          ATA_PDIA
                                                                          G is sourced
                                                                          from
                                                                          PCMCIA
                                                                          side.
         0          0          1         Float - Z  1 (Input)  1
S012002-1201                                        Programming Internal Registers


                                                                                      43
        Table 16.    PCMCIA DASP Pin Functions
                                                        PCMCIA      Register7
 Register2      Register2     Register2                 DASP        PCMCIA
  Bit 2         Bit 7         Bit 6          ATA_DASP OUT           DASP
 DASP_SET EN_DASP_EXT EN_DASP_INT Pin I/O               I/O         Input     Comment
  X             X             X              X          Float - Z   DASP-OUT Input mode
  1             0             1              X          Float- Z    DASP-OUT Input mode
  1             0             1              X          1 (Output)  1         Output 1
                                                                              (totem)
  0             0             1              X          0 (Output)  0         Output 0
                                                                              (totem)
  0             1             0              0 (Input)  0 (Output)  0         Output
                                                                              generated
                                                                              from ATA-
                                                                              DASP.
  0             1             0              1 (Input)  Float- Z    DASP-OUT Output
                                                                              floated
                                                                              when ATA-
                                                                              DASP is set
                                                                              to 1.
  0             0             1              0 (Output) 0 (Input)   0         ATA_DASP
                                                                              is sourced
                                                                              from
                                                                              PCMCIA
                                                                              side.
  0             0             1              Float - Z  1 (Input)   1
gramming Internal Registers                                        PS012002-1201


            Table 17.   Host Chip Select Designations
egister 2
it 4                                                   ATA_HCS0
N_OR_CS01             ATA_HCS0        Internal HCS1 (External)
                      0               X                0
                      1               X                1
                      0               0                0
                      0               1                1
                      1               X                1
            Table 18.   Audio Pin Configurations
egister 2                      Register 7       Register 2
it 5                           Bit 0            Bit 3            PC_SPKR/
N_SPKR      EXTP_AUDIO         ATA_MODE         EN_DASP          DASP//DREQ
            X                  0                0                Float - Z
            0                  0                0                1
            1                  0                0                0
            0                  0                0                AT_DREQ Input
            0                  0                0                AT_DREQ Input
            0                  1                x                DASP mode
S012002-1201                                           Programming Internal Registers


                                                                                                     45
PROM Register
dress: SELECT 03h
me: Interface Configuration Register 2
pe: Read/Write
 le 19. Interface Configuration Register 2: Address 03h
 Placement    Bit Name                Description
0             EN_MEM_MODE             Enables PCMCIA memory access mode. This bit controls
                                      window0. It is active when set to 1. On Power-On Reset,
                                      this bit is set to 0.
1             EN_INDP_MODE            Enables PCMCIA independent I/O access mode. This bit
                                      controls window0. It is active when set to 1. On Power-On
                                      Reset, this bit is set to 0.
2             EN_ATT_MODE             Enables PCMCIA attribute memory access. This bit is
                                      active when set to 1. On Power-On Reset, this bit is set to
                                      0. Also see Registers 08h and 09h (Table 28 and Table 29).
3             EN_INVERT_HCS0          Inverts the polarity of HCS0 output. HCS0 is active High
                                      when this bit is set. HCS0 is active Low when this bit is
                                      cleared. This bit is active when set to 1. On Power-On
                                      Reset, this bit is set to 0, active Low. Also see Register 02h
                                      (Table 14).
4             EN_INVERT_HCS1          Inverts the polarity of HCS1 output. HCS1 is active High
                                      when this bit is set. HCS1 is active Low when this bit is
                                      cleared. This bit is active when set to 1. On Power-On
                                      Reset, this bit is set to 0, active Low. Also see Register 02h
                                      (Table 14).
5             EN_INVERT_ATRST         Inverts the polarity of the ATA_HRESET output.
6             EN_IO_MODE              Enables PCMCIA/ATA/IDE access to 1Fx, 3Fx, 17x, 1Fx
                                      task Registers. This bit controls window0. This bit is active
                                      when set to 1. On Power-On-Reset, this bit is set to 0.
7             Reserved
gramming Internal Registers                                                      PS012002-1201


EPROM Register
ddress: SELECT 04h
ame: Interface Configuration Register 3
ype: Read/Write
             Table 20. Interface Configuration Register 3: Address 04h
it Placement Bit Name                Description
it 0         SEL_PRIMARY_1x         Enables IDE/PCMCIA access to primary task file
                                     addresses 1F<0-7>. This bit is active when set to 1. On
                                     Power-On Reset, this bit is set to 0.
it 1         SEL_PRINARY_3x          Enables IDE/PCMCIA access to primary task file
                                     addresses 3F<6-7>. Active when set to 1. On Power-On
                                     Reset, this bit is set to 0 (Table 21).
it 2         SEL_SECOND_1x          Enables IDE/PCMCIA access to secondary task file
                                     addresses 17<0-7>. Active when set to 1. On Power-On
                                     Reset, this bit is set to 0.
it 3         SEL_SECOND_3x          Enables IDE/PCMCIA access to secondary task file
                                     addresses 37<0-7>. Active when set to 1. On Power-On
                                     Reset, this bit is set to 0.
it 4         STR_RST                 Switching this bit from Low to High to Low again forces
                                     the ZX6017 to check the level on PC_ATA/HOE pin and
                                     latch the mode. This bit is active when set to 1. On Power-
                                     On Reset, this bit is set to 0.
it 5         EN_DIS_RST              Disable PCMCIA reset. This bit is active when set to 1.
                                     Resets from the PCMCIA bus are not allowed. On Power-
                                     On Reset, this bit is set to 0 (Table 22).
it 6         EN_PDIAG_INT            When this bit is set to 1, PDIAG is generated internally. On
                                     Power-On Reset, this bit is set to 0. Also see Registers 02h
                                     and 07h (Table 14 and Table 26).
it 7         EN_PDIAG_EXT            When this bit is set to 1, PDIAG is generated externally
                                     through the AT_PDIAG pin on the local AT side. On
                                     Power-On Reset, this bit is set to 0. Also see Registers 02h
                                     and 07h (Table 14 and Table 26).
S012002-1201                                                Programming Internal Registers


                                                                                        47
            Table 21.  ATA Register Selection Designations
gister 4 Register 4     Register 4      Register 4   Register 3   Address
 3       Bit 2          Bit 1           Bit 0        Bit 6        Range
L_SECO   SEL_SECO       SEL_PRIMA       SEL_PRIMA    EN_IO_M      Respons
 _3x     ND_1x          RY_3x           RY_1x        ODE          e         Note
         X              X               X            0            XX        Disabled
         0              0               0            1            XX        Disabled
         0              0               1            1            1F0-1F7   Primary
                                                                            HDD
         0              1               1            1            1F0-1F7, Primary
                                                                  3F6, 3F7 HDD
         1              0               0            1            170-177 Secondary
                                                                            HDD
         1              0               0            1            170- 177, Two drive
                                                                  376, 377 system on
                                                                            local
         1              1               1                         170- 177, AT bus
                                                                  376, 377, side
                                                                  1F0-1F7
                                                                  3F6, 3F7
           Table 22.  Reset Conditions
gister 4                      Register 7
 5                            Bit 0
_DIS_RST    PC_HRESET         ATA_MODE        ATA_HRESET      Notes:
            X                 X               1               PCMCIA Mode, Reset
                                                              Disabled
            0                 0               1               PCMCIA Mode, No Reset
            1                 0               0               PCMCIA Mode, Asserted
                                                              Reset
            1                 1               1               ATA Mode, No Reset.
            0                 1               0               ATA Mode, Asserted Reset.
gramming Internal Registers                                           PS012002-1201


EPROM Register
ddress: SELECT 05h
ame: BCMCIA CCR Base Address Register
ype: Read/Write
 ble 23. PCMCIA CCR Base Address Register: Address 05h
it Placement Bit Name             Description
it 0         EN_CRR_A4            Enables address bit 4 to be compared as High on PCMCIA
                                  when the PCMCIA Con•guration Register’s base address
                                  is accessed. On Power-On Reset, this bit is set to 0.
it 1         EN_CRR_A5            Enables address bit 5 to be compared as High on PCMCIA
                                  when the PCMCIA Con•guration Register’s base address
                                  is accessed. On Power-On Reset, this bit is set to 0.
it 2         EN_CRR_A6            Enables address bit 6 to be compared as High on PCMCIA
                                  when the PCMCIA Con•guration Register’s base address
                                  is accessed. On Power-On Reset, this bit is set to 0.
it 3         EN_CRR_A7            Enables address bit 7 to be compared as High on PCMCIA
                                  when the PCMCIA Con•guration Register’s base address
                                  is accessed. On Power-On Reset, this bit is set to 0.
it 4         EN_CRR_A8            Enables address bit 8 to be compared as High on PCMCIA
                                  when the PCMCIA Con•guration Register’s base address
                                  is accessed. On Power-On Reset, this bit is set to 0.
it 5         EN_CRR_A9            Enables address bit 9 to be compared as High on PCMCIA
                                  when the PCMCIA Con•guration Register’s base address
                                  is accessed. On Power-On Reset, this bit is set to 0.
it 6         EN_CRR_A10           Enables address bit 10 to be compared as High on
                                  PCMCIA when the PCMCIA Con•guration Register’s base
                                  address is accessed. On Power-On Reset, this bit is set to 0.
it 7         DIS_CRR_MODE         Disables PCMCIA host and allows access to the PCMCIA
                                  Con•guration Register’s base address. This bit is active
                                  when set to 1. On Power-On Reset, this bit is set to 0.
S012002-1201                                           Programming Internal Registers


                                                                             49
            Table 24.  CCR Location Examples, Register 5
                                                                     CCR
t 7   Bit 6      Bit 5    Bit 4    Bit 3    Bit 2      Bit 1 Bit 0   Base
      A10        A9       A8       A7       A6         A5    A4      Address
      X          X        X        X        X          X     X       None
      0          0        0        0        0          0     0       0000hx
      0          0        0        0        0          0     1       0010hx
      0          1        0        0        0          0     0       0200hx
      1          0        0        0        0          0     0       0400hx
gramming Internal Registers                                    PS012002-1201


EPROM Register
ddress: SELECT 06h
ame: PCMCIA Interrupt Status Register
ype: Read
 ble 25. PCMCIA Interrupt Status Register: Address 06h
it Placement Bit Name               Description
it 0         PC_INT0                PCMCIA host write to CCR0, the Configuration Option
                                    Register has occurred. This bit is active when set to 1. Also
                                    see Register 01h (Table 13).
it 1         PC_INT1                PCMCIA host write to CCR1, the Card Configuration and
                                    Status Register has occurred. This bit is active when set to
                                    1. Also see Register 01h (Table 13).
it 2         PC_INT2                PCMCIA host write to CCR2, the Pin Replacement
                                    Register has occurred. This bit is active when set to 1. Also
                                    see Register 01h (Table 13).
it 3         PC_INT3                PCMCIA host write to CCR3, the Socket and Copy
                                    Register has occurred. This bit is active when set to 1. Also
                                    see Register 01h (Table 13).
it 4         PC_INT4                External ATA_IREQ interrupt has occurred. This bit is
                                    active when set to 1. Also see Register 01h (Table 13).
it 5         PC_INT5                PCMCIA host write to CCR4, an I/O Event Indication
                                    Register has occurred. This bit is active when set to 1.
it 6         REV_BA                 Set this bit to 1 after writing the revision number (see
                                    device top mark) to the revision control Register.
it 7         Reserved
S012002-1201                                               Programming Internal Registers


                                                                                                    51
PROM Register
dress: SELECT 07h
me: PCMCIA Exception Status Register
pe: Read
 le 26. PCMCIA Exception Status Register: Address 07h
 Placement  Bit Name               Description
0           ATA/IDE_MODE           When bit 7 of this register is set to 1, ATA mode has been
                                   selected by sampling the /PC_ATA//HOE signal on Power-
                                   On-Reset, or the override bits in Register 0 have set the
                                   ZX6017 to run in ATA/IDE mode. When set to 0, this bit
                                   indicates that the ZX6017 operates in PCMCIA mode
                                   (Table 27).
1           PCRST                  PCMCIA reset status. Active when set to 1.
2           Reserved
3           Reserved
4           Reserved
5           PDIAG                  PDIAG is present. This bit is active when set to 1.
6           DASP                   DASP is present. Drive Active/Slave Present. This bit is
                                   active when set
7           ATA_SAMPLED            When set to 1, this bit indicates that bit 0 of this register is
                                   valid to read.
gramming Internal Registers                                                  PS012002-1201


              Table 27.    ATA Sample Mode Bit
               Register 7         Register 7
               Bit 7              Bit 0
               ATA_SAMPLED ATA_MODE                    Comments
               0                  X                    Not ready
               1                  0                    PCMCIA Addressing Mode
               1                  1                    ATA/IDE Addressing Mode
EPROM Register
ddress: SELECT 08h
ame: Attribute Memory Address Register
ype: Write
 ble 28. Attribute Memory Address Register: Address 08h
it Placement   Bit Name                 Description
its 7-0        Attribute Memory Address After each access to the attribute RAM data register, the
                                        address is automatically incremented. Also see Register
                                        03h.
S012002-1201                                                Programming Internal Registers


                                                                                               53
PROM Register
dress: SELECT 09h
me: Attribute Memory Data Register
pe: Write/Read
 le 29. Attribute Memory Data Register: Address 09h
 Placement    Bit Name              Description
  7-0         Attribute Memory Data The data read and written from this register is associated
                                    with the attribute memory location pointed to by the
                                    attribute RAM data address register. After each data write
                                    or read into this location, the address is automatically
                                    incremented by one. Also see Register 03h (Table 19).
gramming Internal Registers                                                   PS012002-1201


EPROM Register
ddress: SELECT 10h
ame: Window 1 Control Register
ype: Write/Read
 ble 30. Window 1 Control Register: Address 10h
it Placement Bit Name                Description
it 0         DIS_PAC1                When this bit is set to 1, the Port 1 Address Control and
                                     decoder are disabled.
it 1         EN_PAC1_MEM             When this bit is set to 1, Memory Mode decoder is
                                     enabled. When cleared, I/O mode is enabled.
it 2         EN_PAC1_16              When this bit is set, data swapping is provided internal to
                                     the chip during data reads from the low byte of the ATA
                                     bus to the PCMCIA bus high byte, and from the high byte
                                     of the PCMCIA bus to the low byte of the ATA bus during
                                     data writes. When cleared, it is high byte to high byte and
                                     low byte to low byte.
it 3         READ_PROTECT            Allows two cards at the same address to be read. When this
                                     bit is set, it prevents the PCMCIA bus from going active.
it 4         EN_PAC1_ADDR_COMP        When this bit is set, use address compare logic; when it is
                                     cleared, acknowledge all PCMCIA chip selects.
it 5         EN_PAC1_HCS             When this bit is set, HCS1 is used as an external chip
                                     select. When this bit is cleared, HCS0 is used as an
                                     external chip select. Also see Registers 02h and 03h
                                     (Table 14 and Table 19).
its 7-6                              Number of wait states (in Master Clock periods) inserted
                                     on the PCMCIA bus.
                                     00 = 0xTpmclkin (no wait states)
                                     01 = 3x Tpmclkin
                                     10 = 5x Tpmclkin
                                     11 = 7x Tpmclkin
S012002-1201                                                Programming Internal Registers


                                                                                               55
PROM Register
dress: SELECT 11h
me: Window 1 Start Address LSB
pe: Write/Read
 le 31. Window 1 Start Address LSB: Address 11h
 Placement  Bit Name                Description
  7-0                               LSB starting address for Port 1.
PROM Register
dress: SELECT 12h
me: Window 1 Start/Range Address MSB
pe: Write/Read
 le 32. Window 1 Start/Range Address MSB: Address 12h
 Placement  Bit Name                Description
  2-0                               Bits 8, 9, and 10 of the starting address range of Port 1.
3           EN_WRITE_PROTECT        When this bit is set, the RWPROT bit in the pin
                                    replacement register is used to inhibit writing to the
                                    external peripherals. When these bits are cleared, PROT is
                                    ignored.
  6-4                               Bits 8, 9, and 10 of the starting address range of Port 1.
7           EN_DMA_ACK              When this bit is set, ATA_DMA_ACKNOWLEDGE is set
                                    when the address space is accessed, and Speaker Out on
                                    the PCMCIA interface is used as DREQ.
gramming Internal Registers                                                   PS012002-1201


EPROM Register
ddress: SELECT 13h
ame: Window 1 Range Address LSB
ype: Write/Read
 ble 33. Window 1 Range Address LSB: Address 13h
it Placement Bit Name                Description
its 7-0                              LSB range Address for Port 1
EPROM Register
ddress: SELECT 14h
ame: Window 2 Control Register
ype: Write/Read
 ble 34. Window 2 Control Register: Address 14h
it Placement Bit Name                Description
it 0         DIS_PAC2                When this bit is set to 1, it disables Port 2 address control
                                     and decoder.
it 1         EN_PAC2_MEM             When this bit is set to 1, Memory Mode decoder is
                                     enabled. When it is cleared, the I/O Mode decoder is
                                     enabled.
it 2         EN_PAC2_16              When this bit is set, data swapping is provided internal to
                                     the chip during data reads from the low byte of the ATA
                                     bus to the PCMCIA bus high byte, and from the high byte
                                     of the PCMCIA bus to the low byte of the ATA bus during
                                     data writes. When this bit is cleared, it is high byte to high
                                     byte and low byte to low byte.
it 3         READ_PROTECT            Allows two cards at the same address to be read from.
                                     When this bit is set, it prevents the PCMCIA bus from
                                     becoming active.
S012002-1201                                               Programming Internal Registers


                                                                                                 57
 le 34. Window 2 Control Register: Address 14h (Continued)
 Placement  Bit Name                Description
4           EN_PAC2_ADDR_COMP        When this bit is set, use address compare logic, when it is
                                    cleared, acknowledge all PCMCIA chip selects.
5           EN_PAC2_HCS             When this bit is set, HCS1 is used as an external chip
                                    select; when it is cleared, HCS0 is used as an external chip
                                    select. Also see Registers 02h and 03h.
  7-6                               Number of wait states (in Master Clock period) inserted on
                                    the
PROM Register
dress: SELECT 15h
me: Window 2 Start Address LSB
pe: Write/Read
 le 35. Window 2 Start Address LSB: Address 15h
 Placement  Bit Name                Description
  7-0                               LSB starting address for Port 2.
gramming Internal Registers                                                 PS012002-1201


EPROM Register
ddress: SELECT 16h
ame: Window 2 Start/Range Address MSB
ype: Write/Read
 ble 36. Window 2 Start/Range Address MSB: Address 16h
it Placement Bit Name                Description
its 2-0                              Bits 8, 9, and 10 of the starting address range of Port 2.
it 3         EN_WRITE_PROTECT        When this bit is set, the RWPROT bit in the pin
                                     replacement register is used to inhibit writing to the
                                     external peripherals. When it is cleared, PROT is ignored.
                                     Bits 8, 9, and 10 of the starting address range of Port 2.
its 6-4
it 7         EN_DMA_ACK              When this bit is set, ATA_DMA_ACKNOWLEDGE is set
                                     when the address space is accessed, and Speaker Out on
                                     the PCMCIA interface is used as DREQ.
EPROM Register
ddress: SELECT 17h
ame: Window 2 Range Address LSB
ype: Write/Read
 ble 37. Window 2 Range Address LSB: Address 17h
it Placement Bit Name                Description
its 7-0                              LSB range address for Port 2.
S012002-1201                                               Programming Internal Registers


                                                                                                   59
PROM Register
dress: SELECT 18h
me: Window 3 Control Register
pe: Write/Read
 le 38. Window 3 Control Register: Address 18h
 Placement  Bit Name                Description
0           DIS_PAC3                When set to 1, this bit disables Port 3 address control and
                                    decoder.
1           EN_PAC3_MEM             When this bit is set to 1, Memory mode decoder is enabled.
                                    When it is cleared, I/O mode decoder is enabled.
2           EN_PAC3_16+             When this bit is set, data swapping is provided internal to
                                    the chip during data reads from the low byte of the ATA
                                    bus to the PCMCIA bus high byte, and from the high byte
                                    of the PCMCIA bus to the low byte of the ATA bus during
                                    data writes. When this bit is cleared, it is high byte to high
                                    byte and low byte to low byte.
3           READ_PROTECT            This bit allows two cards to be read from the same address.
                                    When this bit is set, it prevents the PCMCIA bus from
                                    becoming active.
4           EN_PAC3_ADDR_COMP        When this bit is set, use address compare logic; when it is
                                    cleared, acknowledge all PCMCIA chip selects.
5           EN_PAC3_HCS             When this bit is set, HCS1 is used as an external chip
                                    select; when it is cleared, HCS0 is used as an external chip
                                    select.
  7-6                               Number of wait states (in Master Clock periods) inserted
                                    on the PCMCIA bus.
gramming Internal Registers                                                   PS012002-1201


EPROM Register
ddress: SELECT 19h
ame: Window 3 Start Address LSB
ype: Write/Read
 ble 39. Window 3 Start Address LSB: Address 19h
it Placement Bit Name                Description
its 7-0                              LSB starting Address for Port 3.
EPROM Register
ddress: SELECT 1Ah
ame: Window 3 Start/Range Address MSB
ype: Write/Read
 ble 40. Window 3 Start/Range Address MSB: Address 1Ah
it Placement Bit Name                Description
its 2-0                              Bits 8, 9, and 10 of the starting address range of Port 3.
it 3         EN_WRITE_PROTECT        When this bit is set, the RWPROT bit in the pin
                                     replacement register is used to inhibit writing to the
                                     external peripherals. When this bit is cleared, PROT is
                                     ignored.
its 6-4                              Bits 8, 9, and 10 of the starting address range of Port 3.
it 7         EN_DMA_ACK              When this bit is set, ATA_DMA_Acknowledge is set when
                                     the address space is accessed, and Speaker Out on the
                                     PCMCIA interface is used as DREQ.
S012002-1201                                               Programming Internal Registers


                                                                                            61
PROM Register
dress: SELECT 1Bh
me: Window 3 Range Address LSB
pe: Write/Read
 le 41. Window 3 Range Address LSB: Address 1Bh
 Placement  Bit Name               Description
  7-0                              LSB range address for Port 3.
PROM Register
dress: SELECT 1Eh
me: EEPROM Valid Flag Byte Register
pe: Read
 le 42. EEPROM Valid flag Byte Register: Address 1Eh
 Placement  Bit Name               Description
  7-0       Flag Byte              Read-Only Register used by the internal EEPROM
                                   Sequencer to determine if the contents of the EEPROM are
                                   valid. The valid Flag value is 1Ch.
PROM Register
dress: SELECT 20h
me: EEPROM Address/Status CCR5 Back Door
pe: Write/Read
 le 43. EEPROM Address/Status CCR5 Back Door: Address 20h
 Placement  Bit Name               Description
  7-0       Address/Status Bits    EEPROM address/status data.
gramming Internal Registers                                                PS012002-1201


EPROM Register
ddress: SELECT 21h
ame: EEPROM Data CCR6 Back Door
ype: Write/Read
 ble 44. EEPROM Data CCR6 Back Door: Address 21h
it Placement Bit Name            Description
its 7-0      Data Bits           EEPROM data.
EPROM Register
ddress: SELECT 22h
ame: EEPROM Command CCR7 Back Door
ype: Write/Read
 ble 45. EEPROM Command CCR7 Back Door: Address 22h
it Placement Bit Name            Description
its 7-0      Command Bits        Command value.
S012002-1201                                     Programming Internal Registers


                                                                                                63
PROM Register
dress: SELECT 23h
me: Revision Control Register
pe: Read/Write
 le 46. Revision Control Register: Address 23h
 Placement    Bit Name                Description
3-0           REV_MINOR               The lower four bits determine the minor revision number.
                                      This nibble must be written with the value read back from
                                      the lower nibble in Read-Only Register 24h to enable the
                                      minor revision functions.
7-4           REV_MAJOR               The upper four bits determine the major revision number.
                                      This nibble must be written with the value read back from
                                      the upper nibble in Read-Only Register 24h to enable the
                                      major revision functions.
PROM Register
dress: SELECT 24h
me: Revision Number Register
pe: Read
 le 47. Revision Number Register: Address 24h
 Placement    Bit Name                Description
3-0           REV_NUM_MINOR           This is the Read-Only minor revision number of the chip.
7-4           REV_NUM_MAJOR           This is the Read-Only major revision number of the chip.
gramming Internal Registers                                                  PS012002-1201


EPROM Register
ddress: SELECT 26h
ame: Bus Control 1 Register
ype: Read/Write
eset: 00h
 ble 48. Bus Control 1 Register: Address 26h
it Placement  Bit Name                 Description
it 0          DISABLE_CLK              When this bit is set to 1, it turns off the PC_MCLK_IN
                                       pad. When it is cleared, it enables the PC_MCLK_IN pad.
                                       This bit is automatically cleared when in MASTER mode
                                       and at any access to the EEPROM command Register 7F4h
                                       as seen through the PCMCIA interface.
it 1          EN_IOIS_IN               When this bit is set to 1, it enables the IOIS16 signal to be
                                       generated internally (see Register 27, IOIS16 Address
                                       Control Register, Table 49). When it is cleared, the source
                                       for IOIS16 will be the ATA_IOIS16 input.
it 3-2        8-Bit_CNTRL              PCMCIA 8- to 16-bit control enable (see Table 51).
S012002-1201                                                 Programming Internal Registers


                                                                                                     65
 le 48. Bus Control 1 Register: Address 26h (Continued)
 Placement   Bit Name                 Description
4            EN_RW_LONG               Set this bit to 1 to enable the read/write long function when
                                      using the 8-bit to 16-bit mode or internal IOCS16
                                      generation in ATA/IDE pass-through mode.
                                      PCMICA 8-Bit to 16-Bit Access After 512 bytes are
                                      transferred, each PC_IOR/IOW strobe to the data register
                                      will generate a ATA_IOR/IOW strobe on the ATA/IDE
                                      bus. 8-bit to 16-bit accesses of the data register will be
                                      continued after any write access to a task file register other
                                      than the data register.
                                      ATA/IDE PASSTHROUGH mode. When set in ATA/IDE
                                      PASSTHROUGH mode after 256 word accesses of the
                                      data register, the //IOCS16 signal on the host interface de-
                                      asserts until the next data transfer phase. The internal
                                      IOCS16 function must also be enabled. (EN_IOIS_IN=1)
                                      and the IOIS16 ADDR register set to 01 pointing to the
                                      ATA/IDE task file data Register 1F0, 170. Clearing this bit
                                      disables the read/write long function.
6-5          IOIS16_CTRL              IOIS16 source select (see Table 49)
7            BVD_CTRL                 When set to 1, this bit enables the PC_BVD1/STSCHG/
                                      PDIAG and PC_BVD2/SPKR/DASP/DREQ functions.
                                      When cleared, it sets both PC_BVD1/STSCHG/PDIAG
                                      and PC_BVD2/SPKR/DASP /DREQ pins High when in
                                      PCMCIA ATA/IDE memory mode. At Power-On Reset,
                                      set to 0.
            Note: Registers 26h and 27h are only available on the Z16017 device.
gramming Internal Registers                                                      PS012002-1201


EPROM Register
ddress: SELECT 27h
ame: IOIS16 Address Control Register
ype: Read/Write
eset: 00h
                     The contents of this register determine which on-Host address IOIS16 is
                     generated, but only when bit 1 of Register 26h is set to 1.
 ble 49.      IOIS16 Address Control Register: Address 27h
egister
ontent                Host Address
it <7-0>              PC_HA <3-0>                 PC_WP/IOIS16/IOIS16                         Comments
 000000 (80h)         1110 (Eh)                   0                                           Must use this address to generate
                                                                                              IOIS16.1
 000000 (40h)         1100 (Ch)                   0
 100000 (20h)         1010 (Ah)                   0
 010000 (10h)         1000 (8h)                   0
 001000 (08h)         0110 (6h)                   0
 000100 (04h)         0100 (4h)                   0
 000010 (02h)         0010 (2h)                   0
 000001 (01h)         0000 (0h)                   0
OTES:
For IOIS16 to be generated on any even address, the register must contain 1 in all positions.
S012002-1201                                                                             Programming Internal Registers


                                                                                                           67
 le 50.       16-Bit_Control
 6                    Bit 5                   Description
                      0                       IOIS16 is being generated internally.
                      0                       IOIS8 is the source for the IOIS16 in PCMCIA I/O Mode.1
                      1                       IOIS16 is always High in PCMCIA I/O Mode
e:
S8 is bit 5 in CCR1 Card Configuration and Status Register.
TES:
                     1.
 le 51.       8-Bit _CTRL
 3                    Bit 2                   Description
                      0                       PCMCIA_8 to ATA_16 Mode is disabled.
                      1
                      0                       IOIS8 controls PCMCIA_8 to ATA_16 Mode.1
                      1                       Forces the ZX6017 into PCMCIA_8 to ATA_16 Mode.
TES:
 IS8 is bit 5 in CCR1 Card Configuration and Status Register.
gramming Internal Registers                                                                  PS012002-1201


EPROM Register
 ddress: SELECT 28h
ame: ATA/IDE Dual Drive Control
ype: Read/Write
Bit Placement         Bit Name                 Description
Bit 0                 M_S_enable               This bit enables the Master/Slave mode control. When
                                               this bit is set to 1, the Master/Slave function is enabled.
                                               When it is set to 0, this function is disabled.
Bit 1                 Drive_select             When programmed, this bit determines when to drive the
                                               ATA/IDE bus. When set to 1, the ZX6017 drives the
                                               ATA bus when the host writes a 1 into Bit 4 of the
                                               “Drive/Head” task file register. Both primary and
                                               secondary addresses are compared. If this bit is set to 0,
                                               then the ZX6017 drives the bus if the host writes a 0 into
                                               Bit 4 of the “Drive/Head” task fie register.1
Bit 7-2               Reserved                 Unused
OTES:
 Read Back Values: Z86017 00010000b = 10h
 Z16017 00100000b = 20h
EPROM Register
ddress: SELECT 2Ah
ame: Power Management Timer Count Value
ype: Read/Write
                    Table 52.      Power Management Timer Count Value: Address 2Ah
it Placement         Bit Name                 Description
it 7-0               TIMER_VAL                Power management timer count value. The timer reset
                                              during all PCMCIA activity. When the timer expires, it
                                              powers down all noncritical signals. TIMER intervals
                                              (sec.) = PC_MCLK (sec.) * 2(27) * timer_val. For
                                              example: PC_MCLK (20 MHz, 50 ns) * 2(27) * 1 = 6.67
                                              sec. Also see Register 2Ch (Table 56).
S012002-1201                                                          Programming Internal Registers


                                                                                                                        69
PROM Register
dress: SELECT 2Bh
me: Power Management Control Register
pe: Read/Write
                   Table 53.            Power Management control Register: Address 2Bh
 Placement          Bit Name                                Description
0                   EN_8BIT_MODE                            When set to 1, this bit enables the 8-bit mode on the local
                                                            interface. When cleared, it enables the 16-bit interface.
1                   EN_MODEM_ALT                            When set to 1, this bit enables the alternate modem
                                                            functions/pins. When cleared, it disables modem functions.
2                   EN_CLK                                  When this bit is set to 1, all internal clocks are disabled
                                                            after loading from the serial EEPROM. When this bit is
                                                            cleared, all clocks are enabled.
3                   EN_PADS1                                When this bit is set to 1, the PCMCIA external pads are
                                                            powered-down, unless PCMCIA(*) PC_HCE1 and
                                                            PC_HCE2 are active. When this bit is cleared, all external
                                                            pads are enabled.
4                   EN_TIMER                                When this bit is set to 1, the power management timer is
                                                            enabled. The timer value is contained in Register 2A.
                                                            When this bit is cleared, the power management timer is
                                                            held reset and disabled.
5                   EN_PM_RDY                               When this bit is set to 1, the ZX6017 sets BUSY on the
                                                            PCMCIA interface when the host sets the power down bit
                                                            in CCR1.
6                   EN_EXT_PD                               When this bit is set to 1, the power management timer
                                                            activates the external power down signal EXTP_PWND.
                                                            When this bit is cleared, the external signal is not be
                                                            activated. See also Register 0Bh (Table 67).
7                   EN_EXPD_POL                             When this bit is set to 1, the external power down signal
                                                            EXTP_PWND is active Low. When this bit is cleared,
                                                            EXTP_PWND is active High.
TES:
hen the En_Pads bit is set, access to the CCR Registers is disabled.
gramming Internal Registers                                                                            PS012002-1201


EPROM Register
ddress: SELECT 2Ch
ame: Interface Configuration Register 4
ype: Read/Write
             Table 54. Interface Configuration Register 4: Address 2Ch
it Placement Bit Name                Description
it 2-0       TSTCLK                  These power management clock select bits can be used to
                                     provide delay times in a number of different scales.
                                     Table 55 describes the different delay scale settings. Also
                                     see Register 2Ah (Table 53).
it 3         EN_POLL_BSY             This bit allows the ZX6017 to poll the Busy status bit in
                                     the local controller task file. When enabled in PCMCIA
                                     ATA I/O mode, the Busy status bit in the local controllers
                                     task file latches into the pin replacement register. In
                                     PCMCIA ATA Memory mode, the Busy status bit is placed
                                     on the Ready/Busy signal. Set this bit to 1 to enable auto
                                     polling. When this bit is cleared, auto polling is disabled.
                                     On Power-On Reset, it is set to 0.
it 4         EN_GLOB_INT             This is a Global Interrupt Enable for the M-PINT pin.
                                     When set to 1, this bit enables the local µP interrupts.
                                     When cleared, it disables the local µP interrupt. On Power-
                                     On Reset, it is set to 0.
it 5         EN_PC_INT5              This bit enables the local Processor interrupt when the
                                     PCMCIA host has written the I/O event indication Register
                                     CCR4. This interrupt source stays present until this bit is
                                     set to 0. When set to 1, this bit is active. On Power-On
                                     Reset, it is set to 0.
it 6         EN_BVD_INPUTS           When set to 1, this bit enables the two BVD inputs to be
                                     reflected either in Pin Replacement Register or on the
                                     corresponding pins of the ZX6017. On Power-On Reset, it
                                     is set to 0. See also Register 0Ch (Table 66).
S012002-1201                                                Programming Internal Registers


                                                                                                      71
           Table 54.   Interface Configuration Register 4: Address 2Ch (Continued)
 Placement  Bit Name                   Description
7           EN_PULSE                   When set, this bit enables auto busy status when the host
                                       sets reset. The busy status remains present until the internal
                                       time-out or when using a µP and the µP clears the busy
                                       status. When cleared, this bit disables auto busy on host
                                       resets. The pulse time for busy is 2(15)/PC_MCLK (MHz)
                                       = SEL.
           Table 55.   Power Management Clock Select
                              Timer/Count                  Input Clock PC_MCLK
            Bit 2 Bit 1 Bit 0 6.7 sec./count               @ 20 MHz
            0     0     1     6.4 µsec./count              @ 20 MHz
            0     1     0     Disable counter
            0     1     1     12.8 µsec./count             @ 20 MHz
            1     0     0     100 nsec./count              @ 20 MHz
            1     0     1     6.4 µsec./count              @ 20 MHz
            1     1     0     6.4 µsec./count              @ 20 MHz
gramming Internal Registers                                                     PS012002-1201


EPROM Register
ddress: SELECT 2Dh
ame: Configuration Index Compare Register 1
ype: Read/Write
             Table 56. Configuration Index Compare Register 1: Address 2Dh
it Placement Bit Name               Description
it 2-0       IO_SEL_SEC             These bits are the configuration index for I/O secondary
                                    select.
it 3         EN_ IO_SEL_SEC         When set to 1, this bit enables the configuration index I/O
                                    secondary select; when cleared, it is disabled.
it 6-4       IO_SEL_PRI             These bits are the configuration index for I/O primary
                                    select.
it 7         EN_IO_SEL_PRI          When set to 1, this bit enables the configuration index I/O
                                    primary select; when cleared, it is disabled.
EPROM Register
ddress: :SELECT 2Eh
ame: Configuration Index Compare Register 2
ype: Read/Write
             Table 57. Configuration Index Compare Register 2: Address 2Eh
it           Bit
lacement     Name                   Description
it 2-0       MEM_INDX               These bits are the configuration index for memory select.
it 3         EN_MEM_INDX            When set to 1, this bit enables configuration index memory
                                    select; when cleared, it is disabled.
it 6-4       IO_INDP_INDX           These bits are the configuration index for I/O independent
                                    select.
it 7         EN_IO_INDP_INDX        When set to 1, this bit enables configuration index
                                    independent select; when cleared, it is disabled.
S012002-1201                                             Programming Internal Registers


                                                                                      73
           EN_IO_MODE bit 6 in Register 03h and Primary/Secondary enables in
           Register 04h bits 3, 2, 1, and 0 are globally enabled based on the values
           written into Register 2D and the Host writing into the configuration index
           bits in CCR0.
           EN_MEM_MODE bit 0 and the EN_INDP_MODE bit 1 in Register 03h
           are globally enabled based on the values written into Register 2Eh and the
           Host writing into the configuration index bits in CCR0.
gramming Internal Registers                                           PS012002-1201


EPROM Register
ddress: SELECT 2Fh
ame: Bus Control
ype: Read/Write
             Table 58. Bus Control Register: Address 2Fh
it Placement Bit Name               Description
it 0         EN_BHE_POL             When this bit is cleared, it enables the polarity of the
                                    ATA_BHE output to be active High. When it is set, it
                                    enables the polarity to be active Low. At Power-On Reset,
                                    this bit defaults to clear. Also see Register 00h (Table 11).
it 1         EN_16_DUECE            When this bit is set, it enables word-to-byte access when in
                                    memory mode. This mode allows a 16-bit host to access 8-
                                    bit peripherals. When cleared, this bit disables word-to-
                                    byte access mode. When set, this bit enables the ZX6017 to
                                    generate two peripheral write or read strobes on the local
                                    peripheral side when the host writes or reads 16 bits of
                                    data. This mode allows a 16-bit host to read/write to 8-bit
                                    peripheral device registers with one 16-bit access. When
                                    this mode is enabled, and the ZX6017 is in memory mode,
                                    the host gains access to the peripheral’s 8-bit registers by
                                    selecting an even address usingPC_HCE1. The ZX6017
                                    asserts the PC_WAIT pin, which allows the write or read
                                    strobe to the peripheral device to be controlled through the
                                    “DUECE_WIDTH” and “DUECE_ACCESS_DLY” bits in
                                    the Bus control Register 2Fh and the externals peripherals
                                    IOCHRDY signal if present (Figure 10). Figure 11 depicts
                                    the PCMCIA to local peripheral data path information.
it 2         EN_DIV_ADDR            When set, this bit indicates that PCMCIA host address
                                    lines A3, A2 and A1 are mapped to the local interface
                                    address lines A2, A1 and A0. When cleared, PCMCIA
                                    address lines A2, A1 and A0 are mapped to local interface
                                    A2, A1 and A0.
S012002-1201                                               Programming Internal Registers


                                                                                                      75
                    Table 58.    Bus Control Register: Address 2Fh (Continued)
 Placement           Bit Name                 Description
3                    EN_MAP_IO_MEM            When this bit is set, all memory accesses are mapped to
                                              ATA_HIOR and ATA_HIOW. When it is cleared, all
                                              memory accesses are mapped to ATA_MRD and
                                              ATA_MWR.
5-4                  DUECE_WIDTH              These bits set the ATA_HIOR/HIOW strobe width and are
                                              clocked by PC_MCLK_IN /2. At Power-On Reset, they
                                              default to 00.
7-6                  DUECE_ACCESS_DLY         These bits set the ATA_HIOR/HIOW access delay and are
                                              clocked by PC_MCLK_IN /2. At Power-On Reset, they
                                              default to 00.
                    The ATA_HIOR/HIOW strobe width is three cycles minimum
                    (PC_MCLK_IN /2), plus IOCHRDY time (if any), plus width count
                    programmed in bits 5, 4 (Table 59).
                    Table 59.    Strobe Width and Access Delay1
                          Bits                                               Bits
     6      5           4     Delay     Width       7      6     5         4     Delay       Width
     0      0           0     0         0           1      0     0         0     2           0
     0      0           1     0         1           1      0     0         1     2           1
     0      1           0     0         2           1      0     1         0     2           2
     0      1           1     0         3           1      0     1         1     2           3
     1      0           0     1         0           1      1     0         0     3           0
     1      0           1     1         1           1      1     0         1     3           1
     1      1           0     1         2           1      1     1         0     3           2
     1      1           1     1         3           1      1     1         1     3           3
TES:
 ch count equals PC_MCLK_IN /2.
gramming Internal Registers                                                          PS012002-1201


 ORD-TO-BYTE OPERATION
                          Figure 10 illustrates Word-to-Byte timing and Figure 11 depicts the
                          Word-to-Byte Mode data path.
       PC_HA<10:0>
           PC_HCE1
            PC_HWE
         or PC_HOE
            PC_WAIT
       ATA_HA<2:0>                            Valid Even Address                                   Adr+1
     ATA_HCS<1:0>
           ATA_HIOR
          ATA_HIOW
     ATA_IOCHRDY
        Internal Clock
  (PC_MCLK_IN /2)
      Internal Strobe            Count 0                  1      2               Count 0           1    2         Count 0
 Delay (HIOR/HIOW)
      Internal Access            Count 0                                     1      2                     Count 0
 Delay (HIOR/HIOW)
                 HIOR/HIOW strobe delay equals                    HIOR/HIOW strobe access
                 IOCHRDY time plus strobe width                   equals access delay period
                 period programmed in the Bus                     programmed in the Bus Control
                 Control register 2Fh bits <5:4>                  register 2Fh bits <7:6>
                          Figure 10.            Word-to-Byte Timing
S012002-1201                                                                                    Programming Internal Registers


                                                                                                77
             PCMCIA Host Writes                               PCMCIA Host Reads
 _DATA<15-8>                                                       Data
                                                PC_DATA<15-8>    Reciever
                   Data
                   MUX
C_DATA<7-0>                       ATA_DATA<7-0>
                                                PC_DATA<7-0>       Data           ATA_DATA<7-0>
                                                                   Latch
               Figure 11.       Word-to-Byte Mode Data Path
               •   PCMCIA Host Write
                   PC_DATA<7–0> (Even Byte) written to ATA_DATA<7–0>
                   PC_DATA<15–8> (Odd Byte) written to ATA_DATA<7–0>
               •   PCMCIA Host Read
                   The PCMCIA selects an even address, then the ZX6017 pulls WAIT
                   and reads the even register from the peripheral device, saves it in a
                   latch, increments the local peripherals address bus, then reads the odd
                   data byte and clears the PCMCIA WAIT pin.
                   ATA_DATA<7–0> (Even Byte) put onto PC_DATA<7–0>
                   ATA_DATA<7–0> (Odd Byte) put onto PC_DATA<15–8>
               Table 60 describes the PCMCIA Host read and write address examples.
 gramming Internal Registers                                                    PS012002-1201


                        Table 60.      PCMICA Host Read and Write Address Examples1,2
                           ATA/IDE Memory                       General-
PCMCIA                     Mode                                 Purpose        Maps
Host Address 0             Word Access Only                     Host Address 0 Peripheral Address 0, then 1
Host Address 2             Peripheral Address 2, then           Host Address 2 Peripheral Address 2, then 3
                           3
Host Address 4             Peripheral Address 4, then           Host Address 4 Peripheral Address 4, then 5, and so
                           5                                                   on.
OTES:
If the peripheral asserts the ATA_IOCS16, then this feature is aborted.
The host accesses must be on even addresses.
S012002-1201                                                                   Programming Internal Registers


                                                                                                                               79
 onfiguration Registers
TRODUCTION
             Support for the PCMCIA Configuration Registers is provided by the
             ZX6017. Table 62 lists register decodes.
             Three additional registers have been added to the ZX6017 to provide an
             EEPROM link to support remote programming for attribute memory.
             Table 62.          PCMCIA Address xx0h to xx8h, Configuration Register Decode
              WE OE REG CE1 CE2 Address                                  Action
              1       0      0       0       1       xx0hx               Read Configuration Option Register
              0       1      0       0       1       xx0hx               Write Configuration Option Register
              1       0      0       0       1       xx2hx               Read Card Configuration and Status
              0       1      0       0       1       xx2hx               Write Card Configuration and Status
              1       0      0       0       1       xx4hx               Read Pin Replacement Register
              0       1      0       0       1       xx4hx               Write Pin Replacement register
              1       0      0       0       1       xx6hx               Read Socket and Copy Register
              0       1      0       0       1       xx6hx               Write Socket and Copy Register
              1       0      0       0       1       xx8hx               Read I/O Event Indication Status(*)
              0       1      0       0       1       xx8hx               Write I/O Event Indication Status(*)
              * The I/O Event Indication Status Register is only available on BA revisions of the ZX6017. (See device top mark
              for revision level.)
nfiguration Registers                                                                                 PS012002-1201


             Table 63.          ZiLOG EEPROM Programming Extensions1
              WE         OE        REG        CE1         CE2         Address              Action
              0          1         0          0           1           7F0h                 Write EEPROM Address
              1          0         0          0           1           7F0h                 Read EEPROM Status
              0          1         0          0           1           7F2h                 Write EEPROM Data
              1          0         0          0           1           7F2h                 Read EEPROM Data
              0          1         0          0           1           7F4h                 EEPROM Command
              1          0         0          0           1           7F6h                 Revision Register
              * The I/O Event Indication Status Register is only available on BA revisions of the ZX6017. (See device top mark
              for revision level.)
             NOTES:
             1.
ONFIGURATION REGISTERS
EPROM Register
ddress: SELECT 0Ah
ame: PCMCIA Configuration Option Register CCR0
ype: Write/Read
 ble 64. PCMCIA Configuration Option Register CCR0: Address 0Ah
it Placement  Bit Name                              Description
its 5–0       Configuration Index                   Card configuration chosen by the system.
it 6          Level Request                         Level mode interrupts are selected when this bit is
                                                    set to 1. Pulse mode interrupts are selected when this
                                                    bit is set to 0.
it 7          SRESET                                Setting this bit to 1 places the card in the reset state.
S012002-1201                                                                                Configuration Registers


                                                                                           81
PROM Register
dress: SELECT 0Bh
me: PCMCIA Card Status Register CCR1
pe: Write/Read
 le 65.  PCMCIA Card Status Register CCR1: Address 0Bh
 Placement    Bit Name              Description
 0            Reserved              Must be 0.
 1            Interrupt             This bit represents the state of the Interrupt request
                                    signal.
 2            Power Down            The card enters the power down state when this bit is
                                    set to 1. Also see Register 2Bh (.
 3            Audio                 Set this bit to 1 for audio information.
 4            Reserved              Must be 0.
 5            IOIS8                 System can only provide I/O cycles with an 8-bit D7-
                                    D0 data path.
 6            SIGCHG                This bit is set and reset by the host to allow a state
                                    change from the status register. Also see Register
                                    1Fh (Table 68).
 7            Changed
nfiguration Registers                                                     PS012002-1201


EPROM Register
ddress: SELECT 0Ch
ame: PCMCIA Pin Replacement Register CCR2
ype: Write/Read
 ble 66.      PCMCIA Pin Replacement Register CCR2: Address 0Ch
it Placement            Bit Name                       Description
it 0                    RWPROT                         Write Protect switch.
it 1                    RRDY//BSY                      When read, this bit represents the internal state of the
                                                       RRDY/BSY signal. When written, this bit acts as a
                                                       mark for writing the corresponding bit CRDY/BSY.
it 2                    RBVD2                          When read, this bit represents the internal state of the
                                                       Battery Voltage detection circuits on cards which
                                                       contain a battery. This signal represents the values on
                                                       PCMCIA pin BVD2. Also see Register 2Ch
                                                       (Table 54).
it 3                    RBVD1                          When read, this bit represents the internal state of the
                                                       Battery Voltage detection circuits on cards which
                                                       contain a battery. This signal represents the values on
                                                       PCMCIA pin BVD1. Also see Register 2Ch
                                                       (Table 54).
it 41                   CWPROT                         This bit is set to 1 when RWPROT changes state.
it 51                   CRDY//BSY                      This bit is set to 1 when the bit RRDY//BSY changes
                                                       state.
it 61                   CBVD2                          This bit is set to 1 when the corresponding bit
                                                       RBVD2 changes state.
it 71                   CBVD1                          This bit is set to 1 when the corresponding bit
                                                       RBVD1 changes state.
OTES:
When this register is read, these four bits are reset.
S012002-1201                                                                         Configuration Registers


                                                                                              83
PROM Register
dress: SELECT 0Dh
me: PCMCIA Socket and Copy Register CCR3
pe: Write/Read
 le 67.  PCMCIA socket and Copy Register CCR3: Address 0Dh
 Placement    Bit Name             Description
s 3–0         Socket Number        This field indicates to the card that it is located in the
                                   nth socket. The first socket is numbered 0. This
                                   permits cards designed to share a common set of I/O
                                   ports to do so while remaining uniquely identifiable.
s 5–4         Copy Number          Cards which indicate in their CIS that they support
                                   more than one copy of identically configured cards,
                                   should have a copy number (0 to MAX twin cards,
                                   MAX = n – 1) written back to the socket and copy
                                   register.
 7            Reserved
nfiguration Registers                                                     PS012002-1201


EPROM Register
ddress: SELECT 1Fh
ame: PCMCIA I/O Event Indication CCR4
ype: Read/Write
 ble 68. PCMCIA I/O Event Indication CCR4: Address 1Fh
it Placement Bit Name               Description
it 7         RSVDEVT3               Input pin EXTP_STSCHG/RES2 sets this bit. When
                                    this bit is set and the PIEnab bit is set to 1, the
                                    changed bit in the Card configuration and status
                                    register is also set to 1.
it 6         RSVDEVT2               Input pin ATA_DATA8/RES1 sets this bit. When this
                                    bit is set and the PIEnab bit is set to 1, the changed
                                    bit in the Card configuration and status register is
                                    also set to 1.
it 5         PIEvt                  The card latches this bit to a 1on receipt of a
                                    validated incoming packet over an RF channel. The
                                    source of this signal is ATA_DATA9/PACK_IN.
                                    When this bit is set to 1 and the PIEnab bit is set to 1,
                                    the changed bit in the Card configuration and status
                                    register is also set to 1. And, if the SIGCHG bit in the
                                    card configuration status register has also been set by
                                    the host, the STSCHG pin (pin 63) goes Low. The
                                    host writing a 1 to this bit clears it to 0. Writing a 0 to
                                    this bit has no effect.
it 4         RIEvt                  This bit is latched to a 1 by the card after the receipt
                                    of a 1 on the ATA/PDIAG/ATA_BHE/RING-IN
                                    signal. When this bit is set to 1 and the RIEnab bit is
                                    set to 1, the changed bit in the Card configuration
                                    and status register is also set to 1. And, if the
                                    SIGCHG bit in the card configuration status register
                                    has also been set by the host, then the STSCHG pin
                                    (pin 63) goes Low. The host writing a 1 to this bit
                                    clears it to 0. Writing a 0 to this bit has no effect.
S012002-1201                                                       Configuration Registers


                                                                                             85
 le 68.  PCMCIA I/O Event Indication CCR4: Address 1Fh (Continued)
 Placement    Bit Name              Description
 3            RSVDENAB3             Setting this bit enables the Changed bit in the card
                                    configuration and status register to be set when the
                                    RSVDEVT3 bit is set. When this bit is cleared, this
                                    feature is disabled.
 2            RSVDENAB2             Setting this bit enables the Changed bit in the card
                                    configuration and status register to be set when the
                                    RSVDEVT2 bit is set. When this bit is cleared, this
                                    feature is disabled.
 1            PIENAB                Setting this bit enables the changed bit in the Card
                                    configuration and status register to be set when the
                                    PIEvt bit is set. When this bit is cleared, this feature
                                    is disabled.
 0            RIENAB                Setting this bit enables the changed bit in the Card
                                    configuration and status register to be set when the
                                    RIEvt bit is set. When this bit is cleared, this feature
                                    is disabled.
nfiguration Registers                                                     PS012002-1201


S012002-1201 Configuration Registers

                                                                                            87
 ppendix A: Multifunction Pins
 ERVIEW OF MULTIFUNCTION PINS
                                   ENABLE_RDY_BSY(REG_00 [4])
                +READY/–BUSY                                     S
                                                              I1       PC_RDY/BSY/IREQ/HINT
                                                                 Mx2x1
                                                              I0
                LEVEL IRQ
                                I0
                                     Mx2x1
                PULSE_IREQ
                                I1   S
                     CCR0 [6]
                     EN_CTR_IRQ,REG_00 [5]
             Figure 12.       Z16017BA PC_RDY/BSY/IREQ/HINT Pin
            Note: Width of the PULSE_IREQ is: T = 192 x Tpc_mclk_in
pendix A: Multifunction Pins                                            PS012002-1201


                                                        MEM_ACCESS
                                                                                     ATA_PDASP/EXTP_WP
                                                              EN EXTP WP, REG01 [5]
 PC_WP//IOIS16//IOIS16
                                 I0
                                                                                        ATA_IOCS16
                           Mx2x1
                            S     I1
                                                                     IO_ACCES
                                                    EN_WP1, REG12 [3]
                                     EN_WP1
                                                    EN_WP1, REG16 [3]
                                     EN_WP2
                                                    EN_WP1, REG1A [3]
                                     EN_WP3
                       Figure 13.     Z86017BA PC_WP//IOIS16//IOIS16 Pin
S012002-1201                                                            Appendix A: Multifunction Pins


                                                                                                   89
                                                    MEM_ACCESS
                                                                                 ATA_PDASP/EXTP_WP
                                                          EN EXTP WP, REG01 [5]
WP//IOIS16//IOIS16
                            I0
                                                                                    ATA_IOCS16
                      Mx2x1
                       S    I1
                                                                IO_ACCES
                                               EN_WP1, REG12 [3]
                               EN_WP1
                                                EN_WP1, REG16 [3]
                               EN_WP2
                                                EN_WP1, REG1A [3]
                               EN_WP3
                   Figure 14.    Z16017BA PC_WP//IOIS16//IOIS16 Pin
pendix A: Multifunction Pins                                                    PS012002-1201


                                                                EN_DASP,REG2 [3]
                                                                                         EN_DASP_EXT,REG2 [7]
                                                                                                                           ATA_PDASP/EXTP_WP
                                                                                         EN_DASP_INT,REG2 [6]
                                                                                         PDASP_SET,REG2 [2]
PC/BVD2//SPKR//DASP/DREQ
                                      I1
                              Mx2x1                            I0                        EN_BVD,REG2C [6]
                                                       Mx4x1                                                                   EXTP_AUDIO
                                      I0
                               S
                                                               I1                        AUDIO_EN,CCR1 [3]
                                  PCMCIA_MODE
                                                               I2
                                                                                                                             ATA_DREQ/BVD1
                                IORD
                                CE1                    S1   S0 I3
                                CE2                                     EN_SPKR,REG02 [5]
                                                                                       EN_DMA_ACK1,REG12 [7]
                                                                                       EN_DMA_ACK2,REG16 [7]
                                                                                       EN_DMA_ACK3,REG1A [7]
     PC_INPACK/DREQ
                                      I1
                              Mx2x1
                                                                                                   EN_PDIAG_EXT,REG04 [7]
                                      I0                                                                                       ATA_PDIAG
                               S                                                                   AT_PDIAG
                                             ATA_MODE                                               ATA_MODE
                                                                                                    INT_PDIAG,REG02 [2]
  PC_BVD1//STSCHG//PDIAG
                                      I0                                                            EN_INT_PDIAG,REG04 [6]
                              Mx2x1
                                                                                                    EN_PDIAG,REG02 [1]
                                      I1                                                                                      EXTP_STSCHG
                               S
                                                                          S
                                          PCMCIA_MODE                              I1
                                                                          Mx2x1
                                                                                   I0
      PC_REG//DACK
                                                                                                                             ATA_DACK/BVD2
                                         MAP1_DMACK
                                         MAP2_DMACK
                                         MAP3_DMACK
                                       PCMCIA_MODE
                          MAPn_DMACK = EN_DMA_ACKn & MAPn_ACC
                         Figure 15.           Z86017BA (Overview of Internal Structure)
S012002-1201                                                                                      Appendix A: Multifunction Pins


                                                                                                                                                       91
                                                                         EN_DASP,REG2 [3]
                                                                                                  EN_DASP_EXT,REG2 [7]
                                                                                                                                      ATA_PDASP/EXTP_W
                                                                                                  EN_DASP_INT,REG2 [6]
                                                                                                  PDASP_SET,REG2 [2]
D2//SPKR//DASP/DREQ                              I1
                                       Mx2x1                            I0                        EN_BVD,REG2C [6]
                                                                                                                                          EXTP_AUDIO
                                                  I0           Mx4x1
                                        S
                                                                        I1                        AUDIO_EN,CCR1 [3]
                                           PCMCIA_MODE
                                                                        I2
                                                                                                                                        ATA_DREQ/BVD1
                                 IORD
                                                               S1    S0 I3
                                 CE1
                                 CE2                                             EN_SPKR,REG02 [5]
                                                                                               EN_DMA_ACK1,REG12 [7]
                                                                                               EN_DMA_ACK2,REG16 [7]
                                                                                               EN_DMA_ACK3,REG1A [7]
C_INPACK/DREQ                   I1
                                            BVD_CTRL,REG26 [7]
                         Mx2x1
                                                                                                            EN_PDIAG_EXT,REG04 [7]
                                 I0                                                                                                        ATA_PDIAG
                          S                                                                                 AT_PDIAG
                                                     ATA_MODE                                                 ATA_MODE
                                                                                                             INT_PDIAG,REG02 [0]
 D1//STSCHG//PDIAG
                                             I0                                                              EN_INT_PDIAG,REG04 [6]
                                    Mx2x1                                                                    EN_PDIAG,REG02 [1]
                                             I1                                                                                          EXTP_STSCHG
                                     S
                                                                                   S
                                                 PCMCIA_MODE                               I1
                                                                                   Mx2x1
                                                                                            I0
PC_REG//DACK
                                                                                                                                        ATA_DACK/BVD2
                                                MAP1_DMACK
                                                MAP2_DMACK
                                                MAP3_DMACK
                                             PCMCIA_MODE
                    MAPn DMACK = EN DMA ACKn & MAPn ACC
                     Figure 16.               Z16017BA (Overview of Internal Structure)
pendix A: Multifunction Pins                                                                                                        PS012002-1201


S012002-1201 Appendix A: Multifunction Pins

                                                                                 93
 ppendix B: Electrical Characteristics
nd Timing
             Table 69.    Absolute Maximum Ratings
              Parameter                     Symbol Unit Min. Value   Max. Value
              Supply Voltage                VDD    V    –0.5         7.0
              Input Voltage                 VI     V    –0.5         VDD + 0.5
              Output Voltage                VO     V    –0.5         + 0.5 VDD
              Storage Temperature           TSTG   C    –40          +125
              Temperature Under Bias        TBIAS  C    –25          +85
pendix B: Electrical Characteristics and Timing                    PS012002-1201


              Table 70.   DC Electrical Characteristics
                                     VCC = 3.3V ± 10%
                               TA = 0°C to +70°C
                                                           Typical
ym. Parameter                  Minimum          Maximum    at 25°C Units Conditions
IH   Input High Voltage        0.7 VCC          VCC                V
IL   Input Low Voltage         –0.3             0.1 VCC            V
OH   Output High Voltage       1.8                                 V        IOH = 4 mA
OH   Output High Voltage       VCC – 100                           V        IOH = 100 µA
                               mV
OL   Output Low Voltage                         0.4                V        IOL = 4 mA
RH   Reset Input High Voltage  0.8 VCC          VCC                V
Rl   Reset Input Low Voltage   –0.3             0.1 VCC            V
L    Input Leakage             –2               2                  µA       Test at 0V,
                                                                            VCC
 L   Output Leakage            –2               2                  µA       Test at 0V,
                                                                            VCC
R    Reset Input Current                        –80                µA       VRL = 0V
 C                  1
     Supply Current                             4          3       mA       @ 20 MHz
 C1  Standby Current2                           300        250     µA
IH   Input High Voltage        2.0              VCC                V
IL   Input Low Voltage         –0.3             0.8                V
OH   Output High Voltage       2.4                                 V        IOH = –6 mA
OH   Output High Voltage       VCC –100                            V        IOH = 100 µA
                               mV
OL   Output Low Voltage                         0.4                V        IOL = 6 mA
S012002-1201                           Appendix B: Electrical Characteristics and Timing


                                                                                        95
                 Table 70.   DC Electrical Characteristics (Continued)
                                        VCC = 3.3V ± 10%
                                  TA = 0°C to +70°C
                                                              Typical
m. Parameter                      Minimum          Maximum    at 25°C Units Conditions
H     Reset Input High Voltage    3.8              VCC                 V
l     Reset Input Low Voltage     –0.3             0.8                 V
      Input Leakage               –2               2                   µA   Test at 0V,
                                                                            VCC
      Output Leakage              –2               2                   µA   Test at 0V,
                                                                            VCC
      Reset Input Current                          –80                 µA   VRL = 0V
                      1
      Supply Current                               5          4        mA   @ 20 MHz
 1    Standby Current2                             350        300      µA
   1. All inputs driven to 0V, VCC and outputs floating.
   2. EN_Pads Bit Set, PC_MCLK=0, EE_SK=0
pendix B: Electrical Characteristics and Timing                           PS012002-1201


  TERNAL ATTRIBUTE MEMORY TIMING
            Table 71.  Internal Attribute Memory Timing
                                  (Speed Version: 300 ns)
 o.     Symbol     Parameter                              Minimum Maximum Units
        TcR        Read Cycle Time                        300                ns
        TaA        Address Access Time                            300        ns
        TaCE       Card Enable Time                               300        ns
        TaOE       Output Enable Access Time                      150        ns
        TdisCE     Output Disable Time from CE                    100        ns
        TdisOE     Output Disable Time from OE                    100        ns
        TenCE      Output Enable Time from CE             5                  ns
        TenOE      Output Enable Time from OE             5                  ns
        TvA        Data Valid from Address Change         0                  ns
0       TsuA       Address Setup Time                     30                 ns
1       ThA        Address Hold Time                      20                 ns
2       TsuCE      Card Enable Setup Time                 0                  ns
3       ThCE       Card Enable Hold Time                  20                 ns
4       TvWToe     Wait Valid from OE                             35         ns
5       TwWT       Wait Pulse Width                               12         µs
6       TvWT       Data Setup for Wait Released           0                  ns
S012002-1201                          Appendix B: Electrical Characteristics and Timing


                                                                                    97
                                                     1
    PC_HA <10:0>
                                            2                    9
         PC_REG
                                                           11
       PC_HCE1                                   3
                             10               7                         5
         PC_HOE                       12                      13
                                                         4
         PC_HWE
                                              8
                                                                 6
 PC_DATA <15:0>
   Note:
   PC_REG is active Low for Attribute Memory reads only.
              Figure 17.       PCMCIA Read Memory Timing, No Wait States
pendix B: Electrical Characteristics and Timing                       PS012002-1201


                                                        1
      PC_HA <10:0>
                                                  2                      9
            PC_REG
                                                                        11
         PC_HCE1
         or                                           3
         PC_HCE2
                                10              7                                 5
            PC_HOE
                                         12                4         13
           PC_HWE
                                                           8
                                                                         6
   PC_DATA <15:0>
                                            14                   16
           PC_WAIT
                                                             15
     Note:
     PC_REG is active Low for Attribute Memory reads only.
               Figure 18.     PCMCIA Read Memory Timing, Wait State Enabled
S012002-1201                                 Appendix B: Electrical Characteristics and Timing


                                                                               99
             Table 72.   PCMCIA Memory Write Timing
.   Symbol    Parameter                  Min. Max. Min. Max. Min. Max. Units
    TcW       Write Cycle Time           200       150       100         ns
    TwWE      Write Pulse Width          120       80        60          ns
    TsuA      Address Setup Time         20        20        10          ns
    TsuAwe    Address Setup Time for     140       100       70          ns
              WE
    TsuCwe    Card Enable Setup Time     140       100       70          ns
              for WE
    TsuDwe    Data Setup Time for WE     60        50        40          ns
    ThD       Data Hold Time             30        20        15          ns
    TrecWE    Write Recover Time         30        20        15          ns
    TdisOwe Output Disable Time from            90      75         50    ns
              WE
    TdisOE    Output Disable Time from          90      75         50    ns
              OE
    TenWE     Output Enable Time from 5            5         5           ns
              WE
    TsuCwe    Output Enable Setup from 10          10        10          ns
              WE
    ThCwe     Card Enable Hold from      10        10        10          ns
              WE
    TsuCE     Card Enable Setup Time     0         0         0           ns
    ThCE      Card Enable Hold Time      20        20        15          ns
pendix B: Electrical Characteristics and Timing                  PS012002-1201


            Table 72.   PCMCIA Memory Write Timing (Continued)
o.  Symbol   Parameter             Min. Max. Min. Max. Min. Max. Units
2   TvWTwe Wait Valid from WE            35             35            35    ns
3   TwWT     Wait Pulse Width            12             12            12    µs
4   TvWT     WE High from Wait     0            0             0             ns
             Released
S012002-1201                     Appendix B: Electrical Characteristics and Timing


                                                                                               101
                                                       17
   PC_HA <10:0>
                                                    20
        PC_REG                             19
                                                                              24
       PC_HCE1                                          21
       or
       PC_HCE2
       PC_HWE                                                18
        PC_HOE
                                        28                               29
                                                                22          23
 PC_DATA <15:0>                                                    Data In
                                       26
                                                        25                 27
                            Data Out
 PC_DATA <15:0>
 Note: PC_REG is active Low for Attribute Memory reads only.
              Figure 19.     PCMCIA Write Memory Timing, No Wait States
pendix B: Electrical Characteristics and Timing                                  PS012002-1201


                                                               17
      PC_HA <10:0>
          PC_REG
                                                           20
                                                                             24
         PC_HCE1                                              21
          or
          PC_HCE2
                                                   30                     31
                                               19
         PC_HWE                                                   18
          PC_HOE
                                                                          29
                                            28
                                                                     22      23
    PC_DATA <15:0>
                                                26
         PC_WAIT
      Note:                                                       33
      PC_REG is active Low for Attribute Memory reads only.
               Figure 20.         PCMCIA Write Memory Timing, Wait State Enabled
S012002-1201                                       Appendix B: Electrical Characteristics and Timing


                                                                              103
             Table 73.   I/O Read Timing Specification
.          Symbol       Parameter                      Minimum Maximum Units
           TdIORD       Data Delay After IORD          100              ns
           ThIORD       Data Hold Following IORD       0                ns
           twIORD       IORD Width Time                165              ns
           TsuAiord     Address Setup Before IORD      70               ns
           ThAiord      Address Hold Following IORD    20               ns
           TsuCEiord    CE Setup Before IORD           5                ns
           ThCEiord     CE Hold Following IORD         20               ns
           TsuRGiord    REG Setup Before IORD          5                ns
           ThRGiord     REG Hold Following IORD        0                ns
           TdIPKiord    INPACK Delay to IORD           0       45       ns
           TdIPKiord    INPACK Delay from IORD                 45       ns
           TdIOISad     IOIS16 Delay from Address              35       ns
           TdIOISadr    IOIS16 Delay Rise from Address         35       ns
           TdWiord      Wait Delay from IORD                   35       ns
           TdWTr        Data Delay from Wait Rising            35       ns
           TwWT         Wait Width Time                        12       µs
pendix B: Electrical Characteristics and Timing                 PS012002-1201


   PC_HA <11:0>
                                                                            39
                                                                            55
       PC_REG                        42                             43
                                                      37
                                                      56
      PC_HCEx                        40
                                                                     41
                                                    35
                                                    56
      PC_IORD
                                 38
    PC_INPACK
                                               44                              45
     PC_IOIS16
                              46
                                                                                  47
      PC_WAIT
                                            48             49            36
                                                       50
C_DATA <15:0> (In)
                                                                    Data
                   Figure 21.    I/O Read Timing
S012002-1201                                Appendix B: Electrical Characteristics and Timing


                                                                                   105
             Table 74.   I/O Write Timing Specification
.          Symbol        Parameter                         Minimum Maximum Units
           TsuIOWR       Data Setup before IOWR            60               ns
           ThIOWR        Data Hold after IOWR              30               ns
           TwIOWR        IOWR Width Time                   165              ns
           TsuAiowr      Address Setup to IOWR             70               ns
           ThAiowr       Address Hold after IOWR           20               ns
           TsuCEiowr     CE Setup before IOWR              5                ns
           ThCEiowr      CE Hold after IOWR                20               ns
           TsuRGiowr     REG Setup before IOWR             5                ns
           ThRGiowr      REG Hold after IOWR               0                ns
           TdIOISadr     IOIS16 Delay Falling from Address         35       ns
           TIdIOISadr    IOIS16 delay Rising from Address          35       ns
           TdWTiowr      Wait Delay Falling from IOWR              35       ns
           TwWT          Wait Width Timing                         12       µs
pendix B: Electrical Characteristics and Timing                      PS012002-1201


   PC_HA <11:0>
                                                                                55
       PC_REG                        58                                 59
      PC_HCEx                       56
                                                                       57
                                                      53
      PC_IOWR
                                54
                                                                                       61
     PC_IOIS16
                                                         63
       PC_WAIT
                            60
                                             51
                                                                             52
                                            62
  PC_DATA <15:0>                                         Data Out
                  Figure 22.     I/O Write Timing
                  Table 75.    Skew Timing Between PCMCIA And ATA/IDE or
                               Peripheral Bus
o.               Symbol            Parameter                Minimum        Maximum        Units
4                TskADR            Address Skew             0              25             ns
5                TskI/Of           I/O Fall Skew            0              25             ns
6                TskI/Or           I/O Rise Skew            0              25             ns
7                TskMEMf           Mem Fall Skew            0              25             ns
8                TskMEMr           Mem Rise Skew            0              25             ns
S012002-1201                                    Appendix B: Electrical Characteristics and Timing


                                                                              107
       PC_HA <10:0>
                                       64
       ATA_HA <2:0>
     PC_DATA <15:0>
                                       64
    ATA_DATA <15:0>
 PC_HIOW, /PC_HIOR
 PC_HCE1, PC_HCE2
                                          65                 66
ATA_HIOW, /ATA_HIOR
ATA_HCS0, ATA_HCS1
        PC_WE, /OE
                                          67                 68
ATA_HIOW, ATA_HIOR
 ATA_MRD, ATA_MWR
             Figure 23.   Skew Timing Between PCMCIA and ATA/IDE or
                          Peripheral Bus
pendix B: Electrical Characteristics and Timing                 PS012002-1201


17 DEVICE SLEW DELAY
              50
              40
                                                               35
              30
          ns                              25
              20
                   15
              10
               0
                   25                   50                   100
                                  Output Load (pF)
             Figure 24. 017 Slew Delay Derating Curve (Typical)
S012002-1201                       Appendix B: Electrical Characteristics and Timing


                                                                           109
             Table 76.   Serial Interface Timing
.       Symbol         Parameter                 Minimum Maximum    Units
        TpMCKin        Master Clock In Period    50                 ns
        TsuCS          CS Setup to CLK time      25                 ns
        ThCS           CS Hold after CLK         0                  ns
        ThDout         Data Hold Time            10                 ns
        TsuDout        Data Setup Time           25                 ns
        ThDin          Data Hold Time            0                  ns
        TsuDin         Data Setup Time           25                 ns
        TpCKw          Clock Period, Master      200                ns
        TpCKs          Clock Period, Slave       200                ns
pendix B: Electrical Characteristics and Timing              PS012002-1201


     PC_MCLK_IN
                                            69
                                 76
         EE_CS
         EE_SK
                Sync Bit 1    1 0     Read
          EE_DO          SB CMD         Address
                       Master Mode Read EEPROM Timing
          EE_DI
                                                              Data
                Sync Bit 1    0 1    Write
          EE_DO          SB CMD         Address               Data
                                  Master Mode Write EEPROM Timing
                                                                              Ready
          EE_DI                                                          Busy
          EE_CS
                            70                                                 71
          EE_SK
                               73
                                      72
          EE_DO
                                                75
                                                       74
          EE_IN
               Figure 25.        FMaster Mode Read EEPROM Timing
S012002-1201                                       Appendix B: Electrical Characteristics and Timing


                                                                                                                                                           111
            EE_CS
                                       77
             EE_SK
                                     8-Bit Address                                 Command
                                   D7D6D5D4 D3D2D1D0D7 D6 D5 D4 D3 D2 D1 D0
             EE_DI                                   1 1 0 X X X X X
                                                       Sync Bit      Read Cmd                    D D D D D D D D
            EE_DO      Tri-State                                                                 7 6 5 4 3 2 1 0
                                                                                                                   Tri-State
                                                          Slave Read Command
            EE_CS
            EE_SK
                                   D7D6D5D4 D3 D2D1D0D7 D6 D5 D4 D3 D2 D1 D0 D7D6D5D4 D3 D2D1D0
             EE_DI                                     1 0 1 X X X X X
                                     8-Bit Address                                  Command            Data
                                                              Sync Bit      Write Cmd
            EE_DO
                      Tri-State                                                                                    Tri-State
                                                       Slave Write Command
              EE_CS
                                            70
                                                                                                                   71
              EE_SK
                                                         75
                                                                                         74
              EE_DI
                                                                                                 73       72
               EE_DO       Tri-State                                                                                           Tri-State
                                                                                        Slave Timing
              Figure 26.                    Slave Interface Timing (Read)
pendix B: Electrical Characteristics and Timing                                                                                            PS012002-1201


S012002-1201 Appendix B: Electrical Characteristics and Timing

                                                                                                                113
 ppendix C: Timing Examples
                                                              g
                PC_HRESET//HRESET
                                  /POR
                        /ATA_HRESET
                                                 40 µs/@ 20 MHz
                                EE_CE
                                                  65 µs/@ 20 MHz                   65 µs/@ 20 MHz
                 PCMCIA Mode Bit 5 Register 03H = 1
                                                                   40 µs/@
                                                                    20 MHz
                                                                               5 EE accesses
       65 µs/@ 20 MHz                                                          in Master mode
                    65 µs/@ 20 MHz + EE                         65 µs/@ 20 MHz
                    accesses in Master Mode
                                                    Vcc
                                                                                /ATA_HRESET
                                                             Z86017BA
                                                                Vcc
                       PC_HRESET//HRESET
               Figure 27.        Z16017BA Reset Timing PCMCIA Mode
pendix C: Timing Examples                                                                         PS012002-1201


                                                                                                                                                 CDEF
                                                                                     CDEF
                                                                                                             0
                                   1X0
                                                                                                                                                 90AB
                                                                                     90AB
                                                                                                             0
                                   1X0
                                                                                                             0
                                                                                     5678                                                        5678
                                   1X0
                                                                                                                                                 1234
                                                                                     1234                    0
                                  1X0
                                                                                                                                                        ATA_DATA [15-0]
                                                          ATA_HIOW
                                                                                                            ATA_HA [2-0]
                                                ATA_REG
                                                                                            PC_DATA [7-0]
                                                                                                                                      ATA_HIOW
                                 PC_HA [10-0]
                                                                                                                           ATA_HCS0
               PC_CE1
                                                                     PC_WP//IOIS16
                        PC_CE2
           Figure 28.                    PCMCIA ATA/IDE 16-Bit I/O Write
                                         (Register 24 = 01, Internal IOIS 16 is selected)
S012002-1201                                                                                                               Appendix C: Timing Examples


                                                                              PC_CE1
                                                    Figure 29.
                                                                              PC_CE2
  pendix C: Timing Examples
                                                                           PC_HA[10:0]    1X0           1X0    1X0          1X0   1X0           1X0    1X0             1X0    1X0       1X0          1X0         1X0    1X0    1X0    1X0       1X0    1X0    1X0
                                                                              PC_REG
                                                                             PC_HIOR
                              PCMCIA ATA / IDE 8-Bit Long Read
                                                                         PC_DATA [7-0]      01            23    45           67     89            AB        01           EF     01              23     45          67     47     47     47        47     47     47
                                                                           ATA_HA [2-0]            0                   0                    0                      0                        0                0            0      0     0         0      0      0
                                                                            ATA_HCS0
                                                                            ATA_HIOR
                                                                        ATA_DATA [15-0]          0123                4567                89AB                    CDEF                0123                   4567         47    47      47        47     47     47
                                                                                                                                                DATA READ                                                                                  ECC READ
                              (Reading 512-byte data plus 6-byte ECC)
PS012002-1201
                                                                                                                                                                                                                                                                     115


S012002-1201 Appendix C: Timing Examples

                                                                                       117
 ppendix D: Packaging and Ordering
nformation
 MHZ PCMCIA ADAPTER CHIPS
 017                 Z86M17               Z16017               Z16M17
 -Pin VQFP           100-pin VQFP         100-Pin VQFP         100-Pin VQFP
 01720ASC            Z86M1720ASC          Z1601720ASC          Z16M1720ASC
             For fast results, contact your local ZiLOG sales office for assistance in
             ordering the part desired.
             Package
             A = VQFP
             Temperature
             S = 0° to +70° C
             Speed
             20 = 20 MHz
             Environmental
             C = Plastic Standard
pendix D: Packaging and Ordering Information                            PS012002-1201


Z 16017 20 A S C       is a Z16017, 20 MHz, VQFP, 0 °C to +70 °C, Plastic Standard Flow
                       Environmental Flow
                       Temperature
                       Package
                       Speed
                       Product Number
                       Zilog Prefix
            Figure 30.  Example Package Name
S012002-1201                                        Appendix D: Packaging and Order-


                                                                    119
             Package Dimensions
             Figure 31. 100-Lead VQFP Package Diagram
pendix D: Packaging and Ordering Information          PS012002-1201


S012002-1201 Appendix D: Packaging and Order-

                                                                                      121
 ppendix E: PCMCIA Interface Devel-
pment Kit
  NERAL DESCRIPTION
            The Z8601700ZCO Development Kit allows easy evaluation of the
            functions and capabilities of the Z86017 PCMCIA Interface Adapter. The
            board provides a ZIF socket for easy insertion and removal of the
            Z86017, as well as a full pin-out header for access to all signals. The
            board also provides breadboard space to assist in development.
            Power to the Z86017 can either be supplied through a common point for
            current measurements applied through the interface, or supplied through a
            separate power connector. Programming the Z86017 is accomplished
            through the SPI port of a microcontroller or through the on-board
            EEPROM. The main clock source is supplied through the interface or
            through the on-board clock.
 6017 SPECIFICATIONS
            Power Requirements:
            3.0V < VCC < +5.5V
            Dimensions
            Length: 7.6 in. (19.3 cm)
            Width: 4.5 in. (11.4 cm)
pendix E: PCMCIA Interface Development Kit                              PS012002-1201


IT CONTENTS
            Evaluation Board
            • Z86017 PCMCIA Interface Adapter Device
            • 100-Pin VQFP ZIF Socket
            • 256 X 8-Byte EEPROM
            • 20 MHz Oscillator
            • Headers for full Z86017 pin-out
            • Headers for access for PCMCIA signals
            • Headers for connection to AT-Bus (on both Host and ATA side)
            • Headers for connection to PCMCIA Extender Card
            • Header for intelligent peripheral programming of EEPROM
            • Power Connector
            ZPCMCIA0ZDP PCMCIA Extender Card
            Cables
            • Two 6-inch, 34-pin IDC to 34-pin IDC Cables
            • Power Cable with 1.0A Fuse
            • Power Cable with Banana Plugs
            Software
            • Example Initialization Code
S012002-1201                                     Appendix E: PCMCIA Interface De-


                                                                      123
            Documentation
            •  Z8601700ZCO Evaluation Kit User’s Manual
            •  Z86017/Z16017 Reference Manual
            •  Product Registration Card
pendix E: PCMCIA Interface Development Kit              PS012002-1201


S012002-1201 Appendix E: PCMCIA Interface De-

Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
ZiLOG:
 Z1601720ASG1868
