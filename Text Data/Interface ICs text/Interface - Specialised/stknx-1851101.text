                                                                                                    STKNX
                              Miniature KNX transceiver with voltage regulators and
                                                                              microcontroller support
                                                                                       Datasheet - production data
                                                               Description
                                                               The STKNX is a transceiver device for KNX TP
                                                               communication. The small package and few
                                                               external components enable the very compact
                                                               KNX nodes design.
        VFQFPN24 (4 x 4 x 1.0 mm, 0.5 mm pitch)                The simple interface to the µC allows easy
                                                               replacement of physical layer discrete
                                                               components implementations.
Features                                                       The STKNX device features two integrated
                                                               voltage regulators for external use in the
 Very thin fine pitch 4 x 4 mm VQFNPN24                       application: the selectable 3.3 V / 5 V - 20 mA
    package                                                    linear regulator and the adjustable 1 V to 12 V -
 KNX certified, KNX TP1-256 supported                         150 mA high-efficiency DC/DC step down
 Easy interface to µC                                         switching converter.
 Very small system solution                                   The integrated KNX bus power extractor supports
                                                               bus current up to 30 mA to power external
 Two integrated voltage regulators for external
                                                               devices and the STKNX transceiver's own power
    use in application
                                                               needs, while limiting the bus current slew rate
    – Selectable 3.3 V / 5 V - 20 mA linear                    according to KNX specifications.
          regulator
    – Adjustable 1 V to 12 V - 150 mA high-                    The STKNX assures the safe coupling to the bus
          efficiency DC/DC step down switching                 and provides the bus monitoring warning for the
          converter                                            loss of bus power.
 KNX bus power extractor supporting bus                                   Table 1. Device summary
    current up to 30 mA
                                                                   Order code        Package         Packaging
 Adjustable KNX bus current slew rate dI/dt
 No crystal required                                                STKNX          VFQFPN24             Tray
 Operating temperature range -40 °C to +85 °C                     STKNXTR          VFQFPN24        Tape and reel
Applications
 KNX twisted pair network (KNX TP1-256)
February 2018                                        DocID031327 Rev 1                                          1/24
This is information on a product in full production.                                                       www.st.com


Contents                                                                                                                    STKNX
Contents
1        Typical application circuit and block diagram . . . . . . . . . . . . . . . . . . . . 3
         1.1    Typical application circuit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3
         1.2    Block diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
2        Pin connection and pin description . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
         2.1    Pin connection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
         2.2    Pin description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
3        Thermal characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
4        Electrical specifications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
         4.1    Absolute maximum ratings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
         4.2    Recommended operating conditions . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
         4.3    Electrical characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
5        Device description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
         5.1    Bus interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
                5.1.1    Transmitter . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
                5.1.2    Receiver . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
                5.1.3    Impedance modulator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
         5.2    Voltage regulators . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
                5.2.1    3.3 V / 5 V linear regulator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
                5.2.2    Buck converter . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
6        Package information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
         6.1    VFQFPN 4 x 4 x 1.0 24 pitch 0.5 package information . . . . . . . . . . . . . . 21
7        Revision history . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
2/24                                   DocID031327 Rev 1


STKNX                                                   Typical application circuit and block diagram
1           Typical application circuit and block diagram
1.1         Typical application circuit
    Figure 1. Typical application circuit, buck converter enabled, linear regulator supplied by
                                         impedance modulator
                      %$%$  %$%$   %$%$    %$%$
                       '#      (/%     -9        */
                     %$%$@44              7%%)7@1%
                                             7%%)7
                     73&'
                     7%%@3&(*/                 7'-5
                                            ,/9@"$
                     7$$$03&
                              45,/9          7("5&
                                             ,/9@"
                     7$$@0,
                                                3
                     ,/9@0,
                                               $1)
                     ,/9@59
                     ,/9@39                     $1-
                     7$$@4&-     ,/9@#       ,/9@#
                                                                                               ".
Note:       VOUT range 1 V ÷ 12 V.
            VCORE selectable to 3.3 V / 5 V through VCC_SEL (3.3 V in the example).
                                            DocID031327 Rev 1                                      3/24
                                                                                                        24


Typical application circuit and block diagram                                                STKNX
  Figure 2. Typical application circuit, buck converter enabled, linear regulator supplied by buck
                                                 converter
                       %$%$  %$%$   %$%$    %$%$
                         '#     (/%     -9        */
                      %$%$@44              7%%)7@1%
                                              7%%)7
                      73&'
                      7%%@3&(*/                 7'-5
                                             ,/9@"$
                      7$$$03&
                               45,/9          7("5&
                                              ,/9@"
                      7$$@0,
                      ,/9@0,                     3
                      ,/9@59                    $1)
                      ,/9@39                     $1-
                      7$$@4&-     ,/9@#       ,/9@#
                                                                                             ".
Note:        The VOUT level needs to be compliant with VDD_REGIN recommended operating
             conditions.
             VCORE selectable to 3.3 V / 5 V through VCC_SEL (3.3 V in the example).
4/24                                         DocID031327 Rev 1


STKNX                                          Typical application circuit and block diagram
          Figure 3. Typical application circuit, buck converter disabled
             %$%$  %$%$    %$%$   %$%$
              '#      (/%     -9        */
            %$%$@44              7%%)7@1%
                                    7%%)7
            73&'
            7%%@3&(*/                 7'-5
                                   ,/9@"$
            7$$$03&
                     45,/9          7("5&
                                    ,/9@"
            7$$@0,
            ,/9@0,                     3
            ,/9@59                    $1)
            ,/9@39                     $1-
            7$$@4&-     ,/9@#       ,/9@#
                                                                                      ".
Note: VCORE selectable to 3.3 V / 5 V through VCC_SEL (3.3 V in the example).
                                   DocID031327 Rev 1                                      5/24
                                                                                               24


Typical application circuit and block diagram                                              STKNX
                  Figure 4. Typical application circuit, linear regulator disabled
                      %$%$  %$%$   %$%$    %$%$
                        '#     (/%     -9        */
                     %$%$@44              7%%)7@1%
                                             7%%)7
                     73&'
                     7%%@3&(*/                 7'-5
                                            ,/9@"$
                     7$$$03&
                              45,/9          7("5&
                                             ,/9@"
                     7$$@0,
                     ,/9@0,                     3
                     ,/9@59                    $1)
                     ,/9@39                     $1-
                     7$$@4&-     ,/9@#       ,/9@#
                                                                                           ".
Note:       The VOUT level needs to be compliant with VCCCORE recommended operating conditions.
            VCC_SEL needs to be set according to the VCCCORE level (3.3 V in the example).
6/24                                        DocID031327 Rev 1


STKNX                                                        Typical application circuit and block diagram
                              Table 2. External components typical value
Reference     Type            Typ. value               Rating                        Description
Capacitors
   CPH       MLCC                100 nF            VRATED  50 V             Equalizer storage capacitor
    CPL      MLCC                100 nF            VRATED  50 V             Equalizer storage capacitor
            MLCC or                                                   Impedance modulator storage capacitor
  CGATE                     10 F ÷ 47 F          VRATED  10 V
           electrolytic                                                       - see Table 8 on page 18
   CAC       MLCC                 10 nF            VRATED  50 V             Bus AC coupling capacitor
                                                                    Impedance modulator output bulk capacitor
 CVDDHV    Electrolytic         100 F           VRATED  35 V
                                                                              - see Table 8 on page 18
                                                                        Impedance modulator compensation
    CFH      MLCC                 47 nF            VRATED  35 V
                                                                                      capacitor
                                                                        Impedance modulator compensation
    CFL      MLCC                 47 nF            VRATED  35 V
                                                                                      capacitor
    CIN      MLCC                 10 F            VRATED  35 V     Buck converter input decoupling capacitor
   COUT      MLCC                 22 F           VRATED > VOUT           Buck converter output capacitor
                                                                    Buck converter soft-start time programming
    CSS      MLCC           10 nF ÷ 470 nF        VRATED  6.3 V
                                                                       capacitor - see Equation 3 on page 19
   CREF      MLCC                470 nF            VRATED  35 V             VREF decoupling capacitor
  CCORE      MLCC                4.7 F           VRATED  6.3 V          Linear regulator output capacitor
                        1/(2 * RFB1 * 28 kHz),
   CFB1      MLCC                                  VRATED 16 V      Buck converter compensation capacitor
                           NM if RFB1 = 0 
Resistors
   RDIS     Resistor             4.7 M                   -        Reverse polarity discharging resistor
   RSH      Resistor               1 k                   -        Series resistor to CPH
    RSL     Resistor               1 k                   -        Series resistor to CPL
    RTX     Resistor              68                PDISS  1 W   Tx current limiting resistor
                        (VOUT / 1 V - 1) * RFB2,                   Buck converter output voltage adjusting
   RFB1     Resistor                                      -
                          0  for VOUT = 1 V                       resistor
                        10 k typ. (< 100 k),                     Buck converter output voltage adjusting
   RFB2     Resistor                                      -
                          NM for VOUT = 1 V                        resistor
Inductors
             Power                                  IR > 150 mA,
      L                           33 H                            Buck converter output inductor
            inductor                               ISAT > 550 mA
Diodes
                                                     VBR > 50 V,   Input diode (protection from reverse polarity
     D1      Diode       LL4148 or equivalent
                                                 VF (50 mA) < 1 V connection)
                            SMAJ40CA or
     D2       TVS                                         -        Transient voltage suppressor diode
                               equivalent
                                               DocID031327 Rev 1                                             7/24
                                                                                                                  24


Typical application circuit and block diagram                                                   STKNX
                      Table 2. External components typical value (continued)
Reference     Type          Typ. value            Rating                     Description
                                                VBR > 50 V,
     D3      Diode     LL4148 or equivalent                   Output diode
                                             VF (50 mA) < 1 V
                                                              Optional KNX_AC clamping diode.
                                                VBR > 50 V,
     D4      Diode     LL4148 or equivalent                   Recommended for noise immunity
                                             VF (50 mA) < 1 V
                                                              improvement in noisy environment.
1.2         Block diagram
                                       Figure 5. Block diagram
8/24                                       DocID031327 Rev 1


STKNX                                         Pin connection and pin description
2     Pin connection and pin description
2.1   Pin connection
                     Figure 6. Pin connection (top view)
                        DocID031327 Rev 1                                   9/24
                                                                                 24


Pin connection and pin description                                                                       STKNX
2.2          Pin description
                                          Table 3. Pin description
 Pin   Pin name                                                 Function
                  Linear regulator supply input. Short to VCCCORE to disable the linear regulator and supply
  1   VDD_REGIN
                  VCCCORE externally.
  2     KNX_AC    BUS AC-coupled sense for the Rx input and Tx feedback. DC biased to 9.7 V typ.
  3       R68     KNX transmitter output
  4      KNX_B    Analog ground
  5      CP_H     Equalization cap connection to KNX supply (KNX+)
  6       CP_L    Equalization cap connection to KNX ground (KNX-)
  7       VFLT    Impedance modulator compensation
  8      VREF     Impedance modulator reference
  9     VDDHV     VDDHV supply input and impedance modulator feedback
 10   VDDHV_PD Impedance modulator power output
 11      KNX_A    KNX power supply input (KNX+)
 12      KNX_B    Analog ground
 13      VGATE    Impedance modulator storage capacitor connection
                  Step down converter supply input. Short to ground or leave floating to disable the switching
 14    DCDC_IN
                  converter.
 15    DCDC_LX    Step down converter switching output
 16   DCDC_GND Step down converter power ground
 17    DCDC_SS    Step down converter soft-start programming pin
                  Step down converter feedback input. Sets output voltage (1 V ÷ 12 V range) through the
 18    DCDC_FB
                  resistor divider.
 19     VCC_OK    VCCCORE power good CMOS digital output
 20    VCCCORE    Linear regulator output (3.3 V / 5 V selectable). Supply voltage for digital I/O.
 21     KNX_OK    KNX bus power good CMOS digital output
                  Selects linear regulator output voltage. Internally pulled-down (6 A typ.).
 22    VCC_SEL
                  Tie to VCCCORE to select 5 V. Short to ground or leave floating to select 3.3 V.
 23     KNX_RX    Receiver CMOS digital output
 24     KNX_TX    Transmitter digital input. Internally pulled-down (6 A typ.).
                  Connect to analog ground.
  -   Exposed pad For thermal optimization, maximize the area of the ground layer on which the exposed pad is
                  soldered and provide good thermal connection with the bottom ground layer through vias.
10/24                                          DocID031327 Rev 1


STKNX                                                                     Thermal characteristics
3     Thermal characteristics
                                  Table 4. Thermal characteristics
      Symbol           Parameter                        Test condition               Value   Unit
             Maximum operating junction
        TJ                                  -                                         110      °C
             temperature
       TAMB  Operating ambient temperature -                                       -40 to 85   °C
       TSTG  Storage temperature            -                                     -50 to 150   °C
                                            Mounted on a 2s2p PCB, with a
             Thermal resistance junction to
       RthJA                                dissipating surface connected through      35    °C/W
             ambient, steady state
                                            vias on the bottom side of the PCB.
                                   DocID031327 Rev 1                                          11/24
                                                                                                    24


Electrical specifications                                                                             STKNX
4            Electrical specifications
4.1          Absolute maximum ratings
                                    Table 5. Absolute maximum ratings
   Symbol                 Parameter                            Min.                       Max.          Unit
    KNX_A    KNX supply input                                  -0.3                        45            V
 VDD_REGIN Linear regulator supply input                       -0.3                        40            V
             VDDHV supply input and impedance
   VDDHV                                                       -0.3                        40            V
             modulator feedback
    VREF     Impedance modulator reference                     -0.3                        40            V
   KNX_B,    Variation between different ground
                                                               -0.3                        0.3           V
 DCDC_GND pins
    CP_H     Equalizing cap. high                              -0.3                   KNX_A + 0.3        V
     CP_L    Equalizing cap. low                               -0.3                   KNX_A + 0.3        V
     R68     KNX transmitter output                            -0.3                   KNX_A + 0.3        V
   KNX_AC    BUS AC-coupled sense                              -0.3                   KNX_A + 0.3        V
 VDDHV_PD Impedance modulator power output                     -0.3                   KNX_A + 0.3        V
    VGATE    Impedance modulator coupling cap.       Max. (-0.3, KNX_A - 7.2)         KNX_A + 0.3        V
  VCCCORE    Linear reg. output. I/O supply.                   -0.3                        5.5           V
   KNX_TX    Transmitter digital input                         -0.3           Min. (5.5, VCCCORE + 0.3)  V
   KNX_RX    Transmitter digital output                        -0.3           Min. (5.5, VCCCORE + 0.3)  V
   KNX_OK    KNX bus power good                                -0.3           Min. (5.5, VCCCORE + 0.3)  V
  VCC_SEL    3.3 V / 5 V selection for linear reg.             -0.3           Min. (5.5, VCCCORE + 0.3)  V
   VCC_OK    VCCCORE power good                                -0.3           Min. (5.5, VCCCORE + 0.3)  V
     VFLT    Impedance modulator compensation                  -0.3                       5.5            V
  DCDC_IN    Step down converter input                         -0.3                        40            V
  DCDC_LX    Step down converter switching node                -0.3            Min. (40, DCDC_IN + 0.3)  V
  DCDC_FB    Step down converter feedback                      -0.3                        3.6           V
             Step down converter soft-start
  DCDC_SS                                                      -0.3                        3.6           V
             programming pin
12/24                                           DocID031327 Rev 1


STKNX                                                                                            Electrical specifications
4.2           Recommended operating conditions
                                  Table 6. Recommended operating conditions
    Symbol                        Parameter                                Test condition                 Min.      Max.    Unit
    KNX_A         KNX supply   input(1)                         -                                           20        32     V
  VCCCORE         I/O supply and linear reg. output             -                                            3       5.5     V
   DCDC_IN        Step down converter input                     -                                           13       32      V
                                                                VCC_SEL shorted to GND                     6.8        32     V
 VDD_REGIN Linear regulator supply input(2)
                                                                VCC_SEL shorted to VCCCORE                 8.5        32     V
                  Continuous output current from VDDHV
  IVDDHV_PD                                                     -                                            -        30    mA
                  pin(3)
                  Continuous output current from
      IREG                                                      -                                            -        20    mA
                  VCCCORE pin(3)
                  Continuous output current from DCDC
     IDCDC                                                      -                                            -       150    mA
                  switching converter (3)
1. Indicates DC value. With the active and equalization pulse bus voltage must be between 11 V and 45 V.
2. Short VDD_REGIN to VCCCORE to disable the internal linear regulator and provide VCCCORE voltage externally.
3. The maximum current capability refers to the voltage regulator only. The usable current capability can be limited by the
    KNX bus current consumption specification.
4.3           Electrical characteristics
              Parameters given for a device operating within the recommended operating conditions,
              unless otherwise specified. Typical values are referred to TJ = 27 °C.
                .
                                         Table 7. Electrical characteristics
    Symbol               Parameter                           Conditions                      Min.        Typ.      Max.      Unit
Power supply
                   DC supply voltage on       Excluding active and equalization
   V(KNX_A)                                                                                   20           -         32       V
                   KNX_A pin                  pulse
                   Bus current                V(KNX_A) = 32 V, no activity on bus,
                                                                                               -           1          -      mA
                   consumption, no load       no transmission, no external load
   I(KNX_A)                                   V(KNX_A) = 32 V, no activity on bus,
                   Bus current
                                              no transmission, 30 mA load on
                   consumption, 30 mA                                                          -          31          -      mA
                                              VDDHV rail (including linear regulator
                   load
                                              and switching converter)
                   KNX_OK rising
  KNX_OKRIS
                   threshold referred to      VREF rising                                      -           -        13.5      V
    (VREF)
                   VREF voltage
                   KNX_OK falling
 KNX_OKFALL
                   threshold referred to      VREF falling                                    9.7          -          -       V
    (VREF)
                   VREF voltage
                                                     DocID031327 Rev 1                                                      13/24
                                                                                                                                  24


Electrical specifications                                                                  STKNX
                              Table 7. Electrical characteristics (continued)
    Symbol            Parameter                      Conditions             Min. Typ. Max.   Unit
              KNX_OK hysteresis
 KNX_OKHYST
              referred to VREF          -                                      -  1.4   -     V
    (VREF)
              voltage
              KNX_OK rising
  KNX_OKRIS
              threshold referred to     KNX_A rising slowly, VREF settled      -   -  18.5    V
   (KNX_A)
              KNX_A DC voltage
Impedance modulator
              V(KNX_A) - V(VDDHV) V(KNX_A) = 20 V DC, ILOAD = 5 mA,
 VDDHV drop                                                                    -   -   6.5    V
              voltage drop              D3 = LL4148 or equivalent
              V(KNX_A) - V(VDDHV) V(KNX_A) = 20 V DC, ILOAD = 30 mA,
 VDDHV drop                                                                    -   -   7.2    V
              voltage drop              D3 = LL4148 or equivalent
              V(KNX_A) - V(REF)
  VREF drop                             V(KNX_A) = 20 V DC, VREF settled       3  4.3   5     V
              voltage drop
VCCCORE voltage and linear regulator
                                        VCC_SEL shorted to GND                 3  3.3  3.6     V
  VCCCORE     Regulated voltage
                                        VCC_SEL shorted to VCCCORE           4.5   5   5.5     V
              VCC_OK rising             VCC_SEL shorted to GND               2.3   -   2.8     V
  VCC_OKRIS
              threshold                 VCC_SEL shorted to VCCCORE           3.3   -    4      V
              VCC_OK falling            VCC_SEL shorted to GND               2.0   -   2.5     V
 VCC_OKFALL
              threshold                 VCC_SEL shorted to VCCCORE           2.9   -   3.6     V
                                        VCC_SEL shorted to GND                 -  0.3   -      V
VCC_OKHYST VCC_OK hysteresis
                                        VCC_SEL shorted to VCCCORE             -  0.4   -     V
              VCCSEL internal pull-
    IVCCSEL                             -                                      -   6    -     A
              down current
Programmable DC-DC switching converter
              Input voltage at
       VIN                              -                                     13   -   32     V
              DCDC_IN pin
              Output voltage
      VOUT                              -                                      1   -   12     V
              adjusting range
              Feedback voltage
      VFB                               -                                    0.9   1   1.1    V
              reference
              Undervoltage lockout
   UVLORIS    rising threshold on VIN   VIN rising                            9   10   11     V
              voltage
              Undervoltage lockout
   UVLOFALL   falling threshold on VIN VIN falling                           5.4   6   6.6    V
              voltage
              Undervoltage lockout
  UVLOHYST    hysteresis on VIN         -                                      -   4    -     V
              voltage
14/24                                          DocID031327 Rev 1


STKNX                                                                                Electrical specifications
                                   Table 7. Electrical characteristics (continued)
    Symbol                Parameter                        Conditions            Min.     Typ.    Max.    Unit
                  High side MOSFET
      ILIM                                    -                                   325     650     975      mA
                  current limit
                                              13 V < VIN < 32 V,
                                              3.3 V < VOUT < 12 V
   VOUT_RIP       Output voltage ripple                                            -       50       -      mV
                                              IOUT = 5 mA ~ 150 mA,
                                              COUT = 22 F MLCC(1)
                  High side MOSFET on
                                              -                                    -       1.9      -
                  resistance
    RDS(ON)                                                                                                 
                  Low side MOSFET on
                                              -                                    -       1.2      -
                  resistance
                  Overtemperature
      OTP                                     Junction temperature(2)             110     140       -      °C
                  protection
                  Overvoltage protection
    OVPRIS                                    FB voltage rising                   1.1     1.25     1.4      V
                  rising threshold on FB
                  Overvoltage protection
   OVPFALL                                    FB voltage falling                 0.95      1.1    1.25      V
                  falling threshold on FB
                  Current sourced from
       ISS                                    During soft-start                    -       2.5      -      A
                  SS pin
 Transmitter
                  Tx MOSFET on
    RDS(ON)                                   -                                    -        5       -       
                  resistance
                  KNX_TX internal pull-
    IKNX_TX                                   -                                    -        6       -      A
                  down current
 Digital I/Os
                  Maximum voltage level       VCCCORE = 3.3 V                     0.7       -       -
       VIL        that will be interpreted                                                                  V
                  as a logic 0                VCCCORE = 5 V                       1.2       -       -
                  Minimum voltage level       VCCCORE = 3.3 V                      -        -      2.2
      VIH         that will be interpreted                                                                  V
                  as a logic 1                VCCCORE = 5 V                        -        -       3
                                              VCCCORE = 3.3 V, ISUNK = 300 A      0        -      0.4      V
      VOL         Logic low output level
                                              VCCCORE = 5 V, ISUNK = 400 A        0        -      0.4      V
                                              VCCCORE = 3.3 V,                 VCCCORE
                                                                                            -   VCCCORE     V
                                              ISOURCED = 300 A                  - 0.5
      VOH         Logic high output level
                                              VCCCORE = 5 V,                   VCCCORE
                                                                                            -   VCCCORE     V
                                              ISOURCED = 400 A                  - 0.5
1. Not tested in production. Guaranteed by design.
2. Not tested in production. Based on characterization.
                                                     DocID031327 Rev 1                                   15/24
                                                                                                               24


Device description                                                                              STKNX
5          Device description
           The STKNX is a transceiver device for twisted pair communication, following the KNX
           twisted pair standard (KNX TP1-256). Detailed information on the KNX bus can be found in
           the KNX standards and on the KNX website (www.knx.org).
           The STKNX is composed of two main functional blocks: the bus interface and the voltage
           regulators.
               The bus interface consists of the transmitter, receiver and impedance modulator
               The voltage regulators block consists of an adjustable output voltage step down
                switching converter with integrated power MOSFETs and a 3.3 V / 5 V programmable
                linear regulator
                           Figure 7. KNX bus voltage and corresponding digital signals
                   7#64
                   7FR
             %$MFWFM
                  7BDU
                                  "DUJWFQVMTF      &RVBMJ[BUJPOQVMTF                               U
                                                   -PHJD                     -PHJD
                                                       
                                                                           
                ,/9@39
                ,/9@59
                  JGUSBOTNJUUJOH
                                                                                                 ".
5.1        Bus interface
           The bus interface connects the STKNX to the KNX bus for transmitting, receiving and
           extracting power.
           Through the bus interface, the STKNX supports
               Interfacing a microcontroller with the KNX bus, translating signals between the logic
                level domain and KNX bus domain
               Extracting power from the bus to supply the STKNX itself, the microcontroller and
                application devices
16/24                                          DocID031327 Rev 1


STKNX                                                                             Device description
      The KNX standard specifies a bit period of 104 s. It defines the logic 1 as the idle state of
      the bus (DC voltage level between 21 V and 32 V), the logic 0 (also called active pulse) as a
      voltage drop of the bus.
      The active pulse is generated by the transmitter. Ideally, the drop has a rectangular shape, a
      depth between 6 V and 9 V and a duration of 35 s. Each active pulse is followed by an
      equalization phase of 69 s typical duration, which consists in an overshoot of the bus
      voltage above the DC level, followed by an exponential decay.
      See the KNX Twisted Pair Standard (KNX TP1-256) for more detailed information.
5.1.1 Transmitter
      The transmitter converts logic level signals received at the KNX_TX pin to analog signals on
      the KNX bus. To transmit a logic 1 (equivalent to transmitter in idle state), the KNX_TX pin
      has to be kept low for 104 s. To transmit a logic 0, the KNX_TX has to be forced high for
      35 s (active pulse) and then low for 69 s.
      During the active pulse, the transmitter forces a voltage drop of 7.5 V typ. on the KNX bus,
      by sinking current through the R68 pin.
5.1.2 Receiver
      The receiver detects the beginning and the end of the active pulse and provides a logic level
      output on the KNX_RX pin. The KNX_RX pin is high during the active pulse, low during the
      equalization phase and idle state.
      The detection threshold for the start of the active pulse is 0.6 V typ. below the bus DC
      voltage.
5.1.3 Impedance modulator
      The KNX standard allows a bus voltage ranging from 21 V to 32 V (DC component). The
      bus provides supply for the STKNX and is the communication medium. During transmission,
      a -10.5 V / +13 V AC component can be superimposed to the DC component mentioned
      above.
      Moreover, the KNX standard specifies that each module connected to the bus has to show a
      controlled impedance and to limit the bus load current slope dI/dt, while not transmitting.
      The impedance modulator purpose is to extract power from the KNX bus in order to supply
      STKNX integrated voltage converters and the application on the KNX module, while
      ensuring compliance to KNX impedance specifications.
      In particular, impedance modulator
          Extracts a stable power rail (VDDHV) from the KNX bus DC level
          Smooths any load change applied at its output, limiting dI/dt on the bus current
          Controls the impedance of the bus device during the active pulse and the equalization
           pulse according to KNX standard requirements
      Since the current drawn from the bus must change very slowly, abrupt load current steps
      from the load applied to the STKNX have to be absorbed by the large filter capacitor on
      VDDHV rail (CVDDHV on Figure 1 on page 3), which should be sized accordingly.
      The bus current slope limit is controlled through CGATE (Figure 1).
                                      DocID031327 Rev 1                                         17/24
                                                                                                      24


Device description                                                                                  STKNX
           CGATE = 47 F sets a slope lower than 0.5 mA/ms, compliant to the KNX requirement for
           fan in model up to the 10 mA bus load.
           For a higher fan in, it can be useful to set a higher current slope limit, in order to manage
           wider load changes minimizing the CVDDHV value. That can be done by reducing the
           CGATE value proportionally to the desired slope limit increase.
           Table 8 shows recommended CGATE and CVDDHV values for the minimum and maximum
           fan in.
                              Table 8. Recommended CGATE and CVDDHV vs. fan-in
                       Fan in              Recommended CGATE           Recommended minimum CVDDHV
                       10 mA                        47 F                              100 F
                       30 mA                    10 F ÷ 47 F                          220 F
5.2        Voltage regulators
           The STKNX features two integrated voltage regulators for external use in the application:
           a linear regulator with 3.3 V or 5 V selectable output voltage, 20 mA current capability, and a
           step down switching converter with 1 V ÷ 12 V adjustable output voltage, 150 mA current
           capability.
5.2.1      3.3 V / 5 V linear regulator
           The linear regulator converts the input voltage on the VDD_REGIN pin to 3.3 V or 5 V output
           on the VCCCORE pin. The output voltage level is selectable by the VCCSEL pin.
                VCCSEL tied to GND  VCCCORE = 3.3 V
                VCCSEL tied to VCCCORE  VCCCORE = 5 V
           VCCSEL should not be changed when STKNX is operational.
           The output current capability is 20 mA. A 4.7 F capacitor or higher is required between
           VCCCORE and KNX_B for stability.
           VCCCORE is also the supply input for STKNX digital I/Os. The linear regulator can be
           disabled by shorting VCCCORE to VDD_REGIN; in that case VCCCORE voltage to supply
           I/Os has to be provided externally and VCCSEL has to be configured according to the
           voltage level (3.3 V or 5 V).
5.2.2      Buck converter
           The STKNX integrates a high-efficiency low-consumption buck switching converter.
           The switching converter is supplied from the DCDC_IN pin, connected to VDDHV rail in the
           typical application. When voltage at the DCDC_IN pin is lower than UVLO, the switching
           converter is disabled.
18/24                                       DocID031327 Rev 1


STKNX                                                                          Device description
      Buck converter output voltage is adjustable between 1 V and 12 V by means of an external
      resistor divider on the DCDC_FB pin, according to the following expression:
      Equation 1
                                     Vout = 1 V ·(1 + RFB1 / RFB2)
      where RFB1 and RFB2 are the upper and lower resistor of the divider respectively (see
      Figure 1 on page 3). The RFB2 typical value is 10 k (RFB2 values higher than 100 k
      should be avoided).
      To set VOUT = 1 V, RFB1 should be 0  and RFB2 not mounted.
      In the usual case of the low ESR ceramic capacitor as the output capacitor for the converter,
      it is recommended to add an external feedforward compensation capacitor CFB1 in parallel
      to RFB1, for VOUT > 1 V.
      The CFB1 default value can be calculated according to the following expression:
      Equation 2
                                    CFB1 = 1 / (2 · RFB1 · 28 kHz)
      The buck converter can deliver a continuous output current up to 150 mA, however the
      maximum current capability will not always be usable. In fact, at the application level, the
      KNX bus current consumption must stay within the KNX specification.
      The buck converter implements the soft-start to prevent a high inrush current at the start-up.
      Soft-start time TSS is programmable through the external capacitor CSS between the
      DCDC_SS pin and GND, according to the following expression:
      Equation 3
                                          TSS = 1 V · CSS / ISS
      where ISS is 2.5 A typ.
      The buck converter features a full set of protections, which includes overtemperature
      protection (OTP), overcurrent protection (OCP) and overvoltage protection (OVP).
                                     DocID031327 Rev 1                                          19/24
                                                                                                      24


Package information                                                                            STKNX
6          Package information
           In order to meet environmental requirements, ST offers these devices in different grades of
           ECOPACK® packages, depending on their level of environmental compliance. ECOPACK®
           specifications, grade definitions and product status are available at: www.st.com.
           ECOPACK® is an ST trademark.
20/24                                      DocID031327 Rev 1


STKNX                                                           Package information
6.1   VFQFPN 4 x 4 x 1.0 24 pitch 0.5 package information
              Figure 8. VFQFPN 4 x 4 x 1.0 24 pitch 0.5 package outline
                           DocID031327 Rev 1                                  21/24
                                                                                    24


Package information                                                                      STKNX
                     Table 9. VFQFPN 4 x 4 x 1.0 24 pitch 0.5 package mechanical data
                                                         Dimensions [mm]
                  Symbol
                                        Min.                    Nom.                Max.
                     A                  0.80                      -                 1.00
                    A1                  0.00                      -                 0.05
                    A2                    -                     0.65                  -
                    A3                    -                     0.20                  -
                     b                  0.20                    0.25                0.30
                     D                   3.9                     4.0                 4.1
                    D2                   2.7                     2.8                 2.9
                     e                    -                      0.5                  -
                     E                   3.9                     4.0                 4.1
                    E2                   2.7                     2.8                 2.9
                     L                  0.30                    0.35                0.40
                      k                 0.20                      -                   -
                     N                    -                      24                   -
                  Symbol                        Tolerance of form and position [mm]
                    aaa                                         0.15
                    bbb                                         0.10
                    ccc                                         0.10
                    ddd                                         0.05
                    eee                                         0.08
                     fff                                        0.10
                                     Figure 9. Suggested footprint
22/24                                 DocID031327 Rev 1


STKNX                                                        Revision history
7     Revision history
                     Table 10. Document revision history
            Date    Revision                         Changes
        08-Feb-2018    1          Initial release.
                        DocID031327 Rev 1                               23/24
                                                                              24


                                                                                                                                   STKNX
                                           IMPORTANT NOTICE – PLEASE READ CAREFULLY
STMicroelectronics NV and its subsidiaries (“ST”) reserve the right to make changes, corrections, enhancements, modifications, and
improvements to ST products and/or to this document at any time without notice. Purchasers should obtain the latest relevant information on
ST products before placing orders. ST products are sold pursuant to ST’s terms and conditions of sale in place at the time of order
acknowledgement.
Purchasers are solely responsible for the choice, selection, and use of ST products and ST assumes no liability for application assistance or
the design of Purchasers’ products.
No license, express or implied, to any intellectual property right is granted by ST herein.
Resale of ST products with provisions different from the information set forth herein shall void any warranty granted by ST for such product.
ST and the ST logo are trademarks of ST. All other product or service names are the property of their respective owners.
Information in this document supersedes and replaces information previously supplied in any prior versions of this document.
                                                © 2018 STMicroelectronics – All rights reserved
24/24                                                       DocID031327 Rev 1


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
STMicroelectronics:
 STKNXTR STKNX
