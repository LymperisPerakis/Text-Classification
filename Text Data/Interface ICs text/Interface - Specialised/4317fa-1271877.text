                                                                                                                                                         LTC4317
                                                                                                                              Dual I2C/SMBus
                                                                                                                     Address Translator
Features                                                                              Description
nn Allows Multiple Slaves with the Same Address to                                    The LTC®4317 enables the hardwired address of one or more
   Coexist on the Same Bus                                                            I2C or SMBus slave device to be translated to a different ad-
nn Resistor Configurable Address Translation                                          dress. This allows slaves with the same hardwired address to
nn No Software Programming Required                                                   coexist on the same bus. Only discrete resistors are needed
nn Compatible with SMBus, I2C and I2C Fast Mode                                       to select the new address and no software programming is
nn Pass-Through Mode Allows General Call Addressing                                   required. Up to 127 different address translations are available.
nn ±4kV HBM ESD Ruggedness
nn Level Translation for 2.5V, 3.3V and 5V Buses
                                                                                      The LTC4317 incorporates a pass-through mode which dis-
nn Stuck Bus Timeout
                                                                                      ables the address translation and allows general call address-
nn Prevents SDA and SCL Corruption During Live Board
                                                                                      ing by the master. The LTC4317 is designed to automatically
                                                                                      recover from abnormal bus conditions like bus stuck low or
   Insertion and Removal
nn Support Bus Hot Swap
                                                                                      premature STOP bits.
nn 16-Lead DFN 5mm × 3mm Package                                                      The LTC4317 has two output channels for two different sets
                                                                                      of slaves. The input channels are tied together to a com-
                                                                                      mon set of pins to reduce the pin count and package size.
Applications                                                                                                             NUMBER OF INPUT                NUMBER OF OUTPUT
                                                                                      PART NUMBER                             CHANNELS                          CHANNELS
nn I2C, SMBus Address Expansion
                                                                                      LTC4316                                       1                                 1
nn Address Translation
nn Servers
                                                                                      LTC4317                                       1                                 2
nn Telecom                                                                            LTC4318                                       2                                 2
                                                                                      L, LT, LTC, LTM, Linear Technology and the Linear logo are registered trademarks of Linear
                                                                                      Technology Corporation. All other trademarks are the property of their respective owners.
                                                                                      Protected by U.S. Patents, including 6356140, 6650174, 7032051, 7478286. Patent pending.
Typical Application
     3.3V                                                             5V
                             VCC          TRANSLATES
          SCL                             BY 0x02               SCL
                      SCLIN     SCLOUT1
                                                                SLAVE# 1
     MASTER                LTC4317                              ADDRESS                                                                                                R/W      ACK
                                                                   0x36                       START                           ADDRESS BITS                              BIT     BIT
          SDA         SDAIN    SDAOUT1                          SDA
                                                                                                        a6        a5       a4     a3        a2       a1        a0
   SENDS                                                       RECEIVES
                                                                                       SCLIN
   ADDRESS 0x34                                                ADDRESS 0x36
            3.3V      ENABLE1    READY1
                                                                     5V                SDAIN             0        0        1       1        0        1          0        0    = 0x34
                      ENABLE2    READY2
                                          TRANSLATES                             TRANSLATION
                                                                SCL                     BYTE             0        0        0       0        0        0          1        0    = 0x02
                                          BY 0x04
                                SCLOUT2
                                                                 SLAVE# 2
                                                                 ADDRESS            SDAOUT1              0        0        1       1        0        1          1        0    = 0x36
                                                                    0x36
                               SDAOUT2                          SDA
                                                                                                                                                                             4317 TA01b
                                  XORH2
                                                               RECEIVES
                      GND         XORH1                        ADDRESS 0x30
                       XORL2 XORL1
               3.3V
                    845k    61.9k   93.1k         4317 TA01a
                                                                                                                                                                                4317fa
                                                             For more information www.linear.com/LTC4317                                                                        1


LTC4317
Absolute Maximum Ratings                                                           Pin Configuration
(Notes 1, 2)
                                                                                                                        TOP VIEW
Input Supply Voltage VCC.............................. –0.3V to 6V
Input Voltages                                                                                             GND    1                  16 SCLOUT2
                                                                                                       ENABLE2    2                  15 SCLIN
ENABLEn....................................................... –0.3V to 6V
                                                                                                         XORH2    3                  14 SCLOUT1
XORLn, XORHn.................................–0.3V to VCC + 0.3V
                                                                                                         XORL2    4                  13 SDAOUT1
Output Voltages                                                                                          XORH1    5
                                                                                                                           17
                                                                                                                          GND        12 SDAIN
READYn........................................................ –0.3V to 6V                               XORL1    6                  11 SDAOUT2
Output Currents                                                                                             VCC   7                  10 READY1
READYn, SDAOUTn.................................................50mA                                   ENABLE1    8                   9  READY2
Input/Output Voltages
                                                                                                                     DHC PACKAGE
SCLIN, SCLOUTn, SDAIN, SDAOUTn............. –0.3V to 6V                                                   16-LEAD (5mm × 3mm) PLASTIC DFN
Operating Temperature Range                                                                                   TJMAX = 150°C, θJA = 42°C/W
                                                                                                 EXPOSED PAD (PIN 17) IS GND, PCB CONNECTION OPTIONAL
   LTC4317C................................................. 0°C to 70°C
   LTC4317I..............................................–40°C to 85°C
Storage Temperature Range................... –65°C to 150°C
Order Information
LEAD FREE FINISH            TAPE AND REEL                   PART MARKING*               PACKAGE DESCRIPTION                             TEMPERATURE RANGE
LTC4317CDHC#PBF              LTC4317CDHC#TRPBF               4317                        16-Lead (5mm × 3mm) Plastic DFN                0°C to 70°C
LTC4317IDHC#PBF              LTC4317IDHC#TRPBF               4317                        16-Lead (5mm × 3mm) Plastic DFN                –40°C to 85°C
Consult LTC Marketing for parts specified with wider operating temperature ranges. *The temperature grade is identified by a label on the shipping container.
For more information on lead free part marking, go to: http://www.linear.com/leadfree/
For more information on tape and reel specifications, go to: http://www.linear.com/tapeandreel/. Some packages are available in 500 unit reels through
designated sales channels with #TRMPBF suffix.
                                                                                                                                                        4317fa
2                                                          For more information www.linear.com/LTC4317


                                                                                                                                          LTC4317
Electrical Characteristics                                           The l denotes the specifications which apply over the full operating
temperature range, otherwise specifications are at TA = 25°C. VCC = 3.3V, unless otherwise specified.
SYMBOL                   PARAMETER                                     CONDITIONS                                           MIN        TYP       MAX      UNITS
Supply
VCC                      Input Supply Range                                                                          l      2.25                  5.5          V
ICC                      Input Supply Current                          ENABLE = 3.3V, SCLIN = SDAIN = 0V             l                 0.8         2         mA
                                                                       ENABLE = 0V, SCLIN = SDAIN = 0V               l                 350       800          µA
VCC(UVLO)                VCC Supply Undervoltage Lockout               VCC Rising                                    l      1.9        2.1        2.2          V
VCC(HYST)                VCC Supply Undervoltage Lockout Hysteresis                                                                    100                   mV
ENABLE and READY
VENABLE(TH)              ENABLE Threshold Voltage                      Enable Rising                                 l        1        1.4        1.8          V
VENABLE(HYST)            ENABLE Hysteresis                                                                                              50                   mV
IENABLE(LEAK)            ENABLE Input Current                                                                        l                            ±1          µA
VREADY(OL)               READY Output Low Voltage                      I = 3mA                                       l                            0.4          V
IREADY(OH)               READY Off Leakage Current                     VCC = VREADY = 5.5V                           l                            ±5          µA
SCLIN, SDAIN, SCLOUT, SDAOUT
VSCL,SDA(TH)             Threshold Voltage                             SDA, SCL Pins Rising                          l      1.5        1.8        2.0          V
VSCL,SDA(HYST)           Hysteresis                                                                                                     50                   mV
ISCL,SDA(LEAK)           Leakage Current                               SDA, SCL Pins = 5.5V, 0V, VCC = 5.5V, 0V      l                           ±10          µA
ISCL,SDA(LEAK-INOUT) Input to Output Leakage Current                   SDAIN, SCLIN Pins = 5.5V, VCC = 5.5V,         l                           ±10          µA
                                                                       SDAOUT, SCLOUT Pins = 4.5V
CSCL,SDA                 Pin Capacitance                               Note 3                                        l                            10          pF
VSCL,SDA(PRE)            Precharge Voltage                                                                           l      0.8         1         1.2          V
VSDAOUT(OL)              SDAOUT Output Low Voltage                     I = 4mA                                       l                            0.4          V
RDS(ON)                  Pass Switch On Resistance                     VCC = 2.25V, SCLIN = SDAIN = 0.4V             l                   3        12           Ω
                                                                       VCC = 3.3V, SCLIN = SDAIN = 0.4V              l                 2.2         8           Ω
                                                                       VCC = 5V, SCLIN = SDAIN = 0.4V                l                 1.8         6           Ω
XORH, XORL
IXORH/XORL               XORH and XORL Input Current                                                                 l                           ±100         nA
I2C Interface Timing
fSCL(MAX)                Maximum SCLIN Clock Frequency                 Note 3                                        l      400                              kHz
tPDHL(SDAOUTn)           SDAOUT Fall Delay                             C = 100pF, RPULLUP = 10k                      l                 170       300          ns
tf(SDAOUTn)              SDAOUT Fall Time                              C = 100pF, RPULLUP = 10k                      l       20         60       300          ns
tTIMEOUT                 Stuck Bus Timeout                             SCLIN Held Low or High                        l       25         30        35         ms
tIDLE                    Bus Idle Time                                                                               l       80        120       160          µs
tGLITCH                  SCLIN and SDAIN Glitch Filter                                                               l       50        100                    ns
Note 1: Stresses beyond those listed under Absolute Maximum Ratings               Note 2: All currents into pins are positive and all voltages are referenced to
may cause permanent damage to the device. Exposure to any Absolute                GND unless otherwise indicated.
Maximum Rating condition for extended periods may affect device                   Note 3: Guaranteed by design and not tested.
reliability and lifetime.
                                                                                                                                                           4317fa
                                                         For more information www.linear.com/LTC4317                                                       3


LTC4317
Timing Diagram
                                                                                           SDAIN          50%
                                                                                                                             70%
                                                                                       SDAOUT                                  50%
                                                                                                                                 30%
                                                                                                           tPDHL(SDAOUT)
                                                                                                                         tf(SDAOUT)            4317 EC
Typical Performance Characteristics                                                                                                            TA = 25°C, VCC = 3.3V unless otherwise noted.
                                                                                                 Standby Supply Current vs
                    Supply Current vs Temperature                                                Temperature                                                                             Pass Switch On Resistance vs VCC
            1.0                                                                            800                                                                                       6
                    ENABLE = VCC                                                                     ENABLE = 0V                                                                         SDAIN = SCLIN = 0.4V
                                                                                           700
                                                                                                                                                                                     5
            0.9                                                                            600
                       VCC = 5V                                                                                                                                                      4
                                                                                           500                                                                                                              TA = 25°C
                                                                                                                                                                       RDS(ON) (Ω)
                                   VCC = 3.3V
ICC (mA)    0.8                                                          ICC (μA)          400                                                                                       3                                  TA = 85°C
                                                VCC = 2.25V                                300
                                                                                                                                                                                     2
            0.7                                                                            200
                                                                                                                                                                                                                 TA = –40°C
                                                                                                                                                                                     1
                                                                                           100
            0.6                                                                              0                                                                                       0
               –50      –25     0    25     50           75        100                        –50        –25       0    25     50         75         100                              2.0     2.5     3.0     3.5       4.0    4.5        5.0
                               TEMPERATURE (°C)                                                                   TEMPERATURE (°C)                                                                          VCC (V)
                                                              4317 G01                                                                          4317 G02                                                                             4317 G03
                    Pass Switch On Resistance vs                                                 READY Output Low                                                                        SDAOUT Fall Delay vs
                    Temperature                                                                  Voltage vs Current                                                                      Temperature
                6                                                                          100                                                                                     240
                    SDAIN = SCLIN = 0.4V                                                             VCC = 3.3V                                                                          VCC = 3.3V
                                                                                                                                                                                         C = 100pF
                5                                                                                                                                                                  220
                                                                                            80
                                                                                                                                   TA = 85°C                                       200
                                                                                                                                                              tPDHL(SDAOUT) (ns)
                4
                                                                         VREADY(OL) (mV)
                                        VCC = 2.25V                                         60                      TA = 25°C
  RDS(ON) (Ω)
                                                                                                                                                                                   180
                3
                                           VCC = 3.3V
                                                                                                                                                                                   160
                                                                                            40
                2
                                            VCC = 5V                                                                               TA = –40°C                                      140
                                                                                            20
                1                                                                                                                                                                  120
                0                                                                            0                                                                                     100
                 –50    –25     0    25     50           75        100                           0          2        4        6          8               10                           –50    –25       0    25     50          75         100
                               TEMPERATURE (°C)                                                                      IREADY (mA)                                                                      TEMPERATURE (°C)
                                                              4317 G04                                                                          4317 G05                                                                             4317 G06
                                                                                                                                                                                                                                       4317fa
4                                                                                      For more information www.linear.com/LTC4317


                                                                                                                                                                                         LTC4317
Typical Performance Characteristics                                                                                               TA = 25°C, VCC = 3.3V unless otherwise noted.
                           SDAOUT Fall Delay vs Bus                                               SDAOUT Fall Time vs                                                    SDAOUT Fall Time vs Bus
                           Capacitance                                                            Temperature                                                            Capacitance
                     300                                                                    120                                                                    120
                                                                                                  C = 100pF
                     275
                                                                                            100                                                                    100               VCC = 5V
                     250         VCC = 5V                                                                         VCC = 5V
tPDHL(SDAOUT) (ns)
                     225                    VCC = 3.3V
                                                                          tf(SDAOUT) (ns)                                                        tf(SDAOUT) (ns)
                                                                                             80                                                                     80
                     200                             VCC = 2.25V                                                                                                                    VCC = 3.3V
                                                                                                                 VCC = 3.3V
                     175                                                                     60                                                                     60
                     150                                                                                                                                                           VCC = 2.25V
                                                                                             40                  VCC = 2.25V                                        40
                     125
                     100                                                                     20                                                                     20
                           0   200     400     600       800       1000                        –50    –25      0    25     50    75        100                           0   200    400     600    800       1000
                                        CBUS (pF)                                                             TEMPERATURE (°C)                                                       CBUS (pF)
                                                               4317 G07                                                               4317 G08                                                           4317 G09
Pin Functions
XORL1/XORL2: Translator XOR Lower Nibble Configura-                                                                  SDAIN is connected to SDAOUT and SCLIN is connected to
tion Input. The DC voltage at this pin configures the lower                                                          SCLOUT. Connect a pull-up resistor, typically 10k, from this pin
4-bit nibble of the address translation byte. Tie the pin to                                                         to the bus pull-up supply. Leave open or tie to GND if unused.
an external resistive divider connected between VCC and
                                                                                                                     SCLIN: Input Bus Clock Input and Output. Connect this
GND to set the desired DC voltage.
                                                                                                                     pin to the SCL line on the master side. An external pull-up
XORH1/XORH2: Translator XOR Upper Nibble Configura-                                                                  resistor or current source is required.
tion Input. The DC voltage at this pin configures the upper
                                                                                                                     SCLOUT1/SCLOUT2: Output Bus Clock Input and Output.
3-bit nibble of the address translation byte. Tie the pin to
                                                                                                                     Connect this pin to the SCL line on the slave side. An external
an external resistive divider connected between VCC and
                                                                                                                     pull-up resistor or current source is required. Connect to
GND to set the desired DC voltage. Connect this pin to VCC
                                                                                                                     VCC through a pull-up resistor if unused.
to activate pass-through mode. See Application Informa-
tion section for more details.                                                                                       SDAIN: Input Bus Data Input and Output. Connect this pin
                                                                                                                     to the SDA line on the master side. An external pull-up
ENABLE1/ENABLE2: Enable Input. If ENABLE pin is low,                                                                 resistor or current source is required.
the address translation is disabled, SDAIN is disconnected
from SDAOUT, and SCLIN is disconnected from SCLOUT.                                                                  SDAOUT1/SDAOUT2: Output Bus Data Input and Output.
A low to high transition on ENABLE restarts the configura-                                                           Connect this pin to the SDA line on the slave side. An
tion of the address translation byte and also enables the                                                            external pull-up resistor or current source is required.
address translation. Connect to VCC if unused.                                                                       Connect to VCC through a pull-up resistor if unused.
Exposed Pad: Exposed pad may be left open or connected                                                               VCC: Power Supply Input (2.25V to 5.5V). If the supply
to device GND.                                                                                                       voltages for the input and output buses are different, con-
                                                                                                                     nect this pin to the lower supply. If the input and output
GND: Device Ground.                                                                                                  supplies have the same nominal value and with tolerance
READY1/READY2: Ready Status Output. This is an open                                                                  less than or equal to ±10%, connect VCC to either supply.
drain output to indicate that the device is ready for address                                                        Bypass with at least 0.1µF to GND.
translation. The pin releases high when the LTC4317 has
completed configuration of the address translation byte,
                                                                                                                                                                                                          4317fa
                                                                                      For more information www.linear.com/LTC4317                                                                          5


LTC4317
Block Diagram
  VCC      1V                1V                                                                         1V             1V
                   PRECHARGE         PRECHARGE                                                PRECHARGE      PRECHARGE
              200k              200k                                                                       200k           200k
  SCLIN                                                                                                                        SCLOUT1
                                                                               N1
                                                                                                                               SCLOUT2
  SDAIN                                                                                                                        SDAOUT1
                                                                                     N2
                                                                                                                               SDAOUT2
                        CMP2
                   +
                                                        XOR
                                                                                                  N3
         1.8V     –                         7-BIT
                                       ADDRESS
                                   TRANSLATION
                                            BYTE
                                                                                                             CMP4
                                                                                                                     +
                                      GLITCH
                                      FILTER
                                                                                                                     – 1.8V
                        CMP1                                                                                 CMP3
                   +                                                                                                 +
                                      GLITCH
                                      FILTER
         1.8V     –                                                                                                  – 1.8V
                                                          I2C Hot                              I2C Hot
                                                                           CONTROL                                              READY1
                                                           Swap                                 Swap
                                                                            LOGIC
                                                           LOGIC                                LOGIC
  XORH1
                                                                                                                           N4   READY2
  XORH2
  XORL1
                                                                                                                               ENABLE1
  XORL2                 CMP6                                                                                 CMP5
                   +                                                                                                 +
                                                                                                                               ENABLE2
        VCC/2     –                                                                      PRECHARGE                   – 1.4V
                                                 GND
                                                                                                                                   4317 BD
                                                                                                                                          4317fa
6                                                   For more information www.linear.com/LTC4317


                                                                                                                LTC4317
Operation
The LTC4317 is an I2C/SMBus address translator. It bridges            In most conditions, N1 and N2 stay on so that the input
two segments of an I2C bus, reading incoming addresses                and output buses are connected.
on the master side and retransmitting them to the slave
                                                                      Translation starts when the master issues a START bit
side with the 7-bit I2C addresses translated in real time.
                                                                      (SDAIN goes low while SCLIN is high). The LTC4317
This allows multiple I2C devices with the same address
                                                                      turns off N2 to disconnect SDAIN from SDAOUT. As the
to be connected to the same bus without interference.
                                                                      master sends the address byte, the LTC4317 translates
The translated addresses are configured with external
                                                                      the incoming address at the SDAIN pin to a new address
resistors, and no extra software is required. An ENABLE
                                                                      at the SDAOUT pin by XORing each incoming bit with
pin allows bus segments to be enabled and disabled, and
                                                                      a user-configurable translation byte, one bit at a time.
the LTC4317 allows hot swapping isolated bus segments
                                                                      N3 turns on and off to send out the new address to the
together.
                                                                      SDAOUT pin. Once all 7 bits of the address are processed,
Figure 1 shows an I2C master connected to the input bus               the LTC4317 turns on N2 again to reconnect SDAIN to
of the LTC4317 (SCLIN and SDAIN). The slave devices                   SDAOUT. The master then transmits the R/W bit directly
requiring address translation are connected to the output             to the slave. If the new, translated address on SDAOUT
bus of the LTC4317 (SCLOUT and SDAOUT). Any other                     matches the slave’s address, the slave pulls SDAOUT low
slave devices that do not require address translation are             to acknowledge (ACK bit). N2 remains on and the rest of
placed together with the master on the input bus of the               the data bytes are transmitted unmodified between the
LTC4317. Two switches (N1 and N2) inside the LTC4317                  master and slave. The address translation process restarts
connect the input bus to the output bus. N1 connects                  when the master issues a new START bit.
SCLIN to SCLOUT while N2 connects SDAIN to SDAOUT.
               VCC1                                                                                             VCC2
                                  LTC4317
                                   SCLIN                                N1                   SCLOUT
                                                                                                             SLAVE
               MASTER
                                                                                                               #1
                                   SDAIN                                           N2        SDAOUT
                                                   CMP2
                                             +
                                                                                          N3
                SLAVE
                  #2                                             XOR
                                      1.8V   –
                                                          0 0 0 0 0 1 0
                                                                               ENABLE
                                                         7-BIT ADDRESS        ADDRESS
                                                          TRANSLATION      TRANSLATION
                                                      BYTE SHIFT REGISTER
                                                                                                4317 F01
                                           Figure 1. Basic Functions of the LTC4317
                                                                                                                            4317fa
                                             For more information www.linear.com/LTC4317                                    7


LTC4317
Operation
Figure 2 shows typical waveforms for the circuit on the                                                                               R/W      ACK
front page. In this example, the master transmits address                             START                ADDRESS BITS                BIT      BIT
                                                                                            a6    a5    a4     a3      a2   a1    a0
0x34 while the slave is configured to respond to address                       SCLIN
0x36. The resistive dividers at the XORL and XORH pins are
                                                                               SDAIN        0     0     1      1       0    1     0     0     = 0x34
configured to generate an address translation byte of 0x02.
                                                                        TRANSLATION
                                                                                            0     0     0      0       0    0     1     0     = 0x02
Note that in this example, the 8-bit hexadecimal address                        BYTE
format (with R/W = 0) is used. 7-bit addresses are also                      SDAOUT         0     0     1      1       0    1     1     0     = 0x36
commonly found in I2C device documentation. Make sure                        N2 GATE N2 ON                   N2 OFF                      N2 ON
to use the correct format when calculating the address                                                                                         4317 F02
                                                                                    Figure 2. Basic Address Translation Waveforms
translation byte. Table 1 shows examples of both formats.
Table 1.
                                                BINARY ADDRESS                                 7-BIT HEX ADDRESS          8-BIT HEX ADDRESS
DESCRIPTION                       a6   a5    a4     a3      a2      a1        a0       R/W        WITHOUT R/W                 WITH R/W = 0
Input Address from SDAIN           0    0     1      1       0       1         0         0            0x1A                       0x34
Translation Byte                   0    0     0      0       0       0         1         0            0x01                       0x02
Output Address to SDAOUT           0    0     1      1        0      1         1         0            0x1B                       0x36
                                                                                                                                            4317fa
8                                           For more information www.linear.com/LTC4317


                                                                                                                          LTC4317
Operation
System Configurations                                                      7-bit translation byte. These voltages are referenced to
There are several ways that individual slaves or banks of                  VCC so a resistive divider at each of these pins is the most
                                                                           convenient way to set the voltages. The required transla-
slaves can be connected to an LTC4317. In Figure 3, each
                                                                           tion byte can be determined by taking the bitwise XOR of
slave is paired with one channel of the LTC4317. This
                                                                           the slave’s original address and the desired input address.
configuration allows for maximum flexibility in allocating
the bus addresses. Both read and write operations and all                  The voltages at the XORH and XORL pins configure the
protocols supported by the LTC4317 are allowed. Figure 4                   translation byte. The XORL voltage configures the lower 4
shows two slaves with different hardwired addresses                        translation bits (excluding the R/W bit), while the XORH
translated to two different addresses using one channel of                 voltage configures the upper 3 translation bits. Tables 2
the LTC4317 and a common translation byte. A program                       and 3 show the recommended resistive divider values. RLT
is available to help the user visualize an I2C bus with the                and RLB are the top and bottom resistors connected to
LTC4317; this program can be found in the following link:                  XORL, while RHT and RHB are the top and bottom resistors
                                                                           connected to XORH (Figure 5). Use 1% tolerance resistors
   www.linear.com/TranslatorTool
                                                                           for RLT, RLB, RHT and RHB.
Setting the Translation Byte
When the LTC4317 is first powered up or any time a rising
edge is detected on the ENABLE pin, the LTC4317 reads                                                  SCL
the voltages at the XORH and XORL pins to determine the                                                  SLAVE
                                                                                                           #2
                                                                                                       SDA
                                                                                                      HARDWIRED ADDRESS
                           SLAVE #1                                                                   0x34
                                                                                      SCL
                           INPUT ADDRESS
                           0x32                                                                        SCLIN     SCLOUT       SCL
                           TRANSLATION BYTE                                     MASTER
                                                                                                                                        00110110
                           0x06                                                                             LTC4317               SLAVE 00000010
                                                                                      SDA                                           #1  00110100
                            SCLIN    SCLOUT1      SCL                                                  SDAIN     SDAOUT       SDA
                                                                  00110010
                                                    SLAVE         00000110                                                   HARDWIRED ADDRESS
                                 LTC4317                                                              TRANSLATION BYTE
                                                      #1          00110100                                                   0x34
                                                                                                      0x02
                            SDAIN    SDAOUT1      SDA
                                                                                                      SLAVE #1                SCL
                                                 HARDWIRED ADDRESS                                    INPUT ADDRESS                     00110010
                                                 0x34                                                 0x36                        SLAVE 00000010
                                                                                                                                    #3  00110000
                                                                                                      SLAVE #3
                                     SCLOUT2      SCL                                                                         SDA
                                                                                                      INPUT ADDRESS
                                                                  00110110                            0x32
                                                    SLAVE         00000010                                                   HARDWIRED ADDRESS
                                                      #3          00110100                                                   0x30
                                                                                                                                          4317 F04
                                     SDAOUT2      SDA
                           SLAVE #3              HARDWIRED ADDRESS                  Figure 4. Two Slaves Sharing One Channel of LTC4317
                           INPUT ADDRESS 0x36    0x34
         SCL               TRANSLATION BYTE 0x02
                                                                                               VCC
     MASTER
                                                                                                               VCC
         SDA                SCL                                                                  RHT                      RLT
                              SLAVE                                                                          LTC4317
                                #2
                                                                                                        XORH         XORL
                            SDA
                                                                                                 RHB                      RLB
                           HARDWIRED ADDRESS
                           0x34                          4317 F03
                                                                                                                           4317 F05
         Figure 3. Two Independent Address Translation                          Figure 5. Address Translation Byte Configuration Resistors
                                                                                                                                          4317fa
                                                  For more information www.linear.com/LTC4317                                              9


LTC4317
Operation
Table 2. Setting the Resistive Divider at XORL                         which gives 0110 0010b or 0x62. If the configuration
LOWER                                                                  voltages at XORL and XORH pins are the same, they can
4-BIT OF
TRANSLATION
                                                                       be tied together and connected to a single resistive divider.
BYTE                             RECOMMENDED RECOMMENDED
                                                                       Alternatively, three resistors can be used to configure
 a3 a2 a1 a0        VXORL/VCC        RLT [kΩ]       RLB [kΩ]           the XORL and XORH pins (Figure 6). Use the following
  0  0   0   0      ≤ 0.03125          Open          Short             procedure to calculate the value of the three resistors:
  0  0   0   1   0.09375 ±0.015         976           102
                                                                                                VCC
  0  0   1   0   0.15625 ±0.015         976           182                                                         RA1
                                                                                                      VCC
  0  0   1   1   0.21875 ±0.015        1000           280                                                   XORL
  0  1   0   0   0.28125 ±0.015        1000           392                                                         RA2
                                                                                                    LTC4317
  0  1   0   1   0.34375 ±0.015        1000           523                                                  XORH
  0  1   1   0   0.40625 ±0.015        1000           681                                                         RA3
  0  1   1   1   0.46875 ±0.015        1000           887
                                                                                                                   4317 F06
  1  0   0   0   0.53125 ±0.015         887          1000
  1  0   0   1   0.59375 ±0.015         681          1000                               Figure 6. Address Translation Byte
                                                                                        Configuration Using Three Resistors
  1  0   1   0   0.65625 ±0.015         523          1000
  1  0   1   1   0.71875 ±0.015         392          1000
  1  1   0   0   0.78125 ±0.015         280          1000              First choose a total resistance value RTOTAL
  1  1   0   1   0.84375 ±0.015         182           976                  RA3 = RTOTAL • (VXORH/VCC)
  1  1   1   0   0.90625 ±0.015         102           976
  1  1   1   1      ≥ 0.96875          Short         Open
                                                                           RA2 = (RTOTAL • VXORL/VCC) – RA3
                                                                           RA1 = RTOTAL – RA3 – RA2
Table 3. Setting the Resistive Divider at XORH                         Use 1% tolerance resistors for RA1, RA2 and RA3.
UPPER
3-BIT OF                                                               Once the XORL and XORH pins are read, the LTC4317
TRANSLATION                                                            turns on switches N1 and N2, connecting the input and
BYTE                              RECOMMENDED RECOMMENDED              output, and the READY pin goes high to indicate that the
 a6 a5     a4       VXORH/VCC        RHT [kΩ]       RHB [kΩ]
                                                                       LTC4317 is ready to start address translation.
  0    0   0        ≤ 0.03125           Open          Short
  0    0   1     0.09375 ±0.015          976           102             The address translation byte can be changed during
  0    1   0     0.15625 ±0.015          976           182             operation by changing the XORH and XORL voltages and
  0    1   1     0.21875 ±0.015         1000           280             toggling the ENABLE pin (high-low-high). This triggers
  1    0   0     0.28125 ±0.015         1000           392             the LTC4317 to re-read the XORL and XORH voltages.
  1    0   1     0.34375 ±0.015         1000           523
                                                                       Enable/UVLO
  1    1   0     0.40625 ±0.015         1000           681
  1    1   1     0.46875 ±0.015         1000           887             If the ENABLE pin is driven below VENABLE(TH) or if VCC
                                                                       is below the UVLO threshold, the LTC4317 shuts down.
For example, if RLT = 976k, RLB = 102k, RHT = 1000k, and               The internal shift register storing the address translation
RHB = 280k, the lower 4 translation bits are 0001b and                 byte is cleared, address translation is disabled, switches
the upper 3 bits are 011b. The 8-bit hexadecimal address               N1, N2 and N3 are off, the READY pin is pulled low and
translation byte is obtained by adding a 0 as the LSB,                 the quiescent current drops to 350µA.
                                                                                                                               4317fa
10                                             For more information www.linear.com/LTC4317


                                                                                                                             LTC4317
Operation
Precharge and Hot Swap                                                                                    ADDRESS BITS
When the LTC4317 is first powered on, switches N1 and                                      SCLIN
N2 are initially off. This allows a LTC4317 and its con-                                   SDAIN   0        1       0        1
nected slaves to be hot swapped onto an active I2C bus.
                                                                                     TRANSLATION
Internal precharge circuitry initially sets the bus lines to                                BYTE   0        1       1        0
1V through a 200k resistor, minimizing disturbance to an
                                                                                         SDAOUT    0        0       1        1
active bus when the LTC4317 is connected. The LTC4317
keeps N1 and N2 off until ENABLE goes high, the XORL/                                    N2 GATE
                                                                                                     GLITCH           GLITCH
                                                                                                              N2 OFF
XORH pins are read, and both sides of the I2C bus are                                                                        4317 F07
idle (indicated either by a STOP bit or all bus pins high                    Figure 7. Extra Transitions on SDAOUT While SCL Is Low
for longer than 120µs). Once these conditions are met, N1
and N2 turn on, and the READY pin goes high to indicate                input bus is powered by a 5V supply and the output bus
that the LTC4317 is ready to start address translation.                is powered by a 3.3V supply, the LTC4317 VCC pin must
                                                                       be connected to the 3.3V supply as shown in Figure 8.
Pass-Through Mode
                                                                       If the LTC4317 supply pin is connected to the higher bus
If the master wants to communicate with the slave us-                  supply, current may flow through the switches N1 and
ing the general call address, it can temporarily disable               N2 to the bus with lower supply. If the voltage difference
address translation by pulling XORH high. This disables
address translation and keeps N1 and N2 on regardless                              5V                                                    3.3V
of the activity on the buses. Any translation that may be in                                               VCC
progress is stopped immediately when XORH goes high.                                               SCLIN        SCLOUT
                                                                                                         LTC4317                      SLAVE
                                                                                 MASTER
Extra Transitions on SDAOUT                                                                                                             #1
                                                                                                   SDAIN       SDAOUT
In an I2C/SMBus system, the master changes the state of                                                             4317 F08
the SDA line when SCL is low. The LTC4317 also advances
the address translation byte shift register when the SCLIN                      Figure 8. A 5V to 3.3V Level Translation Application
is low. The translation byte transitions occur approximately
100ns after the falling edge of SCLIN. If the SDAIN tran-              is less than 1V, this current is limited to less than 10µA.
sitions sent by the master do not coincide exactly with                This allows the input and output buses to be connected
the LTC4317 address translation bit transitions, an extra              to nominally identical supplies that may have up ±10%
transition on SDAOUT may appear (Figure 7). These extra                tolerance, and the LTC4317 VCC pin can be connected to
SDA transitions are like glitches similar to those occurring           either supply.
during normal Acknowledge bit transitions and do not pose
problems in the system because devices on the bus latch                Extra START and STOP Bits
SDA data only when SCL is high.                                        During normal operation, an I2C master should not issue
                                                                       a START or STOP bit within a data byte. I2C slave behavior
Level Translation and Supply Voltage Matching
                                                                       when such a command is received can be unpredictable.
The LTC4317 can operate with different supply voltages                 The LTC4317 will recover automatically when an unex-
on the input and output bus, and it will level shift the               pected START or STOP is received during the address byte;
voltages on the SCLIN, SDAIN, SCLOUT, and SDAOUT                       however, depending on the state of the translating bits,
pins to match the supply voltage at each side. VCC must                it may convert START bits to STOP bits and vice versa,
be powered from the lower of the two supply voltages                   causing unexpected slave behavior.
for level shifting to operate correctly. For example, if the
                                                                                                                                              4317fa
                                               For more information www.linear.com/LTC4317                                                11


LTC4317
Operation
If a START bit is received during the address byte when                          Stuck Bus Timeout
the active translating bit is a "1", the slave device will see
                                                                                 During the address translation, if SCLIN stays low or high
a STOP bit. This will typically reset the slave and cause it
                                                                                 for more than 30ms without any transitions, the LTC4317
to miss the remainder of the transmission. If the START
                                                                                 will abort the address translation and reconnect SDAIN
bit is received while the active translating bit is a "0", the
                                                                                 to SDAOUT. It will then wait for a START bit to start a new
START passes through the LTC4317 unchanged. The slave
                                                                                 address translation. This prevents any bus stuck low/
will react in the same way it would if the LTC4317 was
                                                                                 high conditions from permanently disconnecting SDAIN
not present, and will typically reset when the master next
                                                                                 from SDAOUT.
issues a STOP bit. In both cases, the LTC4317 automati-
cally resets at the next STOP bit and the next message                           Supported Protocols
will be transmitted normally.
                                                                                 The LTC4317 is designed to support most I2C and SMBus
If a STOP bit is received during the address byte, the                           message protocols. The only exceptions are protocols that
LTC4317 will abort the address translation and ensure that                       use pre-assigned addresses on the slave side of the bus.
a STOP bit is issued at SDAOUT to reset the slave. If the
active translating bit is a "0" when the STOP arrives, it is                     Supported I2C and SMBus Protocols:
not modified, and the slave will see the STOP and typically                      Send/Receive Byte
reset. If the active translating bit is a "1" when the STOP
                                                                                 Write Byte/Word
arrives, the slave device will see a START bit. This might
leave the slave in an indeterminate state, so the LTC4317                        Read Byte/Word
briefly disconnects the slave from the master, adds a short                      Process Call
delay, and then generates a STOP bit at the SDAOUT pin
(Figure 9). It then reconnects the busses and waits for a                        Block Write/Read
START bit to begin the next transmission. Again, in both                         Block Write-Block Read Process Call
cases, the LTC4317 automatically resets and the next
message will be transmitted normally.                                            Extended Read and Write Commands
                                                                                 General Call (I2C Only)
                                  ADDRESS BIT
                                     BECOMES                                     Start Byte (I2C Only)
                                     STOP BIT
                                                                                 PMBus (without PEC)
                    SCLIN
                            STOP            START                                Unsupported I2C Protocols:
                    SDAIN    BIT              BIT
                                                                                 10-Bit Addressing
              TRANSLATION
                     BYTE    1
                                                                                 Device ID
                                     STOP
                                      BIT
                                            START
                                                                                 Ultra Fast-Mode I2C Bus Protocol
                  SDAOUT   START              BIT
                             BIT
                                                                                 Unsupported SMBus Protocols:
                  N2 GATE     N2 OFF             N2 OFF                          SMBus Host Notify
                                         N2 ON
                           N1 ON
                                     N1
                                               N1 ON
                                                                                 Address Resolution Protocol (ARP)
                  N1 GATE           OFF
                                                      4317 F09
                                                                                 Parity Error Code (PEC)
          Figure 9. Stop Bit within Address Byte when                            Alert Response Address (ARA)
          Address Translation Byte Is 1
                                                                                 PMBus (with PEC)
                                                                                                                                         4317fa
12                                                       For more information www.linear.com/LTC4317


                                                                                                                          LTC4317
Typical Applications
                                                                                        INPUT ADDRESS
                                                                                             0x32
                                                                                    MOTHERBOARD    PLUG-IN
                 VCC                                                                  CONNECTOR 1  CARD 1
                     10k 10k                   VCC      ENABLE1
       TO MASTER SCL             SCLIN                                    VCC
                                                                    10k                                    VCC      TO SLAVE #1
       TO MASTER SDA             SDAIN                                                                              HARDWIRED
                                                                                  10k    10k
                                                                                                                    ADDRESS
                                                        SCLOUT1                                            SCL1 0x30
                                                       SDAOUT1                                             SDA1
                                                                                                           GND
                 VCC
                                             LTC4317
                     10k 10k                            ENABLE2
                                 READY1                                   VCC
                                                                    10k                                    VCC      TO SLAVE #2
                                 READY2                                                                             HARDWIRED
                                                                                  10k    10k
                                                                                                                    ADDRESS
                                                        SCLOUT2                                            SCL2 0x30
                                                       SDAOUT2                                             SDA2
                                                                                                           GND
                                 XORL2 XORL1 XORH2 XORH1
                                                                                    MOTHERBOARD    PLUG-IN
                         VCC
                                                                                      CONNECTOR 2  CARD 2
                              845k    61.9k    93.1k
                                                                                        INPUT ADDRESS
                                                                                             0x34          4317 F10
                           Figure 10. LTC4317 with Address Translation Byte of 0x02 and 0x04
                                                                                                                                 4317fa
                                            For more information www.linear.com/LTC4317                                         13


LTC4317
Package Description
Please refer to http://www.linear.com/product/LTC4317#packaging for the most recent package drawings.
                                                                         DHC Package
                                                          16-Lead Plastic DFN (5mm × 3mm)
                                                        (Reference LTC DWG # 05-08-1706 Rev Ø)
                                                                                 0.65 ±0.05
        3.50 ±0.05
                         1.65 ±0.05
              2.20 ±0.05 (2 SIDES)
                                                                                   PACKAGE
                                                                                   OUTLINE
                                                                 0.25 ± 0.05
                                                                0.50 BSC
                                                     4.40 ±0.05
                                                     (2 SIDES)
                                RECOMMENDED SOLDER PAD PITCH AND DIMENSIONS
                                                                                                                      R = 0.115           0.40 ±0.10
                                                    5.00 ±0.10
                                                                                                                            TYP
                                                    (2 SIDES)
                                                                                                         9                           16
                                                                                              R = 0.20
                                                                                                  TYP
                                                                              3.00 ±0.10     1.65 ±0.10
                                                                               (2 SIDES)     (2 SIDES)
                              PIN 1                                                                                                           PIN 1
                         TOP MARK                                                                                                             NOTCH
                       (SEE NOTE 6)
                                                                                                                                             (DHC16) DFN 1103
                                                                                                         8                            1
                               0.200 REF                                      0.75 ±0.05                                       0.25 ±0.05
                                                                                                                              0.50 BSC
                                                                                                                  4.40 ±0.10
                                                                                                                  (2 SIDES)
                                                                                       0.00 – 0.05
                                                                                                          BOTTOM VIEW—EXPOSED PAD
                                     NOTE:
                                     1. DRAWING PROPOSED TO BE MADE VARIATION OF VERSION (WJED-1) IN JEDEC
                                        PACKAGE OUTLINE MO-229
                                     2. DRAWING NOT TO SCALE
                                     3. ALL DIMENSIONS ARE IN MILLIMETERS
                                     4. DIMENSIONS OF EXPOSED PAD ON BOTTOM OF PACKAGE DO NOT INCLUDE
                                        MOLD FLASH. MOLD FLASH, IF PRESENT, SHALL NOT EXCEED 0.15mm ON ANY SIDE
                                     5. EXPOSED PAD SHALL BE SOLDER PLATED
                                     6. SHADED AREA IS ONLY A REFERENCE FOR PIN 1 LOCATION ON THE
                                        TOP AND BOTTOM OF PACKAGE
                                                                                                                                                              4317fa
14                                                         For more information www.linear.com/LTC4317


                                                                                                                                     LTC4317
Revision History
REV DATE  DESCRIPTION                                                                                                                  PAGE NUMBER
 A  10/15 Minor edits                                                                                                                      4, 5
                                                                                                                                                4317fa
                      Information furnished by Linear Technology Corporation is believed to be accurate and reliable.
                      However, no responsibility is assumed for its use. Linear Technology Corporation makes no representa-
                                              For more
                      tion that the interconnection         information
                                                    of its circuits        www.linear.com/LTC4317
                                                                    as described herein will not infringe on existing patent rights.        15


LTC4317
Typical Application
                     SINGLE                                       “Y” CONNECTED DUAL                                          DUAL
                    LTC4316                                             LTC4317                                              LTC4318
     VCC                                               VCC                                                   VCC
  SCLIN         SCLIN   SCLOUT           SCLOUT      SCLIN          SCLIN   SCLOUT           SCLOUT1     SCLIN1          SCLIN   SCLOUT              SCLOUT1
  SDAIN         SDAIN SDAOUT             SDAOUT     SDAIN           SDAIN SDAOUT             SDAOUT1     SDAIN1          SDAIN SDAOUT                SDAOUT1
   XORH         XORH     READY           READY      XORH1           XORH      READY          READY1       XORH1          XORH     READY              READY1
   XORL         XORL                                XORL1           XORL                                  XORL1          XORL
 ENABLE         ENABLE                            ENABLE1           ENABLE                              ENABLE1          ENABLE
                                                                       CHANNEL1                                             CHANNEL1
    GND
                                                                    SCLIN   SCLOUT           SCLOUT2     SCLIN2          SCLIN   SCLOUT              SCLOUT2
                                                                    SDAIN SDAOUT             SDAOUT2     SDAIN2          SDAIN SDAOUT                SDAOUT2
                                                    XORH2           XORH      READY          READY2       XORH2          XORH     READY              READY2
                                                    XORL2           XORL                                  XORL2          XORL
                                                  ENABLE2           ENABLE                              ENABLE2          ENABLE
                                                                       CHANNEL2                                             CHANNEL2
                                                      GND                                                   GND
                                                                                                                                                   4317 F11
                                          Figure 11. Comparison Between LTC4316/LTC4317/LTC4318
Related Parts
PART NUMBER DESCRIPTION                                         COMMENTS
LTC4300A-1/      Hot Swappable 2-Wire Bus Buffers               LTC4300A-1: Bus Buffer with READY and ENABLE
LTC4300A-2/                                                     LTC4300A-2: Dual Supply Buffer with ACC
LTC4300A-3                                                      LTC4300A-3: Dual Supply Buffer and ENABLE
LTC4302-1/       Addressable 2-Wire Bus Buffer                  Address Expansion, GPIO, Software Controlled
LTC4302-2
LTC4303/         Hot Swappable 2-Wire Bus Buffer with Stuck Provides Automatic Clocking to Free Stuck I2C Busses
LTC4304          Bus Recovery
LTC4305/         2- or 4-Channel, 2-Wire Bus Multiplexers       Two or Four Software Selectable Downstream Busses, Stuck Bus Disconnect, Rise Time
LTC4306          with Capacitance Buffering                     Accelerators, Fault Reporting, ±10kV HBM ESD
LTC4307          Low Offset, Hot Swappable 2-Wire Bus           60mV Buffer Offset, 30ms Stuck Bus Disconnect and Recovery, Rise Time Accelerators,
                 Buffer with Stuck Bus Recovery                 ±5kV HBM ESD
LTC4307-1        High Definition Multimedia Interface (HDMI) 60mV Buffer Offset, 3.3V to 5V Level Shifting, ±5kV HBM ESD
                 Level Shifting 2-Wire Bus Buffer
LTC4308          Low Voltage, Level Shifting Hot Swappable      Bus Buffer with 1V Precharge, ENABLE and READY, 0.9V to 5.5V Level Translation, 30ms
                 2-Wire Bus Buffer with Stuck Bus Recovery      Stuck Bus Disconnect and Recovery, Output Side Rise Time Accelerators, ±6kV HBM ESD
LTC4309          Low Offset Hot Swappable 2-Wire Bus            60mV Buffer Offset, 30ms Stuck Bus Disconnect and Recovery, Rise Time Accelerators,
                 Buffer with Stuck Bus Recovery                 ±5kV HBM ESD, 1.8V to 5.5V Level Translation
LTC4310-1/       Hot Swappable I2C Isolators                    Bidirectional I2C Communication Between Two Isolated Busses, LTC4310-1: 100kHz Bus,
LTC4310-2                                                       LTC4310-2: 400kHz Bus
LTC4311          Hot Swappable I2C/SMBus Accelerator            Rise Time Acceleration with ENABLE, ±8kV HBM ESD
LTC4312/         2- or 4-Channel, Hardware Selectable 2-Wire Two or Four Pin Selectable Downstream Busses, VIL Up to 0.3V • VCC, Rise Time
LTC4314          Bus Multiplexers with Capacitance Buffering Accelerators, 45ms Stuck Bus Disconnect and Recovery, ±4kV HBM ESD
LTC4313-1/       High Noise Margin 2-Wire Bus Buffers           VIL = 0.3V • VCC, Rise Time Accelerators, Stuck Bus Disconnect and Recovery, 1V
LTC4313-2/                                                      Precharge, ±4kV HBM ESD
LTC4313-3
                                                                                                                                                            4317fa
16 Linear Technology Corporation
                                                                                                                                    LT 1015, • PRINTED IN USA
           1630 McCarthy Blvd., Milpitas, CA 95035-7417For more information www.linear.com/LTC4317
           (408) 432-1900 ● FAX: (408) 434-0507 ● www.linear.com/LTC4317                                            © LINEAR TECHNOLOGY CORPORATION 2015


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Analog Devices Inc.:
 LTC4317IDHC#PBF LTC4317CDHC#TRPBF LTC4317IDHC#TRPBF LTC4317CDHC#PBF
