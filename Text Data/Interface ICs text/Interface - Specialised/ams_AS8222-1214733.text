high
performance
needs great
design.
Datasheet: AS8222 Enhanced FlexRay Standard Transceiver
Please be patient while we update our brand image as
austriamicrosystems and TAOS are now ams.
                                                     www.ams.com


AS8222
E n h a n c e d F l e x R a y S t a n d a r d Tr a n s c e i v e r
1 General Description                                                         Interface with optional bus guardian for bus supervision
                                                                              Automatic thermal shutdown protection
The AS8222 is a high-speed fault tolerant device operating as
                                                                              Supports 12, 24V systems with low sleep current consumption
interface between a generic FlexRay Communication Controller and
the copper wiring.                                                            Integrated power management system
This device is the first FlexRay certified Transceiver for temperature        Two INH pins for the external voltage regulators control
ranges up to 150°C ambient temperature. For bare-die deliveries
                                                                              Local wake-up input
please contact ams for more information.
                                                                              Remote wake-up capability via FlexRay bus in sleep mode
The AS8222 is designed to extend the application range for high
speed and safety critical time triggered bus systems in an                    Supports 2.5, 3, 3.3, 5 V microcontrollers and automatically
automotive environment. The bus driver is protected against short                 adapts to interface levels
circuits to the supply and GND. The AS8222 operates at baudrates              Does not disturb the bus line if not powered
up to 10 Mbps and is fully conforming to the FlexRay Electrical
Physical Layer Specification V2.1 Rev B.                                      Protected against damage due to short circuit conditions on the
                                                                                  bus (positive and negative battery voltage)
The AS8222 provides a host controller interface consisting of Enable
(EN) and Standby (STBN) input pins for mode handling by the                   Small Pb-free package: SSOP-20
microcontroller and the Error (ERRN) output pin, signalling failures          Automotive qualified to AEC-Q100, grade 0
and status information.
                                                                              For bare-die deliveries please contact us.
The device supports the NORMAL mode with activated FlexRay bus
transmitter and receiver, the RECEIVE_ONLY mode with activated
receiver only to avoid unwanted disturbances while listening to the          3 Applications
communication and the low-power modes STANDBY and SLEEP
with very low power consumption.                                             The AS8222 FlexRay Standard Transceiver is best fitting for
                                                                             automotive FlexRay nodes where bus wake-up and voltage regulator
In case of undervoltage at one of the supply voltages (VBAT, VCC,            control for voltage supplies is needed.
and VIO) the device will change its mode to a low-power mode
(either STANDBY or SLEEP mode) and the device will signal an                 The device addresses all ECUs connected to the permanent battery
error accordingly. In case of low voltage is detected on both VBAT           supply (terminal 30).
and VCC the device will enter the POWER-OFF mode.                            The device is best suited for high temperature applications with up to
Ensuring application in safety critical environments a two wire bus-         150°C.
guardian interface is implemented where additional redundant
circuitries on the electronic-control-unit can monitor the
communication on the receive enable output (RxEN) and can
activate and deactivate through the bus guardian enable input (BGE)
the transmitter. Additionally in low-power modes the wake conditions
at the RxEN pin can be monitored.
A thermal sensor circuit with an integral shutdown mechanism
prevents damage to the device in extreme temperature conditions.
2 Key Features
  Data transfer up to 10 Mbps
  Compliant with FlexRay Electrical Physical Layer Specification
      V2.1 Rev. B
  Wide operating ambient temperature range -40°C to +150°C
  Excellent EMC performance
  High common mode range insures excellent EMI immunity
www.ams.com/eng/FlexRay/AS8222                                         Revision 1.0                                                           1 - 42


AS8222
Datasheet - A p p l i c a t i o n s
Figure 1. AS8222 Enhanced FlexRay Standard Transceiver Block Diagram
                                          VIO
                                                                                 AS8222
    STBN                                                                                             Bus Failure Detector
      EN                                         Host Controller Interface
   ERRN
                          VIO
     RxD                                        Communication                                                               BP
     TxD                                          Controller                     Digital Logic              Transmitter
    TxEN                                          Interface                                                                 BM
     BGE
                                                Bus Guardian
                                                                                                             Receiver
    RxEN                                          Interface
                                 VBAT
                                        VBAT
     INH1
                                                                                                             Wake-Up
                                                     Power Supply Interface
     INH2                                                                                                    Detector
                                                                                               GND
                                                                                                           WAKE
                                                                   VBAT   VIO   VCC
www.ams.com/eng/FlexRay/AS8222                                                  Revision 1.0                                2 - 42


AS8222
Datasheet - C o n t e n t s
Contents
1 General Description ..................................................................................................................................................................                             1
2 Key Features............................................................................................................................................................................                           1
3 Applications...............................................................................................................................................................................                        1
4 Pin Assignments .......................................................................................................................................................................                            5
     4.1 Pin Descriptions....................................................................................................................................................................................        5
5 Absolute Maximum Ratings ......................................................................................................................................................                                    6
6 Electrical Characteristics...........................................................................................................................................................                              8
     6.1 Supply Voltage......................................................................................................................................................................................        8
     6.2 State Transitions..................................................................................................................................................................................         9
     6.3 Transmitter............................................................................................................................................................................................     9
     6.4 Receiver .............................................................................................................................................................................................     11
     6.5 Wake-up Detector...............................................................................................................................................................................            13
     6.6 Supply Voltage Monitor.......................................................................................................................................................................              14
     6.7 Bus Error Detection ............................................................................................................................................................................           15
     6.8 Over Temperature...............................................................................................................................................................................            15
     6.9 Power Supply Interface ......................................................................................................................................................................              15
     6.10 Communication Controller Interface .................................................................................................................................................                      15
     6.11 Host Interface ...................................................................................................................................................................................        17
     6.12 Bus Guardian Interface.....................................................................................................................................................................               18
     6.13 Read Out Interface ...........................................................................................................................................................................            18
7 Detailed Description................................................................................................................................................................                             19
     7.1 Block Description................................................................................................................................................................................          19
     7.2 Events.................................................................................................................................................................................................    19
     7.3 Operating Modes ................................................................................................................................................................................           19
            7.3.1     NORMAL Mode .........................................................................................................................................................................         20
            7.3.2     RECIEVE-ONLY Mode ..............................................................................................................................................................              20
            7.3.3     STANDBY Mode........................................................................................................................................................................          20
            7.3.4     GO-TO-SLEEP Mode ................................................................................................................................................................             20
            7.3.5     SLEEP Mode .............................................................................................................................................................................      20
     7.4 Non-Operating Modes ........................................................................................................................................................................               20
            7.4.1 POWER-OFF Mode................................................................................................................................................................... 20
     7.5 Undervoltage Events ..........................................................................................................................................................................             20
            7.5.1 Undervoltage / Voltage Recovery VBAT .................................................................................................................................... 21
            7.5.2 Undervoltage / Voltage Recovery VIO ....................................................................................................................................... 21
            7.5.3 Undervoltage / Voltage Recovery VCC ...................................................................................................................................... 21
     7.6 Power On/Off Events..........................................................................................................................................................................              21
     7.7 Wake-Up Events.................................................................................................................................................................................            21
            7.7.1 Remote Wake-Up Event ............................................................................................................................................................ 21
            7.7.2 Remote Wake-up with Frames .................................................................................................................................................. 21
            7.7.3 Local Wake-Up Event ................................................................................................................................................................ 22
     7.8 Over-temperature Events ...................................................................................................................................................................                22
     7.9 System Description.............................................................................................................................................................................            23
     7.10 Fail Silent Behaviour.........................................................................................................................................................................            24
            7.10.1 RxEN / BGE Timeout............................................................................................................................................................... 24
            7.10.2 State Transitions due to Undervoltage Detection .................................................................................................................... 24
www.ams.com/eng/FlexRay/AS8222                                                                   Revision 1.0                                                                                                   3 - 42


AS8222
Datasheet - C o n t e n t s
            7.10.3 State Transitions due to Voltage Recovery Detection ............................................................................................................. 24
     7.11 Mode Transitions ..............................................................................................................................................................................          24
            7.11.1 Error Pin Signalling .................................................................................................................................................................. 27
     7.12 Loss of Ground .................................................................................................................................................................................         27
     7.13 ERROR Flags Description................................................................................................................................................................                  27
            7.13.1 Undervoltage Detected VBAT Flag ..........................................................................................................................................                      27
            7.13.2 Undervoltage Detected VIO Flag .............................................................................................................................................                    27
            7.13.3 Undervoltage Detected VCC Flag............................................................................................................................................                      27
            7.13.4 Bus Error..................................................................................................................................................................................     27
            7.13.5 Bus Open Line .........................................................................................................................................................................         27
            7.13.6 BP Short Circuit to VCC ...........................................................................................................................................................             27
            7.13.7 BP Short Circuit to GND ..........................................................................................................................................................              28
            7.13.8 BM Short Circuit to VCC ..........................................................................................................................................................              28
            7.13.9 BM Short Circuit to GND..........................................................................................................................................................               28
            7.13.10 Short Circuit between BP and BM .........................................................................................................................................                      28
            7.13.11 Over-temperature ..................................................................................................................................................................            28
            7.13.12 TxEN_BGE Timeout ..............................................................................................................................................................                28
            7.13.13 Error Flag...............................................................................................................................................................................      28
     7.14 STATUS Flags Description ...............................................................................................................................................................                 28
            7.14.1 Local and Remote Wake Flag ................................................................................................................................................. 28
            7.14.2 Power on Flag.......................................................................................................................................................................... 28
            7.14.3 BGE Status .............................................................................................................................................................................. 28
     7.15 Error and Status Flags Read Out .....................................................................................................................................................                    29
8 Bus Driver ...............................................................................................................................................................................                      30
     8.1 AS8222 Bus States ............................................................................................................................................................................            30
     8.2 Transceiver Timing .............................................................................................................................................................................          30
     8.3 Transmitter..........................................................................................................................................................................................     31
     8.4 Receiver .............................................................................................................................................................................................    33
            8.4.1 Bus activity and idle detection (only in NORMAL and RECEIVE ONLY mode)......................................................................... 33
            8.4.2 Bus Data Detection (Only in NORMAL and RECEIVE ONLY Mode) ........................................................................................ 34
            8.4.3 Receiver Test Signal.................................................................................................................................................................. 35
9 Test circuits .............................................................................................................................................................................                     36
     9.1 ISO7637-2 Test Pulses - Class D .......................................................................................................................................................                   36
     9.2 Application Circuit...............................................................................................................................................................................        37
10 Appendix...............................................................................................................................................................................                        38
     10.1 FlexRay Functional Classes .............................................................................................................................................................                 38
     10.2 FlexRay Parameter Comparison ......................................................................................................................................................                      38
11 Package Drawings and Markings..........................................................................................................................................                                        39
12 Ordering Information.............................................................................................................................................................                              40
www.ams.com/eng/FlexRay/AS8222                                                                  Revision 1.0                                                                                                   4 - 42


AS8222
Datasheet - P i n A s s i g n m e n t s
4 Pin Assignments
The AS8222 is available in SSOP-20 5.3mm.
Figure 2. Pin Assignments (Top View)
                                                    INH2     1                              20    -
                                                    INH1     2                              19   VCC
                                                     EN      3                              18   BP
                                                     VIO     4                              17   BM
                                                     TxD     5
                                                                      AS8222                16  GND
                                                    TxEN     6         (SSOP20)             15  WAKE
                                                     RxD     7                              14   VBAT
                                                    BGE      8                              13  ERRN
                                                   STBN      9                              12  RxEN
                                                      -     10                              11    -
4.1 Pin Descriptions
Table 1. SSOP-20 Pin Descriptions
     Pin Name                  Pin Number              Pin Type                                            Description
       INH2                              1                                  Analog Output. Inhibit 2 output for switching external voltage regulator
                                                      Analog I/O
       INH1                              2                                  Analog Output. Inhibit 1 output for switching external voltage regulator
         EN                              3 Digital Input with Pull-down     Digital Input. Enable input
        VIO                              4               Supply             Supply Voltage. I/O supply voltage
        TxD                              5 Digital Input with Pull-down     Digital Input. Transmit data input
       TxEN                              6  Digital Input with Pull-up      Digital Input. Transmitter enable input
        RxD                              7         Digital Output           Digital Output. Receive data output
        BGE                              8                                  Digital Input. Bus guardian enable input
                                           Digital Input with Pull-down
       STBN                              9                                  Digital Input. Standby input
                                           Analog/digital Input/output      To be connected to GND or to be unconnected
     Reserved                           10
                                                  with Pull-down
     Not used                           11                 -                -
       RxEN                             12                                  Digital Output. Receive data enable output
                                                   Digital Output
       ERRN                             13                                  Digital Output. Error diagnosis output and wake status output
       VBAT                             14               Supply             Supply Voltage. Battery supply voltage
       WAKE                             15            Analog I/O            Analog Input. Local wake-up input
       GND                              16               Supply             Ground
        BM                              17                                  Analog Input/Output. Bus line Minus
                                                      Analog I/O
         BP                             18                                  Analog Input/Output. Bus line Plus
        VCC                             19               Supply             Supply voltage.
     Not used                           20                 -                -
www.ams.com/eng/FlexRay/AS8222                                           Revision 1.0                                                          5 - 42


AS8222
Datasheet - A b s o l u t e M a x i m u m R a t i n g s
5 Absolute Maximum Ratings
Stresses beyond those listed in Table 2 may cause permanent damage to the device. These are stress ratings only. Functional operation of the
device at these or any other conditions beyond those indicated in Absolute Maximum Ratings is not implied. Exposure to absolute maximum
rating conditions for extended periods may affect device reliability.
Note: All voltages are referred to pin GND.
Table 2. Absolute Maximum Ratings
    Symbol                              Parameter           Min           Max      Units                            Note
 Electrical Parameters
     VBAT                     Battery Supply Voltage        -0.3          +50        V
     VCC                                                    -0.3          +7.0       V
                                     Supply Voltage
      VIO                                                   -0.3          +7.0       V                           VIO < VCC
                      DC Voltage at EN, STBN, ERRN,         -0.3        VIO +0.3     V
                          TxD, RxD, TxEN, BGE, RxEN
                  DC Voltage on pin WAKE, INH1, INH2        -0.3       VBAT +0.3
                            DC Voltage at BP and BM         -40           +40        V
                        Input current (latchup immunity)   -100           100       mA                     According to JEDEC 78
 Electrostatic Discharge
                              Electrostatic Discharge        ±2                     kV                             All pins
                                                                                                           AEC-Q100-002 (HBM)
                                         uESDInt              2                     kV                      ESD on all other pins
                                                                                                           For VBAT, GND, WAKE
                             Electrostatic Discharge         ±4                     kV
                                                                                                           AEC-Q100-002 (HBM)
                                         uESDExt                                                  ESD protection on pins that lead to ECU
                                                              4                     kV                       external terminals
                                                                                                                   BP, BM
                              Electrostatic Discharge        ±6                     kV
                                                                                                           AEC-Q100-002 (HBM)
     ESD
                                         uESDExt                                                  ESD protection on pins that lead to ECU
                                                              4                     kV                       external terminals
                                                                                                                   BP, BM
                              Electrostatic Discharge        ±6                     kV          FlexRay Physical Layer EMC Measurement
                                                                                                          Specification Version 3.0
                                                                                                                 On all pins
                                                           ±500                      V
                                                                                                   AEC-Q100-011 (Charge Device Model)
                                                                                                             At the corner pins
                              Electrostatic Discharge      ±750                      V
                                                                                                   AEC-Q100-011 (Charge Device Model)
                                                                                                                 On all pins
                                                           ±100                      V
                                                                                                     AEC-Q100-003 (Machine Model)
www.ams.com/eng/FlexRay/AS8222                                        Revision 1.0                                                      6 - 42


AS8222
Datasheet - A b s o l u t e M a x i m u m R a t i n g s
Table 2. Absolute Maximum Ratings
   Symbol                               Parameter           Min          Max          Units                            Note
 Damage Tests
                                                                                                         ISO7637-2 test pulse 1; class D
                                                            -100                         V
                                                                                                                  (see Figure 14)
                                                                                                        ISO7637-2 test pulses 2a; class D
                                                                          +75            V
                   Transient voltage on VBAT, Bus and                                                             (see Figure 14)
      Us
                            Wake pins (damage tests)                                                    ISO7637-2 test pulses 3a; class D
                                                            -150                         V
                                                                                                                  (see Figure 14)
                                                                                                        ISO7637-2 test pulses 3b; class D
                                                                         +100            V
                                                                                                                  (see Figure 14)
 Power Dissipation
      Pt            Total power dissipation (all supplies                 150          mW
                                      and outputs)
 Temperature Ranges and Storage Conditions
     Tstrg                     Storage temperature           -55         +150           ºC
    TBODY                                                1                260           ºC
                           Package body temperature
      H                     Humidity non-condensing           5            85           %
     MSL                                                2           3
                            Moisture Sensitivity Level
1. The reflow peak soldering temperature (body temperature) specified is in accordance with IPC/JEDEC J-STD-020 “Moisture/Reflow
   Sensitivity Classification for Non-Hermetic Solid State Surface Mount Devices”. The lead finish for Pb-free leaded packages is matte tin
   (100% Sn).
2. Represents a maximum floor life time of 168h.
www.ams.com/eng/FlexRay/AS8222                                        Revision 1.0                                                          7 - 42


AS8222
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
6 Electrical Characteristics
In this specification, all the defined tolerances for external components are assured over the whole operation conditions range as well as over
lifetime.
Operation Range:
TAMB=-40ºC to +150ºC, VCC=+4.75V to +5.25V, VBAT=5.5V to +40V, VIO=+2.2 to VCC, RL=40Ω, CL= 100pF unless otherwise specified.
6.1 Supply Voltage
Table 3. Supply Voltage
       Symbol                                   Parameter                   Conditions                   Min        Typ        Max        Units
        TAMB                          Ambient temperature                                                -40        +25       +150         ºC
            T                         Ambient temperature                                                -40                  +125         ºC
      VCC-VIO                         Difference of supplies                                             -0.1                  3.05         V
                                                                     VBAT=12V; SLEEP mode;
                                                                                       1                   0         30         50         µA
                                                                          TAMB<125ºC
                                  VBAT current consumption
         IBAT
                                 (standard transceiver only)         VBAT=12V; SLEEP mode
                                                                                             1
                                                                                                           0         80        170         µA
                                                                       Non-low-power modes                0        0.24          1         mA
                                                                                                   1
                                                              Low-power modes; VCC = 0 V to +5.25V        -5         10         20         µA
                                                               Non-low-power mode: NORMAL, driver         15         25         45         mA
                                                                              enabled
          ICC                     VCC current consumption
                                                               Non-low-power mode: NORMAL, driver
                                                                        enabled; RBUS= ∞Ω                  3          7         15         mA
                                                               Non-low-power mode: RECEIVE-ONLY           1           2         10         mA
                                                                                                   1
                                                              Low-power Modes; VIO = 0 V to +5.25V        -5          2         20         µA
           IIO                     VIO current consumption
                                                                       Non-low-power Modes                0        0.02          1         mA
1. EN, STBN, ERRN, TxD, RxD, TxEN, BGE, RxEN, WAKE, INH1, INH2: open.
www.ams.com/eng/FlexRay/AS8222                                           Revision 1.0                                                       8 - 42


AS8222
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
6.2 State Transitions
Table 4. State Transitions
       Symbol                                                 Parameter                 Conditions             Min     Typ      Max    Units
      tSTBN_RXD                  Delay STBN high to RxD high with wake                                          1       10       50     µs
                                                                flag set
     tSTBN_RXEN                 Delay STBN high to RxEN high with wake                                          1       10       50     µs
                                                                flag set
     tSLEEP_INH1                          Delay STBN high to INH1 high           INH1 high = 80 % VBAT          1       10       50     µs
   tSTANDBY_INH2                          Delay STBN high to INH2 high           INH2 high = 80 % VBAT          1       10       50     µs
        tSLEEP                                      go-to-sleep hold time         INH1 low = 20 % VBAT         10       25       70     µs
6.3 Transmitter
The following parameters are applicable to all the branch transmitters.
Table 5. Transmitter
        Symbol                                                Parameter               Conditions             Min      Typ       Max    Units
    VBUS_DIFF_D0                 Differential bus voltage low in NORMAL          VBPdata0 – VBMdata0;         -2       -1        -0.6    V
                                                          mode (Data_0)            40 Ω < RL < 55 Ω
      uBDTxactive                 Absolute value of uBus, while sending     Load on BP/BM: 40Ω || 100pF    |2000|               |600|   mV
    VBUS_DIFF_D1                         Differential bus voltage high in        VBPdata1 – VBMdata1;        0.6        1         2      V
                                              NORMAL mode (Data_1)                 40 Ω < RL < 55 Ω
      uBDTxactive                 Absolute value of uBus, while sending     Load on BP/BM: 40Ω || 100pF     |600|              |2000|   mV
                                  Matching between Data_0 and Data_1         VBUS_DIFF_D0 - VBUS_DIFF_D1
      ΔVBUS_DIFF                    differential bus voltage in NORMAL                                      -200        0        200    mV
                                                                 mode              40 Ω < RL < 55 Ω
                                  Common mode bus voltage in case of            VBPdata0/2+VBMdata0/2
    VBUS_COM_D0                                                                                          0.4 * VCC 0.5 * VCC 0.6 * VCC   V
                                        Data_0 in non-low-power mode               40 Ω < RL < 55 Ω
                                  Common mode bus voltage in case of            VBPdata1/2+VBMdata1/2
    VBUS_COM_D1                                                                                          0.4 * VCC 0.5 * VCC 0.6 * VCC   V
                                        Data_1 in non-low-power mode               40 Ω < RL < 55 Ω
                                 Matching between Data_0 and Data_1         VBUS_COM_D0 - VBUS_COM_D1
     ΔV BUS_COM                                                                                             -200        0        200    mV
                                                common mode voltage                40 Ω < RL < 55 Ω
    VBUS_DIFF_Idle                Absolute differential bus voltage in idle        40 Ω < RL < 55 Ω                     0         30    mV
                                                                 mode
       uBDTxidle                      Absolute value of uBus, while Idle                                      0                   30    mV
    IBPBMShortMax                Absolute max current when BP shorted                  VBP= VBM                        25       +100    mA
    IBMBPShortMax                                               to BM
                                 Absolute maximum output current when
    IBPBMShortMax                                                 BP
    IBMBPShortMax                                          shorted to BM                                                         100    mA
   IBPGNDShortMax                     Absolute max current when BP is                  VBP=0 V
                                                         shorted to GND                                                50       +100    mA
                                 Absolute maximum output current when
   IBPGNDShortMax                                        shorted to GND                                                          100    mA
www.ams.com/eng/FlexRay/AS8222                                                 Revision 1.0                                             9 - 42


AS8222
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
Table 5. Transmitter
          Symbol                                              Parameter           Conditions       Min  Typ Max   Units
    IBMGNDShortMax                    Absolute max current when BM is               VBM=0 V              50 +100   mA
                                                         shorted to GND
                                 Absolute maximum output current when
    IBMGNDShortMax                                                                                           100   mA
                                                         shorted to GND
      IBP-5VShortMax                  Absolute max current when BP is               VBP=-5 V             50 +100   mA
                                                          shorted to -5 V
                                 Absolute maximum output current when
      IBP-5VShortMax                                                                                         100   mA
                                                          shorted to –5V
     IBM-5VShortMax                   Absolute max current when BM is              VBM=-5 V
                                                          shorted to -5 V                                50 +100   mA
                                 Absolute maximum output current when
     IBM-5VShortMax                                       shorted to –5V                                     100   mA
     IBP27VShortMax                   Absolute max current when BP is              VBP=27 V              60 +100   mA
                                                          shorted to 27 V
                                 Absolute maximum output current when
   IBPBAT27ShortMax                                                                                          100   mA
                                                          shorted to 27V
     IBM27VShortMax                   Absolute max current when BM is              VBM=27 V              60 +100   mA
                                                          shorted to 27 V
                                 Absolute maximum output current when
   IBMBAT27ShortMax                                                                                          100   mA
                                                          shorted to 27V
     IBP40VShortMax                   Absolute max current when BP is              VBP=40 V              75 +100   mA
                                                          shorted to 40 V
     IBM40VShortMax                   Absolute max current when BM is              VBM=40 V
                                                          shorted to 40 V                                75 +100   mA
        tTXD_BUS01                 Delay time from TxD to BUS positive          triseTxD = 5 ns          25  50    ns
                                                                edge
         dBDTx01                        Transmitter delay, positive edge                                     100   ns
        tTXD_BUS10                 Delay time from TxD to BUS negative          tfall TxD = 5 ns         25  50    ns
                                                                edge
         dBDTx10                       Transmitter delay, negative edge                                      100   ns
     tTXD_MISMATCH                Delay time from TxD to BUS mismatch      tTxD_BUS10 – tTxD_BUS01  -4    0   4    ns
                                           Transmitter delay mismatch
         dTxAsym                                | dBDTx10 - dBDTx01 |                                         4    ns
         tBUS_TX10                      Fall time differential bus voltage   80 % - 20 % of VBUS;  3.75  13 18.75  ns
                                                                            RL=45 Ω; CL= 100 pF
                                        Fall time differential bus voltage
         dBusTx10                                         (80% → 20%)                              3.75     18.75  ns
         tBUS_TX01                     Rise time differential bus voltage    20 % - 80 % of VBUS;  3.75  13 18.75  ns
                                                                            RL=45 Ω; CL= 100 pF
                                       Rise time differential bus voltage
         dBusTx01                                         (20% → 80%)                              3.75     18.75  ns
 tTXEN_BUS_Idle_Active              Delay time from TxEN to bus active      RL=45 Ω; CL= 100 pF          18  50    ns
          dBDTxia                       Propagation delay idle → active                                      100   ns
www.ams.com/eng/FlexRay/AS8222                                             Revision 1.0                           10 - 42


AS8222
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
Table 5. Transmitter
        Symbol                                                Parameter                 Conditions             Min     Typ     Max  Units
 tTXEN_BUS_Active_Idle                                                            RL=45 Ω; CL= 100 pF                   18      50    ns
                                       Delay time from TxEN to bus idle
                                        Propagation delay active → idle
        dBDTxai                                                                                                                100    ns
                                                                                  | tTXEN_BUS_Idle_Active -
    tTXEN_MISMATCH                                                                                                       0      50    ns
                                 Delay time from TxEN to BUS mismatch              tTXEN_BUS_Active_Idle |;
                                                                                  RL=45 Ω; CL= 100 pF
                                                  | dBDTxia - dBDTxai |
       dBDTxDM                                                                                                                  50    ns
   tBGE_BUS_IdleActive                                                                                                  18      50    ns
                                     Delay time from BGE to bus active
                                        Propagation delay idle → active
        dBDTxia                                                                                                                100    ns
  tBGE_BUS_Active_Idle                                                                                                  18      50    ns
                                        Delay time from BGE to bus idle
                                        Propagation delay active → idle
        dBDTxai                                                                                                                100    ns
     tBUS_Idle_Active             Differential bus voltage transition time:       RL=45 Ω; CL= 100 pF                    5      30    ns
                                                            idle to active
        dBusTxia                          Transition time idle → active                                                         30    ns
     tBUS_Active_Idle             Differential bus voltage transition time:       RL=45 Ω; CL= 100 pF                    2      30    ns
                                                            active to idle
        dBusTxai                          Transition time active → idle                                                         30    ns
      tTxEN_timeout                                        TxEN timeout                                          3      5       10    ms
6.4 Receiver
The following parameters are applicable to all the branch receivers.
Table 6. Receiver
       Symbol                                           Parameter                     Conditions              Min     Typ     Max   Units
       RBP, RBM                           BP, BM input resistance                Idle mode; RBUS= ∞             10     25      40    kΩ
                                    Receiver common mode input
    RCM1, RCM2                                           resistance                                             10             40    kΩ
         RDIFF                   BP, BM differential input resistance            Idle mode; RBUS= ∞             20     50      80    kΩ
       VBP, VBM                     Common mode voltage range                                                  -10            +15     V
                                 Common mode voltage range (with
         uCM                   respect to GND) that does not disturb                                           -10            +15     V
                                              the receive function
    VBPidle, VBMidle            Idle voltage in non-low-power modes        Non-low-power modes; VTXEN=VIO   0.4*VCC 0.5*VCC 0.6*VCC   V
                                                    on pin BP, BM
                                                                                  40 Ω < RL < 55 Ω
                                 Bus bias voltage during BD_Normal
         uBias                                                mode                                            1800            3200   mV
www.ams.com/eng/FlexRay/AS8222                                                   Revision 1.0                                        11 - 42


AS8222
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
Table 6. Receiver
       Symbol                                           Parameter                   Conditions            Min  Typ  Max  Units
    VBPidle_low,                Idle voltage in low-power modes on               Low-power modes
                                                                                                          -0.2   0  +0.2   V
    VBMidle_low                                         pin BP, BM
                                                                                 40 Ω < RL < 55 Ω
                                 Bus bias voltage during low-power
                                                            modes                                         -200      +200  mV
        uBias
        IBPidle                Absolute idle output current on pin BP           -40 V < VBP < 40 V          0    2   7.5  mA
        IBMidle                Absolute idle output current on pin BM           -40 V < VBM < 40 V          0    2   7.5  mA
     IBPleak_ST,                                                       VBP=VBM=5 V, VDD=0 V, VBAT=0 V;
                                Absolute leakage current, when not                                               6    25  µA
     IBMleak_ST                                                                      VIO=0 V;
                                                           powered
                                                                                   Tamb < 125°C
                                Absolute leakage current, when not
      iBPLeak,                                             powered                                                    25  µA
      iBMLeak
                                                                       VBP=VBM=5 V, VDD=0 V, VBAT=0 V;
     IBPleak_HT,                Absolute leakage current, when not                   VIO=0 V;                   35   150  µA
     IBMleak_HT                                            powered
                                                                              125°C < Tamb < 150°C
                                 Activity detection differential input         Normal power modes         150   260  400  mV
   VBUSActiveHigh
                                                      voltage high          -10 V < (VBP, VBM) < 15 V
                               Upper receiver threshold for detecting
  uBusActiveHigh                                            activity                                      150        425  mV
                                 Activity detection differential input         Normal power modes         -400 -260 -150  mV
   VBUSActiveLow
                                                       voltage low          -10 V < (VBP, VBM)< 15 V
                               Lower receiver threshold for detecting
  uBusActiveLow                                             activity                                      -425      -150  mV
        VData1                    Data1 detection differential input      Pre-condition: activity already
                                                                         detected. Normal power mode.     150   225  300  mV
                                                            voltage
                                                                            -10 V < (VBP, VBM)< 15 V
                                   Receiver threshold for detecting
       uData1                                               Data_1                                        150        300  mV
        VData0                    Data0 detection differential input      Pre-condition: activity already
                                                                         detected. Normal power mode.     -300  225 -150  mV
                                                            voltage
                                                                            -10 V < (VBP, VBM)< 15 V
                                   Receiver threshold for detecting
       uData0                                               Data_0                                        -300      -150  mV
       VDataErr                 Mismatch between Data0 and Data1           2 x (VData0- VData1) /          0    10   %
                                          differential input voltage                                 1
                                                                               (VData0+VData1)
       ΔuData                      Mismatch of receiver thresholds                                                    10   %
    tBUS_RxD10                                                                                  2
                                                                                   CRXD=15 pF                   34    80  ns
                               Delay from BUS to RxD negative edge
                                    Receiver delay, negative edge
     dBDRx10                                                                                                         100  ns
    tBUS_RxD01                                                                                  2               34    80  ns
                               Delay from BUS to RxD positive edge                 CRXD=15 pF
                                     Receiver delay, positive edge
     dBDRx01                                                                                                         100  ns
www.ams.com/eng/FlexRay/AS8222                                                 Revision 1.0                               12 - 42


AS8222
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
Table 6. Receiver
       Symbol                                           Parameter                    Conditions                Min   Typ  Max  Units
                                                                                                2
           tbit                                             Bit time                CRXD=15 pF                  60              ns
                              Delay time from BUS to RxD mismatch                   CRXD=15 pF,
     tRxD_ASYM                                                                                                        0    5    ns
                                                                                                      2
                                                                             tBUS_RxD10- tBUS_RxD01
                                         Receiver delay mismatch
      dRxAsym                                                                                                              5    ns
                                          | dBDRx10 – dBDRx01 |
                                                                                                           2
        tRXDfall                            Fall time RxD voltage      80 % - 20 % of VRXDL;CRXD=15 pF                2    5    ns
      dRxSlope                Fall and rise time 20%-80%, 15pF load                                                        5    ns
                                                                                                            2
       tRXDrise                             Rise time RxD voltage      20 % - 80 % of VRXDL;CRXD=15 pF                2    5    ns
      dRxSlope                Fall and rise time 20%-80%, 15pF load                                                        5    ns
   tBUSIdleDetection                           Idle detection time               VBUS: 400mV → 0                50   150  250   ns
   dIdleDetection                      Filter-time for idle detection                                           50        250   ns
 tBUSActivityDetection                                                          VBUS: 0 V → 400 mV
                                            Activity detection time                                            100   200  300   ns
  dActivityDetectio                 Filter-time for activity detection                                         100        300   ns
            n
   tBUSIdleReaction                             Idle reaction time               VBUS: 400mV → 0                50   160  300   ns
      dBDRxai                                   Idle reaction time                                              50        400   ns
 tBUSActivityReaction                        Activity reaction time             VBUS: 0 V → 400 mV             100   210  350   ns
      dBDRxia                                Activity reaction time                                            100        450   ns
1. Test condition: (VBP + VBM) / 2 = 2,5V ± 5%
2. For test signal see Figure 13
6.5 Wake-up Detector
The following parameters are applicable to all the branch wake-up detectors.
Table 7. Wake-up Detector
       Symbol                                            Parameter                    Conditions                 Min  Typ  Max Units
      VBAT_BW                   VBAT voltage supply for bus wake-up                                              6.5        40   V
                                                                        In case a VBAT supply voltage input is
                                                                         implemented, the wake-up detector
                                                                       shall be operable when uVBAT is equal
                                                                          to or greater than 7V even if other
                                                                               supplies are not present.
         tBWU0                 Data_0 detection time in remote wake-             -10V<(VBP, VBM)<15V               1    2    4   µs
                                                          up pattern
                                Acceptance timeout for detection of a
    dWU0Detect                    Data_0 phase in wake-up pattern                                                  1         4   µs
www.ams.com/eng/FlexRay/AS8222                                                  Revision 1.0                                    13 - 42


AS8222
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
Table 7. Wake-up Detector
      Symbol                                             Parameter                            Conditions                 Min Typ   Max  Units
       tBWUIdle                Idle or Data_1 detection time in remote                   -10V<(VBP, VBM)<15V               1   2     4   µs
                                                   wake-up pattern
                                Acceptance timeout for detection of a
  dWUIdleDetect                      Idle phase in wake-up pattern                                                         1         4   µs
     tBWUDetect                  Total remote wake-up detection time                                                      48  75   140   µs
                                                                                         -10V<(VBP, VBM)<15V
                                   Acceptance timeout for wake-up
   dWUTimeout                                  pattern recognition                                                        48       140   µs
        VBWU0                    Remote wake-up detector threshold                       -10V<(VBP, VBM)<15V            -300 -250  -150  mV
       VLWUTH                         Wake-up detection threshold                                                          2  2.8    4    V
        ILWUL                   Low level input current on WAKE pin                VBAT=12V; VLWAKE=2V for t<tLWUFilter  -20  -10   -5   µA
        ILWUH                   High level input current on WAKE pin               VBAT=12V; VLWAKE=4V for t<tLWUFilter    5  10    20   µA
      tLWUFilter                             Local wake filter time                                                        1  20    40   µs
 dWakePulseFilter Wake pulse filter time (spike rejection)                                                                 1       500   µs
6.6 Supply Voltage Monitor
Table 8. Supply Voltage Monitor
           Symbol                                              Parameter                          Conditions            Min  Typ  Max   Units
          VBATTHH                          VBAT undervoltage recovery threshold                                         3.5    4   4.5   V
          VBATTHL                         VBAT undervoltage detection threshold                                          2.5   3   3.5   V
           uUVBAT                               Undervoltage detection threshold                                          2        5.5   V
           VCCTHH                           VCC undervoltage recovery threshold                                         3.5    4   4.5   V
           VCCTHL                          VCC undervoltage detection threshold                                          2.5   3   3.5   V
           uUVCC                                Undervoltage detection threshold                                          2              V
           VIOTHH                            VIO undervoltage recovery threshold                                        1.25 1.6   2.0   V
            VIOTHL                          VIO undervoltage detection threshold                                        0.75 1.1   1.5   V
            uUVIO                               Undervoltage detection threshold                                        0.75             V
         tUV_DETECT                                   Undervoltage detection time                                       100  300  700    ms
    dUVBAT, dUVCC,                                      Undervoltage reaction time                                                1000   ms
            dUVIO
           tUV_REC                                     Undervoltage recovery time                                       0.7    2    5    ms
www.ams.com/eng/FlexRay/AS8222                                                          Revision 1.0                                    14 - 42


AS8222
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
6.7 Bus Error Detection
The following parameters are applicable to all the branch error detectors.
Table 9. Bus Error Detection
     Symbol                                              Parameter                      Conditions                 Min       Typ      Max      Units
                                          Absolute bus current for            NORMAL mode, Transmitter
        ITHL                                                                                                                   5       20       mA
                                              low current detection           enabled not production tested
                                          Absolute bus current for            NORMAL mode, Transmitter
        ITHH                                                                                                        20        40                mA
                                             high current detection           enabled not production tested
     VSHORT                     Differential voltage on BP and BM for         NORMAL mode, Transmitter             150       260      400       mV
                             detecting short circuit between bus lines                    enabled
   tBUS_ERROR                             Bus error detection time         Normal mode, Transmitter enabled                           500       ns
                                                                            (**) detection only required while
                                                                           actively transmitting a data frame,
                                                                           error indication to host latest when
                                                                                    transmission stops.
    tBUS_INHIB                      Bus short detection inhibit time       Normal mode, Transmitter enabled        0.5        2         4       µs
6.8 Over Temperature
Table 10. Over Temperature
      Symbol                                            Parameter                      Conditions                 Min       Typ      Max       Units
        OTTH                      Over temperature threshold high                                                 175       190       205       ºC
        OTTL                      Over temperature hysteresis low                                                 165       180       195       ºC
6.9 Power Supply Interface
Table 11. Power Supply Interface
      Symbol                                           Parameter                       Conditions                  Min       Typ      Max      Units
      ΔVOINH                  High level voltage drop on INH1, INH2            IINH=0.2mA; VBAT=5.5V                  0      0.2       0.8       V
        ⏐IIL⏐                                    Leakage current                 Sleep mode, VINH=0V                 -5       0         5       µA
6.10 Communication Controller Interface
Table 12. Communication Controller Interface
     Symbol                                                Parameter                     Conditions                Min       Typ        Max    Units
      VTxDIH              Threshold for detecting TxD as on logical high                                                  0.48 * VIO 0.7 * VIO    V
   uVDIG-IN-                 Threshold for detecting a digital input as on                                                             0.7 ×
      HIGH                                                 logical high                                                               uVDIG
      VTxDIL               Threshold for detecting TxD as on logical low                                        0.3 * VIO
                                                                                                                                                  V
   uVDIG-IN-                 Threshold for detecting a digital input as on                                        0.3 ×
       LOW                                                  logical low                                          uVDIG
      ITxDIH                             TxD high level input current                                              20         50        100      µA
      ITxDIL                              TxD low level input current                                               -5         0          5      µA
     VTxENIH             Threshold for detecting TxEN as on logical high                                                             0.7 * VIO    V
   uVDIG-IN-                 Threshold for detecting a digital input as on                                                             0.7 ×
      HIGH                                                 logical high                                                               uVDIG
www.ams.com/eng/FlexRay/AS8222                                                   Revision 1.0                                                   15 - 42


AS8222
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
Table 12. Communication Controller Interface
    Symbol                                                 Parameter               Conditions      Min       Typ      Max     Units
    VTxENIL               Threshold for detecting TxEN as on logical low                        0.3 * VIO                       V
   uVDIG-IN-                 Threshold for detecting a digital input as on                        0.3 ×
      LOW                                                   logical low                          uVDIG
     ITxENIH                            TxEN high level input current                               -5        0         5      µA
     ITxENIL                             TxEN low level input current                             -100       -50       -20     µA
    VRxDOH                              RxD high level output voltage         IRxD=-4mA, VIO=5V 0.8 * VIO 0.9 * VIO 1.0 * VIO   V
  uVDIG-OUT-                 Output voltage on a digital output, when in                          0.8 ×               1.0 ×
      HIGH                                           logical high state                          uVDIG               uVDIG
    VRxDOL                              RxD low level output voltage           IRxD=4mA, VIO=5V      0    0.1 * VIO 0.2 * VIO   V
  uVDIG-OUT-                 Output voltage on a digital output, when in                                              0.2 ×
      LOW                                             logical low state                                              uVDIG
www.ams.com/eng/FlexRay/AS8222                                             Revision 1.0                                       16 - 42


AS8222
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
6.11 Host Interface
Table 13. Host Interface
       Symbol                                         Parameter             Conditions        Min       Typ       Max     Units
       VSTBNIH                 Threshold for detecting STBN as on                                    0.48 * VIO 0.7 * VIO   V
                                                      logical high
                                                                                                                  0.7 ×
                               Threshold for detecting a digital input
 uVDIG-IN-HIGH                                 as on logical high                                                uVDIG
                               Threshold for detecting STBN as on                          0.3 * VIO 0.48 * VIO             V
       VSTBNIL
                                                       logical low
                               Threshold for detecting a digital input                       0.3 ×
 uVDIG-IN-LOW                                  as on logical low                            uVDIG
       ISTBNIH                      STBN high level input current                             20         50        100     µA
       ISTBNIL                      STBN low level input current                               -5         0          5     µA
   tSTBN_DEB_LP                 STBN de-bouncing time low-power                               0.1         1         40     µs
                                                           modes
  tSTBN_DEB_NLP                  STBN de-bouncing time non-low-                               0.1         1          2     µs
                                                    power modes
                                 Threshold for detecting EN as on                                    0.48 * VIO 0.7 * VIO   V
        VENIH
                                                      logical high
                               Threshold for detecting a digital input                                            0.7 ×
 uVDIG-IN-HIGH                                 as on logical high                                                uVDIG
                                 Threshold for detecting EN as on                          0.3 * VIO 0.48 * VIO             V
        VENIL
                                                       logical low
                               Threshold for detecting a digital input                       0.3 ×
 uVDIG-IN-LOW                                  as on logical low                            uVDIG
        IENIH                         EN high level input current                             20         50        100     µA
         IENIL                         EN low level input current                              -5         0          5     µA
     tEN_DEB_LP             EN de-bouncing time low-power modes                               0.1        1          40     µs
    tEN_DEB_NLP                EN de-bouncing time non-low-power                              0.1         1          2     µs
                                                           modes
      VERRNOH                     ERRN high level output voltage       IERRN =-4mA, VIO=5V 0.8 * VIO 0.9 * VIO 1.0 * VIO    V
   uVDIG-OUT-                   Output voltage on a digital output,                          0.8 ×                1.0 ×
        HIGH                            when in logical high state                          uVDIG                uVDIG
      VERRNOL                      ERRN low level output voltage        IERRN =4mA, VIO=5V      0    0.1 * VIO 0.2 * VIO    V
   uVDIG-OUT-                   Output voltage on a digital output,                                               0.2 ×
        LOW                             when in logical low state                                                uVDIG
www.ams.com/eng/FlexRay/AS8222                                         Revision 1.0                                       17 - 42


AS8222
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
6.12 Bus Guardian Interface
Table 14. Bus Guardian Interface
     Symbol                                                Parameter                Conditions       Min       Typ       Max     Units
      VBGEIH             Threshold for detecting BGE as on logical high                                     0.48 * VIO 0.7 * VIO   V
    uVDIG-IN-               Threshold for detecting a digital input as on                                                0.7 ×
      HIGH                                                logical high                                                  uVDIG
      VBGEIL              Threshold for detecting BGE as on logical low                           0.3 * VIO 0.48 * VIO             V
    uVDIG-IN-               Threshold for detecting a digital input as on                           0.3 ×
       LOW                                                 logical low                             uVDIG
      IBGEIH                            BGE high level input current                                 20         50        100     µA
      IBGEIL                             BGE low level input current                                  -5         0         5      µA
     VRxENOH                         RxEN high level output voltage            IRxEN=-4mA, VIO=5V 0.8 * VIO 0.9 * VIO 1.0 * VIO    V
  uVDIG-OUT-                 Output voltage on a digital output, when in                            0.8 ×                1.0 ×
      HIGH                                          logical high state                             uVDIG                uVDIG
     VRxENOL                          RxEN low level output voltage             IRxEN=4mA, VIO=5V      0    0.1 * VIO 0.2 * VIO    V
  uVDIG-OUT-                 Output voltage on a digital output, when in                                                 0.2 ×
       LOW                                           logical low state                                                  uVDIG
6.13 Read Out Interface
Table 15. Read Out Interface
       Symbol                                                 Parameter               Conditions        Min     Typ       Max    Units
   tRO_PROP_ERRN                Propagation delay falling edge EN to ERRN                                         2       4.5      µs
  tRO_EN_TIMEOUT                                     Error read out time out                             25      50       100      µs
www.ams.com/eng/FlexRay/AS8222                                               Revision 1.0                                         18 - 42


AS8222
Datasheet - D e t a i l e d D e s c r i p t i o n
7 Detailed Description
The AS8222 is a FlexRay Transceiver operating as an interface between the Communication Controller and the wired bus lines. The AS8222 is
designed to extend the application range for high speed and safety critical time triggered bus systems in an automotive environment. The drivers
are short circuit protected against the positive and negative supply voltage to increase the robustness and reliability of automotive systems. The
AS8222 operates at baudrates up to 10 Mbps.
7.1 Block Description
The AS8222 consists of 9 functional blocks Figure 1.
Table 16. Functional Blocks
                         Symbol                                                                 Parameter
                                                  Digital interface between the Transceiver and the host controller (HC)
       Host Controller Interface (HCI)            The host interface comprises the read-out handler, which delivers failure and status information via
                                                  the ERRN pin to the host controller.
 Communication Controller Interface (CCI) Digital interface between the Transceiver and the FlexRay communication controller (CC)
                                                  Digital interface between the Transceiver and the FlexRay bus guardian (BG) or monitoring
        Bus Guarding Interface (BGI)
                                                  circuitry.
           Power Supply Interface                 The power supply interface consists of the voltage monitor (VM) with two analog inhibit outputs
                           (PSI)                  switching external voltage supplies.
                                                  The digital signals from the functional blocks of the device are fed into the internal logic where the
                                                  forwarding of FlexRay messages from analog side to digital interfaces and vice versa is done. The
               Internal Logic (IL)
                                                  state machine is embedded in the Internal Logic and the handling of error, wake, and power-on
                                                  flags is executed herein.
                                                  The bus failure detector is directly connected to the bus pins, in order to detect several external
         Bus Failure Detector (BFD)               failure conditions which may occur on the bus.
        Temperature Protection (TP)               The temperature protection turns off the output driver when reaching the specified internal
                                                  temperature in order to protect the device.
                     Transmitter                  The transmitter provides the differential signaling according the FlexRay standard on the bus pins.
                                                  The Receiver captures FlexRay valid signals at the bus pins and provides the received data
                        Receiver
                                                  streams to the Internal Logic.
                                                  The wake-up detector recognizes valid wake-up frames on the bus, recognizes a wake signal on
         Wake-Up Detector (WUD)
                                                  the local WAKE pin and signals valid wake-up events to the Internal Logic.
7.2 Events
Transitions in order to change between the operation modes are possible only if events are detected. The device supports three types of events:
 Events on the host controller interface (STBN, EN),
 Detection of undervoltage or supply voltage recovery and
 Wake events.
Mode changes are only performed upon detected events.
7.3 Operating Modes
The AS8222 provides the following operating modes:
 NORMAL: Non-low-power mode
 RECEIVE-ONLY: Non-low-power mode
 STANDBY: Low-power mode
 GO-TO-SLEEP: Low-power mode
 SLEEP: Low-power mode
www.ams.com/eng/FlexRay/AS8222                                             Revision 1.0                                                            19 - 42


AS8222
Datasheet - D e t a i l e d D e s c r i p t i o n
7.3.1      NORMAL Mode
In this mode the transceiver is able to send and receive data signals on the bus. TxEN and BGE control the state of the transmitter. INH1 and
INH2 outputs are set high. RxD shows the bus data and RxEN the bus state. The error read out mechanism is enabled. In this mode the
transmitter state can be selected as shown in Table 17. In case the over-temperature flag is set the transmitter is disabled. The bus wires are
terminated to VCC/2 via receiver input resistances.
Table 17. Transmitter States
        BGE                     TxEN              TxD           Transmitter State                                Bus state
          H                          L             H                  Enabled          Data_1 (BP is driven high, BM is driven low)
          H                          L             L                  Enabled          Data_0 (BP is driven low, BM is driven high)
          X                         H              X                 Disabled          Idle (BP and BM are not driven)
          L                         X              X                 Disabled          Idle (BP and BM are not driven)
  If the differential bus voltage is higher than VBUSActivehigh or lower than VBUSActivelow for a time longer than tBUSActiveDetection, then activity is
      detected on the bus (Bus = active), RxEN is switched to logical “low” and RxD is released.
  If after the activity detection, the differential bus voltage is higher than VData1, RxD is high.
  If after the activity detection, the differential bus voltage is lower than VData0, RxD is low.
  If the absolute differential bus voltage is lower than VBUSActivehigh and higher than VBUSActivelow for a time longer than tBUSIdleDetection, then
      idle is detected on the bus (Bus = idle), RxEN and RxD are switched to logical “high”.
7.3.2      RECIEVE-ONLY Mode
In this mode the transceiver has the same behavior as in NORMAL mode but the transmitter is disabled.
7.3.3      STANDBY Mode
In this mode the transceiver is not able to send and receive data signals to and from the bus, but the wake up detector is active. The power
consumption is significantly reduced with respect to the non-low-power operation modes. RxD, RxEN signals the negation of the wake-up flag.
INH1 is set to high. If wake-up flag is set then INH2 is high, otherwise it is floating. The error read out mechanism is not enabled. The bus wires
are terminated to GND (bus state: Idle_LP).
7.3.4      GO-TO-SLEEP Mode
In this mode the transceiver has the same behavior as in STANDBY mode but if this mode is selected for a time longer than tSLEEP and the wake
flag is cleared the device enters into the SLEEP mode.
7.3.5      SLEEP Mode
In this mode the transceiver has the same behavior as in standby mode but INH1 and INH2 are floating.
7.4 Non-Operating Modes
The AS8222 provides the following non-operating mode:
  POWER-OFF
7.4.1      POWER-OFF Mode
In this mode the transceiver is not able to operate. RxD, RxEN are set to high and ERRN is set to low. INH1 and INH2 are floating. The bus wires
are not connected to GND (bus state: Idle_HZ).
7.5 Undervoltage Events
The device monitors the following three voltage supplies:
  VBAT:Battery supply voltage
  VIO: Supply voltage for I/O digital level adaptation
  VCC: Supply voltage (+5V)
www.ams.com/eng/FlexRay/AS8222                                            Revision 1.0                                                            20 - 42


AS8222
Datasheet - D e t a i l e d D e s c r i p t i o n
7.5.1     Undervoltage / Voltage Recovery VBAT
If VBAT voltage falls below VCCTHL for a time longer than tUV_DETECT then an undervoltage VBAT event is detected. Undervoltage recovery is
detected if VBAT exceeds the voltage threshold VBATTHH for a time longer than tUV_REC.
7.5.2     Undervoltage / Voltage Recovery VIO
If VIO voltage falls below VIOTHL for a time longer than tUV_DETECT then an undervoltage VIO event is detected. Undervoltage recovery is
detected if VIO exceeds the voltage threshold VIOTHH for a time longer than tUV_REC.
7.5.3     Undervoltage / Voltage Recovery VCC
If VCC voltage falls below VCCTHL for a time longer than tUV_DETECT then an undervoltage VCC event is detected. Undervoltage recovery is
detected if VCC exceeds the voltage threshold VCCTHH for a time longer than tUV_REC.
7.6 Power On/Off Events
  Starting from POWER-OFF                       mode a power-on event occurs in case VBAT undervoltage recovery is detected.
  Starting from every operation mode a POWER-OFF event occurs in case VBAT and VCC                         undervoltage flags are set.
7.7 Wake-Up Events
A wake-up event is only detected in low-power modes.
7.7.1     Remote Wake-Up Event
A remote wake-up event, only possible in low-power modes, is detected if at least two consecutive wake-up symbols via the FlexRay bus within
tBWUDetect are received. The wake-up symbol is defined as Data0 longer than tBWU0 followed by idle or Data1 longer than tBWUIdle shown in
Figure 3.
Figure 3. Signal for Wake-up Pattern Recognition
                                       Vdiff
                                                           Wake symbol                                 Wake symbol
                           VBWU0
                                                     tBWU0               tBWUidle                tBWU0              tBWUidle
                                                                                   tBWUDetect
7.7.2     Remote Wake-up with Frames
A valid wake-up event can be generated out of the standard FlexRay communication in 5 Mbps and 10 Mbps network configurations, while the
data bits of the FlexRay Frame are set to “low” for a time longer than tBWU0 and set to “high” for time longer than tBWUIdle represent one wake
symbol. A valid wake-up pattern consists of two wake symbols as shown in Figure 3.
In a 10Mbps speed configuration of the network, the payload of the frame is configured as follows:
       st
  1 wake symbol :                          0x00 0x00 0x00 0x00 0x00 0xFF 0xFF 0xFF 0xFF 0xFF
       nd
  2 wake symbol :                          0x00 0x00 0x00 0x00 0x00 0xFF 0xFF 0xFF 0xFF 0xFF
Repetitions of wake symbols might be required if network components are shortening valid Wake symbols (e.g. the time until the device is able
to re-send wake symbols after wake-up).
www.ams.com/eng/FlexRay/AS8222                                                      Revision 1.0                                            21 - 42


AS8222
Datasheet - D e t a i l e d D e s c r i p t i o n
7.7.3     Local Wake-Up Event
In all low-power modes, if the voltage on the WAKE pin falls below VLWUTH for longer than tLWUFilter, a local wake-up event is detected. At the
same time the biasing of the pin is switched to pull-down. As well a local wake up event is detected if the voltage on the WAKE pin rises above
VLWUTH for longer than tLWUFilter, then biasing of the pin is switched to pull-up. The pull-up and -down mechanism is activated in low- and non-
low-power modes.
7.8 Over-temperature Events
In NORMAL mode if the temperature exceeds OTTH, the transmitter is deactivated. During this condition the device will remain in NORMAL
mode.
The transmitter is activated again, if the temperature falls below OTTL.
Figure 4. Wake Input Pin Behaviour
                                                  Pull-up                 Pull-down                             Pull-up
                                WAKE
                                                          tLWFilter                               tLWFilter
                                    VBAT
                                    RxD / RxEN
                                      VIO
                                          INH
                                     VBAT
www.ams.com/eng/FlexRay/AS8222                                          Revision 1.0                                                       22 - 42


AS8222
Datasheet - D e t a i l e d D e s c r i p t i o n
7.9 System Description
Figure 5. State Machine Diagram
                                                                                                                                                                                                         EN=0 WHILE (STBN=1)
                                                                                                                            NORMAL                                                                                                                                                 RECEIVE-ONLY
                                                                                                                       Input:        Output:
                                                                                                                                                                                                                                                                                Input:                          Output:
                                                                                                                       EN = 1        INH1 = 1
                                                                                                                                                                                                                                                                                EN = 0                          INH1 = 1
                                                                                                                       STBN = 1      INH2 = 1
                                                                                                                                                                                                                                                                                STBN = 1                        INH2 = 1
                                                                                                                                                                                                         EN=1 WHILE (STBN=1)
                                                                                                                                                                                        EN=0 AND STBN=0
                                                                                                                                                                                                                                             D
                                                                                                                                                                                              OR                                          AN
                                                                                                                                                                                                                                                                                    STBN=1 WHILE (EN=0)
                                                                                                                                                                                                                                       =0                                0
                                                                                                                                                                                             UV_VCC                                  EN BN=1                      BN
                                                                                                                                                                                                                                                                     =
                                                                                                                                                                                                                                       ST                    ST
                                                                                                                                                                                                                                                                                                                       STBN=0 WHILE (EN=0)
                                                                                                                                                                                                                                                        ND
                                                                                                                                                                                                                                                                                            OR
                                                                                                                                                                          WA
                                                                                                                                                                                 KE          EN                                                      1A
                                                                                                 STBN=1 WHILE (EN=1)
                                                                                                                                                                                               =1                                                =
                                                                                                                                                                                      WH             AN                                        EN
                                                                                                                                                                                                                                                                                                                               OR
                                                                                                                                                                                        ILE             D
                                                                                                                                                                                                                                                                              WAKE WHILE (EN=0 AND STBN=1)
                                                                                                                                                                   VR                        (       O STB
                                                                                                                                                                        EC
                                                                                                                                                                           _            (Re EN=1 R            N=
                                                                                                                                                                               VC           se       AN          1
                                                                                                                                                                                               t_
                                                                                                                                                                                                                                                                                                                          UV_VCC WHILE
                                                                                                                                                                                  C
                                                                                                                                                                                    WH            U    D
                                                                                                                                             STBN=0 WHILE (EN=1)
                                                                                                                                                                                                                                                                                            OR
                                                                                                                                                                                      ILE OR V_VC STBN
                                                                                                                                                                                          (E N          C)     =1
                                                                                                                                                                                               =1                 )T
                                                                                                                                                                                                                    HE
                                                                                                                                                                                                                                                                             VREC_VCC WHILE (EN=0 AND STBN=1)
                                                                                                                                                                                                   AN                  N
                                                                                                                                                                                                      DS
                                                                  WAKE WHILE (EN=1 AND STBN=0)
                                                                                                                                                                                                         TB
                                                                                                                                                                                                            N=
                                                                                                                                                                                                              1)
                  STBN = 1 WHILE (EN=1)
                            OR
                                                                                                                          GO-TO-SLEEP                                                                                                                                                      STANDBY                                            WAKE WHILE (EN=0 AND STBN=0)
             WAKE WHILE (EN=1 AND STBN=1)                                                                                                                                                                EN=0 WHILE (STBN=0)                                                                                                                                OR
                                                                                                                                                                                                                 OR
                            OR                                                                                          Input:      Output:                                                                                                                                     Input:                     Output:                            UV_VCC WHILE (EN=0 AND STBN=0)
                                                                                                                                                                                                               UV_VCC                                                           EN = 0                     INH1 = 1                                         OR
                                                                                                                        EN = 1      INH1 = 1
            VREC_VBAT WHILE (EN=1 AND STBN=1)                                                                           STBN = 0    INH2 = float                                                                                                                                STBN = 0                   INH2 = float                      VREC_VCC WHILE (EN=0 AND STBN=0)
                                                                                                                                                                                                       EN=1 WHILE (STBN=0)                                                                                                                                  OR
                            OR                                                                                                                                                                                 OR                                                                                                                                     WHILE (UV_VCC)
            VREC_VIO WHILE (EN=1 AND STBN=1)
                                                                                                                                                                                                 WAKE WHILE (EN=1 AND STBN=0)
                                                                                                                                                                                                               OR
                                                                                                                                                                                                VREC_VCC WHILE (EN=1 AND STBN=0)
                                                          WAKE WHILE (EN=1 AND STBN=0)
                                                                                                                                                                                                                                                                                               VREC_VBAT                   UV_VBAT WHILE
                                                                        OR
                                                                                                                                                                                                                                                                                                                              (UV_VCC)
                                                         VREC_VBAT WHILE (EN=1 AND STBN=0)
                                                                                                                                                                                                           C)
                                                                                                                                           Timer = tSLEEP                                                                                  )
                                                                                                                                                                                                        V_VC                            =0
                                                                                                                                                                                                                                     BN           )
                                                                                                                                                                                                                                 ST            =0
                                                                                                                                                                                                   (U
                                                                        OR
                                                                                                                                                                                                                               D             BN
                                                                                                                                                                                                HI
                                                                                                                                                                                                                           AN
                                                                                                                                                                                                   LE
                                                                                                                                                                                            W                            0               ST            0)
                                                                                                                                                                                      UV                            E N=            AND         B   N=
                                                                                                                                                                                                                   ( R 0
                                                         VREC_VIO WHILE (EN=1 AND STBN=0)
                                                                                                                                                                                         _V
                                                                                                                                                                                                              ILE O EN=                       ST
                                                                                                                                                                                                                                          ND
                                                                                                                                                                                           IO
                                                                                                                                                                                                           WH            E (             A             )
                                                                                                                                                                                                      KE               IL OR N=0                     CC
                                                                                                                                                                                                                   WH                            _V
                                                                                                                                                                                                    WA                           (E           UV
                                                                                                                                                                                                            _VB
                                                                                                                                                                                                               AT
                                                                                                                                                                                                                           H ILE OR ILE (
                                                                                                                                                                                                          EC             W              H                                                                                                                      STBN=1 WHILE (EN=0)
                                                                                                                                                                                                       VR
                                                                                                                                                                                                                  _V
                                                                                                                                                                                                                     IO               W                                                            POWER-OFF                                                            OR
                                                                                                                                                                                                                               _V
                                                                                                                                                                                                                                  IO
                                                                                                                                                                                                                EC
                                                                                                                             SLEEP                                                                           VR           VR
                                                                                                                                                                                                                             EC                                                                                                                          WAKE WHILE (EN=0 AND STBN=1)
                                                                                                                                                                                                                                                                                                                                                                        OR
                                                                                                                                                                                                                                                                                                                                                        VREC_VBAT WHILE (EN=0 AND STBN=1)
                                                                                                                       Input:      Output:                                                                                                                                                                                                                              OR
                                                                                                                       EN = x      INH1 = float                                                                UV_VBAT WHILE (UV_VCC)
                                                                                                                                                                                                                                                                                                                                                        VREC_VIO WHILE (EN=0 AND STBN=1)
                                                                                                                       STBN = 0    INH2 = float                                                                         OR
                                                                                                                                                                                                               UV_Vcc WHILE (UV_VBAT)
                                                  UV_VBAT THEN (RESET_WAKE)
                                                             OR
                                                  UV_VIO THEN (RESET_WAKE)
                                                                                                                                     (EN=0 OR EN=1)
                                                                                                                                           OR
                                                                                                                       (STBN=1 OR STBN=0) WHILE (UV_V
                                                                                                                                                     BAT OR UV_VIO)
                                                                                                                                           OR
                               From any State (except                                                                         UV_VBAT OR UV_VIO OR UV_VCC
                                    Power Off)                                                                                             OR
                                                                                                                                        VREC_VCC
   UV_VBAT:Undervoltage event and/or flag for VBAT supply voltage                                                                                                                                                                     VREC_VIO:Voltage recovery event and/or flag for VIO supply voltage
   UV_VIO:Undervoltage event and/or flag for VIO supply voltage                                                                                                                                                                       VREC_VCC:Voltage recovery event and/or flag for VCC supply
   UV_VCC:Undervoltage event and/or flag for VCC supply voltage                                                                                                                                                                       voltage
   VREC_VBAT:Voltage recovery event and/or flag for VBAT supply                                                                                                                                                                       Reset_Wake:Wake flag is set to low
   voltage                                                                                                                                                                                                                            Reset_UV_VCC:Undervoltage flag VCC is set to low
   WAKE:Wake event and/or flag
Notes:
         1. This state diagram does not include all transitions, which are shown in Table 19.
         2. Prefix of “WHILE” is an event and suffix in brackets checks the flags or in case of EN and STBN the input condition.
           - For example: VREC_VBAT WHILE (EN=0 AND STBN=0)
           - After the event VBAT supply voltage recovery is detected, the transition is performed if EN and STBN are “low”.
www.ams.com/eng/FlexRay/AS8222                                                                                                                                                                                           Revision 1.0                                                                                                                                                       23 - 42


AS8222
Datasheet - D e t a i l e d D e s c r i p t i o n
7.10 Fail Silent Behaviour
7.10.1 RxEN / BGE Timeout
In case no edges on RxEN and BGE are detected within tTxEN_timeout, the transmitter will stop transmitting the signals on RxD to the bus pins.
Transmission is only possible in case the BGE (Bus Guardian Enable) pin is set to high and if TxEN (Transmit Enable Not) is set to low (see
Table 17).
7.10.2 State Transitions due to Undervoltage Detection
 In case of VBAT or VIO undervoltage is                detected, SLEEP mode will be entered regardless the status of EN and STBN.
 In case VCC undervoltage is detected, STANDBY mode will be entered regardless the status of EN and STBN.
 VBAT     and VIO undervoltage detection have higher priority than VCC undervoltage detection.
 In case undervoltage at VBAT                   and VCC is detected, POWER-OFF mode is entered (bus state: Idle_HZ).
7.10.3 State Transitions due to Voltage Recovery Detection
 If the voltage recovers the device will enter the mode selected by the EN and STBN pins, in case no undervoltage is present at the other
     supply pins.
 Starting from the POWER-OFF, the device enters the state selected by the host input pins (EN, STBN) only if VBAT or VCC recovers                  (VBAT
     ≥ VBATTHH or VCC ≥ VCCTHH) while VIO is available (undervoltage flag of VIO flag not set). If the VIO undervoltage flag is set, the
     STANDBY mode will be entered. In both cases the Power-On flag is set.
 If VBAT ≤ VBATTHL and VCC ≤ VCCTHL                    the device will be in POWER-OFF state, thus the bus wires are not terminated (bus state: Idle_HZ).
7.11 Mode Transitions
 Starting from every operation mode the device enters POWER-OFF in case a power-off event occurs regardless the VIO undervoltage flag,
     the wake-up flag and the host input pins (EN, STBN).
 Starting from the POWER-OFF the device enters STANDBY only in case a power-on event occurs.
 Starting from every operation mode the device enters SLEEP in case VBAT or VIO undervoltage flag is set regardless the VCC undervoltage
     flag, the wake-up flag and the host input pins (EN, STBN).
 Starting from every operation mode except SLEEP the device enters STANDBY in case                    VCC undervoltage flag is set and VBAT and VIO
     undervoltage flags are not set, regardless the wake-up flag indication and the host input pins state.
 Starting from a low-power mode the device enters the operation mode indicated by the host input pins if a wake-up event occurs.
 In case all the undervoltage flags are reset the operation mode is selected by the wake-up flag and the host pins according to             Table 18
www.ams.com/eng/FlexRay/AS8222                                                   Revision 1.0                                                        24 - 42


AS8222
Datasheet - D e t a i l e d D e s c r i p t i o n
Table 18. Pin Signalling in Operating Modes
               Inputs                                                                                   Outputs
                                                    Operation Mode
      STBN                    EN                                                  RxD                  RxEN               INH1           INH2
                                                                                    L                    L
                                                                             Bus = Data_0           Bus = Active
        H                      H                       NORMAL                                                               H              H
                                                                                    H                    H
                                                                          Bus = Idle or Data_1       Bus = Idle
                                                                                    L                    L
                                                                             Bus = Data_0           Bus = Active
        H                      L                    RECEIVE-ONLY                                                            H              H
                                                                                    H                    H
                                                                          Bus = Idle or Data_1       Bus = Idle
        L                      H                                  1       NOT [Wake-up flag]      NOT [Wake-up flag]        H                   2
                                                    GO-TO-SLEEP                                                                        Floating
        L                      L                      STANDBY             NOT [Wake-up flag]      NOT [Wake-up flag]        H                   2
                                                                                                                                       Floating
        L                      X                              3           NOT [Wake-up flag]      NOT [Wake-up flag]     Floating      Floating
                                                       SLEEP
1. If GO-TO-SLEEP is selected for more than tSLEEP then the device will enter SLEEP only if the wake-up flag is not set otherwise it will
   remain in GO-TO-SLEEP.
2. If wake-up flag is set INH2=H otherwise INH2=floating.
3. Starting from SLEEP, if the wake-up flag is set, the device enters STANDBY regardless of the host pins state and undervoltage flags.
   Starting from SLEEP, if the wake up flag is not set, the only operating mode that can be entered through host pins are the non-low-power
   modes.
Note: “H” = Digital level high; “L” = Digital level low; “X” = Don’t care; “Floating” = the analog output is not driven.
Table 19. Mode Transitions
                                               Supply Undervoltage Flag / Event                          Host Event
       Initial Mode                                                                     Wake Flag                                 Next Mode
                                               VIO           VBAT           VCC                      STBN             EN
                                                  L           L              L              X          H             H→L        RECEIVE-ONLY
                                                  L           L              L              X        H→L             H→L
                                                                                                                                  STANDBY
                                                  L           L            L→H              X          X               X
         NORMAL
                                                  L           L              L              X        H→L               H         GO-TO-SLEEP
                                             L→ H             L              X              X          X               X
                                                                                                                                    SLEEP
                                                  X         L→ H             L              X          X               X
                                                  L           L              L              X          H            L→ H           NORMAL
                                                  L           L              L              X        H→ L              L
                                                                                                                                  STANDBY
   RECEICVE-ONLY                                  L           L            L→ H             X          X               X
                                             L→ H             L              X              X          X               X
                                                                                                                                    SLEEP
                                                  X         L→ H             L              X          X               X
www.ams.com/eng/FlexRay/AS8222                                                    Revision 1.0                                               25 - 42


AS8222
Datasheet - D e t a i l e d D e s c r i p t i o n
Table 19. Mode Transitions
                                               Supply Undervoltage Flag / Event                       Host Event
       Initial Mode                                                                    Wake Flag                       Next Mode
                                               VIO          VBAT            VCC                  STBN            EN
                                                  L           L            H→L               X     H              H
                                                  L           L               L              X   L→ H          L→ H     NORMAL
                                                  L           L         (b) H → L        (a) → H   H              H
                                                  L           L               L              X   L→H              L
                                                  L           L            H→L               X     H              L  RECEIVE-ONLY
        STANDBY                                   L           L         (b) H → L        (a) → H   H              L
                                                  L           L               L              X     L          L→H
                                                  L           L            H→L               X     L             H   GO-TO-SLEEP
                                                  L           L            H→L           (a) → H   L              H
                                              LH             L               X              X     X              X
                                                                                                                         SLEEP
                                                  X        L→ H               L              X     X              X
                                                  L           L               L              X    LH             H      NORMAL
                                                  L           L            L→ H              X     X              X
                                                                                                                       STANDBY
                                                  L           L               L              X     L           H→ L
      GO-TO-SLEEP
                                                  L           L               L              L      1              1
                                                                                                  L              H
                                            L→H               L               X              X     X              X      SLEEP
                                                  X        L→H                L              X     X              X
                                                  L           L               L              L    LH             H
                                            H→L               L               L              L     H             H
                                                                                                                        NORMAL
                                                  L        H→L                L              L     H             H
                                                  L           L            H→L               L     H             H
          SLEEP                                   L           L               L              L   L→H              L
                                            H→L               L               L              L     H              L
                                                                                                                     RECEIVE-ONLY
                                                  L        H→L                L              L     H              L
                                                  L           L            H→L               L     H              L
                                           (b) → L        (b) → L         (b) → L        (a) → H   X              X    STANDBY
      POWER-OFF                                   X        H→ L               X              X     X              X    STANDBY
                                                  X           H            L→ H              X     X              X
            Any                                                                                                       POWER-OFF
                                                  X        L→ H               H              X     X              X
1. If GO-TO-SLEEP is selected for more than tSLEEP
Notes:
       1. (a) indicates the event that causes the transition.
       2. (b) indicates the consequence of the event (a).
       3. “H” = Digital level high; “L” = Digital level low; “X” = Don’t care.
www.ams.com/eng/FlexRay/AS8222                                                    Revision 1.0                                  26 - 42


AS8222
Datasheet - D e t a i l e d D e s c r i p t i o n
7.11.1 Error Pin Signalling
In Table 20 the signaling at the Error Not (ERRN) pin is shown.
Table 20. Error Not (ERRN) Signalling
 Supply undervoltage Flag at Remote Wake                           Local Wake             Host Command
                                                                                                                               ERRN
         VBAT, VIO, VCC                                Flag            Flag          STBN                EN
                   L                                      X               X             H                 H               NOT [Error flag]
                   L                                      H               X             H                 L                       L
                                                                                                          ↑
                   L                                      H               X             H                             L → NOT [Error flag]
                                                                                                  (positive edge)
                   L                                      L               X             H                 L                       H
                                                                                                          ↑
                   L                                      L               X             H                             H → NOT [Error flag]
                                                                                                  (positive edge)
                   L                                      L               L             L                 X                       H
                                                                          ↑
                   L                                      L                             L                 X                    H→L
                                                                  (positive edge)
                                                         ↑
                   L                                                      L             L                 X                    H→L
                                                  (positive edge)
                                                                          ↑
                   L                                      H                             L                 X                       L
                                                                  (positive edge)
                                                         ↑
                   L                                                      H             L                 X                       L
                                                  (positive edge)
                   H                                      X               X             X                 X                       L
7.12 Loss of Ground
In case the ground of the device is disconnected and the host pins are open the bus lines are switched to Idle_HZ.
7.13 ERROR Flags Description
All error flags are reset after error readout is completed (see Section 7.15) or in POWER-OFF mode.
7.13.1 Undervoltage Detected VBAT Flag
This flag is set if an undervoltage event at VBAT is detected. This flag signals if undervoltage was detected but will not initiate a mode change.
7.13.2 Undervoltage Detected VIO Flag
This flag is set if an undervoltage event at VIO is detected. This flag signals if undervoltage was detected but will not initiate a mode change.
7.13.3 Undervoltage Detected VCC Flag
This flag is set if an undervoltage event at VCC is detected. This flag signals if undervoltage was detected but will not initiate a mode change.
7.13.4 Bus Error
The bus error flag is set, after a time tBUS_INHIB while the driver is enabled and activated until the end of the frame if
 2 consecutive rising edges at the TxD pin without any rising edge at the RxD pin are detected, or
 2 consecutive falling edges at the TxD pin without any falling edge at the RxD pin are detected.
The flag is only set in NORMAL mode.
7.13.5 Bus Open Line
BP open line can only be set in NORMAL mode if the driver is enabled. The flag is set if the absolute current through BP or BM is lower than ITHL
for a time longer than tBUS_ERROR. The flag is meaningful only if no short circuit flag is set.
7.13.6 BP Short Circuit to VCC
BP short circuit to VCC can only be set in NORMAL mode if the driver is enabled. The flag is set if the absolute current flowing through BP is
higher than ITHH during transmission of Data0 for a time longer than tBUS_ERROR.
www.ams.com/eng/FlexRay/AS8222                                                    Revision 1.0                                                27 - 42


AS8222
Datasheet - D e t a i l e d D e s c r i p t i o n
7.13.7 BP Short Circuit to GND
BP short circuit to GND can only be set in NORMAL mode if the driver is enabled. The flag is set if the absolute current flowing through BP is
higher than ITHH during transmission of Data1 for a time longer than tBUS_ERROR.
7.13.8 BM Short Circuit to VCC
BM short circuit to VCC can only be set in NORMAL mode if the driver is enabled. The flag is set if the absolute current flowing through BM is
higher than ITHH during transmission of Data1 for a time longer than tBUS_ERROR.
7.13.9 BM Short Circuit to GND
BM short circuit to GND can only be set in NORMAL mode if the driver is enabled. The flag is set if the absolute current flowing through BM is
higher than ITHH during transmission of Data0 for a time longer than tBUS_ERROR.
7.13.10 Short Circuit between BP and BM
The flag is set if, after a time tBUS_INHIB while the driver is enabled and active until the end of the current FlexRay frame and the absolute
differential bus voltage is lower than VSHORT.
7.13.11 Over-temperature
This flag can only be set and reset in the non-low-power modes. The flag is set if the junction temperature exceeds OTTH and is reset if the
junction temperature falls below OTTL.
7.13.12 TxEN_BGE Timeout
This flag can only be set in NORMAL mode if the driver is enabled (TxEN is low and BGE is high) for a time longer than tTxEN_max. It is reset after
every status change at TxEN or BGE or if the device exits NORMAL mode. In case the flag is set the driver is disabled.
7.13.13 Error Flag
This flag is set if at least one error flag (as listed below) is set, except undervoltage VBAT, VIO and VCC (refer to sections 7.13.1, 7.13.2 &
7.13.3). The error flag is reset if none of the flags are set.
Table 21. Functional Blocks
      Section No.                                 Flag Name
        7.13.4                 Bus Error
        7.13.5                 Bus Open Line
        7.13.6                 BP Short Circuit to VCC
        7.13.7                 BP Short Circuit to GND
        7.13.8                 BM Short Circuit to VCC
        7.13.9                 BM Short Circuit to GND
        7.13.10                Short Circuit between BP and BM
        7.13.11                Over-temperature
        7.13.12                TxEN_BGE Timeout
Note: The error flag is signalled on ERRN pin according to Table 20.
7.14 STATUS Flags Description
7.14.1 Local and Remote Wake Flag
Local and remote flags and function are described in Section 7.7 Wake-Up Events.
7.14.2 Power on Flag
The power on flag is set leaving the POWER-OFF state and it is reset entering a low-power mode after a non-low-power mode.
7.14.3 BGE Status
The BGE status flag is set if BGE is high and is reset if BGE is low. The state of the BGE is latched at the beginning of the readout cycle.
www.ams.com/eng/FlexRay/AS8222                                             Revision 1.0                                                        28 - 42


AS8222
Datasheet - D e t a i l e d D e s c r i p t i o n
7.15 Error and Status Flags Read Out
The error and status flag readout mechanism is a serial transmission which is controlled with the EN pin and the information is submitted on the
ERRN pin. The mechanism is only activated in NORMAL and RECEIVE-ONLY mode. In all other operation modes the error and status
information cannot be accessed.
Figure 6. Timing of the Readout Mechanism
            EN
   70% VIO
   30% VIO
           ERRN
   70% VIO
                           ERRN                        ERROR FLAG                     Bit 0        Bit 1 Bit 2          Bit 3          ERRN
   30% VIO
                                                                        tRO_PROP_ERRN
                                                 t < tRO_EN_TIMEOUT                                            t > tRO_EN__TIMEOUT
The error and status flags are read out by applying a clock signal to pin EN. A falling edge on pin EN starts the readout loading the content of the
error/status flag into the shift register and signaling the stream of flags on the ERRN pin. On the second falling edge the first flag (Bit 0) will be
shifted out. The ERRN data is valid after tRO_PROP_ERRN. If EN pin keeps on toggling after last flag (Bit 15) the next flag shifted out is Bit 0. The
complete list of bits is shown in Table 22. If no transition is detected on pin EN for longer than tRO_EN_TIMEOUT the device enters the operation
mode indicated by the host pins.
Table 22. Bit Order for the Readout Sequence
            BIT                                                       Flag Description
            Bit 0                                               Undervoltage VBAT detected
            Bit 1                                                Undervoltage VIO detected
            Bit 2                                               Undervoltage VCC detected
            Bit 3                                                          Bus error
            Bit 4                                                        BGE status
            Bit 5                                                   BP short circuit to VCC
            Bit 6                                                   BP short circuit to GND
            Bit 7                                                       Bus open line
            Bit 8                                                   BM short circuit to VCC
            Bit 9                                                   BM short circuit to GND
           Bit 10                                           Short circuit between BP and BM
           Bit 11                                                     Over temperature
           Bit 12                                                    TxEN_BGE timeout
           Bit 13                                                      Local wake flag
           Bit 14                                                     Remote wake flag
           Bit 15                                                       Power on flag
www.ams.com/eng/FlexRay/AS8222                                                              Revision 1.0                                        29 - 42


AS8222
Datasheet - B u s D r i v e r
8 Bus Driver
8.1 AS8222 Bus States
   Activity:Differential bus signals as shown in chapter 10.3 Transmitter and 10.4 Receiver applies.
   Idle:The bus wires are terminated to VCC / 2 through the receiver input resistances.
   Idle_LP:The bus wires are terminated to GND through the receiver input resistances.
   Idle_HZ:The bus wires are not terminated. The input resistances are about 1 M Ω.
8.2 Transceiver Timing
Figure 7. Bus Driver Timing Diagram
                              tTxD_BUS01
                                               tTxD_BUS10                        tBGE_BUS_Idle_Active                                      tTxEN_BUS_Idle_Active
                  0.5 * VIO                                   tBGE_BUS_Active_Idle                                      tTxEN_BUS_Active_Idle
          TxD
                  0.5 * VIO
          BGE
                  0.5 * VIO
           TxEN
                  300 mV                                                                                                                                                          80 %
                                                                                                     tBUS_Idle_Active
           VBUS                                                    30 mV                                                      30 mV
                                                           -300 mV                              -300 mV                                                     -300 mV               20 %
                                                                                                                      tBUS_Active_Idle
                  0.5 * VIO
          RxD
                  0.5 * VIO
           RxEN
                                       tBUS_RxD01       tBUS_RxD10       tBUSIdleReaction tBUSActivityReaction                                                      tBUS01 tBUS10
www.ams.com/eng/FlexRay/AS8222                                                                          Revision 1.0                                                                   30 - 42


AS8222
Datasheet - B u s D r i v e r
8.3 Transmitter
In NORMAL mode, while BGE is high, the transmitter drives full voltage levels on the bus after tTXEN_BUS_Idle_Active from TxEN falling edge and
drives idle after tTXEN_BUS_Active_Idle from TxEN rising edge.
The Transmitter is not permanently enabled. If after the time tTxEN_timeout no edge is detected at TxEN, the transmission will be stopped to avoid
unwanted collisions on the FlexRay bus.
Figure 8. Transmitter Characteristics (TxEN → BUS, while BGE is high)
                                  VTxEN
                          70% * VIO
                          30% * VIO
                                                                                        < tTxEN_timeout < tTxEN_timeout
                                   VBUS
                                                         tTxEN_BUS_Active_Idle tTxEN_BUS_Idle_Active        tBUS_Active_Idle tBUS_Idle_Active
                        VBUS_DIFF_D1
                            300 mV
                                        + VBUS_DIFF_Idle
                                        - VBUS_DIFF_Idle
                          - 300 mV
                        VBUS_DIFF_D0
In NORMAL mode, while TxEN is high, the transmitter drives full voltage levels on the bus after tTXEN_BUS_Idle_Active from BGE rising edge and
drives idle after tTXEN_BUS_Active_Idle from BGE falling edge.
www.ams.com/eng/FlexRay/AS8222                                                           Revision 1.0                                         31 - 42


AS8222
Datasheet - B u s D r i v e r
Figure 9. Transmitter Characteristics (BGE → BUS, while TxEN is low)
                                   VBGE
                          50% * VIO
                                   VBUS
                                                            tBGE_BUS_Active_Idle tBGE_BUS_Idle_Active                     tBUS_Active_Idle      tBUS_Idle_Active
                        VBUS_DIFF_D1
                            300 mV
                                        + VBUS_DIFF_Idle
                                        - VBUS_DIFF_Idle
                          - 300 mV
                        VBUS_DIFF_D0
The transmitter generates the FlexRay differential bus voltage according to input signal on TxD as shown in Figure 10.
Figure 10. Transmitter Characteristics TxD → BUS
                                     VTxD
                            70% * VIO
                            30% * VIO
                                                                                         Data1: x * tBIT              Data0: x * tBIT
                                     VBUS
                                         tTxD_BUS01            tTxD_BUS10                  tBUS01                      tBUS01
                          VBUS_DIFF_D1
                    80% * VBUS_DIFF
                                           + VBUS_DIFF_Idle
                                           - VBUS_DIFF_Idle
                    20% * VBUS_DIFF
                          VBUS_DIFF_D0
                                                                                                      Data1: x * tBIT           Data0: x * tBIT
In NORMAL and RECEIVE-ONLY mode the transmitter drives Idle on the bus in case no data are transmitted. In STANDBY, GO-TO-SLEEP and
SLEEP mode the transmitter drives Idle_LP (idle low-power) on the bus pins. In POWER_OFF mode the bus pins shows Idle_HZ (idle high
impedance).
www.ams.com/eng/FlexRay/AS8222                                                            Revision 1.0                                                           32 - 42


AS8222
Datasheet - B u s D r i v e r
8.4 Receiver
The receiver generates from the FlexRay differential bus voltage a digital signal on the RxD and RxEN pins. RxD shows the data (Data0 and
Data1) and RxEN shows the bus idle and activity status received on the bus pins. The receiver is only active in NORMAL and RECEIVE_ONLY
mode.
Figure 11. Timing Characteristics (BUS → RxD and RxEN)
                     VBUS
      VBUS_ActiveHigh
             VData1
                        + VBUS_DIFF_Idle
                        - VBUS_DIFF_Idle
       VBUS_ActiveLow
             VData0
                                                                        Data0: x * tBIT   Data1: x * tBIT
                    VRxEN
                                                   tBUSActivityReaction                                                       tBUSIdleReaction
         70% * VIO
         30% * VIO
                     VRxD                                               tBUS_RxD10        tBUS_RxD01
                                                                                                     tRxD_RISE tRxD_FALL
         70% * VIO
         30% * VIO
8.4.1     Bus activity and idle detection (only in NORMAL and RECEIVE ONLY mode)
 If the absolute differential bus voltage is higher than VBUSActiveLow and less than VBUSActiveHigh for a time longer than tBUSIdleDetection, bus
     Idle is detected, RxEN and RxD are switched to logical high after with a time tBUSIdleReaction.
 If the absolute differential bus voltage is higher than VBUSActiveHigh or lower than VBUSActiveLow             for a time loner than tBUSActivitiyDetection, bus
     Activity is detected, RxEN is switched to logical low and RxD is following the detected bus data states as indicated below with a time
     tBUSActivityReaction.
Table 23. Logic Table for Receiver Bus Signal Detection
                                         Receiver Operation Mode                         Bus State / Signals             RxEN                       RxD
                                                                                                     Idle                  H                         H
      Normal power modes (NORMAL and RECEIVE-ONLY mode)
                                                                                                   Data0                   L                         L
                                                                                                   Data1                   L                         H
www.ams.com/eng/FlexRay/AS8222                                                     Revision 1.0                                                              33 - 42


AS8222
Datasheet - B u s D r i v e r
8.4.2   Bus Data Detection (Only in NORMAL and RECEIVE ONLY Mode)
 If, after the activity detection the differential bus voltage is higher than VData1, RxD will be high after a time tBUS_RxD01.
 If, after the activity detection the differential bus voltage is lower than VData0, RxD will be low after a  time tBUS_RxD10.
Figure 12. Receiver Characteristics (BUS → RxD and RxEN)
                                                                          VRxD
                               VBUS                                                                                  VBUS
                                                                         VRxEN
                               VBUS                                                                                  VBUS
                                                     VBUS_ActiveLow                     VBUS_ActiveHigh
                                                         VData0                            VData1
                                                 Data0                                                  Data1
                                                                           Idle
                                                Activity                                               Activity
www.ams.com/eng/FlexRay/AS8222                                           Revision 1.0                                             34 - 42


AS8222
Datasheet - B u s D r i v e r
8.4.3    Receiver Test Signal
In Figure 13 the receiver test signal according the FlexRay Electrical Physical Layer specification is shown.
Figure 13. Receiver Test Signal
                       VBUS
                                                  22 ns                                        22 ns
                       400 mV
                       300 mV
                     -300 mV
                     -400 mV
                                                                             tBIT
                                                         tBUS_RxD01                                       tBUS_RxD10
                        RxD
                       VBUS                      22 ns                                         22 ns
                       400 mV
                       300 mV
                     -300 mV
                     -400 mV
                                                                               tBIT
                        RxD                              tBUS_RxD10                                        tBUS_RxD01
www.ams.com/eng/FlexRay/AS8222                                        Revision 1.0                                    35 - 42


AS8222
Datasheet - Te s t c i r c u i t s
9 Test circuits
9.1 ISO7637-2 Test Pulses - Class D
Figure 14. Test Circuitry for ISO 7637 - 2 Test Pulses
                                                   VBAT
             Pulse
            Generator
                                   1nF       33k                                           + 100nF
                                                                                    10µF
                                                                                GND      GND
                                                                        VBAT
                                                   WAKE
                                                                                     BP
                                                                                                   FlexRay: 330 pF
                                               3k3
                                                                AS8222
                                                                                                                    Pulse
                                                            FlexRay Enhanced                                       Generator
                                                           Standard Transceiver
                                                    Global                           BM            FlexRay: 330 pF
             Pulse                     Custom         Pins
            Generator                  Circuitry
                                   1nF
                                                                        GND
                                                                   GND
www.ams.com/eng/FlexRay/AS8222                                             Revision 1.0                                      36 - 42


                 AS8222
                 Datasheet - Te s t c i r c u i t s
                                                                    AS8222
                          Figure 15. AS8222 Application Schematic
9.2 Application Circuit
                 www.ams.com/eng/FlexRay/AS8222                              Revision 1.0   37 - 42


AS8222
Datasheet - A p p e n d i x
10 Appendix
10.1 FlexRay Functional Classes
The AS8222 FlexRay Enhances Standard Transceiver has the following Bus Driver function classes according the FlexRay Electrical Physical
Layer Specification V2.1 Rev B implemented:
 Functional Class: Chapter 8.13.1 “Bus Driver voltage regulator control”
 Functional Class: Chapter 8.13.2 “Bus Driver - Bus Guardian interface”
 Functional Class: Chapter 8.13.4 “Bus Driver logic level adaptation”
10.2 FlexRay Parameter Comparison
FlexRay Electrical Physical Layer Specification V2.1 Rev. B parameters are shown in color blue in tables (2 to 15).
www.ams.com/eng/FlexRay/AS8222                                     Revision 1.0                                                    38 - 42


AS8222
Datasheet - P a c k a g e D r a w i n g s a n d M a r k i n g s
11 Package Drawings and Markings
The product is available in 20-Lead Shrink Small Outline Package SSOP-20.
Figure 16. Drawings and Dimensions
                                                                                               Symbol           Min    Nom          Max
                                                                                                   A            1.73    1.86        1.99
                                                                                                  A1            0.05    0.13        0.21
                                                                                                  A2            1.68    1.73        1.78
                                                                                                   b            0.22    0.30        0.38
                                                                                                   c            0.09    0.17        0.25
                                                                                                   D            6.90    7.20        7.50
                        AS8222 @
                                                                                                   E            7.40    7.80        8.20
                        YYWWMZZ
                                                                                                  E1            5.00    5.30        5.60
                                                                                                   e              -  0.65 BSC          -
                                                                                                   L            0.55    0.75        0.95
                                                                                                  L1              -  125 REF           -
                                                                                                  L2              -  0.25 BSC          -
                                                                                                   R            0.09      -            -
                                                                                                   Θ             0°      4°           8°
                                                                                                   N                     20
 Notes:
       1. Dimensions & tolerancing conform to ASME Y14.5M-1994.
       2. All dimensions are in millimeters. Angles are in degrees.
       3. N is the total number of terminals.
Marking: YYWWMZZ.
           YY                                    WW                       M                          ZZ                         @
          Year                         Manufacturing Week       Assembly plant identifier Assembly traceability code     Sublot identifier
Note: Package marking is not applied to engineering samples!
www.ams.com/eng/FlexRay/AS8222                                             Revision 1.0                                                    39 - 42


AS8222
Datasheet - O r d e r i n g I n f o r m a t i o n
12 Ordering Information
Table 24. Ordering Information
   Ordering Code                         Marking            Description                  Delivery Form       Package
                                                  AS8222 Enhanced FlexRay Standard   Tape & Reel in Dry Pack
    AS8222-HSSP                           AS8222                                                             SSOP-20
                                                            Transceiver                (1 reel = 2000 units)
                                                  AS8222 Enhanced FlexRay Standard   Tape & Reel in Dry Pack
    AS8222-HSSM                          AS8222                                                              SSOP-20
                                                            Transceiver                (1 reel = 500 units)
For bare die deliveries please contact ams customer service.
Note: All products are RoHS compliant and ams green.
          Buy our products or get free samples online at www.ams.com/ICdirect
          Technical Support is available at www.ams.com/Technical-Support
          For further information and requests, email us at sales@ams.com
          (or) find your local distributor at www.ams.com/distributor
www.ams.com/eng/FlexRay/AS8222                                          Revision 1.0                                 40 - 42


AS8222
Datasheet - R e v i s i o n H i s t o r y
Revision History
      Revision                            Date     Owner                       Description
         1.0                          11 Dec, 2012  hgl                       Initial version
Note: Typos may not be explicitly mentioned under revision history.
www.ams.com/eng/FlexRay/AS8222                                   Revision 1.0                 41 - 42


AS8222
Datasheet - C o p y r i g h t s
Copyrights
Copyright © 1997-2012, ams AG, Tobelbaderstrasse 30, 8141 Unterpremstaetten, Austria-Europe. Trademarks Registered ®. All rights
reserved. The material herein may not be reproduced, adapted, merged, translated, stored, or used without the prior written consent of the
copyright owner.
All products and companies mentioned are trademarks or registered trademarks of their respective companies.
Disclaimer
Devices sold by ams AG are covered by the warranty and patent indemnification provisions appearing in its Term of Sale. ams AG makes no
warranty, express, statutory, implied, or by description regarding the information set forth herein or regarding the freedom of the described
devices from patent infringement. ams AG reserves the right to change specifications and prices at any time and without notice. Therefore, prior
to designing this product into a system, it is necessary to check with ams AG for current information. This product is intended for use in normal
commercial applications. Applications requiring extended temperature range, unusual environmental requirements, or high reliability
applications, such as military, medical life-support or life-sustaining equipment are specifically not recommended without additional processing
by ams AG for each application. For shipments of less than 100 parts the manufacturing flow might show deviations from the standard
production flow, such as test flow or test location.
The information furnished here by ams AG is believed to be correct and accurate. However, ams AG shall not be liable to recipient or any third
party for any damages, including but not limited to personal injury, property damage, loss of profits, loss of use, interruption of business or
indirect, special, incidental or consequential damages, of any kind, in connection with or arising out of the furnishing, performance or use of the
technical data herein. No obligation or liability to recipient or any third party shall arise or flow out of ams AG rendering of technical or other
services.
Contact Information
Headquarters
ams AG
Tobelbaderstrasse 30
A-8141 Unterpremstaetten, Austria
Tel     : +43 (0) 3136 500 0
Fax     : +43 (0) 3136 525 01
For Sales Offices, Distributors and Representatives, please visit:
http://www.ams.com/contact
www.ams.com/eng/FlexRay/AS8222                                             Revision 1.0                                                          42 - 42


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
ams:
 AS8222-HSSP AS8222-HSSM
