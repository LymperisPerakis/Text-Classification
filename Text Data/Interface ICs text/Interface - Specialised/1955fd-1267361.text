                                                                                                                                         LTC1955
                                                                     Dual Smart Card Interface
                                                                                                        with Serial Control
Features                                                             Description
n Compatible with ISO7816-3 and EMV Electrical                        The LTC®1955 provides all necessary supervisory and
  Specifications                                                      power control functions for two smart cards, two S.A.M.
n Power Management and Control for Two Smart Cards                    cards or a combination of S.A.M. and smart cards. It
n Control/Status Serial Port May Be Daisychained for                  provides a charge pump for battery-powered applications
  Multicard Applications                                              as well as all necessary level shifting circuitry.
n Automatic Shutdown on Electrical Faults
                                                                      The card voltages can be independently set to 1.8V, 3V or
n Buck/Boost Charge Pump Generates 5V, 3V or 1.8V
                                                                      5V. Both card interfaces include a card detection channel
  Outputs (Smart Card Classes A, B and C)
                                                                      with automatic debounce circuitry. To reduce wiring costs,
n Independent 5V/3V/1.8V Level Control for Both Cards
                                                                      the LTC1955 interfaces to a microcontroller via a simple
n Automatic Level Translation
                                                                      4-wire serial interface. Multiple devices may be connected
n Supervisory Functions Prevent Smart Card Faults
                                                                      in daisychain fashion so that the number of wires to the
n Low Operating Current: 250µA Typical
                                                                      card socket board is independent of the number of sockets.
n Ultralow Shutdown Current
                                                                      Status data is returned over the same interface.
n >10kV ESD on Smart Card Pins
n Small 32-Lead 5mm × 5mm QFN Package                                 Extensive security features ensure proper deactivation
                                                                      sequencing in the event of a supply fault or a smart card
Applications                                                          electrical fault. The smart card pins can withstand greater
n Handheld Payment Terminals                                          than 10kV ESD in-situ with no additional components.
n Pay Telephones                                                      The LTC1955 is available in a low profile (0.75mm) 5mm
n ATM Machines                                                        × 5mm QFN package.
n POS Terminals                                                       L, LT, LTC, LTM, Linear Technology and the Linear logo are registered trademarks of Linear
n Computer Keyboards                                                  Technology Corporation. All other trademarks are the property of their respective owners.
                                                                      Protected by U.S. Patents, including 6356140, 6411531.
n Multiple S.A.M. Sockets
Typical Application                                                                 240k
                                                                                               23
                                                                                                   180k
                                                                                          UNDERV                      CARD
                                                                                1                          2         DETECT
                                                                                   DVCC           PRES A
                                                                           12,13
                                                 INPUT                             VBATT
             Deactivation Sequence              POWER        0.1µF    4.7µF
                                                                            9, 10
                                                                                          LTC1955          3
                                                                                   GND               C8A
                                                                                                           4
                                                                                                     C4A
                                                                               24                          5
      RST A                                                                        FAULT            I/O A
                                                                                                           6
     5V/DIV                                                                                        RST A
                                                                               27                          7
                                                                                   DIN             CLK A
      CLK A                                                                    28                          8                                  SMART CARD
                                                4-WIRE                             DOUT             VCCA
     5V/DIV                                  COMMAND                           26
                                                                                   SCLK                             1µF
                                             INTERFACE                         25                          21
       I/O A                                                                       LD             PRES B
     5V/DIV
       VCCA                                                                    29                          20
     5V/DIV                                                                        DATA             I/O B
                                                4-WIRE                         30                          19
                                  1955 TA01a                                       RIN             RST B
                      10µs/DIV                    CARD                         32                          18
                                             INTERFACE                             SYNC            CLK B
                                                                               31                          17                                 VENDOR CARD
                                                                                   ASYNC            VCCB
                                                                               22
                                                                                   NC/NO                            1µF
                                                                                     C+    C–     CPO
                                                                                                                                                             1955 TA01b
                                                                                  14        11      15
                                                                                       1µF
                                                                                                       4.7µF
                                                                                                                                                                1955fd
                                              For more information www.linear.com/LTC1955                                                                         1


LTC1955
Absolute Maximum Ratings                                                         Pin Configuration
(Note 1)
VBATT, DVCC, CPO, FAULT,                                                                                                   TOP VIEW
UNDERV to GND........................................ –0.3V to 6.0V
PRES A/PRES B, DATA, RIN, SYNC, ASYNC,                                                                    SYNC   ASYNC   RIN   DATA     DOUT     DIN   SCLK   LD
LD, DIN, SCLK to GND..................–0.3V to (DVCC + 0.3V)                                              32 31 30 29 28 27 26 25
I/O A............................................. –0.3V to (VCCA + 0.3V)                      DVCC 1                                                              24 FAULT
I/O B............................................. –0.3V to (VCCB + 0.3V)                    PRES A 2                                                              23 UNDERV
IVCCA/IVCCB.............................................................80mA                      C8A 3                                                            22 NC/NO
VCCA/VCCB Short-Circuit Duration...................... Indefinite                                 C4A 4                          33                                21 PRES B
                                                                                                I/O A 5                         SGND                               20 I/O B
Operating Temperature Range (Note 4).... –40°C to 85°C
                                                                                              RST A 6                                                              19 RST B
Junction Temperature............................................ 125°C                         CLK A 7                                                             18 CLK B
Storage Temperature Range.................... –65°C to 125°C                                   VCCA 8                                                              17 VCCB
                                                                                                           9 10 11 12 13 14 15 16
                                                                                                          SGND   PGND
                                                                                                                         C–
                                                                                                                               SVBATT   PVBATT
                                                                                                                                                 C+
                                                                                                                                                       CPO    NC
                                                                                                                 UH PACKAGE
                                                                                                       32-LEAD (5mm × 5mm) PLASTIC QFN
                                                                                                            TJMAX = 125°C, θJA = 34°C/W
                                                                                              EXPOSED PAD (PIN 33) IS SGND, MUST BE SOLDERED TO PCB
order information
LEAD FREE FINISH             TAPE AND REEL               PART MARKING*                PACKAGE DESCRIPTION                                                     TEMPERATURE RANGE
LTC1955EUH#PBF               LTC1955EUH#TRPBF            1955                         32-Lead (5mm × 5mm) Plastic QFN                                         –40°C to 85°C
LTC1955IUH#PBF               LTC1955IUH#TRPBF            1955                         32-Lead (5mm × 5mm) Plastic QFN                                         –40°C to 85°C
LEAD BASED FINISH            TAPE AND REEL               PART MARKING*                PACKAGE DESCRIPTION                                                     TEMPERATURE RANGE
LTC1955EUH                   LTC1955EUH#TR               1955                         32-Lead (5mm × 5mm) Plastic QFN                                         –40°C to 85°C
LTC1955IUH                   LTC1955IUH#TR               1955                         32-Lead (5mm × 5mm) Plastic QFN                                         –40°C to 85°C
Consult LTC Marketing for parts specified with wider operating temperature ranges. *The temperature grade is identified by a label on the shipping container.
For more information on lead free part marking, go to: http://www.linear.com/leadfree/
For more information on tape and reel specifications, go to: http://www.linear.com/tapeandreel/
Electrical Characteristics                                The l denotes the specifications which apply over the full operating
temperature range, otherwise specifications are at TA = 25°C. VPVBATT = VSVBATT = 3.3V, DVCC = 3.3V, unless otherwise noted.
PARAMETER                                            CONDITIONS                                                                 MIN                      TYP           MAX     UNITS
Input Power Supply
VBATT Operating Voltage                                                                                          l               2.7                                    5.5        V
IPVBATT + ISVBATT Operating Current                  VCCA = 5V, VCCB = 0V, ICCA = 0µA                            l                                       250           400        µA
                                                     VCCA = VCCB = 5V, ICCA = ICCB = 0µA                         l                                       350           500        µA
IPVBATT + ISVBATT Shutdown Current                   No Cards Present. VCPO = 0V                                 l                                       0.75          1.75       µA
DVCC Operating Voltage                                                                                           l               1.7                                    5.5        V
                                                                                                                                                                               1955fd
2                                                        For more information www.linear.com/LTC1955


                                                                                                                      LTC1955
Electrical Characteristics                                   The l denotes the specifications which apply over the full operating
temperature range, otherwise specifications are at TA = 25°C. VPVBATT = VSVBATT = 3.3V, DVCC = 3.3V, unless otherwise noted.
PARAMETER                                    CONDITIONS                                                 MIN      TYP     MAX      UNITS
IDVCC Operating Current                                                                          l                10       25         µA
IDVCC Shutdown Current                                                                           l                0.5     1.5         µA
Charge Pump
ROLCP 5V Mode Open-Loop Output Resistance    VBATT = 3.075V, ICPO = ICCA + ICCB = 120mA (Note 3) l               5.7      8.5          Ω
CPO Turn-On Time                             ICCA/B = 0mA, 10% to 90%                            l               0.6      1.5         ms
Smart Card Supplies VCCA, VCCB
VCCA/B Output Voltage                        5V Mode, 0 < ICCA/B < 60mA                          l      4.65       5     5.35          V
                                             3V Mode, 0 < ICCA/B < 50mA                          l      2.75       3     3.25          V
                                             1.8V Mode, 0 < ICCA/B < 30mA                        l      1.65      1.8    1.95          V
VCCA/B Turn-On Time                          ICCA/B = 0mA, 10% to 90%                            l                0.8     1.5         ms
Undervoltage Detection                       Relative to Nominal Output                          l       –9       –5     –2.5          %
Overcurrent Detection                        5V Mode                                             l       65      100      135        mA
Smart Card Detection
Debounce Time (       PRES A/B to    D15/D7) VNC/NO = 0V                                         l       20       35       60         ms
PRES A, PRES B Pull-Up Current               VPRESA/B = 0                                        l               1.25     2.5         µA
Deactivation Time (     RST to VCC = 0.4V)   ICCA/B = 0mA, CVCCA/B = 1µF                         l                20      250         µs
CLK A, CLK B
Low Level Output Voltage (VOL), (Note 2)     Sink Current = –200µA                               l                        0.2          V
High Level Output Voltage (VOH), (Note 2)    Source Current = 200µA                              l VCCA/B – 0.2                        V
Rise/Fall Time (Note 2)                      Loaded with 50pF, 10% to 90%                        l                         16         ns
CLK A, CLK B Frequency (Note 2)                                                                  l       10                         MHz
RST A, RST B, C4A, C8A
Low Level Output Voltage (VOL), (Note 2)     Sink Current = –200µA                               l                        0.2          V
High Level Output Voltage (VOH), (Note 2)    Source Current = 200µA                              l VCCA/B – 0.2                        V
Rise/Fall Time (Note 2)                      Loaded with 50pF, 10% to 90%                        l                        100         ns
I/O A, I/O B
Low Level Output Voltage (VOL), (Note 2)     Sink Current = –1mA (VDATA = 0V)                    l                        0.3          V
High Level Output Voltage (VOH), (Note 2)    Source Current = 20µA (VDATA = VDVCC)               l 0.85 • VCCA/B                       V
Rise/Fall Time (Note 2)                      Loaded with 50pF, 10% to 90%                        l                        500         ns
Short-Circuit Current (Note 2)               VDATA = 0V                                          l                 5      10         mA
DATA
Low Level Output Voltage (VOL)               Sink Current = –500µA (VI/OA/B = 0V)                l                        0.3          V
High Level Output Voltage (VOH)              Source Current = 20µA (VI/OA/B = VCCA/B)            l   0.8 • DVCC                        V
Rise/Fall Time                               Loaded with 50pF, 10% to 90%                        l                        500         ns
RIN, DIN, SCLK, LD, SYNC, ASYNC, NC/NO
Low Input Threshold (VIL)                                                                        l                    0.15 • DVCC      V
High Input Threshold (VIH)                                                                       l  0.85 • DVCC                        V
Input Current (IIH/IIL)                                                                          l       –1                 1         µA
                                                                                                                                   1955fd
                                                 For more information www.linear.com/LTC1955                                       3


LTC1955
Electrical Characteristics                                             The l denotes the specifications which apply over the full operating
temperature range, otherwise specifications are at TA = 25°C. VPVBATT = VSVBATT = 3.3V, DVCC = 3.3V, unless otherwise noted.
PARAMETER                                             CONDITIONS                                                      MIN          TYP     MAX          UNITS
DOUT
Low Level Output Voltage (VOL)                        Sink Current = –200µA                                   l                             0.3              V
High Level Output Voltage (VOH)                       Source Current = 200µA                                  l    DVCC – 0.3                                V
UNDERV
Threshold                                                                                                     l       1.17         1.23    1.29              V
Leakage Current                                       VUNDERV = 3.3V                                          l                             50              nA
FAULT
Low Level Output Voltage (VOL)                        Sink Current = –200µA                                   l                   0.005     0.3              V
Leakage Current                                       VFAULT = 5.5V                                           l                              1              µA
SYMBOL                   PARAMETER                                 CONDITIONS                                        MIN          TYP       MAX         UNITS
Serial Port Timing
tDS                      DIN Valid to SCLK Setup                                                              l        8                                    ns
tDH                      DIN Valid to SCLK Hold                                                               l        8                                    ns
tDD                      DOUT Output Delay                         CLOAD = 15pF                               l       15                     60             ns
tL                       SCLK Low Time                                                                        l       50                                    ns
tH                       SCLK High Time                                                                       l       50                                    ns
tCL                      SCLK to LD                                                                           l       50                                    ns
tLC                      LD to SCLK                                                                           l        0                                    ns
tLFC                     LD Falling to SCLK                                                                   l       50                                    ns
Note 1: Stresses beyond those listed under Absolute Maximum Ratings               Note 4: The LTC1955E is guaranteed to meet performance specifications
may cause permanent damage to the device. Exposure to any Absolute                from 0°C to 85°C. Specifications over the –40°C to 85°C operating
Maximum Rating condition for extended periods may affect device                   ambient temperature range are assured by design, characterization and
reliability and lifetime.                                                         correlation with statistical process controls. The LTC1955I is guaranteed to
Note 2: This specification applies to all three smart card voltage classes:       meet performance specifications over the full –40°C to 85°C temperature
1.8V, 3V and 5V.                                                                  range.
Note 3: ROLCP @ (2VBATT – VCPO)/ICPO; VCPO will depend upon total load
(ICCA + ICCB) and minimum supply voltage VBATT. See Figure 5.
                                                                                                                                                         1955fd
4                                                         For more information www.linear.com/LTC1955


                                                                                                                                                                                                                                                        LTC1955
Typical Performance Characteristics
                                                                                                                                                                                                                                   Charge Pump Open-Loop Output
                                                                                                                             I/O X Short-Circuit Current                                                                           Resistance vs Temperature
                                     No Load Supply Current vs VBATT                                                         vs Temperature                                                                                        (2VIN – VCPO) / ILOAD(MAX)
                               600                                                                                     6.0                                                                                                  7.0
                                     TA = 25°C                                                                               DVCC = VBATT = 5.5V                                                                                    VIN = 2.7V
                                     ICCA = ICCB = 0µA                                                                       VCCX = 5V                                                                                              VCPO = 4.9V
                               500
                                                                                          SHORT-CIRCUIT CURRENT (mA)
                                                                                                                       5.5                                                                                                  6.5
                                                                                                                                                                                                OUTPUT RESISTANCE (Ω)
                                                    VCCA = VCCB = 5V
  SUPPLY CURRENT (µA)
                               400
                                                                                                                       5.0                                                                                                  6.0
                               300                  VCCA = 1.8V, VCCB = 0V
                                                                                                                       4.5                                                                                                  5.5
                               200
                                                                                                                       4.0                                                                                                  5.0
                               100
                                 0                                                                                     3.5                                                                                                  4.5
                                  2.7    3.1     3.5 3.9 4.3 4.7         5.1       5.5                                    –40     –15       10     35          60            85                                                –40        –15        10     35          60         85
                                                 SUPPLY VOLTAGE (V)                                                                      TEMPERATURE (°C)                                                                                         TEMPERATURE (°C)
                                                                             1955 G01                                                                                  1955 G02                                                                                              1955 G03
                                     VCCX Overcurrent Shutdown                                                               Card Detection Debounce Time                                                                          Bidirectional Channel (I/O A, I/O B)
                                     Threshold vs Temperature                                                                vs VBATT Supply Voltage                                                                               Low Output Level vs Temperature
                               180                                                                                     60                                                                                                  0.16
                                     VBATT = 3.3V                                                                                                                                                                                   VDATA = 0V
                                     VCPO = 5.75V                                                                                                                                                                                   IOL = –1mA
                                                                                                                                                                                     I/O A, I/O B LOW OUTPUT VOLTAGE (V)
                                                                                                                                                                                                                                                            VCCX = 1.8V
                                                                                                                       55                                                                                                           VBATT = 2.7V
                               160                                                                                                                                                                                         0.14
                                                                                                                                                      TA = 85°C
                                                                                                                       50
  LOAD CURRENT (mA)                                                                       DEBOUNCE TIME (ms)
                                                         VCCX = 1.8V                                                                                                                                                                                        VCCX = 3V
                               140                                                                                                                    TA = 25°C                                                            0.12
                                                                                                                       45
                                                         VCCX = 3V
                                                                                                                       40                                                                                                                                   VCCX = 5V
                               120                                                                                                                                                                                         0.10
                                                                                                                       35                             TA = –40°C
                               100                                                                                                                                                                                         0.08
                                                         VCCX = 5V                                                     30
                                80                                                                                     25                                                                                                  0.06
                                  –40      –15       10     35         60          85                                    2.7    3.1     3.5   3.9 4.3 4.7 5.1                5.5                                               –40        –15        10     35          60         85
                                                  TEMPERATURE (°C)             1955 G04
                                                                                                                                      VBATT SUPPLY VOLTAGE (V)            1955 G05
                                                                                                                                                                                                                                                  TEMPERATURE (°C)
                                                                                                                                                                                                                                                                               1955 G06
                                     VBATT Quiescent Current
                                     [IBATT – 2 (ICCA + ICCB)]                                                               VBATT Shutdown Current                                                                                DVCC Shutdown Current
                                     vs Load Current                                                                         vs Supply Voltage                                                                                     vs Supply Voltage
                               10                                                                                      3.0                                                                                                  1.0
                                     VBATT = 3.1V                                                                            VDVCC = VBATT                                                                                          VDVCC = VBATT
                                9    TA = 25°C
VBATT QUIESCENT CURRENT (mA)
                                                                                                                       2.5
                                8                                                                                                                                                                                           0.8
                                                                                           SUPPLY CURRENT (µA)                                                                                    SUPPLY CURRENT (µA)
                                7                                                                                                                         TA = –40°C
                                                                                                                       2.0                                                                                                                                   TA = –40°C
                                6                                                                                                             TA = 25°C                                                                     0.6
                                5                                                                                      1.5
                                4                                                                                                                                                                                           0.4
                                                                                                                       1.0                                                                                                                                   TA = 25°C, 85°C
                                3                                                                                                                         TA = 85°C
                                2                                                                                                                                                                                           0.2
                                                                                                                       0.5
                                1
                                0                                                                                       0                                                                                                     0
                                 10µ        100µ      1m      10m            100m                                        2.7    3.1     3.5   3.9 4.3 4.7 5.1                5.5                                                  2.7   3.1     3.5 3.9 4.3 4.7 5.1                5.5
                                                LOAD CURRENT (A)                                                                      VBATT SUPPLY VOLTAGE (V)                                                                                VDVCC SUPPLY VOLTAGE (V)
                                                                             1955 G07
                                                                                                                                                                       1955 G08                                                                                              1955 G09
                                                                                                                                                                                                                                                                               1955fd
                                                                                                                   For more information www.linear.com/LTC1955                                                                                                                 5


LTC1955
Typical Performance Characteristics
          Charge Pump and LDO Activation              Deactivation Sequence                              Data – I/O Channel, CL = 50pF
                                               RST A
                                              5V/DIV
                                                                                                   I/O A
   VCPO                                                                                          2V/DIV
                                               CLK A
  5V/DIV
                                              5V/DIV
    VCCA
  5V/DIV                                        I/O A
                                              5V/DIV                                              DATA
                                                                                                 2V/DIV
    I/O A
                                                VCCA
  5V/DIV
                                              5V/DIV
                                     1955 G10                                           1955 G11                                       1955 G12
                      1ms/DIV                                        10µs/DIV                                         100ns/DIV
Pin Functions
SVBATT: Power. Supply voltage for analog sections of the                 and C8A synchronous card pins can be selected to connect
LTC1955.                                                                 to the DATA pin via the serial port (see Table 4).
PVBATT: Power. Supply voltage for the charge pump.                       RIN: Input. The RIN pin supplies the RST signal to both
                                                                         smart cards. It is level shifted and transmitted directly
DVCC: Power. Reference voltage for the control logic.
                                                                         to the RST pin of a selected card socket. When a card is
SGND: Ground. Signal ground for analog sections of the                   deselected, the RST A/RST B pin for that channel is latched
LTC1955. The Exposed Pad must be soldered to PCB                         at its current state.
ground.
                                                                         SYNC: Input. The SYNC pin provides the clock input for
PGND: Ground. Power ground for the charge pump. This                     synchronous smart cards. When a synchronous card
pin should be connected directly to a low impedance                      is selected, its CLK pin follows SYNC directly. When a
ground plane.                                                            synchronous card is deselected, the CLK A/CLK B pin for
CPO: Charge Pump. CPO is the output of the charge pump.                  that channel is latched at its current state.
When one or both of the smart cards requires power, the                  ASYNC: Input. The ASYNC pin provides the clock input
charge pump will charge CPO to either 3.7V or 5.35V                      for asynchronous cards and should be connected to a free
depending on what smart card voltages are required. A                    running clock. The clock signal to the smart card can be
low impedance 4.7µF X5R or X7R ceramic capacitor is                      a ÷1, ÷2, ÷4 or ÷8 version of the signal on ASYNC. Asyn-
required on CPO.                                                         chronous cards can also be placed in clock stop mode
C +, C –: Charge Pump. Charge pump flying capacitor pins.                with the clock stopped either high or low.
A 1µF X5R or X7R ceramic capacitor should be connected                   DIN: Input. Input for the serial port. Command data is
from C+ to C –.                                                          shifted into DIN synchronously with SCLK. DIN can be
DATA: Input/Output. Microcontroller side data I/O pin. The               connected directly to a microcontroller or the DOUT pin of
DATA pin provides the bidirectional communication path                   another LTC1955 for daisychained operation.
to both smart cards. One, both or neither of the cards may               DOUT: Output. Output for the serial port. Smart card status
be selected to communicate via the DATA pin. If several                  data is shifted out of DOUT synchronously with SCLK. DOUT
LTC1955s are connected in parallel, the DATA pin can be                  can be connected directly to a microcontroller or the DIN
made high impedance by selecting neither card. The C4A                   pin of another LTC1955 for daisychained operation.
                                                                                                                                        1955fd
6                                               For more information www.linear.com/LTC1955


                                                                                                               LTC1955
Pin Functions
SCLK: Input. The SCLK pin clocks the serial port. Each               I/O A/I/O B: Card Socket. The I/O A/I/O B pins connect to
new data bit is received on the rising edge of SCLK. SCLK            the I/O pins of the respective smart card sockets. When
should be left high during idle times and should not be              a smart card is selected, its I/O pin connects to the DATA
clocked when LD is low.                                              pin. When a smart card is deselected, its I/O A/I/O B pin
LD: Input. The falling edge of this pin loads the current            returns to the idle state (H).
state of the shift register into the command register.               RST A/RST B: Card Socket. These pins should be connected
Command changes to both smart card channels will be                  to the RST pins of the respective smart card sockets. The
updated on the falling edge of LD. The rising edge of LD             RST A/RST B signals are derived from the RIN pin. When
latches status information from the smart card channels              a card is selected, its RST pin follows RIN. When a card
into the shift register for the next read/write cycle.               is deselected, the RST A/RST B pin for that channel holds
                                                                     the current value on RIN.
NC/NO: Input. This pin controls the activation level of the
PRES A/PRES B pins. When it is high (DVCC), the PRES                 CLK A/CLK B: Card Socket. The CLK A/CLK B pins should
pins are active high. When it is low (GND), the PRES pins            be connected to the CLK pins of the respective smart card
are active low. When a ground side N.O. switch is used,              sockets. The CLK A/CLK B signals can be derived from
the NC/NO pin should be grounded. When a ground side                 either the SYNC input or the ASYNC input depending on
N.C. switch is used, the NC/NO pin should be connected               which type of card is being accessed. The card type is
to DVCC.                                                             selected via the serial port (see Tables 1 and 3).
Note: If an N.C. switch is used, a small current (several            VCCA, VCCB: Card Socket. The VCCA/VCCB pins should be
microamperes) will flow through the switch whenever a                connected to the VCC pins of the respective smart card
smart card is not present. For ultralow power consumption            sockets. The activation of a VCCA/VCCB pin is controlled by
in shutdown, an N.O. switch is optimum.                              the serial port (see Tables 1 and 2) and can be set to 0V,
                                                                     1.8V, 3V or 5V. The voltage levels of the two card sockets
PRES A/PRES B: Card Socket. The PRES A/PRES B pins
                                                                     are controlled independently for maximum flexibility.
are used to detect the presence of the smart cards. They
can be connected to either normally open or normally                 FAULT: Output. The FAULT pin can be used as an interrupt
closed detection switches on the smart card acceptor’s               to a microcontroller to indicate when a fault has occurred.
sockets. The NC/NO pin should be set appropriately. These            It is an open-drain output, which is logically equivalent to
pins have a pull-up current source on-chip so no external            D4 + D5 + D12 + D13. (See Table 1)
components are required.                                             UNDERV: Input. The UNDERV pin provides security by
C4A/C8A: Card Socket. These pins connect to the C4                   supplying a precision undervoltage threshold for ex-
and C8 pins of synchronous memory cards on smart                     ternal supply monitoring. An external resistive voltage
card socket A. The signal for these pins is unidirectional           divider programs the desired undervoltage threshold.
and can only be sent to the card. Data for C4A and C8A               Once UNDERV falls below 1.23V, the LTC1955 automati-
is transmitted via the DATA pin and may be selected                  cally begins the deactivation sequence on any channel
in place of I/OA via the serial port (see Table 4). When             that is active.
either C4A or C8A is selected, it will follow the DATA               If external supply monitoring is not required, the UNDERV
pin. When it is deselected, it will remain latched at its            pin should be connected to either SVBATT or DVCC.
current state.
                                                                                                                            1955fd
                                             For more information www.linear.com/LTC1955                                     7


LTC1955
Block Diagram
                                                                     CHARGE PUMP
                                                       C+     C–     PGND  SVBATT PVBATT    CPO
                                                       14      11     10     12     13       15
                                                        CHARGE
                                                         PUMP
                      VCCB 17  LDO B                                              LDO A            8 VCCA
                      I/O B 20                                                                     5 I/O A
                                                         CLOCK
           SMART
                     CLK B 18                           CONTROL                                   4 C4A
             CARD
                                                         LOGIC
         SOCKET B
                                                                                                              SMART
                     RST B 19                                                                      3 C8A      CARD
                                                         RESET                                                SOCKET A
                                                        CONTROL
                                                         LOGIC
                    PRES B 21      τ                                                               7 CLK A
                                                                                                   6 RST A
                     DATA 29
            SMART   ASYNC 31                                                    τ                 2 PRES A
             CARD
   COMMUNICATIONS    SYNC 32
                                                                                                  22 NC/NO
                        RIN 30
                                                                                                  24
                                                                                                       FAULT
                                                      STATUS DATA
                                                                                                   9 SGND
                        DIN 27                                                                               DIGITAL
                                                                                                             SUPPLY
        SERIAL PORT   DOUT 28
    COMMAND/STATUS                                   SHIFT REGISTER                                1 DVCC
               DATA  SCLK 26
                         LD 25
                                                                                   –              23 UNDERV
                                                    COMMAND LATCH
                                                                                    +
                                                                                         1.23V  +
                                                                                                –
                                                                                                    1955 BD
                                                                                                                       1955fd
8                                   For more information www.linear.com/LTC1955


                                                                                                                           LTC1955
Operation
Serial Port                                                                • Operating mode of asynchronous cards (clock stop
The microcontroller compatible serial port provides all                       high, low, ÷1, ÷2, ÷4 or ÷8)
of the command and control inputs for the LTC1955, as                      • Selection of the I/O, C4 or C8 pins for card socket A
well as the status of the two smart cards. Data on the DIN
                                                                           The serial port provides the following status data:
input is loaded on the rising edge of SCLK. D15 is loaded
first and D0 last. At the same time, the command bits are                  • It indicates the presence or absence of the smart
being shifted into the DIN input, the status bits are being                   cards.
shifted out of the DOUT output. The status bits are presented              • It indicates the readiness of the smart card VCC supplies.
to DOUT on the rising edge of SCLK. Once all bits have                        Communication with a smart card is disabled until its
been clocked into the shift register, the command data is                     power supply voltage has reached the final value.
loaded into the command latch by bringing LD low. At this
time, the command latch is updated and the LTC1955 will                    • It indicates fault status. In the event of an electrical or
begin to act on the new command set. The status data                          ATR fault, the fault is reported. For electrical faults, the
is latched into the shift register on the rising edge of LD.                  LTC1955 will automatically deactivate the smart card.
SCLK should be low when LD is brought low and should                       Table 1 illustrates the command inputs and status outputs
be high when LD is brought high. This requires a 9th clock                 associated with each bit of the serial data word.
cycle per transaction. Figure 1 shows the recommended
                                                                           Three voltage options are available from the LTC1955: 5V,
operation of the serial port.
                                                                           3V and 1.8V. Bits D0, D1 (card B) and D8, D9 (card A)
Multiple LTC1955s may be daisychained together by                          determine which voltage is selected. Setting both control
connecting the DOUT pin of one LTC1955 to the DIN pin of                   bits of a channel to 0 deactivates that channel and sets
another. Figure 6 shows an example of multiple LTC1955s                    the smart card supply voltage to 0V. If both channels are
daisychained together.                                                     deactivated, the LTC1955 is in shutdown. Table 2 shows
The maximum clock rate for the serial port is 10MHz.                       the operation of the supply control bits.
The serial port controls the following parameters of each                  The CLK A/CLK B pins to the smart cards can be pro-
smart card socket:                                                         grammed for various modes. Both synchronous and asyn-
                                                                           chronous cards are supported. There are several options
• Selection/deselection of a smart card                                    available with asynchronous cards. Table 3 shows how
• VCC voltage level of each card (5V/3V/1.8V/0V)                           all clock options are obtained using bits D5–D7 (card B)
                                                                           and D13–D15 (card A). The default state of the LTC1955
• Clock mode of each card (synchronous or asynchronous)
                                                                           on power up is synchronous mode.
                                                                 READ/WRITE CYCLE
                             tLC   tDS   tDH                              tH                tL       tCL tLFC tCL
                                                    tDD
                    SCLK
                      DIN     X        D15      D14                    D2         D1         D0      X
                       LD
                                                                                                D15 FROM
                     DOUT        D15        D14       D5                      D1         D0                        D15
                                                                                                  INPUT
                                                                                                                  1955 F01
                                                  Figure 1. Serial Port Timing Diagram
                                                                                                                                     1955fd
                                                  For more information www.linear.com/LTC1955                                         9


LTC1955
Operation
Table 1. Serial Port Comand                                                    To receive status data from the serial port, a read/write op-
          STATUS OUTPUT            BIT    COMMAND INPUT                        eration must be performed. When polling for the presence
CARD B    0                        D0    VCCB Options                          of a smart card on both channels, the input word should
          0                        D1    (See Table 2)                         be set to $0000 since this is the shutdown command for
          0                        D2    Card B Select/Deselect                the LTC1955. However, consider the example where some
          0                        D3    Data Pull-Up Defeat                   operation is already being performed on channel A. If, for
          Card B Electrical Fault  D4    Reserved (Always Set to “0”)          example, the previous command was $BE00 (VCCA set to
          Card B ATR Fault         D5    Card B Clock Options                  3V, card selected, I/O A connected to DATA and CLK A set
          Card B VCC Ready         D6    (See Table 3)                         to ASYNC÷2), then the commands for this channel must
          Card B Present           D7                                          be rewritten to the serial port each time. To poll for the
CARD A    0                        D8    VCCA Options                          presence of a card on channel B, or even the VCCA ready
          0                        D9    (See Table 2)                         status, then $BE00 should be rewritten on each new read/
          0                        D10 Card A Select/Deselect
                                                                               write cycle. Once a card is detected on channel B, the
          0                        D11 Card A Communications
                                                                               commands for channel B can be changed but the $BExx
          Card A Electrical Fault  D12 Options (See Table 4)
                                                                               should continue to be rewritten for channel A.
          Card A ATR Fault         D13 Card A Clock Options
                                                                               Bidirectional Channels
          Card A VCC Ready         D14 (See Table 3)
          Card A Present           D15                                         The bidirectional channels are level shifted to the appropri-
                                                                               ate VCCA/B voltages at the I/O A/I/O B pins.
                                                                               An NMOS pass transistor performs the level shifting. The
Table 2. VCC and Shutdown Options                                              gate of the NMOS transistor is biased such that the transis-
  D9      D8     STATUS (CARD A)                                               tor is completely off when both sides have relinquished
  D1      D0     STATUS (CARD B)
   0       0     VCC = 0V (Shutdown)                                           the channel. If one side of the channel asserts an L, then
   0       1     VCC = 1.8V                                                    the transistor will convey the L to the other side. Note that
   1       0     VCC = 3V                                                      current passes from the receiving side of the channel to the
   1       1     VCC = 5V                                                      transmitting side. The low output voltage of the receiving
                                                                               side will be dependent upon the voltage at the transmitting
                                                                               side plus the I • R drop of the pass transistor.
Table 3. Clock Options
  D7      D6       D5      CLOCK MODE (CARD B)
                                                                               When a card socket is selected, it becomes a candidate
  D15    D14      D13      CLOCK MODE (CARD A)                                 to drive data on the DATA pin, and likewise, receive data
   0       0        0      Synchronous Mode                                    from the DATA pin. When a card socket is deselected, the
   0       0        1      Unused                                              voltage on its I/O A/I/O B pin will return to the idle state
   0       1        0      Asynchronous Stop Low                               (H), and the DATA side of that channel will become high
   0       1        1      Asynchronous Stop High
                                                                               impedance. If both cards are deselected, the DATA pin
   1       0        0      Asynchronous ÷1
                                                                               will be high impedance.
   1       0        1      Asynchronous ÷2
   1       1        0      Asynchronous ÷4                                     Both cards may be deselected at the same time to allow
   1       1        1      Asynchronous ÷8                                     communication with a second LTC1955.
                                                                               Card channel A includes provision for unidirectional
                                                                               communication with the C4 and C8 pins of the smart
                                                                               card. The C4, C8 and I/O pins of card A are individually
                                                                               multiplexed to the DATA pin using bits D11 and D12, as
                                                                               shown in Table 4.
                                                                                                                                        1955fd
10                                                     For more information www.linear.com/LTC1955


                                                                                                                     LTC1955
Operation                                                                  In asynchronous mode, the CLK A/CLK B pins follow either
                                                                           the ASYNC pin (÷1 mode) or a divided version of this pin.
Table 4. Card A Communications Options                                     The CLK A/CLK B pins can also be stopped high or low.
  D12     D11     CARD A COMMUNICATION MODE                                The available divider ratios include ÷2, ÷4 and ÷8. When
   0       0      Nothing Selected                                         switching between divider ratios, the internal selection
   0       1      C4A Connected to DATA Pin                                circuitry ensures that no spikes or glitches appear on the
   1       0      C8A Connected to DATA Pin                                CLK A/CLK B pins. Consequently, it may take up to 8 clock
   1       1      I/O A Connected to DATA Pin                              pulses for the clock frequency change command to take
Note that if a reset is initiated with both cards selected,                affect. Synchronization circuitry ensures that no glitches
then both may give an answer to reset and collide on the                   occur when entering or exiting one of the stop modes.
DATA line. No damage will occur but data could be lost                     For example, when entering stop low mode, the selection
or corrupted.                                                              circuitry waits for the next falling edge of the respective
                                                                           CLK A/CLK B signal to make the change. Likewise, if stop
Dynamic Pull-Up Current Sources                                            high is selected, it will occur on the next rising edge.
The current sources on the bidirectional pins (DATA, I/O                   Deselection of an asynchronous card does not affect its
A/I/O B) are dynamically activated to achieve a fast rise time             CLK A/CLK B pin. Its clock can be started, stopped or its
with a relatively small static current.* Once a bidirectional              divider ratio changed at any time.
pin is relinquished, a small start-up current begins to
                                                                           To clean up the duty cycle of the incoming clock in asyn-
charge the node. An edge rate detector determines if the
                                                                           chronous applications, any of the clock divider modes ÷2,
pin is released by comparing its slew rate with an internal
                                                                           ÷4 or ÷8 will yield a very nearly 50% duty cycle.
reference value. If a valid transition is detected, a large
pull-up current enhances the edge rate on the node. The                    Additional synchronization circuitry prevents glitches from
higher slew rate corroborates the decision to charge the                   occurring when switching between synchronous mode and
node thereby affecting a dynamic form of hysteresis.                       asynchronous mode. Because of this circuitry, two edges
                                                                           (a falling edge followed by a rising edge) are necessary
             LOCAL                                                         at the CLK pin to switch modes from asynchronous to
            SUPPLY                            + VREF                       synchronous. For example, if clock stop mode is engaged,
                                                                           the clock channel will not change modes until clock stop
                ISTART
                                              –                            mode is disengaged.
                                       dv                                  Any combination of cards, synchronous or asynchronous,
        BIDIRECTIONAL                  dt
                                                                           can be used as both channels can be set to any of the
                    PIN                         1955 F02
                                                                           clock modes or divider ratios independently.
            Figure 2. Dynamic Pull-Up Current Sources                      Both SYNC and ASYNC inputs are independently level
                                                                           shifted to the appropriate voltage for the CLK A/CLK B
Clock Channels                                                             pins (5V, 3V, 1.8V).
As described in the section Serial Port, the LTC1955 sup-
ports both synchronous and asynchronous smart cards.                       Reset Channels
On start-up, or when bits D13-D15 for card A and bits                      When a card is selected, the reset channels provide a level
D5-D7 for card B are set to 0s, the clock channel is in                    shifted path from the RIN pin to the RST A/RST B pins.
synchronous mode. The remaining modes are used for                         When a card is deselected, its RST A/RST B pin is latched
asynchronous cards.                                                        at the current value of RIN.
In synchronous mode, the CLK A/CLK B pins follow the
SYNC pin for a channel that is selected. If a channel is
deselected (via the serial port), the CLK A/CLK B line for
that channel is latched at its current value.                              * U.S. Patent No. 6,356,140
                                                                                                                                   1955fd
                                                   For more information www.linear.com/LTC1955                                 11


LTC1955
Operation
Smart Card Detection Circuits                                         Automatic Deactivation
The PRES A/PRES B pins are used to detect the presence                The built-in deactivation sequence can be executed via the
of a smart card. An automatic debounce circuit waits until            serial port simply by setting the appropriate control bits
a smart card has been present for a continuous period                 (D0 and D1 or D8 and D9) to 0. The deactivation sequence
of typically 35ms. Once a valid card indication exists,               is outlined below.
the status bit for that channel is updated and may be
                                                                      1. The RST A/RST B pin for that channel is immediately
polled by cycling data through the serial port. The DOUT
                                                                           brought low.
pin (equivalent to D15) of the serial port can be used to
indicate the presence of a card on channel A in real time             2. The deactivation of the CLK A/CLK B pins depends upon
if LD is held low.                                                         which type of card is used:
The PRES A/PRES B pins have built-in pull-up current                       If the smart card was set to asynchronous mode, then
sources, so no external components are required for                        the CLK A/CLK B pin will be latched low on its next
switch detection. The pull-up current sources are designed                 falling edge. If no falling edges occur within 5µs (min),
to have a small current when the pin voltage is below ap-                  then the CLK A/CLK B line is forced low.
proximately 1V, but somewhat higher current when the                       If the smart card was set to synchronous mode, then the
pin voltage reaches 1V. This helps maintain low power                      CLK A/CLK B pin is immediately latched at its current
dissipation when a card is present and yet fast response                   value (either high or low) and then forced low after a
time to a card removal.                                                    duration of 5µs (min). During the 5µs timeout period,
The PRES A/PRES B pins can be configured to respond                        changes on SYNC will be ignored.
to either normally open or normally closed switches via               3. The I/O A/I/O B, C4A and C8A pins for that channel are
the NC/NO pin.                                                             brought low.
Activation/Deactivation                                               4. The VCCA/VCCB pin is brought low.
For maximum flexibility, the activation sequencing of the             If an error occurs on one smart card, operation of the
smart card is left to the application programmer. Upon                other card is unaffected.
activation, to comply with relevant smart card standards,
none of the smart card signal pins will be allowed to go              Electrical Fault Detection
high before the smart card supply voltage (VCCA/VCCB) has             Several types of faults are detected by the LTC1955. They
reached its final value. Deactivation can be achieved either          include VCCA/VCCB undervoltage, VCCA/VCCB overcurrent,
manually or automatically. An electrical fault condition will         CLK A/CLK B, RST A/RST B, C8A, C4A short-circuit, card
trigger the automatic deactivation.                                   removal during a transaction, failed answer to reset (ATR),
Manual deactivation may be performed under software                   supply undervoltage or UNDERV and chip overtemperature.
control by setting the smart card pins to 0V in the desired           To prevent false errors from plaguing the microcontroller,
sequence via the control pins (SYNC, ASYNC, RIN, DATA                 the electrical faults are acted upon only after a 5µs (min)
and the serial port). For most applications, this will be             timeout period. Card removal during transaction faults
cumbersome and the built-in deactivation will be used                 initiate the deactivation sequence immediately.
instead.
                                                                                                                                1955fd
12                                            For more information www.linear.com/LTC1955


                                                                                                                   LTC1955
Operation
VCCA/VCCB undervoltage faults are determined by compar-                An electrical fault can be cleared on either channel by
ing the actual output voltage with the internal reference              setting the voltage of that channel to 0V. Set D0 and D1
voltage. If the output is more than ~5% below its set point            to OO to clear channel B and set D8 and D9 to 00 to clear
for the entire timeout period, the fault is reported and the           channel A. It is not necessary to set all four bits to zeros.
deactivation sequence is initiated.
                                                                       Answer to Reset (ATR) Fault Detection
VCCA/VCCB overcurrent faults are detected by comparing
the output current of the LDOs with an internal reference              Answer to reset faults are detected by an internal counter
level. If the current of an LDO is more than 100mA (typ)               that is started once the RST A/B line goes high. If the DATA
for the entire timeout period, the fault is reported and the           pin remains high for 40,000 clock cycles, the ATR fault bit
deactivation sequence is initiated.                                    for a given channel is set in the serial port’s status register
                                                                       (see Table 1) and the FAULT pin is brought low.
CLK A/CLK B and RST A/RST B faults are detected by
comparing the outputs of these pins with their expected                An ATR fault cannot occur if the clock mode of a chan-
signals. If the signal on a pin is incorrect for the entire            nel is set to synchronous. ATR faults will only occur for
timeout period, the fault is reported and the deactivation             asynchronous smart cards.
sequence is initiated.                                                 ATR faults are cleared by bringing the RST A/B pin low
The clock channels are a special case. Since they can have             for the faulted channel. This will also clear the FAULT pin
a free running clock, the error indication is accumulated              to the Hi-Z state (assuming no other errors are causing
over a longer period of time without being cleared. Even               FAULT to be low).
though the clock may be running, an error will still be                An ATR fault will not automatically deactivate a card
detected.                                                              channel. It is the application programmer’s responsibility
An overtemperature fault is detected by sensing the junction           to check the status register for ATR faults and deacti-
temperature of the IC. If the junction temperature exceeds             vate the smart card channel in accordance with smart
approximately 150°C for the entire timeout period, the                 card standards. Generally, the application has 50ms
fault is reported by setting both fault bits (D4 and D12)              (EMV 2.1.3.1, 2.1.3.2) from the 40,000th clock pulse to
and the deactivation sequence is initiated.                            deactivate the card. Once the LTC1955 receives the de-
                                                                       activation command, it will shut down a card channel in
A card removal fault is determined as soon as the PRES A/              less than 250µs.
PRES B pin is high (for NC/NO = 0). Once this occurs,
the fault is reported and the deactivation sequence is                 Using the FAULT Pin
initiated.
                                                                       The FAULT pin can be used as an interrupt to a microcon-
If no card is present, and the application software attempts           troller. It is an open-drain output and generally requires
to power-up a card socket, an automatic fault will result              a pull-up resistor. The FAULT pin will go low when either
on that channel.                                                       an electrical fault, or an answer to reset fault, occurs on
Short-circuits on the I/O A/I/O B lines will not be detected           either channel. Thus, there are four possible faults that
by the fault detection hardware; however, a short-circuit              can cause it to indicate a problem. The serial port’s status
from these lines to their respective VCCA/VCCB pins will               register must be polled to find out what type of fault oc-
be compliant with the maximum current limits set by ap-                curred and on which channel. The FAULT pin is logically
plicable standards (<15mA).                                            equivalent to D4 + D5 + D12 + D13 (see Table 1).
                                                                                                                                  1955fd
                                               For more information www.linear.com/LTC1955                                     13


LTC1955
Applications Information
10kV ESD Protection                                                     be especially well bypassed. The capacitor for this node
                                                                        should be directly adjacent to the QFN package. The CPO
All smart card pins (CLK A/CLK B, RST A/RST B, I/O A/I/O B,
                                                                        and flying capacitors should be very close as well. The
C4A, C8A and VCCA/VCCB) can withstand over 10kV of
human body model ESD in-situ. In order to ensure proper                 LTC1955 can tolerate more distance between the LDO
ESD protection, careful board layout is required. The                   capacitors and the VCCA/B pins.
PGND and SGND pins should be tied directly to a ground                  Figure 3 shows an example of a tight printed circuit
plane. The VCCA/VCCB capacitors should be located very                  board using single-layer copper. For best performance, a
close to the VCCA/VCCB pins and tied immediately to the                 multilayer board can be used and should employ a solid
ground plane.                                                           ground plane on at least one layer.
Capacitor Selection                                                     The following capacitors are recommended for use with
                                                                        the LTC1955.
Warning: A polarized capacitor such as tantalum or alumi-
                                                                                       TYPE    VALUE  CASE SIZE MURATA P/N
num should never be used for the flying capacitor since
                                                                        CIN            X5R      4.7µF    0805    GRM40-034 X5R 475K 6.3
its voltage can reverse upon start-up of the LTC1955.                   CPO
Low ESR ceramic capacitors should always be used for                    CFLY           X5R       1µF     0603    GRM39 X5R 105K 6.3
the flying capacitor.                                                   VCCA/B
                                                                        CDVCC          X5R      0.1µF    0402    GRM36 X5R 104K 10
A total of six capacitors are required to operate the LTC1955.
An input bypass capacitor is required at PVBATT, SVBATT
and DVCC. Output bypass capacitors are required on each
of the smart card VCCA/VCCB pins. A charge pump flying
capacitor is required from C+ to C – and a charge storage
capacitor is required on the charge pump out pin CPO.
To prevent excessive noise spikes due to charge pump
operation, low ESR (equivalent series resistance) multi-
layer ceramic capacitors are strongly recommended.
                                                                                      VCCA
There are several types of ceramic capacitors available, each
having considerably different characteristics. For example,
X7R/X5R ceramic capacitors have excellent voltage and
temperature stability but relatively low packing density.
Y5V ceramic capacitors have apparently higher packing
density but poor performance over their rated voltage or
temperature ranges. Under certain voltage and temperature
conditions, Y5V and X7R/X5R ceramic capacitors can be
compared directly by case size rather than specified value
for a desired minimum capacitance.
Placement of the capacitors is critical for correct operation
of the LTC1955. Because the charge pump generates large
current steps, all of the capacitors should be placed as close
to the LTC1955 as possible. The low impedance nature of                                          GND       VBATT    VCCB 1955 F03
multilayer ceramic chip capacitors will minimize voltage
spikes but only if the power path is kept very short (i.e.,                          Figure 3. Optimum Single-Layer PCB Layout
minimum inductance). The PVBATT/SVBATT nodes should
                                                                                                                                    1955fd
14                                              For more information www.linear.com/LTC1955


                                                                                                                 LTC1955
Applications Information
Interfacing to a Microcontroller                                      Daisychained Operation
The serial port of the LTC1955 can be connected directly              For applications requiring more than two card sockets,
to a 68HC11 style microcontroller’s serial port. The mcro-            the serial port of the LTC1955 is designed to be easily
controller should be configured as the master device and              daisychained. The DOUT pin of one LTC1955 can be con-
its clock’s idle state should be set to high (MSTR = 1,               nected directly to the DIN pin of another LTC1955. Rather
CPOL = 1 and CPHA = 0 for the MC68HC11 family).                       than sending two 8-bit bytes before asserting LD, the
Figure 4 shows the recommended configuration and                      microcontroller should send two 8-bit bytes per device. LD
direction of data flow. Note that an additional I/O line              should only be asserted after all devices have been updated.
is necessary for LD to load the data once it has shifted              Figure 6 shows three LTC1955s cascaded in daisychain
around the loop. Command data is latched into the com-                fashion. In this case, the microcontroller would write six
mand register on the falling edge of the LD signal. The               8-bit bytes before asserting the LD pin. Alternatively, if
LTC1955 will begin to act on new command data as soon                 two serial ports are available on the microcontroller, then
as LD goes low. Any general purpose microcontroller I/O               two LTC1955s can be controlled independently.
line can be configured to control the LD pin.
                                                                      If the DATA lines of two or more LTC1955s are connected
The status of the LTC1955 is returned over the serial                 together, the static pull-up current will be the sum of the
port. Status data is latched into the shift register on the           devices. The static current can be brought back to the level
rising edge of the LD pin. Whenever the system is wait-               of a single LTC1955 by setting bit D3 on all but one of the
ing for status data from the LTC1955, its LD pin should               LTC1955s to 1 (see Table 1). Bit D3 disables the pull-up
be held low.                                                          current source on the DATA pin. This will help prevent VOL
                                                                      problems in multiple LTC1955 applications when driving
                                                                      the DATA or I/O pins low.
                                  µCONTROLLER                   LTC1955
                                          MOSI              DIN
                                                                                          CARD A
                                          MISO              DOUT
                                           SCK              SCLK
                                                                                          CARD B
                                            I/O             LD
                                                                                                 1955 F04
                                                Figure 4. Microcontroller Interface
                                                                                                                              1955fd
                                              For more information www.linear.com/LTC1955                                  15


LTC1955
Applications Information
Using S.A.M. Cards                                                   Using the UNDERV Pin
For applications using one or more installed S.A.M.                  The UNDERV pin can be used to add protection against a
cards, the PRES A/PRES B pins for those sockets must                 supply undervoltage fault. By using two external program-
be grounded before operation of the card can occur                   ming resistors, the undervoltage detection can be set to an
(assuming NC/NO is grounded). The PRES A/PRES B                      arbitrary level (Figure 7). To ensure that the smart cards
pull-up current is designed for very low consumption,                are properly shut down, there must be sufficient energy
but ultralow current can be achieved in shutdown by us-              available in the input bypass capacitor to run one or both
ing a microcontroller output to pull down on the PRES                smart cards until the deactivation cycle begins. It can take
A/PRES B pins only when communication is necessary.                  approximately 30µs from the detection of a fault until the
The fault detection circuitry will not allow a card socket           deactivation sequence begins. It is desirable to maintain
to be operated unless a card is detected.                            the VBATT supply at 2.7V or greater during this period.
                                                                     Consider the following (worst-case) example:
Asynchronous Channel A Card Detection
                                                                     1. The UNDERV pin is programmed to trip below 3.1V.
Since the shift register is transparent when LD is held
low, DOUT is the same as D15. Recall from Table 1 that               2. It is possible to have both cards activated at 5V and
D15 indicates the status of the card detection channel for               drawing 60mA.
channel A. Thus, it is not necessary to perform an entire
                                                                     Since the output voltage is programmed to 5V, the charge
read/write operation to determine the card detection
                                                                     pump will be acting as a voltage doubler. With two cards
status of channel A. With LD low, DOUT can be used to
                                                                     drawing 60mA each, the input current will be 2 • (60mA
generate a real time card detection interrupt. This could be
                                                                     + 60mA), or about 240mA. Allowing the VBATT supply to
useful for one S.A.M. card, one smart card application.              droop from 3.1V to 2.7V during the 30µs timeout period,
                                                                     the input capacitance would need to be at least:
Inter Card Communication
                                                                          240mA / [(3.1V – 2.7V) / 30µs] or 18µF.
Communication is possible directly from one card socket
to the other when both cards are selected at the same                Thermal Management
time. This can be achieved by the following sequence of
actions.                                                             To minimize power dissipation, the LTC1955 will actively
                                                                     decide whether to step up or down depending on the
1. Start with both cards off and deselected                          required output voltages and available input voltage.
2. Activate the supply of the slave card                             However, for optimum efficiency, the LTC1955 should be
                                                                     powered from a 3.3V supply.
3. Select the slave card only
                                                                     If the input voltage is above 3.6V, and both cards are
4. Initiate a reset on the slave card
                                                                     drawing maximum current, there can be substantial power
5. Deselect the slave card                                           dissipation in the LTC1955. If the junction temperature in-
6. Activate the supply of the master card                            creases above approximately 150°C, the thermal shutdown
                                                                     circuitry will automatically deactivate both channels. To
7. Select the master card only                                       reduce the maximum junction temperature, a good thermal
8. Initiate a reset on the master card                               connection to the PC board is recommended.
9. Select both cards                                                 Zero Shutdown Current
                                                                     Although the LTC1955 is designed to have very low shut-
                                                                     down current, it can still draw over a microampere on both
                                                                                                                             1955fd
16                                           For more information www.linear.com/LTC1955


                                                                                                                        LTC1955
Applications Information
DVCC and VBATT when in shutdown. For applications that                ROLCP is dependent on a number of factors including the
require virtually zero shutdown current, the DVCC pin can             switching term, 1/(fOSC • CFLY), internal switch resistances
be grounded. This will reduce the VBATT current to well               and the nonoverlap period of the switching circuit. How-
under a single microampere. Internal logic ensures that               ever, for a given ROLCP, the minimum CPO voltage can be
the LTC1955 is in shutdown when DVCC is grounded. Note,               determined from the following expression:
however, that all of the logic signals that are referenced                VCPO ≥ 2VBATT – (ICCA + ICCB)ROLCP
to DVCC (DIN, SCLK, LD, DATA, RIN, SYNC, ASYNC and
NC/NO) will have to be at 0V as well, to prevent ESD diodes           The LDOs have been designed to meet all applicable smart
to DVCC from being forward-biased.                                    card standards for VCC with VCPO as low as 5.13V. Given
                                                                      this information, trade-offs can be made by the user with
Operation at Higher Supplies                                          regard to total consumption (ICCA + ICCB) and minimum
                                                                      supply voltage.
If a 5.5V to 6V supply voltage is available, it is possible
to achieve some power savings by bypassing the charge
                                                                                 ROLCP CPO
pump. The higher supply can be connected directly to the
CPO pin. As long as the voltage on CPO is higher than that
at which it ordinarily regulates (5.35V or 3.7V depending                     +  2VBATT    LDO A        VCCA      LDO B      VCCB
                                                                              –
on voltage selections), the charge pump’s oscillator will
not run. This configuration can give considerable power                                                        1955 F05
savings since the charge pump is not being used.
A voltage source is still needed on both DVCC and SVBATT/                             Figure 5. Equivalent Open-Loop Circuit
PVBATT in this configuration. Recall that DVCC sets the
logic reference level for all the control and smart card
                                                                      Changing the Smart Card Supply Voltage
communication pins. The voltage on SVBATT/PVBATT can
be any convenient level that meets the parameters in the              Although the LTC1955 control system will allow the smart
Electrical Characteristics table.                                     card voltage to be changed from one value to the next
                                                                      without an interim power-down, this is not recommended.
The 5.5V to 6V supply can be left permanently connected
                                                                      When changing from a higher voltage to a lower voltage
to CPO, but there will be approximately 5µA of current flow
                                                                      there will generally not be a problem; however, changing
into CPO when the LTC1955 is in shutdown.
                                                                      from a lower voltage to a higher voltage will result in both
Charge Pump Strength                                                  an undervoltage condition and an overcurrent condition
                                                                      on that channel. The likely result is that the channel will
Under low VBATT conditions, the amount of current available           automatically deactivate. Applicable smart card standards
to the smart cards is limited by the charge pump.                     specify that the smart card supply be powered to zero
Figure 5 shows how the LTC1955 can be modeled as a                    before applying a new voltage.
Thevenin equivalent circuit to determine the amount of
current available given the effective input voltage, 2VBATT           Compliance Testing
and the effective open-loop output resistance, ROLCP.                 Inductance due to long leads on type approval equipment
From Figure 5, the available current is given by:                     can cause ringing and overshoot that leads to testing
                                                                      problems. Small amounts of capacitance and damp-
                  2V       –V
    ICCA +ICCB ≤ BATT CPO                                             ing resistors can be included in the application without
                      ROLCP                                           compromising the normal electrical performance of the
                                                                      LTC1955 or smart card system. Generally, a 100Ω resis-
                                                                      tor and a 20pF capacitor will accomplish this, as shown
                                                                      in Figure 8.
                                                                                                                                  1955fd
                                              For more information www.linear.com/LTC1955                                        17


LTC1955
Applications Information
                                                           1µF
                                         4.7µF          11       14       21    2
                                           12, 13     C–       C+     PRES B PRES A
                                                  VBATT
       INPUT                                9, 10
                                                  GND                                        SMART CARD
      POWER                                     1
                                                  DVCC
                                               23
                                                  UNDERV
                                               24
       FAULT                                      FAULT                                      VENDOR CARD
                                               27                LTC1955
                                                  DIN
      4-WIRE                                   28
                                                  DOUT
   COMMAND                                     26
                                                  SCLK
   INTERFACE                                   25
                                                  LD
                                               29                                   15
                                                  DATA                          CPO
      4-WIRE                                   30
                                                  RIN                                  4.7µF
        CARD                                   32
   INTERFACE                                      SYNC
                                               31
                                                  ASYNC
                                                           1µF
                                         4.7µF          11       14       21    2
                                           12, 13     C–       C+     PRES B PRES A
                                                  VBATT
                                            9, 10
                                                  GND                                        SMART CARD
                                                1
                                                  DVCC
                                               23
                                                  UNDERV
                                               24
                                                  FAULT                                      VENDOR CARD
                                               27                LTC1955
                                                  DIN
                                               28
                                                  DOUT
                                               26
                                                  SCLK
                                               25
                                                  LD
                                               29                                   15
                                                  DATA                          CPO
                                               30
                                                  RIN                                  4.7µF
                                               32
                                                  SYNC
                                               31
                                                  ASYNC
                                                           1µF
                                         4.7µF          11       14       21    2
                                           12, 13     C–       C+     PRES B PRES A
                                                  VBATT
                                            9, 10
                                                  GND                                        VENDOR CARD
                                                1
                                                  DVCC
                                               23
                                                  UNDERV
                                               24
                                                  FAULT                                      VENDOR CARD
                                               27                LTC1955
                                                  DIN
                                               28
                                                  DOUT
                                               26
                                                  SCLK
                                               25
                                                  LD
                                               29                                   15
                                                  DATA                          CPO
                                               30
                                                  RIN                                  4.7µF
                                               32
                                                  SYNC
                                               31
                                                  ASYNC
                                                                                                      1955 F07
                  Figure 6. Multiple LTC1955s Daisychained Together
                                                                                                               1955fd
18                       For more information www.linear.com/LTC1955


                                                                                                  LTC1955
Applications Information
                                                             MAIN SUPPLY
                                                             VTRIP = 1.23V (1 + R1/R2)
                                                         R1
                                                 23
                                        UNDERV
                                  LTC1955                R2
                                                                                1955 F08
                              Figure 7. Setting the Undervoltage Trip Point
                               100Ω
                        I/O X                                               C7
                               100Ω                         20pF                   SMART
                       CLK X                                                C3      CARD
               LTC1955         100Ω                 20pF                          SOCKET
                       RST X                                                C2
                                            20pF
                        VCCX                                                C1
                                    1µF                             0.1µF        C5
                                                                                         1955 F09
                               Figure 8. Additional Components for
                               Improved Compliance Testing
                                                                                                       1955fd
                                 For more information www.linear.com/LTC1955                          19


LTC1955
Package Description
Please refer to http://www.linear.com/designtools/packaging/ for the most recent package drawings.
                                                                                UH Package
                                                                 32-Lead Plastic QFN (5mm × 5mm)
                                                                (Reference LTC DWG # 05-08-1693 Rev D)
                                                                          0.70 ±0.05
5.50 ±0.05
       4.10 ±0.05
                                         3.45 ±0.05
               3.50 REF
              (4 SIDES)
                                                 3.45 ±0.05
                                                                             PACKAGE OUTLINE
                                                             0.25 ±0.05
                                                            0.50 BSC
                                 RECOMMENDED SOLDER PAD LAYOUT
                        APPLY SOLDER MASK TO AREAS THAT ARE NOT SOLDERED                                     BOTTOM VIEW—EXPOSED PAD
                                                                                                                                                PIN 1 NOTCH R = 0.30 TYP
                                                                                 0.75 ±0.05         R = 0.05  R = 0.115                         OR 0.35 × 45° CHAMFER
                                               5.00 ±0.10
                                                                                                        TYP         TYP
                                                (4 SIDES)                                                                         31 32
                                                                                              0.00 – 0.05
                                                                                                                                                  0.40 ±0.10
                                       PIN 1
                                       TOP MARK
                                       (NOTE 6)                                                                                                  1
                                                                                                                                                 2
                                                                                                               3.45 ±0.10
                                                                                              3.50 REF
                                                                                             (4-SIDES)
                                                                                                                       3.45 ±0.10
                                                                                                                                                (UH32) QFN 0406 REV D
                                                                                              0.200 REF                              0.25 ±0.05
                                                                                                                                    0.50 BSC
                            NOTE:
                            1. DRAWING PROPOSED TO BE A JEDEC PACKAGE OUTLINE
                               M0-220 VARIATION WHHD-(X) (TO BE APPROVED)
                            2. DRAWING NOT TO SCALE
                            3. ALL DIMENSIONS ARE IN MILLIMETERS
                            4. DIMENSIONS OF EXPOSED PAD ON BOTTOM OF PACKAGE DO NOT INCLUDE
                               MOLD FLASH. MOLD FLASH, IF PRESENT, SHALL NOT EXCEED 0.20mm ON ANY SIDE
                            5. EXPOSED PAD SHALL BE SOLDER PLATED
                            6. SHADED AREA IS ONLY A REFERENCE FOR PIN 1 LOCATION
                               ON THE TOP AND BOTTOM OF PACKAGE
                                                                                                                                                                      1955fd
20                                                              For more information www.linear.com/LTC1955


                                                                                                                                             LTC1955
Revision History                      (Revision history begins at Rev C)
REV DATE  DESCRIPTION                                                                                                                          PAGE NUMBER
 C  11/13 Remove tLW spec from Serial Port Timing                                                                                                    4
          Revised Serial Port Timing section and diagram                                                                                             9
 D  2/14  Added tLFC parameter to Serial Port Timing electrical parameters.                                                                          4
          Modified Figure 1.                                                                                                                         9
                                                                                                                                                       1955fd
                                                                                                                                                    21
                              Information furnished by Linear Technology Corporation is believed to be accurate and reliable.
                              However, no responsibility is assumed for its use. Linear Technology Corporation makes no representa-
                                                      For more
                              tion that the interconnection         information
                                                            of its circuits        www.linear.com/LTC1955
                                                                            as described herein will not infringe on existing patent rights.


LTC1955
Typical Application
                                                        Battery-Powered RS232 to Dual Smart Card Interface
                             0.1µF
                                                                                                                 FAULT
                                                              0.1µF                                                                                           4.7µF
                                                                              47k              RESET         47k            0.1µF         180k       262k                +
                                                                                                                                                                              Li-ION
                       16     17    4                    21     45   19      37                                                      1             23         12, 13
                                                                                                                     1k
                   RXEN DREN      VCC                MOD B VDD VRH XIRQ                      4       5      3                    DVCC         UNDERV      VBATT
                                                                                            VCC18 VCC3 VCCA
                                                                                       36 1
                                                                                 RST        RST                         24
                                                                                                                           FAULT
                                                                                              LTC1728ES5-1.8
                                                                                                   GND
                      LTC1348CG                            MC68L11E9PB2                                                                 LTC1955EUH
  DB9                                                                                                2                                                             3                    C8
                                                                                                                                                            C8A
                                                                                                                                                                   4                    C4
                                                                                                                                                            C4A
    RD 2    7                            25    40                                      38                                                                          5                    C7
                DR1OUT           DR1IN            PD1 (TXD)                      IRQ                                                                       I/O A
    TD 3    8                            24    39                                      42                               27                                         6                    C2  CARD A
                RX1IN           RX1OUT            PD0 (RXD)             (MOSI) PD3                                         DIN                            RST A
                                                                                       41                               28                                         7                    C3
                                                                        (MISO) PD2                                         DOUT                           CLK A
  GND                                                                                  43                               26                                         8                    C1
                                                                         (SCK) PD4                                         SCLK                            VCCA
      5                                                                                44                               25
                                                                            (SS) PD5                                       LD                                             1µF        0.1µF
                                                                                                                                                                                             C5
            5                            27                                                                                                                        2
                C1+                 C3+                                                                                                                 PRES A
  0.1µF                                     0.1µF
            6                            26
                C1–                 C3–
            2
                C2+                                                                    24                               31                                         20                   C7
                                                                            (2MHz) E                                       ASYNC                           I/O B
  0.1µF                                                                                8                                32                                         19                   C2  CARD B
            3                                                                    PB1                                       SYNC                           RST B
                C2–                                                                    9                                30                                         18                   C3
                                                                                 PB0                                       RIN                            CLK B
                                                                                       1                                29                                         17                   C1
                                                                           (IC3) PA0                                       DATA                            VCCB
                                                                                       28
                                                                                 PC0                                                                                      1µF        0.1µF
                                                                                                                                                                                             C5
                                                                                                                                                                   21
                                                                                                                                                        PRES B
                 V+      V–        GND             VRL VSS MODA EXTAL          XTAL                                         C–     C+   CPO       GND    NC/NO
                  1       28          15              18  20    22      26        27                                          11     14   15        9, 10     22
         0.1µF               0.1µF                                                                                                           4.7µF
                                                                         10M
                                                                                   8.000MHz                                    1µF
                                                               27pF                  27pF
                                                                                                                                                                                             1955 TA02
Related Parts
PART NUMBER                 DESCRIPTION                                                                        COMMENTS
LTC1755/LTC1756             ISO 7816-3 and EMV Compatible Smart Card Interface                                 VOUT = 3V/5V, VIN = 2.7V to 6V, SSOP-16/-24 Package
LTC1555                     SIM Power Supply and Level Translator Step-Up/Step-Down                            VOUT = 3V/5V, VIN = 2.7V to 10V, SSOP-16/-20 Package
                            Charge Pump
LTC1555L-1.8                SIM Power Supply and Level Translator Step-Up/Step-Down                            VOUT = 1.8V/3V/5V, VIN = 2.6V to 6V, SSOP-16 Package
                            Charge Pump
LTC4555                     SIM Power Supply and Level Translator                                              VOUT = 1.8V/3V, VIN = 3V to 6V, 3mm × 3mm QFN Package
LTC4556                     SIM Power Supply and Level Translator                                              VOUT = 1.8V/3V, VIN = 3V to 6V, 3mm × 3mm QFN Package
LTC4557                     SIM Power Supply and Level Translator                                              VOUT = 1.8V/3V, VIN = 3V to 6V, 3mm × 3mm QFN Package
                                                                                                                                                                                               1955fd
               Linear Technology Corporation
22
                                                                                                                                                                      LT 0214 REV D • PRINTED IN USA
               1630 McCarthy Blvd., Milpitas, CA 95035-7417         For more information www.linear.com/LTC1955
               (408) 432-1900 ● FAX: (408) 434-0507       ●  www.linear.com/LTC1955                                                                    LINEAR TECHNOLOGY CORPORATION 2002


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Analog Devices Inc.:
 LTC1955IUH#TRPBF LTC1955EUH#PBF LTC1955EUH#TR LTC1955EUH#TRPBF LTC1955EUH
LTC1955IUH#PBF
