                                                                                                                                                     LTC4318
                                                                                                                           Dual I2C/SMBus
                                                                                                                 Address Translator
Features                                                                         Description
nn  Allows Multiple Slaves with the Same Address to                               The LTC®4318 enables the hardwired address of one or
    Coexist on the Same Bus                                                       more I2C or SMBus slave devices to be translated to a
nn Resistor Configurable Address Translation                                      different address. This allows slaves with the same hard-
nn No Software Programming Required                                               wired address to coexist on the same bus. Only discrete
nn Compatible with SMBus, I2C and I2C Fast Mode                                   resistors are needed to select the new address and no
nn Pass-Through Mode Allows General Call Addressing                               software programming is required. Up to 127 different
nn ±4kV HBM ESD Ruggedness                                                        address translations are available.
nn Level Translation for 2.5V, 3.3V and 5V Buses
nn Stuck Bus Timeout
                                                                                  The LTC4318 incorporates a pass-through mode which
nn Prevents SDA and SCL Corruption During Live Board
                                                                                  disables the address translations and allows general call
                                                                                  addressing by the master. The LTC4318 is designed to
    Insertion and Removal
nn Support Bus Hot Swap
                                                                                  automatically recover from abnormal bus conditions like
nn 20-Lead QFN 4mm × 4mm Package
                                                                                  bus stuck low or premature STOP bits.
                                                                                                                     NUMBER OF INPUT                NUMBER OF OUTPUT
                                                                                  PART NUMBER                              CHANNELS                         CHANNELS
Applications                                                                      LTC4316                                      1                                  1
                                                                                  LTC4317                                      1                                  2
nn  I2C, SMBus Address Expansion
                                                                                  LTC4318                                      2                                  2
nn Address Translation
                                                                                  L, LT, LTC, LTM, Linear Technology and the Linear logo are registered trademarks of Linear
nn Servers                                                                        Technology Corporation. All other trademarks are the property of their respective owners.
                                                                                  Protected by U.S. Patents, including 6356140, 6650174, 7032051, 7478286. Patent pending.
nn Telecom
Typical Application
  3.3V                                                           5V
                         VCC          TRANSLATES
                                      BY 0x02
       SCL        SCLIN1 SCLOUT1                           SCL
 MASTER #1                                                  SLAVE# 1                                                                                                R/W     ACK
                                                                                             START                          ADDRESS BITS                            BIT     BIT
       SDA        SDAIN1   SDAOUT1                         SDA
                                                                                                      a6        a5      a4      a3       a2       a1        a0
SENDS                  LTC4318                            RECEIVES
ADDRESS 0x34                                              ADDRESS 0X36               SCLIN1
  3.3V            ENABLE1    READY1
                                                                                     SDAIN1            0        0        1      1        0        1         0        0    = 0x34
                  ENABLE2    READY2                             5V
                                      TRANSLATES                               TRANSLATION
                                                                                       BYTE            0        0        0      0        0        0         1        0    = 0x02
                                      BY 0x04
       SCL        SCLIN2    SCLOUT2                        SCL
 MASTER #1                                                  SLAVE# 2               SDAOUT1             0        0        1      1        0        1         1        0    = 0x36
       SDA        SDAIN2   SDAOUT2                         SDA                                                                                                           4318 TA01b
SENDS                         XORH2                       RECEIVES
ADDRESS 0x32      GND         XORH1                       ADDRESS 0X36
                   XORL2 XORL1
           3.3V
                845k    61.9k   93.1k         4318 TA01a
                                                                                                                                                                            4318fa
                                                         For more information www.linear.com/LTC4318                                                                        1


LTC4318
Absolute Maximum Ratings                                                         Pin Configuration
(Notes 1, 2)
                                                                                                                         TOP VIEW
Input Supply Voltage VCC.............................. –0.3V to 6V
                                                                                                               ENABLE2                     SCLOUT2
Input Voltages
                                                                                                                         GND                         SCLIN2
ENABLEn....................................................... –0.3V to 6V                                                        NC
                                                                                                               20 19 18 17 16
XORLn, XORHn.................................–0.3V to VCC + 0.3V
Output Voltages                                                                                  XORH2 1                                                        15 SCLIN1
READYn........................................................ –0.3V to 6V                       XORL2 2                                                        14 SCLOUT1
                                                                                                                                   21
Output Currents                                                                                  XORH1 3
                                                                                                                                  GND
                                                                                                                                                                13 SDAOUT1
                                                                                                 XORL1 4                                                        12 SDAIN1
READYn, SDAOUTn.................................................50mA
                                                                                                    VCC 5                                                       11 SDAIN2
Input/Output Voltages
SCLINn, SCLOUTn, SDAINn, SDAOUTn......... –0.3V to 6V                                                            6        7        8         9 10
Operating Temperature Range
                                                                                                               ENABLE1   READY2   READY1
                                                                                                                                           NC
   LTC4318C................................................. 0°C to 70°C                                                                             SDAOUT2
   LTC4318I..............................................–40°C to 85°C                                             UF PACKAGE
                                                                                                      20-LEAD (4mm × 4mm) PLASTIC QFN
Storage Temperature Range................... –65°C to 150°C                                                 TJMAX = 150°C,θJA = 37°C/W
                                                                                              EXPOSED PAD (PIN 21) IS GND, PCB CONNECTION OPTIONAL
Order Information
LEAD FREE FINISH             TAPE AND REEL               PART MARKING*                PACKAGE DESCRIPTION                                                      TEMPERATURE RANGE
LTC4318CUF#PBF               LTC4318CUF#TRPBF             4318                        20-Lead (4mm × 4mm) Plastic QFN                                          0°C to 70°C
LTC4318IUF#PBF               LTC4318IUF#TRPBF             4318                        20-Lead (4mm × 4mm) Plastic QFN                                          –40°C to 85°C
Consult LTC Marketing for parts specified with wider operating temperature ranges. *The temperature grade is identified by a label on the shipping container.
For more information on lead free part marking, go to: http://www.linear.com/leadfree/
For more information on tape and reel specifications, go to: http://www.linear.com/tapeandreel/. Some packages are available in 500 unit reels through
designated sales channels with #TRMPBF suffix.
                                                                                                                                                                               4318fa
2                                                       For more information www.linear.com/LTC4318


                                                                                                                                          LTC4318
Electrical Characteristics                                           The l denotes the specifications which apply over the full operating
temperature range, otherwise specifications are at TA = 25°C. VCC = 3.3V, unless otherwise specified.
SYMBOL                   PARAMETER                                     CONDITIONS                                           MIN        TYP       MAX      UNITS
Supply
VCC                      Input Supply Range                                                                          l      2.25                  5.5          V
ICC                      Input Supply Current                          ENABLE = 3.3V, SCLIN = SDAIN = 0V             l                 0.8         2         mA
                                                                       ENABLE = 0V, SCLIN = SDAIN = 0V               l                 350       800          µA
VCC(UVLO)                VCC Supply Undervoltage Lockout               VCC Rising                                    l      1.9        2.1        2.2          V
VCC(HYST)                VCC Supply Undervoltage Lockout Hysteresis                                                                    100                   mV
ENABLE and READY
VENABLE(TH)              ENABLE Threshold Voltage                      Enable Rising                                 l        1        1.4        1.8          V
VENABLE(HYST)            ENABLE Hysteresis                                                                                              50                   mV
IENABLE(LEAK)            ENABLE Input Current                                                                        l                            ±1          µA
VREADY(OL)               READY Output Low Voltage                      I = 3mA                                       l                            0.4          V
IREADY(OH)               READY Off Leakage Current                     VCC = VREADY = 5.5V                           l                            ±5          µA
SCLIN, SDAIN, SCLOUT, SDAOUT
VSCL,SDA(TH)             Threshold Voltage                             SDA, SCL Pins Rising                          l      1.5        1.8        2.0          V
VSCL,SDA(HYST)           Hysteresis                                                                                                     50                   mV
ISCL,SDA(LEAK)           Leakage Current                               SDA, SCL Pins = 5.5V, 0V, VCC = 5.5V,0V       l                           ±10          µA
ISCL,SDA(LEAK-INOUT) Input to Output Leakage Current                   SDAIN, SCLIN Pins = 5.5V, VCC = 5.5V,         l                           ±10          µA
                                                                       SDAOUT, SCLOUT Pins = 4.5V
CSCL,SDA                 Pin Capacitance                               Note 3                                        l                            10          pF
VSCL,SDA(PRE)            Precharge Voltage                                                                           l      0.8         1         1.2          V
VSDAOUT(OL)              SDAOUT Output Low Voltage                     I = 4mA                                       l                            0.4          V
RDS(ON)                  Pass Switch On Resistance                     VCC = 2.25V, SCLIN = SDAIN = 0.4V             l                   3        12           Ω
                                                                       VCC = 3.3V, SCLIN = SDAIN = 0.4V              l                 2.2         8           Ω
                                                                       VCC = 5V, SCLIN = SDAIN = 0.4V                l                 1.8         6           Ω
XORH, XORL
IXORH/XORL               XORH and XORL Input Current                                                                 l                           ±100         nA
I2C Interface Timing
fSCL(MAX)                Maximum SCLIN Clock Frequency                 Note 3                                        l      400                              kHz
tPDHL(SDAOUTn)           SDAOUT Fall Delay                             C = 100pF, RPULLUP = 10k                      l                 170       300          ns
tf(SDAOUTn)              SDAOUT Fall Time                              C = 100pF, RPULLUP = 10k                      l       20         60       300          ns
tTIMEOUT                 Stuck Bus Timeout                             SCLIN Held Low or High                        l       25         30        35         ms
tIDLE                    Bus Idle Time                                                                               l       80        120       160          µs
tGLITCH                  SCLIN and SDAIN Glitch Filter                                                               l       50        100                    ns
Note 1: Stresses beyond those listed under Absolute Maximum Ratings               Note 2: All currents into pins are positive and all voltages are referenced to
may cause permanent damage to the device. Exposure to any Absolute                GND unless otherwise indicated.
Maximum Rating condition for extended periods may affect device                   Note 3: Guaranteed by design and not tested.
reliability and lifetime.
                                                                                                                                                           4318fa
                                                         For more information www.linear.com/LTC4318                                                       3


LTC4318
Timing Diagram
                                                                                           SDAIN          50%
                                                                                                                             70%
                                                                                       SDAOUT                                  50%
                                                                                                                                 30%
                                                                                                           tPDHL(SDAOUT)
                                                                                                                         tf(SDAOUT)            4318 EC
Typical Performance Characteristics                                                                                                             TA = 25°C, VCC = 3.3V unless otherwise noted.
                                                                                                 Standby Supply Current vs                                                                Pass Switch-On Resistance vs
                    Supply Current vs Temperature                                                Temperature                                                                              VCC
            1.0                                                                            800                                                                                        6
                    ENABLE = VCC                                                                     ENABLE = 0V                                                                          SDAIN = SCLIN = 0.4V
                                                                                           700
                                                                                                                                                                                      5
            0.9                                                                            600
                                                                                                                                                                                      4
                       VCC = 5V                                                            500                                                                                                               TA = 25°C
                                                                                                                                                                        RDS(ON) (Ω)
                                   VCC = 3.3V
ICC (mA)    0.8                                                          ICC (μA)          400                                                                                        3                                  TA = 85°C
                                                VCC = 2.25V                                300
                                                                                                                                                                                      2
            0.7                                                                            200
                                                                                                                                                                                                                  TA = –40°C
                                                                                                                                                                                      1
                                                                                           100
            0.6                                                                              0                                                                                        0
               –50      –25     0    25     50           75        100                        –50        –25       0    25     50         75             100                           2.0     2.5     3.0     3.5       4.0    4.5        5.0
                               TEMPERATURE (°C)                                                                   TEMPERATURE (°C)                                                                           VCC (V)
                                                              4318 G01                                                                           4318 G02                                                                             4318 G03
                    Pass Switch-On Resistance vs                                                 READY Output Low                                                                         SDAOUT Fall Delay vs
                    Temperature                                                                  Voltage vs Current                                                                       Temperature
                6                                                                          100                                                                                      240
                    SDAIN = SCLIN = 0.4V                                                             VCC = 3.3V                                                                           VCC = 3.3V
                                                                                                                                                                                          C = 100pF
                5                                                                                                                                                                   220
                                                                                            80
                                                                                                                                   TA = 85°C                                        200
                                                                                                                                                               tPDHL(SDAOUT) (ns)
                4
                                                                         VREADY(OL) (mV)
                                       VCC = 2.25V                                          60                      TA = 25°C
  RDS(ON) (Ω)
                                                                                                                                                                                    180
                3
                                           VCC = 3.3V
                                                                                                                                                                                    160
                                                                                            40
                2
                                             VCC = 5V                                                                              TA = –40°C                                       140
                                                                                            20
                1                                                                                                                                                                   120
                0                                                                            0                                                                                      100
                 –50    –25     0    25     50           75        100                           0          2        4        6          8               10                            –50    –25       0    25     50          75         100
                               TEMPERATURE (°C)                                                                      IREADY (mA)                                                                       TEMPERATURE (°C)
                                                              4318 G04                                                                           4318 G05                                                                             4318 G06
                                                                                                                                                                                                                                        4318fa
4                                                                                      For more information www.linear.com/LTC4318


                                                                                                                                                                                        LTC4318
Typical Performance Characteristics                                                                                               TA = 25°C, VCC = 3.3V unless otherwise noted.
                           SDAOUT Fall Delay vs Bus                                               SDAOUT Fall Time vs                                                    SDAOUT Fall Time vs Bus
                           Capacitance                                                            Temperature                                                            Capacitance
                     300                                                                    120                                                                    120
                                                                                                  C = 100pF
                     275
                                                                                            100                                                                    100               VCC = 5V
                     250         VCC = 5V                                                                         VCC = 5V
tPDHL(SDAOUT) (ns)
                     225                    VCC = 3.3V
                                                                          tf(SDAOUT) (ns)                                                        tf(SDAOUT) (ns)
                                                                                             80                                                                     80
                     200                             VCC = 2.25V                                                                                                                     VCC = 3.3V
                                                                                                                 VCC = 3.3V
                     175                                                                     60                                                                     60
                     150                                                                                                                                                            VCC = 2.25V
                                                                                             40                  VCC = 2.25V                                        40
                     125
                     100                                                                     20                                                                     20
                           0   200     400     600       800       1000                        –50    –25      0    25     50    75        100                           0    200   400     600    800       1000
                                        CBUS (pF)                                                             TEMPERATURE (°C)                                                       CBUS (pF)
                                                               4318 G07                                                               4318 G08                                                           4318 G09
Pin Functions
XORL1/XORL2: Translator XOR Lower Nibble Configura-                                                                  to SCLOUT. Connect a pull-up resistor, typically 10k, from
tion Input. The DC voltage at this pin configures the lower                                                          this pin to the bus pull-up supply. Leave open or tie to
4-bit nibble of the address translation byte. Tie the pin to                                                         GND if unused.
an external resistive divider connected between VCC and                                                              SCLIN1/SCLIN2: Input Bus Clock Input and Output. Con-
GND to set the desired DC voltage.                                                                                   nect this pin to the SCL line on the master side. An external
XORH1/XORH2: Translator XOR Upper Nibble Configura-                                                                  pull-up resistor or current source is required. Connect to
tion Input. The DC voltage at this pin configures the upper                                                          VCC through a pull-up resistor if unused.
3-bit nibble of the address translation byte. Tie the pin to                                                         SCLOUT1/SCLOUT2: Output Bus Clock Input and Output.
an external resistive divider connected between VCC and                                                              Connect this pin to the SCL line on the slave side. An external
GND to set the desired DC voltage. Connect this pin to VCC                                                           pull-up resistor or current source is required. Connect to
to activate pass-through mode. See Application Informa-                                                              VCC through a pull-up resistor if unused.
tion section for more details.
                                                                                                                     SDAIN1/SDAIN2: Input Bus Data Input and Output. Connect
ENABLE1/ENABLE2: Enable Input. If ENABLE pin is low,                                                                 this pin to the SDA line on the master side. An external
the address translation is disabled, SDAIN is disconnected                                                           pull-up resistor or current source is required. Connect to
from SDAOUT, and SCLIN is disconnected from SCLOUT.                                                                  VCC through a pull-up resistor if unused.
A low to high transition on ENABLE restarts the configura-
tion of the address translation byte and also enables the                                                            SDAOUT1/SDAOUT2: Output Bus Data Input and Output.
address translation. Connect to VCC if unused.                                                                       Connect this pin to the SDA line on the slave side. An
                                                                                                                     external pull-up resistor or current source is required.
Exposed Pad: Exposed pad may be left open or connected                                                               Connect to VCC through a pull-up resistor if unused.
to device GND.
                                                                                                                     VCC: Power Supply Input (2.25V to 5.5V). If the supply
GND: Device Ground.                                                                                                  voltages for the input and output buses are different, con-
READY1/READY2: Ready Status Output. This is an open                                                                  nect this pin to the lower supply. If the input and output
drain output to indicate that the device is ready for address                                                        supplies have the same nominal value and with tolerance
translation. The pin releases high when the LTC4318 has                                                              less than or equal to ±10%, connect VCC to either supply.
completed configuration of the address translation byte,                                                             Bypass with at least 0.1µF to GND.
SDAIN is connected to SDAOUT and SCLIN is connected
                                                                                                                                                                                                          4318fa
                                                                                       For more information www.linear.com/LTC4318                                                                         5


LTC4318
Block Diagram
  VCC       1V                1V                                                                          1V             1V
                    PRECHARGE         PRECHARGE                                                 PRECHARGE      PRECHARGE
               200k              200k                                                                        200k           200k
  SCLIN1                                                                                                                         SCLOUT1
                                                                                 N1
  SCLIN2                                                                                                                         SCLOUT2
  SDAIN1                                                                                                                         SDAOUT1
                                                                                       N2
  SDAIN2                                                                                                                         SDAOUT2
                         CMP2
                    +
                                                          XOR
                                                                                                    N3
          1.8V     –                         7-BIT
                                        ADDRESS
                                    TRANSLATION
                                             BYTE
                                                                                                               CMP4
                                                                                                                       +
                                       GLITCH
                                       FILTER
                                                                                                                       – 1.8V
                         CMP1                                                                                  CMP3
                    +                                                                                                  +
                                       GLITCH
                                       FILTER
          1.8V     –                                                                                                   – 1.8V
                                                            I2C Hot                              I2C Hot
                                                                             CONTROL                                              READY1
                                                             Swap                                 Swap
                                                                              LOGIC
                                                             LOGIC                                LOGIC
  XORH1
                                                                                                                             N4   READY2
  XORH2
  XORL1
                                                                                                                                 ENABLE1
  XORL2                  CMP6                                                                                  CMP5
                    +                                                                                                  +
                                                                                                                                 ENABLE2
         VCC/2     –                                                                       PRECHARGE                   – 1.4V
                                                  GND
                                                                                                                                     4318 BD
                                                                                                                                            4318fa
6                                                     For more information www.linear.com/LTC4318


                                                                                                                  LTC4318
Operation
                                                                       SCLIN to SCLOUT while N2 connects SDAIN to SDAOUT.
The LTC4318 is an I2C/SMBus address translator. It bridges             In most conditions, N1 and N2 stay on so that the input
two segments of an I2C bus, reading incoming addresses                 and output buses are connected.
on the master side and retransmitting them to the slave
side with the 7-bit I2C addresses translated in real time.             Translation starts when the master issues a START bit
This allows multiple I2C devices with the same address                 (SDAIN goes low while SCLIN is high). The LTC4318
to be connected to the same bus without interference.                  turns off N2 to disconnect SDAIN from SDAOUT. As the
The translated addresses are configured with external                  master sends the address byte, the LTC4318 translates
resistors, and no extra software is required. An ENABLE                the incoming address at the SDAIN pin to a new address
pin allows bus segments to be enabled and disabled, and                at the SDAOUT pin by XORing each incoming bit with
the LTC4318 allows hot swapping isolated bus segments                  a user-configurable translation byte, one bit at a time.
together.                                                              N3 turns on and off to send out the new address to the
                                                                       SDAOUT pin. Once all 7 bits of the address are processed,
Figure 1 shows an I2C master connected to the input bus                the LTC4318 turns on N2 again to reconnect SDAIN to
of the LTC4318 (SCLIN and SDAIN). The slave devices                    SDAOUT. The master then transmits the R/W bit directly
requiring address translation are connected to the output              to the slave. If the new, translated address on SDAOUT
bus of the LTC4318 (SCLOUT and SDAOUT). Any other                      matches the slave’s address, the slave pulls SDAOUT low
slave devices that do not require address translation are              to acknowledge (ACK bit). N2 remains on and the rest of
placed together with the master on the input bus of the                the data bytes are transmitted unmodified between the
LTC4318. Two switches (N1 and N2) inside the LTC4318                   master and slave. The address translation process restarts
connect the input bus to the output bus. N1 connects                   when the master issues a new START bit.
                 VCC1                                                                                           VCC2
                                    LTC4318
                                    SCLIN                                 N1                  SCLOUT
                                                                                                             SLAVE
                 MASTER
                                                                                                               #1
                                    SDAIN                                          N2         SDAOUT
                                                     CMP2
                                               +
                                                                                           N3
                  SLAVE
                    #2                                             XOR
                                       1.8V    –
                                                           0 0 0 0 0 1 0
                                                                                ENABLE
                                                          7-BIT ADDRESS        ADDRESS
                                                           TRANSLATION       TRANSLATION
                                                        BYTE SHIFT REGISTER
                                                                                                 4318 F01
                                            Figure 1. Basic Functions of the LTC4318
                                                                                                                             4318fa
                                             For more information www.linear.com/LTC4318                                     7


LTC4318
Operation
Figure 2 shows typical waveforms for the circuit on the                     Note that in this example, the 8-bit hexadecimal address
front page. In this example, the master transmits address                   format (with R/W = 0) is used. 7-bit addresses are also
0x34 while the slave is configured to respond to address                    commonly found in I2C device documentation. Make sure
0x36. The resistive dividers at the XORL and XORH pins are                  to use the correct format when calculating the address
configured to generate an address translation byte of 0x02.                 translation byte. Table 1 shows examples of both formats.
                                                                                                     R/W     ACK
                                            START                     ADDRESS BITS                   BIT      BIT
                                                    a6     a5     a4      a3      a2     a1    a0
                                     SCLIN
                                    SDAIN           0      0      1       1        0     1     0      0     = 0x34
                             TRANSLATION
                                      BYTE          0      0      0       0        0     0     1      0     = 0x02
                                  SDAOUT            0      0      1       1        0     1     1      0     = 0x36
                                  N2 GATE N2 ON                         N2 OFF                         N2 ON
                                                                                                             4318 F02
                                              Figure 2. Basic Address Translation Waveforms
Table 1.
                                                       BINARY ADDRESS                             7-BIT HEX ADDRESS   8-BIT HEX ADDRESS
DESCRIPTION                       a6       a5      a4      a3      a2       a1       a0    R/W       WITHOUT R/W         WITH R/W = 0
Input Address from SDAIN           0        0       1       1       0        1        0     0             0x1A               0x34
Translation Byte                   0        0       0       0       0        0        1     0              0x01              0x02
Output Address to SDAOUT           0        0       1       1       0        1        1     0             0x1B               0x36
                                                                                                                                      4318fa
8                                                  For more information www.linear.com/LTC4318


                                                                                                                       LTC4318
Operation
System Configurations                                                   7-bit translation byte. These voltages are referenced to
There are several ways that individual slaves or banks of               VCC so a resistive divider at each of these pins is the most
                                                                        convenient way to set the voltages. The required transla-
slaves can be connected to an LTC4318. In Figure 3, each
                                                                        tion byte can be determined by taking the bitwise XOR of
slave is paired with one channel of the LTC4318. This
                                                                        the slave’s original address and the desired input address.
configuration allows for maximum flexibility in allocating
the bus addresses. Both read and write operations and all               The voltages at the XORH and XORL pins configure the
protocols supported by the LTC4318 are allowed. Figure 4                translation byte. The XORL voltage configures the lower 4
shows two slaves with different hardwired addresses                     translation bits (excluding the R/W bit), while the XORH
translated to two different addresses using one channel of              voltage configures the upper 3 translation bits. Tables 2
the LTC4318 and a common translation byte. A program                    and 3 show the recommended resistive divider values. RLT
is available to help the user visualize an I2C bus with the             and RLB are the top and bottom resistors connected to
LTC4318; this program can be found in the following link:               XORL, while RHT and RHB are the top and bottom resistors
                                                                        connected to XORH (Figure 5). Use 1% tolerance resistors
   www.linear.com/TranslatorTool
                                                                        for RLT, RLB, RHT and RHB.
Setting the Translation Byte
When the LTC4318 is first powered up or any time a rising
edge is detected on the ENABLE pin, the LTC4318 reads                                              SCL
the voltages at the XORH and XORL pins to determine the                                              SLAVE
                                                                                                       #2
                                                                                                   SDA
                                                                                                  HARDWIRED ADDRESS
                         SLAVE #1                                                                 0x34
                                                                                  SCL
                         INPUT ADDRESS
                         0x32                                                                      SCLIN     SCLOUT        SCL
                         TRANSLATION BYTE                                   MASTER
                                                                                                                                     00110110
                         0x06                                                                           LTC4318                SLAVE 00000010
                                                                                  SDA                                            #1  00110100
                          SCLIN1   SCLOUT1   SCL                                                   SDAIN     SDAOUT        SDA
                                               SLAVE         00110010                                                     HARDWIRED ADDRESS
                               LTC4318                       00000110                             TRANSLATION BYTE
                                                 #1                                               0x02                    0x34
                                                             00110100
                          SDAIN1   SDAOUT1   SDA
                                                                                                  SLAVE #1                 SCL
                                            HARDWIRED ADDRESS                                     INPUT ADDRESS                      00110010
                                            0x34                                                  0x36                         SLAVE 00000010
                                                                                                                                 #3  00110000
                                                                                                  SLAVE #3
                          SCLIN2   SCLOUT2   SCL                                                  INPUT ADDRESS            SDA
                                                             00110110                             0x32
                                               SLAVE                                                                      HARDWIRED ADDRESS
                                                             00000010
                                                 #3                                                                       0x30
                                                             00110100                                                                   4318 F04
                          SDAIN2   SDAOUT2   SDA
                         SLAVE #3           HARDWIRED ADDRESS                   Figure 4. Two Slaves Sharing One Channel of LTC4318
                         INPUT ADDRESS      0x34
       SCL               0x36
                         TRANSLATION BYTE
   MASTER                0x02                                                              VCC
       SDA                SCL                                                                               VCC
                                                                                             RHT                       RLT
                            SLAVE                                                                         LTC4318
                              #2
                                                                                                    XORH          XORL
                          SDA
                                                                                             RHB                       RLB
                         HARDWIRED ADDRESS
                         0x34                       4318 F03
                                                                                                                        4318 F05
         Figure 3. Two Independent Address Translation                       Figure 5. Address Translation Byte Configuration Resistors
                                                                                                                                           4318fa
                                                For more information www.linear.com/LTC4318                                                 9


LTC4318
Operation
Table 2. Setting the Resistive Divider at XORL                         which gives 0110 0010b or 0x62. If the configuration
LOWER                                                                  voltages at XORL and XORH pins are the same, they can
4-BIT OF
TRANSLATION
                                                                       be tied together and connected to a single resistive divider.
BYTE                             RECOMMENDED RECOMMENDED
                                                                       Alternatively, three resistors can be used to configure
 a3 a2 a1 a0       VXORL/VCC         RLT [kΩ]       RLB [kΩ]           the XORL and XORH pins (Figure 6). Use the following
  0 0 0    0       ≤ 0.03125           Open          Short             procedure to calculate the value of the three resistors:
  0 0 0    1    0.09375 ±0.015          976           102
  0 0 1    0    0.15625 ±0.015          976           182                                       VCC
  0 0 1    1    0.21875 ±0.015         1000           280                                             VCC
                                                                                                                  RA1
  0 1 0    0    0.28125 ±0.015         1000           392                                                   XORL
  0 1 0    1    0.34375 ±0.015         1000           523                                           LTC4318       RA2
  0 1 1    0    0.40625 ±0.015         1000           681                                                  XORH
  0 1 1    1    0.46875 ±0.015         1000           887                                                         RA3
  1 0 0    0    0.53125 ±0.015          887          1000                                                          4318 F06
  1 0 0    1    0.59375 ±0.015          681          1000
  1 0 1    0    0.65625 ±0.015          523          1000                              Figure 6. Address Translation Byte
  1 0 1    1    0.71875 ±0.015          392          1000                              Configuration Using Three Resistors
  1 1 0    0    0.78125 ±0.015          280          1000
  1 1 0    1    0.84375 ±0.015          182           976
                                                                       First choose a total resistance value RTOTAL
  1 1 1    0    0.90625 ±0.015          102           976
  1 1 1    1       ≥ 0.96875           Short         Open                  RA3 = RTOTAL • (VXORH/VCC)
                                                                           RA2 = (RTOTAL • VXORL/VCC) – RA3
Table 3. Setting the Resistive Divider at XORH                             RA1 = RTOTAL – RA3 – RA2
UPPER
3-BIT OF                                                               Use 1% tolerance resistors for RA1, RA2 and RA3.
TRANSLATION
BYTE                             RECOMMENDED RECOMMENDED
                                                                       Once the XORL and XORH pins are read, the LTC4318
 a6   a5  a4       VXORH/VCC         RHT {kΩ]      RHB [kΩ}            turns on switches N1 and N2, connecting the input and
  0    0   0       ≤ 0.03125          Open           Short             output, and the READY pin goes high to indicate that the
  0    0   1    0.09375 ±0.015         976            102              LTC4318 is ready to start address translation.
  0    1   0    0.15625 ±0.015         976            182              The address translation byte can be changed during
  0    1   1    0.21875 ±0.015        1000            280              operation by changing the XORH and XORL voltages and
  1    0   0    0.28125 ±0.015        1000            392              toggling the ENABLE pin (high-low-high). This triggers
  1    0   1    0.34375 ±0.015        1000            523              the LTC4318 to re-read the XORL and XORH voltages.
  1    1   0    0.40625 ±0.015        1000            681
  1    1   1    0.46875 ±0.015        1000            887              Enable/UVLO
                                                                       If the ENABLE pin is driven below 1.4V or if VCC is be-
For example, if RLT = 976k, RLB = 102k, RHT = 1000k, and               low the UVLO threshold, the LTC4318 shuts down. The
RHB = 280k, the lower 4 translation bits are 0001b and                 internal shift register storing the address translation byte
the upper 3 bits are 011b. The 8-bit hexadecimal address               is cleared, address translation is disabled, switches N1,
translation byte is obtained by adding a 0 as the LSB,                 N2 and N3 are off, the READY pin is pulled low and the
                                                                       quiescent current drops to 350µA.
                                                                                                                               4318fa
10                                             For more information www.linear.com/LTC4318


                                                                                                                               LTC4318
Operation
Precharge and Hot Swap                                                                                       ADDRESS BITS
                                                                                             SCLIN
When the LTC4318 is first powered on, switches N1 and
N2 are initially off. This allows a LTC4318 and its con-                                     SDAIN    0        1          0        1
nected slaves to be hot swapped onto an active I2C bus.
                                                                                       TRANSLATION
Internal precharge circuitry initially sets the bus lines to                                  BYTE    0        1          1        0
1V through a 200k resistor, minimizing disturbance to an
                                                                                           SDAOUT     0        0          1        1
active bus when the LTC4318 is connected. The LTC4318
keeps N1 and N2 off until ENABLE goes high, the XORL/                                      N2 GATE
                                                                                                        GLITCH
                                                                                                                 N2 OFF
                                                                                                                            GLITCH
XORH pins are read, and both sides of the I2C bus are                                                                              4318 F07
idle (indicated either by a STOP bit or all bus pins high
                                                                             Figure 7. Extra Transitions on SDAOUT While SCL Is Low
for longer than 120µs). Once these conditions are met, N1
and N2 turn on, and the READY pin goes high to indicate
                                                                       for level shifting to operate correctly. For example, if the
that the LTC4318 is ready to start address translation.
                                                                       input bus is powered by a 5V supply and the output bus
Pass-Through Mode                                                      is powered by a 3.3V supply, the LTC4318 VCC pin must
                                                                       be connected to the 3.3V supply as shown in Figure 8.
If the master wants to communicate with the slave us-
ing the general call address, it can temporarily disable               If the LTC4318 supply pin is connected to the higher bus
address translation by pulling XORH high. This disables                supply, current may flow through the switches N1 and
address translation and keeps N1 and N2 on regardless                             5V                                                          3.3V
of the activity on the buses. Any translation that may be in
                                                                                                          VCC
progress is stopped immediately when XORH goes high.
                                                                                                  SCLIN        SCLOUT
                                                                                                                                           SLAVE
Extra Transitions on SDAOUT                                                     MASTER                  LTC4318
                                                                                                                                             #1
In an I2C/SMBus system, the master changes the state of                                           SDAIN        SDAOUT
the SDA line when SCL is low. The LTC4318 also advances                                                           4318 F08
the address translation byte shift register when the SCLIN                      Figure 8. A 5V to 3.3V Level Translation Application
is low. The translation byte transitions occur approximately
100ns after the falling edge of SCLIN. If the SDAIN tran-              N2 to the bus with lower supply. If the voltage difference
sitions sent by the master do not coincide exactly with                is less than 1V, this current is limited to less than 10µA.
the LTC4318 address translation bit transitions, an extra              This allows the input and output buses to be connected
transition on SDAOUT may appear (Figure 7). These extra                to nominally identical supplies that may have up ±10%
SDA transitions are like glitches similar to those occurring           tolerance, and the LTC4318 VCC pin can be connected to
during normal Acknowledge bit transitions and do not pose              either supply.
problems in the system because devices on the bus latch
SDA data only when SCL is high.                                        Extra START and STOP Bits
Level Translation and Supply Voltage Matching                          During normal operation, an I2C master should not issue
                                                                       a START or STOP bit within a data byte. I2C slave behavior
The LTC4318 can operate with different supply voltages                 when such a command is received can be unpredictable.
on the input and output bus, and it will level shift the               The LTC4318 will recover automatically when an unex-
voltages on the SCLIN, SDAIN, SCLOUT, and SDAOUT                       pected START or STOP is received during the address byte;
pins to match the supply voltage at each side. VCC must                however, depending on the state of the translating bits,
be powered from the lower of the two supply voltages                   it may convert START bits to STOP bits and vice versa,
                                                                       causing unexpected slave behavior.
                                                                                                                                                   4318fa
                                               For more information www.linear.com/LTC4318                                                       11


LTC4318
Operation
If a START bit is received during the address byte when                          Stuck Bus Timeout
the active translating bit is a "1", the slave device will see
                                                                                 During the address translation, if SCLIN stays low or high
a STOP bit. This will typically reset the slave and cause it
                                                                                 for more than 30ms without any transitions, the LTC4318
to miss the remainder of the transmission. If the START
                                                                                 will abort the address translation and reconnect SDAIN
bit is received while the active translating bit is a "0", the
                                                                                 to SDAOUT. It will then wait for a START bit to start a new
START passes through the LTC4318 unchanged. The slave
                                                                                 address translation. This prevents any bus stuck low/
will react in the same way it would if the LTC4318 was
                                                                                 high conditions from permanently disconnecting SDAIN
not present, and will typically reset when the master next
                                                                                 from SDAOUT.
issues a STOP bit. In both cases, the LTC4318 automati-
cally resets at the next STOP bit and the next message                           Supported Protocols
will be transmitted normally.
                                                                                 The LTC4318 is designed to support most I2C and SMBus
If a STOP bit is received during the address byte, the                           message protocols. The only exceptions are protocols that
LTC4318 will abort the address translation and ensure that                       use pre-assigned addresses on the slave side of the bus.
a STOP bit is issued at SDAOUT to reset the slave. If the
active translating bit is a "0" when the STOP arrives, it is                     Supported I2C and SMBus Protocols:
not modified, and the slave will see the STOP and typically                      Send/Receive Byte
reset. If the active translating bit is a "1" when the STOP
                                                                                 Write Byte/Word
arrives, the slave device will see a START bit. This might
leave the slave in an indeterminate state, so the LTC4318                        Read Byte/Word
briefly disconnects the slave from the master, adds a short                      Process Call
delay, and then generates a STOP bit at the SDAOUT pin
(Figure 9). It then reconnects the busses and waits for a                        Block Write/Read
START bit to begin the next transmission. Again, in both                         Block Write-Block Read Process Call
cases, the LTC4318 automatically resets and the next
message will be transmitted normally.                                            Extended Read and Write Commands
                                                                                 General Call (I2C Only)
                                  ADDRESS BIT
                                     BECOMES
                                                                                 Start Byte (I2C Only)
                                     STOP BIT
                                                                                 PMBus (without PEC)
                    SCLIN
                            STOP            START
                                                                                 Unsupported I2C Protocols:
                    SDAIN    BIT              BIT
                                                                                 10-Bit Addressing
              TRANSLATION
                             1
                       BIT                                                       Device ID
                                     STOP
                                      BIT                                        Ultra Fast-Mode I2C Bus Protocol
                                            START
                  SDAOUT   START
                             BIT
                                              BIT
                                                                                 Unsupported SMBus Protocols:
                  N2 GATE     N2 OFF             N2 OFF                          SMBus Host Notify
                                         N2 ON
                                     N1                                          Address Resolution Protocol (ARP)
                  N1 GATE  N1 ON    OFF        N1 ON
                                                      4318 F09                   Parity Error Code (PEC)
          Figure 9. Stop Bit within Address Byte when                            Alert Response Address (ARA)
          Address Translation Byte Is 1
                                                                                 PMBus (with PEC)
                                                                                                                                         4318fa
12                                                       For more information www.linear.com/LTC4318


                                                                                                                          LTC4318
Typical Applications
                                                                                         INPUT ADDRESS
                                                                                              0x32
                                                                                     MOTHERBOARD    PLUG-IN
                  VCC                                                                  CONNECTOR 1  CARD 1
                      10k 10k                   VCC       ENABLE1
       TO MASTER1 SCL             SCLIN1                                   VCC
                                                                     10k                                    VCC      TO SLAVE #1
       TO MASTER1 SDA             SDAIN1                                                                             HARDWIRED
                                                                                   10k    10k
                                                                                                                     ADDRESS
                                                         SCLOUT1                                            SCL1 0x30
                  VCC
                                                         SDAOUT1                                            SDA1
                      10k 10k
                                                                                                            GND
       TO MASTER2 SCL             SCLIN2
       TO MASTER2 SDA             SDAIN2      LTC4318
                                                          ENABLE2
                                                                           VCC
                                                                     10k                                    VCC      TO SLAVE #2
                  VCC
                                                                                                                     HARDWIRED
                      10k 10k                                                      10k    10k
                                                                                                                     ADDRESS
                                  READY1                 SCLOUT2                                            SCL2 0x30
                                  READY2                 SDAOUT2                                            SDA2
                                                                                                            GND
                                  XORL2 XORL1 XORH2 XORH1
                                                                                     MOTHERBOARD    PLUG-IN
                          VCC
                                                                                       CONNECTOR 2  CARD 2
                               845k   61.90k    93.1k
                                                                                         INPUT ADDRESS
                                                                                              0x34          4318 F10
                            Figure 10. LTC4318 with Address Translation Byte of 0x02 and 0x04
                                                                                                                                  4318fa
                                             For more information www.linear.com/LTC4318                                         13


LTC4318
Package Description
Please refer to http://www.linear.com/product/LTC4318#packaging for the most recent package drawings.
                                                                           UF Package
                                                           20-Lead Plastic QFN (4mm × 4mm)
                                                          (Reference LTC DWG # 05-08-1710 Rev A)
                                                                      0.70 ±0.05
     4.50 ±0.05
            3.10 ±0.05
                                        2.45 ±0.05
                    2.00 REF
                                               2.45 ±0.05
                                                                          PACKAGE OUTLINE
                                                                0.25 ±0.05
                                                               0.50 BSC
                        RECOMMENDED SOLDER PAD PITCH AND DIMENSIONS                                                                          PIN 1 NOTCH
                      APPLY SOLDER MASK TO AREAS THAT ARE NOT SOLDERED                                                                       R = 0.20 TYP
                                                                                                           BOTTOM VIEW—EXPOSED PAD           OR 0.35 × 45°
                                                                             0.75 ±0.05        R = 0.05 R = 0.115                            CHAMFER
                                              4.00 ±0.10                                           TYP        TYP
                                                                                                                           19 20
                                       PIN 1                                                                                             0.40 ±0.10
                                       TOP MARK
                                       (NOTE 6)                                                                                         1
                                                                                                             2.45 ±0.10                 2
                  4.00 ±0.10                                                                  2.00 REF
                                                                                                                   2.45 ±0.10
                                                                                                                                        (UF20) QFN 01-07 REV A
                                                                                           0.200 REF                               0.25 ±0.05
                                                                                           0.00 – 0.05                           0.50 BSC
                              NOTE:
                              1. DRAWING IS PROPOSED TO BE MADE A JEDEC PACKAGE OUTLINE MO-220
                                 VARIATION (WGGD-1)—TO BE APPROVED
                              2. DRAWING NOT TO SCALE
                              3. ALL DIMENSIONS ARE IN MILLIMETERS
                              4. DIMENSIONS OF EXPOSED PAD ON BOTTOM OF PACKAGE DO NOT INCLUDE
                                 MOLD FLASH. MOLD FLASH, IF PRESENT, SHALL NOT EXCEED 0.15mm ON ANY SIDE
                              5. EXPOSED PAD SHALL BE SOLDER PLATED
                              6. SHADED AREA IS ONLY A REFERENCE FOR PIN 1 LOCATION
                                 ON THE TOP AND BOTTOM OF PACKAGE
                                                                                                                                                               4318fa
14                                                          For more information www.linear.com/LTC4318


                                                                                                                                     LTC4318
Revision History
REV DATE  DESCRIPTION                                                                                                                  PAGE NUMBER
 A  10/15 Minor edits                                                                                                                      4, 5
                                                                                                                                                4318fa
                      Information furnished by Linear Technology Corporation is believed to be accurate and reliable.
                      However, no responsibility is assumed for its use. Linear Technology Corporation makes no representa-
                                              For more
                      tion that the interconnection         information
                                                    of its circuits        www.linear.com/LTC4318
                                                                    as described herein will not infringe on existing patent rights.        15


LTC4318
Typical Application
                     SINGLE                                       “Y” CONNECTED DUAL                                          DUAL
                    LTC4316                                             LTC4317                                              LTC4318
     VCC                                               VCC                                                   VCC
  SCLIN         SCLIN   SCLOUT           SCLOUT      SCLIN          SCLIN   SCLOUT           SCLOUT1      SCLIN1         SCLIN    SCLOUT             SCLOUT1
  SDAIN         SDAIN SDAOUT             SDAOUT     SDAIN           SDAIN SDAOUT             SDAOUT1     SDAIN1          SDAIN SDAOUT                SDAOUT1
   XORH         XORH     READY           READY      XORH1           XORH      READY          READY1       XORH1          XORH      READY             READY1
   XORL         XORL                                XORL1           XORL                                  XORL1          XORL
 ENABLE         ENABLE                            ENABLE1           ENABLE                              ENABLE1          ENABLE
                                                                       CHANNEL1                                             CHANNEL1
    GND
                                                                    SCLIN   SCLOUT           SCLOUT2      SCLIN2         SCLIN    SCLOUT             SCLOUT2
                                                                    SDAIN SDAOUT             SDAOUT2     SDAIN2          SDAIN SDAOUT                SDAOUT2
                                                    XORH2           XORH      READY          READY2       XORH2          XORH      READY             READY2
                                                    XORL2           XORL                                  XORL2          XORL
                                                  ENABLE2           ENABLE                              ENABLE2          ENABLE
                                                                       CHANNEL2                                             CHANNEL2
                                                      GND                                                   GND
                                                                                                                                                   4318 F11
                                          Figure 11. Comparison Between LTC4316/LTC4317/LTC4318
Related Parts
PART NUMBER DESCRIPTION                                         COMMENTS
LTC4300A-1/      Hot Swappable 2-Wire Bus Buffers               LTC4300A-1: Bus Buffer with READY and ENABLE
LTC4300A-2/                                                     LTC4300A-2: Dual Supply Buffer with ACC
LTC4300A-3                                                      LTC4300A-3: Dual Supply Buffer and ENABLE
LTC4302-1/       Addressable 2-Wire Bus Buffer                  Address Expansion, GPIO, Software Controlled
LTC4302-2
LTC4303/         Hot Swappable 2-Wire Bus Buffer with Stuck Provides Automatic Clocking to Free Stuck I2C Busses
LTC4304          Bus Recovery
LTC4305/         2- or 4-Channel, 2-Wire Bus Multiplexers       Two or Four Software Selectable Downstream Busses, Stuck Bus Disconnect, Rise Time
LTC4306          with Capacitance Buffering                     Accelerators, Fault Reporting, ±10kV HBM ESD
LTC4307          Low Offset, Hot Swappable 2-Wire Bus           60mV Buffer Offset, 30ms Stuck Bus Disconnect and Recovery, Rise Time Accelerators,
                 Buffer with Stuck Bus Recovery                 ±5kV HBM ESD
LTC4307-1        High Definition Multimedia Interface (HDMI) 60mV Buffer Offset, 3.3V to 5V Level Shifting, ±5kV HBM ESD
                 Level Shifting 2-Wire Bus Buffer
LTC4308          Low Voltage, Level Shifting Hot Swappable      Bus Buffer with 1V Precharge, ENABLE and READY, 0.9V to 5.5V Level Translation, 30ms
                 2-Wire Bus Buffer with Stuck Bus Recovery      Stuck Bus Disconnect and Recovery, Output Side Rise Time Accelerators, ±6kV HBM ESD
LTC4309          Low Offset Hot Swappable 2-Wire Bus            60mV Buffer Offset, 30ms Stuck Bus Disconnect and Recovery, Rise Time Accelerators,
                 Buffer with Stuck Bus Recovery                 ±5kV HBM ESD, 1.8V to 5.5V Level Translation
LTC4310-1/       Hot Swappable I2C Isolators                    Bidirectional I2C Communication Between Two Isolated Busses, LTC4310-1: 100kHz Bus,
LTC4310-2                                                       LTC4310-2: 400kHz Bus
LTC4311          Hot Swappable I2C/SMBus Accelerator            Rise Time Acceleration with ENABLE, ±8kV HBM ESD
LTC4312/         2- or 4-Channel, Hardware Selectable 2-Wire Two or Four Pin Selectable Downstream Busses, VIL Up to 0.3V • VCC, Rise Time
LTC4314          Bus Multiplexers with Capacitance Buffering Accelerators, 45ms Stuck Bus Disconnect and Recovery, ±4kV HBM ESD
LTC4313-1/       High Noise Margin 2-Wire Bus Buffers           VIL = 0.3V • VCC, Rise Time Accelerators, Stuck Bus Disconnect and Recovery, 1V
LTC4313-2/                                                      Precharge, ±4kV HBM ESD
LTC4313-3
                                                                                                                                                            4318fa
16 Linear Technology Corporation
                                                                                                                               LT 1015 REV A • PRINTED IN USA
           1630 McCarthy Blvd., Milpitas, CA 95035-7417For more information www.linear.com/LTC4318
           (408) 432-1900 ● FAX: (408) 434-0507 ● www.linear.com/LTC4318                                            © LINEAR TECHNOLOGY CORPORATION 2015


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Analog Devices Inc.:
 LTC4318CUF#PBF LTC4318IUF#TRPBF LTC4318IUF#PBF LTC4318CUF#TRPBF
