                                                                                                        MAX6618
                                                                     PECI-to-I2C Translator
                          General Description                                                                  Features
The MAX6618 PECI(1.0)-to-I2C translator provides an                ♦ 400kbps I2C-Compatible, 2-Wire Serial Interface
efficient, low-cost solution for PECI(1.0)-to-SMBus/I2C            ♦ +3V to +3.6V Supply Voltage
protocol conversion. The PECI(1.0)-compliant host
reads temperature data directly from up to four                    ♦ PECI(1.0)-Compliant Port
PECI(1.0)-enabled CPUs. This translator will only com-             ♦ PECI(1.0)-to-I2C Translation
municate with CPUs that support PECI 1.0.                          ♦ Programmable Temperature Offsets
The I2C interface provides an independent serial com-              ♦ -20°C to +120°C Operating Temperature Range
munication channel to communicate synchronously with
                                                                   ♦ VREF Input Refers Logic Levels to the PECI
peripheral devices in a multiple master or multiple slave
                                                                     Supply Voltage
system. This interface allows a maximum serial-data
rate of 400kbps.                                                   ♦ Automatic I2C Bus Lockup Timeout Reset
The MAX6618 is designed to operate from a +3.0V to                 ♦ Lead-Free, 10-Pin µMAX® Package
+3.6V supply voltage and ambient temperature range
of -20°C to +120°C.
                                                                                           Ordering Information
                                       Applications
                                                                            PART           TEMP RANGE       PIN-PACKAGE
        Servers
                                                                    MAX6618AUB+           -20°C to +120°C   10 µMAX
        Workstations                                                MAX6618AUB+T          -20°C to +120°C   10 µMAX
        Desktop Computers                                          +Denotes a lead(Pb)-free/RoHS-compliant package.
                                                                   T = Tape and reel.
Pin Configuration appears at end of data sheet.
                                                                                 Typical Application Circuit
                                                             +3.3V
                                                                                                     VCPU
                                                                                 VTT
                                                              VCC
                                SDA                   SDA              VREF
                                                                                                     CPU
                                                            MAX6618
                           I2C  SCL                   SCL              PECI
                                                                                                   INTERNAL
                         MASTER                                                                      TEMP
                                                      AD2
                                                                                                    SENSOR
                                                      AD1
                                                      AD0
                                                      GND
µMAX is a registered trademark of Maxim Integrated Products.
For pricing, delivery, and ordering information, please contact Maxim Direct at
1-888-629-4642, or visit Maxim Integrated’s website at www.maximintegrated.com.                              19-0730; Rev 4; 5/13


 MAX6618
 PECI-to-I2C Translator
ABSOLUTE MAXIMUM RATINGS
(All voltages with respect to GND.)                                                            Continuous Power Dissipation (TA = +70°C)
VCC ..........................................................................-0.3V to +4V       µMAX (derate 5.6mW/°C over TA = +70°C).................444mW
AD0, AD1, AD2,..........................................-0.3V to (VCC + 0.3V)                  Operating Temperature Range .........................-20°C to +120°C
SCL, SDA .................................................................-0.3V to +6V         Junction Temperature ......................................................+150°C
VREF .........................................................................-0.3V to +4V     Storage Temperature Range .............................-65°C to +150°C
PECI .........................................................-0.3V to (VREF + 0.3V)           Lead Temperature (soldering, 10s) .................................+300°C
DC Current through SDA ...................................................10mA                 Soldering Temperature (reflow) .......................................+260°C
Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional
operation of the device at these or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to
absolute maximum rating conditions for extended periods may affect device reliability.
ELECTRICAL CHARACTERISTICS
(Typical Application Circuit, VCC = +3V to +3.6V, VREF = +0.95V to +1.26V, TA = -20°C to +120°C, unless otherwise noted. Typical
values are at VCC = +3.3V, VREF = +1.0V, TA = +25°C.) (Note 1)
           PARAMETER                               SYMBOL                                CONDITIONS                      MIN              TYP              MAX            UNITS
 SUPPLY
 Operating Supply Voltage                               VCC                                                               3.0                               3.6             V
 Operating Supply Current                               ICC           SCL = 400kHz                                                           4                7            mA
 Power-On-Reset Voltage                                VPOR                                                              2.60                              2.95             V
 INPUT SCL, INPUT/OUTPUT SDA
                                                                                                                                                            0.3
 Low-Level Input Voltage                                 VIL                                                                                                                V
                                                                                                                                                          x VCC
                                                                                                                          0.7
 High-Level Input Voltage                               VIH                                                                                                 5.5             V
                                                                                                                        x VCC
 Low-Level Output Voltage                               VOL           IOL = 6mA                                                                             0.4             V
 Leakage Current                                          IL                                                               -1                               +1             µA
 Input Capacitance                                       CI                                                                                 10                             pF
 ADDRESS INPUT AD0
                                                                                                                                                            0.3
 Low-Level Input Voltage                                 VIL                                                                                                                V
                                                                                                                                                          x VCC
                                                                                                                          0.7                              VCC
 High-Level Input Voltage                               VIH                                                                                                                 V
                                                                                                                        x VCC                             + 0.3
 Leakage Current                                          IL                                                               -2                               +2             µA
 Input Capacitance                                       CI                                                                                 10                             pF
 PECI
 Supply Voltage to PECI Cell                           VREF                                                              0.95                              1.26             V
                                                                                                                                                           VREF
 Input Voltage Range                                    VIN                                                              -0.3                                               V
                                                                                                                                                          + 0.3
 Low-Level Input Voltage                                                                                                0.275                             0.500
                                                         VIL                                                                                                                V
 Threshold                                                                                                             x VREF                            x VREF
 High-Level Input Voltage                                                                                               0.550                             0.725
                                                        VIH                                                                                                                 V
 Threshold                                                                                                             x VREF                            x VREF
 2                                                                                                                                                             Maxim Integrated


                                                                                                      MAX6618
                                                                       PECI-to-I2C Translator
ELECTRICAL CHARACTERISTICS (continued)
(Typical Application Circuit, VCC = +3V to +3.6V, VREF = +0.95V to +1.26V, TA = -20°C to +120°C, unless otherwise noted. Typical
values are at VCC = +3.3V, VREF = +1.0V, TA = +25°C.) (Note 1)
          PARAMETER               SYMBOL                     CONDITIONS                    MIN       TYP      MAX      UNITS
                                                                                            0.1
 Hysteresis                            VH                                                                                  V
                                                                                          x VREF
 Low-Level Sinking Current              IIL                                                 0.5                1.0       mA
 High-Level Sourcing Current            IIH                                                 -6                           mA
 Input Capacitance                      CI   (Note 2)                                                           10        pF
 Signal-Noise Immunity Above                                                                0.1
                                       VN    (Note 2)                                                                    VP-P
 300MHz                                                                                   x VREF
TIMING CHARACTERISTICS
(Typical Application Circuit, VCC = +3V to +3.6V, VREF = +0.95V to +1.26V, TA = -20°C to +120°C, unless otherwise noted. Typical
values are at VCC = +3.3V, VREF = +1.0V, TA = +25°C.) (Note 2)
           PARAMETER               SYMBOL                     CONDITIONS                    MIN      TYP       MAX      UNITS
  I2C INTERFACE
  Serial-Clock Frequency               fSCL                                                                     400       kHz
  Bus Free Time Between a
                                       tBUF                                                 1.3                            µs
  STOP and a START Condition
  Hold Time, (Repeated) START
                                    tHD, STA                                                0.6                            µs
  Condition
  Repeated START Condition
                                    tSU, STA                                                0.6                            µs
  Setup Time
  STOP Condition Setup Time         tSU, STO                                                0.6                            µs
  Data Hold Time                   tHD, DAT   (Note 3)                                                          0.9        µs
  Data Setup Time                   tSU, DAT                                                120                            ns
  SCL Clock-Low Period                tLOW                                                  1.3                            µs
  SCL Clock-High Period               tHIGH                                                 0.6                            µs
  Rise Time of Both SDA and                                                                           20
                                          tR  (Notes 4, 5)                                                      300        ns
  SCL Signals, Receiving                                                                           + 0.1Cb
  Fall Time of Both SDA and                                                                           20
                                          tF  (Notes 4, 5)                                                      300        ns
  SCL Signals, Receiving                                                                           + 0.1Cb
                                                                                                      20
  Fall Time of SDA Transmitting        tF.TX  (Notes 4, 5)                                                      250        ns
                                                                                                   + 0.1Cb
  Pulse Width of Spike
                                         tSP  (Notes 2, 6)                                   50       160                  ns
  Suppressed
  Capacitive Load for Each
                                         Cb   (Notes 2, 4)                                                      400        pF
  Bus Line
  PECI INTERFACE
                                              Overall time evident on PECI                 0.495                500
  Bit Time (Note 7)                     tBIT                                                                               µs
                                              Driven by MAX6618                            0.495                250
Maxim Integrated                                                                                                              3


 MAX6618
PECI-to-I2C Translator
TIMING CHARACTERISTICS (continued)
(Typical Application Circuit, VCC = +3V to +3.6V, VREF = +0.95V to +1.26V, TA = -20°C to +120°C, unless otherwise noted. Typical
values are at VCC = +3.3V, VREF = +1.0V, TA = +25°C.) (Note 2)
          PARAMETER                 SYMBOL                          CONDITIONS                        MIN      TYP        MAX       UNITS
                                                 Between adjacent bits in an PECI message
 Bit Time Jitter                    tBIT, jitter header or data bytes after timing has been                      1                     %
                                                 negotiated
                                                 Across a PECI address or PECI message
 Change in Bit Time                  tBIT, drift                                                                 2                     %
                                                 bits as driven by MAX6618
 High-Level Time for Logic-High          tH1     (Note 8)                                              0.6     0.75        0.8       x tBIT
 High-Level Time for Logic-Low           tH0                                                           0.2      0.3        0.4       x tBIT
 Client Asserts PECI High
                                        tSU                                                             0                  0.2     x tBIT-M
 During Logic-High
                                                 Measured from VOL to VPMAX,                                              30 +
 Rise Time                                tR                                                                                           ns
                                                 VREF(nom) -5% (Note 9)                                                  5/Node
                                                 Measured from VOH to VNMAX,
 Fall Time                                tF                                                                            30/Node        ns
                                                 VREF(nom) +5% (Note 9)
                                                 Time for client to maintain a low idle drive
 Hold Time                            tHOLD                                                                                0.5      x tBIT-1
                                                 after MAX6618 begins a message (Note 10)
                                                 A constant low level driven by MAX6618
 Stop Time                             tSTOP                                                                     2                 x tBIT-M
                                                 (Notes 8, 11)
                                                 From the end of a ResetDevice command
 Maximum Dwell Time of the
                                      tRESET     to the next message to which the reset                                    0.4         ms
 PECI Client
                                                 client must be able to respond
                                                 If the prior tBIT is not known by MAX6618,
 Minimum PECI Low Time
                                      tSETUP     the maximum tBIT must be assumed and                   2                           x tBIT-X
 Preceding a Message
                                                 tSETUP = 1ms in this case (Note 12)
Note 1: All parameters are tested at TA = +25°C. Specifications over temperature are guaranteed by design.
Note 2: Guaranteed by design; not production tested.
Note 3: A master device must provide a hold time of at least 300ns for the SDA signal (referred to VIL of the SCL signal) to bridge
          the undefined region of SCL’s falling edge.
Note 4: Cb = total capacitance of one bus line in pF. tR and tF measured between 0.3 x VCC and 0.7 x VCC.
Note 5: ISINK ≤ 6mA. Cb = total capacitance of one bus line in pF. tR and tF measured between 0.3 x VCC and 0.7 x VCC.
Note 6: Input filters on the SDA and SCL inputs suppress noise spikes less than 50ns.
Note 7: The MAX6618 must drive a more restrictive time to allow for quantized sampling errors by a client yet still attain the mini-
          mum time less than 500µs. tBIT limits apply equally to tBIT-A and tBIT-M.
Note 8: The minimum and maximum bit times are relative to tBIT defined in the timing negotiation pulse.
Note 9: Extended trace lengths can appear as additional nodes.
Note 10: The client may deassert its low idle drive prior to the falling edge of the first bit of the message by using the rising edge to
          detect a message start. However, the time delay must be sufficient to qualify the rising edge as a true message rather than
          a noise spike.
Note 11: The message stop is defined by two consecutive periods when the bus has no rising edge. Tolerance around this time is
          based on the tBIT-M error budget.
Note 12: tSETUP is not additive with tSTOP. Rather, these times may overlap.
4                                                                                                                           Maxim Integrated


                                                                                                        MAX6618
                                                                       PECI-to-I2C Translator
                                                                                                       Pin Description
     PIN           NAME                                                   FUNCTION
      1              PECI   Platform Environment Control Interface (PECI) Serial-Bus Input/Output
      2             AGND    Analog Ground
      3              AD0    I2C Bus Device Address Selection Input A0
      4              SDA    I2C Bus Data Input/Output
      5              SCL    I2C Bus Clock Input
      6              VCC    Power Supply. Bypass to GND with a 0.1µF capacitor.
      7              GND    Power-Supply Ground
      8              AD2    Internally Connected. Not used for I2C slave address selection. Must be connected to GND or VCC.
      9              AD1    Internally Connected. Not used for I2C slave address selection. Must be connected to GND or VCC.
     10              VREF   PECI Input Supply Voltage. Bypass VREF to AGND with a 0.1µF capacitor.
                                     Block Diagram
                           MAX6618
                 SDA           I2C         SCL
                              PORT
                 AD2
                              PECI         AD0
                          TRANSLATION
                  AD1
                             ENGINE
                 PECI         PECI         VREF
                              PORT
Maxim Integrated                                                                                                             5


 MAX6618
PECI-to-I2C Translator
                       Detailed Description                      and uses a 2-wire, I2C-compatible serial interface to
                                                                 communicate with the PECI host.
The MAX6618 obtains temperature data from an inter-
nal temperature sensor in PECI-compliant hosts. Up to                                  Registers and Commands
four PECI hosts can be connected to the PECI I/O inter-          The following is an overview of the I2C/SMBus regis-
face. The MAX6618 handles all the PECI transmissions             ters/commands supported by the MAX6618.
     ADDRESS                                    DESCRIPTION                                   TRANSACTION TYPE
        00h         Read socket 0, domain 0 temperature register                                    ReadWord
        01h         Read socket 0, domain 1 temperature register                                    ReadWord
        02h         Read socket 1, domain 0 temperature register                                    ReadWord
        03h         Read socket 1, domain 1 temperature register                                    ReadWord
        04h         Read socket 2, domain 0 temperature register                                    ReadWord
        05h         Read socket 2, domain 1 temperature register                                    ReadWord
        06h         Read socket 3, domain 0 temperature register                                    ReadWord
        07h         Read socket 3, domain 1 temperature register                                    ReadWord
        08h         Read maximum temperature for all enabled sockets/domains register               ReadWord
        09h         Read firmware version register                                                  ReadWord
        0Ah         Read maximum temperature address                                                ReadWord
        0Bh         Read socket and domain that caused alert                                        ReadWord
        0Ch         Read/write CONFIG0 register                                                ReadWord/WriteWord
        0Dh         Read/write CONFIG1 register                                                ReadWord/WriteWord
        0Eh         Read/write CONFIG2 register                                                ReadWord/WriteWord
        0Fh         Read/write CONFIG3 register                                                ReadWord/WriteWord
        10h         Read/write alert temperature for socket 0                                  ReadWord/WriteWord
        11h         Read/write alert temperature for socket 1                                  ReadWord/WriteWord
        12h         Read/write alert temperature for socket 2                                  ReadWord/WriteWord
        13h         Read/write alert temperature for socket 3                                  ReadWord/WriteWord
        14h         Request polling                                                                 SendByte
        15h         Clear alert                                                                     SendByte
                                         Configuration           CONFIG2 sets the temperature offset, and CONFIG3
The MAX6618 has four configuration registers (Table 1).          controls the temperature averaging. You can write to
CONFIG0 is the main configuration register that enables          the configuration registers to set the configuration or
the PECI sockets, I2C bus timeout, PEC, alert activation,        read from the configuration registers to get the current
and polling delay. CONFIG1 sets the number of retries,           settings.
Table 1. Configuration Registers
       COMMAND BYTE               REGISTER DESCRIPTION                     TYPE                        RESULT
             0Ch                       CONFIG0 register             ReadWord/WriteWord         See the CONFIG0 section.
             0Dh                       CONFIG1 register             ReadWord/WriteWord         See the CONFIG1 section.
             0Eh                       CONFIG2 register             ReadWord/WriteWord         See the CONFIG2 section.
             0Fh                       CONFIG3 register             ReadWord/WriteWord         See the CONFIG3 section.
6                                                                                                          Maxim Integrated


                                                                                              MAX6618
                                                           PECI-to-I2C Translator
                                                 CONFIG0 The optional polling delay (bits 2:0) inserts after polling
The CONFIG0 register holds a bit mask for PECI sock-     the set of all sockets and domains that are enabled in
ets and domains that are enabled for polling as well as  bits 15:8 with a minimal pause of 2.5ms between PECI
a polling delay (minimum delay between sets of polls)    reads. After polling all enabled sockets and domains,
and features enable/disable bits. Table 2 shows the      the device pauses PECI communications for the config-
various options for CONFIG0.                             ured time before starting to poll the set of enabled
                                                         sockets and domains again. Table 3 shows the various
Table 2. CONFIG0 Register                                polling delay options.
 BIT(S)                DESCRIPTION               DEFAULT Table 3. Polling Delay
  15:8    Polling enable for sockets and domains   00h
                                                           POLL DELAY VALUE            DELAY BETWEEN POLLS (ms)
   15     1 = enable socket 3, domain 1             0
                                                                      0                     Polling on request only
   14     1 = enable socket 3, domain 0             0
                                                                      1                                2.5
   13     1 = enable socket 2, domain 1             0
                                                                      2                                 5
   12     1 = enable socket 2, domain 0             0
                                                                      3                                10
   11     1 = enable socket 1, domain 1             0
                                                                      4                                50
   10     1 = enable socket 1, domain 0             0
                                                                      5                           100 (default)
    9     1 = enable socket 0, domain 1             0
                                                                      6                               500
    8     1 = enable socket 0, domain 0             0
                                                                      7                            Reserved
          1 = enable I2C bus lockup timeout
    7                                               1
          0 = Disable timeout                                                                                   CONFIG1
                                                         The CONFIG1 register configures the maximum num-
          1 = alternate data representation
    6                                               0    ber of retries before aborting a PECI temperature read
          0 = 16-bit data representation
                                                         as well as the originated (suggested) PECI bit time.
          1 = enable I2C packet error checksum           Table 4 shows the various options for CONFIG1.
    5     (PEC) on device return data               1    Software must configure this value as the register
          0 = Disable PEC                                default may cause improper operation.
          1 = mask temperature alerts
    4
          0 = Activate alerts
                                                    0    Table 4. CONFIG1 Register
    3     Reserved, set to 0                        0      BIT(S)               DESCRIPTION                     DEFAULT
   2:0    Poll delay, see Table 3                   5                Originated PECI bit time
                                                                     (before negotiation)
                                                                     01h: RESERVED
                                                            15:8                                                  02h
                                                                     14h…0FFh: CONFIG1[15:8] + 1µs
                                                                     Minimum: 14h (= 21µs / 47.62kHz)
                                                                     Maximum: 0FFh (= 256µs / 3.906kHz)
                                                                     Maximum number of retries for PECI
                                                             7:0                                                  03h
                                                                     transactions
Maxim Integrated                                                                                                       7


 MAX6618
PECI-to-I2C Translator
                                                  CONFIG2                          Temperature Representation
The CONFIG2 register holds the offset that is added to       Temperature data is formatted in 16-bit two’s comple-
all temperature return values that are not error codes.      ment representing a range from -512°C to +512°C in
The offset is enabled in CONFIG0, bit 6; +95°C is set        steps of 1/64°C (Figure 1). Internally, the device always
as 17C0h or 005Fh, depending on the data format. To          uses the 16-bit data format. The temperature is given in
represent +95°C in 16-bit representation, convert            two’s complement and left-shifted so that the +1°C bit
+95°C to binary using two’s complement and left-shift        is bit 6 (Figure 2). Temperatures can be represented
six times. The MAX6618 automatically converts the off-       externally in alternate data format if fractional readings
set value to the equivalent value when the data format       are not needed. Table 8 shows some examples.
is changed. See Table 5 for the default offset and Table
6 for some example values.
Table 5. CONFIG2 Register                                                           1
                                                                                      °C
                                                                                               1
                                                                                                   °C
                                                                                                                 1
                                                                                                                   °C
                                                                                    2          8                32
  BIT(S)               DESCRIPTION                DEFAULT
                                                                       RESLO
   15:0    Temperature offset                       0000h
                                                                        7      6    5    4      3        2      1     0
Table 6. Example Offset Values in 16-Bit
Temperature Representation                                                    1°C        1               1             1
                                                                                            °C               °C           °C
                                                                                         4              16            64
                                           BINARY
  TEMP (°C)        HEX
                                   RESHI          RESLO
       0          0000h         0000 0000        0000 0000   Figure 1. Temperature Measured in 1/64°C Steps
      +25         0640h         0000 0110        0100 0000
      +50         0C80h         0000 1100        1000 0000
      +75         12C0h         0001 0010        1100 0000                  TWO'S
      +95         17C0h         0001 0111        1100 0000               COMPLEMENT
                                                               -50°C                       1 1 0 0         1 1 1 0
When configured in CONFIG2 and the return code is not
an error code (see the Error Codes section), the device
adds the offset value stored in CONFIG2 to the return
value. For example, if the CPU’s thermal control circuit        15 14 13 12 11 10     9  8        7   6     5   4   3   2   1  0
activation point is at +95°C, CONFIG2 can be set to            RESHI                           RESLO
+95°C (005Fh or 17C0h) and all return values are con-
verted to absolute temperatures. Note that the thermal
control circuit activation point is CPU specific. The offset
                                                             Figure 2. Conversion of Temperature Done in Two’s
value is represented in the current data format.             Complement
                                                  CONFIG3
CONFIG3 register configures the temperature averaging        Table 8. Example of 16-Bit Representation
function. See the Temperature Averaging section for          with No Offset (Activation Point = +95°C)
more information. Table 7 shows the default settings.
                                                               TEMP       RELATIVE                               BINARY
Table 7. CONFIG3 Register                                                                 HEX
                                                                (°C)       TEMP (°C)                     RESHI           RESLO
   BIT(S)               DESCRIPTION                DEFAULT      +94             -1       FFC0h        1111 1111        1100 0000
    15:8    Reserved, set to 0                       00h        +85            -10       FD80h        1111 1101        1000 0000
    7:0     Averaging shift count, see formula       00h        +70            -25       FDC0h        1111 1101        1100 0000
                                                                +45            -50       F380h        1111 0011        1000 0000
                                                                +20            -75       ED30h        1110 1101        0100 0000
8                                                                                                                  Maxim Integrated


                                                                                                           MAX6618
                                                                     PECI-to-I2C Translator
           Alternate Temperature Value Representation                                                   Temperature Averaging
This optional feature can be enabled using bit 6 of               The MAX6618 can average several temperature read-
CONFIG0. When the alternate data format is enabled, the           ings and return a value as calculated by:
temperature value is shifted right as shown in Table 9. The
most significant bits are set to all 0s or all 1s depending on                        1                ⎛           1         ⎞
                                                                    TNEW =                   x TPECI + ⎜ 1 −                   x TOLD
the sign bit 15, also shown as S in Figure 3. Table 10                           2CONFIG3              ⎝       2CONFIG3 ⎟⎠
shows some example values. This translation is not per-
formed for error codes (16-bit values from 8000h                  where TOLD is the previously stored temperature, TPECI
through 81FFh).                                                   is the new value read from PECI, and TNEW is the newly
Excluding error codes, the software only has to exam-             stored temperature ready to be returned through I2C.
ine the RESLO data byte, as it represents an integer              This calculation can cause significant bits to be lost.
value in the range from -128°C to +127°C in 1°C steps.            Enable temperature averaging by writing the desired
The RESHI byte is all 0s or all 1s for valid return codes,        averaging amount to the CONFIG3 register. Writing 00h
and either 80h or 81h for all error codes.                        to the CONFIG3 register disables temperature averaging.
                                                                                                                   FRACTIONAL VALUE
                                                                      RESHI                            RESLO
                                                                      S    X    X  12  11 10   9  8     7    6   X  X     X    X  X X
Table 9. Alternate Temperature
Representation
 DESCRIPTION              RESHI                    RESLO
 16-bit value      15:14:13:12:11:10:9:8        7:6:5:4:3:2:1:0       S    S    S  S    S S    S  S    S    12  11  10    9    8  7 6
 Alternate                                                            (SIGN BITS)                      INTEGER VALUE (~ 1°C)
                  15:15:15:15:15:15:15:15 15:12:11:10:9:8:7:6
 representation
                                                                   Figure 3. Alternate Temperature Representation
Table 10. Example of Alternate Representation with No Offset (Activation Point = +95°C)
                                                                                                    BINARY
       TEMP (°C)         RELATIVE TEMP (°C)                  HEX
                                                                                      RESHI                         RESLO
           +94                       -1                     FFFFh                  1111 1111                       1111 1111
           +85                      -10                     FFF6h                  1111 1111                       1111 0110
           +70                      -25                     FFE7h                  1111 1111                       1110 0111
           +45                      -50                     FFCEh                  1111 1111                       1100 1110
           +20                      -75                     FFB5h                  1111 1111                       1011 0101
 Maxim Integrated                                                                                                                     9


 MAX6618
PECI-to-I2C Translator
                        Temperature Commands                   words are temperature values read from the PECI
Table 11 shows the different commands for selecting            interface. PECI-enabled Intel microprocessors return
one of the PECI hosts or getting the maximum tempera-          temperature data in fractions of 1°C below the thermal-
ture. Read commands are initiated by the MAX6618,              control-circuit activation point, resulting in negative
and the result returned is a 16-bit word with the least        return values that do not represent absolute tempera-
significant bit (LSB) clocked in first for the selected        tures. Absolute temperatures can be achieved by set-
PECI host.                                                     ting the temperature offset in CONFIG2.
The result consists of RESLO for the 8 LSBs and RESHI          Table 12 shows example return values for an Intel CPU.
for the 8 MSBs, resulting in a 16-bit word. The 16-bit         Note that the MAX6618 does not interpret the return
Table 11. Read Temperature
      ADDRESS                           REGISTER                            TYPE                  RESULT
         00h         Socket 0, domain 0
         01h         Socket 0, domain 1
         02h         Socket 1, domain 0
         03h         Socket 1, domain 1
         04h         Socket 2, domain 0
                                                                          ReadWord               16-bit words
         05h         Socket 2, domain 1
         06h         Socket 3, domain 0
         07h         Socket 3, domain 1
                     Read maximum temperature for all enabled
         08h
                     sockets/domains
Table 12. Return Temperature Values
       RELATIVE                        CONFIG2 OFFSET                                RESHI:RESLO RESULT
  TEMPERATURE (°C)              16 BITS               ALTERNATE                 16 BITS               ALTERNATE
                                 0000                     0000                   FFC0                      FFFF
           -1
                                 17C0                     005F                   1780                     005E
                                 0000                     0000                   F700                     FFDC
          -36
                                 17C0                     005F                   0ec0                     003B
                                 0000                     0000                   F6C0                     FFDB
          -37
                                 17C0                     005F                   0E80                     003A
                                 0000                     0000                   F680                     FFDA
          -38
                                 17C0                     005F                   0E40                      0039
                                 0000                     0000                   F640                     FFD9
          -39
                                 17C0                     005F                   0E00                      0038
                                 0000                     0000                   F600                     FFD8
          -40
                                 17C0                     005F                   0DC0                      0037
                                 0000                     0000                   F5C0                     FFD7
          -41
                                 17C0                     005F                   0D80                      0036
                                 0000                     0000                   F580                     FFD6
          -42
                                 17C0                     005F                   0D40                      0035
                                 0000                     0000                   F540                     FFD5
          -43
                                 17C0                     005F                   0D00                      0034
10                                                                                                         Maxim Integrated


                                                                                                   MAX6618
                                                            PECI-to-I2C Translator
data (with the exception of error codes) and the relative
temperatures are listed for reference only. Table 12
shows the values with 16-bit and alternate word format.                         DATA FROM PECI
The read maximum temperature command from Table 11
returns the highest temperature that is not an error
code from the enabled PECI sockets and domains. This
                                                                      Y           ERROR?                  N
operation works on signed numbers only and does not
give information as to what socket the temperature
result comes from. To find the socket and domain, use                                                    AVERAGING
the read maximum temperature address command as
shown in Table 13.
Table 13. Read Maximum Temperature
                                                                                          N           ALT.
Address                                                                                             FORMAT?
  COMMAND           DESCRIPTION           TYPE    RESULT
                                                                                                           Y
                 Read address of
      0Ah        socket/domain with the ReadWord   16-bit                                           CONVERT
                 maximum temperature                                                                  DATA
                                                                                                    FORMAT
The read maximum temperature address command
returns the register that had the highest temperature
when read maximum temperature was last called. An                                        ADD OFFSET
error is returned if the read maximum temperature has
not been called or when the read maximum tempera-
ture itself returns an error.                                                 RETURN DATA ON I2C
                                  Return Value Flow Chart
Figure 4 shows the operations performed on tempera-
ture data read through PECI.                              Figure 4. Operational Flowchart
 Maxim Integrated                                                                                                  11


 MAX6618
PECI-to-I2C Translator
                                                          Error Codes                                Version Information Command
Error codes are represented as 16-bit words in the                                Table 15 shows the command to read the firmware version.
range 8000h–81FFh as shown in Table 14.
                                                                                  Table 15. Firmware Command
Table 14. Error Codes                                                                COMMAND        DESCRIPTION             TYPE             RESULT
                                                                                                   Get firmware
    ERROR                                                                                 09h                             ReadWord       16-bit word
                                           DESCRIPTION                                             version
    CODES
     8000h–                                                                       The result is a 16-bit word (low byte transmitted first,
                     Refer to Intel PECI specification.
      80FFh                                                                       high byte second), e.g., 0100h for the MAX6618
                     PECI transaction failed for more than the                    firmware version 1.0.
      8100h
                     configured number of consecutive retries.
                                                                                                                Bus Lockout Timeout Reset
      8101h          Polling disabled for requested socket/domain.                If an I 2 C transaction starts and gets locked up for
                     First poll not yet completed for requested                   greater than 20ms, the MAX6618 asserts the internal
      8102h
                     socket/domain (on startup).                                  bus lockup reset that restarts itself in the default startup
                     Read maximum temperature requested, but no                   condition.
                     sockets/domains enabled or all enabled                                                                  Serial Interface
      8103h          sockets/domains have errors; or read maximum                 The MAX6618 operates as a slave that sends and
                     temperature address requested, but read                      receives data through an I2C-compatible, 2-wire inter-
                     maximum temperature was not called.                          face. The interface uses a serial-data line (SDA) and a
      8104h
                     Get alert socket/domain requested, but no alert              serial-clock line (SCL) to achieve bidirectional commu-
                     active.                                                      nication between master and slave. A master (typically
                                                                                  a microcontroller) initiates all data transfers to and from
                                                                                  the MAX6618 and generates the SCL clock that syn-
                                                                                  chronizes the data transfer (Figure 5).
      SDA
                                      tSU, DAT                    tSU, STA                                                              tBUF
                                                                                          tHD, STA                 tSU, STO
                           tLOW                   tHD, DAT
       SCL
                                       tHIGH
   tHD, STA
                                  tR           tF
              START                                                        REPEATED START                                       STOP            START
            CONDITION                                                        CONDITION                                        CONDITION       CONDITION
Figure 5. 2-Wire Serial-Interface Timing Details
 12                                                                                                                                   Maxim Integrated


                                                                                                     MAX6618
                                                            PECI-to-I2C Translator
The MAX6618 SCL and SDA lines operate as both             finally a STOP condition that reads the data from the
inputs and open-drain outputs. A pullup resistor is       specified register. These write and read transmissions
required on SCL and SDA.                                  must be joined using a repeated START without a
Each transmission consists of a START condition sent      STOP after the write transaction, even though the
by a master, followed by the MAX6618 7-bit slave          MAX6618 7-bit slave address needs to be present pre-
address, plus an R/W bit, one or more data bytes, and     ceding the R/W bits.
finally a STOP condition (Figure 6). To write to a                                             Start and Stop Conditions
MAX6618 register, a write transmission consists of a      Both SCL and SDA remain high when the interface is
START condition, followed by the MAX6618 7-bit slave      not busy. A master signals the beginning of a transmis-
address plus R/W = 0, a register address byte, one        sion with a START (S) condition by transitioning SDA
data byte, and finally a STOP condition. To read from a   from high to low while SCL is high. When the master
MAX6618 register, a combined write and read trans-        has finished communicating with the slave, it issues a
missions are required. The first write transmission con-  STOP (P) condition by transitioning SDA from low to
sists of a START condition, followed by the MAX6618       high while SCL is high. The bus is then free for another
7-bit slave address plus R/W = 0, a register address      transmission (Figure 6).
byte, and finally a STOP condition that sets the register
to be read. The second read transmission consists of a
START condition, followed by the MAX6618 7-bit slave
address plus R/W = 1, one or more data bytes, and
  SDA
                                                             SDA
                                                             SCL
          S                                     P                    DATA LINE STABLE; CHANGE OF DATA
  SCL
                                                                         DATA VALID       ALLOWED
        START                                  STOP
      CONDITION                              CONDITION
Figure 6. Start and Stop Conditions                       Figure 7. Bit Transfer
Maxim Integrated                                                                                                      13


 MAX6618
 PECI-to-I2C Translator
                         Data Transfer and Acknowledge     The first four bits of the MAX6618 slave address (A6:A3)
One data bit is transferred during each clock pulse.       are always 0101. Bits A2:A1 are set during the manufac-
The data on SDA must remain stable while SCL is high       turing process to 0:1. A0 is selected by the address
(Figure 7).                                                input AD0. AD0 can be connected to GND or VCC. The
The acknowledge bit is a clocked 9th bit that the recipi-  MAX6618 has two possible slave addresses selectable
ent uses to handshake receipt of each byte of data         by AD0. Therefore, a maximum of two MAX6618 devices
(Figure 8). Thus, each byte transferred effectively        can be controlled independently from the same interface
requires 9 bits. The master generates the 9th clock        (see the I2C Address Range section).
pulse, and the recipient pulls down SDA during the                    Message Format for Writing to the MAX6618
acknowledge clock pulse so that the SDA line is stable     A write to the MAX6618 consists of the transmission of
low during the high period of the clock pulse. When the    the MAX6618’s slave address with the R/W bit set to
master is transmitting to the MAX6618, the MAX6618         zero, followed by at least 1 byte of information. The first
generates the acknowledge bit because the MAX6618          byte of information is the command byte. The com-
is the recipient. When the MAX6618 is transmitting to      mand byte determines which register of the MAX6618
the master, the master generates the acknowledge bit       is to be written to by the next byte or read from during
because the master is the recipient.                       the next read transmission. If a STOP condition is
                                             Slave Address detected after the command byte is received, then the
The MAX6618 has a 7-bit long slave address (Figure 9).     MAX6618 takes no further action beyond setting the
The 8th bit following the 7-bit slave address is the R/W   register address.
bit. The R/W bit is low for a write command and high for   The bytes received after the command byte are data
a read command.                                            bytes. The data bytes go into the register of the
               START                      CLOCK PULSE
             CONDITION           FOR ACKNOWLEDGEMENT
          SCL          1       2               8      9      SDA        0    1     0   1   0     1   A0    ACK
       SDA BY
  TRANSMITTER
                                                             SCL
       SDA BY
     RECEIVER    S
 Figure 8. Acknowledge                                      Figure 9. Slave Address
 14                                                                                                     Maxim Integrated


                                                                                                                                   MAX6618
                                                                                         PECI-to-I2C Translator
MAX6618 specified by the command byte. Only the last                                                 Message Format for Reading the MAX6618
data byte or word transmitted before a STOP condition                                  The MAX6618 is read using the MAX6618’s internally
is stored by the device (Figure 10).                                                   stored command byte as an address pointer the same
                                                                                       way the stored command byte is used as an address
                                                                                       pointer for a write. The pointer autoincrements after
                                                                                       each data byte is read. Thus, a read is initiated by first
     TYPICAL READ WORD COMMAND
    PEC (PACKET ERROR CHECKSUM) ENABLED
          MASTER             ADDR:7       W       A        CMD:8            A
          MAX6618             ADDR:7       R      A        RESLO:8          A         RESHI:8       A         PEC:8         NA     P
    PEC (PACKET ERROR CHECKSUM) DISABLED
          MASTER             ADDR:7       W       A        CMD:8            A
          MAX6618             ADDR:7       R      A        RESLO:8          A         RESHI:8      NA     P
     TYPICAL WRITE WORD COMMAND
    COMMAND WITH PEC (PACKET ERROR CHECKSUM)
      MASTER       S         ADDR:7       W       A        CMD:8            A        INLO:8         A         INHI:8         A         PEC:8         A P
    COMMAND WITHOUT PEC (PACKET ERROR CHECKSUM)
      MASTER       S         ADDR:7       W       A        CMD:8            A        INLO:8         A         INHI:8         A     P
    THE RESULT CONSISTS OF RESLO FOR THE 8 LEAST SIGNIFICANT BITS (LSBS) AND RESHI FOR THE 8 MOST SIGNIFICANT BITS (MSBS), RESULTING IN A 16-BIT WORD.
    TEMPERATURE DATA AND ERROR CODES ARE GIVEN AS 16-BIT WORDS.
    ADDR:7: 7-BIT ADDRESS FOLLOWED BY A READ (R = 1) OR WRITE (W = 0) BIT TO FORM THE 8-BIT ADDRESS USED IN THE I2C/SMBUS PROTOCOL.
    P: I2C STOP CONDITION. SEE FIGURE 6.
    S: I2C START CONDITION. SEE FIGURE 6.
    A: ACK. THE PULSE ON THE 9th CLOCK CYCLE TO INDICATE ACKNOWLEDGE TRANSFER. SLAVE PULLS LOW TO GND AND MASTER PULLS TO SLAVE'S VOL.
    NA: NOT ACKNOWLEDGE
    CMD: COMMAND BYTE
    RESLO: LEAST SIGNIFICANT 8-BIT RESULT
    RESHI: MOST SIGNIFICANT 8-BIT RESULT
Figure 10. Typical Read/Write Word Command
Maxim Integrated                                                                                                                                         15


 MAX6618
 PECI-to-I2C Translator
configuring the MAX6618’s command byte by perform-                                            Pin Configuration
ing a write. The master can now read N consecutive
bytes from the MAX6618 with the first data byte being
                                                                TOP VIEW
read from the register addressed by the initialized com-
mand byte (Figure 10).                                                                 +
                                                                               PECI 1                 10 VREF
                  Packet Error Checksum (PEC)                                 AGND  2                  9 AD1
All MAX6618 I2C packets have an optional packet error                                    MAX6618
checksum (PEC). The PEC is implemented in accor-                               AD0  3                  8 AD2
dance with the SMBus specification, versions 1.1 and                           SDA  4                  7 GND
2. The MAX6618 accepts commands with or without
                                                                               SCL  5                  6 VCC
PEC. The PEC for device responses is optional and can
be disabled in the CONFIG0 register.                                                      µMAX
                 Applications Information
                Operation with Multiple Masters
If the MAX6618 is operated on a 2-wire interface with                                          Chip Information
multiple masters, a master reading the MAX6618              PROCESS: CMOS
should use a repeated START between the write that
sets the MAX6618’s address pointer, and the read(s)
that takes the data from the location(s) (Table 16). This                              Package Information
is because it is possible for master 2 to take over the     For the latest package outline information and land patterns (foot-
bus after master 1 has set up the MAX6618’s address         prints), go to www.maximintegrated.com/packages. Note that a
pointer, but before master 1 has read the data. If mas-     “+”, “#”, or “-” in the package code indicates RoHS status only.
ter 2 subsequently changes the MAX6618’s address            Package drawings may show a different suffix character, but the
pointer, master 1’s delayed read can be from an unex-       drawing pertains to the package regardless of RoHS status.
pected location. The use of multiple masters is not rec-
ommended.                                                      PACKAGE             PACKAGE       OUTLINE          LAND
                                                                   TYPE              CODE            NO.      PATTERN NO.
                                 I2C Address Range               10 μMAX             U10+2        21-0061        90-0330
In addition to the four MSBs (0101), the I 2 C slave
address includes bit A0 (set by the address input AD0)
and bits A2:A1 (set to 01). See Table 16.
                       Choosing Pullup Resistors
I2C requires pullup resistors to provide a logic-high level
to data and clock lines. There are tradeoffs between
power dissipation and speed, and a compromise must
be made in choosing pullup resistor values. Every device
connected to the bus introduces some capacitance even
when the device is not in operation. I2C specifies a mini-
mum 300ns rise time to go from low to high (30% to 70%)
for fast mode, which is defined for a date rate of 400kbps
(refer to the I2C specifications for details). To meet the
rise time requirement, choose pullup resistors so that the
rise time tR = 0.85RPULLUP x CBUS < 300ns. For typical
Table 16. MAX6618 Slave Addresses
     A6:A1            A0             I2C ADDRESS BYTE
    (FIXED)    (SET BY AD0 PIN)      INCLUDING R/W BIT
    010101             0                   54h, 55h
    010101             1                   56h, 57h
 16                                                                                                            Maxim Integrated


                                                                                                                                   MAX6618
                                                                                       PECI-to-I2C Translator
                                                                                                                              Revision History
  REVISION       REVISION                                                                                                                           PAGES
                                                                               DESCRIPTION
   NUMBER           DATE                                                                                                                          CHANGED
       0              1/07        Initial release                                                                                                       —
                                  Updated the Slave Address section and Figure 9; replaced Table 16; updated the I2C
       1              8/07                                                                                                                           14, 16
                                  Address Range section
                                  Removed arrowhead in the SCL line of the Typical Application Circuit; added the
                                  soldering temperature to the Absolute Maximum Ratings section; updated the Slave
       2              2/11                                                                                                                        1, 2, 14, 16
                                  Address section and Figure 9; updated Table 16; updated the I2C Address Range
                                  section; added the Package Information table
       3            12/11         Clarified CONFIG1 information in Table 4 and repeated START condition                                               7, 13
                                  Clarified that the device only supports PECI 1.0 (General Description, Features, and
       4              5/13                                                                                                                             1, 7
                                  CONFIG1 sections)
Maxim Integrated cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim Integrated product. No circuit patent
licenses are implied. Maxim Integrated reserves the right to change the circuitry and specifications without notice at any time. The parametric values (min and
max limits) shown in the Electrical Characteristics table are guaranteed. Other parametric values quoted in this data sheet are provided for guidance.
Maxim Integrated 160 Rio Robles, San Jose, CA 95134 USA 1-408-601-1000 ________________________________ 17
© 2013 Maxim Integrated Products, Inc.                      Maxim Integrated and the Maxim Integrated logo are trademarks of Maxim Integrated Products, Inc.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 MAX6618AUB+ MAX6618AUB+T MAX6618AUB+TG11 MAX6618AUB+G126 MAX6618AUB+TG126
