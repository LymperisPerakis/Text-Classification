 MAX13037/MAX13038                                                              Contact Monitor and Level
                                                                             Shifters with LDO Regulator
General Description                                               Features
The MAX13037/MAX13038 contact monitor and level                   •  +6V to +26V Operating Voltage Range
shifters monitor and debounce eight remote mechanical             •  +42V Compatibility on BAT
switches and assert an interrupt (INT) if a switch
changes state. The state of each switch is sampled                •  Switch Inputs Withstand Reverse Battery
through an SPI interface by reading the status register.          •  150mA LDO, +5V (MAX13037) or +3.3V (MAX13038)
Any switch can be prohibited from asserting an interrupt          •  Ultra-Low Operating Current 28µA (typ) in 64ms
by writing to the command register. Four of the switch               Scan Mode with LDO ON
inputs are intended for ground-connected switches                 •  Resistor Adjustable Switching Hysteresis
(IN0–IN3) and the other four inputs (IN4–IN7) are pro-
grammable in groups of two for either ground-connect-             •  Watchdog and Reset
ed or battery-connected switches. Two switch inputs               •  Built-In Switch Debouncing
(IN0, IN1) have direct level-shifted outputs (DO0, DO1)           •  Interrupt Output
to be used for PWM or other timing-based signals.                 •  Immunity to Transients
Switch input thresholds are set to 50% of the voltage             •  High Modularity
applied to BATREF. The threshold hysteresis is set by
connecting an external resistor from HYST to ground.              •  Thermal Protection
The MAX13037/MAX13038 supply an adjustable wet-                   •  ±8kV HBM ESD Protection on IN0–IN7 Without
ting current to each closed switch to clean mechanical               External Components
switch contacts that are exposed to adverse condi-                •  Two Inputs (IN0, IN1) Programmable as Direct
tions.                                                               Outputs
The MAX13037/MAX13038 feature a low dropout (LDO)                 •  Four Inputs (IN4–IN7) Programmable for BAT or
linear regulator capable of supplying up to 150mA of                 GND Related Switches
current. The MAX13037 LDO has an output voltage of
+5V, whereas the MAX13038 has an output voltage of
+3.3V. The MAX13037/MAX13038 also feature a watch-
dog timer and an open-drain reset output with
adjustable timing.                                                Ordering Information
The MAX13037/MAX13038 operate with a +6V to +26V
                                                                                        LDO
battery voltage applied to BAT. The MAX13037/                                                       TEMP      PIN-
                                                                        PART         OUTPUT
MAX13038 are available in a 6mm x 6mm, 36-pin TQFN                                                 RANGE      PACKAGE
                                                                                     VOLTAGE
package and operate over the automotive -40°C to
+125°C temperature range.                                                                          -40°C to   36 TQFN-EP*
                                                                   MAX13037ATX+         +5V
                                                                                                   +125°C     (6mm x 6mm)
Applications                                                                                       -40°C to   36 TQFN-EP*
                                                                   MAX13038ATX+        +3.3V
        Body Computers                                                                             +125°C     (6mm x 6mm)
        Window Lifters                                            +Denotes a lead(Pb)-free/RoHS-compliant package package.
                                                                  *EP = Exposed pad.
        Seat Movers
        Electric Sunroofs
        Other Control ECUs
 Pin Configuration and Typical Application Circuit appear at end of data sheet.
19-1084; Rev 1; 5/15


 MAX13037/MAX13038                                                                                               Contact Monitor and Level
                                                                                                               Shifters with LDO Regulator
Absolute Maximum Ratings
(All voltages referenced to GND, unless otherwise noted.)
VLO ........................................................................-0.3V to +6.0V       Continuous Current (CS, CLK, SDI, SDO, WDI, DO0,
BAT.........................................................................-0.3V to +42V          DO1, REGOFF) .............................................................±20mA
IN_ , BATREF...........................................................-45V to +45V              Continuous Power Dissipation (TA = +70°C)
IN_ to BAT ...............................................................-45V to +45V             36-Pin TQFN (derate 35.7mW/°C above +70°C) .......2857mW
SD, REGON. ...........................................................-0.3V to +45V              Operating Temperature Range .........................-40°C to +125°C
HYST, WET, TD, TDEB, THRESH, OT, INT, RST......-0.3V to 6.0V                                     Junction Temperature ......................................................+150°C
CS, CLK, SDI, SDO, WDI,                                                                          Storage Temperature Range .............................-65°C to +150°C
    DO0, DO1, REGOFF.......................................-0.3V to (VLO + 0.3V)                 Lead Temperature (soldering, 10s) .................................+300°C
Package Thermal Characteristics (Note 1)
TQFN
    Junction-to-Ambient Thermal Resistance (θJA) ...........28°C/W                               Junction-to-Case Thermal Resistance (θJC) ...................1.4°C/W
 Note 1: Package thermal resistances were obtained using the method described in JEDEC specification JESD51-7, using a 4-layer
           board. For detailed information on package thermal considerations see www.maximintegrated.com/thermal-tutorial.
 Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional
 operation of the device at these or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to
 absolute maximum rating conditions for extended periods may affect device reliability.
Electrical Characteristics
(BAT = +6V to +26V, TA = -40°C to +125°C, unless otherwise noted. Typical values are at BAT = +14V, TA = +25°C.) (Note 2)
               PARAMETER                                  SYMBOL                             CONDITIONS                         MIN            TYP            MAX           UNITS
  POWER SUPPLY
  BAT Supply Range                                            VBAT                                                                6                             26             V
                                                                             VBAT = +14V, continuous scan (SC2 = 1,
                                                                             SC1 = 1, SC0 = 0), programmable
  BAT Supply Current with
                                                          ISUP_REG           hysteresis off (M0 = M1 = 1),                                       57            110            µA
  Regulator On
                                                                             IN0–IN7 = unconnected, regulator on
                                                                             (REGON = REGOFF = GND).
                                                                             VBAT = +14V, continuous scan (SC2 = 1,
                                                                             SC1 = 1, SC0 = 0), programmable
  BAT Supply Current with
                                                              ISUP           hysteresis off (M0 = M1 = 1),                                       46             80            µA
  Regulator Off
                                                                             IN0–IN7 = unconnected, regulator off
                                                                             (REGON = BAT, REGOFF = GND).
                                                                             VBAT = +14V, scan mode (SC0 = 0,
  BAT Supply Current in Scan
                                                         ISCAN_REG SC1 = 0, SC2 = 0), regulator on                                               28             48            µA
  Mode with Regulator On
                                                                             (REGON = REGOFF = GND).
                                                                             VBAT = +14V, scan mode (SC0 = 0,
  BAT Supply Current in Scan
                                                             ISCAN           SC1 = 0, SC2 = 0), regulator off                                    17             35            µA
  Mode with Regulator Off
                                                                             (REGON = BAT, REGOFF = GND).
  BAT Supply Current in Shutdown                                             VSD = 0V, VBAT = +14V,     TA = +25°C                                3              5
                                                            ISHDN                                                                                                             µA
  Mode                                                                       REGON = BAT                TA = +125°C                               4              7
  BATREF Input Resistance                                  RBATREF           VBATREF = +14V                                       1             2.7                           MΩ
  BATREF Input Leakage Current in
                                                          IL_BATREF          VSD = 0V, VBATREF = +14V                                                            1            µA
  Shutdown
 www.maximintegrated.com                                                                                                                                   Maxim Integrated | 2


 MAX13037/MAX13038                                                                  Contact Monitor and Level
                                                                                 Shifters with LDO Regulator
Electrical Characteristics (continued)
(BAT = +6V to +26V, TA = -40°C to +125°C, unless otherwise noted. Typical values are at BAT = +14V, TA = +25°C.) (Note 2)
            PARAMETER               SYMBOL                    CONDITIONS                       MIN      TYP       MAX       UNITS
  SWITCH INPUTS (IN0–IN7)
                                               RHYST = ∞ or programmable hysteresis          0.425 x    0.5 x    0.575 x
  Input Voltage Threshold Center               disabled                                      VBATREF VBATREF VBATREF
                                      VTH_C                                                                                    V
  (Note 3)                                                                                     0.4 x    0.5 x     0.63 x
                                               RHYST = 90kΩ
                                                                                             VBATREF VBATREF VBATREF
                                               RHYST = ∞ or programmable hysteresis          0.133 x 0.166 x 0.22 x
                                               disabled                                      VBATREF VBATREF VBATREF
  Input Voltage Threshold                                                                     0. 26 x 0.361 x 0. 48 x
                                    VTH_HYS    RHYST = 90kΩ                                                                    V
  Hysteresis (Note 4)                                                                        VBATREF VBATREF VBATREF
                                                                                                        0.5 x
                                               RHYST = 0Ω
                                                                                                       VBATREF
  Switch-State Sense Resistor        RSENSE                                                     11       16         22        kΩ
  Wetting Current Rise/Fall Time   IWET_RISE_                              Rise                           6
                                               RWET = 61kΩ                                                                    µs
  (Note 5)                             FALL                                Fall                           1
                                               RWET = 61kΩ                                               22
  Wetting Current                      IWET    RWET = 30kΩ                                      28       40         51        mA
                                               RWET = 330kΩ                                              7.5
  IN0–IN7 Input Impedance in
                                               VSD = 0V, VIN_ = +14V                            5.5      8.5                  MΩ
  Shutdown
  ESD Protection IN0–IN7                       Human Body Model (HBM)                                     8                   kV
  LOGIC-LEVELS (CS, CLK, SDI , SDI, DO0, DO1, INT, OT, RST, SD, REGON, REGOFF)
  SDO, DO1, DO2
                                       VOH     Source current = 2mA                          0.8 x VLO                         V
  Output Voltage High
  SDO, DO1, DO2
                                       VOL     Sink current = 4mA                                              0.2 x VLO       V
  Output Voltage Low
  INT, OT, RST Output Voltage Low     VINTL    Sink current = 4mA                                                  0.4         V
  SD Input Leakage Current            IL_SD     VSD = VBAT = +14V                                                    1        µA
  SD, REGON Input Voltage Low         VIL_SD                                                                       0.8         V
  SD, REGON Input Voltage High       VIH_SD                                                     2.4                            V
  REGON Pullup Current               IREGON    REGON = 0                                        0.4       1        3.0        µA
  CS, CLK, SDI, REGOFF, WDI
                                        VIL                                                                   0.33 x VLO       V
  Input Voltage Low
  CS, CLK, SDI, REGOFF, WDI
                                        VIH                                                  0.66 x VLO                        V
  Input Voltage High
  CS, CLK, WDI, REGOFF Input
                                         IIL                                                     -1                 +1        µA
  Leakage Current
  INT, OT, RST Leakage Current          IOL                                                      -1                 +1        µA
  SDI Pulldown Resistor                RSDI                                                     65       100       145        kΩ
 www.maximintegrated.com                                                                                        Maxim Integrated | 3


 MAX13037/MAX13038                                                                    Contact Monitor and Level
                                                                                    Shifters with LDO Regulator
Electrical Characteristics (continued)
(BAT = +6V to +26V, TA = -40°C to +125°C, unless otherwise noted. Typical values are at BAT = +14V, TA = +25°C.) (Note 2)
            PARAMETER               SYMBOL                        CONDITIONS                   MIN     TYP      MAX       UNITS
  LINEAR REGULATOR
                                                MAX13037, VBAT = +14V, ILOAD = 1mA             4.92    5.00     5.08
  Output Voltage                       VLO                                                                                   V
                                                MAX13038, VBAT = +14V, ILOAD = 1mA            3.234    3.300   3.366
                                                                              VLO = +5V
                                                                                                       0.53       1
                                                ILOAD = 1mA to 50mA,          (MAX13037)
                                                VBAT = +14V                   VLO = +3.3V
                                                                                                       0.53       1
                                                                              (MAX13038)
  Load Regulation                  LOAD_REG                                                                                  %
                                                                              VLO = +5V
                                                                                                         1      1.85
                                                ILOAD = 1mA to 150mA,         (MAX13037)
                                                VBAT = +14V                   VLO = +3.3V
                                                                                                         1      1.85
                                                                              (MAX13038)
  Line Regulation                  LINE_REG VBAT = +6V to +26V                                 -0.9             +0.9       mV/V
                                                VLO = +5V, ILO = 50mA (MAX13037)                                 330
  Dropout Voltage                    VDROP      VLO = +5V, ILO = 150mA (MAX13037)                               1000        mV
                                                VLO = +3.3V, ILO = 150mA (MAX13038)                             1300
  Output Current Limit                 ILIM     VBAT = +14V                                    150                          mA
                                                ILO = 10mA, f = 100Hz, 500mVP-P,
  Power-Supply Rejection Ratio        PSRR                                                              68                  dB
                                                AC-coupled into VBAT
  Start-Up Time                      tSTART                                                              1                  ms
  RESET, WATCHDOG
  Reset Reference Voltage             VRST      THRESH from high to low                        1.20    1.24     1.28         V
  THERMAL SHUTDOWN
  Thermal Shutdown Temperature       TSHDN      (Note 6)                                                165                 °C
  Thermal Shutdown Temperature
                                     TWARN      (Note 7)                                                135                 °C
  for Wetting Currents Only
  Thermal Shutdown Hysteresis        THYST                                                              15                  °C
Timing Characteristics
(BAT = +6V to +26V, TA = -40°C to +125°C, unless otherwise noted. Typical values are at BAT = +14V, TA = +25°C.) (Note 2)
            PARAMETER               SYMBOL                       CONDITIONS                   MIN      TYP     MAX       UNITS
 IN0 to DO0 Propagation Delay,                 VBAT = +6V                                               22       35
                                     tPROP                                                                                  µs
 IN1 to DO1 Propagation Delay                  VBAT = +14V                                              22
 CLK Frequency                        fCLK     Input rise/fall time < 2ns                                         5       MHz
 Falling Edge of CS to Rising
 Edge of CLK                         tLEAD     Input rise/fall time < 2ns, Figure 1            110                          ns
 Required Setup Time
 Falling Edge of CLK to Rising
 Edge of CS                           tLAG     Input rise/fall time < 2ns, Figure 1            50                           ns
 Required Setup Time
 www.maximintegrated.com                                                                                      Maxim Integrated | 4


 MAX13037/MAX13038                                                                         Contact Monitor and Level
                                                                                          Shifters with LDO Regulator
Timing Characteristics (continued)
(BAT = +6V to +26V, TA = -40°C to +125°C, unless otherwise noted. Typical values are at BAT = +14V, TA = +25°C.) (Note 2)
             PARAMETER                   SYMBOL                        CONDITIONS                    MIN      TYP      MAX       UNITS
  SDI to Falling Edge of CLK
                                           tSI(SU)   Input rise/fall time < 2ns, Figure 1             30                            ns
  Required Setup Time
  Falling Edge of CLK to SDI
                                         tSI(HOLD)   Input rise/fall time < 2ns, Figure 1             20                            ns
  Required Hold Time
  Time from Falling Edge of CS to
                                          tSO(EN)    Input rise/fall time < 2ns, Figure 1                               55          ns
  SDO Low Impedance
  Time from Rising Edge of CS to
                                          tSO(DIS)   Figures 1 and 2                                                    55          ns
  SDO High Impedance
  Time from Rising Edge of CLK to
                                           tVALID    CSDO =15pF, Figure 1                                               70         ms
  SDO Data Valid
                                                     CTDEB = 500pF                                   3.18      5.9     9.42        ms
  Debounce Time                             tDEB
                                                     CTDEB = 10nF                                     63      120      188         ms
  Scanning Time Pulse                      tSCAN                                                      130     250      400          µs
  Scanning Time Period                    tSCAN-P    SC0 = 0, SC1 = 1, SC2 = 1                         4        8       14         ms
  Wetting Time Pulse                       tWETT     WTOFF = 0                                        10       21       35         ms
  Time from Shutdown to Normal                       SD low-to-high transition to input monitoring
                                             tSD                                                              200                   µs
  Operation                                          enabled
  Time from SCAN Mode to Normal
                                             tSM     (Note 8)                                                 500                   µs
  Operation
  Reset Output Pulse Width                  tRST     CTD = 10nF (Figure 3)                             10      21       36         ms
                                                     CTD = 10nF, time before INT goes low
  Watchdog Timeout Period 1                 tWD1                                                      40       84      144         ms
                                                     (Figure 3)
                                                     CTD = 10nF, time before RST goes low
  Watchdog Timeout Period 2                 tWD2                                                            2 x tWD1               ms
                                                     (Figure 3)
  Minimum Watchdog Timeout
                                            tWDI                                                      300                           ns
  Reset on WDI
 Note 2: All units are 100% production tested at TA = 125°C. Limits over the operating temperature range are guaranteed by design and
          not production tested.
 Note 3: VTH_C = (VTH_HIGH + VTH_LOW) / 2.
 Note 4: VTH_HYS = (VTH_HIGH - VTH_LOW).
 Note 5: Wetting current rise/fall time is measured as the time it takes to go from 20% to 80% of the maximum wetting current.
 Note 6: TSHDN is the temperature at which the wetting currents and LDO are disabled.
 Note 7: TWARN is the temperature at which only the wetting currents are disabled.
 Note 8: When exiting SCAN mode to enter Normal Mode (through SPI) any input change is ignored for 500µs (typ) to allow correct
          wake-up of input comparators. After this time elapses, the inputs are monitored in continuous mode.
 www.maximintegrated.com                                                                                             Maxim Integrated | 5


MAX13037/MAX13038                                                               Contact Monitor and Level
                                                                             Shifters with LDO Regulator
      CS
                          tLEAD                                                              tLAG
     CLK
                                    tSI(SU)  tSI(HOLD)
      SDI                                MSB IN
                      tSO(EN)                                        tVALID                          tSO(DIS)
     SDO                                MSB OUT                                           LSB OUT
Figure 1. SPI Timing Characteristics
                                                       VL
                                                                  CS
                                                           1kΩ
                           MAX13037                                  tSO(EN)                      tSO(DIS)
                  CS       MAX13038      SDO
                                                            15pF SDO
                                                                              1/3VL                         VOL + 0.1VL
Figure 2. SDO Enable/Disable Test Circuit and Timing Diagram
           WDI
                                                        tWD1          tWD1
           INT
           RST
               NORMAL OPERATION                                                tWD2        tRST
               (NO SWITCHES ACTIVE)
Figure 3. Watchdog Interrupt/Reset Timing Diagram
www.maximintegrated.com                                                                            Maxim Integrated | 6


MAX13037/MAX13038                                                                                                                                                         Contact Monitor and Level
                                                                                                                                                                         Shifters with LDO Regulator
Typical Operating Characteristics
(BAT = +14V, SD = VBAT, RWET = 61kΩ, RHYST = 90kΩ, CTDEB = 4700pF, CTD = 4700pF, TA = +25°C, unless otherwise noted.)
                                                                                                                                                                                                                   WETTING CURRENT PULSE (NORMAL MODE,
                                      WETTING CURRENT vs. VBAT                                                                    WETTING CURRENT vs. RWET                                                              WTOFF = 0, WEN = WEND = 1)
                        30                                                                                          50
                                                                          MAX13037/8toc01                                                                                  MAX13037/8toc02                                                                            MAX13037/8toc03
                                                                                                                    40
                        20                                                                                                                                                                             VIN_
                                                                                                                    30                                                                              10V/div
                                                                                                                                        GND-CONNECTED SWITCH
 WETTING CURRENT (mA)                                                                        WETTING CURRENT (mA)
                                                                                                                    20
                        10                   GND-CONNECTED SWITCH
                                                                                                                    10
                         0                                                                                           0                                                                                       INT
                                                                                                                                                                                                           2V/div
                                                                                                                    -10
                        -10                  BAT-CONNECTED SWITCH
                                                                                                                    -20
                                                                                                                                          BAT-CONNECTED SWITCH
                                                                                                                    -30                                                                             IIN_
                        -20
                                                                                                                                                                                                20mA/div
                                                                                                                    -40
                        -30                                                                                         -50
                              6         10        14         18     22   26                                               30       80      130     180       230   280   330                                                                 20ms/div
                                                    VBAT (V)                                                                                     RWET (kΩ)
                                   BAT CURRENT vs. TEMPERATURE                                                                  BAT CURRENT vs. TEMPERATURE                                                                 BAT CURRENT vs. TEMPERATURE
                                          (NORMAL MODE)                                                                                (NORMAL MODE)                                                                              (SCANNING MODE)
                        110                                                                                          8                                                                                            45
                                                                          MAX13037/8toc04                                                                                  MAX13037/8toc05                                                                            MAX13037/8toc06
                                                                                                                               SD = LOW                                                                                    LDO = ON
                        100
                                                                                                                     7
                        90              ADJUSTABLE HYSTERESIS ON                                                                                                                                                                      SCANNING PERIOD = 2ms
                                                                                                                                                                                                                  40
                        80                                                                                           6
                        70                                                                                           5
                                                                                                                                                                                                                  35
 IBAT (μA)                                                                                   IBAT (μA)
                                                                                                                                                                                                      IBAT (μA)
                        60
                                                                                                                     4
                        50              ADJUSTABLE HYSTERESIS OFF
                                                                                                                                                                                                                  30                  SCANNING PERIOD = 64ms
                        40                                                                                           3
                        30                                                                                           2
                        20                                                                                                                                                                                        25
                                                                                                                     1
                        10
                         0                                                                                           0                                                                                            20
                              -40 -25 -10 5 20 35 50 65 80 95 110 125                                                     -40 -25 -10 5      20 35 50 65 80 95 110 125                                                 -40 -25 -10 5 20 35 50 65 80 95 110 125
                                               TEMPERATURE (°C)                                                                            TEMPERATURE (°C)                                                                             TEMPERATURE (°C)
                                   TYPICAL IN0 DRIVING                                                                         TYPICAL IN0 DRIVING
                          (NORMAL MODE, WTOFF = WEN = WEND = 0)                                                       (NORMAL MODE, WTOFF = WEN = WEND = 0)                                                                       HYSTERESIS vs. RHYST
                                                                                                                                                                                                                  8
                                                                           MAX13037/8toc07                                                                                   MAX13037/8 toc08                                                                           MAX13037/8toc09
                                  f = 5kHz                                                                                     f = 100Hz                                                                                   ADJUSTABLE HYSTERESIS ON
                                                                                                                               ADJUSTABLE HYSTERESIS OFF                                                          7
                                                                                                             VIN0
                                                                                                           5V/div                                                                                                 6
                     VIN0
                                                                                                                                                                                                HYSTERESIS (V)
                   5V/div                                                                                                                                                                                         5
                                                                                                                                                                                                                  4
                                                                                                                                                                                                                  3
                                                                                                            VDO0
                    VDO0                                                                                                                                                                                          2
                                                                                                           2V/div
                   2V/div
                                                                                                                                                                                                                  1
                                                                                                                                                                                                                  0
                                                       40μs/div                                                                                   2ms/div                                                              0        200        400     600        800   1000
                                                                                                                                                                                                                                            RHYST (kΩ)
www.maximintegrated.com                                                                                                                                                                                                                          Maxim Integrated | 7


MAX13037/MAX13038                                                                                                                                                                                                               Contact Monitor and Level
                                                                                                                                                                                                                               Shifters with LDO Regulator
Typical Operating Characteristics (continued)
(BAT = +14V, SD = VBAT, RWET = 61kΩ, RHYST = 90kΩ, CTDEB = 4700pF, CTD = 4700pF, TA = +25°C, unless otherwise noted.)
                                                                                                                                                                                                                                                                                     INPUT WAVEFORM IN SCAN MODE
                            SWITCHING THRESHOLD vs. TEMPERATURE                                                                                      SWITCHING THRESHOLD vs. VBAT                                                                                                (SCAN MODE, WTOFF = WEN = 0, WEND = 1)
                           10                                                                                                              20
                                                                                               MAX13037/8toc10                                                                                                                       MAX13037/8toc11                                                                                              MAX13037/8toc12
                                  ADJUSTABLE HYSTERESIS OFF                                                                                         ADJUSTABLE HYSTERESIS OFF                                                                                                            SCANNING PERIOD = 2ms
                                                                                                                                                                                                                                                                                         INPUT SWITCH OPEN
                           9
 SWITCHING THRESHOLD (V)                                                                                         SWITCHING THRESHOLD (V)
                                                                                                                                           15
                                                                                                                                                                                                                                                                            VIN_
                                                                                                                                                                                                                                                                          5V/div
                           8                                                                                                                             VIN_ RISING
                                              VIN_ RISING                                                                                  10
                           7
                                             VIN_ FALLING
                                                                                                                                            5
                           6                                                                                                                                                                      VIN_ FALLING
                           5                                                                                                                0
                                -40 -25 -10 5 20 35 50 65 80 95 110 125                                                                         6        10                     14                             18        22         26                                                                                    400μs/div
                                            TEMPERATURE (°C)                                                                                                                     VBAT (V)
                                  DEBOUNCE TIME vs. TEMPERATURE                                                                                     DEBOUNCE TIME vs. BAT VOLTAGE                                                                                                             DEBOUNCE TIME vs. CTDEB
                           60                                                                                                              51                                                                                                                                  120
                                                                                               MAX13037/8toc13                                                                                                                       MAX13037/8toc14                                                                                              MAX13037/8toc15
                           58
                                                                                                                                                                                                                                                                               100
                           56
                                                                                                                                           50
 DEBOUNCE TIME (ms)                                                                                              DEBOUNCE TIME (ms)                                                                                                                       DEBOUNCE TIME (ms)
                           54
                                                                                                                                                                                                                                                                               80
                           52
                           50                                                                                                              49                                                                                                                                  60
                           48
                                                                                                                                                                                                                                                                               40
                           46
                                                                                                                                           48
                           44                                                                                                                                                                                                                                                  20
                           42
                           40                                                                                                              47                                                                                                                                   0
                                -40 -25 -10 5 20 35 50 65 80 95 110 125                                                                         6        10                     14                             18        22         26                                               0       2000                       4000     6000   8000   10,000
                                            TEMPERATURE (°C)                                                                                                                     VBAT (V)                                                                                                                                CTDEB (pF)
                                                                                 VLO OUTPUT VOLTAGE vs. TEMPERATURE                                                                                                 VLO OUTPUT VOLTAGE vs. LOAD CURRENT
                                                                           5.5                                                                                                                                5.5
                                                                                                                                                              MAX13037/8toc16                                                                                                                         MAX13037/8toc17
                                                                                                                                                                                                              5.0
                                                                           5.0
                                                  VLO OUTPUT VOLTAGE (V)                                                                                                             VLO OUTPUT VOLTAGE (V)
                                                                                                                                                                                                              4.5                                 MAX13037
                                                                           4.5                                                                                                                                4.0
                                                                                                                                                                                                              3.5
                                                                           4.0
                                                                                                                                                                                                              3.0
                                                                           3.5                                                                                                                                                                         MAX13038
                                                                                                                                                                                                              2.5
                                                                           3.0                                                                                                                                2.0
                                                                                 -40 -25 -10 5 20 35 50 65 80 95 110 125                                                                                            0         50                         100                         150            200
                                                                                             TEMPERATURE (°C)                                                                                                                      LOAD CURRENT (mA)
www.maximintegrated.com                                                                                                                                                                                                                                                                                                        Maxim Integrated | 8


MAX13037/MAX13038                                                                                                        Contact Monitor and Level
                                                                                                                        Shifters with LDO Regulator
Typical Operating Characteristics (continued)
(BAT = +14V, SD = VBAT, RWET = 61kΩ, RHYST = 90kΩ, CTDEB = 4700pF, CTD = 4700pF, TA = +25°C, unless otherwise noted.)
                                                                                      WATCHDOG INTERRUPT AND RESET                                                  WATCHDOG INTERRUPT AND RESET
             VLO TRANSIENT LOAD REGULATION                                               PERIOD vs. TEMPERATURE                                                            PERIOD vs. CTD
                                                                              100                                                                         150
                                              MAX13037/8toc18                                                             MAX13037/8toc19                 125                                          MAX13037/8toc20
                                                                              90
      ILO
 50mA/div                                                                                                                                                 100
                                                                PERIOD (ms)                                                                 PERIOD (ms)
                                                                              80
                                                                                                                                                          75
      VLO                                                                     70
-COUPLED)                                                                                                                                                 50
  50mV/div
                                                                              60
                                                                                                                                                          25
                                                                              50                                                                           0
                         1ms/div                                                    -40 -25 -10 5 20 35 50 65 80 95 110 125                                     0      2000   4000    6000   8000   10,000
                                                                                                TEMPERATURE (°C)                                                                CTD (pF)
Pin Description
       PIN           NAME                                                                                          FUNCTION
    1, 15, 31         GND          Ground
                                   Switch Input Channel 0. Connect IN0 to a switch connected to GND. IN0 can be programmed as a
         2             IN0
                                   direct input with a level-shifted output on DO0 (see the Mechanical Switch Inputs (IN0–IN7) section).
                                   Switch Input Channel 1. Connect IN1 to a switch connected to GND. IN1 can be programmed as a
         3             IN1
                                   direct input with a level-shifted output on DO1 (see the Mechanical Switch Inputs (IN0–IN7) section).
         4             IN2         Switch Input Channel 2. Connect IN2 to a switch connected to GND.
         5             IN3         Switch Input Channel 3. Connect IN3 to a switch connected to GND.
         6             IN4         Switch Input Channel 4. Connect IN4 to a switch connected to GND or BAT.
         7             IN5         Switch Input Channel 5. Connect IN5 to a switch connected to GND or BAT.
         8             IN6         Switch Input Channel 6. Connect IN6 to a switch connected to GND or BAT.
         9             IN7         Switch Input Channel 7. Connect IN7 to a switch connected to GND or BAT.
   10, 11, 34         N.C.         No Connection. Not internally connected.
                                   Hysteresis Input. Connect HYST to GND with a 0Ω to 900kΩ resistor to set the input voltage
        12            HYST
                                   hysteresis on IN0–IN7.
                                   Wetting Current Input. Connect a 30kΩ to 330kΩ resistor from WET to GND to set the wetting current
        13            WET
                                   on IN0–IN7.
                                   Switch Debounce Time Input. Connect a 500pF to 10nF capacitor from TDEB to GND to set the
        14            TDEB
                                   switch debounce time.
                                   Overtemperature Warning Output. OT is an open-drain output that asserts low when the thermal
        16             OT
                                   warning threshold is exceeded.
                                   Interrupt Output. INT is an open-drain output that asserts low when one or more of the IN0–IN7 inputs
        17             INT
                                   change state and are enabled for interrupts or when the watchdog times out.
                                   Reset and Watchdog Timeout Input. Connect TD to GND with a 500pF to 10nF capacitor to set the
        18             TD
                                   timeout period for the reset and watchdog.
www.maximintegrated.com                                                                                                                                                              Maxim Integrated | 9


MAX13037/MAX13038                                                                    Contact Monitor and Level
                                                                                  Shifters with LDO Regulator
Pin Description (continued)
     PIN            NAME                                                  FUNCTION
                          Shutdown Input. Drive SD low to place the MAX13037/MAX13038 into shutdown mode and disable
     19               SD
                          the linear regulator. Drive SD high for normal operation. SD is compatible with voltages up to VBAT.
                          Linear Regulator Enable Input (Active Low). Connect REGON to INT to enable a wake-up when a
     20            REGON  switch status change is detected. Drive REGON using an open-drain logic output to control the
                          regulator directly. REGON is internally pulled up to an internal bias voltage of approximately +4.8V.
                          Linear Regulator Disable Input (Active Low). REGOFF is used in conjunction with REGON when the
     21           REGOFF
                          internal regulator is enabled by an interrupt (see the Low-Dropout Linear Regulator (VLO) section).
                          SPI Chip-Select Input. Drive CS low to enable the clocking of data into and out of the
     22               CS
                          MAX13037/MAX13038. SPI data is latched into the MAX13037/MAX13038 on the rising edge of CS.
                          SPI Serial-Data Output. SPI data is output on SDO on the rising edges of CLK while CS is held low.
     23              SDO
                          SDO is three-state when CS is high.
                          SPI Serial-Data Input. SPI data is latched into the internal shift register on the falling edges of CLK
     24              SDI
                          while CS is held low. SDI has an internal 100kΩ pulldown resistor.
     25              CLK  SPI Serial-Clock Input
                          Reset Output. RST is an open-drain output that asserts low when VLO is below the threshold
     26              RST
                          determined by the THRESH input. RST also asserts low when the watchdog times out.
     27              DO1  Data Output Channel 1. DO1 is the level-shifted output of IN1 when WEND = 0.
     28              DO0  Data Output Channel 0. DO0 is the level-shifted output of IN0 when WEND = 0.
                          Reset Threshold Level Input. Connect THRESH to a resistor divider between VLO and GND to set the
     29           THRESH
                          reset reference level.
     30              WDI  Watchdog Timer Input. The watchdog timer is reset at every transition on the WDI input.
                          Battery Reference Input. Switch thresholds are set to 50% of the voltage applied to BATREF. Connect
     32            BATREF
                          BATREF to the system’s battery supply voltage.
                          Linear Regulator Output. VLO is the output of an internal linear regulator and is the reference voltage
     33              VLO  for all digital I/O. Bypass VLO with a 2.2µF or greater ceramic capacitor. Alternatively, a 10µF
                          electrolytic capacitor can be used in parallel with a 0.1µF ceramic capacitor.
                          Battery Supply Input. Connect BAT to a positive +6V to +26V battery supply voltage. Bypass BAT to
   35, 36            BAT  ground with a 0.1µF ceramic capacitor and a 10µF electrolytic capacitor placed as close as possible
                          to BAT.
     —                EP  Exposed Paddle. Connect EP to GND.
www.maximintegrated.com                                                                                             Maxim Integrated | 10


 MAX13037/MAX13038                                                              Contact Monitor and Level
                                                                            Shifters with LDO Regulator
Functional Diagram
                                    SD                 BAT
                                                              LINEAR
                                                                                                   VLO
                                  MAX13037                  REGULATOR
                                  MAX13038                                                         WDI
                                                                                      RESET +
                                                                                    WATCHDOG       THRESH
              REGON                                                                                TD
                           WAKE-UP
             REGOFF         LOGIC
                                                                                                   DO0
             BATREF                                                                                DO1
                                                                                      DIGITAL
                                                                                    INTERFACE
                                                                                                   CS
                 IN0
                                                                            SPI                    CLK
                 IN1                                                    INTERFACE                  SDI
                 IN2
                           WETTING              LEVEL                                              SDO
                 IN3       CURRENT          TRANSLATORS        SHIFT
                 IN4       CONTROL                           REGISTER
                 IN5                                                                               INT
                                                                        INTERRUPT
                 IN6                                                      LOGIC                    RST
                 IN7                                                                               OT
                             WET           HYST       TDEB           GND
                                                           The MAX13037/MAX13038 provide an internal low
Detailed Description                                       dropout (LDO) linear regulator capable of supplying up
The MAX13037/MAX13038 contact monitor and level            to 150mA. The LDO can be enabled or disabled
shifters monitor and debounce eight remote mechani-        through two digital control inputs: REGON and REGOFF.
cal switches and assert an interrupt (INT) if a switch     A watchdog timer and power-on reset circuitry is provid-
changes state. Any of the switch inputs can be prohibit-   ed on the MAX13037/MAX13038 to supervise external
ed from asserting an interrupt. The switch threshold lev-  microcontrollers (µC).
els are set to 50% of the voltage applied to BATREF
                                                           The MAX13037/MAX13038 feature three modes of
and all switch inputs feature a common adjustable hys-
                                                           operation: normal mode, scanning mode, and shut-
teresis, debounce time, and wetting current. Two
                                                           down mode. In normal mode, the part is fully functional
switch inputs (IN0, IN1) are programmable to have
                                                           and internal sensing resistors are connected to all
direct outputs (DO0, DO1), useable for PWM or other
                                                           switch inputs. In scanning mode, the sensing resistors
timing-based signals.
                                                           are connected for a finite duration to reduce power
The MAX13037/MAX13038 feature an SPI interface to          consumption. In shutdown mode, all switch inputs are
monitor individual switch inputs and to configure inter-   high impedance and the internal LDO is switched off to
rupt masking, hysteresis, and wetting current              further reduce power consumption.
enable/disable, switch configuration (battery-
connected or ground-connected), and scanning period.
 www.maximintegrated.com                                                                          Maxim Integrated | 11


 MAX13037/MAX13038                                                                       Contact Monitor and Level
                                                                                        Shifters with LDO Regulator
BAT                                                                      Linear Regulator Wake-Up
BAT is the main power-supply input. Bypass BAT to                        Regulator wake-up can be controlled with the INT out-
ground with a 0.1µF ceramic capacitor placed as close                    put by connecting it to REGON. REGON is a TTL input
as possible to BAT. In addition, bypass BAT with a                       with an internal pullup to a low-voltage internal refer-
10µF or greater capacitor. BAT can withstand DC volt-                    ence of +4.8V (typ). With this control scheme, any
ages up to +42V.                                                         change of the input switches (enabled for interrupt gen-
                                                                         eration) causes the regulator to turn on, thus providing
Low-Dropout Linear Regulator (VLO)                                       power to any external circuitry connected to VLO. If an
The MAX13037/MAX13038 contain an internal LDO lin-                       external microcontroller is supplied from V LO , the
ear regulator supplied by the BAT input. The LDO out-                    microcontroller can keep the LDO on by forcing
put voltage is present on V LO and is capable of                         REGOFF high. Reading from the MAX13037/MAX13038
supplying up to 150mA of current. The MAX13037 out-                      over the SPI interface causes the INT output to go into
put voltage is set to +5V and the MAX13038 output                        high-impedance so that both INT and REGON are
voltage is set to +3.3V.                                                 pulled high. After this phase, the microcontroller can
The LDO regulator is controlled through the REGON                        turn off the regulator again by driving REGOFF low.
and REGOFF inputs as shown in Figure 4. REGON is                         Note that it is also possible to tie multiple open-drain
an input able to withstand voltages up to VBAT. The                      active-low outputs in an ORing configuration, allowing
LDO startup time is 1ms (typ).                                           the wakeup of the regulator from other devices.
There are two options for controlling the linear regulator:              If the INT output is not used to control the regulator,
  • Wake-Up on Interrupt: In this case, REGON is con-                    connect the REGOFF input to ground and use REGON
     nected to INT and when the MAX13037/MAX13038                        to enable or disable the regulator as shown in Figure 4.
     generate an interrupt, the linear regulator is turned
     on, thus providing power to the local µCs. The µC                   Watchdog Timer (WDI)
     pulls REGOFF high to keep the regulator on before                   The MAX13037/MAX13038 feature a watchdog timer
     making an SPI read (which causes INT and REGON                      that is reset on every transition on the WDI input. If
     to go high). The linear regulator can then be turned                there is no transition on WDI before the first timeout
     off by pulling REGOFF low.                                          period (tWD1) the INT output asserts low. If there is still
                                                                         no transition on WDI after the second timeout period
  • Direct Control: In this case, the regulator is                       (tWD2), the RST output is pulsed low for tRST and the
     enabled/disabled by some other signal in the sys-                   INT output deasserts (see Figure 3). The watchdog
     tem which must be connected to REGON. If                            timeout period can be adjusted by changing the
     REGOFF is not used, it must be connected to GND                     capacitor value on the TD input.
     to allow the turnoff of the LDO.
                                                                                          tRST (ms) = 2 x CTD (nF)
                                                                                            tWD1 = 4 x tRST (ms)
                                   REGOFF = 1
                  LDO ON                              LDO ON                                tWD2 = 8 x tRST (ms)
                 REGON = 0                           REGON = 0           Note that WDI can be tied to the CS input to allow a
                REGOFF = 0                          REGOFF = 1
                                   REGOFF = 0                            watchdog reset for every read/write operation over the
                                                                         SPI interface. To avoid any corruption of the internal
                                                                         command register, it is necessary to transmit the full pro-
       REGON = 1           REGON = 0       REGON = 0           REGON = 1 gramming word (16 bits) for every CS negative pulse.
                                                                         Reset Output (R S T)
                                                                         The RST output asserts low when a watchdog timeout
                  LDO OFF                             LDO ON
                                                                         occurs or when the LDO output voltage drops below a
                 REGON = 1                           REGON = 1
                                   REGOFF = 0                            certain threshold. The threshold voltage is set by con-
                REGOFF = 0                          REGOFF = 1
                                                                         necting an external voltage divider on the THRESH
                                                                         input between VLO and GND. The voltage on THRESH
                                                                         is compared with an internal reference voltage of
        REGOFF = 1 IS NOT ALLOWED                                        +1.24V and if it is lower, the RST output asserts low
          BECAUSE VLO IS ABSENT.                                         for tRST and remains low if VLO does not rise above
                                                                         the threshold.
Figure 4. Linear Regulator State Diagram
 www.maximintegrated.com                                                                                          Maxim Integrated | 12


 MAX13037/MAX13038                                                              Contact Monitor and Level
                                                                             Shifters with LDO Regulator
Mechanical Switch Inputs (IN0–IN7)                            Switch Threshold Levels and
IN0–IN7 are the inputs for remote mechanical switches.        Hysteresis (BATREF, HYST)
The status of each switch input is indicated by the SW0       Input thresholds for the remote switches are 50% of the
through SW7 bits in the status register, and each switch      voltage applied to BATREF. The BATREF input is typical-
input can be programmed to not assert an interrupt            ly connected to the battery voltage before the reverse-
(INT) by writing to the P0–P7 bits in the command reg-        battery protection diode. The MAX13037/MAX13038
ister. All switch inputs are configured to assert an inter-   feature adjustable hysteresis on the switch inputs by
rupt upon power-up.                                           connecting an external 0 to 900kΩ resistor from HYST to
The first four inputs (IN0–IN3) are intended for ground-      ground (normal mode only). Short HYST to ground to
connected switches. The remaining four inputs (IN4–IN7)       obtain the maximum hysteresis of (0.5 x VBATREF). The
can be programmed in sets of two for either ground-con-       approximate formula for hysteresis is given below:
nected or battery-connected switches by writing to the
                                                                             ⎡                  43          ⎤
M0 and M1 bits (see Table 5). The default state after              VHYST = ⎢0.166 +                         ⎥ (VBATREF )
power-up is IN2–IN7 configured for ground-connected                          ⎢⎣        (123 + (RHYST(kΩ) ) ⎥⎦
switches, and IN0/IN1 configured for direct inputs.
All switch inputs have internal 16kΩ sense resistors to       To reduce power consumption, the adjustable hystere-
detect switch transitions. Inputs configured for ground-      sis can be disabled by setting [SC2:SC1:SC0 = 1:1:0]
connected switches are pulled up to BAT and inputs con-       in the command register. When the adjustable hystere-
figured for battery-connected switches are pulled down to     sis is disabled, the hysteresis is set to 0.166 x VBATREF.
GND. Figure 5 shows the switch input structure for IN0        Switch Debounce and Deglitch
and IN1. IN0 and IN1 can be programmed as direct              The switch inputs IN0–IN7 share a common program-
inputs with level-shifted outputs (DO0 and DO1) by clear-     mable debounce timer to increase the noise immunity
ing the WEND bit in the command register (normal mode         of the system in normal and scan mode. The switch
only). When programmed as direct inputs, IN0 and IN1          debounce time is set by connecting a capacitor
can be used for PWM or other signaling. Clearing the          between the t DEB input and ground. The minimum
WEND bit disables the sense resistors and wetting cur-        value of this capacitor is 500pF and the maximum value
rents on IN0 and IN1. When programmed as direct inputs,       is 10nF, corresponding to a debounce time of 5ms to
the status of IN0 and IN1 is not reflected in the status reg- 100ms respectively. To calculate other debounce times
ister, and interrupts are not allowed on these inputs.        the following formula should be used:
                                                                                  C(nF) = tDEB(ms) / 10
                                                              All switch input glitches of less than 20µs in duration are
                                  VBAT        MAX13037        automatically rejected by the MAX13037/MAX13038.
                                              MAX13038
                                                              Debounce in Normal Mode
                                                              When a change of state occurs at the switch input the
                                                              debounce timer starts. If the new state is stable for at least
                                                      CONTROL
                                                       LOGIC
                                                              tDEB, the status register is updated and an interrupt is
                                                              generated (if enabled). If the input returns to its previous
                        WETTING*
                        CURRENT
                                                              state before the debounce time has elapsed, an interrupt
                                                              is not generated and the status register is not updated.
                                           16kΩ*
                                                              Debounce in Scan Mode
                                                              A change of state at the switch input causes the device to
                                                              automatically enter normal mode and the debounce timing
        IN0, IN1
                                                              to start. The device remains in normal mode as long as the
                                                              input state differs from the previous state. As soon as the
                                                              debounce time ends, the status register is updated, an
        NOTES:                                                interrupt is generated, and the device re-enters scan mode.
        *WETTING CURRENT AND PULLUP/DOWN RESISTORS ARE
        CONTROLLED BY THE WEN AND WEND BITS IN THE COMMAND    If the input returns to its previous state before the end
        REGISTER (SEE TABLE 4).                               of the debounce time, the device re-enters scan mode,
                                                              an interrupt is not generated, and the status register is
Figure 5. Input Structure of IN0 and IN1                      not updated.
 www.maximintegrated.com                                                                                Maxim Integrated | 13


 MAX13037/MAX13038                                                         Contact Monitor and Level
                                                                          Shifters with LDO Regulator
Wetting Current (WET)                                     asserts when the first watchdog timeout period elapses
The MAX13037/MAX13038 feature adjustable wetting          (tWD1). A pullup resistor to VLO is needed on INT. INT is
current to any closed switch to clean switch contacts     cleared when CS is driven low for a read/write operation.
that are exposed to adverse conditions. The wetting       The INT output still asserts when VLO is disabled pro-
current is set by connecting a 30kΩ to 330kΩ resistor     vided that it is pulled up to a different supply voltage.
from WET to ground. A 30kΩ resistor corresponds to a
wetting current of 40mA (typ) and a 330kΩ resistor cor-   Thermal Protection (O T)
responds to a 4mA (typ) wetting current. See the          The MAX13037/MAX13038 feature a two-level thermal
Typical Operating Characteristics section for the rela-   protection strategy that prevents the device from being
tionship between the wetting current and RWET.            damaged by overheating. At the initial warning temper-
                                                          ature of +135°C (typ), only wetting currents are dis-
The WEN and WEND bits in the command register             abled. The MAX13037/MAX13038 return to normal
enable and disable the wetting currents and the           operation after the internal temperature decreases
WTOFF bit allows the wetting current to be activated for  below +120°C (typ). This protection feature is disabled
a duration of 20ms (typ) (see the Command Register        when WEN = 0 or when all inputs are open. At the sec-
section). Disabling wetting currents, or limiting the     ond thermal warning temperature of +170°C (typ), the
active wetting current time reduces power consump-        LDO is shut down. Because a µC is often supplied by
tion. The default state upon power-up is all wetting cur- the LDO, an overheating event caused by excessive
rents disabled.                                           power dissipation related to I/O wetting currents is nor-
Wetting current is activated on closed switches just      mally resolved without affecting the µC status.
after the debounce time. The wetting current pulse        An open-drain, active-low output (OT) asserts low when
starts after the debounce time. A wetting current pulse   the internal temperature of the device rises above the
is provided to all closed switches when a valid input     thermal warning threshold. OT is immediately cleared
change is detected. Wetting current rise and fall times   when the CS input is driven low for read/write opera-
are controlled to enhance EMC performance. There is       tions, regardless of whether the temperature is above
one wetting current timer for all switch inputs.          the threshold, or not. The overtemperature status of the
Therefore, it is possible to observe wetting pulses       MAX13037/MAX13038 can also be monitored by read-
longer than expected whenever two switches turn on in     ing the OT bit in the status register. The OT bit is set
sequence and are spaced out less than tWET. In scan       when the internal temperature rises above the tempera-
mode, the wetting current is enabled during the polling   ture threshold, and it is cleared when the temperature
pulse only.                                               falls below the temperature hysteresis level. This allows
When using wetting currents, special care must be         a µC to monitor the overtemperature status, even if the
taken to avoid exceeding the maximum power dissipa-       OT output has been cleared. See Figure 6 for an exam-
tion of the MAX13037/MAX13038 (see the Applications       ple timing diagram of the overtemperature alerts.
Information section).                                     If desired, the OT and INT outputs can be connected
Switch Outputs (DO0, DO1)                                 to the same µC GPIO in a wired-OR configuration to
DO0 and DO1 are direct level-shifted outputs of the       save a µC pin. The OT output still asserts when VL is
switch inputs IN0 and IN1 when the WEND bit of the        absent provided that it is pulled up to a different sup-
command register is cleared and when operating in         ply voltage.
normal mode. When configured as direct inputs, the
wetting currents and sensing resistors are disabled on
IN0 and IN1. DO0 and DO1 are three-stated when the
WEND bit is set or when operating in scan mode.              TEMPERATURE
When programmed as direct inputs, the status of IN0
and IN1 are not reflected in the status register and                  OT
interrupts are not allowed on these inputs.
Interrupt Output (I N T)                                              CS
INT is an active-low, open-drain output that asserts
when any of the switch inputs change state, as long as             OT BIT
the particular input is enabled for interrupts (set by
clearing P7–P0 in the command register). INT also
                                                          Figure 6. Example Timing Diagram of the Overtemperature Alerts
 www.maximintegrated.com                                                                             Maxim Integrated | 14


 MAX13037/MAX13038                                                                                       Contact Monitor and Level
                                                                                                      Shifters with LDO Regulator
                   STATUS REGISTER                                                                                               SHIFT REGISTER IS
                     IS COPIED TO                                                                                              COPIED TO COMMAND
                    SHIFT REGISTER                                                                                                   REGISTER
            CS
           CLK                  15    14    13     12     11    10    9     8    7      6       5    4     3      2     1    0
           SDI               WTOFF SC2     SC1    SC0    WEN WEND    M1    M0   P7     P6      P5   P4    P3     P2    P1   P0
          SDO                    SW7   SW6   SW5    SW4    SW3   SW2  SW1   SW0    OT     *       *    *     *      *     *    *
                * = UNUSED.
 Figure 7. SPI Read/Write Example
Serial Peripheral Interface                                                         Status Register
(C S, SD0, SDI, CLK)                                                                The status register contains the status of the switches
The MAX13037/MAX13038 operate as a Serial Peripheral                                connected to IN7 through IN0 and it also contains an
Interface (SPI) slave devices. An SPI master accesses                               overtemperature warning bit (see Table 1). The status
the MAX13037/MAX13038 by reading from a status reg-                                 register is accessed through an SPI-compatible master.
ister and writing to a command register. Both registers                             Notes:
are 16 bits long and are accessed most significant bit
                                                                                    Bits 15–8: Switch 7 Through 0 Status (SW7–SW0)
(MSB) first.
                                                                                    SW7 through SW0 reflect the status of the switches
On the falling edge of CS, the status register is immedi-
                                                                                    connected to inputs IN7 through IN0, respectively.
ately loaded to an internal shift register and the con-
                                                                                    Open switches are returned as a [0] and closed switch-
tents are transferred out of the SDO output on the rising
                                                                                    es are returned as a [1].
edge of CLK. Serial data on the SDI input is latched
into the shift register on the falling edge of CLK. On the                          Bit 7: Overtemperature Warning (OT)
rising edge of CS, the contents of the shift register are                           The OT bit returns a [1] when the internal temperature of
copied to the command register (see Figure 7). The                                  the MAX13037/MAX13038 is above the temperature
status and command registers are 16 bits wide, so it is                             warning threshold of +135°C (typ). The OT bit returns a
essential to clock a total of 16 bits while CS is low for                           [0] when the MAX13037/MAX13038 is either below the
the input and output data to be valid. When CS is high,                             temperature threshold, or it has fallen below the tempera-
the SDO output is high-impedance and any transitions                                ture hysteresis level following an overtemperature event.
on CLK and SDI are ignored. The INT and OT flags are
                                                                                    Bits 6–0: Unused
cleared on the CS falling edge. Input status changes
occurring during the CS reading/writing operation are                               Bits 6 through 0 are unused and should be ignored.
allowed. If a switch status changes when CS is low, the
interrupt is asserted as usual. This allows the part to be
                                                                                    Command Register
                                                                                    The command register is used to configure the
used even if VLO is disabled provided that the INT out-
                                                                                    MAX13037/MAX13038 for various modes of operation
put is pulled up to another supply voltage.
                                                                                    and is accessed by an SPI-compatible master (see
                                                                                    Table 2). The power-on reset (POR) value of the com-
                                                                                    mand register is 0x00.
Table 1. Status Register
    BIT        15         14        13       12        11       10      9       8          7        6        5        4       3          2         1     0
  NAME       SW7         SW6       SW5     SW4        SW3      SW2     SW1     SW0        OT        —        —        —      —           —         —     —
Table 2. Command Register
    BIT          15         14        13       12       11        10      9        8         7       6         5       4        3         2         1     0
   NAME      WTOFF         SC2       SC1     SC0       WEN     WEND       M1     M0         P7      P6       P5       P4       P3        P2        P1    P0
    POR           0          0        0        0        0          0      0        0         0       0         0       0        0         0         0     0
 www.maximintegrated.com                                                                                                                 Maxim Integrated | 15


 MAX13037/MAX13038                                                                      Contact Monitor and Level
                                                                                      Shifters with LDO Regulator
Notes:                                                              period ([SC2:SC1:SC0] = [1:1:1] or [1:1:0]), the switch
Bit 15: Wetting Current Mode (WTOFF)                                inputs are constantly being monitored and the sense
                                                                    resistors are always connected. The state [SC2:SC1:SC0]
Set the WTOFF bit to configure the wetting currents as              = [1:1:0] also disables adjustable hysteresis (normally set
continuous on closed switches. Clear the WTOFF bit to               by RHYST) and fixes hysteresis at 0.166 x VBATREF. When
configure the wetting current as a pulse where the wet-             adjustable hysteresis is not needed, it is recommended to
ting current is turned on for a set duration of 20ms after          disable this feature to reduce power consumption.
a switch closes (and the debounce is timed out). After
20ms elapses, the wetting current is turned off. Either             Bit 11: Global Wetting Current Enable (WEN)
wetting current mode is only applicable to switches that            The WEN bit is a global enable for the wetting currents
have wetting currents enabled (see WEN and WEND                     on all the channels. Set the WEN bit to enable wetting
bits). In scan mode, the wetting currents are on for the            currents on all channels and clear the WEN bit to dis-
polling time of 250µs (typ) and are pulsed at the pro-              able wetting currents. Even with wetting currents glob-
grammed scanning period. When WTOFF is set, the                     ally enabled, the wetting currents and sense resistors
wetting current continuously pulses at the programmed               on IN0 and IN1 can still be turned off with the WEND bit
scanning period. When WTOFF is cleared, the wetting                 (see Table 4).
current pulses at the programmed scanning period, but               Bit 10: IN0 and IN1 Wetting Current Enable (WEND)
turns off after 20ms elapses.
                                                                    The WEND bit is used to turn on wetting currents and
Bits 14, 13, 12: Scanning Period (SC2, SC1, SC0)                    sense resistors on inputs IN0 and IN1. Set the WEND
The SC2, SC1, and SC0 bits are used to program the                  bit to enable wetting currents on IN0 and IN1 and clear
scanning period as depicted in Table 3. Switch inputs               the WEND bit to turn off the wetting current and sense
are simultaneously polled for a finite duration of 250µs            resistors on IN0 and IN1. When the wetting currents
(typ), and polling occurs at a period selected through              and sense resistors are disabled (WEND = 0), IN0 and
the SC2, SC1, and SC0 inputs. Figure 8 shows a timing               IN1 are configured as direct inputs with level-shifted
diagram of switch scanning and sampling. When the                   outputs on DO0 and D01. DO0 and DO1 can only be
inputs are not being polled, the sense resistors are dis-           used as level-shifted outputs in normal mode and are
connected, reducing the current consumption caused                  three-stated in scan mode (see the Scan Mode sec-
from polling closed switches. For a continuous scanning             tion). Note that both the WEN and WEND bits need to
                                                                    be set for wetting currents to be enabled on IN0 and
Table 3. Programmable Scanning
Period
                                                                                         tSCAN
   SC2         SC1        SC0       SCANNING PERIOD (ms)                                          SWITCHES ARE          SWITCH
                                                                                                  POLLED FOR 250μs     DEBOUNCE
     0           0         0                   64
                                                                      GND-CONNECTED                                     STARTS
     0           0         1                   32                       SWITCH INPUT
     0           1         0                   16                                              tSCAN-P                         tDEB
     0           1         1                    8
                                                                                  INT
     1           0         0                    4
     1           0         1                    2
                                                                                                                SWITCH     STATUS REGISTERS AND
                                      Continuous/adjustable                                                     CLOSES       INT ARE UPDATED
     1           1         0                                                                                                     AFTER tDEB
                                          hysteresis off
     1           1         1               Continuous               Figure 8. Switch Sampling in Scan Mode
Table 4. Truth Table for WEN and WEND
                         WETTING CURRENT          16kΩ SENSE RESISTOR            WETTING CURRENT                 16kΩ SENSE RESISTOR
   WEN        WEND
                              (IN0, IN1)                 (IN0, IN1)                    (IN2–IN7)                        (IN2–IN7)
     0           0               Off                        Off                             Off                             On
     0           1               Off                        On                              Off                             On
     1           0               Off                        Off                             On                              On
     1           1               On                         On                              On                              On
 www.maximintegrated.com                                                                                                Maxim Integrated | 16


MAX13037/MAX13038                                                                Contact Monitor and Level
                                                                               Shifters with LDO Regulator
Table 5. Switch Configuration Controlled by M1 and M0
                            IN7 AND IN6 SWITCH              IN5 AND IN4 SWITCH                      IN3–IN0 SWITCH
    M1         M0
                              CONFIGURATION                   CONFIGURATION                        CONFIGURATION
     0          0                 Ground                            Ground                               Ground
     0          1                 Ground                             Battery                             Ground
     1          0                 Battery                           Ground                               Ground
     1          1                 Battery                            Battery                             Ground
IN1 (see Table 4). The DO0 and DO1 outputs are three-          command register to ([SC2:SC1:SC0] = [1:1:0]). The
stated when WEND = 1. When programmed as direct                hysteresis is set to 0.166 x VBATREF when adjustable
inputs (WEND = 0), any input changes on IN0 and IN1            hysteresis is disabled.
are not reflected by the status register.
                                                               Scan Mode
Bits 9 and 8: Switch Configuration for IN7–IN4 (M1, M0)        In scan mode, each sense resistor is connected for a
The M1 and M0 bits set the switch configuration in             finite duration of 250µs (typ) and is repeated at a period
groups of two for IN7 through IN4 (see Table 5). Set M1        according to the scanning period bits SC2, SC1, and SC0
to configure IN7 and IN6 for battery-connected switches        (see Table 3). All input resistors are connected simultane-
and clear M1 for ground-connected switches. Set M0 to          ously and the inputs are polled at the same time. When all
configure IN5 and IN4 for battery-connected switches           external switches are open and the scanning period is set
and clear M0 for ground-connected switches.                    to 64ms the scanning mode reduces current consump-
Bits 7–0: Interrupt Enable for IN7–IN0 (P7–P0)                 tion to typically 28µA (LDO on) and 17µA (LDO off).
                                                               Wetting currents (if enabled) are applied to closed
The P7 through P0 bits allow independent control of            switches during the polling time of 250µs (typ) and are
whether inputs IN7 through IN0 generate an interrupt           pulsed at the programmed scanning period. When
(INT). Set any bit to disable interrupts on the corre-         WTOFF is set, the wetting current continuously pulses at
sponding input and clear the bit to enable interrupts on       the programmed scanning period. When WTOFF is
the corresponding channel. An interrupt is asserted            cleared, the wetting current pulses at the programmed
when any input configured for interrupts changes state.        scanning period, but turns off after 20ms elapses. Inputs
IN0 and IN1 do not generate an interrupt when confi-           IN0 and IN1 cannot be used as direct inputs (WEND = 0)
gured as direct inputs (WEND = 0).                             in scan mode. When configured as direct inputs in scan
Operating Modes                                                mode, the outputs DO0 and DO1 are high impedance.
The MAX13037/MAX13038 feature three modes of oper-             The quiescent current for a given scan mode can be cal-
ation: normal mode, scan mode, and shutdown mode.              culated by the following formula (LDO off):
Normal mode is entered when the scanning period bits                                         ⎛                   ⎞
                                                                                                         1
in the command register are configured for continuous                        IBAT(μA) = 16 × ⎜1 +                ⎟
scanning ([SC2:SC1:SC0] = [1:1:1] or [1:1:0]). Scan                                          ⎝    t SCAN _ P(ms) ⎠
mode is entered when the scanning period bits are set
for a periodic scanning time as shown in Table 3.              Where V BAT = SD = +14V, I BAT is the BAT current
Shutdown mode is entered by driving the shutdown               expressed in microamps and tSCAN_P is the scanning
input (SD) low. The default mode after power-up is scan        period expressed in milliseconds.
mode (when SD = high) with a scan period of 64ms.
                                                               Shutdown Mode
Normal Mode (Continuous Scanning)                              In shutdown mode, the LDO is disabled, all switch
In normal mode, the input sense resistors are always           inputs are high impedance and the external switches
connected to the switch inputs to detect any input status      are no longer monitored, reducing current consumption
change (except IN0 and IN1 when WEND = [0]). Wetting           on BAT to 2.85µA (typ). The MAX13037/MAX13038
currents are enabled according to the WEN, WEND, and           reset upon entering shutdown mode and the contents
WTOFF bits in the command register. If adjustable hys-         of the command register are lost. Exit shutdown mode
teresis is not required, this feature can be disabled to       by bringing the voltage on SD above +2.4V. The SD
reduce power consumption (see the Typical Operating            input is compatible with voltages up to V BAT . The
Characteristics) by setting the scanning period bits in the    MAX13037/MAX13038 take 200µs (typ) to exit shutdown
 www.maximintegrated.com                                                                                   Maxim Integrated | 17


 MAX13037/MAX13038                                                                 Contact Monitor and Level
                                                                               Shifters with LDO Regulator
at which point the command register is restored to its      ESD Protection
power-up default (0x00) and the MAX13037/                   As with all Maxim devices, ESD-protection structures
MAX13038 enter scan mode. Note that SD is compati-          are incorporated on all pins to protect against electro-
ble with both logic and BAT voltage levels. Having SD       static discharges encountered during handling and
compatible to VBAT allows the MAX13037/MAX13038 to          assembly. The IN7–IN0 inputs have extra protection
retain the settings in the command register as well as      against static electricity. Maxim’s engineers have
input monitoring even when VLO is disabled, provided        developed state-of-the-art structures to protect these
that SD = VBAT.                                             pins against ESD of ±8kV without damage.
Applications Information                                    Human Body Model
                                                            The MAX13037/MAX13038 IN7–IN0 pins are charac-
Considerations for Reverse-Battery                          terized for ±8kV ESD protection using the Human
Tolerance                                                   Body Model. Figure 7a shows the Human Body Model,
The BATREF and IN0–IN7 inputs can withstand voltages        and Figure 7b shows the current waveform it gener-
down to -45V without damage so that reverse battery is      ates when discharged into a low impedance. This
not an issue. The BAT input should be protected with a      model consists of a 100pF capacitor charged to the
reverse-battery diode as shown in the Typical Application   ESD voltage of interest, which is then discharged into
Circuit. The shutdown (SD) and REGON inputs can be          the device through a 1.5kΩ resistor.
controlled from a battery-level source, but should be pro-
tected against reverse battery in the application.
                                                                                    RC 1MΩ    RD 1500Ω
Power Dissipation
Wetting currents and the LDO output current can result in                   CHARGE-CURRENT-    DISCHARGE
                                                                              LIMIT RESISTOR   RESISTANCE
overheating the MAX13037/MAX13038. At the early ther-
mal warning threshold of +135°C (typ), wetting currents            HIGH-                                                   DEVICE
are disabled. This allows the LDO output to remain                VOLTAGE                 Cs STORAGE                       UNDER
                                                                    DC                 100pF CAPACITOR                      TEST
enabled if overheating is caused by the wetting currents.         SOURCE
At temperatures above +170°C, the LDO is also turned
off to avoid damage to the device.
It is important to consider the effects of wetting currents
on the power dissipated by the MAX13037/MAX13038.
For example, assume all inputs are configured for a          Figure 7a. Human Body ESD Test Model
continuous wetting current of 25mA, all external switch-
es have an on-resistance of 1Ω and the battery voltage
is +16V. If all switches are simultaneously closed, the
                                                                        IP 100%                         Ir   PEAK-TO-PEAK RINGING
corresponding power dissipated due to wetting currents                      90%                              (NOT DRAWN TO SCALE)
only is (16V - (25mA x 1Ω)) x 25mA x 8 = 3.12W, which
is higher than the absolute maximum power dissipation             AMPERES
of 2857mW at +70°C.                                                       36.8%
The LDO is a second source of power dissipation. For
                                                                            10%
example, if VLO = +3.3V, ILO = 100mA and VBAT =                                0
+16V, the power dissipated by the LDO is (16V - 3.3V)                            0    tRL
                                                                                               TIME
+ (0.1) = 1.27W. Both the LDO and wetting currents                                                  tDL
should be taken into account for correct use of the                                           CURRENT WAVEFORM
MAX13037/MAX13038.                                           Figure 7b. Human Body Model Current Waveform
 www.maximintegrated.com                                                                                       Maxim Integrated | 18


MAX13037/MAX13038                                                                                         Contact Monitor and Level
                                                                                                         Shifters with LDO Regulator
Pin Configuration
                                                                                        REGOFF   REGON
                          TOP VIEW
                                                 DO1     RST   CLK    SDI   SD0   CS                     SD
                                                 27      26    25     24    23    22    21       20      19
                                     DO0    28                                                                 18   TD
                                                   *EP
                                  THRESH    29                                                                 17   INT
                                     WDI    30                                                                 16   OT
                                     GND    31                                                                 15   GND
                                  BATREF    32                        MAX13037                                 14   TDEB
                                                                      MAX13038
                                     VLO    33                                                                 13   WET
                                     N.C.   34                                                                 12   HYST
                                     BAT    35                                                                 11   N.C.
                                     BAT    36    +                                                            10   N.C.
                                                 1       2     3      4     5     6     7        8       9
                                                 GND     IN0   IN1    IN2   IN3   IN4   IN5      IN6     IN7
                                                                        TQFN
                                                                     (6mm x 6mm)
                          *CONNECT EXPOSED PAD TO GROUND
www.maximintegrated.com                                                                                                    Maxim Integrated | 19


MAX13037/MAX13038                                                                                                        Contact Monitor and Level
                                                                                                                        Shifters with LDO Regulator
Typical Operating Circuit
                                                                                                                                                                                            BATTERY
                                                                                                                                                                                                +6V TO +26V,
                                                                                                                                                                                                +42V LOAD
                                                                                                                                                                                                DUMP
                                                                                     ECU CONNECTOR
       0.01μF                                                                                   0.01μF
                                                                                                                                                                                                      VLO
                IN0    IN1   IN2   IN3        IN4         IN5        IN6      IN7                         IN0     IN1    IN2         IN3         IN4        IN5       IN6         IN7
                DO0                                                        BATREF                        BATREF                                                                  DO0
                DO1                                                                                                                                                              DO1
                                                                             BAT                         BAT                                                                   THRESH
                                                                                               47μF
     4700pF                                                                                                                                                                              4700pF
                                                                                      0.1μF 0.1μF
                TDEB                                                                                                                                                             TDEB
                                   MAX13036                                                                                          MAX13037                                            4700pF
                WET                                                                                                                  MAX13038                                      TD
      90kΩ
                HYST                                                                                                                                                             WET
      30kΩ                                                                    SDI                        SDO                                                                             61kΩ
                                                                             SDO                         SDI                                                                     HYST
                                                                             CLK                         CLK                                                                             30kΩ
                                                                              CS                         CS
                                                                                                                                                              REGON   REGOFF
                GND                                                                                      WDI
                                         SD         INT         OT   VL                                           VLO   INT     OT         RST         SD                        GND
                                                                             0.1μF                        4.7μF
                                                                                          μC
Chip Information                                                                                    Package Information
PROCESS: BiCMOS                                                                                     For the latest package outline information and land patterns (foot-
                                                                                                    prints), go to www.maximintegrated.com/packages. Note that a
                                                                                                    “+”, “#”, or “-” in the package code indicates RoHS status only.
                                                                                                    Package drawings may show a different suffix character, but the
                                                                                                    drawing pertains to the package regardless of RoHS status.
                                                                                                         PACKAGE               PACKAGE                                                     LAND
                                                                                                                                                            OUTLINE NO.
                                                                                                           TYPE                  CODE                                                   PATTERN NO.
                                                                                                      36 TQFN-EP               T3666+3                            21-0141                  90-0050
www.maximintegrated.com                                                                                                                                                          Maxim Integrated | 20


 MAX13037/MAX13038                                                                                          Contact Monitor and Level
                                                                                                          Shifters with LDO Regulator
Revision History
   REVISION         REVISION                                                                                                                        PAGES
                                                                                DESCRIPTION
   NUMBER              DATE                                                                                                                       CHANGED
        0               11/07       Initial release                                                                                                    —
                                    No /V OPNs; deleted automotive references in General Description and Applications
                                                                                                                                                    1, 2, 18,
        1                5/15       Information sections; added Package Thermal Characteristics, updated Package
                                                                                                                                                     21, 22
                                    Information, and added Revision History; rebranded to new Maxim logo
 For pricing, delivery, and ordering information, please contact Maxim Direct at 1-888-629-4642, or visit Maxim Integrated’s website at www.maximintegrated.com.
Maxim Integrated cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim Integrated product. No circuit patent
licenses are implied. Maxim Integrated reserves the right to change the circuitry and specifications without notice at any time. The parametric values (min and
max limits) shown in the Electrical Characteristics table are guaranteed. Other parametric values quoted in this data sheet are provided for guidance.
Maxim Integrated and the Maxim Integrated logo are trademarks of Maxim Integrated Products, Inc.                    © 2015 Maxim Integrated Products, Inc. | 21


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 MAX13038ATX+ MAX13038ATX+T MAX13037ATX+ MAX13037ATX+T MAX13038ATI+
