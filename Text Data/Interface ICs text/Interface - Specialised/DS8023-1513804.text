                                                                                                                              DS8023
                                                                                     Smart Card Interface
                               General Description                                                                                   Features
The DS8023 smart card interface IC is a low-cost, low-                         o Analog Interface and Level Shifting for IC Card
power, analog front-end for a smart card reader designed                           Communication
for all ISO 7816, EMV*, and GSM11-11 applications. The
DS8023 supports 5V, 3V, and 1.8V smart cards, and pro-                         o ±8kV (min) ESD (IEC) Protection on Card Interface
vides an option for ultra-low stop-mode power consump-                             Pins
tion. The DS8023 is available in 28-pin TSSOP and SO                           o Ultra-Low Stop-Mode Current, Less Than 10nA (typ)
packages, and can often be used as a replacement for
the TDA8024 with little or no application changes.                             o Internal IC Card-Supply Voltage Generation
The DS8023 is designed to interface between a system                                  5.0V ±5%, 80mA (max)
microcontroller and the smart card interface, providing                               3.0V ±8%, 65mA (max)
all power supply, protection, and level shifting required                             1.8V ±10%, 30mA (max)
for IC card applications.                                                      o Automatic Card Activation and Deactivation
                                                                                   Controlled by Dedicated Internal Sequencer
                                               Applications                    o I/O Lines from Host Directly Level Shifted for
         Set-Top Box Conditional Access                                            Smart Card Communication
         Access Control                                                        o Flexible Card Clock Generation, Supporting
         Banking Applications                                                      External Crystal Frequency Divided by 1, 2, 4, or 8
         POS Terminals                                                         o High-Current/Short-Circuit and High-Temperature
         Debit/Credit Payment Terminals                                            Protection
         PIN Pads
                                                                                                                  Pin Configuration
         Automated Teller Machines
         Telecommunications
                                                                                        TOP VIEW
         Pay/Premium Television
                                                                                      CLKDIV1 1                                      28 AUX2IN
                            Ordering Information
                                                                                      CLKDIV2 2                                      27 AUX1IN
       PART               TEMP RANGE              PIN-PACKAGE                           5V/3V 3                                      26 I/OIN
  DS8023-RJX+             -40°C to +85°C          28 TSSOP                              PGND 4                                       25 XTAL2
  DS8023-RRX+             -40°C to +85°C          28 SO                                   CP2 5                                      24 XTAL1
                                                                                         VDDA 6               DS8023                 23 OFF
Note: Contact the factory for availability of other variants and
package options.                                                                          CP1 7                                      22 GND
+Denotes a lead(Pb)-free/RoHS-compliant package.                                          VUP 8                                      21 VDD
                                                                                         PRES 9                                      20 RSTIN
                                                                                         PRES 10                                     19 CMDVCC
Selector Guide appears at end of data sheet.                                               I/O 11                                    18 1_8V
                                                                                         AUX2 12                                     17 VCC
                                                                                         AUX1 13                                     16 RST
                                                                                        CGND 14                                      15 CLK
                                                                                                           SO/TSSOP
*EMV is a trademark owned by EMVCo LLC. EMV Level 1 library and hardware reference design available. Contact factory for details.
Note: Some revisions of this device may incorporate deviations from published specifications known as errata. Multiple revisions of any device may be
simultaneously available through various sales channels. For information about device errata, go to: www.maximintegrated.com/errata.
 For pricing, delivery, and ordering information, please contact Maxim Direct
 at 1-888-629-4642, or visit Maxim’s website at www.maximintegrated.com.                                                          19-6380; Rev 1; 4/13


DS8023
Smart Card Interface
ABSOLUTE MAXIMUM RATINGS
Voltage Range on VDD Relative to GND ...............-0.5V to +6.5V                    Maximum Junction Temperature .....................................+125°C
Voltage Range on VDDA Relative to PGND ...........-0.5V to +6.5V                      Maximum Power Dissipation (TA = -40°C to +85°C) .......700mW
Voltage Range on CP1, CP2, and VUP                                                    Storage Temperature Range .............................-55°C to +150°C
   Relative to PGND...............................................-0.5V to +7.5V      Soldering Temperature.........Refer to the IPC/JEDEC J-STD-020
Voltage Range on All Other Pins                                                                                                                  Specification.
   Relative to GND......................................-0.5V to (VDD + 0.5V)
Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional
operation of the device at these or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to
absolute maximum rating conditions for extended periods may affect device reliability.
RECOMMENDED DC OPERATING CONDITIONS
(VDD = +3.3V, VDDA = +5.0V, TA = +25°C, unless otherwise noted.) (Note 1)
                  PARAMETER                                    SYMBOL                    CONDITIONS                   MIN        TYP          MAX       UNITS
 POWER SUPPLY
 Digital Supply Voltage                                             VDD                                                2.7                      6.0        V
                                                                              VCC = 5V, |ICC| < 80mA                   4.0                      6.0
 Card-Voltage-Generator Supply Voltage                             VDDA                                                                                    V
                                                                              VCC = 5V, |ICC| < 30mA                   3.0                      6.0
                                                                    VTH2      Threshold voltage (falling)            2.30        2.45          2.60        V
 Reset Voltage Thresholds
                                                                  VHYS2       Hysteresis                               50        100           150        mV
 CURRENT CONSUMPTION
 Active VDD Current 5V Cards                                                  ICC = 80mA, f XTAL = 20MHz,
                                                                 IDD_50V                                                                       215       mA
 (Including 80mA Draw from 5V Card)                                           fCLK = 10MHz, VDDA = 5.0V
 Active VDD Current 5V Cards                                                  ICC = 80mA, fXTAL = 20MHz,
                                                                  IDD_IC                                                                       135       mA
 (Current Consumed by DS8023 Only)                                            fCLK = 10MHz, VDDA = 5.0V (Note 2)
 Active VDD Current 3V Cards                                                  ICC = 65mA, f XTAL = 20MHz,
                                                                 IDD_30V                                                                       100       mA
 (Including 65mA Draw from 3V Card)                                           fCLK = 10MHz, VDDA = 5.0V
 Active VDD Current 3V Cards                                                  ICC = 65mA, fXTAL = 20MHz,
                                                                  IDD_IC                                                                        35       mA
 (Current Consumed by DS8023 Only)                                            fCLK = 10MHz, VDDA = 5.0V (Note 2)
 Active VDD Current 1.8V Cards                                                ICC = 30mA, fXTAL = 20MHz,
                                                                 IDD_18V                                                                        70       mA
 (Including 30mA Draw from 1.8V Card)                                         fCLK = 10MHz, VDDA = 5.0V
 Active VDD Current 1.8V Cards                                                ICC = 30mA, fXTAL = 20MHz,
                                                                  IDD_IC                                                                        35       mA
 (Current Consumed by DS8023 Only)                                            fCLK = 10MHz, VDDA = 5.0V (Note 2)
 Inactive-Mode Current                                               IDD      Card inactive                                                    500        μA
                                                                              DS8023 in ultra-low-power stop
 Stop-Mode Current                                              IDD_STOP                                                          10                      nA
                                                                              mode (Note 3)
 CLOCK SOURCE
 Crystal Frequency                                                 f XTAL     External crystal                          0                       20       MHz
                                                                  f XTAL1                                               0                       20       MHz
                                                                                                                                              0.3 x
                                                                VIL_XTAL1                                             -0.3
 XTAL1 Operating Conditions                                                                                                                    VDD
                                                                                                                                                           V
                                                                                                                     0.7 x                    VDD +
                                                               VIH_XTAL1
                                                                                                                      VDD                       0.3
                                                                 CXTAL1,
 External Capacitance for Crystal                                                                                                               15        pF
                                                                 CXTAL2
 Internal Oscillator                                                 f INT                                                        2.7                    MHz
2                                                                                                                                              Maxim Integrated


                                                                                                    DS8023
                                                                       Smart Card Interface
RECOMMENDED DC OPERATING CONDITIONS (continued)
(VDD = +3.3V, VDDA = +5.0V, TA = +25°C, unless otherwise noted.) (Note 1)
                PARAMETER                   SYMBOL                   CONDITIONS            MIN   TYP  MAX  UNITS
 SHUTDOWN TEMPERATURE
 Shutdown Temperature                            T SD                                            +150        °C
 RST PIN
                     Output Low Voltage      VOL_RST1    I OL_RST = 1mA                       0        0.3    V
 Card-Inactive Mode
                     Output Current          I OL_RST1   VO_LRST = 0V                         0        -1   mA
                     Output Low Voltage      VOL_RST2    I OL_RST = 200μA                     0        0.3    V
                     Output High                                                           VCC -
                                             VOH_RST2    I OH_RST = -200μA                            VCC     V
                     Voltage                                                                0.5
                     Rise Time                 tR_RST    CL = 30pF                                     0.1   μs
 Card-Active Mode    Fall Time                 tF_RST    CL = 30pF                                     0.1   μs
                     Shutdown Current
                                              IRST(SD)                                            -20       mA
                     Threshold
                     Current Limitation     IRST(LIMIT)                                     -20       +20   mA
                     RSTIN to RST Delay   tD(RSTIN-RST)                                                 2    μs
 CLK PIN
                     Output Low Voltage      VOL_CLK1    I OLCLK = 1mA                       0         0.3    V
 Card-Inactive Mode
                     Output Current          I OL_CLK1   VOLCLK = 0V                          0        -1   mA
                     Output Low Voltage      VOL_CLK2    I OLCLK = 200μA                     0         0.3    V
                     Output High                                                           VCC -
                                             VOH_CLK2    I OHCLK = -200μA                             VCC     V
                     Voltage                                                                0.5
                     Rise Time                 tR_CLK    CL = 30pF (Note 4)                             8    ns
 Card-Active Mode    Fall Time                 tF_CLK    CL = 30pF (Note 4)                             8    ns
                     Current Limitation     ICLK(LIMIT)                                     -70       +70   mA
                     Clock Frequency            fCLK     Operational                         0         10   MHz
                     Duty Factor                        CL = 30pF                           45        55    %
                     Slew Rate                   SR      CL = 30pF                          0.2             V/ns
 VCC PIN
                     Output Low Voltage         VCC1     ICC = 1mA                            0        0.3    V
 Card-Inactive Mode
                     Output Current             ICC1     VCC = 0V                             0        -1   mA
                                                         ICC(5V) < 80mA                    4.75  5.00 5.25
                                                         ICC(3V) < 65mA                    2.78  3.00 3.22
                                                         ICC(1.8V) < 30mA                  1.65   1.8 1.95
                                                         5V card: current pulses of 40nC
                                                         with I < 200mA, t < 400ns,         4.6        5.4
                                                         f < 20MHz
 Card-Active Mode    Output Low Voltage         VCC2                                                          V
                                                         3V card: current pulses of 24nC
                                                         with I < 200mA, t < 400ns,        2.75       3.25
                                                         f < 20MHz
                                                         1.8V card: current pulses of 12nC
                                                         with I < 200mA, t < 400ns,        1.62       1.98
                                                         f < 20MHz
Maxim Integrated                                                                                                 3


DS8023
Smart Card Interface
RECOMMENDED DC OPERATING CONDITIONS (continued)
(VDD = +3.3V, VDDA = +5.0V, TA = +25°C, unless otherwise noted.) (Note 1)
               PARAMETER                    SYMBOL                   CONDITIONS        MIN     TYP  MAX      UNITS
                                                          VCC(5V) = 0 to 5V                          -80
                       Output Current              ICC2   VCC(3V) = 0 to 3V                          -65       mA
                                                          VCC(1.8V) = 0 to 1.8V                      -30
 Card-Active Mode
                       Shutdown Current
                                               ICC(SD)                                         120             mA
                       Threshold
                       Slew Rate                VCCSR     Up/down, C < 300nF (Note 5)  0.05    0.16  0.22      V/μs
 DATA LINES (I/O AND I/OIN)
 I/O  I/OIN Falling Edge Delay             tD(IO-IOIN)                                              200        ns
 Pullup Pulse Active Time                           t PU                                             100        ns
 Maximum Frequency                             f IOMAX                                                 1       MHz
 Input Capacitance                                   CI                                               10        pF
 I/O, AUX1, AUX2 PINS
                       Output Low Voltage     VOL_IO1     I OL_IO = 1mA                   0          0.3         V
                       Output Current          I OL_IO1   VOL_IO = 0V                     0           -1       mA
 Card-Inactive Mode
                       Internal Pullup
                                               RPU_IO     To VCC                          7     11    15        k
                       Resistor
                       Output Low Voltage     VOL_IO2     I OL_IO = 1mA                   0          0.3         V
                       Output High
                                             VOH_IO2      I OH_IO = < -40μA (3V/5V)   0.75 x VCC     VCC         V
                       Voltage
                       Output Rise/Fall
                                                    t OT  CL = 30pF (Note 3)                          0.1       μs
                       Time
                       Input Low Voltage         VIL_IO                                -0.3          +0.8
                                                                                                                 V
 Card-Active Mode      Input High Voltage       VIH_IO                                   1.5         VCC
                       Input Low Current         I IL_IO  VIL_IO = 0V                                700        μA
                       Input High Current        I IH_IO  VIH_IO = VCC                                20        μA
                       Input Rise/Fall Time          t IT                                             1.2       μs
                       Current Limitation    I IO(LIMIT)  CL = 30pF                     -15          +15       mA
                       Current When
                                                    I PU  CL = 80pF, V OH = 0.9 x VDD    -1                    mA
                       Pullup Active
 I/OIN, AUX1IN, AUX2IN PINS
 Output Low Voltage                                VOL    I OL = 1mA                      0           0.3        V
                                                                                       0.9 x        VDD +
                                                          No load
                                                                                        VDD           0.1
 Output High Voltage                               VOH                                                           V
                                                                                      0.75 x        VDD +
                                                          I OH < -40μA
                                                                                        VDD           0.1
 Output Rise/Fall Time                              t OT  CL = 30pF, 10% to 90%                       0.1       μs
                                                                                                    0.3 x
 Input Low Voltage                                  VIL                                 -0.3                     V
                                                                                                     VDD
                                                                                       0.7 x        VDD +
 Input High Voltage                                 VIH                                                          V
                                                                                        VDD           0.3
4                                                                                                     Maxim Integrated


                                                                                                              DS8023
                                                                           Smart Card Interface
RECOMMENDED DC OPERATING CONDITIONS (continued)
(VDD = +3.3V, VDDA = +5.0V, TA = +25°C, unless otherwise noted.) (Note 1)
                 PARAMETER                     SYMBOL                   CONDITIONS                MIN     TYP     MAX   UNITS
 Input Low Current                                 I IL_IO   VIL = 0V                                              600    μA
 Input High Current                                I IH_IO   VIH = VDD                                              10    μA
 Input Rise/Fall Time                                  t IT  VIL to VIH                                            1.2    μs
 Integrated Pullup Resistor                          RPU     Pullup to VDD                          7      11       15   k
 Current When Pullup Active                           I PU   CL = 30pF, V OH = 0.9 x VDD           -1                    mA
 CONTROL PINS (CLKDIV1, CLKDIV2, CMDVCC, RSTIN, 5V/3V)
                                                                                                                  0.3 x
 Input Low Voltage                                    VIL                                         -0.3                     V
                                                                                                                   VDD
                                                                                                 0.7 x            VDD +
 Input High Voltage                                   VIH                                                                  V
                                                                                                  VDD              0.3
 Input Low Current                                 I IL_IO   0 < VIL < VDD                                           5    μA
 Input High Current                                I IH_IO   0 < VIH < VDD                                           5    μA
 INTERRUPT OUTPUT PIN (OFF)
 Output Low Voltage                                  VOL     I OL = 2mA                             0              0.3     V
                                                                                                0.75 x
 Output High Voltage                                 VOH     I OH = -15μA                                                  V
                                                                                                  VDD
 Integrated Pullup Resistor                          RPU     Pullup to VDD                         15      24       33   k
 PRES, PRES PINS
                                                                                                                  0.3 x
 Input Low Voltage                             VIL_PRES                                                                    V
                                                                                                                   VDD
                                                                                                 0.7 x
 Input High Voltage                            VIH_PRES                                                                    V
                                                                                                  VDD
 Input Low Current                              I IL_PRES    VIL_PRES = 0V                                           5    μA
 Input High Current                             I IH_PRES    VIH_PRES = VDD                                          5    μA
 TIMING
 Activation Time                                     tACT                                                 160             μs
 Deactivation Time                                tDEACT                                                   80             μs
 CLK to Card Start       Window Start                   t3                                                 95
                                                                                                                          μs
 Time                    Window End                     t5                                                160
 PRES/PRES Debounce Time                      tDEBOUNCE                                                     8            ms
Note 1:   Operation guaranteed at TA = -40°C and TA = +85°C, but not tested.
Note 2:   IDD_IC measures the amount of current used by the DS8023 to provide the smart card current minus the load.
Note 3:   Stop mode is enabled by setting CMDVCC, 5V/3V, and 1_8V to logic-high.
Note 4:   Parameters are guaranteed to meet all ISO 7816, GSM11-11, and EMV 2000 requirements. For the 1.8V card, the maximum
          rise time and fall time is 10ns.
Note 5: Parameter is guaranteed to meet all ISO 7816, GSM11-11, and EMV 2000 requirements. For the 1.8V card, the minimimum
          slew rate is 0.05V/µs and the maximum slew rate is 0.5V/µs.
Maxim Integrated                                                                                                             5


DS8023
Smart Card Interface
                                                                                               Pin Description
   PIN    NAME                                                     FUNCTION
         CLKDIV1, Clock Divider. Determines the divided-down input clock frequency (presented at XTAL1 or from a
   1, 2
         CLKDIV2  crystal at XTAL1 and XTAL2) on the CLK output pin. Dividers of 1, 2, 4, and 8 are available.
                  5V/3V Selection Pin. Allows selection of 5V or 3V for communication with an IC card. Logic-high
     3     5V/3V  selects 5V operation; logic-low selects 3V operation. See Table 3 for a complete description of
                  choosing card voltages.
     4     PGND   Analog Ground
                  Step-Up Converter Contact. Charge-pump capacitor. Connect a 100nF capacitor (ESR < 100mĀ)
   5, 7  CP2, CP1
                  between CP1 and CP2.
     6     VDDA   Charge-Pump Supply. Must be equal to or higher than VDD. Connect a supply of at least 3.0V.
     8      VUP   Charge-Pump Output. Connect a 100nF capacitor (ESR < 100mĀ) between VUP and GND.
                  Card Presence Indicator. Active-low card presence inputs. When the presence indicator becomes
     9     PRES
                  active, a debounce timeout begins. After 8ms (typ) the OFF signal becomes active.
                  Card Presence Indicator. Active-high card presence inputs. When the presence indicator becomes
    10     PRES
                  active, a debounce timeout begins. After 8ms (typ) the OFF signal becomes active.
    11       I/O  Smart Card Data-Line Output. Card data communication line, contact C7.
          AUX2,   Smart Card Auxiliary Line (C4, C8) Output. Data line connected to card reader contacts C4 (AUX1)
  12, 13
           AUX1   and C8 (AUX2).
    14     CGND   Smart Card Ground
    15      CLK   Smart Card Clock. Card clock, contact C3.
    16      RST   Smart Card Reset. Card reset output from contact C2.
                  Smart Card Supply Voltage. Decouple to CGND (card ground) with 2 x 100nF or 100 + 220nF
    17      VCC
                  capacitors (ESR < 100m).
                  1.8V Operation Selection. Active-high selection for 1.8V smart card communication. An active-high
    18     1_8V
                  signal on this pin overrides any setting on the 5V/3V pin.
    19   CMDVCC   Activation Sequence Initiate. Active-low input from host.
    20     RSTIN  Card Reset Input. Reset input from the host.
    21      VDD   Supply Voltage
    22     GND    Digital Ground
    23      OFF   Status Output. Active-low interrupt output to the host. Use a 20k integrated pullup resistor to VDD.
                  Crystal/Clock Input. Connect an input from an external clock to XTAL1 or connect a crystal across
          XTAL1,
  24, 25          XTAL1 and XTAL2. For the low idle-mode current variant, an external clock must be driven on
          XTAL2
                  XTAL1.
    26     I/OIN  I/O Input. Host-to-interface chip data I/O line.
         AUX1IN,
  27, 28          C4/C8 Input. Host-to-interface I/O line for auxiliary connections to C4 and C8.
          AUX2IN
6                                                                                                          Maxim Integrated


                                                                                                               DS8023
                                                                            Smart Card Interface
                                 Detailed Description                  mode. (Note that the PORADJ pin is not present in the
                                                                       DS8023. It is replaced by the 1_8V selection pin.)
The DS8023 is an analog front-end for communicating
with 1.8V, 3V, and 5V smart cards. Using an integrated                                                     Power Supply
charge pump, the DS8023 can operate from a single
                                                                       The DS8023 can operate from a single supply or a dual
input voltage. The device translates all communication
                                                                       supply. The supply pins for the device are VDD, GND,
lines to the correct voltage level and provides power for
                                                                       VDDA, and PGND. VDD should be in the 2.7V to 6.0V
smart card operation. It can operate from a wide input
                                                                       range, and is the supply for signals that interface with
voltage range (3.0V to 6.0V) and provides an extremely
                                                                       the host controller. It should, therefore, be the same
low-power stop mode, consuming only 10nA while in
                                                                       supply as used by the host controller. All smart card
stop mode. The DS8023 is very compatible with the
                                                                       contacts remain inactive during power on or power off.
NXP TDA8024. Many applications can upgrade with
                                                                       The internal circuits are kept in the reset state until VDD
very minor hardware changes, and only need to add
                                                                       reaches VTH2 + VHYS2 and for the duration of the inter-
support in software to activate the ultra-low-power stop
                                                                       nal power-on reset pulse, tW. A deactivation sequence
                                                                       is executed when VDD falls below VTH2.
                                                                       An internal charge pump and regulator generate the
                                                                  VDDA
                                            CARD VOLTAGE
                                                                  PGND 3V or 5V card supply voltage (VCC). The charge pump
           VDD             POWER-SUPPLY      GENERATOR                 and regulator are supplied by VDDA and PGND. VDDA
                                                                  CP1
          GND                SUPERVISOR          AND
                                            CHARGE PUMP
                                                                  CP2  should be connected to a minimum 3.0V (maximum
                                                                  VUP  6.0V) supply and should be at a potential that is equal
       XTAL1                                                           to or higher than VDD.
       XTAL2                   CLOCK        TEMPERATURE
     CLKDIV1                 GENERATION        MONITOR                 The charge pump operates in a 1x (voltage follower) or
     CLKDIV2                                                           2x (voltage doubler) mode depending on the input
         1_8V                                                     VCC
                                                                       VDDA and the selected card voltage (5V or 3V).
        5V/3V                                                     CGND    • For 5V cards, the DS8023 operates in a 1x mode
     CMDVCC                                                       RST
                                       CONTROL
                                                                  CLK
                                                                             for VDDA > 5.8V and in a 2x mode for VDDA < 5.8V.
        RSTIN                         SEQUENCER
           OFF                                                    PRES    • For 3V cards, the DS8023 operates in a 1x mode
                                                                  PRES       for VDDA > 4.1V and in a 2x mode for VDDA < 4.1V.
         I/OIN                                                    I/O     • For 1.8V cards, the DS8023 operates in a 1x mode
      AUX1IN                       I/O TRANSCEIVER                AUX1       for VDDA > 2.9V and in a 2x mode for VDDA < 2.9V.
      AUX2IN                                                      AUX2
                                                                                                 Voltage Supervisor
                                        DS8023
                                                                       The voltage supervisor monitors the V DD supply. A
                                                                       220µs reset pulse (tW) is used internally to keep the
 Figure 1. Functional Diagram                                          device inactive during power on or power off of the VDD
                                                                       supply. See Figure 2.
                                                                                                              VTH2 + VHYS2
                                                                                                              VTH2
                             VDD
                          ALARM
               (INTERNAL SIGNAL)
                                                            tW                   tW
                                                         POWER ON          SUPPLY DROPOUT                   POWER OFF
 Figure 2. Voltage Supervisor Behavior
 Maxim Integrated                                                                                                                7


DS8023
Smart Card Interface
The DS8023 card interface remains inactive no matter                                         I/O Transceivers
the levels on the command lines until duration tW after
                                                            The three data lines I/O, AUX1, and AUX2 are identical.
VDD has reached a level higher than VTH2 + VHYS2.
                                                            This section describes the characteristics of I/O and
When VDD falls below VTH2, the DS8023 executes a
                                                            I/OIN, but also applies to AUX1, AUX1IN, AUX2, and
card deactivation sequence if its card interface is active.
                                                            AUX2IN.
                                 Clock Circuitry            I/O and I/OIN are pulled high with an 11kΩ resistor (I/O
The clock signal from the DS8023 to the smart card          to VCC and I/OIN to VDD) in the inactive state. The first
(CLK) is generated from the clock input on XTAL1 or         side of the transceiver to receive a falling edge
from a crystal operating at up to 20MHz connected           becomes the master. When the master is decided, the
between pins XTAL1 and XTAL2. The inputs CLKDIV1            opposite side switches to slave mode, ignoring subse-
and CLKDIV2 determine the frequency of the CLK sig-         quent edges until the master releases. After a time delay
nal, which can be fXTAL, fXTAL/2, fXTAL/4, or fXTAL/8.      tD(EDGE), an n transistor on the slave side is turned on,
Table 1 shows the relationship between CLKDIV1 and          thus transmitting the logic 0 present on the master side.
CLKDIV2 and the frequency of CLK.                           When the master side asserts a logic 1, a p transistor
Do not change the state of pins CLKDIV1 and CLKDIV2         on the slave side is activated during the time delay,
simultaneously; a delay of 10ns minimum between             tPU, and then both sides return to their inactive (pulled
changes is required. The minimum duration of any state      up) states. This active pullup provides fast low-to-high
of CLK is 8 periods of XTAL1.                               transitions. After the duration of tPU, the output voltage
                                                            depends only on the internal pullup resistor and the
The hardware in the DS8023 guarantees that the fre-
                                                            load current. Current to and from the card I/O lines is
quency change is synchronous. During a transition of
                                                            limited internally to 15mA. The maximum frequency on
the clock divider, no pulse is shorter than 45% of the
                                                            these lines is 1MHz.
smallest period, and the clock pulses before and after
the instant of change have the correct width.                                                   Inactive Mode
To achieve a 45% to 55% duty factor on pin CLK when         The DS8023 powers up with the card interface in the
no crystal is present, the input signal on XTAL1 should     inactive mode. Minimal circuitry is active while waiting
have a 48% to 52% duty factor. Transition time on           for the host to initiate a smart card session.
XTAL1 should be less than 5% of the period.
                                                               • All card contacts are inactive (approximately 200Ω
With a crystal, the duty factor on pin CLK may be 45%             to GND).
to 55% depending on the circuit layout and on the crys-
                                                               • Pins I/OIN, AUX1IN, and AUX2IN are in the high-
tal characteristics and frequency.
                                                                  impedance state (11kΩ pullup resistor to VDD).
The DS8023 crystal oscillator runs when the device is
                                                               • Voltage generators are stopped.
powered up. If the crystal oscillator is used or the clock
pulse on pin XTAL1 is permanent, the clock pulse is            • XTAL oscillator is running (if included in the device).
applied to the card at time t4 (see Figures 7 and 8). If       • Voltage supervisor is active.
the signal applied to XTAL1 is controlled by the host
                                                               • The internal oscillator is running at its low frequency.
microcontroller, the clock pulse is applied to the card
when it is sent by the system microcontroller (after                                  Activation Sequence
completion of the activation sequence).
                                                            After power-on and the reset delay, the host microcon-
                                                            troller can monitor card presence with signals OFF and
                                                            CMDVCC, as shown in Table 2.
Table 1. Clock Frequency Selection
     CLKDIV1             CLKDIV2               fCLK         Table 2. Card Presence Indication
         0                   0                fXTAL/8
                                                                     OFF               CMDVCC                STATUS
         0                   1                fXTAL/4
                                                                     High                High          Card present.
         1                   1                fXTAL/2
                                                                     Low                 High          Card not present.
         1                   0                 fXTAL
8                                                                                                            Maxim Integrated


                                                                                                      DS8023
                                                                      Smart Card Interface
When a card is inserted into the reader (if PRES is           An alternate sequence allows the application to control
active), the host microcontroller can begin an activation     when the clock is applied to the card.
sequence (start a card session) by pulling CMDVCC                 1) Host: Set RSTIN high.
low. The following events form an activation sequence
(Figure 3):                                                       2) Host: Set CMDVCC low.
   1) Host: CMDVCC is pulled low.                                 3) Host: Set RSTIN low between t3 and t5; CLK will now
                                                                      start.
   2) DS8023: The internal oscillator changes to high
      frequency (t0).                                             4) DS8023: RST stays low until t5, then RST becomes
                                                                      the copy of RSTIN.
   3) DS8023: The voltage generator is started simulta-
      neously (t1 = t0).                                          5) DS8023: RSTIN has no further effect on CLK after t5.
   4) DS8023: Raise VCC from 0 to 5V, 3V, or 1.8V with        If the applied clock is not needed, set CMDVCC low
      a controlled slope (t2 = t1 + 1.5 × T). T is 64 times   with RSTIN low. In this case, CLK starts at t3 (minimum
      the internal oscillator period (approximately 25µs).    200ns after the transition on I/O, see Figure 4); after t5,
                                                              RSTIN can be set high to obtain an answer to request
   5) DS8023: I/O, AUX1, and AUX2 are enabled                 (ATR) from an inserted smart card. Do not perform acti-
      (t3 = t1 + 4T).                                         vation with RSTIN held permanently high.
   6) DS8023: The CLK signal is applied to the C3 con-
      tact (t4).
   7) DS8023: RST is enabled simulataneously (t5 = t4 =
      t11 + 7T).
           CMDVCC
                 VCC
                  I/O                                                                               ATR
                CLK
              RSTIN
                 RST
               I/OIN
                                t0 t1    t2      t3      t4 t5 = tACT
 Figure 3. Activation Sequence Using RSTIN and CMDVCC
 Maxim Integrated                                                                                                       9


DS8023
Smart Card Interface
          CMDVCC
               VCC
                I/O                                                  ATR
              CLK
                                                 200ns
            RSTIN
               RST
             I/OIN
                                t0 t1 t2  t3 t4        t5 = tACT
Figure 4. Activation Sequence at t3
         CMDVCC
              RST
              CLK
                I/O
              VCC
                               t10       t12      t13     t14    t15
                                             tDE
Figure 5. Deactivation Sequence
10                                                                       Maxim Integrated


                                                                                                    DS8023
                                                                  Smart Card Interface
                    Deactivation Sequence                    There are two different cases for how the DS8023
                                                             reacts to fault detection (Figure 6):
When the host microcontroller is done communicating
with the smart card, it sets the CMDVCC line high to            • Outside a Card Session (CMDVCC High). Output
execute an automatic deactivation sequence and                     OFF is low if a card is not in the card reader and
returns the card interface to the inactive mode.                   high if a card is in the reader. The VDD supply is
                                                                   monitored—a decrease in input voltage generates
The following sequence of events occurs during a
                                                                   an internal power-on reset pulse but does not
deactivation sequence (Figure 5):
                                                                   affect the OFF signal. Short-circuit and tempera-
  1) RST goes low (t10).                                           ture detection are disabled because the card is
  2) CLK is held low (t12 = t10 + 0.5 × T), where T is 64          not powered up.
      times the period of the internal oscillator (approxi-     • Within a Card Session (CMDVCC Low). Output
      mately 25µs).                                                OFF goes low when a fault condition is detected,
  3) I/O, AUX1, and AUX2 are pulled low (t13 = t10 + T).           and an emergency deactivation is performed auto-
                                                                   matically (Figure 7). When the system controller
  4) VCC starts to fall (t14 = t10 + 3T).
                                                                   resets CMDVCC to high, it may sense the OFF
  5) When VCC reaches its inactive state, the deactiva-            level again after completing the deactivation
      tion sequence is complete (at tDE).                          sequence. This distinguishes between a card
  6) All card contacts become low impedance to GND;                extraction and a hardware problem (OFF goes high
      I/OIN, AUX1IN, and AUX2IN remain at VDD (pulled              again if a card is present).
      up through an internal 11kΩ resistor).                 Depending on the connector’s card-present switch
  7) The internal oscillator returns to its lower frequency. (normally closed or normally open) and the mechanical
                                                             characteristics of the switch, bouncing can occur on
                                  VCC Generator              the PRES signals at card insertion or withdrawal. The
The card voltage (VCC) generator can supply up to            DS8023 has a debounce feature with an 8ms typical
80mA continuously at 5V, 65mA at 3V, or 30mA at 1.8V.        duration (Figure 6). When a card is inserted, output
An internal overload detector triggers at approximately      OFF goes high after the debounce time delay. When
120mA. Current samples to the detector are filtered.         the card is extracted, an automatic deactivation
This allows spurious current pulses (with a duration of a    sequence of the card is performed on the first true/false
few µs) up to 200mA to be drawn without causing              transition on PRES and output OFF goes low.
deactivation. The average current must stay below the
specified maximum current value.
                                                                      Stop Mode (Low-Power Mode)
                                                             A low-power state, stop mode, can be entered by forc-
See the Applications Information section for recommen-
                                                             ing the CMDVCC, 5V/3V, and 1_8V input pins to a
dations to help maintain VCC voltage accuracy.
                                                             logic-high state. Stop mode can only be entered when
                                 Fault Detection             the smart card interface is inactive. In stop mode all
                                                             internal analog circuits are disabled. The OFF pin fol-
The DS8023 integrates circuitry to monitor the following
                                                             lows the status of the PRES pin. To exit stop mode,
fault conditions:
                                                             change the state of one or more of the three control
  • Short circuit or high current on VCC                     pins to a logic-low. An internal 220µs (typ) power-up
  • Card removal while the interface is activated            delay and the 8ms PRES debounce delay are in effect
                                                             and OFF is asserted to allow the internal circuitry to sta-
  • VDD dropping below threshold
                                                             bilize. This prevents smart card access from occurring
  • Card voltage generator operating out of the speci-       after leaving the stop mode. Figure 8 shows the control
      fied values (VDDA too low or current consumption       sequence for entering and exiting stop mode. Note that
      too high)                                              an in-progress deactivation sequence always finishes
  • Overheating                                              before the DS8023 enters low-power stop mode.
Maxim Integrated                                                                                                      11


DS8023
Smart Card Interface
           PRES
            OFF
        CMDVCC
                       DEBOUNCE                                    DEBOUNCE
            VCC
                                           DEACTIVATION CAUSED                  DEACTIVATION CAUSED
                                          BY CARDS WITHDRAWAL                     BY SHORT CIRCUIT
Figure 6. Behavior of PRES, OFF, CMDVCC, and VCC
            OFF
           PRES
            RST
            CLK
             I/O
            VCC
                                t10             t12        t13 t14          t15
                                                    tDE
Figure 7. Emergency Deactivation Sequence (Card Extraction)
12                                                                                                  Maxim Integrated


                                                                                       DS8023
                                                            Smart Card Interface
                    DEACTIVATE INTERFACE
           CMDVCC
               1_8V                            ACTIVATE  DEACTIVATE
                                              STOP MODE  STOP MODE
              5V/3V
                                                            8ms
                                                        WARMUP DELAY
                                                                          8ms DEBOUNCE
         STOP MODE
                                                                     OFF ASSERTED TO
                                                                     WAIT FOR DELAY
                OFF
                               OFF FOLLOWS
                            PRES IN STOP MODE
               PRES
                VCC
Figure 8. Stop-Mode Sequence
Maxim Integrated                                                                            13


DS8023
Smart Card Interface
                  Smart Card Power Select                  logic-low state. Care must be exercised when switching
                                                           from one VCC power selection to the other. If both 1_8V
The DS8023 supports three smart card VCC voltages:
                                                           and 5V/3V are high with CMDVCC high at the same
1.8V, 3V, and 5V. The power select is controlled by the
                                                           time, the DS8023 enters stop mode. To avoid acciden-
1_8V and 5V/3V signals as shown in Table 3. The 1_8V
                                                           tal entry into stop mode, the state of 1_8V and 5V/3V
signal has priority over 5V/3V. When 1_8V is asserted
                                                           must not be changed simultaneously. A minimum delay
high, 1.8V is applied to VCC when the smart card is
                                                           of 100ns should be observed between changing the
active. When 1_8V is deasserted, 5V/3V dictates VCC
                                                           states of 1_8V and 5V/3V. See Figure 9 for the recom-
power range. VCC is 5V if 5V/3V is asserted to a logic-
                                                           mended sequence of changing the VCC range.
high state, and V CC is 3V if 5V/3V is pulled to a
Table 3. VCC Select and Operation Mode
        1_8V               5V/3V         CMDVCC         VCC SELECT (V)           CARD INTERFACE STATUS
          0                   0              0                 3                           Activated
          0                   0              1                 3                         Deactivated
          0                   1              0                 5                           Activated
          0                   1              1                 5                         Deactivated
          1                   0              0                1.8                          Activated
          1                   0              1                1.8                        Deactivated
          1                   1              0                1.8                     Reserved (Activated)
          1                   1              1                1.8                 Not Applicable—Stop Mode
       VCC SELECT           1.8V          3V            5V             3V          1.8V         STOP MODE
          CMDVCC
             1_8V
            5V/3V
Figure 9. Smart Card Power Select
14                                                                                                      Maxim Integrated


                                                                                                                      DS8023
                                                                                         Smart Card Interface
                                                                                                  VDD
                                                                                             100nF
                                                              +3.3V
                             33pF                  33pF   100nF         100nF
                                                                                                         +3.3V
                                                                                     100nF
                                                                                            +10μF
                                  XTAL1      XTAL2     GND      VDD CP1      CP2 VUP     PGND    VDDA         100kΩ**
                  GPIO           CLKDIV1                                                           PRES
                     ...         CLKDIV2                                                            VCC
                                 5V/3V
                     ...         1_8V                                                               RST
                                 OFF                              DS8023                            CLK
                     ...         RSTIN                                                               I/O               100nF* 220nF*
                                 CMDVCC                                                            AUX1
                     ...                                                                           AUX2
                                 AUX2IN
                  GPIO           AUX1IN
                ISOIO0           I/OIN                                                            CGND
      MAXQ1103
                                 CLKDIV1                                                            VCC
                                 CLKDIV2
                  GPIO           5V/3V                                                              RST
                                 1_8V                                                               CLK
                     ...
                                                                                                     I/O               100nF* 220nF*
                                 OFF                              DS8023
                     ...                                                                           AUX1
                                 RSTIN
                                                                                                   AUX2
                                 CMDVCC
                     ...
                                 AUX2IN
                                                                                                  CGND
                  GPIO           AUX1IN
                                                                                                   PRES
                ISOIO1           I/OIN
                                  XTAL1      XTAL2     GND      VDD CP1      CP2 VUP     PGND    VDDA         100kΩ**
                                                                                            +10μF
                                                                                     100nF
                                                                                                         +3.3V
                             33pF                  33pF   100nF         100nF
                                                              +3.3V
                                                                                             100nF
                                                                                                  VDD
  *PLACE A 100nF CAPACITOR CLOSE TO DS8023 AND PLACE A 220nF CAPACITOR CLOSE TO CARD CONTACT.
  **SCHEMATIC ASSUMES A NORMALLY CLOSED CONNECTION TO GROUND IN THE SOCKET. INSERTING A CARD
    BREAKS THE CONNECTION AND PULLS PRES HIGH.
Figure 10. Typical Application Diagram
Maxim Integrated                                                                                                                    15


DS8023
Smart Card Interface
                Applications Information                   • Connect a 100nF capacitor (ESR < 100mΩ)
                                                               between V CC and CGND and place near the
Performance can be affected by the layout of the appli-
                                                               DS8023’s VCC pin.
cation. For example, an additional cross-capacitance of
1pF between card reader contacts C2 (RST) and C3           • Connect a 100nF or 220nF capacitor (220nF pre-
(CLK) or C2 (RST) and C7 (I/O) can cause contact C2            ferred, ESR < 100mΩ) between VCC and CGND
to be polluted with high-frequency noise from C3 (or           and place near the smart card socket’s C1 contact.
C7). In this case, include a 100pF capacitor between    With all these layout precautions, noise should be kept
contacts C2 and CGND.                                   to an acceptable level and jitter on C3 (CLK) should be
Application recommendations include the following:      less than 100ps.
  • Ensure there is ample ground area around the                                          Technical Support
     DS8023 and the connector; place the DS8023
                                                        For technical support, go to https://support.maxim-
     very near to the connector; decouple the VDD and
                                                        integrated.com/micro.
     VDDA lines separately. These lines are best posi-
     tioned under the connector.                                                               Selector Guide
  • The DS8023 and the host microcontroller must use                           CURRENT           SUPPORTS
     the same VDD supply. Pins CLKDIV1, CLKDIV2,                                                                 PIN-
                                                              PART             VOLTAGES              STOP
     RSTIN, PRES, AUX1IN, I/OIN, AUX2IN, 5V/3V,                                                                  PACKAGE
                                                                            SUPPORTED (V)           MODE?
     CMDVCC, and OFF are referenced to VDD; if pin
                                                         DS8023-RJX+           1.8, 3.0, 5.0           Yes       28 TSSOP
     XTAL1 is to be driven by an external clock, also
     reference this pin to VDD.                          DS8023-RRX+           1.8, 3.0, 5.0           Yes       28 SO
  • Trace C3 (CLK) should be placed as far as possi-     Note: Contact the factory for availability of other variants and
     ble from the other traces.                          package options.
                                                         +Denotes a lead(Pb)-free/RoHS-compliant package.
  • The trace connecting CGND to C5 (GND) should
     be straight (the two capacitors on C1 (VCC) should
     be connected to this ground trace).                                             Package Information
  • Avoid ground loops among CGND, PGND, and            For the latest package outline information and land patterns (foot-
     GND.                                               prints), go to www.maximintegrated.com/packages. Note that a
                                                        “+”, “#”, or “-” in the package code indicates RoHS status only.
  • Decouple VDDA and VDD separately; if the two        Package drawings may show a different suffix character, but the
     supplies are the same in the application, they     drawing pertains to the package regardless of RoHS status.
     should be connected in a star on the main trace.
                                                           PACKAGE            PACKAGE                              LAND
                                                                                             OUTLINE NO.
                                                              TYPE              CODE                          PATTERN NO.
                                                        28 SO (300 mils)        W28+6          21-0042            90-0109
                                                            28 TSSOP            U28+1          21-0066            90-0171
16                                                                                                            Maxim Integrated


                                                                                                                                         DS8023
                                                                                            Smart Card Interface
                                                                                                                              Revision History
     REVISION             REVISION                                                                                                               PAGES
                                                                               DESCRIPTION
     NUMBER                 DATE                                                                                                               CHANGED
          0                   8/08          Initial release                                                                                         —
                                            Clarified t1, t5, t14, added note to Figure 10 describing PRES pin
          1                   4/13                                                                                                              9, 11, 15
                                            operation, and added package information
Maxim Integrated cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim Integrated product. No circuit patent
licenses are implied. Maxim Integrated reserves the right to change the circuitry and specifications without notice at any time. The parametric values (min and
max limits) shown in the Electrical Characteristics table are guaranteed. Other parametric values quoted in this data sheet are provided for guidance.
Maxim Integrated 160 Rio Robles, San Jose, CA 95134 USA 1-408-601-1000 ________________________________ 17
© 2013 Maxim Integrated Products, Inc.                      Maxim Integrated and the Maxim Integrated logo are trademarks of Maxim Integrated Products, Inc.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 DS8023-KIT DS8023-RJX+ DS8023-RJX+T&R DS8023-RRX+ DS8023-RRX+T&R
