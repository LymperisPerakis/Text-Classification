Freescale Semiconductor                                                                                    Document Number: MC33689
Technical Data                                                                                                             Rev. 8.0, 9/2012
  System Basis Chip with LIN
  Transceiver                                                                                               33689D
     The 33689 is a serial peripheral interface (SPI) controlled system
  basis chip (SBC) that combines many frequently used functions in an
  MCU-based system plus a local interconnect network (LIN)
  transceiver. Applications include power window, mirror, and seat                               SYSTEM BASIS CHIP WITH LIN
  controls. The 33689 has a 5.0 V, 50 mA low dropout regulator with full
  protection and reporting features. The device provides full SPI-
  readable diagnostics and a selectable timing watchdog for detecting
  errant operation.
     The LIN transceiver waveshaping circuitry can be disabled for
  higher data rates. One 50 mA and two 150 mA high side switches with
  output protection are available to drive inductive or resistive loads. The
  150 mA switches can be pulse-width modulated (PWM).
     Two high voltage inputs are available for contact monitoring or as
  external wake-up inputs. A current sense operational amplifier is                                       EW SUFFIX (PB-FREE)
  available for load current monitoring.                                                                      98ARH99137A
     The 33689 has three operational modes:                                                                   32-PIN SOICW
  • Normal (all functions available)
  • Sleep (VDD OFF, wake-up via LIN bus or wake-up inputs)
  • Stop (VDD ON, wake-up via MCU, LIN bus, or wake-up inputs)                                      ORDERING INFORMATION
  Features                                                                                     Device
                                                                                                                 Temperature
                                                                                      (Add R2 Suffix for Tape                     Package
  •  Full-duplex SPI Interface at frequencies up to 4.0 MHz                                                       Range (TA)
                                                                                             and Reel)
  •  LIN transceiver capable to 100 kbps with waveshaping capability
  •  5.0 V low dropout regulator with full fault detection and protection              MC33689DPEW             -40 °C to 125 °C  32 SOICW
  •  One 50 mA and two 150 mA protected high side switches
  •  Current sense operational amplifier
  •  Compatible with LIN 2.0 specification package
                                                            VDD VPWR
                                                                                 33689
                                                                         VS1              HS3
                                                                         VS2
                                                      5.0 V              VCC                L1
                                                                         VDD                L2
                                                                         WDC
                                                                                          HS1
                                                        CS               CS
                                                                                          HS2
                                              MCU SCK            SPI     SCLK
                                                      MOSI               MOSI
                                                      MISO               MISO               E+
                                                                         INT                E-
                                                                         RST              GND
                                                                         IN              TGND
                                                                         OUT
                                                                                         AGND
                                                                         TXD                            BUS
                                                                                           LIN
                                                                         RXD
                                             Figure 1. 33689 Simplified Application Diagram
Freescale Semiconductor, Inc. reserves the right to change the detail specifications,
as may be required, to permit improvements in the design of its products.
© Freescale Semiconductor, Inc., 2006-2012. All rights reserved.


INTERNAL BLOCK DIAGRAM
                                INTERNAL BLOCK DIAGRAM
                                                                 5.0 V/50 mA
                       VS1                    Voltage                                 VDD
                                             Regulator
                                                                    Reset
                                                                                      RST
                                                                    Control
                                                                   Window
                       VS2                                                            WDC
                                                                  Watchdog
                                                                                      IN
                       HS1
                                                                                      MOSI
                       HS2                                          SPI               MISO
                                                                    and
                                                                                      SCLK
                                                                   Mode
                                      Pre-Driver                                      CS
                                                                  Control
                       HS3
                                                                                      INT
                                                                                      VCC
                         L1
                                                                            Current   E-
                                                                             Sense
                         L2                                                 Op Amp    E+
                                            VS1                                       OUT
                                                                                      TXD
                        LIN               LIN Physical Interface
                                                                                      RXD
                                      GND           TGND           AGND
                            Figure 2. 33689 Simplified Internal Block Diagram
33689
                                                                                    Analog Integrated Circuit Device Data
2                                                                                               Freescale Semiconductor


                                                                                                                       PIN CONNECTIONS
                                                    PIN CONNECTIONS
                                          NC       1                              32          TXD
                                           L1      2                              31          RXD
                                          NC       3                              30          INT
                                           L2      4                              29          CS
                                         HS3       5                              28          MISO
                                         HS2       6                              27          MOSI
                                         HS1       7                              26          SCLK
                                       TGND        8                              25          TGND
                                       TGND        9                              24          TGND
                                         VS2       10                             23          IN
                                          LIN      11                             22          RST
                                        GND        12                             21          WDC
                                         VS1       13                             20          E+
                                          NC       14                             19          E-
                                        VDD        15                             18          OUT
                                       AGND        16                             17          VCC
                                            Figure 3. 33689 32-SOICW Pin Connections
Table 1. 33689 32-SOICW Pin Definitions
   A functional description of each pin can be found in the Functional Pin Description section beginning on page 19.
     Pin       Pin Name         Formal Name        Pin Function                                   Definition
   1, 3, 14       NC             No Connect             N/A       No internal connection to these pins.
     2, 4        L1, L2      Level Inputs 1 and 2      Input      Inputs from external switches or from logic circuitry.
     5–7       HS3 – HS1       High-Side Driver       Output      High-side (HS) drive power outputs. SPI-controlled for driving system
                             Outputs 3 through 1                  loads.
 8, 9, 24, 25    TGND          Thermal Ground           N/A       Thermal ground pins for the device.
      10          VS2         Voltage Supply 2         Input      Supply pin for the high-side switches HS1, HS2, and HS3.
      11          LIN              LIN Bus         Input / Output Bidirectional pin that represents the single-wire bus transmitter and
                                                                  receiver.
      12          GND               Ground              N/A       Electrical ground pin for the device.
      13          VS1         Voltage Supply 1         Input      Supply pin for the 5.0 V regulator, the LIN physical interface, and the
                                                                  internal logic.
      15          VDD          5.0 V Regulator        Output      Output of the 5.0 V regulator.
                                    Output
      16         AGND          Analog Ground            N/A       Analog ground pin for voltage regulator and current sense operational
                                                                  amplifier.
      17          VCC          Power Supply In         Input      5.0 V supply for the internal current sense operational amplifier.
      18          OUT          Amplifier Output       Output      Output of the internal current sense operational amplifier.
      19           E-         Amplifier Inverted       Input      Inverted input of the internal current sense operational amplifier.
                                     Input
      20           E+       Amplifier Non-Inverted     Input      Non-inverted input of the internal current sense operational amplifier.
                                     Input
      21          WDC             Watchdog           Reference    Configuration pin for the watchdog timer.
                                Configuration
                                 (Active Low)
                                                                                                                                        33689
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                                    3


PIN CONNECTIONS
Table 1. 33689 32-SOICW Pin Definitions (continued)
   A functional description of each pin can be found in the Functional Pin Description section beginning on page 19.
    Pin        Pin Name         Formal Name      Pin Function                                  Definition
     22           RST           Reset Output        Output     5.0 V regulator and watchdog reset output pin.
                                (Active LOW)
     23            IN        PWM Input Control       Input     External input PWM control pin for high-side switches HS1 and HS2.
     26          SCLK         Serial Data Clock      Input     Clock input for the SPI of the 33689.
     27          MOSI        Master Out Slave In     Input     SPI data received by the 33689.
     28          MISO        Master In Slave Out    Output     SPI data sent to the MCU by the 33689. When CS is HIGH, pin is in the
                                                               high-impedance state.
     29            CS            Chip Select         Input     SPI control chip select input pin.
                                (Active LOW)
     30           INT          Interrupt Output     Output     This output pin reports faults to the MCU when an enabled interrupt
                                (Active LOW)                   condition occurs.
     31           RXD          Receiver Output      Output     Receiver output of the LIN interface and reports the state of the bus
                                                               voltage.
     32           TXD         Transmitter Input      Input     Transmitter input of the LIN interface and controls the state of the bus
                                                               output.
33689
                                                                                               Analog Integrated Circuit Device Data
4                                                                                                           Freescale Semiconductor


                                                                                                    ELECTRICAL CHARACTERISTICS
                                                                                                                   MAXIMUM RATINGS
                                             ELECTRICAL CHARACTERISTICS
                                                        MAXIMUM RATINGS
Table 2. Maximum Ratings
   All voltages are with respect to ground unless otherwise noted. Exceeding these ratings may cause a malfunction or
permanent damage to the device.
                                      Ratings                                   Symbol                   Value               Unit
ELECTRICAL RATINGS
 VPWR Supply Voltage at VS1 and VS2                                                                                           V
                                                                                VSUPDC                - 0.3 to 27
    Continuous
    Transient (Load Dump)                                                       VSUPTR                      40
 Supply Voltage at VDD and VCC                                                    VDD                 - 0.3 to 5.5            V
 Output Current at VDD                                                             IDD           Internally Limited           A
 Logic Input Voltage at MOSI, SCLK, CS, IN, and TXD                              VINLOG           - 0.3 to VDD + 0.3          V
 Logic Output Voltage at MISO, INT, RST, and RXD                               VOUTLOG            - 0.3 to VDD + 0.3          V
 Input Voltage at E+ and E-                                                     VE+ / VE-             - 0.3 to 7.0            V
 Input Current at E+ and E-                                                      IE+ / IE-                 ± 20              mA
 Output Voltage at OUT                                                            VOUT           - 0.3 to VCC + 0.33          V
 Output Current at OUT                                                            IOUT                     ± 20              mA
 Input Voltage at L1 and L2                                                                                                   V
    DC Input with a 33 kΩ Resistor                                               VLXDC                 -18 to 40
    Transient Input with External Component (per ISO7637 Specification) (See     VLXTR
    Figure 4, page 6)                                                                                     ±100
 Input / Output Voltage at LIN                                                                                                V
    DC Voltage                                                                  VBUSDC                 -18 to 40
    Transient Input Voltage with specified External Component (per ISO7637
    Specification) (See Figure 4, page 6)                                       VBUSTR               -150 to 100
 DC Output Voltage at HS1 and HS2                                                                                             V
    Positive                                                                      VHS+                VVS2 + 0.3
    Negative                                                                      VHS-          Internally Clamped
 DC Output Voltage at HS3                                                         VHS3           - 0.3 to VVS2 + 0.3          V
 ESD Voltage, Human Body Model (1)                                               VESD1                                        V
    GND Configured as Ground. TGND and AGND Configured as I/O Pins
         LIN, L1, and L2
                                                                                                         ± 4000
         All Other Pins
                                                                                                         ± 2000
 ESD Voltage, Charge Device Model       (1)                                      VESD2                                        V
    Corner Pins (Pins 1, 16, 17, and 32)                                                                  ± 750
    All other Pins (Pins 2 – 15 and 18 – 31)                                                              ± 500
Notes
   1. ESD1 testing is performed in accordance with the Human Body Model (CZAP = 100 pF, RZAP = 1500 Ω), ESD2 testing is performed in
         accordance with the Charge Device Model, Robotic (CZAP = 4.0 pF).
                                                                                                                                  33689
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                              5


ELECTRICAL CHARACTERISTICS
MAXIMUM RATINGS
Table 2. Maximum Ratings(continued)
   All voltages are with respect to ground unless otherwise noted. Exceeding these ratings may cause a malfunction or
permanent damage to the device.
                                    Ratings                                       Symbol                  Value                Unit
THERMAL RATINGS
  Operating Temperature                                                                                                         °C
     Ambient                                                                          TA               - 40 to 125
     Junction                                                                         TJ               - 40 to 150
  Storage Temperature                                                               TSTG               - 55 to 165              °C
  Thermal Resistance, Junction-to-Ambient                                           RθJA                    80                °C/ W
  Peak Package Reflow Temperature During Solder Mounting (2)                      TSOLDER                  240                  °C
Notes
   2. Pin soldering temperature is for 10 seconds maximum duration. Not designed for immersion soldering. Exceeding these limits may
        cause permanent damage to the device.
                                           33689D
                                                                 1.0 nF        Transient Pulse
                                                                                  Generator
                                             LIN, L1, L2                            (Note)
                                                          10 kΩ
                                                                                     GND
                                   GND    TGND AGND
                                         Note Waveform per ISO 7637-1. Test Pulses 1, 2, 3a, and 3b.
                                      Figure 4. ISO 7637 Test Setup for LIN, L1, and L2 Pins
33689
                                                                                               Analog Integrated Circuit Device Data
6                                                                                                             Freescale Semiconductor


                                                                                                           ELECTRICAL CHARACTERISTICS
                                                                                                    STATIC ELECTRICAL CHARACTERISTICS
                                              STATIC ELECTRICAL CHARACTERISTICS
Table 3. Static Electrical Characteristics
   Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, - 40°C ≤ TA ≤ 125°C, GND = 0.0 V unless otherwise noted.
Typical values noted reflect the approximate parameter means at TA = 25°C under nominal conditions unless otherwise noted.
                               Characteristic                                     Symbol          Min          Typ         Max            Unit
VS1 AND VS2 INPUT PINS (DEVICE POWER SUPPLY)
 Supply Input Voltage                                                                                                                       V
    Nominal DC                                                                      VSUP           5.5          —            18
    Load Dump                                                                     VSUPLD           —            —            40
    Jump Start   (3)                                                              VSUPJS           —            —            27
 Supply Input Current (4)
                                                                                ISUP(NORM)
    Normal Mode, IOUT at VDD = 10 mA, LIN Recessive State                                          —           5.0          8.0           mA
                                                                                   ISLEEP                                                  μA
    Sleep Mode, VDD OFF, VSUP ≤ 13.5 V                                                             —            35           45
    Stop Mode, VDD ON with IOUT < 100 μA, VSUP ≤ 13.5 V                             ISTOP          —            60           75            μA
 Input Threshold Voltage (Normal Mode, Interrupt Generated)                                                                                 V
    Fall Early Warning, Bit VSUV Set                                              VSUVEW           5.7         6.1          6.6
    Overvoltage Warning, Bit VSOV Set                                             VSOVW            18         19.75        20.5
 Hysteresis (5)                                                                     VHYS
    VSUV Flag                                                                                      —           1.0           —              V
    VSOV Flag                                                                                      —           220           —            mV
VDD OUTPUT PIN (EXTERNAL 5.0 V OUTPUT FOR MCU USE) (6)
 Output Voltage                                                                   VDDOUT                                                    V
    IDD from 2.0 mA to 50 mA, 5.5 V < VSUP < 27 V                                                 4.75         5.0         5.25
 Dropout Voltage (7)                                                             VDDDROP                                                    V
    IDD = 50 mA                                                                                    —           0.1          0.2
 Output Current Limitation (8)                                                       IDD           50          120          200           mA
 Overtemperature Pre-warning (Junction)                                             TPRE                                                   °C
    Normal Mode, Interrupt Generated, Bit VDDT Set                                                120          135          160
 Thermal Shutdown (Junction)                                                         TSD                                                   °C
    Normal Mode                                                                                   165          170           —
Notes
   3. Device is fully functional. All features are operating. An overtemperature fault may occur.
   4. Total current (IVS1 + IVS2) at VS1 and VS2 pins is measured at the ground pins.
   5.   Parameter guaranteed by design; however, it is not production tested.
   6.   Specification with external capacitor 2.0 μF < C < 10 μF and 200 mΩ ≤ ESR ≤ 10 Ω. Normal mode. Low ESR electrolytic capacitor values
        up to 47 μF can be used.
   7.   Measured when the voltage has dropped 100 mV below its nominal value.
   8.   Internally limited. Total 5.0 V regulator current. A 5.0 mA current for the Current Sense Operational Amplifier operation is included.
        Digital outputs are supplied from VDD.
                                                                                                                                             33689
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                                         7


ELECTRICAL CHARACTERISTICS
STATIC ELECTRICAL CHARACTERISTICS
Table 3. Static Electrical Characteristics (continued)
    Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, - 40°C ≤ TA ≤ 125°C, GND = 0.0 V unless otherwise noted.
Typical values noted reflect the approximate parameter means at TA = 25°C under nominal conditions unless otherwise noted.
                              Characteristic                                  Symbol          Min          Typ         Max         Unit
VDD OUTPUT PIN (5.0 V OUTPUT FOR MCU USE) (CONTINUED)                 (9)
  Temperature Threshold Difference                                             TDIFF                                                 °C
     Normal Mode (TSD - TPRE)                                                                   20          30          40
  VSUP Range for Reset Active                                                 VSUPR                                                   V
     0.5 V < VDD < VDD (V RSTTH)                                                               4.0          —           —
  Line Regulation                                                              VLR1                                                 mV
     5.5 V < VSUP < 27 V, IDD = 10 mA                                                           —           20         150
  Load Regulation                                                              VLD1                                                 mV
     1.0 mA < IDD < 50 mA                                                                       —           10         150
VDD OUTPUT PIN IN STOP MODE
  Output Voltage (10)                                                          VDDS                                                   V
     IDD ≤ 2.0 mA                                                                             4.75         5.0         5.25
  Output Current Capability (11)                                                IDDS           4.0         8.0          14          mA
  Line Regulation                                                              VLRS                                                 mV
     5.5 V < VSUP < 27 V, IDD = 2.0 mA                                                          —           10         100
  Load Regulation                                                              VLDS                                                 mV
     1.0 mA < IDD < 5.0 mA                                                                      —           40         150
RST OUTPUT PIN IN NORMAL AND STOP MODES
  Reset Threshold Voltage                                                     V RSTTH          4.5         4.7      VDD - 0.2         V
  Low-Level Output Voltage                                                      VOL                                                   V
     IO = 1.5 mA, 4.5 V < VSUP < 27 V                                                          0.0          —           0.9
  High-Level Output Current                                                      IOH                                                 μA
     0.0 V < VOUT < 0.7 VDD                                                                     —         - 275         —
  Reset Pulldown Current                                                      IPDRST                                                mA
     Internally Limited, VDD < 4.0 V, VRST = 4.6 V                                             1.5          —           8.0
IN INPUT PIN
  Low-Level Input Voltage                                                        VIL          - 0.3         —        0.3 VDD          V
  High-Level Input Voltage                                                       VIH        0.7 VDD         —       VDD + 0.3         V
  Input Current                                                                   IIN                                                μA
     0.0 V < VIN < VDD                                                                         -10          —           10
Notes
    9. Specification with external capacitor 2.0 μF < C < 10 μF and 200 mΩ ≤ ESR ≤ 10 Ω. Normal mode. Low ESR electrolytic capacitor values
         up to 47 μF can be used.
   10. When switching from Normal mode to Stop mode or from Stop mode to Normal mode, the voltage can vary within the output voltage
         specification.
   11. When IDD is above IDDS, the 33689 enters the Reset mode.
33689
                                                                                                    Analog Integrated Circuit Device Data
8                                                                                                               Freescale Semiconductor


                                                                                                         ELECTRICAL CHARACTERISTICS
                                                                                                  STATIC ELECTRICAL CHARACTERISTICS
Table 3. Static Electrical Characteristics (continued)
   Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, - 40°C ≤ TA ≤ 125°C, GND = 0.0 V unless otherwise noted.
Typical values noted reflect the approximate parameter means at TA = 25°C under nominal conditions unless otherwise noted.
                              Characteristic                                Symbol             Min          Typ           Max        Unit
MISO SPI OUTPUT PIN
  Low-Level Output Voltage                                                     VOL                                                      V
      I OUT = 1.5 mA                                                                            0.0          —            1.0
  High-Level Output Voltage                                                   VOH                                                       V
      I OUT = 250 μA                                                                        VDD - 0.9        —            VDD
  Tri-Stated MISO Output Leakage Current                                        IHZ                                                    μA
      0.0 V < VMISO < VDD                                                                      - 2.0         —            2.0
MOSI, SCLK, CS SPI INPUT PINS
  Low-Level Input Voltage                                                       VIL            - 0.3         —          0.3 VDD         V
  High-Level Input Voltage                                                     VIH           0.7 VDD         —         VDD + 0.3        V
  Pullup Input Current on CS                                                 IPUCS                                                     μA
      VCS = 4.0 V                                                                             -100           —            - 20
  MOSI, SCLK Input Current                                                       IIN                                                   μA
      0.0 V < VIN < VDD                                                                         -10          —             10
 INT OUTPUT PIN
  Low-Level Output Voltage                                                     VOL                                                      V
      IO = 1.5 mA                                                                               0.0          —            0.9
  High-Level Output Voltage                                                   VOH                                                       V
      IO = - 250 μA                                                                         VDD - 0.9        —            VDD
WDC PIN
  External Resistor Range                                                     R EXT              10          —            100          kΩ
HS1 AND HS2 HIGH-SIDE OUTPUT PINS
  Output Clamp Voltage                                                         VCL                                                      V
      I OUT = -100 mA                                                                          - 6.0         —             —
  Output Drain-to-Source ON Resistance                                      RDS(ON)                                                     Ω
      TA = 25°C, I OUT -150 mA                                                                   —           2.0          2.5
      TA = 125°C, I OUT -150 mA                                                                  —           —            4.5
      TA = 125°C, I OUT -120 mA                                                                  —           3.0          4.0
  Output Current Limitation                                                    ILIM            300          430           600          mA
  Overtemperature Shutdown    (12)                                           TOTSD             155           —            190          °C
  Output Leakage Current                                                     ILEAK               —           —             10          μA
Notes
  12. When overtemperature occurs, switch is turned off and latched off. Flag is set in SPI Register. Refer to description on page 26.
                                                                                                                                         33689
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                                     9


ELECTRICAL CHARACTERISTICS
STATIC ELECTRICAL CHARACTERISTICS
Table 3. Static Electrical Characteristics (continued)
   Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, - 40°C ≤ TA ≤ 125°C, GND = 0.0 V unless otherwise noted.
Typical values noted reflect the approximate parameter means at TA = 25°C under nominal conditions unless otherwise noted.
                              Characteristic                                Symbol            Min           Typ          Max         Unit
HS3 HIGH-SIDE OUTPUT PIN
 Output Drain-to-Source ON Resistance                                       RDS(ON)                                                    Ω
    TA = 25°C, I OUT - 50 mA                                                                    —            5.5          7.0
    TA = 125°C, I OUT - 50 mA                                                                   —            —             10
    TA = 125°C, I OUT - 30 mA                                                                   —            10            14
 Output Current Limitation                                                     ILIM             60          100           200          mA
 Overtemperature Shutdown (13)                                               TOTSD            155            —            190          °C
 Output Leakage Current                                                      ILEAK              —            —             10          μA
OUT, E+, AND E- PINS AT CURRENT SENSE OPERATIONAL AMPLIFIER
 Input Voltage – Rail-to-Rail at E+ and E-                                    VIMC            - 0.1          —         VCC + 0.1        V
 Output Voltage Range at OUT                                                  VOUT                                                      V
    With ± 1.0 mA Output Load Current                                                          0.1           —         VCC - 0.1
    With ± 5.0 mA Output Load Current                                                          0.3           —         VCC - 0.3
 Input Bias Current                                                             IB              —            —            250          nA
 Input Offset Voltage                                                          V IO            -15           —             15          mV
 Input Offset Current                                                           IO            -100           —            100          nA
L1 AND L2 INPUT PINS
 Low-Voltage Detection Input Threshold Voltage                                VTHL                                                      V
    5.5 V < VSUP < 6.0 V                                                                       2.0           2.5          3.0
    6.0 V < VSUP < 18 V                                                                        2.5           3.0          3.5
    18 V < VSUP < 27 V                                                                         2.7           3.2          3.7
 High-Voltage Detection Input Threshold Voltage                              VTHH                                                       V
    5.5 V < VSUP < 6.0 V                                                                       2.7           3.3          3.8
    6.0 V < VSUP < 18 V                                                                        3.0           4.0          4.5
    18 V < VSUP < 27 V                                                                         3.5           4.2          4.7
 Input Hysteresis                                                            VHYS                                                       V
    5.5 V < VSUP < 27 V                                                                        0.5           —            1.3
 Input Current                                                                  IIN                                                    μA
    - 0.2 V < VIN < 40 V                                                                       -10           —             10
Notes
  13. When overtemperature occurs, switch is turned off and latched off. Flag is set in SPI Register. Refer to description on page 26.
33689
                                                                                                    Analog Integrated Circuit Device Data
10                                                                                                               Freescale Semiconductor


                                                                                             ELECTRICAL CHARACTERISTICS
                                                                                      STATIC ELECTRICAL CHARACTERISTICS
Table 3. Static Electrical Characteristics (continued)
   Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, - 40°C ≤ TA ≤ 125°C, GND = 0.0 V unless otherwise noted.
Typical values noted reflect the approximate parameter means at TA = 25°C under nominal conditions unless otherwise noted.
                            Characteristic                            Symbol        Min        Typ        Max       Unit
RXD OUTPUT PIN (LIN PHYSICAL LAYER)
 Low-Level Output Voltage                                                VOL                                          V
    I OUT ≤ 1.5 mA                                                                   0.0        —          0.9
 High-Level Output Voltage                                               VOH                                          V
    I OUT ≤ 250 μA                                                                  3.75        —         5.25
TXD INPUT PIN (LIN PHYSICAL LAYER)
 Low-Level Input Voltage                                                  VIL        —          —          1.5        V
 High-Level Input Voltage                                                 VIH        3.5        —          —          V
 Input Hysteresis                                                     VINHYS         50        145        300       mV
 Pullup Current Source                                                 IPUTXD                                        μA
    1.0 V < VTXD < 3.5 V                                                            -100        —         - 20
LIN PHYSICAL LAYER, TRANSCEIVER
  Transceiver Output Voltage                                                                                          V
    Dominant State, TXD LOW, External Bus Pullup 500 Ω               VLINDOM         —          —          1.4
    Recessive State, TXD HIGH, I OUT = 1.0 μA                         VLINREC    VSUP -1.0      —          —
 Pullup Resistor to VSUP                                                 RPU                                         kΩ
    In Normal Mode and in Sleep and Stop Modes When Not Disabled by
    SPI                                                                              20         30         47
 Pullup Current Source                                                  IPULIN                                       μA
    In Sleep and Stop Modes When Pullup Disabled by SPI                              —         1.3         —
 Output Current Shutdown Threshold                                    IOUTSD         50         75        150       mA
 Leakage Output Current to GND                                       IBUSLEAK
    VS1 and VS2 Disconnected, VLIN = 18 V                                            —         1.0         10        μA
    Recessive State, 8.0 V < VSUP < 18 V, 8.0 V < VLIN < 18 V                        0.0       3.0         20        μA
    GND Disconnected, VGND = VSUP , VLIN = -18 V                                    -1.0        —          1.0      mA
LIN PHYSICAL LAYER, RECEIVER
 Receiver Input Threshold Voltage                                                                                  VSUP
    Dominant State, TXD HIGH, RXD LOW                                VBUSDOM         0.0        —          0.4
    Recessive State, TXD HIGH, RXD HIGH                              VBUSREC         0.6        —          1.0
    Center (VBUSDOM - VBUSREC) / 2                                   VBUSCNT       0.475       0.5       0.525
    Hysteresis (VBUSDOM - VBUSREC)                                   VBUSHYS         —          —        0.175
  Bus Wake-Up Threshold                                               VBUSWU         —         0.5         —       VSUP
                                                                                                                       33689
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                  11


ELECTRICAL CHARACTERISTICS
DYNAMIC ELECTRICAL CHARACTERISTICS
                                        DYNAMIC ELECTRICAL CHARACTERISTICS
Table 4. Dynamic Electrical Characteristics
   Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, - 40°C ≤ TA ≤ 125°C, GND = 0.0 V unless otherwise noted.
Typical values noted reflect the approximate parameter means at TA = 25°C under nominal conditions unless otherwise noted.
                               Characteristic                                  Symbol         Min       Typ        Max        Unit
SPI INTERFACE CHARACTERISTICS
 SPI Operation Frequency                                                             fSPI    0.25        —          4.0       MHz
 SCLK Clock Period                                                               t PSCLK      250        —          N/A        ns
 SCLK Clock High Time                                                         t WSCLKH        125        —          N/A        ns
 SCLK Clock Low Time                                                           t WSCLKL       125        —          N/A        ns
 Falling Edge of CS to Rising Edge of SCLK                                        t LEAD      100        —          N/A        ns
 Falling Edge of SCLK to CS Rising Edge                                             t LAG     100        —          N/A        ns
 MOSI to Falling Edge of SCLK (Data Setup Time)                                  t SI (SU)     40        —          N/A        ns
 Falling Edge of SCLK to MOSI (Data Hold Time)                                t SI (HOLD)      40        —          N/A        ns
 MISO Rise Time (14)                                                               t RSO                                       ns
    CL = 220 pF                                                                                —         25          50
 MISO Fall Time (14)                                                                t FSO                                      ns
    CL = 220 pF                                                                                —         25          50
 Time from Falling or Rising Edge of CS to: (14)                                                                               ns
    MISO Low Impedance (Enable)                                                 t SO (EN)     0.0        —           50
    MISO High Impedance (Disable)                                              t SO (DIS)     0.0        —           50
 Time from Rising Edge of SCLK to MISO Data Valid (14)                            t VALID                                      ns
    0.2 VDD ≤ MISO ≥ 0.8 VDD, CL = 100 pF                                                     0.0        —           50
RST OUTPUT PIN IN NORMAL AND STOP MODES
 Reset Duration After VDD HIGH                                                t DURRST       0.65        1.0       1.35        ms
WDC PIN
 Watchdog Period Accuracy Using an External Resistor (Excluding Resistor      ACC WDC         -15        —           15        %
 Tolerances) (15)
 Watchdog Time Period (15)                                                         t WDC                                       ms
    10 kΩ External Resistor                                                                    —       10.558        —
    100 kΩ External Resistor                                                                   —       99.748        —
    No External Resistor, WDC Open, Normal Mode                                               107       160         215
Notes
 14. Parameter guaranteed by design; however, it is not production tested.
 15. Watchdog time period calculation formula: t WDC = 0.991 * R + 0.648 (R in kΩ and t WDC in ms).
33689
                                                                                                Analog Integrated Circuit Device Data
12                                                                                                           Freescale Semiconductor


                                                                                                            ELECTRICAL CHARACTERISTICS
                                                                                                 DYNAMIC ELECTRICAL CHARACTERISTICS
Table 4. Dynamic Electrical Characteristics (continued)
   Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, - 40°C ≤ TA ≤ 125°C, GND = 0.0 V unless otherwise noted.
Typical values noted reflect the approximate parameter means at TA = 25°C under nominal conditions unless otherwise noted.
                                 Characteristic                                        Symbol      Min          Typ          Max          Unit
CURRENT SENSE OPERATIONAL AMPLIFIER
 Supply Voltage Rejection Ratio (16)                                                      SVR       60           —             —           dB
 Common Mode Rejection Ratio (16)                                                         CMR       70           —             —           dB
 Gain Bandwidth (16)                                                                      GBP       1.0          —             —          MHz
 Output Slew Rate                                                                           SR      0.5          —             —          V/μs
 Phase Margin                                                                           PHMO        40           —             —          deg.
 Open Loop Gain    (16)                                                                   OLG       —            85            —           dB
L1 AND L2 INPUT PINS
 Wake-Up Filter Time (16)                                                                 t WUF     8.0          20            38          μs
STATE MACHINE TIMING
 Delay Between CS LOW-to-HIGH Transition (at End of SPI Stop Command)                    t STOP                                            μs
 and Stop Mode Activation (16)
                                                                                                    1.4          —            5.0
    Minimum Watchdog Period
    No Watchdog Selected                                                                            6.0          —             30
    Maximum Watchdog Period                                                                         12           —             50
 Interrupt Low-Level Duration                                                              t INT    7.0          10            13          μs
 Internal Oscillator Frequency Accuracy (All Modes, for Information Only)                 fOSC     - 35          —             35          %
 Normal Request Mode Time-Out (Normal Request Mode)                                   t NRTOUT      97          150           205          ms
 Delay Between SPI Command and HS1 or HS2 Turn On (17), (18)                           t SHSON                                             μs
    Normal Mode, VSUP > 9.0 V, VHS ≥ 0.2 VVS2                                                       —            —             20
 Delay Between SPI Command and HS1 or HS2 Turn Off (17), (18)                         t SHSOFF                                             μs
    Normal Mode, VSUP > 9.0 V, VHS ≤ 0.8 VVS2                                                       —            —             20
 Delay Between SPI Command and HS3 Turn On (17), (19)                                  tSHSON                                              μs
    Normal Mode, VSUP > 9.0 V, VHS ≥ 0.2 VVS2                                                       —            —             20
 Delay Between SPI Command and HS3 Turn Off (17), (19)                                tSHSOFF                                              μs
    Normal Mode, VSUP > 9.0 V, VHS ≤ 0.8 VVS2                                                       —            —             20
 Delay Between Normal Request and Normal Mode After a Watchdog Trigger                 t SNR2N      7.0          15            30          μs
 Command (Normal Request Mode) (16)
 Delay Between CS Wake-Up (CS LOW to HIGH) in Stop Mode and:                                                                               μs
    Normal Request Mode, VDD ON and RST HIGH                                            t WUCS      15           40            80
    First Accepted SPI Command                                                          t WUSPI     90           —            N/A
 Delay Between Interrupt Pulse in Stop Mode After Wake-Up and First                   t S1STSPI     30           —            N/A          μs
 Accepted SPI Command
 Minimum Time Between Rising and Falling Edge on the CS                                   t 2CS     15           —             —           μs
Notes
  16. Parameter guaranteed by design; however, it is not production tested.
  17. When IN input is set to HIGH, delay starts at falling edge of clock cycle #8 of the SPI command and start of device activation/deactivation.
        30 mA load on high-side switches. Excluding rise or fall time due to external load.
  18. When IN is used to control the high-side switches, delays are measured between IN and HS1 or HS2 ON / OFF. 30 mA load on high-side
        switches, excluding rise or fall time due to external load.
  19. Delay between turn on or turn off command and HS ON or HS OFF, excluding rise or fall time due to external load.
                                                                                                                                             33689
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                                         13


ELECTRICAL CHARACTERISTICS
DYNAMIC ELECTRICAL CHARACTERISTICS
Table 4. Dynamic Electrical Characteristics (continued)
   Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, - 40°C ≤ TA ≤ 125°C, GND = 0.0 V unless otherwise noted.
Typical values noted reflect the approximate parameter means at TA = 25°C under nominal conditions unless otherwise noted.
                              Characteristic                                  Symbol          Min         Typ         Max         Unit
LIN PHYSICAL LAYER: BUS DRIVER TIMING CHARACTERISTICS FOR NORMAL SLEW RATE                         (20)
 Propagation Delay TXD to LIN (21)                                                                                                 μs
    Dominant State Minimum Threshold (50% TXD to 58.1% VSUP)
                                                                             t DOMMIN           —          —           50
    Dominant State Maximum Threshold (50% TXD to 28.4% VSUP)                 t DOMMAX           —          —           50
    Recessive State Minimum Threshold (50% TXD to 42.2% VSUP)                 t RECMIN          —          —           50
    Recessive State Maximum Threshold (50% TXD to 74.4% VSUP)                t RECMAX           —          —           50
 Propagation Delay Symmetry                                                                                                        μs
    t DOMMIN - t RECMAX                                                          dt1s        -10.44        —           —
    t DOMMAX - t RECMIN                                                          dt2s           —          —           11
                                                                                               (20)
LIN PHYSICAL LAYER: BUS DRIVER TIMING CHARACTERISTICS FOR SLOW SLEW RATE
 Propagation Delay TXD to LIN (22)                                                                                                 μs
    Dominant State Minimum Threshold (50% TXD to 61.6% VSUP)
                                                                             t DOMMIN           —          —          100
    Dominant State Maximum Threshold (50% TXD to 25.1% VSUP)                 t DOMMAX           —          —          100
    Recessive State Minimum Threshold (50% TXD to 38.9% VSUP)                 t RECMIN          —          —          100
    Recessive State Maximum Threshold (50% TXD to 77.8% VSUP)                t RECMAX           —          —          100
 Propagation Delay Symmetry                                                                                                        μs
    t DOMMIN - t RECMAX                                                          dt1s          - 22        —           —
    t DOMMAX - t RECMIN                                                          dt2s           —          —           23
LIN PHYSICAL LAYER: BUS DRIVER FAST SLEW RATE
 LIN High Slew Rate (Programming Mode)                                       dv/dt Fast         —          13          —          V/μs
LIN PHYSICAL LAYER, TRANSCEIVER
 Output Current Shutdown Delay (23)                                           t OUTDLY          —          10          —           μs
Notes
 20. 7.0 V < VSUP < 18 V, bus load C0 and R0 1.0 nF/1.0 kΩ, 6.8 nF / 660 Ω, 10 nF / 500 Ω. 50% of TXD signal to LIN signal threshold. See
        Figure 5, page 16.
 21. See Figure 7, page 17.
 22. See Figure 8, page 17.
 23. Parameter guaranteed by design; however, it is not production tested.
33689
                                                                                                  Analog Integrated Circuit Device Data
14                                                                                                            Freescale Semiconductor


                                                                                                              ELECTRICAL CHARACTERISTICS
                                                                                                  DYNAMIC ELECTRICAL CHARACTERISTICS
Table 4. Dynamic Electrical Characteristics (continued)
  Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, - 40°C ≤ TA ≤ 125°C, GND = 0.0 V unless otherwise noted.
Typical values noted reflect the approximate parameter means at TA = 25°C under nominal conditions unless otherwise noted.
                                  Characteristic                                        Symbol        Min         Typ        Max        Unit
LIN PHYSICAL LAYER: RECEIVER CHARACTERISTICS AND WAKE-UP TIMINGS
 Propagation Delay LIN to RXD (24)                                                                                                       μs
    Dominant State (LIN LOW to RXD LOW)
                                                                                         t RDOM         —         3.0        6.0
    Recessive State (LIN HIGH to RXD HIGH)                                               t RREC         —         3.0        6.0
    Symmetry (t RDOM - t RREC)                                                           t RSYM       - 2.0        —         2.0
 Bus Wake-Up Deglitcher (Sleep and Stop Modes) (25)                                    t PROPWL        30          70         90         μs
 Bus Wake-Up Event Reported                                                                                                              μs
    From Sleep Mode     (26)                                                               t WU         —          30         —
    From Stop Mode (27)                                                                    t WU         —          20         —
Notes
 24. Measured between LIN signal threshold VINL or VINH and 50% of RXD signal.
 25. See Figures 9 and 10, page 18.
 26. t WU is typically 2 internal clock cycles after a LIN rising edge is detected. In Sleep Mode, the measurement is done without a capacitor
       connected to the regulator. The delay is measured between the VSUP/2 rising edge of the LIN bus and when VDD reaches 3.0 V. The
       VDD rise time is strongly dependent upon the decoupling capacitor at VDD pin. See Figure 9, page 18.
 27.   t WU is typically 2 internal clock cycles after a LIN rising edge is detected. In Stop Mode, the delay is measured between the VSUP/2
       rising edge of the LIN bus and the falling edge of the INT pin. See Figure 10, page 18.
                                                                                                                                          33689
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                                      15


ELECTRICAL CHARACTERISTICS
TIMING DIAGRAMS
                                                              TIMING DIAGRAMS
                                                             VPWR
                                                   33689
                                                           VS1/VS2
                                          TXD                                    R0/C0 Combinations:
                                                                         R0         1.0 kΩ/1.0 nF
                                          RXD                                       660 Ω/6.8 nF
                                                                 LIN                500 Ω/10 nF
                                          GND       TGND AGND            C0
                                            Figure 5. Test Circuit for Timing Measurements
                                               t PSCLK
      CS
                                    t WSCLKH
                   t LEAD
                                                                                                          t LAG
      SCLK
                                                              t WSCLKL
                                         t SI(SU)     t SI(HOLD)
      MOSI          Undefined                     DI 0                 Don’t Care                   DI 7             Don’t Care
                            t VALID
                                                                                                                  t SO(DIS)
                      t SO(EN)
      MISO
                                                    DO 0                                             DO 7
      Note Incoming data at MOSI pin is sampled by the 33689 at SCLK falling edge. Outgoing data at MISO is set by the 33689
      at SCLK rising edge (after tVALID delay time).
                                                    Figure 6. SPI Timing Characteristics
33689
                                                                                                Analog Integrated Circuit Device Data
16                                                                                                            Freescale Semiconductor


                                                                                               ELECTRICAL CHARACTERISTICS
                                                                                                           TIMING DIAGRAMS
                       TXD
             Recessive State
              VLINREC                                                           t RECMAX
                                                                                                   74.4% VSUP
                                              58.1% VSUP
                  t DOMMIN
                                                  40% VSUP                                 60% VSUP
                       LIN
                                                                                         42.2% VSUP
                                                    28.4% VSUP
                                t DOMMAX                Dominant State
                                                                          t RECMIN
                       RXD
                                          t RDOM                                        tRREC
                             Figure 7. Timing Characteristics for Normal LIN Output Slew Rate
                      TXD
             Recessive State
             VLINREC                                                                tRECMAX
                                                                                                      77.8% VSUP
                                               61.6% VSUP
                  t DOMMIN
                                                   40% VSUP                                   60% VSUP
                      LIN
                                                                                             38.9% VSUP
                                                     25.1% VSUP
                                t DOMMAX                  Dominant State
                                                                             tRECMIN
                      RXD
                                           t RDOM                                          t RREC
                              Figure 8. Timing Characteristics for Slow LIN Output Slew Rate
                                                                                                                       33689
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                  17


ELECTRICAL CHARACTERISTICS
TIMING DIAGRAMS
    Recessive State                                  Recessive State
 VLINREC                                          VLINREC
         LIN                                              LIN
               0.4 VSUP                                         0.4 VSUP
                     Dominant Level                                  Dominant State
        VDD                                              INT
                    t PROPWL         t WU                            t PROPWL              t WU
   Figure 9. LIN Bus Wake-Up Behavior, Sleep Mode  Figure 10. LIN Bus Wake-Up Behavior, Stop Mode
33689
                                                                     Analog Integrated Circuit Device Data
18                                                                               Freescale Semiconductor


                                                                                                      FUNCTIONAL DESCRIPTION
                                                                                                                 INTRODUCTION
                                              FUNCTIONAL DESCRIPTION
                                                          INTRODUCTION
   A System Basis Chip (SBC) is a monolithic IC combining             The LIN transceiver has waveshaping that can be disabled
many functions found in standard microcontroller-based            when high data rates are warranted. A single 50 mA and two
systems; e.g., power management, communication interface,         150 mA fully protected high-side switches with output
system protection, and diagnostics.                               clamping are available for switching inductive or resistive
   The 33689 is a SPI-controlled SBC combining many               loads. The 150 mA switches are PWM capable.
functions with a LIN transceiver for slave node applications.         Two high-voltage inputs can be used to monitor switches
The 33689 has a 5.0 V, 50 mA regulator with undervoltage          or provide external wake-up. An internal current sense
reset, output current limiting, overtemperature pre-warning,      operational amplifier is available for load current monitoring.
and thermal shutdown. An externally selectable timing
Window Watchdog is also included.
                                               FUNCTIONAL PIN DESCRIPTION
LEVEL 1 AND LEVEL 2 INPUT PINS                                    battery. The 33689 can operate from 4.5 V and under the
(L1 AND L2)                                                       jump start condition at 27 V DC. Device functionality is
   These pins are used to sense external switches and to          guaranteed down to 4.5 V at VS1 and VS2 pins. These pins
wake up the 33689 from Sleep or Stop mode. During Normal          sustain standard automotive voltage conditions such as load
mode, the state of these pins can be read through the SPI         dump at 40 V.
Register. (Refer to the section entitled SPI Interface and
Register Description on page 24 for information on the SPI        LIN BUS PIN (LIN)
Register.)                                                            The LIN pin represents the single-wire bus transmitter and
                                                                  receiver. It is suited for automotive bus systems and is based
HIGH-SIDE DRIVER OUTPUT PINS 1 AND 2 (HS1                         on the LIN bus specification.
AND HS2)
   These two high-side switches are able to drive loads such      VOLTAGE SOURCE PIN (VDD)
as relays or lamps. They are protected against overcurrent            The VDD pin is the 5.0 V supply pin for the MCU and the
and overtemperature and include internal clamp circuitry for      current sense operational amplifier.
inductive load protection. Switch control is done through
selecting the correct bit in the SPI Register. HS1 and HS2        CURRENT SENSE OPERATIONAL AMPLIFIER
can be PWM-ed if required through the IN input pin. The           PINS (E+, E- , VCC, AND OUT)
internal circuitry that drives both high-side switches is an
AND function between the SPI bit HS1 (or HS2) and the IN              These are the pins of the single-supply current sense
input pin.                                                        operational amplifier.
   If no PWM control is required, the IN pin must be              • The E+ and the E- input pins are the non-inverting and
connected to the VDD pin.                                             inverting inputs of the current sense operational amplifier,
                                                                      respectively.
HIGH-SIDE DRIVER OUTPUT PIN 3 (HS3)                               • The OUT pin is the output pin of the current sense
                                                                      operational amplifier.
   This high-side switch can be used to drive small lamps,
                                                                  • The VCC pin is the + 5.0 V single-supply connection for the
Hall sensors, or switch pullup resistors. Control is done
                                                                      current sense operational amplifier.
through the SPI Register only.
                                                                      The current sense operational amplifier is enabled in
   No direct PWM control is possible on this pin.
                                                                  Normal mode only.
   This high-side switch features current limit to protect it
against overcurrent and short circuit conditions. It is also
                                                                  WATCHDOG CONFIGURATION PIN (WDC)
protected against overtemperature.
                                                                      The WDC pin is the configuration pin for the internal
                                                                  watchdog. A resistor is connected to this pin. The resistor
VOLTAGE SUPPLY PINS 1 AND 2
                                                                  value defines the watchdog period. If the pin is left open, the
(VS1 AND VS2)
                                                                  watchdog period is fixed to its default value (150 ms typical).
   The 33689 is supplied from a battery line or other supply      If no watchdog function is required, the WDC pin must be
source through the VS1 and VS2 pins. An external diode is         connected to GND.
required to protect against negative transients and reverse
                                                                                                                            33689
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                        19


 FUNCTIONAL DESCRIPTION
 FUNCTIONAL PIN DESCRIPTION
RESET OUTPUT PIN (RST)                                           •  Voltage regulator temperature pre-warning
   The RST pin is the 5.0 V regulator and Watchdog reset         •  HS1, HS2, or HS3 thermal shutdown
output pin.                                                      •  VS1 or VS2 overvoltage (20 V typical)
                                                                 •  VS1 or VS2 undervoltage (6.0 V typical)
PWM INPUT CONTROL PIN (IN)                                          If an interrupt is generated, then when the next SPI read
   The IN pin is the external PWM control pin for the HS1 and    operation is performed bit D7 in the SPI Register will be set
HS2 high-side switches.                                          to logic [1] and bits D6 : D0 will report the interrupt source.
                                                                    In cases of wake-up from the Stop mode, INT is set LOW
SERIAL DATA CLOCK PIN (SCLK)                                     in order to signal to the MCU that a wake-up event from the
                                                                 L1, L2, or LIN bus pin has occurred.
   The SCLK pin is the SPI clock input pin. MISO data
changes on the negative transition of the SCLK. MOSI is
sampled on the positive edge of the SCLK.                        RECEIVER OUTPUT PIN (RXD)
                                                                    The RXD pin is the receiver output of the LIN interface and
MASTER OUT SLAVE IN PIN (MOSI)                                   reports the state of the bus voltage (RXD LOW when LIN bus
   The MOSI pin receives SPI data from the MCU. This data        is dominant, RXD HIGH when LIN bus is recessive).
input is sampled on the positive edge of SCLK.
                                                                 TRANSMITTER INPUT PIN (TXD)
MASTER IN SLAVE OUT PIN (MISO)                                      The TXD pin is the transmitter input of the LIN interface
                                                                 and controls the state of the bus output (dominant when TXD
   The MISO pin sends data to an SPI-enabled MCU. Data
                                                                 is LOW, recessive when TXD is HIGH).
on this output pin changes on the negative edge of the SCLK.
When CS is HIGH, this pin enters the high-impedance state.
                                                                 GROUND PINS (GND, TGND, AND AGND)
CHIP SELECT PIN (CS)                                                The 33689 has three different types of ground pins.
   The CS pin is the chip select input pin for SPI use. When     • The GND pin is the electrical ground pin for the device.
this signal is high, SPI signals are ignored. Asserting this pin • The AGND is the analog ground pin for the voltage
LOW starts an SPI transaction. The transaction is completed         regulator and current sense operational amplifier.
when this signal returns HIGH.                                   • The four TGND pins are the thermal ground pins for the
                                                                    device.
INTERRUPT OUTPUT PIN (INT)                                          Important The GND, the AGND, and the four TGND pins
   The INT pin is used to report 33689 faults to the MCU.        must be connected together to a ground external to the
Interrupt pulses are generated for:                              33689.
33689
                                                                                          Analog Integrated Circuit Device Data
20                                                                                                      Freescale Semiconductor


                                                                                                     FUNCTIONAL DESCRIPTION
                                                                                  FUNCTIONAL INTERNAL BLOCK DESCRIPTION
                                      FUNCTIONAL INTERNAL BLOCK DESCRIPTION
WINDOW WATCHDOG                                                 the device. The output of the regulator is also connected to
                                                                the VDD pin to provide the 5.0 V to the microcontroller.
    The window watchdog can be configured using an external
resistor at WDC pin. The watchdog is cleared through            Current Limit (Overcurrent) Protection
MODE1 and MODE2 bit in the SPI Register (refer to Table 2,
page 24; also refer to the section entitled Functional Pin         The voltage regulator has current limit to protect the device
Description on page 19.                                         against overcurrent and short circuit conditions.
    A watchdog clear is only allowed in the open window (see
                                                                Overtemperature Protection
Figure 1). If the watchdog is cleared in the closed window or
has not been cleared at the end of the open window, the            The voltage regulator also features overtemperature
watchdog will generate a reset on the RST pin and reset the     protection that has an overtemperature warning (Interrupt -
whole device.                                                   VDDT) and an overtemperature shutdown.
    Note The watchdog clear in Normal request mode
(150 ms) (first watchdog clear) has no window.                  Stop Mode
                                                                   During Stop mode, the Stop mode regulator supplies a
            Window Closed.              Window Open             regulated output voltage. The Stop mode regulator has a
        No Watchdog Clear Allowed    for Watchdog Clear         limited output current capability.
                                                                Sleep Mode
              t WDC * 50%              t WDC * 50%
                                                                   In Sleep mode, the voltage regulator external VDD is
                          Watchdog Period                       turned off.
                               t WDC
                                                                VDD VOLTAGE REGULATOR TEMPERATURE
                                                                PREWARNING
            Figure 1. Window Watchdog Operation                    VDD voltage regulator temperature prewarning (VDDT) is
                                                                generated if the voltage regulator temperature is above the
Window Watchdog Configuration                                   TPRE threshold. It will set the VDDT bit in the SPI Register
    If the WDC pin is left open, the default watchdog period is and an interrupt will be initiated. The VDDT bit remains set as
selected (typ. 150 ms). If no watchdog function is required,    long as the error condition is present.
the WDC pin must be connected to GND.                              During Sleep and Stop modes the VDD voltage regulator
    The watchdog timer’s period is calculated using the         temperature prewarning circuitry is disabled.
following formula:
    t WDC = 0.991 * R +0.648 (with R in kΩ and t WDC in ms).    HIGH-SIDE SWITCH THERMAL SHUTDOWN
                                                                   The high-side switch thermal shutdown HSST is
VDD VOLTAGE REGULATOR                                           generated if one of the high-side switches HS1 : HS3 is above
    The 33689 chip contains a low-power, low dropout voltage    the HSST threshold. It will shutdown all high-side switches
regulator to provide internal power and external power for the  and set the HSST flag in the SPI Register, and an interrupt
MCU. The on-chip regulator consist of two elements, the         will be initiated. The HSST bit remains set as long as the error
main voltage regulator and the low-voltage reset circuit.       condition is present. During Sleep and Stop modes the high-
                                                                side switch thermal shutdown circuitry is disabled.
    The VDD regulator accepts an unregulated input supply
and provides a regulated VDD supply to all digital sections of
                                                                                                                            33689
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                      21


FUNCTIONAL DESCRIPTION
FUNCTIONAL DEVICE OPERATION
                                                     FUNCTIONAL DEVICE OPERATION
                                                           OPERATIONAL MODES
   As described below and depicted in Figure 1 below and                     RESET MODE
Table 1 on page 23, the 33689 has three operational modes:                     At power up, the 33689 switches automatically to Reset
Normal, Sleep, and Stop. Operational modes are controlled                    Mode for 1 ms if VDD goes high. If VDD stays low, after
by MODE1 and MODE2 bits in the SPI Register (refer to                        150 ms the 33689 goes in Sleep Mode.
Logic Commands and Registers on page 24). In additional,
there are two transitional modes: Reset and Normal Request.
                                                                             NORMAL REQUEST MODE
                                                                                Before entering in Normal Request Mode, the 33689 stays
                                                                             for 1 ms in Reset Mode. In this mode, the LIN bus can
                                                                             transmit and receive information.
                                                        VDD LOW (150 ms) Expired & VSUV Bit = Logic [0]
                                              VDD HIGH & Reset Counter (1.0 ms) Expired & Watchdog Not Selected
                                                      VDD HIGH & Reset Counter (1.0 ms)
                                                      Expired & Watchdog Selected
                                                                                            Normal
                                             Reset
                                                                                            Request
                                                            VDD LOW OR
                                                            (Normal Request                 Watchdog
                            33689 Power-Up
                                                            Timeout Occurs
                                                            [150 ms] & Watchdog             Trigger
                                                            Selected)
                                                                                                Normal
                                                     VDD LOW OR (Watchdog
                                                                                                                 Wake-Up & Watch-
                        Power
                                                                                                                                    Sleep Command
                                                     Fail & Watchdog Selected)
                        Down                                                     Wake-Up &
                                                                                                       Stop
                                                                                 Watchdog Not
                                                                                                                 dog Selected
                                                                                                       Command
                                                                                 Selected
                                                             VDD LOW
                                                                                                 Stop
                                                             Wake-Up
                                                                                                                                         Sleep
                          Legend
                          Watchdog Selected: External resistor between WDC pin and GND or WDC pin open.
                          Watchdog Not Selected: WDC pin connected to GND.
                          Watchdog Fail: Watchdog trigger occurs in closed window or no SPI Watchdog trigger command.
                          Stop Command: SPI stop command.
                          Sleep Command: SPI sleep request followed by SPI sleep command.
                          Wake-Up: L1 or L2 state change or LIN bus wake-up or CS rising edge.
                                                     Figure 1. 33689 Modes State Diagram
33689
                                                                                                                  Analog Integrated Circuit Device Data
22                                                                                                                            Freescale Semiconductor


                                                                                                          FUNCTIONAL DESCRIPTION
                                                                                                   FUNCTIONAL DEVICE OPERATION
NORMAL MODE                                                            Entering Sleep Mode
   In Normal Mode, the 33689 has slew rate and timing                      First and second SPI commands (with bit D6 = 1, D7 = 1,
compatible with the LIN protocol specification. The LIN bus            D5 = 0 or 1, D1 = 0, and D0 = 0) 11x00000 must be sent.
can transmit and receive information. The VDD regulator is
ON and the watchdog function can be enabled.                           Entering Stop Mode
                                                                           First and second SPI commands (with bit D6 = 1, D7 = 1,
SLEEP AND STOP MODE                                                    D5 = 0 or 1, D1 = 0, and D0 = 1) 11x00001 must be sent.
   To safely enter Sleep or Stop modes and to ensure that
                                                                           Sleep or Stop modes are entered after the second SPI
these modes are not inadvertently entered due to noise
                                                                       command. Register bit D5 must be set accordingly.
issues during SPI transmission, a dedicated sequence must
be sent twice: data with the bits controlling the LIN bus and
the device mode.
Table 1. Operational Modes and Associated Functions
                  VDD Voltage        Wake-Up                            Watchdog                                      Operational
  Device Mode                                        RST Output                        HS1, HS2, HS3   LIN Interface
                    Regulator      Capabilities                          Function                                      Amplifier
                     VDD: ON            N/A         LOW for 1.0 ms        Disabled          OFF       Recessive only   Not active
                                                      typical, then
      Reset
                                                     HIGH (if VDD
                                                   above threshold)
                     VDD: ON            N/A              HIGH.        150 ms timeout    ON or OFF       Transmit and   Not active
                                                     Active LOW if     if Watchdog                         receive
                                                          VDD             enabled
                                                     undervoltage
     Normal
                                                     occurs and if
     Request
                                                    Normal Request
                                                       timeout (if
                                                       Watchdog
                                                        enabled)
                     VDD: ON            N/A              HIGH.            Window        ON or OFF       Transmit and    Active
                                                     Active LOW if     Watchdog if                         receive
                                                          VDD             enabled
                                                     undervoltage
     Normal
                                                       occurs or if
                                                    Watchdog fail (if
                                                       Watchdog
                                                        enabled)
                     VDD: ON       LIN and state    Normally HIGH.        Disabled          OFF       Recessive state  Not active
                 (Limited current   change on        Active LOW if                                       with Wake
      Stop          capability)    L1:L2 inputs           VDD                                             capability
                                                     undervoltage
                                                         occurs
                    VDD: OFF       LIN and state          LOW.            Disabled          OFF       Recessive state  Not active
                   (Set to 5.0 V    change on      Go to HIGH after                                      with Wake
      Sleep       after Wake-Up    L1:L2 inputs      Wake-Up and                                          capability
                 to enter Normal                       VDD within
                     Request)                        specification
                                                                                                                                33689
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                          23


FUNCTIONAL DESCRIPTION
FUNCTIONAL DEVICE OPERATION
                                               LOGIC COMMANDS AND REGISTERS
SPI INTERFACE AND REGISTER DESCRIPTION                                              During an SPI data communication, the state of MISO
   As shown in Figure 2, the SPI is an 8-bit SPI. All data is                    reports the state of the 33689 at time of a CS HIGH-to-LOW
sent as bytes. The MSB, D7, is sent first. The minimum time                      transition. The status flags are latched at a CS HIGH-to-LOW
between two rising edges on the CS pin is 15 μs.                                 transition.
                                             Bit7     Bit6     Bit5     Bit4      Bit3     Bit2    Bit1     Bit0
                                 MISO                                                                                 MOSI
                                              D7      D6        D5      D4         D3       D2      D1       D0
                                                     Figure 2. Data Format Description
   The following tables describe the SPI Register bits,
showing reset values and reset conditions.
  Table 2. SPI Register Overview
                        MSB                                                           Bits                                                        LSB
   Read / Write
   Information
                         D7               D6              D5                  D4                D3               D2               D1               D0
       Write           LINSL2          LINSL1           LIN-PU               HS3                HS2             HS1           MODE2             MODE1
       Read          INTSRC (1)       LINWU or           VSOV             VSUV or              VDDT            HSST               L2               L1
                                       LINFAIL                           BATFAIL(2)
    Write Reset           0                0               0                   0                 0                0               —                —
       Value
    Write Reset         POR,            POR,             POR                POR,               POR,            POR,               —                —
     Condition         RESET           RESET                               RESET              RESET           RESET
  Notes
     1. D7 signals interrupt source. After interrupt occurs, if D7 is a logic [1] D6 : D0 indicate the interrupt source. If D7 is a logic [0] no interrupt
          has occurred and D6 : D0 report real-time status.
     2. The first SPI read after a 33689 reset returns the BATFAIL status flag bit D4.
SPI Register: Write Control Bits
LINSL2 and LINSL1 — LIN Baud Rate and Low-Power
                                                                                   Table 3. LIN Slew Rate Control and Device Low Power
Mode Pre-Selection Bits
                                                                                             Mode Pre-Selection Bits (D7 and D6)
   These bits select the LIN slew rate and requested low-
power mode in accordance with Table 3. Reset clears the                            LINSL2      LINSL1                       Description
LINSL2 : 1 bits.
                                                                                       0           0                  LIN slew rate normal
                                                                                                                    (baud rate up to 20 kbps)
                                                                                       0           1                    LIN slew rate slow
                                                                                                                    (baud rate up to 10 kbps)
                                                                                       1           0        LIN slew rate fast (for program download,
                                                                                                                    baud rate up to 100 kbps)
                                                                                       1           1         Low power mode (Sleep or Stop mode)
                                                                                                               request, no change in LIN slew rate
33689
                                                                                                             Analog Integrated Circuit Device Data
24                                                                                                                          Freescale Semiconductor


                                                                                                            FUNCTIONAL DESCRIPTION
                                                                                                      FUNCTIONAL DEVICE OPERATION
LIN-PU — LIN Pullup Enable Bit
   This bit controls the LIN pullup resistor during Sleep and
Stop modes in accordance with Table 4. Reset clears the
LIN-PU bit.
 Table 4. LIN Pullup Termination Control Bit (D5)
  LIN-PU                            Description
     0          30 kΩ pullup connected in Sleep and Stop mode
     1        30 kΩ pullup disconnected in Sleep and Stop mode
HS3: HS1 — High-Side H3 : HS1 Enable Bits
   These bits enable the HS3 : HS1 bits in accordance with
Table 5. Reset clears the HSx bit.
   Note If no PWM on HS1 and HS2 is required, the IN pin
must be connected to the VDD pin.
                   Table 5. High-Side Switches Control Bits (D4, D3, and D2)
                     HS3            Description          HS2          Description           HS1         Description
                      0              HS3 OFF              0            HS2 OFF               0           HS1 OFF
                      1               HS3 ON              1         HS2 ON (if IN = 1)       1       HS1 ON (if IN = 1)
MODE2 and MODE1 — Mode Section Bits                                           To safely enter Sleep or Stop mode and to ensure that
   The MODE2 and MODE1 bits control the 33689 operating                   these modes are not affected by noise issue during SPI
modes in accordance with Table 6.                                         transmission, the Sleep / Stop commands require two SPI
                                                                          transmissions.
  Table 6. Mode Control Bits (D1 and D0)                                  Sleep Mode Sequence The Sleep command, as shown in
                                                                          Table 7, must be sent twice.
  MODE2        MODE1                        Description
                                                                          Table 7. Sleep Command Bits
      0            0                      Sleep mode (3)
                                                                           LINSL2 LINSL1 LIN-PU     HS3    HS2     HS1  MODE2 MODE1
      0            1                        Stop mode
                                                                               1       1      x      0      0        0    0       0
      1            0          Normal mode + Watchdog clear (4)
                                                                            x = Don’t care.
      1            1                       Normal mode
                                                                          Stop Mode Sequence The Stop command, as shown in
  Notes                                                                   Table 8, must be sent twice.
     3. Special SPI command and sequence is implemented in
         order to avoid going into Sleep or Stop mode with a single       Table 8. Stop Command Bits
         8-bit SPI command. Refer to Tables 7 and 8.
     4. When a logic [0] is written to MODE1 bit while MODE2 bit           LINSL2 LINSL1 LIN-PU    HS3     HS2     HS1  MODE2 MODE1
         is written as a logic [1]. After the SPI command is
         completed, MODE1 bit is set to logic [1] and the 33689                1       1      x      0      0        0    0       1
         stays in Normal mode. In order to set the 33689 in Sleep
                                                                            x = Don’t care.
         mode, both MODE1 and MODE2 bits must be written in
         the same 8-bit SPI command. The Watchdog clear on
         Normal Request mode (150 ms) has no window.
                                                                                                                                 33689
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                             25


 FUNCTIONAL DESCRIPTION
 FUNCTIONAL DEVICE OPERATION
SPI Register: Read Control Bits
INTSCR — Register Content Flags or Interrupt Source                    LINWU / LINFAIL — LIN Bus Status Flag Bit
   The INTSCR bit, as shown in Table 9, indicates if the                  This bit indicates a LIN wake-up condition or a LIN
register contents reflect the flags or an interrupt / wake-up          overcurrent/overtemperature in accordance with Table 10.
source.
                                                                                        Table 10. LIN Bus Status (D6)
                Table 9. Interrupt Status (D7)
                                                                          LINWU/
                                                                                                             Description
    INTSCR                         Description                            LINFAIL
                                                                             0                     No LIN bus wake-up or failure
        0             SPI word read reflects the flag state
                                                                             1             LIN bus wake-up occurred or LIN overcurrent /
        1        SPI word read reflects the interrupt or wake-up                                          overtemperature
                                       source
VSOV — Overvoltage Flag Bit, VSUV / BATFAIL — Under-
voltage Flag Bit, VDDT — VDD Voltage Regulator Status
Flag Bit, and HSST — High-Side Status Flag Bit
   Table 11 indicates the register contents of the following
flags:
• VSOV flag is set on an overvoltage condition.
• VSUV/BATFAIL flag is set on an undervoltage condition.
• VDDT flag is set as pre-warning in case of an
   overtemperature condition on the voltage regulator.
• HSST flag is set on overtemperature conditions on one of
   the high-side outputs.
      Table 11. Over- and Undervoltage, VDD Voltage Regulator, and High-Side Status Flag Bits (D5, D4, D3, and D2)
                                       VSUV/
   VSOV         Description                            Description    VDDT           Description             HSST          Description
                                     BATFAIL
      0      VSUP below 19 V             0          VSUP above 6.0 V    0       No overtemperature             0               HS
                                                                                                                       No overtemperature
      1      VSUP above 18 V             1          VSUP below 6.0 V    1      VDD overtemperature             1        HS1, HS2, or HS3
                                                                                      pre-warning                              OFF
                                                                                                                        (overtemperature)
L2 and L1 — Wake-Up Inputs L2 and L1 Status Flag Bit
   The L2 and L1 flags, as shown in Table 12, reflect the
status of the L2 and L1 input pins and indicate the wake-up
source.
                              Table 12. Switch Input Wake-Up and Real Time Status (D1 and D0)
                    L2                      Description              L1                        Description
                     0                     L2 input LOW              0                        L1 input LOW
                     1         L2 input HIGH or wake-up by L2        1             L1 input HIGH or wake-up by L1
                               (first register read after wake-up)                (first register read after wake-up)
33689
                                                                                                   Analog Integrated Circuit Device Data
26                                                                                                               Freescale Semiconductor


                                                                                                                    TYPICAL APPLICATIONS
                                                  TYPICAL APPLICATIONS
  The 33689 can be configured in several applications. Figure 3 shows the 33689 in the typical master node application.
                                                                     33689                                                   VBAT
        VDD1
                                           VDD        5.0 V/50 mA                                                        D1
                                                                      Voltage               VS1
                                                                     Regulator
                C4              C3                                                                    C2              C1
                                            RST           Reset
                                                         Control
                                           WDC           Window
                                                                                            VS2
                                                        Watchdog
                                   R1
                                               IN                                           HS1
                                          MOSI
                                          MISO
                                                           SPI and                          HS2
                                          SCLK
                                                            Mode
                                              CS           Control           Pre-Driver
                                             INT                                            HS3
                                  VDD1
                                           VCC                                                         R6
                                                                                            L2
  MCU       EXT INPUT
                                              E-                                             C5                  R7
                                                      Current
                         R2
                                              E+      Sense
                                                      Op Amp                                L1
                    R3    C7          R4
                                                                                                                           D2
                                           OUT                             VS1
                                                                                                                    R5
                                            TXD                                                                            L1(1)
                                                                                            LIN                                     LIN Bus
                                           RXD                   LIN Physical Interface
                                                                                                                   C6
                                                                                                                              R8(1)
                                                        AGND             TGND         GND
     Component Values
     C1=47 μF                  R1=33 kΩ
     C2=C4=C5=100 nF           R2 and R3 depend on the application
     C3=10 μF                  R4>5.0 kΩ
     C6=220 pF                 R5=1.0 kΩ
     C7=4.7 nF                 R6= 10 kΩ
                               R7=2.2 kΩ
                               R8=Varistor type TDK AVR-M1608C270MBAAB(1)
                               L1 = SMD Ferrite Bead-Type TDK MMZ2012Y202B(1)
   Notes:
     1. L1 and R8 are external components to improve EMC and ESD performances.
     2. Freescale does not assume liability, endorse, or warrant components from external manufacturers that are referenced in circuit
          drawings or tables. While freescale offers component recommendations in this configuration, it is the customer’s responsibility to
          validate their application.
                                         Figure 3. 33689 in Typical Master Node Application
                                                                                                                                           33689
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                                      27


PACKAGING
PACKAGING DIMENSIONS
                                                     PACKAGING
                                               PACKAGING DIMENSIONS
   Important For the most current revision of the package, visit www.freescale.com and do a keyword search on the 98A
drawing number below.
                                                    EW SUFFIX (PB-FREE)
                                                       32-PIN SOICW
                                                       98ARH99137A
                                                          ISSUE B
33689
                                                                                       Analog Integrated Circuit Device Data
28                                                                                                 Freescale Semiconductor


                                                                                           PACKAGING
                                                                     PACKAGING DIMENSIONS (CONTINUED)
                                      PACKAGING DIMENSIONS (CONTINUED)
                                                EW SUFFIX (PB-FREE)
                                                   32-PIN SOICW
                                                   98ARH99137A
                                                      ISSUE B
                                                                                                 33689
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                            29


REVISION HISTORY
                                      REVISION HISTORY
REVISION   DATE    DESCRIPTION OF CHANGES
    6.0     6/2006 • Implemented Revision History page
                   • Updated Outline Drawing to Revision “B”
                   • Eliminated all pages (pages 30 to 47) referring to the MC33689DWB/R2 device
                   • Removed MC33689DWB/R2 from the orderable parts information
                   • Updated to the prevailing form and style
    7.0     8/2006 • Removed MC33689DEW/R2 and replaced with MCZ33689DEW/R2 in the Ordering Information
                     block
    8.0     9/2012 • Updated orderable part number from MC33689DEW to MC33689DPEW
                   • Removed MCZ33689DPEW
                   • Removed DWB suffix from drawing info
                   • Updated Freescale form and style
33689
                                                                                  Analog Integrated Circuit Device Data
30                                                                                            Freescale Semiconductor


How to Reach Us:         Information in this document is provided solely to enable system and software implementers to
                         use Freescale products. There are no express or implied copyright licenses granted hereunder to
Home Page:
freescale.com            design or fabricate any integrated circuits based on the information in this document.
Web Support:             Freescale reserves the right to make changes without further notice to any products herein.
freescale.com/support    Freescale makes no warranty, representation, or guarantee regarding the suitability of its
                         products for any particular purpose, nor does Freescale assume any liability arising out of the
                         application or use of any product or circuit, and specifically disclaims any and all liability,
                         including without limitation consequential or incidental damages. “Typical” parameters that
                         may be provided in Freescale data sheets and/or specifications can and do vary in different
                         applications, and actual performance may vary over time. All operating parameters, including
                         “typicals,” must be validated for each customer application by customer’s technical experts.
                         Freescale does not convey any license under its patent rights nor the rights of others. Freescale
                         sells products pursuant to standard terms and conditions of sale, which can be found at the
                         following address: store.esellerate.net/store/
                         Policy.aspx?Selector=RT&s=STR0326182960&pc.
                          Freescale, the Freescale logo, AltiVec, C-5, CodeTest, CodeWarrior, ColdFire, C-Ware, Energy
                          Efficient Solutions logo, Kinetis, mobileGT, PowerQUICC, Processor Expert, QorIQ, Qorivva,
                          StarCore, Symphony, and VortiQa are trademarks of Freescale Semiconductor, Inc., Reg. U.S.
                          Pat. & Tm. Off. Airfast, BeeKit, BeeStack, ColdFire+, CoreNet, Flexis, MagniV, MXC,
                          Platform in a Package, QorIQ Qonverge, QUICC Engine, Ready Play, SafeAssure,
                          SMARTMOS, TurboLink, Vybrid, and Xtrinsic are trademarks of Freescale Semiconductor,
                          Inc. All other product or service names are the property of their respective owners.
                          © 2012 Freescale Semiconductor, Inc.
Document Number: MC33689
Rev. 8.0
9/2012


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
NXP:
 MC33689DPEW MC33689DPEWR2
