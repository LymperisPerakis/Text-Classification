                                                                                                                                         LTC4332
                                                                      SPI Extender Over Rugged
                                                                                                               Differential Link
FEATURES                                                             DESCRIPTION
nn 2MHz SCK Over 10m, Operation Up to 1200m                          The LTC®4332 is a point-to-point rugged SPI extender
nn Three Extended Slave Selects                                      designed for operation in high noise industrial environ-
nn Protected from Overvoltage Lines Fault to ±60V                    ments over long distances. Using a ±60V fault protected
nn ±40kV HBM ESD on Link Pins                                        differential transceiver, the LTC4332 can transmit SPI
nn IEC ESD ±6kV and EFT ±4kV on Link Pins                            data, including an interrupt signal, up to 2MHz over two
nn Extended Common Mode Range: ±25V                                  twisted pair cables. The extended common mode range
nn Extended Interrupt                                                and high common mode rejection on the differential link
nn Separate Programmable SPI Modes                                   provides tolerance to large ground differences between
nn Link Galvanic Isolation Supported                                 nodes. The LTC4332 also supports external galvanic iso-
nn 3V to 5.5V Supply Voltage                                         lation on the link.
nn 1.62V to 5.5V Logic Supply
                                                                     The LTC4332 provides a control interface using a separate
nn 4mm × 5mm 20-Lead QFN package
                                                                     slave select for configuration and fault monitoring.
                                                                     All registered trademarks and trademarks are the property of their respective owners.
APPLICATIONS
nn Industrial Control and Sensors
nn Lighting and Sound System Control
TYPICAL APPLICATION
                                      Extended SPI Network Over 10m CAT5, 2MHz SCK
                                                          3.3V
                                      LTC4332                                               LTC4332
                      3.3V        VCC                                                                  VCC                       3.3V
                                  VL                 620Ω                                                VL
                            620Ω                                 10m                                            620Ω
                                  ON           Y                                         A              ON
                       10kΩ                                                                                                   10kΩ
                                  LINK                                      110Ω                     LINK
                                               Z                                         B
                 MCU_INT          INT                                                                  INT                         REM_INT
                                                     620Ω              3.3V
                MCU_SCK           SCK                                                                 SCK                          REM_SCK
               MCU_MISO           MISO                                                              MISO                           REM_MISO
                                                                            620Ω
               MCU_MOSI           MOSI                           10m                                MOSI                           REM_MOSI
                MCU_SS1           SS1          A                                         Y             SS1                         REM_SS1
                MCU_SS2           SS2                110Ω                                              SS2                         REM_SS2
                MCU_SS3           SS3                                                                  SS3                         REM_SS3
                                               B                                         Z
                MCU_SS4           SSC
                                                                            620Ω
                                  REMOTE                                                         REMOTE        3.3V
                                  SPEED1                                                         SPEED1
                                  SPEED2                                                         SPEED2
                                                                                                     4332 TA01
                                              GND1         V GROUND LOOP              GND2
                                                              ≤25V PEAK
                                                                                                                                                           Rev. 0
Document Feedback                               For more information www.analog.com                                                                        1


LTC4332
ABSOLUTE MAXIMUM RATINGS                                                          PIN CONFIGURATION
(Note 1)
                                                                                                                     TOP VIEW
Supply Voltages                                                                                                  A     B      Z      Y
   VCC........................................................... –0.3V to 6V                                    20 19 18 17
   VL............................................................. –0.3V to 6V                         VCC 1                               16 GND
Logic Signals                                                                                             VL 2                             15 SPEED2
   ON, LINK, INT, SSC................................... –0.3V to 6V                                      ON 3           21                14 SPEED1
                                                                                                                        GND
   REMOTE, SCK, MISO, MOSI, SS1, SS2, SS3,                                                          REMOTE 4                               13 SS3
                                                                                                      LINK 5                               12 SS2
   SPEED1, SPEED2.................. GND – 0.3V to VL + 0.3V
                                                                                                      SSC 6                                11 SS1
Interface I/O: A, B, Y, Z................................. –60V to 60V
                                                                                                                 7      8      9 10
Operating Temperature Range (Note 11)
                                                                                                                 SCK   MOSI   MISO
                                                                                                                                     INT
   LTC4332C................................................. 0°C to 70°C
   LTC4332I..............................................–40°C to 85°C                                           UFD PACKAGE
                                                                                                      20-LEAD (4mm × 5mm) PLASTIC QFN
   LTC4332H........................................... –40°C to 125°C                              TJMAX = 150°C, θJA = 43°C/W, θJC = 3.4°C/W
Storage Temperature Range................... –65°C to 150°C                                  EXPOSED PAD (PIN 21) IS GND, MUST BE SOLDERED TO PCB
ORDER INFORMATION
LEAD FREE FINISH              TAPE AND REEL                PART MARKING*              PACKAGE DESCRIPTION                                  TEMPERATURE RANGE
LTC4332CUFD#PBF               LTC4332CUFD#TRPBF            4332                       20-Lead (4mm × 5mm) Plastic QFN                      0°C to 70°C
LTC4332IUFD#PBF               LTC4332IUFD#TRPBF            4332                       20-Lead (4mm × 5mm) Plastic QFN                      –40°C to 85°C
LTC4332HUFD#PBF               LTC4332HUFD#TRPBF            4332                       20-Lead (4mm × 5mm) Plastic QFN                      –40°C to 125°C
Contact the factory for parts specified with wider operating temperature ranges. *The temperature grade is identified by a label on the shipping container.
Tape and reel specifications. Some packages are available in 500 unit reels through designated sales channels with #TRMPBF suffix.
ELECTRICAL CHARACTERISTICS                                The l denotes the specifications which apply over the full operating
temperature range, otherwise specifications are at TA = 25°C. VCC = 5V, VL = 3.3V, GND = 0V unless otherwise noted. (Note 6)
SYMBOL            PARAMETER                                            CONDITIONS                                             MIN           TYP        MAX    UNITS
Power Supplies
VCC               Operating Supply Range                                                                         l             3                       5.5         V
ICC               Operating Supply Current                             Low Power: ON = 0                         l                           1          40      µA
                                                                       Idle: ON = 1, Idle SPI                    l                                      12      mA
                                                                       Active: SCK = 2MHz, SPEED INDEX = 8       l                                     120      mA
                                                                       (Note 7)
VL                Logic Interface Supply Range                                                                   l            1.62                     5.5         V
IL                Logic Supply Current                                                                           l                                     ±140      µA
Differential Driver (Pins Y, Z)
|VOD|             Differential Driver Output Voltage                   R=∞                                       l            1.5                      VCC         V
                                                                       R = 27Ω (Figure 1)                        l            1.5                       5          V
IOSD              Maximum Driver Short-Circuit Current                 –60V ≤ (Y or Z) ≤ 60V (Figure 2)          l                         ±150        ±250     mA
Differential Receiver (Pins A, B)
RIN               Receiver Input Resistance                            0V ≤ VCC ≤ 5.5V (Figure 3)                                           112                  kΩ
VCM               Receiver Common Mode Input Voltage                                                             l                                     ±25         V
                                                                                                                                                               Rev. 0
2                                                             For more information www.analog.com


                                                                                                                           LTC4332
ELECTRICAL CHARACTERISTICS                                        The l denotes the specifications which apply over the full operating
temperature range, otherwise specifications are at TA = 25°C. VCC = 5V, VL = 3.3V, GND = 0V unless otherwise noted. (Note 6)
SYMBOL         PARAMETER                                           CONDITIONS                                MIN      TYP       MAX     UNITS
VTH            Differential Input Signal Threshold                 –25V < VCM < 25V (Note 2)           l                        ±200      mV
Logic
VIH            High Level Input Voltage (ON, SCK, MISO, MOSI, 1.62V ≤ VL ≤ 5.5V                        l   0.8 • VL                          V
               SS1, SS2, SS3, SSC, INT, REMOTE)
VIH3ST         High Level Input Voltage (SPEED1, SPEED2)                                               l VL – 0.25                           V
VIM3ST         Mid Level Input Voltage (SPEED1, SPEED2)                                                l  0.45 • VL           0.55 • VL      V
VIL3ST         Low Level Input Voltage (SPEED1, SPEED2)                                                l                         0.25        V
VIL            Low Level Input Voltage (ON, SCK, MISO, MOSI, 1.62V ≤ VL ≤ 5.5V                         l                       0.2 • VL      V
               SS1, SS2, SS3, SSC, INT, REMOTE)
               Digital Input Current (ON, REMOTE, SPEED1,          VIN = 0V to VL                      l                         ±60       µA
               SPEED2)
               Digital Input Current (SCK, MOSI, SS1, SS2,         VIN = 0V to VL, REMOTE = 0          l                         ±60       µA
               SS3, SSC)
               Digital Input Current (MISO)                        VIN = 0V to VL, REMOTE = 1          l                         ±60       µA
               Digital Input Current (INT)                         VIN = 0V to VL, REMOTE = 1          l                          ±5       µA
CIN            Digital Input Capacitance                           (Note 2)                                            10                   pF
VOH            High Level Output Voltage                           IO = –500µA, 1.62V ≤ VL ≤ 5.5V      l  VL – 0.2                           V
VOL            Low Level Output Voltage                            IO = 500µA, 1.62V ≤ VL ≤ 5.5V       l                         0.2         V
IOZ            High-Z Output Leakage Current (LINK, INT)                                               l                          ±5       µA
               High-Z Output Leakage Current (MOSI)                REMOTE = 1                          l                         ±60       µA
               High-Z Output Leakage Current (MISO)                REMOTE = 0                          l                         ±60       µA
               Output Source Current (Short-Circuit)                                                                  ±80                 mA
SWITCHING CHARACTERISTICS                                         The l denotes the specifications which apply over the full operating
temperature range, otherwise specifications are at TA = 25°C. VCC = 5V, VL = 3.3V, GND = 0V unless otherwise noted.
SYMBOL         PARAMETER                                                 CONDITIONS                          MIN      TYP       MAX     UNITS
General
tON_LOW        Pulse Width of ON low for Valid Reset Condition           (Figure 6)                    l       1                            µs
tREADY         ON Rise to Control Interface (SSC) Ready                                                l      15                            µs
tSSF_PROP      Local Slave Select Fall to Remote Slave Select Fall       (Note 3)(Figure 9)                0.4 • SF  1 • SF    13 • SF      µs
               Propagation Delay
tSCKR_PROP     Local SCK Rise to Remote SCK Fall and MOSI Update (CPOL, CPHA) = (1,1)                               0.7 • SF                µs
               Propagation Delay
               Local SCK Rise to Remote SCK Rise and MOSI Update (CPOL, CPHA) = (0,1)                               0.7 • SF                µs
               Propagation Delay
               Local SCK Rise to MOSI Update Propagation Delay           (CPOL, CPHA) = (0,0) or (1,0)              0.7 • SF                µs
tSSR_PROP      Local Slave Select Rise to Remote SCK Fall                (CPOL, CPHA) = (0,0)                       0.7 • SF                µs
               Propagation Delay
               Local Slave Select Rise to Remote SCK Rise                (CPOL, CPHA) = (1,0)                       0.7 • SF                µs
               Propagation Delay
tINT_PROP      Remote INT to Local INT Propagation Delay                 (Note 3)                          0.4 • SF  1 • SF    13 • SF      µs
tREMOTE_RESET  Delay from Local ON Low for Valid Remote Reset                                          l     180                           ms
               Condition
tR, tF         Logic Output Rise/Fall (SCK, MISO, MOSI)                  CL = 20pF                     l                           8        ns
                                                                                                                                         Rev. 0
                                                        For more information www.analog.com                                              3


LTC4332
SWITCHING CHARACTERISTICS                                             The l denotes the specifications which apply over the full operating
temperature range, otherwise specifications are at TA = 25°C. VCC = 5V, VL = 3.3V, GND = 0V unless otherwise noted.
SYMBOL                PARAMETER                                              CONDITIONS                                    MIN        TYP        MAX        UNITS
Local Mode (REMOTE = 0)
fSCK:SLAVE            SCK Input Frequency                                    (SPEED INDEX = 8) (Table 2)           l                             2000         kHz
                                                                                                                            10                                kHz
tSCKH:SLAVE           SCK Input High Time                                    (Figure 7)                            l       100                                  ns
tSCKL:SLAVE           SCK Input Low Time                                                                           l       100                                  ns
tBUF:SLAVE            SSx Rise to SSx Fall Delay                             (Note 3)                              l      2 • SF                                µs
tSSFSCK:SLAVE         SSx Fall to SCK Rise Delay                             (Note 3)                              l      2 • SF               168000           µs
tSCKRSS:SLAVE         SCK Rise to SSx Rise Delay                             (Note 3)                              l      1 • SF               168000           µs
tDMISO:SLAVE          MISO Data Valid from SCK Fall Delay                    CL = 20pF                             l                              100           ns
tHMISO:SLAVE          MISO Data Remains Valid from SCK Fall Delay            CL = 20pF                             l        40                                  ns
tSMOSI:SLAVE          MOSI Data Setup to SCK Rise                                                                  l        40                                  ns
tHMOSI:SLAVE          MOSI Data Hold after SCK Rise                                                                l        40                                  ns
Remote Mode (REMOTE = 1)
tSCKL:MASTER          SCK Low from LTC4332                                   (CPOL, CPHA) = (0,0) or (1,1)         l    0.2 • SF               0.3 • SF         µs
                                                                             (Figure 9) (Note 4)
tSCKH:MASTER          SCK High from LTC4332                                  (CPOL, CPHA) = (0,1) or (1,0)         l    0.15 • SF              0.3 • SF         µs
                                                                             (Note 4)
tSCKTSS:MASTER        SCK Trailing Edge to SSx High                          (Note 4)                              l    0.2 • SF                                µs
tSCKJ:MASTER          SCK Cycle to Cycle Jitter                              (Figure 8)                            l                              ±30           ns
tDMOSI:MASTER         MOSI Data Valid from SCK Fall Delay                    CL = 20pF                             l                               15           ns
tHMOSI:MASTER         MOSI Data Remains Valid from SCK Fall Delay            CL = 20pF                             l        –5                                  ns
tSMISO:MASTER         MISO Data Setup to SCK Rise                                                                  l        40                                  ns
tHMISO:MASTER         MISO Data Hold after SCK Rise                                                                l        40                                  ns
tTIMEOUT:MASTER Active Slave Select Timeout                                                                        l       148                    175          ms
Link Interface
tRD, tFD              Differential Driver Rise or Fall Time                  RDIFF = 54Ω, CL = 100pF               l                   4           15           ns
tLINK_TIMEOUT         Response Time for LINK Release after Disconnection     REMOTE = 1                                               168                      ms
                                                                             REMOTE = 0                                               100                       µs
Note 1: Stresses beyond those listed under Absolute Maximum Ratings                Note 5: All currents into device pins are positive; all currents out of device
may cause permanent damage to the device. Exposure to any Absolute                 are negative. All voltages are referenced to their corresponding ground
Maximum Rating condition for extended periods may affect device                    unless otherwise specified.
reliability and lifetime.                                                          Note 6: Continuous operation above specified maximum operating
Note 2: Guaranteed by design, not production tested.                               junction temperature may result in device degradation or failure.
Note 3: SF = Speed Factor. See Table 2.                                            Note 7: Link network with RB = 250Ω, RDIFF = 100Ω, and CL = 150pF from
Note 4: CPOL and CPHA set using fields REM_SSx_POL and REM_SSx_                    Figure 4 unless otherwise noted.
PHA in the CONFIG register.
                                                                                                                                                             Rev. 0
4                                                             For more information www.analog.com


                                                                                                                                                                                                                  LTC4332
TYPICAL PERFORMANCE CHARACTERISTICS                                                                                                                  TA = 25°C. VCC = 5V, VL = 3.3V, GND = 0V unless
otherwise noted.
                            ICC vs Temperature                                                               ICC vs Temperature
                            SPI Bus Active                                                                   SPI Bus Active                                                                ICC vs Temperature SPI Bus Idle
                       56                                                                              56                                                                           12.5
                               REMOTE = 0                                                                        REMOTE = 1                                                                  REMOTE = 0
                       52                                                                              52                                                                           12.0
                       48                                                                              48                                                                           11.5
                                                                                                                                                                                    11.0
                       44                                                                              44
       CURRENT (mA)                                                                CURRENT (mA)                                                                 CURRENT (mA)
                                                                                                                                                                                    10.5
                       40                                                                              40
                                                                                                                                                                                    10.0
                       36                                                                              36
                             MAX SCK FREQUENCY                                                                   MAX SCK FREQUENCY                                                   9.5
                       32                                                                              32
                                     SPD IDX = 0      SPD IDX = 5                                                      SPD IDX = 0         SPD IDX = 5                               9.0            SPD IDX = 0           SPD IDX = 5
                       28            SPD IDX = 1      SPD IDX = 6                                      28              SPD IDX = 1         SPD IDX = 6                                              SPD IDX = 1           SPD IDX = 6
                                     SPD IDX = 2      SPD IDX = 7                                                      SPD IDX = 2         SPD IDX = 7                               8.5            SPD IDX = 2           SPD IDX = 7
                       24            SPD IDX = 3      SPD IDX = 8                                      24              SPD IDX = 3         SPD IDX = 8                               8.0            SPD IDX = 3           SPD IDX = 8
                                     SPD IDX = 4                                                                       SPD IDX = 4                                                                  SPD IDX = 4
                       20                                                                              20                                                                            7.5
                         –75 –50 –25 0 25 50 75 100 125 150                                              –75 –50 –25 0 25 50 75 100 125 150                                             –75 –50 –25 0 25 50 75 100 125 150
                                 AMBIENT TEMPERATURE (°C)                                                        AMBIENT TEMPERATURE (°C)                                                       AMBIENT TEMPERATURE (°C)
                                                                4332 G01                                                                             4332 G02                                                                      4332 G03
                            Logic Inputs VIL and VIH vs VL
                            Supply (Except SCK, MISO,                                                        Logic Outputs VOL and VOH vs VL                                               SCK, MISO, and INT Inputs VIL
                            and INT)                                                                         Supply (Except SCK and MISO)                                                  and VIH vs VL Supply
                      5.5                                                                              5.5                                                                          5.5
                                     VIH                                                                               VOH 2mA                                                                      VIH
                      5.0            VIL                                                               5.0                                                                          5.0             VIL
                                                                                                                       VOL 2mA
                      4.5                                                                              4.5             VOH 4mA                                                      4.5
                                                                                                                       VOL 4mA
                      4.0                                                                              4.0                                                                          4.0
 INPUT VOLTAGE (V)                                                          OUTPUT VOLTAGE (V)                                                                  INPUT VOLTAGE (V)
                      3.5                                                                              3.5                                                                          3.5
                      3.0                                                                              3.0                                                                          3.0
                      2.5                                                                              2.5                                                                          2.5
                      2.0                                                                              2.0                                                                          2.0
                      1.5                                                                              1.5                                                                          1.5
                      1.0                                                                              1.0                                                                          1.0
                      0.5                                                                              0.5                                                                          0.5
                        0                                                                               0                                                                             0
                         1.5     2    2.5 3 3.5 4 4.5 5 5.5           6                                  1.5       2    2.5 3 3.5 4 4.5 5 5.5               6                          1.5     2    2.5 3 3.5 4 4.5 5 5.5                 6
                                     LOGIC SUPPLY VOLTAGE VL (V)                                                       LOGIC SUPPLY VOLTAGE VL (V)                                                 LOGIC SUPPLY VOLTAGE VL (V)
                                                               4332 G04                                                                              4332 G05                                                                      4332 G06
                                                                                                             Y/Z Driver Output Low/High                                                    Y/Z Driver Differential Output
                            SCK and MISO Output (2mA and                                                     Voltage vs Output Current                                                     Voltage vs Temperature
                            4mA) VOL and VOH vs VL Supply                                                    (VCC = 3.3V)                                                                  (VCC = 3.3V)
                      5.5                                                                              3.5                                                                          2.5
                                     VOH 2mA
                      5.0
                                     VOL 2mA
                      4.5                                                                              3.0
                                     VOH 4mA                                                                                               VOH                                                     RDIFF = 100Ω
                                                                                                                                                                                    2.3
                                                                           DRIVER OUTPUT VOLTAGE (V)
                      4.0            VOL 4mA
                                                                                                       2.5
OUTPUT VOLTAGE (V)
                      3.5
                      3.0                                                                                                                                                           2.1
                                                                                                       2.0
                      2.5                                                                                                                                        VOD (V)
                      2.0                                                                              1.5
                                                                                                                                                                                    1.9
                      1.5                                                                                                                                                                                   RDIFF = 54Ω
                                                                                                       1.0
                      1.0
                                                                                                                                     VOL                                            1.7
                      0.5                                                                              0.5
                        0
                     –0.5                                                                              0.0                                                                          1.5
                         1.5     2    2.5 3 3.5 4 4.5 5 5.5          6                                       0         10        20     30      40         50                          –50            0         50        100            150
                                     LOGIC SUPPLY VOLTAGE VL(V)                                                             OUTPUT CURRENT (mA)                                                           TEMPERATURE (°C)
                                                               4332 G07
                                                                                                                                                     4332 G08                                                                      4332 G09
                                                                                                                                                                                                                                        Rev. 0
                                                                                                         For more information www.analog.com                                                                                          5


LTC4332
PIN FUNCTIONS
Logic (All Inputs and Outputs Referenced to GND                     MOSI (Pin 8): Master Out Slave In. When in local mode,
and VL)                                                             MOSI is the serial data input for each of the slave select
VCC (Pin 1): Main Supply Voltage. 3.0V ≤ VCC ≤ 5.5V.                pins. MOSI data is captured on the rising edge of SCK.
                                                                    When in remote mode, MOSI is the serial data output and
Bypass with 4.7µF ceramic capacitor to GND.
                                                                    can be connected to remote slave devices’ SDI or MOSI
VL (Pin 2): Logic Interface Supply Voltage. 1.62V ≤ VL ≤            pin. MOSI contains a weak bus-hold circuit which holds
5.5V. Bypass with 1µF ceramic capacitor to GND.                     the last driven value on the pin if undriven.
ON (Pin 3): Enable Input. Set high for operation. Set low           MISO (Pin 9): Master In Slave Out. When in local mode,
for low power mode, in which the internal reset is held,            MISO is the serial data output for each of the slave select
and outputs are disabled. Connect to VL if unused.                  pins. MISO’s output driver is disabled when SS1-3 and
REMOTE (Pin 4): Operating Mode Select Input. Set low                SSC are high. A weak bus-hold circuit holds the last driven
for local SPI slave mode. Set high for SPI master mode              value to prevent the pin from floating.
when used on the remote side. REMOTE is weakly pulled               When in remote mode, MISO is the serial data input and
to GND.                                                             can be connected to a remote slave devices’ SDO or MISO
LINK (Pin 5): Link Status Open-Drain Output. LINK is                pin. In this mode, MISO is weakly pulled to VL and can be
driven low when the device establishes link communi-                unconnected if not used.
cation. Connect to an external pull-up to VL to monitor             INT (Pin 10): Remote to Local Interrupt. INT is an open-
status, otherwise float or connect to GND.                          drain output in local mode and an input in remote mode.
SSC (Pin 6): Control Interface Select Input (Active Low).           Values set on the remote side INT propagate to the local
SSC enables access to the LTC4332 internal control reg-             side INT pin. In addition, INT is the level-sensitive active
isters. Set SSC low to initiate a SPI transfer using pins           low interrupt signal for the LTC4332’s control interface.
SCK, MOSI, and MISO. SSC must be set high when the                  Connect to an external pull-up to VL on the local side. Do
SPI bus is idle. SSC is only used in local mode (REMOTE             not allow INT to float on the remote side.
= 0). SSC is weakly pulled to VL and can be unconnected             SS1 (Pin 11): Remote Slave Select 1 (Active Low). When
if not used.                                                        in local mode, SS1 is an input. Set SS1 low to initiate a
SCK (Pin 7): Serial Port Clock. When in local mode, SCK             remote SPI transfer using pins SCK, MOSI, and MISO.
is an input. MOSI data is captured by the LTC4332 on                When in remote mode, SS1 is an output and can be con-
the rising edge of SCK. MISO data from the LTC4332 is               nected to a remote SPI device’s slave or chip select input.
updated on the falling edge of SCK. When in remote mode             SS1 must be set high when the SPI bus is idle. SS1 is
SCK is an output providing the serial port clock to remote          weakly pulled to VL and can be unconnected if not used.
devices. After startup, the remote side SCK is driven low.
The local side SCK contains a weak bus-hold circuit which
holds the last driven value on the pin if undriven.
                                                                                                                            Rev. 0
6                                              For more information www.analog.com


                                                                                                                 LTC4332
PIN FUNCTIONS
SS2 (Pin 12): Remote Slave Select 2 (Active Low). When                SPEED2 (Pin 15): Link and Interface Timing Select 2.
in local mode, SS2 is an input. Set SS2 low to initiate a             SPEED2 is a 3-State input and in conjunction with SPEED1
remote SPI transfer using pins SCK, MOSI, and MISO.                   selects link baud rate and the remote SCK timing param-
When in remote mode, SS2 is an output and can be con-                 eters. Set to high, low, or float as defined in Table 2.
nected to a remote SPI device’s slave or chip select input.
                                                                      GND (Pin 16, 21): Connect to GND.
SS2 must be set high when the SPI bus is idle. SS2 is
weakly pulled to VL and can be unconnected if not used.               Link (Referenced to GND and VCC)
SS3 (Pin 13): Remote Slave Select 3 (Active Low). When                Y (Pin 17): Non-inverting Link Driver Output. Connect to
in local mode, SS3 is an input. Set SS3 low to initiate a             the A pin of a second LTC4332 device set to the opposite
remote SPI transfer using pins SCK, MOSI, and MISO.                   mode.
When in remote mode, SS3 is an output and can be con-
nected to a remote SPI device’s slave or chip select input.           Z (Pin 18): Inverting Link Driver Output. Connect to the B
SS3 must be set high when the SPI bus is idle. SS3 is                 pin of a second LTC4332 device set to the opposite mode.
weakly pulled to VL and can be unconnected if not used.               B (Pin 19): Inverting Link Receiver Input. Connect to the
SPEED1 (Pin 14): Link and Interface Timing Select 1.                  Z pin of the second LTC4332 device set to the opposite
SPEED1 is a 3-State input and in conjunction with SPEED2              mode.
selects link baud rate and the remote SCK timing param-               A (Pin 20): Non-inverting Link Receiver Input. Connect
eters. Set to high, low, or float as defined in Table 2.              to the Y pin of the second LTC4332 device set to the
                                                                      opposite mode.
                                                                                                                               Rev. 0
                                                 For more information www.analog.com                                           7


LTC4332
BLOCK DIAGRAM
                                                       Local Mode
       VCC                                                    LINK
       VL        SUPPLY
                MANAGER
       ON                                                                                                      Y
                                                                               LINK
       SCK                                                                   ENCODER                           Z
                                     TX
                                    FIFO
       MISO                                               LINK
                   SPI                                CONTROLLER
       MOSI    FRONT END             RX                                                                        B
                                    FIFO
       SS(1-3)                                                                 LINK
                                                                             DECODER
                                                                                                               A
       INT
                                                 STATUS                                                 REMOTE
       SSC      SPI SLAVE
                             REGISTERS
                 DEVICE
                                                 CONFIG
                                                       SPEED(1-2)                         GND
                                                                                                            4332 BD01
                                                      Remote Mode
                                                                   LINK                                     VCC
                                                                                                SUPPLY        VL
                                                                                               MANAGER
       B                                                                                                      ON
                                          LINK
                                        DECODER                                                             SCK
       A
                                                                                      TX
                                                                                     FIFO
                                                               LINK                                        MISO
                                                           CONTROLLER                            SPI
       Y                                                                              RX      FRONT END    MOSI
                                                                                     FIFO
                                          LINK                                                           SS(1-3)
       Z                                ENCODER
                                                                                                             INT
       REMOTE
                                                                      CONFIG
                          GND                                             SPEED(1-2)
                                                                                                             4332 BD02
                                                                                                                       Rev. 0
8                                          For more information www.analog.com


                                                                                                                             LTC4332
TEST CIRCUITS
                                                                                                     Y
                        Y
                                                                                                                       IOSD
                                  R
                             +                                                                DRIVER
               DRIVER       VOD
                             –                                                                                             + –60V TO 60V
                                  R                                                                                       –
                                                                                                     Z
                        Z                                                                                     4332 FO2
                                    4332 FO1
        Figure 1. Driver DC Characteristics                                          Figure 2. Driver Output Short-Circuit Current
                                                   IIN
                                                            A OR B
                                                                     RECEIVER
                                             VIN  +         B OR A
                                                  –
                                                                                     4332 FO3
                                                                V
                                                           RIN = IN
                                                                 IIN
                                 Figure 3. Receiver Input Current and Input Resistance
                                                                    5V
                                                                       RB
                                                             Y
                                                                                     CL
                                                   DRIVER              RDIFF
                                                                                     CL
                                                             Z             4332 FO4a
                                                                       RB
                                    Figure 4. Driver Loading for ICC Measurements
                                                                                                                                         Rev. 0
                                                For more information www.analog.com                                                      9


                                                                            0.8 VL
10                                                                                                                    0.2 VL
                                                                                                                                                                                 tWIDTH
                                                                                           tDELAY                                           tDELAY
                                                                                                                                                                     0.5 VL                                                                          LTC4332
                                                                                         0.8 VL                                           0.8 VL
                                                                                         0.2 VL                                           0.2 VL                                                              4332 F05
                                                                                                        Figure 5. Logic I/O Voltage Levels for Timing Specifications
                                                                                                                                                                                                                                    TIMING DIAGRAM
                                                                                                                                                                                tON_LOW
                                                                                                  ON
                                                                                               LINK
                                                                                                             tREADY
                                                                            LOCAL SIDE
                                                                                                  SSC                          ACTIVE
                                                                                                                                                            tREM_READY
                                                                                                  SS1                                                           ACTIVE
                                                                                                                                                                                          4332 F06
                                                                                                                                    Figure 6. Startup
For more information www.analog.com
                                                                                                                                                                                                     tBUF:SLAVE
                                                                    1
                                                              SSx
                                                                                     tSSFSCK:SLAVE            tSCKH:SLAVE                     tSCKL:SLAVE                     tSCKRSS:SLAVE
                                                               SCK
                                               (CPOL = 0, CPHA = 0)
                                                               SCK
                                               (CPOL = 1, CPHA = 1)
                                                                            tSMOSI:SLAVE                         tHMOSI:SLAVE
                                                             MOSI
                                                                                                                                            tHMISO:SLAVE
                                                             MISO
                                                                                                                                           tDMISO:SLAVE                                                                  4332 F07
                                                                        1
                                                                         SS1, SS2, SS3, OR SSC
                                      Rev. 0                                                                             Figure 7. Local Side SPI Timing


                                                                                                                          1/fSCK:SLAVE + tSCKJ:MASTER
                                                                   REMOTE SCK
                                                                                                              tSCKJ:MASTER                                                                          4332 F08
                                                                                                                          Figure 8. Remote SCK Period
                                                                                                                                                                                                                              TIMING DIAGRAM
                                                                                       tSSF_PROP                                                                                        tSSR_PROP
                                                                  SSx1
                                                                                                             tSCKR_PROP
                                                LOCAL SIDE         SCK
                                                                   INT
                                                                  SSx1
                                                                                                                                                                         tSCKL:MASTER           tSCKTSS:MASTER
                                                                   SCK
                                                             (CPOL = 0,
                                                              CPHA = 0)
                                                                   SCK
                                                             (CPOL = 1,
                                                              CPHA = 0)
                                                                                                                                                          tSCKH:MASTER
                                                                   SCK
For more information www.analog.com
                                               REMOTE SIDE   (CPOL = 0,
                                                              CPHA = 1)
                                                                   SCK
                                                             (CPOL = 1,
                                                              CPHA = 1)
                                                                                             tSMISO:MASTER                                tHMISO:MASTER                  tSCKL:MASTER
                                                                 MISO
                                                                                                                                                tDMOSI:MASTER
                                                                 MOSI
                                                                                                                      tHMOSI:MASTER
                                                                   INT
                                                                                                                                                                                                                  tINT_PROP
                                                                          1
                                                                           SS1, SS2 OR SS3                                                                                                                       4332 F09
                                                                                                         Figure 9. Remote Side Propagation and SPI Timing
11                                    Rev. 0
                                                                                                                                                                                                                                               LTC4332


LTC4332
APPLICATIONS INFORMATION
Overview                                                                                   driven low, slave select pins SS1, SS2, SS3 are available
Two LTC4332 devices are required for a complete extended                                   to access remote SPI slave devices. The device captures
                                                                                           SPI data on the MOSI pin and sends it across the first dif-
SPI network. On the local side, set the REMOTE pin low
                                                                                           ferential link as an encoded bit-stream to the remote side
to set the SPI interface into slave device mode. A second
                                                                                           LTC4332. Concurrently, the local side LTC4332 receives
LTC4332 with its REMOTE pin set high sets the SPI inter-
face into master device mode. Three slave select pins are                                  read-back data from the remote side through the second
                                                                                           differential pair and stores it in an internal word FIFO.
available to connect to slave devices on the remote side
                                                                                           Read data is held in the internal word FIFO until the next
along with a shared interrupt signal.
                                                                                           word boundary is detected then is driven onto pin MISO.
The LTC4332 SPI extender solution supports remote slave                                    Therefore, MISO data is always delayed by one word. See
devices with mixed SCK polarity and phase requirements.                                    Figure 12. An extra word appended to the existing trans-
The remote side LTC4332 switches to the device’s specific                                  action can be used to read out the last word. The word
SPI interface mode before initiating a transfer.                                           length defaults to 8 bits. Words lengths from 8 to 32 bits
Using an integrated high-performance differential trans-                                   are supported by writing the WORD_LENGTH register
ceiver for link communication, a local SPI master can                                      in the control interface using SSC. The internal FIFO is
access remote slave devices up to 1200m using inexpen-                                     always flushed at the start of transaction.
sive CAT5 or other differential-pair type cabling.                                         The SPI protocol supports four unique timing configura-
The LTC4332 SPI extender solution can be inserted                                          tions defined by the SCK polarity (CPOL) and clock phase
into an existing SPI network with minimal impact. Write                                    (CPHA) summarized in Table 1.
accesses to remote slave devices are software transpar-                                    Table 1. SPI Mode
ent; however, read accesses from remote slaves incur a                                       CPOL     CPHA   SCK IDLE    DATA CAPTURED        DATA LAUNCHED
one-word latency.                                                                              0         0       Low        Rising SCK          Falling SCK
                   LOCAL MASTER                      LOCAL SLAVE                               0         1       Low        Falling SCK         Rising SCK
                        µP          SCK                DEVICE                                  1         0      High        Falling SCK         Rising SCK
                                   MOSI
                                   MISO                                                        1         1      High        Rising SCK          Falling SCK
                                    SS
                                    INT
                                                                                                         SS
                   BREAK CONNECTIONS AND INSERT LTC4332 SOLUTION
                                                                                                        SCK
                           LOCAL                   REMOTE                                         (CPOL = 0)
    LOCAL                  SLAVE                   MASTER                  REMOTE
   MASTER     LOCAL                                             REMOTE      SLAVE                       SCK
                          LTC4332                  LTC4332                                        (CPOL = 1)
     µP      SPI BUS                   TWISTED                   SPI BUS
                                                                            DEVICE
            MCU_SCK                      PAIR                  REM_SCK
                                  Y              A                                                             CAPTURE                LAUNCH
           MCU_MOSI                                            REM_MOSI
                                                                                                 MOSI, MISO
           MCU_MISO                                            REM_MISO
                                  Z              B                                                (CPHA = 0)
             MCU_SS               A              Y              REM_SS
                                                                                                                LAUNCH                CAPTURE
             MCU_INT                                            REM_INT
                                  B              Z                                               MOSI, MISO
                                                                                                  (CPHA = 1)
                         REMOTE                     REMOTE      VL
                                                                                                                                                       4332 F11
            LOCAL SIDE                                       REMOTE SIDE        4332 F10                     Figure 11. SPI Mode Waveform
     Figure 10. LTC4332 Solution Inserted Into a SPI Network                               When set to local mode, the LTC4332 SPI slave interface
                                                                                           supports SPI modes (0,0) and (1,1) where (CPOL, CPHA).
Local Mode                                                                                 The maximum SCK frequency is limited by fSCK:SLAVE and
The LTC4332 is in slave SPI mode when the REMOTE                                           Table 2 when accessing remote SPI slaves. The MISO
pin is set low. Pins SCK and MOSI are inputs while pin                                     pin is weakly held to the previously driven value when
MISO is an output. Once the link status output pin LINK is                                 all slave select pins are high. MISO is only driven after a
                                                                                                                                                                Rev. 0
12                                                                    For more information www.analog.com


                                                                                                                   LTC4332
APPLICATIONS INFORMATION
slave select pin is low and the first word is shifted by pin             The remote SPI master device supports SPI modes (0,0),
SCK. It is invalid to assert more than one slave select pin              (0,1), (1,0), and (1,1) for each remote slave select. Each
concurrently.                                                            remote slave select SPI mode can be individually pro-
                                                                         grammed by the user to match the SPI mode require-
Remote Mode                                                              ments of the remote slave device. The SPI mode is pro-
The LTC4332 is in SPI master mode when the REMOTE                        grammed by writing the CONFIG register in the control
pin is set high. Pins SCK and MOSI are outputs while pin                 interface. SPI mode switching is handled automatically by
MISO is an input. Three slave selects output pins SS1, SS2,              the LTC4332. When the user asserts a remote slave select
SS3 are available to connect to remote SPI slave devices.                to start a transfer, the remote side LTC4332 configures
The remote side LTC4332 first asserts the appropriate slave              its SPI interface mode to match the mode of the remote
select pin mirroring the event from the local side and then              device before asserting the remote slave select signal.
toggles pins SCK with MOSI data as write-data becomes
available from the link. Using the same SCK edge, the                    Differential Link Pair
LTC4332 captures data on the MISO pin from the remote                    Internally, the LTC4332 utilizes a high performance trans-
slave device, encodes the data, and transmits the created                ceiver to communicate over the link pair. The A, B, Y,
bit-stream along the second differential pair to the local side.         and Z pins are fault protected to ±60V. In addition, the
                                                                         transceiver operates over an extended common mode
The remote side SCK period reflects the local side SCK
                                                                         range of ±25V making it suitable for noisy environments
period offset by a jitter parameter tSCKJ:MASTER. See
                                                                         or systems with ground potential differences. Data is
Figure 8. Care must be taken to ensure that the maximum
                                                                         exchanged between the LTC4332 devices using a cus-
supported frequency of the remote device is not violated.
                                                                         tom packet which has a selectable baud rate based on the
The SCK duty cycle is as follows. When the remote SPI                    configuration of the SPEED1 and SPEED2 pins. Selectable
mode is set to (0,0) or (1,1), the low time tSCKL:MASTER                 baud rates over the cable allow balancing performance
applies while SCK high time = 1/fSCK:SLAVE – tSCKL:MASTER                with cable length specific to the application. Both sides
+ tSCKJ:MASTER. When the remote SPI mode is set to (0,1)                 of the link must be set to the same speed configuration
or (1,0), the high time tSCKH:MASTER applies while the SCK               to match the baud rates and allow communication. Each
low time = 1/fSCK:SLAVE – tSCKH:MASTER + tSCKJ:MASTER.
             SS1
             SS2
 LOCAL SIDE  SCK
            MOSI           WRITE1       WRITE2            WRITE3                       WRITE1        WRITE2        WRITE3
            MISO        BUS-HOLD        READ1              READ2                  BUS-HOLD           READ1         READ2
             SS1
             SS2
REMOTE SIDE  SCK   POL = 0                                                        POL = 1
            MOSI                WRITE1       WRITE2             WRITE3                        WRITE1        WRITE2        WRITE3
            MISO                READ1        READ2               READ3                        READ1         READ2         READ3
                                                                                                                                  4332 F12
Figure 12. SS1 and SS2 Transfer. (REM_SS1_POL, REM_SS1_PHA) = (0,0). (REM_SS2_POL, REM_SS2_PHA) = (1,1). WORD_LENGTH = 8
                                                                                                                                 Rev. 0
                                                    For more information www.analog.com                                        13


LTC4332
APPLICATIONS INFORMATION
baud rate supports a maximum local SCK frequency                      are functional. The local side LTC4332 probes the dif-
listed in Table 2. Exceeding the listed maximum frequency             ferential link. After the startup time tREADY, a master can
results in data loss.                                                 access the internal control interface using the SSC slave
The LTC4332 SPI extension solution is point-to-point                  select pin. Once the device establishes link communica-
                                                                      tion with a remote LTC4332, it drives pin LINK low and
only. Multidrop or multipoint configurations on the dif-
                                                                      the remote SPI bus can be accessed (TREM_READY > 0ns).
ferential link are not allowed.
                                                                      See Figure 6.
±40kV HBM ESD Protection                                              The ON pin can be used to set the LTC4332 to a lower
The LTC4332 features exceptionally robust ESD protec-                 power state. By setting ON low, the LTC4332 is held in
tion. The link interface pins (A, B, Y, Z) feature protection         reset, all programmed configuration is set to the default
to ±40kV HBM with respect to GND, VCC (with a 4.7μF                   value, all output drivers are disabled, and the differential
capacitor to GND), A, B, Y, or Z.                                     transceiver is put into low power mode. If not used, tie
                                                                      ON to VL.
IEC ESD and EFT Protection
The improved ESD protection of the LTC4332 provides a                 Link Status
high level of protection in the IEC ESD and EFT (Electrical           The LTC4332 provides the LINK pin which indicates when
Fast Transient) tests. The IEC ESD stress exceeds that of             the remote SPI bus is ready. LINK is driven low when link
the HBM test in peak current, amplitude, and rise time,               communication is established. It is an open-drain output
while the EFT test provides a prolonged repetitive stress.            and requires an external pull-up to VL if used. At startup,
Combined with the HBM test, the IEC tests help ensures                the LINK pin output driver is disabled.
that the LTC4332 is robust under a wide range of real                 Link status can also be monitored using the control inter-
world hazards. The LTC4332 passes the following tests                 face. See section Control Interface. Ensure that the values
on the A, B, Y, Z pins:                                               set on local side SPEED1 and SPEED2 pins match the
•    IEC 61000-4-2 Edition 2.0 2008-12 ESD Level 3: ±6kV              values set on remote side. Also, do not the exceed the
     contact (A, B, Y, or Z to GND, direct discharge to bus           cable length listed in Table 2. for the given SPEED setting.
     pins with transceiver and protection circuit mounted             The LTC4332 will not link if these conditions are not met.
     on a test card with a low impedance ground discharge             Note that the link status is indeterminate if the REMOTE
     path from board GND to ESD gun return lead, per                  pin is incorrectly configured on either the local or remote
     Figure 4 of the standard)                                        side LTC4332 device.
•    IEC 61000-4-4 Second Edition 2004-07 EFT Level 4:
     ±4kV (line to GND, 5kHz repetition rate, 15ms burst              Interrupt
     duration, 60 second test duration, discharge coupled             The LTC4332 supports an interrupt signal that is mirrored
     to bus pins through 100pF capacitor per paragraph                from the remote network to the local network using the
     7.3.2 of the standard). VCC pin requires 4.7μF to meet           differential link when the SPI Bus is idle. On the remote
     Level 4 rating.                                                  side INT is an input pin that can be connected to remote
                                                                      SPI devices. While on the local side INT operates as an
Startup and Shutdown                                                  open-drain output that can be connected to a shared local
Startup occurs when supply voltages are applied to pins               interrupt line. INT is periodically sampled and has a propa-
VCC and VL and setting the ON pin high. All output pins are           gation time of tINT_PROP. If enabled, the local LTC4332’s
tri-stated during the first part of startup. After an internal        control interface uses the INT pin to report link and fault
initialization sequence the SPI interface and other pins              events. The local side INT output is the logical AND of the
                                                                      remote INT and the internal endpoint interrupt signal. If
                                                                                                                               Rev. 0
14                                               For more information www.analog.com


                                                                                                                                 LTC4332
APPLICATIONS INFORMATION
an EVENT is triggered and its corresponding INT_EN bit                            Control Interface
is set high, INT is driven low. To clear the interrupt set
                                                                                  The LTC4332 provides a separate slave select pin, SSC,
the triggered event or the corresponding event enable bit
                                                                                  that allows a user to access the internal control interface
to 0. Note that local INT could continue to be low due to
                                                                                  for configuration and monitoring. The interface supports
a low value from a remote INT pin.
                                                                                  SPI modes (0,0) and (1,1) only. Read and write accesses
                                                                                  are shown in Figure 13 and Figure 14. The bit order is
SPI Timeout
                                                                                  MSB first. The first byte includes the register address
On the remote side, the LTC4332 acting as a SPI master                            in bits <7-1> and a read(1)/write(0) bit in the LSB. Only
resets the SPI bus if any slave select pin exceeds time                           single data byte accesses per transfer are supported.
tTIMEOUT:MASTER. with the remote SCK inactive. This pre-                          Programmed values are retained while VCC ≥ 3.0V
vents the remote SPI bus from getting stuck active in the
                                                                                  An optional CRC byte can be appended to a write transfer.
event of lost or corrupted link data during a trans fer.
                                                                                  The CRC byte is calculated as a CRC-8 checksum over
Remote Reset                                                                      the first two bytes in the packet. The polynomial used
                                                                                  is x8 + x2 + x + 1 initialized to zero. If the CRC byte is
The local side LTC4332 can trigger a remote side LTC4332                          incomplete or incorrect, the LTC4332 will not commit the
reset by holding the ON pin low for a minimum of tREMOTE_                         write transfer into the internal registers. Additionally, the
RESET. In addition, the remote LTC4332 is automatically                           fault bit SPI_WRITE_FAULT is asserted and local INT pin
reset after tREMOTE_RESET if the link is disconnected. A                          drives low if enabled.
remote reset disables all remote side outputs until link
communication is reestablished.                                                   The CRC byte is also available in a read transfer. In this
                                                                                  case the CRC byte is calculated over the first byte written
Link Speed                                                                        on the MOSI pin and the data byte read on the MISO pin.
The link baud rate is set using the SPEED1 and SPEED2                             Use of the CRC byte is recommended in high noise envi-
pins as shown in Table 2. The local SCK frequency cannot                          ronments or high reliability systems.
exceed the maximum SCK frequency for a given SPEED
INDEX. The SPEED INDEX must be set to the same value
on each side of the link.
Table 2. Link Speed
    SPEED1         SPEED2         SPEED INDEX            SPEED FACTOR              MAX SCK FREQUENCY (kHz)             MAX CABLE LENGTH (m)
   (NOTE 1)       (NOTE 1)                                   (NOTE 2)                                                          (NOTE 3)
       L              L                  8                       1×                           2000                                  30
     Float            L                  7                       2×                           1000                                  60
       H              L                  6                       4×                            500                                 150
       L            Float                5                       8×                            250                                 250
     Float          Float                4                      16×                            125                                500
       L              H                  3                      24×                             83                                750
       H            Float                2                      32×                             63                                1000
     Float            H                  1                      64×                             31                                1200
       H              H                  0                      80×                             25                               1200+
Note 1. For assignments to Float, 0.5 • VL can also be applied to pin.
Note 2. Used for some switching parameter calculations.
Note 3. Evaluated with CAT5E Ethernet cable in a lab environment. Actual maximum cable length depends on type of cable and application environment.
                                                                                                                                                 Rev. 0
                                                             For more information www.analog.com                                              15


LTC4332
APPLICATIONS INFORMATION
 SSC
 SCK
MOSI                   REGISTER ADDRESS<6:0>         0             DATA BYTE (MSB FIRST)                        CRC BYTE (OPTIONAL)
     MODE = (0,0)
 SCK
MOSI                       REGISTER ADDRESS<6:0>         0                  DATA BYTE (MSB FIRST)                  CRC BYTE (OPTIONAL)
                                                                                                                                                    4332 F13
     MODE = (1,1)
                                                    Figure 13. Control Interface Write Transfer
 SSC
 SCK
MOSI                   REGISTER ADDRESS<6:0>         1                                               DON'T CARE
MISO                                                            READ DATA BYTE (MSB FIRST)                      CRC BYTE (OPTIONAL)
     MODE = (0,0)
 SCK
MOSI                      REGISTER ADDRESS<6:0>          1                                           DON'T CARE
MISO                                                                     READ DATA BYTE (MSB FIRST)                CRC BYTE (OPTIONAL)
                                                                                                                                                    4332 F14
     MODE = (1,1)
                                                     Figure 14. Control Interface Read Transfer
Register Naming Conventions
RW       Read-Write
RO       Read Only
W0C      Write Zero to Clear
Table 3. Register Map
 REGISTER           NAME         DATA                                                                                                          DEFAULT
                                 Bit 7  Bit 6      Bit 5           Bit 4             Bit 3             Bit 2          Bit 1             Bit 0
    00h            CONFIG         –      –       REM_SS3_       REM_SS3_          REM_SS2_         REM_SS2_        REM_SS1_          REM_SS1_   0x00
                                                   POL              PHA              POL               PHA             POL              PHA
    01h            STATUS                      SPEED_INDEX                         Reserved        REM_NINT           NINT             NLINK
    02h             EVENT         –      –          –                 –                –              FAULT        LINK_LOST        LINK_GOOD   0x00
    03h            INT_EN         –      –          –                 –                –            FAULT_EN      LINK_LOST_       LINK_GOOD_   0x00
                                                                                                                       EN                EN
    04h             FAULT         –      –          –            RX_BUF_           TX_BUF_          REM_SPI_      LINK_FAULT        SPI_WRITE_  0x00
                                                               UNDERFLOW          OVERFLOW            FAULT                            FAULT
    05h      WORD_LENGTH          –      –                                              WORD_LENGTH                                             0x08
    06h           SCRATCH                                                          SCRATCH                                                      0x00
                                                                                                                                                   Rev. 0
16                                                         For more information www.analog.com


                                                                                                                                       LTC4332
APPLICATIONS INFORMATION
CONFIG Register (RW)
FIELD              DESCRIPTION
REM_SS1_PHA        Remote Side SS1 Phase. When 0, MOSI is launched on the trailing SCK edge while MISO is captured on the leading SCK edge.
                   When 1, MISO is launched on the leading SCK edge while MISO is captured on the trailing SCK edge.
REM_SS1_POL        Remote Side SS1 SCK Polarity. When 0, SCK is low when idle. When 1, SCK is high when idle.
REM_SS2_PHA        Remote Side SS2 Phase.
REM_SS2_POL        Remote Side SS2 SCK Polarity.
REM_SS3_PHA        Remote Side SS3 Phase.
REM_SS3_POL        Remote Side SS3 SCK Polarity.
STATUS (RO)
FIELD              DESCRIPTION
NLINK              The level driven by pin LINK. High impedance is interpreted as 1.
NINT               The level driven by the local side pin INT. High impedance is interpreted as 1.
REM_NINT           The level driven into the remote INT pin. Link must be established.
SPEED_INDEX        <0-8>. Encoded index from values set on SPEED1 and SPEED2. See Table 2. Link Speed.
EVENT (W0C): Events Are Set by the System and Cleared by the User
FIELD              DESCRIPTION
LINK_GOOD          The local and remote SPI networks are connected.
LINK_LOST          The local and remote SPI networks have lost link communication.
FAULT              Set if any field in the FAULT register is set by the system. Clearing this bit clears all bits in the FAULT register.
INT_EN (RW): Asserts INT if Corresponding EVENT Bit Is Set
FAULT (RO): If the FAULT EVENT Bit Is Set, at Least One of the Following Bits Is Set.
To Clear, Clear the FAULT Event Bit
FIELD              DESCRIPTION
SPI_WRITE_FAULT    An incomplete write transfer after the register address byte or CRC error detected.
LINK_FAULT         Link communication corruption detected.
REM_SPI_FAULT      A fault or stuck bus timeout occurred on the remote SPI bus possibly due to link disconnection during transfer.
TX_BUF_OVERFLOW    The transmit buffer overflowed, SPI events lost. Indicates the local SPI frequency exceeds fSCK:SLAVE:MAX. See Table 2.
RX_BUF_UNDERFLOW The receive buffer overflowed, SPI events lost. Indicates the local SPI frequency exceeds fSCK:SLAVE:MAX. See Table 2.
WORD_LENGTH (RW)
FIELD              DESCRIPTION
WORD_LENGTH        Valid Range: 8 ≤ WORD_LENGTH ≤ 32. MISO read data from remote slave is delayed by WORD_LENGTH SCKs.
SCRATCH (RW)
FIELD              DESCRIPTION
SCRATCH            Used to test read/write access to the Control Interface.
                                                                                                                                            Rev. 0
                                                        For more information www.analog.com                                                17


LTC4332
APPLICATIONS INFORMATION
PCB Layout                                                            inductive loads, and electrostatic discharge (ESD) from
                                                                      the discharge of electrically charged personnel or equip-
A ground plane layout is recommended. A 4.7μF bypass
                                                                      ment. The LTC4332 is designed for high robustness
capacitor should be placed no more than 7mm away from
                                                                      against ESD and EFT, but the on-chip protection is not
the VCC pin. The PC board traces connected to signal pairs
                                                                      able to absorb the energy associated with the 61000-4-5
(Y, Z) and (A, B) should be symmetrical and as short
as possible to maintain good differential signal integrity.           surge transients. Therefore, a properly designed external
Route the differential signals pairs (Y, Z) and (A, B) as             protection network is necessary to achieve a high level
an edge coupled microstrip with a differential impedance              of surge protection, and can also extend the ESD and EFT
approximately matching the cable impedance.                           performance of the LTC4332 to extremely high levels.
                                                                      Refer to section Auxiliary Protection for IEC Surge, EFT
Link Termination and Biasing                                          and ESD on page 16 of Analog Devices LTC2864 data
To minimize the transmission line reflections over the                sheet for a detailed description and diagram of the exter-
link, a termination resistor should be connected between              nal protection network.
pins A and B at each node. Each resistor’s value should               The network provides the following protection:
closely match the characteristic impedance of the dif-
ferential cable to reduce reflections. A bias resistor net-           •    EC 61000-4-2 ESD Level 4: ±30kV contact, ±30kV air
work should also be inserted at each node to maintain the                  (line to GND, direct discharge to bus pins with trans-
                                                                           ceiver and protection circuit mounted on a ground
idle state when the drivers are disabled. For DC-coupled
                                                                           referenced test card per Figure 4 of the standard)
(non-isolated) link applications, select RB and RT2 such
that 200Ω ≤ RB ≤ 620Ω and 100Ω ≤ RT2 ≤ 110Ω. See                      •    IEC 61000-4-4 EFT Level 4: ±5kV (line to GND, 5kHz
Figure 15.                                                                 repetition rate, 15ms burst duration, 60 second test
                                                                           duration, discharge coupled to bus pins through
Auxiliary Protection for 5kV Surge, 5kV EFT, and 30kV                      100pF capacitor per paragraph 7.3.2 of the standard)
IEC ESD
                                                                      •    IEC 61000-4-5 Surge Level 4: ±5kV (line to GND,
An interface transceiver used in an industrial setting                     line to line, 8/20μs waveform, each line coupled to
may be exposed to extremely high levels of electrical                      generator through 80Ω resistor per Figure 14 of the
overstress due to phenomena such as lightning surge,                       standard)
electrical fast transient (EFT) from switching high current
                                                  VCC
                                      LTC4332                                            LTC4332
                                                     RB
                                              Y                                        A
                                                                                  RT2
                                              Z                                        B
                                                     RB                       VCC2
                                                                                  RB
                                              A                                        Y
                                                     RT2
                                              B                                        Z
                                                                                  RB
                                                             V GROUND LOOP
                                                               ≤25V PEAK                       4332 F15
                                                Figure 15. Resistor Bias Network
                                                                                                                              Rev. 0
18                                               For more information www.analog.com


                                                                                                                                                                  LTC4332
PACKAGE DESCRIPTION
                                                                                 UFD Package
                                                                20-Lead Plastic QFN (4mm × 5mm)
                                                              (Reference LTC DWG # 05-08-1711 Rev B)
                                                                                     0.70 ±0.05
                                         2.65 ±0.05
  4.50 ±0.05     1.50 REF
         3.10 ±0.05
                                                    3.65 ±0.05
                                                                                          PACKAGE OUTLINE
                                              0.25 ±0.05
                                            0.50 BSC
                                                     2.50 REF
                                                    4.10 ±0.05
                                                    5.50 ±0.05
                           RECOMMENDED SOLDER PAD PITCH AND DIMENSIONS
                        APPLY SOLDER MASK TO AREAS THAT ARE NOT SOLDERED                                                                                               PIN 1 NOTCH
                                                                                                                                                                       R = 0.20 OR
                                                                                        0.75 ±0.05                                           1.50 REF                  C = 0.35
                                                    4.00 ±0.10                                                       R = 0.05 TYP
                                                     (2 SIDES)                                                                                     19     20
                                                                                                                                                                         0.40 ±0.10
                                             PIN 1
                                             TOP MARK
                                             (NOTE 6)
                                                                                                                                                                        1
                                                                                                                                                                        2
                    5.00 ±0.10
                                                                                                              2.50 REF
                    (2 SIDES)
                                                                                                                                       3.65 ±0.10
                                                                                                                                            2.65 ±0.10
                                                                                                                                                                       (UFD20) QFN 0506 REV B
                                                                                                           0.200 REF        R = 0.115                           0.25 ±0.05
                                                                                                           0.00 – 0.05             TYP                         0.50 BSC
                                                                                                                                    BOTTOM VIEW—EXPOSED PAD
                        NOTE:
                        1. DRAWING PROPOSED TO BE MADE A JEDEC PACKAGE OUTLINE MO-220 VARIATION (WXXX-X).
                        2. DRAWING NOT TO SCALE
                        3. ALL DIMENSIONS ARE IN MILLIMETERS
                        4. DIMENSIONS OF EXPOSED PAD ON BOTTOM OF PACKAGE DO NOT INCLUDE
                           MOLD FLASH. MOLD FLASH, IF PRESENT, SHALL NOT EXCEED 0.15mm ON ANY SIDE
                        5. EXPOSED PAD SHALL BE SOLDER PLATED
                        6. SHADED AREA IS ONLY A REFERENCE FOR PIN 1 LOCATION
                           ON THE TOP AND BOTTOM OF PACKAGE
                                                                                                                                                                                              Rev. 0
                       Information furnished by Analog Devices is believed to be accurate and reliable. However, no responsibility is assumed by Analog
                       Devices for its use, nor for any infringements of patents or other rights of third parties that may result from its use. Specifications
                       subject to change without notice. No license For  more by
                                                                    is granted information   www.analog.com
                                                                                 implication or otherwise under any patent or patent rights of Analog Devices.                         19


LTC4332
TYPICAL APPLICATION
     3.3V                                                                                                     3.3V
        1µF     4.7µF                                                                          4.7µF        1µF
                                                    3.3V                                      GND2         GND2
                                   LTC4332                                 LTC4332
                               VCC                                                 VCC
                               VL               620Ω                                 VL
            10k    620Ω                                  10m                                620Ω      10k
                               ON           Y                           A            ON
 PROCESSOR                     LINK                              110Ω             LINK                     ADXL355BEZ               3.3V
                                            Z                           B                                           VDDIO
    MCU_INT                    INT                                                  INT                  INT1                            0.1µF
                                                620Ω         3.3V                                                V1P8DIG
    MCU_SCK                    SCK                                                 SCK                   SCLK                                         10µF
                                                                                                                              0.1µF
   MCU_MISO                    MISO                                              MISO                    MISO                                               39Ω
                                                                 620Ω                                               VSSIO
   MCU_MOSI                    MOSI                      10m                     MOSI                    MOSI
    MCU_SS1                    SS1          A                           Y          SS1                   CSN                            GND2
                               SS2                                                 SS2                   INT2     VSUPPLY
                                                110Ω
                               SS3                                                 SS3                   DRDY V1P8ANA                    0.1µF
                                            B                           Z                                                                             10µF
    MCU_SS4                    SSC                                                                                            0.1µF
                                                                 620Ω
                                                                                                                      VSS
                               REMOTE                                          REMOTE    3.3V
                               SPEED1                            GND2          SPEED1                                                   GND2A
                                                                                                               39Ω
                               SPEED2                                          SPEED2
                                                                                                     GND2               GND2A
                                           GND1                       GND2                 GND2                                              4332 F16
                                   Figure 16. Extending an ADXL355BEZ Accelerometer for Remote Sensing
RELATED PARTS
PART NUMBER         DESCRIPTION                                             COMMENTS
LTC4331             I2C/SMBus Differential Extender                         1MHz SCL, ±60V Fault Protected
LTC6820             isoSPI Isolated Communications Interface                1Mbps, 100m Cable Lengths, ISO26262
LTM2895             100MHz Isolated DAC SPI Serial Interface                6kV Isolation, 2 Slaves
LTM2883             2.5kV SPI/I2C Isolator with Power                       4MHz/8MHz SPI Isolation, Adjustable DC Power
ADuM4154            5kV, 7-Channel, SPIsolator ®                            4 Slaves, 17MHz SPI clock
                                                                                                                                                           Rev. 0
20
                                                                                                                                                           10/19
                                                                                                                                               www.analog.com
                                                                                                                                   ANALOG DEVICES, INC. 2019


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Analog Devices Inc.:
 LTC4332CUFD#PBF LTC4332IUFD#TRPBF LTC4332IUFD#PBF LTC4332HUFD#TRPBF LTC4332CUFD#TRPBF
 LTC4332HUFD#PBF DC2799A
