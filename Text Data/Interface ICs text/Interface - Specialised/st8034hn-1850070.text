                                                                   ST8034HN, ST8034HC
                                                                        24-pin smartcard interfaces
                                                                                       Datasheet - production data
                                                               ÔÇ∑ Automatic activation and deactivation
                                                                  sequences initiated by the microcontroller
                                                               ÔÇ∑ Emergency deactivation sequences initiated
                                                                  by a card supply short-circuit, card take-off,
                                                                  falling VDD, VDDP, or VDD(INTF) or by the
                                                                  interface device overheating
                                                               ÔÇ∑ Voltage supply supervisors
                                                                  ‚Äì with a fixed threshold (VDD, VDDP)
                                                                  ‚Äì with an external resistor divider to set the
                                                                       VDD(INTF) threshold (PORADJ pin)
                                                               ÔÇ∑ Multipurpose card status signal OFF
                                                               ÔÇ∑ Non-inverted card reset pin RST driven by the
                                                                  RSTIN input
                     QFN24 4 x 4 x 0.8 mm
                                                               ÔÇ∑ Thermal and short-circuit protection of all card
                                                                  contacts
                                                               ÔÇ∑ Card presence detection contacts debounced
Features                                                       ÔÇ∑ Enhanced card side ESD protection of 8 kV
                                                               ÔÇ∑ Space saving QFN24 4 x 4 x 0.8 mm package
ÔÇ∑ Complete smartcard interface
                                                               ÔÇ∑ Temperature range -25 to +85 ¬∞C
ÔÇ∑ ISO 7816, NDS and EMV 4.3 payment systems
    compatible
                                                               Applications
ÔÇ∑ Three protected half-duplex bidirectional
    buffered I/O lines to the smartcard                        Smartcard readers for
ÔÇ∑ 5 V, 3 V or 1.8 V supply voltage for the                     ÔÇ∑ Set-top boxes
    smartcard (VCC), pin-selectable. Ensures                   ÔÇ∑ Pay-TV
    controlled VCC rise and fall times and provides
    smart overload detection with glitch immunity.             ÔÇ∑ Identification
ÔÇ∑ Very low power consumption in deep shutdown                  ÔÇ∑ Banking
    mode                                                       ÔÇ∑ Tachographs
ÔÇ∑ Chip select function allows the device interface
    to be isolated from the microcontroller signals -
    allows parallel combination of the card
    interface devices (ST8034HC)
ÔÇ∑ Card clock generation by integrated crystal
    oscillator or from external clock source
ÔÇ∑ Card clock frequency up to 20 MHz,
    programmable by CLKDIV1 and CLKDIV2 pins
    (ST8034HN) or by CLKDIV pin (ST8034HC),
    with synchronous frequency changes
October 2013                                         DocID024511 Rev 2                                         1/31
This is information on a product in full production.                                                      www.st.com 1


Contents                                                                                       ST8034HN, ST8034HC
Contents
1        Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5
2        Block diagrams . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
3        Pin description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
4        Maximum ratings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
5        Electrical characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
         Electrical characteristics over recommended operating conditions . . . . . . . . . . . 11
6        Functional description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
         6.1     Power supplies . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
         6.2     Voltage supervisor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
         6.3     Clock circuits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
         6.4     Input and output circuits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
         6.5     Shutdown mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
         6.6     Deep shutdown mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
         6.7     Activation sequence . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
         6.8     Deactivation sequence . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
         6.9     VCC generator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
         6.10    Fault detection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
         6.11    VCC_SEL pin-programmed card supply voltage (VCC) . . . . . . . . . . . . . . 27
         6.12    Chip select (ST8034HC only) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
7        Package information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
8        Tape and reel information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
9        Revision history . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
2/31                                    DocID024511 Rev 2


ST8034HN, ST8034HC                                                                                                            List of tables
List of tables
Table 1.  Device summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5
Table 2.  Pin description ST8034HN and ST8034HC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
Table 3.  Absolute maximum ratings, . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
Table 4.  Thermal data. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
Table 5.  Recommended operating conditions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
Table 6.  Supply voltages . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
Table 7.  Card interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
Table 8.  Microcontroller interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
Table 9.  Clock circuits. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
Table 10. Protection characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
Table 11. Timing characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
Table 12. Clock frequency selection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
Table 13. VCC selection by VCC_SEL1, VCC_SEL2 pins . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
Table 14. QFN24 4 x 4 x 0.8 mm, 0.5 mm pitch package mechanical data, . . . . . . . . . . . . . . . . . . . 29
Table 15. Tape and reel specification for QFN24 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
Table 16. Document revision history . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
                                                   DocID024511 Rev 2                                                                          3/31


List of figures                                                                                            ST8034HN, ST8034HC
List of figures
Figure 1.    Block diagram ST8034HN . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
Figure 2.    Block diagram ST8034HC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
Figure 3.    Pin connections ST8034HN (top-through view) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
Figure 4.    Pin connections ST8034HC (top-through view) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
Figure 5.    Definition of duty cycle and input and output rise/fall times . . . . . . . . . . . . . . . . . . . . . . . . 18
Figure 6.    Voltage supervisor, configured with adjustable VDD(INTF) threshold. . . . . . . . . . . . . . . . . . 19
Figure 7.    Voltage supervisor waveforms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
Figure 8.    External clock usage. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
Figure 9.    Shutdown and deep shutdown mode activation and deactivation . . . . . . . . . . . . . . . . . . . 23
Figure 10.   Activation sequence . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
Figure 11.   Deactivation sequence . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
Figure 12.   Deactivation sequence after card removal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
Figure 13.   Debounce at OFF, CMDVCC, PRES and VCC pins . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
Figure 14.   QFN24 4 x 4 x 0.8 mm, 0.5 mm pitch package outline . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
Figure 15.   QFN24 recommended footprint . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
Figure 16.   Carrier tape for QFN24 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
4/31                                            DocID024511 Rev 2


ST8034HN, ST8034HC                                                                             Description
1           Description
            The ST8034HN and ST8034HC devices are complete low-cost analog interfaces for
            asynchronous and synchronous smartcards operating at a supply voltage of 5 V, 3 V or
            1.8 V. The ST8034HN and ST8034HC devices can be placed between the card and the
            microcontroller to provide all supply, protection, detection and control functions, with just
            a few external components.
                                       Table 1. Device summary
                             VCC
                                      Chip CLKDIV         NDS                                      Package
 Order code    PORADJ    selection                                      Package        Shipment
                                     select inputs compliant                                       topmark
                            pins
                                                                         QFN24
                                                                                       Tape and
ST8034HNQR         ÔÉö          ÔÉö                 2           ÔÉö       4 x 4 x 0.85 mm,               8034HN
                                                                                          reel
                                                                      0.5 mm pitch
                                                                         QFN24
                                                                                       Tape and
ST8034HCQR         ÔÉö          ÔÉö        ÔÉö        1           ÔÉö       4 x 4 x 0.85 mm,               8034HC
                                                                                          reel
                                                                      0.5 mm pitch
                                            DocID024511 Rev 2                                           5/31


Block diagrams                                                                                        ST8034HN, ST8034HC
2              Block diagrams
                                            Figure 1. Block diagram ST8034HN
                                     Q)                                            Q)
                                     9''       *1'                                      9''3
  9'' ,17)                                                                          
       5                           6833/<
                                   ,17(51$/                ,17(51$/
       325$'-                   5()(5(1&(                 26&,//$725
   
       5                           92/7$*(                      &/.83
                                     6(16(        $/$50                 (1
                                                                                    9&&           9&&
                                                                       39&&
       35(6                                                                         /'2
                                                                                                                       Q)
      567,1                                                 6(48(1&(5
                                                                        (1       5(6(7          567
                                                                               *(1(5$725
   &0'9&&
                                                                                                                   Q)
                                                                      (1
         2))                                   &/2&.                             &/2&.          &/.
                                              &,5&8,7   &/.          (1       *(1(5$725                         &$5'
    &/.',9                                                                                                   &211(&725
                 
    &/.',9                                                                                                      &    &
                      /(9(/
  9&&B6(/            6+,)7(5                 &5<67$/       7+(50$/                                           &    &
                                           26&,//$725      3527(&7,21               ,2           ,2
  9&&B6(/                                                                                                       &    &
                                                                               75$16&(,9(5
                                                                                                               &    &
       ,28&
                                                                                     ,2          $8;
                                                                             75$16&(,9(5
     $8;8&
                 
                                                         67+1                    ,2          $8;
     $8;8&                                                                    75$16&(,9(5
                                                     
                Q)
                                           ;7$/ ;7$/
                      9'' ,17)
                                                                                                                           $09
1. Optional external resistor divider. If not used, connect the PORADJ pin to VDD(INTF) for a direct VDD(INTF) voltage
   monitoring.
6/31                                                    DocID024511 Rev 2


ST8034HN, ST8034HC                                                                                             Block diagrams
                                            Figure 2. Block diagram ST8034HC
                                     Q)                                            Q)
                                     9''       *1'                                      9''3
  9'' ,17)                                                                          
                                    6833/<
       5
                                   ,17(51$/                ,17(51$/
       325$'-                   5()(5(1&(                 26&,//$725
   
       5 &6          &+,3        92/7$*(                      &/.83
                     6(/(&7          6(16(        $/$50                 (1
                                                                                    9&&           9&&
                                                                        39&&
                                                                                    /'2
       35(6                                                                                                          Q)
       567,1                                                6(48(1&(5
                                                                        (1       5(6(7          567
                                                                               *(1(5$725
   &0'9&&                                                                                                        Q)
                                                                      (1
                                               &/2&.                             &/2&.          &/.
         2))
                                               &,5&8,7   &/.          (1       *(1(5$725                         &$5'
                                                                                                             &211(&725
      &/.',9
                                                                                                               &    &
  9&&B6(/              /(9(/
                     6+,)7(5                 &5<67$/       7+(50$/                                          &    &
  9&&B6(/                                  26&,//$725      3527(&7,21               ,2           ,2
                                                                                                              &    &
       ,28&                                                                   75$16&(,9(5
                                                                                                                &    &
                                                                                     ,2          $8;
                                                                             75$16&(,9(5
     $8;8&
                 
                                                         67+&                    ,2          $8;
     $8;8&                                                                    75$16&(,9(5
                                                     
                Q)
                                           ;7$/ ;7$/
                      9'' ,17)
                                                                                                                          $09
1. Optional external resistor divider. If not used, connect the PORADJ pin to VDD(INTF) for a direct VDD(INTF) voltage
   monitoring.
                                                        DocID024511 Rev 2                                                      7/31


Pin description                                                            ST8034HN, ST8034HC
3           Pin description
                     Figure 3. Pin connections ST8034HN (top-through view)
                                              $8;8& $8;8&
                                           ;7$/           ,28&
                                        ;7$/                  2))
                                                     
                          9'' ,17)                                 325$'-
                          9&&B6(/                                 9''
                              567,1    
                                                67+1            9''3
                          9&&B6(/                                 9&&
                           &0'9&&                                  567
                            &/.',9                                &/.
                                                        
                                     &/.',9       ,2 $8; *1'
                                              35(6        $8;
                  4)1[[PPPPSLWFK7KHUPDOSDGQRWFRQQHFWHG
                                                                                       $09
                     Figure 4. Pin connections ST8034HC (top-through view)
                                              $8;8& $8;8&
                                           ;7$/           ,28&
                                        ;7$/                  2))
                                                     
                          9'' ,17)                                 325$'-
                          9&&B6(/                                 9''
                              567,1    
                                                67+&            9''3
                          9&&B6(/                                 9&&
                           &0'9&&                                  567
                                 &6                                &/.
                                                        
                                      &/.',9       ,2 $8; *1'
                                              35(6        $8;
                  4)1[[PPPPSLWFK7KHUPDOSDGQRWFRQQHFWHG
                                                                                       $09
8/31                                 DocID024511 Rev 2


ST8034HN, ST8034HC                                                                           Pin description
                     Table 2. Pin description ST8034HN and ST8034HC
  Pin
          Symbol   Ref. supply                                    Function
number
   1     VDD(INTF)  VDD(INTF)  Microcontroller interface supply voltage
   2    VCC_SEL2    VDD(INTF)  VCC selection control signal 5 V or 3 V (see Table 13 on page 27)
   3      RSTIN     VDD(INTF)  Card reset input from microcontroller; active high
                               VCC selection control signal 1.8 V, overrides VCC_SEL2 (see Table 13 on
   4    VCC_SEL1    VDD(INTF)
                               page 27)
   5     CMDVCC     VDD(INTF)  Activation sequence start, input (from microcontroller, active low)
                               CLK frequency division control input (together with CLKDIV2), see Table 12
         CLKDIV1    VDD(INTF)
                               on page 21 (ST8034HN)
   6
                               Chip select input. High = device active, low = all microcontroller interface
             CS     VDD(INTF)
                               pins in high impedance (ST8034HC)
                               CLK frequency division control (together with CLKDIV1), see Table 12 on
         CLKDIV2    VDD(INTF)
   7                           page 21 (ST8034HN)
          CLKDIV    VDD(INTF)  CLK frequency division control, see Table 12 on page 21 (ST8034HC)
   8       PRES     VDD(INTF)  Card presence input (active low: PRES low = card is present). Debounced.
   9         I/O       VCC     Card input/output data line (C7); internal 9 kÔÅó pull-up resistor to VCC
                               Auxiliary card input/output data line (C4); internal 9 kÔÅó pull-up resistor to
  10       AUX1        VCC
                               VCC
                               Auxiliary card input/output data line (C8); internal 9 kÔÅó pull-up resistor to
  11       AUX2        VCC
                               VCC
  12        GND                Ground
  13         CLK       VCC     Clock to card (C3)
  14        RST        VCC     Card reset, output (C2)
  15         VCC               Supply voltage for the card, output (C1)
  16        VDDP               LDO supply voltage input (for VCC generation)
  17         VDD               Control logic supply voltage input
                               Power-on reset threshold adjustment input (with an optional external
  18     PORADJ     VDD(INTF)
                               resistor divider)
                               Interrupt to microcontroller (active low output); internal 20 kÔÅó pull-up
  19        OFF     VDD(INTF)
                               resistor to VDD(INTF)
                               Microcontroller data I/O line (with internal 10 kÔÅó pull-up resistor connected
  20       I/OUC    VDD(INTF)
                               to VDD(INTF))
                               Auxiliary microcontroller input/output data line; internal 10 kÔÅó pull-up
  21     AUXUC1     VDD(INTF)
                               resistor to VDD(INTF)
                               Auxiliary microcontroller input/output data line; internal 10 kÔÅó pull-up
  22     AUXUC2     VDD(INTF)
                               resistor to VDD(INTF)
  23      XTAL1        VDD     Crystal or external clock input
  24      XTAL2        VDD     Crystal connection (leave this pin open if external clock is used)
                                        DocID024511 Rev 2                                                   9/31


Maximum ratings                                                                                 ST8034HN, ST8034HC
4         Maximum ratings
                                       Table 3. Absolute maximum ratings(1), (2)
             Symbol                                      Parameter                                  Min.   Max. Unit
               VDD        Supply voltage, logic                                                      -0.3    6     V
               VDDP       Supply voltage, power                                                      -0.3    6     V
             VDD(INTF)    Supply voltage, interface                                                  -0.3    6     V
                          Input voltage on XTAL1, XTAL2, RSTIN, I/OUC, AUX1UC,
                VIN       AUX2UC, CLKDIV1, CLKDIV2, CS, VCC_SEL1, VCC_SEL2,                          -0.3    6     V
                          PORADJ, CMDVCC, OFF, PRES, I/O, AUX1, and AUX2 pins
                          Human body model (HBM) on card lines - I/O, RST, VCC, CLK,
                                                                                                      -8     8    kV
            VESD (HBM)    and PRES pins
                          Human body model (HBM), all other pins                                      -2     2    kV
            VESD (MM)     Machine model (MM), all pins                                              -200   200     V
           VESD (FCDM) Field charged device model (FCDM), all pins                                  -500   500     V
               PTOT       Total power dissipation (TA = -25 to +85 ¬∞C)                                     0.25    W
              TJ(MAX)     Maximum operating junction temperature                                           125    ¬∞C
               TSTG       Storage temperature range                                                  -55   150    ¬∞C
          1. Absolute maximum ratings are those values beyond which damage to the device may occur. Functional
              operation under these conditions is not implied.
          2. All card contacts are protected against short-circuit to any other card contact.
                                                     Table 4. Thermal data
                                                                                           Test
             Symbol                              Parameter                                            Typ.      Unit
                                                                                       conditions
                          Thermal resistance junction-ambient temperature
              RTHJA                                                                       QFN24        47      ¬∞C/W
                          (multilayer test board - JEDEC standard)
                                     Table 5. Recommended operating conditions
             Symbol                   Parameter                   Test conditions          Min.      Max.      Unit
                TA        Ambient temperature range                                         -25        85       ¬∞C
10/31                                          DocID024511 Rev 2


ST8034HN, ST8034HC                                                                Electrical characteristics
5           Electrical characteristics
Electrical characteristics over recommended operating conditions
                                        Table 6. Supply voltages
 Symbol              Parameter                     Test conditions(1)            Min.    Typ.   Max.   Unit
Device supply voltages
   VDD     Supply voltage, logic                                                  2.7     3.3   3.6(2)   V
                                        VCC = 5 V                                 4.85     5     5.5
   VDDP    Supply voltage, power                                                                         V
                                        VCC = 3 V or 1.8 V                          3     3.3    5.5
           Supply voltage,                                                                       VDD
 VDD(INTF)                                                                        1.6     3.3            V
           microcontroller interface                                                           +0.3(3)
                                        Shutdown mode                                             35
                                                                                                        ÔÅ≠A
    IDD    Supply current, logic        Deep shutdown mode                                        12
                                        Active mode                                                2    mA
                                        Shutdown mode, fXTAL stopped                               5    ÔÅ≠A
   IDDP    Supply current, power        Active mode, fCLK = fXTAL/2, no ICC load                 1.5
                                                                                                        mA
                                        Active mode, fCLK = fXTAL/2, ICC = 65 mA                  70
                                        Shutdown mode                                              6    ÔÅ≠A
 IDD(INTF) Supply current, interface
                                        Active mode                                                2    mA
Card supply voltage
                                        Active mode, VCC = 5 V, ICC < 65 mA       4.75    5.0   5.25
                                        With current pulses of 40 nAs at
                                                                                  4.65    5.0   5.25
                                        ICC < 200 mA, t < 400 ns(5)
                                        Active mode, VCC = 3 V, ICC < 65 mA       2.85   3.05   3.15
           Card supply voltage
   VCC                                  With current pulses of 40 nAs at                                 V
           (output)(4)                                                            2.76          3.20
                                        ICC < 200 mA, t < 400 ns(5)
                                        Active mode, VCC = 1.8 V, ICC < 65 mA     1.71   1.83   1.89
                                        With current pulses of 15 nAs at
                                                                                  1.66          1.94
                                        ICC < 200 mA, t < 400 ns(5)
           Card supply current (refer   VCC = 5 V, 3 V or 1.8 V                                   65
    ICC    also to Table 10: Protection                                                                 mA
           characteristics on page 17)  VCC shorted to GND                         90    120     150
   CVCC    VCC decoupling capacitor (4) VCC to GND                                160    320     530    nF
                                        VCC = 5 V                                0.055 0.180   0.300
           VCC slew rate (rising or
    SR                                  VCC = 3 V                                0.040 0.180   0.300   V/ÔÅ≠s
           falling)(4)
                                        VCC = 1.8 V                              0.025 0.180   0.300
                                             DocID024511 Rev 2                                         11/31


Electrical characteristics                                                                            ST8034HN, ST8034HC
                                         Table 6. Supply voltages (continued)
   Symbol                Parameter                           Test conditions(1)                   Min.    Typ.     Max.     Unit
                VCC output voltage in           No load                                           -0.1              0.1
  VCC(SHDN)                                                                                                                   V
                shutdown mode                   ICC = 1 mA                                        -0.1              0.3
                VCC output current in
 ICC(SHDN)                                      VCC connected to GND                                                -1       mA
                shutdown mode
 Device supply voltages monitoring
                                                VDD pin                                            2.3     2.4      2.5
                Falling supply voltage          VDDP pin (VCC = 5 V)                               3.0     4.1      4.4
      VTH                                                                                                                     V
                threshold                       VDDP pin (VCC = 3 V or 1.8 V)                      2.3     2.4      2.5
                                                PORADJ pin                                        1.20    1.24     1.29
                                                VDD pin                                            50     100      150
                Hysteresis on supply            VDDP pin (VCC = 5 V)                              100     200      350
     VHYS                                                                                                                    mV
                voltage threshold               VDDP pin (VCC = 3 V or 1.8 V)                      50     100      150
                                                PORADJ pin                                         10      20       30
  II(PORADJ) Input current, PORADJ pin                                                             -1                1       ÔÅ≠A
                Power-on or undervoltage
       tW                                                                                         5.1       8      10.2      ms
                reset pulse width (minimum)
1. TA = 25 ¬∞C, VDD = 3.3 V, VDDP = 5 V, VDD(INTF) = 3.3 V, fXTAL = 10 MHz, unless otherwise noted.
2. The device can operate at VDD supply voltage up to 5.5 V, however the specified parameters (mainly related to current
     consumption) are guaranteed in the basic VDD range 2.7 to 3.6 V.
3. The device can operate at VDD(INTF) supply voltage up to 5.5 V, however the specified parameters (mainly related to current
     consumption and input currents) are guaranteed in the basic VDD(INTF) range 1.6 to 3.6 V.
4. Two low ESR (< 350 mÔÅó) ceramic capacitors for VCC decoupling recommended: 100 nF ¬± 20% (up to 330 nF ¬± 20%) close
     to the ST8034 and 100 nF ¬± 20% (up to 330 nF ¬± 20%) close to the card.
5. These current pulses are filtered by the decoupling capacitors on the VCC pin, therefore for the LDO just the mean value
     matters.
12/31                                                DocID024511 Rev 2


ST8034HN, ST8034HC                                                               Electrical characteristics
                                            Table 7. Card interface
Symbol           Parameter                    Test conditions(1)          Min.      Typ.      Max.    Unit
Data lines to the card (I/O, AUX1, AUX2 pins)(2)
                                    Falling edge on pin I/O to falling
    tD   Delay time                                                                           200      ns
                                    edge on I/OUC or vice versa
 tW(PU)  Pull-up pulse width                                              100                 400      ns
    fIO  Input/output frequency                                                                 1     MHz
    CI   Input capacitance                                                                     10      pF
         Output voltage in          No load                                 0                  0.1      V
    VO
         shutdown mode              IO = 1 mA                               0                  0.3      V
         Output current in
    IO                              I/O connected to GND                                       -1      mA
         shutdown mode
                                    IOL = 1 mA                              0                  0.3
  VOL    Output voltage low                                                                             V
                                    IOL ÔÇ≥ 15 mA (current limit)        VCC - 0.4              VCC
                                    No load                            0.9 VCC              VCC + 0.1
                                    IOH < -40 ÔÅ≠A, 5 V or 3 V           0.75 VCC             VCC + 0.1
  VOH    Output voltage high                                                                            V
                                    IOH < -20 ÔÅ≠A, 1.8 V                0.75 VCC             VCC + 0.1
                                    IOH ÔÇ≥ -15 mA (current limit)            0                  0.4
   VIL   Input voltage low                                                -0.3                 0.8      V
                                    VCC = 5 V                           0.6 VCC             VCC + 0.3
   VIH   Input voltage high                                                                             V
                                    VCC = 3 V or 1.8 V                  0.7 VCC             VCC + 0.3
  VHYS   Hysteresis                 I/O pin                                          50                mV
    IIL  Input current low          I/O pin, VIL = 0 V                                        750      ÔÅ≠A
    IIH  Input current high         I/O pin, VIH = VCC                                         10      ÔÅ≠A
   tR(I) Input rise time            VIL max. to VIH min.                                      0.15     ÔÅ≠s
  tR(O)  Output rise time           CL ÔÇ£ 80 pF, 10% to 90%, 0 V to VCC                         0.1     ÔÅ≠s
   tF(I) Input fall time            VIL max. to VIH min.                                      0.15     ÔÅ≠s
  tF(O)  Output fall time           CL ÔÇ£ 80 pF, 10% to 90%, 0 V to VCC                         0.1     ÔÅ≠s
  RPU    Pull-up resistance to VCC                                          7         9        11      kÔÅó
         Pull-up current (one-shot
   IPU                              VOH = 0.9 VCC                          -8        -6        -4      mA
         circuit active)
Reset output to the card (RST pin)
         Output voltage in          No load                                 0                  0.1
    VO                                                                                                  V
         shutdown mode              IO = 1 mA                               0                  0.3
         Output current in
    IO                              RST connected to GND                                       -1      mA
         shutdown mode
                                    Between RSTIN and RST; RST
    tD   Delay time                                                                             2      ÔÅ≠s
                                    enabled
                                                DocID024511 Rev 2                                     13/31


Electrical characteristics                                                                         ST8034HN, ST8034HC
                                           Table 7. Card interface (continued)
 Symbol              Parameter                        Test conditions(1)                  Min.     Typ.     Max.     Unit
                                           IOL = 200 ÔÅ≠A, VCC = 5 V                          0                0.3
   VOL      Output voltage low             IOL = 200 ÔÅ≠A, VCC = 3 V or 1.8 V                 0                0.2       V
                                           IOL = 20 mA (current limit)                VCC - 0.4              VCC
                                           IOH = -200 ÔÅ≠A                               0.9 VCC               VCC
   VOH      Output voltage high                                                                                        V
                                           IOH = -20 mA (current limit)                     0                0.4
    tR      Rise time                      CL = 100 pF                                                       0.1
                                                                                                                      ÔÅ≠s
     tF     Fall time                      CL = 100 pF                                                       0.1
 Clock output to the card (CLK pin)
            Output voltage in              No load                                          0                0.1
    VO                                                                                                                 V
            shutdown mode                  IO = 1 mA                                        0                0.3
            Output current in
    IO                                     CLK connected to GND                                               -1     mA
            shutdown mode
                                           IOL = 200 ÔÅ≠A                                     0                0.3
   VOL      Output voltage low                                                                                         V
                                           IOL = 70 mA (current limit)                VCC - 0.4              VCC
                                           IOH = -200 ÔÅ≠A                               0.9 VCC               VCC
   VOH      Output voltage high                                                                                        V
                                           IOH = -70 mA (current limit)                     0                0.4
    tR      Rise time(3)                   CL = 30 pF                                                         16      ns
     tF     Fall time(3)                   CL = 30 pF                                                         16      ns
   fCLK     Frequency on pin CLK           Operational                                      0                 20     MHz
    DC      Duty cycle(3)                  CL = 30 pF                                      45                 55      %
            Slew rate (rise and fall,      VCC = 5 V                                       0.2
    SR                                                                                                               V/ns
            CL = 30 pF)                    VCC = 3 V or 1.8 V                             0.12
 Card detection input (PRES pin)(4)
                                                                                                             0.3
    VIL     Input voltage low                                                             -0.3                         V
                                                                                                           VDD(INTF)
                                                                                           0.7             VDD(INTF)
    VIH     Input voltage high                                                                                         V
                                                                                      VDD(INTF)             + 0.3
                                                                                                   0.14
  VHYS      Hysteresis                                                                                                 V
                                                                                                 VDD(INTF)
    IIL     Input current low              0 < VIL < VDD(INTF)                                                 5      ÔÅ≠A
    IIH     Input current high             0 < VIH < VDD(INTF)                                                 5      ÔÅ≠A
1. TA = 25 ¬∞C, VDD = 3.3 V, VDDP = 5 V, VDD(INTF) = 3.3 V, fXTAL = 10 MHz, unless otherwise noted.
2. With an internal 9 kÔÅó pull-up resistor to VCC.
3. For rise and fall times and duty cycle definitions, see Figure 5 on page 18.
4. PRES is active low, with an internal current source of 1.25 ÔÅ≠A (pull-up) to VDD(INTF).
14/31                                                   DocID024511 Rev 2


ST8034HN, ST8034HC                                                                Electrical characteristics
                                      Table 8. Microcontroller interface
 Symbol              Parameter                Test conditions(1)        Min.      Typ.       Max.    Unit
Data lines to the microcontroller (I/OUC, AUX1UC, AUX2UC pins)(2)
                                        Falling edge on pin I/O to
     tD      Delay time                 falling edge on I/OUC or vice                         200      ns
                                        versa
  tW(PU)     Pull-up pulse width                                        100                  400       ns
     fIO     Input/output frequency                                                            1     MHz
     CI      Input capacitance                                                                10       pF
   VOL       Output voltage low         IOL = 1 mA                        0                   0.3      V
                                                                        0.9               VDD(INTF)
                                        No load
                                                                      VDD(INTF)              + 0.1
                                        IOH ÔÇ£ -40 ÔÅ≠A;                   0.75              VDD(INTF)
   VOH       Output voltage high                                                                       V
                                        VDD(INTF) > 2 V               VDD(INTF)              + 0.1
                                        IOH ÔÇ£ -20 ÔÅ≠A;                   0.75              VDD(INTF)
                                        VDD(INTF) < 2 V               VDD(INTF)              + 0.1
                                                                                              0.3
    VIL      Input voltage low                                          -0.3                           V
                                                                                          VDD(INTF)
                                                                        0.7               VDD(INTF)
    VIH      Input voltage high                                                                        V
                                                                      VDD(INTF)              + 0.3
                                                                                  0.14
   VHYS      Hysteresis                 I/OUC pin                                                      V
                                                                                VDD(INTF)
     IIL     Input current low          VIL = 0 V                                             500     ÔÅ≠A
     IIH     Input current high         VIH = VDD(INTF)                                       10      ÔÅ≠A
             Pull-up resistance to
   RPU                                                                    8        10         12      kÔÅó
             VDD(INTF)
             Pull-up current (one-shot
    IPU                                 VOH = 0.9 VDD(INTF)              -1                           mA
             circuit active)
    tR(I)    Input rise time            VIL max. to VIH min.                                 0.15      ÔÅ≠s
                                        CL ÔÇ£ 30 pF, 10% to 90%, 0 V
   tR(O)     Output rise time                                                                 0.1      ÔÅ≠s
                                        to VDD(INTF)
    tF(I)    Input fall time            VIL max. to VIH min.                                 0.15      ÔÅ≠s
                                        CL ÔÇ£ 30 pF, 10% to 90%, 0 V
   tF(O)     Output fall time                                                                 0.1      ÔÅ≠s
                                        to VDD(INTF)
Device control inputs (CLKDIV1, CLKDIV2, RSTIN, VCC_SEL1, VCC_SEL2, CS pins)(3)
                                                                                              0.3
    VIL      Input voltage low                                          -0.3                           V
                                                                                          VDD(INTF)
                                                                                          VDD(INTF)
    VIH      Input voltage high                                       VDD(INTF)                        V
                                                                                             + 0.3
                                                                                  0.14
   VHYS      Hysteresis                                                                                V
                                                                                VDD(INTF)
                                                 DocID024511 Rev 2                                     15/31


Electrical characteristics                                                                           ST8034HN, ST8034HC
                                   Table 8. Microcontroller interface (continued)
  Symbol               Parameter                    Test conditions(1)            Min.          Typ.         Max.       Unit
       IIL      Input current low                                                                              1         ÔÅ≠A
       IIH      Input current high                                                                             1         ÔÅ≠A
                             (4)
 Control input CMDVCC
                                                                                                              0.3
      VIL       Input voltage low                                                 -0.3                                    V
                                                                                                           VDD(INTF)
                                                                                  0.7                      VDD(INTF)
      VIH       Input voltage high                                                                                        V
                                                                               VDD(INTF)                     + 0.3
                                                                                                 0.14
    VHYS        Hysteresis                                                                                                V
                                                                                              VDD(INTF)
       IIL      Input current low             VIL = 0 V                                                        1         ÔÅ≠A
       IIH      Input current high            VIH = VDD(INTF)                                                  1         ÔÅ≠A
                Frequency at CMDVCC
  fCMDVCC                                                                                                     100        Hz
                pin
 OFF output(5)
      VOL       Output voltage low            IOL = 2 mA                            0                         0.3         V
                                                                                  0.75
     VOH        Output voltage high           IOH = -15 ÔÅ≠A                                                                V
                                                                               VDD(INTF)
                Pull-up resistance to
     RPU                                                                           16             20          24         kÔÅó
                VDD(INTF)
1. TA = 25 ¬∞C, VDD = 3.3 V, VDDP = 5 V, VDD(INTF) = 3.3 V, fXTAL = 10 MHz, unless otherwise noted.
2. With an internal 10 kÔÅó pull-up resistor to VDD(INTF).
3. For clock frequency division control (CLKDIV), see Table 12 on page 21.
4. CMDVCC is active low.
5. OFF is an NMOS open drain, with an internal 20 kÔÅó pull-up resistor to VDD(INTF). The pull-up is connected only when used
    (i.e. when OFF = high), otherwise disconnected.
16/31                                                 DocID024511 Rev 2


ST8034HN, ST8034HC                                                                              Electrical characteristics
                                                   Table 9. Clock circuits
    Symbol                     Parameter                        Test conditions(1)         Min.     Typ.     Max.    Unit
 Internal oscillator
  fOSC(INT)LOW                                              Shutdown mode                   100      150      200    kHz
                  Internal oscillator frequency
    fOSC(INT)                                               Active state                      2      2.7      3.2    MHz
 Crystal oscillator (XTAL1 and XTAL2 pins)
                                                            XTAL1 and XTAL2 to GND
      CEXT        External capacitances                     (according to the crystal or                       15     pF
                                                            resonator specification)
                                                            Card clock reference,
      fXTAL       External crystal frequency                                                  2                26    MHz
                                                            crystal oscillator
       fEXT       External clock frequency                  External clock on XTAL1       0.032                26    MHz
     tR(fEXT)     External clock frequency rise time External clock on XTAL1                                   10     ns
     tF(fEXT)     External clock frequency fall time External clock on XTAL1                                   10     ns
                                                            Crystal oscillator             -0.3             0.3 VDD
        VIL       Input voltage low                                                                           0.3      V
                                                            External clock on XTAL1        -0.3
                                                                                                           VDD(INTF)
                                                            Crystal oscillator           0.7 VDD           VDD + 0.3
        VIH       Input voltage high                                                        0.7            VDD(INTF)   V
                                                            External clock on XTAL1
                                                                                         VDD(INTF)           + 0.3
1. TA = 25 ¬∞C, VDD = 3.3 V, VDDP = 5 V, VDD(INTF) = 3.3 V, fXTAL = 10 MHz, unless otherwise noted.
                                          Table 10. Protection characteristics
     Symbol                     Parameter                        Test conditions(1)         Min.     Typ.     Max.   Unit
                                                            I/O pin                          -15               15
                                         (2)
       IOLIM       Output current limit                     CLK pin                          -70               70    mA
                                                            RST pin                          -20               20
                   Limit and shutdown card supply
     ISD(VCC)                                               VCC pin                           90      120     150    mA
                   current
        TSD        Shutdown junction temperature                                                      150             ¬∞C
1. TA = 25 ¬∞C, VDD = 3.3 V, VDDP = 5 V, VDD(INTF) = 3.3 V, fXTAL = 10 MHz, unless otherwise noted.
2. All card contacts are protected against short-circuit to any other card contact.
                                                       DocID024511 Rev 2                                             17/31


Electrical characteristics                                                                         ST8034HN, ST8034HC
                                          Table 11. Timing characteristics
    Symbol                       Parameter                         Test conditions(1)       Min.     Typ. Max.    Unit
                                                                See Figure 10 on
       tACT       Activation time                                                          2090           4160     ¬µs
                                                                page 24
                                                                See Figure 11 on
     tDEACT       Deactivation time                                                          35       90   250     ¬µs
                                                                page 25
                                                                tD(START) = t3,
                                                                see Figure 10 on           2090           4112
   tD(START),     Delay time, CLK sent to card using an page 24
                                                                                                                   ¬µs
     tD(END)      external clock                                t         =t ,
                                                                  D(END)    5
                                                                see Figure 10 on           2120           4160
                                                                page 24
       tDEB       Debounce time                                 PRES pin                     3.2      4.5  6.4    ms
1. TA = 25 ¬∞C, VDD = 3.3 V, VDDP = 5 V, VDD(INTF) = 3.3 V, fXTAL = 10 MHz, unless otherwise noted.
                  Figure 5. Definition of duty cycle and input and output rise/fall times
                    W5                               W)
                                                                                                92+
                                          
                                                                                                 92+92/ 
                                                
                                                                                                92/
                                    W                                 W
                                                                                                                $0
               Duty cycle (DC) = t1 / (t1 + t2).
18/31                                                DocID024511 Rev 2


ST8034HN, ST8034HC                                                              Functional description
6         Functional description
          Throughout this document it is assumed that the reader is familiar with ISO7816
          terminology.
6.1       Power supplies
          All interface signals to the host microcontroller are referenced to VDD(INTF). All card contacts
          remain inactive during power-up or power-down. After powering up the device, OFF output
          remains low until CMDVCC input is set high and PRES input is low. During power-down,
          OFF output goes low when VDDP falls below the VDDP falling threshold voltage. The internal
          oscillator clock frequency fOSC(INT) is used only during the activation sequence. When the
          card is not activated (CMDVCC input is high), the internal oscillator is in low frequency
          mode to reduce power consumption.
          Power-on sequence: supply voltages may be applied to the ST8034 in any sequence.
6.2       Voltage supervisor
                 Figure 6. Voltage supervisor, configured with adjustable VDD(INTF) threshold
                9'' ,17)
                                                      9'' ,17)
                                 5
                                     325$'-
                                                              
                                                              
                                 5                                      9''
                                       9''                            5()(5(1&(
                                                                       92/7$*(
                                                              
                                                              
                                      9''3
                                                              
                                                              
                                 9&&B6(/
                                                                                                    $0
                                           DocID024511 Rev 2                                          19/31


Functional description                                                                 ST8034HN, ST8034HC
            The voltage supervisor monitors the VDDP, VDD, and VDD(INTF) voltages and provides both
            power-on reset (POR) and supply dropout detection during a card session. The supervisor
            threshold voltages for VDDP and VDD are set internally, and VDD(INTF) is set externally by an
            external resistor divider on the PORADJ pin, which provides additional voltage monitoring
            flexibility (this pin can be used for monitoring any external voltage, with adjustable
            threshold):
            Undervoltage (UVLO) threshold adjustment on the PORADJ input with the resistor divider:
            VDD(INTF) UVLO threshold (falling) = (R1+R2)/R2 x VTH(PORADJ)
            VDD(INTF) UVLO threshold (rising) = (R1+R2)/R2 x (VTH(PORADJ) + VHYST(PORADJ))
            If the external resistor divider is not used, connect the PORADJ pin to VDD(INTF), then
            VDD(INTF) UVLO threshold = VTH(PORADJ).
            As long as VDDP, VDD or VDD(INTF) is less than the corresponding VTH + VHYS, the device
            remains inactive irrespective of the command line levels. After VDDP, VDD, and VDD(INTF)
            has reached a level higher than the corresponding VTH + VHYS, the device still remains
            inactive for the duration of tW, a defined reset pulse of approximately 8 ms (tW = 1024 x
            1/fOSC(INT)LOW) when the output of the supervisor keeps the control logic in reset state. This
            is used to maintain the device in shutdown mode during the supply voltage power-on, see
            Figure 7. A deactivation sequence is performed when either VDD, VDDP or VDD(INTF) falls
            below the corresponding VTH.
                                         Figure 7. Voltage supervisor waveforms
                          97+9+<6
                                   97+
                           9''9''3
               9'' ,17) 9 325$'-
                               $/$50
                        LQWHUQDOVLJQDO
                                                SRZHURQ W:          VXSSO\GURSRXW W:             SRZHURII
                                                                                                             $0
6.3         Clock circuits
            The clock signal for the card (CLK output) is either provided by an external clock signal
            connected to the XTAL1 pin or generated by a crystal connected between the XTAL1 and
            XTAL2 pins. The ST8034 automatically detects if an external clock is connected to XTAL1,
            which eliminates the need for a separate clock source selection pin. Automatic clock source
            detection is performed on each activation command (falling edge of CMDVCC). The
            presence of an external clock on the XTAL1 pin is checked during a time window defined by
            the internal oscillator. If the external clock is detected, the crystal oscillator is stopped. If the
            clock is not detected, the crystal oscillator is started. When the external clock is used, the
            clock signal must be present on the XTAL1 pin before the CMDVCC falling edge. If the
            external clock is used, connect it to XTAL1 input and leave the XTAL2 pin floating. The
            XTAL1 pin can not be left floating, either a crystal or an external clock source needs to be
            connected, or the XTAL1 pin needs to be grounded.
20/31                                          DocID024511 Rev 2


ST8034HN, ST8034HC                                                              Functional description
                                          Figure 8. External clock usage
                                                   /2*,&
                                        (1&/.,1             &/.;7$/
                                                        08/7,3/(;(5
                                                             &5<67$/
                                                     ;7$/       ;7$/
                                                                                                $09
          The clock frequency is selected by the CLKDIV1 and CLKDIV2 pins and is fXTAL, fXTAL/2,
          fXTAL/4 or fXTAL/8 in the case of the ST8034HN or either fXTAL or fXTAL/2 in the case of the
          ST8034HC, selected by the CLKDIV pin, see Table 12.
          The frequency change is synchronous, meaning that after transition on the CLKDIV input,
          the present clock period is completed and after that the new whole clock period starts,
          therefore no clock period is shortened during the frequency switchover.
          If an external crystal is used, the duty cycle on the CLK pin should be between 45% and
          55%. If an external clock is connected to the XTAL1 pin, its duty cycle must be between 48%
          and 52% so that the CLK output duty cycle is between 45% and 55%.
                                       Table 12. Clock frequency selection
                                                     ST8034HN
                 CLKDIV1 pin level                CLKDIV2 pin level               CLK frequency
                         Low                             Low                          fXTAL/8
                         Low                             High                         fXTAL/4
                        High                             High                         fXTAL/2
                        High                             Low                           fXTAL
                                                     ST8034HC
                          CLKDIV pin level                                CLK frequency
                                  High                                        fXTAL/2
                                  Low                                          fXTAL
6.4       Input and output circuits
          When the I/O and I/OUC pins are pulled high by a 9 kÔÅó resistor between I/O and VCC and/or
          10 kÔÅó resistor between I/OUC and VDD(INTF), both lines enter the idle state. The I/O pin is
          referenced to VCC and the I/OUC pin to VDD(INTF), which allows operation at VCC level
          different from VDD(INTF) level.
                                           DocID024511 Rev 2                                       21/31


Functional description                                                               ST8034HN, ST8034HC
            The first side on which a falling edge occurs becomes the master. An anti-latch circuit
            disables falling edge detection on the other side, making it the slave. After a time delay tD,
            the logic 0 present on the master side is sent to the slave side. When the master side
            returns logic 1, the slave side sends logic 1 during time delay (tW(PU)). After this sequence,
            both master and slave sides return to their idle states.
            The active pull-up feature (one-shot circuit) ensures fast low to high transitions, making the
            ST8034 outputs capable of delivering more than 1 mA, up to an output voltage of 0.9 VCC, at
            a load of 80 pF. At the end of the active pull-up pulse, the output voltage is dependent on the
            internal pull-up resistor value and load current. The current sent to and received from the
            card's I/O lines is limited to 15 mA at a maximum frequency of 1 MHz.
6.5         Shutdown mode
            After a power-on reset, if CMDVCC is high, the ST8034 enters shutdown mode, ensuring
            only the minimum number of circuits are active while the ST8034 waits for the
            microcontroller to start a session.
            ÔÇ∑    All card contacts are inactive. The impedance between the contacts and GND is
                 approximately 200 ÔÅó
            ÔÇ∑    I/OUC, AUX1UC, AUX2UC pins are in high impedance with the 10 kÔÅó pull-up resistor
                 connected to VDD(INTF)
            ÔÇ∑    The voltage generators are stopped
            ÔÇ∑    The voltage supervisor is active
            ÔÇ∑    The internal oscillator runs at its lowest frequency (fOSC(INT)LOW).
22/31                                        DocID024511 Rev 2


ST8034HN, ST8034HC                                                              Functional description
6.6       Deep shutdown mode
          When the smartcard reader is inactive, the ST8034HN and ST8034HC enter a deep
          shutdown mode if the CMDVCC pin is forced high and the VCC_SEL1 and VCC_SEL2 pins
          are low. In deep shutdown mode, all circuits are disabled and the OFF pin follows the status
          of the PRES pin. Changing the status of either CMDVCC, VCC_SEL1 or VCC_SEL2 exits
          the deep shutdown mode, see Figure 9.
          Figure 9. Shutdown and deep shutdown mode activation and deactivation
                    'HDFWLYDLRQ
                     VHTXHQFH
   &0'9&&
  9&&B6(/
  9&&B6(/
           
      0RGH          $FWLYH                   'HHSVKXWGRZQ             6KXWGRZQ           $FWLYH
                                                                       'HERXQFH
       2))
      35(6
       9&&
                                                                                               $09
6.7       Activation sequence
          The following device activation sequence is applied when using an external clock, also see
          Figure 10:
          1.   CMDVCC is pulled low (t0).
          2.   The internal oscillator is triggered (t0).
          3.   The internal oscillator changes to high frequency (t1).
          4.   VCC rises from 0 V to 1.8 V or to 3 V or to 5 V on a controlled slope (t2).
          5.   I/O, AUX1, AUX2 are driven high (t3).
          6.   The clock on the CLK output is applied to the C3 contact (t4).
          7.   RST is enabled (t5).
                                            DocID024511 Rev 2                                      23/31


Functional description                                                               ST8034HN, ST8034HC
            Time delays
            ÔÇ∑      t1 = t0 + 384 √ó 1/fOSC(INT)LOW
            ÔÇ∑      t2 = t1
            ÔÇ∑      t3 (tD(START)) = t1 + 17T/2
            ÔÇ∑      t4 = driven by host microcontroller; > t3 and < t5
            ÔÇ∑      t5 (tD(END)) = t1 + 23T/2.
            T = 64 x 1/fOSC(INT).
                                           Figure 10. Activation sequence
          &0'9&&
               ;7$/
                 
                9&&
                 ,2                                                                       $75
                &/.
                                                      !QV
             567,1
                567
              ,28&
        ,17(51$/        ORZIUHTXHQF\                                 KLJKIUHTXHQF\
      26&,//$725
                              W   W W      W W W' (1'  W$&7
                                       W W' 67$57
                                                                                                   $0
6.8         Deactivation sequence
            When a session ends, the microcontroller sets CMDVCC high. The ST8034 device then
            executes an automatic deactivation sequence by counting the sequencer back to the
            inactive state (see Figure 11):
            1.     RST goes low (t11).
            2.     The clock is stopped, CLK is low (t12).
            3.     I/O, AUX1, AUX2 are pulled low (t13).
            4.     VCC falls to 0 V (t14). The deactivation sequence is completed when VCC reaches its
                   inactive state.
            5.     VCC < 0.4 V (tDEACT).
            6.     All card contacts become low impedance to GND. The I/OUC, AUX1UC and AUX2UC
                   pins remain pulled up to VDD(INTF) by the internal 10 kÔÅó pull-up resistor.
            7.     The internal oscillator returns to its low frequency mode.
24/31                                              DocID024511 Rev 2


ST8034HN, ST8034HC                                                                   Functional description
          Time delays
          ÔÇ∑     t11 = t10 + 3T / 64
          ÔÇ∑     t12 = t11 + T / 2
          ÔÇ∑     t13 = t11 + T
          ÔÇ∑     t14 = t11 + 3T / 2
          ÔÇ∑     tDEACT = t11 + 3T / 2 + VCC fall time.
          T = 64 x 1/fOSC(INT).
                                   Figure 11. Deactivation sequence
         &0'9&&
              567
              &/.
               ,2
              9&&
            ;7$/
        ,17(51$/
                                    KLJKIUHTXHQF\                          ORZIUHTXHQF\
      26&,//$725
                              W W W        W W
                                                    W'($&7
                                                                                                    $0
6.9       VCC generator
          The LDO on the VCC output is capable of supplying up to 65 mA continuously at any
          selected VCC value (5 V, 3 V or 1.8 V). This output is overcurrent protected by the current
          limiter with a limit threshold value of 120 mA typ., with a glitch immunity allowing overcurrent
          pulses up to 200 mA with duration up to several microseconds not causing a deactivation
          (the average current value must stay below the specified current limit, see Table 6 on
          page 11 and Table 10 on page 17).
          A 100 nF capacitor (min.) with ESR < 350 mÔÅó should be tied to GND near the VCC pin and
          another low ESR 100 nF capacitor (min.) should be tied to GND also on the card side, near
          the card reader contact C1.
                                                  DocID024511 Rev 2                                   25/31


Functional description                                                                  ST8034HN, ST8034HC
6.10         Fault detection
             The fault conditions monitored by the device are:
             ÔÇ∑      Short-circuit or overcurrent on the VCC pin
             ÔÇ∑      Card removal during transaction
             ÔÇ∑      VDD falling
             ÔÇ∑      VDDP falling
             ÔÇ∑      VDD(INTF) falling
             ÔÇ∑      Overheating.
             There are two different fault detection situations:
             ÔÇ∑      Outside card session (CMDVCC pin is high): the OFF pin is low if the card is not in the
                    reader and high if the card is in the reader. Any voltage drop on VDD, VDDP or VDD(INTF)
                    is detected by the voltage supervisor. This generates an internal power-on reset pulse
                    but does not act upon the OFF pin signal. The card is not powered-up and short-circuits
                    or overheating are not detected.
             ÔÇ∑      In card session (CMDVCC pin is low): when the OFF pin goes low, the fault detection
                    circuit triggers the automatic emergency deactivation sequence (see Figure 12).
             On card insertion or removal, bouncing can occur on the card presence switch (i.e. on the
             PRES signal). Therefore a debouncing feature is integrated into the ST8034 (4.5 ms
             typically, tDEB = 640 √ó 1/fOSC(INT)LOW). See Figure 13.
             On card insertion, the OFF pin goes high after the debounce time has elapsed. When the
             card is extracted, the automatic card deactivation sequence is performed on the first high to
             low transition on the PRES pin. After this, the OFF pin goes low.
                            Figure 12. Deactivation sequence after card removal
              2))
            35(6
              567
              &/.
               ,2
              9&&
            ;7$/
                  
        ,17(51$/
                                      KLJKIUHTXHQF\                          ORZIUHTXHQF\
      26&,//$725
                                W                W  W   W
                                                  W'($&7
                                                                                                     $0
26/31                                              DocID024511 Rev 2


ST8034HN, ST8034HC                                                                      Functional description
                             Figure 13. Debounce at OFF, CMDVCC, PRES and VCC pins
                 35(6
                    2))
              &0'9&&                           W                                      W
                                                '(%                                    '(%
                                                                                                   
                   9&&
                                                                                                        $0
          1. Deactivation caused by card withdrawal.
          2. Deactivation caused by short-circuit on card side.
6.11      VCC_SEL pin-programmed card supply voltage (VCC)
          The card supply voltage (VCC) is selected by the VCC_SEL1 and VCC_SEL2 inputs, see
          Table 13.
                                Table 13. VCC selection by VCC_SEL1, VCC_SEL2 pins
                 VCC_SEL1 pin level                   VCC_SEL2 pin level                      VCC
                            Low                                 x(1)                          1.8 V
                            High                                High                           5V
                            High                                Low                            3V
          1. x = ‚Äúdon't care‚Äù. However keep in mind that combination VCC_SEL1 = VCC_SEL2 = GND and CMDVCC =
              high initiates deep shutdown mode.
6.12      Chip select (ST8034HC only)
          The chip select (CS) input pin of the ST8034HC replaces the CLKDIV1 pin and is active
          high, meaning normal operation of the device when CS is in logic high state. When the CS
          pin goes low, the status of the ST8034HC device is frozen (i.e. status of control inputs
          RSTIN, CMDVCC, CLKDIV, VCC_SEL1 and VCC_SEL2 is latched) and the I/OUC,
          AUX1UC, and AUX2UC pins on the microcontroller interface go into high impedance mode
          (with pull-up resistors to VDD(INTF)), not transferring any data to or from the card. The OFF
          output pin also goes into high impedance mode. This allows the microcontroller to share
          interface pins among multiple smartcard interfaces connected in parallel. Status and all the
          ST8034HC device functions (including the card) are maintained for immediate use when the
          CS goes high again. For this reason clock input is not affected by the chip select, the clock
          is provided to the ST8034HC device and to the card even when the CS is low.
                                                 DocID024511 Rev 2                                       27/31


Package information                                                                  ST8034HN, ST8034HC
7          Package information
           In order to meet environmental requirements, ST offers these devices in different grades of
           ECOPACK¬Æ packages, depending on their level of environmental compliance. ECOPACK
           specifications, grade definitions and product status are available at: www.st.com.
           ECOPACK is an ST trademark.
                        Figure 14. QFN24 4 x 4 x 0.8 mm, 0.5 mm pitch package outline
                                                        7239,(:
                                                            '
                                                                             $  %
                              ,QGH[DUHD
                                 '[(
                                                                                  (
                                 DDD & [
                                                  DDD & [
                                                        6,'(9,(:
                                   FFF &
                                       $                                                   &
                                                                                  6($7,1*
                                    [                                            3/$1(
                                                                               $
                                 HHH &
                                                       %277209,(:
                                                                                  
                                                                        E
                                                             H         [     EEE 0 & $ %
                                                                            GGG 0 &
                                          /
                                         [                              
                                                                                  (
                                                                          
                                    3,1,'
                                     5                          .
                                                                        [
                                                           '
                                                                                                   4)1
28/31                                        DocID024511 Rev 2


ST8034HN, ST8034HC                                                                                Package information
              Table 14. QFN24 4 x 4 x 0.8 mm, 0.5 mm pitch package mechanical data(1), (2)
                                                            Dimensions (mm)
                Symbol                                                                                          Note
                                           Min.                       Typ.                Max.
                    A                      0.80                       0.90                 1.00
                   A1                      0.00                       0.02                 0.05
                                                                                                                 (3)
                    b                      0.18                       0.25                 0.30
                    D                      3.90                       4.00                 4.10
                    E                      3.90                       4.00                 4.10
                    e                                               0.5 ref.
                   D2                      1.95                       2.10                 2.20
                   E2                      1.95                       2.10                 2.20
                    K                      0.20                         -                    -
                    L                      0.30                       0.40                 0.50
                   aaa                     0.05                       0.05
                   bbb                     0.10                       0.10
                   ccc                     0.10                       0.10
                   ddd                     0.05                       0.05
                   eee                     0.08                       0.08
          1. Dimensioning and tolerancing conform to ASME Y14.5-2009.
          2. The location of the terminal #1 identifier is within the hatched area.
          3. Dimension b applies to metallized terminal. If the terminal has a radius on its end, dimension b should not
             be measured in that radius area.
                                       Figure 15. QFN24 recommended footprint
                                                                    
                                                               
                                                                              
                                                                                                
                                                                                        
                                                                                                
                                                                                        
                                                                                    
                                                         
                                                                                
                                                                    
                                                DocID024511 Rev 2                                                     29/31


Tape and reel information                                                                            ST8034HN, ST8034HC
8                Tape and reel information
                                             Figure 16. Carrier tape for QFN24
                                                 
                                  
    ¬ì
                          ¬ì                           PLQ                     $       ¬ì
   5PD[
                                                                                                                      
                                                                                                                 ¬ì   ¬ì
                      %R
                                                                                          $
                .R                         $R
                                     $R                     5
                                     %R 
     6HFWLRQ$$                   .R 
1. 10 sprocket hole pitch cumulative tolerance ÔÇ± 0.2.
2. Camber in compliance with EIA 481.
3. Pocket position relative to sprocket hole measured as true position of pocket, not pocket hole.
                                   Table 15. Tape and reel specification for QFN24
                               Carrier tape                           Cover tape                      Lockreel 7 / 13"
   Quantity
    per reel          Part no.                               Part no.                              Part no.
                                          Description                         Description                           Description
                     (vendor)                                (vendor)                              (vendor)
                                          Carrier tape
                                                                               Cover tape
      3000         434146 (Cpak)         12 mm width,     437150 (Cpak)                         434543 (peak)       13" lockreel
                                                                              9.2 mm width
                                          8 mm pitch
9                Revision history
                                          Table 16. Document revision history
       Date           Revision                                                 Changes
  22-Apr-2013               1           Initial release.
                                        Updated title on page 1 (removed ST8034HN and ST8034HC).
  22-Oct-2013               2           Updated Table 1 on page 5 (removed note 1).
                                        Minor modifications throughout document.
30/31                                                  DocID024511 Rev 2


ST8034HN, ST8034HC
                                                             Please Read Carefully:
Information in this document is provided solely in connection with ST products. STMicroelectronics NV and its subsidiaries (‚ÄúST‚Äù) reserve the
right to make changes, corrections, modifications or improvements, to this document, and the products and services described herein at any
time, without notice.
All ST products are sold pursuant to ST‚Äôs terms and conditions of sale.
Purchasers are solely responsible for the choice, selection and use of the ST products and services described herein, and ST assumes no
liability whatsoever relating to the choice, selection or use of the ST products and services described herein.
No license, express or implied, by estoppel or otherwise, to any intellectual property rights is granted under this document. If any part of this
document refers to any third party products or services it shall not be deemed a license grant by ST for the use of such third party products
or services, or any intellectual property contained therein or considered as a warranty covering the use in any manner whatsoever of such
third party products or services or any intellectual property contained therein.
UNLESS OTHERWISE SET FORTH IN ST‚ÄôS TERMS AND CONDITIONS OF SALE ST DISCLAIMS ANY EXPRESS OR IMPLIED
WARRANTY WITH RESPECT TO THE USE AND/OR SALE OF ST PRODUCTS INCLUDING WITHOUT LIMITATION IMPLIED
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE (AND THEIR EQUIVALENTS UNDER THE LAWS
OF ANY JURISDICTION), OR INFRINGEMENT OF ANY PATENT, COPYRIGHT OR OTHER INTELLECTUAL PROPERTY RIGHT.
ST PRODUCTS ARE NOT DESIGNED OR AUTHORIZED FOR USE IN: (A) SAFETY CRITICAL APPLICATIONS SUCH AS LIFE
SUPPORTING, ACTIVE IMPLANTED DEVICES OR SYSTEMS WITH PRODUCT FUNCTIONAL SAFETY REQUIREMENTS; (B)
AERONAUTIC APPLICATIONS; (C) AUTOMOTIVE APPLICATIONS OR ENVIRONMENTS, AND/OR (D) AEROSPACE APPLICATIONS
OR ENVIRONMENTS. WHERE ST PRODUCTS ARE NOT DESIGNED FOR SUCH USE, THE PURCHASER SHALL USE PRODUCTS AT
PURCHASER‚ÄôS SOLE RISK, EVEN IF ST HAS BEEN INFORMED IN WRITING OF SUCH USAGE, UNLESS A PRODUCT IS
EXPRESSLY DESIGNATED BY ST AS BEING INTENDED FOR ‚ÄúAUTOMOTIVE, AUTOMOTIVE SAFETY OR MEDICAL‚Äù INDUSTRY
DOMAINS ACCORDING TO ST PRODUCT DESIGN SPECIFICATIONS. PRODUCTS FORMALLY ESCC, QML OR JAN QUALIFIED ARE
DEEMED SUITABLE FOR USE IN AEROSPACE BY THE CORRESPONDING GOVERNMENTAL AGENCY.
Resale of ST products with provisions different from the statements and/or technical features set forth in this document shall immediately void
any warranty granted by ST for the ST product or service described herein and shall not create or extend in any manner whatsoever, any
liability of ST.
                            ST and the ST logo are trademarks or registered trademarks of ST in various countries.
                           Information in this document supersedes and replaces all information previously supplied.
            The ST logo is a registered trademark of STMicroelectronics. All other names are the property of their respective owners.
                                                 ¬© 2013 STMicroelectronics - All rights reserved
                                                     STMicroelectronics group of companies
   Australia - Belgium - Brazil - Canada - China - Czech Republic - Finland - France - Germany - Hong Kong - India - Israel - Italy - Japan -
       Malaysia - Malta - Morocco - Philippines - Singapore - Spain - Sweden - Switzerland - United Kingdom - United States of America
                                                                   www.st.com
                                                             DocID024511 Rev 2                                                           31/31


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
STMicroelectronics:
 ST8034HCQR ST8034HNQR
