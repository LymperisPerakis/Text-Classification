                                                                                                                                               LTC4331
                                                                           I2C Slave Device Extender
                                                                 Over Rugged Differential Link
FEATURES                                                                 DESCRIPTION
n  Up to 1MHz Serial Clock, Fast-mode Plus (Fm+)                          The LTC®4331 is a point-to-point SMBus compatible I2C
n  Selectable Link Baud Rates Extend I2C Up to                            slave device extender designed for operation in high noise
   1200m                                                                  industrial environments. Using a ±60V fault protected
n  Protected from Overvoltage Line Faults to ±60V                         differential transceiver, the LTC4331 can extend an I2C/
n  ±40kV ESD on Link Pins                                                 SMBus bus, including SMBALERT and a control signal,
n  IEC Level 4 ESD ±8kV and EFT ±5kV on Link Pins                         over a single twisted pair differential link up to 1200m.
n  Extended Common Mode Range: ±15V                                       With an extended common mode operating range the
n  Remote Interrupt/SMBALERT and Control Signals                          solution provides tolerance to large ground differences
n  Low EMI Mode                                                           between nodes. For EMI sensitive environments, a slew
n  SMBus 3.0 Compatible                                                   rate control pin reduces the EMI emitted from the dif-
n  I2C Idle Detection, and Stuck Bus Protection                           ferential link.
   I2C Device Address Sharing
                                                                          In addition, the LTC4331 can act as an I2C to I2C bridge
n
n  3V to 5.5V Supply Voltage
                                                                          allowing independent bus frequencies between the local
n  1.62V to 5.5V Logic Supply
                                                                          and remote networks. The solution is completely trans-
n  4mm × 5mm 20-Lead QFN package                                          parent to the master requiring no additional code in most
                                                                          cases; however, a control interface is provided for addi-
APPLICATIONS                                                              tional configuration and fault monitoring.
n  Industrial Control and Sensors                                         A master controller fully supporting SCL clock-stretching
n  Lighting and Sound System Control                                      is strongly recommended.
                                                                          All registered trademarks and trademarks are the property of their respective owners. Patent
                                                                          Pending.
TYPICAL APPLICATION
                                          Extended I2C Network Over 30m, 1MHz Fm+ SCL
       5V                        VL             VCC              5V      3.3V                  VCC                VL                                         3.3V
              10k       2.7k           LTC4331                   4.7µF  4.7µF                         LTC4331                      2.7k            10k
                             1µF                                                                                         1µF               2.7k
                   2.7k
                                                         620Ω                      620Ω
  MCU_SCL                        SCL                               30m CAT5                                      SCL                                         REM_SCL
                                                  A                                            A
 MCU_SDA                         SDA                       110Ω                 110Ω                             SDA                                         REM_SDA
  MCU_INT                        ALERT            B                                            B               ALERT                                         REM_INT
MCU_CTRL                         CTRL                                                                           CTRL                                         REM_CTRL
              1.5k                              SLO     5V                            3.3V     SLO                                                620Ω
                                                               620Ω      620Ω
       5V                        LINK                                                                           LINK                                         3.3V
                    D1           REMOTE                                                                      REMOTE               3.3V      D2
                                  A1/2   SPEED1/2                                                    SPEED1/2
                                                               V GROUND LOOP
                                                         GND1     ≤15V PEAK        GND2
                                                                                                                                                                    Rev 0
Document Feedback                                   For more information www.analog.com                                                                             1


LTC4331
TABLE OF CONTENTS
Features ............................................................................................................................ 1
Applications ....................................................................................................................... 1
Description......................................................................................................................... 1
Typical Application ............................................................................................................... 1
Absolute Maximum Ratings ..................................................................................................... 3
Pin Configuration ................................................................................................................. 3
Order Information ................................................................................................................. 3
Electrical Characteristics ........................................................................................................ 3
Switching Characteristics ....................................................................................................... 5
Typical Performance Characteristics .......................................................................................... 7
Pin Functions ...................................................................................................................... 8
Block Diagram..................................................................................................................... 9
Test Circuits ......................................................................................................................10
Timing Diagrams ................................................................................................................11
Applications Information .......................................................................................................12
Typical Applications .............................................................................................................24
Package Description ............................................................................................................25
Typical Application ..............................................................................................................26
Related Parts .....................................................................................................................26
                                                                                                                                    Rev 0
2                                                  For more information www.analog.com


                                                                                                                                                    LTC4331
ABSOLUTE MAXIMUM RATINGS                                                           PIN CONFIGURATION
(Note 1)
                                                                                                                         TOP VIEW
Supply Voltages
                                                                                                                                     SLO
   VCC........................................................... –0.3V to 6V                                    NC       B     A
                                                                                                                 20 19 18 17
   VL ............................................................ –0.3V to 6V
                                                                                                       VCC   1                               16 GND
Logic Signals
                                                                                                        VL   2                               15 SPEED2
   ON, LINK, RDY, SCL, SDA,                                                                            ON    3                               14 SPEED1
                                                                                                                            21
   ALERT, SLO .............................................. –0.3V to 6V                            REMOTE   4             GND               13 CTRL
   REMOTE, A1, A2, CTRL,                                                                              LINK   5                               12 A2
   SPEED1, SPEED2 ................ –0.3V to 6.3 or VL + 0.3V                                          RDY    6                               11 A1
Interface I/O: A,B ........................................ –60V to 60V                                              7    8     9 10
Operating Ambient Temperature Range                                                                              SCL      SDA   NC
                                                                                                                                     ALERT
   LTC4331C ................................................ 0°C to 70°C
   LTC4331I .............................................–40°C to 85°C                                           UFD PACKAGE
                                                                                                      20-LEAD (4mm × 5mm) PLASTIC QFN
   LTC4331H .......................................... –40°C to 125°C                              TJMAX = 150°C, θJA = 43°C/W, θJC = 3.4°C/W
                                                                                             EXPOSED PAD (PIN 21) IS GND, MUST BE SOLDERED TO PCB
   Storage Temperature Range .............. –65°C to 150°C
Lead Temperature (Soldering, 10 sec)................... 300°C
ORDER INFORMATION
LEAD FREE FINISH              TAPE AND REEL                PART MARKING               PACKAGE DESCRIPTION                                    TEMPERATURE RANGE
LTC4331CUFD#PBF               LTC4331CUFD#TRPBF            4331                       20-Lead (4mm × 5mm) Plastic QFN                        0°C to 70°C
LTC4331IUFD#PBF               LTC4331IUFD#TRPBF            4331                       20-Lead (4mm × 5mm) Plastic QFN                        –40°C to 85°C
LTC4331HUFD#PBF               LTC4331HUFD#TRPBF            4331                       20-Lead (4mm × 5mm) Plastic QFN                        –40°C to 125°C
Contact the factory for parts specified with wider operating temperature ranges.
Tape and reel specifications. Some packages are available in 500 unit reels through designated sales channels with #TRMPBF suffix.
ELECTRICAL CHARACTERISTICS                                The l denotes the specifications which apply over the full operating
temperature range, otherwise specifications are at TA = 25°C, VCC = 5V, VL = 3.3V, GND = 0V unless otherwise noted.
SYMBOL PARAMETER                                                        CONDITIONS                                            MIN             TYP        MAX    UNITS
Supplies
VCC        Operating Supply Range                                                                                l              3                        5.5        V
ICC        Operating Supply Current                                     Low Power: ON = 0                      l                               1           40     µA
                                                                        Idle: ON = 1, I2C Bus Idle, Link = Fm+ l                                           12     mA
                                                                        Active: I2C Transaction                l                                           65     mA
VL         Logic Supply Range                                                                                    l            1.62                       5.5        V
IL         Logic Supply Current                                                                                  l                                       140       µA
                                                                                                                                                                 Rev 0
                                                              For more information www.analog.com                                                                3


LTC4331
ELECTRICAL CHARACTERISTICS                                         The l denotes the specifications which apply over the full operating
temperature range, otherwise specifications are at TA = 25°C, VCC = 5V, VL = 3.3V, GND = 0V unless otherwise noted.
SYMBOL PARAMETER                                                      CONDITIONS                             MIN       TYP        MAX     UNITS
Differential Driver
|VOD|      Differential Driver Output Voltage                         R=∞                              l      1.5                  VCC        V
                                                                      R = 27Ω (Figure 1)               l      1.5                    5        V
IOSD       Maximum Driver Short-Circuit Current                       –60V ≤ (A or B) ≤ 60V (Figure 2) l              ±150        ±250      mA
Differential Receiver
RIN        Receiver Input Resistance                                  0 ≤ VCC ≤ 5.5V (Figure 3)                        112                  kΩ
VCM        Receiver Common Mode Input Voltage                                                          l                           ±15        V
VTH        Differential Input Signal Threshold                        –15V < VCM < 15V (Note 2)        l                          ±200      mV
Logic
VIH        High Level Input Voltage (ON, CTRL, REMOTE)                1.62V < VL < 5.5V                l   0.8 • VL                           V
           High Level Input Voltage (SCL, SDA, ALERT)                 1.62V < VL < 5.5V                l     1.35                             V
           High Level Input Voltage (SLO)                             3V < VCC < 5.5V                  l 0.67 • VCC                           V
VIH3ST     High Level Input Voltage (A1, A2, SPEED1, SPEED2)                                           l  VL – 0.25                           V
VIM3ST     Mid Level Input Voltage (A1, A2, SPEED1, SPEED2)                                            l   0.45 • VL            0.55 • VL     V
VIL3ST     Low Level Input Voltage (A1, A2, SPEED1, SPEED2)                                            l                           0.25       V
VIL        Low Level Input Voltage (ON, CTRL, REMOTE)                 1.62V < VL < 5.5V                l                         0.2 • VL     V
           Low Level Input Voltage (SCL, SDA, ALERT)                  1.62V < VL < 5.5V                l                           0.8        V
           Low Level Input Voltage (SLO)                              3V < VCC < 5.5V                  l                       0.33 • VCC     V
           Digital Input Current (SCL, SDA, ALERT)                    VIN = 0V to VL                   l                            ±5       µA
           Digital Input Current (ON, CTRL, A1, A2, REMOTE,           VIN = 0V to VL                   l                           ±60       µA
           SPEED1, SPEED2)
           Digital Input Current (SLO)                                                                 l                 0          ±5       µA
VOH        High Level Output Voltage (CTRL)                           ILOAD = –500µA                   l   VL – 0.2                           V
VOL        Low Level Output Voltage (LINK, RDY, ALERT, CTRL)          ILOAD = 500µA                    l                           0.2        V
           Low Level Output Voltage (SCL, SDA)                        ILOAD = 20mA                     l                           0.4        V
IOZ        High-Z Output Leakage Current (SCL, SDA, ALERT, LINK)                                       l                            ±5       μA
           High-Z Output Leakage Current (RDY)                                                         l                           –60       μA
           Output Source Current (Short-Circuit) (CTRL)                                                                –80                  mA
           Output Sink Current (Short-Circuit) (LINK, RDY, ALERT,                                                       80                  mA
           CTRL)
           Short-Circuit Current (SCL, SDA)                                                                            100                  mA
CIN        Input Pin Capacitance                                      SCL, SDA (Note 2)                                 10                   pF
                                                                                                                                           Rev 0
4                                                          For more information www.analog.com


                                                                                                                        LTC4331
SWITCHING CHARACTERISTICS                                      The l denotes the specifications which apply over the full operating
temperature range, otherwise specifications are at TA = 25°C, CL = 20pF, VCC = 5V, VL = 3.3V, GND = 0V; unless otherwise noted.
Conditions Fast-mode Plus, Fast-mode, and Standard-mode listed below as Fm+, Fm, and Sm respectively.
SYMBOL          PARAMETER                                            CONDITIONS                              MIN     TYP     MAX    UNITS
tON_LOW         Pulse Width of ON Low for Valid Reset Condition                                         l      1                       µs
Local Mode (REMOTE = 0)
tREADY          Delay From ON Rise to RDY Low                        I2C Bus IDLE                                     65               µs
tREMOTE_RESET   Delay From Local ON Low for Valid Remote Reset                                          l    180                       ms
                Condition
fSCL:SLAVE      Slave Device SCL Operating Frequency                 (Note 3)                           l     10    1000     2000     kHz
tBUF:SLAVE      Bus free Time between STOP and START                 SPEED1/SPEED2 = Fm+                l     0.5                      µs
                                                                     SPEED1/SPEED2 = Fm                 l     1.3                      µs
                                                                     SPEED1/SPEED2 = Sm                 l     4.7                      µs
tSU:STA:SLAVE   Repeated Start Condition Setup Time                  SPEED1/SPEED2 = Fm+                l    0.26                      µs
                                                                     SPEED1/SPEED2 = Fm                 l     0.6                      µs
                                                                     SPEED1/SPEED2 = Sm                 l     4.7                      µs
tHD:STA:SLAVE   Hold Time after START Condition                      SPEED1/SPEED2 = Fm+                l    0.26                      µs
                                                                     SPEED1/SPEED2 = Fm                 l     0.6                      µs
                                                                     SPEED1/SPEED2 = Sm                 l      4                       µs
tSU:STO:SLAVE   STOP Condition Setup Time                            SPEED1/SPEED2 = Fm+                l    0.26                      µs
                                                                     SPEED1/SPEED2 = Fm                 l     0.6                      µs
                                                                     SPEED1/SPEED2 = Sm                 l      4                       µs
tSU:DAT:FSLAVE  Data Setup Time from LTC4331                         SPEED1/SPEED2 = Fm+                l     50                       ns
                                                                     SPEED1/SPEED2 = Fm                 l    100                       ns
                                                                     SPEED1/SPEED2 = Sm                 l    250                       ns
tSU:DAT:TSLAVE  Data Setup Time to LTC4331                                                              l     50                       ns
tHD:DAT:TSLAVE  Data Hold Time to LTC4331                                                               l      0                       ns
tHD:DAT:FSLAVE  Data Hold Time from LTC4331                                                             l     50                       ns
tTIMEOUT:SLAVE  SCL Low Timeout Detection                                                               l     28     31.5     35       ms
tLOW:SLAVE      SCL Low Time                                                                            l    0.25                      µs
tHIGH:SLAVE     SCL High Time                                                                           l    0.25             50       µs
tHIGH:IDLE      SCL High for Bus Idle Detection                                                         l     70                       µs
Remote Mode (REMOTE = 1)
tSCL:MASTER     Master Device SCL Operating Period                   SPEED1/SPEED2 = Fm+                l      1                       µs
                                                                     SPEED1/SPEED2 = Fm                 l     2.5                      µs
                                                                     SPEED1/SPEED2 = Sm                 l     10                       µs
tBUF:MASTER     Bus Free Time between STOP and START                 SPEED1/SPEED2 = Fm+                l     0.5     0.6              µs
                                                                     SPEED1/SPEED2 = Fm                 l     1.3     1.5              µs
                                                                     SPEED1/SPEED2 = Sm                 l     4.7      5               µs
tHD:STA:MASTER  Hold Time after START Condition                      SPEED1/SPEED2 = Fm+                l    0.26     0.3              µs
                                                                     SPEED1/SPEED2 = Fm                 l     0.6     0.8              µs
                                                                     SPEED1/SPEED2 = Sm                 l      4      4.2              µs
tSU:STA:MASTER  Repeated Start Condition Setup Time                  SPEED1/SPEED2 = Fm+                l    0.26     0.3              µs
                                                                     SPEED1/SPEED2 = Fm                 l     0.6     0.8              µs
                                                                     SPEED1/SPEED2 = Sm                 l     4.7     4.8              µs
tSU:STO:MASTER  Setup Time for STOP                                  SPEED1/SPEED2 = Fm+                l    0.26     0.3              µs
                                                                     SPEED1/SPEED2 = Fm                 l     0.6     0.8              µs
                                                                     SPEED1/SPEED2 = Sm                 l      4      4.2              µs
                                                                                                                                     Rev 0
                                                       For more information www.analog.com                                           5


LTC4331
SWITCHING CHARACTERISTICS                                             The l denotes the specifications which apply over the full operating
temperature range, otherwise specifications are at TA = 25°C, CL = 20pF, VCC = 5V, VL = 3.3V, GND = 0V; unless otherwise noted.
Conditions Fast-mode Plus, Fast-mode, and Standard-mode listed below as Fm+, Fm, and Sm respectively.
SYMBOL                 PARAMETER                                            CONDITIONS                                       MIN     TYP    MAX       UNITS
tHD:DAT:FMASTER        Data Hold from LTC4331                                                                          l      50                          ns
tHD:DAT:TMASTER        Data Hold to LTC4331                                 (Note 2)                                   l      0                           ns
tSU:DAT:FMASTER        Data Setup from LTC4331                              SPEED1/SPEED2 = Fm+                        l      50                          ns
                                                                            SPEED1/SPEED2 = Fm                         l     100                          ns
                                                                            SPEED1/SPEED2 = Sm                         l     250                          ns
tSU:DAT:TMASTER        Data Setup to LTC4331                                                                           l      50                          ns
tTIMEOUT:MASTER        SCL Low Timeout Detection                                                                       l      28     31.5    35          ms
tLOW:MASTER            SCL Low Time                                         SPEED1/SPEED2 = Fm+                        l     0.6                          µs
                                                                            SPEED1/SPEED2 = Fm                         l     1.5                          µs
                                                                            SPEED1/SPEED2 = Sm                         l     5.8                          µs
tHIGH:MASTER           SCL High Time                                        SPEED1/SPEED2 = Fm+                        l     0.4                          µs
                                                                            SPEED1/SPEED2 = Fm                         l      1                           µs
                                                                            SPEED1/SPEED2 = Sm                         l     3.8                          µs
tF                     Fall Time (SDA, SCL) (Note 5)                        SPEED1/SPEED2 = Fm+                        l                    120           ns
                                                                            SPEED1/SPEED2 = Fm, Sm                     l                    300           ns
                                                                            CL = 550pF, RL = 1kΩ (Figure 5) (Note 2) l                       25           ns
tR                     Rise Time (SDA, SCL) (Note 5)                        SPEED1/SPEED2 = Fm+                        l                    120           ns
                                                                            SPEED1/SPEED2 = Fm, Sm                     l                    300           ns
tSPIKE                 Noise Spike Suppression Time (SDA, SCL)                                                         l      0              50           ns
Transceiver
tRD, tFD               Driver Rise or Fall Time (Figure 4)                  RDIFF = 54Ω, CL = 100pF, SLO = 1           l               4     15           ns
                                                                            RDIFF = 54Ω, CL = 100pF, SLO = 0           l     500     800    1200          ns
tLINK_TIMEOUT          Response Time for LINK = 1 after Disconnection       REMOTE = 1                                               168                 ms
                                                                            REMOTE = 0 (Note 4)                                     96 • SF               µs
System
tALT_PROP              ALERT Propagation Delay, Remote to Local             I2C Bus idle (Note 4)                          0.8 • SF 2 • SF 26 • SF        µs
tCTRL_PROP             Local CTRL Propagation Delay to Remote CTRL          I2C Bus idle (Note 4)                          0.8 • SF 2 • SF 26 • SF        µs
tSTART_PROP            I2C START Link Propagation Delay, Local to Remote (Note 4)                                                   2 • SF                µs
tLDAT_PROP             I2C DATA Link Propagation Delay, Local to Remote     (Note 4)                                                2 • SF                µs
tSTOP_PROP             I2C STOP Link Propagation Delay, Local to Remote     (Note 4)                                                2 • SF                µs
tRDAT_PROP             I2C DATA Link Propagation Delay, Remote to Local     (Note 4)                                                2 • SF                µs
Note 1: Stresses beyond those listed under Absolute Maximum Ratings                Note 4: SF = Speed Factor. See Table 3.
may cause permanent damage to the device. Exposure to any Absolute                 Note 5: SCL and SDA rise and fall time measurement limits are defined as
Maximum Rating condition for extended periods may affect device                    follows:
reliability and lifetime.                                                              Rise Time Limit: 0.65V to 1.5V
Note 2: Guaranteed by design, not production tested.                                   Fall Time Limit: 1.5V to 0.65V
Note 3: Local SCL frequencies between 1000kHz and 2000kHz are
allowed, however the effective link throughput maximum is 1000kHz. SCL
low clock-stretching by the LTC4331 must be respected.
                                                                                                                                                        Rev 0
6                                                             For more information www.analog.com


                                                                                                                                                                                                                         LTC4331
TYPICAL PERFORMANCE CHARACTERISTICS                                                                                                                      TA = 25°C, VCC = 5V, VL = 3.3V, GND = 0V, unless
otherwise noted.
                                ICC vs Temperature Burst I2C                                                       ICC vs Temperature Burst I2C
                                Write Traffic                                                                      Read Traffic                                                                    ICC vs Temperature I2C Bus Idle
                          58                                                                                 56                                                                             10.2
                                                          REMOTE = 0                                                                              REMOTE = 1
                          54                              1MHz SCL                                           54                                   1MHz SCL                                   9.8                                 REMOTE = 0
                                                                                                             52
                          50                                                                                                                                                                 9.4
                                                                                                             50
      CURRENT (mA)                                                                      CURRENT (mA)                                                                    CURRENT (mA)
                          46                                                                                                                                                                 9.0
                                                                                                             48
                          42                                                                                                                                                                 8.6
                                                                                                             46
                          38                                                                                                                                                                 8.2
                                        =                                                                    44
                                       SPD IDX = 0     SPD IDX = 5                                                         SPD IDX = 0         SPD IDX = 5                                                SPD IDX = 0        SPD IDX = 5
                          34           SPD IDX = 1     SPD IDX = 6                                                         SPD IDX = 1         SPD IDX = 6                                   7.8          SPD IDX = 1        SPD IDX = 6
                                                                                                             42
                                       SPD IDX = 2     SPD IDX = 7                                                         SPD IDX = 2         SPD IDX = 7                                                SPD IDX = 2        SPD IDX = 7
                          30           SPD IDX = 3     SPD IDX = 8                                           40            SPD IDX = 3         SPD IDX = 8                                   7.4          SPD IDX = 3        SPD IDX = 8
                                       SPD IDX = 4                                                                         SPD IDX = 4                                                                    SPD IDX = 4
                          26                                                                                 38                                                                              7.0
                            –75 –50 –25 0 25 50 75 100 125 150                                                 –75 –50 –25 0 25 50 75 100 125 150                                               –75 –50 –25 0 25 50 75 100 125 150
                                    AMBIENT TEMPERATURE (°C)                                                           AMBIENT TEMPERATURE (°C)                                                         AMBIENT TEMPERATURE (°C)
                                                                     4331 G01                                                                                4331 G02                                                                      4331 G03
                                ON, CTRL, and REMOTE Inputs                                                        CTRL Output (2mA and 4mA)                                                       I2C SCL and SDA Input
                                VIL and VIH vs VL Supply                                                           VOL and VOH vs VL Supply                                                        VIL and VIH vs VL Supply
                         5.50                                                                               5.50                                                                            1.40
                                       VIH                                                                                 VOH 2mA                                                                        VIH
                         5.00                                                                               5.00                                                                            1.35
                                       VIL                                                                                 VOL 2mA                                                                        VIL
                                                                                                                           VOH 4mA                                                          1.30
                         4.50                                                                               4.50
                                                                                                                           VOL 4mA                                                          1.25
                         4.00                                                                               4.00
                                                                                OUTPUT VOLTAGE (V)
                                                                                                                                                                                            1.20
INPUT VOLTAGE (V)                                                                                                                                                       INPUT VOLTAGE (V)
                         3.50                                                                               3.50                                                                            1.15
                         3.00                                                                               3.00                                                                            1.10
                         2.50                                                                               2.50                                                                            1.05
                         2.00                                                                               2.00                                                                            1.00
                                                                                                                                                                                            0.95
                         1.50                                                                               1.50
                                                                                                                                                                                            0.90
                         1.00                                                                               1.00
                                                                                                                                                                                            0.85
                         0.50                                                                               0.50                                                                            0.80
                           0                                                                                  0                                                                             0.75
                            1.5    2    2.5 3 3.5 4 4.5 5 5.5              6                                   1.5     2    2.5 3 3.5 4 4.5 5 5.5                  6                            1.5   2    2.5 3 3.5 4 4.5 5 5.5                  6
                                       LOGIC SUPPLY VOLTAGE VL (V)                                                         LOGIC SUPPLY VOLTAGE VL (V)                                                    LOGIC SUPPLY VOLTAGE VL (V)
                                                                     4331 G04                                                                             4331 G05                                                                         4331 G06
                                I2C SCL and SDA Output                                                             A/B Driver Output Low/High                                                      A/B Driver Differential Output
                                VOL at 20mA vs Temperature                                                         Voltage vs Output Current                                                       Voltage vs Temperature
                         400                                                                                 3.5                                                                             2.5
                         350                                                                                 3.0
                                                                                                                                                VOH                                          2.3          RDIFF = 100Ω
                                                                                DRIVER OUTPUT VOLTAGE (V)
   OUTPUT VOLTAGE (mV)
                                                                                                             2.5
                         300
                                                                                                                                                                                             2.1
                                                                                                             2.0
                         250                                                                                                                                             VOD (V)
                                                                                                             1.5
                                                                                                                                                                                             1.9
                         200                                                                                                                                                                                       RDIFF = 54Ω
                                                                                                             1.0
                                                                                                                                         VOL                                                 1.7
                         150                                                                                 0.5
                         100                                                                                 0.0                                                                             1.5
                            –75 –50 –25 0 25 50 75 100 125 150                                                     0       10        20     30      40            50                            –50          0         50        100            150
                                    AMBIENT TEMPERATURE (°C)                                                                    OUTPUT CURRENT (mA)                                                              TEMPERATURE (°C)
                                                                     4331 G07
                                                                                                                                                         4331 G08                                                                          4331 G09
                                                                                                                                                                                                                                              Rev 0
                                                                                                               For more information www.analog.com                                                                                           7


LTC4331
PIN FUNCTIONS
Logic (All Logic Side Inputs and Outputs Referenced                   function for the local side’s I2C control interface when
to GND and VL Except SLO, which Is Referenced to                      enabled. The ALERT pin switches to a level-sensitive active
GND and VCC)                                                          low interrupt signal when register field INTR_MODE = 1.
VCC (Pin 1): Supply Voltage. 3V < VCC < 5.5V. Bypass with             Connect to an external pull-up on the local side. Do not
4.7μF ceramic capacitor to GND.                                       allow the ALERT pin to float on the remote side.
VL (Pin 2): Logic Supply Voltage. 1.62V < VL < 5.5V.                  A1 (Pin 11): I2C Device Address Select 1. A1 is a 3-state
Bypass with 1μF ceramic capacitor to GND.                             input. A1 in conjunction with A2 selects one of eight pos-
                                                                      sible I2C addresses assigned to the internal slave device.
ON (Pin 3): Enable Input. Set high for operation. Set low             Float pins A1 and A2 to disable the internal I2C device. Set
for low power mode, in which the internal reset is held               to high, low, or float as defined in Table 4.
and outputs are disabled. Connect to VL if unused.
                                                                      A2 (Pin 12): I2C Device Address Select 2. A2 is a 3-State
REMOTE (Pin 4): Operating Mode Select Input. Set low                  input. A2 in conjunction with A1 selects one of eight pos-
for local I2C slave mode. Set high for I2C master mode                sible I2C addresses assigned to the internal slave device.
when used on the remote side. REMOTE is weakly pulled                 Float pins A1 and A2 to disable the internal I2C device. Set
to GND.                                                               to high, low, or float as defined in Table 4.
LINK (Pin 5): Link Status Open-Drain Output. When in                  CTRL (Pin 13): Local to Remote Control. Values set on the
remote mode, LINK is driven low when the device estab-                local side CTRL pin propagate to the remote side CTRL pin
lishes link communication. When in local mode, LINK is                over the differential link. On the remote side, CTRL is not
driven low after the LTC4331’s I2C interface has joined the           driven at startup until the differential link is established.
I2C bus in addition to establishing link communication.               CTRL has a weak pull-up to VL and can be unconnected
The link status function is only valid when an LTC4331                if not used.
configured to local mode (REMOTE set low) connects to
                                                                      SPEED1 (Pin 14): Link and Interface Timing Select 1.
a second LTC4331 configured to remote mode (REMOTE
                                                                      SPEED1 is a 3-state input and in conjunction with SPEED2
set high). Connect to an external pull-up to VL to monitor
                                                                      selects link baud rate and I2C bus timing. Set to high, low,
status, otherwise float or connect to GND.
                                                                      or float as defined in Table 2.
RDY (Pin 6): I2C Ready Status Open-Drain Output. RDY
                                                                      SPEED2 (Pin 15): Link and Interface Timing Select 2.
is driven low after the device’s I2C interface has joined the
                                                                      SPEED2 is a 3-state input and in conjunction with SPEED1
bus. Use to detect when the LTC4331’s control interface
                                                                      selects link baud rate and I2C bus timing. Set to high, low,
is available in the absence of a connected link. RDY has
                                                                      or float as defined in Table 2.
a weak internal pull-up to VL and is only valid when in
local mode. In remote mode the pin can be unconnected.                GND (Pin 16): Ground.
SCL (Pin 7): I2C Serial Clock. Low side output driver and             SLO (Pin 17): Link Slow Mode Input. Set low to limit the
input. Connect to an external pull-up.                                link transmitter slew rate which also limits the maximum
                                                                      link rate set by SPEED1 and SPEED2. Only valid for SPEED
SDA (Pin 8): I2C Serial Data. Low side output driver and
                                                                      INDEX 0 and 1. SLO is referenced to GND and VCC. Do not
input. Connect to an external pull-up.
                                                                      allow pin SLO to float.
NC (Pins 9, 20): Unconnected Pins. Float or connect to
GND.                                                                  Link
ALERT (Pin 10): SMBALERT/Interrupt. ALERT is an open-                 A (Pin 18): Noninverting Link Transceiver Pin.
drain output in local mode and an input in remote mode.
                                                                      B (Pin 19): Inverting Link Transceiver Pin.
Values set on the remote side ALERT propagate to the
local side ALERT pin. In addition, ALERT is the SMBALERT
                                                                                                                                Rev 0
8                                                For more information www.analog.com


                                                                                                 LTC4331
BLOCK DIAGRAM
                                                             Local Mode
     VCC                                                LINK
     VL
                    SUPPLY                                                                    SLO
                   MANAGER
     ON
                                                                                LINK              A
                                                                              ENCODER
     SCL
                                         TX
                                                                                                  B
                                        FIFO
                       I2C                                   LINK
     SDA          FRONT END                             CONTROLLER
                                         RX
                                        FIFO
                                                                                LINK
                                                                              DECODER
     ALERT
                                                                                          REMOTE
     RDY                                            STATUS
                       I2C
                                 REGISTERS
                 SLAVE DEVICE
                                                    CONFIG
              A1        A2           SPEED1      SPEED2         CTRL                  GND
                                                                                              4331 BDa
                                                           Remote Mode
     VCC                                                LINK
     VL
                    SUPPLY                                                                   SLO
                   MANAGER
     ON
                                                                                LINK             A
                                                                             ENCODER
     SCL
                                         TX
                                                                                                 B
                                        FIFO
                      I2C                                   LINK
     SDA          FRONT END                             CONTROLLER
                                         RX
                                        FIFO
                                                                                LINK
                                                                             DECODER
     ALERT
                                                                                          REMOTE
                                             CONFIG
     RDY                                                                                               VL
           A1       A2        SPEED1      SPEED2             CTRL                     GND
                                                                                             4331 BDb
                                                                                                          Rev 0
                                                 For more information www.analog.com                      9


LTC4331
TEST CIRCUITS
                                                                                                            A
                       A
                                                                                                                                   IOSD
                                    R
                             +                                                                   DRIVER
               DRIVER       VOD
                             –                                                                                                         + –60V TO 60V
                                    R                                                                                                 –
                                                                                                            B
                       B                                                                                                  4331 FO2
                                          4331 FO1
        Figure 1. Driver DC Characteristics                                             Figure 2. Driver Output Short-Circuit Current
                                                          IIN
                                                                   A OR B
                                                                            RECEIVER
                                                    VIN  +         B OR A
                                                         –
                                                                                        4331 FO3
                                                                       V
                                                                  RIN = IN
                                                                        IIN
                                   Figure 3. Receiver Input Current and Input Resistance
                      A
                                                 CL
                                                                                                                90%                           90%
              DRIVER          RDIFF                                              (A–B)                              0V                   0V
                                                                                                              10%                               10%
                                                 CL                                                                    tRD                        tFD
                                                                                                                                                      4331 F04b
                      B            4331 FO4
                                                   Figure 4. Driver Timing Measurement
                                VL
                                   RL                                  VL
                                                                                   1.5V
                                                                                               0.65V
                                                                                                                VOL
                                     CL                                                          tF
                                                                                                       4331 F05
                                     Figure 5. SCL and SDA Driver Timing Measurement
                                                                                                                                                               Rev 0
10                                                     For more information www.analog.com


                                                                                                  0.8 VL
                                                                                                                                        0.2 VL
                                                                                                                                                                                                                     tWIDTH
                                                                                                                  tDELAY                                          tDELAY
                                                                                                                                                                                             0.5 VL
                                                                                                                0.8 VL                                           0.8 VL
                                                                                                                0.2 VL                                           0.2 VL                                                                          4331 FO6
                                                                                                       Figure 6. Logic I/O Voltage Levels for Timing Specification (Except SCL and SDA)                                                                                                          TIMING DIAGRAMS
                                                      1.5V
                                              SDA
                                                     0.65V
                                                                                                                                                                                                                                                            tBUF
                                                                                                                                                                                                          tHD:STA
                                                                                     tSU:DAT                       tHD:DAT                                                    tSU:STA                               tSU:STO
                                                               tHD:STA                                                                                 tR   tF
                                                       1.5V
                                               SCL
                                                      0.65V
                                                                                                                               tLOW                     tHIGH
                                                                         I2C START                                                                                                      REPEATED START                           I2C STOP                                             4331 FO7
For more information www.analog.com                                                                                                  Figure 7. I2C Voltage Levels and Timing
                                                                           SCL
                                                              LOCAL_I2C
                                                                           SDA                                                                                                                                                       1.5V
                                                                                     0.65VL                                         0.65V                                                                0.65V
                                                                                                                                            tLDAT_PROP
                                                                                                                                                                                tRDAT_PROP                                             t STOP_PROP
                                                                                                  t START_PROP
                                                                           SCL
                                                         REMOTE_I2C
                                                                           SDA                                                                                                                                                                                1.5V
                                                                                                                             1.5V
                                                                                                               0.65VL                                                                            0.65V
                                                      REMOTE_nALERT                                    0.8VL                                                               LOCAL_CTRL                                0.8VL
                                                                                               0.2VL                                                                                                       0.2VL
                                                                                                           t ALT_PROP                                                                                                  t CTRL_PROP
                                                       LOCAL_nALERT                                                                            0.8VL                      REMOTE_CTRL                                                                              0.8VL
                                                                                                                                       0.2VL                                                                                                            0.2VL
                                                                                                                                                                                                                                                                           4331 F08
11                                    Rev 0                                                                                                 Figure 8. Propagation Timing
                                                                                                                                                                                                                                                                                                                   LTC4331


LTC4331
APPLICATIONS INFORMATION
Overview                                                                                         differential link as an encoded bit-stream to a second
                                                                                                 LTC4331 which is set to remote mode. After an I2C bus
Two LTC4331 devices are required for a complete extended
                                                                                                 turnaround, the device operates as a slave-transmitter
I2C network. Using the REMOTE pin, one LTC4331 is con-
                                                                                                 and the differential link direction is reversed. The remote
figured to local mode and acts as a full-featured SMBus
                                                                                                 LTC4331 transmits the response data measured from the
compatible I2C slave device. Through this local interface
                                                                                                 remote I2C bus onto the twisted pair cable. The local side
a master can address a remote slave device up to 1200m
                                                                                                 LTC4331 then decodes the transmitted bit-stream into
away along a differential cable. On the remote network a
                                                                                                 I2C data events and drives them onto the local I2C bus.
second LTC4331 configured to remote mode acts as an
I2C master device connected to the remote slave devices.                                         When operating as a slave-transmitter, the local LTC4331
The master interface mirrors the local I2C transactions                                          must periodically stall the local I2C bus to account for
on the remote network and transmits the remote slave                                             remote I2C bus and link latencies. It does this by clock-
responses back to the local network. In most cases the                                           stretching whenever a valid response is not yet available.
link is transparent; the remote slave devices appear as                                          Therefore it is recommended that the local I2C mas-
local devices to a local master.                                                                 ter device fully support SCL clock-stretching for each
                                                                                                 response (N)ACK and data bit. See section Considerations.
A separate addressable slave device contained in the local
side LTC4331 provides a control interface for optional                                           By using SCL clock-stretching to account for link and
configuration and event monitoring of the link.                                                  remote device latency, the local I2C clock rate is decoupled
                                                                                                 from the link baud rate and remote I2C clock rate. This
                                                                                                 allows independent I2C bus rates between the local and
                     LOCAL MASTER                       LOCAL SLAVE
                                     SCL
                          µP
                                     SDA
                                    ALERT                  DEVICE
                                                                                                 remote networks.
                                     CTRL
                                                                                                 Remote Mode
                     BREAK CONNECTIONS AND INSERT LTC4331 SOLUTION
                                                                                                 On the remote side, set the REMOTE pin high to put the
                         LOCAL SLAVE               REMOTE MASTER                                 LTC4331 in remote mode. In this mode the LTC4331
LOCAL MASTER                                                                    REMOTE SLAVE
                                                                                                 operates as an I2C master device. In normal operation
           LOCAL I2C BUS   LTC4331                     LTC4331    REMOTE I2C BUS
              MCU_SCL                  TWISTED PAIR                  REM_SCL                     the remote master mirrors the I2C events produced by
                                                                                                 the local I2C master. The device recreates the events using
              MCU_SDA              A                 A               REM_SDA
     µP                                                                            DEVICE
             MCU_ALERT                                              REM_ALERT
                                   B                 B
             MCU_CTRL                                                REM_CTRL
                                                                                                 Fast-mode Plus, Fast-mode, or Standard-mode class tim-
                          REMOTE                        REMOTE      VL                           ing specifications. The timing class is selected by pins
              LOCAL SIDE                                           REMOTE SIDE          4331 F09
                                                                                                 SPEED1 and SPEED2.
      Figure 9. LTC4331 Solution Inserted Into an I2C Network.                                   The LTC4331 does not support multiple masters on the
                                                                                                 remote I2C networks. The LTC4331’s I2C master device
Local Mode                                                                                       interface is the only allowed master on the remote side
On the local side, set the REMOTE pin low to put the                                             network. Remote slaves are also forbidden to switch
LTC4331 in local mode. In this mode the LTC4331 oper-                                            to master mode, for example as part of a host-notify
ates as a slave device. The I2C interface is designed to                                         operation.
be compatible with I2C Fast-mode Plus, Fast-mode, or                                             The LTC4331 master interface fully supports slave device
Standard-mode class timing specifications selectable                                             clock-stretching for all data bits in the packet.
using pins SPEED1 and SPEED2.
                                                                                                 I2C Transactions
When operating as a slave-receiver the LTC4331 cap-
tures I2C START, STOP, and data events sent by a local                                           A local master initiates a transaction by sending an I2C
I2C master. The device transmits these events across the                                         START along with the slave address byte. The LTC4331
                                                                                                                                                          Rev 0
12                                                                        For more information www.analog.com


                                                                                                                 LTC4331
APPLICATIONS INFORMATION
device, configured for local mode, encodes and transmits              The master is then expected to send a STOP or START
the captured I2C events to the remote I2C network where               event. See Figure 11.
they are recreated on the remote I2C bus. If additional
LTC4331 devices configured as slaves, REMOTE set                      Differential Link
low, are connected to the remote I2C network, they also               Internally, the LTC4331 utilizes a high performance RS485
transmit the events to the 3rd tier I2C network, and so               compliant transceiver to communicate over the link. The
on. The local side LTC4331 always holds SCL low on the                A and B pins are fault protected to ±60V. In addition, the
9th bit waiting for an (N)ACK response from the remote                transceiver operates over an extended common mode
slave device(s). When the local side LTC4331 receives the             range of ±15V making it suitable for noisy environments
response, SCL is released with the response data set on               or systems with ground potential differences. Data is
the I2C bus. If the R/W bit is set to Write, the bus turns            exchanged between the LTC4331 devices using a custom
around after the ACK and the local LTC4331 switches                   packet which has a selectable baud rate based on the
back to slave-receive mode in order to capture the incom-             configuration of the SPEED1 and SPEED2 pins. Selectable
ing write data. After the 8th SCL clock, the bus and link             baud rates over the cable allow balancing performance
direction reverse in order to retrieve the (N)ACK response            with cable length specific to the application. Both sides
from the remote slave device. This sequence continues                 of the link must be set to the same speed configuration in
until the master sends a START or STOP condition. Data                order to match the baud rates and allow communication.
to be transferred across the link is stored in a buffer if the
local I2C transaction is faster than the effective link rate.         The LTC4331 allows slew rate limiting over the differential
See Figure 10.                                                        link outputs to reduce EMI in sensitive applications. Setting
                                                                      the SLO pin low activates the slew rate limiting circuit.
If a local LTC4331 detects that all remote slaves have                Once in slew limiting mode, SPEED1 and SPEED2 pins
NACK’d the slave address byte, it ceases transmitting fur-            must only be configured for Speed Index 0 or 1. Setting
ther I2C data to the remote side until a STOP or REPEATED             SPEED1/2 to a speed index of 2 or higher when SLO is low
START condition is detected. This feature prevents the                results in link data corruption regardless of cable length.
LTC4331 from stalling the bus unnecessarily when the
transaction is addressed to a separate local slave device.            The LTC4331 I2C slave device extension solution is point-
Note that in this scenario, the remote side SCL is held low           to-point only. Multidrop or multipoint configurations on
until a STOP or START condition is detected. Unusually                the differential link are not allowed.
long cycle times could activate the tTIMEOUT condition.
                                                                      ±40kV ESD Protection
In the case of a read transaction to a remote slave device,
the local LTC4331 slave device stalls the bus during the              The LTC4331 features exceptionally robust ESD protec-
                                                                      tion. The link interface pins (A, B) feature protection to
read data phase. During this time, the remote LTC4331
                                                                      ±40kV HBM with respect to GND, VCC (with a 4.7μF capac-
I2C master prefetches the next byte from the remote slave
                                                                      itor to GND), A or B without latchup or damage, during all
device. The read data byte is transmitted across the dif-
                                                                      modes of operation or while unpowered.
ferential link and stored in a local buffer. As bits become
available in the local buffer, the local LTC4331 drives them          Level 4 IEC ESD and EFT Protection
onto SDA and releases SCL according to the configured
setup time tSU:DAT:SLAVE. After the complete byte has been            The improved ESD protection of the LTC4331 provides a
read, the I2C bus and differential link are turned around.            high level of protection in the IEC ESD and EFT (Electrical
The local I2C master either ACKs or NACKs during this                 Fast Transient) tests. The IEC ESD stress exceeds that of
time. If the master ACKs, the sequence is repeated. This              the HBM test in peak current, amplitude, and rise time,
bus and link direction is reversed, and the next byte is              while the EFT test provides a prolonged repetitive stress.
prefetched from the remote slave device. If the master                Combined with the HBM test, the IEC tests help ensure
then NACKs, the bus and link do not reverse direction.                that the LTC4331 is robust under a wide range of real
                                                                                                                                Rev 0
                                                 For more information www.analog.com                                       13


14
                                                                                                                                                                                                                                                                                             LTC4331
                                                               START                                                            LTC4331 HOLDS SCL LOW                                                                         STOP
                                                                                                                                 UNTIL ACK IS RECEIVED
                                                       SCL
                                               LOCAL
                                                       SDA                                   ADDRESS/WR                                                  ACK                   WRITE BYTE                              ACK
                                                       SCL
                                              REMOTE
                                                       SDA                                                ADDRESS/WR                      ACK                                               WRITE BYTE   ACK
                                                                       START                                                                                                                                                                    STOP
                                                                                                                                                                                                                                                       4331 F10
                                                                FROM MASTER TO SLAVE
                                                                FROM SLAVE TO MASTER
                                                                                                                                                Figure 10. Full Write
                                                                                                                                                                                                                                                                  APPLICATIONS INFORMATION
                                                                             START                                                              LTC4331 HOLDS SCL LOW                                           STOP
                                                                                                                                                 UNTIL ACK IS RECEIVED
For more information www.analog.com
                                                                       SCL
                                                              LOCAL
                                                                       SDA                                ADDRESS/RD                                                     ACK                READ BYTE    NACK
                                                                       SCL
                                                             REMOTE
                                                                       SDA                                             ADDRESS/RD                        ACK                   READ BYTE                               NACK
                                                                                     START                                                                                                                                    STOP
                                                                                                                                                                                                                                     4331 F11
                                                                               FROM MASTER TO SLAVE
                                                                               FROM SLAVE TO MASTER
                                                                                                                                                Figure 11. Full Read
                                      Rev 0


                                                                                                                    LTC4331
APPLICATIONS INFORMATION
world hazards. The LTC4331 passes the following tests                   Link status can also be monitored using the control inter-
on the A, B pins:                                                       face. See section Control Interface.
•    IEC 61000-4-2 Edition 2.0 2008-12 ESD Level 4: ±8kV                Ensure that the values set on local side SPEED1 and
     contact (A or B to GND, direct discharge to bus pins               SPEED2 pins match the values set on remote side. Also,
     with transceiver and protection circuit mounted on a               do not exceed the cable length listed in Table 2 for the
     test card with a low impedance ground discharge path               given SPEED setting. The LTC4331 will not link if these
     from board GND to ESD gun return lead, per Figure 4                conditions are not met.
     of the standard)
                                                                        Note that the link status is indeterminate if the REMOTE
•    IEC 61000-4-4 Second Edition 2004-07 EFT Level 4:                  pin is incorrectly configured on either the local or remote
     ±5kV (A or B to GND, 5kHz repetition rate, 15ms burst              side LTC4331 device.
     duration, 60 second test duration, discharge coupled
     to bus pins through 100pF capacitor per paragraph                  Ready Status
     7.3.2 of the standard). VCC pin requires a low induc-              The RDY pin is driven low when the local side LTC4331
     tance capacitor of at least 4.7µF to meet Level 4 rating.          control interface is ready for access. It is an open-drain
                                                                        output and only valid in local mode. When the device is
Startup and Shutdown
                                                                        first powered and pin ON is set high, the low output driver
Startup occurs when supply voltages are applied to pins                 on RDY is disabled and the pin is weakly pulled to VL. An
VCC and VL and the ON pin is high. All output pins are tri-             internal I2C bus idle detection circuit prevents the interface
stated during the first part of startup. After an initialization        from interrupting an active transaction. This circuit drives
sequence, the I2C interface and other pins are functional.              RDY low when either pin SCL is high for tREADY:IDLE or it
The local side LTC4331 monitors the I2C bus for inactivity              detects an I2C STOP which indicates the interface is ready
and probes the differential link. When the device detects               and has joined the bus. The status of the link connection
an idle condition on the local I2C bus, it drives pin RDY               does not affect the ready function. If pin LINK is high when
low to indicate that it is ready to respond to I2C transac-             RDY is low, only the local side LTC4331 control interface
tions. Thereafter a master can access the internal control              is available for access. The RDY pin is internally pulled to
interface. In addition, once the device establishes link                VL. It is valid only in local mode.
communication with a remote LTC4331, it drives pin LINK                 A secondary function of RDY indicates if the internal buf-
low and the remote I2C network can be accessed.                         fer has filled, see section Considerations for more detail.
The ON pin can be used to set the LTC4331 to a lower
power state. By setting ON low, the LTC4331 is held in                  Interrupt/SMBALERT
reset, all programmed configuration is set to the default               The LTC4331 supports an interrupt signal that is mirrored
value, all output drivers are disabled, and the differential            from the remote network to the local network using the
transceiver is put into low power mode. If not used, tie                differential link. On the remote side ALERT is an input pin
ON to VL.                                                               that can be connected to remote I2C slave devices. While
                                                                        on the local side ALERT operates as an open-drain type
Link Status
                                                                        output that can be connected to a shared local interrupt
The LTC4331 provides the LINK pin which indicates if the                line. ALERT is periodically sampled and has a propagation
remote I2C network has joined with the local I2C network.               time of tALT_PROP.
LINK is driven low when bidirectional link communica-                   If enabled, the local LTC4331’s control interface uses the
tion is established and the I2C interface is ready. It is an            ALERT pin to report link and fault events. The local side
open-drain output and requires an external pull-up to VL
                                                                        ALERT output is the logical AND of the remote ALERT and
if used. At startup, the LINK pin output driver is disabled.
                                                                        the internal endpoint interrupt signal.
                                                                                                                                   Rev 0
                                                   For more information www.analog.com                                        15


LTC4331
APPLICATIONS INFORMATION
By default the local addressable slave device in the LTC4331                programmed into the bit field SW_CTRL. A separate bit
recognizes the Alert Response Address (ARA) and par-                        field CTRL_SEL selects pin or register control. By default
ticipates in the Alert Response protocol. If an EVENT is                    the value on local CTRL pin is used. Local CTRL values
triggered and its corresponding ALERT_EN bit is set high,                   transfer to the remote side CTRL only when the commu-
ALERT is driven low. If the master transmits the Alert Re-                  nication link is established and pin LINK is low.
sponse protocol and the LTC4331’s internal slave address
                                                                            At startup the CTRL output driver is disabled and a weak
is the lowest numerically, then the LTC4331 releases its
                                                                            internal pull-up prevents the pin from floating. The CTRL
local alert output. Note that local ALERT could continue
                                                                            pin’s output driver enables only when link communication is
to be low due to a low value from a remote ALERT pin.
                                                                            established. Thereafter, the remote CTRL pin’s output driver
The remote ALERT function in the LTC4331 is not directly
                                                                            is always enabled except after a remote reset event where
affected by an Alert Response transaction. The signal on
                                                                            it is disabled until link communication is reestablished.
the remote ALERT pin is always propagated to the local
side if connected. If using SMBus slave devices on both                     I2C Address Translation
sides of the link that respond to the ARA, the remote
slaves must have higher priority device addresses than                      The address translation feature allows the use of multiple
the devices on the local side, see section Considerations.                  I2C slave devices with fixed or limited device address
                                                                            ranges on the same network. The LTC4331 I2C slave device
The LTC4331’s internal slave device can be programmed                       automatically translates the incoming address using an
to ignore the ARA and switch the function of pin ALERT                      XOR function against the internal register ADDR_TRANS.
from SMBALERT to interrupt mode. To switch to interrupt                     Address translation is enabled by setting this register to
mode set INTR_MODE in the CONFIG register to 1. To                          a non-zero value. ADDR_TRANS must be programmed
clear the interrupt set the triggered event or the corre-                   before any accesses to the remote slave if that slave
sponding event enable bit to 0. This method is also valid                   requires address translation or there will be a collision.
in SMBALERT mode in lieu of the ARA protocol.                               See Figure 12.
Control                                                                     Timeouts
Through the CTRL pin, the LTC4331 provides an addi-                         The LTC4331 respects SMBus SMBCLK low timeouts on
tional signal to control a remote device’s input pin. When                  the SCL pin. When in local mode and SCL is held low for a
in remote mode, the CTRL pin is an output and reflects                      minimum of tTIMEOUT:SLAVE:MAX, the I2C Interface is reset
the value either on the local side CTRL pin or the value                    and SCL and SDA are released if held low. On the remote
                                                        LTC4331                            LTC4331
                                                                                                                           REMOTE SLAVE
             µP
                                                   0      0       0
               SCL                          SCL    0      0       0                               SCL
                                                                         A               A
                    ADDR = 0x10                    1      0       1                                        ADDR = 0x16
                                                   0      0       0                                                           DEVICE
                                       ACK                                                                             ACK
                                                   0      1       1      B               B
               SDA                          SDA                                                   SDA
                                                   0      1       1                                                         ADDR = 0x16
                                                   0      0       0
                                               INCOMING      OUTGOING
                              NACK               ADDR           ADDR
                                                     ADDR_TRANS
                                                      REGISTER
                                            REMOTE                                            REMOTE
                             DEVICE
                                                                                                  4331 F12
                           ADDR = 0x16
                          LOCAL SLAVE
                                   Figure 12. Address 0x10 Is Translated to 0x16 for the Remote Device
                                                                                                                                        Rev 0
16                                                     For more information www.analog.com


                                                                                                                                              LTC4331
APPLICATIONS INFORMATION
side, the LTC4331 acting as an I2C master also releases            Considerations
SCL and SDA if an remote slave is signaling a timeout. In          •    The LTC4331 relies on SCL clock-stretching to account
addition, the LTC4331 master sends a STOP event and                     for link and remote bus latencies. Using a local master,
requires a local side STOP event before allowing further                either hardware or software based, that fully supports
remote I2C transactions. This ensures the local and remote              clock-stretching is highly recommended for best per-
are synchronized.                                                       formance. Alternately, the SCL frequency can also be
In addition, the local side LTC4331 slave interface contains            reduced such that the LTC4331’s SCL configured
an SDA stuck-low prevention circuit which ensures the                   low time and remote response time is less than the
LTC4331 does not hold SDA low when the I2C bus is idle.                 master’s programmed SCL low time. The total clock-
This typically occurs when there is a loss of I2C protocol              stretching time of the local LTC4331 I2C slave device
synchronization between the master and slave devices.                   depends on SPEED1 and SPEED2 pin settings and
If the LTC4331 is holding SDA low while SCL is high for                 remote I2C Slave device timing requirements. This is
35ms, the interface is reset and SDA is released.                       not recommended. See Figure 13.
Remote Stuck Bus Protection                                             Table 1. Known I2C Master Devices Incompatible with
                                                                        LTC4331 SCL Clock-Stretching
On the remote side, the LTC4331 master device can detect                DEVICE                                        ISSUE                   WORKAROUND
and attempt recovery from I2C bus faults. If the master                 All Raspberry Pi                              Hardware I2C            Use software based
device senses that SDA is low when it should be high,                   models (Broadcom                              peripheral clock-       I2C that fully supports
                                                                        BCM283X)                                      stretching issues       SCL clock-stretching
it considers SDA stuck by a slave device. The LTC4331
enters a bus recovery routine which drives 16 SCL clocks                Analog Devices                                SCL signal path is      Use Analog Devices
                                                                        DC590B QuikEval                               not bidirectional       Linduino® w/DC590
onto the bus and then issues a STOP event. This routine                 controller                                                            sketch
is also entered if SDA is sensed low after a startup. If
successful, the LTC4331 master then ignores further                •    The LTC4331 I2C Slave Extender does not support
local I2C bus transactions until the local bus transmits a              remote I2C devices acting as masters. Therefore the
STOP condition. If the routine is unsuccessful, it retries              SMBus Address Resolution Protocol and Host Notify
whenever a local side master initiates a new transaction.               Protocol are not supported.
If the remote LTC4331 detects that SCL is stuck, it auto-          •    When using SMBus ARA, if there are SMBus slave
matically NACKs all I2C transactions from the local bus                 devices on the local and remote side of the extender,
until it measures SCL high and receives a STOP command
from a local I2C master.                                                                         100
                                                                                                           30m
For both SCL and SDA fault conditions, the remote                                                          600m
LTC4331 sends a FAULT response to the local LTC4331
                                                                           SCL FREQUENCY (kHz)
which sets the EXT_I2C_FAULT EVENT bit.
Remote Reset
The local side LTC4331 can trigger a remote side LTC4331
reset by holding the ON pin low for a minimum of tREMOTE_
RESET. In addition, the remote LTC4331 is automatically
reset after tREMOTE_RESET if the link is disconnected. A                                          10
remote reset disables all remote side outputs, including                                               4          5         6             7          8
                                                                                                                       SPEED INDEX
pin CTRL, until link communication is reestablished.                                                                                          4331 F13
                                                                                         Figure 13. SCL Frequency Range when the I2C
                                                                                           Master Ignores Slave SCL Low Stretching
                                                                                                                                                                Rev 0
                                               For more information www.analog.com                                                                        17


LTC4331
APPLICATIONS INFORMATION
     all local slave device addresses must be greater (lower                      Link Speed
     priority) than the remote slave device address. This is
                                                                                  The link baud rate is set using the SPEED1 and SPEED2
     to allow proper slave address negotiation.
                                                                                  pins as shown in Table 2. Column I2C Class shows the
•    Care must be taken when interrupting an I2C transaction                      timing mode set on the local and remote I2C interfaces.
     with a START or STOP. A START or STOP can only be                            The Effective I2C Link Rate shows the rate I2C data propa-
     issued when the local side LTC4331 is in slave-receive                       gates across the link. The local SCL frequency can exceed
     mode. Since internally the data is sampled on the rising                     this rate though increased clock-stretching times occur
     edge, the local I2C bus is considered slave driven after                     as the Effective Link Rate decreases relative to the local
     the last rising edge of SCL in a master driven data cycle.                   SCL frequency. The SPEED INDEX must be set to the same
•    The LTC4331 supports a faster local I2C clock rate                           value on each side of the link.
     relative to the effective link rate. The device has a fixed                  Table 3. Speed Factors
     length internal buffer to hold a complete byte as it is                                 SPEED INDEX                   SPEED FACTOR (SF)
     transferred across the link at the rate set by SPEED1                                        8                                  1×
     and SPEED2. During this time the local I2C bus stalls                                        7                                  2×
     preventing further I2C data from entering the buffer.                                        6                                  4×
     If however, a local master sends multiple consecu-                                           5                                  8×
     tive START/STOP commands faster than the effective                                           4                                 10×
     link rate, this buffer can overflow. The LTC4331 pro-                                        3                                 16×
     vides two status indicators for this event. First, if the                                    2                                 32×
     buffer is full, then RDY rises indicating that the local                                     1                                 50×
     I2C interface is not ready and further START, STOP, or                                       0                                 80×
     write data event can be lost. Second, a TX_BUFFER_
     OVERFLOW FAULT event occurs if a local master
     writes additional I2C events while RDY is high.                              Control Interface
•    A remote slave device will not see a SCL timeout con-                        The LTC4331 contains an addressable slave device pro-
     dition (bus reset) initiated by a local slave device if a                    viding a control interface for configuration and monitor-
     remote device is not the target of the local Master.                         ing. The internal slave is enabled by configuring pins A1
                                                                                  and A2 to assign the device a unique I2C address. When
Table 2. Link Speed
     SPEED1            SPEED2                                                         EFFECTIVE I2C        MAX CABLE            SLEW RATE LIMITING
    (Note 1)           (Note 1)           SPEED INDEX             I2C CLASS             LINK RATE       LENGTH (m) (Note 2)        OPTION (Note 3)
         L                 L                    8                      Fm+                 1MHz                 30                        No
       Float               L                    7                       Fm                500kHz                 60                       No
         H                 L                    6                       Fm                250kHz                200                       No
         L               Float                  5                       Fm                125kHz                600                       No
         L                 H                    4                      Sm                 100kHz               1200                       No
         H               Float                  3                      Sm                  63kHz              1200+                       No
       Float             Float                  2                      Sm                  31kHz              1200+                       No
       Float               H                    1                      Sm                  20kHz              1200+                       Yes
         H                 H                    0                      Sm                12.5kHz              1200+                       Yes
Note 1: For assignments to float, 0.5 • VL can also be applied to pin.
Note 2: Evaluated with Cat5E Ethernet cable in a lab environment. Actual maximum cable length depends on type of cable and application environment.
Note 3: Using SLO.
Propagation times across the link for the SYSTEM timing specifications are based on the SPEED1 and SPEED2 pins.
                                                                                                                                                    Rev 0
18                                                           For more information www.analog.com


                                                                                                                                                        LTC4331
APPLICATIONS INFORMATION
both pins are unconnected, the internal slave is disabled.                       The PEC byte is calculated as a CRC-8 checksum over all
The internal slave device recognizes the SMBus Write Byte                        bytes between the START and STOP conditions excluding
and Read/Receive Byte protocols with or without Packet                           the ACK/NACK and Sr bits and last CRC byte. The polyno-
Error Correction (PEC) as shown in Figures 14 to 19.                             mial used is x8 + x2 + x + 1 initialized to zero.
                                             S   DEVICE ADDR      W     A   REGISTER       A   DATA        A      P
                                                      3Eh         0     0      00h         0    01h        0
                                                                                                               4331 F14
                                           DEVICE ADDRESS = 3Eh. ACCESSING THE CONFIG REGISTER
                                               FROM MASTER TO SLAVE                 S: START
                                                                                    Sr: REPEATED START
                                               FROM SLAVE TO MASTER
                                                                                    W: WRITE BIT (ACTIVE LOW)
                                                                                    A: (N)ACK BIT
                                                                                    P: STOP
                                                              Figure 14. Write Byte
                                        S   DEVICE ADDR      W    A   REGISTER        A   DATA     A      PEC        A      P
                                                 3Eh         0    0       00h         0    01h     0      9Ah        0
                                                                                                                         4331 F15
                                                          Figure 15. Write Byte + PEC
                               S   DEVICE ADDR    W     A   REGISTER      A    Sr    DEVICE ADDR        W       A      DATA        A     P
                                       3Eh         0    0       00h       0               3Eh           1       0       01h        1
                                                                                                                                      4331 F16
                                                               Figure 16. Read Byte
                           S  DEVICE ADDR    W    A   REGISTER      A    Sr   DEVICE ADDR       W      A      DATA        A       PEC     A       P
                                  3Eh        0    0       00h       0               3Eh         1      0       01h        0       96h     1
                                                                                                                                               4331 F17
                                                          Figure 17. Read Byte + PEC
                                                      S    DEVICE ADDR      W    A     DATA    A     P
                                                                3Eh         1     0     01h    1
                                                                                                  4331 F18
                                                            Figure 18. Receive Byte
                                                S    DEVICE ADDR      W    A   DATA      A   PEC      A       P
                                                          3Eh         1    0    01h      0   4Ch      1
                                                                                                           4331 F19
                                                        Figure 19. Receive Byte + PEC
                                                                                                                                                              Rev 0
                                                       For more information www.analog.com                                                                  19


LTC4331
APPLICATIONS INFORMATION
PEC transfers are recommended in high noise environ-                              Register Naming Conventions
ments or high reliability systems.                                                RW        Read-Write
Table 4. Device Address                                                           RO        Read Only
   A1 (Note 1)      A2 (Note 1)              DEVICE ADDR (7-Bit)
        L                L                             3Eh                        W0C       Write Zero to Clear
      Float              L                             3Ch
        H                L                             3Fh
        L              Float                          3Dh
        H              Float                           75h
        L                H                             76h
      Float              H                             74h
        H                H                             77h
      Float            Float           Internal Slave Device is Disabled
Note 1: For assignments to Float, 0.5 • VL can also be applied to pin.
Table 5. Register Map
 REGISTER        NAME                                                                DATA                                                        DEFAULT
                              Bit 7      Bit 6     Bit 5     Bit 4           Bit 3               Bit 2          Bit 1               Bit 0
    00h         CONFIG          –         –          –         –                –                 –         CTRL_SEL            INTR_MODE           0x00
    01h         STATUS                    SPEED_IDX                        Reserved         EXT_NALERT        NALERT               NLINK              –
    02h          EVENT          –         –          –         –                –               FAULT       LINK_LOST           LINK_GOOD           0x00
    03h       ALERT_EN          –         –          –         –                –             FAULT_EN    LINK_LOST_EN        LINK_GOOD_EN          0x00
    04h          FAULT          –         –          –         –     TX_BUF_OVERFLOW EXT_I2C_FAULT         LINK_FAULT       I2C_WRITE_FAULT         0x00
    05h        SCRATCH                                                             SCRATCH                                                          0x08
    06h      ADDR_TRANS         –                                                     I2C_TRANS                                                     0x00
    07h          CTRL           –         –          –         –                –                 –               –              SW_CTRL            0x00
CONFIG Register (RW)
FIELD                  DESCRIPTION
INTR_MODE              When low, the internal slave interrupt behavior on pin ALERT is SMBALERT. The internal slave device recognizes and responses to
                       an ARA. When high, the internal slave device ignores the ARA.
CTRL_SEL               When low, the local CTRL pin input is mirrored to the remote CTRL output pin. When high, the value in register CTRL is used instead.
STATUS (RO)
FIELD                  DESCRIPTION
NLINK                  The level driven by pin LINK. High impedance is interpreted as 1.
NALERT                 The level driven by the local side pin ALERT. High impedance is interpreted as 1.
EXT_NALERT             The level driven into the remote ALERT pin. Link must be established.
SPEED_IDX              <0-8>. Encoded index from values set on SPEED1 and SPEED2. See Table 2. Link Speed.
                                                                                                                                                        Rev 0
20                                                           For more information www.analog.com


                                                                                                                                          LTC4331
APPLICATIONS INFORMATION
EVENT (W0C): Events Are Set by the System and Cleared by the User
FIELD               DESCRIPTION
LINK_GOOD           The local and remote I2C networks are connected.
LINK_LOST           The local and remote I2C networks have lost link communication.
FAULT               Set if any field in the FAULT register is set by the system. Clearing this bit clears all bits in the FAULT register.
ALERT_EN (RW): Asserts ALERT if Corresponding EVENT Bit Is Set
FAULT (RO): If the FAULT EVENT Bit Is Set, at Least One of the Following Bits Is Set.
To Clear, Clear the FAULT Event Bit
FIELD               DESCRIPTION
I2C_WRITE_FAULT     An incomplete write transaction after the internal address byte or PEC error detected.
LINK_FAULT          Link communication corruption detected.
EXT_I2C_FAULT       A fault, or stuck bus recovery occurred on the remote I2C bus.
TX_BUF_OVERFLOW The transmit buffer overflowed, I2C events lost.
SCRATCH (RW)
FIELD               DESCRIPTION
SCRATCH             Used to test read/write access to the control interface.
ADDR_TRANS (RW)
FIELD               DESCRIPTION
I2C_TRANS           Incoming 7-bit I2C addresses are translated to the remote network by: AddressOUT = I2C_TRANS XOR AddressIN
CTRL (RW)
FIELD               DESCRIPTION
SW_CTRL             Sets the output value of the remote CTRL pin when CTRL_SEL is high.
PCB Layout                                                                      closely match the characteristic impedance of the differ-
A ground plane layout is recommended. A 4.7μF bypass                            ential cable to reduce reflections.
capacitor should be placed no more than 7mm away from                           A bias resistor network should also be inserted at each
the VCC pin. The PC board traces connected to signals A                         node to maintain the idle state during link turnaround
and B should be symmetrical and as short as possible to                         when all drivers are momentarily disabled. See Figure 20.
maintain good differential signal integrity. Route the dif-                     For DC-coupled (non-isolated) link applications, select RB
ferential signals A and B as an edge coupled microstrip                         and RT2 such that 200Ω ≤ RB ≤ 620Ω and 100Ω ≤ RT2
with a differential impedance approximately matching the                        ≤ 110Ω.
cable impedance.
                                                                                Isolation
Link Termination and Biasing                                                    Galvanically isolating the link is supported with the
To minimize the transmission line reflections over the                          LTC4331 allowing applications with safety requirements
link, a termination resistor should be connected between                        or applications with independent ground potentials. A bias
pins A and B at each node. Each resistor’s value should                         network along with termination resistors must be used
                                                                                                                                                Rev 0
                                                           For more information www.analog.com                                                21


LTC4331
APPLICATIONS INFORMATION
on both sides of the link. For transformer applications,                 Auxiliary Protection for 5kV Surge, 5kV EFT, and 30kV
series resistors must be added to the A and B pins on                    IEC ESD
each side of the link. Use resistor values from 25Ω to                   An interface transceiver used in an industrial setting
50Ω. See Figure 21.
                                                                         may be exposed to extremely high levels of electrical
Table 6. Typical Resistor Values for Transformer Applications            overstress due to phenomena such as lightning surge,
      VCC (V)         RB (Ω)           RS (Ω)         RT2 (Ω)            electrical fast transient (EFT) from switching high cur-
        3.3            200               25             110              rent inductive loads, and electrostatic discharge (ESD)
        5.0            270               50             110              from the discharge of electrically charged personnel or
                                                                         equipment. The LTC4331 is designed for high robustness
For capacitive isolation, select RB such that 200Ω ≤ RB ≤                against ESD, but the on-chip protection is not able to
320Ω. C = 1μF rated capacitors support all SPEED INDEX                   absorb the energy associated with the 61000-4-5 surge
values. Smaller value capacitors can be used if the appli-               transients. Therefore, a properly designed external pro-
cation only utilizes higher SPEED INDEX values. Ensure                   tection network is necessary to achieve a high level of
the capacitors’ working voltages are much higher than the                surge protection, and can also extend the ESD and EFT
expected ground offset voltage. See Figure 25.                           performance of the LTC4331 to extremely high levels.
Multiple Local Extender Network                                          Refer to section Auxiliary Protection for IEC Surge,
                                                                         EFT and ESD on page 17 of Analog Devices LTC2862A
Multiple LTC4331 devices operating in slave device mode                  Datasheet for a detailed description and diagram of the
can be connected to the same local SMBus network unlike                  external protection network.
other extension solutions which typically restrict usage to
one extender device. This allows a star network of paral-                The network provides the following protection:
lel LTC4331 devices extending separate remote SMBus                      •    EC 61000-4-2 ESD Level 4: ±30kV contact, ±30kV air
networks.                                                                     (line to GND, direct discharge to bus pins with trans-
LINK indicates when the remote system is ready. Optionally                    ceiver and protection circuit mounted on a ground
RDY can also be monitored to determine when the local                         referenced test card per Figure 4 of the standard)
side control interface is ready to access in the absence of              •    IEC 61000-4-4 EFT Level 4: ±5kV (line to GND, 5kHz
a link. See Figure 23.                                                        repetition rate, 15ms burst duration, 60 second test
                                                                              duration, discharge coupled to bus pins through
Multi-Tier Extender Network                                                   100pF capacitor per paragraph 7.3.2 of the standard)
The LTC4331 also supports chaining remote segments                       •    IEC 61000-4-5 Surge Level 4: ±5kV (line to GND,
into a single multi-tiered network. The maximum depth of                      line to line, 8/20µs waveform, each line coupled to
the I2C link network is limited only by the tTIMEOUT param-                   generator through 80Ω resistor per Figure 14 of the
eters of the I2C devices on the network. As the depth                         standard)
increases, the clock-stretched low time of the devices
increases. No other I2C timing parameter is affected by
depth. See Figure 24.
Table 7. Recommended Transformers
MANUFACTURER                 PART NUMBER          ISOLATION VOLTAGE          CENTER TAP        CM CHOKE     SPEED INDEX SUPPORTED
Murata                         78601/9JC                1kVRMS                    No              No                   ALL
Pulse                         PE-68386NL               1500VRMS                   No              No             3, 4, 5, 6, 7, 8
                                                                                                                                  Rev 0
22                                                  For more information www.analog.com


                                                                                                                 LTC4331
APPLICATIONS INFORMATION
                                        VCC                        VCC2
                        LTC4331                                                  LTC4331
                                           RB                         RB
                                 A                                            A
                                           RT2                        RT2
                                 B                                            B
                                           RB                         RB
                                                                                        4331 F20
                                                 V GROUND LOOP
                                                    ≤15V PEAK
                                     Figure 20. Resistor Bias Network
                           VCC                                                  VCC2
             LTC4331                                                                              LTC4331
                              RB                                                    RB
                                   RS                                      RS
                     A                                                                        A
                              RT2                                                   RT2
                                   RS                                      RS
                     B                                                                        B
                              RB                                                    RB
                                                                                                        4331 F21
                           Figure 21. Transformer Application Resistor Network
                                    VCC                               VCC2
                       LTC4331                                                     LTC4331
                                       RB     C                          RB
                                A                                               A
                                       RT2                               RT2
                                B                                               B
                                              C
                                       RB                                RB
                                                                                           4331 F22
                             Figure 22. Capacitive Isolation Resistor Network
                                                                                                                       Rev 0
                                      For more information www.analog.com                                            23


LTC4331
TYPICAL APPLICATIONS
                    µP                    LTC4331                            LTC4331
                       SCL            SCL                                            SCL
                       SDA            SDA                     25m                    SDA
                        GPI           ALERT       A                      A         ALERT
                       GPO            CTRL                                          CTRL
                                      REMOTE                                    REMOTE
                                                  B                      B
                                      SPEED1                                     SPEED1
                                      SPEED2                                     SPEED2
                                      A1                                                         I2C SLAVE
                                      A2                                                           DEVICE
                                          LTC4331                            LTC4331
                                      SCL                                            SCL
                                      SDA                    600m                    SDA
                                      ALERT       A                      A         ALERT
                                      CTRL                                          CTRL
                                      REMOTE                                    REMOTE
                                                  B                      B
                                      SPEED1                                     SPEED1
                                      SPEED2                                     SPEED2
                                      A1                                                         I2C SLAVE
                                      A2                                                           DEVICE
                                                                                     4331 F23
                                Figure 23. Multiple Local Extender Network
  µP         LTC4331                LTC4331                                LTC4331                          LTC4331
     SCL  SCL                               SCL                         SCL                                        SCL
     SDA  SDA               25m             SDA                         SDA                   600m                 SDA
      GPI ALERT       A           A      ALERT                          ALERT        A                    A      ALERT
     GPO  CTRL                             CTRL                         CTRL                                      CTRL
          REMOTE                       REMOTE                           REMOTE                                 REMOTE
                      B           B                                                  B                    B
          SPEED1                        SPEED1                          SPEED1                                  SPEED1
          SPEED2                        SPEED2                          SPEED2                                  SPEED2
          A1                                           I2C SLAVE        A1                                                   I2C SLAVE
          A2                                             DEVICE         A2                                                     DEVICE
                                                                                                                    4331 F24
                                  Figure 24. Multi-Tier Extender Network
                                                                                                                                    Rev 0
24                                    For more information www.analog.com


                                                                                                                                                                  LTC4331
PACKAGE DESCRIPTION
                                                                                 UFD Package
                                                                20-Lead Plastic QFN (4mm × 5mm)
                                                              (Reference LTC DWG # 05-08-1711 Rev B)
                                                                                     0.70 ±0.05
                                         2.65 ±0.05
  4.50 ±0.05     1.50 REF
         3.10 ±0.05
                                                    3.65 ±0.05
                                                                                          PACKAGE OUTLINE
                                              0.25 ±0.05
                                             0.50 BSC
                                                     2.50 REF
                                                    4.10 ±0.05
                                                    5.50 ±0.05
                           RECOMMENDED SOLDER PAD PITCH AND DIMENSIONS
                        APPLY SOLDER MASK TO AREAS THAT ARE NOT SOLDERED                                                                                               PIN 1 NOTCH
                                                                                                                                                                       R = 0.20 OR
                                                                                         0.75 ±0.05                                          1.50 REF                  C = 0.35
                                                     4.00 ±0.10                                                      R = 0.05 TYP
                                                     (2 SIDES)                                                                                     19     20
                                                                                                                                                                         0.40 ±0.10
                                             PIN 1
                                             TOP MARK
                                             (NOTE 6)
                                                                                                                                                                        1
                                                                                                                                                                        2
                    5.00 ±0.10
                                                                                                              2.50 REF
                    (2 SIDES)
                                                                                                                                       3.65 ±0.10
                                                                                                                                            2.65 ±0.10
                                                                                                                                                                       (UFD20) QFN 0506 REV B
                                                                                                           0.200 REF        R = 0.115                           0.25 ±0.05
                                                                                                           0.00 – 0.05             TYP                         0.50 BSC
                                                                                                                                    BOTTOM VIEW—EXPOSED PAD
                        NOTE:
                        1. DRAWING PROPOSED TO BE MADE A JEDEC PACKAGE OUTLINE MO-220 VARIATION (WXXX-X).
                        2. DRAWING NOT TO SCALE
                        3. ALL DIMENSIONS ARE IN MILLIMETERS
                        4. DIMENSIONS OF EXPOSED PAD ON BOTTOM OF PACKAGE DO NOT INCLUDE
                           MOLD FLASH. MOLD FLASH, IF PRESENT, SHALL NOT EXCEED 0.15mm ON ANY SIDE
                        5. EXPOSED PAD SHALL BE SOLDER PLATED
                        6. SHADED AREA IS ONLY A REFERENCE FOR PIN 1 LOCATION
                           ON THE TOP AND BOTTOM OF PACKAGE
                                                                                                                                                                                              Rev 0
                       Information furnished by Analog Devices is believed to be accurate and reliable. However, no responsibility is assumed by Analog
                       Devices for its use, nor for any infringements of patents or other rights of third parties that may result from its use. Specifications
                       subject to change without notice. No license For  more by
                                                                    is granted information   www.analog.com
                                                                                 implication or otherwise under any patent or patent rights of Analog Devices.                         25


LTC4331
TYPICAL APPLICATION
                                                       2.7V TO 5.5V
                                                                                                     1µF                                 4.7µF
                  CH0                                      VCC                                                 VL    VCC
                                        LTC2493                           2.7k          2.7k
                                                                                                           REMOTE            620Ω
                                                                    SDA                                    SDA             A
                  CH1                           REF+                 SCL                                   SCL
                                           IN+                                                                  LTC4331      110Ω
                                                                                                           ON
                          4-CHANNEL              24-BIT ∆∑ ADC                                                             B
                                                                                                           SLO
                              MUX               WITH EASY-DRIVE
                  CH2                      IN–                                                    10k                        620Ω
                                                REF–                 CA1                                   ALERT
                  CH3                                                CA0                                   SPEED2
                  COM                                                                                      SPEED1       LINK
                                                                      fO                                                 RDY
                                                        OSC                                                A2           CTRL
                                                                                                           A1     GND
                         TEMPERATURE
                            SENSOR
                                                                              EEPROM
                                                        REMOTE MEASUREMENT DEVICE
                                                                      3.3V TO 5V
                                         4.7µF                                               1µF
                                                                  VCC     VL
                                                       620Ω
                                                              A                ON
                                                                             SLO
                                                       110Ω         LTC4331
                                                              B                          10k
                                                                           ALERT
                                                       620Ω              SPEED2
                                                              A2         SPEED1
                                                                                            2.7k      2.7k
                                                              A1
                                                              LINK           SDA
                                                                                                              µP
                                                              RDY            SCL
                                                              CTRL       REMOTE
                                                                      GND
                                                                             4331 F25
                                Figure 25. Extending an LTC2439 4-Channel ADC for Remote Measuring
RELATED PARTS
PART NUMBER      DESCRIPTION                                                        COMMENTS
LTC4316/LTC4317/ Single I2C/SMBus Address Translator                                Resistor Configurable, 2.5V, 3.3V, and 5V Busses
LTC4318
LTC4312/LTC4314  Pin-Selectable, 2-Channel, 2-Wire Multiplexer with Bus             Two or Four Pin Selectable Downstream Busses, VIL Up to 0.3V • VCC,
                 Buffers                                                            Rise Time Accelerators, 45ms Stuck Bus Disconnect and Recovery,
                                                                                    ±4kV HBM ESD
LTC4305/LTC4306  2-Channel, 2-Wire Bus Multiplexer with Capacitance                 Two or Four Software Selectable Downstream Busses, Stuck Bus
                 Buffering                                                          Disconnect, Rise Time Accelerators, Fault Reporting, ±10kV HBM ESD
LTC4310          Hot-Swappable I2C Isolators                                        Bidirectional I2C Communication between Two Isolated Busses
LTM2892          SPI/Digital or I2C µModule Isolator                                3500VRMS Isolation, 6 Channels
LTM2883/LTM2886/ SPI/Digital or I2C µModule Isolator with Adjustable ±12.5V         2500VRMS Isolation with Power in BGA Package
LTM2887          and 5V Regulated Power
                                                                                                                                                         Rev 0
26
                                                                                                                                               D17181-0-9/18(0)
                                                                                                                                            www.analog.com
                                                                                                                                   ANALOG DEVICES, INC. 2018


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Analog Devices Inc.:
 LTC4331CUFD#PBF LTC4331CUFD#TRPBF LTC4331HUFD#PBF LTC4331HUFD#TRPBF LTC4331IUFD#PBF
LTC4331IUFD#TRPBF DC2754A
