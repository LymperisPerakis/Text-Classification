                                                                                                                       EVALUATION KIT AVAILABLE
MAX121                                          308ksps ADC with DSP Interface and 78dB SINAD
General Description                                                     Benefits and Features
The MAX121 is a complete, BiCMOS, serial-output,                        ●● 14-Bit Resolution
sampling 14-bit analog-to-digital converter (ADC) that                  ●● 2.9µs Conversion Time/308ksps Throughput
com­ bines an on-chip track/hold and a low-drift, low-
noise, buried-zener voltage reference with fast conversion              ●● 400ns Acquisition Time
speed and low power consumption. The throughput rate                    ●● Low Noise and Distortion
is as high as 308k samples per second (ksps). The full-                     • 78d8 SINAD
scale analog input range is ±5V.                                            • -85dB THD
The MAX121 utilizes the successive-approximation archi-                 ●● ±5V Bipolar Input Range, Overvoltage Tolerant to
tecture with a high-speed DAC to achieve both fast                          ±15V
conversion speeds and low-power operation. Operating                    ●● 210mW Power Dissipation
with +5V and -12V or -15V power supplies, power con­
                                                                        ●● Continuous-Conversion Mode Available
sumption is only 210mW.
                                                                        ●● 30ppm/°C, -5V Internal Reference
The MAX121 can be directly interfaced to the serial port
of most popular digital-signal processors, and comes                    ●● Interfaces to DSP Processors
in space-saving 16-pin DIP and SO and smaller 20-pin                    ●● 16-Pin DIP and SO Packages,
SSOP packages. The MAX121 operates with TTL- and                            20-Pin SSOP Package
CMOS-compatible clocks in the frequency range from
1.1MHz to 5.5MHz. All logic inputs and outputs are TTL­-
and CMOS-compatible. This data sheet includes applica-                  Functional Diagram
tion notes for easy interface to TMS320, µPD77230, and
ADSP2101 digital-signal processors, as well as µPs using                                                                                       VDD
                                                                                                                                      SAMPLING
the Motorola SPI and QSPI interface standards.                                              MAX121                                  COMPARATOR
                                                                                                                  BUFFER                       AGND
Applications                                                                AIN
                                                                                  3kΩ                TRACK/HOLD
                                                                                                                            7pF                DGND
●●  Digital Signal Processing                                                                                                                  VSS
                                                                                           3kΩ
●●  Audio and Telecom Processing
                                                                          VREF       -5V
●●  Speech Recognition and Synthesis                                                         DAC
●●  DSP Servo Control
●●  Spectrum Analysis
                                                                                               SAR
                                                                                                                                               SDATA
                                                                                REFERENCE
                                                                                                                                               SCLK
Ordering Information appears at end of data sheet.                                                                                             FSTRT
                                                                         CLIKIN
                                                                                                           CONTROL LOGIC
                                                                                                                                               SFRM
For related parts and recommended products to use with this part, refer             CONVST         CS       MODE     INVCLK    INVFRM
to www.maximintegrated.com/MAX121.related.
19-0108; Rev 3; 1/12


MAX121                                                                  308ksps ADC with DSP Interface and 78dB SINAD
Absolute Maximum Ratings
VDD to DGND ..........................................................-0.3V to +6V                    Continuous Power Dissipation (TA = +70°C)
VSS to DGND.........................................................+0.3V to -17V                        16-Pin PDIP (derate 10.53mW/°C above +70°C)..........842mW
AIN to AGND........................................................................±15V                  16-Pin Wide SO (derate 9.52mW/°C above +70°C)......762mW
AGND to DGND..................................................................±0.3V                      20-Pin SSOP (derate 8.00mW/°C above +70°C)..........640mW
Digital Inputs to DGNO.............................. -0.3V to (VDD + 0.3V)                            Operating Temperature Ranges
(CS, CONVST, MODE, CLKIN, INVCLK, INVFRM)                                                                 MAX121C_...........................................................0°C to +70°C
Digital Outputs to DGND.......................... +0.3V to (VDD + 0.3V)                                   MAX121E_....................................................... -40°C to +85°C
(SFRM, FSTRT, SCLK, SDATA)                                                                            Storage Temperature Range............................ -65°C to + 160°C
                                                                                                      Lead Temperature (soldering, 10s).................................. +300°C
                                                                                                      Soldering Temperature (reflow)........................................+260°C
Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional operation of the device at these
or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to absolute maximum rating conditions for extended periods may affect
device reliability.
Electrical Characteristics
(VDD = 4.75V to 5.25V, VSS = -10.8V to -15.75V, fCLK = 5.5MHz, TA = TMIN to TMAX, unless otherwise noted.)
                  PARAMETER                           SYMBOL                                  CONDITIONS                                    MIN          TYP           MAX         UNITS
 DYNAMIC PERFORMANCE (fS = 308kHz, VAIN = 10VP-P, 50kHz)
                                                                                                             MAX121C                         75            78
 Signal-to-Noise Ratio                                 SINAD           Including distortion                                                                                           dB
                                                                                                             MAX121E                         73            77
 Total Harmonic Distortion                               THD           First five harmonics                                                               -85           -77           dB
 Spurious-Free Dynamic Range                            SFDR                                                                                 77            86                         dB
 ACCURACY
 Resolution                                              RES                                                                                 14                                      Bits
                                                                       12 bits no missing codes over temperature
 Differential Nonlinearity (Note 1)                      DNL                                                                                             ±1.5                        LSB
                                                                       range
 Integral Nonlinearity                                   INL                                                                                               ±2                        LSB
                                                                       Code 00..00 to 00..01 transition,
                                                                                                                                                                        ±10          mV
 Bipolar Zero Error                                                    near VAIN = 0V
                                                                       Temperature drift                                                                   ±1                      ppm/°C
                                                                       Including reference; adjusted for bipolar
 Full-Scale Error (Notes 1, 2)                                                                                                                                          ±0.2          %
                                                                       zero error; TA = +25°C
 Full-Scale Temperature Drift                                          Excluding reference                                                                 ±1                      ppm/°C
                                                                       VDD only, 5V ±5%                                                                  ±1/2            ±2
 Power-Supply Rejection                                                VSS only, -12V ±10%                                                                 ±1            ±2          LSB
                                                                       VSS only, -15V ±5%                                                                  ±1            ±2
 ANALOG INPUT
 Input Range                                                                                                                                 -5                          +5            V
 Input Current                                                         VAIN = 5V (RIN approximately 6kW to REF)                                                         2.5          mA
 Input Capacitance (Note 3)                                                                                                                                              10           pF
 Full-Power Bandwidth                                                                                                                                     1.5                        MHz
www.maximintegrated.com                                                                                                                                           Maxim Integrated │ 2


MAX121                                           308ksps ADC with DSP Interface and 78dB SINAD
Electrical Characteristics (continued)
(VDD = 4.75V to 5.25V, VSS = -10.8V to -15.75V, fCLK = 5.5MHz, TA = TMIN to TMAX, unless otherwise noted.)
           PARAMETER               SYMBOL                      CONDITIONS                    MIN     TYP      MAX      UNITS
 REFERENCE
 Output Voltage                                 No external load, VAIN = 5V, TA = +25°C     -5.02             -4.98       V
 External Load Regulation                       0mA < ISINK < 5mA, VAIN = 0V                                     5       mV
 Temperature Drift (Note 4)                                                                                    ±30     ppm/°C
 CONVERSION TIME
 Synchronous                         tCONV      16 tCLK                                                        2.91      µs
 Clock Frequency                      fCLK                                                   0.1                5.5     MHz
 DIGITAL INPUTS (CLKIN, CONVST, CS)
 Input High Voltage                    VIH                                                   2.4                          V
 Input Low Voltage                     VIL                                                                      0.8       V
 Input Capacitance (Note 3)                                                                                     10       pF
 Input Current                                  VDD = 0V or VDD                                                 ±5       µA
 DIGITAL OUTPUTS (SCLK, SDATA, FSTRT, SFRM)
 Output Low Voltage                   VOL       ISINK = 1.6mA                                                   0.4       V
 Output High Voltage                  VOH       ISOURCE = 1mA                              VDD - 0.5                      V
 Leakage Current                      ILKG      VOUT = 0V or VDD                                                ±5       µA
 Output Capacitance (Note 3)                                                                                    10       pF
 POWER REQUIREMENTS
 Positive Supply Voltage              VDD       By supply rejection test                    4.75               5.25       V
 Negative Supply Voltage              VSS       By supply rejection test                    -10.8            -15.75       V
                                                VDD = 15.25V, VSS = -15.75V, VAIN = 0V,
 Positive Supply Current               IDD                                                              9       15       mA
                                                VCS = VCONVST = VMODE = 5V
                                                VDD = 15.25V, VSS = -15.75V, VAIN = 0V,
 Negative Supply Current               ISS                                                             14       20       mA
                                                VCS = VCONVST = VMODE = 5V
                                                VDD = 15.25V, VSS = 12V, VAIN = 0V,
 Power Dissipation                                                                                    213      315       mW
                                                VCS = VCONVST = VMODE = 5V
www.maximintegrated.com                                                                                    Maxim Integrated │ 3


MAX121                                                 308ksps ADC with DSP Interface and 78dB SINAD
Timing Characteristics
(VDD = 5V, VSS = -12V or -15V, TA = TMIN to TMAX, unless otherwise noted.) (Note 5)
                                                            TA = +25°C            MAX121C/E              MAX121M
    PARAMETER             SYMBOL CONDITIONS                                                                                  UNITS
                                                        MIN TYP      MAX     MIN      TYP       MAX MIN      TYP    MAX
 CONVST Pulse
                             tCW                         20                   30                      35                       ns
 Width (Note 6)
 Data-Access Time             tDA      CL = 50pF               25      50                        65                   80       ns
 Data-Hold Time              tDH                               25      50                        65                   80       ns
 CLKIN to SCLK               tCD       CL = 50pF               40      65                        85                  105       ns
 SCLK to SDATA
                             tSC       CL = 50pF                      ±65                       ±80                 ±100       ns
 Skew
 SCLK to SFRM or
                             tSC       CL = 50pF                      ±25                       ±35                  ±40       ns
 FSTRT Skew
 Acquisition Time
                             tAQ                        400                  400                     400                       ns
 (Note 6)
 Aperture Delay               tAP                              10                                                              ns
 Aperture Jitter                                               30                                                              ns
 Clock Setup/Hold
                             tCK                         10            50     10                 50   10              50       ns
 Time
Note 1:   These tests are performed at VDD = +5V. VSS = -15V. Operation over supply is guaranteed by supply-rejection tests.
Note 2:   Ideal full-scale transition is at +5V - 3/2 LSB = +4.9991V adjusted for offset error.
Note 3:   Guaranteed, not tested.
Note 4:   Temperature drift is defined as the change in output voltage from +25°C to TMIN or TMAX. It is calculated as
          TC = (ΔVREF/VREF)/ΔT.
Note 5: Control inputs specified with tr = tf = 5ns (10% to 90% of +5V) and timed from a voltage level of 1.6V. Output delays are
          measured to +0.8V if going low, or +2.4V if going high. For a data-hold time, a change of 0.5V is measured. See Figures 4
          and 5 for load circuits.
Note 6: Guaranteed, not tested.
www.maximintegrated.com                                                                                          Maxim Integrated │ 4


MAX121                                        308ksps ADC with DSP Interface and 78dB SINAD
Pin Configurations
                         TOP VIEW
                                      +                                      +
                                  1             MODE  16              VSS  1                20 MODE
                                     VSS
                                                                      VDD  2                19 CS
                                  2  VDD           CS 15
                                         MAX121                       AIN  3    MAX121      18 CLKIN
                                  3  AIN        CLKIN 14             VREF  4                17 CONVST
                                                                      N.C. 5                16 N.C.
                                  4  VREF     CONVST  13
                                                                      N.C. 6                15 N.C.
                                  5  AGND        SCLK 12
                                                                    AGND   7                14 SCLK
                                  6  INVCLK    SDATA  11          INVCLK   8                13 SDATA
                                                                 INVFRM    9                12 FSTRT
                                  7  INVFRM     FSTRT 10
                                                                    DGND 10                 11 SFRM
                                  8  DGND        SFRM 9
                                                                                 SSOP
                                          PDIP/SO
Pin Description
          PIN
                          NAME                                                 FUNCTION
 PDIP/SO       SSOP
     1            1        VSS      Negative Power Supply, -12V or -15V. Bypass to AGND with 10µF and 0.1µF capacitors.
     2            2        VDD      Positive Power Supply, +5V. Bypass to AGND with 10µF and 0.1µF capacitors.
     3            3        AIN      Sampling Analog Input, ±5V Bipolar Input Range
     4            4       VREF      -5V Reference Output. Bypass to AGND with 22µF || 0.1µF capacitors.
     5            7       AGND      Analog Ground
     6            8      INVCLK     Invert Serial Clock. Connect to DGND to invert the SCLK output (relative to CLKIN).
                                    Invert Serial Frame. This input sets the polarity of the SFRM output as follows:
     7            9      INVFRM     If INVFRM = DGND, SFRM is high during a conversion.
                                    If INVFRM = VDD, SFRM is low during a conversion.
     8           10       DGND      Digital Ground
                                    Serial Frame Output. Normally high (INVFRM = VDD), falls at the beginning of the
     9           11       SFRM
                                    conversion and rises at the end (after 16 tCLK) signaling the end of a 16-bit frame.
                                    Frame Start Output. High pulse that lasts one clock cycle, falling edge indicates that a valid
    10           12       FSTRT
                                    MSB is available.
    11           13       SDATA     Serial Data Output. MSB first, two’s-complement binary output code.
                                    Serial Clock Output. Same polarity as CLKIN if INVCLK = VDD, inverted CLKIN if
    12           14       SCLK
                                    INVCLK = DGND. Note that SCLK runs whenever CLKIN is active.
    13           17      CONVST     Active-Low Convert Start Input. Conversions are initiated on falling edges.
                                    Clock Input. Supply at TTL-/CMOS-compatible clock from 0.1MHz to 5.5MHz, 40% to 60%
    14           18       CLKIN
                                    duty cycle.
                                    Active-Low Chip Select Input. CS = DGND enables the three-state outputs. Also, if
    15           19         CS
                                    CONVST is low, initiates a conversion on the falling edge of CS.
                                    Hardwire to set operational mode. VDD (single conversions),
    16           20       MODE
                                    DGND (continuous conversions).
    —       5, 6, 15, 16   N.C.     No Connection. Not internally connected.
www.maximintegrated.com                                                                                      Maxim Integrated │ 5


MAX121                                          308ksps ADC with DSP Interface and 78dB SINAD
    AGND
           0.1µF       10µF
 -12V/-15V                     VSS       MODE        DGND
                                                                                                                   SAMPLING
       +5V                                                                                                       COMPARATOR
                               VDD         CS
            10µF      0.1µF                                                  3kΩ               BUFFER     CHOLD
                                                                                         TRACK
           AGND                                                       AIN                                  7pF
                                   MAX121
                                                                 CPACKAGE
  ANALOG                                             CLOCK           10pF                HOLD
    INPUT                      AIN       CLKIN       INPUT                     3kΩ
                                                                                                  CSWITCH
                                                                     VREF
                               VREF    CONVST        DGND                                         2pF
           0.1µF       22µF                                                       VREF
                                                                                   (-5V)
                               AGND      SCLK
           AGND                                                                  DAC
                                                        TO
                               INVCLK   SDATA           SERIAL
                                                        PORT
       VDD                     INVFRM   FSTRT                                     SAR
                               DGND
                 DGND
Figure 1. MAX121 in the Simplest Operational Mode              Figure 2. Equivalent Input Circuit
(Continuous-Conversion Mode)
Detailed Description                                           a conversion is initiated (aperture delay). The variation in
                                                               this delay from one conversion to the next (aperture jitter)
ADC Operation                                                  is typically 30ps. Figures 7–9 detail the track/hold mode
The MAX121 uses successive approximation and input             and interface timing for the three different interface modes.
track/hold (T/H) circuitry to convert an analog signal to a
14-bit serial digital output code. The control logic interfac- lntemal Reference
es easily to most microprocessors (µPs) and digital­signal     The MAX121 -5.00V buried-zener reference biases the
processors (DSPs), requiring only a few passive com-           internal DAC. The reference output is available at the
ponents for most applications. The T/H does not require        VREF pin and must be bypassed to the AGND pin with a
an external capacitor. Figure 1 shows the MAX121 in its        0.1µF ceramic capacitor in parallel with a 22µF or greater
simplest operational configuration.                            electrolytic capacitor. The electrolytic capacitor’s equiva-
                                                               lent series resistance (ESR) must be 100mΩ or less to
Analog Input Track/Hold                                        properly compensate the reference output buffer. Sanyo’s
The Equivalent Input Circuit (Figure 2) illustrates the        organic semiconductor capacitors work well; telephone
sampling architecture of the ADC’s analog comparator.          and FAX numbers are provided below.
An internal buffer charges the hold capacitor to minimize
                                                                   Sanyo Video Components (USA)
the required acquisition time between conversions. The
analog input appears as a 6kΩ resistor in parallel with a                  Phone: (619) 661-6835
10pF capacitor.                                                            FAX: (619) 661-1055
Between conversions, the buffer input is connected to AIN          Sanyo Electric Company, LTD. (Japan)
through the input resistance. When a conversion starts,                    Phone: 0720-70-1005
the buffer input is disconnected from AIN, thus sampling
the input. At the end of the conversion, the buffer input                  FAX: 0720-70-1174
is reconnected to AIN, and the hold capacitor tracks the           Sanyo Fisher Vertriebs GmbH (Germany)
input voltage.                                                             Phone: 06102-27041, ext. 44
The T/H is in its tracking mode whenever a conversion is                   FAX: 06102-27045
not in progress. Hold mode starts approximately 10ns after
www.maximintegrated.com                                                                                      Maxim Integrated │ 6


MAX121                                                        308ksps ADC with DSP Interface and 78dB SINAD
Proper bypassing minimizes reference noise and main-                         clock cycle preceding the MSB. A falling edge on FSTRT
tains a low impedance at high frequencies. The internal­                     indicates that the MSB is available on the SDATA output.
reference output buffer can sink up to 5mA from an                           The SFRM output (normally high when INVFRM = VDD)
external load.                                                               goes low coincident with the MSB appearing at the
An external reference voltage can be used to overdrive                       SDATA pin. SFRM returns high 16 clock cycles later. The
the MAX121’s internal reference, if the external reference                   polarity of SFRM can be inverted by tying the INVFRM
lies within the range from -5.05V to -5.10V. The external                    input to DGND. A minimum of 18 clock cycles per conver-
reference must be capable of sinking a minimum of 5mA.                       sion is required to obtain a valid SFRM output.
The external VREF bypass capacitors are still required.                      See Figure 3 for the data-access and data-hold timing
                                                                             diagram if several devices share the serial bus. The
External Clock                                                               equivalent load circuits for data-access and data-hold tim-
The MAX121 requires a TTL-/CMOS-compatible clock                             ing are shown in Figures 4 and 5.
for proper operation. The MAX121 accepts clocks in the
frequency range from 0.1MHz to 5.5MHz when operating                         Digital Interface
in mode 1 or mode 2 (see the Operating Modes section).                       The MAX121 serial interface is compatible with SPI and
To satisfy the 400ns acquisition-time requirement with 2                     QSPI serial interfaces. In addition, two framing signals
clock cycles, the maximum clock frequency is limited to                      (FSTRT and SFRM) are provided to allow the MAX121
5MHz when operating in mode 3 (continuous-conversion                         to easily interface to most digital-signal processors (DSP)
mode). The minimum clock frequency in all modes is lim-                      with no external glue logic. The INVCLK input inverts the
ited to 0.1MHz due to the droop rate of the internal T/H.                    phase of SCLK relative to CLKIN, and the INVFRM input
                                                                             inverts the phase of the SFRM output. These control
Output Data Format                                                           signals allow the MAX121 to directly interface to devices
The conversion result is output as a 16-bit serial data                      with many different serial-interface standards. Specific
stream, starting with the 14 data bits (MSB first) followed                  information for interfacing the MAX121 with SPI, QSPI,
by 2 trailing zeros. The format of the output data is two’s-                 and several DSP devices is included in the Applications
complement binary. Data is clocked out of the SDATA pin                      Information section.
on the rising edge of CLKIN.
                                                                                                                                +5V
The output data can be framed using either the FSTRT or
the SFRM output. FSTRT (normally low) goes high for 1                                                                               3kΩ
                                                                                  SERIAL                            SERIAL
       CS                                                                       OUTPUTS                           OUTPUTS
                                                                                         3kΩ        10pF                             10pF
                          tDA                       tDH
    SDATA, SCLK,
   SFRM + FSTRT    HIGH                                          HIGH                              DGND                              DGND
                                    OUTPUTS ENABLED
               IMPEDEANCE                                   IMPEDEANCE
                                                                                         a. VOH TO HIGH-Z (tDH)            b. VOL TO HIGH-Z (tDH)
Figure 3. Data-Access + Data-Hold Timing                                     Figure 5. Load Circuits for Data-Hold Time
                                                           +5V                                                                            ENABLE
                                                                                                                                          DIGITAL
                                                                                                                                          OUTPUTS
                                                               3kΩ
     SERIAL                                   SERIAL                                                                                      START
   OUTPUTS                                  OUTPUTS                                CS                                                 CONVERSION
                                                                                                                Q
             3kΩ           CL                                   CL
                       DGND                                     DGND
                                                                                                                                          ADC
                                                                              CONVST                            Q
                                                                                                                                          BUSY
             a. HIGH-Z TO VOH (tDA)                   b. HIGH-Z TO VOL (tDA)
Figure 4. Load Circuits for Data-Access Time                                 Figure 6. Conversion Control Logic
www.maximintegrated.com                                                                                                   Maxim Integrated │ 7


MAX121                                            308ksps ADC with DSP Interface and 78dB SINAD
Timing and Control                                                     Operating Modes
The MAX121 has three possible modes of operation, as                   Mode 1: CONVST Controls Conversion Starts
outlined in the timing diagrams of Figures 7–9 and dis-
                                                                       (MODE = VDD, CS = DGND)
cussed in the Operating Modes section.
                                                                       Figure 7 shows the timing diagram for mode 1. In this
In Mode 1, the CONVST input is used to control the start               mode, conversion start operations are controlled by the
of the conversion. Mode 1 is intended for DSP and other                CONVST input.
applications where the analog input must be sampled at
a precise instant in time.                                             A falling edge on the CONVST input places the T/H into
                                                                       the hold mode and starts a conversion in the successive­
In Mode 2, the CS input controls the start of the conver-              approximation register (SAR). The FSTRT (normally
sion. This mode is useful when several devices are mul-                low) output goes high on the next rising clock edge and
tiplexed on the same serial data bus, since the MAX121                 remains high for one clock cycle. On the next rising clock
outputs are placed in a high-impedance state when CS is                edge, FSTRT goes low and the SFRM output goes low
pulled high.                                                           (INVFRM = VDD), indicating that the MSB is ready to be
Mode 3 is the continuous-conversion mode. This mode                    latched. SFRM remains high for 16 clock cycles ( 4 data
is intended for data logging and similiar applications                 bits plus 2 trailing zeros).
where the MAX121 is directly linked to memory through                  The T/H amplifier returns to the track mode when the 14th
a first-in/first-out (FIFO) buffer or a direct memory access           bit (D0) is clocked out of the SDATA pin. A new conver-
(OMA) port.                                                            sion can be initiated by the CONVST input after the 400ns
In all three operating modes, the start of conversion is               minimum acquisition time has been satisfied.
controlled by either the CS or the CONVST input. Both of               CS must be low to start a conversion. In applications
these inputs must be low for a conversion to take place.               where the MAX121 interfaces with a dedicated serial port,
Figure 6 shows the logic equivalent for the conversion                 CS can be hardwired to DGND. To interface the MAX121
circuitry. Once the conversion is in progress, it cannot be            to a multiplexed serial bus, CS can be externally driven
restarted.                                                             low to enable conversions, or driven high to place the
                                                                       serial outputs into a high-impedance state.
                           CONVST
                                          tCW
                             CLKIN                    1          13         14          15         16*          17*
                             SFRM
                   (INVFRM = VDD)
                            FSTRT
                             SCLK                       1            13         14           15         16*         17*
                   (INVCRM = VDD)
                                              tCD
                                                        MSB     D2       D1        LSB
                            SDATA
                             HOLD
                       T/H
                            TRACK
                                                                                           tAQ
                                   tAP
                                                  * THESE CLOCK CYCLES MAY BE OMITTED IF THE SFRM SIGNAL IS NOT NEEDED
Figure 7. CONVST Controls Conversion Starts (Mode 1)
www.maximintegrated.com                                                                                                 Maxim Integrated │ 8


MAX121                                           308ksps ADC with DSP Interface and 78dB SINAD
Mode 2: CS Controls Conversion Starts                                 Mode 3: Continuous-Conversion Mode
(MODE = VDD, CONVST = DGND)                                           (CONVST = CS = MODE = DGND)
Figure 8 shows the timing diagram for mode 2. In mode                 For applications that do not require precise control of
2, CS controls the conversion start and enables the serial            sampling in time, such as data logging, the MAX121 can
output pins. Mode 2 is useful in applications where the               operate in continuous-conversion mode, directly linked to
MAX121 shares the output data bus with other devices.                 memory through DMA ports or a FIFO buffer.
When CS is driven high, the MAX121 is disabled and its                In this mode, conversions are performed continuously
serial outputs (SCLK, SDATA, SFRM, and FSTRT) are                     at the rate of one conversion for every 16 clock cycles,
placed into a high-impedance state.                                   which includes 2 clock cycles for the T/H acquisition time.
A falling edge on the CS input places the T/H into the hold           To satisfy the 400ns minimum acquisition-time require-
mode and starts a conversion in the SAR. The FSTRT                    ment within 2 clock cycles, the MAX121 ‘s maximum clock
and SFRM outputs can be used to frame the output data                 frequency is limited to 5MHz when operating in mode 3.
as described in the mode 1 section. CS must remain low                The FSTRT output is used to frame data, as described
for the duration of the conversion.                                   in the mode 1 section and the mode 3 timing diagram
The T/H amplifier returns to the track mode when the 14th             (Figure 9). The SFRM output is meaningless in mode 3,
bit (D0) is clocked out of the SDATA pin. A new conversion            since it will not change state.
can be initiated by the CS input after the 400ns acquisition          The MODE input should be hardwired to DGND, since
time has been satisfied.                                              this input must be low when the MAX121 powers up
                                                                      for proper operation of mode 3. To disable conversions,
                                                                      drive CONVST high. To put the serial outputs into a high-
                                                                      impedance state, drive CS high.
                       CS
                    CLKIN                           1         13          14          15         16*         17*
                     SFRM        HIGH                                                                                 HIGH
           (INVFRM = VDC) IMPENDANCE                                                                                  IMPENDANCE
                                 HIGH                                                                                 HIGH
                    FSTRT
                           IMPENDANCE                                                                                 IMPENDANCE
                     SCLK        HIGH                  1           13         14           15         16*         17* HIGH
            (INVCLK = VDC) IMPENDANCE                                                                                 IMPENDANCE
                                             tCD
                                 HIGH                                                                                 HIGH
                   SDATA                                MSB   D2       D1         LSB                                 IMPENDANCE
                           IMPENDANCE
                     HOLD
               T/H
                                      tAP
                                                 * THESE CLOCK CYCLES MAY BE OMITTED IF THE SFRM SIGNAL IS NOT NEEDED
Figure 8. CS Controls Conversion Starts (Mode 2)
www.maximintegrated.com                                                                                               Maxim Integrated │ 9


MAX121                                         308ksps ADC with DSP Interface and 78dB SINAD
                       15         16         1          13            14                 15            16             1
            CLKIN
           FSTRT
             SCLK         15         16         1          13                 14                15            16              1
    (INVCLK = VCD)
           SDATA   LSB                            MSB   D2     D1                  LSB                                           MSB
            HOLD
       T/H
           TRACK
                                                                                            tAQ
Figure 9. Continuous-Conversion Mode (Mode 3)
Applications Information
Initialization After Power-Up                                  CONVST OR CS
Upon power-up, the first conversion of the MAX121 will be                                          ICK
valid if the following conditions are met:
1) Allow 16 clock cycles for the internal T/H to enter the                CLKIN
     track mode, plus a minimum of 400ns in the track
     mode for the data-acquisition time.                       THE TIMING RELATIONSHIP BETWEEN CLKIN AND CONVST OR CS DETERMINES IF A
2) Make sure the reference voltage has settled. Allow          CLOCK CYCLE SLIPS OR NOT. USE THE FOLLOWING:
                                                                  IF tCK < 10ns, CONVERSION TIME = 16 CLOCK EDGES
     0.5ms for each 1µF of reference bypass capacitance           IF tCK > 50ns, CONVERSION TIME = 15 CLOCK EDGES
     11ms for a 22µF capacitor.                                   IF 10ns < tCK < 50ns, CONVERSION TIME IS INDETERMINATE (15 OR 16)
Clock and Control Synchronization
                                                              Figure 10. Clock and Control Synchronization
If the clock and conversion start inputs (CONVST or CS—
see the Operating Modes section) are not synchronized,
the conversion time can vary from 15 to 16 clock cycles.      cycles, the conversion start input(s) should go low within
The SAR always changes state on the rising edge of            10ns of the next rising edge of CLKIN. If the conversion
the CLKIN input. To ensure a fixed conversion time, see       start input(s) go low from 10ns of the next rising edge of
Figure 10 and the following guidelines.                       CLKIN. If the conversion start input(s) go low from 10ns
                                                              to 50ns before the next rising edge of CLKIN, the number
For a conversion time of 15 clock cycles, the conversion      of clock cycles required is undefined and can be either 15
start input(s) should go low at least 50ns before the next    or 16. For best analog performance, the conversion start
rising edge of CLKIN. For a conversion time of 16 clock       inputs must be synchronized with CLKIN.
www.maximintegrated.com                                                                                             Maxim Integrated │ 10


MAX121                                            308ksps ADC with DSP Interface and 78dB SINAD
Maximum Clock Rate tor Serial Interface                     Motorola SPI Serial Interface (CPOL = 0, CPHA = 1)
The maximum serial clock rate depends upon the mini-        Figure 13 shows the MAX121 and processor interface
mum setup time required by the receiving processor’s        connections required to support the SPl standard. Figure
serial data input and the ADC’s maximum clock-to-data       12 shows the SPI interface timing diagram. For SPI inter-
delay. The MAX121 allows two fundamentally different        faces, the processor SS input should be pulled high, to
methods of clocking data into the processor. In the first   configure the processor as the master. An I/O port from
clocking method, CLKIN is both the input clock to the       the processor drives the MAX121 CONVST (mode 1) or
MAX121 and the serial clock for the processor. With the     CS (mode 2) low to control the conversion starts. The
second method, CLKIN is the input clock for the MAX121      SCK output of the processor will drive the CLKIN of the
while SCLK is the serial clock for shifting data into the   MAX121. The MISO I/O of the processor is driven by the
                                                            SDATA output of the MAX121.
processor (see Figure 11).
                                                            The SPI standard requires that all data transfers occur
The first method would generally be used with simple
                                                            in blocks of 8 bits, but the MAX121 outputs data in
serial-interface standards (such as SPI) where the pro-
                                                            16-bit blocks. Therefore, two 1-byte read operations are
cessor does not support asynchronous data transfers.        required to receive the full 14 data bits from the MAX121.
The maximum clock-to-data delay would be tCD + tSC.
For this case, calculate the maximum serial clock rate      A conversion is initiated by driving the processor I/O port
with the following formula:                                 low. Next, a write operation must be performed by the
                                                            processor to activate the serial clock and read the first 8
               fCLKIN = (1/2) x 1/(tSU + tCD + tSC)         bits of data from the MAX121.
where tSU is the minimum data setup time required at the    The MAX121 output data transitions on the rising edge of
processor serial data input, tCD is the maximum CLKIN­      the clock. The processor reads data on the falling edge of
to-SCLK delay of the MAX121, and tSC is the maximum         the clock (CPHA = 1). This provides one half clock cycle
SCLK-to-SDATA delay for the MAX121.                         to satisfy the minimum setup and hold time requirement
The second type of interface is intended for applications   of the processor data input. The maximum clock rate for
where the processor supports asynchronous data trans-       SPI interfaces is 2MHz.
fers. The SCLK output of the MAX121 drives the serial       The first byte of data read by the processor will consist of
clock of the processor, eliminating the tCD term from the   a leading zero followed by the 7 MSBs of data. A second
above equation and allowing the use of faster clocks. For   write operation should then be initiated to read the second
this case, calculate the maximum serial clock rate with the byte of data, which contains the 7 LSBs of conversion
following formula:                                          data followed by a trailing zero. To minimize errors due to
                                                            the droop of the MAX121 internal T/H, limit the maximum
                   fCLKIN = (1/2) x 1/(tSU + tSC)           time delay between the conversion start and the end of
where the variables are as defined above.                   the second read operation to no more than 160µs.
                CLKIN
                                       tCD             tCD
                 SCLK
      (INVCLK = VDD)
                                            tSC*
        SDATA FSTRT
                SFRM
          * tSS CAN BE POSITIVE OR NEGATIVE
Figure 11. Timing Diagram for Serial Data
www.maximintegrated.com                                                                             Maxim Integrated │ 11


MAX121                                                    308ksps ADC with DSP Interface and 78dB SINAD
Motorola QSPI Serial Interlace                                                  time of 10ns (tSCS) and a minimum data-hold time of 10ns
(CPOL = 0, CPHA = 1)                                                            (tSCH). This interface permits operation of the MAX121 at
Figure 14 shows the connections required to implement a                         its maximum clock rate of 5.5MHz.
QSPI interface with the MAX121. The timing diagram for                          An output port of the ADSP2101 drives the MAX121
this interface is shown in Figure 15. The QSPI standard                         CONVST input low to initiate a conversion. The SFRM
is similiar to SPI, with the primary differences as follows:                    output of the MAX121 drives the RFS (Receive Frame
1) QSPI allows arbitrary length data transfers from 8                           Synchronization) input to the DSP low to indicate that the
    to 16 bits, so only one read operation is required to                       MSB has been shifted out of the MAX121 SDATA pin. On
    receive the 14 bits of output data from the MAX121.                         the next falling edge on SCLK, the MSB is shifted into the
                                                                                ADSP2101 serial input. Note that the MAX121 INVFRM
2) QSPI allows clock rates up to 4MHz, compared to                              input is grounded to provide the proper phase for the
    2MHz with SPI.                                                              SFRM output.
ADSP2101 Serial Interlace                                                       The SCLK terminal of the ADSP2101 is configured as an
Figure 16 shows the connections required to interface the                       input and is driven by the MAX121 SCLK output to clock
MAX121 to Analog Devices’ ADSP2101 DSP. Figure 17                               data into the DSP. The SFRM output remains low for 16
is a plot of the timing diagram. The ADSP2101 has a high-                       clock cycles, allowing the 14 data bits to be shifted into
speed serial interface with a minimum serial data setup                         the ADSP2101, followed by 2 trailing zeros.
                                        1ST BYTE READ                                                       2ND BYTE READ
        CLKIN         1    2     3        4       5        6       7     8            1      2       3       4      5       6      7        8
      CONVST
                 LEADING                                                                                                                     TRAILING
       SDATA      ZERO     MSB   D12      D11      D10      D9      D8      D7          D6     D5      D4      D3     D2      D1      D0     ZERO
Figure 12. SPI Interface Timing Diagram
      +5V                                                                             +5V
                           I/O       CONVST                                                                  I/O        CONVST
               PROCESSOR                  MAX121                                               PROCESSOR                    MAX121
              SS          SCK        CLKIN         INVCLK                                    SS            SCK          CLKIN       INVCLK
                                                  INVFRM                                                                           INVFRM
              CPOL = 0                                                                       CPOL = 0
              CPHA = 1   MISO        SDATA              CS                                   CPHA = 1     MISO          SDATA            CS
                                                               DGND                                                                            DGND
Figure 13. SPI Interface Circuit                                                Figure 14. QSPI Interface Circuit
         CLKIN         1     2     3        4        5       6       7     8        9      10      11      12      13      14     15        16
      CONVST
                 LEADING                                                                                                                    TRAILING
        SDATA      ZERO      MSB    D12      D11      D10     D9      D8     D7       D6     D5      D4       D3     D2      D1      LSB    ZERO
Figure 15. QSPI Interface Timing Diagram
www.maximintegrated.com                                                                                                          Maxim Integrated │ 12


MAX121                                        308ksps ADC with DSP Interface and 78dB SINAD
                                                                                           +5V
                                            DMS OR PMS           CONVST         INVCLK
                                                  SCLK           SCLK
                                          ADSP2101                   MAX121
                                                    RFS          SFRM
                                                                               INVFRM
                                                     DR          SDATA
                                                                                    CS
                                                                 CLKIN
                                                                                         DGND
                                                           OSC   0.1MHz ≤ f ≤ 5.5MHz
Figure 16. ADSP2101 to MAX121 Interface
                   CONVST
                     CLKIN                         1           2                   14          15 16  17
                      SCLK                         1           2                   14          15 16  17
             (INVCLK = VCC)
                     SFRM
           (INVFRM = GND)
                                                 tSCS    tSCH
                    SDATA                            MSB        D12         D1         LSB
Figure 17. ADSP2101 Interface Timing Diagram
                                                                                           +5V
                                                      SI         CONVST        INVFRM
                                                  SCLK           SCLK           INVCLK
                                          µPD77230                   MAX121
                                                   SIEN          SFRM
                                                     P2          CONVST
                                                                                    CS
                                                                 CLKIN
                                                                                         DGND
                                                           OSC
Figure 18. NEC µP077230 Interlace Circuit
www.maximintegrated.com                                                                              Maxim Integrated │ 13


MAX121                                         308ksps ADC with DSP Interface and 78dB SINAD
NEC µPD77230 Serial Interface                                        This section describes an interface that allows the
Figure 18 shows the connections required to interface the            maximum throughput to be obtained from the MAX121-
MAX121 to NEC’s µPD77230 DSP without external glue                   to-TMS320 system, by operating the MAX121 at its
logic. The timing diagram is shown in Figure 19. See the             maximum clock. Figure 20 shows the interconnections
Maximum Clock Rate for Serial Interface section to deter-            required to implement this interface. Figure 21 is the tim-
mine the maximum usable clock rate for this interface,               ing diagram for this interface.
substituting tSISS for tSU in the equations. The tHSSI term          The MAX121 CLKIN is driven by an external clock
in the timing diagram is the minimum data-hold time for              oscillator. The XFO I/O port of the TMS320 drives the
the µPD77230’s serial data input.                                    MAX121 CONVST input low to initiate a conversion.
An I/O port of the µPD77230 drives the MAX121 CONVST                 CLKR (Receive Clock) of the TMS320 is configured as an
pin low to initiate a conversion. The MAX121 SFRM out-               input and driven by the MAX121 SCLK output. Data on
put drives the SIEN (Serial Input Enable) terminal of the            the MAX121 SDATA output changes state on the rising
DSP low to frame the data. On the next falling edge of               edge of the clock, while data is latched into the DR input
SCLK, the MSB is shifted into the SI (Serial Input) pin of           of the TMS320 on the falling edge. This provides one half
the µPD77230. SDATA drives the SI terminal of the DSP.               clock cycle to meet the setup and hold time requirements
The MSB is followed by the other 13 data bits and two                of the TMS320 DR input. The maximum skew between
trailing zeros, after which the SFRM output returns high             the MAX121 SCLK and SDATA is ±65ns at +25°C, so one
to disable the DSP serial input until the next conversion            half clock cycle is more than sufficient to guarantee that
is initiated.                                                        the setup and hold time requirement is satisfied.
                                                                     The FSTRT output of the MAX121 drives the FSR input
TMS320 High-Speed Serial Interface                                   of the TMS320 to frame the data. A falling edge on the
The flexibility of the MAX121 permits the implementa-                FSTRT output indicates that the MSB is ready to be
tion of a variety of interfaces with the Texas Instruments’          latched. On the next falling clock edge, the MSB is latched
TMS320 DSP. The TMS320 Simple Serial Interface sec-                  into the TMS320. For this interface, the TMS320 is config-
tion of this data sheet discusses the simplest type of               ured to receive a 16-bit word (RLEN = 01 in the TMS320
MAX121-to-TMS320 interface, which works with serial                  serial-port global control register) so the 14 bits of data
clock rates up to 3.2MHz.                                            are clocked into the DSP, followed by two trailing zeros.
                   CONVST
                     CLKIN                      1             2              14        15        16        17
                      SCLK                          1           2               14        15        16        17
             (INVCLK = VDD)
                     SFRM
           (INVFRM = GND)
                                                  tSISS  tHSS
                    SDATA                             MSB        D12      D1       LSB
Figure 19. NEC µPD77230 Interface Timing Diagram
www.maximintegrated.com                                                                                     Maxim Integrated │ 14


MAX121                                                308ksps ADC with DSP Interface and 78dB SINAD
TMS320 Simple Serial Interface                                          clocked into the DSP, followed by two trailing zeros. At TA
Figure 22 shows an application circuit using the simplest               = +25°C, the clock frequency is limited to approximately
interface between the MAX121 and the TMS320. The tim-                   3.2MHz with this interface, due to the CLKIN-to-SDATA
ing diagram for this circuit is shown in Figure 23.                     maximum delay of 130ns and the 25ns setup and hold
                                                                        time requirement for the TMS320.
In this circuit, the CLKR port of the TMS320 is configured
as a clock output and drives the CLKIN of the MAX121.                   Figure 24 is a listing of a short program written in the
The MAX121 output changes state on the rising edge of                   TMS320 assembly language that initiates conversions in
the CLKIN while the data is latched into the DR port of                 the TMS320 and ships the output data back to the host
the TMS320 on the falling edge. The XF1 I/O port of the                 PC. The C language program listed in Figure 25 displays
TMS320 drives the MAX121 CONVST input low to initiate                   the results of every 30,000th conversion on the PC
a conversion. The FSTRT output of the MAX121 drives the                 screen, along with the min and max values for all conver-
FSR input of the TMS320 to frame the data. A falling edge               sions performed during one operating sequence.
on the FSTRT output indicates that the MSB is ready to be               Digital Bus/Clock Noise
latched. On the next falling clock edge, the MSB is latched
                                                                        If the clock is active when the T/H is sampling the input
into the TMS320. For this interface, the TMS320 is config-
                                                                        signal, errors can be caused by coupling from the CLKIN
ured to receive a 16-bit word (RLEN = 01 in the TMS320
                                                                        pin to the analog input. If this is a problem, the clock
serial-port global control register) so the 14 bits of data are
                                                                        should be disabled for one clock cycle while the T/H is
                                                                        placed into hold mode. In mode 1, the clock should be
                                                         +5V            disabled (CLKIN = DGND) for one cycle while CONVST
                      XF         CONVST       INVFRM                    is pulsed low. In mode 2, the clock should be disabled
                    CLKR         SCLK          INVCLK
                                                                        (CLKIN = DGND) for one clock cycle while CS is driven
            TMS320                   MAX121                             low. The clock should be reactivated on the first cycle after
                      DR         SDATA
                                                                        the conversion is started (CONVST or CS pulsed low).
                     FSR         FSTRT                                  Layout, Grounding and Bypassing
                                                   CS
                                 CLKIN                                  For best system performance, use PCBs with separate
                                                        DGND
                                                                        analog and digital ground planes. Wire­wrap boards are
                         OSC     0.1MHz ≤ F ≤ 5.5MHz                    not recommended. The two ground planes should be tied
                                                                        together at the low-impedance power-supply source, as
Figure 20. TMS320 High-Speed Serial-lnterface Circuit                   shown in Figure 26.
                            CONVST
                              CLKIN                             1        2             14        15
                              SCLK                                1         2             14        15
                             FSTRT
                                                       tSU(FSR)             tH(FSR)
                             SDATA                                  MSB      D12    D1       LSB
Figure 21. TMS320 High-Speed Serial-Interface Timing Diagram
www.maximintegrated.com                                                                                       Maxim Integrated │ 15


MAX121                                        308ksps ADC with DSP Interface and 78dB SINAD
The board layout should ensure that digital and analog
signal lines are kept separate, as much as possible. Take                                                       +5V
care not to run analog and digital (especially clock) lines
                                                                                 XF        CONVST    INVFRM
parallel to one another.
                                                                               CLKR        SCLK       INVCLK
The high-speed comparator in the ADC is sensitive to                    TMS320
high-frequency noise in the VDD and VSS power sup-                                             MAX121
plies. Bypass these supplies to the analog-ground plane                          DR        SDATA
with 0.1µF and 10µF bypass capacitors. Keep capacitor                           FSR        FSTRT          CS
leads at a minimum length for best supply-noise rejection.
If the +5V power supply is very noisy, a 5Ω resistor can                                                       DGND
be connected, as shown in Figure 26, to filter this noise.
Figure 27 shows the negative power-supply (VSS) rejec-      Figure 22. TMS320 Simple Serial-lnterface Circuit
tion vs. frequency. Figure 28 shows the positive power­-
supply (VDD) rejection vs. frequency, with and without the
optional 5Ω resistor.                                       Signal-to-Noise Ratio and
                                                            Effective Number of Bits
Dynamic Performance                                         The signal-to-noise plus distortion ratio (SINAD) is the
High-speed sampling capability and 308kHz throughput        ratio of the fundamental input frequency’s RMS amplitude
make the MAX121 ideal for wideband signal processing.       to the RMS amplitude of all other ADC output signals. The
To support these and other related applications, FFT (Fast  output band is limited to frequencies above DC and below
Fourier Transform) test techniques are used to guarantee    one-half the ADC sample (conversion) rate.
the ADC’s dynamic frequency response, distortion, and       The theoretical minimum ADC noise is caused by quanti-
noise at the rated throughput. Specifically, this involves  zation error and is a direct result of the ADC’s resolution:
applying a low-distortion sinewave to the ADC input and     SINAD = (6.02N + 1.76)dB, where N is the number of bits
recording the digital conversion results for a specified    of resolution. A perfect 14-bit ADC can, therefore, do no
time. The data is then analyzed using an FFT algorithm,     better than 86dB. An FFT plot of the output shows the
which determines its spectral content. Conversion errors    output level in various spectral bands. Figure 29 shows
are then seen as spectral elements outside of the funda-    the result of sampling a pure 50kHz sinusoid at a 300kHz
mental input frequency.                                     rate with the MAX121.
ADCs have traditionally been evaluated by specifications    By transposing the equation that converts resolution to
such as Zero and Full-Scale Error, Integral Nonlinearity    SINAD, the user can, from the measured SINAD, deter-
(INL), and Differential Nonlinearity (DNL). Such param-     mine the effective resolution (effective number of bits)
eters are widely accepted for specifying performance        that the ADC provides: N = (SINAD - 1.76)/6.02. Figure
with DC and slowly varying signals, but are less useful in  30 shows the effective number of bits as a function of the
signal processing applications where the ADC’s impact       input frequency for the MAX121.
on the system transfer function is the main concern. The
significance of various DC errors does not translate well
to the dynamic case, so different tests are required.
www.maximintegrated.com                                                                              Maxim Integrated │ 16


MAX121                                                               308ksps ADC with DSP Interface and 78dB SINAD
                                  CONVST
                                     CLKIN                                        1            2                 14               15
                                     FSTRT
                                    SDATA                                             MSB          D12       D1           LSB
Figure 23. TMS320 Simple Serial-Interface Timing Diagram
  ;;#;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  ;;
  ;;
  ;;
  ;;         Project :      Maxim 121 to TI TMS320C30 Application Note
  ;;         File:          maximti.asm
  ;;
  ;;         Purpose:       This file contains the code that is loaded onto the TMS320C30 Evaluation Module (EVM). It’s purpose is to collect digitized samples
  ;;                        from the Maxim 121 ADC at a regular rate and ship those values to the PC.
  ;;         Tabstops:      8
  ;;
  ;;
  ;;         $Log : $
  ;;
  ;;         Edit History:
  ;;
  ;;                 Date             By            Description
                     ------           ----          ---------------
  ;;
  ;;                 09/24/92         KHB           Initial Creation
  ;;
  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;#;;
Figure 24.TMS320 Assembly Language Program to Control Conversions Using the TMS320 Simple Serial Interface
www.maximintegrated.com                                                                                                                               Maxim Integrated │ 17


MAX121                                                                                                         308ksps ADC with DSP Interface and 78dB SINAD
  ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; Publics; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ;
                              .global maxim
                              .global wait_sample
                              .global wait_loop
                              .global next_sample
                              .global IOF_MASK_AMASK
                              .global IOF_SET_XFI
                              .global IOF_RESET_XFI
                              .global CTRL
                              .global SERGLOB1
                              .global SERPRTX1
                              .global SERPRTR1
                              .global SERTIM1
                              .global SERTIM1VAL
                              .global HOST_DATA
  ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; Data; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ;
                              .data
             IOF_AMASK                              .word                  000000EH                             ; Preserve XFO settings
             IOF_SET_XF1                            .word                  0000060H                             ; Set XF1 as output high
             IOF_RESET_XF1                          .word                  0000020H                             ; Set XF1 as output low
             CTRL                                   .word                  0808000H                             ; Pointer to peripheral-bus memory map
             SERGLOB1                               .word                  8120280H                             ;  Setup serial 1 global control (80)
                                                                                                                ;       Use internal recieve clock
                                                                                                                ;       FSR active during entire transfer
                                                                                                                ;       16-bit rcv data length
                                                                                                                ;       FSR active low
                                                                                                                ;       Take rcvr out of reset
             SERPRTX1                               .word                  0000000H                             ;  Setup serial 1 xmt port control (82)
             SERPRTR1                               .word                  0000111H                             ;  Setup serial 1 rcv port control (83)
                                                                                                                ;       CLKR1 = serial port pin
                                                                                                                ;       DR1 = serial port pin
                                                                                                                ;       FSR1 = serial port pin
             SERTIM1                                .word                  00003C0H                             ;  Setup serial 1 timer control (84)
                                                                                                                ;       Start rcv timer, 50% duty cycle,
                                                                                                                ;       internal clk src = 1/2 CLKOUT is
                                                                                                                ;        used to increment rcvr timer.
             SERTIMIVAL                             .word                  00020000H                            ;  Timer period values RX and TX
                                                                                                                ;        Rcvr timer is high order 16-bits
                                                                                                                ;        (CLKOUT/2)/2 = 1.875Mhz CLKR1 - >MAX121 CLKIN
             HOST_DATA                              .word                  00804000H                            ;  Memory address of host data port
Figure 24.TMS320 Assembly Language Program to Control Conversions Using the TMS320 Simple Serial Interface (continued)
www.maximintegrated.com                                                                                                                                                                                                                                Maxim Integrated │ 18


MAX121                                                                                                          308ksps ADC with DSP Interface and 78dB SINAD
 ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; Functions; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ;
                             .text
 maxim
 ;
 ; Initialization Code
 ;
            LDI                   0,ST                                         ;        Initialize status register
            LDIU                  128,DP                                       ;        Initialize data page register
            LDI                   0985CH,SP                                    ;        Initialize stack pointer
            LDI                   IOF,R1                                       ;        Read in I/O Flags register to R1
            AND                   @IOF_AMASK,R1                                ;        Remove current XF1 bits, preserve XF0 settings
            OR                    @IOF_SET_XF1,R1                              ;        Set XF1 (CONVST*) Inactive (high)
            LDI                   R1, IOF                                      ;        Make it so!
            LDI                   @CTRL, AR0                                   ;        Load AR0 w/ptr to control reg base
            LDI                   @HOST_DATA,AR1                               ;        Load AR1 w/host interface address
            LDI                   @SERTIM1VAL,R0
            STI                   R0, *+AR0(86)                                ;        Setup serial ch1 timer period value
            LDI                   @SERGLOB1,R0
            STI                   R0, *+AR0(80)                                ;        Setup serial ch1 global register
            LDI                   @SERPRTX1,R0
            STI                   R0, *+AR0(82)                                ;        Setup serial ch1 xmt control register
            LDI                   @SERPRTR1,R0
            STI                   R0, *+AR0(83)                                ;        Setup serial ch1 rcv control register
            LDI                   @SERTIM1,R0
            STI                   R0, *+AR0(84)                                ;        Setup serial ch1 timer register
 next_sample
 ;
 ; Start Conversion -->                                                                       (CONVST*)
 ;
            LDI                   IOF,R1                                       ;        Read in I/O Flags register to R1
            AND                   @IOF_AMASK,R1                                ;        Remove current XF1 bits, preserve XF0 settings
            OR                    @IOF_SET_XF1,R1                              ;        Set XF1 (CONVST*) Inactive (high)
            LDI                   R1, IOF                                      ;        Make it so!
            AND                   @IOF_AMASK,R1                                ;        Remove current XF1 bits, preserve XF0
            OR                    @IOF_RESET_XF1,R1                            ;        Set XF1 (CONVST*) Active (low)
            LDI                   R1, IOF                                      ;        Make it so!
Figure 24.TMS320 Assembly Language Program to Control Conversions Using the TMS320 Simple Serial Interface (continued)
www.maximintegrated.com                                                                                                                                                                                                                             Maxim Integrated │ 19


MAX121                                                               308ksps ADC with DSP Interface and 78dB SINAD
 wait_sample
 ;
 ; wait for completion of conversion
 ;          MAX121 SFRM Active signals TMS320 FSR1 that data transfer
 ;          is ready to start.
       LDI            *+AR0 (80), R2              ;   Read in Serial Ch 1 global register
       AND            01H, R2                     ;   Check for RRDY Active (1)
                                                  ;   RRDY goes active when 16-bits have been rcvd
       BZ             wait_sample                 ;   Keep waiting if not ready
       LDI            *+AR0 (92), R3              ;   Ready, read value from Data Receive register
       STI            R3, *+AR1 (0)               ;   Send out value to host
 ;
 ;   Arbitrary wait time until start of next convert.
 ;
       LDI            100, R0
 wait_loop:
       SUB1           1, R0
       BNZ            wait_loop                   ;   Keep waiting until R0 decremented to zero
       BR             @next_sample                ;   Go start next convert
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                           .end
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
Figure 24.TMS320 Assembly Language Program to Control Conversions Using the TMS320 Simple Serial Interface (continued)
www.maximintegrated.com                                                                                                       Maxim Integrated │ 20


MAX121                                                                    308ksps ADC with DSP Interface and 78dB SINAD
   /*#*********************************************************************************************************************
   **           Project :       Maxim 121 to TMS320C30 Application Note
   **           File:           readdata.c
   **
                Purpose:        This file contains a PC based program used to read data from the TMS320C30 Evaluation Module (EVM) and display the
   **
                                data on the PC screen.
   **
   **                           This  file may be compiled with either the Microsoft C Compiler of Borland C++ Compiler.
   **           Tabstops:       4
   **
   **           $Log : $
   **
   **           Edit History:
   **                    Date             By             Description
   **                    ------           ----           ---------------
   **                    09/24/92         KHB            Initial Creation
   **
   *********************************************************************************************************************#*/
   #include <stdio.h>              /* for printf( ) */
   #include <conio.h>              /* for kbhit( ), getch( ), and inpw */
   #define VERSION_STAMP 1
   void
   main(void)
   {
         int x;
         int value;
         int quit = 0;
         int min = 32767;
         int max = -32768;
         printf( “\n”) ;
         printf( “TMS320 EVM Data Display Program - Version %d\n”, VERSION_STAMP) ;
         printf( ”m = reset Max/Min values, ESC to quit\n\n” )`
Figure 25. C Language Program to Log Data from MAX121 Conversions
www.maximintegrated.com                                                                                                                          Maxim Integrated │ 21


MAX121                                                   308ksps ADC with DSP Interface and 78dB SINAD
                                while( !quit )
                                {
                                        if(kbhit( ))
                                        {
                                              switch ( gletch ( ))
                                                    case ‘m’ :                /* Clear Max/Min Storage Variables */
                                                        max = -32768
                                                        min = 32767;
                                                        break;
                                                    case ‘q’:                 /* Quit Program */
                                                    case 0x1B:
                                                        quit = 1;
                                                        break;
                                              }
                                        }
                                        for (x=o; x<30000; x++)
                                        {
                                              /* Gather samples as fast as possible and update Max/Min */
                                              /* Only output every 30,000th sample. The 30,000 has no */
                                              /* specific origin other than the display updated at a */
                                              /* comfortable rate. */
                                              value = inpw ( 0x0240+0x0808 );         /* EVM Data Port */
                                              value >>= 2;                            /* Shift from 16-bit back to 14-bit */
                                              /* Update Max/Min */
                                              If( value > max )
                                                    max = value;
                                              else if( value < min)
                                                    main = value;
                                        }
                                        /* Output the latest sample in decimal and hex along with Max/Min */
                                        printf(” %06d %04Xh min:%06d \r”, value, value, min, max);
                                }
                                /* Exit */
                                Printf( ‘\n\n” );
                                return;
                                }
Figure 25. C Language Program to Log Data from MAX121 Conversions (continued)
www.maximintegrated.com                                                                                                      Maxim Integrated │ 22


MAX121                                                                             308ksps ADC with DSP Interface and 78dB SINAD
                      ANALOG                                           DIGITAL
                                                                                                                                60
                      SUPPLY                                           SUPPLY
                                                                                                                                         WITH PI FILTER
        -15V -15V                       AGND                     +5V             DGND
                                                                                                                                                           5Ω      PI FILTER TO
                                                                                                                                                  VDD                           MAX121
                                                                                                                                50                +5V                           VDD PIN
                                                                                                        VDD REJECTION (dB)
                                                                                                                                                           10µF             0.1µF
                                                                                                                                40
                                                                                                                                                                NO PI FILTER
                                                           OPTIONAL
                                                                                                                                30
                                                           5Ω FILTER
                                                           RESISTOR
                                                                                                                                         TA = +25°C
                               -15V     AGND    +5V    DGND                +5V     DGND                                         20
                                                                                                                                     10k                    100k                      1M
                                            MAX121                           DIGITAL
                                                                            CIRCUITRY                                                                 FREQUENCY (Hz)
Figure 26. Power-Supply Grounding                                                            Figure 28. VDD Power-Supply Rejection vs. Frequency
                                60                                                                                              0
                                                                                                                                                                     fS = 300kHz
                                                                                                                               -20                                   IIN = 50kHz
                                                                                                                                                                     TA = +25°C
                                                                                                      SIGNAL AMPLITUDE (dB)
                                                                                                                               -40                                   SINAD = 78dB
          VSS REJECTION (dB)
                                50
                                                                                                                               -60
                                                                                                                               -80
                                40
                                                                                                                              -100
                                                                                                                              -120
                                        TA = +25°C
                                30
                                      10k                 100k                      1M                                               0                50              100            150
                                                     FREQUENCY (Hz)                                                                                   FREQUENCY (kHz)
Figure 27. VSS Power-Supply Rejection vs. Frequency                                          Figure 29. MAX121 FFT Plot
www.maximintegrated.com                                                                                                                                                 Maxim Integrated │ 23


MAX121                                                                      308ksps ADC with DSP Interface and 78dB SINAD
                           14                                                                 011...111
                                                                                              011...110
                           13
                           12                                                                 000...010
          EFFECTIVE BITS
                                                                                              000...001
                           11
                                                                                              000...000
                           10                                                                 111...111
                                                                                              111...110
                            9
                                                                                              111...101
                            8         fS = 300kHz
                                      TA = +25°C
                                                                                              100...001
                            7
                                10k          100k            1M             10M               100...000
                                           INPUT FREQUENCY (Hz)
                                                                                                          -5V                0V         4.99939V
Figure 30. Effective Bits vs. Input Frequency                                         Figure 31. Bipolar Transfer Function
Total Harmonic Distortion                                                             Spurious-Free Dynamic Range
If a pure sine wave is sampled by an ADC at greater than                              Spurious-free dynamic range is the ratio of the fundamen-
the Nyquist frequency, the nonlinearities in the ADC’s                                tal RMS amplitude to the amplitude of the next largest
transfer function create harmonics of the input frequency                             spectral component (in the frequency band above DC and
present in the sampled output data.                                                   below one-half the sample rate). Usually the next largest
Total Harmonic Distortion (THD) is the ratio of the RMS                               spectral component occurs at some harmonic of the input
sum of all the harmonics (in the frequency band above DC                              frequency. However, if the ADC is exceptionally linear, it
and below one-half the sample rate, but not including the                             may occur only at a random peak in the ADC’s noise floor.
DC component) to the RMS amplitude of the fundamental                                 Transfer Function
frequency. This is expressed as follows:
                                                                                      The plot in Figure 31 graphs the bipolar input/output
                                                                                      transfer function for the MAX121. Code transitions occur
                                                    V22 + V32 + V42 + VN2             halfway between successive integer LSB values. Output
                           THD = 20 log
                                                            V1                        coding is two’s-complement binary, with 1 LSB = 610µV
                                                                                      (10V/16384).
where V1 is the fundamental RMS amplitude, and
V2 through VN are the amplitudes of the 2nd through
Nth harmonics. The THD specification in the Electrical
Characteristics includes the 2nd through 5th harmonics.
www.maximintegrated.com                                                                                                           Maxim Integrated │ 24


MAX121                                         308ksps ADC with DSP Interface and 78dB SINAD
Ordering Information                                     Package Information
                                                         For the latest package outline information and land patterns
         PART            TEMP RANGE        PIN-PACKAGE
                                                         (footprints), go to www.maximintegrated.com/packages. Note
  MAX121CPE+              0°C to +70°C    16 PDIP        that a “+”, “#”, or “-” in the package code indicates RoHS status
  MAX121CWE+              0°C to +70°C    16 Wide SO     only. Package drawings may show a different suffix character, but
                                                         the drawing pertains to the package regardless of RoHS status.
  MAX121CAP+              0°C to +70°C    20 SSOP*
  MAX121EPE+             -40°C to +85°C   16 PDIP           PACKAGE           PACKAGE                           LAND
                                                                                             OUTLINE NO.
                                                               TYPE               CODE                      PATTERN NO.
  MAX121EWE+             -40°C to +85°C   16 Wide SO
                                                           16 PDIP                P16+3         21-0043           —
  MAX121EAP+             -40°C to +85°C   20 SSOP*
                                                           16 Wide SO            W16+2          21-0042        90-0107
  MAX121EVKIT-DIP         0°C to +70°C    Through-Hole
                                                           20 SSOP                A20+1         21-0056        90-0094
+Denotes a lead(Pb)-free/RoHS-compliant package.
*20-pin SSOP is 50% smaller than 16-pin SO.
Chip Information
PROCESS: BiCMOS
www.maximintegrated.com                                                                              Maxim Integrated │ 25


MAX121                                                        308ksps ADC with DSP Interface and 78dB SINAD
Revision History
  REVISION           REVISION                                                                                                                       PAGES
                                                                             DESCRIPTION
   NUMBER               DATE                                                                                                                     CHANGED
        0                1/93        Initial release                                                                                                    —
        3                1/12        Remove military grade and update Ordering Information                                                          1–4, 24
For pricing, delivery, and ordering information, please contact Maxim Direct at 1-888-629-4642, or visit Maxim Integrated’s website at www.maximintegrated.com.
Maxim Integrated cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim Integrated product. No circuit patent licenses
are implied. Maxim Integrated reserves the right to change the circuitry and specifications without notice at any time. The parametric values (min and max limits)
shown in the Electrical Characteristics table are guaranteed. Other parametric values quoted in this data sheet are provided for guidance.
Maxim Integrated and the Maxim Integrated logo are trademarks of Maxim Integrated Products, Inc.                 © 2012 Maxim Integrated Products, Inc. │ 26


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 MAX121CPE+ MAX121CWE+ MAX121CAP+ MAX121CAP+T MAX121CWE+T MAX121EAP+ MAX121EAP+T
MAX121EPE+ MAX121EWE+ MAX121EWE+T
