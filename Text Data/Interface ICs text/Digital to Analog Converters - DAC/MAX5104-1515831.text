19-1587; Rev 0; 11/99
           Low-Power, Dual, Voltage-Output, 12-Bit DAC
                                  with Serial Interface
                                General Description                           ____________________________Features
                                                                                                                                               MAX5104
The MAX5104 low-power, serial, voltage-output, dual                           ♦ 12-Bit Dual DAC with Internal Gain of +2V/V
12-bit digital-to-analog converter (DAC) consumes only
500µA from a single +5V supply. This device features                          ♦ Rail-to-Rail Output Swing
Rail-to-Rail® output swing and is available in a space-                       ♦ 12µs Settling Time
saving 16-pin QSOP package. To maximize the dynamic
range, the DAC output amplifiers are configured with an                       ♦ +5V Single-Supply Operation
internal gain of +2V/V.                                                       ♦ Low Quiescent Current
The 3-wire serial interface is SPI™/QSPI™/MICROWIRE™                              500µA (normal operation)
compatible. Each DAC has a double-buffered input                                  2µA (power-down mode)
organized as an input register followed by a DAC register,
which allows the input and DAC registers to be updated                        ♦ SPI/QSPI/MICROWIRE Compatible
independently or simultaneously with a 16-bit serial                          ♦ Space-Saving 16-Pin QSOP Package
word. Additional features include programmable power-
down (2µA), hardware power-down lockout (PDL), a                              ♦ Power-On Reset Clears Registers and DACs to Zero
separate reference voltage input for each DAC that                            ♦ Adjustable Output Offset
accepts AC and DC signals, and an active-low clear
input (CL) that resets all registers and DACs to zero.
These devices provide a programmable logic pin for                                                    Ordering Information
added functionality, and a serial-data output pin for
daisy chaining.                                                                                                      PIN-           INL
                                                                                   PART         TEMP. RANGE
                                                                                                                   PACKAGE         (LSB)
________________________Applications
                                                                               MAX5104CEE         0°C to +70°C      16 QSOP         ±4
        Industrial Process Control                                             MAX5104EEE       -40°C to +85°C      16 QSOP         ±4
        Remote Industrial Controls                                             Pin Configuration appears at end of data sheet.
        Digital Offset and Gain Adjustment
        Microprocessor-Controlled Systems
        Motion Control
        Automatic Test Equipment (ATE)
                                                                                                         Functional Diagram
                              DOUT     CL         PDL      DGND     AGND     VDD        REFA
                                                                                                                        OSA
                                                 DECODE                                                       R
                                                 CONTROL
                                                                                                              R
                                                            INPUT           DAC                                         OUTA
                                                                                        DAC A                           OSB
                                                            REG A          REG A
                                16-BIT
                                SHIFT                                                                         R
                               REGISTER
                                                                                   MAX5104                    R
                                 SR
                               CONTROL                      INPUT           DAC                                         OUTB
                                                  LOGIC                                 DAC B
                                                            REG B          REG B
                                                 OUTPUT
                         CS      DIN      SCLK    UPOH                                  REFB
Rail-to-Rail is a registered trademark of Nippon Motorola, Ltd.               SPI and QSPI are trademarks of Motorola, Inc.
                                                                              MICROWIRE is a trademark of National Semiconductor Corp.
                        ________________________________________________________________ Maxim Integrated Products                         1
For free samples & the latest literature: http://www.maxim-ic.com, or phone 1-800-998-8800.
For small orders, phone 1-800-835-8769.


          Low-Power, Dual, Voltage-Output, 12-Bit DAC
          with Serial Interface
          ABSOLUTE MAXIMUM RATINGS
MAX5104
          VDD to AGND............................................................-0.3V to +6V        Continuous Power Dissipation (TA = +70°C)
          VDD to DGND ...........................................................-0.3V to +6V            16-Pin QSOP (derate 8.30mW/°C above +70°C).......667mW
          AGND to DGND ..................................................................±0.3V       Operating Temperature Ranges
          OSA, OSB to AGND.......................(VAGND - 4V) to (VDD + 0.3V)                            MAX5104CEE ...................................................0°C to +70°C
          REF_, OUT_ to AGND.................................-0.3V to (VDD + 0.3V)                       MAX5104EEE.................................................-40C° to +85°C
          Digital Inputs (SCLK, DIN, CS,                                                             Junction Temperature ......................................................+150°C
              CL, PDL) to DGND ...........................................(-0.3V to +6V)             Storage Temperature Range .............................-65°C to +150°C
          Digital Outputs (DOUT, UPO) to DGND .....-0.3V to (VDD + 0.3V)                             Lead Temperature (soldering, 10sec) .............................+300°C
          Maximum Current into Any Pin .........................................±20mA
          Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional
          operation of the device at these or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to
          absolute maximum rating conditions for extended periods may affect device reliability.
          ELECTRICAL CHARACTERISTICS
          (VDD = +5V ±10%, VREFA = VREFB = +2.048V, RL = 10kΩ, CL = 100pF, TA = TMIN to TMAX, unless otherwise noted. Typical values
          are at TA = +25°C (OS_ connected to AGND for a gain of +2V/V).)
                       PARAMETER                         SYMBOL                                  CONDITIONS                              MIN         TYP         MAX        UNITS
            STATIC PERFORMANCE
            Resolution                                                                                                                    12                                  Bits
            Integral Nonlinearity                            INL         (Note 1)                                                                                 ±4         LSB
            Differential Nonlinearity                       DNL          Guaranteed monotonic                                                                     ±1         LSB
            Offset Error                                    VOS          Code = 10                                                                               ±10          mV
            Offset Tempco                                  TCVOS         Normalized to 2.048V                                                          4                   ppm/°C
            Gain Error                                                                                                                               -0.2         ±8         LSB
            Gain-Error Tempco                                            Normalized to 2.048V                                                          4                   ppm/°C
            VDD Power-Supply
                                                           PSRR          4.5V ≤ VDD ≤ 5.5V                                                            20          600        µV/V
            Rejection Ratio
            REFERENCE INPUT
            Reference Input Range                           REF                                                                            0                 VDD - 1.4         V
            Reference Input Resistance                      RREF         Minimum with code 1554 hex                                       14          20                      kΩ
            MULTIPLYING-MODE PERFORMANCE
                                                                         Input code = 1FFE hex,
            Reference 3dB Bandwidth                                                                                                                  300                     kHz
                                                                         VREF_ = 0.67Vp-p at 2.5VDC
                                                                         Input code = 0000 hex,
            Reference Feedthrough                                                                                                                     -82                     dB
                                                                         VREF_ = (VDD - 1.4Vp-p), f = 1kHz
            Signal-to-Noise plus                                         Input code = 1FFE hex,
                                                           SINAD                                                                                      75                      dB
            Distortion Ratio                                             VREF_ = 1Vp-p at 1.25VDC, f = 25kHz
            DIGITAL INPUTS
            Input High Voltage                               VIH         CL, PDL, CS, DIN, SCLK                                            3                                   V
            Input Low Voltage                                VIL         CL, PDL, CS, DIN, SCLK                                                                   0.8          V
            Input Hysteresis                                VHYS                                                                                     200                      mV
            Input Leakage Current                            IIN         VIN = 0 to VDD                                                             0.001         ±1          µA
            Input Capacitance                                CIN                                                                                       8                      pF
          2    _______________________________________________________________________________________


           Low-Power, Dual, Voltage-Output, 12-Bit DAC
                                  with Serial Interface
ELECTRICAL CHARACTERISTICS (continued)
                                                                                                                                     MAX5104
(VDD = +5V ±10%, VREFA = VREFB = +2.048V, RL = 10kΩ, CL = 100pF, TA = TMIN to TMAX, unless otherwise noted. Typical values
are at TA = +25°C (OS_ connected to AGND for a gain of +2V/V).)
         PARAMETER                SYMBOL                      CONDITIONS                    MIN        TYP       MAX    UNITS
 DIGITAL OUTPUTS (DOUT, UPO)
 Output High Voltage                VOH     ISOURCE = 2mA                                 VDD - 0.5                        V
 Output Low Voltage                 VOL     ISINK = 2mA                                                0.13      0.40      V
 DYNAMIC PERFORMANCE
 Voltage Output Slew Rate            SR                                                                0.75             V/µs
 Output Settling Time                       To 1/2LSB of full-scale, VSTEP = 4V                         15                 µs
 Output Voltage Swing                       Rail-to-rail (Note 2)                                     0 to VDD             V
 OSA or OSB Input Resistance        ROS_                                                     24         34                 kΩ
 Time Required to Exit Shutdown                                                                         25                 µs
 Digital Feedthrough                        CS = VDD, SCLK = 100kHz, VSCLK = 5Vp-p                       5                 nVs
 Digital Crosstalk                                                                                       5                 nVs
 POWER SUPPLIES
 Positive Supply Voltage            VDD                                                      4.5                 5.5       V
 Power-Supply Current               IDD     (Note 3)                                                    0.5      0.65      mA
 Power-Supply Current
                                  IDD(SHDN) (Note 3)                                                     2       10        µA
 in Shutdown
 Reference Current in Shutdown                                                                           0       ±1        µA
 TIMING CHARACTERISTICS
 SCLK Clock Period                   tCP    (Note 4)                                        100                            ns
 SCLK Pulse Width High              tCH                                                      40                            ns
 SCLK Pulse Width Low                tCL                                                     40                            ns
 CS Fall to SCLK Rise
                                    tCSS                                                     40                            ns
 Setup Time
 SCLK Rise to CS Rise
                                    tCSH                                                      0                            ns
 Hold Time
 SDI Setup Time                      tDS                                                     40                            ns
 SDI Hold Time                      tDH                                                       0                            ns
 SCLK Rise to DOUT
                                    tDO1    CLOAD = 200pF                                                        80        ns
 Valid Propagation Delay
 SCLK Fall to DOUT
                                    tDO2    CLOAD = 200pF                                                        80        ns
 Valid Propagation Delay
 SCLK Rise to CS Fall Delay         tCS0                                                     10                            ns
 CS Rise to SCLK Rise Hold          tCS1                                                     40                            ns
 CS Pulse Width High                tCSW                                                    100                            ns
Note 1: Accuracy is specified from code 6 to code 4095.
Note 2: Accuracy is better than 1LSB for VOUT_ greater than 6mV and less than VDD - 50mV. Guaranteed by PSRR test at the
        end points.
Note 3: Digital inputs are set to either VDD or DGND, code = 0000 hex, RL = ∞.
Note 4: SCLK minimum clock period includes the rise and fall times.
                     _______________________________________________________________________________________                     3


          Low-Power, Dual, Voltage-Output, 12-Bit DAC
          with Serial Interface
          __________________________________________Typical Operating Characteristics
MAX5104
          (VDD = +5V, RL = 10kΩ, CL = 100pF, OS_ pins connected to AGND, TA = +25°C, unless otherwise noted.)
                                               REFERENCE VOLTAGE INPUT                                                                                                                                                                                                                             TOTAL HARMONIC DISTORTION
                                                 FREQUENCY RESPONSE                                                                                               SUPPLY CURRENT vs. TEMPERATURE                                                                                                    PLUS NOISE vs. FREQUENCY
                                  0                                                                                                                       700                                                                                                                      -30
                                                                                                                    MAX5104 toc01                                                                                                                MAX5104 toc02                                                                          MAX5104 toc03
                                  -2                                                                                                                                                                                                                                                          VREF = +1Vp-p AT 2.5VDC
                                                                                                                                                          650                                                  CODE = 1FFE (HEX)                                                              CODE = 1FFE (HEX)
                                  -4                                                                                                                                                                                                                                               -40
          RELATIVE OUTPUT (dB)                                                                                                      SUPPLY CURRENT (µA)
                                  -6
                                                                                                                                                          600
                                                                                                                                                                                                                                                                  THD + N (dB)
                                  -8                                                                                                                                                                                                                                               -50
                                 -10                                                                                                                      550
                                 -12                                                                                                                                                                                                                                               -60
                                                                                                                                                          500                                                  CODE = 0000 (HEX)
                                 -14
                                 -16                                                                                                                                                                                                                                               -70
                                           VREF = +0.67Vp-p AT 2.5VDC                                                                                     450
                                 -18                                                                                                                                                                                           VREF = +2.048V
                                           CODE = 1FFE (HEX)                                                                                                                                                                   RL = ∞
                                 -20                                                                                                                      400                                                                                                                      -80
                                       1        370                             740        1110       1480        1850                                          -55 -35 -15               5   25   45                         65       85 105 125                                        1                                  10        100
                                                          FREQUENCY (kHz)                                                                                                                 TEMPERATURE (°C)                                                                                                  FREQUENCY (kHz)
                                                                                          FULL-SCALE ERROR vs. RESISTIVE LOAD                                                                                                            REFERENCE FEEDTHROUGH AT 1kHz
                                                                                 0.50                                                                                                                                          -50
                                                                                                                                                                         MAX5104 toc04                                                                                                                           MAX5104 toc05
                                                                                                 VREF = +2.048V                                                                                                                                                                   VREF = +3.6Vp-p AT 1.88VDC
                                                                                 0.25                                                                                                                                          -60
                                                                                                                                                                                                                                                                                  CODE = 0000 (HEX)
                                                                                                                                                                                                                               -70
                                                       FULL-SCALE ERROR (LSB)
                                                                                      0
                                                                                                                                                                                                       RELATIVE OUTPUT (dB)
                                                                                                                                                                                                                               -80
                                                                                -0.25
                                                                                                                                                                                                                               -90
                                                                                -0.50                                                                                                                                         -100
                                                                                -0.75                                                                                                                                         -110
                                                                                                                                                                                                                              -120
                                                                                -1.00
                                                                                                                                                                                                                              -130
                                                                                -1.25
                                                                                                                                                                                                                              -140
                                                                                -1.50                                                                                                                                         -150
                                                                                          0.1                1                                            10           100                                                             0.5 1.0 1.5 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5
                                                                                                                   RL (kΩ)                                                                                                                                        FREQUENCY (kHz)
                                                                                                        SHUTDOWN CURRENT
                                                                                                         vs. TEMPERATURE                                                                                                                                         OUTPUT FFT PLOT
                                                                                      6                                                                                                                                            0
                                                                                                                                                                          MAX5104 toc06                                                                                                                               MAX5104 toc07
                                                                                                VREF = +1V                                                                                                                     -10              VREF = +2.45Vp-p AT 1.225VDC
                                                                                                                                                                                                                                                f = 1kHz
                                                                                      5                                                                                                                                        -20              CODE = 1FFE (HEX)
                                                        SHUTDOWN CURRENT (µA)                                                                                                                       RELATIVE OUTPUT (dB)
                                                                                                                                                                                                                               -30
                                                                                      4
                                                                                                                                                                                                                               -40              NOTE: RELATIVE TO FULL SCALE
                                                                                      3                                                                                                                                        -50
                                                                                                                                                                                                                               -60
                                                                                      2                                                                                                                                        -70
                                                                                                                                                                                                                               -80
                                                                                      1
                                                                                                                                                                                                                               -90
                                                                                      0                                                                                                                                       -100
                                                                                          -55 -35 -15         5    25               45 65                       85 105 125                                                             0.5      1.6                              2.7         3.8      4.9       6.0
                                                                                                             TEMPERATURE (°C)                                                                                                                                         FREQUENCY (kHz)
          4                      _______________________________________________________________________________________


         Low-Power, Dual, Voltage-Output, 12-Bit DAC
                                with Serial Interface
_____________________________Typical Operating Characteristics (continued)
                                                                                                                                                                                                              MAX5104
(VDD = +5V, RL = 10kΩ, CL = 100pF, OS_ pins connected to AGND, TA = +25°C, unless otherwise noted.)
                                                   DYNAMIC RESPONSE RISE TIME                                                     DYNAMIC RESPONSE FALL TIME
                                                                                                  MAX5104 toc08                                                             MAX5104 toc09
                                                                                                                  CS                                                                         CS
                                                                                                                  5V/div                                                                     5V/div
                                                                                                                  OUT_                                                                       OUT_
                                                                                                                  1V/div                                                                     1V/div
                                                                2µs/div                                                                         2µs/div
                                              VREF = +2.048V                                                                   VREF = +2.048V
                                             SUPPLY CURRENT vs. SUPPLY VOLTAGE                                                       MAJOR-CARRY TRANSITION
                                     0.60
                                                                                               MAX51504 toc10                                                              MAX5104 toc11
                                                                         CODE = 1FFE (HEX)
                                     0.55
               SUPPLY CURRENT (mA)
                                                                                                                                                                                             CS
                                                                                                                                                                                             2V/div
                                     0.50
                                                                         CODE = OOOO (HEX)                                                                                                   OUT_
                                                                                                                                                                                             50mV/div
                                     0.45                                                                                                                                                    AC-COUPLED
                                     0.40
                                            4.50       4.75       5.00         5.25          5.50                                                5µs/div
                                                          SUPPLY VOLTAGE (V)
                                                                                                                                TRANSITION FROM 1000 (HEX) TO 0FFE (HEX)
                                                        ANALOG CROSSTALK                                                                DIGITAL FEEDTHROUGH
                                                                                                 MAX5104 toc12                                                               MAX5104 toc13
                                                                                                                  OUTA                                                                       SCLK
                                                                                                                  5V/div                                                                     5V/div
                                                                                                                                                                                             OUTA
                                                                                                                  OUTB                                                                       500µV/div
                                                                                                                  200µV/div                                                                  AC-COUPLED
                                                                                                                  AC-COUPLED
                                                                250µs/div                                                                       2.5µs/div
                                              VREF = +2.048V, GAIN = +2V/V, CODE = 1FFE HEX
                                       _______________________________________________________________________________________                                                                            5


          Low-Power, Dual, Voltage-Output, 12-Bit DAC
          with Serial Interface
          _____________________Pin Description
MAX5104
                                                                                                                                  OS_
              PIN    NAME                   FUNCTION                                                                          R
              1      AGND      Analog Ground
                                                                                                                              R
              2      OUTA      DAC A Output Voltage
                                                                                            R          R        R                 OUT_
              3       OSA      DAC A Offset Adjustment
              4      REFA      Reference for DAC A                                2R   2R         2R       2R          2R
                               Active-Low Clear Input. Resets all reg-                 D0          D10     D11          D12
              5        CL
                               isters to zero. DAC outputs go to 0V.
              6       CS       Chip-Select Input
                                                                           REF_
              7       DIN      Serial-Data Input
                                                                           AGND
              8      SCLK      Serial-Clock Input
              9      DGND      Digital Ground                            Figure 1. Simplified DAC Circuit Diagram
              10     DOUT      Serial-Data Output                                   VOUT = (VREF · NB / 4096) · 2
              11      UPO      User-Programmable Output                  where NB is the numeric value of the DAC’s binary input
                                                                         code (0 to 4095) and VREF is the reference voltage.
                               Power-Down Lockout. The device can-
              12      PDL                                                The reference input impedance ranges from 14kΩ (1554
                               not be powered down when PDL is low.
                                                                         hex) to several gigohms (with an input code of 0000
              13     REFB      Reference for DAC B
                                                                         hex). The reference input capacitance is code depen-
              14      OSB      DAC B Offset Adjustment                   dent and typically ranges from 15pF with an input code
                                                                         of all zeros to 50pF with a full-scale input code.
              15     OUTB      DAC B Output Voltage
                                                                                                                    Output Amplifier
              16      VDD      Positive Power Supply
                                                                         The MAX5104’s output amplifiers have internal resistors
                                                                         that provide for a gain of +2V/V when OS_ is connected
          _______________Detailed Description                            to AGND. These resistors are trimmed to minimize gain
          The MAX5104 dual, 12-bit, voltage-output DAC is easily         error. The output amplifiers have a typical slew rate of
          configured with a 3-wire serial interface. The device          0.75V/µs and settle to 1/2LSB within 15µs, with a load
          includes a 16-bit data-in/data-out shift register, and         of 10kΩ in parallel with 100pF. Loads less than 2kΩ
          each DAC has a double-buffered input composed of an            degrade performance.
          input register and a DAC register (see Functional              The OS_ pin can be used to produce an adjustable off-
          Diagram). In addition, trimmed internal resistors produce      set voltage at the output. For instance, to achieve a 1V
          an internal gain of +2V/V that maximizes output voltage        offset, apply -1V to the OS_ pin to produce an output
          swing. The amplifier’s offset-adjust pin allows for a DC       range from 1V to (1V + VREF · 2). Note that the DAC’s
          shift in the DAC’s output.                                     output range is still limited by the maximum output voltage
          Both DACs use an inverted R-2R ladder network that             specification.
          produces a weighted voltage proportional to the input                                             Power-Down Mode
          voltage value. Each DAC has its own reference input to         The MAX5104 features a software-programmable shut-
          facilitate independent full-scale values. Figure 1 depicts     down mode that reduces the typical supply current to
          a simplified circuit diagram of one of the two DACs.           2µA. The two DACs can be powered down indepen-
                                             Reference Inputs            dently, or simultaneously using the appropriate pro-
          The reference inputs accept both AC and DC values              gramming command. Enter power-down mode by
          with a voltage range extending from 0 to (VDD - 1.4V).         writing the appropriate input-control word (Table 1). In
                                                                         power-down mode, the reference inputs and amplifier
          Determine the output voltage using the following equa-         outputs become high impedance, and the serial inter-
          tion (OS_ = AGND):                                             face remains active. Data in the input registers is saved,
          6   _______________________________________________________________________________________


          Low-Power, Dual, Voltage-Output, 12-Bit DAC
                                 with Serial Interface
Table 1. Serial-Interface Programming Commands
                                                                                                                                             MAX5104
                  16-BIT SERIAL WORD
                          D11.......................D0                                     FUNCTION
    A0    C1    C0                                       S0
                          (MSB)                (LSB)
     0     0     1            12-bit DAC data            0    Load input register A; DAC registers are unchanged.
     1     0     1            12-bit DAC data            0    Load input register B; DAC registers are unchanged.
     0     1     0            12-bit DAC data            0    Load input register A; all DAC registers are updated.
     1     1     0            12-bit DAC data            0    Load input register B; all DAC registers are updated.
                                                              Load all DAC registers from the shift register
     0     1     1            12-bit DAC data            0
                                                              (start up both DACs with new data).
                                                              Update both DAC registers from their respective input registers
     1     0     0            XXXXXXXXXXXX               0
                                                              (start up both DACs with data previously stored in the input registers).
     1     1     1            XXXXXXXXXXXX               0    Shut down both DACs (provided PDL = 1).
                                                              Update DAC register A from input register A
     0     0     0         0 0 1 X XXXXXXXX              0
                                                              (start up DAC A with data previously stored in input register A).
                                                              Update DAC register B from input register B
     0     0     0         1 0 1 X XXXXXXXX              0
                                                              (start up DAC B with data previously stored in input register B).
     0     0     0         1 1 0 X XXXXXXXX              0    Power Down DAC A (provided PDL = 1).
     0     0     0         1 1 1 X XXXXXXXX              0    Power Down DAC B (provided PDL = 1).
     0     0     0         0 1 0 X XXXXXXXX              0    UPO goes low (default).
     0     0     0         0 1 1 X XXXXXXXX              0    UPO goes high.
     0     0     0         1 0 0 1 XXXXXXXX              0    Mode 1, DOUT clocked out on SCLK’s rising edge.
     0     0     0         1 0 0 0 XXXXXXXX              0    Mode 0, DOUT clocked out on SCLK’s falling edge (default).
     0     0     0         0 0 0 X XXXXXXXX              0    No operation (NOP).
X = Don’t care
Note: D11, D10, D9, and D8 become control bits when A0, C1, and C0 = 0. S0 is a sub-bit, always zero.
allowing the MAX5104 to recall the output state prior to
entering power-down when returning to normal mode.
Exit power-down by recalling the previous condition or
by updating the DAC with new information. When                                           SCLK                  SK
returning to normal operation (exiting power-down),
wait 20µs for output stabilization.
                                                                                                                     MICROWIRE
                                                                               MAX5104                                 PORT
                                           Serial Interface                               DIN                  SO
The MAX5104’s 3-wire serial interface is compatible
with both MICROWIRE (Figure 2) and SPI/QSPI (Figure 3)
serial-interface standards. The 16-bit serial input word                                   CS                  I/O
consists of 1 address bit, 2 control bits, 12 bits of data
(MSB to LSB), and 1 sub-bit as shown in Figure 4. The
address and control bits determine the MAX5104’s
response, as outlined in Table 1.                                  Figure 2. Connections for MICROWIRE
                     _______________________________________________________________________________________                             7


          Low-Power, Dual, Voltage-Output, 12-Bit DAC
          with Serial Interface
                                                                                                               The MAX5104’s digital inputs are double buffered,
MAX5104
                                                                                     +5V                       which allows any of the following: loading the input reg-
                                                                                                               ister(s) without updating the DAC register(s), updating
                                                                                                               the DAC register(s) from the input register(s), or updating
                                                                                                               the input and DAC registers concurrently. The address
                                                                                     SS                        and control bits allow the DACs to act independently.
                                                                                                               Send the 16-bit data as one 16-bit word (QSPI) or two
                                                                                                               8-bit packets (SPI, MICROWIRE), with CS low during
                                            DIN                       MOSI
                                                                                                               this period. The address and control bits determine
                                                                                  SPI/QSPI                     which register will be updated, and the state of the reg-
                           MAX5104        SCLK                        SCK
                                                                                   PORT
                                                                                                               isters when exiting power-down. The 3-bit address/con-
                                                                                                               trol determines the following:
                                             CS                       I/O                                      • Registers to be updated
                                                                                                               • Clock edge on which data is to be clocked out via the
                                                                                                                 serial-data output (DOUT)
                                                                     CPOL = 0, CPHA = 0
                                                                                                               • State of the user-programmable logic output
                                                                                                               • Configuration of the device after power-down
          Figure 3. Connections for SPI/QSPI                                                                   The general timing diagram of Figure 5 illustrates how
                                                                                                               data is acquired. Driving CS low enables the device to
                                                                                                               receive data; otherwise, the interface control circuitry is
              MSB...................................................................................LSB        disabled. With CS low, data at DIN is clocked into the
                                                                                                               register on the rising edge of SCLK. As CS goes high,
                                            16 Bits of Serial Data
                                                                                                               data is latched into the input and/or DAC registers,
                                                                                                  Sub          depending on the address and control bits. The maximum
              Address Bits              Control Bits            MSB...Data Bits...LSB                          clock frequency guaranteed for proper operation is
                                                                                                  Bit
                                                                                                               10MHz. Figure 6 shows a more detailed timing diagram
                      A0                    C1, C0              D11.......................D0      S0           of the serial interface.
                  1 Address/2 Control Bits                           12 Data Bits                  0
          Figure 4. Serial-Data Format
                           CS
                                                                                                                                                         COMMAND
                                                                                                                                                         EXECUTED
                        SCLK
                                              1                                                     8           9                                  16
                          DIN          A0          C1      C0      D11      D10    D9        D8   D7      D6        D5   D4   D3   D2   D1   D0   S0
          Figure 5. Serial-Interface Timing Diagram
          8      _______________________________________________________________________________________


             Low-Power, Dual, Voltage-Output, 12-Bit DAC
                                    with Serial Interface
                                                                                                                                                MAX5104
             CS                                                                                                     tCSW
                              tCSS                      tCH                      tCP                 tCSH
                    tCSO                         tCL                                                         tCS1
         SCLK
                                 tDS
                                       tDH
             DIN
Figure 6. Detailed Serial-Interface Timing Diagram
                     SCLK                              SCLK                        SCLK
                           MAX5104                           MAX5104                     MAX5104
                     DIN             DOUT              DIN            DOUT         DIN            DOUT
                     CS                                CS                          CS                                TO OTHER
                                                                                                                     SERIAL DEVICES
Figure 7. Daisy Chaining MAX5104s
       DIN
      SCLK
       CS1
       CS2                                                                                                                 TO OTHER
                                                                                                                           SERIAL DEVICES
       CS3
                               CS                                CS                          CS
                                       MAX5104                         MAX5104                     MAX5104
                               SCLK                              SCLK                        SCLK
                               DIN                               DIN                         DIN
Figure 8. Multiple MAX5104s Sharing a Common DIN Line
                    _______________________________________________________________________________________                                 9


          Low-Power, Dual, Voltage-Output, 12-Bit DAC
          with Serial Interface
                                             Serial-Data Output
MAX5104
          The serial-data output, DOUT, is the internal shift register’s                                          +5V/+3V               OS_
          output. DOUT allows for daisy chaining of devices and                            REF_
          data readback. The MAX5104 can be programmed to
                                                                                                                    VDD
          shift data out of DOUT on SCLK’s falling edge (Mode 0)
                                                                                                                                   R
          or on the rising edge (Mode 1). Mode 0 provides a lag                                      MAX5104
          of 16 clock cycles, which maintains compatibility with
          SPI/QSPI and MICROWIRE interfaces. In Mode 1, the                                                                        R
          output data lags 15.5 clock cycles. On power-up, the                                    DAC_                                        OUT_
          device defaults to Mode 0.
                                                                                                          AGND                 DGND
                       User-Programmable Logic Output
          User-programmable logic output (UPO) allows an external
                                                                                     GAIN = +2V/V
          device to be controlled through the serial interface
          (Table 1), thereby reducing the number of microcontroller
          I/O pins required. On power-up, UPO is low.                      Figure 9. Unipolar Output Circuit (Rail-to-Rail)
                                Power-Down Lockout Input
          The power-down lockout (PDL) pin disables software                                                     +5V/+3V               OS_
          shutdown when low. When in power-down, transitioning                            REF_
          PDL from high to low wakes up the part with the output                                                                                    VOS
                                                                                                                   VDD
          set to the state prior to power-down. PDL can also be
                                                                                                                               R
          used to asynchronously wake up the device.                                                MAX5104
                                      Daisy-Chaining Devices                                                                   R
          Any number of MAX5104s can be daisy-chained by                                         DAC _                                       OUT_
          connecting the DOUT pin of one device to the DIN pin
          of the following device in the chain (Figure 7).
                                                                                                         AGND                 DGND
          Since the MAX5104’s DOUT pin has an internal active
          pull-up, the DOUT sink/source capability determines the
          time required to discharge/charge a capacitive load.
          See the digital output VOH and VOL specifications in the         Figure 10. Setting OS_ for Output Offset
          Electrical Characteristics.
          Figure 8 shows an alternate method of connecting several         Table 2. Unipolar Code Table (Gain = +2)
          MAX5104s. In this configuration, the data bus is common
          to all devices; data is not shifted through a daisy chain.            DAC CONTENTS
                                                                                                                           ANALOG OUTPUT
          More I/O lines are required in this configuration because          MSB           LSB
          a dedicated chip-select input (CS) is required for each IC.                                                              4095 
                                                                              1 1 1 1 1 1 1 1 11 1 1 ( 0 )                  +VREF        ⋅2
           __________Applications Information                                                                                      4096 
                                                 Unipolar Output                                                                   2049 
                                                                              1 0 0 0 0 0 0 0 00 0 1 ( 0 )                  +VREF        ⋅2
          Figure 9 shows the MAX5104 configured for unipolar,                                                                      4096 
          rail-to-rail operation with a gain of +2V/V. The MAX5104
                                                                                                                            2048 
          can produce a 0 to 4.096V output with a 2.048V reference            1 0 0 0 0 0 0 0 00 0 0 ( 0 )           +VREF                ⋅2 =    VREF
          (Figure 9). Table 2 lists the unipolar output codes. An                                                           4096 
          offset to the output can be achieved by connecting a
                                                                                                                                   2047 
          voltage to OS_, as shown in Figure 10. By applying                  0 1 1 1 1 1 1 1 11 1 1 ( 0 )                  +VREF        ⋅2
                                                                                                                                   4096 
          VOS_ = -1V, the output values will range between 1V
          and (1V + VREF · 2).                                                                                                     1 
                                                                              0000 0000 0001 (0)                            +VREF        ⋅2
                                                                                                                                   4096 
                                                  Bipolar Output
          The MAX5104 can be configured for a bipolar output                  0 0 0 0 0 0 0 0 00 0 0 ( 0 )                             0V
          (Figure 11). The output voltage is given by the equation
          (OS_ = AGND):                                                    Note: ( ) are for the sub-bit.
          10   ______________________________________________________________________________________


            Low-Power, Dual, Voltage-Output, 12-Bit DAC
                                   with Serial Interface
               VOUT = VREF [((2 · NB) / 4096) - 1]                                                       Harmonic Distortion and Noise
                                                                                                                                                                              MAX5104
                                                                                The total harmonic distortion plus noise (THD+N) is typ-
where NB represents the numeric value of the DAC’s                              ically less than -78dB at full scale with a 1Vp-p input
binary input code. Table 3 shows digital codes and the                          swing at 5kHz.
corresponding output voltage for Figure 11’s circuit.
                                                                                                                          Digital Calibration and
                                   Using an AC Reference                                                                    Threshold Selection
In applications where the reference has an AC signal                            Figure 13 shows the MAX5104 in a digital calibration
component, the MAX5104 has multiplying capabilities                             application. With a bright-light value applied to the pho-
within the reference input voltage range specifications.                        todiode (on), the DAC is digitally ramped until it trips
Figure 12 shows a technique for applying a sinusoidal                           the comparator. The microprocessor (µP) stores this
input to REF_, where the AC signal is offset before                             “high” calibration value. Repeat the process with a dim
being applied to the reference input.                                           light (off) to obtain the dark current calibration.
Table 3. Bipolar Code Table
     DAC CONTENTS                                                                 +5V/
                                              ANALOG OUTPUT                        +3V
  MSB           LSB                                                                                       +5V/+3V
                                                                                     AC   26k
                                                               2047            REFERENCE                                 MAX495
   1111 1111 1 111 (0)                              +VREF           
                                                               2048              INPUT
                                                           1 
   1000 0000 0 001 (0)                              +VREF       
                                                           2048                500mVp-p
                                                                                                   10k                     REF             VDD            R        OS_
   1000 0000 0 000 (0)                                       0V
                                                                                                                                                      R
                                                            1 
   0111 1111 1 111 (0)                               -VREF       
                                                            2048                                                    DAC_                                         OUT_
                                                            2047 
   0000 0000 0 001 (0)                               +VREF        ⋅2
                                                            4096                                                                   MAX5104
                                                                                                                     AGND                        DGND
                                                          2048 
   0000 0000 0 000 (0)                       -VREF              = - VREF
                                                          2048 
Note: ( ) are for the sub-bit.                                                  Figure 12. AC Reference Input Circuit
                                                                                                                                                 V+
    REF_             +5V/+3V
                                             10k               10k                                                                                     PHOTODIODE
                                                                                                REF_             +5V/+3V
                                                                                                                                         OS_
                                      OS_                                                                           VDD
                      VDD
                                                                                                                                 R
                               R                               V+                                      MAX5104                                                V+
           MAX5104
                                                                                                                                 R                                  VOUT
                               R              10k                        VOUT                                                            OUT_
       DAC _                                                                      µP              DAC _
                                      OUT_                                                                                                                    V-
                                                                                         DIN
                                                   10k         V-                                 AGND                      DGND
                      DGND     AGND                                                                                                                   RPULLDOWN
Figure 11. Bipolar Output Circuit                                               Figure 13. Digital Calibration
                         ______________________________________________________________________________________                                                          11


          Low-Power, Dual, Voltage-Output, 12-Bit DAC
          with Serial Interface
MAX5104
                                                                VDD
                                                                                                OSA
                                 MAX5104                                                 R
               VIN   REFA
                                                                                         R                  R1
                                                                                                OUTA
                       CS                   INPUT      DAC            DACA
                                SHIFT       REG A     REG A                                                           R2
                     SCLK
                               REGISTER
                                            INPUT      DAC                                                  R3                               VOUT
                       DIN                                            DACB                      OUTB
                                            REG B     REG B
                      REFB                                                                                                       R4
              VREF                                                                       R
                                                                                         R
                                                                                                OSB
                                                                                                             [ ] [ ]
                                                                                                         VOUT = GAIN – OFFSET
                                                                                                            = (V 2NA )( R2 )(1+ R4 ) (V               2NB
                                                                                                                                                             )( R4R3 )]
                                                                                                              [ 4096 R1+R2 R3 ] [
                                                                                                                 IN                             REF
                                                                                                                                                      4096
                                                                                                           NA IS THE NUMERIC VALUE OF THE INPUT CODE FOR DACA.
                                                                      AGND      DGND                       NB IS THE NUMERIC VALUE OF THE INPUT CODE FOR DACB.
          Figure 14. Digital Control of Gain and Offset
          The µP then programs the DAC to set an output voltage                                                               Pin Configuration
          at the midpoint of the two calibrated values. Applications
          include tachometers, motion sensing, automatic readers,
          and liquid-clarity analysis.                                                        TOP VIEW
                             Digital Control of Gain and Offset                                             AGND 1                     16 VDD
          The two DACs can be used to control the offset and gain                                           OUTA 2                     15 OUTB
          for curve-fitting nonlinear functions, such as transducer                                          OSA 3                     14 OSB
          linearization or analog compression/expansion applica-
                                                                                                            REFA 4         MAX5104     13 REFB
          tions. The input signal is used as the reference for the
          gain-adjust DAC, whose output is summed with the output                                             CL 5                     12 PDL
          from the offset-adjust DAC. The relative weight of each                                             CS 6                     11 UPO
          DAC output is adjusted by R1, R2, R3, and R4 (Figure 14).                                          DIN 7                     10 DOUT
                                 Power-Supply Considerations                                                SCLK 8                      9   DGND
          On power-up, the input and DAC registers clear (set to
          zero code). For rated performance, VREF_ should be at                                                             QSOP
          least 1.4V below VDD. Bypass the power supply with a
          4.7µF capacitor in parallel with a 0.1µF capacitor to
          AGND. Minimize lead lengths to reduce lead inductance.
                                                                                                                                Chip Information
                                                                                        TRANSISTOR COUNT: 3053
                     Grounding and Layout Considerations
          Digital and AC transient signals on AGND can create                           SUBSTRATE CONNECTED TO AGND
          noise at the output. Connect AGND to the highest quality
          ground available. Use proper grounding techniques,
          such as a multilayer board with a low-inductance ground
                                                                                                                      Package Information
          plane. Carefully lay out the traces between channels to
                                                                                        Package information is available on Maxim’s website:
          reduce AC cross-coupling and crosstalk. Wire-wrapped
          boards and sockets are not recommended. If noise                              www.maxim-ic.com.
          becomes an issue, shielding may be required.
          Maxim cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim product. No circuit patent licenses are
          implied. Maxim reserves the right to change the circuitry and specifications without notice at any time.
          12 ____________________Maxim Integrated Products, 120 San Gabriel Drive, Sunnyvale, CA 94086 408-737-7600
          © 1999 Maxim Integrated Products                    Printed USA                      is a registered trademark of Maxim Integrated Products.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 MAX5104CEE+ MAX5104EEE+ MAX5104CEE+T MAX5104EEE+T
