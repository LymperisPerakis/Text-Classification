                                                                                                                LTC4304
                                                                                                Hot Swappable 2-Wire
                                                                                                   Bus Buffer with Stuck
                                                                                                          Bus Recovery
FEATURES                                                                                    DESCRIPTIO                    U
■   Automatic Disconnect of SDA/SCL Lines when Bus                                          The LTC®4304 hot swappable 2-wire bus buffer allows I/O
    is Stuck Low for ≥30ms                                                                  card insertion into a live backplane without corruption of
■   Fault Flag for Stuck Bus                                                                the data and clock busses. When a connection is made,
■   Recovers Stuck Busses with Automatic Clocking*                                          the LTC4304 provides bidirectional buffering, keeping the
■   Bidirectional Buffer* for SDA and SCL Lines                                             backplane and card capacitances isolated. If SDAOUT or
    Increases Fanout                                                                        SCLOUT is low for ≥30ms (typ), the LTC4304 automatically
■   Prevents SDA and SCL Corruption During Live                                             breaks the data and clock bus connection and FAULT will
    Board Insertion and Removal from Backplane                                              pull low. At this time the LTC4304 automatically generates
■   Allows Bus Pullup Voltages Above and Below VCC                                          up to 16 clock pulses on SCLOUT in an attempt to free the
■   ±15kV Human Body Model ESD Protection                                                   bus. A connection will be enabled automatically when the
■   Isolates Input SDA and SCL Lines from Output                                            bus becomes free. A logic low on the ACC input enables
■   Compatible with I2 CTM, I2 C Fast-Mode and SMBus                                        the LTC4304’s rise-time accelerators. A logic high on ACC
    Standards (Up to 400kHz Operation)                                                      disables the rise-time accelerators, which allows SDA and
■   READY Open Drain Output                                                                 SCL bus pull-up voltages below VCC.
■   1V Precharge on All SDA and SCL Lines
                                                                                            During insertion, the SDA and SCL lines are precharged
■   High Impedance SDA, SCL Pins for VCC = 0V
                                                                                            to 1V to minimize bus disturbances. When driven high,
■   ENABLE Gates Connection from Input to Output
                                                                                            ENABLE allows the LTC4304 to connect after a stop bit or
■   MSOP 10-Pin and DFN (3mm × 3mm) Packages
          U                                                                                 bus idle occurs. Driving ENABLE low breaks the connection
APPLICATIO S                                                                                between SDAIN and SDAOUT, SCLIN and SCLOUT. READY
                                                                                            is an open drain output that indicates when the backplane
■   Hot Board Insertion
                                                                                            and card sides are connected together.
■   Servers
                                                                                                 , LT, LTC and LTM are registered trademarks of Linear Technology Corporation.
■   Capacitance Buffer/Bus Extender                                                         All other trademarks are the property of their respective owners.
■   RAID Systems                                                                            Protected by U.S. Patents including 6356140, 6650174, 7032051.
TYPICAL APPLICATIO                               U
            5V 3.3V
                                                                         0.01µF                                                      Stuck Bus Resolved with
                                                                                      10k    10k                                       Automatic Clocking
                                                               VCC
              10k   10k
                                                              LTC4304                                         SDAOUT
                                                     SCLIN              SCLOUT                                 5V/DIV            STUCK LOW > 30ms               RECOVERS
BACK_SCL                                                                                       CARD_SCL
                                                                                                                SDAIN
                                                                                                                5V/DIV                   DISCONNECT AT TIMEOUT
                                                                                                                                        AUTOMATIC CLOCKING
                                                     SDAIN              SDAOUT                                 SCLOUT
BACK_SDA                                                                                       CARD_SDA         5V/DIV
                                                     FAULT               READY
                                                                                                                FAULT
     3.3V                                            ENABLE                ACC                                  5V/DIV
                                                               GND
                                              100k                        4304 TA01
                                                                                                                                            200ms/DIV
                                                                                                                                                                   4304 TA01b
                      BACKPLANE   STAGGERED                    CARD
                      CONNECTOR   CONNECTOR
                                                                                                                                                                                 4304fa
                                                                                                                                                                                 1


LTC4304
ABSOLUTE               W           W W
                             AXI U RATI GS (Notes 1, 2)   U
VCC to GND .................................................. –0.3V to 7V       SDAIN, SCLIN, SDAOUT, SCLOUT,
SDAIN, SCLIN, SDAOUT, SCLOUT, READY, ENABLE,                                    FAULT READY (Note 3) .........................................30mA
FAULT, ACC .................................................. –0.3V to 7V       Storage Temperature Range
Operating Temperature                                                             MSOP ................................................–65°C to 150°C
  LTC4304C ................................................ 0°C to 70°C           DFN....................................................–65°C to 125°C
  LTC4304I .............................................–40°C to 85°C           Lead Temperature (Soldering, 10sec)
                                                                                  MSOP ............................................................... 300°C
               U   W    U
PACKAGE/ORDER I FOR ATIO
                                  TOP VIEW
                    ENABLE   1                10 VCC                                                             TOP VIEW
                    SCLOUT   2                 9 SDAOUT                                          ENABLE    1                    10   VCC
                     SCLIN   3       11        8 SDAIN                                           SCLOUT    2                    9    SDAOUT
                       ACC   4                 7 FAULT                                            SCLIN    3                    8    SDAIN
                                                                                                    ACC    4                    7    FAULT
                       GND   5                 6 READY                                              GND    5                    6    READY
                                                                                                               MS10 PACKAGE
                                  DD PACKAGE                                                               10-LEAD PLASTIC MSOP
                       10-LEAD (3mm × 3mm) PLASTIC DFN
                           TJMAX = 125°C, θJA = 43°C/W                                                    TJMAX = 125°C, θJA =200°C/W
                            EXPOSED PAD (PIN 11)
                       PCB GND CONNECTION OPTIONAL
   ORDER PART NUMBER                         DD PART MARKING*                    ORDER PART NUMBER                            MS PART MARKING*
            LTC4304CDD                                 LBBD                             LTC4304CMS                                           LTBBC
            LTC4304IDD                                 LBBD                             LTC4304IMS                                           LTBBC
 Order Options Tape and Reel: Add #TR
 Lead Free: Add #PBF Lead Free Tape and Reel: Add #TRPBF
 Lead Free Part Marking: http://www.linear.com/leadfree/
Consult LTC Marketing for parts speciﬁed with wider operating temperature ranges. *The temperature grade is identiﬁed by a label on the shipping container.
ELECTRICAL CHARACTERISTICS                                The ● denotes the speciﬁcations which apply over the full operating
temperature range, otherwise speciﬁcations are at TA = 25°C. VCC = 2.7V to 5.5V, unless otherwise noted.
SYMBOL              PARAMETER                                  CONDITIONS                                               MIN          TYP        MAX    UNITS
Power Supply
VCC                 Positive Supply Voltage                                                                      ●      2.7                      5.5      V
ICC                 Supply Current                             VCC = 5.5V, VSDAIN = VSDAOUT = 0V (Note 7)        ●                    6           8      mA
                    Supply Current, ENABLE = GND               VCC = 5.5V                                                            1.5                 mA
Startup Circuitry
VPRE                Precharge Voltage                          SDA, SCL Floating, VCC = 5.5V                     ●      0.8              1       1.2       V
TIDLE               Bus Idle Time                                                                                ●      60              95       175      µs
VOL_READY           READY Output Low Voltage                   IPULLUP = 3mA                                     ●                               0.4       V
                                                               IPULLUP = 6mA, VCC = 4.7V                         ●                               0.4       V
VTHR_ENABLE         ENABLE Threshold                                                                             ●      0.8          1.4         2         V
IENABLE             ENABLE Input Current                   ENABLE from 0 to VCC                                  ●                   0.1        ±1.5      µA
VTHR                SDA, SCL Logic Input Threshold Voltage Rising Edge                                           ●      1.6          1.8         2         V
                                                                                                                                                        4304fa
2


                                                                                                                                           LTC4304
ELECTRICAL CHARACTERISTICS                                             The ● denotes the speciﬁcations which apply over the full operating
temperature range, otherwise speciﬁcations are at TA = 25°C. VCC = 2.7V to 5.5V, unless otherwise noted.
SYMBOL                  PARAMETER                                   CONDITIONS                                             MIN        TYP        MAX        UNITS
VHYS                    SDA, SCL, Logic Input Threshold Voltage (Note 6)                                                               50                      mV
                        Hysteresis
tPLH                    ENABLE Delay On-Off                         VCC = 3.3V                                                         300                      ns
                        READY Delay Off-On                          (Note 6)                                                           10                       ns
tPHL                    ENABLE Delay Off-On                         VCC = 3.3V                                       ●       60         95        175           µs
                        READY Delay On-Off                          (Note 6)                                                           10                       ns
IOFF_READY              Ready Off Leakage Current                                                                    ●                            ±10           µA
Rise-Time Accelerators
IPULLUPAC               Transient Boosted Pull-Up Current           Positive Transition on SDA, SCL, VCC = 2.7V,              2        3.5        5.5          mA
                                                                    Slew Rate = 0.8V/µs (Note 5)
tPDOFF                  ACC Delay, On/Off                           (Note 6)                                                            5                       ns
VIH                     Input High Voltage                          Measured on ACC                                  ●   0.9VCC                                  V
VIL                     Input Low Voltage                           Measured on ACC                                  ●                          0.1VCC           V
IIN                     ACC Input Current                           ACC Shorted to GND or VCC (Note 8)               ●     –100                   100           µA
Bus Stuck Low Timeout
tTIMEOUT                Bus Stuck Low Timer                         SDAOUT, SCLOUT = 0V                              ●       25         30         35          ms
VOLFAULT                FAULT Output Low Voltage                    IPULLUP = 3mA                                    ●                            0.4            V
IOFF_FAULT                                                          VCC = 5.5V                                       ●                            ±10           µA
Input-Output Connection
VOS                     Input-Output Offset Voltage                 10k to VCC on SDA, SCL,                          ●       40         80        120          mV
                                                                    2.7k to VCC on SDA, SCL                          ●       50        100        150          mV
                                                                    VCC = 3.3V, VSDA/SCL = 0.2V (Note 4)
CIN                     Digital Input Capacitance                   (Note 6)                                                                       10           pF
                        SDAIN, SDAOUT, SCLIN, SCLOUT
VIL, MAX                Input Logic Low Voltage                                                                      ●                            0.4            V
ILEAK                   Input Leakage Current                       SDA, SCL, VCC = 5.5V                             ●                             ±5           µA
VOL                     Output Low Voltage, Input = 0V              SDA, SCL Pins, ISINK = 4mA, VCC = 2.7V           ●        0       0.19        0.3            V
Timing Characteristics
fI2C, MAX               I2C Maximum Operating Frequency             (Note 6)                                                400        600                     kHz
tBUF                    Bus Free Time Between Stop and Start        (Note 6)                                                                      1.3           µs
                        Condition
tHD, STA                Hold Time After (Repeated)                  (Note 6)                                                                      100           ns
                        Start Condition
tSU, STA                Repeated Start Condition Set-Up Time        (Note 6)                                                                       0            ns
tSU, STO                Stop Condition Set-Up Time                  (Note 6)                                                                       0            ns
tHD, DATI               Data Hold Time Input                        (Note 6)                                                                       0            ns
tSU, DAT                Data Set-Up Time                            (Note 6)                                                                      100           ns
Note 1: Stresses beyond those listed under Absolute Maximum Ratings                  voltage than its input. The magnitude of this offset voltage as a function of
may cause permanent damage to the device. Exposure to any Absolute                   the pull-up resistor and VCC voltage is shown in the Typical Performance
Maximum Rating condition for extended periods may affect device                      Characteristics section.
reliability and lifetime.                                                            Note 5: IPULLUPAC varies with temperature and VCC voltage, as shown in
Note 2: All currents into pins are positive; all voltages are referenced to          the Typical Performance Characteristics section.
GND unless otherwise speciﬁed.                                                       Note 6: Determined by design, not tested in production.
Note 3: Pulsed less than 5µs.                                                        Note 7: ICC test performed with connection circuitry active.
Note 4: The connection circuitry always regulates the output to a higher             Note 8: When ﬂoating, the ACC pin can tolerate ±5µA of leakage.
                                                                                                                                                             4304fa
                                                                                                                                                              3


LTC4304
TYPICAL PERFOR A CE CHARACTERISTICS                       U W                                                                                     TA = 25°C unless otherwise indicated.
                 ICC vs Temperature                                                                Input-Output tPHL vs Temperature                                                    IPULLUPAC vs Temperature
           6.2                                                                               140                                                                                  14
                                                                                                   CIN = COUT = 100pF
                             VCC = 5.5V                                                            RPULLUPIN = RPULLUPOUT = 10k
           6.0                                                                               120                                                                                  12                     VCC = 5.5V
                                                                                             100                                                                                  10
           5.8
                                                                                 tPHL (ns)                                                                       IPULLUPAC (mA)
                                                                                              80                                                                                   8
ICC (mA)   5.6
                                                                                                                                                                                                         VCC = 3.3V
                                                                                              60                                                                                   6
           5.4
                                                                                              40                                                                                   4
                             VCC = 2.7V                                                                                                                                                             VCC = 2.7V
           5.2                                                                                20                                                                                   2
           5.0                                                                                 0                                                                                   0
              –50   –25    0    25    50                   75        100                        –50    –25      0    25    50                75        100                          –50   –25       0    25    50     75        100
                          TEMPERATURE (°C)                                                                     TEMPERATURE (°C)                                                                    TEMPERATURE (°C)
                                                                4303 G01                                                                          4303 G02                                                                 4303 G03
                                                       Connection Circuitry VOUT - VIN                                                   Input-Output tPHL vs COUT
                                                 250                                                                               180
                                                                                                                                       CIN = 50pF
                                                                                                                                   160 RPULLUPIN = RPULLUPOUT = 10k
                                                 200
                                                       VCC = 5.5V                                                                  140
                                 VOUT-VIN (mV)
                                                 150                                                                               120
                                                                                                                       tPHL (ns)   100
                                                 100                                                                                80
                                                       VCC = 2.7V
                                                                                                                                    60
                                                  50
                                                                                                                                    40
                                                   0                                                                                20
                                                   1000     3000            5000     7000              9000                              0         500         1000                    1500       2000
                                                                           RPULLUP (Ω)                                                                       COUT (pF)
                                                                                                         4303 G04                                                                             4303 G05
                                                                                                                                                                                                                           4304fa
4


                                                                                                     LTC4304
   U       U
PI FU CTIO S         U
ENABLE (Pin 1): Connection Enable. This is a digital         READY (Pin 6): Connection Status Flag. READY provides
threshold input pin. For normal operation ENABLE is high.    a digital ﬂag which indicates the status of the connection
Driving ENABLE below 0.8V isolates SDAIN from SDAOUT,        circuitry described in the “Connection Circuitry” section.
SCLIN from SCLOUT, asserts READY low and disables            Connect a resistor of 10k to VCC to provide the pull-up.
automatic clocking. A rising edge on ENABLE after a fault    FAULT (Pin 7): Bus Stuck Low Fault. FAULT is an open
has occurred unconditionally forces a connection between     drain N-channel MOSFET which pulls low to signal a bus
SDAIN, SDAOUT and SCLIN, SCLOUT.                             stuck low condition. In normal operation, FAULT is high.
SCLOUT (Pin 2): Serial Clock Output. Connect this pin to     Connect a 10k resistor from this pin to VCC to provide
the SCL bus on the card.                                     the pull-up.
SCLIN (Pin 3): Serial Clock Input. Connect this pin to SCL   SDAIN (Pin 8): Serial Data Input. Connect this pin to the
on the bus backplane.                                        SDA bus on the backplane.
ACC (Pin 4): Rise-Time Accelerator Control. Connect ACC      SDAOUT (Pin 9): Serial Data Output. Connect this pin to
to VCC to disable all four accelerators. Connect ACC to      the SDA bus on the card.
GND to enable all four accelerators. Float ACC to enable
                                                             VCC (Pin 10): Supply Voltage Input. Place a bypass capaci-
the SDAOUT and SCLOUT accelerators only. For applica-        tor of at least 0.01µF close to VCC for best results.
tions when VCC is greater than the bus pull-up voltage,
connect ACC to VCC.                                          Exposed Pad (Pin 11, DFN Only): Exposed pad may be
                                                             left open or connected to the ground plane.
GND (Pin 5): Device Ground. Connect this pin to a ground
plane for best results.
                                                                                                                  4304fa
                                                                                                                   5


LTC4304
BLOCK DIAGRA                        W
                                             LTC4304 2-Wire Bus Buffer with Stuck Bus Protection
                                                                 3.5mA                          3.5mA
                                        SLEW RATE                                                       SLEW RATE
                       ACC_IN                                                CONNECT                                       ACC_OUT
10 VCC                                  DETECTOR                                                        DETECTOR
      SDAIN                                                                                                                                 SDAOUT
 8                                                                                                                                                     9
                200k                                    PC_CONNECT                     PC_CONNECT                                           200k
                                                                         PRECHARGE
                                                                     3.5mA                   3.5mA
                                          SLEW RATE                                                  SLEW RATE
                200k                                                         CONNECT                 DETECTOR                               200k
                                          DETECTOR
      SCLIN                                                                                                                                 SCLOUT
 3                                                                                                                                                     2
                                                      ACC_IN
                                            ACC_IN
      ACC                                    ACC      ACC_OUT
 4                                           CTRL
                                +                                                                                      +
                                                                         AUTOMATIC
                                                                          CLOCKING
                                –                                                                                      –                      FAULT
                                                                                                                                                       7
                                                                           30ms
                                                          UVLO
                                                                           TIMER
                                                                                                                       +
     1.8V                       –
                                                                           LOGIC               PC_CONNECT
                                +                                                                                      –             1.8V
                                                                                                                                             READY
                                                                                                             CONNECT                                   6
      ENABLE
 1                              +
                                                                            95µs
                                              UVLO                         DELAY                                 CONNECT                       GND
               1.4V             –                                                                                                                      5
                                                                                                                                                   4304 BD
                                                                                                                                                      4304fa
6


                                                                                                         LTC4304
OPERATION
Start-Up                                                        the waveforms on the backplane busses look slightly
When the LTC4304 ﬁrst receives power on its VCC pin,            different than the corresponding card bus waveforms, as
either during power up or live insertion, it starts in an under described here.
voltage lockout (UVLO) state, ignoring any activity on the
                                                                Input to Output Offset Voltage
SDA or SCL pins until VCC rises above 2.5V (typical).
                                                                When a logic low voltage, VLOW1, is driven on any of the
During this time, the precharge circuitry is active and
                                                                LTC4304’s data or clock pins, the LTC4304 regulates the
forces 1V through 200K nominal resistors to the SDA
                                                                voltage on the opposite side of the part (call it VLOW2)
and SCL pins. Because the I/O card is being plugged
                                                                to a slightly higher voltage, as directed by the following
into a live backplane, the voltage on the backplane SDA
                                                                equation:
and SCL busses may be anywhere between 0V and VCC.
Precharging the SCL and SDA pins to 1V minimizes the               VLOW2 = VLOW1 + 75mV + (VCC/R) • 20Ω (typical)
worst-case voltage differential these pins will see at the      where R is the bus pull-up resistance in ohms. For ex-
moment of connection, therefore minimizing the amount           ample, if a device is forcing SDAOUT to 10mV where VCC
of disturbance caused by the I/O card.                          = 3.3V and the pull-up resistor R on SDAIN is 10k, then
Once the LTC4304 comes out of UVLO, it assumes that             the voltage on SDAIN = 10mV + 75mV + (3.3/10000) • 20
SDAIN and SCLIN have been inserted into a live system           = 91.6mV(typical). See the Typical Performance Charac-
and that SDAOUT and SCLOUT are being powered up at              teristics section for curves showing the offset voltage as
the same time as itself. Therefore, it looks for either a stop  a function of VCC and R.
bit or bus idle condition on the input side to indicate the
completion of a data transaction. When either one occurs,       Bus Stuck Low Timeout
the part also veriﬁes that both the SDAOUT and SCLOUT           When SDAOUT or SCLOUT is low, an internal timer starts.
voltages are high. When all of these conditions are met,        The timer is only reset when SDAOUT and SCLOUT are
the input-to-output connection circuitry is activated, join-    both high. If they do not go high within 30ms (typical),
ing the SDA and SCL busses on the I/O card with those           FAULT pulls low indicating a bus stuck condition and the
on the backplane and READY goes high.                           connection between SDAIN and SDAOUT, and SCLIN
                                                                and SCLOUT is broken. After a delay of at least 40µs, the
Connection Circuitry                                            LTC4304 automatically generates up to 16 clock pulses at
Once the connection circuitry is activated, the functionality   8.5kHz (typical) on SCLOUT in an attempt to unstick the
of the SDAIN and SDAOUT pins is identical. A low forced         bus. When SDAOUT and SCLOUT go high, FAULT is cleared
on either pin at any time results in both pin voltages be-      and reconnection occurs when the conditions described
ing low. For proper operation, logic low input voltages         in the “Start-Up” section above are satisﬁed.
should be no higher than 0.4V with respect to the ground        When powering up into a bus stuck low condition, the
pin voltage of the LTC4304. SDAIN and SDAOUT enter              connection circuitry joining the SDA and SCL busses on
a logic high state only when all devices on both SDAIN          the I/O card with those on the backplane is not activated.
and SDAOUT release high. The same is true for SCLIN             30ms after UVLO, FAULT pulls low indicating a bus stuck
and SCLOUT. This important feature ensures that clock           low condition, and automatic clocking takes place as
stretching, clock synchronization, arbitration and the ac-      described above.
knowledge protocol always work, regardless of how the
devices in the system are tied to the LTC4304.                  Propagation Delays
Another key feature of the connection circuitry is that it      During a rising edge, the rise-time on each side is de-
provides bidirectional buffering, keeping the backplane         termined by the bus pull-up resistor and the equivalent
and card capacitances isolated. Because of this isolation,      capacitance on the line. If the pull-up resistors are the
                                                                                                                      4304fa
                                                                                                                       7


LTC4304
OPERATION
  OUTPUT SIDE                                               INPUT SIDE   INPUT SIDE                                              OUTPUT SIDE
          50pF                                              150pF               50pF                                             150pF
      0.5V/DIV                                              0.5V/DIV        0.5V/DIV                                             0.5V/DIV
                                                   4303 F01                                                             4303 F02
                               200ns/DIV                                                             20ns/DIV
               Figure 1. Input-Output Connection tPLH                                Figure 2. Input-Output Connection tPHL
same, a difference in rise-time occurs which is directly               READY Digital Output
proportional to the difference in capacitance between the
                                                                       The READY pin provides a digital ﬂag which indicates the
two sides. This effect is displayed in Figure 1 for a VCC
                                                                       status of the connection circuitry described previously in
= 3.3V and a 10k pull-up resistor on each side (50pF on
                                                                       the “Connection Circuitry” section. READY is high when
one side and 150pF on the other). Since the output side
                                                                       the connection circuitry is active, and pulls low when
has less capacitance than the input, it rises faster and the
                                                                       there is not a valid connection. The pin is driven by an
effective tPLH is negative.
                                                                       open drain pull-down capable of sinking 3mA while hold-
There is a propagation delay, tPHL, through the connec-                ing 0.4V on the pin. Connect a resistor of 10k to VCC to
tion circuitry for falling waveforms. Figure 2 shows the               provide the pull-up.
falling edge waveforms. An external driver pulls down
the voltage on the side with 50pF capacitance; LTC4304                 FAULT Digital Output
pulls down the voltage on the opposite side with a delay               The FAULT pin provides a digital ﬂag which is low when
of 80ns. This delay is always positive and is a function of            SDAOUT and SCLOUT have not both been high within 30ms
supply voltage, temperature and the pull-up resistors and              (typical). The pin is driven by an open drain pull-down
equivalent bus capacitances on both sides of the bus. The              capable of sinking 3mA while holding 0.4V on the pin.
Typical Performance Characteristics section shows tPHL                 Connect a resistor of 10k to VCC to provide the pull-up.
as a function of temperature and voltage for 10k pull-up
resistors and 100pF equivalent capacitance on both sides               ENABLE
of the part. Larger output capacitances translate to longer
                                                                       When the ENABLE pin is driven below 0.8V with respect
delays. Users must quantify the difference in propagation
                                                                       to the LTC4304’s ground, the backplane side is discon-
times for a rising edge versus a falling edge in their systems
                                                                       nected from the card side, and the READY pin is internally
and adjust setup and hold times accordingly.
                                                                       pulled low. When the pin is driven above 2V, the part
                                                                       waits for data transactions on both the backplane and
                                                                       card sides to be complete (as described in the Start-Up
                                                                       section) before connecting the two sides. At this time the
                                                                       internal pulldown on READY releases. When ENABLE is
                                                                       low, automatic clocking is disabled.
                                                                                                                                          4304fa
8


                                                                                                                        LTC4304
OPERATION
A rising edge on ENABLE after a stuck bus condition has       reduce power consumption, or bus capacitance beyond
occurred forces a connection between SDAIN, SDAOUT            that speciﬁed in I2C, while still meeting system rise time
and SCLIN, SCLOUT even if bus idle conditions are not         requirements. During positive bus transitions, the LTC4304
met. At this time the internal 30ms timer is reset but not    switches in 3.5mA (typical) of current to quickly slew the
disabled.                                                     SDA and SCL lines once their DC voltages exceed 0.8V.
                                                              Choose a pull-up resistor so that the bus will rise on its
Rise Time Accelerators                                        own at a rate of at least 0.8V/µs to guarantee activation
Once connection has been established, rise time accel-        of the accelerators. Rise time accelerators turn off when
erator circuits on all four SDA and SCL pins are activated    SDA and SCL lines are approximately 1V below VCC.
(assuming accelerators are enabled, see ACC pin descrip-      Rise time accelerators are automatically disabled during
tion). These allow the use of a large pull-up resistor to     automatic clocking.
APPLICATIONS INFORMATION
Resistor Pull-Up Selection
The system pull-up resistors must be strong enough            the LTC4304 drives the capacitance on the card side and
to provide a positive slew rate of 0.8V/µs on the SDA         the backplane must drive only the digital input capacitance
and SCL pins, in order to activate the rise time accelera-    of the LTC4304, which is less than 10pF.
tors during rising edges. Choose maximum resistor value
                                                              In most applications the LTC4304 will be used with a
RPULL-UP(MAX) using the formula:
                                                              staggered connector where VCC and GND will be long
RPULLUP(MAX)[kΩ] =
                        (VBUS(MIN) – 0.8V) • 1250[ns/V]       pins. SDA and SCL are medium length pins to ensure that
                                                              the VCC and GND pins make contact ﬁrst. This will allow
                                    CBUS [pF]
                                                              the precharge circuitry to be activated on SDA and SCL
where VBUSMIN is the minimum operating pull-up sup-           before they make contact. ENABLE is a short pin that is
ply voltage, and CBUS the total capacitance on respec-        pulled down when not connected. This is to ensure that the
tive bus line.                                                connection between the backplane and the cards data and
For example, assume VBUS = VCC = 3.3V, and assuming           clock busses is not enabled until the transients associated
±10% supply tolerance, VBUSMIN = 2.97V. With CBUS =           with live insertion have settled.
100pF, RPULL-UP, MAX = 27.1k. Therefore a smaller pull-up     Figure 3 shows the LTC4304 in a CompactPCITM conﬁgura-
resistor than 27.1k must be used, so 10k works ﬁne.           tion. Connect VCC and ENABLE to the output of one of the
Live Insertion and Capacitance Buffering Application          CompactPCI power supply Hot Swap circuits. Use a pull-up
                                                              resistor to ENABLE for a card side enable/disable. VCC is
Figures 3 through 6 illustrate applications of the LTC4304    monitored by a ﬁltered UVLO circuit. With the VCC voltage
that take advantage of both its Hot SwapTM controlling and    powering up after all the other pins have established con-
capacitance buffering features. In all of these applications, nection, the UVLO circuit ensures that the backplane and
note that if the I/O cards were plugged directly into the     the card data and clock busses are not connected until
backplane without the LTC4304 buffer, all of the backplane    the transients associated with live insertion have settled.
and card capacitances would add directly together, making     Owing to their small capacitance, the SDAIN and SCLIN
rise- and fall-time requirements difﬁcult to meet. Placing a  pins cause minimal disturbance on the backplane busses
LTC4304 on the edge of each card, however, isolates the       when they make contact with the connector.
card capacitance from the backplane. For a given I/O card,    Hot Swap is a trademark of Linear Technology Corporation.
                                                                                                                             4304fa
                                                                                                                             9


LTC4304
APPLICATIONS INFORMATION
                             BACKPLANE   STAGGERED
                             CONNECTOR   CONNECTOR
           BACKPLANE                                                                 I/O PERIPHERAL CARD 1
                                                        POWER SUPPLY
     VCC
                                                          HOT SWAP
                                                                       R3                             C1         R4    R5    R6
           R1    R2                                                    10k                            0.01µF     10k   10k   10k
                                                                             CARD
           10k   10k                                                         ENABLE/DISABLE
  BD_SEL                                                                     ENABLE          VCC       SDAOUT                      CARD1_SDA
     SDA                                                                     SDAIN                      SCLOUT                     CARD1_SCL
                                                                                           LTC4304
     SCL                                                                     SCLIN                       READY
                                                                                             GND
                                                                                     I/O PERIPHERAL CARD 2
                                                        POWER SUPPLY
                                                          HOT SWAP                                    C3
                                                                       R7                                        R8    R9    R10
                                                                       10k                            0.01µF     10k   10k   10k
                                                                             CARD
                                                                             ENABLE/DISABLE
                                                                             ENABLE          VCC       SDAOUT                   CARD2_SDA
                                                                             SDAIN                      SCLOUT                  CARD2_SCL
                                                                                           LTC4304
                                                                             SCLIN                       READY
                                                                                             GND
                                                                                              • • •
                                                                                     I/O PERIPHERAL CARD N
                                                        POWER SUPPLY
                                                          HOT SWAP
                                                                       R11                            C5         R12   R13   R14
                                                                       10k CARD                       0.01µF     10k   10k   10k
                                                                             ENABLE/DISABLE
                                                                             ENABLE          VCC       SDAOUT                   CARDN_SDA
                                                                             SDAIN                      SCLOUT                  CARDN_SCL
                                                                                           LTC4304
                                                                             SCLIN                       READY
                                                                                             GND
                                                                                                                             4304 F03
           Figure 3. Inserting Multiple I/O Cards into a Live Backplane Using the LTC4304 in a CompactPCI System
                                                                                                                                            4304fa
10


                                                                                                                  LTC4304
APPLICATIONS INFORMATION
Figure 4 shows the LTC4304 in a PCI application where all              ﬁlter to prevent the LTC4304 from becoming activated until
of the pins have the same length. In this case, a RC ﬁlter             the transients associated with live insertion have settled.
circuit on the I/O card with a product of 10ms provides a              Connect the capacitor between ENABLE and GND, and the
                                                                       resistor from VCC to ENABLE.
                              BACKPLANE
                              CONNECTOR
          BACKPLANE                                                           I/O PERIPHERAL CARD 1
   VCC
                                                             R3                                C1        R4  R5   R6   R11
                                                             100k                              0.01µF    10k 10k  10k
          R1    R2                                                                                                     10k
          10k   10k                                                     ENABLE         VCC       SDAOUT                  CARD1_SDA
  SDA                                                                   SDAIN                    SCLOUT                  CARD1_SCL
                                                                                     LTC4304
   SCL                                                                  SCLIN                     READY
                                                               C2       ACC            GND         FAULT
                                                               0.1µF
                                                                              I/O PERIPHERAL CARD 2
                                                                                               C3        R8  R9   R10  R12
                                                             R7
                                                                                               0.01µF    10k 10k  10k  10k
                                                             100k
                                                                        ENABLE         VCC       SDAOUT                  CARD2_SDA
                                                                        SDAIN                    SCLOUT                  CARD2_SCL
                                                                                     LTC4304
                                                                        SCLIN                     READY
                                                               C4       ACC            GND         FAULT
                                                               0.1µF
                                                                                        •                             4304 F04
                                                                                        •
                                                                                        •
                    Figure 4. Inserting Multiple I/O Cards into a Live Backplane Using the LTC4304 in a PCI System
                                                                                                                                4304fa
                                                                                                                               11


LTC4304
APPLICATIONS INFORMATION
Supply Independent Operation                                            celerators cannot be used. Float ACC in applications where
Figure 5 illustrates applications of the LTC4304 with differ-           the pull-up voltage on SDAIN and SCLIN is < VCC and the
                                                                        pull-up voltage on SDAOUT and SCLOUT is ≥ VCC. Connect
ent bus pull up and VCC voltages, demonstrating its ability
                                                                        ACC to ground in applications where VCC is ≤ SDA and
to recognize and buffer bus data levels that are above or
                                                                        SCL pull-up voltages. Connect ACC to VCC for applications
below its VCC supply voltage. In applications where VCC
                                                                        where SDA and SCL pull-up voltages are ≤ VCC.
voltage is greater than bus pull-up voltages, rise-time ac-
                                        BACKPLANE  STAGGERED
                                       CONNECTOR   CONNECTOR
                                  5V
                                                                           C1
                                                                           0.01µF
                    3.3V                                                                            R3      R4
                           R1      R2                                                               10k     10k
                           10k     10k                             ACC           VCC   SDAOUT                  CARD_SDA
                    SDA                                            SDAIN                SCLOUT                 CARD_SCL
                                                                               LTC4304
                    SCL                                            SCLIN                 READY
                                  5V                               ENABLE        GND     FAULT
                                                               R5
                                                               10k
                                       BACKPLANE   STAGGERED
                                       CONNECTOR   CONNECTOR
                                3.3V
                                                                           C2
                      5V                                                   0.01µF                   R8      R9
                           R6     R7                                                                10k     10k
                           10k    10k                              ACC           VCC   SDAOUT                  CARD_SDA
                    SDA                                            SDAIN                SCLOUT                 CARD_SCL
                                                                               LTC4304
                    SCL                                            SCLIN                 READY
                                3.3V                               ENABLE        GND     FAULT
                                                               R10
                                                               10k
                                       BACKPLANE   STAGGERED
                                       CONNECTOR   CONNECTOR                                            2.5V
                                3.3V
                                                                           C3
                      5V                                                   0.01µF                   R13     R14
                            R11   R12                                                               10k     10k
                            10k   10k                              ACC           VCC   SDAOUT                  CARD_SDA
                    SDA                                            SDAIN                SCLOUT                 CARD_SCL
                                                                               LTC4304
                    SCL                                            SCLIN                 READY
                                3.3V                               ENABLE        GND     FAULT
                                                               R15                         4304 F05
                                                               10k
                                            Figure 5. Typical Supply Independent Applications
                                                                                                                              4304fa
12


                                                                                                      LTC4304
APPLICATIONS INFORMATION
                                                                VCC
   SHELF MANAGER                                                            ATCA BOARD
                         C1                   R3   R4                               C2
              R1  R2                                                                                  R5  R6
                         0.01µF               2.7k 2.7k                             0.01µF
              10k 10k                                                                                 10k 10k
      VCC             ENABLE   VCC                                                         VCC ENABLE         VCC
     ShMC             SDAOUT         SDAIN                                        SDAIN        SDAOUT       IPMC
                             LTC4304                                                    LTC4304
                      SCLOUT         SCLIN                                        SCLIN        SCLOUT
                                                                IPM
                                                                BUS
                                                              (1 OF 2)                                          4304 F06
                                       Figure 6. Simpliﬁed ATCA IPMB Application
                                                                                                                         4304fa
                                                                                                                 13


LTC4304
PACKAGE DESCRIPTIO                                U
                                                                     DD Package
                                                          10-Lead Plastic DFN (3mm × 3mm)
                                                               (Reference LTC DWG # 05-08-1699)
                                                                                                                                      R = 0.115              0.38 0.10
                                                                                                                                            TYP
                                                                                                                                      6               10
                                                  0.675 0.05
3.50 0.05        1.65 0.05                                                                             3.00 0.10     1.65 0.10
       2.15 0.05 (2 SIDES)                                                                             (4 SIDES)     (2 SIDES)
                                                                         PIN 1
                                                      PACKAGE       TOP MARK
                                                      OUTLINE     (SEE NOTE 6)
                                                                                                                                                                (DD10) DFN 1103
                                                                                                                                      5               1
                0.25 0.05                                                0.200 REF                     0.75 0.05                                            0.25 0.05
                                           0.50                                                                                                            0.50 BSC
                                           BSC                                                                                            2.38 0.10
                               2.38 0.05                                                                                                  (2 SIDES)
                                                                                                               0.00 – 0.05
                               (2 SIDES)                                                                                         BOTTOM VIEW—EXPOSED PAD
              RECOMMENDED SOLDER PAD PITCH AND DIMENSIONS                    NOTE:
                                                                             1. DRAWING TO BE MADE A JEDEC PACKAGE OUTLINE M0-229 VARIATION OF (WEED-2).
                                                                                CHECK THE LTC WEBSITE DATA SHEET FOR CURRENT STATUS OF VARIATION ASSIGNMENT
                                                                             2. DRAWING NOT TO SCALE
                                                                             3. ALL DIMENSIONS ARE IN MILLIMETERS
                                                                             4. DIMENSIONS OF EXPOSED PAD ON BOTTOM OF PACKAGE DO NOT INCLUDE
                                                                                MOLD FLASH. MOLD FLASH, IF PRESENT, SHALL NOT EXCEED 0.15mm ON ANY SIDE
                                                                             5. EXPOSED PAD SHALL BE SOLDER PLATED
                                                                             6. SHADED AREA IS ONLY A REFERENCE FOR PIN 1 LOCATION ON THE
                                                                                TOP AND BOTTOM OF PACKAGE
                                                                                                                                                                     4304fa
14


                                                                                                                                                       LTC4304
PACKAGE DESCRIPTIO                 U
                                                              MS Package
                                                          10-Lead Plastic MSOP
                                                  (Reference LTC DWG # 05-08-1661)
                                                   0.889 0.127
                                                   (.035 .005)
                 5.23
                (.206)                              3.20 – 3.45
                 MIN                               (.126 – .136)
                                                                                     3.00 0.102
                                               0.50                                  (.118 .004)                                 0.497 0.076
          0.305 0.038
         (.0120 .0015)                       (.0197)                                   (NOTE 3)                                  (.0196 .003)
                                                                                                          10 9 8 7 6
              TYP                              BSC                                                                                   REF
                      RECOMMENDED SOLDER PAD LAYOUT
                                                                                       4.90 0.152                               3.00 0.102
                                            DETAIL “A”                                 (.193 .006)                              (.118 .004)
                              0.254                                                                                               (NOTE 4)
                              (.010)
                                                       0 – 6 TYP
               GAUGE PLANE
                                                                                                           1 2 3 4 5
                                                              0.53 0.152
                                                              (.021 .006)                        1.10                             0.86
                                                                                                (.043)                           (.034)
                                               DETAIL “A”                                                                         REF
                                                                                                 MAX
                 0.18
                (.007)
                                                                       SEATING
                                                                         PLANE        0.17 – 0.27                                     0.127 0.076
                                                                                     (.007 – .011)                                    (.005 .003)
                                                                                                           0.50
                                                                                         TYP                                          MSOP (MS) 0603
                NOTE:                                                                                    (.0197)
                1. DIMENSIONS IN MILLIMETER/(INCH)                                                         BSC
                2. DRAWING NOT TO SCALE
                3. DIMENSION DOES NOT INCLUDE MOLD FLASH, PROTRUSIONS OR GATE BURRS.
                   MOLD FLASH, PROTRUSIONS OR GATE BURRS SHALL NOT EXCEED 0.152mm (.006") PER SIDE
                4. DIMENSION DOES NOT INCLUDE INTERLEAD FLASH OR PROTRUSIONS.
                   INTERLEAD FLASH OR PROTRUSIONS SHALL NOT EXCEED 0.152mm (.006") PER SIDE
                5. LEAD COPLANARITY (BOTTOM OF LEADS AFTER FORMING) SHALL BE 0.102mm (.004") MAX
                                                                                                                                                            4304fa
                                                                                                                                                          15
                   Information furnished by Linear Technology Corporation is believed to be accurate and reliable.
                   However, no responsibility is assumed for its use. Linear Technology Corporation makes no represen-
                   tation that the interconnection of its circuits as described herein will not infringe on existing patent rights.


LTC4304
TYPICAL APPLICATIO                                U
                                        5V 3.3V
                                                                                                 C1
                                                                                                 0.01µF                          R4    R5
                                                                                                          VCC                    10k   10k
                                          R1      R2
                                          10k     10k                                                LTC4304
                                                                                         SCLIN                  SCLOUT
                         BACK_SCL                                                                                                        CARD_SCL
                                                                                         SDAIN                  SDAOUT
                         BACK_SDA                                                                                                        CARD_SDA
                                                                                         FAULT                   READY
                            FROM
                                                                                         ENABLE                    ACC
                  MICROPROCESSOR                                                                          GND
                                                                                   R3
                                                                                                                   4304 F07
                                                                                   10k
                                                        BACKPLANE    STAGGERED                        CARD
                                                        CONNECTOR    CONNECTOR
                                                        Figure 7. System with Active Connection Control
RELATED PARTS
PART NUMBER                   DESCRIPTION                                                COMMENTS
LTC1380/LTC1393               Single-Ended 8-Channel/Differential 4-Channel Analog       Low RON: 35Ω Single-Ended/70Ω Differential,
                              Mux with SMBus Interface                                   Expandable to 32 Single or 16 Differential Channels
LTC1427-50                    Micropower, 10-Bit Current Output DAC                      Precision 50µA ± 2.5% Tolerance Over Temperature,
                              with SMBus Interface                                       4 Selectable SMBus Addresses, DAC Powers up at Zero or Midscale
LTC1623                       Dual High Side Switch Controller with SMBus Interface      8 Selectable Addresses/16-Channel Capability
LTC1663                       SMBus Interface 10-Bit Rail-to-Rail Micropower DAC         DNL < 0.75LSB Max, 5-Lead SOT-23 Package
LTC1694/LTC1694-1             SMBus Accelerator                                          Improved SMBus/I2C Rise-Time,
                                                                                         Ensures Data Integrity with Multiple SMBus/I2C Devices
LT1786F                    SMBus Controlled CCFL Switching Regulator                     1.25A, 200kHz, Floating or Grounded Lamp Conﬁgurations
LTC1695                    SMBus/I2C Fan Speed Controller in ThinSOTTM                   0.75Ω PMOS 180mA Regulator, 6-Bit DAC
LTC1840                    Dual I2C Fan Speed Controller                                 Two 100µA 8-Bit DACs, Two Tach Inputs, Four GPI0
LTC4300A-1/LTC4300A-2      Hot Swappable 2-Wire Bus Buffer                               Isolates Backplane and Card Capacitances
LTC4300A-3                 Hot Swappable 2-Wire Bus Buffer                               Provides Level Shifting and Enable Functions
LTC4301                    Supply Independent Hot Swappable 2-Wire Bus Buffer            Supply Independent
LTC4301L                   Hot Swappable 2-Wire Bus Buffer                               Allows Bus Pull-Up Voltages as Low as 1V on SDAIN and SCLIN
                           with Low Voltage Level Translation
LTC4302-1/LTC4302-2        Addressable 2-Wire Bus Buffer                                 Address Expansion, GPIO, Software Controlled
LTC4303                    Hot Swappable 2-Wire Bus Buffer with Stuck                    Provides Automatic Clocking to Free Stuck I2C Busses
                           Bus Recovery
ThinSOT is a trademark of Linear Technology Corporation.
                                                                                                                                                               4304fa
                                                                                                                                       LT 0806 REV A • PRINTED IN USA
16 Linear Technology Corporation
             1630 McCarthy Blvd., Milpitas, CA 95035-7417
             (408) 432-1900   ●   FAX: (408) 434-0507 ● www.linear.com                                                        © LINEAR TECHNOLOGY CORPORATION 2005


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Analog Devices Inc.:
 LTC4304CDD#PBF LTC4304IMS#TRPBF LTC4304CMS#TRPBF LTC4304CDD#TR LTC4304IMS#PBF
LTC4304CMS#PBF LTC4304IDD#PBF LTC4304CMS LTC4304CMS#TR LTC4304IDD#TRPBF LTC4304IMS#TR
LTC4304CDD LTC4304IMS LTC4304IDD#TR LTC4304CDD#TRPBF LTC4304IDD
