                                                                                                      LTC4302-1/LTC4302-2
                                                                                                                Addressable
                                                                                                           2-Wire Bus Buffers
FEATURES                                                                                        DESCRIPTIO                 U
■   Bidirectional Buffer for SDA and SCL Lines                                                  The LTC®4302-1/LTC4302-2 addressable I2C bus and
    Increases Fanout                                                                            SMBus compatible bus buffers allow a peripheral board
■   Connect SDA and SCL Lines with 2-Wire Bus                                                   to be inserted and removed from a live backplane without
    Commands                                                                                    corruption of the bus. The LTC4302-1/LTC4302-2 main-
■   Prevents SDA and SCL Corruption During Live Board                                           tain electrical isolation between the backplane and periph-
    Insertion and Removal from Backplane                                                        eral board until their VCC supply is valid and a master
■   Compatible with I2CTM Standard Mode, I2C Fast                                               device on the backplane side addresses the LTC4302-1/
    Mode and SMBus Standards                                                                    LTC4302-2 and commands them to connect. The
■   Rise Time Accelerators on SDA, SCL Lines                                                    LTC4302-1/LTC4302-2’s ADDRESS pin provides 32 pos-
■   1V Precharge on SDA and SCL Lines                                                           sible addresses set by an external resistive divider be-
■   32 Unique Addresses from a Single ADDRESS Pin                                               tween VCC and GND. The LTC4302-1/LTC4302-2 work
■   Two General Purpose Inputs-Outputs (LTC4302-1)                                              with supply voltages ranging from 2.7V to 5.5V. The SDA
■   Translates Between 5V and 3.3V Systems                                                      and SCL inputs and outputs do not load the bus lines when
    (LTC4302-2)                                                                                 VCC is low.
■   Small 10-Pin MSOP Package                                                                   Rise time accelerator circuitry* allows for heavier capaci-
          U                                                                                     tive bus loading while still meeting system timing require-
APPLICATIO S                                                                                    ments. During insertion, the SDA and SCL lines are
                                                                                                precharged to 1V to minimize bus disturbances. Two
■   Live Board Insertion                                                                        general purpose input/output pins (GPIOs) on the
■   5V/3.3V Level Translator                                                                    LTC4302-1 can be configured as inputs, open-drain out-
■   Servers                                                                                     puts or push-pull outputs. The LTC4302-2 option replaces
■   Capacitance Buffer/Bus Extender                                                             one GPIO pin with a second supply voltage pin VCC2,
■   Nested Addressing                                                                           providing level shifting between systems with different
    , LTC and LT are registered trademarks of Linear Technology Corporation.
I2C is a trademark of Philips Electronics N.V.
                                                                                                supply voltages. The LTC4302-1/LTC4302-2 are available
*U.S. Patent No. 6,650,174                                                                      in a 10-pin MSOP package.
TYPICAL APPLICATIO                                   U
                                                                                                                           Input-Output Connection tPLH
2.7V
 to
5.5V                                                       C1
          R3     R4     R1        R5                       0.01µF              R6    R7    R8                R9
          10k    10k    1870Ω     10k      VCC                                 10k   10k   1k                1k
                                        LTC4302-1                                                                 OUTPUT                                        INPUT
                                 SDA                 CARD SDA                                                       SIDE                                        SIDE
                                     SDAIN SDAOUT
                                 SCL                 CARD SCL                                                       50pF                                        150pF
                                     SCLIN   SCLOUT
                                     CONN
                                                                                     LED
                                     ADDRESS GPIO2
                                                                                                 LED
                        R2                     GPIO1
                        2000Ω                                                                   4203 TA01a
                                        GND                                                                                                          4032 F10
                                                                                                                                     0.1µs/DIV
                                                                                                                                                      sn430212 430212fs
                                                                                                                                                                        1


LTC4302-1/LTC4302-2
ABSOLUTE                   W      AXI U    W W        RATI GS  U              (Note 1)
VCC to GND ................................................. –0.3V to 7V                 Operating Temperature Range
SDAIN, SCLIN, SDAOUT, SCLOUT,                                                              LTC4302C-1/LTC4302C-2 ...................... 0°C to 70°C
GPIO1, CONN, GPIO2 (LTC4302-1),                                                            LTC4302I-1/LTC4302I-2 .................... – 40°C to 85°C
VCC2 (LTC4302-2) ........................................ –0.3V to 7V                    Storage Temperature Range ................. – 65°C to 125°C
ADDRESS ....................................... –0.3V to VCC + 0.3V                      Lead Temperature (Soldering, 10 sec).................. 300°C
               U   W    U
PACKAGE/ORDER I FOR ATIO
                                                          ORDER PART                                                                         ORDER PART
                       TOP VIEW                            NUMBER                                         TOP VIEW                            NUMBER
         SDAIN    1                   10     SDAOUT                                         SDAIN    1                  10     SDAOUT
          SCLIN
          CONN
                  2
                  3
                                      9
                                      8
                                             SCLOUT
                                             VCC
                                                         LTC4302CMS-1                        SCLIN
                                                                                             CONN
                                                                                                     2
                                                                                                     3
                                                                                                                        9
                                                                                                                        8
                                                                                                                               SCLOUT
                                                                                                                               VCC
                                                                                                                                         LTC4302CMS-2
       ADDRESS    4                   7      GPIO2       LTC4302IMS-1                     ADDRESS    4                  7      VCC2      LTC4302IMS-2
           GND    5                   6      GPIO1                                            GND    5                  6      GPIO1
                       MS PACKAGE                     MS PART MARKING                                     MS PACKAGE                    MS PART MARKING
                  10-LEAD PLASTIC MSOP                                                               10-LEAD PLASTIC MSOP
              TJMAX = 125°C, θJA = 130°C/W                      LTYF                            TJMAX = 125°C, θJA = 130°C/W                   LTABY
                                                                LTYG                                                                           LTABZ
Consult LTC Marketing for parts specified with wider operating temperature ranges.
ELECTRICAL CHARACTERISTICS
The ● denotes the specifications which apply over the full operating temperature range, otherwise specifications are at TA = 25°C.
VCC = 2.7V to 5.5V (LTC4302-1), VCC = VCC2 = 2.7V to 5.5V (LTC4302-2) unless otherwise noted.
SYMBOL        PARAMETER                                         CONDITIONS                                                       MIN    TYP     MAX        UNITS
Power Supply/Start-Up
VCC           Positive Supply Voltage                           LTC4302-1                                                ●       2.7             5.5            V
VCC2          Card Side Supply Voltage                          LTC4302-2                                                ●       2.7             5.5            V
ICC           Supply Current                                    VSDAIN = 0V, VCC = 5.5V (Note 2) LTC4302-1               ●              5.9      8            mA
IVCC          VCC Supply Current                                VSDAIN = 0V, VCC = VCC2 = 5.5V                           ●              3.4      5            mA
                                                                (Note 2) LTC4302-2
IVCC2         VCC2 Supply Current                               VSDAIN = 0V, VCC = VCC2 = 5.5V                           ●              2.3      4            mA
                                                                (Note 2) LTC4302-2
VUVLOU        UVLO Upper Threshold                              VCC Rising                                               ●              2.5      2.7            V
VUVLOL        UVLO Lower Threshold                              VCC Falling                                                             2.35                    V
VUVLO2U       VCC2 UVLO Upper Threshold                         LTC4302-2                                                ●              2.5      2.7            V
VUVLO2L       VCC2 UVLO Lower Threshold                         LTC4302-2                                                               2.35                    V
VPRE          Precharge Voltage                                 SDA, SCL Floating                                        ●       0.8     1       1.2            V
VTHCONN       CONN Threshold Voltage                                                                                     ●       0.8    1.5      2.2            V
tPHL          CONN Delay, On-Off                                                                                                         60                    ns
tPLH          CONN Delay, Off-On                                                                                                         20                    ns
                                                                                                                                                 sn430212 430212fs
2


                                                                                                      LTC4302-1/LTC4302-2
 ELECTRICAL CHARACTERISTICS
The ● denotes the specifications which apply over the full operating temperature range, otherwise specifications are at TA = 25°C.
VCC = 2.7V to 5.5V (LTC4302-1), VCC = VCC2 = 2.7V to 5.5V (LTC4302-2) unless otherwise noted.
SYMBOL        PARAMETER                                      CONDITIONS                                                     MIN       TYP         MAX         UNITS
General Purpose I/Os
VLOW          I/O Logic Low Voltage                          ISINK = 10mA, VCC = 2.7V                                ●                0.36        0.8              V
VHIGH         I/O Logic High Voltage                         ISOURCE = 200µA, VCC = 2.7V                             ●       2.4                                   V
ILEAK         I/O Leakage Current                            VI/O = 0V to 5.5V (Note 3)                              ●                             ±5             µA
VTHRESH       Input Threshold Voltage                        Input Mode                                              ●       0.8       1.5        2.2              V
Rise Time Accelerators
IPULLUP,AC Transient Boosted Pull-Up Current                 Positive Transition on SDA, SCL,                        ●        1         2                        mA
                                                             Slew Rate = 0.8V/µs, VCC = 2.7V (Note 4)
Input-Output Connection
VOS           Output-Input Offset Voltage                    10k to VCC on SDA, SCL Pins (Note 5),                   ●        0       100         175            mV
CIN           Digital Input Capacitance                      (Note 9)                                                                              10             pF
VOL           Output Low Voltage                             SDA, SCL Pins, ISINK = 3mA                              ●        0                   0.4              V
ILEAK         Input Leakage Current                          SDA, SCL Pins, VCC = 0V to 5.5V                         ●                             ±5             µA
                                                             Connection Circuits Inactive
2-Wire Digital Interface Voltage Characteristics
VLTH          Logic Threshold Voltage                                                                                ●    0.3VCC     0.5VCC     0.7VCC             V
ILEAK         Digital Input Leakage                          VCC = 0V to 5.5V                                        ●                             ±5             µA
VOL           Digital Output Low Voltage                     IPULLUP = 3mA Into SDAIN Pin                            ●                            0.4              V
2-Wire Digital Interface Timing Characteristics (Note 6)
fI2C,MAX      I2C Operating Frequency                        (Note 9)                                                       400       600                        kHz
tBUF          Bus Free Time Between Stop and Start           (Note 9)                                                                 0.75        1.3             µs
              Condition
tHD,STA       Hold Time After (Repeated) Start Condition (Note 9)                                                                      45         100             ns
tSU,STA       Repeated Start Condition Setup Time            (Note 9)                                                                 –30           0             ns
tSU,STO       Stop Condition Setup Time                      (Note 9)                                                                 –30           0             ns
tHD,DATI      Data Hold Time Input                           (Note 9)                                                                 –25           0             ns
tHD,DATO      Data Hold Time Output                                                                                         300       600         900             ns
tSU,DAT       Data Setup Time                                (Note 9)                                                                  50         100             ns
tSP           Pulse Width of Spikes Suppressed by            (Note 9)                                                        50       150         250             ns
              the Input Filter
tf            Data Fall Time                                 (Notes 7, 8, 9)                                                20 +                  300             ns
                                                                                                                           0.1CB
Note 1: Absolute Maximum Ratings are those values beyond which the life            the pull-up resistor and VCC voltage is shown in the Typical Performance
of a device may be impaired.                                                       Characteristics section.
Note 2: The ICC tests are performed with the backplane-to-card connection          Note 6: The specifications in this section illustrate the LTC4302-1/
circuitry activated.                                                               LTC4302-2’s compatibility with the I2C Fast Mode, the I2C Standard Mode
Note 3: When the GPIOs are in open-drain output or input mode, the logic           and SMBus specifications. See the Timing Diagram on page 5 for
high voltage can be provided by a pull-up supply voltage ranging from              illustrations of the timing parameters.
2.2V to 5.5V, independent of the VCC voltage.                                      Note 7: CB = total capacitance of one bus line in pF.
Note 4: IPULLUP,AC varies with temperature and VCC voltage as shown in             Note 8: The digital interface circuit controls the data fall time only when
the Typical Performance Characteristics section.                                   acknowledging or transmitting zeros during a read operation. The input-
Note 5: The connection circuitry always regulates its output to a higher           output connection data and clock outputs meet the fall time specification
voltage than its input. The magnitude of this offset voltage as a function of      provided that the corresponding inputs meet the fall time specification.
                                                                                   Note 9: Guaranteed by design. Not subject to test.
                                                                                                                                                    sn430212 430212fs
                                                                                                                                                               3


LTC4302-1/LTC4302-2
TYPICAL PERFOR A CE CHARACTERISTICS                U W
(Specifications are at TA = 25°C unless otherwise noted.)
                                         ICC vs Temperature                                                   Input – Output tPHL vs Temperature
                                   6.1                                                                  100
                                                                                                                                     VCC = 2.7V
                                   5.9
                                                       VCC = 5.5V
                                   5.7                                                                   80
                                   5.5                                                                                               VCC = 3.3V
                                                                                                         60
                 ICC (mA)                                                             t PHL (ns)
                                   5.3
                                   5.1
                                                                                                         40
                                   4.9                                                                                               VCC = 5.5V
                                   4.7                 VCC = 2.7V
                                                                                                         20
                                   4.5                                                                            CIN = COUT = 100pF
                                                                                                                  RPULLUPIN = RPULLUPOUT = 10k
                                   4.3                                                                   0
                                             –40         25           85                                  –50         –25         0    25     50         75        100
                                                   TEMPERATURE (°C)                                                              TEMPERATURE (°C)
                                                                           4302 G01                                                                           4302 G02
                                         IPULLUPAC vs Temperature                                             SDA, SCL VOS
                                   12                                                                   300
                                                                                                                                                     VIN = 0V
                                   10                 VCC = 5V                                          250
                                    8                                                                   200
                  IPULLUPAC (mA)                                                      VOUT – VIN (mV)
                                    6                                                                   150
                                                                                                                         VCC = 5V
                                                      VCC = 3V
                                    4                                                                   100
                                                                                                                        VCC = 3.3V
                                    2                                                                    50
                                                      VCC = 2.7V
                                    0                                                                     0
                                     –50     –25    0    25     50    75        100                           0             10          20          30              40
                                                   TEMPERATURE (°C)                                                                RPULLUP (KΩ)
                                                                           4302 G03                                                                           4302 G04
                                                                                                                                                                         sn430212 430212fs
4


                                                                                                 LTC4302-1/LTC4302-2
   U      U
PI FU CTIO S              U
SDAIN (Pin 1): Serial Data Input. Connect this pin to the              GPIO1 (Pin 6): General Purpose Input/Output (GPIO1).
SDA bus on the backplane. Do not float.                                GPIO1 can be used as an input, an open-drain output or a
                                                                       push-pull output. The N-Channel MOSFET pulldown de-
SCLIN (Pin 2): Serial Clock Input. Connect this pin to the
                                                                       vice is capable of driving LEDs. When used in input or
SCL bus on the backplane. Do not float.
                                                                       open-drain output mode, the I/O pin can be pulled up to a
CONN (Pin 3): Register Reset and Connection Sense                      supply voltage ranging from 2.2V to 5.5V independent of
Input. Driving this pin low resets the registers to their              the VCC voltage.
default state: GPIOs in output open-drain high impedance
                                                                       GPIO2 (Pin 7, LTC4302-1): General Purpose Input/Out-
mode, rise time accelerators disabled and the input-to-
                                                                       put. GPIO2 can be used as an input, an open-drain output,
output connection disabled. Communication with the
                                                                       or a push-pull output. The N-Channel MOSFET pulldown
LTC4302-1/LTC4302-2 is disabled when CONN is low.
                                                                       device is capable of driving LED’s. When used in input or
When CONN is brought back high, the registers remain in
                                                                       open-drain output mode, the I/O pin can be pulled up to a
the default state and communication is enabled.
                                                                       supply voltage ranging from 2.2V to 5.5V independent of
ADDRESS (Pin 4): 2-Wire Address Programming Input.                     the VCC voltage.
The 2-wire address is programmed by connecting
                                                                       VCC2 (Pin 7, LTC4302-2): Card Side Supply Voltage. This
ADDRESS to a resistive divider between VCC and ground.
                                                                       pin is a power supply pin for the card side busses. Connect
The voltage on ADDRESS is converted by an internal
                                                                       VCC2 to the card’s VCC and connect a bypass capacitor of
analog-to-digital (A/D) converter into a 5-bit digital word.
                                                                       at least 0.01µF directly between VCC2 and GND for best
This resulting digital code represents the least significant
                                                                       results.
five bits of the 2-wire address. 1% resistors must be used
to ensure accurate address programming. 32 unique                      VCC (Pin 8): Main Input Power Supply from Backplane.
addresses are possible. See Table 1 for 1% resistor values             Connect a bypass capacitor of at least 0.01µF directly
and corresponding addresses. Care must also be taken to                between VCC and GND for best results.
minimize capacitance on ADDRESS. Resistors must be                     SCLOUT (Pin 9): Serial Clock Output. Connect this pin to
placed close to the LTC4302-1/LTC4302-2’s VCC, GND                     the SCL bus on the I/O card. Do not float.
and ADDRESS pins.
                                                                       SDAOUT (Pin 10): Serial Data Output. Connect this pin to
GND (Pin 5): Ground. Connect this pin to a ground plane                the SDA bus on the I/O card. Do not float.
for best results.
  WU         W
TI I G DIAGRA
               SDA
                                  tSU, DAT                             tSU, STA            tSP
                                                  tHD, DATO,                                                             tBUF
                                                  tHD, DATI                       tHD, STA        tSU, STO
                                                                                         tSP
               SCL                                                                                                         4302 TD01
               tHD, STA
                                             tf
                       START                                   REPEATED START                                  STOP                START
                     CONDITION                                   CONDITION                                   CONDITION           CONDITION
                                                                                                                                             sn430212 430212fs
                                                                                                                                                        5


LTC4302-1/LTC4302-2
BLOCK DIAGRA S                     W
                                                LTC4302-1 Addressable 2-Wire Bus Buffer
                                              2mA                                                               2mA
                              SLEW RATE                                                                               SLEW RATE
                INACC                                                                                                                   OUTACC
                              DETECTOR                                                                                DETECTOR
        SDAIN                                                        BACKPLANE-TO-CARD                                                    SDAOUT
    1                                                                                                                                                   10
                                                                        CONNECTION
                                                                                                                      UVLO
                                                                                                                             100k
                                                                                                                                        SDAIN
                                                                                                                             100k
                                                                                                                                        SDAOUT
                                                                                                        1V
                                                                                                                             100k
                                                                                                    PRECHARGE                           SCLIN
                                                                                                                             100k
                                                                                                                                        SCLOUT
                                              2mA                                                               2mA
                              SLEW RATE                                                                               SLEW RATE
                INACC                                                                                                                   OUTACC
                              DETECTOR                                                                                DETECTOR
        SCLIN                                                        BACKPLANE-TO-CARD                                                    SCLOUT
    2                                                                                                                                                       9
                                                                        CONNECTION
                               +
                                             100ns GLITCH
                                                FILTER
          0.55VCC
          0.45VCC              –                                                           CONNECT
              SDAIN            +
                                             100ns GLITCH                                                                         VCC
                                                FILTER                                   OUT CFG2
                               –
                                               2pF
                                                            VCC
                                                              RLIM                                                                         GPIO2
                                                              50k           2-WIRE       DIR2                                                               7
                                                                            DIGITAL      DATA IN2
                                                                          INTERFACE
                                            5-BIT
        ADDRESS                              A/D
    4
                                          ADDRESS
                                          DECODER                                                                                 VCC
                                                        ADDRESS                          OUT CFG1
        VCC                                            FIXED BITS
    8                          +                             “11”
                                             1µs     UVLO
                                           FILTER
                      2.5V/
                      2.35V
                               –                                                                                                           GPIO1
                                                                                         DIR1                                                               6
        CONN                                                                             DATA IN1
    3
                                                                                                                                             GND
                                                                                         INACC                                                              5
                                                                                         OUTACC
                                                                                                                                                 4302 BD1
                                                                                                                                          sn430212 430212fs
6


                                                                                                    LTC4302-1/LTC4302-2
BLOCK DIAGRA S                  W
                                                    LTC4302-2 Addressable 2-Wire Bus Buffer
                                            VCC                                                                    VCC2
                                                   2mA                                                                    2mA
                           SLEW RATE                                                                                            SLEW RATE
               INACC                                                                                                                               OUTACC
                           DETECTOR                                                                                             DETECTOR
       SDAIN                                                               BACKPLANE-TO-CARD                                                         SDAOUT
   1                                                                                                                                                           10
                                                                              CONNECTION
                                                             CONNECT                            CONNECT
                                                                                                            VCC1     VCC2
                                                                                                 UVLO1                           UVLO2
                                                                                         100k                                               100k
                                                                              SDAIN                                                                SDAOUT
                                                                                                                 1V
                                                                                         100k                                               100k
                                                                               SCLIN                         PRECHARGE                             SCLOUT
                                            VCC                                                                    VCC2
                                                   2mA                                                                    2mA
                           SLEW RATE                                                                                            SLEW RATE
               INACC                                                                                                                               OUTACC
                           DETECTOR                                                                                             DETECTOR
       SCLIN                                                               BACKPLANE-TO-CARD                                                         SCLOUT
   2                                                                                                                                                               9
                                                                              CONNECTION
                                                     CONNECT                                        CONNECT
                            +
                                                  100ns GLITCH
                                                     FILTER
         0.55VCC
         0.45VCC            –                                                                      CONNECT
             SDAIN          +
                                                  100ns GLITCH                                                                              VCC
                                                     FILTER                                      OUT CFG1
                            –
                                                     2pF
                                                                  VCC
                                                                     50k                                                                              GPIO1
                                                                                  2-WIRE         DIR1                                                              6
                                                                                  DIGITAL        DATA IN1
                                                                                INTERFACE
                                              5-BIT
       ADDRESS                                 A/D
   4
                                            ADDRESS
                                            DECODER
                                                               ADDRESS
       VCC                                                    FIXED BITS
   8                   +                                            “11”                                                                                GND
                                         1µs               UVLO1                                INACC                                                              5
                                       FILTER                                                   OUTACC
       2.5V/                                      UVLO2
       2.35V
                       –
       VCC2
   7                   +
                                         1µs
                                       FILTER
                       –
       CONN
   3
                                                                                                                                                        4302 BD2
                                                                                                                                                        sn430212 430212fs
                                                                                                                                                                       7


LTC4302-1/LTC4302-2
                    U
OPERATIO
Live Insertion and Start-Up                                  serial communication busses; however, calling them two
The LTC4302 allows I/O card insertion into a live back-      wire is not strictly accurate, as there is an implied third
                                                             wire which is the ground line. Large ground drops or
plane without corruption of the data and clock busses
                                                             spikes between the grounds of different parts on the bus
(SDA and SCL). In its main application, the LTC4302
resides on the edge of a peripheral card with the SCLOUT     can interrupt or disrupt communications, as the signals on
                                                             the two wires are both inherently referenced to a ground
pin connected to the card’s SCL bus and the SDAOUT
                                                             which is expected to be common to all parts on the bus.
connected to the card’s SDA bus. If a card is plugged into
                                                             Both bus types have one data line and one clock line which
a live backplane via a staggered connector, ground and
                                                             are externally pulled to a high voltage when they are not
VCC make connection first. The LTC4302 starts in an
                                                             being controlled by a device on the bus. The devices on the
undervoltage lockout (UVLO) state, ignoring any activity
                                                             bus can only pull the data and clock lines low, which makes
on the SDA and SCL pins until VCC rises above 2.5V
(typical). This ensures that the LTC4302 does not try to     it simple to detect if more than one device is trying to
function until it has sufficient bias voltage.               control the bus; eventually, a device will release a line and
                                                             it will not pull high because another device is still holding
During this time, the 1V precharge circuitry is also active  it low. Pullups for the data and clock lines are usually
and forces 1V through 100k nominal resistors to the SDA      provided by external discrete resistors, but external cur-
and SCL pins. The concept of initializing the SDA and SCL    rent sources can also be used. Since there are no dedi-
pins before they make contact with a live backplane is       cated lines to use to tell a given device if another device is
described in the CompactPCITM specification. Because the     trying to communicate with it, each device must have a
I/O card is being plugged into a live backplane, the voltage unique address to which it will respond. The first part of
on the SDA and SCL busses may be anywhere between 0V         any communication is to send out an address on the bus
and VCC. Precharging the SCL and SDA pins to 1V mini-        and wait to see if another device responds to it. After a
mizes the worst-case voltage differential these pins will    response is detected, meaningful data can be exchanged
see at the moment of connection, therefore minimizing the    between the parts.
amount of disturbance caused by the I/O card. The
LTC4302-1 precharges all four SDA and SCL pins when-         Typically, one device controls the clock line at least most
ever the VCC voltage is below its UVLO threshold voltage.    of the time and normally sends data to the other parts and
The LTC4302-2 precharges SDAIN and SCLIN whenever            polls them to send data back. This device is called the
VCC is below its UVLO threshold and precharges SDAOUT        master. There can be more than one master, since there is
and SCLOUT whenever VCC2 is below its UVLO threshold.        an effective protocol to resolve bus contentions, and non-
                                                             master (slave) devices can also control the clock to delay
After ground and VCC connect, SDAIN and SCLIN make           rising edges to give themselves more time to complete
connection with the backplane SDA and SCL lines. Once        calculations or communications (clock stretching). Slave
the part comes out of UVLO, the precharge circuitry is shut  devices need to control the data line to acknowledge
off. Finally, the CONN pin connects to the short CONN pin    communications from the master. Some devices need to
on the backplane, the 2-wire bus digital interface circuitry send data back to the master; they will be in control of the
is activated and a master on the bus can write to or read    data line while they are doing so. Many slave devices have
from the LTC4302.                                            no need to stretch the clock signal, which is the case with
                                                             the LTC4302.
General I2C Bus/SMBus Description
                                                             Data is exchanged in the form of bytes, which are 8-bit
The LTC4302 is designed to be compatible with the I2C and    packets. Any byte needs to be acknowledged by the slave
SMBus two wire bus systems. I2C Bus and SMBus are            or master (data line pulled low) or not acknowledged by
reasonably similar examples of two wire, bidirectional,      the master (data line left high), so communications are
                                                             CompactPCI is a trademark of the PCI Industrial Computer Manufacturers
                                                             Group.
                                                                                                                      sn430212 430212fs
8


                                                                                    LTC4302-1/LTC4302-2
                    U
OPERATIO
broken up into 9-bit segments, one byte followed by one             byte of information was received. The acknowledge re-
bit for acknowledging. For example, sending out an ad-              lated clock pulse is generated by the master. The transmit-
dress consists of 7-bits of device address, 1-bit that              ter master releases the SDA line (HIGH) during the ac-
signals whether a read or write operation will be per-              knowledge clock pulse. The slave-receiver must pull down
formed and then 1 more bit to allow the slave to acknowl-           the SDA line during the acknowledge clock pulse so that it
edge. There is no theoretical limit to how many total bytes         remains stable LOW during the HIGH period of this clock
can be exchanged in a given transmission.                           pulse.
I2C and SMBus are very similar specifications, SMBus                When a slave-receiver doesn’t acknowledge the slave
having been derived from I2C. In general, SMBus is                  address (for example, it’s unable to receive because it’s
targeted to low power devices (particularly battery pow-            performing a real-time function), the data line must be left
ered ones) and emphasizes low power consumption while               HIGH by the slave. The master can then generate a STOP
I2C is targeted to higher speed systems where the power             condition to abort the transfer.
consumption of the bus is not as critical. I2C has three
                                                                    If a slave receiver does acknowledge the slave address but
different specifications for three different maximum speeds,
                                                                    some time later in the transfer cannot receive any more
these being standard mode (100kHz max), fast mode
                                                                    data bytes, the master must again abort the transfer. This
(400kHz max), and Hs mode (3.4MHz max). Standard and
                                                                    is indicated by the slave not generating the acknowledge
fast mode are not radically different, but Hs mode is very
                                                                    on the first byte to follow. The slave leaves the data line
different from a hardware and software perspective and
                                                                    HIGH and the master generates the STOP condition. When
requires an initiating command at standard or fast speed
                                                                    the master is reading data from the slave, the master
before data can start transferring at Hs speed. SMBus
                                                                    acknowledges each byte read except for the last byte read.
simply specifies a 100kHz maximum speed.
                                                                    The master signals a not acknowledge when no other data
The START and STOP Conditions                                       is to be read and carries out the STOP condition.
When the bus is not in use, both SCL and SDA must be                Address Byte and Setting the LTC4302’s Address
high. A bus master signals the beginning of a transmission
                                                                    The LTC4302’s address is set by connecting ADDRESS to
with a START condition by transitioning SDA from high to
                                                                    a resistive divider between VCC and ground. The voltage on
low while SCL is high. When the master has finished                 ADDRESS is converted into a 5-bit digital word by an A/D
communicating with the slave, it issues a STOP condition            converter, as shown in Figure 1. This 5-bit word sets the
by transitioning SDA from low to high while SCL is high.            5 LSB’s of the LTC4302’s address; its two MSB’s are
The bus is then free for another transmission.                      always “11”. Using 1% resistors, the voltage at ADDRESS
                                                                    is set 0.5LSB away from each code transition. For ex-
Acknowledge
                                                                    ample, with VCC=5V, 1LSB=5V/32 codes = 156.25mV/
The acknowledge signal is used for handshaking between              code. To set an address of 00, set ADDRESS to 0V +
the master and the slave. An acknowledge (LOW active)               0.5LSB = 78.125mV.
generated by the slave lets the master know that the latest
                                       VCC
                                     R1
                                           ADDRESS                                           5 WIRE
                                              4                               5-BIT
                                                                               A/D
                                     R2
                                                                                    4302 F01
                                                 Figure 1. Address Compare Circuitry
                                                                                                                   sn430212 430212fs
                                                                                                                              9


LTC4302-1/LTC4302-2
                     U
OPERATIO
Table 1. Suggested ADDRESS 1% Resistor Values
(Refer to Figure 1 for R1 and R2)
ADDRESS        R1(TOP)         R2(BOTTOM)   5V IDEAL      ALLOWED ADDRESS             3.3V IDEAL     ALLOWED ADDRESS
CODE          RESISTOR         RESISTOR     VOLTAGE        VOLTAGE RANGE               VOLTAGE         VOLTAGE RANGE
00              8660              137       0.078125        0.076 to 0.079             0.051563         0.050 to 0.052
01              2800              137       0.234375        0.229 to 0.238             0.154688         0.151 to 0.157
02              1180              100       0.390625        0.383 to 0.398             0.257813         0.253 to 0.263
03              1370              169       0.546875        0.539 to 0.559             0.360938         0.356 to 0.369
04              1070              174       0.703125        0.687 to 0.711             0.464063         0.454 to 0.470
05              1070              221       0.859375        0.842 to 0.870             0.567188         0.556 to 0.574
06              4120              1050      1.015625        0.999 to 1.032             0.670313         0.660 to 0.681
07              3320              1020      1.171875        1.157 to 1.193             0.773438         0.764 to 0.788
08              3160              1150      1.328125        1.315 to 1.354             0.876563         0.868 to 0.893
09              6490              2740      1.484375        1.464 to 1.505             0.979688         0.966 to 0.993
10              2150              1050      1.640625        1.619 to 1.663             1.082813         1.068 to 1.097
11              2050              1150      1.796875        1.774 to 1.820             1.185938         1.171 to 1.201
12              2150              1370      1.953125        1.922 to 1.970             1.289063         1.269 to 1.300
13              1960              1430      2.109375        2.085 to 2.134             1.392188         1.376 to 1.408
14              2100              1740      2.265625        2.241 to 2.290             1.495313         1.479 to 1.512
15              2000              1870      2.421875        2.391 to 2.441             1.598438         1.578 to 1.611
16              1870              2000      2.578125        2.559 to 2.609             1.701563         1.689 to 1.722
17              1740              2100      2.734375        2.710 to 2.759             1.804688         1.788 to 1.821
18              1430              1960      2.890625        2.866 to 2.915             1.907813         1.892 to 1.924
19              1370              2150      3.046875        3.030 to 3.078             2.010938         2.000 to 2.031
20              1150              2050      3.203125        3.180 to 3.226             2.114063         2.099 to 2.129
21              1050              2150      3.359375        3.337 to 3.381             2.217188         2.203 to 2.232
22              2740              6490      3.515625        3.495 to 3.537             2.320313         2.307 to 2.334
23              1150              3160      3.671875        3.646 to 3.685             2.423438         2.407 to 2.432
24              1020              3320      3.838125        3.807 to 3.843             2.526563         2.512 to 2.536
25              1050              4120      3.984375        3.968 to 4.001             2.629688         2.619 to 2.640
26               221              1070      4.140625        4.130 to 4.158             2.732813         2.726 to 2.744
27               174              1070      4.296875        4.289 to 4.313             2.835938         2.830 to 2.846
28               169              1370      4.453125        4.441 to 4.461             2.939063         2.931 to 2.944
29               100              1180      4.609375        4.602 to 4.617             3.042188         3.037 to 3.047
30               137              2800      4.765625        4.762 to 4.771             3.145313         3.143 to 3.149
31               137              8660      4.921875        4.921 to 4.924             3.248438         3.248 to 3.250
Select standard 1% tolerance resistor values that most       In two-wire bus systems, the master issues the Address
closely match the ideal resistor values. Table 1 shows       Byte immediately following a Start Bit. The first seven bits
recommended values for each of the code segments. For        contain the address of the slave device being targeted by
code 00, RTOP=8660Ω, RBOTTOM=137Ω. This yields a             the master. If the first two MSB’s are 1’s, and the next 5 bits
voltage of 77.87mV. Resistors must be placed close to the    match the output of the LTC4302’s 5-bit address A/D, an
LTC4302’s VCC, GND and ADDRESS pins. Care must also          address match occurs, and the LTC4302 acknowledges
be taken to minimize capacitance on ADDRESS.                 the Address Byte and continues communicating with the
                                                                                                                sn430212 430212fs
10


                                                                                          LTC4302-1/LTC4302-2
                     U
OPERATIO
master. The 8th bit of the Address Byte is the Read/Write               Table 2. Register 1 Definition
bit (R/W) and determines whether the master is writing to                   BIT         NAME        TYPE      FUNCTION
or reading from the slave. Figure 2 shows a timing diagram               7 (MSB) CONNECT Read/Write Backplane-to-Card Connection;
of the Start Bit and Address Byte required for both reading                                                   0 = Disconnected, 1 = Connected
and writing the LTC4302.                                                     6        DATA IN2 Read/Write Logic State of Input Signal to GPIO2
                                                                                                              Block
Programmable Features                                                        5        DATA IN1 Read/Write Logic State of Input Signal to GPIO1
                                                                                                              Block
The two-wire bus can be used to connect and disconnect                       4         DATA2     Read Only Logic State of GPIO2 Pin
the card and backplane SDA and SCL busses, enable and                        3         DATA1     Read Only Logic State of GPIO1 Pin
disable the rise time accelerators on either or both the                     2           NA      Read Only Never Used, Always 0
backplane and card sides, and configure and write to the                     1           NA      Read Only Never Used, Always 0
two GPIO pins (only one GPIO for the LTC4302-2). The bits                    0           NA      Read Only Never Used, Always 0
that control these features are stored in two registers. For            Default State (MSB First): 011DD000
ease of software coding, the bits that are expected to                  Note: The second and third bits of the data byte are used to write the data
change more frequently are stored in the first register. In             value of the two GPIOs. During a write operation, the five read only bits are
addition, the bus can be used to read back the logic states             ignored. During a read operation, bits 7 to 3 will be shifted onto the data
                                                                        bus, followed by three 0s. Also note that DATA2 and DATA IN2 are
of the control bits. The maximum SCL frequency is 400kHz.               meaningless for the LTC4302-2 because there is no GPIO2 pin for that
                                                                        option.
Writing to the LTC4302
The LTC4302 can be written using three different formats,               card two-wire busses. The next two bits are used to write
which are shown in Figures 3, 5 and 6. Each format begins               logic values to the two GPIO pins. Since the LTC4302-2
with a Start Bit, followed by the Address Byte as discussed             has only one GPIO pin, bit “DATA IN1” controls its logic
above. The procedure for writing one data byte is given by              value and bit “DATA IN2” is ignored. The 5 LSBs are not
the SMBus Send Byte protocol, illustrated in Figure 3. The              used in Write operations.
bits of the Data Byte are stored in the LTC4302’s Register              The LTC4302 can be written with two data bytes by using
1. Table 2 defines the functions of these control bits. The             the format shown in Figure 5. The Address Byte and first
MSB controls the connection between the backplane and                   Data Byte are exactly the same as they are for the Send Byte
          SDA                a6 - a0                            b7 - b0                            b7 - b0
          SCL                 1-7          8          9      1-7          8          9        1-7           8         9
                     S                                                                                                              P
                   START    ADDRESS       R/W       ACK           DATA              ACK             DATA            ACK           STOP
                 CONDITION                                                                                                     CONDITION
                                                                                                                                    4302 F02
                                               Figure 2. Data Transfer Over I2C or SMBus
                                       1          7        1      1            8           1      1
                                     START    11 a4 - a0  WR     ACK        d7 - d0       ACK   STOP
                                               SLAVE              S          DATA          S
                                              ADDRESS      0      0          BYTE          0
                                                                                                  4302 F03
                                       Figure 3. Writing One Byte Using Send Byte Protocol
                                                                                                                                        sn430212 430212fs
                                                                                                                                              11


LTC4302-1/LTC4302-2
                       U
OPERATIO
Table 3. Register 2 Definition                                                                                                    VCC
    BIT       NAME         TYPE       FUNCTION
                                                                                        OUT CFG2
 7 (MSB)      DIR2      Read/Write GPIO2 Mode; 0 = Output, 1 = Input*
     6        DIR1      Read/Write GPIO1 Mode; 0 = Output, 1 = Input
                                                                                                                                                    GPIO2
     5     OUT CFG2 Read/Write GPIO2 Output Mode; 0 = Open Drain,                                                                                          7
                                      1 = Push-Pull†*                                        DIR2
                                                                                         DATA IN2
     4     OUT CFG1 Read/Write GPIO1 Output Mode; 0 = Open Drain,
                                      1 = Push-Pull†
     3      OUTACC      Read/Write Card Side Rise Time Accelerator
                                      Contol; 0 = Disabled, 1 = Active                                                            VCC
     2       INACC      Read/Write Backplane Side Rise Time Accelerator                 OUT CFG1
                                      Control; 0 = Disabled, 1 = Active
     1         NA       Read Only      Never Used, Always 1
     0         NA       Read Only      Never Used, Always 1                                                                                         GPIO1
                                                                                                                                                           6
                                                                                             DIR1
Default State (MSB First): 00000011                                                      DATA IN1
†OUT CFG1 has no effect when DIR1 = 1; OUT CFG2 has no effect when
                                                                                                                                      4302 F04
DIR2 = 1.
*DIR2 and OUT CFG2 apply only to the LTC4302-1; there is no GPIO2 for
the LTC4302-2, so these bits are meaningless in this case.                                   Figure 4. GPIO Circuits and Their Control Bits
                                                                                 that control their operation. The 2 LSB’s are not used in
protocol. After the first Data Byte, the master transmits a
                                                                                 Write operations.
second Data Byte, followed by a Stop Bit. The bits of the
second Data Byte are stored in the LTC4302’s Register 2.                         The LTC4302 can also be written with two bytes using the
Table␣ 3␣ defines the functions of these control bits. The                       SMBus Write Word protocol, as shown in Figure 6. The
first 4 MSB’s control the input/output configurations of the                     LTC4302 treats the first two bytes after the Address Byte
two GPIO pins. The next 2 bits control the enabling/                             (which the Write Word protocol refers to as “Command
disabling of the card side and backplane side rise time                          Code” and “Data Byte Low”) as the two Data Bytes, and
accelerators respectively. Since the LTC4302 -2 has only                         stores these bytes in Registers 1 and 2 respectively. After
one GPIO pin, “DIR1” and “OUT CFG1” control its configu-                         the master transmits the “Data Byte High” byte, the
ration, and “DIR2” and “OUT CFG2” are ignored. Figure 4                          LTC4302 acknowledges reception of the byte but ignores
shows a schematic of the two GPIOs and the register bits                         the data contained therein.
                                   1           7          1      1          8          1             8         1       1
                                 START     11 a4 - a0    WR     ACK      d7 - d0      ACK         d7 - d0    ACK     STOP
                                            SLAVE                S        DATA         S           DATA        S
                                          ADDRESS         0      0       BYTE 1        0          BYTE 2       0
                                                                                                                       4302 F05
                                                               Figure 5. Writing Two Bytes
                      1          7           1        1          8          1           8            1         8                1          1
                   START     11 a4 - a0     WR       ACK      d7 - d0      ACK       d7 - d0        ACK    XXXXXXXX           ACK       STOP
                              SLAVE                   S      COMMAND        S         DATA           S       DATA               S
                             ADDRESS         0        0        CODE         0       BYTE LOW         0     BYTE HIGH            0
                                                                                                                                           4302 F06
                                           Figure 6. Writing Two Bytes Using SMBus Write Word Protocol
                                                                                                                                                     sn430212 430212fs
12


                                                                                               LTC4302-1/LTC4302-2
                     U
OPERATIO
Data Transfer Timing for Write Commands                                       the first 5 bits contain useful information to be read. The
In order to help ensure that bad data is not written into the                 two added bits indicate the logic state of the GPIO pins.
                                                                              The 3 LSBs are not used and are always “000.”
LTC4302, data from a write command is only stored after
a valid Stop Bit has been performed. If a Start Bit occurs                    The format for reading two data bytes is shown in Figure
after new data bytes have been written but before a Stop                      8. The Address Byte and first Data Byte are exactly the
Bit is issued, the new data bytes are lost. In this case, the                 same as they are for the Receive Byte protocol. After the
master must readdress the part, rewrite the data bytes and                    first Data Byte, the master transmits an Acknowledge
issue a Stop Bit before issuing any Start Bits to properly                    indicating that it wants to read another data byte. The bits
update the registers. Also note that driving the CONN pin                     contained in Register 2 are then written onto the bus as
low asynchronously resets the registers to their default                      “Data Byte 2.” Table 3 defines the functions of these
states, as specified in Tables 2 and 3. When CONN is driven                   control bits. The 2 LSB’s are not used and are always “11.”
back high, the registers remain in the default state.                         The master signals a not acknowledge after the last
                                                                              byte read.
Reading from the LTC4302
                                                                              The SMBus Read Word protocol can also be used to read
The LTC4302 can be read using three different formats, as                     two bytes from the LTC4302, as shown in Figure 9. Note
shown in Figures 7 through 9. Each format begins with a                       that the first Address Byte and the Command Code consti-
Start Bit, followed by the Address Byte, as discussed                         tute a write operation. However, because these bytes are
above. The procedure for reading one data byte is given by                    followed immediately by a Start Bit and not a Stop Bit, the
the SMBus Receive Byte protocol, illustrated in Figure 7.                     data contained in the Command Code is not written into
The bits of the Data Byte are read from the LTC4302’s                         the LTC4302. After the second Start Bit, the format is
Register 1. Table 2 defines the functions of these control                    exactly the same as shown in Figure 8.
bits. While only the first 3 bits of Register 1 can be written,
                                           1        7           1       1             8             1         1
                                        START   11 a4 - a0     RD     ACK        d7 - d3 000      ACK       STOP
                                                  SLAVE                 S           DATA            M
                                               ADDRESS          1       0           BYTE            1
                                                                                                              4302 F07
                                        Figure 7. Reading One Byte Using Receive Byte Protocol
                              1         7         1        1           8              1             8                  1    1
                            START   11 a4 - a0   RD      ACK      d7 - d3 000       ACK        d7 - d2 11           ACK   STOP
                                     SLAVE                 S         DATA             M          DATA                 M
                                    ADDRESS       1        0        BYTE 1            0         BYTE 2                 1
                                                                                                                            4302 F08
                                                         Figure 8. Reading Two Bytes
    1         7       1     1           8           1        1          7          1         1             8              1               8        1        1
  START   11 a4 - a0 WR    ACK      XXXXXXXX       ACK     START   11 a4 - a0     RD       ACK        d7 - d3 000        ACK         d7 - d2 11   ACK     STOP
           SLAVE            S      COMMAND          S               SLAVE                    S           DATA             M            DATA        M
          ADDRESS     0     0         CODE          0              ADDRESS         1         0          BYTE 1            0           BYTE 2       1
                                                                                                                                                           4302 F09
                                    Figure 9. Reading Two Bytes Using SMBus Read Word Protocol
                                                                                                                                                sn430212 430212fs
                                                                                                                                                      13


LTC4302-1/LTC4302-2
                   U
OPERATIO
Connection Circuitry                                          Propagation Delays
Masters on the SDAIN and SCLIN busses can address the         During a rising edge, the rise time on each side is deter-
LTC4302 and command it to connect SDAIN to SDAOUT             mined by the combined pull-up current of the LTC4302
and SCLIN to SCLOUT as described in the “Write One or         boost current and the bus resistor and the equivalent
Two Bytes” section. Once this connection occurs, masters      capacitance on the line. If the pull-up currents are the
on the card are then able to read from and write to the part  same, a difference in rise time occurs that is directly
via the SDAOUT and SCLOUT pins. However, whenever             proportional to the difference in capacitance between the
the two sides are disconnected, the command to recon-         two sides. This effect is displayed in Figure 10 for VCC =
nect must come from SDAIN and SCLIN.                          3.3V and a 10k pull-up resistor on each side (50pF on one
Once the connection circuitry is activated, the functional-   side and 150pF on the other). Since the output side has
ity of the SDAIN and SDAOUT pins is identical. A low          less capacitance than the input, it rises faster and the
forced on either pin at any time results in both pin voltages effective tPLH is negative.
being low. Masters must pull the bus voltages below 0.4V
worst-case with respect to the LTC4302’s ground pin to
ensure proper operation. SDAIN and SDAOUT enter a logic
high state only when all devices on both SDAIN and
SDAOUT busses force a high. The same is true for SCLIN                 OUTPUT
                                                                          SIDE
                                                                                                                      INPUT
                                                                                                                      SIDE
and SCLOUT. This important feature ensures that clock                     50pF                                        150pF
stretching, clock arbitration and the acknowledge protocol
always work, regardless of how the devices in the system
are connected to the LTC4302.                                                                                4032 F10
Another key feature of the connection circuitry is that it                   Figure 10. Input-Output Connection tPLH
provides bidirectional buffering, keeping the backplane
and the card capacitances isolated. Because of this isola-
tion, the waveforms on the backplane busses look slightly
different from the corresponding card bus waveforms.
Input-to-Output Offset Voltage                                          INPUT                                         OUTPUT
                                                                          SIDE                                        SIDE
When a logic low voltage, VLOW1 is driven on any of the                  150pF                                        50pF
LTC4302’s data or clock pins, the LTC4302 regulates the
voltage on the other side (VLOW2) to a slightly higher
voltage, as directed by the following equation:                                                              4032 F11
    VLOW2 (typical) = VLOW1 + 75mV + (VBUS/R) • 70Ω                         Figure 11. Input-Output Connection tPHL
where R is the bus pull-up resistance on VLOW2 in ohms
and VBUS is the supply voltage to which R is connected.       There is a finite propagation delay, tPHL, through the
For example, if a device is forcing SDAOUT to 10mV, and       connection circuitry for falling waveforms. Figure 11 shows
if VCC = 3.3V and the pull-up resistor R on SDAIN is 10k,     the falling waveforms for the same VCC, pull-up resistors
then the voltage on SDAIN = 10mV + 75mV + (3.3V/10k)          and equivalent capacitance conditions used in Figure 10.
• 70Ω = 108mV (typical). See the Typical Performance          An external N-Channel MOSFET device pulls down the
Characteristics section for curves showing the offset         voltage on the side with 150pF capacitance; the LTC4302
voltage as a function of VCC and R.
                                                                                                                       sn430212 430212fs
14


                                                                           LTC4302-1/LTC4302-2
                   U
OPERATIO
pulls down the voltage on the 50pF side with a delay of      system rise time requirements. A master on the bus may
55ns. This delay is always positive and is a function of     activate the accelerators on the backplane side, the card
supply voltage, temperature and the pull-up resistors and    side, neither or both, by writing the LTC4302’s registers as
equivalent bus capacitances on both sides of the bus. The    described above. When activated, the accelerators switch
Typical Performance Characteristics section shows tPHL       in 2mA of current at VCC = 2.7V and 9mA at VCC = 5.5V
as a function of temperature and voltage for 10k pull-up     during positive bus transitions to quickly slew the SDA and
resistors and 100pF equivalent bus capacitance on both       SCL lines once their DC voltages exceed 0.6V and the initial
sides of the part. Larger output capacitances translate to   rise rate on the pin exceeds 0.8V/µs. Using a general rule
longer delays (up to 150ns). Users must quantify the         of 20pF of capacitance for every device on the bus (10pF
difference in propagation times for a rising edge versus a   for the device and 10pF for interconnect), choose a pull-up
falling edge in their systems and adjust setup and hold      current so that the bus will rise on its own at a rate of at
times accordingly.                                           least 0.8V/µs to guarantee activation of the accelerators.
                                                             For example, assume an SMBus system with VCC = 3.3V,
General Purpose Input/Outputs (GPIOs)
                                                             a 10k pull-up resistor and equivalent bus capacitor of
The LTC4302-1 provides two general purpose input/out-        200pF. The rise time of an SMBus system is calculated
put pins (GPIOs) that can be configured as inputs, open-     from (VIL(MAX) – 0.15V) to (VIH(MIN) + 0.15V) or 0.65V to
drain outputs or push-pull outputs. In push-pull mode, at    2.25V. It takes an RC circuit 0.92 time constants to
VCC = 2.7V, the typical pull-up impedance is 670Ω and the    traverse this voltage for a 3.3V supply; in this case, 0.92 •
typical pull-down impedance is 35Ω, making the GPIO          (10k • 200pF) = 1.84µs. Thus, the system exceeds the
pull-downs capable of driving LEDs. The user must take       maximum allowed rise time of 1µs by 84%. However,
care to minimize the power dissipation in the pulldown       using the rise time accelerators, which are activated at a
device. LEDs should have series resistors added to limit     DC threshold below 0.65V, the worst-case rise time is
current and the voltage drop across the internal pulldown    (2.25V – 0.65V) •␣ 200pF/1mA = 320ns, which meets the
if their forward drop is less than about VCC-0.7V. Pullup    1µs rise time requirement.
resistors should be sized to allow the internal pulldowns to
pull the GPIO pins below 0.7V. In open-drain output mode,    CONN Register Reset
the user provides the logic high by connecting a resistor    Grounding CONN resets the registers to their default state
to an external supply voltage. The external supply voltage   as specified in Tables 2 and 3. In the default state, the
can range from 2.2V to 5.5V independent of the VCC           backplane side is disconnected from the card side, the rise
voltage.                                                     time accelerators are disabled and the GPIOs are set in
The LTC4302-2 replaces one GPIO pin with a VCC2 pin and      open-drain output mode with the N-Channel MOSFET
provides only one GPIO.                                      open-drain pulldown turned off. Connecting a weak resis-
                                                             tor from CONN to ground on the I/O card and using a
Rise Time Accelerators                                       staggered connector with CONN connecting to the short-
Rise time accelerator circuits on all four SDA and SCL pins  est pin guarantee glitch-free live board insertion and
allow the user to choose weaker DC pull-up currents on the   removal. When the CONN voltage is brought back to VCC
bus, reducing power consumption while still meeting          the registers remain in the default state and can then be
                                                             read or written to.
                                                                                                             sn430212 430212fs
                                                                                                                   15


LTC4302-1/LTC4302-2
        U
OPERATIO
Glitch Filters                                                when forcing logic lows onto the SDAIN bus. The fall time
The LTC4302 provides glitch filters on both the SDAIN and     always meets the limits:
SCLIN signals as required by the I2C Fast Mode (400kHz)         (20 + 0.1 • CB) < tf < 300ns
specification. The filters prevent signals of up to 50ns
                                                              where tf is the fall time in ns and CB is the equivalent
(minimum) time duration and rail-to-rail voltage magni-
                                                              capacitance on SDAIN in pF. Whenever the connection
tude from passing into the 2-wire bus digital interface
                                                              circuitry is passing logic lows from SDAOUT to SDAIN
circuitry.
                                                              (and vice versa), its output signal will meet the fall time
Fall Time Control                                             requirements, provided that its input signal meets the fall
                                                              time requirements.
Per the I2C Fast Mode (400kHz) specification, the 2-wire
bus digital interface circuitry provides fall time control
                    U U
APPLICATIO S I FOR ATIO             W           U
Live Insertion and Removal, Capacitance Buffering             connection during live insertion. During live removal,
                                                              having CONN disconnect first ensures that the LTC4302
The application shown in Figure 12 highlights the live
                                                              enters a high impedance state in a controlled manner
insertion and removal, and capacitance buffering features
                                                              before SDAIN and SCLIN disconnect. Owing to the fact
of the LTC4302. Note that if the I/O card were plugged
                                                              that the LTC4302 powers into a high impedance state, and
directly into the backplane, the card capacitance would
                                                              also owing to the 1V precharge voltage and the less than
add directly to the backplane capacitance making rise and
                                                              10pF pin capacitance, SDAIN and SCLIN cause minimal
fall time requirements difficult to meet. Placing a LTC4302
                                                              disturbance on the backplane busses when they make
on the edge of the card, however, isolates the card capaci-
                                                              contact with the connector.
tance from the backplane. The LTC4302 drives the capaci-
tance of everything on the card, and the backplane must       Address Expansion with Nested Addressing
drive only the capacitance of the LTC4302, which is less
than 10pF.                                                    Figure 13 illustrates how the LTC4302 can be used to
                                                              expand the number of devices in a system by using nested
Assuming that a staggered connector is available, make        addressing. Note that each I/O card contains a sensor
ground, VCC and VCC2 the longest pins to guarantee that       device having address 1111 111. If the two cards are
SDAIN and SCLIN receive the 1V precharge voltage before       plugged directly into the backplane, the two sensors will
they connect. Make SDAIN and SCLIN medium length pins         require two different addresses. However, each LTC4302
to ensure that they are firmly connected while CONN is        isolates the devices on its card from the rest of the system
low. Make CONN the shortest pin and connect a weak            until it is commanded to connect. If masters use the
resistor from CONN to ground on the I/O card. This            LTC4302s to connect only one I/O card at a time, then each
ensures that the LTC4302-1/LTC4302-2 remain in a high         I/O card can have a device with address 1111 111 and no
impedance state while SDAIN and SCLIN are making              problems will␣ occur.
                                                                                                             sn430212 430212fs
16


                                                                                                    LTC4302-1/LTC4302-2
              U U
APPLICATIO S I FOR ATIO                     W           U
                                                        PCB EDGE
            BACKPLANE                 BACKPLANE        BACKPLANE
                                      CONNECTOR        CONNECTOR
                  VCC
                  5V                                                                           I/O PERIPHERAL CARD
                                                                               +      C1
                    R1          R2                                     R3             0.01µF               R6     R7       R8    R9
                    10k         10k                                    137Ω                                10k    10k      1k    1k
                                                                                           VCC
                                                                                        LTC4302-1
        SDA                                                                          SDAIN SDAOUT                                      CARD SDA
        SCL                                                                          SCLIN   SCLOUT                                    CARD SCL
       CONN                                                                          CONN
                                                                                                                 LED
                                                                                     ADDRESS GPIO2
                                                               R5      R4            GND       GPIO1
                                                               200k    8660Ω               X1                                   LED
                                                                                                                                               4302 F12
                          Figure 12. LTC4302-1 in a Live Insertion and Capacitance Buffering Application
            BACKPLANE
            VCC
            5V
                                                                                               I/O PERIPHERAL CARD 1
                                                                              +      C1
              R1          R2                                   R3                    0.01µF               R5     R6
              10k         10k                                  8660Ω                                      10k    10k
                                                                                          VCC
                                                                                       LTC4302-1
      SDA                                                                           SDAIN SDAOUT                                            CARD SDA
      SCL                                                                           SCLIN   SCLOUT                                          CARD SCL
                                                                                    CONN
                                                                                    ADDRESS GPIO2
                                                                                                                            SENSOR
                                                                                    GND       GPIO1
                                                               R4
                                                               137Ω                       X1
                                                                                   ADDRESS = 1100 000                  ADDRESS = 1111 111
                                                                                               I/O PERIPHERAL CARD 2
                                                                              +      C2
                                                               R7                    0.01µF               R9     R10
                                                               2800Ω                                      10k    10k
                                                                                          VCC
                                                                                       LTC4302-1
                                                                                    SDAIN SDAOUT                                            CARD SDA
                                                                                    SCLIN   SCLOUT                                          CARD SCL
                                                                                    CONN
                                                                                    ADDRESS GPIO2
                                                                                                                            SENSOR
                                                                                    GND       GPIO1
                                                               R8
                                                               137Ω                       X2
                                                                                   ADDRESS = 1100 001                  ADDRESS = 1111 111
                                                                                                                                                   4302 F13
                                           Figure 13. LTC4302-1 in a Nested Addressing Application
                                                                                                                                                              sn430212 430212fs
                                                                                                                                                                    17


LTC4302-1/LTC4302-2
                    U U
APPLICATIO S I FOR ATIO                W           U
5V to 3.3V Level Translator and Power Supply                            This application also provides power supply redundancy.
Redundancy (LTC4302-2)                                                  If either the VCC or VCC2 supply voltage falls below its UVLO
                                                                        threshold, the LTC4302-2 disconnects the backplane from
Systems requiring different supply voltages for the back-
                                                                        the card so that the side that is still powered can continue
plane side and the card side can use the LTC4302-2 as
                                                                        to function.
shown in Figure 14. The pull-up resistors on the card side
connect from SDAOUT and SCLOUT to VCC2 and those on                     Systems with Supply Voltage Droop (LTC4302-1)
the backplane side connect from SDAIN and SCLIN to VCC.
The LTC4302-2 functions for voltages ranging from 2.7V                  In large 2-wire systems, the VCC voltages seen by devices
to 5.5V on both VCC and VCC2. There is no constraint on the             at various points in the system can differ by a few hundred
voltage magnitudes of VCC and VCC2 with respect to each                 millivolts or more. This situation is modelled by a series
other.                                                                  resistor in the VCC line as shown in Figure 15. For proper
                                                                        operation of the LTC4302-1, make sure that VCC(BUS) ≥
                                                                        VCC(LTC4302) – 0.5V.
                   VCC
                                                                                                                      CARD VCC 3.3V
                    5V
                                                         C2                                                     C1
                                                         0.01µF                                                 0.01µF
                           R3    R4    R1       R5                                   R6     R7     R8
                           10k   10k   8660Ω    10k                                  10k    10k    1k
                                                              VCC    VCC2
                                                              LTC4302-2
                   SDA                                     SDAIN SDAOUT                                                   CARD SDA
                   SCL                                     SCLIN   SCLOUT                                                 CARD SCL
                                                           CONN
                                                           ADDRESS
                                                                                            LED    4203 F14
                                       R2                  GND       GPIO1
                                       137Ω
                                       Figure 14. 5V to 3.3V Level Translator Application
                                                 RDROP            VCC LOW
                         VCC
                                                                            C1
                                                                            0.01µF
                                 R3    R4       R1                                    R5     R6      R7             R8
                                 10k   10k      8660Ω            VCC                  10k    10k     1k             1k
                                                              LTC4302-1
                         SDA                               SDAIN SDAOUT                                                   SDA2
                         SCL                               SCLIN   SCLOUT                                                 SCL2
                                                           CONN
                                                                                             LED
                                                           ADDRESS GPIO2
                                                                                                              LED   4203 F15
                                                R2         GND       GPIO1
                                                137Ω
                                           Figure 15. System with Supply Voltage Droop
                                                                                                                                      sn430212 430212fs
18


                                                                                                                   LTC4302-1/LTC4302-2
                    U U
APPLICATIO S I FOR ATIO                  W                     U
Repeater/Bus Extender Application                                                          and fall time specifications for up to 1nF of capacitance,
                                                                                           thus allowing much more interconnect distance. In this
Users who wish to connect two 2-wire systems separated
                                                                                           situation, the differential ground voltage between the two
by a distance can do so by connecting two LTC4302-1s
                                                                                           systems may limit the allowed distance because a valid
back-to-back as shown in Figure 16. The I2C specification
                                                                                           logic low voltage with respect to the ground at one end of
allows for 400pF maximum bus capacitance, severely
                                                                                           the system may violate the allowed VOL specification with
limiting the length of the bus. The SMBus specification
                                                                                           respect to the ground at the other end. In addition, the
places no restriction on bus capacitance; however, the
limited impedances of devices connected to the bus re-                                     connection circuitry offset voltages of the back-to-back
                                                                                           LTC4302-1’s add together, directly contributing to the
quire systems to remain small, if rise and fall time speci-
                                                                                           same problem.
fications are to be met. The strong pull-up and pull-down
impedances of the LTC4302-1 are capable of meeting rise
PACKAGE DESCRIPTIO                           U
                                                                         MS Package
                                                                     10-Lead Plastic MSOP
                                                             (Reference LTC DWG # 05-08-1661)
                                                               0.889 ± 0.127
                                                               (.035 ± .005)
                             5.23
                            (.206)                              3.20 – 3.45
                             MIN                               (.126 – .136)
                                                                                                 3.00 ± 0.102
                                                                                                 (.118 ± .004)                                0.497 ± 0.076
                      0.305 ± 0.038                        0.50
                     (.0120 ± .0015)                     (.0197)                                   (NOTE 3)                                   (.0196 ± .003)
                                                                                                                       10 9 8 7 6
                          TYP                              BSC                                                                                     REF
                                  RECOMMENDED SOLDER PAD LAYOUT
                                                                                                   4.90 ± 0.152                              3.00 ± 0.102
                                                        DETAIL “A”                                 (.193 ± .006)                             (.118 ± .004)
                                           0.254                                                                                               (NOTE 4)
                                           (.010)
                                                                   0° – 6° TYP
                           GAUGE PLANE
                                                                                                                        1 2 3 4 5
                                                                          0.53 ± 0.152
                                                                          (.021 ± .006)                       1.10                              0.86
                                                                                                             (.043)                            (.034)
                                                           DETAIL “A”                                                                           REF
                                                                                                              MAX
                             0.18
                            (.007)
                                                                                    SEATING
                                                                                      PLANE        0.17 – 0.27                                     0.127 ± 0.076
                                                                                                  (.007 – .011)                                    (.005 ± .003)
                                                                                                                        0.50
                                                                                                      TYP                                           MSOP (MS) 0603
                            NOTE:                                                                                     (.0197)
                            1. DIMENSIONS IN MILLIMETER/(INCH)                                                          BSC
                            2. DRAWING NOT TO SCALE
                            3. DIMENSION DOES NOT INCLUDE MOLD FLASH, PROTRUSIONS OR GATE BURRS.
                               MOLD FLASH, PROTRUSIONS OR GATE BURRS SHALL NOT EXCEED 0.152mm (.006") PER SIDE
                            4. DIMENSION DOES NOT INCLUDE INTERLEAD FLASH OR PROTRUSIONS.
                               INTERLEAD FLASH OR PROTRUSIONS SHALL NOT EXCEED 0.152mm (.006") PER SIDE
                            5. LEAD COPLANARITY (BOTTOM OF LEADS AFTER FORMING) SHALL BE 0.102mm (.004") MAX
                                                                                                                                                                     sn430212 430212fs
                                Information furnished by Linear Technology Corporation is believed to be accurate and reliable.
                                However, no responsibility is assumed for its use. Linear Technology Corporation makes no represen-
                                tation that the interconnection of its circuits as described herein will not infringe on existing patent rights.                           19


LTC4302-1/LTC4302-2
TYPICAL APPLICATIO                           U
                                  2-WIRE SYSTEM 1                                                                     2-WIRE SYSTEM 2
           VCC                                                                                                                                          VCC
                                                          C1                                              C2
                                                          0.01µF                                      0.01µF
                   R1    R2    R3                                  R5    R6     R7     R8       R9    R10                        R11     R13    R14
                   10k   10k   8660Ω          VCC                  10k   10k    5.1k   5.1k     10k   10k         VCC            2000Ω   10k    10k
                                           LTC4302-1                                                           LTC4302-1
TO OTHER    SDA1                                                                                                                                SDA2      TO OTHER
                                        SDAIN SDAOUT                                                        SDAOUT SDAIN
SYSTEM 1    SCL1                                                                                                                                SCL2      SYSTEM 2
 DEVICES                                SCLIN   SCLOUT                                                      SCLOUT    SCLIN
                                                                                                                                                          DEVICES
                                        CONN                                   LONG DISTANCE                          CONN
                                        ADDRESS GPIO2                               BUS                     GPIO2 ADDRESS
                               R4       GND       GPIO1                                                     GPIO1      GND       R12
                               137Ω           IC1                                                                 IC2            1870Ω
                                                                                                                                                       4302 F16
                                                        Figure 16. Repeater/Bus Extender Application
RELATED PARTS
PART NUMBER              DESCRIPTION                                                      COMMENTS
LTC1380/LTC1393          Single-Ended 8-Channel/Differential 4-Channel Analog             Low RON: 35Ω Single-Ended/70Ω Differential,
                         Mux with SMBus Interface                                         Expandable to 32 Single or 16 Differential Channels
LTC1427-50               Micropower, 10-Bit Current Output DAC                            Precision 50µA ± 2.5% Tolerance Over Temperature,
                         with SMBus Interface                                             4 Selectable SMBus Addresses, DAC Powers up at Zero or Midscale
LTC1623                  Dual High Side Switch Controller with SMBus Interface            8 Selectable Addresses/16-Channel Capability
LTC1663                  SMBus Interface 10-Bit Rail-to-Rail Micropower DAC               DNL < 0.75LSB Max, 5-Lead SOT-23 Package
LTC1694/LTC1694-1        SMBus Accelerator                                                Improved SMBus/I2C Rise-Time,
                                                                                          Ensures Data Integrity with Multiple SMBus/I2C Devices
LT1786F                  SMBus Controlled CCFL Switching Regulator                        1.25A, 200kHz, Floating or Grounded Lamp Configurations
LTC1695                  SMBus/I2C Fan Speed Controller in ThinSOTTM                      0.75Ω PMOS 180mA Regulator, 6-Bit DAC
LTC1840                  Dual I2C Fan Speed Controller                                    Two 100µA 8-Bit DACs, Two Tach Inputs, Four GPI0
LTC4300A-1/              Hot Swappable 2-Wire Bus Buffers                                 Provides Capacitance Buffering, SDA and SCL Hot Swapping,
LTC4300A-2                                                                                Level Shifting
ThinSOT is a trademark of Linear Technology Corporation.
                                                                                                                                                sn430212 430212fs
             Linear Technology Corporation                                                                                          LT/TP 1003 1K PRINTED IN USA
20           1630 McCarthy Blvd., Milpitas, CA 95035-7417
             (408) 432-1900 ● FAX: (408) 434-0507   ●
                                                        www.linear.com                                                     LINEAR TECHNOLOGY CORPORATION 2003


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Analog Devices Inc.:
 LTC4302IMS-2 LTC4302CMS-1#TR LTC4302CMS-2#PBF LTC4302IMS-2#TRPBF LTC4302CMS-1#TRPBF
LTC4302IMS-2#PBF LTC4302CMS-2#TR LTC4302IMS-1#PBF LTC4302IMS-1#TR LTC4302CMS-2#TRPBF
LTC4302CMS-1#PBF LTC4302CMS-1 LTC4302IMS-1#TRPBF LTC4302IMS-1 LTC4302CMS-2 LTC4302IMS-2#TR
