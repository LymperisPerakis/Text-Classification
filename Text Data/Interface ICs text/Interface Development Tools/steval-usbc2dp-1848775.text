                                                                                                            STEVAL-USBC2DP
                                                                                                                                 Data brief
                                                                                 USB Type-C™ to DisplayPort™ adapter
                                                        Features
                                                         •    Full reference design for USB Type-C to DisplayPort adapter with USB Type-C
                                                              connector and DisplayPort connector.
                                                         •    Single chip solution based on the STM32F072 series 32-bit microcontrollers with
                                                              integrated USB 2.0 peripheral.
                                                         •    Based on certified X-CUBE-USB-PD middleware stack, compliant with the
                                                              following standards and specifications:
                                                              –     USB Type-C Cable and Connector 1.3
                                                              –     USB Power Delivery 2.0 and 3.0
                                                              –     VESA DisplayPort Alternate Mode on USB Type-C Standard 1.0a
                                                              –     USB Device Class Definition for Billboard Devices 1.21
                                                         •    EMI filtering and ESD protection circuits.
                                                         •    Compact PCB design: 5.5 x 2.3 cm
                                                         •    RoHS compliant
                                                        Description
                                                        The compact USB Type-C to DisplayPort adapter reference design, with USB Type-C
                                                        connector and DisplayPort connector, exploits Alternate Mode of the USB Type-C
                                                        and Power Delivery specifications to offer a comprehensive VESA® DisplayPort
                                                        Standard interface.
                                                        With this adapter, you can connect a monitor with a DisplayPort interface to any
                                                        laptop, tablet or smartphone with a reversible USB Type-C connector that is
 Summary table
                                                        compliant with the Power Delivery specification.
 STEVAL-USBC2DP USB
                                 STEVAL-                The DisplayPort Alternate Mode allows video data to be delivered through the
 Type-C™ to
                                 USBC2DP                SuperSpeed USB lines on the Type-C connector, while Auxiliary lanes (AUX) and hot
 DisplayPort™ adapter
                                                        plug detection (HPD) signals are sent through other Type-C lines.
 X-CUBE-USB-PD
                                 X-CUBE-USB-            The high-performance ARM® Cortex®-M0 32-bit STM32F072 microcontroller
 software expansion for
                                 PD
 STM32Cube                                              engages in DisplayPort Alt Mode negotiation through vendor-defined messages
                                                        (VDM) according to the USB Power Delivery Specification. The messages are
 STM32F072 series 32-bit
 ARM Cortex MCU with                                    transmitted along configuration channel (CC), through a simple discrete analog front
                                 STM32F072              end (AFE) interface between the STM32 MCU and the USB Type-C connector.
 crystal-less USB 2.0 FS
 interface                                              The STM32 microcontroller running the ST USB Middleware stack and the
 LDK220 200 mA low                                      embedded USB 2.0 controller provide the Billboard Device Class support as required
 quiescent current and           LDK220                 by the USB Power Delivery standard, as well as the Device Firmware Upgrade
 low noise LDO                                          capability.
 STG3684A low voltage
 0.5 Ω max dual SPDT             STG3684A
 switch
DB3497 - Rev 3 - February 2018                                                                                                       www.st.com
For further information contact your local STMicroelectronics sales office.


                                                                                                      STEVAL-USBC2DP
                                                                          USB Type-C to DisplayPort reference design architecture
1              USB Type-C to DisplayPort reference design architecture
               The STEVAL-USBC2DP reference design for the USB Type-C to VESA DisplayPort adapter is a complete
               solution based on the following logical blocks:
               1.    A USB Type-C reversible connector
               2.    A DisplayPort connector
               3.    An STM32F072 MCU running the X-CUBE-USB-PD software package with Middleware stack
               4.    A USB Type-C discrete analog front end
               5.    The on-board power management stage controlled by the LDK220 low dropout voltage regulator to supply
                     the dongle through the Type-C connector VBUS or VCONN pins
               6.    The STG3684A low voltage 0.5 Ω max. dual SPDT switch between the DisplayPort auxiliary (AUX) and the
                     side-band unit (SBU) lines
                                      Figure 1. STEVAL-USBC2DP system architecture block diagram
               The adapter reference design also features:
               •     Dual supply options through USB Type-C connector:
                     –    VBUS
                     –    VCONN
               •     VBUS voltage sensing for power monitoring
               •     USB 2.0 interface available on Type-C™ port for Billboard Device Class and Device Firmware Upgrade
               •     A power status LED and USB Power Delivery Status LED
               •     A RESET button
               •     On-board SWD connector that can be connected with the ST-LINK/V2-1 debugger/programmer embedded
                     on STM32 Nucleo boards
DB3497 - Rev 3                                                                                                            page 2/8


                                                                                                                                                                                                                                                                       STEVAL-USBC2DP
                                                                                                                                                                                                                                                                                        Schematic diagrams
2                Schematic diagrams
                                                                                                                                                               Figure 2. MCU section
                                                                     U4
                                                                     STM32F072C8U6
                                                                                                                                                                                                                                        Q1
                                                                                              21        22          25          26       27           28
                                                                                                                                                                                                                                        STL6N2VH5
                                                                                                                                                                                                                                                6
                                                                                               PB10          PB11      PB12      PB13          PB14     PB15
                                                                                                                                                                                                                                   8            5
                                          USART_RX             31                                                                                                         45                                          PD_HPD       4            1                 DP_HPD
                                                                     PA10                                                                                          PB8                                                                          2
                                          USART_TX                                                                                                                                                              1
                                                               30                                                                                                         29                                                                    7
                                                                     PA9                                                                                           PA8                                                    R2
                                                                                                                                                                                                                          1M           3
                                                                5
                                                                     PF0-OSC_IN
                                                                                                                                                                                                                2
                                                                6                                                                                                                                                                      D_VDD
                                                                     PF1-OSC_OUT
                                          nRESET                7
                                                                     NRST                                                                                                                                       GND
                                          BOOT0                44                                                                                                                                                               D_VDD
                                                                     BOOT0
                                                               34                                                                                                                         D13                   R19
                                          SWDIO
                                                                     PA13_SWDIO                                                                                           17                                2               1
                                          SWCLK                37                                                                                                  PA7
                                                                     PA14_SWCLK
                                                               38                                                                                                         13              LED BLUE              75
                                                                     PA15                                                                                          PA3
                                                               41                                                                                                         32   USB_DM
                                                                     PB5                                                                                           PA11                                               TP1
                                                               20                                                                                                         33   USB_DP                                 5001
                                                                     PB2                                                                                           PA12
                                                               43                                                                                                                                                                                   Q2
                                                                     PB7                                                                                                                                              1
                                                                                                                                                                                                                                                    STL6N2VH5
                                                               42                                                                                                                                                                                            6
                                                                     PB6                                                                                                                                  R5
                                                                                                                                                                                                                                                8            5
                                                                                                                                                                          14   CC_RX                  2               1                         4            1                               CC
                                                                                                                                                                   PA4                                                                                       2
                                                                                                                                                                                                                                                                                                       1
                                                                                                                                                                                                                                                             7                                               D3
                                                                2                                                                                                                                         75                                                       2
                                                                     PC13                                                                                                                                                                                                           2                        ESDALC5-1BF4
                                                                                                                                                                                                                                                                         R6
                                                                3                                                                                                                                         R7                                        3
                                                                                                                                                                                                                                                                         5.1k               C6
                                                                     PC14-OSC32_IN                                                                                        40   CC_TX                  2               1
                                                                                                                                                                   PB4                                                                                                              1       820pF
                                                                4                                                                                                                                                                               D_VDD
                                                                     PC15-OSC32_OUT                                                                                                                                                                                1                                   2
                                                                                                                                                                                                          169
                    VDD_A                  TP3                                                                                                                                                                                       VBUS
                                           5001                                                                                                                                                                                                                    GND                GND              GND
                                                                                                                                                                                                                                 1
                                                                                                                                                                          12
                                                                                                                                                                   PA2                                                                   R21
                     1                     1
                                                                                                                                                                                                                      TP2                8.2k
                            R8                                 18
                                                                     PB0                                                                                                  39   CLOCK_IN                          1
                            24k                                                                                                                                    PB3                                                           2
                                                               46
                                                                     PB9
                     2
                                  RXREF                        11                                                                                                         19   CLOCK_OUT                              5001
                                                                     PA1                                                                                           PB1                                                           1
                     1                                                                                                                                                                                                                              1
                                           2                                                                                                                                                                                             R22
                            R9                                                                                                                                                                                                           1.5K             C22
                            4.7k                  C7                                                                                                                      10           SBU_ENABLE                                                         0.1µF
                                                                                                                                                                   PA0                                                                              2
                                           1      0.22µF                                                                                                                                                                         2
                     2
                                                               23
                                                                     VSS1                                                                                                                                                        GND                GND
                                                                                                                                                                                    R14
                                                               35
                     GND                                             VSS2                                                                                                 15    1               2     DP_AUX_N
                                                               47                                                                                                  PA5
                                                                     VSS3
                                                                8                                                                                                                   0.0
                                                                     VSSA                                                                                                                                                                                              D_VDD
                                                               49                                                                                                                   R16                                                                                                     J1
                                                                     EXP_PAD                                                                                              16    1               2     DP_AUX_P                                                                          1               2    DP_AUX_N
                                                                                                                                                                   PA6                                                                                                     DP_HPD       3               4    DP_AUX_P
                                                                                                                       VDDIO2
                                                                                                                                                                                                                                                                           USART_TX     5               6    USART_RX
                                                                                       VDD1           VDD2                              VBAT            VDDA
                                                                                                                                                                                    0.0                                                                                                 7               8
                                                                                    24             48               36               1                9
                               GND
                                                                                    VDD1           VDD2             VDDIO            VBAT             VDDA                                                                                                                                                 Ext.
                                                                                                                                                                                                                                                                                                 GND
                                                                                                                                                                                                                                                                                                           Comm.
                                                                                                                                                                                                D_VDD
                                                                                                                                                                                                                                                                                                           Conn.
                                                                               P1                                                                                                               1
                                                                                                                                                                                                      R1
                                                                                                                                                                                                      10k
                                                                                PIN1
                                                                                PIN2                                                                                                            2                                                                                           P2
                                                                                                                                                                                                                                                                         EXT_3.3V       1
                                                                                                                                                                                                                                                                                             PIN1
                                                                               1
                                                                                                                                                                                                                                                                                        2
                                                                               2
                                                                                                                                                                                                      nRESET                                                              SWCLK
                                                                                                                                                                                                                                                                                        3    PIN2
                                   R3                          R4                                                                                                                               2
                                                                                                                                                                                                                                                                                        4    PIN3
                                                                                                                                                                                                                                                                         SWDIO
                              2             1     BOOT0    2              1                                                                                                                           C5                                                                 nRESET         5    PIN4
                                                                                                                                D_VDD                                                                                                                                                        PIN5
                                                                                                                                                                                                1     10000pF
                                                                                                                                                                                        SW1
                                   10k                         100                                                                                                                  1437566-3
                       GND
                                                                          Boot                                                                                                                                  Reset                                                           GND                    SWD
                                                                          Option                                                                                                                GND
                                                                                                                                                                                                                Button                                                                                 Conn.
DB3497 - Rev 3                                                                                                                                                                                                                                                                                                          page 3/8


                                                                                                                                                                                                               STEVAL-USBC2DP
                                                                                                                                                                                                                             Schematic diagrams
                                                                                                 Figure 3. USB Type-C Plug
                                                       CN1
                                  C1
                                                                                                     GND
                 DP_ML3+     1         2
                            C2 0.1µF
                 DP_ML3-1        2               B12                               A1
                                                 B11    GND4           GND1        A2                                     DP_ML2+
                                                 B10    RX1+           TX1+        A3                                     DP_ML2-
                 VBUS       0.1µF                 B9    RX1-            TX1-       A4                                     VBUS
                 SBU2                             B8    VBUS4         VBUS1        A5                                     CC
                                                        SBU2              CC       A6                                     USB_DP                                                                                                                     VCONN
                                                                         D+1       A7                                     USB_DM
                 VCONN                           B5                      D-1       A8                                     SBU1
                 VBUS                            B4     VConn          SBU1        A9                                     VBUS
                 DP_ML1-                         B3     VBUS3         VBUS2        A10
                                                                                                                                                                     2                             2                                    1
                 DP_ML1+                         B2     TX2-            RX2-       A11                   C4
                                                                                                                                                                                D1                         D2                                 R18
                                                 B1     TX2+           RX2+        A12               2           1        DP_ML0-
                                                        GND3           GND2                                                                                                     ESDAULC5-1BF4              ESDAULC5-1BF4                      1k
                                                                                                         0.1µF                                                                                                                          2
                                                                                                         C3                                                          1                             1
                                                                                                     1           2        DP_ML0+
                                                                                                                                                                     GND                           GND                                  GND
                                                       Wurth 632712000011                                0.1uF
                                       GND
                                                                                          Figure 4. DisplayPort Receptacle
                 CN2
                                            12                           DP_ML3-
                          ML0+              11
                         GND1               10                           DP_ML3+
                          ML0-              9                            DP_ML2-
                          ML1+              8
                         GND2               7                            DP_ML2+
                          ML1-              6                            DP_ML1-
                          ML2+              5
                         GND3               4                            DP_ML1+
                          ML2-              3                            DP_ML0-
                          ML3+              2
                         GND4               1                            DP_ML0+
                          ML3-              15                           DP_AUX_P
                     AUX_CH_P               16
                         GND5               17                         DP_AUX_N
                     AUX_CH_N               13                          CFG1
                       CONFIG1              14                          CFG2
                       CONFIG2              18                        DP_HPD
                           HPD              20
                                                                                                         1                                                       1                                            1
                       DP_PWR               19                                                                            D6                                                    D4                                     D5
                                                                                                                                                                                                                                               2
                   DP_PWR_RET                                                             2                                                                                     2
                                                                                                                                                                                                                                                          R10
                                                                                                                          ESDALC5-1BF4   2         1                            ESDALC5-1BF4                           ESDALC5-1BF4
                                                                                                 R13                                                                                 R12                                                                  470k
                 0472720001                                                                                                                       R11    R15
                                                                                                 1M                                                                                  4.7M
                                                                                                                                                  1M     1M                                                                                    1
                                                                                          1              2                                                       2              1                             2
                                                                                                                                         1         2
                                                       GND                                           GND                                 GND                                          GND
                                                                                         Figure 5. Power Management Stage
                                                                                                                                                                         3.3V
                                     D10
                    VCONN     1              2
                                                                                                                  U3                                                                                               D_VDD                       D_VDD
                                D11                                                                               LDK220M33R                                          2
                    VBUS      1 STPS05220Z                                                                   1                           5                       3               1           EXT_3.3V
                                                                                                                     IN         OUT                                                                                             VDD1                      VDD2
                                                                                                             3
                                     STPS0520Z                2                                                      EN                                              J2
                                                                                                                          GND
                                                                                                                                                                     GRPB031VWVN-RC                                                             2
                                                                  D9
                                                 1                                        1                                         NC             1                                                           1            2
                                                                  ESDA7P60-1U1M                                                                                                                                                                           C18
                                                        C9                                       C10                      2     4                       C11                                                        C12            C13           1         0.1uF
                                                 2      1uF   1                           2      0.1uF                                             2    0.47uF                                                 2   4.7uF    1     0.1uF
                                                                                                                                                                                                                    GND                             GND
                                                                                                                          GND
                 Power-On
                 LED         3.3V
                                                                                              3.3V
                                                                  VDD_A                                                             D_VDD                                            D_VDD                          VDD_A                           D_VDD
                             2                                                L1                             L2
                                      R20                                 2               1              2                      1                                                             VDDIO                             VDDA                      VBAT
                                      75                                      30Ohm@100MHz                   30Ohm@100MHz
                                                                  2                                                                 2                                                                                                           1
                             1                                                                                                                                                  1             2                1            2
                                      D12                                 C20                                                                C21                                                                                                          C19
                                      LED YELLOW-GREEN            1       10000pF                                                   1        10000pF                                 C14           C15             C16            C17           2         0.1uF
                                                                                                                                                                                2    4.7uF    1    0.1uF       2   10000pF  1     1uF
                             GND                                   GND                                                              GND                                               GND                           GND                             GND
DB3497 - Rev 3                                                                                                                                                                                                                                               page 4/8


                                                                                                      STEVAL-USBC2DP
                                                                                                                 Schematic diagrams
                                                           Figure 6. Hi-Speed Data Switch
                                                   D_VDD
                                                              2
                                                                   C8
                                                              1    0.22µF
                                                   3              U2
                                                              GND STG3684AUTR
                                         1
                                             1S2     Vcc
                              DP_AUX_P   2                         10           SBU1
                                             1S1              D1
                                         6                         5            SBU2
                                             2S2              D2
                              DP_AUX_N   7
                                             2S1
                 SBU_ENABLE              4
                                             2IN                                        2                    2
                                         9
                                             1IN     GND                                      D7                    D8
                         2                                                                    ESDALC5-1BF4          ESDALC5-1BF4
                                                   8
                                R17
                                100K
                                                                                        1                    1
                         1
                         GND                        GND                                 GND                  GND
DB3497 - Rev 3                                                                                                                 page 5/8


                                                                                                  STEVAL-USBC2DP
                                                                                                          References
3              References
               1. USB Type-C™ Cable and Connector Specification, Release 1.3, July 12, 2017.
               2. USB Power Delivery Specification Revision 3.0, Version 1.1, January 12, 2017.
               3. VESA DisplayPort Alternate Mode on USB Type-C Standard, Version 1.0a, August 05, 2015.
               4. USB Device Class Definition for Billboard Devices, Revision 1.21, September 8, 2016.
DB3497 - Rev 3                                                                                                page 6/8


                                                                         STEVAL-USBC2DP
Revision history
                             Table 1. Document revision history
                     Date               Version         Changes
                 01-Feb-2018               1            Initial release.
                 19-Feb-2018               2            Minor text edits
                 27-Feb-2018               3            Minor text edits
DB3497 - Rev 3                                                                     page 7/8


                                                                                                                                 STEVAL-USBC2DP
                                                       IMPORTANT NOTICE – PLEASE READ CAREFULLY
 STMicroelectronics NV and its subsidiaries (“ST”) reserve the right to make changes, corrections, enhancements, modifications, and improvements to ST
 products and/or to this document at any time without notice. Purchasers should obtain the latest relevant information on ST products before placing orders. ST
 products are sold pursuant to ST’s terms and conditions of sale in place at the time of order acknowledgement.
 Purchasers are solely responsible for the choice, selection, and use of ST products and ST assumes no liability for application assistance or the design of
 Purchasers’ products.
 No license, express or implied, to any intellectual property right is granted by ST herein.
 Resale of ST products with provisions different from the information set forth herein shall void any warranty granted by ST for such product.
 ST and the ST logo are trademarks of ST. All other product or service names are the property of their respective owners.
 Information in this document supersedes and replaces information previously supplied in any prior versions of this document.
                                                          © 2018 STMicroelectronics – All rights reserved
DB3497 - Rev 3                                                                                                                                           page 8/8


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
STMicroelectronics:
 STEVAL-USBC2DP
