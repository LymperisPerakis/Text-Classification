                                                                 USB2640i/USB2641i
                                                      Industrial Temperature USB 2.0
                                                      Flash Media Controller and Hub
                                                      Combo
PRODUCT FEATURES                                                                                            Data Brief
General Description                                         Features
The SMSC USB2640i/USB2641i is a USB 2.0                      Compliant with the following flash media card
compliant, Hi-Speed hub for USB port expansion with an        specifications: SD 2.0 / MMC 4.2 / MS 1.43 / MS-Pro
attached mass storage class peripheral controller. The        1.02 / MS-PRO-HG 1.01 / MS-Duo 1.10 / xD 1.2
controller allows read/write capability to popular flash
media from the following families:                           Supports a single external 3.3 V supply source;
                                                              internal regulators provide 1.8 V internal core voltage
  Secure DigitalTM (SD)                                      for additional bill of materials and power savings
  MultiMediaCardTM (MMC)                                    The transaction translator (TT) in the hub supports
  xD-Picture CardTM (xD)1                                    operation of Full-Speed and Low-Speed peripherals
  Memory Stick®(MS)                                         9 K RAM | 64 K on-chip ROM
                                                             Enhanced EMI rejection and ESD protection
The USB2640i/USB2641i is a fully integrated, single           performance
chip solution providing USB expansion and integrated         On board 24 MHz crystal driver circuit
flash card media reader/writer capability of ultra high      Optional external 24 MHz clock input
performance operation. Average sustained transfer
rates exceeding 35 MB/s are possible2.                       Up to 9 GPIOs for special functions
                                                             8051 8-bit microprocessor
Highlights
                                                             Hub and flash media reader/writer configuration from
  Hub controller with internally connected ultra fast        a single source: External I2C ROM or external SPI
   flash media reader/writer and 2 exposed downstream         ROM
   ports for external peripheral expansion                    — Configures internal code using an external I2C
  Flash media reader/writer employs multiplexed card             EEPROM
                                                              — Supports external code using a SPI Flash EEPROM
   interfaces which are optimized for use with single         — Customizable vendor ID, product ID, language ID
   card insertion combo sockets                              EEPROM update via USB
  Hardware-controlled data flow architecture for all self-  48-pin QFN lead-free, RoHS compliant package (7x7
   mapped media                                               mm)
  Optional support for external firmware access via SPI     The SMSC USB2640i/USB2641i supports the
   interface                                                  industrial temperature range of -40°C to 85°C
  PortMap
   — Flexible port mapping and port disable sequencing      Applications
       supports multiple platform designs
                                                             Desktop and mobile PCs
  PortSwap
                                                             Personal mobile devices
   — Programmable USB differential-pair pin locations eases
       PCB design by aligning USB signal traces directly to  Printers
       connectors                                            GPS navigation systems
  PHYBoost                                                  Media Players/Viewers
   — Programmable USB transceiver drive strength recovers    Consumer A/V
       signal integrity
                                                             Set-top boxes
                                                             Industrial products
     1.Support and capabilities for xD-Picture Card are not
     applicable for the USB2641i. Please obtain a user li-
     cense from the xD-Picture Card License Office to sup-
     port this flash media format.
     2.Host and media dependent.
SMSC USB2640i/USB2641i                                                                           Revision 2.1 (06-29-09)
                                                  PRODUCT PREVIEW


                                                                                 Industrial Temperature USB 2.0 Flash Media Controller and Hub Combo
                                                                      ORDER NUMBER(S):
         USB2640i/USB2641i-HZH-XX for 48-PIN, QFN LEAD-FREE ROHS COMPLIANT PACKAGE
                                “XX” in the order number indicates the internal ROM firmware revision level.
                                          Please contact your SMSC representative for more information.
80 ARKAY DRIVE, HAUPPAUGE, NY 11788 (631) 435-6000, FAX (631) 273-3123
Copyright © 2009 SMSC or its subsidiaries. All rights reserved.
Circuit diagrams and other information relating to SMSC products are included as a means of illustrating typical applications. Consequently, complete information sufficient for
construction purposes is not necessarily given. Although the information has been checked and is believed to be accurate, no responsibility is assumed for inaccuracies. SMSC
reserves the right to make changes to specifications and product descriptions at any time without notice. Contact your local SMSC sales office to obtain the latest specifications
before placing your product order. The provision of this information does not convey to the purchaser of the described semiconductor devices any licenses under any patent
rights or other intellectual property rights of SMSC or others. All sales are expressly conditional on your agreement to the terms and conditions of the most recently dated
version of SMSC's standard Terms of Sale Agreement dated before the date of your order (the "Terms of Sale Agreement"). The product may contain design defects or errors
known as anomalies which may cause the product's functions to deviate from published specifications. Anomaly sheets are available upon request. SMSC products are not
designed, intended, authorized or warranted for use in any life support or other application where product failure could cause or contribute to personal injury or severe property
damage. Any and all such uses without prior written approval of an Officer of SMSC and further testing and/or modification will be fully at the risk of the customer. Copies of
this document or other SMSC literature, as well as the Terms of Sale Agreement, may be obtained by visiting SMSC’s website at http://www.smsc.com. SMSC is a registered
trademark of Standard Microsystems Corporation (“SMSC”). Product names and company names are the trademarks of their respective holders.
SMSC DISCLAIMS AND EXCLUDES ANY AND ALL WARRANTIES, INCLUDING WITHOUT LIMITATION ANY AND ALL IMPLIED WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE, TITLE, AND AGAINST INFRINGEMENT AND THE LIKE, AND ANY AND ALL WARRANTIES ARISING FROM ANY COURSE
OF DEALING OR USAGE OF TRADE. IN NO EVENT SHALL SMSC BE LIABLE FOR ANY DIRECT, INCIDENTAL, INDIRECT, SPECIAL, PUNITIVE, OR CONSEQUENTIAL
DAMAGES; OR FOR LOST DATA, PROFITS, SAVINGS OR REVENUES OF ANY KIND; REGARDLESS OF THE FORM OF ACTION, WHETHER BASED ON CONTRACT;
TORT; NEGLIGENCE OF SMSC OR OTHERS; STRICT LIABILITY; BREACH OF WARRANTY; OR OTHERWISE; WHETHER OR NOT ANY REMEDY OF BUYER IS HELD
TO HAVE FAILED OF ITS ESSENTIAL PURPOSE, AND WHETHER OR NOT SMSC HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
Revision 2.1 (06-29-09)                                                                 2                                                   SMSC USB2640i/USB2641i
                                                                  PRODUCT PREVIEW


Industrial Temperature USB 2.0 Flash Media Controller and Hub Combo
Overview
                The SMSC USB2640i/USB2641i is an integrated USB 2.0 compliant, Hi-Speed hub for USB port
                expansion with an attached bulk only mass storage class peripheral controller. This multi-format flash
                media controller and USB Hub Combo features three downstream ports: one port is dedicated to an
                internally connected ultra fast flash media reader/writer and two exposed downstream ports are
                available for external peripheral expansion.
                The SMSC USB2640i/USB2641i is an ultra fast, OEM-configurable, hub controller IC with three
                downstream ports for embedded USB solutions. The USB2640i/USB2641i will attach to an upstream
                port as a Full-Speed Hub or as a Full-/Hi-Speed Hub. The hub supports Low-Speed, Full-Speed, and
                Hi-Speed (if operating as a Hi-Speed Hub) downstream devices on all of the enabled downstream
                ports.
                All required resistors on the USB ports are integrated into the hub. This includes all series termination
                resistors on D+ and D– pins and all required pull-down and pull-up resistors on D+ and D– pins. The
                over-current sense inputs for the downstream facing ports have internal pull-up resistors.
                The USB2640i/USB2641i includes programmable features such as:
                PortMap which provides flexible port mapping and disable sequences. The downstream ports of a
                USB2640i/USB2641i hub can be reordered or disabled in any sequence to support multiple platform
                designs with minimum effort. For any port that is disabled, the USB2640i/USB2641i automatically
                reorders the remaining ports to match the USB host controller’s port numbering scheme.
                PortSwap which adds per-port programmability to USB differential-pair pin locations. PortSwap allows
                direct alignment of USB signals (D+/D-) to connectors avoiding uneven trace length or crossing of the
                USB differential signals on the PCB.
                PHYBoost which enables four programmable levels of USB signal drive strength in downstream port
                transceivers. PHYBoost attempts to restore USB signal integrity that has been compromised by system
                level variables such as poor PCB layout, long cables, etc.
SMSC USB2640i/USB2641i                                         3                                   Revision 2.1 (06-29-09)
                                              PRODUCT PREVIEW


                                                        Industrial Temperature USB 2.0 Flash Media Controller and Hub Combo
Device Features
                Hardware Features
                   Single chip flash media controller
                   The SMSC USB2640i/USB2641i supports the industrial temperature range of -40°C to 85°C
                   Transaction translator (TT) in the hub supports operation of FS and LS peripherals
                   Full power management with individual or ganged power control of each downstream port
                   Optional support for external firmware access via SPI interface
                    - 30 MHz or 60 MHz operation support
                    - Single bit or dual bit mode support
                    - Mode 0 or mode 3 SPI support
                Compliant with the following flash media card specifications:
                   Secure Digital 2.0 / MultiMediaCard 4.2
                    - SD 2.0, HS-SD, HC-SD
                    - TransFlash™ and reduced form factor media
                    - 1/4/8 bit MMC 4.2
                   SDIO and MMC streaming mode support
                   Memory Stick 1.43
                   Memory Stick Pro Format 1.02
                   Memory Stick Pro-HG Duo Format 1.01
                    - Memory Stick, MS Duo, HS-MS, MS Pro-HG, MS Pro
                   Memory Stick Duo 1.10
                   xD-Picture Card 1.2 (USB2640i only)
                   On board 24 MHz crystal driver circuit
                   Optional external 24 MHz clock input
                    - Must be used with an external resistor divider to provide a 1.8 V signal
                   Up to 9 GPIOs: Configuration and polarity for special function use such as LED indicators, button
                    inputs, and power control to memory devices
                    - The number of actual GPIOs depends on the implementation configuration used
                    - One GPIO available with up to 200 mA drive and protected “fold-back” short circuit current
                   8051 8-bit microprocessor
                    - 60 MHz - single cycle execution
                    - 64 KB ROM; 9 KB RAM
                   Internal regulator for 1.8 V core operation
                   Optimized pinout improves signal flow, easing implementation and allowing for improved signal
                    integrity treatment
                Software Features
                   Optimized for low latency interrupt handling
                   Hub and flash media reader/writer configuration from a single source: External I2C ROM or external
                    SPI ROM
                   EEPROM update via USB
                   Please see the USB2640i/USB2641i Software Release Notes for additional software features
Revision 2.1 (06-29-09)                                      4                                    SMSC USB2640i/USB2641i
                                               PRODUCT PREVIEW


Industrial Temperature USB 2.0 Flash Media Controller and Hub Combo
 OEM Selectable Features
                Hub
                A default configuration is available in USB2640i/USB2641i following a reset. The USB2640i/USB2641i
                may also be configured by an external I2C EEPROM or via external SPI ROM flash.
                The USB2640i/USB2641i supports several OEM selectable features:
                   Compound Device support (port is permanently hardwired to a downstream USB peripheral
                    device), on a port-by-port basis.
                   Select over-current sensing and port power control on an individual (port-by-port) or ganged (all
                    ports together) basis to match the OEM’s choice of circuit board component selection.
                   Port power control and over-current detection/delay features
                   Configure the delay time for filtering the over-current sense inputs.
                   Configure the delay time for turning on downstream port power.
                   Bus- or self-powered selection
                   Hub port disable or non-removable configurations
                   Flexible port mapping and disable sequence. Ports can be disabled/reordered in any sequence to
                    support multiple platforms with a single design. The hub will automatically reorder the remaining
                    ports to match the host controller's numbering scheme.
                   Programmable USB differential-pair pin location.
                    - Eases PCB layout by aligning USB signal lines directly to connectors
                   Programmable USB signal drive strength. Recover USB signal integrity due to compromised
                    system environments using 4 levels of signal drive strength.
                   Indicate the maximum current that the 2-port hub consumes from the USB upstream port.
                   Indicate the maximum current required for the hub controller.
                Flash Media Controller
                   Customize vendor ID, product ID, and device ID.
                   12-hex digit (max) serial number string
                   Customizable vendor specific data by optional use of external serial EEPROM
                   28-character manufacturer ID and product string for flash media reader/writer
                   LED blink interval or duration
SMSC USB2640i/USB2641i                                         5                                  Revision 2.1 (06-29-09)
                                              PRODUCT PREVIEW


                                                                          To Upstream       Upstream USB             24 MHz
                                                                                                           3.3 V                 1.8 V
                                                                              VBUS               Data                Crystal
                                                                                                                      PLL                         Serial
                                                                           Bus-Power                                                            Interface                                             8051
                                                                                             Upstream
            Revision 2.1 (06-29-09)
                                                                           Detect/VBUS                              1.8 V Reg                                                      SFR             PROCESSOR
                                                                                               PHY
                                                                             Pulse                                                                                                 RAM
                                                                                                                      Serial
                                                                                                                    Interface                                                                                                             SPI (4 pins) /
                                                                                             Repeater                                           Controller                                                                        SPI
                                                                                                                     Engine                                                   RAM                                                         GPIO (2 pins)
                                                                                                                                                                               6K        ADDR
                                                                                                                                                                                                                                                             Block Diagrams
                                                                                                                                                                              ROM        MAP                                 PWR_FET0     GPIO10 (CRD_PWR)
                                                                                                                                                                              64 K                                               GPIOs    6 pins
                                                                                                                   Transaction
                                                                                                                                         Port Controller
                                                                                                                    Translator                                                                               Program Memory I/O Bus
                                                                                                                                                                                                        XDATA BRIDGE
                                                                                                                                                                                                        + BUS ARBITER
                                                                                                                                                                                    EP0 TX
                                                                                                                                                                                    EP0 RX
            6                                                                                                                                                       3K                           BUS
                                                                                                                                                                   total             RAM
                                                                                                                                                                                                INTFC
                                                                                             Routing & Port Re-Ordering Logic                                                                                              AUTO_CBW
                                                                                                                                                                                    EP2 RX                                   PROC
                                                                                                                                                                                    EP2 TX
                                                                                                                                                                                                                          BUS     FMDU
PRODUCT PREVIEW
                                                                                                                                                                                                                         INTFC     CTL
                                                                                  Port #3                           Port #2
                                      Figure 1 USB2640i Block Diagram
                                                                                   OC                                OC
                                                                                  Sense                             Sense                                    SIE            BUS
                                                                          PHY     Switch
                                                                                                           PHY      Switch
                                                                                                                                               BRIDGE                      INTFC
                                                                                                                                                             CTL                                                                  FMI
                                                                                  Driver                            Driver
                                                                                                                                                                                                                                    SD/
                                                                                                                                                                                                                   xD       MS
                                                                                                                                                                                                                                    MMC
                                                                         USB Data    OC Sense/           USB Data OC Sense/                                                                                               Flash Media
                                                                        Downstream   Pwr Switch         Downstream Pwr Switch                                                                                                Cards
                                                                                                                                                                                                                        (require Combo
                                                                                                                                                                                                                            socket)
                                                                                                                                                                                                                                                                              Industrial Temperature USB 2.0 Flash Media Controller and Hub Combo
            SMSC USB2640i/USB2641i


                                                                          To Upstream        Upstream USB             24 MHz
                                                                                                            3.3 V                 1.8 V
                                                                              VBUS                Data                Crystal
                                                                                                                       PLL                         Serial
                                                                            Bus-Power                                                            Interface                                             8051
                                                                                              Upstream
                                                                            Detect/VBUS                              1.8 V Reg                                                      SFR             PROCESSOR
                                                                                                PHY
                                                                              Pulse                                                                                                 RAM
            SMSC USB2640i/USB2641i
                                                                                                                       Serial
                                                                                                                     Interface
                                                                                              Repeater                                           Controller                                                                               SPI (4 pins) /
                                                                                                                      Engine                                                   RAM                                                 SPI
                                                                                                                                                                                                                                          GPIO (2 pins)
                                                                                                                                                                                6K        ADDR
                                                                                                                                                                               ROM        MAP                                 PWR_FET0    GPIO10 (CRD_PWR)
                                                                                                                                                                               64 K                                               GPIOs   6 pins
                                                                                                                    Transaction
                                                                                                                                          Port Controller
                                                                                                                     Translator                                                                               Program Memory I/O Bus
                                                                                                                                                                                                         XDATA BRIDGE
                                                                                                                                                                                                         + BUS ARBITER
                                                                                                                                                                                     EP0 TX
                                                                                                                                                                                     EP0 RX
            7                                                                                                                                                        3K
                                                                                                                                                                                                  BUS
                                                                                                                                                                    total             RAM
                                                                                                                                                                                                 INTFC
                                                                                                                                                                                                                                                             Industrial Temperature USB 2.0 Flash Media Controller and Hub Combo
                                                                                              Routing & Port Re-Ordering Logic                                                                                             AUTO_CBW
                                                                                                                                                                                     EP2 RX                                  PROC
                                                                                                                                                                                     EP2 TX
                                                                                                                                                                                                                           BUS     FMDU
PRODUCT PREVIEW
                                                                                                                                                                                                                          INTFC     CTL
                                      Figure 2 USB2641i Block Diagram
                                                                                   Port #3                           Port #2
                                                                                    OC                                OC
                                                                                   Sense                             Sense                                    SIE            BUS
                                                                           PHY     Switch
                                                                                                            PHY      Switch
                                                                                                                                                BRIDGE                      INTFC
                                                                                                                                                              CTL                                                                  FMI
                                                                                   Driver                            Driver
                                                                                                                                                                                                                                  SD/
                                                                                                                                                                                                                     MS
                                                                                                                                                                                                                                  MMC
                                                                                                                                                                                                                           Flash Media
                                                                         USB Data  OC Sense/              USB Data OC Sense/                                                                                                  Cards
                                                                        Downstream Pwr Switch            Downstream Pwr Switch                                                                                           (require Combo
                                                                                                                                                                                                                             socket)
            Revision 2.1 (06-29-09)


                                  Industrial Temperature USB 2.0 Flash Media Controller and Hub Combo
Package Outline
                        Figure 3 48-Pin QFN Package
Revision 2.1 (06-29-09)                8                                    SMSC USB2640i/USB2641i
                         PRODUCT PREVIEW


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Microchip:
 USB2640I-HZH-02-TR
