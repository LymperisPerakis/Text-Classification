                                                                                                        MIC2555
                                                                                                USB – OTG Transceiver
General Description                                                          Features
MIC2555 is a USB On-The-Go (OTG) transceiver                                 • Complies with USB-IF USB standard 2.0 and OTG
designed to enable intelligent self-powered devices to                           supplement Revision 1.0a.
communicate on a peer-to-peer basis with other USB and                       • Provides signaling and control logic for SRP and HNP,
USB OTG enabled devices. Designed to perform as a                                enabling USB Dual-role device operation.
PHY for USB Serial Interface Engines (SIE), MIC2555 is
                                                                             • Designed for Full-speed and Low-speed USB
compatible with a wide variety of stand-alone OTG SIE
                                                                                 communications.
chips, OTG IP cores (used in ASIC and COT designs), and
Application Specific Standard Products (ASSPs).                              • I2C controller interface.
MIC2555 is fully compliant to USB-IF’s Universal Serial                      • Offers 3 modes of operation:
Bus Specification 2.0 and the On-The-Go Supplement Rev                       • USB
1.0a, for Low speed and Full speed operation, and allows                     • UART
dual-role device (DRD) operation via an I2C based                            • Audio
controller interface. The controller’s robust register set
permits full control over bus and interface activity for                     • Operates with VLOGIC of 1.6V – 4.5V, assuring
transacting Session Request Protocol (SRP) and Host                              compatibility with low voltage ASICs.
Negation Protocol (HNP) sequences.                                           • Tri-level ID detection for recognition of USB and non-
Messaging between Host and Target devices can utilize                            USB devices.
either USB or UART signaling methods. Additionally, the                      • Supports USB /Car Kit audio interface.
MIC2555 permits audio signaling on its D+, D- and ID lines                   • Allows Single-ended and Differential Logic I/O.
in support of analog car kit applications.                                   • Integrated charge pump for VBUS supply.
USB communication is complemented with on-chip D+, D-                        • On-chip pull-up, pull-down resistors minimize external
pull-up/pull-down resistors, an integrated charge pump and                       component count.
low dropout voltage regulators to provide stable internal
                                                                             • Suspend and Power-down modes for power
supply voltages and to supply VBUS power when operating
                                                                                 conservation.
as an A-device. Logic input levels spanning 1.6V to 4.5V
ensure compatibility with current and future generations of                  • Operates over the full Industrial Temperature range: –
process technology.                                                              40°C to +85°C.
The MIC2555 is offered in a space saving 4mm x 4mm                           Applications
24-pin MLF® package. Data sheets and support
                                                                             •  Cellular Telephones
documentation can be found on Micrel’s web site at
www.micrel.com.                                                              •  PDAs
                                                                             •  Digital Still Cameras
                                                                             •  Camcorders
                                                                             •  Data Cradles
                                                                             •  CD and MP3 players
                                                                             •  Printers
  MLF and MicroLead Frame are registered trademarks of Amkor Technology, Inc.
        Micrel Inc. • 2180 Fortune Drive • San Jose, CA 95131 • USA • tel +1 (408) 944-0800 • fax + 1 (408) 474-1000 • http://www.micrel.com
  December 2006                                                                                                                    M9999-121406


Micrel, Inc.                                                                                                                  MIC2555
Ordering Information
                          Part Number                                                Junction
                                                                Address                                     Package
               Standard                   Pb-Free                                  Temp. Range
         MIC2555-0BML                   MIC2555-0YML               0x            –40°C to +85°C            24-pin MLF®
         MIC2555-1BML                   MIC2555-1YML               1x            –40°C to +85°C            24-pin MLF®
Typical Application
                                  VCC
                    System                VDD                   VBAT            VTRM
                 Supply Voltage                                                                             VBUS
                                                                VDD_LOGIC       VBUS
                                                                OE_INT/            ID
                                                                RCV MIC2555                RS                       USB
                                          USB SIE                                                            D+     Port
                                          Controller            DAT_VP_RX        D+
                                                                SE0_VM_TX        D–                          D–
                                                                                           RS               GND
                                                                SCL
                                                                SDA
                                                                CAP+
                                                                CAP-                        10µF   4.7µF
                                                                          GND CAP++
                                                       0.22µF
                                                                                           220µF
                                                    MIC2555 Typical Application Circuit
Pin Configuration
                                                                       VDD_LGC
                                                                       GND_A
                                                                       CAP-
                                                                       VBAT
                                                                       CAP+
                                                                       CAP++
                                                        RCV                             VTRM
                                                  SE0_VM_TX                             VBUS
                                                  DAT_VP_RX                             D-
                                                     OE_INT/                            D+
                                                        INT/                            ID
                                                  GPIO_0_RX                             GND_D
                                                                       GPIO_1_TX
                                                                             SCL
                                                                             SDA
                                                                           ADR0
                                                                          RESET/
                                                                          GPIO_2
                                                        4mm × 4mm 24-pin MLF (ML)
December 2006                                                               2                                              M9999-121406


 Micrel, Inc.                                                                                           MIC2555
Pin Description
       Pin Number Type  Pin Name Pin Description
              1     O      RCV   Output from differential receiver.
                                 = SE0 in USB DAT-SE0 mode
                                 = VM in VP-VM mode.
              2    I/O SE0_VM_TX
                                 = UART Transmit output when in UART Mode
                                   See figures 1 and 2 on page 4
                                 = DAT in USB DAT-SE0 mode.
                                 = VP in VP-VM mode
              3    I/O DAT_VP_RX
                                 = UART Receive input when in UART mode
                                    See figures 1 and 2 on page 4
                                 A Multi-mode pin controlling various functions in conjunction with
                                 control register bits. A logic LOW on this pin gives the following
                                 results:
              4    I/O   OE_INT/
                                 = OE (Output Enable): Enables D+, D- as USB outputs.
                                 = INT/ (Interrupt): Active LOW output when register bits ‘suspend’ and
                                 ‘oe_int_en’ both = 1.
                                 Interrupt (bar). Open Drain Active LOW output. May be wire-ORed
              5     O      INT/
                                 with other interrupt signals.
                                 = General purpose I/O. Open drain output.
              6    I/O GPIO_0_RX = Alternate UART Receive input.
                                    See figures 1 and 2 on page 4
                                 = General purpose I/O. Open drain output.
              7    I/O GPIO_1_TX = Alternate UART Transmit output.
                                    See figures 1 and 2 on page 4
              8    I/O     SCL   I2C Clock
              9    I/O     SDA   I2C Data
                                 Sets Address bit A0 of I2C controller. This pin is a digital input and
             10      I   ADR_0
                                 must not be left floating.
             11      I   RESET/  System reset. Active LOW.
             12    I/O   GPIO_2  General purpose I/O. Open drain output.
             13    I/O   GND_D   System Digital ground.
                                 Identification input. Monitors the ID pin of the USB connector and
             14    I/O      ID
                                 indicates both the presence of a device and type (USB or not USB).
                                 = USB D+ when in USB mode.
                                 = UART Receive in UART mode.
             15    I/O      D+
                                 = Right Speaker audio output in stereo mode.
                                 = Microphone signal from Car Kit.
                                 = USB D- when in USB mode.
                                 = UART Transmit out in UART mode.
             16    I/O      D-
                                 = Left Speaker audio output in stereo mode.
                                 = Monaural audio output to Car Kit.
             17    I/O    VBUS   USB 5V power.
             18    I/O    VTRM   Internal 3.3V supply. Sets USB signal levels.
             19      I   CAP++   Positive lead for charge pump reservoir capacitor.
             20      I    CAP+   Positive lead for charge pump capacitor.
                                 Positive voltage from battery. Supplies power to MIC2555 internal
             21      I    VBAT
                                 circuitry and power for charge pump when driving VBUS.
             22      I    CAP-   Negative lead for charge pump capacitor.
             23      I   GND_A   Analog ground. Isolated Charge Pump ground.
                                 Logic supply voltage. Used to set logic levels between MIC2555 and
             24      I  VDD_LGC
                                 System Controller / ASIC.
 December 2006                                 3                                                    M9999-121406


 Micrel, Inc.                                                                                              MIC2555
Interconnect Diagrams
                                 Host Controller 1
                                                                  MIC2555
                                       SIE                     SE0_VM_TX
                                                                                                   UART
                                       I2C                     DAT_VP_RX
                                                                          D+                     TX
                                               2:1
                                                                           D–                    RX
                                      UART
                                         Figure 1. Controller with Multiplexed Serial Interfaces
                                 Host Controller 1
                                                                  MIC2555
                                       SIE                     SE0_VM_TX
                                                                                                   UART
                                       I2C                     DAT_VP_RX
                                                                          D+                     TX
                                                                           D–                    RX
                                                               GPIO_0_RX
                                      UART
                                                               GPIO_1_TX
                                           Figure 2. Controller with Parallel Serial Interfaces
NOTE 1
Examples of Host Controller are:
  • Baseband Processor/IC
  • µProcessor
  • Modem
 December 2006                                                        4                                 M9999-121406


 Micrel, Inc.                                                                                                                                                                 MIC2555
Absolute Maximum Ratings(1)                                                                          Operating Ratings(2)
Power Supply Voltage:                                                                                Power Supply Voltage:
     VBAT, GPIO- ................................................. -0.3V to +6.0V                         VBUS .......................................................... 4.4V to 5.25V
     VDD_LGC ......................................... –0.3V to +6.0V and ≤ VBAT                          VBAT ............................................................ 3.0V to 4.5V
USB Bus Voltage                                                                                      Operating Temperature................................ –40°C to +85°C
     VBUS ......................................................................–0.3V to +6.0V       Package Thermal Resistance .................................. 49°C/W
     VDD_LGC ......................................... –0.3V to +6.0V and ≤ VBUS
Voltage On Any Other Pin............................ –0.3V to +4.5V
Current Into/Out of Any Pin .......................................±10mA
Junction Temperature ................................................ 150°C
Storage Temperature .................................–65°C to +150°C
ESD Ratings:..............................................VBUS, D+, D–, ID
     Human Body Model .............................................. 15 kV
ESD Ratings:................................................... All other pins
     Human Body Model ................................................ 2 kV
Electrical Characteristics(3)
Test condition is 25°C unless otherwise specified. Bold indicates -40°C + 85°C,
VBAT = 3.6V, VDD_LGC = 3.6V, VBUS = 5.0V, VTRM = 1µF, C+ = 0.22µF, C++ = 220µF, CVBUS = 10µF
 Symbol              Parameter                                                  Condition                                                  Min            Typ            Max       Units
 Power Supplies
 VBAT                System Supply Voltage                                                                                                  3.0                           4.5        V
 VDD_LGC             Logic Supply Voltage                                                                                                   1.6                          VBAT        V
                     Termination Voltage (internal
 VTRM                                                                           ITRM ≤ 2.5mA, 3.0 < VBAT < 3.6V                             2.8           3.3             3.6        V
                     supply voltage)
 IBAT_PD             System Supply Current                                      Power Down mode                                                            13             20        µA
 IBAT_SUS            System Supply Current                                      Suspend mode                                                              140            250        µA
                                                                                Full Speed, Idle, D+ ≥ 2.8V, D- ≤ 0.3V, IVBUS
 IBAT_FS_I           System Supply Current                                                                                                                2.8             5.0       mA
                                                                                = 0mA
                                                                                Full Speed Transmitting 12Mb/s,
 IBAT_FS_HC          System Supply Current                                                                                                                 17             40        mA
                                                                                CLOAD ≤ 350pF on D+, D-, IVBUS = 0mA
                                                                                Full Speed Transmitting 12Mb/s,
 IBAT_FS_LC          System Supply Current                                                                                                                2.5              6        mA
                                                                                CL = 50pF on D+,D-, IVBUS = 0mA
                                                                                Low Speed Transmitting 1.5Mb/s,
 IBAT_LS_HC          System Supply Current                                                                                                                6.5             12        mA
                                                                                CL = 350pF on D+,D-, IVBUS = 0mA
                     Current drawn by System
 IVBUS_S                                                                        Suspend mode, OE_INT/ = 1                                                  80            100        µA
                     from VBUS
                     Current drawn by System for
 IVDD_LGC                                                                       OE_INT/ = 1                                                                 7             15        µA
                     core logic
 Charge Pump and VBUS
 VBUS_ OUT           Voltage Output to VBUS                                     IBUS = 10mA, VBAT = 3.0V                                    4.4           5.0            5.25        V
 IVBUS               VBUS Output Current                                        4.4V ≤ VBUS ≤ 5.25V                                         10             27                       mA
                     B device SRP Pull-up
 RVBUS_PU                                                                       Pull-up voltage = VTRM                                     281           1300           7500         Ω
                     Resistor on VBUS
                     B device SRP Pull-down
 RVBUS_PD                                                                       Pull-down to GND                                           675           2300           7500         Ω
                     Resistor on VBUS
 December 2006                                                                                       5                                                                  M9999-121406


Micrel, Inc.                                                                                           MIC2555
Symbol        Parameter                    Condition                              Min     Typ     Max      Units
RA_BUS_IN     VBUS Input Resistance        Seen from VBUS pin to GND               40      63      100      kΩ
              ‘VBUS Valid’ Comparator
VTH_VBUS                                                                           4.4    4.5      4.6       V
              Threshold Voltage
              “Session Valid’ Comparator
VTH_SV                                                                             0.8    1.4      2.0       V
              Threshold Voltage
              “Session End’ Comparator
VTH_SE                                                                             0.2    0.4      0.8       V
              Threshold Voltage
ID
              Upper Threshold for ID
VTHH_R_ID                                  VBAT = 3.0V                            2.45   2.55     2.65       V
              Resistor Sensing
              Lower Threshold for ID
VTHL_R_ID                                  VBAT = 3.0V                            0.35   0.42     0.55       V
              Resistor Sensing
              Pull-up Resistor switched to
RID_PU        ID for detecting non-USB                                             70      90      130      kΩ
              devices
              Weak Pull-up current source
IID_WPU                                    VID = 0V                                 2      4        6       µA
              driving ID pin
                                           VID ≤ 200mV
RID_SW_GND    Interrupt Pulse Switch                                                      1.0      4.0      kΩ
Logic Levels - SDA, SCL, ADR0, OE_INT/, SE0_VM_TX, DAT_VP_RX, RCV, INT/, RESET/ & GPIO
VIL           LOW-Level Input Voltage                                                             0.3x       V
                                                                                                 VDD_LGC
                                           SDA, SCL                               0.7x
VIH           HIGH-Level Input Voltage                                                                       V
                                                                                VDD_LGC
              Input Hysteresis                                                    100                       mV
VIL           LOW-Level Input Voltage      ADR0, OE_INT/, SE0_VM_TX,                              0.15x      V
                                           DAT_VP_RX, RCV, INT/, RESET/ & GPIO                   VDD_LGC
                                           Applies to USB and UART modes.        0.85x
VIH           HIGH-Level Input Voltage                                                                       V
                                                                                VDD_LGC
IIN_LGC       Input Leakage Current        1.6V ≤ VDD_LGC ≤ 4.5V                   -5              +5       µA
VOL           LOW-Level Output Voltage     IOL = 100µA                                    .02      0.1       V
                                                                                  0.9x
VOH           HIGH-Level Output Voltage    IOH = 100µA                                                       V
                                                                                VDD_LGC
              LOW-Level Output Voltage at                                                         0.3x
VOL_SDA                                    IOL = 5mA                                                         V
              SDA pin                                                                            VDD_LGC
              HIGH-Level Output Voltage at                                        0.7x
VOH_SDA                                    RSDA_PU = 3.0K                                                    V
              SDA pin                                                           VDD_LGC
              LOW-Level Output Voltage at
VOL_GPIO                                   IOL = 10mA                                     150      250      mV
              GPIO pins
              HIGH-Level Output Voltage at                                              VDD_PU –
VOH_GPIO                                   RPU = 3.0K                                            VDD_PU      V
              GPIO pins                                                                  0.1V
              GPIO Output driver leakage
IOH_GPIO                                   VDD_PU = VOH_GPIO = 5V                          1        30      µA
              current
December 2006                                                  6                                  M9999-121406


Micrel, Inc.                                                                                              MIC2555
Symbol       Parameter                          Condition                                 Min  Typ   Max      Units
Transceiver DC Characteristics - D+, D-
VDI          Differential Input Sensitivity     |(D+) – (D-)|, VIN = 0.8V – 2.5V          0.2                   V
             Differential Common-Mode
VCM                                             Includes VDI Range                        0.8         2.5       V
             Range
             Single-Ended Receiver
VTH_SE                                                                                    0.8   1.5   2.0       V
             Threshold
VHYS         Receiver Hysteresis                D+, D-                                         200             mV
VOL          LOW-Level Output Voltage           OE_INT/ = 0, RL = 1.5kΩ to 3.6V                 0.1   0.3       V
VOH          HIGH-Level Output Voltage          OE_INT/ = 0, ISOURCE = 1mA                2.8   3.3   3.6       V
             Transceiver Output
RDRV                                            D+, D-                                     5    12     24      Ω
             Resistance
             Internal Pull-Up Resistor on                                         Active 1.425 2.25  3.09      kΩ
RPU_D                                           VTRM to D+ or D-
             D+ and D-                                                            Idle   0.900 1.24  1.575     kΩ
             Internal Pull-Down Resistor or
RPD_D                                           D+ to GND, D- to GND                     14.3  19.5  24.8      kΩ
             D+ and D-
             Transceiver Input                  D+, D- pins to GND
CIN_D                                                                                                  20      pF
             Capacitance                        See Note 4
             Interrupt Detector Threshold
VTHL_INT_HI                                                                               2.5   3.0   3.3       V
             HIGH
             Interrupt Detector Threshold
VTHL_INT_LO                                                                               0.3   0.5   0.7       V
             LOW
Transceiver AC Characteristics - D+, D-
                                                DC bias (pin to GND) = 0.4V
VC2C         Channel-to-Channel Isolation       AC signal = 600mVp-p
             between D+, D- and ID pins                                                   -60                  dB
             (in audio mode)                    Freq. = 2kHz
                                                See Note 4
                                                0V < VD < 3.6V, f = 2kHz OE_INT/ = 1
             High-Z State Output                Measured at D+, D- pins, with respect to
ZOUT_3S_D                                                                                 300                  kΩ
             Impedance                          GND
                                                See Note 4
Data Rate
FI2C         I2C signaling rate                 VBAT = 3.6V                               100  400            kbps
                                                VBAT = 3.0V                               100  200            kbps
Driver Characteristics - Full Speed     TAMB = 25°C
             Transition Time:                   CL = 50pF to 125pF
tR_FS        Rise Time                                                                     4   12.5    20      ns
tF_FS        Fall Time                          See Note 4                                 4   12.5    20      ns
tR / tF      Rise/Fall Time Matching            (TR/ TF)                                   90       111.11     %
             Output Signal Crossover
VCRS                                                                                      1.3         2.0       V
             Voltage
                                                LOW to HIGH
tPLH                                                                                                   18      ns
             Propagation delay                  HIGH to LOW
tPHL                                                                                                   18      ns
                                                See Note 4
December 2006                                                          7                            M9999-121406


 Micrel, Inc.                                                                                    MIC2555
 Symbol           Parameter                             Condition                   Min Typ Max      Units
                  Driver Disable to Tri-State           HIGH to OFF
                                                                                              15      ns
 TPDZ             delay                                 LOW to OFF
                                                                                              15      ns
                  (Full or Low Speed)                   See Note 4
                  Driver Tri-State to Enable            OFF to HIGH
                                                                                              15      ns
 TPZD             delay                                 OFF to LOW
                                                                                              15      ns
                  (Full or Low Speed)                   See Note 4
 Driver Characteristics - Low Speed           TAMB = 25°C
                  Transition Time:                      CL = 350pF
 tR_LS            Rise Time                                                         75  245  300      ns
 tF_LS            Fall Time                             See Note 4                  75  265  300      ns
 tR / tF          Rise/Fall Time Matching               (TR / TF)                   80   90  125      %
                  Output Signal Crossover
 VCRS                                                                               1.3 1.7  2.0      V
                  Voltage
 Receiver Characteristics - Full Speed / Low Speed
 Differential Receiver
                                                        LOW to HIGH
 tP_LH                                                                                        15      ns
                  Propagation delay                     HIGH to LOW
 tP_HL                                                                                        15      ns
                                                        See Note 4
 Single-Ended Receivers
                                                        LOW to HIGH
 tP_LH                                                                                        18      ns
                  Propagation delay                     HIGH to LOW
 tP_HL                                                                                        18      ns
                                                        See Note 4
 ESD(3)
                  Electro Static Discharge              D+, D-, ID, and VBUS to GND
 VESD                                                                               ±15               kV
                  Voltage                               Human Body Model
                  Electro Static Discharge
 VESD                                                   All pins Human Body Model    ±2               kV
                  Voltage
Notes:
1. Exceeding the absolute maximum rating may damage the device.
2. The device is not guaranteed to function outside its operating range.
3. Specifications are for packaged product only.
4. Parameters are guaranteed by design. They are not production tested.
 December 2006                                                             8                M9999-121406


 Micrel, Inc.                                                                         MIC2555
Functional Diagram
                              VTRM              C-       C+    C++
                                              Voltage Doubler and
                       VBAT   VTRM                                          VBUS
                                                  5V Regulator
                    VDD_LGC                            VBUS
                                                   Comparator
                       INT/
                       SDA   Serial                ID Detector              ID
                            Controller
                       SCL                           Interrupt
                                                    Detector
                    RESET/
                                                               Pull-Up/Down
                     ADR_0                                       Resistors
                 GPIO_1_TX                   TXD
                              MUX
                GPIO_0_RX                      RXD                          GPIO_2
                DAT_VP_RX                                                   D+
                                             Diff
                SE0_VM_TX                    TX                             D-
                   OE_INT/                                                  GND_A
                                                     SE                     GND_D
                                                     D+
                               Pull-Up/Down          SE
                       RCV        Resistors           D-
                                                     Diff
                                                     RX
                                     MIC2555 Block Diagram
 December 2006                                    9                                M9999-121406


  Micrel, Inc.                                                                                                                MIC2555
Functional Description                                                     System Description
The MIC2555 is designed to provide full USB On-The-                        Overview:
Go (OTG) connectivity in mobile systems where low                          The MIC2555 OTG Transceiver provides the physical
power and small size are key considerations. Intended                      interface for ASICs, uPs and SOCs having an On-The-
for use in self-powered systems, the MIC2555 draws no                      Go Serial Interface Engine (SIE) but lacking a physical
current from VBUS for its operation, but will supply a                     interface capable of driving cables, or generating and
minimum of 10mA at 5V to VBUS, from an on-chip                             detecting the necessary voltages to operate as a USB
charge pump, when operating as an A-device. The                            host.
MIC2555 meets USB physical layer specifications while                      MIC2555 goes beyond the confines of the USB OTG
operating with logic supply voltages as low as 1.6V and                    standard and provides flexible communication between
battery voltages down to 3.0V.
                                                                           many kinds of digital devices. Point-to-point UART and
MIC2555 operation is controlled through an I2C bus by                      Audio communications can also be accomplished using
reading and/or writing to registers within the MIC2555.                    the MIC2555 and any and all of these formats can be
Control registers are used to set the operational mode to                  utilized by a single system.
USB, Audio or UART (‘RS232’ format). Other features                        All communications are accomplished via the D+ and D-
include VBUS comparators for SRP detection and ID pin                      I/O pins. The information passed through D+ and D-,
recognition of USB and non-USB peripherals.
                                                                           such as USB, UART, or audio, depends upon the mode
The MIC2555 minimizes collateral components,                               of communication. The system controls the mode of
requiring only 4 external capacitors and two resistors. All                communication through the MIC2555’s control registers.
USB required pull-up/pull-down resistors are on-chip.
15KV ESD protection on all pins exposed to user contact                    Modes of Operation
(VBUS, D+, D-, ID and GND) eliminates the need for                         The MIC2555 OTG Transceiver has five distinct
external ESD transient protection devices.                                 operating modes:
Definitions and Conventions                                                •     USB mode: Operates as a USB OTG transceiver.
  Car Kit              =    A non-USB target device                        •     UART mode: Operates as a UART transceiver
   2
  IC                   =                   2
                            Inter IC Bus (I C)                             •     Audio mode: Operates as a passive device within
  NUT                  =    non-USB target device                                the audio path, but actively monitoring for digital
       (1)                                                                       control signals.
  OTG                  =    On-The-Go
  SIE                  =    Serial Interface Engine                        USB mode
  SE0                  =    Single Ended Zero                              The two modes of USB operation involve the way data is
                                                                           transferred between the SIE and the transceiver. These
  SRP                  =    Session Request Protocol                       modes are:
  USB                  =    Universal Serial Bus                           •     DAT-SE0 mode:
                                                                                 - DAT_VP_RX Æ.DAT: single ended data I/O
  USB-IF               =    USB Implementers Forum                               - SE0_VM_TX Æ SEO: detects or sends the SE0
                                         2                                         condition.
  Serial                    Means the I C control function within
                       =
  Controller                MIC2555.                                             - RCV is not used
  UPPER CASE           =    IC pins
                                                                           •     VP-VM mode:
  Lower case           =    Control Register Bits                                - DAT_VP_RX Æ VP: D+ data to transceiver output.
Note:                                                                            - SE0_VM_TX Æ VM: D- data to transceiver output.
  1. An ‘OTG Controller’ is understood to be any integrated circuit, or          - RCV ÆOutput of the differential receiver.
     system, possessing a built-in USB OTG Host/Device control
     function but lacking the USB physical layer interface.                Data flow direction:
                                                                                 Transmit Æ OE_INT/ = 0
                                                                                 Receive Æ OE_INT/ = 1
                                                                           Conditions for USB mode:
                                                                                 uart_en = 0
                                                                                 Speed = Low speed =0
                                                                                           Full speed = 1
  December 2006                                                         10                                                 M9999-121406


  Micrel, Inc.                                                                                                      MIC2555
UART mode                                                       Suspend power:
There are two UART modes of operation:                          The differential transmitter and receiver are turned off to
                                                                conserve power but the USB interface is still active (i.e.,
•    Direct UART:                                               pull-ups and pull-downs still active, VBUS generation on,
     - UART TX Æ SE0_VM_TX pin, data is output on D-            etc.).
     - UART RX Å DAT_VP_RX pin receives UART data from
       D+.                                                      Conditions:
                                                                     suspend = 1
•    Secondary UART:
                                                                     pwr_dn = 0
     - UART TX Æ GPIO_1_TX pin, data is output on D-
     - UART RX Å GPOI_0_RX pin, received from D+.               Power Down:
Conditions for UART mode:                                       Only the serial interface is still active and the transceiver
                                                                is able to detect SRP. The ID pin sensing may be turned
     uart_en = 1                                                on or off with a control bit in the control registers.
     speed = 1
                                                                Conditions:
     uart_io = Direct UART = 0
                                                                     suspend = 1
                Secondary UART inputs (GPIO) = 1
                                                                     pwr_dn = 1
Note:
                                                               Functions Powered Down                      Control Bit
It is not necessary to reset uart_io when switching from
UART to USB mode; uart_io is deactivated when                  By Control Bit                      suspend    pwr_dn    cp_off
uart_en = 0, so its setting will not effect DAT_VP_RX or       Differential Driver                     ●
SE0_VM_TX’s operation in USB mode.
                                                               Differential Receiver                   ●
Audio Mode                                                     UART TXD                                ●
There is one mode of Audio operation. In audio mode,           D+ interrupt comparators                ●
the MIC2555’s D+ and D- outputs are Tri-Stated (high           VBUS Comparators                                   ●
impedance) and the OTG controller or system
                                                               VTRM LDO                                           ●
components can send and receive audio signals via the
D+, D- lines. The MIC2555 will monitor the D+ line for         VBUS output                                        ●
voltages crossing one of two levels, as a means of             Internal biasing circuits and
                                                                                                                  ●
detecting a car kit interrupt signal. These interrupt events   band gap reference
are captured and flagged by the Serial Controller.             Charge Pump off                                    ●       ●
Conditions:
                                                                                   Power Management Table
     uart_en = 0
     OE_INT/ = 1                                                Note: Suspend and Power-Down bits operate
     cr_int_sel = detect @ 3.0V = 1                             independently of each other. Activating Power-Down
                                                                does not automatically invoke Suspend.
                  detect @ 0.5V = 0
                                                                For lowest power operation Suspend, Power-Down and
Note:                                                           Charge Pump OFF modes must be activated:
The MIC2555 has no provision to connect or disconnect           Conditions:
audio devices from the D+, D- lines, so the designer is                   suspend = 1
cautioned to be sure that when the MIC2555 is operating
                                                                          pwr_dn = 1
as a data transceiver, no damage will ensue if the
system’s audio components are exposed to USB or                           cp_off = 1
UART digital signal levels.                                     Circuits still operating:
                                                                          ID detect and D- receiver continue to function.
Power Management
                                                                          This includes the ID comparators, ID pull-up
The transceiver’s power modes are:                                        circuits, and D- data receiver.
Active power:
All functions active, transceiver fully powered.
Conditions:
     suspend = 0
     pwr_dn = 0
  December 2006                                              11                                               M9999-121406


  Micrel, Inc.                                                                                                               MIC2555
Serial Controller Block                                                                                                 VBUS
                                                                                                                      Output
The Serial Controller manages MIC2555 operations.                          Cap-                Cap+ Cap++             Enable
Turning ON/OFF features, changing operating modes,
setting and selecting interrupts are all handled by the        VBAT             Charge Pump
                                                                                and Regulator
Serial     Controller.    MIC2555’s     Serial   Controller
communicates with the OTG Controller as an I2C slave
using the SCL and SDA pins.                                                              VTRM               2.3k
                                                                                         3.3V
The Serial Controller includes the following functions:
•    Control registers                                                                                                Charge        VBUS
                                                                                                                        VBUS
•    Status registers
•    Interrupt latches                                                                   VBUS
•    Interrupt enable registers                                                          Valid
                                                                                                                   4.4V
•    Interrupt clear registers
•    Interrupt generator                                                              Session
                                                                                         Valid
                                                                                                                   1.4V
VBUS Charge Pump and 5V regulator
The charge pump draws power from VBAT and boosts
the voltage to the requisite 5V to power VBUS. This                                   Session
subsystem is actually a combination of a charge pump                                      End
                                                                                                                   0.5V
circuit and a control loop that gates the charge pump’s
oscillator. If the output voltage is below 5V, then the
oscillator is ON; otherwise, the oscillator is gated OFF.
                                                                                                                 2.3k           68k
The charge pump’s maximum output is controlled by the
magnitude of VBAT. When VBAT is at 3.0V, the charge                                                 Discharge
pump is designed to support loads of at least 8 mA on                                                    VBUS
VBUS. As VBAT increases, the maximum charge pump
output current also increases. For proper operation the
charge pump circuit requires 2 capacitors; one for the
                                                                                           VBUS Circuitry
voltage doubler, connected between C- and C+, and a
reservoir/filter capacitor between C++ and ground. The         VBUS Resistors and Switches
charge pump’s nominal operating frequency is 200 kHz,
which is set by an on-chip oscillator. A special feature of    MIC2555 is able to:
MIC2555 is that an external oscillator can drive the           •    charge up VBUS through a resistor
charge pump as well, allowing the designer to shift            •    initiate SRP
radiated noise away from sensitive frequencies when
                                                               •    pull down VBUS through a resistor to ground
necessary. Also, when 5V power is not required from
VBUS, the charge pump can be shut down to conserve             •    discharge VBUS before initiating SRP
power.                                                         • switch VBUS power from the charge pump ON/OFF
                                                               Dedicated bits in the control registers control all of these
                                                               functions. Because these bits act independently, it is
                                                               possible to have VBUS both charging and discharging at
                                                               the same time. This situation will not harm the MIC2555.
                                                               To prevent system leakage currents from biasing VBUS
                                                               to a voltage that would mimic a session valid condition,
                                                               the MIC2555 maintains a 68K resistor between VBUS
                                                               and ground to insure that at no time will VBUS assume a
                                                               floating condition.
  December 2006                                             12                                                        M9999-121406


  Micrel, Inc.                                                                                                       MIC2555
VBUS Comparators                                                                                  VTRM
VBUS Comparators monitor the voltage level of VBUS.
As described in the USB On-The-Go Supplement, VBUS                                  Controlled by
not only supplies power but also is used to signal various                           Register Bits
operational conditions as part of the SRP protocol.                                                    1.5k       1.5k
Depending upon the voltage on VBUS, three states of
                                                                         DAT_VP
operation can be defined:
                                                                         SE0_VM
•    VBUS Valid                                                          OE_INT/
•    Session Valid
•    Session End.                                                           RCV
VBUS Valid Comparator
                                                                                     Single
This comparator is used by an A-device to determine                                  Ended
                                                                                    Decoder
whether the voltage on VBUS is at a valid level for
operation. The minimum threshold for the VBUS valid
comparator is 4.4V. Any voltage on VBUS below the
threshold of the VBUS valid comparator is considered a                                                 1.5k       1.5k
fault. During power up, it is expected that this
comparator’s output will be ignored.                                                Controlled by
                                                                                     Register Bits
Session Valid Comparator
The session valid comparator determines when VBUS is
high enough for a session to start. Both the A-device and         Resistors and Circuitry associated with D+, D– Pins
B-device use this comparator to detect when a session
is being started. The A-device also uses this comparator      ID Detector
to indicate when a session is over.                           The ID function, defined within the USB On-The-Go
The session valid window for an A-device is 0.8 – 2.0V        supplement, represents a new addition to the USB
while the session valid window for a B-device is 0.8 –        standard. It is used to detect the presence or removal of
4.0V. Because these ranges overlap the A-device               a peripheral device as well as to differentiate between
window is typically chosen to service both requirements       USB and non-USB peripherals. ID is unique to the mini-
and a single comparator can be used. This is the case         USB connectors and receptacles.
with MIC2555.                                                 MIC2555’s ID Detector is operational in both the Active
                                                              and Suspended power modes, and differentiates
Session End Comparator                                        between three conditions:
The USB OTG Supplement specifies that a B-device
cannot initiate SRP unless VBUS is below the B-device                ID Pin
                                                                                  Device Status                   VID
Session End threshold of 0.8V. Monitoring VBUS with a             Condition
comparator will give an exact and positive determination                             No device
                                                                    Floating                                VID > 0.85VBAT
of when VBUS has dropped below 0.8V, but the USB                                       present
OTG supplement allows that the 0.8V limit can also be                               USB device
                                                                   Grounded                                 VID < 0.15VBAT
inferred, by discharging VBUS through a low value                                      present
resistor for a predetermined period. The MIC2555                   Grounded
                                                                                     Non-USB              0.15VBAT < VID >
provides both a session-end comparator and a                       through a
                                                                                  device present               0.85VBAT
discharging resistor. To accommodate either technique,              Resistor
the designer can use them individually or, in concert as      Here, ‘Grounded through a Resistor’ means a resistor of
he so chooses.                                                a considerable value, typically 100kΩ. The ID
                                                              comparators are set to ignore the modest resistances
Pull-up/down Resistors on D+, D-
                                                              contributed by the cables and connector contacts.
MIC2555 supplies the pull-up and pull-down resistors for
                                                              That a non-USB device is present (ID = resistive) is
termination     and      signaling    required    by USB
                                                              inferred from the interrupt register by the indication of an
specifications. These resistors are integrated within the
                                                              interrupt (ID has changed state) and that neither ID =
chip and switched into the circuit, as needed, via
                                                              GND or ID = Float are true. Viewing the Interrupt source
individual control bits in the control registers.
                                                              register will give the real time status of the ID
                                                              comparator outputs. Viewing this register is necessary to
                                                              determine the true state of affairs as insertion of the USB
  December 2006                                            13                                                  M9999-121406


  Micrel, Inc.                                                                                                 MIC2555
plug can produce multiple rail-to-rail transitions. These     Interrupt Detector
will trigger both comparators and produce a conflicting       When in Audio mode, the MIC2555 does not participate
result: ID = GND and ID = Float. The Interrupt source         in the audio transmissions, but monitors the D+ line for
register contains the debounced steady state value of         interrupt pulses. If the Serial Controller is configured to
ID.                                                           flag interrupt pulses, the system controller can exchange
After the nature of the newly connected device has been       both audio signals and digital information with the target
determined, activating a current source in series with the    device.
internal ID pull-up resistor can reduce power                 MIC2555 is designed to detect two different interrupt
consumption caused by ID sensing. This is                     pulses, those exceeding 3.0V and those crossing the
accomplished by clearing rcs_dis in Control Register 3.       0.5V level. Under normal circumstances, the audio
When the connected device is removed, and the ID pin          signal seen on D+ is transposed on a DC level and
is pulled HIGH by the current source (ID=GND is no            limited to voltage excursions between the 0.5V and 3.0V
longer true), MIC2555 automatically resets rcs_dis,           levels, so only interrupt pulses should cross these
disabling the current source.                                 thresholds. Signaling is typically done with only one
                                                              polarity pulse so MIC2555 is designed to monitor only
                                                              one threshold at a time. Threshold selection is done with
                        VBAT                                  the cr_int_sel bit, and the interrupt (cr_int) can be set to
                                                              trigger on pulses of either polarity.
              Open = Reduced                   4 µA
             ID sensing current
                                                              UART Mux
                                                              System controllers with UART communication ability
                                               100 k
                                                              may or may not be able to route their UART signals
                                                              through the VP, VM or DAT, SE0 pins. For those with
     ID High                       0.85x
                                   VBAT                       independent UART connectivity, MIC2555 provides a
                                                     ID       secondary UART I/O port. The MUX, under direction of
                                                              the Serial Controller, selects which UART I/O is used by
                                                              the OTG controller.
                                    0.15x                     Condition:
                                   VBAT
     ID Low                                                        uart_io = 0    SEO_VM_TX = transmit
                                                                                  DAT_VP_RX = receive
                      Closes to                                    uart_io = 1    GPIO_1_TX = transmit
                         signal
                     Peripheral                                                   GPIO_0_RX = receive
                                               1k
                                                              Differential Driver / Differential Receiver
                                                              Operation of the Differential Driver and Differential
                  ID Pin – Operational Diagram                Receiver is described in the tables below and on the
                                                              following page. The register bits used in the column
VTRM                                                          headings are described in the Serial Controller section of
VBAT powers VTRM, which supplies 3.3V power to the            this data sheet.
differential USB transmitter and the UART drivers and
receivers. As VBAT drops below 3.4V, VTRM is no
longer able to regulate and follows VBAT at about 0.1V
less than VBAT. When this occurs, output drive levels for
USB and UART are reduced accordingly.
  December 2006                                            14                                              M9999-121406


 Micrel, Inc.                                                                                        MIC2555
  USB mode: uart_en = 0
    suspend       dat_se0        OE_INT/       RCV     DAT_VP   SE0_VM       D+            D-
        0             0              0         DIFF     TX data TX data   DAT_VP        SE0_VM
        0             0              1         DIFF     SE_DP   SE_DM      RX data      RX data
        0             1              0          Z       TX data TX data    TX_DAT       TX_SE0
        0             1              1          Z         DIFF  RX_SE0     RX data      RX data
        1             0              1          Z       SE_DP   SE_DM      RX data      RX data
        1             1              1          Z       SE_DP   RX_SE0     RX data      RX data
  DIFF        = Differential receiver output
  RX_SE0      = not (SE_DP) and not (SE_DM)
  TX_DAT      = DAT_VP and not (SE0_VM)
  TX_SE0      = not (DAT_VP) and not (SE0_VM)
  Z           = Tri-State
  USB Transmit Operation
                                    Inputs                      Outputs
   USB Mode
                       DAT_VP_RX          SE0_VM_TX        D+    D-        RCV
                              0               0             0     1       unused
                              1               0             1     0       unused
   DAT-SE0
                              0               1             0     0       unused
                              1               1             0     0       unused
                              0               0             0     0      undefined
                              1               0             1     0          1
   VP-VM
                              0               1             0     1          0
                              1               1             1     1      undefined
The transceiver receives USB data from D+, D- lines when:
Conditions:
                 Uart_en = 0
                 OE_INT/ = 0
Operation of the DAT_VP_RX, SE0_VM_TX and RCV pins during receive is shown on the following page.
 December 2006                                              15                                    M9999-121406


  Micrel, Inc.                                                                                             MIC2555
   USB Receive Operation
                       Suspend             Inputs                           Outputs
    USB Mode
                                        D+          D-   DAT_VP_RX          SE0_VM_TX            RCV
                           0             0          0     undefined              1                n/a
                           0             1          0          1                 0                n/a
                           0             0          1          0                 0                n/a
                           0             1          1     undefined              0                n/a
    DAT-SE0
                           1             0          0          0                 1                n/a
                           1             1          0          1                 0                n/a
                           1             0          1          0                 0                n/a
                           1             1          1          1                 0                n/a
                           0             0          0          0                 0           undefined
                           0             1          0          1                 0                 1
                           0             0          1          0                 1                 0
                           0             1          1          1                 1           undefined
    VP-VM
                           1             0          0          0                 0                n/a
                           1             1          0          1                 0                n/a
                           1             0          1          0                 1                n/a
                           1             1          1          1                 1                n/a
If the transceiver is in the DAT-SE0 mode, and the          Single-Ended Receivers
suspend bit has not been set, then the DAT_VP_RX pin        The Single Ended Receivers detect the logic levels on
always follows the output of the differential receiver      the D+ and D- lines, and provide this information to the
during receive operation. The DAT_SE0 pin is not gated      Single Ended Decoder.
by the outputs of the single ended receivers. In the VP-
VM mode, the RVC pin always follows the output of the       Single-Ended Decoder
differential receiver. The RVC pin is not gated by the      Behavior of the Single-Ended Decoder is dependent
outputs of the singled ended receivers.                     upon the power mode of the transceiver. If transceiver is
                                                            in the Suspend power mode, and dat_se0 = 1 (DAT-SE0
   UART mode: uart_en = 1
                                                            mode), then the DAT_VP_RX pin will reflect the output
    suspend    DAT_VP    SE0_VM       D+         D-         of the D+ single ended receiver. This is necessary so
       0        SE_DP     TX data  RX data    SE0_VM        that a controller connected to the transceiver can detect
                                                            data pulsing while the transceiver is in suspended mode.
       1           Z         Z         Z          Z
   Z = Tri-State
  December 2006                                          16                                             M9999-121406


  Micrel, Inc.                                                                                                     MIC2555
Pin Descriptions                                                  VTRM can be used to supply small amounts of current to
                                                                  other system functions, typically 3 mA or less. However,
VBAT
                                                                  trying to source more current can reduce output drive on
This pin is an input, and supplies power to the                   D+, D- by stealing current from the differential driver.
transceiver. Transceiver typical operational voltages are
between 3.0 V ≤ VBAT ≤ 4.5V and 1.6V < VDD_LGC < VBAT.            ID
                                                                  ID detects the arrival or departure of a peripheral device,
VDD_LGC
                                                                  and differentiates between USB and non-USB devices.
This input is used to set the logic thresholds of the             To accomplish this, ID is pulled-up by a resistance of
following logic signals:                                          approximately 100 kΩ connected to VBAT and the voltage
•    DAT_VP_RX                                                    at ID monitored by a set of comparators. When no
•    SE0_VM_TX                                                    device is present, ID is pulled high and NO DEVICE
                                                                  condition is reported. When a Mini-A plug is inserted into
•    RCV                                                          the system’s Mini-AB receptacle, ID is connected to
•    OE_INT/                                                      ground by the Mini-A plug, which triggers the MIC2555
•    INT/                                                         to indicate a USB device is present.
•    ADR0                                                         Non-USB peripherals use a modified Mini-A plug or non-
                                                                  standard cable assembly with a resistor connected
•    RESET/                                                       between ID and ground. When connected, this forms a
•    GPIO                                                         resistor divider such that a voltage of approximately ½
                                                                  VBAT appears at MIC2555’s ID pin, indicating a non-USB
Important Note:                                                   device is present.
VDD_LGC can be at a voltage less than or equal to VBAT,           Additionally, ID can be used to signal non-USB devices.
but never higher than VBAT. Doing so will forward bias            This is accomplished by grounding ID through a low
internal pad protection diodes and current will flow from         value resistor (~ 1 kΩ), dropping the ID voltage from ½
VDD_LGC to VBAT. For this reason, systems should not              VBAT to nearly zero, which can be detected by the
allow VBAT to go to zero while VDD_LGC remains powered.           attached device. This switch is activated by the
This condition may damage the MIC2555, and could put              id_gnd_out bit in Control Register 2.
a severe load on VDD_LGC as it attempts to power the
MIC2555 and all other circuits attached to the VBAT line.         C-, C+, C++
                                                                  C-, C+ and C++ are the capacitors required for charge
VBUS
                                                                  pump operation. C- and C+ are the connections to the
This pin functions as both an input to, and output from,          ‘flying’ capacitor, which creates the pumping effect. C++
the transceiver. Unlike standard USB transceivers,                is the reservoir capacitor that stores the 5V supplied to
however, the MIC2555 always derives its operating                 VBUS when vbus_drv is asserted.
power from VBAT and never from VBUS. The MIC2555 will
                                                                  Because the input source is a low voltage and the
supply power to VBUS when acting as a host device and
                                                                  charge pump’s regulator is set to limit VOUT to 5V, these
when petitioning another OTG, capable device to
                                                                  capacitors need only be rated at 6 VDC, which helps
become the host. To do so the vbus_chrg bit is asserted.
                                                                  reduce physical size and cost.
To power VBUS, as a host device, the vbus_drv bit is
asserted. The difference between these two controls is            GND_A, GND_D
vbus_chg applies VTRM (3.3V) to VBUS, where as
                                                                  MIC2555 uses separate ground lines within the chip to
vbus_driv uses the 5V charge pump output. While VTRM
                                                                  isolate digital noise from analog signals. Ultimately,
is sufficient for signaling purposes, it does not meet the
                                                                  these two grounds need to be tied together. This is best
4.4V minimum for VBUS.
                                                                  done by having both grounds return separately to the
VTRM                                                              power source and join at the bypass capacitor.
VTRM supplies a regulated 3.3V to the D+, D- output               RESET/
drivers, pull-up resistors and other circuitry internal to the
                                                                  System reset. Returns all control register bits to their
MIC2555. A small filter capacitor is required to insure the
                                                                  default settings. MIC2555 is not equipped with an
regulator remains stable under all operating conditions.
                                                                  internal power-on reset generator, and thus relies upon
A good quality 1µF capacitor is sufficient for this
                                                                  the system for its reset at power up.
purpose.
  December 2006                                                17                                             M9999-121406


  Micrel, Inc.                                                                                                  MIC2555
DAT_VP_RX, SE0_VM_TX, RCV                                            OE_INT/
DAT_VP_RX, SE0_VM_TX and RCV provide the data                        The “output enable – interrupt bar” (OE_INT/) pin has
transfer interface between the system controller and                 three modes of operation, shown in the table below.
MIC2555. RCV is an output only pin, supplying the                    Suspend modes are controlled by the oe_int_en bit
output of a differential receiver monitoring the D+, D-              found in Control Register 1.
pins, while DAT_VP_RX, SE0_VM_TX are bi-directional
(I/O) pins and change function in accordance with
different USB and UART mode selections.
In UART mode, DAT_VP_RX and SE0_VM_TX are the
primary data transmit and receive pins.
In USB mode, the setting of the dat_se0 determines their
action, as described in the tables below.
OE_INT/ Operating Modes
     suspend     oe_int_en       I/O    Description
                                        OE_INT/ acts as output enable, and controls direction of DAT_VP_RX,
         0           x          Input
                                        SE0_VM_TX, D+ and D-
         1           0          Input   OE_INT/ is an input, but does not control anything
         1           1         Output   OE_INT/ is asserted low if interrupt condition exists
  December 2006                                                  18                                         M9999-121406


  Micrel, Inc.                                                                                                MIC2555
SCL, SDA                                                       GPIO_1_TX, GPIO_0_RX, GPIO_2
The serial clock (SCL) and serial data (SDA) signals           GPIO_0, GPIO_1, and GPIO_2 are general purpose
implement a two-wire I2C serial bus for control of the         I/Os that can be used as data ports or interrupt sources
MIC2555. As with all I2C busses the MIC2555 shares a           for the system controller, display drivers or power
common external pull-up resistor on each line.                 switches for actuators or annunciators.
                                                               These GPIO have open drain outputs capable of sinking
INT/
                                                               at least 10 mA, can be wire ORed together, and may be
The interrupt (INT/) pin is asserted while an interrupt        pulled above the MIC2555’s operating supply voltage,
condition exists. It is an open drain output so that it can    but not beyond the 6V absolute maximum allowed. As
be wire-ORed with other interrupt signals, and requires        logic inputs, the GPIO logic thresholds are standard
an external pull-up resistor to provide a logic output. The    CMOS thresholds set by VDD_LGC voltage.
pull-up voltage must not be greater than VBAT.
                                                               The GPIO Input Register is a read-only register and
ADR0                                                           shows real time status of the GPIOs, independent of
                                                               other I/O settings. The GPIO Output Register holds the
Because some systems may have more than one                    desired output value for each I/O. Each I/O can act as an
transceiver on the I2C bus, OTG Transceivers have been
                                                               independent interrupt source and can be programmed
assigned four I2C Address locations by convention.             for triggering on T Æ F, F Æ T, or both transitions
MIC2555 address: 01011xxb (Bit order: A6 Æ A0)                 simultaneously.
The ADR0 pin and MIC2555’s ‘dash number’ control the           The GPIO pins serve double duty as active signal pins
‘xx’ of MIC2555’s address, where –0 or –1 specifies the        when called into action by the appropriate control bit:
higher order bit’s value:                                            GPIO_0 = Secondary UART Receive input.
              Part Number       Address Range                        GPIO_1 = Secondary UART Transmit output.
                                                                     GPIO_2 = External charge pump oscillator input.
             MIC2555BML-0              0x
             MIC2555BML-1              1x                        Audio mode:
                                                                 D+
                                                                           Stereo    These are generally agreed
Where x = the state of ADR0                                      D-
                                                                                     upon, but are not
                                                                 D+        Mono
D+, D-                                                                               mandatory.
                                                                 D-        Mic
The data plus (D+) and data minus (D-) pins output the
USB data signals. When operating as a non-USB
transceiver, the role of D+, D- change:
            UART mode:
            D+ = RXD
            D- = TXD
  December 2006                                             19                                            M9999-121406


 Micrel, Inc.                                                                                                                           MIC2555
Serial Controller
Register Map
REGISTER
                ADDRESS         ACCESS          BIT 7          BIT 6        BIT 5         BIT 4            BIT 3      BIT 2     BIT 1       BIT 0
  NAME
                      00             R                                                           x8D
Vendor ID
                      01             R                                                           x05
                      02             R                                                    xB0 see Note 1
Product ID
                      03             R                                                    x55 see Note 1
  Control             04            R/S
                                               uart_io        uart_en     oe_int_en  bdis_acon_en         test bit   dat_se0   suspend     speed
Register 1            05           R/C
  Control             06            R/S                                                                  dm_pull-    dp_pull-  dm_pull-   dp_pull-
                                             vbus_chrg     vbus_dischrg   vbus_drv    id_gnd_out
Register 2            07           R/C                                                                     down       down        up         up
 Interrupt                                                   bdis_acon
                      08             R          cr_int                     id_float      se_dm          id_gnd_in     se_dp    sess_vld   vbus_vld
  Source                                                    (sess_end)
Undefined             09
 Interrupt            0A            R/S                      bdis_acon
                                                cr_int                     id_float      se_dm          id_gnd_in     se_dp    sess_vld   vbus_vld
   Latch              0B           R/C                      (sess_end)
 Interrupt            0C            R/S                      bdis_acon
                                                cr_int                     id_float      se_dm          id_gnd_in     se_dp    sess_vld   vbus_vld
Mask False            0D           R/C                      (sess_end)
 Interrupt            0E            R/S                      bdis_acon
                                                cr_int                     id_float      se_dm          id_gnd_in     se_dp    sess_vld   vbus_vld
Mask True             0F           R/C                      (sess_end)
                      10
Undefined
                      11
  Control             12            R/S
                                               scl_en         rcs_dis      ext_osc   sess_end_en        cr_int_sel  id_det_off  cp_off     pwr_dn
Register 3            13           R/C
   GPIO               14            R/S
  Output                                          0              0             0            0                0       GPIO_2    GPIO_1     GPIO_0
  Enable              15           R/C
   GPIO               16            R/S
                                                  0              0             0            0                0       GPIO_2    GPIO_1     GPIO_00
  Output              17           R/C
GPIO Input            18             R            0              0             0            0                0       GPIO_2    GPIO_1     GPIO_0
Undefined             19
   GPIO               1A            R/S
                                               scl_en         rcs_dis      ext_osc   sess_end_en        cr_int_sel  id_det_off  cp_off     pwr_dn
 Interrupt            1B           R/C
   GPIO               1C            R/S
                                                  0              0             0            0                0       GPIO_2    GPIO_1     GPIO_0
Mask False            1D           R/C
   GPIO               1E            R/S
                                                  0              0             0            0                0       GPIO_2    GPIO_1     GPIO_0
Mask True             1F           R/C
Notes:
     1.    These values will change with chip revision level and are assigned by Micrel at the time of manufacture.
     2.    All bits reset to zero, except those listed in WHITE, which reset to one.
     3.    Register bits not listed are undefined.
     4.    The upper five bits of the GPIO registers always read zero.
 December 2006                                                                   20                                                M9999-121406


  Micrel, Inc.                                                                                                        MIC2555
Control Bit Locator
                         Location
Control Bit
                         Control Register 1     Control Register 2       Control Register 3 Interrupt Source GPIO Interrupt
bdis_acon, (sess_end)                                                                       B6
bdis_acon_en             B4
cp_off                                                                   B1
cr_int                                                                                      B7
cr_int_sel                                                               B3
dat_se0                  B2
dm_pull-down                                    B3
dm_pull-up                                      B1
dp_pull-down                                    B2
dp_pull-up                                      B0
ext_osc                                                                  B5
GPIO_0                                                                                                       B0
GPIO_1                                                                                                       B1
GPIO_2                                                                                                       B2
id_det_off                                                               B2
id_float                                                                                    B5
id_gnd_in                                                                                   B3
id_gnd_out                                      B4
oe_int_en                B5
rcs_dis                                                                  B6
scl_en                                                                   B7
se_dm                                                                                       B4
se_dp                                                                                       B2
sess_end_en                                                              B4
sess_vld                                                                                    B1
pwr_dn                                                                   B0
speed                    B0
suspend                  B1
test bit                 B3
uart_en                  B6
uart_io                  B7
vbus_chrg                                       B7
vbus_dischrg                                    B6
vbus_drv                                        B5
vbus_vld                                                                                    B0
Serial Controller Register Bits
                Example Table Format
                Column Titles
                                                              Register
                Field name          Size (bits)  Access                (1)  Description
                                                            Addresses
Note:
    Access type “rd/s/c” denotes a field that can be read, set to 1 or cleared to 0. The register can be read from either of
    the Addresses indicated. When writing to the “set” Address, any 1s that are written cause the associated bit to be set.
    When writing to the “clr” (Clear) Address, any 1s that are written cause the associated bit to be cleared.
  December 2006                                                         21                                      M9999-121406


Micrel, Inc.                                                                                                  MIC2555
             Device ID Registers
                                                         MSB -> Higher byte of two byte word
                                                         LSB -> Lower byte of two byte word
                                                         USB-IF Vendor ID number. Address 00h contains
             vendor_id          16     rd      00h       lower byte of Vendor ID. Address 01h contains upper
                                                         byte of Vendor ID.
                                                         A number unique to each manufacturer, for each
                                                         device type produced. The manufacturer assigns this
             product_id         16     rd      02h
                                                         number. Address 02h contains lower byte. Address
                                                         03h contains upper byte.
             Control Register 1
                                            set – 04h    1                Æset                =            1
             Set & Clear
                                            clr – 05h    1 Æclr = 0
                                                         0       =      USB       Low        Speed     mode
             speed                 1 rd/s/c    bit 0
                                                         1 = USB Full Speed mode
                                                         0         =         Full          power       mode
             suspend               1 rd/s/c    bit 1
                                                         1 = Low power mode
                                                         0         =        VP-VM            USB       mode
             dat_se0               1 rd/s/c    bit 2
                                                         1 = DAT-SE0 USB mode
             test bit              1 rd/s/c    bit 3     Not used
                                                         0 = No action.
             bdis_acon_en          1 rd/s/c    bit 4     1 = Attaches pull-up resistor to D+ after detecting
                                                         SE0 condition and sets interrupt flag.
                                                         0 = OE_INT/ is an input.
             oe_int_en             1 rd/s/c    bit 5     1 = OE_INT/ becomes an output and is asserted
                                                         LOW when interrupt occurs, if suspend = 1. If
                                                         suspend = 0, pin remains an input.
                                                         0 = USB mode
             uart_en               1 rd/s/c    bit 6
                                                         1 = UART mode
                                                         0 = GPIO pins operate as standard GPIO.
                                                                         nd
                                                         1 = GPIO_0 = 2 UART RX
             uart_io               1 rd/s/c    bit 7                     nd
                                                             GPIO_1 = 2 UART TX
                                                             GPIO_2 = standard GPIO
December 2006                                         22                                                   M9999-121406


Micrel, Inc.                                                                                                      MIC2555
             Control Register 2
                                         set – 06h    1 Æset = 1
             Set & Clear
                                         clr – 07h    1 Æclr = 0
             dp_pull-up         1 rd/s/c    bit 0     1 = Connect pull-up to D+
             dm_pull-up         1 rd/s/c    bit 1     1 = Connect pull-up to D-
             dp_pull-down       1 rd/s/c    bit 2     1 = Connect pull-down to D+
             dm_pull-down       1 rd/s/c    bit 3     1 = Connect pull-down to D-
             id_gnd_out         1 rd/s/c    bit 4     1 = Connect ID pin to ground
             vbus_drv           1 rd/s/c    bit 5     1 = Power VBUS with charge pump
             vbus_dischrg       1 rd/s/c    bit 6     1 = Discharge VBUS through a resistor
             vbus_chrg          1 rd/s/c    bit 7     1 = Charge VBUS through a resistor
             Control Register 3
                                         set - 12h    1 Æset = 1
                  Set & Clear
                                         clr – 13h    1 Æclr = 0
                     pwr_dn     1 rd/s/c    bit 0     1 = Power Down mode.
                                                      1       =       turns       charge       pump        OFF.
                      cp_off    1 rd/s/c    bit 1
                                                      (Charge pump generates 5V for powering VBUS)
                                                      0 = ID comparators ON.
                                                      1 = Turns ID comparators OFF.
                   id_det_off   1 rd/s/c    bit 2
                                                      Note: Powering down ID comparators does not shut
                                                      off ID pin pull-up.
                                                      Car Kit interrupt select:
                   cr_int_sel   1 rd/s/c    bit 3     0 = Detect < 0.5V level on D+
                                                      1 = Detect > 3.0V level on D+
                                                      0 = no action.
                 sess_end_en    1 rd/s/c    bit 4     1 = When bdis_acon_en = 0, switches Bit 6 of the
                                                      Interrupt Register to indicate Session End comparator
                                                      status.
                                                      0 = Internal oscillator drives charge pump
                    ext_osc     1 rd/s/c    bit 5     1 = External oscillator drives charge pump (Input
                                                      source = GPIO_2)
                                                      0 = Activate current source. Weak pull-up on ID pin.
                     rcs_dis    1 rd/s/c    bit 6     1 = Disable (bypass) current source pull-up on ID pin.
                                                      Strong pull-up on ID pin.
                                                           2
                                                      0 = I C clock line only transmits.
                                                                          2
                                                      1 = Bi-directional I C clock line.
                     scl_en     1 rd/s/c    bit 7
                                                      Bi-directional clock is required if target device is to be
                                                      able to control data rate by holding SCL low.
December 2006                                      23                                                          M9999-121406


Micrel, Inc.                                                                                                     MIC2555
             Interrupt Source Register
                                                           Indicates the current state of signals that can
                 Interrupt Status              rd - 08h
                                                           generate an interrupt.
                                                           1 = VBUS > 4.4V
                      vbus_vld    1      rd      bit 0
                                                           (VBUS valid comparator)
                                                           1 = 0.8V< VBUS< 2.0V.
                      sess_vld    1      rd      bit 1
                                                           (Session valid comparator)
                        se_dp     1      rd      bit 2     1 = D+ pin is HIGH
                     id_gnd_in    1      rd      bit 3     1 = ID pin grounded
                        se_dm     1      rd      bit 4     1 = D- pin is HIGH
                       id_float   1      rd      bit 5     1 = ID pin floating
                                                           If: bdis_acon_en = 1
                                                           1 = SE0 has been detected, transceiver asserted
                     bdis_acon                             dp_pullup after detecting B-device disconnect.
                                  1      rd      bit 6
                    (sess_end)                             If bdis_acon_en = 0, sess_end_en = 1
                                                           1 = VBUS < 0.8V. (Session End comparator output =
                                                           TRUE)
                                                           1 = car kit interrupt, D+ pin has seen a pulse above
                         cr_int   1      rd      bit 7
                                                           the interrupt level
             Interrupt Latch 1
                                              set –0Ah     Indicates which sources have interrupted. 1 =
                Interrupt Source
                                              clr – 0Bh    interrupt.
                      Vbus_vld    1    rd/s/c    bit 0
                      sess_vld    1    rd/s/c    bit 1
                        se_dp     1    rd/s/c    bit 2
                     id_gnd_in    1    rd/s/c    bit 3
                        se_dm     1    rd/s/c    bit 4
                       id_float   1    rd/s/c    bit 5
                     bdis_acon
                                  1    rd/s/c    bit 6
                    (sess_end)
                         cr_int   1    rd/s/c    bit 7
             Interrupt Mask False
                                              set – 0Ch    Enables interrupts on transition from TRUE to FALSE
                         False
                                                           1      Æset      =     1,    Interrupt   on    TÆF.
                  Interrupt Mask              clr – 0Dh    1 Æclr = 0, no interrupt.
                      Vbus_vld    1    rd/s/c    bit 0
                      sess_vld    1    rd/s/c    bit 1
                        se_dp     1    rd/s/c    bit 2
                     id_gnd_in    1    rd/s/c    bit 3
                        se_dm     1    rd/s/c    bit 4
                       id_float   1    rd/s/c    bit 5
                     bdis_acon
                                  1    rd/s/c    bit 6
                    (sess_end)
                         cr_int   1    rd/s/c    bit 7
December 2006                                           24                                                    M9999-121406


Micrel, Inc.                                                                                          MIC2555
             Interrupt Mask True
                                                       Enables interrupts on transition from FALSE to
                       True               set – 0Eh    TRUE.
                Interrupt Mask            clr – 0Fh    1 Æset = 1, Interrupt on FÆT
                                                       1 Æclr = 0, no interrupt.
                    vbus_vld     1 rd/s/c    bit 0
                    sess_vld     1 rd/s/c    bit 1
                      se_dp      1 rd/s/c    bit 2
                   id_gnd_in     1 rd/s/c    bit 3
                      se_dm      1 rd/s/c    bit 4
                     id_float    1 rd/s/c    bit 5
                   bdis_acon
                                 1 rd/s/c    bit 6
                  (sess_end)
                       cr_int    1 rd/s/c    bit 7
December 2006                                       25                                             M9999-121406


Micrel, Inc.                                                                                              MIC2555
             GPIO Output Enable
                                                set –14h     1 Æset = 1, GPIO = OUTPUT.
                   Set & Clear
                                                clr – 15h    1 Æclr = 0, GPIO = INPUT.
                    GPIO_0        1   rd/s/c       bit 0
                    GPIO_1        1   rd/s/c       bit 1
                    GPIO_2        1   rd/s/c       bit 2
                                  1   rd/s/c       bit 3
                                  1   rd/s/c       bit 4
                                  1   rd/s/c       bit 5
                                  1   rd/s/c       bit 6
                                  1   rd/s/c       bit 7
             GPIO Output
                                                set –16h     1 Æset = 1 at GPIO OUTPUT.
                   Set & Clear
                                                clr – 17h    1 Æclr = 0 at GPIO OUTPUT.
                    GPIO_0        1   rd/s/c       bit 0
                    GPIO_1        1   rd/s/c       bit 1
                    GPIO_2        1   rd/s/c       bit 2
                                  1   rd/s/c       bit 3
                                  1   rd/s/c       bit 4
                                  1   rd/s/c       bit 5
                                  1   rd/s/c       bit 6
                                  1   rd/s/c       bit 7
             GPIO Input
                   Read Status                  rd – 18h     Read current state of GPIO input
                    GPIO_0        1     rd         bit 0
                    GPIO_1        1     rd         bit 1
                    GPIO_2        1     rd         bit 2
                                  1     rd         bit 3
                                  1     rd         bit 4
                                  1     rd         bit 5
                                  1     rd         bit 6
                                  1     rd         bit 7
             GPIO Interrupt Latch
                                             set –1Ah        Indicates which sources have interrupted.
             Interrupt Source
                                             clr – 1Bh       1 = interrupt.
             GPIO_0             1   rd/s/c   bit 0
             GPIO_1             1   rd/s/c   bit 1
             GPIO_2             1   rd/s/c   bit 2
                                1   rd/s/c   bit 3
                                1   rd/s/c   bit 4
                                1   rd/s/c   bit 5
                                1   rd/s/c   bit 6
                                1   rd/s/c   bit 7
December 2006                                             26                                           M9999-121406


 Micrel, Inc.                                                                                                                        MIC2555
                GPIO Interrupt Mask False
                                                                             Enables interrupts on transition from TRUE to FALSE
                                                              set – 1Ch
                      Set & Clear                                            1 Æset = 1, Interrupt on TÆF.
                                                              clr – 1Dh
                                                                             1 Æclr = 0, no interrupt.
                        GPIO_0               1     rd/s/c         bit 0
                        GPIO_1               1     rd/s/c         bit 1
                        GPIO_2               1     rd/s/c         bit 2
                                             1     rd/s/c         bit 3
                                             1     rd/s/c         bit 4
                                             1     rd/s/c         bit 5
                                             1     rd/s/c         bit 6
                                             1     rd/s/c         bit 7
                GPIO Interrupt Mask True
                                                                             Enables interrupts on transition from FALSE to
                                                              set – 1Eh      TRUE.
                      Set & Clear
                                                               clr – 1Fh     1 Æset = 1, Interrupt on FÆT.
                                                                             1 Æclr = 0, no interrupt.
                        GPIO_0               1     rd/s/c         bit 0
                        GPIO_1               1     rd/s/c         bit 1
                        GPIO_2               1     rd/s/c         bit 2
                                             1     rd/s/c         bit 3
                                             1     rd/s/c         bit 4
                                             1     rd/s/c         bit 5
                                             1     rd/s/c         bit 6
                                             1     rd/s/c         bit 7
Note:
   Access type “rd/s/c” denotes a field that can be read, set to 1 or cleared to 0. The register can be read from either of
   the Addresses indicated. When writing to the “set” Address, any 1’s that are written cause the associated bit to be set.
   When writing to the “clr” (Clear) Address, any 1s that are written cause the associated bit to be cleared.
Example Serial Controller Register Settings
           Example
           Location               Condition               BIT 7       BIT 6   BIT 5      BIT 4     BIT 3      BIT 2   BIT 1    BIT 0
           Target register        Initial state             0           0       1          0           1        0       0        0
                                  Data loaded into ‘set’
           ‘Set’ register                                   1           0       0          0           1        0       0        0
                                  register
           Target register        Resulting state           1           0       1          0          1         0       0        0
                                  Data      loaded  into
           ‘Clear’ register                                 1           0       0          0           1        0       0        0
                                  ‘Clear’ register
           Target register        Resulting state           0           0       1          0          0         0       0        0
 December 2006                                                            27                                                   M9999-121406


  Micrel, Inc.                                                    MIC2555
PCB Layout Recommendation
Although the USB standard and applications are not
based in an impedance-controlled environment, a
properly designed PCB layout is recommended for
optimal transceiver performance. The suggested PCB
layout hints are as follows:
•   Match signal line traces (VP/VM, D+ D–) and try to
    keep them as short as possible.
•   For every signal line trace width (w), separate the
    signal lines by 1.5-2 widths. Place all other traces at
    >2w from all signal line traces.
•   Control signal line impedances to ±10%.
•   Keep Rseries as close to the IC as possible, with
    equal distance between Rseries and the IC for both D+
    and D–.
  December 2006                                             28 M9999-121406


 Micrel, Inc.                                                                                                                                     MIC2555
Package Information
                                                                      24-Pin MLF (ML)
                               MICREL, INC. 2180 FORTUNE DRIVE SAN JOSE, CA 95131 USA
                                  TEL +1 (408) 944-0800 FAX +1 (408) 474-1000 WEB http:/www.micrel.com
  The information furnished by Micrel in this data sheet is believed to be accurate and reliable. However, no responsibility is assumed by Micrel for its
                   use. Micrel reserves the right to change circuitry and specifications at any time without notification to the customer.
  Micrel Products are not designed or authorized for use as components in life support appliances, devices or systems where malfunction of a product
can reasonably be expected to result in personal injury. Life support devices or systems are devices or systems that (a) are intended for surgical implant
    into the body or (b) support or sustain life, and whose failure to perform can be reasonably expected to result in a significant injury to the user. A
Purchaser’s use or sale of Micrel Products for use in life support appliances, devices or systems is a Purchaser’s own risk and Purchaser agrees to fully
                                             indemnify Micrel for any damages resulting from such use or sale.
                                                                 © 2004 Micrel, Incorporated.
 December 2006                                                                   29                                                        M9999-121406


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Microchip:
 MIC2555-0YML TR MIC2555-1YML TR MIC2555-0YML-TR MIC2555-1YML-TR
