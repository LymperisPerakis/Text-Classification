FUSB307B
USB Type-C Port Controller
with USB-PD
Description
   The FUSB307B targets system designers looking to implement up
to four USB Type−C port controllers (TCPC) with USB−PD                                       www.onsemi.com
capabilities.
   This solution provides integrated Type−C Rev 1.3 detection
circuitry enabling manual attach/detach detection. Time critical Power
Delivery functionality is handled autonomously, offloading the
μProcessor or Type−C Port Manager (TCPM).
   The FUSB307B complies with the USB−PD Interface Specification
                                                                                                SCALE 3:1
Rev 1.0 as a TCPC for a standardized interface with TCPM.
                                                                                             WQFN16 3 x 3, 0.5P
                                                                                               CASE 510BS
Features
• USB−PD Interface Specification Rev 1.0 Ver. 1.2 Compatible
                                                                                            PIN ASSIGNMENT
• USB Type−C Rev 1.3 Compatible
• USB−PD Rev3.0 Ver. 1.1 Compatible                                                        16
                                                                                          GPIO1
                                                                                                   15
                                                                                                  GND
                                                                                                           14
                                                                                                          SNK
                                                                                                                  13
                                                                                                                 SRC
• Fast Role Swap
• Sink Transmit                                                                  1 CC1
                                                                                                  Top Through
                                                                                                                         12 SDA1
• Extended Data Messages (Chunked)                                                                    View
• Dual−Role Functionality
                                                                                   2                                     11 SCL1
                                                                                 VCONN
                                                                                                         GND
  ♦ Manual Type−C Detection                                                      3 CC2                                   10 INT_N
  ♦ Automatic DRP Toggling
• USB−PD Interface Specification Support                                           4                                     9 GPIO2
                                                                                 ORIENT
  ♦ Automatic GoodCRC Packet Response
  ♦ Automatic Retries of Sending Packet                                                    5        6       7      8
                                                                                          LDO     VBUS     VDD
                                                                                                                 DBG_N
  ♦ All SOP* Types Supported
• VBUS Source and Sink Control                                                                      QFN16
• Integrated 3 W Capable VCONN to CCx Switch
• 10−bit VBUS ADC                                                                    ORDERING INFORMATION
• Programmable GPIOs                                                     See detailed ordering and shipping information on page 3 of
• 4 Selectable I2C Addresses                                             this data sheet.
                                                                         Features (continued)
                                                                         • Dead Battery Operation
                                                                             ♦  Powered from VBUS
                                                                             ♦  LDO Output Provides Power to TCPM
                                                                         •   Packaging:
                                                                             ♦ FUSB307B− 16 Pin QFN
                                                                         Applications
                                                                         •   Smartphones and Tablets
                                                                         •   Digital Cameras
                                                                         •   Desktops and Laptops
                                                                         •   Rechargeable Docks/Speakers
                                                                         •   Wall Adapters
            Figure 1. FUSB307B Block Diagram                             •   Automotive
© Semiconductor Components Industries, LLC, 2016             1                                           Publication Order Number:
April, 2018 − Rev. 3                                                                                                  FUSB307B/D


                                                                                      FUSB307B
Table of Contents
  Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1
  Features . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1
  Applications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1
  Typical Application . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3
  Block Diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4
  Pin Configurations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4
  Pin Descriptions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5
  Power Up, Initialization and Reset . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5
  Dead Battery Power−up . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
  Programmable GPIOx . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
  Standard Outputs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
  I2C Interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
  I2C Address Selection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
  Interrupt Operation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
  I2C Idle Mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
  VCONN Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
  Debug Accessory Support . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
  Type−C Manual Mode Detection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
  BMC Power Delivery . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
  Transmit State Machine . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
  Hard Reset/ Cable Reset State Machine . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
  Automatic GoodCRC Response . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
  BIST Mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
  VBUS Source and Sink Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
  Voltage Transitions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
  VBUS Monitoring and Measurement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
  VBUS Discharge . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
  Automatic Source Discharge after a Disconnect . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
  Automatic Sink Discharge after a Disconnect . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
  Sink Discharge during a Connection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
  Watchdog Timer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
  USB−PD Rev 3.0 Features . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
  Fast Role Swap . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
  Fast Role Swap Cable Disconnect (Informational Only) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
  DC and Transient Characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
                                                                                 www.onsemi.com
                                                                                                2


                                                                        FUSB307B
 Table 1. ORDERING INFORMATION
                                      Operating
       Part Number                 Temperature Range                                     Package                            Packing Method†
      FUSB307BMPX                           −40 to 85°C               16–Lead Molded Leadless Package (QFN)                       Tape and Reel
                                                                      JEDEC, ML220, 3 mm Square
     FUSB307BVMPX                            Automotive
                                            −40 to 105°C
†For information on tape and reel specifications, including part orientation and tape sizes, please refer to our Tape and Reel Packaging
 Specification Brochure, BRD8011/D.
Typical Application
                                  FPF2895
                                  30 mΩ
                                 VOUT        VIN                                                           VSRC             VBAT
                                                                             10 μF                         V3P3 USB Buck/Boost
                                 ISET       ON                                           1 μF                       Charger
                                                        FPF2895                                            VCONN + VBUS Buck
                                                          30 mΩ
                                                                                                                  + VCONN Buck
                                                       VIN    VOUT                                         VSNK
                          1 μF                                             10 μF
                          25 V                             EN              25 V                                                       Battery
                                                                                                      10 μF
               Type−C
             receptacle                                   SNK                        VDD VCONN
                                                        SRC                                          LDO                 VDD
                                                        GPO1                                                      1 μF
                                                        GPO2
                                                        VBUS                                                                      TCPM
                                                                           FUSB307B
                                                        CC1
                                                                                                   INT_N
                                                                                                     SDA
                                                        CC2                                          SCL
                                   220 pF     220 pF                 I2C_ADDR_SEL/               DEBUG_N
                                                        GND             ORIENT
                                                                                                                          USB
                                                                                                                          2.0 &
                                                                                                                           3.1
                                                                                                                          Gen1
                                                                              FUSB340                                                 GPU
                                                                                                                          PHY
                                                                         2:1 USB3.1 Switch
                                   Figure 2. FUSB307B Typical Mobile Computing Application
                                                                     www.onsemi.com
                                                                              3


                                                                          FUSB307B
Block Diagram
                     SRC              SNK
                                                                                VBUS                    VDD
                                                                                                        PWR             3.3V
                     Sink/Source                  10−bit     Discharge                                                                                          LDO
                                                                                                        MGMT            LDO
                       Control                    ADC        Bleed Discharge          Discharge                                      Prog Pull−
                                                                                                                                     Up Current
                                                                                                                                                               VCONN
                                            Clock
                                            Gen.
                                                                                                                                                               CC1
                                                               CRC32                      BMC                 BMC                        CC Switch/
                                                                               4B5B
                                                                Tx                        Enc.                Driver                       Sense
                                                                                                                                                               CC2
        INT_N                                                          USB PD PHY
                                            USB              CRC32                BMC                                   BMC
                                             PD                    4B5B           Dec.            CDR
                                                              Rx                                                        Rcvr
                                            FSM
                         I2C
     SDA1/SCL2                                                                                                                            Type−C
                                                                                                                                          Control
     SCL1/SDA2
                                                                          GPIO Control                                         FUSB307B
                                                                                                                                               GND
                                                    ADDR/          DEBUG_N               GPIO2/ GPIO1
                                                    ORIENT                              FR_SWAP
                                                     Figure 3. FUSB307B Block Diagram
Pin Configurations
                  5              6           7         8                                                          8             7         6        5
                 LDO           VBUS         VDD                                                                                VDD                LDO
                                                     DBG_N                                                      DBG_N                   VBUS
          4                                                  9 GPIO2                               9 GPIO2                                                     4
        ORIENT                                                                                                                                               ORIENT
                           Bottom View                                                                                  Top Through
         3 CC2                                               10 INT_N                              10 INT_N
                                                                                                                            View                             3 CC2
                                  GND                                                                                            GND
           2                                                 11 SCL1                               11 SCL1                                                     2
         VCONN                                                                                                                                               VCONN
         1 CC1                                               12 SDA1                               12 SDA1                                                   1 CC1
                  16            15           14       13                                                         13             14        15          16
                 GPIO1         GND          SNK      SRC                                                        SRC            SNK       GND         GPIO1
                                                  Figure 4. Pin Assignment QFN (FUSB307B)
                                                                    www.onsemi.com
                                                                                  4


                                                              FUSB307B
Pin Descriptions
  Table 2. PIN DESCRIPTION
           Name                       Type                                                Description
  USB TYPE−C CONNECTOR INTERFACE
            CC1                        I/O            Type−C connector Configuration Channel (CC) pins. Initially used to determine
                                                      when an attach has occurred and what the orientation of the insertion is. Function-
                                                      ality after attach depends on mode of operation detected.
                                                      Operating as a host:
                                                      − Sets the allowable charging current for VBUS to be sensed by the attached
                                                      device
            CC2                        I/O            − Used to communicate with devices using USB BMC Power Delivery
                                                      − Used to detect when a detach has occurred
                                                      Operating as a device:
                                                      − Indicates what the allowable sink current is from the attached host
                                                      − Used to communicate with devices using USB BMC Power Delivery
            GND                      Ground           Ground
           VBUS                      Power            VBUS supply pin for attach and detach detection when operating as an upstream
                                                      facing port (Device)
  POWER INTERFACE
            VDD                      Power            Input supply voltage
            LDO                    LDO Output         3.3 V LDO Output
          VCONN                   Power Switch        Regulated input to be switched to correct CC pin as VCONN to power USB3.1
                                                      fully featured cables, powered accessories or dongles bridging Type C to other
                                                      video or audio connectors
  SIGNAL INTERFACE
    SCL1/SDA2 (Note 1)           Open−Drain I/O       I2C serial clock/data signal to be connected to the I2C master
    SDA1/SCL2 (Note 1)           Open−Drain I/O       I2C serial clock/data signal to be connected to the I2C master
           INT_N                Open−Drain Output     Active LOW open drain interrupt output used to prompt the processor to read the
                                                      I2C register bits
       ORIENT/I2C_            3−State CMOS Output     Selects I2C Address on Power up and then becomes a General Purpose CMOS
      ADDR (Note 1)                                   Output
          DBG_N                  Open−Drain I/O       Debug Accessory Detection Open−Drain Output
           GPIO2                3−State CMOS I/O      General Purpose I/O 2
           GPIO1                3−State CMOS I/O      General Purpose I/O 1
  VBUS SOURCE AND SINK INTERFACE
            SNK                   CMOS Output         Controls external VBUS Sink Load Switch on/off (Active High)
            SRC                   CMOS Output         Controls external VBUS Source Load Switch on/off (Active High)
1. A different I2C address is used depending on which SDA and SCL are used and the state of ORIENT/I2C_ADDR at power up.
Power Up, Initialization and Reset                                       pull−downs enabled such that a SOURCE can detect this as
   When power is first applied to VDD or VBUS, the                       a UFP and turn on VBUS.
FUSB307B goes through its POR sequence to load up all the                  For the FUSB307B device, power may become available
default values in the register map, read all the fuses so that           from VBUS when VDD is not present. This state is still
the trimmed values are available when VDD or VBUS is in                  considered “Dead Battery” until VDD is present. During
its valid range. A software reset can be executed by writing             Dead Battery, the FUSB307B will continue presenting Rd.
SW_RES to 1 in RESET Register. This executes a full reset                  Once VDD is available, the TCPM can start the DRP
of the FUSB307B similar to POR where all the I2C registers               toggle by setting COMMAND.LOOK4CON on the
go to their default state.                                               FUSB307B device.
   When powered down, the FUSB307B is configured as a
UFP with CC1 and CC2 have their respective Rd
                                                          www.onsemi.com
                                                                     5


                                                              FUSB307B
Dead Battery Power−up                                                      Systems with more than one Type−C port, the TCPM can
  During a dead battery condition in a mobile application,               enable or disable the appropriate sink paths.
the FUSB307B will be powered by VBUS and provide an                        Once VDD is greater than VDDGOOD , the internal LDO is
LDO output to power a μController or TCPM to establish a                 bypassed and the device switches from VBUS to VDD
USB−PD contract.                                                         power.
  The FUSB307B will enable the Sink Path when attached                     Figure 5 demonstrates a dead battery power up sequence
to a source with any advertised current.                                 for FUSB307B.
             TYPE−C Port 1            FPF2895
                                      30 mΩ
                                    VIN    VOUT                                                                  VIN   VSYS
      1− FUSB307B
       Powers from                       EN                                                                       Charger IC
          VBUS             3− Enable Sink
      and attaches as           Path
           SNK                                                     6− FUSB307B                 5− Power to
                    VBUS                 SNK   VDD     LDO Bypass    switches to                 system is
                                                                   VDD Power and                  enabled        3.3 V Buck
                                                                   bypasses LDO                                   Converter
                                                                                                                 V3P3A
                                                        3.3V
                                PWR MGMT
                                                        LDO
                                                              LDO
                                      FUSB307B                                                  2− FUSB307B
                                                                                                Provides Power
                                                                                                to EC during
                                                                                                Dead Battery
              TYPE−C Port 2
                                 FPF2895
                                  30 mΩ                                                                                Battery
                               VIN      VOUT                                                            VDD
                                     EN                                                                TCPM
                                                                                                         EC
                     VBUS          SNK          VDD     LDO Bypass
                                                                                                    4− TCPM
                                                                                                  establishes PD
                                                                                                   Contract with
                                                        3.3 V                                          SRC
                                PWR MGMT
                                                        LDO    LDO
                                      FUSB307B
                                             Figure 5. FUSB307B Dead Battery Operation
Programmable GPIOx                                                       Standard Outputs
  The FUSB307B has two programmable GPIOs. These                           The FUSB307B implements Orientation and supports
can be programmed to be Inputs, CMOS Outputs or Open                     Debug Accessory detection output as indicated in
Drain Outputs. To configure them, the TCPM writes to                     STD_OUT_CAP register.
GPIO1_CFG and GPIO2_CFG. If the GPIO is configured as                      To configure the Orientation, Mux selection, and Debug
an input, its logic value can be read in GPIO_STAT and                   Accessory, the TCPM writes to STD_OUT_CFG.
ALERT_VD registers.
                                                            www.onsemi.com
                                                                    6


                                                                     FUSB307B
I2C Interface                                                                   6 requirements. This block is designed for fast mode plus
  The FUSB307B includes a full I2C slave controller. The                        signals.
I2C slave fully complies with the I2C specification version                        Examples of an I2C write and read sequence are shown in
                                                                                Figure 7 and Figure 8 respectively.
                 8bits                     8bits                8bits
     S Slave Address      WR A     Register Address K    A Write Data      A Write Data K+1    A Write Data K+2 A     Write Data K+N−1     A P
    NOTE:    Single Byte read is initiated by Master with P immediately following first data byte.
                                                          Figure 6. I2C Write Example
               8bits                   8bits                        8bits                8bits
     S Slave Address     WR A    Register Address K A S     Slave Address     RD A    Read Data K  A Read Data K+1 A Read Data K+N−1 NA P
           Register address to Read specified                        Single or multi byte read executed from current register location
                                                         (Single Byte read is initiated by Master with NA immediately following first data byte)
    NOTE:     If Register is not specified Master will begin read from current register. In this case only sequence showing in Red
              bracket is needed.
                 From Master to Slave          S   Start Condition                 NA NOT Acknowledge (SDA High)         RD      Read =1
                 From Slave to Master          A   Acknowledge (SDA Low)          WR Write = 0                            P      Stop Condition
                                                          Figure 7. I2C Read Example
I2C Address Selection                                                           set to 1b (due to ALERTL.I_PORT_PWR and
  I2C Slave addresses can be changed by configuring the                         PWRSTAT.TCPC_INIT).
I2C_ADDR_GPO input on power up with a pull−up or                                   When an interruptible event occurs, INT_N is driven low
pull−down resistor and routing the SCL and SDA lines                            and is high−Z again when the processor clears the interrupt
according to Table 3.                                                           by writing a 1 to the corresponding interrupt bit position.
                                                                                Writing a 0 to an interrupt bit has no effect.
Interrupt Operation                                                                A processor firmware has additional control of INT_N
  The INT_N pin is an active low, open drain output which                       through individual event mask bits which can be set or
indicates to the host processor that an interrupt has occurred                  cleared to enable or disable INT_N from being driven low
in the FUSB307B which needs attention. The INT_N pin is                         when each event occurs.
asserted after power−up or device reset RESET.SW_RES
 Table 3. I2C ADDRESSES
                                                                                       Slave Address
   I2C_ADDR           SCLx/SDAx           Bit 7         Bit 6           Bit 5        Bit 4        Bit 3        Bit 2         Bit 1        Bit 0
        0              SCL1/SDA1            1             0               1            0            0            0             0          R/W
        1              SCL1/SDA1            1             0               1            0            0            0             1          R/W
        0              SCL2/SDA2            1             0               1            0            0            1             0          R/W
        1              SCL2/SDA2            1             0               1            0            0            1             1          R/W
I2C Idle Mode                                                                   Exiting I2C Idle Mode
                                                                                   The FUSB307B will exit I2C Idle mode when any I2C
Entering I2C Idle Mode                                                          communication is addressed to the slave. The
  The FUSB307B does not need to enter I2C Idle Mode in                          ALERTL.I_PRT_PWR interrupt will be set and no
order to save power. Entering this mode has no effect on I2C                    PWRSTAT bits will be set.
function. The FUSB307B can enter idle mode if 0xFF is                              The device’s I2C block is always on without power
written to the COMMAND register. Once in Idle mode, the                         penalties.
FUSB307B will not set the PWRSTAT.TCPC_INIT to one.
                                                                 www.onsemi.com
                                                                             7


                                                          FUSB307B
VCONN Control                                                      The FUSB307B can autonomously toggle the Rp/Rd by
   The FUSB307B integrates a CCx to VCONN switch with           setting ROLECTRL.DRP = 1b and the starting value of
programmable OCP capability via the VCONN_OCP                   Rp/Rd in ROLECTRL.bits [3:0]. DRP toggling starts by
register. If PWRCTRL.VCONN_PWR is set to 0, the                 writing to the COMMAND register
standard VCONN current limit is used (210.5 mA). If                If ROLECTRL.DRP = 1b, the only allowed values for
PWRCTRL.VCONN_PWR is set to 1, the programmable                 CC1/CC2 in ROLECTRL bits [3:0] are Rp/Rp or Rd/Rd.
VCONN_OCP is used.                                                 When ROLECTRL bits 3:0 are set to Open and
   The VCONN switch can be enabled via the PWRCTRL              ROLECTRL.DRP = 0b, the PHY and CC comparators are
register bits EN_VCONN and TCPC_CTRL.ORIENT bits                powered down.
(for CC1/2 selection).                                             The FUSB307B updates the CCSTAT register on a
   A VCONN valid voltage is monitored and reported on           Connect, Disconnect, a change in ROLECTRL.DRP or a
PWRSTAT.VCONN_VAL. The valid voltage threshold is               change (tTCPCFilter debounced) on the CC1 or CC2 wire.
fixed at 2.4 V.                                                    The TCPM reads CCSTAT upon detecting an interrupt
                                                                and seeing the ALERTL.I_CCSTAT = 1. The FUSB307B
Debug Accessory Support                                         indicates the DRP status, the DRP result, and the current CC
   The FUSB307B implements autonomous detection of              status in this register.
Source and Sink debug accessories. A debug accessory               The FUSB307B will set CCSTAT.LOOK4CON = 0b
detection is indicated via a standard output. The FUSB307B      when it has stopped toggling as a DRP.
powers on looking for a debug accessories without                  The TCPM reads the CCSTAT.LOOK4CON to determine
processor intervention.                                         if the FUSB307B is toggling Rp/Rd when operating as a
If debug accessory detection is not wanted, the processor can   DRP, it then reads CCSTAT.CON_RES to determine if the
write TCPC_CTRL.DEBUG_ACC_CTRL = 1b.                            FUSB307B is presenting an Rp or Rd and read the
                                                                CCSTAT.CC1_STAT and CCSTAT.CC2_STAT to
Type−C Manual Mode Detection
                                                                determine the CC1 and CC2 states.
   The CC pull up (Rp) or pull down (Rd) resistors and DRP
                                                                   The FUSB307B debounces the CC lines for tTCPCfilter
toggle are setup via the ROLECTRL register.If a TCPM
                                                                before reporting the status on CCSTAT. The TCPM must
wishes to control Rp/Rd directly, it can write
                                                                complete the debounce as defined in Type−C Specification.
ROLECTRL.DRP = 0b and the desired ROLECTRL bits
[3:0] (CC1/CC2).
                                                      www.onsemi.com
                                                              8


                                                              FUSB307B
                                   TCPM
                            Set FUSB305B to DRP
                                                                                                     FUSB307B
                                    Write:
                                                                                                   DRP Toggling
                            ROLECTRL.DRP = 1b
                                                                                            Set CCSTAT.LOOK4CON = 1b
                         ROLECTRL.CC2 = 01b or 10b
                                                                                                  DrpToggleFlag = 1b
                         ROLECTRL.CC1 = 01b or10b
                                                                                                 Start DRP Toggling
                     ROLECTRL.CC1 = ROLECTRL.CC2
                                                                                              Monitor for a Connection
                        PWRCTRL.AUTO_DISCH = 0b
                           COMMAND.LOOK4CON
                                No Connection
                                  Monitor for
                                     Alert
                                                                   Connection
                                                                    Potential Connect As Source                       Potential Connect As Sink
                                                               Either CC = Src.Rd or Both CC = Src.Ra                   Either CC != Snk.Open
                                                                          for > tTCPCFilter                                for > tTCPCFilter
                                 Read ALERT
                                                                         Set Source Status                                  Set Sink Status
                                                                      CCSTAT.LOOK4CON = 0b                            CCSTAT.LOOK4CON = 0b
                                                                       CCSTAT.CON_RES = 0b                              CCSTAT.CON_RES = 1b
                                                                        Stop Toggling Rp/Rd                              Stop Toggling Rp/Rd
                                                                              Apply Rp                                          Apply Rd
Service other
                    No
  ALERTS                    ALERT.CCSTAT = 1b?
                                                                                                        Interrupt
                                                                                                           Set
                                                                                                 ALERT.CCSTAT = 1b
                                     Yes
                     No
                                Read CCSTAT
                          CCSTAT.LOOK4CON = 0b?
                                     Yes
                             Debounce CC Status
                       Read CCSTAT and debounce for
                                tCCDebounce
                           Determine CC & VCONN
                                    Write:
                     ROLECTRL.CC1 & CC2 per decision
                        Set PWRCTRL.AUTO_DISCH
                            TCPC_CTRL.ORIENT
                           PWRCTRL.EN_VCONN
                          Enable VBUS and VCONN
              Write COMMAND to Source/Sink Vbus per decision
                       Check PWRSTAT.VBUS_VAL = 1b
                     Check PWRSTAT.VCONN_VAL = 1b
                            Clear ALERT.CCSTAT
                           Connection Established                                              Monitor for a disconnect
                              Monitor for ALERT
                                    Figure 8. DRP Initialization and Connection Detection
                                                            www.onsemi.com
                                                                      9


                                                                 FUSB307B
BMC Power Delivery                                                            received and the TCPM is alerted via ALERTL.I_RXSTAT
   The Type−C connector allows USB Power Delivery (PD)                        bit (see transition from PRL_Rx_Send_GoodCRC to
to be communicated over the connected CC pin between two                      PRL_Rx_Report_SOP* in Figure 9). The total number of
ports. The communication method is the BMC Power                              bytes in the receive buffer RXDATA is stored in
Delivery protocol and is used for many different reasons                      RXBYTECNT This number includes the header bytes that
with the Type−C connector. Possible uses are outlined                         are stored in RXHEADL and RXHEADH and the RXSTAT
below.                                                                        register.
• Negotiating and controlling charging power levels                             The RXBYTECNT, RXSTAT registers and the internal
• Alternative Interfaces such as MHL, Display Port                            receive buffer will be cleared after the ALERTL.I_RXSTAT
                                                                              bit is cleared.
• Vendor specific interfaces for use with custom docks or
                                                                                The FUSB307B will automatically transmit a GoodCRC
   accessories
                                                                              message for valid enabled messages within tTransmit.
• Role swap for dual−role ports that want to switch who                         A received message is valid when:
   is the host or device                                                      • It is not a GoodCRC message
• Communication with USB3.1 full featured cables                              • The calculated CRC is correct
   The FUSB307B integrates a thin BMC PD client which                         • The SOP* type is enabled
includes the BMC physical layer and packet buffers which
allows packets to be sent and received by the host software                     The makeup of the GoodCRC message is formed by the
through I2C accesses.                                                         received SOP* type and the contents of MSGHEADR
                                                                              register.
Receive State Machine                                                           When an expected GoodCRC message or a Hard Reset
   The TCPM can setup the desired types of messages to be                     signaling is received, they will not be replied with a
received by the FUSB307B via the RXDETECT register.                           GoodCRC message (see Note 2 in Figure 9). If a GoodCRC
This register defaults to 0x00 (Receiver disabled) upon                       message received was not expected due to the SOP* type or
power up, reset, Hard Reset transmission and reception, and                   mismatched Message ID, the receive state machine will not
upon detecting a cable disconnect. A message is not received                  send a GoodCRC message and will transition to
unless it is first enabled. Figure 9 shows the FUSB307B                       PRL_Rx_Report SOP* to inform the TCPM.
receive state machine.                                                          If a Hard Reset message is received, the FUSB307B will
   Upon a successfully transmitting GoodCRC, the                              reset the RXDETECT preventing the reception of future
RXSTAT register is updated with the type of message                           messages until the TCPM re−enables it.
                         Start          FUSB305 receives Hard reset |                                PRL_Rx_Message_Discard
                                        Cable reset
                                                                                                 Actions on entry:
                                                                                                 If Tx State−Machine active, discard
                                                            Message received from PHY            transmission and assert
                          PRL_Rx_Wait_for_PHY_                       (Note 1)                    ALERT_L.TXDISC
                                 message
                      Actions on entry:
                                                                                      Unexpected
                                                                                   GoodCRC received             else
                                                        Message discarded
                                                            bus Idle
                                                            (Note 2)
                                                                                                      PRL_Rx_Send_GoodCRC
                                                                                                   Actions on entry:
                                                                                                 Send GoodCRC message to PHY
                                                                        GoodCRC Transmission complete
                                          PRL_Rx_Report_SOP*
                                      Actions on entry:
                                      Update RECEIVE_STATUS
                                      (ALERT_L.RXSTAT asserted)
         1. This indication is sent by the PHY when a message has been discarded due to CC being busy, and after CC becomes idle again
            (see USB PD Spec).
         2. Messages do not include Hard Reset or Cable Reset signals or expected GoodCRC messages (GoodCRC messages are only
            expected after the FUSB305 PHY has received the tx message and the FUSB305 Tx state−machine is in the
            PRL_Tx_Wait_for_PHY_response state).
                                                      Figure 9. Receive State Machine
                                                             www.onsemi.com
                                                                         10


                                                                            FUSB307B
Transmit State Machine                                                                   within tCRCReceiveTimer. An automatic retry is not
   To transmit a message, the TCPM must first write the                                  performed when sending Hard−Resets, Cable−Resets, or
entire message in the following registers: TXHEADL,                                      BIST Carrier Mode 2 signaling.
TXHEADH, TXBYTECNT and the TXDATA.                                                          The TCPM must not write the TRANSMIT register again
   The actual transmission starts when the TCPM writes the                               until ALERTL.I_TXSUCC, I_TXFAIL, I_TX_DISC have
TRANSMIT register.                                                                       been asserted and cleared.
   The TRANSMIT register is where the message selection                                     The TCPM will not write the TRANSMIT register to
is done and it must be written once per transmission.                                    request a transmission other than a Hard reset until it has
   The TRANSMIT and TXBYTECNT will be reset after                                        cleared all received message alerts. If a TRANSMIT is
executing a successful or failed transmission.                                           written when ALERTL.I_RXSTAT = 1 or ALERTL.
   If the TRANSMIT.RETRY_CNT is set to a number                                          I_RXHRDRST = 1, the transmit request is discarded and
greater than 0, the FUSB307B will automatically retry                                    ALERTL.I_TX_DISC is asserted.
sending the same message if a GoodCRC is not received
                                                                     ProtocolTransmit
                           Protocol Layer message reception
                          in PRL_Rx_Message_Discard state
    PRL_Tx_Wait_for_                                                                                                                    PRL_Tx_Construct_Message
    Message_Request                                                                                                                    Actions on entry:
    Actions on entry:                                     TRANSMIT[2:0] < 101b written                                                 Pass TXBYTECNT bytes from
   Reset RetryCounter.                                                                                                                 TXHEADL and TXHEADH and
                                                                                                                                       TXDATA to PHY
                                                                                                    RetryCounter ≤     NRETRIES
                         PRL_Tx_Transmission_Error
                         Actions on entry:                                                                                                   Message sent to PHY
                                                                                                      (Collision detected and now bus idle)
                        Set ALERTL.I_TXFAIL interrupt                                                    I_TX_MSG_DISC && bus idle
                                                           RetryCounter
                                                           > NRETRIES       PRL_Tx_Check_RetryCounter                (Note 4)         PRL_Tx_Wait_for_PHY_response
                                                                         Actions on entry:                                          Actions on entry:
                                                                                                               CRCReceiveTimer
                                                                         If DFP or UFP,Increment and check          Timeout
                                                                         RetryCounter                                               Initialize and run CRCReceiveTimer
                                                                                                                                           (Note 3)
                                                                   (RXHEADH[3:1] != TXHEADH[3:1] (MessageID mismatch) |                   GoodCRC response from
                                                                      TRANSMIT[2:0] != RXSTAT[2:0] (SOP mismatch) )                              PHY layer
   PRL_Tx_Message_Sent                                                                                                                    PRL_Tx_Match_MessageID
   Actions on entry:                                     GoodCRC with MessageID and SOP match                                           Actions on entry:
                                                                                                                                        Match Extracted MessageID and
  Set ALERTL.I_TXSUCC                                                                                                                   response MessageID
     3. The CRCReceiveTimer is only started after the FUSB305 has sent the message. If the message is not sent due to a busy channel
         then the CRCReceiveTimer will not be started.
     4. This Indication is sent by the PHY layer when a message has been discarded due to CC being busy, and after CC becomes idle
         again. The CRCReceiveTimer is not running in this case since no message has been sent.
                                                      Figure 10. Receive State Machine
                                                                        www.onsemi.com
                                                                                   11


                                                                    FUSB307B
Hard Reset/ Cable Reset State Machine                                             will be attempted until the HardResetCompleteTimer times
   The TCPM will write the TRANSMIT register to initiate                          out. After a successful transmission or timeout, the
the Hard Reset/Cable Reset state machine, see Figure 11. If                       FUSB307B will indicate that a Hard Reset or Cable Reset
a the FUSB307B is in the middle of a transmission when                            has been sent by asserting both ALERTL.I_TXSUCC and
instructed to send a Hard or Cable reset, it will set the                         ALERTL.I_TXFAIL registers simultaneously. The bits in
ALERTL.I_TXDISC bit and send the hard reset signaling as                          RXDETECT and RXBYTECNT will be reset to disable PD
soon as possible. The FUSB307B implements the                                     message passing after a Hard Reset is received or
HardResetCompleteTimer. A Hard Reset or Cable Reset                               transmitted.
                                                                                                                              PRL_HR_Construct_Message
    PRL_HR_Wait_for_Hard_Reset_
                                                                                                                            Actions on entry:
             Request                                    TRANSMIT[2:0]=101b or 110b
                                                                                                                          Start tHardResetComplete timer
   Actions on entry:                                               written                                                Request PHY to send Hard Reset or
                                                                                                                          Cable Reset
                                                                                               tHardResetComplete
                                                                     PRL_HR_Failure                  expires
                                                            Actions on entry:
                                                            Instruct PHY to stop attempting to
                                                            send Hard Reset or Cable Reset.                        Hard Reset or Cable Reset sent
                                PRL_HR_Report                                                                    PRL_HR_Success
                         Actions on entry:                                                                Actions on entry:
                         Assert ALERT.I_TX_SUCC and                                                       Stop tHardResetComplete timer
                         ALERT.I_TX_FAIL
                                        Figure 11. Hard Reset and Cable Reset State Machine
Automatic GoodCRC Response                                                        BIST Mode
   Power Delivery packets require a GoodCRC
acknowledge packet to be sent for each received packet                            Bist Transmit
where the calculated CRC is the correct value. This                                  The FUSB307B will transmit Bist Carrier Mode 2
calculation is done by the FUSB307B.                                              signaling when directed by the TCPM via TRANSMIT
   The FUSB307B will automatically send the GoodCRC                               register. The FUSB307B will exit Bist Mode after
control packet in response to alleviate the local processor                       tBISTContMode timer expires.
from responding quickly to the received packet. Once the                          Bist Receive
GoodCRC packet is sent the FUSB307B will trigger the                                 When the FUSB307B is in Bist receive mode via
ALERTL.I_RXSTAT interrupt.                                                        TCPC_CTRL register, it will acknowledge these packets
   The following sequence of events occur internally within                       with a GoodCRC and automatically flush the buffer to allow
the FUSB307B without processor intervention when it is                            for thousands of packets to be received without filling the
determined that the receive message has the correct CRC. If                       receive buffer. Bist Receive mode will exit on a cable
the host processor attempts a packet transmission during an                       disconnect or a Hard Reset received.
Automatic GoodCRC response, the FUSB307B will set the
ALERTL.I_TXDISC bit interrupting the processor. The                               VBUS Source and Sink Control
processor should only transmit a new packet once                                     The FUSB307B can control a source and sink path via two
ALERTL.I_TXSUCC or ALERTL.I_TX_FAIL has been                                      outputs: SRC for the source path and SNK for the sink
received.                                                                         VBUS path.
   It is assumed that the processor will set the                                     These two outputs are controlled via the COMMAND
PWRCTRL.ORIENT to specify which channel USB−PD                                    register.
traffic will be transmitted or received.                                             The SNK and SRC outputs will autonomously disable
                                                                                  upon a cable detach.
                                                               www.onsemi.com
                                                                           12


                                                                  FUSB307B
Voltage Transitions
  The FUSB307B device can control a vSafe5V path via its
SRC output.
                                                      Transition to vSafe5v Path on Power up
                                                TCPM                                                      FUSB307B
                                                                                                       Sourcing Disabled
                                               Power Up                                        PWRSTAT.SOURCE_VBUS = 0b
                                                                                                 PWRSTAT.SOURCE_HV = 0b
                                                                                                          SRC = Low
                                                                                                         SRC_HV = Low
                                  Prepare device to source vSafe5v
                                                Write:
                                   PWRCTRL.DIS_VALARM = 1b
                                   PWRCTRL.AUTO_DISCH = 0b
                                        Enable vSafe5v Source                                           Enable SRC path
                           Write COMMAND.SourceVbusDefaultVoltage                                         SRC = High
                                                                                                No
                                                                                                      VBUS > vSafe5V(min)?
                                                                                                               Y
                                                                                                Voltage Transition Complete
                                                 Read
                                                                                             Set PWRSTAT.SOURCE_VBUS =1b
                                                ALERT
                                                                                               Set ALERT.I_PORT_PWR = 1b
             Service other
                               No     ALERT.I_PORT_PWR=1b?
              ALERTS
                                                 Yes
                                                                                                       Sourcing vSafe5V
                                            Read ALERT
                                          Read PWRSTAT
                                       Enable Auto Discharge
                                  PWRCTRL.AUTO_DISCH = 1b
                                 Notify Policy Engine that voltage
                                       transition is complete
                                     Figure 12. Transition to vSafe5V on Power Up
                                                              www.onsemi.com
                                                                         13


                                                                 FUSB307B
                                               Transition to HV using SRC enabled Path
                                          TCPM                                                    FUSB307B
                                 Accepted High Voltage                                          Sourcing vSafe5V
                      Policy Engine requests for VBUS transition                          PWRSTAT.SOURCE_VBUS = 1b
                                     to high voltage                                   PWRSTAT.SOURCE_HV = 0b (if 307/8)
                                                                                                    SRC = High
                             Enable Monitoring of VBUS
                                                                                            Enable Monitoring of VBUS
                                          Write:
                            PWRCTRL.AUTO_DISCH = 0b                                                SRC = High
                            PWRCTRL.DIS_VALARM = 0b                                           Monitor VALARMHCFG
                           VALARMHCFG = vNewSrc (Min)
                                                                                       No
                                  Transition HV Source
                   Enable external source path or transition existing
                                     Source to HV                                                 VALARMH Trip?
                                                                                                        Y
                                           Read                                          Set ALERTL.I_VBUS_ALARM_HI
                                          ALERT
    Service other
                    No        ALERT.I_VALARM_HI = 1b?
      ALERTS
                                           Yes
                                       Read ALERT
                            Setup FUSB305 for HV Sourcing
                                          Write:                                                Sourcing HV via SRC
                                   VALARML/HCFG
                             PWRCTRL.AUTO_DISCH = 1b
                            Notify Policy Engine that voltage
                                 transition is complete
NOTE:   Transitioning from HV on SRC to vSafe5v also on SRC can be done by using Voltage Alarm Low. Power supply
        is responsible for transitioning voltages to meet USB PD spec− no discharge necessary.
                               Figure 13. Transition to vSafe5V on Power Up
                                                            www.onsemi.com
                                                                      14


                                                         FUSB307B
VBUS Monitoring and Measurement                                   VBUS Discharge
   The FUSB307B can monitor the presence of VBUS and
will report it on PWRSTAT.VBUS_VAL and interrupt                  Manual Discharge
ALERT.I_PORT_PWR.                                                    There are two types of manual discharge circuits
   VBUS_VAL is set according to VBUS thresholds in                implemented: A bleed discharge for low current and a force
vVBUSthr.                                                         discharge. The bleed discharge can be manually enabled by
   The FUSB307B also supports a more precise voltage              writing        a      one       to       register      bit
measurement via an on−board ADC. The voltage on VBUS              PWRCTRL.EN_BLEED_DISCH. When enabled, the bleed
is measured at a rate of tVBUSsample and it is reported on        discharge provides a low current load on VBUS of 7 kΩ
VBUS_VOLTAGE_L/H register. The precision of the                   (max.) via RBLEED. The force discharge is used to quickly
measurement is +/2% with a resolution of 25 mV LSB.               discharge VBUS to vSafe0V by applying a dynamic load to
   In addition to providing the μProcessor an accurate            VBUS via RFULL_DISCH. The force discharge can be
measurement of VBUS, the measurement in                           manually enabled by writing a one to register bit
VBUS_VOLTAGE will be used when monitoring various                 PWRCTRL.FORCE_DISCH. When RFULL_DISCH is
user defined thresholds:                                          applied, the maximum slew rate allowed for discharging
                                                                  VBUS does not exceed vSrcSlewNeg 30 mV/μs as it is
• Voltage alarms in registers VALARMLCFG and
                                                                  specified in the USB−PD spec.
   VALARMHCFGL
                                                                     Automatic discharge bit PWRCTRL. AUTO_DISCH
• VBUS Disconnect Threshold in registers                          must be disabled before enabling force discharge.
   VBUS_SNK_DISCL and VBUS_SNK_DISCH
• VBUS Stop Discharge Threshold in registers                      Automatic Source Discharge after a Disconnect
   VBUS_STOP_DISCL and VBUS_STOP_DISCH                               Automatic discharge can be enabled by setting
• The FUSB307B implements Low and High VBUS                       PWRCTRL. AUTO_DISCH register bit. When in Source
   Voltage Alarms that can be programmable via                    mode the FUSB307B will fully discharge VBUS to vSafe5V
   VALARMLCFG and VALARMHCFG respectively. If                     (max.) within tSafe5V and to vSafe0V within tSafe0V when
   the High or the Low thresholds are crossed, the                a Disconnect occurs. The FUSB307B is in Source mode
   FUSB307B        will    signal     an     interrupt    on      when the SRC output is asserted.
   ALERTL.I_VBUS_ALRM_HI or                                          The FUSB307B in Source mode will detect a Disconnect
   ALERTH.I_VBUS_ALRM_LO respectively.                            if the CCSTAT.CCx_STAT field for the monitored CC pin
   These alarms can be disabled by writing                        indicates SRC.Open and enable the FULL Discharge
   PWRCTRL.DIS_VALARM to one                                      pull−down device. The monitored CC pin is specified by
                                                                  TCPC_CTRL.ORIENT.
   ALERTL.I_PORT_PWR is asserted if the bit−wise AND
of PWRSTAT and PWRSTAMSK results in any bits that
have the value 1.
                    VBUS           Cable Disconnect
                                  (CCSTAT change)
                                                                              vSafe5V
                                                                              vSafe0V
                                           tSafe5V                                        time
                             Apply R                      tSafe0V
                                    Figure 14. VBUS Auto Discharge as Source
                                                       www.onsemi.com
                                                              15


                                                                     FUSB307B
Automatic Sink Discharge after a Disconnect                                       VBUS_SNK_DISCL. Once the FUSB307B has detected a
  Automatic discharge can be enabled by setting                                   Disconnect, RFULL_DISCH will be enabled bringing the
PWRCTRL. AUTO_DISCH register bit. When in Sink                                    VBUS voltage down to vSafe0V.
mode the FUSB307B will fully discharge VBUS to vSafe5V                               Whenever the FUSB307B detects a Disconnect, it will not
(max.) within tSafe5V and to vSafe0V within tSafe0V when                          present Rd (or Rp) until VBUS reaches vSafe0V.
a disconnect occurs. The FUSB307B is in Sink mode any                                When the VBUS voltage goes below vSafe0V, the
time MSGHEADR.POWER_ROLE = 0.                                                     auto−discharge circuit will disable.
  Whenever the system is sinking voltages greater than                               If the discharge of VBUS to below vSafe0V is not
vSafe5V, a disconnect will be detected based on                                   accomplished by tSafe0V (650 ms), the FUSB307B will set
VBUS_SNK_DISC registers.                                                          the interrupt
  If the system is only sinking vSafe5V, a disconnect will be                     NOTE: ALERTL.I_PORT_PWR is asserted if the
detected when VBUS_VAL goes low.                                                               bit−wise AND of PWRSTAT and
  Due to the high capacitance on VBUS (up to 100 F) the                                        PWRSTAMSK results in any bits that have the
FUSB307B may not immediately know if VBUS has been                                             value 1.
removed. The FUSB307B with Automatic Discharge on                                    ALERTH.            I_FAULT      bit  and  the    status
will apply RBLEED discharge load to VBUS until it crosses                         FAULTSTAT.DISCH_FAIL. The discharge circuit is not
below VBUS_SNK_DISC.                                                              turned off when this happens.
  The FUSB307B has to detect a disconnect within                                     In tSinkDischargeBleed + tSinkDischargeFull have to be
tDisconnectDetect (6 ms) from VBUS crossing                                       less than tSafe5V to comply with USB−PD spec.
                        VBUS
                                                                                                       VBUS_SNK_DISC
                                                                                                         vSafe5V
                                                      tDisconnectDetect
                                                                                                          vSafe0V
                                                                                                                     time
              RBLEED                                                               tSinkDischarge Full
                                            tSinkDischargeBleed
                                                      tSafe5V
                                                                         tSafe0V
                           Cable Disconnect                     Apply RFULL_DISCH
                                      Figure 15. VBUS Auto Discharge as SinkSource
                                                                 www.onsemi.com
                                                                            16


                                                        FUSB307B
Discharge during a Connection                                         pull−down is specified by RFULL_DISCH. The FUSB307B
   The discharge functions can be manually activated via the          will automatically disable discharge when VBUS reaches
PWRCTRL.FORCE_DISCH register. The discharge                           VBUS_STOP_DISC threshold
                            VBUS
                   vSrcNew
              VBUS_STOP_DISC
                                                           tSrcSettle
                                                                                                                time
                                  PWRCTRL.FORCE_DISCH
                                       Apply R FORCE
                                  Figure 16. Sink Discharge during a Connection
Sink Discharge during a Connection                                    when any of the interrupts that are not masked in the Alert
   When the device is operating as a sink and it receives a           register are set or when the INTB pin is asserted. The
Hard Reset or a Power Role Swap, the automatic discharge              watchdog timer is cleared on an I2C access by the TCPM
circuitry and SNK output will be disabled by the host                 (either read or write). If the INTB pin is still asserted after
processor to avoid a disconnect detection.                            this I2C access, the watchdog timer will reinitialize and start
                                                                      monitoring again until all of the Alerts are cleared or until
Watchdog Timer                                                        the INTB pin is de−asserted.
   The watchdog timer functionality is enabled whenever                 When the watchdog timer expires, the FUSB307B will
TCPC_CTRL.EN_WATCHDOG is set to 1b. The watchdog                      immediately disconnect the CC terminations by setting
timer should only be enabled after an attach when the device          ROLE_CONTROL bits 3..0 to 1111b, disable all
is       in      Attached.Src,        Attached.Snk        or          SRC/SRC_HV or SNK outputs, discharge VBUS to
Apply.ROLECONTROL states. The watchdog timer starts                   vSafe0V, and set FAULT_STATUS.I2CInterfaceError.
                                                      www.onsemi.com
                                                                17


                                                           FUSB307B
USB−PD Rev 3.0 Features                                               The Sink TCPM that desires to transmit will write the TX
                                                                   Buffers and SINK_TRANSMIT register. The FUSB307B
Extended Data Messages                                             will wait for the Rp value to be set to SinkTxOk before
   Extended Data Messages is only supported via Chunking           transmitting the message. If Rp is already set to SinkTxOk,
where large messages are broken into 2 or more 26 byte             a SINK_TRANSMIT will transmit immediately.
chunks.                                                               In the case where the Sink TCPM wants to abort the
SinkTx                                                             message transmission before the Rp value has changed to
   The USB−PD Rev 3.0 has added this feature to allow the          SinkTxOk, it can write SINK_TRANSMIT.EN_SNK_TX
Sink to safely transmit a message reducing the risk of             = 0b. If a transmission has already started, writing this
collisions.                                                        register will be ignored and a FAULTSTAT.I2C_ERR
   The Protocol layer in the Source will request to set the Rp     interrupt will be generated.
value to SinkTxOk to indicate that the Sink can initiate an           If TXBYTECNT is less than 2h when a
Atomic Message Sequence (AMS). The Protocol layer in the           SINK_TRANSMIT.TXSOP <101 is requested, a
Source will request to set the Rp value to SinkTxNG to             FAULTSTAT.I2CERR interrupt is generated.
indicate that the Sink cannot initiate an AMS since the               The ALERTL.I_RXSTAT must be cleared when
Source is about to initiate an AMS.                                SINK_TRANSMIT is written or an ALERTL.I_TX_DISC
                                                                   is asserted.
 Table 4. RP SETTINGS FOR SINK TX
      Source Rp              Parameter            Description              Sink Operation                Source Operation
      1.5 A @5 V              SinkTxNG           Sink Transmit       Sink cannot initiate an AMS.    Source can initiate an AMS
                                                    “No Go”            Sink can only respond to    tSinkTx after setting Rp to this
                                                                    Messages as part of an AMS             value (Note 5)
      3.0 A @5 V              SinkTxOk         Sink Transmit “OK”      Sink can initiate an AMS    Source cannot initiate an AMS
                                                                                                        while this value is set
5. The TCPM is responsible for tSinkTx timer.
Fast Role Swap                                                     rFRSwapTx for tFRSwapTx. The initial Source shall only
   Fast Role Swap is the process of exchanging the Source          signal a Fast Role Swap when it has an Explicit Contract. On
and Sink roles between Port Partners rapidly due to the            transmission of the Fast Role Swap signal any pending
disconnection of an external power supply.                         Messages will be Discarded by internally toggling
   The Fast Role Swap process is intended for use by a             PD_RESET. The Fast Role Swap signal may override any
PDUSB HUB that presently has an external wall supply, and          active transmissions. Since the initial Sink’s response to the
is providing power both through its downstream Ports to            Fast Role Swap signal is to send a FR_Swap Message, the
USB Devices and upstream to a USB Host such as a                   initial Source shall ensure Rp is set to SinkTxOk once the
notebook. On removal of the external wall supply Fast Role         Fast Role Swap signal is complete.
Swap enables a VBUS supply to be maintained by allowing               The flow diagram in Figure 17 demonstrates the HUB and
the USB Host to apply vSafe5V after having detected Fast           Host function during the initial Fast Role Swap process. The
Role Swap signaling.                                               AMS and Power Role swap necessary to complete the Fast
   The initial Source will signal a Fast Role Swap request by      Role Swap is performed by the respective TCPMs.
driving CC to ground with a resistance of less than
                                                        www.onsemi.com
                                                                18


                                                                               FUSB307B
Fast Role Swap Cable Disconnect                                                       look like the Initial Source has initiated a FRSwap; The CC
(Informational Only)                                                                  lines will be driven to GND by Rd.
  The Initial Sink device waiting for FRSwap will not                                    The initial Sink will perform the FRSwap and the TCPM
disconnect on VBUS since PWRCTRL.AUTO_DISCH                                           will initiate the FR_Swap message. Since there is no device
will be set to zero by the TCPM. If the Type−C cable                                  attached, there will be no GoodCRC response which will
detaches while the Initial Sink is ready for a FRSwap, it will                        transition to Type−C Error Recovery.
                                       HUB FUSB305/6/7 Initially                                                         Host FUSB305/6/7
                                                   Acting as Source                                                   Initially Acting as Sink
                                                         Sourcing VBUS                                                            Sinking VBUS
                                                                                                                          Prepare System for FRSwap
                                                                                                                               Host TCPM Writes:
                                                System Loses Power source                                              SNK_FRSWAP.EN_SWAP_DTCT
                                                                                                                         PWRCTRL.AUTO_DISCH=0b
                                                   Initiate Fast Swap Signal
     FRSWAP drives CC Line    Hub TCPM Writes: SRC_FRSWAP.FRSWAP = 1b                                            No
     that is transmitting BMC   •
                              FUSB30x       will:
     low with rFRSwapTx for     •     Drive SRC = 0b
            tFRSwapTx           •     Issue a PD_RESET
                                      Drive CC to GND with rFRSwapTx
                                                                                                                             CC < vFRSwapCableTx
                                                                                                                          debounced for tFRSwapRx?
                                                                                                                                         Y
                                       (!SRC_FRSWAP.MANUAL_SNK_EN &&
                                             FRWAP_SNK_DELAY == 00b)?
                                                                                                                             Swap request Detected
                                                                                        Discard any pending PD
                                                                                                                               Issue a PD_RESET
                                                                                               Messages
                                                                                                                            SNK = Low (FUSB305/6)
                                                                                                                                    SRC = High
                                                                 Y                                                      Interrupt ALERT_VD.SWAP_RX
                                                         Drive SNK = 1b
                                                Set PWRSTAT.SNKVBUS = 1
                                                                              No
                                  No
                                                                                                                                  Sink Parameters
                                                                                                         tFRSwapRx -> 30us (min) to 50 μs(max)
                                                                                                         vFRSwapCableTx −> 490mV (min), 520mV (typ), 550mV (max)
                                                       tFRSwapTx done?                                   tSrcFRSwap −> 150 μs (max)
                                                                 Y
                                        If (!SRC_FRSWAP.MANUAL_SNK_EN)
                                             Wait FRSWAP_SNK_DELAY[1:0]
                                                           Start Sinking
                                   If(SRC_FRSWAP.MANUAL_SNK_EN)
                                       Hub TCPM Writes: COMMAND.SinkVbus
                                   Else
                                     {Drive SNK=1b
                                      Set PWRSTAT.SNKVBUS=1}
                                                      Set Rp to SinkTxOk
                                                       Hub TCPM Writes:
                                                  ROLECTRL.RP_VAL = 10b
                                                          Sinking VBUS
                                                      Source Parameters
                              rFRSwapTx −> 5 Ohm (max)
                               tFRSwapTx −> 60 μs (min) to 120 μs (max)
                                                             Figure 17. Fast Role Swap Flow Diagram
                                                                             www.onsemi.com
                                                                                   19


                                                                    FUSB307B
  Table 5. ABSOLUTE MAXIMUM RATINGS
     Symbol                                       Parameter                                          Min                Max                 Unit
     VDDAMR          Supply Voltage from VDD                                                         −0.5               6.0                   V
   VCC_HDDRP         CC pins when configured as Host, Device or Dual Role Port                       −0.5               6.0                   V
     (Note 6)
      VVBUS          VBUS Supply Voltage                                                             −0.5               28.0                  V
    TSTORAGE         Storage Temperature Range                                                       −65               +150                  C
         TJ          Maximum Junction Temperature                                                                      +150                  C
         TL          Lead Temperature (Soldering, 10 seconds)                                                          +260                  C
       ESD           Human Body Model, JEDEC              Connector Pins (VBUS, CCx)                   4                                     kV
                     JESD22−A114
                                                          Others                                       2                                     kV
                     Charged Device Model,                All Pins                                     1                                     kV
                     JEDEC LESD22−C101
Stresses exceeding those listed in the Maximum Ratings table may damage the device. If any of these limits are exceeded, device functionality
should not be assumed, damage may occur and reliability may be affected.
6. As host, device drives CC, VConn.
  Table 6. RECOMMENDED OPERATING CONDITIONS
      Symbol                          Parameter                               Min                 Typ                 Max                  Unit
        VBUS          VBUS Supply Voltage (Note 7)                             4.0                 5.0                21.5                   V
        VDD           VDD Supply Voltage                                  2.8 (Note 8)             3.3                5.5                    V
      VCONN           VCONN Supply Voltage (Note 9)                            2.7                                    5.5                    V
       ICONN          VCONN Supply Current                                                                            560                   mA
         TA           Operating Temperature                                    −40                                    +85                    C
         TA           Operating Temperature (Note 10)                          −40                                   +105                    C
Functional operation above the stresses listed in the Recommended Operating Ranges is not implied. Extended exposure to stresses beyond
the Recommended Operating Ranges limits may affect device reliability.
7. 20 V PD + 5% Tolerance per spec + 0.5 V Load Transition.
8. This is for functional operation only and isn’t the lowest limit for all subsequent electrical specifications below. All electrical parameters have
    a minimum of 3 V operation.
9. For powered accessories Vconn minimum is 2.7 V.
10. Automotive part only, FUSB307BVMPX.
                                                                www.onsemi.com
                                                                            20


                                                                    FUSB307B
DC and Transient Characteristics
   Unless otherwise specified: Recommended TA and TJ temperature ranges. All typical values are at TA = 25°C and
VDD = 3.3 V unless otherwise specified.
 Table 7. CURRENT CONSUMPTION
                                                                                               TA = −40 to +855C
                                                                                         TA = −40 to +1055C (Note 17)
                                                                                              TJ = −40 to +1255C
      Symbol                                Parameter                              Min                 Typ               Max     Unit
      IDISABLE         Disable Current (ROLECTRL = 0x0F)                                                                  10      μA
         ISTBY         Unattached Sink                                                                  6                 10      μA
                       Unattached DRP or Source                                                         7                 20      μA
  IATTACH_TypeC        Attached as Sink (No PD, AUTO_DISCH = 0)                                         11                26      μA
                       Attached as Source (No PD)                                                       12                22      μA
 Table 8. BASEBAND PD
                                                                                                        TA = −40 to +855C
                                                                                                  TA = −40 to +1055C (Note 17)
                                                                                                       TJ = −40 to +1255C
            Symbol                                      Parameter                                 Min          Typ         Max   Unit
               UI             Unit Interval                                                       3.03         3.33        3.70   μs
 TRANSMITTER
             zDriver          TX output impedance at 750 kHz with an external 220 pF               33                       75    Ω
                              or equivalent load
       tEndDriveBMC           Time to cease driving the line after the end of the last bit of                                2    UI
                              the Frame
       tHoldLowBMC            Time to cease driving the line after the final high−to−low           1                              μs
                              transition
           tStartDrive        Time before the start of the first bit of the preamble when          −1                        1    μs
                              the transmitter shall start driving the line
      tBISTContMode           Time a BIST Carrier Mode 2 transmission is performed                 30                       60   ms
        tBUFFER2CC            Time from I2C Stop from writing to TRANSMIT register to                                      195    μs
                              first bit of Preamble transmitted
               tR             Rise Time                                                           300                             ns
                tF            Fall Time                                                           300                             ns
 RECEIVER
           cReceiver          Receiver capacitance when driver isn’t turned on (Note 11)                        25                pF
            zBmcRx            Receiver Input Impedance                                             1                             MΩ
        tCC2BUFFER            Time between last bit of EOP to I_RXSTAT                                                      50    μs
            tRxFilter         Rx bandwidth limiting filter (Note 11)                              100                             ns
      nTransitionCount        Transitions count in a time window of 20 μs max                      3                            Edges
     tTransitionWindow        Time window for detecting non−idle                                   12                       20    μs
11. Guaranteed by characterization and/or design. Not production tested.
                                                                www.onsemi.com
                                                                           21


                                                       FUSB307B
                         Switch                                                              Switch
           DRP       Vcom                                                                            Vcom             DRP
                                                               Cable
                                      Connector                                Connector
                            cReceiver                                                    cReceiver
                                                    cCablePlug      cCablePlug
                                            Figure 18. Transmitter Test Load
Table 9. USB-PD R3.0 SPECIFIC PARAMETERS
                                                                                            TA = −40 to +855C
                                                                                      TA = −40 to +1055C (Note 17)
                                                                                           TJ = −40 to +1255C
        Symbol                                Parameter                               Min           Typ         Max       Unit
TRANSMITTER
      rFRSwapTx      Fast Role Swap request transmit driver resistance                                           5         Ω
                     Measured from VCCx = 0 to vFRSwapCableTx
      tFRSwapTx      Fast Role Swap request transmit duration                          60                       120        μs
RECEIVER
     tFRSwapRx       Fast Role Swap request detection time                             30                        50        μs
  vFRSwapCableTx     Fast Role Swap request voltage detection threshold               490           520         550       mV
Table 10. TYPE C SPECIFIC PARAMETERS
                                                                                                 TA = −40 to +855C
                                                                                          TA = −40 to +1055C (Note 17)
                                                                                                TJ = −40 to +1255C
        Symbol                                   Parameter                                  Min         Typ       Max      Unit
       RSW_CCx       RDSON for VCONN to CC1 or VCONN to CC2                                              0.4       1.0      Ω
        ISW_CCX      Over Current Protection (OCP) limit at which VCONN switch              600         800       1000     mA
                     shuts off over the entire VCONN voltage range
                     VCONN_OCP = 0Fh
         tSoftStart  Time taken for the VCONN switch to turn on during which Over−                       1.5               ms
                     Current Protection is disabled
         I80_CCX     DFP 80 μA CC Current (Default) ROLECTRL = 05h                           64          80         96      μA
        I180_CCX     DFP 180 μA CC Current (1.5 A) ROLECTRL = 15h                           166         180        194      μA
        I330_CCX     DFP 330 μA CC Current (3 A) ROLECTRL = 25h                             304         330        356      μA
         VUFPDB      UFP pull−down voltage in dead battery under all pull−up DFP                                  2.18       V
                     loads
        RDEVICE      Device pull−down resistance (Note 12)                                   4.6         5.1       5.6      kΩ
            Ra       Powered Accessory Termination                                          800                   1200      Ω
     vRa−SRCdef      Ra Detection Threshold for CC Pin for Source for Default Current       0.15        0.20      0.25       V
                     on VBUS
    vRa−SRC1.5A      Ra Detection Threshold for CC Pin for Source for 1.5 A Current         0.35        0.40      0.45       V
                     on VBUS
                                                    www.onsemi.com
                                                               22


                                                                FUSB307B
 Table 10. TYPE C SPECIFIC PARAMETERS (continued)
                                                                                                  TA = −40 to +855C
                                                                                            TA = −40 to +1055C (Note 17)
                                                                                                 TJ = −40 to +1255C
           Symbol                                       Parameter                            Min         Typ       Max   Unit
       vRa−SRC3A            Ra Detection Threshold for CC Pin for Source for 3 A             0.75        0.80      0.85   V
                            Current on VBUS
       vRd−SRCdef           Rd Detection Threshold for Source for Default Current            1.50        1.60      1.65   V
                            (HOST_CUR1/0 = 01)
      vRd−SRC1.5A           Rd Detection Threshold for Source for 1.5 A Current              1.50        1.60      1.65   V
                            (HOST_CUR1/0 = 10)
       vRd−SRC3A            Rd Detection Threshold for Source for 3 A Current                2.45        2.60      2.75   V
                            (HOST_CUR1/0 = 11)
          vRa−SNK           Ra Detection Threshold for CC Pin for Sink                       0.15        0.20      0.25   V
           vRd−def          Rd Default Current Detection Threshold for Sink                  0.61        0.66      0.70   V
          vRd−1.5A          Rd 1.5 A Current Detection Threshold for Sink                    1.16        1.23      1.31   V
          vRd−3.0A          Rd 3 A Current Detection Threshold for Sink                      2.04        2.11      2.18   V
           zOPEN            CC resistance for disabled state, ROLECTRL = 0Fh                 126                         kΩ
        vVCONNthr           Valid VCONN Voltage                                                                     2.4   V
                            Assumes PWRCTRL.EN_VCONN = 1b
        tTCPCfilter         Debounce time on CC lines to prevent CCSTAT change in case         4                   500    μs
                            of minor changes in voltage on CC because of noise
      tCCDebounce           Debounce Time for CC Attach Detection                            100         150       200   ms
      tPDDebounce           Time a port shall wait before it can determine there has been a   10          15        20   ms
          (Note 13)         change in USB Type−C current due to the potential for USB−PD
                            BMC signaling on CC
           tSetReg          Time between CC status change and I2C registers                                         50    μs
                            updated
    tTCPCSampleRate         CC Sample rate for indicating changes on CC lines                                        1   ms
            tDRP            Sum of tToggleSrc and tToggleSnk timers                           50                   100   ms
         tToggleSrc         Time Spent in Apply Rp before       DRPTOGGLE = 00                15                    30   ms
                            transitioning to Apply Rd
                                                                DRPTOGGLE = 01                20                    40   ms
                                                                DRPTOGGLE = 10                25                    50   ms
                                                                DRPTOGGLE = 11                30                    60   ms
        tToggleSnk          Time Spent in Apply Rd before       DRPTOGGLE = 00                35                    70   ms
                            transitioning to Apply Rp
                                                                DRPTOGGLE = 01                30                    60   ms
                                                                DRPTOGGLE = 10                25                    50   ms
                                                                DRPTOGGLE = 11                20                    40   ms
12. RDEVICE minimum and maximum specifications are only guaranteed when power is applied.
13. Only Applicable to Autonomous Debug State machine.
                                                             www.onsemi.com
                                                                      23


                                                         FUSB307B
 Table 11. VBUS MEASUREMENT CHARACTERISTICS
                                                                                       TA = −40 to +855C
                                                                                 TA = −40 to +1055C (Note 17)
                                                                                      TJ = −40 to +1255C
        Symbol                               Parameter                           Min          Typ        Max     Unit
 vMDACstepVBUS    VBUS Measure block LSB reported on VBUS_VOLTAGE[9:0]                         25                mV
                  register
    pMDACVBUS     Accuracy of VBUS Voltage Measurement        TA = −40 to +85°C                           ±2      %
                                                              TA = +85 to +105°C                          ±5      %
                                                              (Note 12)
    tVBUSsample   Sampling period of VBUS Measurement                                          3                 ms
       vVBUSthr   VBUS threshold at which                VDD > VDDGOOD            3.5                     4.0     V
                  VBUS_VAL interrupt is triggered.                                                     (Note 14)
                  Assumes VBUS present detection
                  is enabled                             VDD < VDDGOOD            3.4                     4.0
                                                         (Dead Battery)
      vVBUShys    Hysteresis on VBUS Comparator                                                50                mV
      vSafe0Vthr  Safe Operating Voltage at “Zero Volts” Threshold                                        0.8     V
     vSafe0Vhys   vSafe0V Hysteresis                                                           40                mV
     vALARMLSB    LSB of VBUS thresholds for VBUS_SNK_DISCL                                    50                mV
                  VBUS_STOP_DISCL VALARMHCFGL VALARMLCFGL
       pALARM     Accuracy of VBUS thresholds for VBUS_SNK_DISCL                                          ±5      %
                  VBUS_STOP_DISCL VALARMHCFGL VALARMLCFGL
14. FUSB307BVMPX vVBUSthr (max) = 4.05 V.
                                                     www.onsemi.com
                                                               24


                                                               FUSB307B
Table 12. SOURCE AND SINK CONTROL SPECIFICATIONS
                                                                                                               TA = −40 to +855C
                                                                                                              TA = −40 to +1055C
                                                                                                                   (Note 17)
                                                                                                              TJ = −40 to +1255C
          Symbol                                                Parameter                                Min     Typ    Max     Unit
          RBLEED               Equivalent Resistance for bleed VBUS = 4.0 V to 21.5 V                      4             7       kΩ
                               discharging VBUS
       vSrcSlewNeg             Maximum slew rate allowed          VBUS = 4.0 V to 21.5 V                                 30    mV/μs
                               when discharging VBUS
          tSafe0V              Time to reach vSafe0V max                                                                650      ms
          tSafe5V              Time to reach vSafe5V max                                                                275      ms
         tSrcSettle            Time to discharge to vSrcNew                                                             275      ms
    tAUTO_DISCH_FAIL           Time to declare auto discharge     Device configured as Source.           650                     ms
                               failure to discharge to vSafe0V    Measure from CCSTAT change to Open
                                                                  Device configured as Sink.             440                     ms
                                                                  Measure from I_VBUS_SNK_DISC
tAUTO_DISCH_FAIL_5V Time to declare auto discharge                Device configured as Source.           275                     ms
                               failure to discharge to vSafe5v    Measure from CCSTAT change to Open
                                                                  Device configured as Sink.              60                     ms
                                                                  Measure from I_VBUS_SNK_DISC
Table 13. LDO SPECIFICATIONS
                                                                                                        TA = −40 to +855C
                                                                                                       TA = −40 to +1055C
                                                                                                             (Note 17)
                                                                                                       TJ = −40 to +1255C        Unit
    Symbol                       Parameter                         VDD               Conditions        Min      Typ     Max      Unit
     VV3P3       LDO Output Voltage                             < VDDGOOD      VBUS = 4.0 V to 21.5 V  3.0               3.6      V
  VLDO_VALID     Valid VBUS_IN range for LDO operation          < VDDGOOD                              4.0              21.5      V
   VDDGOOD       VDD Voltage where device is powered                                                   2.7               3.0      V
                 from VDD instead of VBUS
   ILDO_MAX      Max. Output Current                            < VDDGOOD      VBUS = 4.0 V to 21.5 V, 30                        mA
                                                                               VDROP = 120 mV
Table 14. OVER-TEMPERATURE SPECIFICATIONS
       Symbol                                Parameter                           Min             Typ             Max           Unit
        TSHUT           Temp. for VCONN Switch Turn Off                                          145                            °C
        THYS            Temp. Hysteresis for VCONN Switch Turn On                                 10                            °C
Table 15. WATCHDOG TIMER SPECIFICATIONS
       Symbol                                Parameter                           Min             Typ             Max           Unit
     THVWatchdog        Time from last I2C transaction or INTB pin as-           1500                           2000           ms
                        sertion to entering ErrorRecovery
                                                            www.onsemi.com
                                                                    25


                                                               FUSB307B
 Table 16. IO SPECIFICATIONS
                                                                                                  TA = −40 to +855C
                                                                                            TA = −40 to +1055C (Note 17)
                                                                                                 TJ= −40 to +1255C
     Symbol                 Parameter            VDD (V)                Conditions            Min        Typ       Max   Unit
 HOST INTERFACE PINS(INT_N, DBG_N)
     VOLINTN          Output Low Voltage        3.0 to 5.5               IOL = 4 mA                                 0.4   V
 GPIOS, ORIENT AND MUX_SEL PINS
         VIL        Low−Level Input Voltage     3.0 to 5.5                                                          0.4   V
         VIH            High−Level Input        3.0 to 5.5                                    1.2                         V
                              Voltage
        VOL            Low−Level Output         3.0 to 5.5               IOL = 4 mA                                 0.4   V
                              Voltage
        VOH            High−Level Output        3.0 to 5.5              IOH = −2 mA         0.7VDD                        V
                              Voltage
          IIN             Input Leakage         3.0 to 5.5     Input Voltage 0 V to 5.5 V     −5                     5   μA
                                                              (When GPIO is setup as an
                                                                input or Tri−Stated output)
        IOFF           Off Input Leakage            0            Input Voltage 0 V to 5.5 V   −5                     5   μA
 SRC, SNK AND SRC_HV
        VOL            Low−Level Output         3.0 to 5.5               IOL = 4 mA                                 0.4   V
                              Voltage
        VOH            High−Level Output        3.0 to 5.5              IOH = −2 mA         0.7VDD                        V
                              Voltage
 I2C INTERFACE PINS – STANDARD, FAST OR FAST MODE PLUS SPEED MODE SDA, SCL) (Note 15)
      VDDEXT        External power supply to                                                  1.8                   3.6   V
                    which SDA and SCL are
                             pulled up
                                                                                                  TA = −40 to +855C
                                                                                            TA = −40 to +1055C (Note 17)
                                                                                                 TJ= −40 to +1255C
     Symbol                 Parameter            VDD (V)                Conditions           Min.        Typ.      Max.  Unit
       VILI2C       Low−Level Input Voltage     3.0 to 5.5                                                          0.4   V
       VIHI2C           High−Level Input        3.0 to 5.5                                    1.2                         V
                              Voltage
       VHYS          Hysteresis of Schmitt      3.0 to 5.5                                    0.2                         V
                          Trigger Inputs
         Ii2C        Input Current of SDA       3.0 to 5.5     Input Voltage 0.26 V to 2 V    −10                   10   μA
                          and SCL Pins,
      ICCTI2C       VDD current when SDA        3.0 to 5.5          Input Voltage 1.8 V       −10                   10   μA
                         or SCL is HIGH
      VOLSDA           Low−Level Output         3.0 to 5.5                                     0                   0.36   V
                     Voltage at 2 mA Sink
                     Current (Open−Drain)
      IOLSDA           Low−Level Output         3.0 to 5.5            VOLSDA = 0.4 V          20                         mA
                     Current (Open−Drain)
          CI         Capacitance for Each       3.0 to 5.5                                                5               pF
                        I/O Pin (Note 16)
15. I2C pull up voltage is required to be between 1.71 V and VDD.
                                                            www.onsemi.com
                                                                      26


                                                                    FUSB307B
 Table 17. FAST MODE PLUS I2C SPECIFICATIONS
                                                                                                             Fast Mode Plus
     Symbol                                      Parameter
                                                                                                Min.               Max.            Unit
       fSCL         I2C_SCL Clock Frequency                                                       0                1000            kHz
     tHD;STA        Hold Time (Repeated) START Condition                                        0.26                                μs
       tLOW         Low Period of I2C_SCL Clock                                                  0.5                                μs
      tHIGH         High Period of I2C_SCL Clock                                                0.26                                μs
     tSU;STA        Set−up Time for Repeated START Condition                                    0.26                                μs
     tHD;DAT        Data Hold Time                                                                0                                 μs
     tSU;DAT        Data Set−up Time                                                             50                                 ns
         tr         Rise Time of I2C_SDA and I2C_SCL Signals                              20 × (VDD/5.5 V)         120              ns
         tf         Fall Time of I2C_SDA and I2C_SCL Signals (Note 16)                    20 × (VDD/5.5 V)         120              ns
     tSU;STO        Set−up Time for STOP Condition                                              0.26                                μs
       tBUF         Bus−Free Time between STOP and START Conditions                              0.5                                μs
        tSP         Pulse Width of Spikes that Must Be Suppressed by the Input                    0                 50              ns
                    Filter
16. Guaranteed by characterization. Not production tested.
17. Automotive part only, FUSB307BVMPX.
                      tf               tr                 tSU;DAT
                 70%                              70%
         SDA      30%                             30%
                                                tHD;DAT                                                 tVD;DAT
                             tf
                                                                                           tHIGH
                                                                    tr
                                70%                  70%                 70%                        70%
          SCL                                                             30%
                                 30%                  30%                                           30%
                      tHD;STA                                                  tLOW
                                                                                                                            9th clock
                    S                 1 / fSCL
                                  1st clock cycle
                                                                                                              tBUF
         SDA
                                                                            tVD;ACK
               tSU;STA                     tHD;STA      tSP                                 tHD;STO
                                                                       70%
          SCL                                                           30%
                                Sr                                                                       P             S
                                                                                 9th clock                                    002aac938
            VIL = 0.3VDD
            VIH = 0.7VDD
                           Figure 19. Definition of Timing for Full−Speed Mode Devices on the I2C Bus
                                                                  www.onsemi.com
                                                                           27


Table 18. REGISTER DEFINITIONS
                 Register
 Address           Name        Type Rst Val     Bit7          Bit6          Bit5          Bit4            Bit3           Bit2       Bit1      Bit0
   00h           VENDIDL         R   79h                                                     Vendor ID Low
   01h           VENDIDH         R   07h                                                     Vendor ID High
   02h           PRODIDL         R   33h                                                    Product ID Low
   03h           PRODIDH         R   01h                                                    Product ID High
   04h            DEVIDL         R   02h                                                     Device ID Low
   05h            DEVIDH         R   02h                                                     Device ID High
   06h         TYPECREVL         R   12h                                              USB Type−C Revision Low
   07h         TYPECREVH         R   00h                                              USB Type−C Revision High
   08h         USBPDVER          R   12h                                                    USB PD Version
   09h         USBPDREV          R   20h                                                   USB PD Revision
   0Ah          PDIFREVL         R   12h                                         USB PD Interface Revision Low (Version)
   0Bh          PDIFREVH         R   10h                                        USB PD Interface Revision High (Revision)
   10h            ALERTL       R/WC  00h     I_VBUS_       I_TXSUCC      I_TXDISC      I_TXFAIL            I_         I_RXSTAT   I_PORT_   I_CCSTAT
                                             ALRM_HI                                                  RXHRDRST                     PWR
   11h            ALERTH       R/WC  00h       I_VD_        Reserved     Reserved      Reserved        I_VBUS_       I_RX_FULL   I_FAULT    I_VBUS_
                                              ALERT                                                   SNK_DISC                             ALRM_LO
   12h         ALERTMSKL        R/W  FFh     M_VBUS_      M_TXSUCC      M_TX_DISC      M_TXFAIL           M_         M_RXSTAT    M_PORT_  M_CCSTAT
                                             ALRM_HI                                                  RXHRDRST                     PWR
   13h         ALERTMSKH        R/W  0Fh      M_VD_         Reserved     Reserved      Reserved        M_VBUS_      M_RX_FULL    M_FAULT   M_VBUS_
                                              ALERT                                                   SNK_DISC                             ALRM_LO
   14h        PWRSTATMSK        R/W  FFh    M_DEBUG_         M_INIT     M_SRC_HV       M_SRC_          M_VBUS_        M_VBUS_   M_VCONN_       M_
                                                ACC                                      VBUS           VAL_EN           VAL        VAL   SNKVBUS
   15h       FAULTSTATMSK       R/W  B3h      M_ALL_        Reserved     M_AUTO_      M_FORCE_         Reserved        Reserved M_VCONN_  M_I2C_ERR
                                              REGS_                     DISCH_FAIL    DISCH_FAIL                                   OCP
                                              RESET
 16h..17h        Reserved        R   00h                                                       Reserved
   18h        STD_OUT_CFG       R/W  40h    TRI_STATE       DEBUG_       Reserved      Reserved               MUX_CTRL           Reserved    ORIENT
                                                              ACC
   19h         TCPC_CTRL        R/W  00h             Reserved               EN_        DEBUG_            I2C_CLK_STRECTH           BIST_     ORIENT
                                                                        WATCHDOG      ACC_CTRL                                    TMODE
   1Ah          ROLECTRL        R/W  0Ah     Reserved         DRP         RP_VAL                      CC2_TERM                  CC1_TERM
                                     4Ah
                                                             www.onsemi.com
                                                                     28


Table 18. REGISTER DEFINITIONS (continued)
                  Register
 Address           Name        Type      Rst Val    Bit7          Bit6         Bit5           Bit4           Bit3         Bit2           Bit1         Bit0
   1Bh         FAULTCTRL       R/W         00h                  Reserved                   Reserved        DISCH_      Reserved       Reserved     VCONN_
                                                                                                         TIMER_DIS                                 OCP_DIS
   1Ch          PWRCTRL        R/W         60h    Reserved    VBUS_MON      DIS_VALRM        AUTO_      EN_BLEED_      FORCE_         VCONN_      EN_VCONN
                                                                                             DISCH          DISCH       DISCH           PWR
   1Dh            CCSTAT         R       00h/20h         Reserved           LOOK4CON       CON_RES               CC2_STAT                    CC1_STAT
   1Eh           PWRSTAT         R         08h    DEBUG_       TCPC_INIT     SOURCE_       SOURCE_      VBUS_VAL_     VBUS_VAL        VCONN_       SNKVBUS
                                                    ACC                         HV           VBUS             EN                         VAL
   1Fh          FAULTSTAT        R         80h   ALL_REGS_      Reserved      AUTO_         FORCE_        Reserved     Reserved       VCONN_       I2C_ERR
                                                   RESET                    DISCH_FAIL    DISCH_FAIL                                    OCP
 20h..22h        Reserved        R         00h                                                     Reserved
   23h          COMMAND          R         00h                                                     Command
   24h          DEVCAP1L         R         DDh             ROLES_SUPPORT                    ROLES_        SWITCH_     SNK_VBUS        SRC_HV      SRC_VBUS
                                                                                           SUPPORT         VCONN
   25h          DEVCAP1H         R         1Eh                  Reserved                  BLEED_DIS     FORCE_DIS       VBUS_              RP_SUPPORT
                                                                                                                        MEAS_
                                                                                                                        ALRM
   26h          DEVCAP2L         R         D7h   SNK_DISC_       STOP_          VBUS_ALRM_LSB                     VCONN_POWER_CAP                  VCONN_
                                                  DETECT         DISCH                                                                            FAULT_CAP
   27h          DEVCAP2H         R         01h                                             Reserved                                                Watchdog
                                                                                                                                                     Timer
   28h         STD_IN_CAP        R         00h                                                     Reserved
   29h        STD_OUT_CAP        R         41h    Reserved      DEBUG_                     Reserved                   MUX_CTRL        Reserved      ORIENT
                                                                  ACC
 2Ah..2Dh        Reserved        R         00h                                                     Reserved
   2Eh         MSGHEADR        R/W         02h                  Reserved                   Cable Plug     Data Role          USB PD Rev            PWR Role
   2Fh          RXDETECT       R/W         00h    Reserved    EN_CABLE_      EN_HRD_      EN_SOP2_       EN_SOP1_      EN_SOP2        EN_SOP1       EN_SOP
                                                                  RST          RST            DBG            DBG
   30h         RXBYTECNT         R         00h                                                Received Byte Count
   31h            RXSTAT         R         00h                               Reserved                                          Received SOP* Message
   32h           RXHEADL         R         00h                                               Received Header Low
   33h          RXHEADH          R         00h                                               Received Header High
 34h..4Fh         RXDATA         R         00h                                              Received Data Payload
   50h          TRANSMIT       R/W         00h           Reserved                 Retry Counter           Reserved             Transmit SOP* Message
                                                                 www.onsemi.com
                                                                         29


Table 18. REGISTER DEFINITIONS (continued)
                   Register
 Address            Name       Type      Rst Val   Bit7      Bit6          Bit5            Bit4            Bit3            Bit2           Bit1         Bit0
    51h         TXBYTECNT      R/W         00h                                             Transmit Byte Count
    52h           TXHEADL      R/W         00h                                            Transmit Header Low
    53h          TXHEADH       R/W         00h                                            Transmit Header High
  54h..6F          TXDATA      R/W         00h                                              Transmit Payload
    70h      VBUS_VOLTAGE_L      R         00h                                        VBUS Measurement Output
    71h     VBUS_VOLTAGE_H       R         00h
    72h      VBUS_SNK_DISCL    R/W         A0h                     VBUS SINK Disconnected Threshold (See Register Description Table)
    73h     VBUS_SNK_DISCH     R/W         1Ch
    74h     VBUS_STOP_DISCL    R/W         00h                      VBUS Discharge Stop Threshold (See Register Description Table)
    75h     VBUS_STOP_DISCH    R/W         00h
    76h       VALARMHCFGL      R/W         00h                           Voltage High Trip Point (See Register Description Table)
    77h       VALARMHCFGH      R/W         00h
    78h        VALARMLCFGL     R/W         00h                           Voltage Low Trip Point (See Register Description Table)
    79h       VALARMLCFGH      R/W         00h
 7Ah..7Fh         Reserved     R/W         00h                                                  Reserved
   A0h          VCONN_OCP      R/W         0Fh                    Reserved                                OCP_                        OCP_CUR
                                                                                                         RANGE
   A2h             RESET      R/WC         00h                                  Reserved                                               PD_RST       SW_RST
   A4h          GPIO1_CFG      R/W         00h                           Reserved                                     GPO1_VAL        GPI1_EN      GPO1_EN
   A5h          GPIO2_CFG      R/W         00h                    Reserved                             FR_SWAP_       GPO2_VAL        GPI2_EN      GPO2_EN
                                                                                                           FN
   A6h           GPIO_STAT       R         00h                                  Reserved                                              GPI2_VAL     GPI1_VAL
   A7h          DRPTOGGLE      R/W         00h                                  Reserved                                                     DRPTOGGLE
 A9h..AFh         Reserved       R         00h                                                  Reserved
   B0h        SINK_TRANSMIT    R/W         40h   Reserved DIS_SNK_            Retry Counter             Reserved                Transmit SOP* Message
                                                             TX
   B1h         SRC_FRSWAP      R/W         00h                    Reserved                              FRSWAP_SNK_DELAY              MANUAL_      FR_SWAP
                                                                                                                                       SNK_EN
   B2h         SNK_FRSWAP      R/W         00h                                          Reserved                                                       EN_
                                                                                                                                                   FRSWAP_
                                                                                                                                                      DTCT
                                                            www.onsemi.com
                                                                    30


Table 18. REGISTER DEFINITIONS (continued)
                Register
 Address         Name          Type      Rst Val   Bit7      Bit6       Bit5   Bit4   Bit3    Bit2    Bit1      Bit0
   B3h         ALERT_VD        R/W         00h   Reserved I_DISCH_    I_GPI2 I_GPI1 I_VDD_  I_OTP  I_SWAP_TX I_SWAP_RX
                                                            SUCC                     DTCT
   B4h       ALERT_VD_MSK      R/W         7Fh   Reserved M_DISCH_    M_GPI2 M_GPI1 MI_VDD_ M_OTP   M_SWAP_   M_SWAP_
                                                            SUCC                     DTCT              TX        RX
                                                            www.onsemi.com
                                                                   31


Table 19. VENDIDL
Address: 00h
Reset Value: 0x79
Type: Read
   Bit #             Name  R/W/C Size (Bits)                       Vendor ID Low Description
   7:0             VENDIDL   R       8        ON Semiconductor Vendor ID Low: 79h
Table 20. VENDIDH
Address: 01h
Reset Value: 0x07
Type: Read
   Bit #             Name  R/W/C Size (Bits)                      Vendor ID High Description
   7:0             VENDIDH   R       8        ON Semiconductor Vendor ID High: 07h
Table 21. PRODIDL
Address: 02h
Reset Value: See Below
Type: Read
   Bit #             Name  R/W/C Size (Bits)                      Product ID Low Description
   7:0             PRODIDL   R       8        Product ID Low, FUSB307B: 33h
Table 22. PRODIDH
Address: 03h
Reset Value: 0x01h
Type: Read
   Bit #             Name  R/W/C Size (Bits)                     Product ID High Description
   7:0             PRODIDH   R       8        Product ID High, All: 1h
Table 23. DEVIDL
Address: 04h
Reset Value: 0x02h
Type: Read
   Bit #             Name  R/W/C Size (Bits)                 Device ID Low (Version) Description
   7:0              DEVIDL   R       8        Version ID: 02h
                                              A_[Revision ID]: 0x01 (e.g. A_revA)
                                              B_[Revision ID]: 0x02 (e.g. B_revA)
                                              C_[Revision ID]: 0x03 (e.g. C_revA) etc
Table 24. DEVIDH
Address: 05h
Reset Value: 0x02h
Type: Read
   Bit #             Name  R/W/C Size (Bits)                Device ID High (Revision) Description
   7:0              DEVIDH   R       8        Revision ID: 02h
                                              [Version ID]_revA: 0x00 (e.g. A_revA)
                                              [Version ID]_revB: 0x01 (e.g. A_revB)
                                              [Version ID]_revC: 0x02 (e.g. A_revC) etc
                                    www.onsemi.com
                                             32


Table 25. TYPECREVL
Address: 06h
Reset Value: 0x12h
Type: Read
   Bit #             Name   R/W/C Size (Bits)                Type−C Revision Low Description
   7:0            TYPECREVL   R       8        Type−C Revision Low: 12h
Table 26. TYPECREVH
Address: 07h
Reset Value: 0x00h
Type: Read
   Bit #             Name   R/W/C Size (Bits)                Type−C Revision High Description
   7:0           TYPECREVH    R       8        Type−C Revision High: 00h
Table 27. USBPDVER
Address: 08h
Reset Value: 0x12h
Type: Read
   Bit #             Name   R/W/C Size (Bits)                   USB−PD Version Description
   7:0            USBPDVER    R       8        USB−PD Version: 12h
Table 28. USBPDREV
Address: 09h
Reset Value: 0x20h
Type: Read
   Bit #             Name   R/W/C Size (Bits)                   USB−PD Revision Description
   7:0            USBPDREV    R       8        USB−PD Revision: 20h
Table 29. PDIFREVL
Address: 0Ah
Reset Value: 0x12h
Type: Read
   Bit #             Name   R/W/C Size (Bits)           USB−PD Interface Revision Low Description
   7:0            PDIFREVL    R       8        USB−PD IF Version: 12h
Table 30. PDIFREVH
Address: 0Bh
Reset Value: 0x10h
Type: Read
   Bit #             Name   R/W/C Size (Bits)          USB−PD Interface Revision High Description
   7:0            PDIFREVH    R       8        USB−PD IF Revision: 10h
                                     www.onsemi.com
                                              33


 Table 31. ALERTL
 Address: 10h
 Reset Value: 0x00
 Type: Read, Write 1 to Clear
     Bit #               Name           R/W/C       Size (Bits)                         ALERT1 Description
      7         I_VBUS_ALRM_HI           R/WC           1        Voltage Alarm Hi
                                                                 0b: Cleared
                                                                 1b: A high−voltage alarm has occurred
      6              I_TXSUCC            R/WC           1        0b: Cleared
                                                                 1b: Reset or SOP* message transmission successful.
                                                                 GoodCRC response received on SOP* message transmission.
                                                                 Transmit SOP* message buffer registers are empty
      5               I_TXDISC           R/WC           1        0b: Cleared
                                                                 1b: Reset or SOP* message transmission not sent due to
                                                                 incoming receive message. Transmit SOP* message buffer
                                                                 registers are empty
      4                I_TXFAIL          R/WC           1        0b: Cleared
                                                                 1b: SOP* message transmission not successful, no GoodCRC re-
                                                                 sponse received on SOP* message transmission.
                                                                 Transmit SOP* message buffer registers are empty.
      3            I_RXHRDRST            R/WC           1        Received Hard Reset
                                                                 0b: Cleared
                                                                 1b: Received Hard Reset message
      2               I_RXSTAT           R/WC           1        Receive Status
                                                                 0b: Cleared
                                                                 1b: RXSTAT changed. RXBYTECNT being 0 does not set this regis-
                                                                 ter
      1            I_PORT_PWR            R/WC           1        Port Power Status
                       (Note 18)                                 0b: Cleared
                                                                 1b: Port status changed. Read PWRSTAT register
      0              I_CCSTAT            R/WC           1        CC Status
                                                                 0b: Cleared
                                                                 1b: CC status changed. Read CCSTAT register
18. ALERTL.I_PORT_PWR is asserted if the bit−wise AND of PWRSTAT and PWRSTAMSK results in any bits that have the value 1.
                        I_VBUS_SNK_DISC
                                                       www.onsemi.com
                                                                34


 Table 32. ALERTH
 Address: 11h
 Reset Value: 0x00
 Type: Read, Write 1 to Clear
     Bit #               Name              R/W/C      Size (Bits)                            ALERT2 Description
       7            I_VD_ALERT              RWC           1        Vendor Defined Alert
                                                                   0b: Cleared
                                                                   1b: A Vendor Defined alert has occurred. Read ALERT_VD register
      6:4             Reserved               R            3        Reserved: 000b
       3        I_VBUS_SNK_DISC             RWC           1        VBUS Sink Disconnect Detected
                                                                   0b: Cleared
                                                                   1b: A VBUS Sink Disconnect Threshold crossing from High to Low
                                                                        has been detected
       2             I_RX_FULL              RWC           1        Rx Buffer Overflow
                                                                   0b: Internal RX Buffer is functioning properly
                                                                   1b: Internal RX Buffer has overflowed
                                                                   Note: This interrupt indicates overflow of the internal buffer, not the
                                                                   RXDATA space. To clear overflow condition, write to ALERTL.I_RX-
                                                                   STAT
                                                                   Writing a 1 to this register acknowledges the overflow.
                                                                   The actual overflow is cleared by writing to ALERTL. I_RXSTAT
       1               I_FAULT             R/WC           1        Fault Alarm
                      (Note 19)                                    0b: Cleared
                                                                   1b: A Fault alarm has occurred. Read FAULTSTAT register
       0         I_VBUS_ALRM_LO            R/WC           1        Voltage Alarm Lo
                                                                   0b: Cleared
                                                                   1b: A low−voltage alarm has occurred
19. ALERTH.I_FAULT is asserted if the bit−wise AND of FAULTSTAT and FAULTSTAMSK results in any bits that have the value 1.
 Table 33. ALERTMSKL
 Address: 12h
 Reset Value: 0xFF (Resets on POR, SW_RST and Hard Reset)
 Type: Read/Write
     Bit #               Name              R/W/C      Size (Bits)                         Alert Mask 1 Description
       7        M_VBUS_ALRM_HI              R/W           1        0b: Interrupt masked
                                                                   1b: Interrupt unmasked
       6             M_TXSUCC               R/W           1        0b: Interrupt masked
                                                                   1b: Interrupt unmasked
       5             M_TX_DISC              R/W           1        0b: Interrupt masked
                                                                   1b: Interrupt unmasked
       4              M_TXFAIL              R/W           1        0b: Interrupt masked
                                                                   1b: Interrupt unmasked
       3           M_RXHRDRST               R/W           1        0b: Interrupt masked
                                                                   1b: Interrupt unmasked
                                                                   Note: Generally this interrupt should not be masked
       2             M_RXSTAT               R/W           1        0b: Interrupt masked
                                                                   1b: Interrupt unmasked
       1           M_PORT_PWR               R/W           1        0b: Interrupt masked
                                                                   1b: Interrupt unmasked
       0             M_CCSTAT               R/W           1        0b: Interrupt masked
                                                                   1b: Interrupt unmasked
                                                         www.onsemi.com
                                                                  35


Table 34. ALERTMSKH
Address: 12h
Reset Value: 0xFF (Resets on POR, SW_RST and Hard Reset)
Type: Read/Write
  Bit #              Name             R/W/C     Size (Bits)                        Alert Mask 2 Description
    7             M_VD_ALERT           RW           1        0b: Interrupt masked,
                                                             1b: Interrupt unmasked
   6:4              Reserved            R           3        Reserved: 000b
    3         M_VBUS_SNK_DISC          RW           1        0b: Interrupt masked,
                                                             1b: Interrupt unmasked
    2             M_RX_FULL            RW           1        0b: Interrupt masked,
                                                             1b: Interrupt unmasked
    1               M_FAULT            RW           1        0b: Interrupt masked,
                                                             1b: Interrupt unmasked
    0         M_VBUS_ALRM_LO           RW           1        0b: Interrupt masked,
                                                             1b: Interrupt unmasked
Table 35. PWRSTATMSK
Address: 14h
Reset Value: 0xFF (Resets on POR, SW_RST and Hard Reset)
Type: Read/Write
  Bit #              Name             R/W/C     Size (Bits)                  Power Status Mask Description
    7           M_DEBUG_ACC            RW           1        Debug Accessory Connected Interrupt Mask
                                                             0b: Interrupt masked
                                                             1b: Interrupt unmasked
    6                M_INIT            RW           1        TCPC Initialization Interrupt Mask
                                                             0b: Interrupt masked
                                                             1b: Interrupt unmasked
    5              M_SRC_HV            RW           1        Sourcing High Voltage Interrupt Mask
                                                             0b: Interrupt masked
                                                             1b: Interrupt unmasked
    4            M_SRC_VBUS            RW           1        Sourcing VBUS Interrupt Mask
                                                             0b: Interrupt masked
                                                             1b: Interrupt unmasked
    3          M_VBUS_VAL_EN           RW           1        VBUS Valid Detection Status Interrupt Mask
                                                             0b: Interrupt masked
                                                             1b: Interrupt unmasked
    2             M_VBUS_VAL           RW           1        VBUS Valid Status Interrupt Mask
                                                             0b: Interrupt masked
                                                             1b: Interrupt unmasked
    1            M_VCONN_VAL           RW           1        VCONN Present Status Interrupt Mask
                                                             0b: Interrupt masked
                                                             1b: Interrupt unmasked
    0             M_SNKVBUS            RW           1        Sinking VBUS Status Interrupt Mask
                                                             0b: Interrupt masked
                                                             1b: Interrupt unmasked
                                                   www.onsemi.com
                                                            36


Table 36. FAULTSTATMSK
Address: 15h
Reset Value: 0xB3 (Resets on POR, SW_RST and Hard Reset)
Type: Read/Write
                                                    Size
  Bit #               Name             R/W/C       (Bits)                     Fault Status Mask Description
    7          M_ALL_REGS_RESET          RW          1     All Registers Reset to Default
                                                           0b: Interrupt masked
                                                           1b: Interrupt unmasked
    6                Reserved             R          1     Reserved: 0b
    5          M_AUTO_DISCH_FAIL         RW          1     Auto Discharge Fail Interrupt Mask
                                                           0b: Interrupt masked
                                                           1b: Interrupt unmasked
    4         M_FORCE_DISCH_FAIL         RW          1     Force Discharge Fail Interrupt Mask
                                                           0b: Interrupt Masked
                                                           1b: Interrupt Unmasked
    3                Reserved             R          1     Reserved: 0b
    2                Reserved             R          1     Reserved: 0b
    1             M_VCONN_OCP            RW          1     VCONN OCP Interrupt Mask
                                                           0b: Interrupt Masked
                                                           1b: Interrupt Unmasked
    0             M_I2C_ERROR            RW          1     I2C Interface Error Interrupt Mask
                                                           0b: Interrupt Masked
                                                           1b: Interrupt Unmasked
Table 37. STD_OUT_CFG
Address: 18h
Reset Value: 0x40
Type: Read/Write
                                                    Size
  Bit #               Name             R/W/C       (Bits)                    Standard Outputs Configuration
    7               TRI_STATE           R/W          1     0b: Standard Output Control
                                                           1b: Force all outputs to tri−state
    6              DEBUG_ACC            R/W          1     0b: Debug Connected output is driven Low
                                                           1b: No Debug Accessory Connected output is driven High
                                                           Note: The FUSB307B ignores writes to this bit if
                                                           TCPC_CTRL.DEBUG_ACC_CTRL = 0b
    5                Reserved             R          1     Reserved: 0b
    4                Reserved             R          1     Reserved: 0b
   3:2              MUX_CTRL            R/W          2     Controls MUX_S0 and MUX_S1 Outputs.
                                                           00b: MUX_S0 = 0, MUX_S1 = 0. No connection.
                                                           01b: MUX_S0 = 1, MUX_S1 = 0. USB3.1 Connected
                                                           10b: MUX_S0 = 0, MUX_S1 = 1. DP Alternate Mode – 4 lanes
                                                           11b: MUX_S0 = 1, MUX_S1 = 1. USB3.1 + Display Port Lanes 0 & 1
    1                Reserved             R          1     Reserved: 0b
    0                ORIENT             R/W          1     Controls ORIENT Output
                                                           0b: Normal (CC1 = A5, CC2 = B5, TX1 = A2/A3, RX1 = B10/B11)
                                                           1b: Flipped (CC2 = A5, CC1 = B5, TX1 = B2/B3, RX1 = A10/A11)
                                                  www.onsemi.com
                                                          37


 Table 38. TCPC_CTRL
 Address: 19h
 Reset Value: 0x00 (POR, and SW_RST)
 Type: Read/Write
     Bit #                Name                R/W/C     Size (Bits)                            TCPC Control Register
       7:4              Reserved                R           2          Reserved: 00b
        5           EN_WATCHDOG                R/W          1         0b: Watchdog Monitoring is disabled (default)
                                                                       1b: Watchdog Monitoring is enabled
        4         DEBUG_ACC_CTRL               R/W          1          Debug Accessory Control
                                                                       0b: Standard Output is Controlled by FUSB307B
                                                                       1b: Standard Output is Controlled by external processor
                                                                       Note: See: Debug Accessory State Machine
       3:2        I2C_CLK_STRETCH               R           2          00b: I2C clock stretching is disabled. Writing to these register bits
                                                                             will be ignored.
        1            BIST_TMODE                R/W          1          BIST Test Data Receive Enable
                                                                       0b: Normal Operation. Incoming messages are stored and passed
                                                                           to host
                                                                       1b: BIST Test Mode. Receive buffer is cleared immediately after
                                                                           GoodCRC response.
        0               ORIENT                 R/W          1          Plug Orientation
                                                                       0b: When Vconn is enabled, apply it to the CC2 pin. Monitor the
                                                                           CC1 pin for BMC communications if PD messaging is enabled.
                                                                       1b: When Vconn is enabled, apply it to the CC1 pin. Monitor the
                                                                           CC2 pin for BMC communications if PD messaging is enabled.
 Table 39. ROLECTRL
 Address: 1Ah
 Reset Value (Note 19) 0x0A for FUSB307B Device in dead battery, 0x4A for non−dead−battery.
 Type: Read/Write
     Bit #                Name                R/W/C     Size (Bits)                           Role Control Description
        7               Reserved                R           1          Reserved: 0b
        6                 DRP                  R/W          1          0b: No DRP.
                     (Notes 21, 22)                                    Bits B3..0 determine Rp/Rd/Ra settings
                                                                       1b: DRP
       5:4              RP_VAL                 R/W          2          00b: Rp default
                                                                       01b: Rp 1.5 A
                                                                       10b: Rp 3.0 A
                                                                       11b: Reserved
       3:2             CC2_TERM                R/W          2          00b: Ra
                     (Notes 23, 24)                                    01b: Rp (Use Rp definition in B5..4)
                                                                       10b: Rd
                                                                       11b: Open (Disconnect or don’t care)
       1:0             CC1_TERM                R/W          2          00b: Ra
                     (Notes 23, 24)                                    01b: Rp (Use Rp definition in B5..4)
                                                                       10b: Rd
                                                                       11b: Open (Disconnect or don’t care)
20. Reset values are loaded on either VBUS or VDD power up. Dead battery Reset values loaded on VBUS power up will be maintained when
    battery is eventually present.
21. Rp value is defined in B5..4 when performing the DRP toggling as well as when a connection is resolved.
22. The FUSB307B toggles CC1 & CC2 after receiving a.LOOK4CON and until a connection is detected. Upon connection, the FUSB307B
    resolves to either an Rp or Rd and report the CC1/CC2 State in the CCSTAT register. The FUSB307B will continue to present the resolved
    Rd or Rp regardless of any changes voltage on the CC wires.
23. When CCx_TERM bits are set to Open and DRP = 0, the PHY and CC comparators will power down.
24. If DRP = 1, LOOK4CON starts toggling with the value set in CC1_TERM/CC2_TERM. If CC1_TERM/CC2_TERM is different than Rp/Rp
    or Rd/Rd, the COMMAND will be ignored.
                                                           www.onsemi.com
                                                                     38


 Table 40. FAULTCTRL
 Address: 1Bh
 Reset Value: 0x00
 Type: Read/Write
     Bit #                  Name             R/W/C        Size (Bits)                         Fault Control Description
       7:4                Reserved              R              4        Reserved: 0000b
        3          DISCH_TIMER_DIS            R/W              1        Auto and Force VBUS Discharge Timer Enable
                                                                        0b: VBUS Discharge timer is enabled
                                                                        1b: VBUS Discharge timer is disabled
        2                 Reserved              R              1        Reserved: 0b
        1                 Reserved              R              1        Reserved: 0b
        0           VCONN_OCP_DIS             R/W              1        VCONN OCP Enable
                                                                        0b: VCONN OCP Enabled
                                                                        1b: VCONN OCP Disabled
 Table 41. PWRCTRL
 Address: 1Ch
 Reset Value: 0x60
 Type: Read/Write
     Bit #                  Name             R/W/C        Size (Bits)                         Power Control Description
        7                 Reserved              R              1        Reserved: 0b
        6                                                               Controls VBUS_VOLTAGE_L Monitoring.
                     DIS_VBUS_MON
                                              R/W              1        0b: VBUS Voltage Monitoring is enabled
                          (Note 25)
                                                                        1b: VBUS Voltage Monitoring is disabled
        5                                                               Disables VALARMHCFGL and VALARMLCFGL
                       DIS_VALARM             R/W              1        0b: Voltage Alarm reporting is enabled
                                                                        1b:Voltage Alarm reporting is disabled
        4                                                               Auto Discharge on Disconnect
                       AUTO_DISCH
                                              R/W              1        0b: Turn Off Automatically Discharge VBUS based on VBUS Voltage
                       (Notes 26, 28)
                                                                        1b: Turn On Automatically Discharge VBUS based on VBUS Voltage
        3                                                               Enable Bleed Discharge
                   EN_BLEED_DISCH
                                              R/W              1        0b: Disable bleed discharge of VBUS
                          (Note 30)
                                                                        1b: Enable bleed discharge of VBUS
        2                                                               Force Discharge
                      FORCE_DISCH
                                              R/W              1        0b: Disable forced discharge of VBUS
                        (Note 27, 29)
                                                                        1b: Enable forced discharge of VBUS
        1                                                               VCONN Power Supported
                       VCONN_PWR              R/W              1        Writing this bit has no function. Please use VCONN_OCP to set
                                                                        OCP values
        0                                                               Enable VCONN
                        EN_VCONN              R/W              1        0b: Disable VCONN Source (default)
                                                                        1b: Enable VCONN Source to CC
25. If VBUS_MON is disabled, VBUS_VOLTAGE_L and VBUS_VOLTAGE_H reports all zeroes.
26. Setting this bit in a Source FUSB307B triggers the following actions upon disconnection detection:
    1. Disable sourcing power over Vbus
    2. VBUS discharge
27. Sourcing power over Vbus shall be disabled before or at same time as starting VBUS discharge.
28. Setting this bit in a Sink FUSB307B triggers the following action upon disconnection detection:
    1. VBUS discharge
29. The FUSB307B will automatically disable discharge once the voltage on VBUS is below vSafe0V (max.).
30. Bleed Discharge is a low current discharge to provide a minimum load current if needed.
                                                             www.onsemi.com
                                                                       39


 Table 42. CCSTAT
 Address: 1Dh
 Reset Value: 0x00
 Type: Read
     Bit #             Name                 R/W/C     Size (Bits)                     CC Status Description (Note 31)
      7:6            Reserved                 R           2        Reserved: 00b
       5            LOOK4CON                  R           1        0b: the FUSB307B is not looking for connection or indicated a
                                                                   potential connection has been found when transitioned from a 1 to 0
                                                                   1b: the FUSB307B looking for connection
       4             CON_RES                  R           1        0b: the FUSB307B is presenting Rp
                                                                   1b: the FUSB307B is presenting Rd
                                                                   This bit is only valid if the FUSB307B was a DRP and has stopped
                                                                   DRP toggling
      3:2            CC2_STAT                 R           2        If (ROLE_CONTROL.CC2 = Rp) or (CON_RES = 0)
                                                                   00b: SRC.Open (Open, Rp)
                                                                   01b: SRC.Ra (below maximum vRa)
                                                                   10b: SRC.Rd (within the vRd range)
                                                                   11b: reserved
                                                                   If (ROLE_CONTROL.CC2 = Rd) or (CON_RES = 1)
                                                                   00b: SNK.Open (Below maximum vRa)
                                                                   01b: SNK.Default (Above minimum vRd−Connect)
                                                                   10b: SNK.Power1.5 (Above minimum vRd−Connect)
                                                                         Detects Rp 1.5 A
                                                                   11b: SNK.Power3.0 (Above minimum vRd−Connect)
                                                                         Detects Rp 3.0 A
                                                                   If ROLE_CONTROL.CC2=Ra, this field is set to 00b
                                                                   If ROLE_CONTROL.CC2=Open, this field is set to 00b
                                                                   This field always returns 00b if (LOOK4CON = 1) or
                                                                   (PWRCTRL.EN_VCONN = 1 and
                                                                   TCPC_CONTROL.PlugOrientation = 0). Otherwise, the returned
                                                                   value depends upon ROLE_CONTROL.CC2.
      1:0            CC1_STAT                 R           2        If (ROLE_CONTROL.CC1 = Rp) or (CON_RES = 0)
                                                                   00b: SRC.Open (Open, Rp)
                                                                   01b: SRC.Ra (below maximum vRa)
                                                                   10b: SRC.Rd (within the vRd range)
                                                                   11b: reserved
                                                                   If (ROLE_CONTROL.CC1 = Rd) or CON_RES = 1)
                                                                   00b: SNK.Open (Below maximum vRa)
                                                                   01b: SNK.Default (Above minimum vRd−Connect)
                                                                   10b: SNK.Power1.5 (Above minimum vRd−Connect)
                                                                        Detects Rp−1.5 A
                                                                   11b: SNK.Power3.0 (Above minimum vRd−Connect)
                                                                        Detects Rp−3.0 A
                                                                   If ROLE_CONTROL.CC1 = Ra, this field is set to 00b
                                                                   If ROLE_CONTROL.CC1 = Open, this field is set to 00b
                                                                   This field always returns 00b if (LOOK4CON = 1) or
                                                                   (PWRCTRL.EN_VCONN = 1 and
                                                                   TCPC_CONTROL.PlugOrientation = 0). Otherwise, the returned
                                                                   value depends upon ROLE_CONTROL.CC1.
31. An event change on this register cause an ALERTL.I_CCSTAT Interrupt.
                                                         www.onsemi.com
                                                                  40


 Table 43. PWRSTAT
 Address: 1Eh
 Reset Value: 08h
 Type: Read
     Bit #              Name                R/W/C     Size (Bits)                   Power Status Description (Note 32)
      7             DEBUG_ACC                 R           1        Debug Accessory Attached
                                                                   0b: No Debug Accessory Connected
                                                                   1b: Debug Accessory Connected
                                                                   Reflects the state of the DEBUG_ACC Output if present
      6              TCPC_INIT                R           1        FUSB307B Initialization Status
                                                                   0b: The FUSB307B has completed initialization and all registers are
                                                                       valid
                                                                   1b: The FUSB307B is still performing internal initialization.
                                                                       Registers 00−0Fh are valid
      5             SOURCE_HV                 R           1        Sourcing High Voltage. See Transition Flow Charts for details.
                                                                   0b: vsafe5V
                                                                   1b: High Voltage
      4           SOURCE_VBUS                 R           1        Sourcing VBUS. Output SRC asserted.
                                                                   0b: Sourcing VBUS is disabled
                                                                   1b: Sourcing VBUS is enabled
      3            VBUS_VAL_EN                R           1        VBUS_VAL (below) Detection Circuit Status
                                                                   0b: VBUS_VAL Detection is Disabled
                                                                   1b: VBUS_VAL Detection is Enabled
      2              VBUS_VAL                 R           1        VBUS Present
                                                                   0b: VBUS disconnected (below 3.5 V)
                                                                   1b: VBUS connected (Above 4.0 V)
      1             VCONN_VAL                 R           1        VCONN Present
                                                                   0b: VCONN is not present or PWRCTRL.EN_VCONN is disabled
                                                                   1b: This bit is asserted when VCONN is present on CC1 or CC2
                                                                   Threshold is fixed at 2.4 V
      0              SNKVBUS                  R           1        Sink VBUS. Output SNK asserted.
                                                                   0b: Sink is disconnected or not supported
                                                                   1b: FUSB307B has enabled the sink path
32. An event change on this register cause an ALERTL.I_PWRSTAT Interrupt.
 Table 44. FAULTSTAT
 Address: 1Fh
 Reset Value: 0x80
 Type: Read/Write 1 to Clear
     Bit #              Name                R/W/C     Size (Bits)               Fault Status Interrupt Description (Note 33)
      7          ALL_REGS_RESET             R/WC          1        0b: No reset occurred
                        Note                                       1b: POR or unexpected power reset occurred
                                                                   This bit is asserted when the TCPC resets all registers to their de-
                                                                   fault value. This happens at initial power up or if an unexpected
                                                                   power reset occurs
      6               Reserved                R           1        Reserved: 0b
      5          AUTO_DISCH_FAIL            R/WC          1        0b: No Discharge Failure
                      (Note 34)                                    1b: VBUS Discharge Failed
                                                                   Asserts when PWRCTRL.AUTO_DISCH is set and FUSB307B fails
                                                                   to discharge VBUS to vSafe5V (max.) within tSafe5V or
                                                                   vSafe0V(max.) within tSafe0V from disconnection is detected
      4         FORCE_DISCH_FAIL            R/WC          1        0b: No Discharge Failure
                                                                   1b: VBUS Discharge Failed
      3               Reserved                R           1        Reserved: 0b
      2               Reserved                R           1        Reserved: 0b
                                                         www.onsemi.com
                                                                  41


 Table 44. FAULTSTAT (continued)
 Address: 1Fh
 Reset Value: 0x80
 Type: Read/Write 1 to Clear
     Bit #                Name              R/W/C        Size (Bits)               Fault Status Interrupt Description (Note 33)
      1              VCONN_OCP              R/WC              1         0b: No VCONN Over−Current Detected
                                                                        1b: Over current on VCONN Latched. See VCONN_ Registers to
                                                                             set VCONN OCP levels.
      0               I2C_ERROR             R/WC              1         0b: No Error
                                                                        1b: I2C Error has occurred
                                                                        Asserts when: or SINK_TRANSMIT has been sent with
                                                                        TRANSMIT_BUFFER empty (TXBYTECNT < 2).
                                                                        COMMAND.DisableVbusDetect is issued while sinking or sourcing
                                                                        VBUS.COMMAND.SinkVbus is issued while sourcing
                                                                        VBUSCOMMAND.SourceVbusDefaultVoltage is issued while
                                                                        sinking VBUS
                                                                        COMMAND.SourceVbusHighVoltage is issued when device is not
                                                                        already sourcing 5 V, is sinking, or is not capable of sourcing high
                                                                        voltage
                                                                        Connect_Invalid State is reached
33. Fault Status are latched and cleared when a 1 is written to the corresponding bit.
34. ALL_REGS_RESET do not get set on SW_RST.
                                                            www.onsemi.com
                                                                      42


Table 45. COMMAND
Address: 23h
Reset Value: 0x00
Type: Read/Write (Auto−Clear)
                                     Size    Register
  Bit #          Name         R/W/C (Bits)   Settings                     COMMAND Description
   7:0         Command         R/W    8    0001 0001b  WakeI2C
                                                       (no action is taken other than to wake the I2C interface)
                                           0010 0010b  DisableVbusDetect. Disable Vbus present detection:
                                                       PWRSTAT.VBUS_VAL. The FUSB307B will ignore this
                                                       command and assert the FAULTSTAT.I2C_ERR if it has
                                                       sourcing or sinking power over Vbus enabled
                                            0011 0011b EnableVbusDetect. Enable Vbus present detection
                                           0100 0100b  DisableSinkVbus. Disable sinking power over Vbus.
                                                       This COMMAND does not disable PWRSTAT.VBUS_VAL
                                                       detection
                                           0101 0101b  SinkVbus. Enable sinking power over Vbus and enable Vbus
                                                       present detection. The FUSB307B will ignore this command
                                                       and assert the FAULTSTAT.I2C_ERR if it has sourcing power
                                                       over Vbus enabled
                                            0110 0110b DisableSourceVbus. Disable sourcing power over Vbus. This
                                                       COMMAND does not disable PWRSTAT.VBUS_VAL
                                                       detection
                                            0111 0111b SourceVbusDefaultVoltage. Enable sourcing vSafe5V over
                                                       Vbus and enable Vbus present detection. Source shall
                                                       transition to vSafe5V if at a high voltage. The FUSB307B will
                                                       ignore this command and assert the FAULTSTAT.I2C_ERR if
                                                       it has sinking power over Vbus enabled
                                           1000 1000b  SourceVbusHighVoltage. Execute sourcing high voltage over
                                                       Vbus.
                                                       FUSB307B will ignore this command and assert the
                                                       FAULTSTAT.I2C_ERR
                                           1001 1001b  LOOK4CON. Start DRP Toggling if ROLECTRL.DRP = 1b.
                                                       If ROLECTRL.CC1/CC2 = 01b start with Rp,
                                                       if ROLECTRL.CC1/CC2 =10b start with Rd.
                                                       If ROLE_CONTROL.CC1/CC2 are not either 01b/01b or
                                                       10b/10b, then do not start toggling.
                                                       The TCPM shall issue .
                                                       COMMAND.LOK4CON to enable the device to restart
                                                       Connection Detection in cases where the ROLECTRL
                                                       contents will not change. An example of this is when a
                                                       potential connection as a Source occurred but was further
                                                       debounced by the TCPM to find the Sink disconnected. In
                                                       this case a Source Only or DRP should go back to its
                                                       Unattached.Src state. This would result in ROLECTRL
                                                       staying the same
                                           1010 1010b  RxOneMore. Configure the receiver to automatically clear the
                                                       RXDETECT register after sending the next GoodCRC.
                                                       This is used to shutdown reception of packets at a known
                                                       point regardless of packet separation or the depth of the
                                                       receive FIFO in the device
                                            1100 1100b Reserved. No Action
                                            1101 1101b
                                            1110 1110b
                                            1111 1111b I2CIdle, Enter I2C Idle
                                           www.onsemi.com
                                                    43


Table 46. DEVCAP1L
Address: 24h
Reset Value: FUSB307B: DDh
Type: Read
  Bit #             Name     R/W/C Size (Bits)                  Device Capabilities 1 L Description
   7:5         ROLES_SUPPORT   R       3        Roles Supported:
                                                000b: Type−C Port Manager can configure the Port as Source only
                                                or Sink only (not DRP)
                                                001b: Source only
                                                010b: Sink only
                                                011b: Sink with accessory support
                                                100b: DRP Only
                                                101b: Source, Sink, DRP, Adapter/Cable all supported
                                                110b: Source, Sink, DRP
                                                110..111b: Not valid
    4           SOP_SUPPORT    R       1        0b: All SOP* except SOP’_DBG/SOP”_DBG
                                                1b: All SOP* messages are supported
    3           SWITCH_VCONN   R       1        Supply VCONN:
                                                0b: Not capable of switching VCONN
                                                1b: Capable of switching VCONN
                                                Support for PWRSTAT.VCONN_VAL and PWRCTRL.EN_VCONN
                                                implemented
    2             SNK_VBUS     R       1        Sink VBUS:
                                                0b: Not Capable of controlling the sink path to the system load
                                                1b: Capable of controlling the sink path to the system load
                                                Support for PWRSTAT.SNKVBUS and COMMAND.SinkVbus imple-
                                                mented
    1              SRC_HV      R       1        Source Higher than vSafe5V on VBUS
                                                0b: Not capable of controlling High Voltage Path on VBUS
                                                1b: capable of controlling High Voltage Path on VBUS
                                                Support for PWRSTAT.SOURCE_HV and
                                                COMMAND.SourceVbusHighVoltage implemented
    0             SRC_VBUS     R       1        Source vSafe5V on VBUS
                                                0b: Not of controlling the source path to VBUS
                                                1b: Capable of controlling the source path to VBUS
                                                Support for PWRSTAT.SOURCE_VBUS,
                                                COMMAND.SourceVbusDefaultVoltage,
                                                COMMAND.DisableSourceVbus,
                                                COMMAND.EnableVbusDetect, and
                                                COMMAND.DisableVbusDetect implemented
Table 47. DEVCAP1H
Address: 25h
Reset Value: 0x1E
Type: Read
  Bit #             Name     R/W/C Size (Bits)                  Device Capabilities 1 H Description
   7:5             Reserved    R       3        Reserved : 000b
    4             BLEED_DIS    R       1        0b: No Bleed Discharge
                                                1b: Bleed Discharge implement
                                                Support for PWRCTRL.EN_BLEED_DISCH implemented.
    3             FORCE_DIS    R       1        0b: No Force Discharge
                                                1b: Force Discharge implement
                                                Support for PWRCTRL.FORCE_DISCH,
                                                FAULTSTAT.FORCE_DISCH_FAIL, and VBUS_STOP_DISCL
                                                implemented
                                      www.onsemi.com
                                               44


Table 47. DEVCAP1H (continued)
Address: 25h
Reset Value: 0x1E
Type: Read
  Bit #              Name      R/W/C Size (Bits)                 Device Capabilities 1 H Description
     2        VBUS_MEAS_ALRM     R       1        0b: No VBUS voltage measurement or VBUS Alarms
                                                  1b: VBUS voltage measurement and VBUS Alarms
                                                  Support for VBUS_VOLTAGE_L, VALARMHCFGL and
                                                  VALARMLCFGL implemented
   1:0           RP_SUPPORT      R       2        Source Power Supported:
                                                  00b: Rp default only
                                                  01b: Rp 1.5 A and default
                                                  10b: Rp 3.0A, 1.5 A and default
                                                  11b: Reserved
Table 48. DEVCAP2L
Address: 26h
Reset Value: 0xD7
Type: Read
   Bit #             Name      R/W/C Size (Bits)                 Device Capabilities 2 L Description
     7        SNK_DISC_DETECT    R       1        0b: VBUS_SNK_DISCL not implemented
                                                  1b: VBUS_SNK_DISCL implemented
     6            STOP_DSICH     R       1        0b: VBUS_STOP_DISCL not implemented
                                                  1b: VBUS_STOP_DISCL implemented
    5:4        VBUS_ALRM_LSB     R       2        VBUS Voltage Alarm LSB Support
                                                  01b: Voltage Alarm Supports 50 mV LSB
                                                  Bit 0 of VALARMHCFGL and VALARMLCFGL are ignored
    3:1      VCONN_POWER_CAP     R       3        VCONN Power Supported
                                                  000b: 1.0 W
                                                  001b: 1.5 W
                                                  010b: 2.0 W
                                                  011b: 3 W (at VCONN = 5.5 V)
                                                  100b: 4 W
                                                  101b: W
                                                  110b: 6 W
                                                  111b: External
     0        VCONN_FAULT_CAP    R       1        VCONN OCP Fault Capable
                                                  110b: FUSB307B is not capable of detecting a VCONN fault
                                                  1b: FUSB307B is capable of detecting a VCONN fault
Table 49. DEVCAP2H
Address: 27h
Reset Value: 0x01
Type: Read
  Bit #              Name      R/W/C Size (Bits)                 Device Capabilities 2 H Description
   7:1             Reserved      R       7        Reserved: 000_0000b
     0          Watchdog Timer   R       1        1b: Watchdog Timer Implemented
                                        www.onsemi.com
                                                 45


Table 50. STD_OUT_CAP
Address: 29h
Reset Value: FUSB307B: 0x41
Type: Read
   Bit #                Name                R/W/C      Size (Bits)                 Standard Outputs Capabilities Description
     7                 Reserved                R            1          Reserved: 00b
     6               DEBUG_ACC                 R            1          0b: Debug Accessory Indicator Not Present
                                                                       1b: Debug Accessory Indicator Present
     5               VBUS_MON                  R            1          0b: VBUS Present Monitor Not Present
     4               AUDIO_ACC                 R            1          0b: Audio Adapter Accessory Indicator Not Present
     3             ACTIVE_CABLE                R            1          0b: Active Cable Indicator not Present
     2                MUX_CTRL                 R            1          0b: Mux Control Not Present
     1             CON_PRESENT                 R            1          0b: Connection Present indicator not implemented
     0                 ORIENT                  R            1          1b: Connector Orientation Present
Table 51. MSGHEADR
Address: 2Eh
Reset Value: 0x02 for FUSB307B
Type: Read/Write
   Bit #                Name                R/W/C      Size (Bits)                     Message Header Info Description
    7:5                Reserved                R            3          Reserved: 000b
     4                CBL_PLUG               R/W            1          Cable Plug
                                                                       0b: Message originated from Source, Sink, or DRP
                                                                       1b: Message originated from a Cable Plug
     3               DATA_ROLE               R/W            1          Data Role
                                                                       0b: SINK
                                                                       1b: SOURCE
    2:1              USBPD_REV               R/W            2          USB−PD Specification Revision
                                                                       00b: Revision 1.0
                                                                       01b: Revision 2.0
                                                                       10b – 11b: Reserved
     0              POWER_ROLE               R/W            1          Power Role
                                                                       0b: Sink
                                                                       1b: Source
Table 52. RXDETECT
RXDETECT enables the types of messages and/or signaling to be detected. SOP* enabling also turns on auto−GoodCRC response.
This register is reset when: A Hard Reset is received or sent; after the GoodCRC transmission due to RxOneMore; on a disconnect
detection; SW_RST or POR.
Address: 2Fh
Reset Value: 0x00
Type: Read/Write
   Bit #                Name                R/W/C      Size (Bits)                    Receive Detect Description (Note 35)
     7                 Reserved                R            1          Reserved: 0b
     6             EN_CABLE_RST                R            1          0b: Do not detect Cable Reset signaling
     5                                                                 0b: Do not detect Hard Reset signaling (default)
                    EN_HRD_RST               R/W            1
                                                                       1b: Detect Hard Reset signaling
     4                                                                 0b: Do not detect SOP_DBG” message (default)
                   EN_SOP2_DBG               R/W            1
                                                                       1b: Detect SOP_DBG” message
     3                                                                 0b: Do not detect SOP_DBG’ message (default)
                   EN_SOP1_DBG               R/W            1
                                                                       1b: Detect SOP_DBG’ message
                                                           www.onsemi.com
                                                                      46


 Table 52. RXDETECT (continued)
 RXDETECT enables the types of messages and/or signaling to be detected. SOP* enabling also turns on auto−GoodCRC response.
 This register is reset when: A Hard Reset is received or sent; after the GoodCRC transmission due to RxOneMore; on a disconnect
 detection; SW_RST or POR.
 Address: 2Fh
 Reset Value: 0x00
 Type: Read/Write
    Bit #                   Name                R/W/C    Size (Bits)                    Receive Detect Description (Note 35)
      2                                                                 0b: Do not detect SOP” message (default)
                         EN_SOP2                 R/W         1
                                                                        1b: Detect SOP” message
      1                                                                 0b: Do not detect SOP’ message (default)
                         EN_SOP1                 R/W         1
                                                                        1b: Detect SOP’ message
      0                                                                 0b: Do not detect SOP message (default)
                          EN_SOP                 R/W         1
                                                                        1b: Detect SOP message
35. Writing all 0s to this register disables PD.
 Table 53. RXBYTECNT
 Address: 30h
 Reset Value: 0x00
 Type: Read
    Bit #                   Name                R/W/C    Size (Bits)                     Received Byte Count Description
     7:0               RXBYTECNT                  R          8          Number of Bytes Received. This is the number of bytes in RXDATA
                                                                        plus 3 (RXSTAT and RXHEADL, H)
 Table 54. RXSTAT
 This register indicates the status of the received SOP* message in RXHEADL,RXHEADH, and RXDATA registers.
 Address: 31h
 Reset Value: 0x00
 Type: Read
    Bit #                   Name                R/W/C    Size (Bits)                        Receive Status Description
     7:3                 Reserved                 R          5          Reserved: 00000b
     2:0                                                                Received SOP
                                                                        000b: Received SOP
                                                                        001b: Received SOP’
                                                                        010b: Received SOP’’
                          RXSOP                   R          3
                                                                        011b: Received SOP’_DBG
                                                                        100b: Received SOP”_DBG
                                                                        110b: Received Cable Reset
                                                                        All others are reserved.
 Table 55. RXHEADL
 Received Header Low byte is stored here. Expected GoodCRC messages are not stored.
 Address: 32h
 Reset Value: 0x00
 Type: Read
    Bit #                   Name                R/W/C    Size (Bits)                      Receive Header Low Description
     7:0                 RXHEADL                  R          8          Rx Header Data Low
                                                            www.onsemi.com
                                                                       47


Table 56. RXHEADH
Received Header High byte is stored here. Expected GoodCRC messages are not stored.
Address: 33h
Reset Value: 0x00
Type: Read
   Bit #                  Name                R/W/C        Size (Bits)                  Receive Header High Description
    7:0               RXHEADH                    R             8        Rx Header Data High
Table 57. RXDATA
Address: 34h−4Fh
Reset Value: 0x00
Type: Read
  Byte #                  Name                R/W/C        Size (Bits)                     Receive Payload Description
   27:0             RXDATA0..27                  R             8        Rx Payload
Table 58. TRANSMIT
Writing this register will start a PD transmission. If Cable Reset, Hard Reset or BIST Carrier Mode 2 is written, RETRY_CNT is ignored
and signaling is not retried.
Address: 50h
Reset Value: 0x00
Type: Read/Write
   Bit #                  Name                R/W/C        Size (Bits)                          Transmit Description
    7:6                Reserved                  R             2        Reserved: 00b
    5:4              RETRY_CNT                 R/W             2        Retry Counter
                                                                        00b: No message retry is required
                                                                        01b: Automatically retry message transmission once
                                                                        10b: Automatically retry message transmission twice
                                                                        11b: Automatically retry message transmission three times
     3                 Reserved                  R             1        Reserved: 0b
    2:0                 TXSOP                  R/W             3        Transmit SOP Message
                                                                        000b: Transmit SOP
                                                                        001b: Transmit SOP’
                                                                        010b: Transmit SOP’’
                                                                        011b: Transmit SOP_DBG’
                                                                        100b: Transmit SOP_DBG”
                                                                        101b: Transmit Hard Reset
                                                                        110b: Transmit Cable Reset
                                                                        111b: Transmit BIST Carrier Mode 2
                                                                        (Enabled for tBISTContMode)
Table 59. TXBYTECNT
Address: 51h
Reset Value: 0x00
Type: Read/Write
   Bit #                  Name                R/W/C        Size (Bits)                   Transmit Byte Count Description
    7:0              TXBYTECNT                 R/W             8        Number of bytes to be transmitted
Table 60. TXHEADL
Address: 52h
Reset Value: 0x00
Type: Read/Write
   Bit #                  Name                R/W/C        Size (Bits)                  Transmit Header Low Description
    7:0               TXHEADL                  R/W             8        Transmit Header Low
                                                              www.onsemi.com
                                                                       48


 Table 61. TXHEADH
 Address: 53h
 Reset Value: 0x00
 Type: Read/Write
     Bit #            Name          R/W/C       Size (Bits)                 Transmit Header High Description
      7:0           TXHEADH          R/W            8        Transmit Header High
 Table 62. TXDATA
 Addresses: 54−6Fh
 Reset Value: 0x00
 Type: Read/Write
    Byte #            Name          R/W/C       Size (Bits)                   Transmit Payload Description
     27:0          TXDATA0..27       R/W            8        Tx Payload
 Table 63. VBUS_VOLTAGE_L
 Address: 70h
 Reset Value: 0x00
 Type: Read
     Bit #            Name          R/W/C       Size (Bits)              VBUS Voltage Low Description (Note 36)
       7          VBUS_V_BIT7          R            1        Bit 7 of VBUS Measurement
       6          VBUS_V_BIT6          R            1        Bit 6 of VBUS Measurement
       5          VBUS_V_BIT5          R            1        Bit 5 of VBUS Measurement
       4          VBUS_V_BIT4          R            1        Bit 4 of VBUS Measurement
       3          VBUS_V_BIT3          R            1        Bit 3 of VBUS Measurement
       2          VBUS_V_BIT2          R            1        Bit 2 of VBUS Measurement
       1          VBUS_V_BIT1          R            1        Bit 1 of VBUS Measurement
       0          VBUS_V_BIT0          R            1        Bit 0 of VBUS Measurement
36. TCPM must read VBUS_VOLTAGE_L before reading VBUS_VOLTAGE_H to guarantee ADC output and I2C are properly synchronized.
                                                   www.onsemi.com
                                                            49


 Table 64. VBUS_VOLTAGE_H
 Address: 71h
 Reset Value: 0x00
 Type: Read
     Bit #               Name                R/W/C      Size (Bits)               VBUS Voltage High Description (Note 37)
      7:4               Reserved                R           4        Reserved: 0000b
      3:2            VBUS_SCALE                 R           2        00b: VBUS Measurement not scaled
                                                                     01b: VBUS Measurement divided by 2
                                                                     10b: VBUS Measurement divided by 4
                                                                     11b: Reserved
       1             VBUS_V_BIT9                R           1        Bit 9 of VBUS Measurement
       0             VBUS_V_BIT8                R           1        Bit 8 of VBUS Measurement
37. VBUS_V_BIT[9:0] is the measured VBUS voltage divided by VBUS_SCALE factor.
 Table 65. VBUS_SNK_DISCL
 Address: 72h
 Reset Value: 0xA0 (< vSafe5V: 4.0 V)
 Type: Read/Write
     Bit #               Name                R/W/C      Size (Bits)           VBUS SINK Disconnect Threshold Low (Note 36)
      7:0         VBUS_SNK_DISC               R/W           8        Bits 7:0 of Sink Disconnect threshold
38. Accuracy is set for 50 mV LSB and Bit 0 is ignored.
 Table 66. VBUS_SNK_DISCH
 Address: 73h
 Reset Value: 0x00
 Type: Read/Write
     Bit #               Name                R/W/C      Size (Bits)                VBUS SINK Disconnect Threshold High
      7:2               Reserved                R           6        Reserved: 000000b
      1:0         VBUS_SNK_DISC               R/W           2        Bits 9:8 of Sink Disconnect threshold
 Table 67. VBUS_STOP_DISCL
 Address: 74h
 Reset Value: 0x1C (< vSafe0V: 700 mV)
 Type: Read/Write
     Bit #               Name                R/W/C      Size (Bits)            VBUS Stop Discharge Threshold Low (Note 39)
      7:0           VBUS_VTH_LO               R/W           8        Bits 7:0 of Stop Discharge threshold
39. Accuracy is set for 50 mV LSB and Bit 0 is ignored.
 Table 68. VBUS_STOP_DISCH
 Address: 75h
 Reset Value: 0x00
 Type: Read/Write
     Bit #               Name                R/W/C      Size (Bits)                 VBUS Stop Discharge Threshold High
      7:2               Reserved                R           6        Reserved: 000000b
      1:0           VBUS_VTH_LO               R/W           2        Bits 9:8 of Stop Discharge threshold
                                                           www.onsemi.com
                                                                    50


 Table 69. VALARMHCFGL
 Address: 76h
 Reset Value: 0x00
 Type: Read/Write
                                                                                 Voltage Alarm High Trip Point Configuration
     Bit #               Name                R/W/C      Size (Bits)                         Low Description (Note 40)
      7:0           VBUS_VTH_HI               R/W           8        Bits 7:0 of High trip point alarm
40. Accuracy is set for 50 mV LSB and Bit 0 is ignored.
 Table 70. VALARMHCFGH
 Address: 77h
 Reset Value: 0x00
 Type: Read/Write
     Bit #               Name                R/W/C      Size (Bits)    Voltage Alarm High Trip Point Configuration High Description
      7:2               Reserved                R           6        Reserved: 000000b
      1:0           VBUS_VTH_HI               R/W           2        Bits 9:8 of High trip point alarm
 Table 71. VALARMLCFGL
 Address: 78h
 Reset Value: 0x00
 Type: Read/Write
                                                                                 Voltage Alarm Low Trip Point Configuration
     Bit #               Name                R/W/C      Size (Bits)                         Low Description (Note 41)
      7:0           VBUS_VTH_LO               R/W           8        Bits 7:0 of Low trip point alarm
41. Accuracy is set for 50 mV LSB and Bit 0 is ignored.
 Table 72. VALARMLCFGH
 Address: 79h
 Reset Value: 0x00
 Type: Read/Write
                                                                                 Voltage Alarm Low Trip Point Configuration
     Bit #               Name                R/W/C      Size (Bits)                              High Description
      7:2               Reserved                R           6        Reserved: 000000b
      1:0           VBUS_VTH_LO               R/W           2        Bits 9:8 of Low trip point alarm
                                                           www.onsemi.com
                                                                    51


 Table 73. VCONN_OCP
 Address: A0h
 Reset Value: 0x0F
 Type: Read/Write
    Bit #             Name            R/W/C    Size (Bits)              VCONN Current Limit Description (Note 42)
     7:4                                R          4        Reserved: 0b
      3            OCP_RANGE           R/W         1        0b: OCP Range between 10 mA – 80 mA
                                                                (max_range = 80 mA)
                                                            1b: OCP Range between 100 mA – 800 mA
                                                                (max_range = 800 mA)
     2:0            OCP_CUR            R/W         3        000b: max_range/8
                                                            001b: 2 × max_range/8
                                                            010b: 3 × max_range/8
                                                            011b: 4 × max_range/8
                                                            100b: 5 × max_range/8
                                                            101b: 6 × max_range/8
                                                            110b: 7 × max_range/8
                                                            111b: max_range (see OCP_RANGE definition above)
42. Only used if VCONN_OCP Register PWRCTRL.EN_VCONN is set to 1.
 Table 74. RESET
 Address: A2h
 Reset Value: 0x00
 Type: ReadW/Write (Self Clearing)
    Bit #             Name            R/W/C    Size (Bits)                            Reset Description
     7:2             Reserved           R          6        Reserved:000000b
      1              PD_RST            R/W         1        0b: No Action
                                                            1b: Reset PD−PHY and PD−FSMs
      0              SW_RST            R/W         1        0b: No Action
                                                            1b: Reset all registers to default
 Table 75. GPIO1_CFG
 Address: A4h
 Reset Value: 0x00
 Type: Read/Write
    Bit #             Name            R/W/C    Size (Bits)                  General Purpose I/O 1 Configuration
     7:3             Reserved           R          5        Reserved:00000b
      2             GPO1_VAL           R/W         1        If GPO1_EN = 1
                                                            0b: Set output = 0
                                                            1b: Set output = 1
      1              GPI1_EN           R/W         1        0b: Input buffer disabled
                                                            1b: Input Buffer enabled
                                                                (Input state can be read in GPIO_STAT Register)
      0             GPO1_EN            R/W         1        0b: GPO is High−Z
                                                            1b: GPO is enabled
                                                  www.onsemi.com
                                                           52


Table 76. GPIO2_CFG
Address: A5h
Reset Value: 0x00
Type: Read/Write
  Bit #              Name    R/W/C Size (Bits)                   General Purpose I/O 2 Configuration
   7:4              Reserved   R       4        Reserved:0000b
    3            FR_SWAP_FN   R/W      1        Enable Fast Role Swap I/O function for GPIO2
                                                0b: FR_SWAP I/O function disabled
                                                1b: FR_SWAP I/O function enabled
    2              GPO2_VAL   R/W      1        Generic GPIO Function
                                                If GPO2_EN = 1 & FR_SWAP_FN = 0
                                                0b: Set output = 0
                                                1b: Set output = 1
                                                Initial Hub Sink Fast Role Swap Function
                                                If GPO2_EN = 1 & FR_SWAP_FN = 1, Set GPO2_VAL = 1.
                                                When a VBUS disconnect is detected, the GPIO2 pin is
                                                automatically set low
    1               GPI2_EN   R/W      1        Generic GPIO Function
                                                If FR_SWAP_FN = 0
                                                0b: Input buffer disabled
                                                1b: Input Buffer enabled
                                                      (Input state can be read in GPIO_STAT Register)
                                                Initial Hub Source Fast Role Swap Function
                                                If FR_SWAP_FN = 1 & GPO2_EN = 0
                                                0b: Input buffer disabled
                                                1b: Monitor Input for a High to Low transition and initiate the Fast
                                                Role Swap within tTCPCSendFRSwap
    0              GPO2_EN    R/W      1        0b: GPO is High−Z
                                                1b: GPO is enabled
Table 77. GPIO_STAT
Address: A6h
Reset Value: 0x00
Type: Read
  Bit #              Name    R/W/C Size (Bits)                     General Purpose I/O Input Status
   7:2              Reserved   R       6        Reserved: 000000b
    1                                           If GPI2_EN
                   GPI2_VAL    R       1        0b: GPIO2 Input is Low
                                                1b: GPIO2 Input is High
    0                                           If GPI1_EN
                   GPI1_VAL    R       1        0b: GPIO1 Input is Low
                                                1b: GPIO1 Input is High
Table 78. DRPTOGGLE
Address: A7h
Reset Value: 0x00
Type: Read/Write
  Bit #              Name    R/W/C Size (Bits)                            DRP Toggle Timing
   7:3              Reserved   R       6        Reserved:00000b
   1:0            DRPTOGGLE   R/W      2        00b: tToggleSrc = 15 ms to 30 ms; tToggleSnk = 35 ms to 70 ms
                                                01b: tToggleSrc = 20 ms to 40 ms; tToggleSnk = 30 ms to 60 ms
                                                10b: tToggleSrc = 25 ms to 50 ms; tToggleSnk = 25 ms to 50 ms
                                                11b: tToggleSrc = 30 ms to 60 ms; tToggleSnk = 20 ms to 40 ms
                                      www.onsemi.com
                                               53


 Table 79. SINK_TRANSMIT
 Writing this register as a Sink will start a PD transmission when the Source Rp has transitioned from 1.5 A to 3.0 A. If Cable Reset, Hard
 Reset or BIST Carrier Mode 2 is written, RETRY_CNT is ignored and signaling is not retried.
 After initial message transmission, the TCPM will monitor CCSTAT for changes in Rp.
 Writing to this register as a Source is not allowed.
 Address: B0h
 Reset Value: 0x40
 Type: Read/Write
     Bit #                Name                  R/W/C      Size (Bits)                        Sink Transmit Description
       7                Reserved                   R           1         Reserved: 0b
       6              DIS_SNK_TX                 R/W           1         0b: Sink Transmit is enabled
                                                                         1b: Sink Transmit is disabled
      5:4             RETRY_CNT                  R/W           2         Retry Counter
                                                                         00b: No message retry is required
                                                                         01b: Automatically retry message transmission once
                                                                         10b: Automatically retry message transmission twice
                                                                         11b: Automatically retry message transmission three times
       3                Reserved                   R           1         Reserved: 0b
      2:0                TXSOP                   R/W           3         Transmit SOP Message
                                                                         000b: Transmit SOP
                                                                         001b: Transmit SOP’
                                                                         010b: Transmit SOP’’
                                                                         011b: Transmit SOP_DBG’
                                                                         100b: Transmit SOP_DBG”
                                                                         101b: Transmit Hard Reset
                                                                         110b: Transmit Cable Reset
                                                                         111b: Transmit BIST Carrier Mode 2 (Enabled for tBISTContMode)
 Table 80. SRC_FRSWAP
 Address: B1h
 Reset Value: 0x00
 Type: Read/Write
     Bit #                Name                  R/W/C      Size (Bits)                         Source Fast Role Swap
      7:4               Reserved                   R           4        Reserved:0000b
      3:2        FRSWAP_SNK_DELAY                R/W           2        If MANUAL_SNK_EN is set to 0, enable SNK gate after delay below:
                                                                        00: 0 μs (Same time FR_SWAP bit is set).
                                                                        01: 150 μs (After FR_SWAP signaling is complete)
                                                                        10: 300 μs
                                                                        11: 600 μs
       1           MANUAL_SNK_EN                 R/W           1        0b: Automatic SNK enable according to FRSWAP_SNK_DELAY
                                                                        1b: SNK enabled by TCPM
       0          FR_SWAP (Note 43)             R/WC           1        0b: No action
                                                                        1b: Initiates Fast Role Swap process
43. Auto−Clear.
 Table 81. SNK_FRSWAP
 Address: B2h
 Reset Value: 0x00
 Type: Read/Write (Auto−Clear on detect)
     Bit #                Name                  R/W/C      Size (Bits)                           Sink Fast Role Swap
      7:1               Reserved                   R           7         Reserved:000000b
       0          EN_FRSWAP_DTCT                R/WC           1         0b: No action
                        (Note 44)                                        1b: Enables Fast Role Swap detection
44. Auto−Clear on detect.
                                                              www.onsemi.com
                                                                       54


Table 82. ALERT_VD
Address: B3h
Reset Value: 0x00
Type: Read/Write 1 to clear
  Bit #                 Name   R/W/C Size (Bits)                        Vendor Defined Alert
    7                 Reserved   R       1        Reserved: 0b
    6            I_DISCH_SUCC  R/WC      1        0b: No Interrupt
                                                  1b: Auto Discharge or Force Discharge Successful
    5                  I_GPI2  R/WC      1        0b: No Interrupt
                                                  1b: Input GPI2 change occurred
    4                  I_GPI1  R/WC      1        0b: No Interrupt
                                                  1b: Input GPI1 change occurred
    3              I_VDD_DTCT  R/WC      1        0b: No Interrupt
                                                  1b: VDD detection change occurred (read VD_STAT)
    2                  I_OTP   R/WC      1        0b: No Interrupt
                                                  1b: OTP condition occurred
    1               I_SWAP_TX  R/WC      1        0b: No Interrupt
                                                  1b: Fast role Swap sent due to GPIO input set low
    0               I_SWAP_RX  R/WC      1        0b: No Interrupt
                                                  1b: Fast Role Swap request received
Table 83. ALERT_VD_MSK
Address: B4h
Reset Value: 0x7F
Type: Read/Write
  Bit #                 Name   R/W/C Size (Bits)                     Vendor Defined Alert Masks
    7                 Reserved   R       1        Reserved:0b
    6           M_DISCH_SUCC    R/W      1        0b: Interrupt masked
                                                  1b: Interrupt unmasked
    5                 M_GPI2    R/W      1        0b: Interrupt masked
                                                  1b: Interrupt unmasked
    4                 M_GPI1    R/W      1        0b: Interrupt masked
                                                  1b: Interrupt unmasked
    3             M_VDD_DTCT    R/W      1        0b: Interrupt masked
                                                  1b: Interrupt unmasked
    2                  M_OTP    R/W      1        0b: Interrupt masked
                                                  1b: Interrupt unmasked
    1              M_SWAP_TX    R/W      1        0b: Interrupt masked
                                                  1b: Interrupt unmasked
    0             M_SWAP_RX     R/W      1        0b: Interrupt masked
                                                  1b: Interrupt unmasked
                                        www.onsemi.com
                                                 55


PACKAGE DIMENSIONS
  WQFN16 3 x 3, 0.5P
    CASE 510BS
      ISSUE O
   www.onsemi.com
         56


  ON Semiconductor and            are trademarks of Semiconductor Components Industries, LLC dba ON Semiconductor or its subsidiaries in the United States and/or other countries.
  ON Semiconductor owns the rights to a number of patents, trademarks, copyrights, trade secrets, and other intellectual property. A listing of ON Semiconductor’s product/patent
  coverage may be accessed at www.onsemi.com/site/pdf/Patent−Marking.pdf. ON Semiconductor reserves the right to make changes without further notice to any products herein.
  ON Semiconductor makes no warranty, representation or guarantee regarding the suitability of its products for any particular purpose, nor does ON Semiconductor assume any liability
  arising out of the application or use of any product or circuit, and specifically disclaims any and all liability, including without limitation special, consequential or incidental damages.
  Buyer is responsible for its products and applications using ON Semiconductor products, including compliance with all laws, regulations and safety requirements or standards,
  regardless of any support or applications information provided by ON Semiconductor. “Typical” parameters which may be provided in ON Semiconductor data sheets and/or
  specifications can and do vary in different applications and actual performance may vary over time. All operating parameters, including “Typicals” must be validated for each customer
  application by customer’s technical experts. ON Semiconductor does not convey any license under its patent rights nor the rights of others. ON Semiconductor products are not
  designed, intended, or authorized for use as a critical component in life support systems or any FDA Class 3 medical devices or medical devices with a same or similar classification
  in a foreign jurisdiction or any devices intended for implantation in the human body. Should Buyer purchase or use ON Semiconductor products for any such unintended or unauthorized
  application, Buyer shall indemnify and hold ON Semiconductor and its officers, employees, subsidiaries, affiliates, and distributors harmless against all claims, costs, damages, and
  expenses, and reasonable attorney fees arising out of, directly or indirectly, any claim of personal injury or death associated with such unintended or unauthorized use, even if such
  claim alleges that ON Semiconductor was negligent regarding the design or manufacture of the part. ON Semiconductor is an Equal Opportunity/Affirmative Action Employer. This
  literature is subject to all applicable copyright laws and is not for resale in any manner.
PUBLICATION ORDERING INFORMATION
LITERATURE FULFILLMENT:                                                     N. American Technical Support: 800−282−9855 Toll Free               ON Semiconductor Website: www.onsemi.com
 Literature Distribution Center for ON Semiconductor                         USA/Canada
 19521 E. 32nd Pkwy, Aurora, Colorado 80011 USA                             Europe, Middle East and Africa Technical Support:                   Order Literature: http://www.onsemi.com/orderlit
 Phone: 303−675−2175 or 800−344−3860 Toll Free USA/Canada                    Phone: 421 33 790 2910
 Fax: 303−675−2176 or 800−344−3867 Toll Free USA/Canada                                                                                         For additional information, please contact your local
 Email: orderlit@onsemi.com                                                                                                                     Sales Representative
 ◊                                                                                 www.onsemi.com                                                                              FUSB307B/D
                                                                                               57


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
ON Semiconductor:
 FUSB307BMPX FUSB307BVMPX
