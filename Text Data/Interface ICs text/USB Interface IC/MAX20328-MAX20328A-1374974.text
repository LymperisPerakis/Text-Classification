 Click here for production status of specific part numbers.
MAX20328/MAX20328A/                                                             MUX Switch for USB Type-C
MAX20328B                                                                        Audio Adapter Accessories
General Description                                                Benefits and Features
The MAX20328/MAX20328A/MAX20328B are USB Type-C                    ●● Versatile and Flexible Switch Configurations
audio interface ICs for use in portable devices. As USB               • High-Speed USB Data or Audio Switch Paths
Type-C and USB power delivery (PD) make a high-volt-                  • Automatic Impedance Detection in Audio
age charging solution readily available, the data and SBU                Configurations
lines are at risk of shorting to a high bus voltage, risking          • Full Manual Switch Control
permanent damage to the portable device. USB 2.0 data                 • Beyond-the-Rails™ Signal Capability
lines also need protection when multiplexed with analog
                                                                   ●● Overvoltage Protected Data and Audio Channels
audio signals that vary from positive to negative voltages.
                                                                      • Two Separate OVLO Blocks
The devices can detect a CC pin connection event to
                                                                      • OVLO Threshold Programmable to 3.37V, 4.00V,
disable the microphone bias and eliminate pop up noise
                                                                         4.70V, or 5.00V
when an audio accessory is attached.
                                                                   ●● Negative Voltage Capable Audio Channel
The MAX20328/MAX20328A/MAX20328B come in a 5 x
                                                                      • ±5V Audio Signals (Limited by Positive OVLO
5 array, 25-bump, 0.4mm pitch, 2.31mm x 2.31mm wafer-
                                                                         Threshold)
level package (WLP).
                                                                      • -100dB THD+N
Applications                                                          • -100dB PSRR at 217Hz
●● Smart Phones                                                    ●● High ESD and Surge-Protected USB Type-C Contacts
●● Phablets                                                           • ±12kV HBM
●● Tablet PCs                                                         • ±25V Surge Capable on USB Type-C Pins
                                                                   ●● Minimal Solution size
                                                                      • 5 x 5 Array, 0.4mm Pitch 2.31mm x 2.31mm WLP
                                                                   Ordering Information appears at end of data sheet.
Beyond-the-Rails is a trademark of Maxim Integrated Products, Inc.
19-100294; Rev 3; 12/19


MAX20328/MAX20328A/                                                                                              MUX Switch for USB Type-C
MAX20328B                                                                                                           Audio Adapter Accessories
Absolute Maximum Ratings (Note 2)
All voltages are referenced to AGND unless otherwise noted                                        GSNS_R (MAX20328 only)......................................... -0.3 to min
VCC, MIC, SDA, SCL ................................................ -0.3 to +6V                                            [+6V, (MG_SR + 0.3V, GM_SR + 0.3V)]
DGND ..................................................................... -0.3 to +0.3V          GSNS_ (MAX20328A/MAX20328B only).................... -0.3 to min
CC............................................................................ -0.3 to +26V                                [+6V, (MG_SR + 0.3V, GM_SR + 0.3V)]
SBU1_MG, SBU2_GM, MG_SR,                                                                          TX, RX, INT (MAX20328A/MAX20328B only)........... -0.3 to +6V
   GM_SR (Note 1)................................................... -0.3 to +12V                 Continuous Current Into Any Pin.....................................±200mA
MG_SL, GM_SL (MAX20328 Only) (Note 1)........... -0.3 to +12V                                     Continuous Power Dissipation (Multilayer Board)
DP_T, DM_T, DP_B, DM_B (Note 1)............................. -6 to min                            (Derate 19.07mW/°C above +70°C)............................1525.6mW
                                                    [(LA + 12V, RA + 12V), +12V]                  Operating Temperature Range............................ -40°C to +85°C
DP_AP1, DM_AP1, DP_AP2, DM_AP2..................... -0.3 to +6V                                   Junction Temperature.......................................................+150°C
LA, RA........................................................................... -6 to +6V       Storage Temperature Range............................. -65°C to +150°C
GSNS_L (MAX20328 only)......................................... -0.3 to min                       Soldering Temperature (Reflow).......................................+260°C
                                    [+6V, (MG_SL + 0.3V, GM_SL + 0.3V)].
Note 1:      Surge capable up to ±25V (IEC61000-4-5 Connector Class 0)
Package Information
 PACKAGE TYPE: 25 WLP
 Package Code                                                                      W252R2+1
 Outline Number                                                                    21-100208
 Land Pattern Number                                                               Refer to Application Note 1891
 THERMAL RESISTANCE
 Junction-to-Ambient Thermal Resistance,
                                                                                   52.43°C/W
 Four-Layer Board (θJA)
Package thermal resistances were obtained using the method described in JEDEC specification JESD51-7, using a four-layer board.
For detailed information on package thermal considerations, refer to www.maximintegrated.com/thermal-tutorial.
For the latest package outline information and land patterns (footprints), go to www.maximintegrated.com/packages. Note that a “+”,
“#”, or “-” in the package code indicates RoHS status only. Package drawings may show a different suffix character, but the drawing
pertains to the package regardless of RoHS status.
www.maximintegrated.com                                                                                                                                  Maxim Integrated │ 2


MAX20328/MAX20328A/                                                                 MUX Switch for USB Type-C
MAX20328B                                                                              Audio Adapter Accessories
Electrical Characteristics
(VCC = 2.7V to 5.5V, TA = -40°C to +85°C unless otherwise noted. Typical values are at VCC = +3.7V, TA = +25°C) (Note 2)
          PARAMETER                   SYMBOL                   CONDITIONS                  MIN        TYP      MAX       UNITS
 VCC
 Supply Voltage Range                    VCC                                                2.7                 5.5         V
 Input Supply Current                     ICC       VCC = 3.7V                                        256       400        µA
                                                    VDP_/DM_ = 6V,
 OVLO Shutdown Current                  ICC_O                                                         256       400        µA
                                                    VLA/RA = VDP_/DM_AP_ = 0V
 Shutdown Current                    ICC_SHDN       VCC = 3.7V, EN = 0                                 3.9       7         µA
 Undervoltage Lockout (POR)
                                      VUVLOR                                                         2.395                  V
 Rising Threshold
 Undervoltage Lockout (POR)
                                      VUVLOF                                                         2.365                  V
 Falling Threshold
 Undervoltage Lockout (POR)
                                      VUVLOH                                                           30                  mV
 Threshold Hysteresis
                                                    From (VCC rising crosses VUVLOR
 Start-up Delay                        tSTART       OR EN from 0 to 1) to EOB rising                  0.85       2         ms
                                                    from 0 to 1
 OVERVOLTAGE PROTECTION DP/M_, SBU_, MG_S, GM_S
                                                                SET_OVTH[1:0] = 00        3.220       3.37    3.520
                                                    VIN         SET_OVTH[1:0] = 01        3.845        4.0    4.155
 Overvoltage Trip Level                VOVLO        Rising                                                                  V
                                                    (Note 3)    SET_OVTH[1:0] = 10        4.535        4.7    4.865
                                                                SET_OVTH[1:0] = 11        4.830        5.0    5.170
 Overvoltage Trip Level
                                      VOVLOH                                                           60                  mV
 Hysteresis
 Overvoltage Fault Protection                       VIN = 1V to 10V step,
                                          tFP                                                         100                   ns
 Response Time                                      VCC = 3.7V, RL = 50Ω
 DP/DM Overvoltage Fault                            VIN = 10V to 1V step,
                                         tFPR                                                          10                  ms
 Protection Recovery Time                           VCC = 3.7V, RL = 50Ω
 DP_, DM_ (DATA AND AUDIO SWITCHES)
 Analog Signal Range Audio           VDP_/DM_                                               -5                VOVLO         V
 Analog Signal Range Data            VDP_/DM_                                                0                VOVLO         V
 Single Channel On Resistance       RON-DP_/DM_     VCC = 3.7V, TA = +25°C                            2.24       4          Ω
 On Resistance Match Between                        VCC = 3.7V, VDP/M_ = 0V,
                                   ΔRON-DP_/DM_                                                       0.02     0.21         Ω
 Channels                                           ID_ = 10mA (Note 4)
                                                    VCC = 3.7V, IDP_/DM_ = 10mA,
 On Resistance Flatness            RFLAT-DP_/DM_    VDP_/DM_ = -1.0V to +1.0V                       0.00005    0.02         Ω
                                                    (Note 5)
www.maximintegrated.com                                                                                      Maxim Integrated │ 3


MAX20328/MAX20328A/                                                                   MUX Switch for USB Type-C
MAX20328B                                                                                 Audio Adapter Accessories
Electrical Characteristics (continued)
(VCC = 2.7V to 5.5V, TA = -40°C to +85°C unless otherwise noted. Typical values are at VCC = +3.7V, TA = +25°C) (Note 2)
          PARAMETER                     SYMBOL                  CONDITIONS                  MIN      TYP       MAX       UNITS
                                                    VCC = 3.7V, EN = 0,
 Off Leakage Current                 IDP_/DM_OFF    VDP_/DM_ = 2.5V,                        -0.5     +0.5      +1.5        µA
                                                    VLA/RA = VDP_AP_/DM_AP_ = 0V
                                                    Data Channel Closed
                                                    VCC = 3.7V, EN = 1,
                                      IDP_/DM_ON    VDP_/DM_ = 2.5V,                        -0.7     +0.4      +1.5
                                                    VDP_AP_/DM_AP_ = Floating
                                                    VLA/RA = 0V
 On Leakage Current                                                                                                        µA
                                                    Audio Channel Closed
                                                    VCC = 3.7V, EN = 1,
                                       ILA/RA_ON    VLA/RA = 2.5V,                          -0.5     +0.8      +2.1
                                                    VDP_/DM_ = Floating
                                                    VDP_AP_/DM_AP_ = 0V
                                                    VDP_/DM_ = 1.5V, RL = 50Ω,
 Turn-On Time                        tON-DP_/DM_    I2C control , time from last data bit              50                   µs
                                                    processed to 90% of final value
                                                    VDP_/DM_ = 1.5V, RL = 50Ω, I2C
 Turn-Off Time                      tOFF-DP_/DM_    control, time from last data bit                    5                   µs
                                                    processed to 10% of initial value
 Output Skew Same Switch                 tSKSS      (Note 6)                                           40                   ps
 Output Skew Between
                                         tSKBS      (Note 6)                                           40                   ps
 Switches
                                                    RL = 50Ω, Time delay between
 Break-Before-Make Time                             one side of the mux switch
                                          tBBM                                                         10                   µs
 Delay                                              opening and the other side
                                                    closing.
                                                    BWDP_/DM_ = 0dBm,
 Bandwidth                            BWDP_/DM_                                                       800                 MHz
                                                    RS = RL = 50Ω
                                                    f = 20Hz to 20kHz,
 Off Isolation                      VISO-DP_/DM_                                                      -90                  dB
                                                    VD_ = 400VPk-Pk, RL = 50Ω
                                                    f = 20Hz to 20kHz,
 Crosstalk (Note 7)                 VCT-DP_/DM_                                                       -80                  dB
                                                    VD_ = 400VPk-Pk, RL = 50Ω
                                                    f = 20Hz to 20kHz,
 THD+N                               THDDP_/DM_     VD_ = 1VPk-Pk, DC bias = 0V,                     -100                  dB
                                                    RL = 32, 600Ω
                                                    VCC = 3.7V, V = 400mVPk-Pk,
 PSRR                              PSRRDP_/DM_                                                       -110                  dB
                                                    f = 217Hz, RS = RL = 50Ω
www.maximintegrated.com                                                                                      Maxim Integrated │ 4


MAX20328/MAX20328A/                                                                  MUX Switch for USB Type-C
MAX20328B                                                                                Audio Adapter Accessories
Electrical Characteristics (continued)
(VCC = 2.7V to 5.5V, TA = -40°C to +85°C unless otherwise noted. Typical values are at VCC = +3.7V, TA = +25°C) (Note 2)
         PARAMETER                     SYMBOL                 CONDITIONS                    MIN      TYP       MAX       UNITS
                                                    MANUAL_IDET = 1,
                                                                                             95       100       105        µA
                                                    SET_IDET = 01
                                                    MANUAL_IDET = 1,
 LAUDIO Current Source                  ILA_SRC                                             1.05      1.1      1.15
                                                    SET_IDET = 10
                                                                                                                           mA
                                                    MANUAL_IDET = 1,
                                                                                            5.25      5.5      5.75
                                                    SET_IDET = 11
 LAUDIO Current Source Ramp
                                         tRAMP                                             43.75       50     56.25        ms
 Up/Down Time
                                        MICTHR      VCC = 3.7V, VMIC rising                 450       788      1150
 MIC Bias Detection Threshold           MICTHF      VCC = 3.7V, VMIC falling                350       701      1100        mV
                                     MICTH_HYST     VCC = 3.7V                                         87
 Total Detection Time                      tDET     3 ramps max detection time                        600                  ms
 CC
 CC Disconnect Detection
                                      VCC_DD_TH     Audio Accessory mode, Rising             0.5                1.4         V
 Threshold
 Leakage Current                          IL_CC     CC = 5V                                  -1                  +1        µA
 Time to MIC Open and SBU_
 Discharge Time From CC              tCC_MIC_DIS    CSBU_ < 2µF                                         7                   µs
 High
 SBU TO GROUND (GND SWITCH)
 Analog Signal Range                    VSBU_G                                              -0.3              VOVLO         V
 On-Resistance                        RON-SBU_G     VCC = 3.7V, I = 100mA                              80       150        mΩ
                                                    VCC = 3.7V,
 PSRR                                 PSRRSBU_G     VSBU_ = 400mVPk-Pk,                              -120                  dB
                                                    f = 217Hz, RS = RL = 50Ω
 SBU TO MIC (MIC SWITCH)
 Analog Signal Range                   VSBU_MIC                                               0               VOVLO         V
 On Resistance                      RON-SBU_MIC     VCC = 3.7V, I = 100mA                             1.7       2.9         Ω
                                                    VSBU_ = 1.5V, RL = 50Ω,
 Turn-On Time                        tON-SBU_MIC    I2C Control, time from last data bit               20                   µs
                                                    processed to 90% of final value
                                                    VSBU_ = 1.5V, RL = 50Ω,
 Turn-Off Time                      tOFF-SBU_MIC    I2C Control, time from last data bit                5                   µs
                                                    processed to 10% of initial value
 Bandwidth                            BWSBU_MIC     VSBU_ = 0dBm, RS = RL = 50Ω                        30                 MHz
www.maximintegrated.com                                                                                      Maxim Integrated │ 5


MAX20328/MAX20328A/                                                                 MUX Switch for USB Type-C
MAX20328B                                                                              Audio Adapter Accessories
Electrical Characteristics (continued)
(VCC = 2.7V to 5.5V, TA = -40°C to +85°C unless otherwise noted. Typical values are at VCC = +3.7V, TA = +25°C) (Note 2)
          PARAMETER                   SYMBOL                  CONDITIONS                   MIN        TYP      MAX       UNITS
                                                    500mVPk-Pk, DC bias = 2V with
 THD+N                              THDSBU_MIC      2.2kΩ to MIC, f = 20Hz – 20kHz,                    100                 dB
                                                    RL = 600Ω
                                                    VCC = 3.7V,
 PSRR                              PSRRSBU_MIC      VSBU_ = 400mVPk-Pk,                               -110                 dB
                                                    f = 217Hz, RS = RSL = 50Ω
                                                    VD_ = 400mVPk-Pk, f = 20kHz,
 Off Isolation                     VISO-SBU_MIC                                                       -100                 dB
                                                    RL = 50Ω
 GROUND SENSE AND UART SWITCHES (GM_SR, GM_SL, MG_SR, MG_SL, TX, RX)
                                       VGM/MG       Ground sense switches                  -0.3                +2.5
 Analog Signal Range                                                                                                        V
                                        VUART       UART switches                          -0.3               VOVLO
                                                    Ground Sense, VGM_/MG_ = 0V,
                                     RON-GSNS_                                                         1.8       3
 On Resistance                                      ILOAD = 100mA                                                           Ω
                                      RON-UART      UART, ILOAD = 10mA                                 6.5     11.5
                                                    VCOM_ = 1.5V, RL = 50Ω,
                                      tON-GSNS                                                          45
                                                    I2C control
 Turn-On Time                                                                                                               µs
                                                    VCOM_ = 1.5V, RL = 50Ω,
                                      tON-UART                                                          20
                                                    I2C control
                                     tOFF-GSNS/     VCOM_ = 1.5V, RL = 50Ω,
 Turn-Off Time                                                                                           5                  µs
                                         UART       OVLO event or I2C control
 Bandwidth                             BWGSNS       RS = RL = 50Ω, CL = 10pF                           300                MHz
                                                    VCC = 3.7V, RS = RL = 50Ω,
 Crosstalk                            VCT-GSNS                                                        -100                 dB
                                                    f = 20kHz
                                                    f = 20kHz, VD_ = 400mVPk-Pk,
 Off Isolation                       VISO-GSNS                                                        -100                 dB
                                                    RL = 50Ω
                                                    VCC = 3.7V, 10mVPk-Pk,
 THD+N                                THDGSNS       DC bias = 0V, f = 20Hz – 20kHz,                  0.0004                 %
                                                    RS = 50Ω, RL = 200Ω
                                                    V = 400mVPk-Pk, f = 217Hz,
 PSRR                                PSRRGSNS                                                         -120                 dB
                                                    RS = RL = 50Ω
 DIGITAL SIGNALS (SCL, SDA, INT, MAX20328A/MAX20328B ONLY)
 Output Voltage Low                      VOL        ISDA = 4mA                                                  0.4         V
 Output Leakage                         ILEAK       VSDA = 5.5V                             -1                   1          µA
 Input Voltage High                       VIH                                               1.4                             V
 Input Voltage Low                        VIL                                                                   0.5         V
 SCL Clock Frequency                     fSCL                                                                   400        kHz
www.maximintegrated.com                                                                                      Maxim Integrated │ 6


MAX20328/MAX20328A/                                                                  MUX Switch for USB Type-C
MAX20328B                                                                               Audio Adapter Accessories
Electrical Characteristics (continued)
(VCC = 2.7V to 5.5V, TA = -40°C to +85°C unless otherwise noted. Typical values are at VCC = +3.7V, TA = +25°C) (Note 2)
         PARAMETER                     SYMBOL                   CONDITIONS                  MIN         TYP       MAX       UNITS
 Bus Free Time Between a
                                           tBUF                                              1.3                               µs
 STOP and START Condition
 START Condition (Repeated)
                                        tHD:STA                                              0.6                               µs
 Hold Time
 Low Period of SCL Clock                  tLOW                                               1.3                               µs
 High Period of SCL Clock                 tHIGH                                              0.6                               µs
 Setup Time for a Repeated
                                        tSU:STA                                              0.6                               µs
 START Condition
 Data Hold Time                         tHD:DAT                                               0                    0.9         µs
 Data Setup Time                        tSU:DAT                                             100                                µs
 Setup Time for a STOP
                                        tSU:STO                                              0.6                               µs
 Condition
 Spike Pulse Widths
                                            tSP                                                          50                    ns
 Suppressed by Input Filter
 THERMAL PROTECTION
 Thermal Shutdown                        TSHDN                                                          135
 Thermal Hysteresis                      THYST                                                           20
 ESD PROTECTION
 HBM                                                 DP_T, DM_T, DP_B, DM_B,                            ±12                   kV
                                                     SBU1_MG, SBU2_GM, MG_SL,
 Surge                                               MG_SR, GM_SL, GM_SR                                ±25                    V
 HBM                                                 All other pins                                      ±2                   kV
Note 2:  All devices are 100% production tested at TA = +25°C. All temperature limits are guaranteed by design.
Note 3:  The switch turns off for voltages above VOVLO, protecting downstream circuits in case a fault condition occurs.
Note 4:  ΔRON(MAX) = ABS (RON_CH1 – RON_CH2).
Note 5:  Flatness is defined as the difference between the maximum and minimum value of on-resistance, as measured over the
         specified analog signal range.
Note 6:  Guaranteed by design.
Note 7:  Between two switches.
www.maximintegrated.com                                                                                         Maxim Integrated │ 7


MAX20328/MAX20328A/                                                                                                                                                                           MUX Switch for USB Type-C
MAX20328B                                                                                                                                                                                      Audio Adapter Accessories
Typical Operating Characteristics
(VCC = 3.7V, TA = +25°C unless otherwise noted.)
                                                                                                                                                                                                                                                         SUPPLY CURRENT
                                                 SHUTDOWN CURRENT                                                                                 SUPPLY CURRENT                                                                                        vs. SUPPLY VOLTAGE
                                                 vs. SUPPLY VOLTAGE                                                                              vs. SUPPLY VOLTAGE                                                                                       SWITCH IN OVLO
                                                                                     toc01                                                                                            toc02                                                                                                toc03
                           7                                                                                              265                                                                                                  270
                                                                           TA = +25°C
                           6                                                                                                                                                                                                   265
                                                  TA = -40°C                                                              260
                                                                                              SUPPLY CURRENT (µA)
                                                                                                                                                       TA = +85°C                                                                                           TA = +85°C
   SUPPLY CURRENT (µA)                                                                                                                                                                            SUPPLY CURRENT (µA)
                           5
                                                                                                                                                                                                                               260
                                                                                                                          255
                           4
                                                                                                                                                                                                                               255
                                                                          TA = +85°C
                           3
                                                                                                                          250
                                                                                                                                                                         TA = +25°C                                            250                                            TA = +25°C
                           2
                                                                                                                          245                           TA = -40°C                                                                                           TA = -40°C
                           1                                                                                                                                                                                                   245
                                                                                                                                                                                                                                           EN = 1
                                      EN = 0                                                                                          EN = 1
                                                                                                                                                                                                                                           VDP_x = 6V
                           0                                                                                              240                                                                                                  240
                                2.7            3.4           4.1          4.8           5.5                                     2.7            3.4           4.1            4.8         5.5                                          2.7            3.4           4.1            4.8         5.5
                                                     SUPPLY VOLTAGE (V)                                                                              SUPPLY VOLTAGE (V)                                                                                   SUPPLY VOLTAGE (V)
                                           UVLO FALLING THRESHOLD                                                                                 UVLO HYSTERESIS                                                                              DP_, DM_ SIDE OVLO THRESHOLD
                                              vs. TEMPERATURE                                                                                     vs. TEMPERATURE                                                                                     vs. TEMPERATURE
                                                                                     toc04                                                                                            toc05                                                                                                toc06
                           3                                                                                              40
                                                                                                                          35                                                                                                   5.2
                          2.5                                                                                                                                                                                                               SET_OVTH1[1:0] = 11
  UVLO THRESHOLD (V)
                                                                                                                          30
                                                                                                   UVLO HYSTERESIS (mV)
                                                                                                                                                                                                                               4.7
                                                                                                                                                                                                 OVLO THRESHOLD (V)
                           2                                                                                                                                                                                                                SET_OVTH1[1:0] = 10
                                                                                                                          25
                                                                                                                                                                                                                               4.2
                          1.5                                                                                             20                                                                                                               SET_OVTH1[1:0] = 01
                                                                                                                          15                                                                                                   3.7
                           1
                                                                                                                          10                                                                                                               SET_OVTH1[1:0] = 00
                          0.5                                                                                                                                                                                                  3.2
                                                                                                                           5
                           0                                                                                               0                                                                                                   2.7
                                -40        -15          10         35       60          85                                      -40        -15          10          35         60        85                                          -40         -15         10          35         60        85
                                                     TEMPERATURE (°C)                                                                                TEMPERATURE (°C)                                                                                     TEMPERATURE (°C)
                                        DP_, DM_ SIDE OVLO HYSTERESIS                                                                     SBU SIDE OVLO THRESHOLD                                                                                SBU SIDE OVLO HYSTERESIS
                                               vs. TEMPERATURE                                                                                vs. TEMPERATURE                                                                                        vs. TEMPERATURE
                                                                                     toc07                                                                                            toc08                                                                                                toc09
                          70                                                                                                                                                                                                   65
                                                                                                                                                                                                                                                              SET_OVTH1[1:0] = 10
                                                                                                                          5.2
                          65                                                                                                          SET_OVTH1[1:0] = 11                                                                                   SET_OVTH1[1:0] = 11
                                                                                                                                                                                                                               60
                                                                                                                                                                                                        OVLO HYSTERESIS (mV)
   OVLO HYSTERESIS (mV)
                                               SET_OVTH1[1:0] = 10                                                        4.7
                                                                                                  OVLO THRESHOLD (V)
                          60                                                                                                          SET_OVTH1[1:0] = 10
                                                                                                                                                                                                                               55
                                      SET_OVTH1[1:0] = 11                                                                 4.2
                          55                                                                                                          SET_OVTH1[1:0] = 01
                                                                                                                                                                                                                               50
                          50                                                                                              3.7                                                                                                                                      SET_OVTH1[1:0] = 00
                                                                                                                                      SET_OVTH1[1:0] = 00
                                                                                                                          3.2                                                                                                  45                   SET_OVTH1[1:0] = 10
                          45                                   SET_OVTH1[1:0] = 00
                                                 SET_OVTH1[1:0] = 10
                          40                                                                                              2.7                                                                                                  40
                                -40        -15          10         35       60          85                                      -40        -15          10          35         60        85                                          -40         -15         10          35         60        85
                                                     TEMPERATURE (°C)                                                                                TEMPERATURE (°C)                                                                                     TEMPERATURE (°C)
www.maximintegrated.com                                                                                                                                                                                                                                             Maxim Integrated │ 8


MAX20328/MAX20328A/                                                                                                                                                                                       MUX Switch for USB Type-C
MAX20328B                                                                                                                                                                                                  Audio Adapter Accessories
Typical Operating Characteristics (continued)
(VCC = 3.7V, TA = +25°C unless otherwise noted.)
                                                                                                                                                                                                                                                                    DP_, DM_ NORMALIZED RON
                                 OVLO FAULT RESPONSE TIME                                                                            OVLO FAULT RECOVERY TIME                                                                                                        vs. SUPPLY VOLTAGE
                                                                          toc10                                                                                                       toc11                                                                                                                          toc12
                                                                                                                                                                                                                                             2
                                                                                                                                                                                                                                     1.8
                                                                                                 VDP_T                                                                                                                               1.6
                                                                                                                                                                                                5V/div
                                                                                                                                                                                                             NORMALIZED RON (Ω )
                                                                                                                                             10.5ms                                                                                  1.4
                                                                                                                                                                                                                                                                                                      TA = +85°C
                                                                                                                                                                                                                                     1.2
                                                                                                                                                                                                                                                                                                      TA = +25°C
                                                                                                                                                                                                                                             1
                                                                                                                                                                                                                                     0.8
                                                                                  2V/div                                                                                                                                                                                                              TA = -40°C
             VDP_T                                                                                                                                                                                                                   0.6
                                                                                            VDP_AP1                                                                                           1V/div
                                                                                  2V/div                                                                                                                                             0.4
  VDP_AP1
                                                                                                                                                                                                                                     0.2                      ILOAD = 10mA, DATA PATH, VDP_ = 10mV,
                         RL = 50Ω                                                                                        RL = 50Ω                                                                                                                             NORMALIZED TO VCC = 3.7V, TA = +25°C
                         STEP FROM 1V TO 10V                                                                             STEP FROM 10V TO 1V                                                                                                 0
                                           100ns                                                                                            4ms                                                                                                     2.7              3.4               4.1              4.8                5.5
                                                                                                                                                                                                                                                                             SUPPLY VOLTAGE (V)
                                           DP_, DM_ RON MATCH                                                                                DP_, DM_ RON FLATNESS
                                           vs. TEMPERATURE                                                                                     vs. TEMPERATURE                                                                                                      DP_, DM_ TURN-ON TIME
                                                                            toc13                                                                                                       toc14                                                                                                                      toc15
                  0.07                                                                                            2
                                                                                                              1.8
                  0.06
                                                                                                                                      VCC = 5.5V
                                                                                                              1.6                                                                                                   VSCL_                                                                                                   5V/div
                  0.05
                                                                                            RON MATCH (mΩ )
                                                                                                              1.4
 RON MATCH (Ω )
                                                                                                                                                                        VCC = 3.7V                                   VSDA                                                                                                   5V/div
                                                                                                              1.2
                  0.04
                                                                                                                                                                                                                                                                                             53.0µs
                                                                                                                  1
                                                                 VCC = 5.5V
                  0.03
                                                                                                              0.8
                  0.02                                       VCC = 3.7V                                       0.6
                                                                                                                                                                                                              VD_AP_                                                                                                       1V/div
                                                                                                              0.4
                                                                                                                                                                                                                                                    VDP_, VDM_ = 1.5V,
                  0.01
                               ILOAD = 10mA,                                                                  0.2                ILOAD = 10mA,                                                                                                      FROM LAST DATA BIT TO 90% OF FINAL
                               VDP_ = 10mV                       VCC = 2.7V                                                      VDP_ = -1 TO 1V                    VCC = 2.7V                                                                      VALUE
                    0                                                                                             0
                         -40         -15        10      35         60             85                                      -40              -15        10      35           60                 85                                                                                   10µs
                                           TEMPERATURE (°C)                                                                                      TEMPERATURE (°C)
                                                                                                                                                   DP_, DM_ BANDWIDTH                                                                                                DP_, DM_ AUDIO AND DATA PATHS
                                     DP_, DM_ TURN-OFF TIME                                                                                      DATA AND AUDIO PATHS                                                                                               CROSSTALK AND OFF-ISOLATION
                                                                          toc16                                                                                                                 toc17                                                                                                                        toc18
                                                                                                                                1                                                                                                                     20
                                                                                                                                -1                                                                                                                        0
             VSCL                                                                  5V/div
                                                                                                                                -3
                                                                                                                                                                                                                                   MAGNITUDE (dB)
                                                                                                                                                                                                                                                     -20
                                                                                                              MAGNITUDE (dB)
           VSDA                                                                    5V/div
                                                                                                                                -5                                    DATA PATH
                                               5µs                                                                                                                                                                                                   -40
                                                                                                                                -7
                                                                                                                                                                                                                                                                      CROSSTALK
                                                                                                                                                                     AUDIO PATH                                                                      -60
                                                                                                                                -9
      VD_AP_                                                                      1V/div                                                                                                                                                             -80
                                                                                                                               -11
                         VDP_, VDM_ = 1.5V,                                                                                                                                                                                                         -100
                         FROM LAST DATA BIT TO 10% OF INITIAL                                                                  -13     RL = 50Ω                                                                                                                                                               RL = 50Ω
                                                                                                                                       VDP_ = -4dBm                                                                                                                 OFF_ISOLATION
                         VALUE                                                                                                                                                                                                                                                                                VDP_ = 0dBm
                                                                                                                               -15                                                                                                                  -120
                                                                                                                                 0.00001          0.001       0.1                10                1000                                                   0.00001   0.0001     0.001    0.01      0.1         1       10         100
                                                 10µs
                                                                                                                                                      FREQUENCY (MHz)                                                                                                          FREQUENCY (MHz)
www.maximintegrated.com                                                                                                                                                                                                                                                                   Maxim Integrated │ 9


MAX20328/MAX20328A/                                                                                                                                                                                 MUX Switch for USB Type-C
MAX20328B                                                                                                                                                                                            Audio Adapter Accessories
Typical Operating Characteristics (continued)
(VCC = 3.7V, TA = +25°C unless otherwise noted.)
                                                                                                                                               DP_, DM_ AUDIO PATH                                                                                               DP_, DM_ AUDIO PATH
                                                  EYE DIAGRAM                                                                                  THD+N vs. FREQUENCY                                                                                               THD+N vs. FREQUENCY
                                                                               toc19                                                                                                       toc20                                                                                                                toc21
                                                                                                                               0                                                                                                               0
                                                                                                                                         RL = 600Ω                                                                                                        RL = 600Ω
                                                                                                                          -20            RS = 3mΩ                                                                                      -20                RS = 3mΩ
                                                                                                                                         ONE D_ CHANNEL ACTIVE                                                                                            TWO D_ CHANNELS ACTIVE
  USB DIFFERENTIAL SIGNAL (V)
                                       VOUTN                                                                                             A-WEIGHT FILTERING                                                                                               A-WEIGHT FILTERING
                                                                                                                          -40                                                                                                          -40
                                                                                                            THD+N (dB)                                                                                               THD+N (dB)
                                       VINSIDE
                                                                                                                          -60                                                                                                          -60
                                                                                        0.1V/div
                                                                                                                          -80                                                                                                          -80
                                                                                                                                                     VRA = 1VRMS     VRA = 1VP-P                                                                                        VRA = 1VRMS               VRA = 1VP-P
                                                                                                                         -100                                                                                                     -100
                                                                                                                         -120                                                                                                     -120
                                                                                                                                   20                 200         2000                      20000                                                    20                 200               2000                   20000
                                                   TIME (0.2ns/div)                                                                                   FREQUENCY (Hz)                                                                                                    FREQUENCY (Hz)
                                                  DP_, DM_ AUDIO PATH                                                                     SBU2 - AGND NORMALIZED RON                                                                                        SBU1 - MIC NORMALIZED RON
                                                 PSRR vs. FREQUENCY                                                                          vs. SUPPLY VOLTAGE                                                                                                vs. SUPPLY VOLTAGE
                                                                                  toc22                                                                                            toc23                                                                                                                toc24
                                  0                                                                                       2                                                                                                         2
                                                                                                                         1.8                                                                                                 1.8
                                 -20
                                                                                                                         1.6                                                                                                 1.6
                                                                                                                                                                                                       NORMALIZED RON (Ω )
                                 -40
                                                                                                   NORMALIZED RON (Ω )
                                                                                                                         1.4                                                                                                 1.4
                                                                                                                                                                    TA = +85°C                                                                                                            TA = +85°C
  PSRR (dB)
                                 -60                                                                                     1.2                                                                                                 1.2
                                                                                                                                                                    TA = +25°C                                                                                                            TA = +25°C
                                 -80                                                                                      1                                                                                                         1
                                                                                                                         0.8                                                                                                 0.8
                                -100                                                                                                                                TA = -40°C                                                                                                            TA = -40°C
                                                                                                                         0.6                                                                                                 0.6
                                -120                                                                                     0.4                                                                                                 0.4
                                                                                                                         0.2             ILOAD = 100mA, VSBU2_GM = 10mV,                                                                                  ILOAD = 100mA, VSBU1_MG = 10mV,
                                -140                                  VD_ = 0.4VP-P                                                                                                                                          0.2
                                                                                                                                         NORMALIZED TO VCC = 3.7V, TA = +25°C                                                                             NORMALIZED TO VCC = 3.7V, TA = +25°C
                                                                      RL = 50Ω
                                                                                                                          0
                                -160                                                                                                                                                                                                0
                                       10        100         1000      10000           100000                                  2.7            3.4            4.1         4.8             5.5
                                                                                                                                                                                                                                               2.7             3.4            4.1           4.8           5.5
                                                        FREQUENCY (Hz)                                                                              SUPPLY VOLTAGE (V)
                                                                                                                                                                                                                                                                     SUPPLY VOLTAGE (V)
                                                                                                                                                                                                                                                                        SBU_ BANDWIDTH
                                            SBU-MIC SWITCH TURN-ON TIME                                                                 SBU-MIC SWITCH TURN-OFF TIME                                                                                                       MIC PATH
                                                                                 toc25                                                                                           toc26                                                                                                                          toc27
                                                                                                                                                                                                                                                     3
                                                                                                                                                                                                                                                     1
             VSCL_                                                                        5V/div              VSCL                                                                        5V/div                                                     -1
                                                                                                                                                                                                                                                     -3
                                                                                                                                                                                                                              MAGNITUDE (dB)
              VSDA                                                                        5V/div            VSDA                                                                          5V/div
                                                                                                                                                    5.40µs                                                                                           -5
                                                         20.8µs
                                                                                                                                                                                                                                                     -7
                                                                                                                                                                                                                                                     -9
                      VMIC                                                               1V/div                  VMIC                                                                    1V/div
                                                                                                                                                                                                                                                -11
                                       VSBU_ = 1.5V,                                                                           VSBU_ = 1.5V,
                                       FROM LAST DATA BIT TO 90% OF FINAL                                                      FROM LAST DATA BIT TO 10% OF INITIAL                                                                             -13     RL = 50Ω
                                       VALUE                                                                                   VALUE                                                                                                                    VDP_ = 0dBm
                                                                                                                                                                                                                                                -15
                                                          10µs                                                                                           10µs                                                                                     0.00001       0.001               0.1            10             1000
                                                                                                                                                                                                                                                                         FREQUENCY (MHz)
www.maximintegrated.com                                                                                                                                                                                                                                                       Maxim Integrated │ 10


MAX20328/MAX20328A/                                                                                                                                         MUX Switch for USB Type-C
MAX20328B                                                                                                                                                    Audio Adapter Accessories
Typical Operating Characteristics (continued)
(VCC = 3.7V, TA = +25°C unless otherwise noted.)
                                                           SBU_ MIC AND AGND PATHS                                                                                       SBU MIC PATH
                                                                OFF-ISOLATION                                                                                         THD+N vs. FREQUENCY
                                                                                                          toc28                                                                                              toc29
                                            0                                                                                                         -80
                                                                                                                                                      -85
                                          -20
                                                                                                                                                      -90
             MAGNITUDE (dB)
                                          -40
                                                                                                                                                      -95
                                          -60                                                                           THD+N (%)              -100
                                                                                                                                               -105
                                          -80
                                                                                                                                               -110
                                                                                                                                                                  VSBU1 = 0.5VP-P
                                    -100                                                                                                                          VMIC = 2V VIA 2.2kΩ PULLUP
                                                                                          RL = 50Ω                                             -115
                                                                                                                                                                  RL = 600Ω
                                                                                          VSBU1 = 0dBm
                                    -120                                                                                                       -120
                                            0.00001            0.001                0.1              10                                                     20               200              2000               20000
                                                               FREQUENCY (MHz)                                                                                          FREQUENCY (Hz)
                                                                  SBU MIC PATH                                                                                           SBU AGND PATH
                                                               PSRR vs. FREQUENCY                                                                                      PSRR vs. FREQUENCY
                                                                                                          toc30                                                                                              toc31
                                            0                                                                                                           0
                                           -20                                                                                                        -20
                                                                                                                                                      -40
                                           -40
                     PSRR (dB)                                                                                                 PSRR (dB)
                                                                                                                                                      -60
                                           -60
                                                                                                                                                      -80
                                           -80
                                                                                                                                                  -100
                                          -100
                                                                                                                                                  -120
                                          -120                                                                                                    -140
                                                                                          VSBU1 = 0.4VP-P                                                                                      VSBU1 = 0.4VP-P
                                                                                          RL = 50Ω                                                                                             RL = 50Ω
                                          -140                                                                                                    -160
                                                    10        100            1000            10000           100000                                         10         100             1000          10000       100000
                                                                         FREQUENCY (Hz)                                                                                            FREQUENCY (Hz)
                                                               GSNS NORMALIZED RON                                                                                     UART NORMALIZED RON
                                                                vs. SUPPLY VOLTAGE                                                                                      vs. SUPPLY VOLTAGE
                                                                                                             toc32                                                                                           toc33
                                                2                                                                                                       2
                                           1.8                                                                                                        1.8
                                           1.6                                                                                                        1.6
                                                                                                                                NORMALIZED RON (Ω )
                                           1.4                                                                                                        1.4
                    NORMALIZED RON (Ω )
                                                                                             TA = +85°C                                                                                         TA = +85°C
                                           1.2                                                                                                        1.2
                                                                                             TA = +25°C                                                                                         TA = +25°C
                                                1                                                                                                       1
                                           0.8                                                                                                        0.8
                                                                                             TA = -40°C                                                                                         TA = -40°C
                                           0.6                                                                                                        0.6
                                           0.4                                                                                                        0.4
                                                          ILOAD = 10mA, VMG_SR = 10mV,                                                                0.2         ILOAD = 10mA, VMG_SR = 10mV,
                                           0.2
                                                          NORMALIZED TO VCC = 3.7V, TA = +25°C                                                                    NORMALIZED TO VCC = 3.7V, TA = +25°C
                                                0                                                                                                       0
                                                    2.7        3.4            4.1              4.8                5.5                                       2.7        3.4            4.1            4.8         5.5
                                                                       SUPPLY VOLTAGE (V)                                                                                    SUPPLY VOLTAGE (V)
www.maximintegrated.com                                                                                                                                                                                Maxim Integrated │ 11


MAX20328/MAX20328A/                                                                                                                                             MUX Switch for USB Type-C
MAX20328B                                                                                                                                                        Audio Adapter Accessories
Typical Operating Characteristics (continued)
(VCC = 3.7V, TA = +25°C unless otherwise noted.)
                GSNS_ SWITCH TURN-ON TIME                                                            GSNS_ SWITCH TURN-OFF TIME                                                                     UART SWITCH TURN-ON TIME
                                                  toc34                                                                                           toc35                                                                                 toc36
   VSCL_                                                   5V/div           VSCL                                                                             5V/div   VSCL_                                                                      5V/div
   VSDA                                                   5V/div          VSDA                                                                               5V/div    VSDA                                                                     5V/div
                                                                                                                   5.40µs                                                                                         19.2µs
                                    46.8µs
  VGSNS_                                                  1V/div       VGSNS_                                                                             1V/div               VTX                                                              1V/div
           VGM_, VMG_ = 1.5V,                                                                  VGM_, VMG_ = 1.5V,                                                                        VMG_SR = 1.5V,
           FROM LAST DATA BIT TO 90% OF FINAL                                                  FROM LAST DATA BIT TO 10% OF INITIAL                                                      FROM LAST DATA BIT TO 90% OF FINAL
           VALUE                                                                               VALUE                                                                                     VALUE
                             10µs                                                                                      10µs                                                                                       10µs
                                                                                                             MG_S_ BANDWIDTH                                                                               GSNS AND UART
                 UART SWITCH TURN-OFF TIME                                                                 GSNS AND UART PATHS                                                                      OFF-ISOLATION AND CROSSTALK
                                                     toc37                                                                                       toc38                                                                                        toc39
                                                                                          1                                                                                              0
                                                                                         -1
                                                                                                                                                                                        -20
   VSCL                                                       5V/div
                                                                                         -3
                                                                                                                                                                                                                  CROSSTALK
                                                                                                                                                                      MAGNITUDE (dB)
   VSDA                                                       5V/div                                               GSNS PATH                                                            -40
                                                                       MAGNITUDE (dB)
                                                                                         -5
                            5µs
                                                                                         -7                                   UART PATH                                                 -60
                                                                                         -9
                                                                                                                                                                                        -80
     VTX                                                     1V/div                     -11
           VMG_SR = 1.5V,                                                                                                                                                              -100
                                                                                        -13          RL = 50Ω                                                                                                                    RL = 50Ω
           FROM LAST DATA BIT TO 10% OF INITIAL
           VALUE                                                                                     VMG_SR = 0dBm                                                                              OFF_ISOLATION                    VSBU1 = 0dBm
                                                                                        -15                                                                                            -120
                                                                                           0.00001         0.001            0.1         10            1000                                0.00001         0.001            0.1           10
                               10µs
                                                                                                             FREQUENCY (MHz)                                                                              FREQUENCY (MHz)
                                                                                                         GSNS PSRR vs. FREQUENCY
                                                                                                                                                  toc40
                                                                                          0
                                                                                         -20
                                                                                         -40
                                                                        PSRR (dB)
                                                                                         -60
                                                                                         -80
                                                                                        -100
                                                                                        -120
                                                                                        -140                                       VMG_SR = 0.4VP-P
                                                                                                                                   RL = 50Ω
                                                                                        -160
                                                                                               10           100             1000        10000         100000
                                                                                                                     FREQUENCY (Hz)
www.maximintegrated.com                                                                                                                                                                                            Maxim Integrated │ 12


MAX20328/MAX20328A/                                                               MUX Switch for USB Type-C
MAX20328B                                                                            Audio Adapter Accessories
Bump Configurations
             TOP VIEW                                                TOP VIEW
         (BUMP SIDE DOWN)                                        (BUMP SIDE DOWN)
                                    MAX20328                                      MAX20328A/MAX20328B
                       1      2         3        4      5                      1      2         3        4       5
                  +                                                       +
                     GM_    GSNS_      MG_                                   GM_               MG_
               A                              DM_B   DP_B              A            GSNS              DM_B     DP_B
                      SR       L       SR                                     SR               SR
                     GM_    GSNS               DM_    DP_                                              DM_     DP_
               B                       VCC                             B      RX      TX       VCC
                      SL      _R               AP2    AP2                                              AP2     AP2
                     MG_
               C             SDA       SCL      LA     RA              C     INT     SDA       SCL      LA      RA
                      SL
               D                               DM_    DP_              D                               DM_      DP_
                      CC     MIC      DGND                                   CC      MIC      DGND
                                               AP1    AP1                                              AP1      AP1
                     SBU2_            SBU1_                                 SBU2_             SBU1_
               E            AGND              DM_T   DP_T              E            AGND              DM_T     DP_T
                      GM                MG                                    GM               MG
                                       WLP                                                     WLP
                                (2.31mm X 2.31mm)                                       (2.31mm X 2.31mm)
Bump Description
            BUMP
                 MAX20328A/            NAME                                        FUNCTION
  MAX20328
                  MAX20328B
     A1                  A1           GM_SR        Analog Ground/MIC Sense Input for Right Audio Channel
     A2                  —            GSNS_L       Ground Sense Output for Left Audio Channel
     —                   A2            GSNS        Ground Sense Output
     A3                  A3           MG_SR        MIC/Analog Ground Sense Input for Right Audio Channel
     A4                  A4            DM_B        DM Bottom Side Data Line of the External USB Type-C Port
     A5                  A5             DP_B       DP Bottom Side Data Line of the External USB Type-C Port
     B1                  —            GM_SL        Analog Ground/MIC Sense Input for Left Audio Channel
     —                   B1               RX       UART RX Line
     B2                  —            GSNS_R       Ground Sense Output for Right Audio Channel
     —                   B2               TX       UART TX Line
     B3                  B3              VCC       Power Supply. Bypass to ground with 1µF effective capacitance.
     B4                  B4           DM_AP2       DM Data Line to AP2
     B5                  B5           DP_AP2       DP Data Line to AP2
www.maximintegrated.com                                                                                    Maxim Integrated │ 13


MAX20328/MAX20328A/                                                 MUX Switch for USB Type-C
MAX20328B                                                              Audio Adapter Accessories
Bump Description (continued)
            BUMP
                 MAX20328A/   NAME                                   FUNCTION
  MAX20328
                 MAX20328B
     C1               —      MG_SL  MIC/Analog Ground Sense Input for Left Audio Channel
     —                C1       INT  Open Drain Output for Interrupt Signaling. Active low.
     C2               C2       SDA  I2C Data Line
     C3               C3       SCL  I2C Clock Line
     C4               C4        LA  Left Audio Channel Output
     C5               C5       RA   Right Audio Channel Output
     D1               D1       CC   CC Line from the External USB Type-C Port
     D2               D2       MIC  MIC Output
     D3               D3      DGND  Digital Ground. Connect DGND and AGND together for correct operation.
     D4               D4     DM_AP1 DM Data Line to AP1
     D5               D5     DP_AP1 DP Data Line to AP1
     E1               E1    SBU2_GM Analog Ground/MIC, SBU2 Line
                                    Analog Ground Substrate Connection. Connect DGND and AGND
     E2               E2      AGND
                                    together for correct operation.
     E3               E3    SBU1_MG MIC/Analog Ground, SBU1 Line
     E4               E4      DM_T  DM Top Side Data Line of the External USB Type-C Port
     E5               E5      DP_T  DP Top Side Data Line of the External USB Type-C Port
www.maximintegrated.com                                                                    Maxim Integrated │ 14


MAX20328/MAX20328A/                                                        MUX Switch for USB Type-C
MAX20328B                                                                     Audio Adapter Accessories
Block Diagram
                                                           MAX20328
                                                                                       VCC
                                                                                      SDA
                        CC      AUDIO ACCESSORY MODE                     INTERFACE    SCL
                                DISCONNECT DETECTION                      CONTROL
                                                                                     DGND
                                                         DP/DM SWITCH
                                                   L-IMPEDANCE DETECTION
                                                    2.24Ω                          DP_AP1
                        DP_T
                                                    2.24Ω                          DM_AP1
                        DM_T
                                                                                        RA
                                                    2.24Ω
                        DP_B
                                                                                        LA
                                                    2.24Ω
                        DM_B
                                                                                   DP_AP2
                                              NEGATIV E VOLTAGE CAPABLE
                                                                                   DM_AP2
                                              ON AUDIO CHANNEL
                                                       MI C/AGND SW ITCH
                                                        MI C DETE CTION
                                                                                       MI C
                        SBU1_MG
                                                               1.7Ω
                                                                                     AGND
                        SBU2_GM
                                                              80mΩ
                        MG_SL                                                      GSNS_L
                                                               1.8Ω
                        MG_SR                                                      GSNS_R
                                                               1.8Ω
                        GM_SL
                                                               1.8Ω
                        GM_SR
                                                               1.8Ω
                                                POSITIVE V OLTA GE ONLY
www.maximintegrated.com                                                                     Maxim Integrated │ 15


MAX20328/MAX20328A/                                                       MUX Switch for USB Type-C
MAX20328B                                                                    Audio Adapter Accessories
Block Diagram (continued)
                                                  MAX20328A/MAX20328B
                                                                                       VCC
                                                                                      SDA
                        CC      AUDIO ACCESSORY MODE                     INTERFACE    SCL
                                DISCONNECT DETECTION                      CONTROL
                                                                                    DGND
                                                         DP/DM SWITCH
                                                   L-IMPEDANCE DETECTION
                                                    2.24Ω                          DP_AP1
                         DP_T
                                                    2.24Ω                          DM_AP1
                         DM_T
                                                                                       RA
                                                    2.24Ω
                        DP_B
                                                                                        LA
                                                    2.24Ω
                        DM_B
                                                                                   DP_AP2
                                              NEGATIVE VOLTAGE CAPABLE
                                                                                   DM_AP2
                                              ON AUDIO CHANNEL
                                                       MIC/AGND SWITCH
                                                        MIC DETECTION
                                                                                      MIC
                        SBU1_MG
                                                             1.7Ω
                                                                                    AGND
                        SBU2_GM
                                                             80mΩ
                                                                                     GSNS
                                                             1.8Ω
                        MG_SR                                                          TX
                                                              6.5Ω
                                                              1.8Ω
                        GM_SR
                                                             6.5Ω
                                                             6.5Ω
                        INT                                                            RX
                                                             6.5Ω
                                                POSITIVE VOLTAGE ONLY
www.maximintegrated.com                                                                    Maxim Integrated │ 16


MAX20328/MAX20328A/                                                                   MUX Switch for USB Type-C
MAX20328B                                                                               Audio Adapter Accessories
Detailed Description                                                  The devices offer automatic microphone orientation and
The MAX20328/MAX20328A/MAX20328B are USB                              impedance detection for audio devices, pop-up noise sup-
Type-C audio interface and protection ICs for use in                  pression, and surge protection on pins connected directly
portable devices. As USB power delivery makes a high-                 to the USB Type-C port.
voltage charging solution readily available on Type-C                 Operation
connectors, the data and SBU lines are at risk of shorting
                                                                      All switches are open until the MAX20328/MAX20328A/
to a high bus voltage, causing permanent damage to the
                                                                      MAX20328B are enabled. To enable the devices, write
portable device.
                                                                      the EN bit (0x06[4]) high. Once enabled, the switches
The MAX20328/MAX20328A/MAX20328B route incom-                         default to the behaviors selected by the MODE[2:0] bits
ing signals through the USB Type-C data path or audio                 (0x06[2:0]) in automatic mode. See Table 1 and Table 2
path based on information received from a Type-C con-                 for the switch configurations of each MODE[2:0] setting.
troller IC or the application processor (AP) controller.
Table 1. MAX20328 Switch Configurations
                                                                SWITCH CONNECTION
                                                                    SBU1     SBU2
  MODE[2:0]         DP_T       DM_T        DP_B         DM_B                          MG_SL      MG_SR      GM_SL      GM_SR
                                                                    _MG      _GM
  OFF [000]          OPEN       OPEN         OPEN        OPEN       OPEN     OPEN      OPEN       OPEN       OPEN        OPEN
  ON A [001]        DP_AP1     DM_AP1       DP_AP2      DM_AP2       MIC     AGND      OPEN       OPEN      GSNS_L     GSNS_R
  ON B [010]        DP_AP1     DM_AP1       DP_AP2      DM_AP2      AGND      MIC     GSNS_L     GSNS_R      OPEN        OPEN
  Set by 0x0D
                       —           —           —           —          —         —        —          —          —           —
  and 0x0E [011]
  UART [100]        DP_AP1     DM_AP1       DP_AP2      DM_AP2      OPEN     OPEN      OPEN      GSNS_R     GSNS_L       OPEN
  USB [101]         DP_AP1     DM_AP1       DP_AP2      DM_AP2      OPEN     OPEN      OPEN       OPEN       OPEN        OPEN
  Audio                                                              MIC     AGND      OPEN       OPEN      GSNS_L     GSNS_R
  Accessory                                                          *(1)      *(1)     *(1)       *(1)       *(1)        *(1)
                       RA         LA           RA          LA
  (Dual Ground                                                      AGND      MIC     GSNS_L     GSNS_R      OPEN        OPEN
  Sense) [110]*                                                      *(2)      *(2)     *(2)       *(2)       *(2)        *(2)
  Audio                                                              MIC     AGND      OPEN       OPEN      GSNS_L       OPEN
  Accessory                                                          *(1)      *(1)     *(1)       *(1)       *(1)        *(1)
  (Single              RA         LA           RA          LA
  Ground                                                            AGND      MIC     GSNS_L      OPEN       OPEN        OPEN
  Sense) [111]*                                                      *(2)      *(2)     *(2)       *(2)       *(2)        *(2)
* Controlled by the state machine. Refer to the state diagram of Figure 1.
*(1) When MG_CHK_DIS = 1 OR ADC_CTL ≠ 11, configuration valid when CC_POS = 0
*(2) When MG_CHK_DIS = 1 OR ADC_CTL ≠ 11, configuration valid when CC_POS = 1
www.maximintegrated.com                                                                                     Maxim Integrated │ 17


MAX20328/MAX20328A/                                                               MUX Switch for USB Type-C
MAX20328B                                                                          Audio Adapter Accessories
Table 2. MAX20328A/MAX20328B Switch Configurations
                                                                  SWITCH CONNECTION
  MODE[2:0]                                                          SBU1   SBU2
                        DP_T     DM_T        DP_B        DM_B                       MG_SL MG_SR  GM_SL      GM_SR
                                                                     _MG     _GM
  OFF [000]             OPEN     OPEN        OPEN        OPEN       OPEN    OPEN     —    OPEN      —        OPEN
                         DP_      DM_
  ON A [001]                                 OPEN        OPEN         MIC   AGND     —     TX       —          RX
                         AP1      AP1
  Default Mode
                          —        —           —           —           —      —      —      —       —           —
  [010/011]
                                                                                           TX                  RX
                         DP_      DM_                                                      *(1)                *(1)
  UART [100]                                 OPEN        OPEN       OPEN    OPEN     —              —
                         AP1      AP1                                                      RX                  TX
                                                                                           *(2)                *(2)
                                                                                           TX                  RX
                                              DP_         DM_                              *(1)                *(1)
  USB [101]             OPEN     OPEN                               OPEN    OPEN     —              —
                                              AP2         AP2                              RX                  TX
                                                                                           *(2)                *(2)
  Audio Accessory                                                     MIC   AGND*         OPEN               GSNS
  (Single ground                                                      *(3)    (3)          *(3)                *(3)
  sense)
                          RA       LA          RA          LA                        —              —
  SBU1_MG = MIC
  SBU1_MG =                                                         AGND*    MIC          GSNS               OPEN
  AGND [110/111]*                                                      (4)   *(4)          *(4)                *(4)
* Controlled by the state machine. Refer to the state diagram of Figure 1.
*(1) CC_POS = 0
*(2) CC_POS = 1
*(3) When MG_CHK_DIS = 1 OR ADC_CTL ≠ 11, configuration valid when CC_POS = 0
*(4) When MG_CHK_DIS = 1 OR ADC_CTL ≠ 11, configuration valid when CC_POS = 1
www.maximintegrated.com                                                                         Maxim Integrated │ 18


MAX20328/MAX20328A/                                                                       MUX Switch for USB Type-C
MAX20328B                                                                                   Audio Adapter Accessories
Enable                                                                supply current. When a device is disabled, the ADC_VAL
The MAX20328/MAX20328A/MAX20328B are enabled                          register (0x01) and bits 0x02[7:6] and 0x02[3:0] are reset
by default (EN = 1). To disable a device, write EN = 0                to 0. These bits provide information regarding the audio
(0x06[4] = 0). In the disable state, all switches are open            accessory impedance and microphone orientation. When
and the devices enter a low-current mode to minimize the              EN is set to 1, the device runs through the state machine
                                                                      diagrammed in Figure 1.
                          START
                  ALL SWITCHES OPEN
                   SWITCHES SET TO
                  DEFAULT POSITIONS
                         (240µs)
                    MODE[2:0] = 11x
                                             SWITCHES FOLLOW
                           AND         NO
                                               TABLE 1 / TABLE 2
                    CC DETE CTED?
                           YES
                                             SWITCHES FOLLOW
                   MG_CHK_DIS = 0?     NO       CC_POS STATE
                                            SEE TABLE 1 / TABLE 2
                           YES
                   ADC_CTL[1:0] = 11 NO
                           YES
                    ADC AUTOMATIC
                IMPEDANCE DETECTION
                      SET EOC = 1
                                                SWAP SWITCH                                        SBU1 = MI C,
                                                  POSITIONS         IF SET_IDET[1:0] = 10         SBU2 = AGND,
                   HIGH-IMPEDANCE/                                IMPEDANCE < OMTP_VAL?          GSNS_L = GM_SL,
                                      YES        REPEAT ADC
                   OPEN DETECTE D?                                    ELSE IMPEDANCE            GSNS_R = GM_SR,
                                          IMPEDANCE DETECTION           < HIHS_VAL?             OPEN_CABLE = 1 IF
                                          IDETIN = 100µA OR 1.1mA                                 SET_IDET = 01
                            NO
                    MI C BIAS CHECK          SWAP SBU1_MG A ND
                                       NO
                     VMC > MI CTHR?                SBU2_GM
                           YES                  YES
                     DEVICE READY              MODE[2:0] = 11X
                   MANUAL ADC AND                   AND                                   NO
                   SWITCH CONTROL             CC CONNECTED?
Figure 1. Startup State Machine (FSM)
www.maximintegrated.com                                                                                           Maxim Integrated │ 19


MAX20328/MAX20328A/                                                                MUX Switch for USB Type-C
MAX20328B                                                                              Audio Adapter Accessories
Pop-Up Noise Suppression                                          gers an automatic measurement. If ADC_CTL[1:0] = 01
If a 3.5mm jack is removed from a USB Type-C audio                or 10, impedance measurements are manually triggered
adapter when the adapter is connected to a portable               by writing FORCE_ADC_START high.
device, pop-up noise may be heard due to the MIC                  When OPEN_DETECT = 1 (0x09[5]), the impedance
line bias. When the CC pin goes high to signal an                 detection starts with IDET = 100µA. Otherwise, the 1.1mA
audio accessory removal, the MIC/AGND and AGND/MIC                and 5.5mA current sources are used for low impedance
switches disconnect from the MIC bias and discharge to            detection. Figure 2 details the impedance detection
ground within 50µs.                                               process.
Impedance Detection                                               Current Sources
The MAX20328/MAX20328A/MAX20328B can perform                      Three current source values are available for impedance
an impedance detection to measure the impedance of a              detection. For high impedance audio accessories and
connected audio accessory or detect an open cable. This           open cable detection, a 100µA source is used. When the
function uses a precision, 8-bit ADC to measure the volt-         accessory impedance is low, i.e. ADC_VAL < HIHS_VAL
age dropped across the left audio channel while the IDET          after EOC goes high, IDET switches to 1.1mA. For very
current source is active. An impedance measurement trig-          low impedance accessories, the 1.1mA source increases
gers automatically when EN is set to 1 if ADC_CTL[1:0]            to 5.5mA. The value of the current source used in the
= 11 and follows the state machine in Figure 1. Changing          latest impedance measurement is available in SET_
MODE[2:0] to 1xx while the device is enabled also trig-           IDET[1:0] (0x09[3:2]).
                                      START
                                OPEN_DETECT = 1?     NO
                                       YES
                                 SET_IDET[1:0] = 01
                                   IDET = 100µA
                                 RUN IMPEDANCE
                                    DETECTION
                                                                                 RUN LOW IMPEDANCE
                                    ADC_VAL >                                          DECTION
                                                    NO  ADC_LI_CHK = 1? YES
                                   HIHS_VAL[7:0]                                 (1.1mA FIRST, 5.5mA IF
                                                                                  BELOW THRESHOLD)
                                       YES                    NO
                                                             END
Figure 2.Impedance Detection Process
www.maximintegrated.com                                                                                 Maxim Integrated │ 20


MAX20328/MAX20328A/                                                      MUX Switch for USB Type-C
MAX20328B                                                                   Audio Adapter Accessories
ADC Result                                               In cases where the 3.5mm to USB Type-C adapter has a
When the EOC bit goes high, the ADC result is available  non-standard internal connection of one SBU to ground,
in ADC_VAL (register 0x01). The following conversion     there is the potential risk for the MIC line to be shorted
extracts the channel impedance from ADC_VAL and          to ground. To prevent this situation, the MAX20328/
SET_IDET[1:0]                                            MAX20328A/MAX20328B can check for the presence of
                                                         a bias on the MIC line at the end of an automatic imped-
     R = (ADC_VAL[7:0] x 4.746mV) / SET_IDET[1:0]
                                                         ance detection. When MIC_CHK_DIS = 0 (0x07[1]), the
To account for potential offsets in the ADC and current  devices check for a bias greater than MICTHR on the MIC
source values, Table 3 provides the minimum and maximum  line. If no bias is detected, the states of the MIC/AGND
values the ADC may provide for common headset            switches are swapped immediately after the DEVICE_
impedance values.                                        READY bit goes high. To prevent the bias check from
Open Cable Check                                         incorrectly reassigning the switches, a bias voltage must
                                                         be applied to MIC before running an impedance detection.
The MAX20328/MAX20328A/MAX20328B can perform
an open cable check during the impedance measure-        I2C Interface
ment. If the 100µA current source detects a high imped-  The MAX20328/MAX20328A/MAX20328B use the two-
ance where ADC_VAL > HIHS_VAL, the OPEN_CABLE            wire I2C interface to communicate with a host application
bit (0x02[3]) goes high to signal the open cable.        processor. The configuration settings and status informa-
MIC/GND Detection                                        tion provided through this interface are detailed in the
                                                         register descriptions (Tables 5–19). Both devices use the
Because a USB Type-C audio accessory can be inserted
                                                         seven-bit slave address 0b0010101 (0x2A for writes, 0x2B
in two orientations, it is necessary to identify the MIC
                                                         for reads).
and GND lines. After an impedance detection, the state
machine determines if the MIC/AGND switches are in
the correct orientations. If ADC_VAL is greater than the
                                                         Applications Information
thresholds set in OMTP_VAL or HIHS_VAL, the switch       Applying Signals to an Open Switch
positions are swapped and the impedance measurement      Due to the structure of the DP_/DM_ inputs, the switches
is repeated.                                             will not close when a large, high frequency signal is
                                                         applied to the open terminal. To ensure the desired path
                                                         closes properly, avoid applying fast signals >1V to the
                                                         DP_/DM_ pins before closing the switch.
Table 3. ADC to Impedance Range Conversion Guide
   ACCESSORY IMPEDANCE
                                    RESISTOR RANGE (Ω)        ADC CODE (HEX)                  SET_IDET[1:0]
               (Ω)
                16                     0            22.4      00             1A              1               1
                32                    25.0          40.6      1D             2F              1               1
                64                    44.9          87.2      34             65              1               1
               150                    94.9         189.8      16             2C              1               0
               300                   211.4         431.5      31             64              1               0
               600                   474.6         957.8      6E             DE              1               0
              2000                  1,001.4       12,150      15             FF              0               x
www.maximintegrated.com                                                                         Maxim Integrated │ 21


MAX20328/MAX20328A/                                                                             MUX Switch for USB Type-C
MAX20328B                                                                                          Audio Adapter Accessories
I2C Serial Interface                                                       the 2-wire interface, or if the master in a single-master
The I2C serial interface is used to configure the device.                  system has an open drain SCL output. Each transmission
Figure 3 shows the I2C timing diagram.                                     consists of a START condition sent by a master, followed
                                                                           by the MAX20328/MAX20328A/MAX20328B 7-bit slave
Serial Addressing                                                          address plus R/W bit, a register address byte, one or
When in I2C mode, the devices operate as slave devices                     more data bytes, and finally a STOP condition.
that send and receive data through an I2C-compatible
                                                                           Start and Stop Conditions
2-wire interface. The interface uses a serial data line
(SDA) and a serial-clock line (SCL) to achieve bidirec-                    Both SCL and SDA remain high when the interface is not
tional communication between master(s) and slave(s). A                     busy. A master signals the beginning of a transmission
master (typically a microcontroller) initiates all data trans-             with a START (S) condition by transitioning SDA from high
fers to and from the MAX20328/MAX20328A/MAX20328B                          to low while SCL is high (Figure 4). When the master has
and generates the SCL clock that synchronizes the data                     finished communicating with the slave, it issues a STOP
transfer. The SDA line operates as both an input and an                    (P) condition by transitioning SDA from low to high while
open drain output. A pullup resistor is required on SDA.                   SCL is high. The bus is then free for another transmission.
The SCL line operates only as an input. A pullup resis-
tor is required on SCL if there are multiple masters on
   SDA
              tBUF
                                                                tF                                               tSP
                                 tLOW                                                      tHD:STA
   SCL
                                                          tHIGH                                          SPIKE
                         tHD:STA           tR                                        tSU:STA                                tSU:STO
                                                                                                      SUPPRESSION
                                                  tHD:DAT          tSU:DAT
         STOP      START                                                     REPEATED
                                                                               START
   NOTE: TIMING IS REFERENCED TO VIL(MAX) AND VIH(MIN).
Figure 3. I2C Timing Diagram.
              SDA
               SCL
                           S                                                                                            P
                         START                                                                                         STOP
                       CONDITION                                                                                     CONDITION
Figure 4. Start and Stop Conditions
www.maximintegrated.com                                                                                               Maxim Integrated │ 22


MAX20328/MAX20328A/                                                              MUX Switch for USB Type-C
MAX20328B                                                                           Audio Adapter Accessories
Bit Transfer                                                      Slave Address
One data bit is transferred during each clock pulse               The devices have a 7-bit slave address. The bit following
(Figure 5). The data on SDA must remain stable while              a 7-bit slave address is the R/W bit, which is low for a
SCL is high.                                                      write command and high for a read command. The slave
                                                                  address for the device is 0b00101011 for read commands
Acknowledge                                                       and 0b00101010 for write commands. This is summarized
The acknowledge bit is a clocked 9th bit (Figure 6), which        in Table 4.
the recipient uses to handshake receipt of each byte of
data. Thus, each byte transferred effectively requires 9          Table 4. I2C Slave Addresses
bits. The master generates the 9th clock pulse, and the                                                     VALUE
recipient pulls down SDA during the acknowledge clock                  ADDRESS FORMAT
                                                                                                      HEX           BINARY
pulse. The SDA line is stable low during the high period
of the clock pulse. When the master is transmitting to the          7-BIT SLAVE ADDRESS              0x15           001 0101
devices, it generates the acknowledge bit because the               WRITE ADDRESS                    0x2A          0010 1010
device is the recipient. When the device is transmitting            READ ADDRESS                     0x2B          0010 1011
to the master, the master generates the acknowledge bit
because the master is the recipient. If the device does not
pull SDA low, a not acknowledge is indicated.
                   SDA
                   SCL
                                   DATA LINE STABLE; CHANGE OF DATA
                                     DATA VALID        ALLOWED
Figure 5. Bit Transfer
                           START                                                      CLOCK PULSE FOR
                         CONDITION                                                      ACKNOWLEDGE
                     SCL                       1            2                         8                  9
                     SDA
                      BY
            TRANSMITTER
                     SDA
                      BY
                RECEIVER
                             S
Figure 6. Acknowledge
www.maximintegrated.com                                                                                    Maxim Integrated │ 23


MAX20328/MAX20328A/                                                                                      MUX Switch for USB Type-C
MAX20328B                                                                                                     Audio Adapter Accessories
Bus Reset                                                                             register selected by the register address and subsequent
The MAX20328/MAX20328A/MAX20328B resets the bus                                       data bytes go into subsequent registers (Figure 7). If
with the I2C start condition for reads. When the R/W bit is                           multiple data bytes are transmitted before a STOP con-
set to 1, the MAX20328/MAX20328A/MAX20328B trans-                                     dition, these bytes are stored in subsequent registers
mits data to the master, thus the master is reading from                              because the register addresses auto-increments (Figure 8).
the device.                                                                           Format for Reading
Format for Writing                                                                    The MAX20328/MAX20328A/MAX20328B is read using
A write to the devices comprises the transmission of the                              the internally stored register address as an address point-
slave address with the R/W bit set to zero, followed by                               er, the same way the stored register address is used as an
at least 1 byte of information. The first byte of informa-                            address pointer for a write. The pointer auto-increments
tion is the register address or command byte. The reg-                                after each data byte is read using the same rules as for a
ister address determines which register of the device is                              write. Thus, a read is initiated by first configuring the reg-
to be written by the next byte, if received. If a STOP (P)                            ister address by performing a write (Figure 9). The master
condition is detected after the register address is received,                         can now read consecutive bytes from the device, with
then the device takes no further action beyond storing                                the first data byte being read from the register addressed
the register address. Any bytes received after the register                           pointed by the previously written register address (Figure
address are data bytes. The first data byte goes into the                             10). Once the master sounds a NACK, the MAX20328/
                                                                                      MAX20328A/MAX20328B stop sending valid data.
                                           ADDRESS = 0x2A                 0 = WRITE                     REGISTER ADDRESS = 0x01
              S       0       0       1       0       1       0       1       0     A       0    0      0        0      0    0    0     1     A
                          REGISTER 0x01 WRITE DATA
                                                                                                             S = START BIT
                                                                                                             P = STOP BIT
                                                                                                             A = ACK
             d7    d6      d5      d4       d3     d2      d1      d0       A       P                        N = NACK
                                                                                                             d_ = DATA BIT
Figure 7. Format for I2C Write
                                    ADDRESS = 0x2A                  0 = WRITE                       REGISTER ADDRESS = 0x01
          S     0       0        1      0       1       0       1       0       A       0      0    0      0        0      0    0    1    A
                                REGISTER 0x01 WRITE DATA                                            REGISTER 0x02 WRITE DATA
                d7      d6      d5      d4      d3      d2      d1      d0      A      d7     d6   d5     d4       d3     d2   d1   d0   A/N      P
Figure 8. Format for Writing to Multiple Registers
www.maximintegrated.com                                                                                                                Maxim Integrated │ 24


MAX20328/MAX20328A/                                                           MUX Switch for USB Type-C
MAX20328B                                                                         Audio Adapter Accessories
                               ADDRESS = 0x2A          0 = WRITE          REGISTER ADDRESS = 0x01
         S       0     0     1      0     1     0    1     0     A  0  0  0     0     0      0     0  1   A/N
                               ADDRESS = 0x2B          1 = READ          REGISTER 0x01 READ DATA
         Sr      0     0     1      0     1     0    1     1     A d7 d6 d5    d4    d3     d2    d1 d0    A/N    P
Figure 9. Format for Reads (Repeated Start)
                                ADDRESS = 0x2A         0 = WRITE          REGISTER ADDRESS = 0x01
         S       0     0     1      0     1     0    1     0     A  0  0  0     0     0      0     0  1   A/N
                               ADDRESS = 0x2B          1 = READ          REGISTER 0x01 READ DATA
         Sr      0     0     1      0     1     0    1     1     A d7 d6 d5    d4    d3     d2    d1 d0     A
                    REGISTER 0x02 READ DATA                              REGISTER 0x03 READ DATA
        d7    d6    d5    d4     d3    d2    d1   d0     A         d7 d6 d5    d4    d3     d2    d1 d0    A/N     P
Figure 10. Format for Reading Multiple Registers
www.maximintegrated.com                                                                                Maxim Integrated │ 25


                            I2C Register Map
                             ADDRESS          NAME         R/W         B7             B6             B5          B4          B3              B2          B1            B0
                                0x00       DEVICE_ID        R                            CHIP_ID[3:0]                                         CHIP_REV[3:0]
                                0x01        ADC_VAL         R                                                     ADC_VAL[7:0]
                                                                                                    OVP_        OVP_       OPEN_                      DEVICE_
                                                                                                                                                                              MAX20328/MAX20328A/
                                0x02        STATUS1         R            IDET_LVL[1:0]                                                 SBU_CFG                        EOC
                                                                                                    DPMT        SBU1       CABLE                        RDY
www.maximintegrated.com
                                0x03        STATUS2         R      THT_CMP           FUO        OVP_DPMB     OVP_SBU2       EOB                        RFU[2:0]
                                                                                   DPMT_           DPMB_       SBU1_                     OPEN_        DEVICE_
                                0x04      INTERRUPT        R/C        EOBi                                               SBU2_OVi                                     EOCi
                                                                                    OVi             OVi         OVi                       CABi         RDYi
                                                                                   DPMT_           DPMB_       SBU1_       SBU2_         OPEN_        DEVICE_
                                                                                                                                                                              MAX20328B
                                0x05          MASK         R/W       EOBm                                                                                            EOCm
                                                                                    OVm             OVm         OVm         OVm          CABm          RDYm
                                                                                                                         MANUAL_
                                0x06       CONTROL1        R/W      CC_CLR         CC_DEB         CC_POS         EN        OVP_                       MODE[2:0]
                                                                                                                         RESTORE
                                                                     MAN_           MAN_                                                               MIC_          FORCE_
                                0x07       CONTROL2        R/W                                   MAN_SBU     MAN_MGS     MAN_TXRX            RFU
                                                                     DPMT           DPMB                                                              CHK_DIS         TXRX
                                0x08       CONTROL3        R/W        FORCE_DPMT[1:0]               FORCE_DPMB[1:0]        FORCE_SBU_MG[1:0]             FORCE_MGS[1:0]
                                             ADC_                    IDET_          MG_                         ADC_
                                0x09                       R/W                                   OPEN_DET                     SET_IDET[1:0]                ADC_CTL[1:0]
                                           CONTROL1                   FLAT        CHK_DIS                      LI_CHK
                                                                                                                                                        OVP_         FORCE_
                                             ADC_
                                0x0A                       R/W         SET_OVTH1[1:0]                SET_OVTH2[1:0]           ADC_AVG#[1:0]            LATCH_         ADC_
                                           CONTROL2
                                                                                                                                                         OFF          START
                                0x0B        HIHS_VAL      R/W                                                     HIHS_VAL[7:0]
                                0x0C       OMTP_VAL       R/W                                                     OMTP_VAL[7:0]
                                              SW_
                                0x0D                      R/W           DFT_DPMT[1:0]                 DFT_DPMB[1:0]         RFU                    DFT_SBU_MG[2:0]
                                             DEFLT1
                                              SW_                    DFT_           DFT_            DFT_        DFT_
                                0x0E                      R/W                                                                     RFU[1:0]                DFT_TXRX[1:0]
                                             DEFLT2                 MG_SL          MG_SR           GM_SL       GM_SR                                                          MUX Switch for USB Type-C
                            * Cells shaded in light gray denote bits that are cleared on a device reset.
    Maxim Integrated │ 26                                                                                                                                                      Audio Adapter Accessories


MAX20328/MAX20328A/                                                                 MUX Switch for USB Type-C
MAX20328B                                                                             Audio Adapter Accessories
Table 5. DEVICE_ID Register (0x00)
 ADDRESS           0x00
 MODE              Read Only
 BIT                   7            6              5             4             3         2            1             0
 NAME                                  CHIP_ID[3:0]                                       CHIP_REV[3:0]
 RESET
                       0            0              0             0             0         0            0             1
 MAX20328
 RESET
 MAX20328A/            1            0              0             0             0         0            0             1
 MAX20328B
                   Chip ID
 CHIP_ID[3:0]
                   Shows information about the version of MAX20328/MAX20328A/MAX20328B
                   Chip Revision
 CHIP_REV[3:0]
                   Shows information about the revision of MAX20328/MAX20328A/MAX20328B
Table 6. ADC_VAL Register (0x01)
 ADDRESS           0x01
 MODE              Read Only
 BIT                   7            6              5             4             3         2            1             0
 NAME                                                              ADC_VAL[7:0]
 RESET
                       0            0              0             0             0         0            0             0
 MAX20328
 RESET
 MAX20328A /           0            0              0             0             0         0            0             0
 MAX20328B
                   ADC Value
 ADC_VAL[7:0]
                   Read only register containing the latest ADC conversion. LSB = 4.71mV
www.maximintegrated.com                                                                               Maxim Integrated │ 27


MAX20328/MAX20328A/                                                                   MUX Switch for USB Type-C
MAX20328B                                                                                Audio Adapter Accessories
Table 7. STATUS1 Register (0x02)
 ADDRESS           0x02
 MODE              Read Only
 BIT                   7             6              5             4             3                 2            1              0
                                                  OVP_         OVP_           OPEN_            SBU_        DEVICE_
 NAME                   IDET_LVL[1:0]                                                                                       EOC
                                                  DPMT         SBU1            CAB              CFG          RDY
 RESET
                       0             0              0             0             0                 0            0              0
 MAX20328
 RESET
 MAX20328A/            0             0              0             0             0                 0            0              0
 MAX20328B
                   Detection Current Level
                   Contains the last IDET level used for ADC Impedance Detection
                   00 = No Jack Insertion Default
 IDET_LVL[1:0]
                   01 = 100µA
                   10 = 1.1mA
                   11 = 5.5mA
                   DP, DM Top Side Over Voltage Protection Status
                   Reports the status of the OVP on DP_T/DM_T
 OVP_DPMT
                   0 = No Fault
                   1 = OVP Fault Detected
                   SBU1 Over Voltage Protection Status
                   Reports the status of the OVP on SBU1_MG, MG_SR, MG_SL (MAX20328 only)
 OVP_SBU1
                   0 = No Fault
                   1 = OVP Fault Detected
                   Open Cable Detected
                   Indicates if a cable is an open connection
 OPEN_CABLE
                   0 = Cable is not open
                   1 = High impedance is detected for both CTIA and OMTP configurations when SET_IDET[1:0] = 01.
                   MIC/GND Switch Orientation
                   The MIC/GND positions reported after a Jack Orientation detection. This bit remains low if
 SBU_CFG           MG_CHK_DIS (0x09[6]) = 1.
                   0 = SBU1 connected to MIC, SBU2 connected to AGND
                   1 = SBU1 connected to AGND, SBU2 connected to MIC
                   Device Ready
                   Jack Type detection is complete and the device is ready. This bit is set after the impedance
 DEVICE_RDY        detection if MG_CHK_DIS = 1.
                   0 = MIC/GND switch position is NOT finalized.
                   1 = MIC/GND switch position is set and device is ready.
                   End of ADC Conversion
                   Reports the status of the ADC.
 EOC
                   0 = ADC conversion is not started or in progress.
                   1 = ADC conversion is complete. The result is available in ADC_VAL (register 0x01)
www.maximintegrated.com                                                                                         Maxim Integrated │ 28


MAX20328/MAX20328A/                                                                MUX Switch for USB Type-C
MAX20328B                                                                            Audio Adapter Accessories
Table 8. STATUS2 Register (0x03)
 ADRESS             0x03
 MODE               Read Only
 BIT                    7            6             5              4            3          2              1              0
                      THT_                       OVP_          OVP_
 NAME                               FUO                                       EOB                    RFU[2:0]
                      CMP                        DPMB          SBU2
 RESET
                        0            0             0              0            0          0              0              0
 MAX20328
 RESET
 MAX20328A/             0            0             0              0            0          0              0              0
 MAX20328B
                    Output of the thermal comparator.
 THT_CMP            0 = No thermal error
                    1 = Thermal shutdown error
 FUO                Factory Use Only
                    DP, DM Bottom Side Over Voltage Protection Status
                    Reports the status of the OVP on DP_B/DM_B
 OVP_DPMB
                    0 = No Fault
                    1 = OVP Fault Detected
                    SBU2 Over Voltage Protection Status
                    Reports the status of the OVP on SBU2_GM, GM_SR, GM_SL (MAX20328 only)
 OVP_SBU2
                    0 = No Fault
                    1 = OVP Fault Detected
                    End of Boot Process
                    Signals the end of the boot process
 EOB                0 = Boot in Progress. Do not attempt any I2C transactions
                    1 = Boot Complete. Device operates normally after the POR of an ENABLE event (0x06[4]
                    low to high transition).
 RFU[2:0]           Reserved for Future Use
www.maximintegrated.com                                                                                   Maxim Integrated │ 29


MAX20328/MAX20328A/                                                                      MUX Switch for USB Type-C
MAX20328B                                                                                     Audio Adapter Accessories
Table 9. INTERRUPT Register (0x04)
 ADDRESS           0x04
 MODE              Read Only, Clear on Read
 BIT                   7              6              5               4             3                2               1             0
                                  DPMT_          DPMB_                                           OPEN_         DEVICE_
 NAME                EOBi                                       SBU1_OVi     SBU2_OVi                                           EOCi
                                     OVi            OVi                                          CABLEi          RDYi
 RESET
                       0              0              0               0             0                0               0             0
 MAX20328
 RESET
 MAX20328A/            0              0              0               0             0                0               0             0
 MAX20328B
                   End of Boot Interrupt
 EOBi              0 = No Interrupt
                   1 = Interrupt Occurred
                   Top Side Data Line OVP Fault Interrupt
                   This interrupt is not cleared after reading if the OVP condition is still present while reading.
 DPMT_OVi
                   0 = No Interrupt
                   1 = Interrupt Occurred
                   Bottom Side Data Line OVP Fault Interrupt
                   This interrupt is not cleared after reading if the OVP condition is still present while reading.
 DPMB_OVi
                   0 = No Interrupt
                   1 = Interrupt Occurred
                   SBU1 Line OVP Fault Interrupt
                   This interrupt is not cleared after reading if the OVP condition is still present while reading.
 SBU1_OVi
                   0 = No Interrupt
                   1 = Interrupt Occurred
                   SBU2 Line OVP Fault Interrupt
                   This interrupt is not cleared after reading if the OVP condition is still present while reading.
 SBU2_OVi
                   0 = No Interrupt
                   1 = Interrupt Occurred
                   Open Cable Detect Interrupt
 OPEN_CABLEi       0 = No Interrupt
                   1 = Interrupt Occurred
                   Device Ready Interrupt
 DEVICE_RDYi       0 = No Interrupt
                   1 = Interrupt Occurred
                   End of Conversion Interrupt
 EOCi              0 = No Interrupt
                   1 = Interrupt Occurred
www.maximintegrated.com                                                                                             Maxim Integrated │ 30


MAX20328/MAX20328A/                                                       MUX Switch for USB Type-C
MAX20328B                                                                  Audio Adapter Accessories
Table 10. MASK Register (0x05)
 ADDRESS             0x05
 MODE                Read/Write
 BIT                    7            6            5             4     3        2        1             0
                                  DPMT_         DPMB_        SBU1_  SBU2_    OPEN_  DEVICE_
 NAME                EOBm                                                                          EOCm
                                    OVm          OVm           OVm   OVm    CABLEm    RDYm
 RESET
                        0            0            0             0     0        0        0             0
 MAX20328
 RESET
 MAX20328A/             0            0            0             0     0        0        0             0
 MAX20328B
                     End of Boot Interrupt Mask
 EOBm                0 = Interrupt Masked
                     1 = Interrupt not Masked
                     Top Side Data Line OVP Fault Interrupt Mask
 DPMT_OVm            0 = Interrupt Masked
                     1 = Interrupt not Masked
                     Bottom Side Data Line OVP Fault Interrupt Mask
 DPMB_OVm            0 = Interrupt Masked
                     1 = Interrupt not Masked
                     SBU1 Line OVP Fault Interrupt Mask
 SBU1_OVm            0 = Interrupt Masked
                     1 = Interrupt not Masked
                     SBU2 Line OVP Fault Interrupt Mask
 SBU2_OVm            0 = Interrupt Masked
                     1 = Interrupt not Masked
                     Open Cable Detect Interrupt Mask
 OPEN_CABLEm         0 = Interrupt Masked
                     1 = Interrupt not Masked
                     Device Ready Interrupt Mask
 DEVICE_RDYm         0 = Interrupt Masked
                     1 = Interrupt not Masked
                     End of Conversion Interrupt Mask
 EOCm                0 = Interrupt Masked
                     1 = Interrupt not Masked
www.maximintegrated.com                                                                 Maxim Integrated │ 31


MAX20328/MAX20328A/                                                                    MUX Switch for USB Type-C
MAX20328B                                                                                Audio Adapter Accessories
Table 11. CONTROL1 Register (0x06)
 ADDRESS         0x06
 MODE            Read/Write
 BIT                  7              6                5             4              3            2            1             0
                                                                           MANUAL OVP_
 NAME             CC_CLR         CC_DEB           CC_POS          EN                                       MODE[2:0]
                                                                             RESTORE
 RESET
                      0              0                0             1              0            0            1             1
 MAX20328
 RESET
 MAX20328A/           0              0                0             1              0            0            1             1
 MAX20328B
                 Clear on Accessory Removal
                 When this bit is high, the bits listed below are cleared when EN = 0 or
                 a positive edge is detected on CC (accessory removal). When CC_CLR is low, the listed bits are not
 CC_CLR
                 cleared on an accessory removal.
                 0 = Retain 0x01[7:0] and 0x02[7:6], 0x02[3:0] when EN = 0 or CC transitions from 0 to 1.
                 1 = Clear 0x01[7:0] and 0x02[7:6], 0x02[3:0] when EN = 0 or CC transitions from 0 to 1.
                 CC Debounce Time
                 Controls the debounce time for detecting a falling edge on CC in accessory mode.
 CC_DEB
                 0 = No Debounce. A digital delay of 120 - 240µs is present for both edges.
                 1 = 10ms Debounce on CC falling. A digital delay of 240 - 360µs is present for CC rising.
                 CC Position Input
                 Determines if the CC pin of the device connects to CC1 or CC2 of the connector.
 CC_POS
                 0 = CC1 to CC1 (straight)
                 1 = CC1 to CC2 (swapped)
                 Switch Enable
                 Enables the switches.
 EN
                 0 = Switches Disabled
                 1 = Switches Enabled
                 Manual OVP Restore
 MANUAL_
                 Controls when switches will return to their previous state after an OVP event.
 OVP_
                 0 = Switches return to their previous state 10ms after the OVP event.
 RESTORE
                 1 = Switches return to their previous state when OVP_LATCH_OFF (0x0A[1]) = 1.
                 Switch Operational Mode Select
                 Configures the switch connection mode.
                 MAX20328:
                 000 = Default OFF
                 001 = Default ON, position A (see Table 1)
                 010 = Default ON, position B (see Table 1)
                 011 = Default programmable with registers 0x0D and 0x0E
                 100 = UART
                 101 = USB
 MODE[2:0]
                 110 = Audio Accessory (single)
                 111 = Audio Accessory (dual)
                 MAX20328A/MAX20328B:
                 000 = Default OFF (see Table 2)
                 001 = Default ON (see Table 2)
                 010/011 = Default programmable with registers 0x0D and 0x0E
                 100 = UART mode. Top side USB switches connected.
                 101 = USB mode. Bottom side USB switches connected.
                 110/111 = Audio Accessory (single)
www.maximintegrated.com                                                                                      Maxim Integrated │ 32


MAX20328/MAX20328A/                                                                MUX Switch for USB Type-C
MAX20328B                                                                             Audio Adapter Accessories
Table 12. CONTROL2 Register (0x07)
 ADDRESS           0x07
 MODE              Read/Write
 BIT                   7             6             5             4            3              2         1             0
                     MAN_          MAN_                       MAN_          MAN_                  MIC_CHK_       FORCE_
 NAME                                          MAN_SBU                                      RFU
                     DPMT          DPMB                        MGS          TXRX                      DIS         TXRX
 RESET
                       0             0             0           RFU            0              0         0           RFU
 MAX20328
 RESET
 MAX20328A/            0             0             0             0            0              0         0             0
 MAX20328B
                   Manual DP/DM Top Side Switch Setting
                   Enables manual control of the DP_T/DM_T switches
 MAN_DPMT
                   0 = DP_T/DM_T follow MODE[2:0] (0x06[2:0])
                   1 = DP_T/DM_T follow FORCE_DPMT[1:0] (0x08[7:6])
                   Manual DP/DM Bottom Side Switch Setting
                   Enables manual control of the DP_B/DM_B switches
 MAN_DPMB
                   0 = DP_B/DM_B follow MODE[2:0] (0x06[2:0])
                   1 = DP_B/DM_B follow FORCE_DPMB[1:0] (0x08[5:4])
                   Manual SBU_ to MIC/AGND Switch Setting
 MAN_SBU           0 = MIC/AGND switches follow MODE[2:0] (0x06[2:0])
                   1 = MIC/AGND switches follow FORCE_SBU_MG[1:0] (0x08[3:2])
                   Manual MG/GM Sense Switch Setting (MAX20328A/MAX20328B Only)
 MAN_MGS           0 = MG_SL/MG_SR follow MODE[2:0] (0x06[2:0])
                   1 = MG_SL/MG_SR follow FORCE_MGS[1:0] (0x08[1:0])
                   Manual TX/RX Switch Setting
 MAN_TXRX          0 = TX/RX switches follow MODE[2:0] (0x06[2:0])
                   1 = TX/RX switches follow FORCE_TXRX (0x07[0])
 RFU               Reserved for Future Use
                   Microphone Bias Check Disable
                   Disables the MIC line bias check performed after an impedance detection.
 MIC_CHK_DIS
                   0 = Check for MIC bias
                   1 = Skip MIC bias check
                   Force TX/RX Control (MAX20328A/MAX20328B Only)
                   Effective only when MAN_TXRX = 1.
 FORCE_TXRX
                   0 = TX/RX switches closed according to the value of CC_POS (GSNS switch opens automatically)
                   1 = TX/RX switches are disconnected from MG_SR/GM_SR (GSNS switch open)
www.maximintegrated.com                                                                                Maxim Integrated │ 33


MAX20328/MAX20328A/                                                         MUX Switch for USB Type-C
MAX20328B                                                                     Audio Adapter Accessories
Table 13. CONTROL3 Register (0x08)
 ADDRESS            0x08
 MODE               Read/Write
 BIT                    7            6             5          4          3         2      1             0
 NAME                FORCE_DPMT[1:0]             FORCE_DPMB[1:0]       FORCE_SBU_MG[1:0] FORCE_MGS[1:0]
 RESET
                        0            0             0          0          0         0      0             0
 MAX20328
 RESET
 MAX20328A/             0            0             0          0          0         0      0             0
 MAX20328B
                    Manual DP/DM Top Side Control
                    Effective only when MAN_DPMT = 1.
 FORCE_DPMT         00 = Switches open
 [1:0]              01 = Switches closed in data connection
                    10 = Switches closed in audio connection
                    11 = Switches open
                    Manual DP/DM Bottom Side Control
                    Effective only when MAN_DPMB = 1.
 FORCE_DPMB         00 = Switches open
 [1:0]              01 = Switches closed in data connection
                    10 = Switches closed in audio connection
                    11 = Switches open
                    Manual MIC/AGND Control
                    Effective only when MAN_SBU = 1.
 FORCE_             00 = Switches open
 SBU_MG[1:0]        01 = Switches closed as SBU1 to MIC and SBU2 to AGND
                    10 = Switches closed as SBU1 to AGND and SBU2 to MIC
                    11 = Switches open
                    Manual MG/GM Control
                    Effective only when MAN_MGS = 1.
 FORCE_MGS          00 = Switches open
 [1:0]              01 = Switches closed as MG_S_ to GSNS_
                    10 = Switches closed as GM_S_ to GSNS_
                    11 = Switches open
www.maximintegrated.com                                                                   Maxim Integrated │ 34


MAX20328/MAX20328A/                                                                 MUX Switch for USB Type-C
MAX20328B                                                                             Audio Adapter Accessories
Table 14. ADC CONTROL1 Register (0x09)
 ADDRESS            0x09
 MODE               Read/Write
 BIT                    7            6              5             4            3            2              1             0
                     IDET_         MG_          OPEN_          ADC_LI_
 NAME                                                                           SET_IDET[1:0]              ADC_CTL[1:0]
                      FLAT      CHK_DIS         DETECT          CHK
 RESET
                        1            0              1             1            0            0              1             1
 MAX20328
 RESET
 MAX20328A/             1            0              1             1            0            0              1             1
 MAX20328B
                    IDET Flat Period
                    Sets the length of time IDET remains flat.
 IDET_FLAT
                    0 = 25ms
                    1 = 100ms
                    MIC/GND Position Detection Disable
                    Disables automatic MIC/GND orientation detection when an audio accessory is connected.
 MG_CHK_DIS
                    0 = Perform automatic MIC/GND position detection
                    1 = Disable automatic MIC/GND position detection
                    Open Cable Detection Enable
 OPEN_              Enables the 100µA current source to detect a high impedance or open cable.
 DETECT             0 = Open cable check disabled
                    1 = Open cable check enabled
                    Low Impedance Detection Enable
                    Enables the 1.1 and 5.5mA current sources for audio accessory low impedance detection.
 ADC_LI_CHK
                    0 = Low impedance detection disabled
                    1 = Low impedance detection enabled
                    Manual IDET Setting
                    Set the IDET level to be used in an impedance check triggered by FORCE_ADC_START (0x0A[0]).
                    00 = 100µA
 SET_IDET[1:0]
                    01 = 100µA
                    10 = 1.1mA
                    11 = 5.5mA
                    ADC Conversion Control
                    Configures when the ADC performs an impedance detection.
                    00 = ADC and impedance detection are always off
                    01 = Manual impedance detection performed with a single ADC measurement triggered by FORCE_ADC_
 ADC_CTL[1:0]
                    START.
                    10 = Manual impedance detection performed with multiple averaged ADC measurements triggered by FORCE_
                    ADC_START. Set the number of ADC samples to average with ADC_AVG#[1:0] (0x0A[3:2]).
                    11 = Impedance detection follows FSM. See Figure 1.
www.maximintegrated.com                                                                                    Maxim Integrated │ 35


MAX20328/MAX20328A/                                                                 MUX Switch for USB Type-C
MAX20328B                                                                               Audio Adapter Accessories
Table 15. ADC CONTROL2 Register (0x0A)
 ADDRESS            0x0A
 MODE               Read/Write
 BIT                    7            6              5              4            3             2      1             0
                                                                                                   OVP_        FORCE_
 NAME                  SET_OVTH1[1:0]              SET_OVTH2[1:0]               ADC_AVG#[1:0]     LATCH_        ADC_
                                                                                                    OFF         START
 RESET
                        0            1              0              1            0             0      0             0
 MAX20328
 RESET
 MAX20328A/             1            1              1              1            0             0      0             0
 MAX20328B
                    Data/Audio Switch Overvoltage Threshold
                    Set the OVP threshold on the DM_ and DP_ switch paths.
 SET_OVTH1          00 = 3.37V
 [1:0]              01 = 4.0V
                    10 = 4.7V
                    11 = 5.0V
                    SBU_/GSNS_ Switch Overvoltage Threshold
                    Set the OVP threshold on the SBU_ and GSNS_ switch paths.
 SET_OVTH2          00 = 3.37V
 [1:0]              01 = 4.0V
                    10 = 4.7V
                    11 = 5.0V
                    ADC Number of Samples
                    Sets the number of ADC samples to average.
 ADC_AVG#           00 = 2 samples
 [1:0]              01 = 4 samples
                    10 = 8 samples
                    11 = 16 samples
                    OVP Latch Reset
                    Restores the previous state of switches after an OVP event. Only active when
 OVP_LATCH_
                    MANUAL_OVP_RESTORE = 1 (0x06[3]).
 OFF
                    0 = No effect
                    1 = Switches restored to previous state
                    Force ADC Conversion
 FORCE_ADC_         Manually trigger an ADC impedance measurement when ADC_CTL[1:0] = 01 or 10.
 START              0 = ADC operates normally
                    1 = Begin ADC conversion. Sets EOC upon completion (0x02[0]).
www.maximintegrated.com                                                                              Maxim Integrated │ 36


MAX20328/MAX20328A/                                                                MUX Switch for USB Type-C
MAX20328B                                                                           Audio Adapter Accessories
Table 16. HIHS_VAL Register (0x0B)
 ADDRESS            0x0B
 MODE               Read/Write
 BIT                   7            6             5               4            3       2        1             0
 NAME                                                               HIHS_VAL[7:0]
 RESET
                       0            0             0               0            1       1        0             0
 MAX20328
 RESET
 MAX20328A/            0            0             0               0            1       1        0             0
 MAX20328B
                    High Impedance Threshold
 HIHS_VAL[7:0]
                    Sets the high impedance threshold for detection an open cable.
Table 17. OMTP_VAL Register (0x0C)
 ADDRESS            0x0C
 MODE               Read/Write
 BIT                   7            6             5               4            3       2        1             0
 NAME                                                               OMTP_VAL[7:0]
 RESET
                       0            0             1               1            0       0        0             0
 MAX20328
 RESET
 MAX20328A/            0            0             1               1            0       0        0             0
 MAX20328B
 OMTP_VAL           OMTP Headset Detection Threshold
 [7:0]              Sets the ADC threshold below which an OMTP headset is detected
www.maximintegrated.com                                                                         Maxim Integrated │ 37


MAX20328/MAX20328A/                                                         MUX Switch for USB Type-C
MAX20328B                                                                    Audio Adapter Accessories
Table 18. DEFAULT1 Register (0x0D)
 ADDRESS            0x0D
 MODE               Read/Write
 BIT                    7           6              5          4          3      2         1              0
 NAME                  DFT_DPMT[1:0]               DFT_DPMB[1:0]        RFU         DFT_SBU_MG[2:0]
 RESET
                        0           1              0          1          0      0         0              0
 MAX20328
 RESET
                        0           1              0          1          0      0         0              0
 MAX20328A
 RESET
                        0           1              0          0          0      0         0              0
 MAX20328B
                    Default DP_T/DM_T Switch Setting
                    00 = Switches open
    DFT_DPMT
                    01 = Switches closed in data connection
       [1:0]
                    10 = Switches closed in audio connection
                    11 = Switches open
                    Default DP_B/DM_B Switch Setting
                    00 = Switches open
 DFT_DPMB
                    01 = Switches closed in data connection
 [1:0]
                    10 = Switches closed in audio connection
                    11 = Switches open
 RFU                Reserved for Future Use
                    Default SBU_ Switch Setting
                    000 = Switches open
                    001 = SBU1 connected to MIC; SBU2 open
                    010 = SBU1 open; SBU2 connected to AGND
 DFT_SBU_MG
                    011 = SBU1 connected to MIC; SBU2 connected to AGND
 [2:0]
                    100 = Switches open
                    101 = SBU1 connected to AGND; SBU2 open
                    110 = SBU1 open; SBU2 connected to MIC
                    111 = SBU1 connected to AGND; SBU2 connected to MIC
www.maximintegrated.com                                                                    Maxim Integrated │ 38


MAX20328/MAX20328A/                                                          MUX Switch for USB Type-C
MAX20328B                                                                      Audio Adapter Accessories
Table 19. DEFAULT2 Register (0x0E)
 ADDRESS            0x0E
 MODE               Read/Write
 BIT                    7           6             5          4           3           2     1             0
                     DFT_         DFT_          DFT_        DFT_
 NAME                                                                       RFU[1:0]       DFT_TXRX[1:0]
                    MG_SL        MG_SR         GM_SL      GM_SR
 RESET
                        0           0             0          0           0           0         RFU
 MAX20328
 RESET
 MAX20328A/           RFU           0            RFU         0           0           0     0             0
 MAX20328B
                    Default MG_SL Switch Setting (MAX20328 only)
 DFT_MG_SL          0 = Switch open
                    1 = MG_SL connected to GSNS_L
                    Default MG_SR Switch Setting (Note 9)
 DFT_MG_SR          0 = Switch open
                    1 = MG_SR connected to GSNS_R/GSNS
                    Default GM_SL Switch Setting (MAX20328 only)
 DFT_GM_SL          0 = Switch open
                    1 = GM_SL connected to GSNS_L
                    Default GM_SR Switch Setting (Note 9)
 DFT_GM_SR          0 = Switch open
                    1 = GM_SR connected to GSNS_R/GSNS
 RFU[1:0]           Reserved for Future Use
                    Default TX/RX Switch Setting (MAX20328A/MAX20328B only)
                    00/11 = TX and RX disconnected from GM_SR and MG_SR
 DFT_TXRX[1:0]
                    01 = TX connected to GM_SR, RX connected to MG_SR
                    10 = TX connected to MG_SR, RX connected to GM_SR
Note 9: GSNS has higher priority than DFT_TXRX[1:0]. MG_SR/GM_SR will connect to GSNS if DFT_MG_SR[1:0]/
        DFT_GM_SR[1:0] conflict with DFT_TXRX[1:0]
www.maximintegrated.com                                                                    Maxim Integrated │ 39


MAX20328/MAX20328A/                                                      MUX Switch for USB Type-C
MAX20328B                                                                  Audio Adapter Accessories
Typical Application Circuit
                                                           MAX20328
                                                                                            VCC
                                                                                      VCC
                                                                                                          AP
                                                                                      SDA            SDA
          CC            CC      AUDIO ACCESSORY MODE                     INTERFACE    SCL            SCL
                                DISCONNECT DETECTION                      CONTROL
                                                                                     DGND            GND
                                                         DP/DM SWITCH
                                                   L-IMPEDANCE DETECTION
                                                                                   DP_AP1
         DP_T           DP_T
                                                                                                        USB
                                                                                   DM_AP1             PORT 1
        DM_T            DM_T
                                                                                        RA
                                                                                                        USB
        DP_B            DP_B                                                                          PORT 2
                                                                                        LA
        DM_B            DM_B
                                                                                   DP_AP2
                                              NEGATIV E VOLTAGE CAPABLE
                                                                                   DM_AP2
                                              ON AUDIO CHANNEL
                                                                                                        CODEC
                                                                                                     RA
                                                       MI C/AGND SW ITCH
                                                                                                     LA
                                                        MI C DETE CTION
                                                                                       MI C          MI C
     SBU1_MG            SBU1_MG
                                                                                     AGND            AGND
     SBU2_GM            SBU2_GM
                        MG_SL                                                      GSNS_L            GSNS_L
                        MG_SR                                                      GSNS_R            GSNS_R
                        GM_SL
                        GM_SR
                                                POSITIVE V OLTA GE ONLY
www.maximintegrated.com                                                                     Maxim Integrated │ 40


MAX20328/MAX20328A/                                                      MUX Switch for USB Type-C
MAX20328B                                                                   Audio Adapter Accessories
Typical Application Circuit (continued)
                                                  MAX20328A/MAX20328B                      VCC
                                                                                      VCC
                                                                                                        AP
                                                                                      SDA
                                                                                                   SDA
                        CC      AUDIO ACCESSORY MODE                     INTERFACE    SCL
           CC                                                                                      SCL
                                DISCONNECT DETECTION                      CONTROL
                                                                                       INT
                                                                                                   INT
                                                        DP/DM SWITCH
                                                   L-IMPEDANCE DETECTION
                                                                                   DP_AP1
                        DP_T
          DP_T                                                                                        USB
                                                                                   DM_AP1           PORT 1
                        DM_T
         DM_T
                                                                                        RA
                                                                                                      USB
                        DP_B                                                                        PORT 2
         DP_B                                                                           LA
                        DM_B
         DM_B
                                                                                   DP_AP2
                                              NEGATIVE VOLTAGE CAPABLE
                                                                                   DM_AP2
                                              ON AUDIO CHANNEL
                                                                                                      CODEC
                                                                                                   RA
                                                       MIC/AGND SWITCH
                                                                                                   LA
                                                        MIC DETECTION
                                                                                      MIC          MIC
      SBU1_MG           SBU1_MG
                                                                                    AGND           AGND
      SBU2_GM           SBU2_GM
                                                                                     GSNS          GSNS
                        MG_SR                                                           TX
                        GM_SR
                                                                                                        AP
                                                                                                   TX
                                                                                        RX         RX
                                                POSITIVE VOLTAGE ONLY
www.maximintegrated.com                                                                     Maxim Integrated │ 41


MAX20328/MAX20328A/                                              MUX Switch for USB Type-C
MAX20328B                                                          Audio Adapter Accessories
Ordering Information                                  Chip Information
                                                      PROCESS: BiCMOS
        PART             TEMP RANGE       PIN-PACKAGE
 MAX20328EWA+            -40°C to +85°C       25 WLP
 MAX20328EWA+T           -40°C to +85°C       25 WLP
 MAX20328AEWA+           -40°C to +85°C       25 WLP
 MAX20328AEWA+T          -40°C to +85°C       25 WLP
 MAX20328BEWA+           -40°C to +85°C       25 WLP
 MAX20328BEWA+T          -40°C to +85°C       25 WLP
+Denotes a lead(Pb)-free/RoHS-compliant package.
T Denotes tape-and-reel
www.maximintegrated.com                                                        Maxim Integrated │ 42


MAX20328/MAX20328A/                                                                                           MUX Switch for USB Type-C
MAX20328B                                                                                                       Audio Adapter Accessories
Revision History
  REVISION           REVISION                                                                                                                           PAGES
                                                                                 DESCRIPTION
  NUMBER                DATE                                                                                                                        CHANGED
        0                3/18        Initial release                                                                                                       —
        1                6/18        Updated Electrical Characteristics table and Typical Operating Characteristics                                   5, 10–12
                                     Updated General Description, Benefits and Features, Typical Operating Characteristics,                        1, 10, 13, 27,
        2                7/18
                                     Bump Configurations, Table 5, Table 14, Table 15, and Ordering Information                                      35, 36, 42
                                     Updated the title,General Description, Absolute Maximum Ratings, Electrical Charac-
                                     teristics, Bump Configurations, Bump Description, Block Diagram, Detail Description,
        3               12/19        Enable, Impedance Detection, Open Cable Check, MIC/GND Detection, I2C Interface,                                    1–43
                                     Serial Addressing, Bus Reset, Format for Reading, Typical Application Circuit and Or-
                                     dering Information sections, and Tables 2, 5–19
For pricing, delivery, and ordering information, please visit Maxim Integrated’s online storefront at https://www.maximintegrated.com/en/storefront/storefront.html.
Maxim Integrated cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim Integrated product. No circuit patent licenses
are implied. Maxim Integrated reserves the right to change the circuitry and specifications without notice at any time. The parametric values (min and max limits)
shown in the Electrical Characteristics table are guaranteed. Other parametric values quoted in this data sheet are provided for guidance.
Maxim Integrated and the Maxim Integrated logo are trademarks of Maxim Integrated Products, Inc.                 © 2019 Maxim Integrated Products, Inc. │ 43


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 MAX20328EWA+ MAX20328AEWA+ MAX20328EWA+T MAX20328AEWA+T MAX20328BEWA+
