Freescale Semiconductor                                                                      Document Number: MC34827
Technical Data                                                                                                 Rev. 3.0, 6/2014
Mini or Micro-USB Interface IC
The 34827 is a dedicated IC for managing charging and signal
                                                                                          34827
multiplexing between a cell phone and its accessory via a 5-pin Mini or
Micro-USB connector. An external power source, such as a dedicated
AC/DC adapter or a standard USB port, is able to charge the battery in
the cell phone via the connector. The 34827 is capable of identifying                       INTERFACE IC
the type of the external power source and selecting one of two battery
charge current levels according to the type. The internal power switch
can protect the phone system against 28 V power supply input. The
34827 is also able to multiplex the 5 pins to support UART and High-
Speed USB 2.0 data communication, mono/stereo-audio/microphone
headset with or without a cord remote control, manufacturing or R/D
test cables and other accessories.
To identify what accessory is plugged into the Mini or Micro-USB                  (PB-FREE)              (PB-FREE)
connector, the 34827 supports various detection mechanisms,                     98ASA00050D            98ASA00037D
                                                                              20-PIN UTQFN-EP        20-PIN UTQFN-EP
including the VBUS detection and ID detection. A high accurate 5-bit
ADC is offered to distinguish the 32 levels of ID resistance and to
identify the button pressed in a cord remote control while an Audio     Applications
Type 1 cable is attached. After identifying the accessory attached, the
                                                                        • Cell phones
34827 configures itself to support the accessory and interrupts a host
via an I2C serial bus for further actions. The 34827 is also able to    • MP3/MP4 players
identify some non-supported accessory, such as video cable, Phone-      • Portable voice recorders
Powered Devices and USB OTG devices. The host controls the 34827        • USB universal charging solution (UCS-OMTP)
via the I2C serial bus. This device is powered using SMARTMOS
technology.                                                             • Supports mini/micro - USB connector
Features                                                                • UART and USB high speed communication
• Automatically identifies the power supply type and sets one of two    • Remote control/accessories IDs
   battery-charge-current levels
• Internal power switch protects the phone system against 28 V power
   supply input
• Supports stereo/mono headset with or without micro phone and
   remote control
• Supports USB or UART test and R/D cables
• High speed USB2.0 compliant
• Supports 32 ID resistance values with a high-accuracy 5-bit ADC
• I2C interface with interrupt to the host
• 10 μA quiescent current in Standby mode
                                                     34827
              BASEBAND
                                               VDDIO             VDD                         Charger
                      GPIO                     INTB
                                                                                     Li+
                                               I2C_SDA
                       I2C                     I2C_SCL
                                               RXD               ISET
                      UART                     TXD
                                               D+                OUT
                    USB XCVR                   D-
                                                                VBUS                                      VBUS
                                               JIG
                     Test Port                 BOOT
                                               SPK_L                ID                                    ID
                      Audio                    SPK_R               DP                                     D+
                                               MIC                 DM                                     D-
                                                                 GND                                      GND
                                                                                           USB CONNECTOR
                                        Figure 1. MC34827 Simplified Application Diagram
© Freescale Semiconductor, Inc., 2011 - 2014. All rights reserved.


1               Orderable Parts
Table 1. Orderable Part Variations
Part Number (1)                                       Temperature (TA)      Package
MC34827A2EP                                                                 3.0 mm X 4.0 mm UTQFN-EP
                                                      -40 to 85 °C
MC34827A1EP                                                                 3.0 mm X 3.0 mm UTQFN-EP
Notes
  1. To order parts in Tape and Reel, add the R2 suffix to the part number.
MC34827
                                                                            Analog Integrated Circuit Device Data
2                                                                                       Freescale Semiconductor


                                                                                           INTERNAL BLOCK DIAGRAM
                                        INTERNAL BLOCK DIAGRAM
                         VDDIO            Reset         OSC            Internal       VDD
                                                                      Supplies
                      I2C_SDA                           VBUS                          VBUS
                                           I2 C         Detect
                                        Interface                        Gate
                      I2C_SCL                                         Drive and
                                                                         OCP
                                        Interrupt      Register                       OUT
                           INTB                          and
                                                        State
                                           JIG         Machine
                                                                                      ISET
                             JIG          Logic
                          BOOT           Output
                            RxD           UART                                        DP
                                        Switches
                            TxD                                                       DM
                                                                                      ID
                             D+           USB
                                        Switches                       ID ADC
                              D-
                        SPK_R
                                          Audio                           ID
                         SPK_L                                          Detect
                                        Switches
                            MIC                           VBUS                        GND
                                  Figure 2. MC34827 Simplified Internal Block Diagram
                                                                                                            MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                          3


PIN CONNECTIONS
                                                                             PIN CONNECTIONS
                                                     VBUS
                                                                                                                                          VBUS
                                            DM
                                                                                                                                                  ISET
                              ID    DP
                                                                                                                    ID       DP    DM
                              20    19      18       17
                                                                                                                       20    19    18     17      16
             SPK_R      1                                   16    ISET
                                                                                                    SPK_R       1                                        15   OUT
             SPK_L      2                                   15    OUT
                                                                                                    SPK_L       2                                        14   I2C_SCL
                MIC     3                  21               14    I2C_SCL                                                          21
                                      GND                                                                MIC    3                 GND                    13   I2C_SDA
                  D+    4                                   13    I2C_SDA
                                                                                                         D+     4                                        12   INTB
                  D-
                        5                                   12    INTB
                                                                                                          D-    5                                        11   VDD
                RxD     6                                   11    VDD
                                                                                                                       6     7     8      9       10
                              7     8       9        10
                                                                                                                             TxD
                                                                                                                                   BOOT   VDDIO
                                                                                                                       RxD                        JIG
                              TxD
                                    BOOT    VDDIO
                                                     JIG
    (A). Pinout of 34827 Using a 3.0 mm X 4.0 mm 20 Pin. UTQFN Package                     (B). Pinout of 34827 Using a 3.0 mm X 3.0 mm 20 Pin. UTQFN Package
                            (Transparent Top View)                                                                 (Transparent Top View)
                                                                     Figure 3. MC34827 Pin Connections
Table 2. MC34827 Pin Definitions
  A functional description of each pin can be found in the Functional Pin Description section beginning on page 14.
Pin Number         Pin Name          Pin Function                   Formal Name                                               Definition
        1           SPK_R                       Input            Speaker right channel    Right channel input of the speaker signals
        2           SPK_L                       Input            Speaker left channel     Left channel input of the speaker signals
        3              MIC                  Output                Microphone output       Microphone output to the baseband of the cell phone system
        4               D+                          IO              D+ of the USB         D+ line of the USB transceiver
                                                                     transceiver
        5               D-                          IO               D- of the USB        D- line of the USB transceiver
                                                                      transceiver
        6              RxD                  Output                  UART receiver         Receive line of the UART
        7              TxD                      Input              UART transmitter       Transmit line of the UART
        8            BOOT                   Output                  BOOT indicator        Push-pull output to indicate the boot switch setting of the jig cable
        9           VDDIO                       Input              IO power supply        IO supply voltage. This is the internal supply voltage for the BOOT and
                                                                                          INTB outputs. It can supply the external pull-up voltages for the JIG pin
                                                                                          and the I2C bus outside the 34827. This pin also functions as the
                                                                                          hardware reset to the IC.
       10              JIG                  Output                   JIG indicator        Open-drain output to indicate the insertion of a jig cable
       11              VDD                      Input                Power supply         Supply input
       12              INTB                 Output                  Interrupt output      Push-pull interrupt output
       13          I2C_SDA                          IO                   2
                                                                         I C Data         Data line of the I2C interface
       14          I2C_SCL                      Input                   I2C Clock         Clock line of the I2C interface
       15              OUT                  Output                   Power output         The output of the power MOSFET pass switch
       16              ISET                 Output               Charge current setting   Open-drain output to set the charger current
       17              VBUS                     Input             VBUS power supply       Mini-USB VBUS line
MC34827
                                                                                                                             Analog Integrated Circuit Device Data
4                                                                                                                                        Freescale Semiconductor


                                                                                                             PIN CONNECTIONS
Table 2. MC34827 Pin Definitions (continued)
   A functional description of each pin can be found in the Functional Pin Description section beginning on page 14.
 Pin Number     Pin Name    Pin Function     Formal Name                                     Definition
      18           DM             IO         D- of the USB     D- line of the mini-USB connector
                                               connector
      19           DP             IO         D+ of the USB     D+ line of the mini-USB connector
                                               connector
      20            ID          Input        ID of the USB     ID pin of the mini-USB connector
                                               connector
      21          GND          Ground           Ground         Ground
                                                                                                                      MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                     5


ELECTRICAL CHARACTERISTICS
MAXIMUM RATINGS
                                               ELECTRICAL CHARACTERISTICS
                                                              MAXIMUM RATINGS
Table 3. Maximum Ratings
    All voltages are with respect to ground, unless otherwise noted. Exceeding these ratings may cause a malfunction or
permanent damage to the device.
                                        Ratings                                          Symbol                 Value                Unit
ELECTRICAL RATINGS
  Input Voltage Range                                                                                                                  V
     VBUS Pin                                                                              VBUS               -0.3 to 28
     OUT Pin                                                                               VOUT                -0.3 to 8
     VDD Pin                                                                               VDD                 -0.3 to 6
     VDDIO Pin(1)                                                                         VDDIO               -0.3 to 4.2
     SPK_L, SPK_R, DP and DM Pins                                                                          -2.0 to VDD+0.3
     All Other Pins                                                                                           -0.3 to 5.5
  ESD Voltage    (2)                                                                                                                   V
                                                                                           VESD
     Air Gap Discharge Model for VBUS, DP, DM, ID Pins(3)                                                      ±15000
     Human Body Model (HBM) for VBUS, DP, DM, ID Pins                                                           ±8000
     Human Body Model (HBM) for all other pins                                                                  ±2000
     Machine Model (MM)                                                                                          ±200
THERMAL RATINGS
  Operating Temperature                                                                                                               °C
     Ambient                                                                                TA                -40 to +85
     Junction                                                                               TJ                    150
  Storage Temperature                                                                      TSTG              -65 to +150              °C
                        (4)
  Thermal Resistance                                                                                                                °C/W
     Junction-to-Case                                                                      RθJC                     6
     Junction-to-Ambient                                                                   RθJA                    45
  Peak Package Reflow Temperature During Reflow (5), (6)                                  TPPRT                 Note 6                °C
Notes
    1. The VDDIO pin CANNOT exceed a maximum voltage of 4.2 V, else it will suffer permanent damage.
    2. ESD testing is performed in accordance with the Human Body Model (HBM) (CZAP = 100 pF, RZAP = 1500 Ω), and the Machine Model
         (MM) (CZAP = 200 pF, RZAP = 0 Ω).
    3.   Need external ESD protection diode array to meet IEC1000-4-2 15000V air gap discharge requirement (CZAP = 150 pF, RZAP = 330 Ω).
    4.   Device mounted on the Freescale EVB test board per JEDEC DESD51-2.
    5.   Pin soldering temperature limit is for 10 seconds maximum duration. Not designed for immersion soldering. Exceeding these limits may
         cause malfunction or permanent damage to the device.
    6.   Freescale’s Package Reflow capability meets Pb-free requirements for JEDEC standard J-STD-020C. For Peak Package Reflow
         Temperature and Moisture Sensitivity Levels (MSL), go to www.freescale.com, search by part number, e.g. remove prefixes/suffixes and
         enter the core ID to view all orderable parts. (i.e. MC33xxxD enter 33xxx), and review parametrics.
MC34827
                                                                                                     Analog Integrated Circuit Device Data
6                                                                                                                     Freescale Semiconductor


                                                                                                       ELECTRICAL CHARACTERISTICS
                                                                                              STATIC ELECTRICAL CHARACTERISTICS
                                             STATIC ELECTRICAL CHARACTERISTICS
Table 4. Static Electrical Characteristics
   Characteristics noted under conditions VDD = 3.6 V, VBUS = 5.0 V, VDDIO = 3.0 V, -40 °C ≤ TA ≤ 85 °C (see Figure 1), unless
otherwise noted. Typical values noted reflect the approximate parameter means at VDD = 3.6 V and TA = 25 °C under nominal
conditions, unless otherwise noted.
                              Characteristic                                Symbol          Min          Typ          Max        Unit
POWER INPUT
 Recommended Operating Voltage Range for VDD Supply Voltage                    VDD           2.7           -           5.5         V
 VDD Power-on Reset Threshold                                              VVDDPOR
    Rising edge                                                                               -           2.5         2.65         V
    Hysteresis                                                                                -          100             -        mV
 VDD Quiescent Current                                                         IVDD                                               μA
    In Standby mode                                                                           -           9.0           12
    In Power Save mode                                                                        -           12            18
    When accessory is attached & INT_MASK = ‘1’                                               -          125           160
    In Active mode (VDD < VBUS)                                                               -          550           650
    In Active mode (VDD > VBUS)
                                                                                              -          850          1000
 VBUS Supply Voltage                                                          VBUS           2.8          5.0           28         V
 VBUS Detection Threshold Voltage                                         VBUS_DET
    Rising edge                                                                               -          2.65         2.80         V
    Hysteresis                                                                                -          150             -        mV
 VBUS Supply Quiescent Current                                                IVBUS
    In VBUS power mode                                                                        -            -           1.2        mA
    In Active mode - Dedicated Charger                                                        -            -           1.2        mA
    In Active mode - Audio or TTY(7) (VBUS < VDD)                                             -            -           0.5        μA
 VBUS Over-voltage Protection Threshold                                   VBUS_OVP
    Rising edge                                                                              6.8          7.0          7.2         V
    Hysteresis                                                                                -          150             -        mV
 VBUS Over-current Protection                                              IBUS_OCP
    Triggering threshold (at onset of OTP shutoff)                                           1.2          1.8          2.2         A
 Over-temperature Protection Threshold                                        TOTP                                                °C
    Rising threshold                                                                        115          130           145
    Falling threshold                                                                         -           95             -
 VDDIO Supply Voltage                                                        VDDIO          1.65           -           3.6         V
SWITCH
 ISET Open-drain Output MOSFET
    On resistance (loaded by 3.0 mA current)                                  RISET           -            -           100         Ω
    Leakage current (when the MOSFET is off at 5.0 V bias voltage)         IISET_OFF          -            -           0.5        μA
 OUT Pin Discharge MOSFET(16)
    On resistance (loaded by 3.0 mA current)                              ROUT_DISC           -            -           100         Ω
    Leakage current (when the MOSFET is off at 5.0 V bias voltage)         IOUT_OFF           -           0.5            -        μA
Notes
   7. This is an important specification because when an audio accessory is attached, the VBUS line is connected to the microphone. The
        quiescent current will affect the bias of the microphone.
   8. The OUT pin discharge MOSFET is shown in Figure 20. This MOSFET will be turned on when the power MOSFET is off.
                                                                                                                                 MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                                 7


ELECTRICAL CHARACTERISTICS
STATIC ELECTRICAL CHARACTERISTICS
Table 4. Static Electrical Characteristics (continued)
   Characteristics noted under conditions VDD = 3.6 V, VBUS = 5.0 V, VDDIO = 3.0 V, -40 °C ≤ TA ≤ 85 °C (see Figure 1), unless
otherwise noted. Typical values noted reflect the approximate parameter means at VDD = 3.6 V and TA = 25 °C under nominal
conditions, unless otherwise noted.
                               Characteristic                         Symbol         Min         Typ        Max         Unit
  Power MOSFET                                                         RPSW                                              mΩ
     On resistance (when VBUS = 5.0 V, TA< 50 °C)                                      -         200        250
  SPK_L and SPK_R Switches                                                                                                Ω
     On resistance (20 Hz to 470 kHz)                                RSPK_ON           -          1.6        3.0
     Matching between channels                                     RSPK_ONMCT          -         0.12       0.25
     On resistance flatness (from -1.2 V to 1.2 V)                 RSPK_ONFLT          -         0.01       0.05
  D+ and D- Switches                                                                                                      Ω
     On resistance (0.1 Hz to 240 MHz)                               RUSB_ON           -           -         5.0
     Matching between channels                                     RUSB_ONMCT          -          0.1        0.5
     On resistance flatness (from 0.0 V to 3.3 V)                  RUSB_ONFLT          -         0.02        0.1
  RxD and TxD Switches                                                                                                    Ω
     On resistance                                                   RUART_ON          -           -         60
     On resistance flatness (from 0.0 V to 3.3 V)                  RUART_ONFLT         -           -         5.0
  MIC Switches                                                                                                            Ω
     On resistance (at below 2.3 V MIC bias voltage)                  RMIC_ON          -           -        100
     On resistance flatness (from 1.8 V to 2.3 V)                   RMIC_ONFLT         -           -         5.0
  Pull-down Resistors between SPK_L or SPK_R Pins to GND            RPD_AUDIO          -         100          -          kΩ
  Signal Voltage Range                                                                                                    V
     SPK_L, SPK_R,                                                                   -1.5          -         1.5
     D+, D-, RxD, TxD, MIC                                                           -0.3          -         3.6
                                                   (9)
  PSRR - From VDD (100 mVrms) to DP/DM Pins                           VA_PSRR                                            dB
     20 Hz to 20 kHz with 32/16 Ω load.                                                -           -         -60
  Total Harmonic Distortion(9)                                          THD                                              %
     20 Hz to 20 kHz with 32/16 Ω load.                                                -           -        0.05
  Crosstalk between Two Channels(9)                                    VA_CT                                             dΒ
     20 Hz to 20 kHz with 32/16 Ω load.                                                -           -         -50
  Off-Channel Isolation(9)                                             VA_ISO                                            dB
     Less than 1.0 MHz                                                                 -           -        -100
POWER SUPPLY TYPE IDENTIFICATION
  Data Source Voltage                                                VDAT_SRC                                             V
     Loaded by 0~200 μA                                                               0.5         0.6        0.7
  Data Source Current                                                IDAT_SRC          0           -        200          μA
  Data Detect Voltage                                                VDAT_REF         0.3        0.35        0.4          V
  Car Kit Detect Voltage                                              VCR_REF         0.8         0.9        1.0          V
  Data Sink Current                                                  IDAT_SINK                                           μA
     DM pin is biased between 0.15 to 3.6 V                                           65         100        135
  DP, DM Pin Capacitance                                              CDP/DM           -          8.0         -          pF
Notes
   9. Not tested. Guaranteed by design.
MC34827
                                                                                          Analog Integrated Circuit Device Data
8                                                                                                     Freescale Semiconductor


                                                                                              ELECTRICAL CHARACTERISTICS
                                                                                       STATIC ELECTRICAL CHARACTERISTICS
Table 4. Static Electrical Characteristics (continued)
   Characteristics noted under conditions VDD = 3.6 V, VBUS = 5.0 V, VDDIO = 3.0 V, -40 °C ≤ TA ≤ 85 °C (see Figure 1), unless
otherwise noted. Typical values noted reflect the approximate parameter means at VDD = 3.6 V and TA = 25 °C under nominal
conditions, unless otherwise noted.
                              Characteristic                          Symbol         Min         Typ        Max         Unit
 DP, DM Pin Impedance                                                 RDP/DM                                            MΩ
    All switches are off (Switch_Open = 0)                                             -          50          -
ID DETECTION
 ID FLOAT Threshold                                                    VFLOAT                                            V
    Detection threshold                                                                -         2.3          -
 Pull-up Current Source                                                   IID                                           μA
    When ADC Result is 1xxxx                                                          1.9        2.0         2.1
    When ADC Result is 0xxxx                                                         30.4         32        33.6
 Video Cable Detection
    Detection current                                                   IVCBL         1.0        1.2         1.4        mA
    Detection voltage low threshold                                   VVCBL_L          -          50          -         mV
    Detection voltage high threshold                                 VVCBL_H           -         118          -         mV
LOGIC INPUT AND OUTPUT
 VDDIO Logic Input Threshold
    Input LOW threshold                                              VDDIO_IL          -           -         0.5         V
    Input HIGH threshold                                             VDDIO_IH         1.5          -          -          V
 Push-Pull Logic Output (INTB and BOOT)                                                                                  V
    Output HIGH level (loaded by 1.0 mA current)                         VOH      0.7VDDIO         -          -
    Output LOW level (loaded by 4.0 mA current)                          VOL           -           -         0.4
 Open-Drain Logic Output (JIG)                                         VJIGOL                                            V
    Output LOW level (loaded by 4.0 mA current)                                        -           -         0.4
I2C INTERFACE
 Low Voltage on I2C_SDA, I2C_SCL Inputs                                VI2C_IL       -0.2          -      0.3VDDIO       V
 High Voltage on I2C_SDA, I2C_SCL Inputs                               VI2C_IH    0.7VDDIO         -       VDDIO         V
 Low Voltage on I2C_SDA Output                                        VI2C_OL          -           -         0.4         V
 Current Load when I2C_SDA Outputs Low Voltage                         II2C_OL         0           -         4.0        mA
 Leakage Current on I2C_SDA, I2C_SCL Outputs                         II2C_LEAK       -1.0          -         1.0        μA
                                                 (10)
 Input Capacitance of the I2C_SDA, I2C_SCL Pins                        CI2CIN          -           -         8.0         pF
Notes
  10. Not tested. Guaranteed by design.
                                                                                                                       MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                       9


 ELECTRICAL CHARACTERISTICS
 DYNAMIC ELECTRICAL CHARACTERISTICS
                                             DYNAMIC ELECTRICAL CHARACTERISTICS
Table 5. Dynamic Electrical Characteristics
   Characteristics noted under conditions VDD = 3.6 V, VBUS = 5.0 V, VDDIO = 3.0 V, -40 °C ≤ TA ≤ 85 °C (see Figure 1), unless
otherwise noted. Typical values noted reflect the approximate parameter means at VDD = 3.6 V and TA = 25 °C under nominal
conditions, unless otherwise noted.
                                   Characteristic                                  Symbol     Min          Typ          Max        Unit
POWER ON AND OFF DELAY
 VDD Power-on Reset Threshold                                                                                                       ms
     VDD rising deglitch time                                                          tD2    7.0           8.5         10.2
     VDD falling deglitch time                                                   tVDDDGT_F    1.7           2.5          3.5
 VBUS Detection Threshold Deglitch Time (for Both Rising and Falling Edges)      tVBUS_DET    3.5           4.5          5.7        ms
 VBUS Over-voltage Protection                                                                                                       μs
                        (11)                                                        tOVPD       -             -          2.0
     Protection delay
     Falling-edge deglitch time(12)                                              tOVPDGT_F      -            25            -
 VBUS Over-temperature Protection
     MOSFET turning off speed when OTP occurs(13)                                  tOTP_TO      -             -          0.5       A/μs
     Deglitch time                                                                tOTP_DGT      -            15            -        μs
OSCILLATOR
 Oscillation Frequency                                                                fOSC     88           100         112        kHz
SWITCHING DELAY
 t1 - t0 (td in Figure 17, Default Value is TD = 0100)                                  td                                          ms
     TD = 0000                                                                                  -           100            -
     TD = 0001                                                                                  -           200            -
     TD = 0010                                                                                  -           300            -
     TD = 0011                                                                                  -           400            -
     TD = 0100
                                                                                                -           500            -
     ...
                                                                                               ...           ...          ...
     TD = 1111
                                                                                                -          1600            -
 t2 - t1(Figure 17)                                                                    tSW     20             -            -        ms
 t3 - t2(Figure 17)                                                                    tSW     20             -            -        ms
 t4 - t1(Figure 17)                                                                    tSW    100             -            -        ms
 t6 - t3(Figure 17)                                                                    tSW    100             -            -        ms
ID DETECTION
 ID FLOAT Detection Deglitch Time                                                 tID_FLOAT     -            20            -        ms
 Video Cable Detection Time (Video Cable Detection Current Source On Time)           tVCBL      -            20            -        ms
ADC
 ADC Conversion Time                                                                tCONV       -           1.0            -        ms
Notes
  11. The protection delay is defined as the interval between VBUS voltage rising above the OVP rising threshold, and the OUT pin voltage
          dropping below the OVP rising threshold voltage for a VBUS ramp rate of >1.0 V/μs.
  12. The OVP deglitch timer is only for the falling edge threshold.
  13. Not tested. Guaranteed by design.
MC34827
                                                                                                  Analog Integrated Circuit Device Data
10                                                                                                               Freescale Semiconductor


                                                                                              ELECTRICAL CHARACTERISTICS
                                                                                     DYNAMIC ELECTRICAL CHARACTERISTICS
Table 5. Dynamic Electrical Characteristics
   Characteristics noted under conditions VDD = 3.6 V, VBUS = 5.0 V, VDDIO = 3.0 V, -40 °C ≤ TA ≤ 85 °C (see Figure 1), unless
otherwise noted. Typical values noted reflect the approximate parameter means at VDD = 3.6 V and TA = 25 °C under nominal
conditions, unless otherwise noted.
                                Characteristic                           Symbol        Min        Typ       Max         Unit
REMOTE CONTROL
 Key Press Comparator Debounce Time                                    tRMTCON_DG        -         20         -          ms
RESET TIMING
 Device Reset Time                                                       tRSTDVC         -         10         -          μs
 VDDIO Logic Input Timing                                                                                                μs
    Rising-edge deglitch time                                         tVDDIODGT_R      660        875       1130
    Falling-edge deglitch time                                         tVDDIODGT_F     105        125        150
 VDDIO Reset Timing                                                                                                      μs
    VDDIO reset pulse width                                             tRSTVDDIO      150          -         -
 I2C Reset Timing                                                                                                        ms
    I2C reset pulse width                                                 tRSTI2C      13.5         -         -
    I2C_SDA/I2C_SCL concurrent low time without causing reset            tNRSTI2C        -          -        8.8
I2C INTERFACE(14)
 SCL Clock Frequency                                                        fSCL         -          -        400        kHz
 Bus Free Time between a STOP and START Condition                           tBUF        1.3         -         -          μs
 Hold Time Repeated START Condition                                       tHD:STA       0.6         -         -          μs
 Low Period of SCL Clock                                                    tLOW        1.3         -         -          μs
 High Period of SCL Clock                                                  tHIGH        0.6         -         -          μs
 Setup Time for a Repeated START condition                                tSU:STA       0.6         -         -          μs
 Data Hold Time                                                           tHD:DAT        0          -         -          μs
 Data Setup Time                                                          tSU:DAT      120          -         -          ns
 Rising Time of Both SDA and SCL Signals                                      tR     20+0.1CB       -         -          ns
 Falling Time of Both SDA and SCL Signals                                     tF     20+0.1CB       -         -          ns
 Setup Time for STOP Condition                                            tSU:STO       0.6         -         -          μs
 Input Deglitch Time (for Both Rising and Falling Edges)                    tDGT        55          -        300         ns
Notes
  14. Not tested. Guaranteed by design.
                                                                                                                       MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                      11


ELECTRICAL CHARACTERISTICS
ELECTRICAL PERFORMANCE CURVES
                                                                      ELECTRICAL PERFORMANCE CURVES
     SPK Switch On-Resistance (Ω)                                                                MIC Switch On-Resistance (Ω)
                                        2.2                                                                                     90
                                                                 Temperature =85°C                                                                      Temperature = 85°C
                                        2.0                                                                                     80
                                        1.8                      Temperature =25°C                                              70
                                                                                                                                                        Temperature = 25°C
                                                                                                                                60
                                        1.6
                                                                                                                                50                      Temperature = -40°C
                                        1.4                      Temperature = -40°C
                                                                                                                                40
                                         -1.5   -1.0    -0.5   0.0   0.5     1.0       1.5                                       1.8     1.9      2.0     2.1    2.2          2.3
                                                        Input Voltage (V)                                                                      Input Voltage (V)
 Figure 4. SPK Switch On-resistance vs Input Voltage                                               Figure 7. MIC Switch On-resistance vs Input Voltage
     USB Switch On-Resistance (Ω)
                                        4.5                                                                                     9.6
                                                                                             VDD Supply Current (μA)
                                                                 Temperature = 85°C
                                        4.0                                                                                     9.4
                                        3.5                      Temperature = 25°C
                                                                                                                                9.2
                                        3.0                                                                                     9.0
                                                                 Temperature = -40°C
                                        2.5                                                                                     8.8
                                        2.0                                                                                     8.6
                                          0.0   0.5    1.0 1.5 2.0 2.5        3.0      3.5                                        2.5   3.0    3.5 4.0 4.5           5.0      5.5
                                                         Input Voltage (V)                                                                     VDD Voltage (V)
 Figure 5. USB Switch On-resistance vs Input Voltage                                                      Figure 8. VDD Supply Current vs Supply Voltage In
                                                                                                                           Standby Mode
        UART Switch On-Resistance (Ω)
                                        45
                                                                                                                                11
                                        40                       Temperature = 85°C
                                                                                             VDD Current (μA)
                                                                                                                                10
                                        35
                                                                 Temperature = 25°C                                              9
                                        30
                                                                                                                                 8
                                        25                       Temperature = -40°C
                                                                                                                                 7
                                        20
                                         0.0    0.5    1.0 1.5 2.0 2.5        3.0      3.5                                       -40    -20     0   20    40    60           80
                                                        Input Voltage (V)                                                                      Temperature (°C)
 Figure 6. UART Switch On-resistance vs Input Voltage
                                                                                                                      Figure 9. VDD Supply Current vs Temperature In
                                                                                                                                      Standby Mode
MC34827
                                                                                                                                               Analog Integrated Circuit Device Data
12                                                                                                                                                         Freescale Semiconductor


                                                                                                            ELECTRICAL CHARACTERISTICS
                                                                                                        ELECTRICAL PERFORMANCE CURVES
                             900
  VBUS Supply Current (μA)
                                                                                          9.0
                             880
                                                                                          7.5
                             860
                                                                        OUT Voltage (V)
                                                                                          6.0
                             840
                             820                                                          4.5
                             800                                                          3.0
                             780                                                          1.5
                             760
                               -40   -20    0    20   40      60   80                     0.0
                                                                                            0.0   1.5     3.0  4.5   6.0  7.5      9.0
                                           Temperature (°C)                                              VBUS Voltage (V)
       Figure 10. VBUS Supply Current vs Temperature In                                   Figure 11. OUT Voltage vs VBUS Voltage
                      VBUS Power Mode
                                                                                                                                MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                                  13


 FUNCTIONAL DESCRIPTION
 INTRODUCTION
                                              FUNCTIONAL DESCRIPTION
                                                         INTRODUCTION
   The 34827 is used to identify what is attached to the Mini    resistance. Each level of resistance can be assigned to an
or Micro-USB connector, configure the signal paths between       accessory or a button in a cord remote controller. Some non-
the phone baseband and the 5-pin connector accordingly,          supported accessories, such as video cable, Phone-Powered
and then inform the baseband of the attachment. It also          Devices, USB OTG devices and so on, can also be identified.
detects the detachment of accessory and then informs the         For 34827, the mapping relationship between the ADC
baseband.                                                        values and the types of accessories is fixed and the detailed
   To identify what is plugged into the Mini or Micro-USB        information is given in section Application Information.
connector, the 34827 supports various detection                     The detachment of accessory is also monitored by both of
mechanisms, including ID detection and VBUS detection.           the ID detector and the VBUS detector.
The detection flow is initiated either by the change of VBUS        The host IC can control the 34827 via an I2C serial bus.
pin voltage or by the change of ID pin voltage. A high
accurate 5-bit ADC is offered to distinguish the 32 levels of ID
                                               FUNCTIONAL PIN DESCRIPTION
SPEAKER RIGHT CHANNEL (SPK_R)                                    POWER SUPPLY (VDD)
   Right channel of the baseband speaker output.                    Power supply input. Bypass to ground with a 1.0 μF
                                                                 capacitor.
SPEAKER LEFT CHANNEL (SPK_L)
   Left channel of the baseband speaker output.                  INTERRUPT OUTPUT (INTB)
                                                                    Active low and VDDIO referenced push-pull output. When
MICROPHONE OUTPUT (MIC)                                          the 34827 detects a change of external cable status, this pin
                                                                 outputs low voltage to interrupt the baseband. INTB returns
   Microphone output to the baseband.
                                                                 to high voltage once all the interrupt bits are read.
D+ OF THE USB TRANSCEIVER (D+)
                                                                 DATA LINE OF THE I2C INTERFACE (I2C_SDA)
   D+ line of the USB transceiver.
                                                                    Data line of the I2C interface. I2C_SDA together with
                                                                 I2C_SCL is one of hardware reset input sources.
D- OF THE USB TRANSCEIVER (D-)
   D- line of the USB transceiver.                               CLOCK LINE OF THE I2C INTERFACE(I2C_SCL)
                                                                    Clock line of the I2C interface. I2C_SCL together with
UART RECEIVER (RXD)                                              I2C_SDA is one of hardware reset input sources.
   Receiver line of the UART.
                                                                 POWER OUTPUT (OUT)
UART TRANSMITTER (TXD)                                              Output of the power MOSFET in the 34827. This pin is
   Transmitter line of the UART.                                 connected to a charger. Bypass to ground with a 1.0 μF
                                                                 capacitor.
BOOT INDICATOR (BOOT)
   VDDIO referenced push-pull output to indicate the boot        CHARGE CURRENT SETTING (ISET)
switch setting of jig cables.                                       Open-drain output to set the charge current for a charger
                                                                 according to the VBUS power supply type.
IO POWER SUPPLY (VDDIO)
   Power supply input for the logic IO interface. Generally the  VBUS POWER SUPPLY (VBUS)
IO power supply voltage should be the same as the IO                Mini-USB VBUS input. Bypass this pin to ground with a
voltage used in the cell phone system. VDDIO is also one of      less than 10nF capacitor. When the attached accessory is an
hardware reset input sources. A falling edge at this pin will    audio kit, this pin is the microphone input to the 34827.
reset the 34827.
                                                                 D- OF THE USB CONNECTOR (DM)
JIG INDICATOR (JIG)                                                 D- line of the mini-USB connector.
   Open-drain output to indicate the insertion of a jig cable.
MC34827
                                                                                           Analog Integrated Circuit Device Data
14                                                                                                     Freescale Semiconductor


                                                      FUNCTIONAL DESCRIPTION
                                                   FUNCTIONAL PIN DESCRIPTION
D+ OF THE USB CONNECTOR (DP)          GROUND (GND)
  D+ line of the mini-USB connector.   Ground.
ID OF THE USB CONNECTOR (ID)
  ID pin of the mini-USB connector.
                                                                      MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                     15


 FUNCTIONAL DESCRIPTION
 FUNCTIONAL INTERNAL BLOCK DESCRIPTION
                                      FUNCTIONAL INTERNAL BLOCK DESCRIPTION
                                                       Internal
                                                                 Logic &
                                           I2C          Power                     VBUS
                                                                   State
                                        Interface       Supply                   Detect
                                                                 Machine
                                                        Switch
                                          Test
                                                         Array   ID ADC         ID Detect
                                        Interface
                                      Figure 12. MC34827 Functional Internal Block Diagram
LOGIC AND STATE MACHINE                                           INTERNAL POWER SUPPLY
   Internal state machine executes the detection and                 This block outputs power supply for the internal digital IO
identification flow and turns on or off the signal switches       interface and also outputs high power supply for all internal
according to the identification result.                           blocks and for the external battery charger. The input power
                                                                  supplies of the block include VBUS, VDD and VDDIO.
I2C INTERFACE
   I2C interface circuit is an I2C slave device. It receives      VBUS DETECT
commands and data from an I2C master device and transfers            This block detects whether the power supply at VBUS pin
them to internal registers of 34827. It also transfers the data   is present.
from the registers of 34827 to the I2C master device.
                                                                  ID ADC
TEST INTERFACE                                                       An internal 5-bit ADC measures the resistance at the ID
   Test interface connects to a test block of the baseband.       pin. The result is sent to the Logic and State Machine block
                                                                  to determine what accessory is attached.
SWITCH ARRAY
   Switch array consist of switches for UART, USB and audio       ID DETECT
signal channels.                                                     This block generates current sources and other signals to
                                                                  the ID pin to help the ID ADC block measure the ID
                                                                  resistance.
MC34827
                                                                                           Analog Integrated Circuit Device Data
16                                                                                                     Freescale Semiconductor


                                                                                                        FUNCTIONAL DEVICE OPERATION
                                                                                                                  OPERATIONAL MODES
                                         FUNCTIONAL DEVICE OPERATION
                                                      OPERATIONAL MODES
   According to the status of the VBUS and VDD power                       Power Save mode. The mode-transition diagram is given in
supplies, the 34827 has five operational modes: Power Down                 Figure 13. Details about the mode-transition conditions can
mode, VBUS Power mode, Standby mode, Active mode, and                      be found in Figure 14.
                                                                VBUS power down
                                                Power                                     VBUS
                                                Down                                      Power
                                                                 VBUS power up
                                                                                             VDD > VPOR
                                                            VDD < VPOR       VDD > VPOR
                                        VDD < VPOR
                                                         I2C resets ACTIVE bit or
                                                         detachment of accessory
                                               Active                                    Standby
                                                                       ID detection or
                                                                     VBUS detection
                                                               I2C or detection
                                                       2         of no activity
                                                      I C or
                                                   detection of                     Detachment
                                                     activity                      of accessory
                                                                      Power
                                                                       Save
                                                 Figure 13. Mode Transition Diagram
POWER DOWN MODE                                                            the Device Wake Up bits in Timing Set 1 register (refer to
   The Power Down mode is when neither the VDD nor the                     Register Map section for more register information).
VBUS is powered. In this mode, the IC does not respond to                      In Standby mode, all signal switches and the power
any accessory attachment except for a power supply. When                   MOSFET are turned off. The ISET, JIG pins output high
an external power supply is plugged, the 34827 enters the                  impedance and BOOT pin outputs low logic voltage.
VBUS Power mode.                                                               If detecting an accessory attachment, the 34827 moves to
                                                                           the Active mode for further accessory identification.
VBUS POWER MODE
   34827 enters the VBUS Power mode when VBUS is                           ACTIVE MODE
powered but VDD is not. The 34827 supports regular USB                         The Active mode starts when an accessory is plugged with
port, dedicated charger, USB charger, 5 wire charger,                      VDD powered. The 34827 identifies the accessory,
charger on the A/V cable and any other accessory with                      configures the signal paths according to the identification
powered VBUS voltage. In VBUS Power mode, the internal                     result and interrupts the baseband for further actions.
power MOSFET is turned on to power the charger IC,                         Different functions will be enabled according to the
charging the battery in the phone. ISET pin outputs high                   identification result. The quiescent current of VDD in Active
impedance to select a lower charge current level for the                   mode is dependent on the type of attached accessory. The
charger IC.                                                                signal switches can also be turned on manually. See more
                                                                           information in section Control Functions.
STANDBY MODE                                                                   Mode can be changed from Active to Standby either by
   The Standby mode is when the VDD voltage is higher than                 accessory detachment or by I2C programming.
the POR (Power-On Reset) threshold and no accessory is
attached. In this mode only ID detection circuit, I2C interface,           POWER SAVE MODE
and internal registers are powered in order to minimize the                    The Power Save mode is contributing only for the
quiescent current of VDD. The ID detection circuit samples                 accessory of Audio Type 1 or TTY. The 34827 enters into
the status of ID line in a period which can be programmed by
                                                                                                                                 MC34827
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                               17


 FUNCTIONAL DEVICE OPERATION
 POWER-UP
Power Save mode to minimize the operating current when            VDD, or a hardware reset of VDDIO input, or a hardware
Audio Type 1 or TTY accessory is attached but not used. For       reset of I2C inputs occurs, and it will be cleared when it is read
example, when the Audio Type 1 accessory is attached and          by I2C. The ACTIVE bit and the PSAVE bit together indicate
the cell phone is not in audio playing mode, the baseband can     the device mode according to the relationship shown in
move the 34827 to the Power Save mode via the I2C                 Table 6. When the device is in VBUS Power mode, registers
programming. The 34827 can also automatically switch to           are not powered up.
Power Save mode when no activity is detected on the SPK_R             The ACTIVE bit and PSAVE bit are of R/W type. The
or SPK_L pins for a period which can be programmed by the         baseband can move the device mode to Standby mode
Activity Idle Detection Time bits in Timing Set 1 register. The   manually by writing 0x00 to the Device Mode register via I2C.
power consumption in Power Save mode approximates that            If an accessory is still attached during the operation, the
in Standby mode.                                                  accessory identification flow shown in Figure 14 can be re-
    The 34827 can quit the Power Save mode to Active mode         started.
by I2C programming or automatically when detecting signal
activity. The configuration of the 34827 before switching to
the Power Save mode is resumed. The mode can also be                       Table 6. The Device Modes vs. the Register Bits
changed from Power Save mode directly to Standby mode                          PSAVE            ACTIVE            MODE
due to the accessory detachment.
                                                                                  0               0               Standby
DEVICE MODE REGISTER                                                              0               1                Active
    The PSAVE bit, ACTIVE bit and RST bit in Device Mode                          1               1             Power Save
register hold the information of the device operational mode.
The RST bit, which is of R/C type, indicates whether a reset                      1               0              Undefined
has occurred. The RST is set when a Power-on Reset of
                                                            POWER-UP
    The 34827 has four possible power-up scenarios                SCENARIO 2: VBUS = HIGH AND VDD IS
depending on which of the VDD and the VBUS is powered             POWERED UP (VBUS POWER MODE TO STANDBY
first. The four scenarios correspond to the following four        MODE TRANSITION)
mode transitions (refer to Figure 14):
                                                                      If the VBUS is already powered up, when VDD is powered,
   1. From Power Down to VBUS Power: VBUS is                      the device moves from the VBUS Power mode to the Standby
        powered up when VVDD < VVDDPOR (VDD POR                   mode and then quickly move to the VBUS detection flow of
        threshold)                                                the Active mode to identify the accessory, as shown in
   2. From VBUS Power to Standby: VBUS is already                 Figure 14.
        powered when the VDD rises above its POR threshold            After VDD is powered up, the 34827 starts up the internal
   3. From Power Down to Standby: VDD is powered up               supplies. The POR resets all register bits. The power
        when VVBUS < VVBUSPOR (VBUS POR threshold)                MOSFET remains on during the reset process.
   4. From Standby to Active: VDD is already powered
                                                                  SCENARIO 3: VBUS = 0 V AND VDD IS POWERED
        when VBUS rises above its POR threshold
                                                                  UP (POWER DOWN MODE TO STANDBY MODE
                                                                  TRANSITION)
SCENARIO 1: VDD = 0 V AND VBUS IS POWERED
UP (POWER DOWN MODE TO VBUS POWER                                     If no accessory is plugged, when VDD is powered, the
MODE TRANSITION)                                                  34827 moves from the Power Down mode to the Standby
                                                                  mode. The internal supplies are started up first, and then the
    If VDD is not powered but the VBUS is powered up to a         whole chip is reset and is ready to accept accessories. When
voltage range between the POR threshold and the OVP               an accessory is attached, the 34827 enters the Active mode.
threshold, the internal charge pump for the power MOSFET          The power MOSFET is off in this case since VBUS = 0 V.
gate driver starts to operate, softly turning on the power
MOSFET. The IC is in the VBUS Power mode.
                                                                  SCENARIO 4: VDD = HIGH AND VBUS IS
    In this case, the ISET outputs high-impedance, all            POWERED UP (STANDBY TO ACTIVE MODE
registers are in reset states.
                                                                  TRANSITION)
                                                                      This is a normal VBUS detection case.
MC34827
                                                                                           Analog Integrated Circuit Device Data
18                                                                                                       Freescale Semiconductor


                                                                                            FUNCTIONAL DEVICE OPERATION
                                                                                                ACCESSORY IDENTIFICATION
                                                ACCESSORY IDENTIFICATION
   The identification flow chart is shown in Figure 14.         baseband; If the attached accessory can’t be identified, the
   When an accessory with powered VBUS is attached in           Unknown_Atta bit in the Interrupt 2 register will be set.
Power Down mode, the 34827 enters VBUS Power mode.                According to the automatic configuration capability of the
The 34827 will not identify the type of accessory in VBUS       34827 in Active mode, there are three types of accessories:
Power mode. The ISET pin outputs high-impedance for all           1. Recognized and supported. Such accessories include:
accessories, and the power MOSFET is turned on to pass the           USB port, Dedicated charger, USB charger, A/V
VBUS voltage to the charger IC to charge the battery. Once           charger, 5-wire type 1 and 5-wire type 2 chargers,
the VDD is increased above the POR threshold, the 34827              UART, Audio Type 1 cable, TTY accessory, USB jig
enters Standby mode to start the identification flow                 cable and UART jig cable. Automatic configurations
   In the Standby mode, the 34827 monitors both the ID pin           are supported for those accessories.
and the VBUS pin. If an accessory attachment is detected,         2. Recognized but not supported. These accessories can
the 34827 enters Active mode to start the identification flow.       be identified but not supported by 34827, including A/V
The ID detection state machine will find out what ID resistor        cable, Phone-Powered Devices, USB OTG
is attached and the PSTI circuit will find out what type of          accessories and Audio Type 2 cable.
power supplies is connected.
                                                                  3. Not recognized accessories. These will be identified as
   An identification conclusion can be drawn when the                Unknown accessories.
identification flow is finished. The corresponding bit in the
                                                                  The details on the identification flow in Active mode are
Device Type register is set to indicate the device type, and
                                                                described as following.
the ATTACH bit in the Interrupt 1 register is set to inform the
                                                                                                                      MC34827
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                   19


  FUNCTIONAL DEVICE OPERATION
  ACCESSORY IDENTIFICATION
.
    Power Down                 No                                                                         VBUS Power
                              Power
                                       Yes                                    Startup
                         VBUS_DET?
                                                                               delay
                                  No
                                                                                                     ISET = high
                                                                                                      impedance
                     No
                          VDD > VPOR?
                                                                                  No
                                 Yes
                                                                  Yes       VDD > VPOR?             Power FET on
                              Reset
                                       Yes
                         VBUS_DET?
                             No
                                                                                                                                                                                       Active
                     Yes
                                                   Detection
                                                                   ID_FLOAT?
                                                                                   Yes                                                                                        (Identification
                          ID_FLOAT?                  Delay
                                                                                                                                                                                        Flow)
                                                                          No
    Standby                       No                                                                           DP  0.6V
                                       Yes                    No   ID_DET_EN
                         RID < 100 ?                                   D?
                                                                                                                            Yes
                                  No       ADC = 00000                     Yes                                  DM > 0.8V
                                                                                                                     No
                         Start ADC to                                               No
                                                           No      Video cable?
                         measure RID        RID = 75 ?
                                                                                                                             Yes
                                                                                                               DM < 0.4V?
                                             Yes        USB-OTG            Yes
                                                                                                                     No
                          RID = Video  Yes                        A/V_CHG = 1
                             cable?
                                                                                                        No                   Yes                                      Yes
                                  No                                                                            ID_FLOAT         DM  0.6V             ID_FLOAT?          USB host
                                                                      Video
          UART jig                                                     cable                                                                               No
                     Yes  RID = UART
           cable w/
                          jig w/ boot?
         boot option                                                                      ID_DET_EN                    Dedicated    No
                                                                                                                                         DP < 0.4V?
                                  No                                                          D?       No               Charger
                                                                                                                                                       ID_DET_EN
                                                 Audio         Yes    RID = Audio
                                                                                                Yes                                                          D?      No
          UART jig                              Type 1                  Type 1 ?                                                               Yes
                     Yes  RID = UART
          cable w/o                                                                                                                                             Yes
                         jig w/o boot?                                       No
         boot option                                                                         RID =     Yes                                  USB
                                  No             TTY           Yes     RID = TTY            440k ?                                        Charger                          USB jig
                                              Converter               Converter?                                                                         RID = USB   Yes
                                                                                                                                                                            cable w/
                                                                                                 No                                                     jig w/ Boot?
             Phone                                                                                                                                                        boot option
                     Yes      RID =                                          No
            Powered                                                                                                                                             No
                             102k ?
             Device                             UART           Yes    RID = UART             RID =     Yes               5-Wire
                                  No            Cable                   Cable?              200k ?                     Charger                                             USB jig
                                                                                                                                                         RID = USB   Yes
                                                                                                                                                                           cable w/o
                                                                             No                                                                       jig w/o Boot?
                                                                                                 No                                                                       boot option
                                                Audio                 RID = Audio                                                                              No
                                                               Yes
                                                Type2                    Type2
                                                Cable                   Cable?
                                                                             No
                                                                                                                                                          Unknown
                                              Stuck Key       Yes    RID = remote      No
                                               Process                    key?
                                              Figure 14. Detailed Accessory Identification Flow Diagram
                                                                                RID IDENTIFICATION
    A comparator monitors the ID pin impedance to ground.                                                  resistance. The ADC is also used to identify what button is
When a resistor less than 1.0 MΩ is connected between the                                                  pressed in a cord remote control when the attached
ID line and the ground, the ID_FLOAT bit in the FSL Status 1                                               accessory is Audio Type 1 cable. The ADC allows 32 levels
register will be set to 0; when the resistor is removed,                                                   for the ID resistance measurement and can accurately
ID_FLOAT bit will be set to 1. A falling-edge of this bit starts                                           convert a 1% resistor value to a 5-bit result. The ADC outputs
the identification flow and a rising-edge of this bit starts the                                           vs. ID resistor values are given in Table 7.
detachment detection flow.                                                                                     When the conversion completes, an ADC_STATUS bit is
    A signal, ID_DET_END, is used to indicate the end of the                                               set and the ADC result value is sent to the ADC Result
identification.                                                                                            register. The ADC_EN signal is cleared automatically after
                                                                                                           the conversion finishes.
ID ADC                                                                                                         If the ID resistance is below 2.0 kΩ, the ADC Result is set
    After the ID_FLOAT bit is set to 0, the identification flow is                                         to 00000. If the ID line is floating, the ADC Result is set to
started, and an ADC_EN signal is set to enable an ADC                                                      11111.
conversion. A 5-bit ID ADC is used to measure the ID
MC34827
                                                                                                                                               Analog Integrated Circuit Device Data
20                                                                                                                                                               Freescale Semiconductor


                                                                                                           FUNCTIONAL DEVICE OPERATION
                                                                                                                ACCESSORY IDENTIFICATION
STUCK KEY IDENTIFICATION                                                          Figure 15 shows the stuck key process flow. If the stuck
    When the ADC conversion is finished and the ADC Result                    key is detected to be released within 1.5 s, the flow will return
is found to be a value corresponding to a remote control key                  to re-start the ID identification flow; Otherwise, a Stuck_Key
of Audio Type 1 cable, a stuck key process flow will be                       Interrupt will be set. When the key is released, a
initiated to find out whether a remote control key is stuck and               Stuck_Key_RCV Interrupt will be generated and then the
to inform the baseband of the stuck key status.                               identification flow will be re-started to find out the ID
                                                                              resistance of the attached cable.
                                                                Start 1.5s timer
                                                           Yes        Key
                                                                   released?
                                                                         No
                                                                   1.5s timer      No
                                                                    expired?
                                                                          Yes
                                                                Set Stuck_ Key
                                                                       bit
                                                                      Key          No
                                                                   released?
                                                                          Yes
                                                                   Set Stuck_
                                                                  Key_RCV bit
                                           Figure 15. The Stuck Key Process Flow Diagram
Table 7. ADC Output vs. Resistor Values (Unit: kΩ)
   ADC Result          RID (kΩ)         ADC Result          RID (kΩ)          ADC Result         RID (kΩ)        ADC Result         RID (kΩ)
                           (15)
       00000                              01000               10.03              10000              40.2            11000              255
       00001               2.00           01001               12.03              10001              49.9            11001              301
       00010              2.604           01010               14.46              10010              64.9            11010              365
       00011              3.208           01011               17.26              10011             80.07            11011              442
       00100              4.014           01100                20.5              10100              102             11100              523
       00101              4.820           01101               24.07              10101              121             11101              619
       00110               6.03           01110                28.7              10110              150             11110             1000
       00111               8.03           01111                34.0              10111              200             11111              (16)
 Notes:
  15. If the ID resistance is below 1.9 kΩ, the ADC Result is set to 00000.
  16. If the ID line is floating, the ADC Result is set to 11111
                                                                                                                                        MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                                      21


 FUNCTIONAL DEVICE OPERATION
 ACCESSORY IDENTIFICATION
                                              POWER SUPPLY TYPE IDENTIFICATION
   The PSTI (Power Supply Type Identification) circuit is used                   references VDAT_REF and VCR_REF. If the DM line
in Active mode to identify the type of the connected power                       voltage stays above VDAT_REF but below VCR_REF for
supply. The supported power supply should be compliant with                      20 ms continuously before t4, which means that the DP
the USB Battery Charging Specification Revision 1.1. The
                                                                                 and DM pins are short, the DP/DM_short signal is set
PSTI circuit first detects whether the DP and DM pins are
                                                                                 to ‘1’ at t3, and go to step 5. If the DP and DM are not
short. If the DP and DM pins are found to be short, the PSTI
circuit will continue to find out whether DP and DM are                          short, the VBUS detection completes at t4 and the
forward short or reverse short. The detection result together                    VBUS_DET_END is set to ‘1’. Then the state machine
with the ID detection result is used to determine what                           will go to step 6 to find out the type of accessory based
powered accessory is connected.                                                  on the DM voltage.
   The PSTI circuit is shown in Figure 16. Its operation is                  5. The state machine checks if the ID pin is floating. If the
described as follows.                                                            ID pin is not floating at t3, the PSTI circuit turns off SW1
   When the 34827 detects that the VBUS_DET bit is set, the                      and SW2 and the VBUS detection completes. The
PSTI identification flow starts.                                                 VBUS_DET_END is set to ‘1’ and the state machine
                                                                                 goes to step 6. If the ID pin is floating at t3, the PSTI
   1. Wait for a Detection Delay td (programmable in the
                                                                                 circuit turns off SW1 and SW2 and then turns on SW3
      Time Delay register).
                                                                                 and SW4 to force VDAT_SRC to the DM pin. If the DP
   2. During tD, check to see whether ID_FLOAT = 0. If yes,
                                                                                 pin is between the two thresholds VDAT_REF and
      then wait for the ID_DET_END to be set and check
                                                                                 VCR_REF for 20 ms continuously before t6, it means that
      whether the attached is an A/V cable.
                                                                                 the DP and DM pins are reverse short, then the DP/
   3. If the result is an A/V cable, set the A/V_CHG and                         DM_reverse_short is set to ‘1’ at t5, and the SW3 and
      ATTACH interrupt bits as well as the A/V bit in Device
                                                                                 SW4 are turned off, VBUS_DET_END is set to ‘1’, and
      Type register to inform the baseband and finish the
                                                                                 the state machine goes to step 6. If the DP and DM are
      identification flow. If not, go to step 4.
                                                                                 not reverse short, the VBUS detection completes at t6,
   4. Enable the PSTI (PSTI_EN set to ‘1’) at t1. When                           SW3 and SW4 are turned off, the VBUS_DET_END is
      PSTI_EN rises, the switch SW1 is turned on to drive                        set to ‘1’, and the state machine goes to step 6.
      the data source voltage, VDAT_SRC, to DP line. In the
                                                                             6. The state machine will make a decision of the attached
      meantime, switch SW2 is turned on so the current                           accessory based on the ID identification and the VBUS
      source, IDAT_SINK, sinks a current from the DM line. At                    identification results.
      t2, the PSTI starts to compare the DM line voltage with
                         VBUS
                                             VB               REG                    OSC
                                                                                                PSTI_EN
                                              VDAT_SRC
                                                                       To SW1 & 2
                                                      SW1
                                                                   SW3
                          DP
                                                                                                 IDE
                          DM
                                                         SW4                        Logic
                                      SW2
                                                                       To SW3 & 4
                                   IDAT_SINK
                                                      VDAT_REF   CMP1                                                 ISET
                         GND
                                                                                                 CHG_DET
                                                       VCR_REF
                                                                 CMP2
                                Figure 16. Power Supply Type Identification Circuit Block Diagram
MC34827
                                                                                                     Analog Integrated Circuit Device Data
22                                                                                                                 Freescale Semiconductor


                                                                                                        FUNCTIONAL DEVICE OPERATION
                                                                                                     OPERATION AFTER IDENTIFICATION
                                              VBUS
                                          PSTI_EN
                                              SW1
                                              SW2
                                              SW3
                                              SW4
                                     DP/DM_Short
                              DP/DM_reverse_Short
                                  VBUS_DET_END
                                                      t0    t1     t2 t3          t4           t5 t6
                                                         tD                tD1
                                         Figure 17. Operating Waveforms for the PSTI Circuit
                                               OPERATION AFTER IDENTIFICATION
    The identification process is started when VDD is above              type of accessory is attached. This condition happens when
POR and the accessory attachment is detected. After the                  the cell phone is not powered up yet. In this condition, if the
identification process is finished, the operation of the 34827           accessory is found to be a JIG cable, the JIG pin outputs low
is determined together by the type of accessory, that is JIG             impedance to enable the PMIC in the cell phone. Then
cable or non-JIG cable, the status of power supplies,                    VDDIO rises. Once the VDDIO rises to high, the BOOT pin
including the VBUS, VDD and VDDIO, and the Control                       will output the correct logic voltage and the UART or the USB
register values.                                                         switches will be turned on according to the type of JIG cable.
    If VBUS is powered up and VDD and VDDIO are low, the                     When the VDDIO is started up, the INT_MASK bit is still in
identification flow is not started. The 34827 is in the VBUS             reset state ‘1’, and the INTB output stays low. If the accessory
Power mode. The power MOSFET is on and ISET outputs                      is not a JIG cable, when the VDD and VDDIO are both
high impedance. The JIG pin outputs high impedance, and                  powered up, the signal switches remains off until the
the BOOT pin outputs logic low voltage for all accessories.              INT_MASK is written to ‘0’ by I2C.
    When VDD increases above POR but VDDIO is still low,                     The behaviors of INTB and signal switches during such
the identification flow is started. But the interrupt mask control       transition and other important control functions are described
bit INT_MASK in Control register is in reset state (‘1’) to mask         below in detail.
all interrupt outputs. All signal switches are off no matter what
                                                         CONTROL FUNCTIONS
    The 34827 contains registers which hold control and                  outputs a high voltage, and the host is not allowed to read the
status information. The register map and the description of              interrupt registers.
each register can be found in Register Map section. The                      Figure 18 illustrates the switching behavior when the
details about some important control bits are described as               INT_MASK is set to ‘0’. Figure (A) shows the case that no
follows.                                                                 interrupt bit is already set. In this case, the INTB outputs high
                                                                         when INT_MASK bit is set to zero. Figure (B) shows the case
INTERRUPT MASK (INT_MASK)                                                that an interrupt bit is already set due to attachment of an
    The INT_MASK bit masks all interrupt outputs to the host.            accessory and WAIT = 1 when the first delay time expires. In
When the INT_MASK bit is ‘1’, the INTB output is forced to               this case, INTB outputs high voltage during the first delay
low, and the corresponding interrupt bit can be still set when           time and then outputs low voltage when the delay time
an interrupt event happens, but the host should not read the             expires. Once the INTB outputs low voltage after the delay
interrupt registers when INT_MASK = 1. When INT_MASK bit                 time, the 34827 waits for a second WAIT time before turning
is set to ‘0’, the INTB output is allowed to send an interrupt, if       on the signal switches. The baseband should read the
any, to the host after a delay as shown in Figure 18. The                interrupt registers via the I2C, and since all the interrupt bits
delay is a WAIT time programmed by the Switching Wait bits               are of R/C type, the interrupt bits will be cleared after being
in Timing Set 2 register. During the delay time, the INTB                read and then the INTB output returns to high. Figure (C)
                                                                                                                                  MC34827
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                                23


 FUNCTIONAL DEVICE OPERATION
 OPERATION AFTER IDENTIFICATION
shows the case that an interrupt bit is already set due to                 delay time expires. The signal switches are not turned on until
attachment of an accessory and WAIT = 0 when the first                     the WAIT bit is written to ‘1’ by I2C. When the baseband reads
delay time expires. In this case, INTB outputs high voltage in             the interrupt registers via the I2C, the interrupt bits are
the first delay time and then outputs low voltage after the first          cleared and the INTB output returns to high.
                                     INT MASK
                                           INTB                        WAIT time
                                           (A). No accessory attached when the INT_MASK is reset to zero
                                      INT MASK
                                            INTB                       WAIT time
                                            WAIT
                                     Switching                                             WAIT time
           (B). An accessory is already attached when the INT_MASK is reset to zero and WAIT bit = 1 when the first wait time expires.
                                     INT MASK
                                          INTB                         WAIT time
                                          WAIT
                                     Switching
        (C). An accessory is already attached when the INT_MASK is reset to zero and the WAIT bit = 0 when the first wait time expires.
                                        Figure 18. Operating Waveforms of the INT_MASK Bit
TIMING OF THE SWITCHING ACTION (WAIT BIT)                                  before turning on the switches. The WAIT time is
   If the INT_MASK bit is already set to ‘0’ before an                     programmed by the Switching Wait bits in the Timing Set 2
accessory is attached, the INTB outputs low voltage once an                register. If the WAIT bit is ‘0’ when the Attach interrupt is
interrupt bit is set and the following timing of the switching             generated, the 34827 will not turn on the switches until the
action is controlled by the WAIT bit in the Control register. If           WAIT bit is set to ‘1’ by I2C. Both cases are shown in the
the WAIT bit is ‘1’ when the Attach interrupt bit is set and               Figure 19.
INTB outputs low voltage, the 34827 waits for a WAIT time
MC34827
                                                                                                    Analog Integrated Circuit Device Data
24                                                                                                                Freescale Semiconductor


                                                                                                     FUNCTIONAL DEVICE OPERATION
                                                                                                   OPERATION AFTER IDENTIFICATION
                                   Accessory
                                     attaching
                                 Device Type              ID time
                                      ATTACH
                                         WAIT
                                                                           Wait time
                                    Switching
                         (A). WAIT = 1 when the ATTACH interrupt is generated. (VDDIO is high and INT_MASK = 1.)
                                   Accessory
                                     attaching
                                  Device Type             ID time
                                      ATTACH
                                         WAIT
                                    Switching
                          (B). WAIT = 0 when the ATTACH interrupt is generated. (VDDIO is high and INT_MASK = 1.)
                                          Figure 19. Operating Waveforms of the WAIT Bit
AUTOMATIC SWITCHING OR MANUAL                                           mode. If the Manual S/W bit is changed from ‘1’ to ‘0’ while an
SWITCHING (SWITCH_OPEN & MANUAL S/W BITS)                               accessory is attached, the already automatically turned on
   When a supported accessory is identified, the default                switches will be turned off, the switches selected manually
behavior of 34827 is to automatically turn on the                       will be turned on, and the status of the ISET, JIG and BOOT
corresponding signal switches. The user can also choose to              pins will be determined by the corresponding bit value in the
turn on optional signal switches manually. How to turn on the           Manual S/W 2 register. However, writing Manual S/W bit back
switches is controlled by the Manual S/W bit and the                    to ‘1’ in Active mode will not change the switches status and
Switch_Open bits in the Control register.                               the outputs.
   If the Switch_Open bit is ‘0’, all switches are off, including
                                                                        RAW DATA (RAW DATA BIT)
the power MOSFET.
                                                                           The RAW DATA bit functions only when the accessory is
   If Manual S/W = 1, which is its reset value, the switches to
                                                                        Audio Type 1, which supports the remote control key. The
be turned on and the outputs of ISET, JIG and BOOT pins are
                                                                        RAW DATA bit determines whether to report the ID pin
determined automatically by the Device Mode register, that is
                                                                        resistance change to the baseband when any key is pressed.
the identification result. If Manual S/W = 0, the switches to be
                                                                        When RAW DATA = 1, the ADC is enabled only when an ID
turned on and the outputs of ISET, JIG and BOOT pins are
                                                                        line event is detected, such as when a key is pressed. In this
determined by the values of the Manual S/W register. The
                                                                        case, the interrupt bits KP, LKP or LKR and the
relationship between the values of the Manual S/W register
                                                                        corresponding button bits in Button 1 and Button 2 registers
and the switches to be turned on can be found in Register
                                                                        will be set accordingly. Detailed behavior information when
Map section.
                                                                        RAW DATA = 1 can be found in section Audio Device Type 1
   The values of Switch_Open and Manual S/W bits will not               -- Audio with or without the Remote Control. When RAW
affect the identification flow and the timing of signal switching       DATA = 0, the ADC is enabled periodically to calculate the ID
action of the 34827. The difference between Manual S/W = 1              line resistance. Any change of ADC Result will set the
and Manual S/W = 0 is what switches are turned on and what              ADC_Change interrupt bit to inform the baseband. Then the
the ISET, JIG and BOOT pins output when an accessory is                 baseband can read the ADC Result via I2C. The KP, LKP or
attached. In both way, no switches are turned on in Standby             LKR and the button bits will not set when RAW DATA = 0.
                                                                                                                               MC34827
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                             25


 FUNCTIONAL DEVICE OPERATION
 OPERATION AFTER IDENTIFICATION
The period of ADC conversion is determined by the Device        Under this condition, the baseband can control the mode
Wake-up bits in the Timing Set 1 register. All other behaviors  transition manually by writing the PSAVE bit when the
of Audio Type 1 and other accessories will not be affected by   accessory is Audio Type 1 or TTY. If the PSAVE is set to ‘0’,
the RAW DATA bit.                                               the 34827 keeps in Active mode; if the PSAVE is set to ‘1’,
                                                                the 34827 keeps in Power Save mode even if the audio signal
POWER SAVE MODE (AUTOPSAVE BIT)                                 is applied at SPK_R and SPK_L pins.
    The 34827 supports the Power Save mode when the                 If the Manual S/W is set to ‘0’ for Audio Type 1 or TTY, the
accessory is Audio Type 1 or TTY to reduce the power            34827 has the same mode transition behavior as when the
consumption. The default behavior of 34827 is to enter the      Manual S/W is in default value ‘1’.
Power Save mode automatically if no signal activity is
detected within a programmable time which is controlled by      NORMAL OPERATION SETTING OF THE
the Activity Idle Detection Time bits in the Time Delay         CONTROL BITS
register. The default delay time is 10s. Once the signal            After the VDD and VDDIO are powered up, the 34827 is
activity is detected, the 34827 will quit the Power Save mode   normally configured to turn on the switches automatically
and enter the Active mode immediately. In the Power Save        after the attached accessory is identified. Thus the
mode, the SPK_R/SPK_L to DP/DM switches and the VBUS            INT_MASK bit must be set to ‘0’, the WAIT bit is normally set
to MIC switch all keep on. Remote control key pressing in       to ‘1’, the Manual S/W bit is set to ‘1’, the RAW Data bit is set
Power Save mode can be responded as in the Active mode.         to ‘1’ and the Switch_Open bit is set to ‘1’. This is the normal
    If the AutoPSAVE bit in FSL Control register is set to ‘0’, setting of these control bits for the normal operation.
the 34827 will not enter Power Save mode automatically.
                                               ANALOG AND DIGITAL SWITCHES
    The signal switches in the 34827 are shown in Figure 20.        When the switches are configured automatically by the
    These switches are controlled by the identification result  identification result, the configuration of the switches vs. the
when the Manual S/W = 1 and by the Manual S/W registers         device type is shown in Table 8.
when the Manual S/W = 0 in Active mode. The Switch_Open             When detachment of an accessory is detected, the 34827
bit overrides the switch configuration. When the                will return to the Standby mode. In the Standby mode, no
Switch_Open bit is 0, all switches, including the power         matter Manual S/W = 1 or Manual S/W = 0, all signal switches
MOSFET, are turned off.                                         and the power MOSFET are off in the Standby mode except
    The switches for the SPK_L and SPK_R are capable of         for the OUT-to-ground FET SW10. The OUT-to-ground FET
passing signals of ±1.5 V, referencing to GND pin voltage.      is turned on whenever the FET_ON bit is ‘0’. The ISET and
The SPK_L and SPK_R pins are pulled down to ground via a        JIG pins output high-impedance and BOOT pin outputs low
100 kΩ resistor respectively, as shown in Figure 20.            logic voltage in the Standby mode
MC34827
                                                                                          Analog Integrated Circuit Device Data
26                                                                                                     Freescale Semiconductor


                                                                                                    FUNCTIONAL DEVICE OPERATION
                                                                                                OPERATION AFTER IDENTIFICATION
.
                                     RxD                                                       DP
                                                           SW1
                                     TxD                                                        DM
                                                           SW2
                                                           SW3
                                        D+
                                                                                SW6
                                        D-
                                                           SW4
                                  SPK_R
                                                                                SW7
                                  SPK_L
                                                                       SW5
                                      MIC                                                     VBUS
                                                                   Gate
                                                                                 SW8
                                                                  Drive
                                       ISET         SW9
                                                                                              OUT
                                                                                 SW10
                                             Figure 20. Analog and Digital Switches
            Table 8. Switch Configuration when Controlled by the Device Type Register
              Device Type      Audio            USB          UART           USB CHG        Dedicated CHG      5WT1 CHG
                On SW#       4, 5, 7, 10       3, 6, 8      1, 2, 10        3, 6, 8, 9            8, 9              8
              Device Type   5WT2 CHG       JIG_USB_OFF JIG_USB_ON JIG_UART_OFF JIG_UART_ON                        TTY
                On SW#            8            3, 6, 8       3, 6, 8         1, 2, 10          1, 2, 10        4, 5, 7, 10
                                                       POWER MOSFET
   An N-channel power MOSFET is implemented in the                   the OCP/OTP block or the FET_DIS signal from the logic
34827. For the Audio Type 1 or TTY accessory, the power              block. The FET_DIS signal comes from the following places:
MOSFET isolates the VBUS pin from both the input                        1. when the switches are controlled by the Manual S/W
decoupling capacitor and the input quiescent current of the                bits
charger IC at the OUT pin, so that the microphone signal can
                                                                        2. when the Switch_Open bit = 0
be connected to the VBUS pin without any attenuation from
the OUT pin. The power MOSFET is also used as the input                 3. when the accessory is an unknown powered accessory
over-voltage protection (OVP) or over-current protection                4. when the FET_ON bit =0 in the FSL Control register
(OCP) switch for other components such as the charger IC to
allow a low-voltage rated charger to be used for cost                OVER-VOLTAGE PROTECTION (OVP)
reduction.
                                                                        The VBUS line is capable of withstanding a 28 V voltage.
   The power MOSFET is guaranteed to be turned on when               The 34827 protects the cell phone by turning off the internal
the VDD voltage is below POR threshold and VBUS is                   power MOSFET when the VBUS voltage is higher than the
powered up to a voltage range between the POR threshold              OVP threshold. In this case, the gate driver turns off the
and the OVP threshold to assure that the cell phone battery          power MOSFET within 1.0 μs, and the OVP_EN bit in the
can be charged in the VBUS Power mode.                               Interrupt 1 register is set to interrupt the host. When the OVP
   When supported power supply is attached in the Active             event is cleared, the OVP_OTP_DIS bit in the Interrupt 1
mode, the power MOSFET keeps on unless it is disabled by             register is set to inform the host.
                                                                                                                              MC34827
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                           27


 FUNCTIONAL DEVICE OPERATION
 OPERATION AFTER IDENTIFICATION
OVER-CURRENT PROTECTION (OCP) AND OVER-                        the host. The power MOSFET is turned on again when the IC
TEMPERATURE PROTECTION (OTP)                                   temperature falls below the OTP falling temperature
   If the current in the power MOSFET exceeds the specified    threshold, and the OVP_OTP_DIS bit is set. If this case
OCP limit, the 34827 will operate in CC (Constant Current)     happens 7 times, the power MOSFET will permanently be
mode, regulating the output current at the OCP limit. If the   turned off until the accessory is attached again, or the IC is
OCP condition persists, the IC temperature will rise,          reset.
eventually reaching the OTP (over-temperature protection)         The gate driver turns off the power MOSFET with a limited
limit. The 34827 then turns off the power MOSFET and sets      speed under the OTP case to prevent a high over-shoot
the OTP_EN interrupt bit in the Interrupt 1 register to inform voltage at the VBUS pin.
                    AUDIO DEVICE TYPE 1 -- AUDIO WITH OR WITHOUT THE REMOTE CONTROL
   All Audio Type 1 accessories have the same interface        conditions according to the press time: Error key press, short
shown in Figure 21, either stereo or mono, with or without a   key press and long key press.
remote control, or with or without a microphone. When a           1. Error key press: if the key press time is less than TKP,
device, such as the microphone, is not connected in the
                                                                     Error bit in the Button 2 register and the short key press
accessory, the corresponding pin in the mini-USB connector
                                                                     bit KP in Interrupt 1 register are set to indicate that an
will be left floating.
                                                                     error happens. The Error bit is reset to ‘0’ when the
   With the normal operation setting of the control bits, when       Button 2 register is read or next key press happens.
the accessory is identified as an Audio Type 1 device, the           The KP bit is cleared when the Interrupt 1 register is
analog switches SW4, SW7 for SPK_R to DP and SPK_L to                read.
DM, and SW5 for VBUS to MIC are turned on, the power
                                                                  2. Short key press: if the key press time is between TKP
MOSFET SW8 is turned off to isolate VBUS pin from OUT pin
and the OUT-to-ground FET SW10 is turned on to reduce the            and TLKP, the KP bit and the corresponding button bit in
leakage current into the VBUS pin.(see the Figure 20 and             Button 1 or Button 2 register are set to inform the
Figure 22).                                                          baseband. If the ADC Result is not one of the ADC
                                                                     values of the 13 buttons, the Unknown bit in the Button
   The 34827 supports the remote control key for Audio Type
                                                                     2 register is set. The INTB outputs a low when the key
1 device. If the RAW DATA = 0, the ADC is turned on
                                                                     is released and returns to a high when the interrupt
periodically to monitor the ID line change caused by the key
                                                                     register is read. The KP bit is cleared when the
pressing. The period is programmed by the device wake-up
                                                                     Interrupt 1 register is read.
bits. If the ADC Result changes, the ADC_Change bit in the
Interrupt register 2 is set to inform the baseband. If the RAW    3. Long key press: if the key press time is longer than
DATA = 1, a comparator is enabled to monitor the key                 TLKP, the long key press bit LKP in the Interrupt 2
pressing.                                                            register and the corresponding button bit are set to
   The timing of the key press when RAW DATA= 1 is shown             inform the baseband. If the ADC Result is not one of
in Figure 23. If a key is pressed for a time less than 20 ms,        the ADC values of the 13 buttons, the Unknown bit in
the 34827 ignores this key press. If the key is still pressed        the Button 2 register is set. When the key is released,
after 20 ms, the 34827 starts a timer to count the time during       the long key release bit LKR in the Interrupt 2 register
which the key is kept being pressed. There are three                 is set to interrupt the baseband again.
MC34827
                                                                                         Analog Integrated Circuit Device Data
28                                                                                                   Freescale Semiconductor


                                                                                        FUNCTIONAL DEVICE OPERATION
                                                                                       OPERATION AFTER IDENTIFICATION
.
                          VBUS
                                                                                           AUDIO
                                                                                     ACCESSORY
                         D+
                                                                      MIC
                                                 Audio_R
                         D-
                                                 Audio_L
                         ID                 R1       R2        R3            RN-1
                                                                        …...
                                    SEND/END          /                                       RN
                         GND             HOLD
                             Figure 21. Audio Accessory with Remote Control and Microphone
       Baseband                                          VDD
                                                                Charger
                                                         OUT
                                                                                                AUDIO ACCESSORY
                                MIC                      VBUS                     VBUS
                            SPKR_R                       DP                        D+
                            SPKR_L                       DM                         D-
                                                         ID                        ID
                                         ADC
                                        ID Det
                                                         GND                     GND
                                                                                SHLD
                        Figure 22. Operation of the Headset with Remote Control and Microphone
                                                                                                               MC34827
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                            29


FUNCTIONAL DEVICE OPERATION
OPERATION AFTER IDENTIFICATION
                                           T KP
                                                T LKP
                                20 ms                                        20 ms
                             Key
                           Press
                          Error                                Button Register read
                             KP
                           INTB                              Interrupt Register read
                             KP
                           INTB                                 Interrupt Register read
                           LKP
                           LKR
                          INTB
                          ADC
                         Time                                            Interrupt Register read
                               Figure 23. The Remote Control Key Pressing Timing
MC34827
                                                                                     Analog Integrated Circuit Device Data
30                                                                                               Freescale Semiconductor


                                                                                                     FUNCTIONAL DEVICE OPERATION
                                                                                                  OPERATION AFTER IDENTIFICATION
    When AutoPSAVE = 1, if no activity is detected in an                 When AutoPSAVE = 0, the baseband can control the
Activity Idle Detection Time window, which is programmed by           mode of 34827 manually by setting the values of Device
the Activity Idle Detection Time bits in the Time Delay               Mode register via I2C.
register, the 34827 enters the Power Save mode                           The ID detection circuit continues to be on for detaching
automatically to minimize the quiescent current. In the Power         detection in the Active mode and samples the ID line every
Save mode, the key pressing is monitored as well. The                 interval programmed by the Device Wake Up bits in the
current to monitor the ID line status is sampled at 5ms period.       Timing Set 1 register in the Power Save mode. When the
Upon detecting the activity in signal switches, the 34827             ID_FLOAT rising edge is detected, the Detach bit in the
returns to the Active mode.                                           Interrupt 1 register is set to inform the host that the accessory
                                                                      is detached. Then the 34827 enters the Standby mode.
                                                             JIG CABLE
    The JIG cable is for test and development purpose. It has            If Manual S/W is set to ‘1’, the relationship between JIG
an ID resistance to differentiate it from a regular USB cable,        cable Type and the JIG and BOOT outputs is shown in
as shown in Figure 24. The Jig cable has four ID resistance           Table 9.
values to identify either the Boot-On option is selected and if          If Manual S/W is set to ‘0’, the switches to be turned on are
the cable is a USB or UART type. The detection result sets            determined by the value of Manual S/W registers. The
the JIG and the BOOT outputs, where JIG is an open-drain              BOOT_SW and JIG_ON bits in Manual S/W 2 register can be
output and BOOT is a push-pull output                                 configured to control the JIG and BOOT outputs manually
                                                                      under this condition. Detailed information can be found in
                                                                      section Register Map.
Table 9. JIG Cable Type and Indications
       Device type bit              JIG_USB_ON               JIG_USB_OFF                JIG_UART_ON                JIG_UART_OFF
         JIG Output                Low-impedance             Low-impedance              Low-impedance               Low-impedance
        BOOT Output                   High Logic               Low Logic                  High Logic                   Low Logic
USB JIG CABLE                                                         completely, the identification flow will be triggered again since
    With the normal operation setting of the control bits, when       the ID_FLOAT bit or VBUS_DET bit still indicates that an
the identified accessory is a USB jig cable, both the D+ to DP        accessory is connected when the 34827 moves to the
and the D- to DM switches are switched on (see Figure 25),            Standby mode. All the signal switches are turned off.
the JIG pin outputs a logic low signal, the power MOSFET is
on, the ISET output is high-impedance. The BOOT output is             UART JIG CABLE
dependent on whether or not the BOOT on option. When the                 With the normal operation setting of the control bits, when
JIG_USB_ON bit in the device type register is set, the BOOT           the identified accessory is a UART jig cable, both the RxD to
pin outputs logic high.                                               DP and the TxD to DM switches are switched on (see
    When INT_MASK = 0, the switching action of D+ to DP               Figure 26), the JIG pin outputs low, the power MOSFET is off.
and the D- to DM switches are controlled by the WAIT bit. If          The BOOT output is dependent on whether or not the BOOT
WAIT = 1, the signal switches will be turned on after a WAIT          on option. When the JIG_UART_ON bit in the device type
time since the INTB outputs low voltage as for other type             register is set, the BOOT pin outputs logic high.
accessory. If WAIT = 0, the signal switches won’t be turned              When INT_MASK = 0, the switching action of RxD to DP
on until the WAIT bit is set to ‘1’ by I2C. When INT_MASK =           and the TxD to DM switches are controlled by the WAIT bit. If
1, no matter the WAIT is set to ‘0’ or ‘1’, the signal switches       WAIT = 1, the signal switches will be turned on after a WAIT
are turned on once the USB jig cable is identified.                   time since the INTB outputs low voltage as for other type
    Both the ID detector and the VBUS detector monitor the            accessory. If WAIT = 0, the signal switches won’t be turned
detachment of the USB jig cable. The ID detection circuit             on until the WAIT bit is set to ‘1’ by I2C. When INT_MASK =
continues to be on for detachment detection in the Active             1, no matter the WAIT is set to ‘0’ or ‘1’, the signal switches
mode. When the ID_FLOAT is set, the Detach bit in the                 are turned on once the UART jig cable is identified.
Interrupt 1 register is set to inform the host. When the                 The ID detection comparator continues to be on for
VBUS_DET is set to ‘0’, which means either the VBUS power             detachment detection in the Active mode. When the
is removed or the cable is detached, the Detach bit is also set       ID_FLOAT is set, the Detach bit in the Interrupt 1 register is
to inform the host. Then the 34827 moves to the Standby               set to inform the host that the accessory is detached. Then
mode. If the Detach bit is set due to the removing of only            the 34827 enters the Standby mode.
VBUS or only ID resistance and the cable is not detached
                                                                                                                                 MC34827
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                             31


FUNCTIONAL DEVICE OPERATION
OPERATION AFTER IDENTIFICATION
                                                  JIG CABLE           TEST EQUIPMENT
                                VBUS
                               D+
                               D-
                               ID
                                                R1
                               GND
                                               Figure 24. Jig Cable
   Baseband                                         VDD
                                                           Charger
                                                     OUT
       Test              JIG
    Interface
                       BOOT                                                                  USB
                                                                                              JIG
                                                                                                           USB
                                                                                            Cable
                                VBUS                                        VBUS                           Port
                                  Det                                                                 5V
                          D+                        DP                       D+
   USB Xcvr               D-                        DM                        D-
                                  ADC               ID                       ID
                                 ID Det
                                                    GND                     GND
                                                                           SHLD
                                    Figure 25. Operation of the USB JIG Cable
MC34827
                                                                                 Analog Integrated Circuit Device Data
32                                                                                           Freescale Semiconductor


                                                                                                  FUNCTIONAL DEVICE OPERATION
                                                                                                OPERATION AFTER IDENTIFICATION
            Baseband                                           VDD
                                                                     Charger
                                                                OUT
               Test                 JIG
            Interface
                                  BOOT                                                                UART
                                                                                                        JIG
                                                                                                                  UART
                                                                                                      Cable
                                          VBUS                                        VBUS                     Interface
                                            Det
                                   RxD                         DP                       D+
              UART                  TxD                        DM                        D-
                                             ADC               ID                       ID
                                            ID Det
                                                               GND                    GND
                                                                                      SHLD
                                            Figure 26. Operation of the UART JIG Cable
                                                         TTY CONVERTER
    A TTY converter is a type of audio accessory. It has its own      to DM switch can only be turned on when TTY_SKPL bit in
ID resistance. When a TTY converter is attached, the TTY bit          FSL Control register is set to 1 manually. The TTY accessory
in the Device Type register and the Attach interrupt bit are          doesn’t support the remote control key.
set. With the normal operation setting of the control bits, the          The Power Save mode operation and the detachment
automatic switch configuration of the TTY converter is similar        detection are the same as those of the Audio Type 1 device.
to that of Audio Type 1 accessory, that is the SPK_R to DP
switch and MIC to VBUS switch are turned on, but the SPK_L
                                                                  UART
    With the normal operation setting of the control bits, when          The ID detection comparator continues to be on for
the identified accessory is a UART cable, both the RxD and            detachment detection in the Active mode. When the
the TxD switches are switched on (see Figure 27). The power           ID_FLOAT is set, the Detach bit in the interrupt register is set
MOSFET is off, and the JIG output high-impedance and the              to inform the host that the accessory is detached.Then the
BOOT outputs low-voltage.                                             34827 enters the Standby mode.
           Baseband                                           VDD
                                                                    Charger
                                                               OUT
                                                                                                     UART
                                                                                                     Cable        UART
                                          VBUS                                        VBUS                    Interface
                                           Det
                                   RxD                        DP                       D+
             UART                  TxD                        DM                        D-
                                            ADC               ID                       ID
                                           ID Det
                                                              GND                     GND
                                                                                     SHLD
                                              Figure 27. Operation of the UART Cable
                                                                                                                             MC34827
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                            33


 FUNCTIONAL DEVICE OPERATION
 OPERATION AFTER IDENTIFICATION
                                                     USB HOST (PC OR HUB)
   When the attached accessory is a USB host or hub, the ID          on until the WAIT bit is set to ‘1’ by I2C. When INT_MASK =
pin is floating. With the normal operation setting of the control    1, no matter the WAIT is set to ‘0’ or ‘1’, the signal switches
bits, both the D+ to DP and the D- to DM switches are                are turned on once the USB host is identified.
switched on (see Figure 28),the power MOSFET is turned on                After the D+ to DP and the D- to DM switches are turned
to allow the charger to charge the battery and the ISET              on, the baseband can pull the D+ signal to high to start the
outputs high-impedance to limit the charging current to a            USB attaching sequence.
lower level.
                                                                         The detachment is detected by the falling edge of the
   When INT_MASK = 0, the switching action of D+ to DP               VBUS_DET signal. When the VBUS_DET falls, the Detach
and the D- to DM switches are controlled by the WAIT bit. If         bit is set to inform the baseband. Then the 34827 enters the
WAIT = 1, the signal switches will be turned on after a WAIT         Standby mode.
time since the INTB outputs low voltage as for other type
accessory. If WAIT = 0, the signal switches won’t be turned
            Baseband                                          VDD
                                                                   Charger
                                                               OUT
                                                                                                        USB
                                                                                                       Cable        USB
                                          VBUS                                         VBUS                         Host
                                           Det                                                                   5V
                                   D+                         DP                         D+
            USB Xcvr                D-                        DM                         D-
                                            ADC               ID                        ID
                                           ID Det
                                                              GND                      GND
                                                                                       SHLD
                                               Figure 28. Operation of the USB Cable
                                         USB CHARGER OR DEDICATED CHARGER
   When the attached accessory is a USB charger or                       The VBUS detector is used to monitor the detachment of
dedicated charger, the 34827 turns on the power MOSFET to            the charger. The falling edge of VBUS_DET is an indication
allow the charger to start and the ISET outputs low-                 of the charger detachment. Both unplugging the mini-USB
impedance to allow a higher charge current. With the normal          connector and unplugging the ac side lead to the same
operation setting of the control bits, the D+ and D- switches        detachment conclusion. The detach bit is set to inform the
are turned on for the USB charger but not for the dedicated          host. Then the 34827 enters the Standby mode.
charger.
                               5-WIRE CHARGER (TYPE 1 OR TYPE 2) OR A/V CHARGER
   When the attached accessory is a 5-Wire Charger or A/V            of the charger detachment. Both unplugging the mini-USB
Charger, the 34827 turns on the power MOSFET to allow the            connector and unplugging the ac side lead to the same
charger to start and the ISET outputs high-impedance.                detachment conclusion. The detach bit is set to inform the
   The VBUS detector is used to monitor the detachment of            host. Then the 34827 enters the Standby mode.
the charger. The falling edge of VBUS_DET is an indication
                                                    UNKNOWN ACCESSORY
   When an unknown accessory is attached, either the                 The attach bit is not set to distinguish the unknown accessory
ID_FLOAT bit is cleared or the VBUS_DET bit is set to ‘1’.           from the known accessory. No other actions are taken.
Only the Unknown_Atta bit is set to interrupt the baseband.              If an unknown powered accessory is attached, the power
                                                                     MOSFET is turned on during the identification process and
MC34827
                                                                                              Analog Integrated Circuit Device Data
34                                                                                                           Freescale Semiconductor


                                                                                                    FUNCTIONAL DEVICE OPERATION
                                                                                                                     RESET FEATURES
the power MOSFET will be turned off immediately when the                detection. Detach bit is set to inform the detachment of the
accessory is identified as unknown accessory.                           unknown accessory. Then the 34827 enters the Standby
   Either the falling edge of the VBUS_DET or the rising edge           mode.
of the ID_FLOAT signals can trigger the detachment
                                                        RESET FEATURES
HARDWARE RESET                                                          reset by VDDIO is generated. The reset signal has a width of
   There are three sources of hardware resetting for the                160μs typically.
34827 as the Figure 29 shows, including the Power-on Reset                 All registers except 0x01H will be reset to the default
caused by the powered up VDD, a hardware reset by VDDIO                 values when hardware reset happens. During the reset
input and a hardware reset by the I2C bus lines.                        process, the 34827 will not respond to any attachment or
   The VDD Power-on Reset is described earlier. The                     detachment activities.
hardware reset by I2C signals is shown in Figure 30. When
both the I2C_SCL and the I2C_SDA have a negative pulse                  SOFTWARE RESET
for longer than TRSTI2C, a hardware reset is generated.                    The 34827 supports a software reset, which is realized by
   The operating waveforms of hardware reset by VDDIO are               writing the Reset bit in 0x21H register to 1. The Reset bit will
shown in Figure 31. A glitch on the VDDIO with duration less            be cleared to 0 at once since it is of W/C type. The
than a deglitch time TVDDIODGT will be ignored. If the negative         consequence of the software reset is the same as the
pulse on the VDDIO lasts longer than the deglitch time, a               hardware reset. All registers except 0x01H will be reset.
                                 I2C_SDA
                                              I2C-Bus
                                 I2C_SCL       Reset
                                             Detection
                                     VDD
                                                      +             Delay                     reset
                                                      -               td2
                                             VVDDPOR
                                              VDDIO
                                  VDDIO        Reset
                                             Detection
                                            Figure 29. Sources of Reset in the 34827
                                                          TRSTI2C
                           Reset
                        I2C_SDA
                         I2C_SCL
                                                Reset           Start                                            Stop
                                               Condition      Condition                                        Condition
                                         Figure 30. Hardware Reset Using the I2C Bus
                                                                                                                              MC34827
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                             35


FUNCTIONAL DEVICE OPERATION
I2C SERIAL BUS INTERFACE
                                                      TRSTVDDIO
                   Reset
                   VDDIO
                                      Figure 31. Hardware Reset Using the VDDIO Input
                                                I2C SERIAL BUS INTERFACE
   The I2C bus is enabled in the Standby, the Power Save,
and the Active modes. The serial clock (SCL) and the serial
data (SDA) lines must be connected to a positive supply              0      1      0        0      1      0      1     R/W
using pull-up resistors. The 34827 is a slave device.
Maximum data rate is 400 kbps.                                                  Figure 32. I2C Slave Address
                                                                    The following three figures show three I2C-bus transaction
ADDRESSING AND PROTOCOL                                          protocols. The Word Address is an 8-bit register address in
   The 7-bit address for the 34827 is default to 0100101, as     the 34827.
shown in Figure 32.
                                      Figure 33. Master Transmits to Slave (Write Mode)
             Figure 34. Master Reads After Setting Word Address (Write Word Address and then Read Data)
MC34827
                                                                                         Analog Integrated Circuit Device Data
36                                                                                                   Freescale Semiconductor


                                                                                                FUNCTIONAL DEVICE OPERATION
                                                                                                     I2C SERIAL BUS INTERFACE
                          Figure 35. Master Reads Slave Immediately After First Byte (Read Mode)
I2C MODULE INTERFACES                                               the I2C bus reads from or write to. The Word Address
   Figure 36 shows the conceptual block diagram. The Word           automatically increment after each byte of bus access.
Address is an 8-bit register that stores the register address
                                                       VDDIO
                                                                   VD         POR
                                I2C_SCL
                                                                           Word
                                                             Clock
                                                                          Address
                                I2C_SDA                                                  Internal
                                                                                           Bus
                                                             Data
                                       Figure 36. I2C Module Conceptual Block Diagram
                                                                                                                        MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                     37


   FUNCTIONAL DEVICE OPERATION
   REGISTER MAP
                                                                        REGISTER MAP
Table 10. Register Map
                              Rest
Addr     Register       Type              Bit 7          Bit 6             Bit 5            Bit 4          Bit 3          Bit 2              Bit 1             Bit 0
                              Value
 01H       Device ID      R  00010001                                      Version ID                                                      Vendor ID
 02H        Control      R/W 00011111    Reserved      Reserved          Reserved        Switch_Open    RAW DATA        Manual S/W           Wait           INT_MASK
 03H      Interrupt 1    R/C   00H     OVP_OTP_DIS     OTP_EN             OVP_EN             LKR             LKP            KP              Detach             Attach
 04H      Interrupt 2    R/C   00H       Reserved      Reserved          Reserved      Stuck_Key_RCV     Stuck_Key     ADC_Change       Unknown_Atta       A/V_Charging
 05H   Interrupt Mask 1  R/W   00H    OVP_OTP_DIS_m   OTP_EN_m          OVP_EN_m            LKR_m          LKP_m          KP_m             Detach_m          Attach_m
 06H   Interrupt Mask 2  R/W   00H       Reserved      Reserved          Reserved     Stuck_Key_RCV_m  Stuck_Key_m   ADC_Change_m Unknown_Atta_m A/V_Charging_m
 07H     ADC Result       R  00011111    Reserved      Reserved          Reserved                                      ADC Result
 08H     Timing Set 1    R/W   00H                                Key Press                                                    Device Wake Up
 09H     Timing Set 2    R/W   00H                             Switching Wait                                                  Long Key Press
                                                       Dedicated
 0AH    Device Type 1     R    00H       USB OTG                         USB CHG           5W CHG           UART           USB           Audio Type 2      Audio Type 1
                                                         CHG
 0BH    Device Type 2     R    00H       Reserved         A/V               TTY              PPD      JIG_UART_OFF    JIG_UART_ON       JIG_USB_OFF        JIG_USB_ON
 0CH       Button 1      R/C   00H          7               6                 5                4              3              2                 1                  0
 0DH       Button 2      R/C   00H       Reserved      Unknown              Error             12              11            10                 9                  8
 0E-
           Reserved
 12H
 13H    Manual S/W 1     R/W   00H                  DM Switching                                      DP Switching                               VBUS Switching
 14H    Manual S/W 2     R/W   00H       Reserved      Reserved          Reserved         CHG_DET        BOOT_SW         JIG_ON                     Reserved
 20H      FSL Status      R  0x110xxx    Reserved    FET_STATUS        ID_DET_END      VBUS_DET_END       ID_GND        ID_FLOAT          VBUS_DET        ADC_STATUS
 21H     FSL Control     R/W 001000x0   FSL_TEST      TTY_SPKL          AutoPSAVE          Reserved       Reserved        RESET            FET_ON            Reserved
 22H      Time Delay     R/W 10010100                   Activity Idle Detection Time                                                 TD
 23H     Device Mode     R/W   01H       Reserved      Reserved          Reserved          Reserved       Reserved        PSAVE             ACTIVE              RST
   Table 11. Device ID Register
       Bit         Mode         Symbol              Reset                                             Description                                           Notes
     2-0              R        Vendor ID             001               A unique number for chip vendor
     7-3                                                               A unique number for chip version                                                       (17)
                      R        Version ID           00010
   Notes:
     17. the initial version is 00010. For the actual version please consult the factory.
   MC34827
                                                                                                                   Analog Integrated Circuit Device Data
   38                                                                                                                             Freescale Semiconductor


                                                                                            FUNCTIONAL DEVICE OPERATION
                                                                                                                  REGISTER MAP
Table 12. Control Register
  Bit     Mode          Symbol        Reset                                 Description                                  Notes
   0       R/W        INT_MASK          1   Master mask for the interrupt
                                            0: Enable the interrupt output at the INTB pin. The timing of switching
                                            action is determined by Wait bit.
                                            1: Disable the interrupt output at the INTB pin. Under this condition, INTB
                                            outputs low voltage, and the signal switches for attached accessories
                                            except JIG cable will not be turned on. The baseband shouldn’t read
                                            interrupt registers before this bit is changed to 0.
   1       R/W            Wait          1   Wait or not to wait for the command from the baseband before turning on
                                            the analog or digital switches for attached accessory
                                            0: Wait until this bit is changed to 1. Turn on the switches immediately
                                            when this bit is changed to 1.
                                            1: Wait for only the time programmed by the Switching Wait bits in Timing
                                            Set 2 register before turning on the switches.
   2       R/W       Manual S/W         1   Manual or automatic switching of the switches
                                            0: manual: the switches are controlled by the Manual S/W registers.
                                            1: auto: the switches are controlled by the Device Type registers
   3       R/W       RAW DATA           1   Interrupt behavior selection
                                            0: Enable the ADC conversion periodically and report the ADC Result
                                            changes on ID pin to the host.
                                            1: Enable the key press monitor circuit to detect the ID pin status changes
                                            and report the key press events to the host.
   4       R/W       Switch_Open        1   Switch connection selection
                                            0: Open all switches
                                            1: Switch selection according to the Manual S/W bit.
  7-5      R/W         Reserved        000
Table 13. Interrupt Register 1
  Bit     Mode          Symbol        Reset                                 Description                                  Notes
   0       R/C           Attach         0   1: accessory attached
   1       R/C          Detach          0   1: accessory detached
   2       R/C             KP           0   1: remote controller key is pressed
   3       R/C            LKP           0   1: remote controller long key is pressed
   4       R/C            LKR           0   1: remote controller long key is released
   5       R/C         OVP_EN           0   1: VBUS voltage higher than the OVP threshold
   6       R/C         OTP_EN           0   1: The temperature of the 34827 is above the OTP threshold
   7       R/C     OVP_OTP_DIS          0   1: OVP or OTP event is removed
Table 14. Interrupt Register 2
  Bit     Mode          Symbol        Reset                                 Description                                  Notes
   0       R/C      A/V_Charging        0   1: a charger is detected when the A/V cable is attached
   1       R/C      Unknown_Atta        0   1: an unknown accessory is attached
   2       R/C      ADC_Change          0   1: ADC Result has changed when the RAW DATA = 0
   3       R/C        Stuck_Key         0   1: Stuck key is detected
                                                                                                                        MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                      39


 FUNCTIONAL DEVICE OPERATION
 REGISTER MAP
Table 14. Interrupt Register 2
   Bit    Mode          Symbol      Reset                               Description                                Notes
    4      R/C     Stuck_Key_RCV       0  1: Stuck key is recovered
   7-5                 Reserved       000
Table 15. Interrupt Mask Register1
   Bit    Mode          Symbol      Reset                               Description                                Notes
    0      R/W         Attach_m        0  1: interrupt output disabled
    1      R/W         Detach_m        0  1: interrupt output disabled
    2      R/W           KP_m          0  1: interrupt output disabled
    3      R/W          LKP_m          0  1: interrupt output disabled
    4      R/W          LKR_m          0  1: interrupt output disabled
    5      R/W        OVP_EN_m         0  1: interrupt output disabled
    6      R/W        OTP_EN_m         0  1: interrupt output disabled
    7      R/W    OVP_OTP_DIS_m        0  1: interrupt output disabled
Table 16. Interrupt Mask Register 2
  Bit     Mode          Symbol      Reset                               Description                                Notes
   0       R/W       A/V_CHG_m         0   1: interrupt output disabled
   1       R/W     Unknown_Atta_m      0   1: interrupt output disabled
   2       R/W     ADC_Change_m        0   1: interrupt output disabled
   3       R/W       Stuck_Key_m       0   1: interrupt output disabled
   4       R/W    Stuck_Key_RCV_m      0   1: interrupt output disabled
  7-5                  Reserved       000
Table 17. ADC Result Register
   Bit    Mode          Symbol      Reset                               Description                                Notes
   4-0      R         ADC Result    00000 ADC result value of the resistance at ID pin
   7-5      R          Reserved       000
Table 18. Timing Set Register 1
   Bit    Mode          Symbol      Reset                               Description                                Notes
   3-0     R/W     Device Wake-up    0000 The periodical sampling time of the ID line in the Power-save mode and
                                          Standby mode; the periodical time of ADC conversion of the resistance at
                                          ID pin when RAW DATA = 0.
                                          0000: 50 ms
                                          0001: 100 ms
                                          0010: 150 ms
                                          0011: 200 ms
                                          0100: 300 ms
                                          ...
MC34827
                                                                                    Analog Integrated Circuit Device Data
40                                                                                               Freescale Semiconductor


                                                                                              FUNCTIONAL DEVICE OPERATION
                                                                                                                   REGISTER MAP
Table 18. Timing Set Register 1
  Bit      Mode        Symbol              Reset                              Description                                  Notes
  7-4       R/W       Key Press            0000  Normal key press duration
                                                 0000: 100 ms
                                                 0001: 200 ms
                                                 0010: 300 ms
                                                 ...
Table 19. Timing Set Register 2
  Bit      Mode        Symbol              Reset                              Description                                  Notes
  3-0       R/W     Long Key Press         0000  Long key press duration
                                                 0000: 300 ms
                                                 0001: 400 ms
                                                 0010: 500 ms
                                                 ...
  7-4       R/W     Switching Wait         0000  Waiting time before switching the analog or digital switches:
                                                 0000: 10 ms
                                                 0001: 30 ms
                                                 0010: 50 ms
                                                 ...
Table 20. Timing Table
      Setting Value           Device Wake-up           Key Press                 Long Key Press                Switching Wait
           0000                      50 ms               100 ms                       300 ms                        10 ms
           0001                     100 ms               200 ms                       400 ms                        30 ms
           0010                     150 ms               300 ms                       500 ms                        50 ms
           0011                     200 ms               400 ms                       600 ms                        70 ms
           0100                     300 ms               500 ms                       700 ms                        90 ms
           0101                     400 ms               600 ms                       800 ms                       110 ms
           0110                     500 ms               700 ms                       900 ms                       130 ms
           0111                     600 ms               800 ms                      1000 ms                       150 ms
           1000                     700 ms               900 ms                      1100 ms                       170 ms
           1001                     800 ms              1000 ms                      1200 ms                       190 ms
           1010                     900 ms                  -                        1300 ms                       210 ms
           1011                    1000 ms                  -                        1400 ms                          -
           1100                        -                    -                        1500 ms                          -
           1101                        -                    -                            -                            -
           1110                        -                    -                            -                            -
           1111                        -                    -                            -                            -
Table 21. Device Type Register 1
  Bit      Mode        Symbol              Reset                              Description                                  Notes
   0         R       Audio Type 1            0   1: an audio type 1 accessory is attached
   1         R       Audio Type 2            0   1: an audio type 2 accessory is attached
                                                                                                                          MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                        41


FUNCTIONAL DEVICE OPERATION
REGISTER MAP
Table 21. Device Type Register 1
   Bit    Mode        Symbol        Reset                                    Description                               Notes
    2       R           USB           0       1: a USB host is attached
    3       R          UART           0       1: a UART cable is attached
    4       R         5W CHG          0       1: a 5-wire charger (type 1 or 2) is attached
    5       R        USB CHG          0       1: a USB charger is attached
    6       R        Dedicated        0       1: a dedicated charger is attached
    7       R        USB OTG          0       1: a USB OTG accessory is attached
Table 22. Device Type Register 2
   Bit    Mode        Symbol        Reset                                    Description                               Notes
    0       R      JIG_USB_ON         0       1: A USB jig cable with the BOOT-off option is attached
    1       R      JIG_USB_OFF        0       1: a USB jig cable with the BOOT-on option is attached
    2       R     JIG_UART_ON         0       1: a UART jig cable with the BOOT-off option is attached
    3       R     JIG_UART_OFF        0       1: a UART jig cable with the BOOT-on option is attached
    4       R           PPD           0       1: a phone powered device is attached
    5       R           TTY           0       1: a TTY converter is attached
    6       R           A/V           0       1: an audio/video cable is attached
    7       R         Reserved        0
Table 23. Remote Controller Button Register 1
   Bit    Mode        Symbol        Reset                                    Description                               Notes
    0      R/C       Send_End         0       1: the Send_End button is pressed
    1      R/C            1           0       1: button 1 is pressed
    2      R/C            2           0       1: button 2 is pressed
    3      R/C            3           0       1: button 3 is pressed
    4      R/C            4           0       1: button 4 is pressed
    5      R/C            5           0       1: button 5 is pressed
    6      R/C            6           0       1: button 6 is pressed
    7      R/C            7           0       1: button 7 is pressed
Table 24. Remote Controller Button Register 2
   Bit    Mode        Symbol        Reset                                    Description                               Notes
    0      R/C            8           0       1: button 8 is pressed
    1      R/C            9           0       1: button 9 is pressed
    2      R/C           10           0       1: button 10 is pressed
    3      R/C           11           0       1: button 11 is pressed
    4      R/C           12           0       1: button 12 is pressed
    5      R/C          Error         0       1: button error occurred
    6      R/C        Unknown         0       1: an unknown button is pressed
    7      R/C        Reserved        0
MC34827
                                                                                         Analog Integrated Circuit Device Data
42                                                                                                   Freescale Semiconductor


                                                                                                    FUNCTIONAL DEVICE OPERATION
                                                                                                                     REGISTER MAP
Table 25. Manual Switching Register 1
  Bit     Mode         Symbol             Reset                                       Description                           Notes
  1-0      R/W     VBUS Switching           00          VBUS line switching configuration when Manual S/W = 0
                                                        00: open all switches
                                                        01: internal power MOSFET on
                                                        10: VBUS connects to MIC
                                                        Others: open all switches connected to the VBUS line.
  4-2      R/W       DP Switching          000          DP line switching configuration when Manual S/W = 0
                                                        000: open all switches
                                                        001: DP connected to D+, DM connected to D-
                                                        010: DP connected to SPK_R, DM connected to SPK_L
                                                        011: DP connected to RxD, DM connected to TxD
                                                        Others: open all switches connected to the DP pin and DM pin
  7-5       R        DM Switching          000          DM line switching configuration when Manual S/W = 0                  (18)
                                                        000: open all switches
                                                        001: DP connected to D+, DM connected to D-
                                                        010: DP connected to SPK_R, DM connected to SPK_L
                                                        011: DP connected to RxD, DM connected to TxD
                                                        Others: open all switches connected to the DP pin and DM pin
Notes:
 18. DM Switching bits are read-only and equal to the corresponding bits in DP switching bits.
Table 26. Manual Switching Register 2
  Bit     Mode         Symbol             Reset                                       Description                           Notes
  1-0      R/W         Reserved             00
   2       R/W         JIG_ON                0          JIG output when Manual S/W = 0
                                                        0: low impedance
                                                        1: high impedance
   3       R/W        BOOT_SW                0          BOOT output when Manual S/W = 0
                                                        0: low logic voltage
                                                        1: high logic voltage
   4       R/W        CHG_DET                0          ISET output when Manual S/W = 0
                                                        0: high impedance
                                                        1: low impedance
  7-5      R/W         Reserved            000
Table 27. FSL Status Register 1
  Bit     Mode         Symbol             Reset                                       Description                           Notes
   0        R       ADC_STATUS               x          ADC conversion status
                                                        1: ADC conversion completed
                                                        0: ADC conversion in progress
   1        R         VBUS_DET               x          VBUS voltage is higher than the POR
                                                        0: no
                                                        1: yes
                                                                                                                           MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                           43


FUNCTIONAL DEVICE OPERATION
REGISTER MAP
Table 27. FSL Status Register 1
   Bit    Mode          Symbol               Reset                                    Description                                  Notes
    2      R          ID_FLOAT                 x       ID line is floating
                                                       0: no
                                                       1: yes
    3      R            ID_GND                 0       ID pin is shorted to ground
                                                       0: no
                                                       1: yes
    4      R       VBUS_DET_END                1       VBUS power supply type identification completed
                                                       0: no
                                                       1: yes
    5      R        ID_DET_END                 1       ID resistance detection finished
                                                       0: no
                                                       1: yes
    6      R        FET_STATUS                 x       The on/off status of the power MOSFET
                                                       0: off
                                                       1: on
    7      R           Reserved                0
Table 28. FSL Control Register
   Bit    Mode          Symbol               Reset                                    Description                                  Notes
    0     R/W          Reserved                0
                                                       The ON/OFF control of the power MOSFET                                       (19)
    1     R/W          FET_ON                  x
                                                       0: off
                                                       1: on
    2     W/C            RESET                 0       Soft reset. When written to 1, the IC is reset. Once the reset is complete,
                                                       the RST bit is set and the RESET bit is cleared automatically.
                                                       1: to soft-reset the IC
    3     R/W          Reserved                0
    4     R/W          Reserved                0
    5     R/W        AutoPSAVE                 1       Automatic Power-save mode detection control
                                                       0: disable automatic Power Save mode detection. Device can enter
                                                       Power Save mode via the I2C.
                                                       1: enable automatic Power Save mode detection. Device cannot enter
                                                       Power Save mode via the I2C.
    6     R/W         TTY_SPKL                 0       SPK_L to DM switch control
                                                       0: Turn off the SPK_L to DM switch
                                                       1: Turn on the SPK_L to DM switch for TTY
    7     R/W         FSL_TEST                 0       Access control for Freescale test registers 0x24H, 0x25H and 0x26H
                                                       0: I2C cannot access FSL test registers 0x24H, 0x25H and 0x26H
                                                       1: I2C can access FSL test registers 0x24H, 0x25H and 0x26H
Notes:
 19. The reset value will be 1 if the VBUS is powered.
MC34827
                                                                                                  Analog Integrated Circuit Device Data
44                                                                                                              Freescale Semiconductor


                                                                                             FUNCTIONAL DEVICE OPERATION
                                                                                                                    REGISTER MAP
Table 29. Time Delay Register
  Bit     Mode         Symbol         Reset                                  Description                                    Notes
  3-0      R/W            TD           0100 Time delay to start the powered accessory identification flow after
                                            detecting the bus voltage
                                            0000: 100 ms
                                            0001: 200 ms
                                            0010: 300 ms
                                            0011: 400 ms
                                            0100: 500 ms
                                            ...
                                            1111:1600 ms
  7-4      R/W        Activity Idle    1001 The time for no activity in the switches before entering the Power Save
                    Detection Time          mode automatically for Audio Type 1 or TTY device
                                            0000: 1 s
                                            0001: 2 s
                                            ...
                                            1001:10 s
                                            ...
                                            1111:16 s
Table 30. Device Mode Register
  Bit     Mode         Symbol         Reset                                  Description                                    Notes
   0       R/C           RST             1  This bit indicates if a chip reset has occurred. This bit will be cleared once
                                            being read.
                                            0: no.
                                            1: Yes.
   1       R/W         ACTIVE            0  Indicate either the device is in Active mode
                                            0: Standby
                                            1: Active
   2       R/W          PSAVE            0  To indicate either the device is in Power-save mode
                                            0: no
                                            1: yes
  7-3                  Reserved       00000
                                                                                                                           MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                         45


 TYPICAL APPLICATIONS
 APPLICATION INFORMATION
                                                 TYPICAL APPLICATIONS
                                                  APPLICATION INFORMATION
ID RESISTANCE VALUE ASSIGNMENT
                                                                Table 32. ADC Output and ID Resistor Values for Remote
    The ID resistors used with the 34827 are standard 1%                   Control Buttons (Unit: kΩ)
resistors. Table 33 shows a table of standard E96 resistor
values.                                                             Item#        Functions   ID ADC Result     RID Value
    The ADC Result values vs. all 32 ID-resistance values are          1         Send/End         00001            2.0
listed in Table 7. Table 32 shows the remote control buttons
vs. the ADC Result values and the ID-resistance values.                2            S1            00010          2.604
These functions are tentative and will be decided by                   3            S2            00011          3.208
Samsung. The remote control architecture is illustrated in
                                                                       4            S3            00100          4.014
Figure 37. The recommended resistors for the remote control
resistor network are given in Table 31.                                5            S4            00101           4.82
    Table 34 lists the complete 32 ID-resistor assignment. The         6            S5            00110           6.03
ones with the Assigned Functions filled are the ones that are
already used. The ones reserved can be assigned to other               7            S6            00111           8.03
functions.                                                             8            S7            01000          10.03
Table 31. Remote Control Resistor Values (Unit: kΩ)                    9            S8            01001          12.03
        Resistor         Standard Value        ID Resistance          10            S9            01010          14.46
                                                                      11           S10            01011          17.26
          R1                    2.0                   2.0
                                                                      12           S11            01100           20.5
          R2                  0.604                 2.604
                                                                      13           S12            01101          24.07
          R3                  0.604                 3.208
          R4                  0.806                 4.014       Table 33. E96 Series Resistor Values (Unit: kΩ)
          R5                  0.806                  4.82           1       1.02      1.05      1.07       1.1       1.13
          R6                   1.21                  6.03         1.15      1.18      1.21      1.24      1.27        1.3
          R7                    2.0                  8.03         1.33      1.37       1.4      1.43      1.47        1.5
          R8                    2.0                 10.03         1.54      1.58      1.62      1.65      1.69       1.74
          R9                    2.0                 12.03         1.78      1.82      1.87      1.91      1.96          2
          R10                  2.43                 14.46         2.05       2.1      2.15      2.21      2.26       2.32
          R11                   2.8                 17.26         2.37      2.43      2.49      2.55      2.61       2.67
          R12                  3.24                  20.5         2.74       2.8      2.87      2.94      3.01       3.09
          R13                  3.57                 24.07         3.16      3.24      3.32       3.4      3.48       3.57
          R14                  976                  1000          3.65      3.74      3.83      3.92      4.02       4.12
                                                                  4.22      4.32      4.42      4.53      4.64       4.75
                                                                  4.87      4.99      5.11      5.23      5.36       5.49
     ID             R1     R2       R3         R13
                                                                  5.62      5.76       5.9      6.04      6.19       6.34
                                         …...
              SEND/END      S1       S2         S12       R14
                                                                  6.49      6.65      6.81      6.98      7.15       7.32
     GND         HOLD
                                                                   7.5      7.68      7.87      8.06      8.25       8.45
                                                                  8.66      8.87      9.09      9.31      9.53       9.76
           Figure 37. Remote Control Architecture                  10       10.2      10.5      10.7      11.0       11.3
                                                                  11.5      11.8      12.1      12.4      12.7         13
                                                                  13.3      13.7       14       14.3      14.7         15
MC34827
                                                                                     Analog Integrated Circuit Device Data
46                                                                                                Freescale Semiconductor


                                                                                           TYPICAL APPLICATIONS
                                                                                     APPLICATION INFORMATION
Table 33. E96 Series Resistor Values (Unit: kΩ)         Table 34. ID Resistance Assignment (Unit: kΩ)
   15.4     15.8      16.2       16.5    16.9      17.4  Item#     ADC Result    ID Resistance      Assignment
   17.8     18.2      18.7       19.1    19.6       20      2        00010           2.604               S1
   20.5       21      21.5       22.1    22.6      23.2     3        00011           3.208               S2
   23.7     24.3      24.9       25.5    26.1      26.7     4        00100           4.014               S3
   27.4       28      28.7       29.4    30.1      30.9     5        00101           4.820               S4
   31.6     32.4      33.2        34     34.8      35.7     6        00110            6.03               S5
   36.5     37.4      38.3       39.2    40.2      41.2     7        00111            8.03               S6
   42.2     43.2      44.2       45.3    46.4      47.5     8        01000           10.03               S7
   48.7     49.9      51.1       52.3    53.6      54.9     9        01001           12.03               S8
   56.2     57.6        59       60.4    61.9      63.4    10        01010           14.46               S9
   64.9     66.5      68.1       69.8    71.5      73.2    11        01011           17.26              S10
    75      76.8      78.7       80.6    82.5      84.5    12        01100            20.5              S11
   86.8     88.7      90.9       93.1    95.3      97.6    13        01101           24.07              S12
   100       102       105       107     110       113     14        01110            28.7           Reserved
   115       118       121       124     127       130     15        01111            34.0           Reserved
   133       137       140       143     147       150     16        10000            40.2           Reserved
   154       158       162       165     169       174     17        10001            49.9           Reserved
   178       182       187       191     196       200     18        10010            64.9           Reserved
   205       210       215       221     226       232     19        10011           80.07         Audio Type 2
   237       243       249       255     261       267     20        10100            102               PPD
   274       280       287       294     301       309     21        10101            121               TTY
   316       324       332       340     348       357     22        10110            150              UART
   365       374       383       392     402       412     23        10111            200             5W_T1
   422       432       442       453     464       475     24        11000            255         JIG_USB_OFF
   487       499       511       523     536       549     25        11001            301          JIG_USB_ON
   562       576       590       604     619       634     26        11010            365               A/V
   649       665       681       698     715       732     27        11011            442             5W_T2
   750       7.8       787       806     825       845     28        11100            523        JIG_UART_OFF
   868       887       909       931     953       976     29        11101            619         JIG_UART_ON
Table 34. ID Resistance Assignment (Unit: kΩ)              30        11110           1000          Audio/Remote
                                                                                                     Controller
 Item#     ADC Result      ID Resistance   Assignment
                                                           30        11110           1002            Audio/Only
    0         00000              -        A/V or USBOTG                                              Send_End
    1         00001             2.0         SEND_END       31        11111              -            ID FLOAT
                                                                                                           MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                         47


 TYPICAL APPLICATIONS
 APPLICATION INFORMATION
DECOUPLING CAPACITOR                                                                         ACCESSORY IDENTIFICATION TIMING
    Decoupling capacitors are required at all power supply                                        When an accessory is connected to the 34827, the 34827
input and output pins. For VDD pin, a X5R capacitor of 1.0 μF                                identifies the accessory type and then interrupts the cell
is recommended. For VBUS pin, because it also acts as the                                    phone baseband. Figure 38 to Figure 41 show the
microphone input, the decoupling capacitance at VBUS pin                                     identification timing for different accessories. When the
must be carefully considered. Assuming the voice band is                                     phone is on the power-on state, the VDDIO has already been
3.4 kHz and the pull-up resistance for the microphone is                                     powered. When the phone is on the power-off state, the
2.0 kΩ, the decoupling capacitance at the VBUS pin should                                    VDDIO is not powered yet. Once the VDDIO is powered, the
be less than 22 nF. A 4.7 nF X5R capacitor is recommended                                    I2C of the 34827 can be accessed.
for the typical application.
         VDD                                                                                      VDD
      VDDIO                                                                                    VDDIO
                                                                                                                                       INT_MASK is cleared manually
  INT_MASK                                                                                INT_MASK                                     by I2C after I2C is valid
                                                                                                                          t1               t2 = twait     (t1 = tdet - twait)
                                                                                                                                           t2 = tdet - t1 (t1 < tdet - twait)
   Attaching                                                                                Attaching                                     twait: Delay defined by the Switching
                                          ID Identification flow delay                                                              t2    Wait in register 0x09 when the
                                                                                                                                          WAIT=1
                                                                                                                                          tdet: ID Identification flow delay
        INTB                                                                                     INTB
                                                                                                                                                        Delay defined by the Switching
                                                                                                                                                        Wait in register 0x09 when the
                                                                                                                                                        WAIT=1
                       HI-Z                                                                                      HI-Z
     JIG_ON                                                                                   JIG_ON
                                                     Delay defined by the Switaching Wait
                                                     in register 0x09 when the WAIT=1
                    OPEN                                      CLOSED                                              OPEN                                          CLOSED
    Switches                                                                                Switches
                                                                                                                                1.2ms
                      VALID                   VALID                            VALID                         NOT VALID                                VALID
          I2C                                                                                      I2C
              (a) Audio accessory identification Timing in phone power -on state                       (b) Audio accessory identification Timing in phone power -off state
                                       Figure 38. ID Based Accessory Identification Timing Diagram
MC34827
                                                                                                                           Analog Integrated Circuit Device Data
48                                                                                                                                           Freescale Semiconductor


                                                                                                                                                        TYPICAL APPLICATIONS
                                                                                                                                               APPLICATION INFORMATION
         VDD                                                                                          VDD
      VDDIO                                                                                         VDDIO
                                                                                                                                                          INT_MASK is cleared manually
                                                                                                                                                          by I2C after I2C is valid
 INT_MASK                                                                                      INT_MASK
                                              VBUS detection delay time                                                                                     Delay defined by the Switching
                                              defined in register 0x22 and                                                                                  Wait in register 0x09 when the
  Attaching                                   Identification flow delay                         Attaching                                                   WAIT=1
        INTB                                                                                         INTB
                                                                                                                                                VBUS detection delay time
                                                                                                                                                defined in register 0x22 and
                                                                                                                                                Identification flow delay
                       HI-Z                                                                                          HI-Z
        ISET                                                                                          ISET
                       HI-Z                                                                                          HI-Z
     JIG_ON                                                                                       JIG_ON
                               ~4.5ms                                                                                         ~4.5ms
       Power     OPEN                           CLOSED                                               Power      OPEN                            CLOSED
       Switch                                                                                       Switch
                                                                                                                                                       1.2ms
                     VALID                  VALID                             VALID                                  NOT VALID                                          VALID
           I2C                                                                                         I2C
                 (a) Charger identification Timing in phone power-on state                                      (b) Charger identification Timing in phone power-off state
                                                 Figure 39. Charger Identification Timing Diagram
           VDD                                                                                             VDD
        VDDIO                                                                                           VDDIO
                                                                                                                                                                  INT_MASK is cleared manually
                                                                                                                                                                  by I2C after I2C is valid
   INT_MASK                                                                                        INT_MASK
    Attaching                                      VBUS detection delay time                         Attaching
                                                                                                                                                                       Delay defined by the
                                                   defined in register 0x22 and                                                                                        Switching Wait in register
                                                   Identification flow delay                                                                                           0x09 when the WAIT=1
          INTB                                                                                            INTB
                                                                                                                                              VBUS detection delay time
                                                                                                                                              defined in register 0x22 and
                                                                                                                                              Identification flow delay
                       HI-Z                                                                                             HI-Z
      JIG_ON                                                                                           JIG_ON
                               ~4.5ms                                                                                            ~4.5ms
        Power    OPEN                CLOSED                                                              Power     OPEN                           CLOSED
       Switch                                                                                           Switch
                                                          Delay defined by the Switaching Wait                                                   ~1ms
                                                          in register 0x09 when the WAIT=1
        Signal        OPEN                                      CLOSED                                   Signal      OPEN                                 CLOSED
     Switches                                                                                         Switches
                                                                                                                                                  1.2ms
                     VALID                  VALID                            VALID                                  NOT VALID                              VALID
             I2C                                                                                            I2C
                 (a) JIG_USB identification Timing in phone power-on state                                         (b) Charger identification Timing in phone power-off state
                                            Figure 40. JIG USB cable Identification Timing Diagram
                                                                                                                                                                                     MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                                                                                       49


TYPICAL APPLICATIONS
APPLICATION INFORMATION
          VDD                                                                               VDD
       VDDIO                                                                             VDDIO
                                                                                                                                 INT_MASK is cleared manually
                                                                                                                                 by I2C after I2C is valid
   INT_MASK                                                                          INT_MASK
                                   VBUS detection delay time                                                      t1                     t2 = twait    (t1 = tdet - twait)
                                   defined in register 0x22 and                                                                          t2 = td - t1 (t1 < tdet - twait)
    Attaching                      Identification flow delay                          Attaching
                                                                                                                              t2        twait: Delay defined by the Switching
                                                                                                                                        Wait in register 0x09 when the
                                                                                                                                        WAIT=1
                                                                                                                                        td: ID Identification flow delay
         INTB                                                                              INTB
                   HI-Z                                                                               HI-Z
         ISET                                                                              ISET
                   HI-Z                                                                               HI-Z
      JIG_ON                                                                            JIG_ON
                              ~4.5ms                                                                            ~4.5ms
       Power   OPEN                             CLOSED                                   Power                                           CLOSED
                                                                                                 OPEN
       Switch                                                                            Switch
                                                 Delay defined by the Switching Wait
                                                 in register 0x09 when the WAIT=1
       Signal   OPEN                                      CLOSED                          Signal               OPEN                                        CLOSED
     Switches                                                                          Switches
                                                                                                                           1.2ms
                  VALID                     VALID                           VALID                     NOT VALID                       VALID
           I2C                                                                               I2C
                (a) USB identification Timing in phone power-on state                               (b) USB identification Timing in phone power-off state
                                             Figure 41. USB Host Identification Timing Diagram
MC34827
                                                                                                                   Analog Integrated Circuit Device Data
50                                                                                                                                     Freescale Semiconductor


                                                                                                                  TYPICAL APPLICATIONS
                                                                                                                  TYPICAL APPLICATIONS
                                                      TYPICAL APPLICATIONS
INTERFACE CIRCUIT IN A CELL PHONE                                    phone baseband/application processor are direct-drive
    When the 34827 is used in a cell phone, the typical circuit      signals, the audio signals can go into the corresponding pins
is shown in the Figure 42. The I2C bus need pull-up resistors.       of 34827 directly. Otherwise these signals need DC-blocking
Typically they are 4.7 kΩ. When the audio outputs of the cell        capacitors to remove the DC level.
                                      VDDIO
                                             2x4.7 k
                 Baseband                                              VDD
                                                                                                       MC34673              1.0 µF
                                                      I2C_SDA                        1.0 µF     Li+
                            I2C                       I2C_SCL
                                                      INTB
                          GPIO                        VDDIO
                                                                                               12 k         9.1 k
                                                      RxD              ISET
                          UART
                                                      TxD
                                                                       OUT
                                                      D+              VBUS                                                 VBUS
                       USB Xcvr
                                                      D-
                                                                                        4.7 nF
                           Test                       JIG
                        Interface                     BOOT
                                              VAIO                        ID                                               ID
                                                                         DP                                                D+
                                                2.0 k                    DM                                                D-
                                   0.1 µF                              GND                                                 GND
                                                      MIC                                                                  SHLD
                          Audio             *
                                                      SPK_L
                                            *
                                                      SPK_R
                                                                               * : For direct-drive audio output, these DC
                                                                                   blocking capacitors are not needed
                                       Figure 42. Interface Circuit in a Cell Phone System
                                                                                                                                   MC34827
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                               51


TYPICAL APPLICATIONS
PACKAGE DIMENSIONS
                                                      PACKAGE DIMENSIONS
   For the most current package revision, visit www.freescale.com and perform a keyword search using the “98A” listed below.
                                                                  EP SUFFIX
                                                                 20 PIN. QFN
                                                                98ASA00050D
                                                                 REVISION A
MC34827
                                                                                               Analog Integrated Circuit Device Data
52                                                                                                           Freescale Semiconductor


                                                   TYPICAL APPLICATIONS
                                                   PACKAGE DIMENSIONS
                                        EP SUFFIX
                                       20 PIN. QFN
                                      98ASA00050D
                                       REVISION A
                                                                 MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                               53


TYPICAL APPLICATIONS
PACKAGE DIMENSIONS
                      EP SUFFIX
                      20 PIN. QFN
                     98ASA00050D
                      REVISION A
MC34827
                                  Analog Integrated Circuit Device Data
54                                            Freescale Semiconductor


                                                   TYPICAL APPLICATIONS
                                                   PACKAGE DIMENSIONS
                                       EP SUFFIX
                                       20 PIN. QFN
                                      98ASA00037D
                                       REVISION O
                                                                 MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                               55


TYPICAL APPLICATIONS
PACKAGE DIMENSIONS
                      EP SUFFIX
                      20 PIN. QFN
                     98ASA00037D
                      REVISION O
MC34827
                                  Analog Integrated Circuit Device Data
56                                            Freescale Semiconductor


                                                   TYPICAL APPLICATIONS
                                                   PACKAGE DIMENSIONS
                                       EP SUFFIX
                                       20 PIN. QFN
                                      98ASA00037D
                                       REVISION O
                                                                 MC34827
Analog Integrated Circuit Device Data
Freescale Semiconductor                                               57


REVISION HISTORY
                                          REVISION HISTORY
  Revision      Date                                     Description of Changes
    2.0         3/2011 • Initial release
    3.0                • No technical changes. Revised back page. Updated document properties. Added SMARTMOS
                6/2014
                         sentence to last paragraph.
MC34827
                                                                                 Analog Integrated Circuit Device Data
58                                                                                              Freescale Semiconductor


How to Reach Us:      Information in this document is provided solely to enable system and software implementers to use Freescale products.
                      There are no express or implied copyright licenses granted hereunder to design or fabricate any integrated circuits based
Hom e Page:
freescale.com         on the information in this document.
Web Suppor t:         Freescale reserves the right to make changes without further notice to any products herein. Freescale makes no
freescale.com/support warranty, representation, or guarantee regarding the suitability of its products for any particular purpose, nor does
                      Freescale assume any liability arising out of the application or use of any product or circuit, and specifically disclaims any
                      and all liability, including without limitation consequential or incidental damages. “Typical” parameters that may be
                      provided in Freescale data sheets and/or specifications can and do vary in different applications, and actual performance
                      may vary over time. All operating parameters, including “typicals,” must be validated for each customer application by
                      customer’s technical experts. Freescale does not convey any license under its patent rights nor the rights of others.
                      Freescale sells products pursuant to standard terms and conditions of sale, which can be found at the following address:
                      freescale.com/SalesTermsandConditions.
                      Freescale and the Freescale logo are trademarks of Freescale Semiconductor, Inc., Reg. U.S. Pat. & Tm. Off.
                      SMARTMOS is a trademark of Freescale Semiconductor, Inc. All other product or service names are the property of their
                      respective owners.
                      © 2014 Freescale Semiconductor, Inc.
                                                                                                          Document Number: MC34827
                                                                                                                                          Rev. 3.0
                                                                                                                                            6/2014


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
NXP:
 MC34827A1EPR2 MC34827A2EPR2
