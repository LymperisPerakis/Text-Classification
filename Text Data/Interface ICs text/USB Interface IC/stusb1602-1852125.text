                                                                                                STUSB1602
                       USB Type-C™ controller with TX/RX line driver and BMC
                                                                                             Datasheet - production data
                                                                     Compliant with:
                                                                        – USB Type-C™ rev 1.2
                                                                        – USB PD rev 2.0 (Certif. test ID 1010032)
                                                                     Compatible with:
                                                                        – USB PD rev 3.0
Features                                                            Applications
                                                                     Smart plugs, wall adapters, and chargers
 Type-C™ attach and cable orientation
    detection                                                        Power hubs and docking stations
 Power role support: source/sink/DRP                                Smartphones and tablets
 Configurable start-up profiles                                     Gaming and PNDs
 Integrated power switch for VCONN supply:                          Displays
    – programmable current limit up to 600 mA                        Cameras, camcorders, and MP3 players
    – overcurrent, overvoltage, and thermal                          Any Type-C source or sink device
          protection
    – under-voltage lockout
                                                                    Description
 I²C interface and interrupt
                                                                    The STUSB1602 is a generic IC designed in a
 Integrated VBUS voltage monitoring
                                                                    20 V technology. It addresses USB Type-C™ port
 Integrated VBUS and VCONN discharge path                          management both on the host and/or device side,
 Integrated BMC transceiver                                        and is suited for a broad range of applications.
 VBUS switch gate driver                                           The STUSB1602 can handle all functions from
 Low power standby mode                                            Type-C attach detection, plug orientation
                                                                    detection, host to device connection, VCONN
 Dead battery mode support                                         support, and VBUS configuration.
 Short-to-VBUS protection on CC pins (22 V) and
                                                                    It also provides a USB PD TX/RX line driver and
    VBUS pins (28 V)
                                                                    BMC (biphase mark coding) transceiver which
 Accessory mode support                                            allows USB PD negotiation and alternative mode
 Dual power supply (VSYS and/or VDD):                              through an external MCU.
    – VSYS = [3.0 V; 5.5 V]                                         Additionally, the STUSB1602 provides support for
    – VDD = [4.1 V; 22 V]                                           dead battery operation.
                                                     Table 1. Device summary
          Order code                          USB PD              Package          Temperature range        Marking
 STUSB1602QTR                      SOURCE, SINK                                                         1602
                                                              QFN24 EP 4x4 mm      - 40 °C up to 105 °C
 STUSB1602AQTR                     SOURCE, SINK, DRP                                                    1602A
August 2017                                              DocID028319 Rev 3                                          1/55
This is information on a product in full production.                                                           www.st.com


Contents                                                                                                              STUSB1602
Contents
1        Functional description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5
2        Inputs/outputs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
         2.1   Pinout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
         2.2   Pin list . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
         2.3   Pin description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
               2.3.1      CC1/CC2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
               2.3.2      CC1DB/CC2DB . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
               2.3.3      VCONN . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
               2.3.4      RESET . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
               2.3.5      I²C interface pins . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
               2.3.6      GND . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
               2.3.7      MOSI . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
               2.3.8      NSS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
               2.3.9      MISO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
               2.3.10     TX_EN . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
               2.3.11     SCLK . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
               2.3.12     A_B_SIDE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
               2.3.13     VBUS_SENSE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
               2.3.14     VBUS_EN_SNK . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
               2.3.15     VBUS_EN_SRC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
               2.3.16     VREG1V2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
               2.3.17     VSYS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
               2.3.18     VREG2V7 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
               2.3.19     VDD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
3        Features description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
         3.1   CC interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
         3.2   BMC interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
               3.2.1      BMC interface behavior . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
               3.2.2      TX mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
               3.2.3      RX mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14
         3.3   VBUS power path control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14
               3.3.1      VBUS monitoring . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14
2/55                                        DocID028319 Rev 3


STUSB1602                                                                                                          Contents
                 3.3.2    VBUS discharge . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
                 3.3.3    VBUS power path assertion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
          3.4    VCONN supply . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
                 3.4.1    VCONN input voltage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
                 3.4.2    VCONN application conditions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
                 3.4.3    VCONN monitoring . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
                 3.4.4    VCONN discharge . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
                 3.4.5    VCONN control and status . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
                 3.4.6    VCONN power switches . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
          3.5    Low power standby mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
          3.6    Dead battery mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
          3.7    High voltage protection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
          3.8    Hardware fault management . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
          3.9    Accessory mode detection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
                 3.9.1    Audio accessory mode detection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
                 3.9.2    Debug accessory mode detection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
4         Managing USB PD transactions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
5         I²C interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
          5.1    Read and write operations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
          5.2    Timing specifications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
          5.3    I²C register map . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
6         Start-up configuration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
          6.1    User-defined parameters . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
          6.2    Default start-up configuration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
7         Application . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
          7.1    General information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
                 7.1.1    Power supplies . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
                 7.1.2    Connection to MCU or application processor . . . . . . . . . . . . . . . . . . . . 30
          7.2    USB Type-C typical applications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
                 7.2.1    Source type application . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
                 7.2.2    Sink type application . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35
                 7.2.3    Dual role type application . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
                                         DocID028319 Rev 3                                                                   3/55
                                                                                                                                  55


Contents                                                                                                STUSB1602
8        Electrical characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45
         8.1    Absolute maximum ratings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45
         8.2    Operating conditions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46
         8.3    Electrical and timing characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47
9        Package information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50
         9.1    QFN24 EP 4x4 mm package information . . . . . . . . . . . . . . . . . . . . . . . . . 50
         9.2    Thermal Information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52
         9.3    Packing information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52
10       Terms and abbreviations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53
11       Revision history . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
4/55                                 DocID028319 Rev 3


STUSB1602                                                                      Functional description
1         Functional description
          The STUSB1602 is a USB Type-C controller IC. It is designed to interface with the Type-C
          receptacle both on host and/or device sides. It is used to establish and manage the 
          source-to-sink connection between two USB Type-C host and device ports.
          The major role of the STUSB1602 is to:
          1.  Detect the connection between two USB Type-C ports (attach detection)
          2.  Establish a valid source-to-sink connection
          3.  Determine the attached device mode: source, sink or accessory
          4.  Resolve cable orientation and twist connections to establish USB data routing 
              (mux control).
          5.  Configure and monitor the VBUS power path
          6.  Manage VBUS power capability: USB default, Type-C medium or Type-C high current
              mode.
          7.  Configure VCONN when required
          8.  Support USB PD negotiation
          The STUSB1602 also provides:
          1.  Low power standby mode
          2.  Dead battery mode
          3.  I²C interface and interrupt
          4.  Start-up configuration customization: static through NVM and/or dynamic through I²C
          5.  High voltage protection
          6.  Accessory mode detection
                                      Figure 1. Functional block diagram
                                         DocID028319 Rev 3                                       5/55
                                                                                                      55


Inputs/outputs                                                                      STUSB1602
2          Inputs/outputs
2.1        Pinout
                           Figure 2. STUSB1602 pin connections
2.2        Pin list
                                  Table 2. Pin function list
            Pin      Name    Type               Description               Typical Connection
              1     CC1DB  HV AIO    Dead battery enable on CC1 pin    CC1 pin if used or ground
              2      CC1   HV AIO    Type-C configuration channel 1    Type-C receptacle A5
              3     VCONN   PWR      Power input for active plug       5 V power source
              4      CC2   HV AIO    Type-C configuration channel 2    Type-C receptacle B5
              5     CC2DB  HV AIO    Dead battery enable on CC2 pin    CC2 pin if used or ground
              6     RESET     DI     Reset input (active high)         —
              7       SCL     DI     I²C clock input                   To I²C master, ext. pull-up
                                     I²C data input/output, active low
              8      SDA    DI/OD                                      To I²C master, ext. pull-up
                                     open drain
                                     I²C interrupt, active low open
              9     ALERT#    OD                                       To I²C master, ext. pull-up
                                     drain
             10      GND     GND     Ground                            Ground
6/55                            DocID028319 Rev 3


STUSB1602                                                                        Inputs/outputs
                                Table 2. Pin function list
                                   Master out slave in: serial data
                                                                       To MCU, ext. pull-up
          11     MOSI      DO      from STUSB1602 to MCU, BMC
                                                                       referenced to MCU Vio
                                   decoded from connected CC line
                                   Chip select, open drain active
                                                                       To MCU, ext. pull-up
          12     NSS       OD      low to control MCU SPI/MSP
                                                                       referenced to MCU Vio
                                   interface
                                   I²C device address setting (see
          13    ADDR0      DI                                          Static
                                   Section 5: I²C interface)
                                   Master in slave out: serial data
                                   from MCU to STUSB1602               From MCU, ext. pull-up
          14     MISO      DI
                                   encoded in BMC to drive the CC      referenced to MCU Vio
                                   line
                                                                       From MCU, needs to be
                                   TX enable, open drain active
                                                                       maintained low by MCU
          15    TX_EN      DI      high to drive CC line from the
                                                                       or pulled down when
                                   embedded BMC interface
                                                                       receiving standby
                                   Serial clock to clock data transfer
                                   between MCU and STUSB1602.
                                                                       To MCU, ext. pull-up
          16     SCLK      DO      Open drain output pin, needs
                                                                       referenced to MCU Vio
                                   external pull-up referenced to
                                   MCU Vio
                                   Cable orientation, active low       USB super speed mux
          17   A_B_SIDE    OD
                                   open drain                          select, ext. pull-up
                                   VBUS voltage monitoring and
          18 VBUS_SENSE   HV AI                                        From VBUS
                                   discharge path
                                   VBUS sink power path enable,        To switch or power
          19 VBUS_EN_SNK HV AIO
                                   active low open drain               system, ext. pull-up
                                   VBUS source power path enable, To switch or power
          20 VBUS_EN_SRC HV AIO
                                   active low open drain               system, ext. pull-up
                                                                       1 µF typ. decoupling
          21   VREG_1V2   PWR      1.2 V internal regulator output
                                                                       capacitor
                                                                       From power system,
          22     VSYS     PWR      Power supply from system            connect to ground if not
                                                                       used
                                                                       1 µF typ. decoupling
          23   VREG_2V7   PWR      2.7 V internal regulator output
                                                                       capacitor
                                   Main power supply from USB
          24     VDD     HV PWR                                        From VBUS
                                   power line
                                   Exposed pad is connected to
          —       EP      GND                                          To ground
                                   ground
                             DocID028319 Rev 3                                                7/55
                                                                                                   55


Inputs/outputs                                                                                  STUSB1602
                                         Table 3. Pin function descriptions
                      Type                                         Description
                         D                                             Digital
                         A                                             Analog
                         O                                          Output pad
                         I                                           Input pad
                        IO                                      Bidirectional pad
                        OD                                      Open drain output
                        PD                                          Pull-down
                        PU                                             Pull-up
                        HV                                         High voltage
                      PWR                                         Power supply
                      GND                                             Ground
2.3        Pin description
2.3.1      CC1/CC2
           CC1 and CC2 are the configuration channel pins used for connection and attachment
           detection, plug orientation determination, and system configuration management across the
           USB Type-C cable.
2.3.2      CC1DB/CC2DB
           CC1DB and CC2DB are used for dead battery mode when the STUSB1602 is configured in
           sink power role or dual power role. This mode is enabled by connecting CC1DB and CC2DB
           respectively to CC1 and CC2. Thanks to this connection, the pull down terminations on the
           CC pins are present by default even if the device is not supplied (see Section 3.6: Dead
           battery mode).
                  Warning:       CC1DB and CC2DB must be connected to ground when the
                                 STUSB1602 is configured in source power role or when dead
                                 battery mode is not supported.
2.3.3      VCONN
           This power input is connected to a power source that can be a 5 V power supply or a lithium
           battery. It is used to provide power to the local plug. It is internally connected to power
           switches that are protected against short circuit and overvoltage. This does not require any
           protection on the input side. When a valid source-to-sink connection is determined and the
           VCONN power switches are enabled, VCONN is provided by the source to the unused CC pin
           (see Section 3.4: VCONN supply).
8/55                                       DocID028319 Rev 3


STUSB1602                                                                               Inputs/outputs
2.3.4     RESET
          Active high reset
2.3.5     I²C interface pins
                                             Table 4. I²C interface pin list
                  Name                                            Description
                   SCL        I²C clock, need external pull-up
                  SDA         I²C data, need external pull-up
                ALERT#        I²C interrupt, need external pull-up
                 ADDR0        I²C device address bit (see Section 5: I²C interface)
2.3.6     GND
          Ground
2.3.7     MOSI
          Master out slave in: data from the connected CC line are decoded using the BMC and then
          transmitted via the STUSB1602 to the MCU. Data are valid on the falling edge of the SCLK
          line and must be sampled by the MCU on this edge.
2.3.8     NSS
          The chip select signal is driven by the STUSB1602 and is connected to the MCU. It
          activates the SPI/MSP interface transfer. The NSS signal drives the MCU so that:
               When TX_EN is asserted (TX mode), the STUSB1602 transmits data from the MCU
                over the CC line. Note, the MCU must provide data to be encoded on the MISO line
                which must be in synchrony with the SCLK.
               When TX_EN is not asserted (RX mode, default), the CC line is activity detected, data
                are received, and the BMC is decoded by the STUSB1602. Decoded data are sent on
                the MOSI line in synchrony with the SCLK
2.3.9     MISO
          Master in slave out: data from the MCU are encoded using the BMC and then transmitted
          via the STUSB1602 to the connected CC line driver. Data are sampled by the STUSB1602
          on the rising edge of the SCLK line and must be stable on this edge.
2.3.10    TX_EN
          TX_EN is a control signal from the MCU to the STUSB1602. It enables the BMC control
          logic that transfers data from the MCU serial interface, encodes it in BMC format, and drives
          the connected CC line.
Note:     TX mode overrides RX mode.
                                             DocID028319 Rev 3                                      9/55
                                                                                                         55


Inputs/outputs                                                                                STUSB1602
2.3.11     SCLK
           The serial clock signal from the STUSB1602 drives the SPI/MSP interface of the MCU and
           the clock data on the MISO and MOSI pins.
2.3.12     A_B_SIDE
           This output pin provides cable orientation. It is used to establish USB SuperSpeed signal
           routing. The cable orientation is also provided by an internal I²C register. This signal is not
           required in the case of USB 2.0 support.
                                            Table 5. USB data mux select
                       Value                                       CC pin position
                         HiZ             CC1 pin is attached to CC line
                          0              CC2 pin is attached to CC line
2.3.13     VBUS_SENSE
           This input pin is used to sense VBUS presence, monitor VBUS voltage, and discharge the
           VBUS on the USB Type-C receptacle side.
2.3.14     VBUS_EN_SNK
           In sink power role, this pin allows the incoming VBUS power to be enabled when the
           connection to a source is established and VBUS is in a valid operating range. The open drain
           output allows a PMOS transistor to be directly driven. The logic value of the pin is also
           advertised in a dedicated I²C register bit.
2.3.15     VBUS_EN_SRC
           In source power role, this pin allows the outgoing VBUS power to be enabled when the
           connection to a sink is established and VBUS is in a valid operating range. The open drain
           output allows a PMOS transistor to be directly driven. The logic value of the pin is also
           advertised in a dedicated I²C register bit.
2.3.16     VREG1V2
           This pin is used for external decoupling of the 1.2 V internal regulator. The recommended
           decoupling capacitor is: 1 µF typ. (0.5 µF min, 10 µF max).
2.3.17     VSYS
           This is the low power supply of the system, if there is any. It can be connected directly to a
           single cell Lithium battery or to the system power supply delivering 3.3 V or 5 V. It is
           recommended to connect this pin to ground when it is not used.
2.3.18     VREG2V7
           This pin is used for external decoupling of the 2.7 V internal regulator. The recommended
           decoupling capacitor is: 1 µF typ. (0.5 µF min, 10 µF max).
10/55                                       DocID028319 Rev 3


STUSB1602                                                                              Inputs/outputs
2.3.19    VDD
          This is the power supply from the USB power line for applications powered by VBUS.
          In source power role, this pin can be used to sense the voltage level of the main power
          supply providing the VBUS. It allows UVLO and OVLO thresholds to be considered
          independently on the VDD pin as additional conditions to enable the VBUS power path
          through the VBUS_EN_SRC pin (see Section 3.3.3: VBUS power path assertion). When the
          UVLO threshold detection is enabled, the VDD pin must be connected to the main power
          supply to establish the connection and to assert the VBUS power path.
                                          DocID028319 Rev 3                                      11/55
                                                                                                       55


Features description                                                                        STUSB1602
3          Features description
3.1        CC interface
           The STUSB1602 controls the connection to the configuration channel (CC) pins, CC1 and
           CC2, through two main blocks: the CC line interface block and the CC control logic block.
           The CC line interface block is used to:
               Configure termination mode on the CC pins relative to the power mode supported i.e.
                pull-up for source power role and pull-down for sink power role.
               Monitor the CC pin voltage values relative to the attachment detection thresholds
               Configure VCONN on the unconnected CC pin when required
               Protect the CC pins against overvoltage
           The CC control logic block is used to:
               Execute the Type-C FSM relative to the Type-C power mode supported
               Determine the electrical state for each CC pin relative to the detected thresholds
               Evaluate the conditions relative to the CC pin states and the VBUS voltage value to
                transition from one state to another in the Type-C FSM.
               Detect and establish a valid source-to-sink connection
               Determine the attached device mode: source, sink or accessory
               Determine cable orientation to allow external routing of the USB data
               Manage VBUS power capability: USB default, Type-C medium or Type-C high current
                mode.
               Handle hardware faults
           The CC control logic block implements the Type-C FSMs corresponding to the
           following Type-C power modes:
               Source power role with accessory support
               Sink power role with accessory support
               Sink power role without accessory support
               Dual power role with accessory support
               Dual power role with accessory and Try.SRC support
               Dual power role with accessory and Try.SNK support
           The default Type-C power mode is selected through NVM programming (see
           Section 6: Start-up configuration) and can be changed by software during operation
           through the I²C interface.
12/55                                      DocID028319 Rev 3


STUSB1602                                                                            Features description
3.2       BMC interface
                                             Figure 3. BMC interface
3.2.1     BMC interface behavior
          When a connection is established on the STUSB1602 (any attached state), the CC line
          used for connection is also internally connected to BMC block which allows communication
          on this line.
          The CC line is primary managed by CC control logic. BMC communication on the CC line
          must not interact with this control logic, as driving times of the line are short and are related
          to denounce times of the CC logic.
          The BMC block handles BMC encoding and decoding. It also handles CC line activity
          detection, discharging the external MCU of such operations.
          The default state of the BMC block is to listen to the line (RX mode). TX mode is enabled
          only by assertion of the TX_EN signal via the external MCU.
3.2.2     TX mode
          When the TX_EN signal is asserted via the MCU, the BMC block goes to the TX state:
              The NSS signal is driven low, indicating to the SPI/MSP slave interface of the MCU that
               data are being transmitted on the CC line. The MCU provides the data.
              The STUSB1602 drives the NSS signal low, indicating to the SPI/MSP slave interface
               of the MCU that data are requested on the MISO line.
              The STUSB1602 clocks the SCLK signal
              The MCU presents data to be transmitted on the MISO line and data are sampled on
               the rising edge of SCLK (data must be stable on this edge).
              Sampled data (from the MISO line) are encoded by the BMC, and the resulting values
               drive the CC line according to USB PD standard.
          When all data are transmitted, the MCU drives the TX_EN pin low, which signals the end of
          transmission. The STUSB1602 ends transmission with a corresponding trailing edge
          termination. It then goes back into to default state and releases the CC line from the BMC
          driver to the pull-up/pull-down CC line interfaces.
                                          DocID028319 Rev 3                                            13/55
                                                                                                             55


Features description                                                                         STUSB1602
3.2.3      RX mode
           RX mode is the default state of the BMC interface.
           In this mode, the receiver listens to the connected CC line. It does not interface with the CC
           line interfaces or the CC control logic.
           When all data are detected and received on the CC line, according to the activity described
           in the USB Power Delivery Standard, the BMC interface:
                 Drives the NSS signal low
                 Outputs the clock on the SCLK signal which is recovered from the BMC signal
                 Outputs recovered data (from the BMC signal) on the MOSI line to the connected MCU.
                  Data are valid on the SCLK falling edge and are sampled on this edge by the SPI/MSP
                  interface of the MCU.
           When no more data are detected on the CC line, the NSS goes back to “high” which is its
           default state. This indicates to the MCU that no more activity is present on the bus.
3.3        VBUS power path control
3.3.1      VBUS monitoring
           The VBUS monitoring block supervises (from the VBUS_SENSE pin) the VBUS voltage on
           the USB Type-C receptacle side.
           It is used to check that the VBUS is within a valid voltage range:
                 To establish a valid source-to-sink connection according to USB Type-C standard
                  specifications.
                 To safely enable the VBUS power path through the VBUS_EN_SRC pin or
                  VBUS_EN_SNK pin depending on the power role.
           It allows detection of unexpected VBUS voltage conditions such as under-voltage or
           overvoltage relative to the valid VBUS voltage range. When such conditions occur, the
           STUSB1602 reacts as follows:
                 At attachment, it prevents the source-to-sink connection and the VBUS power path
                  assertion.
                 After attachment, it deactivates the source-to-sink connection and disables the VBUS
                  power path. In source power role, the device goes into error recovery state. In Sink
                  power role, the device goes into unattached state.
           The VBUS voltage value is adjusted automatically at attachment (vSafe5V) and via the MCU
           at each PDO transition. Monitoring is then disabled during T_PDO_transition (i.e. the default
           value of 300 ms is changed through NVM programming). Additionally, if a transition occurs
           to a lower voltage, the discharge path is activated during this time.
           The valid VBUS voltage range is defined from the VBUS nominal voltage by a high threshold
           voltage and a low threshold voltage whose nominal values are respectively VBUS+5% and
           VBUS-5%. The nominal threshold limits can be shifted by a fraction of VBUS from +1% to
           +15% for the high threshold voltage and from -1% to -15% for the low threshold voltage.
           This means the threshold limits can vary from VBUS+5% to VBUS+20% for the high limit and
           from VBUS-5% to VBUS-20% for the low limit.
14/55                                        DocID028319 Rev 3


STUSB1602                                                                            Features description
          The threshold limits are preset by default in the NVM with different shift coefficients
          depending on whether the device operates in source power role or in sink power role (see
          Section 8.3: Electrical and timing characteristics). The threshold limits can be changed
          independently through NVM programming (see Section 6: Start-up configuration) and also
          by software during attachment through the I²C interface.
3.3.2     VBUS discharge
          The monitoring block also handles the internal VBUS discharge path connected to the
          VBUS_SENSE pin. The discharge path is activated at detachment, or when the device goes
          into the error recovery state whatever the power role (see Section 3.8: Hardware fault
          management).
          The VBUS discharge path is enabled by default in the NVM and can be disabled through
          NVM programming only (see Section 6: Start-up configuration). The discharge time duration
          is also preset by default in the NVM (see Section 8.3: Electrical and timing characteristics).
          The discharge time duration can be changed through NVM programming (see Section 6:
          Start-up configuration) and also by software through the I²C interface.
3.3.3     VBUS power path assertion
          The STUSB1602 can control the assertion of the VBUS power path on the USB Type-C port,
          directly or indirectly, through the VBUS_EN_SRC and VBUS_EN_SNK pins according to the
          system power role.
          The tables below summarize the configurations and the conditions that determine the
          electrical value of the VBUS_EN_SRC and VBUS_EN_SNK pins during system operation.
            Table 6. Conditions for VBUS power path assertion in source power role
                                                   Operation conditions
                  Electrical
      Pin                                                                                      Comment
                    value       Type-C attached       VDD pin         VBUS_SENSE pin
                                       state         monitoring           monitoring
                                                                      VBUS is within valid
                                   Attached.SRC     VDD > UVLO if                            The signal is
                                                                        voltage range if
                                         or          VDD_UVLO                                asserted
                                                                    VBUS _VALID_RANGE
                                UnorientedDebug        enabled                               only if all the
                                                                            enabled
                       0          Accessory.SRC         and/or                               valid
                                                                               or
                                         or         VDD < OVLO if                            operation
                                                                        VBUS > UVLO if
                                  OrientedDebug      VDD_OVLO                                conditions
                                  Accessory.SRC        enabled      VBUS _VALID_RANGE        are met
                                                                            disabled
 VBUS_EN_SRC
                                                                      VBUS is out of valid   The signal is
                                                    VDD < UVLO if
                                                                        voltage range if     de-asserted
                                                     VDD_UVLO
                                                                    VBUS _VALID_RANGE        when at
                                                       enabled
                                                                            enabled          least one
                      HiZ         Any other state       and/or
                                                                               or            non valid
                                                    VDD > OVLO if
                                                                        VBUS < UVLO if       operation
                                                     VDD_OVLO
                                                                    VBUS _VALID_RANGE        condition is
                                                       enabled
                                                                            disabled         met
                                             DocID028319 Rev 3                                          15/55
                                                                                                              55


Features description                                                                        STUSB1602
           As specified in the USB Type-C standard specification, the attached state “Attached.SRC” is
           reached only if the voltage on the VBUS receptacle side is at vSafe0V condition when a
           connection is detected.
              Table 7. Conditions for VBUS power path assertion in sink power role
                                                  Operation conditions
                 Electrical
      Pin                                                                                    Comment
                   value      Type-C attached        VDD pin          VBUS_SENSE pin
                                   state            monitoring           monitoring
                                                                     VBUS is within valid
                                                                                           The signal is
                                                                       voltage range if
                                                                                           asserted
                               Attached.SNK                         VBUS _VALID_RANGE
                                                                                           only if all the
                                     or                                    enabled
                     0                             Not applicable                          valid
                                   Debug                                      or
                                                                                           operation
                               Accessory.SNK                           VBUS > UVLO if
                                                                                           conditions
                                                                    VBUS _VALID_RANGE
                                                                                           are met
                                                                           disabled
 VBUS_EN_SNK
                                                                     VBUS is out of valid  The signal is
                                                                       voltage range if    de-asserted
                                                                    VBUS _VALID_RANGE      when at
                                                                           enabled         least one
                    HiZ        Any other state     Not applicable
                                                                              or           non valid
                                                                       VBUS < UVLO if      operation
                                                                    VBUS _VALID_RANGE      condition is
                                                                           disabled        met
           “Type-C attached state” refers to the Type-C FSM states as defined in the USB Type-C
           standard specification and as described in the I²C register CC_OPERATION_STATUS.
           “VDD pin monitoring” is valid only in source power role. Activation of the UVLO and OVLO
           threshold detections can be done through NVM programming (see Section 6: Start-up
           configuration) and also by software through the I²C interface. When the UVLO and/or OVLO
           threshold detection is activated, the VBUS_EN_SRC pin is asserted only if the device is
           attached and the valid threshold conditions on VDD are met. Once the VBUS_EN_SRC pin
           is asserted, the VBUS monitoring is done on VBUS_SENSE pin instead of the VDD pin.
           “VBUS_SENSE pin monitoring” relies, by default, on a valid VBUS voltage range. The
           voltage range condition can be disabled to consider UVLO threshold detection instead. The
           monitoring condition of the VBUS voltage can be changed through NVM programming (see
           Section 6: Start-up configuration) and also by software through the I²C interface. The
           VBUS_EN_SRC pin is maintained asserted as long as the device is attached and a valid
           voltage condition on the VBUS is met.
16/55                                       DocID028319 Rev 3


STUSB1602                                                                            Features description
3.4       VCONN supply
3.4.1     VCONN input voltage
          VCONN is a regulated supply used to power circuits in the plug of the USB3.1 full-featured
          cables and other accessories. The VCONN nominal operating voltage is 5.0 V ±5 %.
3.4.2     VCONN application conditions
          The VCONN pin of the STUSB1602 is connected to each CC pin (CC1 and CC2) across
          independent power switches.
          The STUSB1602 applies VCONN only to the CC pin not connected to the CC wire when all
          below conditions are met:
               The device is configured in source power role or dual power role
               VCONN power switches are enabled
               A valid connection to a sink is achieved
               Ra presence is detected on the unwired CC pin
               A valid power source is applied on the VCONN pin with respect to a predefined UVLO
                threshold.
          The STUSB1602 does not provide VCONN when it is operating in sink power role.
3.4.3     VCONN monitoring
          The VCONN monitoring block detects whether the VCONN power supply is available on the
          VCONN pin. It is used to check that the VCONN voltage is above a predefined undervoltage
          lockout (UVLO) threshold to allow enabling of the VCONN power switches.
          The default value of the UVLO threshold is 4.65 V typical for powered cables operating at 
          5 V. This value can be changed by software to 2.65 V typical to support VCONN-powered
          accessories that operate down to 2.7 V.
3.4.4     VCONN discharge
          The behavior of Type-C FSMs is extended with an internal VCONN discharge path capability
          on the CC pins in source power mode only. The discharge path is activated during 250 ms
          from sink detachment detection. This feature is disabled by default. It can be activated
          through NVM programming (see Section 6: Start-up configuration) and also by software
          through the I²C interface.
3.4.5     VCONN control and status
          The supplying conditions of VCONN across the STUSB1602 are managed through the I²C
          interface. Different I²C registers and bits are used specifically for this purpose.
                                           DocID028319 Rev 3                                        17/55
                                                                                                          55


Features description                                                                       STUSB1602
3.4.6      VCONN power switches
           Features
           The STUSB1602 integrates two current limited high-side power switches with protection
           that tolerates high voltage up to 22 V on the CC pins.
           Each VCONN power switch presents the following features:
                Soft-start to limit inrush current
                Constant current mode overcurrent protection
                Adjustable current limit
                Thermal protection
                Undervoltage and overvoltage protection
                Reverse current and reverse voltage protection
                               Figure 4. VCONN to CC1 and CC2 power switch protection
           Current limit programming
           The current limit can be set within the range 100 mA to 600 mA by a step of 50 mA. The
           default current limit is programmed through NVM programming (see Section 6: Start-up
           configuration) and can be changed by software through the I²C interface. At power-on or
           after a reset, the current limit takes the default value preset in the NVM.
           Fault management
           The table below summarizes the different fault conditions that could occur during operation
           of the switch and the associated responses. An I²C alert is generated when a fault condition
           happens.
18/55                                        DocID028319 Rev 3


STUSB1602                                                                              Features description
                                     Table 8. Fault management conditions
               Fault types             Fault conditions                        Expected actions
                                                                 Power switch limits the current and reduces
                             CC output pin shorted to ground via
                                                                 the output voltage. I²C alert is asserted
               Short circuit very low resistive path causing
                                                                 immediately thanks to
                             rapid current surge
                                                                 VCONN_SW_OCP_FAULT bits.
                                                                 Power switch limits the current and reduces
                             CC output pin connected to a load
                                                                 the output voltage. I²C alert is asserted
               Overcurrent   that sinks current above
                                                                 immediately thanks to
                             programmed limit
                                                                 VCONN_SW_OCP_FAULT bits.
                                                                 Power switch is disabled immediately until
                                                                 the temperature falls below 145 °C minus
                             Junction temperature exceeding      hysteresis of 15 °C. I²C alert is asserted
              Overheating
                             145 °C due to any reason            immediately thanks to THERMAL_FAULT
                                                                 bit. STUSB1602 goes into transient error
                                                                 recovery state.
                                                                 Power switch is disabled immediately until
                             VCONN input voltage drops below     the input voltage rises above the UVLO
              Undervoltage
                             UVLO threshold minus hysteresis     threshold. I²C alert is asserted immediately
                                                                 thanks to VCONN_PRESENCE bit.
                                                                 Power switch is opened immediately until
                             CC output pin voltage exceeds       the voltage falls below the voltage limit. I²C
               Overvoltage
                             maximum operating limit of 6.0 V    alert is asserted immediately thanks to
                                                                 VCONN_SW_OVP_FAULT bits.
                                                                 The reverse biased body diode of the back-
                             CC output pin voltage exceeds
                                                                 to-back MOS switches is naturally disabled
            Reverse current  VCONN input voltage when the
                                                                 preventing current to flow from the CC
                             power switch is turned-off
                                                                 output pin to the input.
                                                                 Power switch is opened immediately until
                             CC output pin voltage exceeds
                                                                 the voltage difference falls below the
                             VCONN input voltage of more than
            Reverse voltage                                      voltage limit. I²C alert is asserted
                             0.35 V for 5 V when the power
                                                                 immediately thanks to
                             switch is turned-on
                                                                 VCONN_SW_RVP_FAULT bits.
3.5       Low power standby mode
          The STUSB1602 proposes a standby mode to reduce the device power consumption when
          no device is connected to the USB Type-C port. It is disabled by default and can be
          activated through NVM programming (see Section 6: Start-up configuration).
          When activated, the STUSB1602 enters standby mode at power up, after a reset, or after a
          disconnection. In this mode, the CC interface and the voltages monitoring blocks are turned
          off. Only a monitoring circuitry is maintained active on the CC pins to detect a connection.
          When the connection is detected, all the internal circuits are turned on to allow normal
          operation.
          Standby mode does not operate when the device is configured in sink power role with
          accessory support (see Section 6: Start-up configuration).
                                           DocID028319 Rev 3                                              19/55
                                                                                                                55


Features description                                                                          STUSB1602
3.6        Dead battery mode
           Dead battery mode allows systems powered by a battery to be supplied by the VBUS when
           the battery is discharged and to start the battery charging process. This mode is also used
           in systems that are powered through the VBUS only.
           Dead battery mode is only supported in sink power role and dual power role configurations.
           It operates only if the CC1DB and CC2DB pins are connected respectively to the CC1 and
           CC2 pins. Thanks to these connections, the STUSB1602 presents a pull down termination
           on its CC pins and advertises itself as a sink even if the device is not supplied.
           When a source system connects to a USB Type-C port with the STUSB1602 configured in
           dead battery mode, it can detect the pull down termination, establish the source-to-sink
           connection, and provide the VBUS. The STUSB1602 is then supplied thanks to the VDD pin
           connected to the VBUS on the USB Type-C receptacle side. The STUSB1602 can finalize
           the source-to-sink connection and enable the power path on the VBUS thanks to the
           VBUS_EN_SNK pin which allows the system to be powered.
3.7        High voltage protection
           The STUSB1602 can be safely used in systems or connected to systems that handle high
           voltage on the VBUS power path. The device integrates an internal circuitry on the CC pins
           that tolerates high voltages and ensures protection up to 22 V in case of unexpected short
           circuits with the VBUS or in the case of a connection to a device supplying high voltage on
           the VBUS.
3.8        Hardware fault management
           The STUSB1602 handles hardware fault conditions related to the device itself and to the
           VBUS power path during system operation.
           When such conditions occur, the circuit goes into a transient error recovery state named
           ErrorRecovery in the Type-C FSM. When entering in this state, the device de-asserts the
           VBUS power path by disabling the VBUS_EN_SRC pin and it removes the terminations from
           the CC pins during several tens of milliseconds. Then, it transitions to the unattached source
           state.
           The STUSB1602 goes into error recovery state when at least one condition listed below is
           met:
                If an overtemperature is detected, the “THERMAL_FAULT” flag is asserted
                If an internal pull-up voltage on the CC pins is below the UVLO threshold, the
                 “VPU_VALID” flag is asserted.
                If an overvoltage is detected on the CC pins, the “VPU_OVP_FAULT” flag is asserted
                If the VBUS voltage is out of the valid voltage range during attachment, the
                 “VBUS_VALID” flag is asserted.
                If an undervoltage is detected on the VDD pin during attachment when UVLO detection
                 is enabled, the “VDD_UVLO_DISABLE” flag is asserted.
                If an overvoltage is detected on the VDD pin during attachment when OVLO detection
                 is enabled, the “VDD_OVLO_DISABLE” flag is asserted.
20/55                                        DocID028319 Rev 3


STUSB1602                                                                       Features description
          The I²C register bits mentioned above in quotes give either the state of the hardware fault
          when it occurs or the setting condition to detect the hardware fault.
3.9       Accessory mode detection
          The STUSB1602 supports the detection of audio accessory mode and debug accessory
          mode as defined in the USB Type-C standard specification with the following Type-C power
          modes (see Section 6: Start-up configuration):
              Source power role with accessory support
              Sink power role with accessory support
              Dual power role with accessory support
              Dual power role with accessory and Try.SRC support
              Dual power role with accessory and Try.SNK support.
3.9.1     Audio accessory mode detection
          The STUSB1602 detects an audio accessory device when both the CC1 and CC2 pins are
          pulled down to ground by an Ra resistor from the connected device. The audio accessory
          detection is advertised through the CC_ATTACHED_MODE bits of the I²C register
          CC_CONNECTION_STATUS.
3.9.2     Debug accessory mode detection
          The STUSB1602 detects a connection to a debug and test system (DTS) when it operates
          either in sink power role or in source power role. The debug accessory detection is
          advertised by the DEBUG1 and DEBUG2 pins as well as through the
          CC_ATTACHED_MODE bits of the I²C register CC_CONNECTION_STATUS.
              In sink power role, a debug accessory device is detected when both the CC1 and CC2
               pins are pulled up by an Rp resistor from the connected device. The voltage levels on
               the CC1 and CC2 pins give the orientation and current capability as described in the
               table below. The DEBUG1 pin is asserted to advertise the DTS detection and the
               A_B_SIDE pin indicates the orientation of the connection. The current capability of the
               DTS is given through the SINK_POWER_STATE bits of the I²C register
               CC_OPERATION_STATUS.
                                           DocID028319 Rev 3                                      21/55
                                                                                                        55


Features description                                                                                STUSB1602
              Table 9. Orientation and current capability detection in sink power role
                                                 Charging       A_B_SIDE pin         Current capability state
           CC1 pin            CC2 pin
   #                                              current          CC1/CC2            SINK_POWER_STATE
          (CC2 pin)          (CC1 pin)
                                               configuration      (CC2/CC1)                  bit values
                                                                                    PowerDefault.SNK (source
   1        Rp 3A             Rp 1.5A             Default            HiZ (0)        supplies default USB
                                                                                    current)
                                                                                    Power1.5.SNK (source
   2       Rp 1.5A           Rp default            1.5 A             HiZ (0)        supplies 1.5 A USB Type-C
                                                                                    current)
                                                                                    Power3.0.SNK (source
   3        Rp 3A            Rp default            3.0 A             HiZ (0)        supplies 3.0 A USB Type-C
                                                                                    current)
                                                                                    PowerDefault.SNK (source
              Rp                 Rp
   4                                              Default          HiZ (HiZ)        supplies default USB
         def/1.5A/3A        def/1.5A/3A
                                                                                    current)
                In source power role, a debug accessory device is detected when both the CC1 and
                 CC2 pins are pulled down to ground by an Rd resistor from the connected device. The
                 orientation detection is performed in two steps as described in the table below. The
                 DEBUG2 pin is asserted to advertise the DTS detection and the A_B_SIDE pin
                 indicates the orientation of the connection. The orientation detection is advertised
                 through the TYPEC_FSM_STATE bits of the I²C register CC_OPERATION_STATUS.
                        Table 10. Orientation detection in source power role
                                                          A_B_SIDE pin
        CC1 pin      CC2 pin           Detection                                Orientation detection state
   #                                                        CC1/CC2
       (CC2 pin)    (CC1 pin)           process                              TYPEC_FSM_STATE bits value
                                                           (CC2/CC1)
                                  1st step: debug
   1       Rd           Rd        accessory mode            HiZ (HiZ)        UnorientedDebugAccessory.SRC
                                  detected
                                  2nd step:
                                  orientation
                                  detected (DTS
   2       Rd          ≤ Ra       presents a                 HiZ (0)         OrientedDebugAccessory.SRC
                                  resistance to GND
                                  with a value ≤ Ra
                                  on its CC2 pin)
22/55                                         DocID028319 Rev 3


STUSB1602                                                        Managing USB PD transactions
4         Managing USB PD transactions
          Due to specific HW/SW partitioning, the STUSB1602 requires specific alignment between
          the lower protocol stack (managed by the STUSB1602) and the higher protocol stack
          (managed by the external MCU). Therefore, dedicated read and write I²C accesses are
          needed to perform the following actions:
              Acknowledge a HW reset request
              Request a HW reset
              Perform a VCONN SWAP
              Perform a data role SWAP
              Acknowledge a power role SWAP request
              Request a power role SWAP
                                        DocID028319 Rev 3                                    23/55
                                                                                                   55


I²C interface                                                                                                                                     STUSB1602
5            I²C interface
5.1          Read and write operations
             The I²C interface is used to configure, control and read the operation status of the device. It
             is compatible with the Philips I²C Bus® (version 2.1). The I²C is a slave serial interface
             based on two signals:
                  SCL - Serial clock line: input clock used to shift data
                  SDA - Serial data line: input/output bidirectional data transfers
             A filter rejects the potential spikes on the bus data line to preserve data integrity.
             The bidirectional data line supports transfers up to 400 Kbit/s (fast mode). The data are
             shifted to and from the chip on the SDA line, MSB first.
             The first bit must be high (START) followed by the 7-bit device address and the read/write
             control bit.
             Two 7-bit device addresses are available for the STUSB1602 thanks to external
             programming of DevADDR0 through ADDR0 pin setting, i.e. 0x28 or 0x29. This allows two
             STUSB1602 devices to be connected on the same I²C bus.
                                                                   Table 11. Device address format
                   Bit7                Bit6                       Bit5                Bit4              Bit3                   Bit2             Bit1       Bit0
              DevADDR6 DevADDR5 DevADDR4 DevADDR3 DevADDR2 DevADDR1 DevADDR0                                                                               R/W
                    0                     1                          0                 1                   0                     0            ADDR0         0/1
                                                                Table 12. Register address format
                  Bit7               Bit6                      Bit5               Bit4               Bit3              Bit2                Bit1          Bit0
              RegADDR7       RegADDR6                    RegADDR5            RegADDR4             RegADDR3         RegADDR2          RegADDR1         RegADDR0
                                                                     Table 13. Register data format
                  Bit7              Bit6                       Bit5              Bit4                Bit3              Bit2                Bit1          Bit0
                 DATA7            DATA6                      DATA5              DATA4               DATA3             DATA2              DATA1          DATA0
                                                                          Figure 5. Read operation
                          DĂƐƚĞƌ                         ^ůĂǀĞ
                           ^ƚĂƌƚ     ĞǀŝĐĞ ĂĚĚƌ      t      ZĞŐ ĂĚĚƌĞƐƐ  ZĞƐƚĂƌƚ  ĞǀŝĐĞ ĂĚĚƌ Z   ZĞŐ ĚĂƚĂ    ZĞŐ ĚĂƚĂ   ZĞŐ ĚĂƚĂ   ^ƚŽƉ
                                        ϳ ďŝƚƐ                    ϴ ďŝƚƐ                ϳ ďŝƚƐ            ϴ ďŝƚƐ        ϴ ďŝƚƐ      ϴ ďŝƚƐ
                                                                                                                        ĚĚƌĞƐƐ     ĚĚƌĞƐƐ
                          ^ƚĂƌƚďŝƚ с ^ ĨĂůůŝŶŐ ǁŚĞŶ ^> с ϭ                                                           Ŷнϭ         ŶнϮ
                          ^ƚŽƉ ďŝƚ с ^ ƌŝƐŝŶŐ ǁŚĞŶ ^> с ϭ
                          ZĞƐƚĂƌƚďŝƚ с ƐƚĂƌƚ ĂĨƚĞƌĂ ƐƚĂƌƚ
                          ĐŬŶŽǁůĞĚŐ Ğ с ^ ĨŽƌĐĞĚ ůŽǁ ĚƵƌŝŶŐ Ă^> ĐůŽĐŬ
24/55                                                                 DocID028319 Rev 3


STUSB1602                                                                                                    I²C interface
                                                             Figure 6. Write operation
                     ^ƚĂƌƚ     ĞǀŝĐĞ ĂĚĚƌ       t        ZĞŐ ĂĚĚƌĞƐƐ  ZĞŐ ĚĂƚĂ    ZĞŐ ĚĂƚĂ  ZĞŐ ĚĂƚĂ    ^ƚŽƉ
                                  ϳ ďŝƚƐ                       ϴ ďŝƚƐ        ϴ ďŝƚƐ       ϴďŝƚƐ     ϴďŝƚƐ
                                                                                         ĚĚƌĞƐƐ     ĚĚƌĞƐƐ
                    ^ƚĂƌƚďŝƚ с ^  ĨĂ ůůŝŶŐ ǁŚĞŶ ^ > с ϭ                                 Ŷнϭ        ŶнϮ
                    ^ƚŽƉ ďŝƚ с ^  ƌŝƐŝŶŐ ǁŚĞŶ ^> с ϭ
                    ZĞƐƚĂƌƚ ďŝƚ с ƐƚĂƌƚĂĨƚĞƌ ĂƐƚĂƌƚ
5.2       Timing specifications
          The device uses a standard slave I²C channel at speed up to 400 kHz.
                                              Table 14. I²C timing parameters - VDD = 5 V
           Symbol                                   Parameter                             Min.        Typ.   Max.     Unit
             Fscl        SCL clock frequency                                                 0                400     kHz
            thd,sta      Hold time (repeated) START condition                              0.6                 —
              tlow       LOW period of the SCL clock                                       1.3                 —
             thigh       HIGH period of the SCL clock                                      0.6                 —
                                                                                                                       μs
            tsu,dat      Setup time for repeated START condition                           0.6                 —
            thd,dat      Data hold time                                                   0.04                 0.9
            tsu,dat      Data setup time                                                   100         —       —
                tr       Rise time of both SDA and SCL signals                         20 + 0.1 Cb            300
                                                                                                                       ns
                tf       Fall time of both SDA and SCL signals                         20 + 0.1 Cb            300
            tsu,sto      Setup time for STOP condition                                     0.6                 —
                         Bus free time between a STOP and START                                                        μs
              tbuf                                                                         1.3                 —
                         condition
               Cb        Capacitive load for each bus line                                  —                 400      pF
                                                         DocID028319 Rev 3                                            25/55
                                                                                                                            55


I²C interface                                                                                              STUSB1602
                                               Figure 7. I²C timing diagram
                         s ŝŚ     ƚĨ
                    ^ 
                         s ŝů
                                     ƚŚĚ͕Ɛ ƚĂ
                                                      ƚƌ        ƚƐ Ƶ͕ĚĂƚ ƚŚŝŐ Ś
                    ^ >
                                              ƚůŽǁ          ƚŚĚ͕ĚĂƚ                   ƚƐ Ƶ͕ƐƚĂ
5.3           I²C register map
                                     Table 15. Register access legend
      Access code             Expanded name                                        Description
          RO                     Read only            Register can be read only
          R/W                    Read/write           Register can be read or written
          RC                   Read and clear         Register can be read and is cleared after it is read
                             Table 16. STUSB1602 register map overview
  Address              Register name                  Access                           Description
    00h
      to     Reserved                                    RO        Do not use
     0Ah
     0Bh     ALERT_STATUS                                RC        Alerts register linked to transition registers
                                                                   Allows the interrupt mask on the
     0Ch     ALERT_STATUS_MASK                           R/W
                                                                   ALERT_STATUS register to be changed
                                                                   Alerts about transition in
     0Dh     CC_DETECTION_STATUS_TRANS                   RC
                                                                   CC_DETECTION_STATUS register
     0Eh     CC_DETECTION_STATUS                         RO        CC detection status
                                                                   Allows Type-C FSM to be synchronized with
             TYPE_C_HANDSHAKE and
     0Fh                                                 RC        software. Alerts about transition in
             MONITORING_STATUS_TRANS
                                                                   MONITORING_STATUS register
                                                                   Gives status on VBUS and VCONN voltage
     10h     MONITORING_STATUS                           RO
                                                                   monitoring
     11h     CC_CONNECTION_STATUS                        RO        CC connection status
26/55                                         DocID028319 Rev 3


STUSB1602                                                                              I²C interface
                  Table 16. STUSB1602 register map overview (continued)
 Address            Register name           Access                     Description
                                                     Alerts about transition in HW_FAULT_STATUS
   12h   HW_FAULT_STATUS_TRANS                RC
                                                     register
   13h   HW_FAULT_STATUS                      RO     Gives status on hardware faults
   14h
    to   Reserved                             RO     Do not use
   17h
   18h   CC_CAPABILITY_CTRL                  R/W     Allows the CC capabilities to be changed
   19h
    to   Reserved                             RO     Do not use
   1Dh
                                                     Allows the current limit of VCONN power
   1Eh   CC_VCONN_SWITCH_CTRL                R/W
                                                     switches to be changed
                                                     Allows software to be synchronized with Type-
   1Fh   TYPE_C_CTRL                         R/W
                                                     C FSM
                                                     Allows the monitoring conditions of VCONN
   20h   VCONN_MONITORING_CTRL               R/W
                                                     voltage to be changed
                                                     Allows the DAC value related to the targeted
   21h   VBUS_SELECT                         R/W
                                                     VBUS voltage to be changed
                                                     Allows the voltage range for VBUS monitoring to
   22h   VBUS_RANGE_MONITORING_CTRL          R/W
                                                     be changed
   23h   RESET_CTRL                          R/W     Controls the device reset by software
   24h   CC_POWERED_ACCESSORY_CTRL           R/W     Controls powered accessory detection
   25h   VBUS_DISCHARGE_TIME_CTRL            R/W     Allows the VBUS discharge time to be changed
   26h   VBUS_DISCHARGE_CTRL                 R/W     Controls the VBUS discharge path
   27h   VBUS_ENABLE_STATUS                   RO     Gives status on VBUS power path activation
   28h   CC_POWER_MODE_CTRL                  R/W     Allows the CC power mode to be changed
   29h
    to   Reserved                             RO     Do not use
   2Dh
                                                     Allows the monitoring conditions of VBUS
   2Eh   VBUS_MONITORING_CTRL                R/W
                                                     voltage to be changed
   2Fh   Reserved                             RO     Do not use
                                    DocID028319 Rev 3                                           27/55
                                                                                                      55


Start-up configuration                                                                         STUSB1602
6           Start-up configuration
6.1         User-defined parameters
            The STUSB1602 has a set of user-defined parameters that can be customized by NVM re-
            programming and/or by software through the I²C interface. This feature allows the customer
            to change the preset configuration of the USB Type-C interface and to define a new
            configuration to meet specific customer requirements addressing various applications, use
            cases, or specific implementations.
            The NVM re-programming overrides the initial default setting to define a new default setting
            that is used at power-up or after a reset. The default value is copied at power-up, or after a
            reset, from the embedded NVM into dedicated I²C register bits. The NVM re-programming is
            possible only once with a customer password.
            When a default value is changed during functioning by software, the new setting remains in
            effect as long as the STUSB1602 is operating or when it is changed again. But after power-
            off and power-up, or after a reset, the STUSB1602 takes back the default values defined in
            the NVM.
6.2         Default start-up configuration
            The table below lists the user-defined parameters and indicates the default start-up
            configuration of the STUSB1602.
            Three types of user-defined parameters are specified in the table with respect to the
            “Customization type” column:
                 SW: indicates parameters that can be customized only by software through the I²C
                  interface during system operation.
                 NVM: indicates parameters that can be customized only by NVM re-programming
                 NVM/SW: indicates parameters that can be customized by NVM re-programming
                  and/or by software through the I²C interface during system operation.
                Table 17. STUSB1602 user-defined parameters and default setting
 Customization                                                                                  I²C register
                                 Parameter                   Default value and description
      type                                                                                        address
    NVM/SW        CC_CONNECTION_STATUS_AL_MASK             1b: interrupt masked                     0Ch
    NVM/SW        MONITORING_STATUS_AL_MASK                1b: interrupt masked                     0Ch
    NVM/SW        HW_FAULT_STATUS_AL_MASK                  1b: interrupt masked                     0Ch
      NVM         STANDBY_POWER_MODE_DISABLE               1b: disables standby power mode          n. a.
                                                           STUSB1602QTR: 00b: Default USB            18h
    NVM/SW        CC_CURRENT_ADVERTISED
                                                           STUSB1602AQTR: 01b: 1.5 A                 18h
                                                           0b: VCONN discharge disabled on 
    NVM/SW        CC_VCONN_DISCHARGE_EN                                                              18h
                                                           CC pin
                                                           1b: VCONN supply capability enabled
    NVM/SW        CC_VCONN_SUPPLY_EN                                                                 18h
                                                           on CC pin
28/55                                      DocID028319 Rev 3


STUSB1602                                                                    Start-up configuration
         Table 17. STUSB1602 user-defined parameters and default setting (continued)
 Customization                                                                           I²C register
                            Parameter                 Default value and description
     type                                                                                  address
   NVM/SW       CC_VCONN_SWITCH_ILIM               0000b: 350 mA                             1Eh
                                                   1b: enables UVLO threshold
      SW        VCONN_MONITORING_EN                                                           20h
                                                   detection on VCONN pin
      SW        VCONN_UVLO_THRESHOLD               0b: high UVLO threshold of 4.65 V          20h
                                                   0111b: in source power role, shifts
   NVM/SW       SHIFT_HIGH_VBUS_LIMIT_SOURCE       nominal high voltage limit by 7 % of       22h
                                                   VBUS
                                                   0101b: in source power role, shifts
   NVM/SW       SHIFT_LOW_VBUS_LIMIT_SOURCE        nominal low voltage limit by -5 % of       22h
                                                   VBUS
                                                   0111b: in sink power role, shifts
   NVM/SW       SHIFT_HIGH_VBUS_LIMIT_SINK         nominal high voltage limit by 7 % of       22h
                                                   VBUS
                                                   1111b: in sink power role, shifts
   NVM/SW       SHIFT_LOW_VBUS_LIMIT_SINK          nominal low voltage limit by -15 % of      22h
                                                   VBUS
                                                   0b: device reset is performed from
      SW        SW_RESET_EN                                                                   23h
                                                   hardware RESET pin
   NVM/SW       VBUS_DISCHARGE_TIME_TO_0V          1010b: 840 ms discharge time               25h
   NVM/SW       VBUS_DISCHARGE_TIME_TRANSITION 1010b: 200 ms discharge time                   25h
     NVM        VBUS_DISCHARGE_DISABLE             0b: enables VBUS discharge path           n. a.
                                                   011b: dual power role with accessory
   NVM/SW       CC_POWER_MODE                                                                 28h
                                                   support
                                                   0b: enables OVLO threshold
   NVM/SW       VDD_OVLO_DISABLE                                                             2Eh
                                                   detection on VDD pin
                                                   0b: enables valid VBUS voltage range
   NVM/SW       VBUS_VALID_RANGE_DISABLE                                                     2Eh
                                                   detection
   NVM/SW       VBUS_VSAFE0V_THRESHOLD             00b: VBUS vSafe0V threshold = 0.6 V       2Eh
                                                   1b: disables UVLO threshold
   NVM/SW       VDD_UVLO_DISABLE                                                             2Eh
                                                   detection on VDD pin
                                      DocID028319 Rev 3                                          29/55
                                                                                                       55


Application                                                                                 STUSB1602
7           Application
            The sections below are not part of the ST product specification. They are intended to give a
            generic application overview to be used by the customer as a starting point for further
            implementation and customization. ST does not warrant compliancy with customer
            specifications. Full system implementation and validation are under the customer’s
            responsibility.
7.1         General information
7.1.1       Power supplies
            The STUSB1602 can be supplied in three different ways depending on the targeted
            application:
                Through the VDD pin only for applications powered by VBUS that operate either in
                 source power role or in sink power role with dead battery mode support.
                Through the VSYS pin only for AC powered applications with a system power supply
                 delivering 3.3 V or 5 V.
                Through the VDD and VSYS pins either for applications powered by a battery with
                 dead battery mode support or for applications powered by VBUS with a system power
                 supply delivering 3.3 V or 5 V. When both VDD and VSYS power supplies are present,
                 the low power supply VSYS is selected when VSYS voltage is above 3.1 V. Otherwise
                 VDD is selected.
7.1.2       Connection to MCU or application processor
            The I²C interface is used to provide extensive functionality during system operation. For
            instance:
            1.   Define the port configuration during system boot (in case the NVM parameters are not
                 customized during manufacturing).
            2.   Change the default configuration at any time during operation
            3.   Re-configure the port power mode (i.e. source, sink or dual role)
            4.   Adjust the port power capability in source power role according to contextual power
                 availability and/or the power partitioning with other ports.
            5.   Save system power by shutting down the DC-DC converter according to the
                 attachment detection state.
            6.   Provide a diagnostic of the Type-C connection and the VBUS power path in real time
30/55                                       DocID028319 Rev 3


STUSB1602                                                                       Application
7.2       USB Type-C typical applications
7.2.1     Source type application
Application schematic
          Figure 8. Typical STUSB1602 implementation in source type application
                                    DocID028319 Rev 3                                 31/55
                                                                                            55


Application                                                                                              STUSB1602
Default start-up configuration
                               Table 18. Default setting for a source type application
     I²C
                                                                                                       Customization
  register                  I²C register field name               I²C register reset value/description
                                                                                                           type
  address
    0Eh          START_UP_POWER_MODE                             0b: device starts in normal mode        NVM/SW
                                                                 STUSB1602QTR: 00b: Default USB          NVM/SW
     18h         CC_CURRENT_ADVERTISED
                                                                 STUSB1602AQTR: 01b: 1.5 A               NVM/SW
                                                                 0b: VCONN discharge disabled on CC
     18h         CC_VCONN_DISCHARGE_EN                                                                   NVM/SW
                                                                 pin
                                                                 1b: VCONN supply capability enabled
     18h         CC_VCONN_SUPPLY_EN                                                                      NVM/SW
                                                                 on CC pin
    1Eh          CC_VCONN_SWITCH_ILIM                            0000b: 350 mA                           NVM/SW
                                                                 0000b: source power role with
    1Fh          POWER_MODE                                                                              NVM/SW
                                                                 accessory support (1)
                                                                 1b: enables UVLO threshold detection
     20h         VCONN_MONITORING_EN                                                                        SW
                                                                 on VCONN pin
     20h         VCONN_UVLO_THRESHOLD                            0b: high UVLO threshold of 4.65 V          SW
                                                                 0032b: 5V DAC value related to
     21h         VBUS_SELECT                                                                                SW
                                                                 targeted VBUS
                                                                 1010b: 5 % plus the high threshold
     22h         VBUS_VSHIFT_HIGH                                                                      NVM/FSM/SW
                                                                 value
                                                                 1010b: 5 % minus the low threshold
     22h         VBUS_VSHIFT_LOW                                                                       NVM/FSM/SW
                                                                 value
     24h         PWR_ACC_DETECT_EN                               Not applicable                          NVM/SW
     25h         VBUS_DISCHARGE_TIME_TO_0V                       1010b: 840 ms discharge time            NVM/SW
     25h         VBUS_DISCHARGE_TIME_TRANSITION 1010b: 200 ms discharge time                             NVM/SW
     26h         VBUS_DISCHARGE_EN                               1b: enables the VBUS discharge path     NVM/SW
                                                                 0b: enables OVLO threshold detection
    2Eh          VDD_OVLO_DISABLE                                                                           SW
                                                                 on VDD pin
                                                                 0b: enables VBUS voltage range
    2Eh          VBUS_RANGE_DISABLE                                                                         SW
                                                                 detection
    2Eh          VBUS_VSAFE0V_THRESHOLD                          00b: VBUS vSafe0V threshold = 0.6 V        SW
                                                                 1b: disables UVLO threshold detection
    2Eh          VDD_UVLO_DISABLE                                                                           SW
                                                                 on VDD pin
1. Italic text indicates this parameter is customized by NVM re-programming
32/55                                                  DocID028319 Rev 3


STUSB1602                                                                                   Application
VBUS power path assertion
          Table 19. Conditions for VBUS power path assertion in source power role
                                           Operation conditions
               Electrical
     Pin                                                                                Comment
                 value    Type-C attached        VDD pin      VBUS_SENSE pin
                                state          monitoring        monitoring
                          Attached.SRC or
                          UnorientedDebug                                              The signal is
                                              VDD < OVLO
                           Accessory.SRC                       VBUS within valid     asserted only if all
                    0                         if VDD pin is
                                  or                            voltage range       the valid operation
                                                 supplied
                           OrientedDebug                                            conditions are met
 VBUS_EN_SRC               Accessory.SRC
                                                                                       The signal is
                                              VDD > OVLO                           de-asserted when at
                                                              VBUS is out of valid
                  HiZ      Any other state    if VDD pin is                         least one non valid
                                                                voltage range
                                                 supplied                           operation condition
                                                                                           is met.
                                        DocID028319 Rev 3                                           33/55
                                                                                                          55


Application                                                                                       STUSB1602
Device state according to application state
                        Table 20. Source power role with accessory support
                                Type-C
 Connection CC1    CC2        device state      A_B_SIDE VCONN VBUS_EN_SRC CC_CONNECTION_STATUS
     state     pin  pin CC_OPERATION_STATUS        pin     supply          pin             register @0Eh
                             register @11h
   Nothing
              Open Open    Unattached.SRC          HiZ      OFF            HiZ                  00h
   attached
               Rd  Open                            HiZ      OFF             0                   2Dh
     Sink
                             Attached.SRC
   attached
              Open  Rd                              0       OFF             0                   2Dh
  Powered     Open Ra                              HiZ      OFF            HiZ                  00h
     cable
                            Unattached.SRC
 without sink
   attached    Ra Open                             HiZ      OFF            HiZ                  00h
  Powered
  cable with
      sink     Rd   Ra                             HiZ      CC2             0                   2Fh
 attached or
                             Attached.SRC
   VCONN-
   powered
  accessory    Ra   Rd                              0       CC1             0                   2Fh
   attached
    Debug
  accessory
     mode      Rp   Rp      Unattached.SRC         HiZ      OFF            HiZ                  00h
   attached
 source role
    Debug
  accessory
                           UnorientedDebug
     mode      Rd   Rd                             HiZ      OFF             0                   6Dh
                            Accessory.SRC
   attached
   sink role
    Debug      Rd  ≤ Ra                            HiZ      OFF             0                   6Dh
  accessory
                            OrientedDebug
     mode
              ≤ Ra  Rd      Accessory.SRC           0       OFF             0                   6Dh
   attached
   sink role
    Audio
   adapter
  accessory    Ra   Ra      Audio accessory        HiZ      OFF            HiZ                  81h
     mode
   attached
The value of the CC1 and CC2 pins is defined from a termination perspective and corresponds to the
termination presented by the connected device. The CC_CONNECTION_STATUS register can report
other values than the one presented in Table 20. In this table, it reflects the state transitions in Type-C
FSM that can be ignored from the application stand point.
34/55                                       DocID028319 Rev 3


STUSB1602                                                                       Application
7.2.2     Sink type application
Application schematic
            Figure 9. Typical STUSB1602 implementation in sink type application
                                    DocID028319 Rev 3                                 35/55
                                                                                            55


Application                                                                                              STUSB1602
Default start-up configuration
                                Table 21. Default setting for a sink type application
     I²C
                                                                                                       Customization
  register                  I²C register field name               I²C register reset value/description
                                                                                                           type
  address
    0Eh          START_UP_POWER_MODE                             0b: device starts in normal mode        NVM/SW
     18h         CC_CURRENT_ADVERTISED                           Not applicable                          NVM/SW
     18h         CC_VCONN_DISCHARGE_EN                           Not applicable                          NVM/SW
     18h         CC_VCONN_SUPPLY_EN                              Not applicable                          NVM/SW
    1Eh          CC_VCONN_SWITCH_ILIM                            Not applicable                          NVM/SW
                                                                 001b: sink power role with
    1Fh          POWER_MODE                                                                              NVM/SW
                                                                 accessory support (1)
     20h         VCONN_MONITORING_EN                             Not applicable                             SW
     20h         VCONN_UVLO_THRESHOLD                            Not applicable                             SW
                                                                 0032b: 5V DAC value related to
     21h         VBUS_SELECT                                                                             FSM/SW
                                                                 targeted VBUS
                                                                 1010b: 5 % plus the high threshold
     22h         VBUS_VSHIFT_HIGH                                                                      NVM/FSM/SW
                                                                 value
                                                                 1010b: 5 % minus the low threshold
     22h         VBUS_VSHIFT_LOW                                                                       NVM/FSM/SW
                                                                 value
                                                                 1b: enables the powered accessory
     24h         PWR_ACC_DETECT_EN                                                                       NVM/SW
                                                                 detection
     25h         VBUS_DISCHARGE_TIME_TO_0V                       1010b: 840 ms discharge time            NVM/SW
     25h         VBUS_DISCHARGE_TIME_TRANSITION 1010b: 200 ms discharge time                             NVM/SW
     26h         VBUS_DISCHARGE_EN                               1b: enables the VBUS discharge path     NVM/SW
    2Eh          VDD_OVLO_DISABLE                                Not applicable                             SW
                                                                 0b: enables VBUS voltage range
    2Eh          VBUS_RANGE_DISABLE                                                                         SW
                                                                 detection
    2Eh          VBUS_VSAFE0V_THRESHOLD                          Not applicable                             SW
    2Eh          VDD_UVLO_DISABLE                                Not applicable                             SW
1. Italic text indicates this parameter is customized by NVM re-programming
36/55                                                  DocID028319 Rev 3


STUSB1602                                                                                   Application
VBUS power path assertion
           Table 22. Conditions for VBUS power path assertion in sink power role
                                           Operation conditions
               Electrical
     Pin                                                                                Comment
                 value    Type-C attached       VDD pin       VBUS_SENSE pin
                               state           monitoring        monitoring
                           Attached.SNK                                                The signal is
                                 or                           VBUS is within valid   asserted only if all
                   0                          Not applicable
                               Debug                            voltage range       the valid operation
                           Accessory.SNK                                            conditions are met
 VBUS_EN_SNK                                                                           The signal is
                                                                                   de-asserted when at
                                                              VBUS is out of valid
                  HiZ      Any other state    Not applicable                        least one non valid
                                                                voltage range
                                                                                    operation condition
                                                                                           is met.
                                        DocID028319 Rev 3                                           37/55
                                                                                                          55


Application                                                                              STUSB1602
Device state according to application state
                          Table 23. Sink power role with accessory support
                                  Type-C
Connection CC1     CC2          device state      A_B_SIDE VCONN VBUS_EN_SNK CC_CONNECTION_STATUS
    state     pin   pin  CC_OPERATION_STATUS         pin   supply    pin          register @0Eh
                              register @11h
                                 (Toggling)
  Nothing
             Open Open       Unattached.SNK          HiZ    OFF      HiZ               00h
  attached
                           Unattached.Accessory
                   Open
              Rp                                     HiZ    OFF       0                41h
                   or Ra
   Source
                              Attached.SNK
  attached
             Open
                    Rp                                0     OFF       0                41h
             or Ra
  Powered
             Open   Ra                               HiZ    OFF      HiZ               00h
    cable                        (Toggling)
   without                   Unattached.SNK
   source                  Unattached.Accessory
              Ra   Open                              HiZ    OFF      HiZ               00h
  attached
   Debug
 accessory                       (Toggling)
    mode      Rd    Rd       Unattached.SNK          HiZ    OFF      HiZ               00h
  attached                 Unattached.Accessory
  sink role
   Debug
              Rp    Rp
 accessory                         Debug
              Def/ Def/
    mode                      Accessory.SNK          HiZ    OFF       0                61h
             1.5A/ 1.5A/
  attached                     (Default USB)
              3A    3A
 source role
   Debug      Rp    Rp
                                                     HiZ    OFF       0                61h
 accessory    3A   1.5A            Debug
    mode                      Accessory.SNK
  attached    Rp    Rp         (Default USB)          0     OFF       0                61h
 source role 1.5A   3A
   Debug      Rp    Rp
                                                     HiZ    OFF       0                61h
 accessory   1.5A   def.           Debug
    mode                      Accessory.SNK
  attached    Rp    Rp             (1.5 A)            0     OFF       0                61h
 source role  def. 1.5A
   Debug      Rp    Rp
                                                     HiZ    OFF       0                61h
 accessory    3A    def.           Debug
    mode                      Accessory.SNK
  attached    Rp    Rp             (3.0 A)            0     OFF       0                61h
 source role  def.  3A
   Audio
  adapter
 accessory    Ra    Ra       Audio accessory         HiZ    OFF      HiZ               81h
    mode
  attached
38/55                                         DocID028319 Rev 3


STUSB1602                                                                                        Application
                       Table 23. Sink power role with accessory support (continued)
                                     Type-C
 Connection CC1       CC2         device state       A_B_SIDE VCONN VBUS_EN_SNK CC_CONNECTION_STATUS
     state      pin   pin   CC_OPERATION_STATUS         pin   supply       pin            register @0Eh
                                 register @11h
   VCONN-       Rd    Ra                                HiZ    OFF         HiZ                 00h
                                    (Toggling)
   powered
                                Unattached.SNK
  accessory     Ra     Rd                               HiZ    OFF         HiZ                 00h
                              Unattached.Accessory
   attached
The value of the CC1 and CC2 pins is defined from a termination perspective and corresponds to the
termination presented by the connected device.
The CC_CONNECTION_STATUS register can report other values than the one presented in Table 23. In
this table, it reflects the state transitions in Type-C FSM that can be ignored from the application stand
point.
                                                 DocID028319 Rev 3                                      39/55
                                                                                                              55


Application                                                                       STUSB1602
7.2.3       Dual role type application
Application schematic
             Figure 10. Typical STUSB1602 implementation in dual type application
Note:       Schematic configuration is in dead battery mode
40/55                                      DocID028319 Rev 3


STUSB1602                                                                                                Application
Default start-up configuration
                                Table 24. Default setting for a dual type application
     I²C
                                                                                                       Customization
  register                  I²C register field name               I²C register reset value/description
                                                                                                           type
  address
    0Eh          START_UP_POWER_MODE                             0b: device starts in normal mode        NVM/SW
                                                                 STUSB1602QTR: 00b: Default USB          NVM/SW
     18h         CC_CURRENT_ADVERTISED
                                                                 STUSB1602AQTR: 01b: 1.5 A               NVM/SW
                                                                 0b: VCONN discharge disabled on CC
     18h         CC_VCONN_DISCHARGE_EN                                                                   NVM/SW
                                                                 pin
                                                                 1b: VCONN supply capability enabled
     18h         CC_VCONN_SUPPLY_EN                                                                      NVM/SW
                                                                 on CC pin
    1Eh          CC_VCONN_SWITCH_ILIM                            0000b: 350 mA                           NVM/SW
                                                                 011b: dual power role with
    1Fh          POWER_MODE                                                                              NVM/SW
                                                                 accessory support (1)
                                                                 1b: enables UVLO threshold detection
     20h         VCONN_MONITORING_EN                                                                        SW
                                                                 on VCONN pin
     20h         VCONN_UVLO_THRESHOLD                            0b: high UVLO threshold of 4.65 V          SW
                                                                 0032b: 5V DAC value related to
     21h         VBUS_SELECT                                                                                SW
                                                                 targeted VBUS
                                                                 1010b: 5 % plus the high threshold
     22h         VBUS_VSHIFT_HIGH                                                                      NVM/FSM/SW
                                                                 value
                                                                 1010b: 5 % minus the low threshold
     22h         VBUS_VSHIFT_LOW                                                                       NVM/FSM/SW
                                                                 value
     24h         PWR_ACC_DETECT_EN                               Not applicable                          NVM/SW
     25h         VBUS_DISCHARGE_TIME_TO_0V                       1010b: 840 ms discharge time            NVM/SW
     25h         VBUS_DISCHARGE_TIME_TRANSITION 1010b: 200 ms discharge time                             NVM/SW
     26h         VBUS_DISCHARGE_EN                               1b: enables the VBUS discharge path     NVM/SW
                                                                 0b: enables OVLO threshold detection
    2Eh          VDD_OVLO_DISABLE                                                                           SW
                                                                 on VDD pin
                                                                 0b: enables VBUS voltage range
    2Eh          VBUS_RANGE_DISABLE                                                                         SW
                                                                 detection
    2Eh          VBUS_VSAFE0V_THRESHOLD                          00b: VBUS vSafe0V threshold = 0.6 V        SW
                                                                 1b: disables UVLO threshold detection
    2Eh          VDD_UVLO_DISABLE                                                                           SW
                                                                 on VDD pin
1. Italic text indicates this parameter is customized by NVM re-programming
                                                       DocID028319 Rev 3                                        41/55
                                                                                                                      55


Application                                                                                   STUSB1602
VBUS power path assertion
            Table 25. Conditions for VBUS power path assertion in source power role
                                             Operation conditions
                 Electrical
      Pin                                                                                 Comment
                   value    Type-C attached         VDD pin     VBUS_SENSE pin
                                  state           monitoring       monitoring
                             Attached.SRC
                                   or
                                                                                         The signal is
                            UnorientedDebug     VDD < OVLO
                                                                VBUS is within valid   asserted only if all
                      0      Accessory.SRC       if VDD pin is
                                                                  voltage range       the valid operation
                                    or              supplied
                                                                                      conditions are met
                             OrientedDebug
 VBUS_EN_SRC                 Accessory.SRC
                                                                                         The signal is
                                                VDD > OVLO                           de-asserted when at
                                                                VBUS is out of valid
                    HiZ      Any other state     if VDD pin is                        least one non valid
                                                                  voltage range
                                                    supplied                          operation condition
                                                                                             is met.
             Table 26. Conditions for VBUS power path assertion in sink power role
                                             Operation conditions
                 Electrical
      Pin                                                                                 Comment
                   value    Type-C attached         VDD pin     VBUS_SENSE pin
                                  state           monitoring       monitoring
                             Attached.SNK                                                The signal is
                                   or                           VBUS is within valid   asserted only if all
                      0                         Not applicable
                                 Debug                            voltage range       the valid operation
                             Accessory.SNK                                            conditions are met
 VBUS_EN_SNK                                                                             The signal is
                                                                                     de-asserted when at
                                                                VBUS is out of valid
                    HiZ      Any other state    Not applicable                        least one non valid
                                                                  voltage range
                                                                                      operation condition
                                                                                             is met.
42/55                                     DocID028319 Rev 3


STUSB1602                                                                             Application
Device state according to application state
                          Table 27. Dual power role with accessory support
                               Type-C
                             device state                                          CC_CONNECTION
Connection    CC1   CC2                   A_B_SIDE VCONN   VBUS_EN_SRC VBUS_EN_SNK
                          CC_OPERATION                                                _STATUS
     state     pin   pin                     pin    supply     pin         pin
                              _STATUS                                               register @0Eh
                           register @11h
                              (Toggling)
   Nothing
              Open  Open  Unattached.SRC     HiZ     OFF       HiZ         HiZ           00h
   attached
                          Unattached.SNK
               Rd   Open                     HiZ     OFF        0          HiZ           2Dh
     Sink
                           Attached.SRC
   attached
              Open   Rd                       0      OFF        0          HiZ           2Dh
   Powered    Open   Ra                      HiZ     OFF       HiZ         HiZ           00h
     cable                    (Toggling)
 without sink             Unattached.SRC
  or source               Unattached.SNK
   attached    Ra   Open                     HiZ     OFF       HiZ         HiZ           00h
   Powered
               Rd    Ra                      HiZ     CC2        0          HiZ           2Fh
  cable with
      sink
   attached
                           Attached.SRC
  or VCONN-
   powered     Ra    Rd                       0      CC1        0          HiZ           2Fh
 accessory
   attached
    Debug
 accessory
                          UnorientedDebug
     mode      Rd    Rd                      HiZ     OFF        0          HiZ           6Dh
                           Accessory.SRC
   attached
   sink role
    Debug      Rd   ≤ Ra                     HiZ     OFF        0          HiZ           6Dh
 accessory
                           OrientedDebug
     mode
              ≤ Ra   Rd    Accessory.SRC      0      OFF        0          HiZ           6Dh
   attached
   sink role
    Audio
   adapter
 accessory     Ra    Ra   Audio accessory    HiZ     OFF       HiZ         HiZ           81h
     mode
   attached
                    Open
               Rp                            HiZ     OFF       HiZ          0            41h
    Source          or Ra
                           Attached.SNK
   attached   Open
                     Rp                       0      OFF       HiZ          0            41h
              or Ra
    Debug
               Rp    Rp
 accessory                      Debug
               def/  def/
     mode                  Accessory.SNK     HiZ     OFF       HiZ          0            61h
              1.5A/ 1.5A/
   attached                 (Default USB)
               3A    3A
 source role
                                           DocID028319 Rev 3                                   43/55
                                                                                                     55


Application                                                                                      STUSB1602
                       Table 27. Dual power role with accessory support (continued)
                                   Type-C
                                 device state                                               CC_CONNECTION
 Connection    CC1   CC2                        A_B_SIDE VCONN   VBUS_EN_SRC  VBUS_EN_SNK
                             CC_OPERATION                                                        _STATUS
     state      pin   pin                          pin    supply     pin           pin
                                  _STATUS                                                      register @0Eh
                               register @11h
    Debug       Rp    Rp
                                                   HiZ     OFF       HiZ            0               61h
  accessory     3A   1.5A           Debug
    mode                      Accessory.SNK
   attached     Rp    Rp        (Default USB)       0      OFF       HiZ            0               61h
 source role   1.5A   3A
    Debug       Rp    Rp
                                                   HiZ     OFF       HiZ            0               61h
  accessory    1.5A   def.          Debug
    mode                      Accessory.SNK
   attached     Rp    Rp            (1.5 A)         0      OFF       HiZ            0               61h
 source role   def.  1.5A
    Debug       Rp    Rp
                                                   HiZ     OFF       HiZ            0               61h
  accessory     3A    def.          Debug
    mode                      Accessory.SNK
   attached     Rp    Rp            (3.0 A)         0      OFF       HiZ            0               61h
 source role   def.   3A
The value of the CC1 and CC2 pins is defined from a termination perspective and corresponds to the
termination presented by the connected device.
The CC_CONNECTION_STATUS register can report other values than the one presented in Table 27. In
this table, it reflects the state transitions in Type-C FSM that can be ignored from the application stand
point.
44/55                                            DocID028319 Rev 3


STUSB1602                                                               Electrical characteristics
8         Electrical characteristics
8.1       Absolute maximum ratings
          All voltages are referenced to GND.
                                      Table 28. Absolute maximum ratings
                Symbol                             Parameter                    Value.      Unit
          VDD                Supply voltage                                       28
          VSYS               Supply voltage on VSYS pin                            6
          VCC1, VCC2
                             High voltage on CC pins                              22
          VCC1DB, VCC2DB
          VVBUS_EN_SRC
          VVBUS_EN_SNK       High voltage on VBUS pins                            28          V
          VVBUS_SENSE
          VSCL, VSDA
          VALERT#
                             Operating voltage on I/O pins                     -0.3 to 6
          VRESET
          VA_B_SIDE
          VCONN              VCONN voltage                                         6
          TSTG               Storage temperature                              -55 to 150
                                                                                             °C
          TJ                 Maximum junction temperature                        145
                             HBM                                                   4
          ESD                                                                                kV
                             CDM                                                  1.5
                                          DocID028319 Rev 3                                  45/55
                                                                                                   55


Electrical characteristics                                                                    STUSB1602
8.2          Operating conditions
                                          Table 29. Operating conditions
                     Symbol                           Parameter                       Value       Unit
              VDD                  Supply voltage                                   4.1 to 22
              VSYS                 Supply voltage on VSYS pin                       3.0 to 5.5
              VCC1, VCC2
                                   CC pins                                         -0.3 to 5.5
              VCC1DB, VCC2DB
              VVBUS_EN_SRC
              VVBUS_EN_SNK         High voltage pins                                 0 to 22        V
              VVBUS_SENSE
              VSCL, VSDA
              VALERT#
                                   Operating voltage on I/O pins                     0 to 4.5
              VRESET
              VA_B_SIDE
              VCONN                VCONN voltage                                    2.7 to 5.5
              ICONN                VCONN rated current (default = 0.35 A)          0.1 to 0.6       A
              TA                   Operating temperature                           -40 to 105      °C
Note:        The transient voltage on the CC1 and CC2 pins is allowed to drop to -0.3 during BMC
             communication.
46/55                                       DocID028319 Rev 3


STUSB1602                                                                    Electrical characteristics
8.3       Electrical and timing characteristics
          Unless otherwise specified: VDD = 5 V, TA = 25 °C, all voltages are referenced to GND.
                               Table 30. Electrical characteristics
  Symbol     Parameter                      Conditions                  Min.     Typ.     Max.    Unit
                          Device idle as a SOURCE VSYS @ 3.3 V                    158
          Current
IDD (SRC)                 (not connected, no
          consumption                                 VDD @ 5.0 V                 188
                          communication)
                          Device idle as a SINK      VSYS @ 3.3 V                113
          Current
IDD (SNK)                 (not connected, no                                                      µA
          consumption
                          communication)              VDD @ 5.0 V                 140
                          Device in standby          VSYS @ 3.3 V                 33
          Standby current
ISTDBY                    (not connected, low
          consumption
                          power)                      VDD @ 5.0 V                  53
CC1 and CC2 pins
IP-USB                                                                  -20%       80    +20 %
          CC current      CC pin voltage, VCC = -0.3 to 2.6 V, 
IP-1.5                                                                   -8%      180     +8 %     uA
          sources         40 °C < TA < 105 °C
IP-3.0                                                                   -8%      330     +8 %
          CC open pin
VCCO                      CC unconnected, VDD = 3.0 to 5.5 V             2.75                       V
          voltage
          CC pull-down
Rd                        -40 °C < TA < 105 °C                          -10%      5.1    +10 %    kΩ
          resistors
                          External IP = 180 μA applied into CC, 
VCCDB-1.5 CC pin voltage                                                                   1.2
                          VDD = 0 V, dead-battery function enabled
          in dead battery                                                                           V
          condition       External IP = 330 μA applied into CC, 
VCCDB-3.0                                                                                  2.0
                          VDD = 0 V, dead-battery function enabled
          CC input
RINCC                     Pull-up and pull-down resistors off            200                      kΩ
          impedance
                          Max Ra detection by DFP at IP = IP -USB, min
          Detection
VTH0.2                    IP_USB detection by UFP on Rd, min CC          0.15    0.20     0.25
          threshold 1
                          voltage for connected UFP
          Detection
VTH0.4                    Max Ra detection by DFP at IP = IP-1.5         0.35    0.40     0.45
          threshold 2
          Detection
VTH0.66                   Min IP_1.5 detection by UFP on Rd              0.61    0.66     0.70
          threshold 3                                                                               V
          Detection
VTH0.8                    Max Ra detection by DFP at IP = IP-3.0         0.75    0.80     0.85
          threshold 4
          Detection
VTH1.23                   Min IP_3.0 detection by UFP on Rd              1.16    1.23     1.31
          threshold 5
          Detection       Max Rd detection by DFP at IP = IP-USB and IP
VTH1.6                                                                   1.50    1.60     1.65
          threshold 6     = IP-1.5
                                          DocID028319 Rev 3                                       47/55
                                                                                                        55


Electrical characteristics                                                                       STUSB1602
                               Table 30. Electrical characteristics (continued)
   Symbol        Parameter                         Conditions                   Min.    Typ.    Max.   Unit
              Detection          Max Rd detection by DFP at IP-3.0, max CC
 VTH2.6                                                                         2.45    2.60    2.75    V
              threshold 7        voltage for connected UFP
 VCONN protection
              VCONN path
 RVCONN                          IVCONN = 0.2 A,                                0.25     0.5   0.975    Ω
              resistance
                                                                                  85     100     125
              Overcurrent        Programmable current limit threshold 
 IOCP                                                                            300     350     400   mA
              protection         (from 100 mA to 600 mA by step of 50 mA)
                                                                                 550     600     650
              Output-over
 VOVP         voltage                                                            5.9      6      6.1
              protection
                                                                                                        V
              Input              Low UVLO threshold                              2.6             2.7
 VUVP         undervoltage
              protection         High UVLO threshold (default)                   4.6             4.8
 VBUS monitoring and driving
              VBUS presence
 VTHUSB                          VSYS = 3.0 to 5.5 V                             3.8     3.9     4.0
              threshold
                                 VSYS = 3.0 to 5.5 V                             0.5     0.6     0.7
              VBUS safe 0 V                                                                             V
                                 Programmable threshold                          0.8     0.9     1.0
 VTH0V        threshold
              (vSafe0V)          Programmable threshold from 0.6 V to 1.8 V      1.1     1.2     1.3
                                 Default VTHOV = 0.6 V                           1.7     1.8     1.9
              VBUS discharge
 RDISUSB                                                                         600     700     800    Ω
              resistor
              VBUS discharge     Default TDISPARAM = 840 ms, the co-efficient
                                                                                70 (1)  84 (1) 100 (1)
              time to 0V         TDISPARAM is programmable by NVM
 TDISUSB                                                                                               ms
              VBUS discharge     Default TDISPARAM = 200 ms, the co-efficient
                                                                                20 (1)  24 (1)  28 (1)
              time to PDO        TDISPARAM is programmable by NVM
              VBUS monitoring VBUS = nominal target value, default
                                                                                        VBUS
 VMONUSBH     high voltage       VMONUSBH = VBUS + 10 %, the threshold limit is
                                                                                       + 10 %
              threshold          programmable by NVM from +5 % to +20 %
                                                                                                        V
              VBUS monitoring VBUS = nominal target value, default 
                                                                                        VBUS
 VMONUSBL     low voltage        VMONUSBL = VBUS - 10 %, the threshold limit is
                                                                                       - 10 %
              threshold          programmable by NVM from -20 % to -5 %
 Digital input/output (SCL, SDA, ALERT#, A_B_SIDE)
              High level input
 VIH                                                                             1.2
              voltage
              Low level input
 VIL                                                                                            0.35    V
              voltage
              Low level output
 VOL                             Ioh = 3 mA                                                      0.4
              voltage
48/55                                            DocID028319 Rev 3


STUSB1602                                                                     Electrical characteristics
                             Table 30. Electrical characteristics (continued)
  Symbol        Parameter                      Conditions                 Min.    Typ.     Max.    Unit
 20 V open drain outputs (VBUS_EN_SRC, VBUS_EN_SNK)
             Low level output
 VOL                           Ioh = 3 mA                                                   0.4     V
             voltage
1. TDISPARAM
                                             DocID028319 Rev 3                                     49/55
                                                                                                         55


Package information                                                                        STUSB1602
9          Package information
           In order to meet environmental requirements, ST offers these devices in different grades of
           ECOPACK® packages, depending on their level of environmental compliance. ECOPACK®
           specifications, grade definitions and product status are available at: www.st.com.
           ECOPACK® is an ST trademark.
9.1        QFN24 EP 4x4 mm package information
                                 Figure 11. QFN24 EP 4x4 mm package outline
50/55                                      DocID028319 Rev 3


STUSB1602                                                    Package information
                    Table 31. QFN24 EP 4x4 mm mechanical data
                         Millimeters                        Inches
          Ref.
                Min          Typ        Max       Min         Typ        Max
           A   0.80          0.90       1.00     0.031       0.035      0.039
          A1   0.00          0.02       0.05     0.000       0.001      0.002
           b   0.18          0.25       0.30     0.007       0.010      0.012
           D   3.95          4.00       4.05     0.156       0.157      0.159
          D2   2.55          2.70       2.80     0.100       0.106      0.110
           E   3.95          4.00       4.05     0.156       0.157      0.159
          E2   2.55          2.70       2.80     0.100       0.106      0.110
           e   0.45          0.50       0.55     0.018       0.020      0.022
           K   0.15           —          —       0.006         —          —
           L   0.30          0.40       0.50     0.012       0.016      0.020
               Figure 12. QFN24 EP 4x4 mm recommended footprint
                            DocID028319 Rev 3                               51/55
                                                                                  55


Package information                                                                 STUSB1602
9.2        Thermal Information
                                        Table 32. Thermal information
               Symbol                           Parameter                    Value      Unit
                 RθJA      Junction-to-ambient thermal resistance             37
                                                                                        °C/W
                 RθJC      Junction-to-case thermal resistance                 5
9.3        Packing information
                                         Figure 13. Reel information
                                         Table 33. Tape dimensions
                 Package                  Pitch                Carrier width       Reel
              QFN24 EP 4x4                8 mm                    12 mm            13”
52/55                                   DocID028319 Rev 3


STUSB1602                                                                     Terms and abbreviations
10        Terms and abbreviations
                              Table 34. List of terms and abbreviations
                 Term                                          Description
                          Audio adapter accessory mode. It is defined by the presence of Ra/Ra on the
                          CC1/CC2 pins.
          Accessory modes
                          Debug accessory mode. It is defined by the presence of Rd/Rd on CC1/CC2
                          pins in source power role or Rp/Rp on CC1/CC2 pins in sink power role.
                          Downstream Facing Port, specifically associated with the flow of data in a
                          USB connection. Typically, the ports on a HOST or the ports on a hub to which
          DFP
                          devices are connected. In its initial state, the DFP sources VBUS and VCONN,
                          and supports data.
                          Dual-role port. A port that can operate as either a source or a sink. The port's
          DRP
                          role may be changed dynamically.
                          Port asserting Rd on the CC pins and consuming power from the VBUS; most
          Sink
                          commonly a device.
                          Port asserting Rp on the CC pins and providing power over the VBUS; most
          Source
                          commonly a host or hub DFP.
                          Upstream Facing Port, specifically associated with the flow of data in a USB
          UFP             connection. The port on a device or a hub that connects to a host or the DFP
                          of a hub. In its initial state, the UFP sinks the VBUS and supports data.
                                     DocID028319 Rev 3                                               53/55
                                                                                                           55


Revision history                                                                      STUSB1602
11          Revision history
                                Table 35. Document revision history
                    Date    Revision                            Changes
                27-Jan-2017    1       Initial release.
                                       Updated Features section and ESD reference in Table 28:
                05-Apr-2017    2
                                       Absolute maximum ratings.
               04-Aug-2017     3       Updated Table 1: Device summary.
54/55                               DocID028319 Rev 3


STUSB1602
                                           IMPORTANT NOTICE – PLEASE READ CAREFULLY
STMicroelectronics NV and its subsidiaries (“ST”) reserve the right to make changes, corrections, enhancements, modifications, and
improvements to ST products and/or to this document at any time without notice. Purchasers should obtain the latest relevant information on
ST products before placing orders. ST products are sold pursuant to ST’s terms and conditions of sale in place at the time of order
acknowledgement.
Purchasers are solely responsible for the choice, selection, and use of ST products and ST assumes no liability for application assistance or
the design of Purchasers’ products.
No license, express or implied, to any intellectual property right is granted by ST herein.
Resale of ST products with provisions different from the information set forth herein shall void any warranty granted by ST for such product.
ST and the ST logo are trademarks of ST. All other product or service names are the property of their respective owners.
Information in this document supersedes and replaces information previously supplied in any prior versions of this document.
                                                © 2017 STMicroelectronics – All rights reserved
                                                            DocID028319 Rev 3                                                          55/55
                                                                                                                                              55


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
STMicroelectronics:
 STUSB1602QTR STUSB1602AQTR
