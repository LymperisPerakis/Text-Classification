                                                                                                           Is Now Part of
                       To learn more about ON Semiconductor, please visit our website at
                                                                                                    www.onsemi.com
Please note: As part of the Fairchild Semiconductor integration, some of the Fairchild orderable part numbers
will need to change in order to meet ON Semiconductor’s system requirements. Since the ON Semiconductor
product management systems do not have the ability to manage part nomenclature that utilizes an underscore
(_), the underscore (_) in the Fairchild part numbers will be changed to a dash (-). This document may contain
device numbers with an underscore (_). Please check the ON Semiconductor website to verify the updated
device numbers. The most current and up-to-date ordering information can be found at www.onsemi.com. Please
email any questions regarding the system integration to Fairchild_questions@onsemi.com.
 ON Semiconductor and the ON Semiconductor logo are trademarks of Semiconductor Components Industries, LLC dba ON Semiconductor or its subsidiaries in the United States and/or other countries. ON Semiconductor owns the rights to a number
 of patents, trademarks, copyrights, trade secrets, and other intellectual property. A listing of ON Semiconductor’s product/patent coverage may be accessed at www.onsemi.com/site/pdf/Patent-Marking.pdf. ON Semiconductor reserves the right
 to make changes without further notice to any products herein. ON Semiconductor makes no warranty, representation or guarantee regarding the suitability of its products for any particular purpose, nor does ON Semiconductor assume any liability
 arising out of the application or use of any product or circuit, and specifically disclaims any and all liability, including without limitation special, consequential or incidental damages. Buyer is responsible for its products and applications using ON
 Semiconductor products, including compliance with all laws, regulations and safety requirements or standards, regardless of any support or applications information provided by ON Semiconductor. “Typical” parameters which may be provided in ON
 Semiconductor data sheets and/or specifications can and do vary in different applications and actual performance may vary over time. All operating parameters, including “Typicals” must be validated for each customer application by customer’s
 technical experts. ON Semiconductor does not convey any license under its patent rights nor the rights of others. ON Semiconductor products are not designed, intended, or authorized for use as a critical component in life support systems or any FDA
 Class 3 medical devices or medical devices with a same or similar classification in a foreign jurisdiction or any devices intended for implantation in the human body. Should Buyer purchase or use ON Semiconductor products for any such unintended
 or unauthorized application, Buyer shall indemnify and hold ON Semiconductor and its officers, employees, subsidiaries, affiliates, and distributors harmless against all claims, costs, damages, and expenses, and reasonable attorney fees arising out
 of, directly or indirectly, any claim of personal injury or death associated with such unintended or unauthorized use, even if such claim alleges that ON Semiconductor was negligent regarding the design or manufacture of the part. ON Semiconductor
 is an Equal Opportunity/Affirmative Action Employer. This literature is subject to all applicable copyright laws and is not for resale in any manner.


                                                                                                                                   FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
                                                                                                       September 2013
     FUSB2805
     USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Features                                                     Description
          Complies with USB 2.0, OTG Rev 1.3 Supplement,         The FUSB2805 is a UTMI+ Low-Pin Interface (ULPI)
           and ULPI Rev 1.1 Specifications                        USB2.0 OTG transceiver. It is compliant with the
                                                                  Universal Serial Bus Specification Rev 2.0 (USB2.0),
          Supports 480 Mbps, 12 Mbps, and 1.5 Mbps               the ULPI Specification Rev. 1.1, and the On-The-Go
           USB2.0 Speeds                                          (OTG) supplement to USB2.0, Rev. 1.3.
           -    Integrated Termination Resistors Meet USB2.0      The FUSB2805 is optimized to connect the USB2.0
                Resistor ECN                                      host, peripheral, or OTG-controller to the USB
                                                                  connector via the ULPI link. Data can be transmitted
           -    Integrated Serializer and Deserializer
                                                                  and received at high speed (480 Mbps), full speed
           -    Insertion and Removal of Stuffed Bits             (12 Mbps), and low speed (1.5 Mbps) through a 12-bit
                as Appropriate                                    (SDR) interface.
           -    USB Clock and Data Recovery to ±150ppm
          Supports USB OTG Rev 1.3 Host Negotiation              Related Resources
           Protocol (HNP) and Session Request Protocol
                                                                  UTMI+ Low Pin Interface Specification (ULPI), Revision
           (SRP)
                                                                  1.1, October 20, 2004. http://www.ulpi.org
          15 kV ESD, IEC 61000 Board Level, Air Gap
                                                                  UTMI+ Specification, Revision 1.0, February 22, 2004.
                                                                  http://www.ulpi.org
     Applications                                                 For additional performance information, please contact
                                                                  analogswitch@fairchildsemi.com.
          Set-Top Box Video Camera, MP3 Player
          Cell Phone, Digital Still Camera, PDA
          DVD Recorder, Scanner, Printer
     Ordering Information
         Part Number             Top Mark     Operating Temperature Range                       Package
                                                                                     32-Terminal, Molded Leadless
         FUSB2805MLX             FUSB2805                -40 to +85°C
                                                                                 Package (MLP), Quad, JEDEC MO-220
© 2008 Fairchild Semiconductor Corporation                                                                 www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3


                                                                                                                                                                                                                     FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Block Diagram
                   Clo c k                     ULP I
                                                                                    US B D ata                                                                                                   DP
                   D 0-D 7                   Interf ac e                                                                                            US B 2.0 A TX
                                                                                    S erializer
                    D IR                     Co ntro ller
                    S TP                      Reg is ter                      US B D ata                                                            Term inatio n
                    NX T                                                                                                                                                                         DM
                                               M ap                          D es erializer                                                          Res is to rs
             CHIP _S E LE CT_N
                                                                                                                                                                      V D D 3V3
                                                                                                                                                    ID _P ULLUP
                                                                                                                                                                                  50k
                                                                                                                                      O TG M o d ule                  400k
                    CF G 1              F req uenc y                                               G lo b al
                                           S elec t                                                Clo c ks                                                                                      ID
                                                                        P LL                                                     ID D etec to r
                  CLK IN
                                                                                                                                                                                                 V B US
                      V IO
                         0.1µF
                                                                                                                                                                                                 Res et_N
         V CC3V 3                                                                                  POR
                                                                P o wer-O n                                                                             E x ternal                                     PSW
              0.1µF      4.7µF                                    Res et                                                                                 V B US
         V CC1V 2                                                                                                                                        & F ault                       1 0 0k
              0.1µF      4.7µF                                                                                                                         D etec tio n
                                                                                                                                                        Co ntro l                                  F A ULT
                                          V o ltag e                                                                                                      B lo c k
                    V CC                 Reg ulato r
                 IC (F lo at)                                                                                                                           A nalo g
                                                                                                                         VR EF                         Ref erenc e                                RRE F
             Tes t (F lo at)                                                                                                                            M o d ule
                                                        Figure 1. Functional Block Diagram
     Pin Configuration
                                                                          CHIP_SELECT_N
                                                                    D2                     D3        VIO      CGF1   CLOCK   D4         D5
                                                                   32     31              30        29        28     27      26         25
                                                  D1        1                                                                                         24   D6
                                                  D0        2                                                                                         23   D7
                                                 VIO        3                                                                                         22   NXT
                                                  DM        4                                  GND                                                    21   STP
                                                                                          Exposed DiePad
                                               RREF         5                                                                                         20   VIO
                                                  DP        6                                                                                         19   RESET_N
                                                 VCC        7                                                                                         18   DIR
                                                   ID       8                                                                                         17   VDD1V2
                                                                    9     10              11        12        13     14      15        16
                                                                                                                             CLIKIN
                                                                                                     VCC3V3
                                                                                                                     PSW
                                                                                           FAULT              VBUS
                                                                    VCC
                                                                           TEST(FLOAT)
                                                                                                                                        IC(FLOAT)
                                                  Figure 2. Pin Assignments (Through View)
© 2008 Fairchild Semiconductor Corporation                                                                                                                                                       www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                                                         2


                                                                                                                                              FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Pin Definitions
                                      (1)
          Symbol             Type                                                   Description
                                             Active LOW. HIGH – ULPI pin three-stated; LOW – ULPI operates normally. TTL
       Chip Select_N              I
                                             compatible; CMOS input with hysteresis.
             RREF              AI/O          Resistor reference. Connect through 12 k 1% to GND.
              DM               AI/O          USB D- pin. USB mode: data minus (D-) pin of the USB cable.
              DP               AI/O          USB D+ pin. USB mode: data plus (D+) pin of the USB cable.
                                             FAULT is used to signal a VBUS over-current/over-voltage condition from an external
                                             SMPS or power management IC. The link must enable this function via the
           FAULT                  I
                                             ExternalVbusFault register bit and the polarity must be set via the
                                             ExternalVbusActiveLow register bit.
              ID                  I          Identification (ID) pin of the micro-USB cable. TTL; if not used, connect to 3V3.
             VCC                 P           Input supply voltage or battery source.
                                             Controls an external, active HIGH, VBUS power switch/charge pump and/or an SMPS
            PSW                  O           charger IC. An external 100 k pull-down resistor is required. Open source, slew-rate-
                                             controlled output; this pin is referenced to VCC3V3.
                                             Should be connected to the VBUS pin of the USB cable. Leave open circuit if not used.
            VBUS               AI/O
                                             An internal 90 k ±11% pull-down resistor is present on this pin.
                                             3.3 V regulator output requiring capacitors. Internally powers OTG, analog core, and
            VCC3V3               P
                                             ATX.
                                             Clock input; frequency depends on the CFG1 pin. This is a digital input buffer, not
            CLKIN                 I
                                             analog for a crystal.
             I.C.               I/O          Internally connected; float pin.
            TEST                I/O          Internally connected; float pin.
            CFG1                  I          Configures the clock frequency; 0: input is 19.2 MHz. 1: input is 26 MHz.
                                             1.2 V regulator output requiring capacitors. Internally powers the digital core and
            VDD1V2               P
                                             analog core.
              VIO                P           Input I/O supply rail; 0.1 µF capacitor connected to power input.
          Reset_N                 I          Connect to VIO when not used. Resets the transceiver; active LOW.
             GND                 P           Connect to ground.
             DIR                 O           ULPI direction output signal.
             STP                  I          ULPI stop input signal; CMOS input.
             NXT                 O           ULPI next output signal.
              D7                I/O          ULPI data pin 7; three-state output.
              D6                I/O          ULPI data pin 6; three-state output.
              D5                I/O          ULPI data pin 5; three-state output.
              D4                I/O          ULPI data pin 4; three-state output.
              D3                I/O          ULPI data pin 3; three-state output.
              D2                I/O          ULPI data pin 2; three-state output.
              D1                I/O          ULPI data pin 1; three-state output.
              D0                I/O          ULPI data pin 0; three-state output.
                                             60 MHz clock output when digital 19.2 MHz (or 26 MHz) clock is applied; Push-pull
           CLOCK                 O
                                             output.
     Notes:
     1. I=input; O=output; I/O=digital input/output; OD=open-drain output; AI/O=analog input/output; P=power or ground.
     2. Per USB2.0, below a supply of 2.97 V, USB full-speed and low-speed transactions are not guaranteed; although
         some devices may continue to function with the FUSB2805 at the lower supply rail.
© 2008 Fairchild Semiconductor Corporation                                                                                www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                     3


                                                                                                                                     FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Functional Description
     ULPI Interface Controller                                      USB 2.0 ATX
     The FUSB2805 provides a 12-pin interface (SDR)                 The USB 2.0 ATX block is an analog front-end
     compliant with the UTMI+ Low-Pin Interface (ULPI)              containing the circuitry needed for transmitting,
     specification, revision 1.1. This interface must be            receiving, and terminating the USB bus in high speed
     connected to the USB link controller.                          (HS), full speed (FS), and low speed (LS); for USB
                                                                    peripheral, host, and OTG implementations; per the
     The ULPI controller provides the following functions:          USB2.0 specification and its relevant supplements. The
          ULPI-compliant interface and register set                following circuitry is included:
          Full control of USB peripheral, host, and On-The-           Differential drivers for transmitting data at HS, FS,
           Go functionality                                             and LS
          Prioritizes USB receive data, USB transmit data,            Differential receiver and single-ended receivers for
           interrupts, and register operations                          receiving data at HS, FS, and LS
          Parses USB transmit and receive data                        Squelch circuit to detect HS bus activity
          Controls the VBUS external source                           HS disconnect detector
          VBUS monitoring, charging, and discharging                  45  HS bus terminations on DP and DM for
                                                                        peripheral and host mode
          Low-power mode
                                                                       1.5 kΩ pull-up resistor on DP for FS for peripheral
          6- and 3-pin serial modes                                    mode only (DM resistor pull up for LS peripheral is
          Generates RX CMDs (status updates)                           not supported since FUSB2805 is HS capable.)
          Maskable interrupts                                         15 kΩ bus terminations on DP and DM for host
          Control over the ULPI bus state                              mode only
     USB Serializer and Deserializer                                PLL and Clock Generation
     The USB data serializer prepares data for transmitting         The FUSB2805 has a built-in Phase Locked Loop (PLL)
     onto the USB bus. To transmit data, the USB link               for clock generation.
     controller sends a transmit command and data on the            The PLL takes the square wave clock (19.2 MHz or
     ULPI bus. The serializer performs parallel-to-serial           26 MHz) from the CLKIN and multiplies or divides it into
     conversion, bit stuffing, and Non Return to Zero, Invert       various frequencies for internal use.
     (NRZI) encoding. For packets with a PID, the serializer
     adds a SYNC pattern to the start of the packet and an          From the clock source, the PLL produces the following
     EOP pattern to the end of the packet. When the                 frequencies:
     serializer is busy and cannot accept more data, the
     ULPI interface controller de-asserts NXT.                             60 MHz clock for the ULPI interface controller
                                                                           1.5 MHz for low-speed USB data
     The USB data deserializer decodes data received from
     the USB bus. When data is received, the deserializer                  12 MHz for full-speed USB data
     strips the SYNC and EOP patterns, if applicable, then                 480 MHz for high-speed USB data
     performs serial-to-parallel conversion, NRZI decoding,
     and bit unstuffing on the data payload. The ULPI               Interface Protection
     interface controller sends the data to the USB link            To prevent incorrect activity when the ULPI interface is
     controller by asserting DIR, then asserting NXT                not correctly driven by the link, such as when the link
     whenever a byte is ready. The deserializer also detects        controller powers up slower than the FUSB2805, there
     various receive errors, including bit-stuff errors,            is a weak pull-up resistor on the STP pin.
     elasticity buffer under-run or over-run, and byte-
     alignment errors.                                              If the STP is unexpectedly HIGH at any time, the
                                                                    FUSB2805 protects the ULPI interface by enabling
                                                                    weak pull-down resistors on D[7:0].
                                                                    This interface protection scheme can be disabled by
                                                                    setting the INTF_PROT_DIS bit to 1b (INTF_CNTRL[7]).
© 2008 Fairchild Semiconductor Corporation                                                                       www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                           4


                                                                                                                                                    FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
                                                                                                               tPWRDN
                                                                                                                             3-State (ignored)
       CLOCK
       Chip_Select_N
           D[7:0]   3-State (input)                                                        3-State (ignored)
           STP      3-State (input)                                                        3-State (ignored)
           NXT                                                                             3-State
           DIR                                                                             3-State
                              Figure 3. ULPI Behavior with Chip_Select_N as a Power-Down Control Signal
     Power Down Using Chip_Select                                     (active HIGH reset) in the USB OTG PHY block must
                                                                      remain asserted for no less than 40 µs.
     When CHIP SELECT_N is de-asserted (HIGH), the
     FUSB2805 three-states the ULPI interface pins and                PORB de-assertion is determined via a comparator on
     powers down the internal circuitry. If CHIP                      VCC3V3 with a POR trigger threshold, VPOR, of 2.0 V.
     SELECT_N is not used as a power-down control
     signal, it is tied to a LOW. Figure 3 shows the ULPI             Figure 4 illustrates how PORB should be pulsed based
     interface behavior when CHIP SELECT_N is                         on the voltage level of VCC3V3. This diagram also shows
     asserted and subsequently de-asserted.                           what the POR should do to PORB when VCC3V3 drops
                                                                      below VPOR for any length of time.
     After the tPWRDN duration, the CLOCK output enters
     three-state and is ignored by the link.                          When CLOCK starts toggling after power up, the USB
                                                                      link controller must issue a reset command over the
     Power-On Reset (POR)                                             ULPI bus to ensure correct operation.
     The power supply for the internal regulators is VCC. This
                                                                        PORB /
     supply is fed into the 3.3 V and 1.2 V regulators. The               PLL
                                                                         Reset
     output of the 3.3 V regulator is VCC3V3. The 1.2 V
     regulator generates VDD1V2.
                                                                       PHY POR
     During the power-up stage, the POR is held in a stable
     state to ensure that the digital logic does not operate           VCC3V3
     the I/O or any analog circuit in such a way that may be                                                                                 VPOR
     damaging to the rest of the system.                                            T0        T1                        T2    T3        T4
     The output of the POR block, PORB (internal signal),                  VCC3V3 = 3.3V
                                                                           VPOR = 2.2V
                                                                                            T1 = T0 + 40µs
                                                                                            T4 = T3 + 40µs
     should be 1‟b0 during the power supply ramping period.
     Once the power supplies have completely ramped,                              Figure 4. Power-On Reset Sequence
     PORB should be de-asserted. This signal is driven into
     the 19.2 / 26 MHz to 12 MHz PLL. The POR signal
© 2008 Fairchild Semiconductor Corporation                                                                                   www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                             5


                                                                                                                                        FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     OTG Module                                                           Session-Valid Comparator
     The OTG module contains several sub-blocks that                      The session-valid comparator is a TTL-level input that
     provide the functionality required by the USB On-The-                determines when VBUS is high enough for a session
     Go Rev. 1.3 supplement. Specifically, it provides the                to start. Both the A-device and the B-device use this
     following circuits:                                                  comparator to detect when a session is being started.
                                                                          The A-device also uses this comparator to determine
          ID detector to sense the ID pin of the micro-USB               when a session is completed. The session valid
           cable. The ID pin dictates which device is initially           threshold is between 0.8 V to 2.0 V.
           configured as the host and which is configured as
           the peripheral.                                                Session-End Comparator
          VBUS comparators to determine the VBUS voltage                 The session-end comparator determines when VBUS
           level. This is required for Host Negotiation Protocol          is below the B-device session-end threshold of 0.2 V
           (HNP) and Session Request Protocol (SRP).                      to 0.8 V. The B-device uses this threshold to
                                                                          determine when a session has ended.
          Resistors to temporarily charge and discharge
           VBUS. This is required for SRP.                              SRP Charge and Discharge Resistors
                                                                        The FUSB2805 provides on-chip resistors for short-term
     ID Detector
     Detects which end of the mini-USB (or micro-USB) cable             charging and discharging of VBUS. These are used by
     is plugged in. The ID detector must first be enabled by            the B-device to request a session, prompting the A-
     setting the ID_PULLUP register bit to 1b. If the                   device to restore VBUS power. First, the B-device
     FUSB2805 senses a value on ID different from the                   verifies that VBUS is fully discharged from the previous
     previously reported value, an RX CMD status update is              session by setting the DISCHARGE_VBUS register bit
     sent to the USB link controller or an interrupt is asserted.       to 1b and waiting for SESS_END to be 1b. Then the B-
     If the micro-B end of the cable is plugged in, the                 device charges VBUS by setting the CHARGE_VBUS
     FUSB2805 reports that ID_GND is logic 1 and the USB                register bit to 1b. The A-device detects that VBUS is
     link controller changes to peripheral mode.                        charged above the session-valid threshold and starts a
     If the micro-A end of the cable is plugged in, the                 session by turning on VBUS power.
     FUSB2805 reports that ID_GND is logic 0 and the USB
     link controller changes to host mode.                              Analog Reference Module
     The ID pin has a weak pull-up resistor (400kΩ) to avoid            The analog reference module provides stable internal
     floating conditions. This resistor is connected when               voltage and current references for biasing internal
     ID_PULLUP register bit is 0. If the application does not           analog circuitry. This module requires an accurate
     use the ID pin, tie this pin to VCC3V3.                            external reference resistor. A value of 12 k 1%
                                                                        resistor is required between the RREF pin and GND.
     VBUS Comparators
     The FUSB2805 provides three comparators for
     detecting the VBUS voltage level, as listed in Table 9 and
     Table 12. The comparators are as follows:
         VBUS-Valid Comparator
         This comparator is used by an A-device (or host) to
         determine whether or not the voltage on VBUS is at a
         valid level for operation. The minimum threshold for
         the VBUS valid comparator is 4.4 V. Any voltage on
         VBUS below this threshold is considered a fault.
         During power-up, the comparator output is ignored.
© 2008 Fairchild Semiconductor Corporation                                                                          www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                               6


                                                                                                                                                            FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Detailed Description of Pins
     D0 to D7                                                                           RREF
     D0 to D7 are bi-directional ULPI data bus pins. The                                Resistor reference analog I/O pin. A 12 k 1% resistor
     USB link controller must drive D0-D7 LOW when the                                  is required.
     ULPI bus is idle (DIR is LOW). When the link has data
     to transmit to the FUSB2805, it drives a non-zero value.
                                                                                        DP and DM
     The data bus can be re-configured to carry different                               When in USB mode, the DP pin functions as USB data
     data types. There are four modes of the data bus:                                  plus line; the DM pin functions as USB data minus line.
                                                                      (3)
          Synchronous mode: default is SDR mode , with                                 The DP and DM pins should be connected to the D+
           the 8-bit data bytes being synchronous to the rising                         and D- pins of the USB receptacle.
           edge of CLOCK.
          Low-power mode: carries asynchronous line state
           and VBUS information.
                                                                                        FAULT
          3-pin serial mode: carries asynchronous 3-pin                                This input pin is used by an external SMPS or power
           FS/LS serial signaling.                                                      management IC to signal an over-current or over-
          6-pin serial mode: carries asynchronous 6-pin                                voltage fault condition. This is applicable in OTG host
           FS/LS serial signaling.                                                      where PSW is used to control driving V BUS or signaling
                                                                                        for higher charging currents to an OTG SMPS
     Data pins can also              be      three-stated            by driving         management IC, as shown in Figure 5.
     chip_select_N HIGH.
     Note:                                                                              ID
     3. DDR is not supported by the FUSB2805.                                           For OTG implementation, the ID (identification) pin is
                                                                                        connected to the ID pin of the mini-USB (or micro-USB)
                                                                                        receptacle. As defined in the OTG specification, the ID
     VIO                                                                                pin dictates the initial role of the link controller. If ID is
     VIO is the input power pin that sets the I/O voltage level.                        detected as HIGH, the link controller must assume the
     VIO powers the on-chip pads of the following pins:                                 role of peripheral. If ID is detected as LOW, the link
                                                                                        controller must assume the host role. Roles can be
          CLOCK                                                                        swapped later using Host Negotiation Protocol (HNP).
          DIR
          STP                                                                          The FUSB2805 provides an internal pull-up resistor to
          NXT                                                                          sense the value of the ID pin. The pull-up resistor, with
          D0-D7                                                                        a value of 50 k, must first be enabled by setting the
          RESET_N                                                                      ID_PULLUP register bit to 1b. If the value on ID has
          CFG1                                                                         changed, the FUSB2805 sends an RX CMD or interrupt
                                                                                        to the link controller by time tID. If the link controller
                                                                                        does not receive any RX CMD or interrupt by t ID, then
                                                                                        the ID value has not changed.
                                                                                        To avoid a floating ID pin, a 400 k resistor pull-up is
                                                                                        switched in when ID_PULLUP register bit is set to 0b.
                                  Digital over-current protection scheme
                                        with external power switch                                    5V
                                                USB Trans
                                                              PSW                                  OTG Host
                                                                                                    Supply
                                                                                                    Source
                                                                                                   Switch with
                                                                                                    External
                                                                            100k                    Over-
                                                                                                    Current
                                                                                                    Detector
                                                             FAULT                                                      VBUS
                                                              VBUS
                                               Figure 5. Digital Over-Current Detection Scheme
© 2008 Fairchild Semiconductor Corporation                                                                                              www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                               7


                                                                                                                                        FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     VCC                                                               IR
     VCC is the main input supply voltage for FUSB2805. The            Direction output pin. This pin is synchronous to the
     FUSB2805 operates correctly when VCC is between                   rising edge of CLOCK and controls the direction of the
     2.7 V and 4.5 V. The maximum transients that should               data bus. By default, the FUSB2805 holds DIR LOW,
     be seen on VCC are 5.5V for a maximum of 5ms. A                   causing the data bus to be an input. When DIR is LOW,
     100nF decoupling capacitor is preferred.                          the FUSB2805 listens for data from the link controller.
                                                                       The FUSB2805 pulls DIR HIGH only when it has data to
     PSW                                                               send to the link, which is for one of two reasons:
     This is an active-HIGH, open-source, power-switch
     analog output. This pin can be connected to an external           1.  To send USB receive data, RX CMD status updates,
                                                                           and register-read data to the link controller.
     VBUS switch or an external charge pump enable circuit
                                                                       2. To block the link controller from driving the data
     to control the external VBUS power source. If the link
                                                                           bus during power up, reset, and low-power mode
     controller is in host mode, this can be set via the                   (suspend).
     DRV_VBUS and DRV_VBUS_EXT bits in the OTG
     control register to logic 1. The FUSB2805 drives PSW              The DIR pin can also be three-stated when
     to HIGH to enable the external VBUS supply. If the link           Chip_Select_N is de-asserted HIGH .
     controller      detects     an    over-current    condition
     (VBUS_valid=0), it should disable the external VBUS supply        STP
     by setting DRV_VBUS_EXT to 0b. An external 100 k                 Stop input pin. This signal is synchronous to the rising
     pull-down resistor is used.                                       edge of CLOCK. The link must assert STP to signal the
     In addition, the polarity of the signal that controls PSW         end of a transmit packet or a register-write operation.
     can be changed via the INTF_CTRL register.                        When DIR is asserted, the link controller can optionally
                                                                       assert STP to abort the FUSB2805, causing it to de-
                                                                       assert DIR in the next clock cycle.
     VBUS
     This power I/O pin acts as input to the VBUS                      NXT
     comparators and over-current detector.
                                                                       Next data output pin. This signal is synchronous to the
     When the DRIVE_VBUS bit of the OTG control register               rising edge of CLOCK. The FUSB2805 holds NXT LOW
     is set to 1b, an external VBUS source tries to drive VBUS         by default. When DIR is LOW and the link is sending
     to a voltage of 4.4 V to 5.25 V with an output current            data, NXT is asserted to tell the link to provide the next
     capability of at least 8 mA.                                      data byte. When DIR is HIGH and the FUSB2805 is
                                                                       sending data to the link, NXT is asserted to tell the link
     VCC3V3 and VDD1V2                                                 another valid byte is on the bus. NXT is not used for
                                                                       register read data or the RX CMD status update.
     Regulator output voltages. These supplies are used to
     internally power digital and analog circuits.                     The NXT pin can also be three-stated when
                                                                       Chip_Select_N is de-asserted HIGH.
     CLKIN
     Clock input pin; CLKIN is the digital clock input. The            CLOCK
     allowed frequencies on CLKIN are 19.2 MHz and                     This is the 60MHz interface clock for synchronizing the
     26 MHz. The frequency tolerance required by the clock             ULPI bus. It is configured as an output. Being a 12-pin
     is 50 ppm. The link controller requires a 60 MHz clock            interface implementation, all the ULPI signals are
     from the FUSB2805. This is generated from the PLL,                synchronous to the rising edge of CLOCK. The
     which uses the CLKIN as the input clock.                          FUSB2805 accepts a digital clock input and outputs the
          19.2 MHz – CFG1 set to LOW                                  60MHz to the link.
          26 MHz – CFG1 set to HIGH
                                                                       GND
     CHIP SELECT_N                                                     The global ground signal acts as a ground to all circuits
     Active LOW chip-select pin. When asserted HIGH; D[0-              in the FUSB2805.
     7], CLOCK, DIR, and NXT pins are three-stated and
     ignored and all internal circuits are powered down,               Reset_N
     including the regulator. When LOW, the FUSB2805
     wakes up and the ULPI pins operate normally.                      Reset_N is an active LOW reset signal with V IO voltage.
                                                                       Tie to VIO 1.8 V if not used. Typically tied to the power-
                                                                       on reset signal of the product.
© 2008 Fairchild Semiconductor Corporation                                                                          www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                              8


                                                                                                                                       FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Modes of Operation
     ULPI Modes                                                        Low-Power Mode
     The ULPI bus can be programmed to operate in four                 When the USB is idle, the link controller can place the
     different modes and a power-down mode. Each mode                  FUSB2805 into low-power mode (also known as
     re-configures the signals on the data bus. Setting more           “suspend” mode). To enter low-power mode, the link
     than one mode leads to undefined behavior.                        controller clears the SUSPENDM bit in the function
                                                                       control (FUNC_CTRL) register to 0b.
     Synchronous Mode
                                                                       During low-power mode, the FUSB2805 provides line
     This is the default mode. On power-up and when CLOCK              state and interrupt information on the data bus for the
     is stable, the FUSB2805 enters synchronous mode.                  link controller to monitor basic USB states and draws
     In synchronous mode, the link controller must                     less than 200 µA from the VCC supply.
     synchronize all ULPI signals to CLOCK, meeting the                In addition, during low-power mode, the clock on CLKIN
     setup and hold times defined in the Dynamic                       may be stopped; but it must be restarted before
     Characteristics tables.                                           asserting STP to exit low-power mode.
     This mode is used by the link controller to perform the           Once in low-power mode, the FUSB2805 must remain
     following tasks:                                                  in low-power mode for a minimum of 120 clock cycles
         Detect high-speed handshake (chirp)                          (or 2 µs). After the 2 µs delay, low-power mode may be
         Transmit and receive USB packets                             exited by asserting the STP signal. The FUSB2805 then
                                                                       issues an RXCMD to the link if a change was detected
         Read and write to registers
                                                                       in any interrupt source and the change still exists. An
         Receive USB status updates (RX CMDs) from                    RXCMD may not be sent if the interrupt condition is
          FUSB2805                                                     removed before exiting.
     Please refer to section 3.8 of the ULP Rev. 1.1
                                                                       In low-power mode, the data bus assignments are
     specification for further details.
                                                                       changed to those described in Table 1.
     Table 1.       Signal Mapping on ULPI Bus During Low-Power Mode
         Signal          Maps To Direction                                        Description
      LINESTATE0             D0              Out   Combinatorial LINESTATE0 directly driven by the analog receiver
      LINESTATE1             D1              Out   Combinatorial LINESTATE1 directly driven by the analog receiver
      RESERVED               D2              Out   Reserved; the FUSB2805 drives this pin LOW
                                                   Active-HIGH interrupt signal; asserted and latched whenever any
            INT              D3              Out
                                                   unmasked interrupt occurs
      RESERVED             D[7:4]            Out   Reserved; the FUSB2805 drives these pins LOW
     Entering Low-Power Mode
     The link sets SuspendM=0b (in Function Control                      and holds NXT LOW. There is one cycle of data bus
     Register) to place the FUSB2805 into low-power                      turnaround provided after the assertion of DIR, during
     mode. The CLOCK may be stopped a minimum of                         which the value of D[7:0] is not valid. Upon
     five (5) cycles after the FUSB2805 accepts the                      completion of the turnaround cycle the FUSB2805
     register write data as described in Figure 6. When                  begins driving the signals as described in Table 1.
     entering low-power mode, the FUSB2805 asserts DIR
© 2008 Fairchild Semiconductor Corporation                                                                         www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                              9


                                                                                                                                            FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
                  ULPI Signals
                  CLOCK
                                        TXCMD                 Turn
                   D [7:0]                      Data         Around         Low Power Mode Signals
                                        RegWr
                    DIR                                                         tCS
                    STP                                                               tSTP1
                   NXT
                    SuspendM
                          Note: The second STP pulse indicates the exit of low-power (suspend) mode
                                                Figure 6. Entering Low-Power Mode
     Exiting Low-Power Mode
     If the FUSB2805 has been in suspend at least 2 µs, the                setting SuspendM=1b (in Function Control Register).
     link may signal the FUSB2805 to exit low-power mode                   The link de-asserts STP in the cycle following the de-
     by asynchronously asserting STP. The FUSB2805                         assertion of DIR. There is one cycle of data bus
     immediately starts to wake up its internal circuitry. Upon            turnaround provided after the assertion of DIR, during
     meeting the ULPI timing requirements the FUSB2805                     which the value of D[7:0] is not valid. Upon completion
     then de-asserts DIR, ensuring a minimum of 5 cycles of                of the turnaround cycle the FUSB2805 begins driving
     CLOCK have been driven before de-asserting DIR and                    the signals as described in Table 1.
             ULPI Signals
             PHY Output CLOCK
                                                                                        Turn
               D [7:0]               Low-Power Mode Signals                            Around   Synchronous Mode Signals
               DIR
               STP
                                                       tWU
                                       tCWU                  tCD
               NXT
               SuspendM
                          Figure 7. Exiting Low-Power Mode when FUSB2805 Provides Output CLOCK
     6-Pin Full-Speed / Low-Speed Serial Mode                              An INT signal is also provided to inform the link of USB
                                                                           events. If the link requires CLOCK to be running during 6-
     This mode of operation is provided for links that contain             pin serial mode, the CLK_SUSPENDM register bit must
     legacy FS/LS functionality and enables a cost-effective               be set to logic 1b before entering 6-pin serial mode.
     upgrade path to HS functionality.
                                                                           The FUSB2805 requires CLKIN to be kept running when
     To enter 6-pin serial mode, the link controller sets the              in 6-pin mode. In 6-pin serial mode, the data bus
     6PIN_FSLS_SERIAL bit in the interface control register                assignments are changed to those described in Table
     to logic 1. To exit 6-pin serial mode, the link controller            2. Examples of the signaling of data packets are shown
     asserts STP.                                                          in Figure 22.
© 2008 Fairchild Semiconductor Corporation                                                                              www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                 10


                                                                                                                                              FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Table 2.       Signal Mapping on ULPI Bus During 6-Pin Serial Mode
         Signal         Maps To Direction                                               Description
      TX_ENABLE              D0               In         Active-HIGH transmit enable
         TX_DATA             D1               In         Transmit the differential data on DP and DM
         TX_SE0              D2               In         Transmit single-ended zero (SE0) on DP and DM
                                                         Active-HIGH interrupt signal; asserted and latched whenever any
            INT              D3              Out
                                                         unmasked interrupt occurs
         RX_DP               D4              Out         Single-ended receive data from DP
         RX_DM               D5              Out         Single-ended receive data from DM
         RX_RCV              D6              Out         Differential receive data from DP and DM
      RESERVED               D7              Out         Reserved; the FUSB2805 drives this pin LOW
     3-Pin FS/LS Serial Mode                                                 An INT signal is also provided to inform the link of USB
                                                                             events. If the link requires CLOCK to be running during 3-
     This mode is provided for links that contain legacy                     pin serial mode, the CLK_SUSPENDM register bit must
     FS/LS functionality and enables a cost-effective                        be set to logic 1b before entering 3-pin serial mode.
     upgrade path to HS functionality.
                                                                             The FUSB2805 requires CLKIN to be kept running when
     To enter 3-pin serial mode, the link controller sets the                in 3-pin mode. In 3-pin serial mode, the data bus
     3PIN_FSLS_SERIAL bit in the interface control register to               assignments are changed to those described in Table
     logic 1. To exit this mode, the link controller asserts STP.            3. Examples of the signaling of data packets are shown
                                                                             in Figure 21.
     Table 3.       Signal Mapping on ULPI Bus During 3-Pin Serial Mode
         Signal          Maps To             Direction                                    Description
     TX_ENABLE               D0                    In      Active-HIGH transmit enable
                                                           Transmit differential data on DP and DM when TX_ENABLE is HIGH
          DAT                D1                    I/O
                                                           Receive differential data from DP and DM when TX_ENABLE is LOW
                                                           Transmit single-ended zero on DP and DM when TX_ENABLE is HIGH
           SE0               D2                    I/O
                                                           Receive single-ended zero on DP and DM when TX_ENABLE is LOW
                                                           Active-HIGH interrupt signal; asserted and latched whenever any
           INT               D3                Out
                                                           unmasked interrupt occurs
      RESERVED              D[7:4]             Out         Reserved; the FUSB2805 drives this pin LOW
     Power Supply Modes                                                         Chip_Select_N is HIGH or VIO is not present.
     The FUSB2805 supports two basic modes of supply                            All internal circuits are powered down; total VCC
     operation and include the following:                                        current <36 µA.
                                                                                D[0-7], CLOCK, NXT, and DIR are three-stated and
          Normal Mode                                                           ignored; STP is ignored.
          Power-Down Mode                                                      Voltage regulators powering the OTG PHY are
     Normal Mode                                                                 turned off.
     This mode is entered when VCC and VIO are powered                          Pull-down resistors on the ULPI interface are
     and Chip_Select_N is asserted.                                              enabled to prevent a floating bus (VIO present).
                                                                                The FUSB2805 is forced into a low-power state
     Power-Down Mode                                                             and ignores any ULPI commands, including
     When chip select is inactive, FUSB2805 enters power-                        wake-up events.
     down mode, during which the following apply:                               If VIO is not present, those signals referenced to VIO
                                                                                 are also not powered.
© 2008 Fairchild Semiconductor Corporation                                                                                www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                   11


                                                                                                                                                                                              FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     USB State Transitions
     A high-speed USB host or On-The-Go (OTG) device                                     bit settings of XcvrSelect, TermSelect, OpMode[1:0],
     handles more than one electrical state, as defined in the                           DpPulldown, and DmPulldown. Table 4 summarizes the
     USB and OTG specifications. The FUSB2805                                            operating states.
     accommodates the various states through the register
     Table 4.       Operating States and Corresponding Resistor Settings
                                                                      Register Settings                                           Internal Resistor Settings
                                                    XcvrSelect[1:0]                      OpMode[1:0]   DpPulldown   DmPulldown
                                                                       TermSelect                                                rpu_dp_en   rpu_dm_en   rpd_dp_en    rpd_dm_en   hsterm_en
                    Signaling Mode
     General Settings
     Three-State Drivers                           XXb                 Xb                01b           Xb           Xb           0b          0b          0b          0b           0b
     Power-up or VBUS < Vth (SESS_END)             01b                 0b                00b           1b           1b           0b          0b          1b          1b           0b
     Host Settings
     Host Chirp                                    00b                 0b                10b           1b           1b           0b          0b          1b          1b           1b
     Host High Speed                               00b                 0b                00b           1b           1b           0b          0b          1b          1b           1b
     Host Full Speed                               X1b                 1b                00b           1b           1b           0b          0b          1b          1b           0b
     Host HS/FS Suspend                            01b                 1b                00b           1b           1b           0b          0b          1b          1b           0b
     Host HS/FS Resume                             01b                 1b                10b           1b           1b           0b          0b          1b          1b           0b
     Host Low Speed                                10b                 1b                00b           1b           1b           0b          0b          1b          1b           0b
     Host Low Speed Suspend                        10b                 1b                00b           1b           1b           0b          0b          1b          1b           0b
     Host Low Speed Resume                         10b                 1b                10b           1b           1b           0b          0b          1b          1b           0b
     Host Test_J/Test_K                            00b                 0b                10b           1b           1b           0b          0b          1b          1b           1b
     Peripheral Settings
     Peripheral Chirp                              00b                 1b                10b           0b           0b           1b          0b          0b          0b           0b
     Peripheral High Speed                         00b                 0b                00b           0b           0b           0b          0b          0b          0b           1b
     Peripheral Full Speed                         01b                 1b                00b           0b           0b           1b          0b          0b          0b           0b
     Peripheral HS/FS Suspend                      01b                 1b                00b           0b           0b           1b          0b          0b          0b           0b
     Peripheral HS/FS Resume                       01b                 1b                10b           0b           0b           1b          0b          0b          0b           0b
     Peripheral Test_J/Test_K                      00b                 0b                10b           0b           0b           0b          0b          0b          0b           1b
     OTG Device, Peripheral Chirp                  00b                 1b                10b           0b           1b           1b          0b          0b          1b           0b
     OTG Device, Peripheral High Speed             00b                 0b                00b           0b           1b           0b          0b          0b          1b           1b
     OTG Device, Peripheral Full Speed             01b                 1b                00b           0b           1b           1b          0b          0b          1b           0b
     OTG Device, Peripheral HS/FS Suspend          01b                 1b                00b           0b           1b           1b          0b          0b          1b           0b
     OTG Device Peripheral, HS/FS Resume           01b                 1b                10b           0b           1b           1b          0b          0b          1b           0b
     OTG Device Peripheral, Test_J/Test_K          00b                 0b                10b           0b           1b           0b          0b          0b          1b           1b
© 2008 Fairchild Semiconductor Corporation                                                                                                                           www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                               12


                                                                                                                                           FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Protocol Description
     ULPI References                                                      ULPI Bus
     The FUSB2805 provides a 12-pin (SDR) ULPI interface                  A description of the ULPI pin signals are given in Table
     for communication with the link controller. It is strongly           5. During synchronous mode, all signals are
     recommended that users of the FUSB2805 read the                      synchronous to CLOCK. Using the ULPI bus, the link
     ULPI and UTMI+ specifications as listed below:                       controller can perform register reads and writes and
                                                                          transmit data on the USB bus. The FUSB2805 uses the
     UTMI+ Low Pin Interface Specification (ULPI), Revision               ULPI bus to send status information, decoded USB
     1.1, October 20, 2004. http://www.ulpi.org                           data, and register contents to the link controller. During
     UTMI+ Specification, Revision 1.0, February 22, 2004.                low-power and serial modes, all signals are
     http://www.ulpi.org                                                  asynchronous to CLOCK, even if the clock is running.
                                                                          An example of ULPI bus usage is shown in Figure 8.
     Table 5.       ULPI Signal Description
       Signal        Direction on
                                  Signal Description
       Name           FUSB2805
                                         60 MHz interface clock.
       CLOCK               OUT           If a clock is attached on CLKIN, the FUSB2805 drives a 60 MHz output clock.
                                         During low-power and serial modes, the clock can be turned off to save power.
                                         8-bit data bus.
                                         In synchronous (SDR) mode, the link drives D0-D7 LOW by default. The link initiates
                                         transfers by sending a non-zero data pattern called a TXCMD (transmit command). In
                                         synchronous mode, the direction of D0-D7 is controlled by DIR. Contents of the D0-D7
       D0-D7                I/O
                                         lines must be ignored for exactly one clock cycle whenever DIR changes value; called
                                         a “turnaround” cycle.
                                         The data lines have fixed directions and different meanings in low-power, 6-pin, and
                                         3-pin serial modes.
                                         Controls the direction of the D0-D7 data bus.
                                         In synchronous (SDR) mode, the FUSB2805 drives DIR LOW by default, making the
                                         data bus an input so the FUSB2805 can listen for TXCMDs from the link controller.
                                         The FUSB2805 drives DIR HIGH only when it has data for the link. When DIR and NXT
                                         are both HIGH, the byte on the data bus contains decoded USB data. When DIR is
         DIR               OUT           HIGH and NXT is LOW, the byte contains status information called an RXCMD (receive
                                         command). The only exception is when the FUSB2805 returns register-read data,
                                         where NXT is also LOW, replacing the usual RXCMD byte. Every change in DIR
                                         causes a turnaround cycle on the data bus, during which D0-D7 are not valid and must
                                         be ignored by the link.
                                         DIR is always asserted during low-power, 6-pin, 3-pin, and serial modes.
                                         Stop.
                                         In synchronous (SDR) mode, the link drives STP HIGH for one cycle after the last byte
                                         of data sent to the FUSB2805. The link can optionally assert STP to force DIR to be
         STP                IN
                                         de-asserted.
                                         In low-power and serial modes, the link holds STP HIGH to wake up the FUSB2805,
                                         causing the ULPI bus to return to synchronous mode.
                                         Next.
                                         In synchronous (SDR) mode, the FUSB2805 drives NXT HIGH to throttle data. If DIR is
                                         LOW, the FUSB2805 asserts NXT to tell the link controller to place the next data byte
                                         on D0-D7 in the following clock cycle. If DIR is HIGH, the FUSB2805 asserts NXT to
         NXT               OUT
                                         tell the link controller a valid USB data byte is on D0-D7 in the current cycle. The
                                         FUSB2805 always drives an RXCMD when DIR is HIGH and NXT is LOW, unless
                                         register-read data is to be returned to the link controller in the current cycle.
                                         NXT is not used in low-power or serial modes.
© 2008 Fairchild Semiconductor Corporation                                                                             www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                13


                                                                                                                                                                     FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
                                    Link sends   FUSB2805    Link sends   Link signals    ULPI bus      FUSB2805        FUSB2805     FUSB2805      FUSB2805
                                     TXCMD        accepts    next data.   end of data      is idle     asserts DIR,       sends      sends USB de-asserts DIR,
                                                  TXCMD      FUSB2805                                    causing         RXCMD          data        causing
                                                               accepts                               turnaround cycle   (NXT low)    (NXT high) turnaround cycle
      CLOCK
                                                                                                      Turn                                      Turn
        D0-D7                          TXCMD                DATA
                                                                                                     around
                                                                                                                   RXCMD            DATA
                                                                                                                                               around
            DIR
           STP
           NXT
                                  Figure 8. ULPI Generic Data Transmit Followed by Data Receive
     On power-up, the FUSB2805 performs an internal                               If Chip_Select_N is de-asserted, the FUSB2805 is
     power-on reset and asserts DIR to indicate to the link                       retained in power-down mode, where all ULPI interface
     that the ULPI bus cannot be used. When the internal                          pins are three-state, internal regulators are shut down,
     PLL is stable, the FUSB2805 de-asserts DIR. The                              and power consumption is reduced even further than in
     power-up time depends on the VCC supply rise time and                        low-power mode.
     the PLL startup time (tstartPLL).
                                                                                  If low-power mode is entered due to no VIO, the
     Whenever DIR is asserted, the FUSB2805 drives the                            recommended power-up sequence for the link is:
     NXT pin LOW and must drive the data bus (D0-D7) with
     RXCMD values. When DIR is de-asserted, the link must                         1.     Connect VCC and VIO supplies.
     drive the data bus (D0-D7) to the default LOW. Before                        2.     Chip_Select_N goes HIGH to LOW to enable the
     beginning USB packets, the FUSB2805 is reset by the                                 FUSB2805.
     link setting the RESET bit in the function control                           3.     Link waits for at least tPWRUP, ignoring all ULPI pins‟
     register. After the RESET bit is set, the FUSB2805                                  status.
     asserts DIR until the internal reset completes. The
                                                                                  4.     The link may start to detect DIR status level; if the
     FUSB2805 automatically de-asserts DIR and clears the
                                                                                         DIR is detected LOW, the link may send a reset
     RESET bit when the reset has completed. After every
                                                                                         command.
     reset, an RX CMD is sent to the link to update USB
     status information. After this sequence, the ULPI bus is                     5.     The ULPI interface is ready for use.
     ready for use and the link can start USB operations.
© 2008 Fairchild Semiconductor Corporation                                                                                                       www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                        14


                                                                                                                                                         FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
                         V CC
                          V IO
              Chip_Select_N
         Regulator Powerup                              Powerup
                                                       t PWRUP
              Internal PORB                                                                                              Bus Idle
                      CLKIN
                                                            tstartPLL         Internal clock stable
               Clock (output)
                                                          Clock Start          Reset Command
                       D[7:0]                                                                                          RXCMD
                                                                                TXCMD      DATA       Internal reset   Update
                          DIR
                          STP
                          NXT
                                   t1 t2     t3   t4                    t5                                                      t6
                                 Figure 9. Power-up, Reset, and Bus Idle Sequence for ULPI Ready
     Notes:
     4. With the CLKIN stable, the FUSB2805 drives a 60 MHz clock out from the CLOCK pin when DIR de-asserts.
         This is shown as “CLOCK (output)” above.
     5. t1: VCC is applied to the FUSB2805.
     6. t3: Chip_Select_N transitions to active state (LOW). FUSB2805 internal regulator turns on and the ULPI pins
         become active (may be driven HIGH or LOW), but should be ignored during the power-up time tPWRUP.
     7. t4: After the POR pulse (Power-On Reset), the ULPI pins are driven to a defined level. DIR is driven HIGH, then
         the other ULPI pins are driven LOW.
     8. t5: The PLL stabilizes after the PLL startup time, tstartPLL. The CLOCK pin begins to output 60 MHz, the DIR pin
         transitions LOW, and the link must drive STP and D[7:0] to LOW (idle). The link then initiates a reset command
         to initialize the FUSB2805.
     9. t6: The power-up sequence is completed and the ULPI bus interface is ready for use.
     VBUS Power and Over-Current Detection
     Driving 5 V on VBUS – External Only                                     Over-Current Detection
     No internal charge pump is supported by the                             Only external over-current detection is supported by the
     FUSB2805. The PSW pin supports an external VBUS                         FUSB2805. An over-current detection circuit is required
     supply and is an active HIGH (open source) signal used                  for host applications that supply more than 100 mA on
     to control external power management integrated                         VBUS between voltages of 4.75 V to 5.25 V.
     circuits, such as OTG support SMPS devices.
                                                                             A digital signal from this external circuit must be
                                                                             connected to the FAULT pin, which directly controls the
                                                                             PSW pin (as shown in Figure 5). The polarity of the signal
                                                                             input to this pin, which controls PSW, is selectable.
© 2008 Fairchild Semiconductor Corporation                                                                                           www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                   15


                                                                                                                                                                       FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     USB Packet Transmit and Receive
     When transmitting and receiving USB packets, there                           These times are determined by the USB event and the
     are limits set on the link and PHY processing time to                        packet format (i.e. transmit with PID or NOPID, transmit
     ensure that USB inter-packet delays are also met.                            error, receive error, etc.).
                                    Link sends   FUSB2500    Link sends   Link signals   ULPI bus is      FUSB2500        FUSB2500     FUSB2500      FUSB2500
                                     TXCMD        accepts    next data.   end of data       idle         asserts DIR,       sends      sends USB de-asserts DIR,
                                                  TXCMD      FUSB2500                                      causing         RXCMD          data        causing
                                                              accepts.                                 turnaround cycle   (NXT low)    (NXT high) turnaround cycle
      CLOCK
                                                                                                        turn                                      turn
        D0-D7                          TXCMD                DATA
                                                                                                       around
                                                                                                                     RXCMD            DATA
                                                                                                                                                 around
            DIR
           STP
           NXT
                                          Figure 10. Example ULPI Packet Transmit and Receive
     Note:
     10. Please refer to ULPI specifications section 3.8.2 for further detail on USB packet operations and functionality.
© 2008 Fairchild Semiconductor Corporation                                                                                                         www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                        16


                                                                                                                                      FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     USB Packet Timing
     The USB2.0 specification defines the inter-packet                Pipeline Delays
     timing and the UTMI/UTMI+ specifications define                  Table 6 describes the delays (in clock cycles) with
     synchronization and processing delays. The ULPI Rev.             which to comply using ULPI. The USB bus events are
     1.1 specification defines the inter-packet delays to             measured relative to D+ and D-. The ULPI timings are
     ensure compatibility with USB2.0 and supplemental                relative to the clock edge on which the transition is
     specifications.                                                  detected (i.e. the clock edge on which STP is detected).
     Table 6.       Pipeline Delays
                                      HS PHY      FS PHY     LS PHY
        Parameter Name                                                                        Definition
                                       Delay       Delay      Delay
                                                                          Number of clocks after a change in the internal
                                                                          USB bus state is detected to an RXCMD byte being
        RXCMD Delay(J/K)                     4       4           4
                                                                          sent over the ULPI bus. Applies to all changes
                                                                          except SE0.
                                                                          Number of clocks between the USB bus state
        RXCMD Delay(SE0)                     4     4 to 6     16 to 18    indicating SE0 to an RXCMD byte being sent over
                                                                          the ULPI bus. Delay is increased due to filtering.
                                                                          Number of clocks between the FUSB2805 detecting
           TX Start Delay                1 to 2   6 to 10     74 to 75    a TXCMD on the ULPI bus to transmitting the first K
                                                                          of the SYNC pattern on the USB bus.
                                                                          Number of clocks between the FUSB2805 detecting
                                                                          STP on the ULPI bus to completing EOP
                                                                          transmission on the USB bus.
                                                                          HS EOP is completed when all eight consecutive
      TX End Delay (packets)             2 to 5     NA          NA        ones have finished transmitting on the USB bus.
                                                                          FS/LS packets finish many clock cycles after STP
                                                                          is asserted. The link must look for RXCMD bytes
                                                                          indicating SE0-to-J transition to determine when the
                                                                          transmission is completed on the USB bus.
                                                                          HS SOF packets have a long EOP. The link must
                                                                          wait at least nine clocks or for an RXCMD,
        TX End Delay (SOF)               6 to 9     NA          NA
                                                                          indicating squelch (LINESTATE=00b), before
                                                                          transmitting the next packet.
                                                                          Number of clocks after first K of SYNC pattern is
                                                                          seen on the USB bus to the simultaneous assertion
                                                                          of DIR and NXT or an RXCMD indicating RxActive.
           RX Start Delay                3 to 8     NA          NA        Used for HS packets only.
                                                                          For FS/LS packets, the link must look for RXCMD
                                                                          bytes indicating J-to-K transition.
                                                                          Number of clocks after EOP occurs on the USB bus
                                                                          to the FUSB2805 de-asserting DIR or indicating
                                                                          RxActive LOW in an RXCMD byte.
                                                                          HS EOP is completed when all eight consecutive
            RX End Delay                 3 to 8   17 to 18   122 to 123
                                                                          ones have finished transmitting on the USB bus.
                                                                          FS/LS EOP occurs when SE0 starts on the USB
                                                                          bus. For FS/LS, the link uses LINESTATE and not
                                                                          RxEnd delay to time USB packets.
     Note:
     11. Please refer to ULPI Rev 1.1 specifications, section 3.8.2.6.2 for details on PHY pipeline delays.
© 2008 Fairchild Semiconductor Corporation                                                                        www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                            17


                                                                                                                                                                                                                     FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Link Decision Times
     The amount of clock cycles allocated to the link to respond to a received packet and correctly receive back-to-back
     packets is given in Table 7.
     Table 7.          Link Decision Times
                                            HS PHY FS PHY LS PHY
       Parameter Name                                                                                                                                             Definition
                                             Delay  Delay  Delay
                                                                                                           Number of clocks a host link must wait before driving the
                                                                                                           TXCMD for the second packet.
                                                                                                           In HS, the link starts counting from the assertion of STP for
        Transmit-Transmit                                                                                  the first packet.
                                            15 to 24            7 to 18                77 to 247
           (Host Only)                                                                                     In FS, the link starts counting from the RXCMD indicating
                                                                                                           LINESTATE has transitioned from SE0-to-J for the first
                                                                                                           packet. The timings given ensure inter-packet delays of 2.0
                                                                                                           to 6.5 bit times.
                                                                                                           Number of clocks the link must wait before driving the
                                                                                                           TXCMD for the transmit packet.
                                                                                                           In HS, the link starts counting from the end of the receive
                                                                                                           packet (de-assertion of DIR or an RXCMD indicating
        Receive-Transmit
                                            1 to 14             7 to 18                16 to 18            RxActive is LOW).
       (Host or Peripheral)
                                                                                                           In FS/LS, the link starts counting from the RXCMD
                                                                                                           indicating LINESTATE has transitioned from SE0-to-J for
                                                                                                           the receive packet. The timings given ensure inter-packet
                                                                                                           delays of 2.0 to 6.5 bit times.
                                                                                                           Minimum number of clocks between consecutive receive
         Receive-Receive
                                               1                          1               1                packets. The link must be capable of receiving both
         (Peripheral Only)
                                                                                                           packets.
                                                                                                           Host or peripheral transmits a packet, then times out after
        Transmit-Receive
                                              92                     80                  718               this number of clock cycles if a response is not received.
       (Host or Peripheral)
                                                                                                           Any subsequent transmission can occur after this time.
                                                                                          USB Inter Packet Delay (8 to 192 HS bit times)
      DP or                                                                                                                                                                                       SYNC
                       DATA          EOP                                                                             IDLE
       DM
     CLOCK
                                                                               turn
       D0-D7    DN-4          DN-3   DN-2      DN-1           DN                                                                                                           TXCMD                 D0      D1
                                                                              around
         DIR
        STP
        NXT
                                                       RX End Delay                                                         Link Decision Time (1 to 14 clocks)
                                                       ( 3 to 8 clocks)                                                                                                        TX Start Delay
                                                                                                                                                                               (1 to 2 clocks)
                                        Figure 11.               HS Receive to Transmit Packet Timing, Example 1
© 2008 Fairchild Semiconductor Corporation                                                                                                                                                       www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                                                  18


                                                                                                                                                                                                FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
                                                                                                     USB Inter Packet Delay (88 to 192 HS bit times)
      DP or                                                                                                                                                                  SYNC
                                        DATA                                       EOP                                   IDLE
       DM
     CLOCK
       D0-D7    DN-1     DN                                                                                                                            TXCMD                D0      D1
         DIR
        STP
        NXT
                                                 TX End Delay ( 2 to 5 clocks)                       Link Decision Time (15 to 24 clocks)
                                                                                                                                                          TX Start Delay
                                                                                                                                                          (1 to 2 clocks)
                                   Figure 12.        HS Transmit to Transmit Packet Timing, Example 2
     Preamble                                                                            the FS bit rate before sending the packet at low-speed
     Preamble packets are headers to low-speed packets                                   bit rate. The FUSB2805 ensures a minimum gap of four
     that must travel over a FS bus between a host and a                                 FS bit times between the last bit of the FS PRE_PID
     hub. To enter preamble mode, the link sets                                          and the first bit of the LS SYNC. The FUSB2805 drives
     XCVRSELECT[1:0]=11b in the FUNC_CTRL register                                       a J-state for at least one FS bit time after sending the
     and, when in this mode (Preamble), the FUSB2805                                     PRE-PID, after which the resistor can hold the J-state
     operates just as in FS mode and sends all the data with                             on the bus. In preamble mode, the FUSB2805 can also
     the FS rise and fall time characteristics. Whenever the                             receive LS packets from the FS bus. Figure 13 shows
     link transmits a USB packet in preamble mode, the                                   an example preamble packet.
     FUSB2805 automatically sends a preamble header at
       DP or                      FS             FS                   IDLE         LS
                                                                     (4 FS bits               LS PID             LS D0                      LS D1
        DM                       SYNC          PRE_ID                   min)      SYNC
     CLOCK
       D0-D7                                    TXCMD (LS PID)                                  D0                  D1
           DIR
          STP
          NXT
                                                            Figure 13.            Preamble Sequence
© 2008 Fairchild Semiconductor Corporation                                                                                                                                  www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                               19


                                                                                                                                      FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     RXCMD and TXCMD
     ULPI modifies the original UTMI data stream such that it          Transmit Command (TXCMD)
     can fit more data types. Redundancy in the PID byte
     during transmit is overloaded with ULPI transmit                  The link initiates transfers to the FUSB2805 by sending
     commands (TXCMD). Unused data bytes in the receive                the transmit command (TXCMD) byte, as described in
     stream are overloaded with receive commands                       Table 8. TXCMD is comprised of a 2-bit command code
     (RXCMD). ULPI defines a transmit command byte that                and a 6-bit payload.
     is sent by the link and a receive command byte that is
     sent by the FUSB2805.
     Table 8.       Transmit Commands (TXCMD) from Link to FUSB2805
      Command Type Command                     Command
                                                                                        Description
        Descriptor Code [7:6]                 Payload [5:0]
                                                               No operation. 00h is the idle state of the ULPI bus. The link
                                             00 0000b (NOOP)
                                                               drives NOOP by default.
              IDLE                  00b
                                                               Reserved command space. Values other than those above
                                                XX XXXXb
                                                               create undefined behavior.
                                                               Transmit USB data that does not have a PID (packet ID),
                                                 00 0000b
                                                               such as chirp, and resume signaling. The FUSB2805 starts
                                                 (NOPID)
                                                               transmitting on the USB beginning with the next data byte.
          TRANSMIT                  01b                        Transmit USB packet. D[3:0] indicates USB packet identifier
                                             00 XXXXb (PID)
                                                               PID[3:0].
                                                XX XXXXb       Reserved command space. Values other than those above
                                                 (RSVD)        create undefined behavior.
                                                             Extended register write command (optional). The 8-bit
                                             10 1111b (EXTW) address must be in the next clock cycle after the command is
     REGISTER WRITE                 10b                      accepted.
                                                XX XXXXb
                                                               Register write command with 6-bit immediate address.
                                                 (REGW)
                                                             Extended register read command (optional). The 8-bit
                                             10 1111b (EXTR) address must be provided in the next clock cycle after the
      REGISTER READ                 11b                      command is accepted.
                                                XX XXXXb
                                                               Register read command with 6-bit immediate address.
                                                 (REGR)
© 2008 Fairchild Semiconductor Corporation                                                                        www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                             20


                                                                                                                                              FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Receive Command (RXCMD)                                                  The FUSB2805 automatically sends an RXCMD
                                                                              whenever there is a change in any of the RXCMD data
     The FUSB2805, after asserting DIR, uses the receive                      fields. The link must be able to accept an RXCMD at
     command (RXCMD) byte to update the link on line                          any time; including single or multiple (back-to-back)
     state, USB receive, disconnect, and OTG information                      RXCMDs and, at any time during USB receive packets,
     via the ULPI data bus.                                                   when NXT is LOW.
     Table 9.       RXCMD Data Byte Format
     DATA[7:0] Status Name                                                          Description
                                             Line State Signals:
                                             D[0]: LINESTATE0
          [1:0]          LINESTATE           D[1]: LINESTATE1
                                             LINESTATE[1:0] reflects the current status of DP and DM and is a function of
                                             various register settings and whether the device is a host or peripheral. The detailed
                                             encoding, and descriptions thereof, is shown in Table 10 and Table 11.
                                             Encoded VBUS Voltage State: This encoding is used for over-current detection,
                                             session start, and session request (SRP). The Sess_End and Sess_VLD indicators
                                             are signals from the internal FUSB2805 VBUS comparators. These encoded VBUS
                                             states are:
                                              Value           VBUS Voltage           Sess_End          Sess_VLD       A_VBUS_VLD
          [3:2]           VBUS State           00b         VBUS < VB_Sess_End            1                 0                  0
                                                           VB_Sess_End ≤ VBUS <
                                               01b                                       0                 0                  0
                                                                VA_Sess_Vld
                                                           VA_Sess_Vld ≤ VBUS <
                                               10b                                       X                 1                  0
                                                               VA_VBUS_Vld
                                               11b         VBUS ≥ VA_VBUS_VLD            X                 X                  1
                                             RxEvent Encoding: This encoding field of RXCMD is used to inform the link of
                                             information packets received on the USB bus. These events are:
                                                   Value                 RxError                RxActive           HostDisconnect
          [5:4]            RxEvent                   00b                      0                    0                      0
                                                     01b                      0                    1                      0
                                                     10b                      X                    X                      1
                                                     11b                      1                    1                      0
           [6]                 ID            This bit reflects the state of the ID pin. It is valid 50ms after ID_PULLUP is set to 1b.
                                             Default is not to use this alternate interrupt bit. The link, optionally, can enable the
                                             BVALID_RISE and/or BVALID_FALL bits in the PWR_CNTRL register.
           [7]             ALT_INT
                                             Corresponding changes in BVALID cause an RXCMD to be sent to the link with this
                                             ALT_INT bit asserted.
© 2008 Fairchild Semiconductor Corporation                                                                                www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                    21


                                                                                                                                            FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Line State Encoding
     As mentioned in Table 9, the LINESTATE[1:0] sent to                 depending upon its mode. Note that the configuration
     the link is a function of whether the port is upstream              as a LS peripheral (upstream facing port), with DM pull-
     (peripheral) or downstream (host) facing. Dual-role OTG             up, is not supported by the FUSB2805.
     devices must select the correct LINESTATE encoding,
     Table 10. LINESTATE[1:0] Encoding for Upstream (Peripheral) Facing Ports; DP_PULLDOWN=0b
             Mode                Value       Full Speed   High Speed                                    Chirp
      XCVRSELECT[0:1]                          01, 11         00           00
        TERMSELECT                               1            0            1
                                   00b          SE0         Squelch        Squelch
                                   01b          FS-J       ! Squelch       (! Squelch) AND (HS_Differential_Receiver_Output)
       LINESTATE[1:0]
                                   10b         FS-K         Invalid        (! Squelch) AND (! HS_Differential_Receiver_Output)
                                    11          SE1         Invalid        Invalid
     Notes:
     12. (! Squelch) indicates inactive squelch.
     13. (! HS_Differential_Receiver_Output) indicates inactive HS_Differential_Receiver_Output.
     Table 11. LINESTATE[1:0] Encoding for Downstream (Host) Facing Ports; DP_PULLDOWN and
     DM_PULLDOWN=1b
             Mode                Value       Low Speed    Full Speed        High Speed                          Chirp
      XCVRSELECT[0:1]                            10         01, 11                 00         00
        TERMSELECT                               1            1                      0        0
         OPMODE[1:0]                             X            X                00, 01 or 11   10
                                   00b          SE0          SE0                Squelch       Squelch
                                                                                              (! Squelch) AND
                                   01b          LS-K         FS-J               ! Squelch
                                                                                              (HS_Differential_Receiver_Output)
       LINESTATE[1:0]
                                                                                              (! Squelch) AND
                                   10b          LS-J         FS-K                Invalid
                                                                                              (! HS_Differential_Receiver_Output)
                                    11          SE1          SE1                 Invalid      invalid
     Notes:
     14. (! Squelch) indicates inactive squelch.
     15. (! HS_Differential_Receiver_Output) indicates inactive HS_Differential_Receiver_Output.
© 2008 Fairchild Semiconductor Corporation                                                                              www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                               22


                                                                                                                                         FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     VBUS Voltage State Encoding                                        provided external to the FUSB2805. If the external
                                                                        charge pump source provides more than 100 mA, the
     As mentioned in Table 9, changes in the VBUS state                 over-current circuit must be used and the host controller
     encoding initiate an RXCMD to the link. For the link to            application criteria apply. The OTG A-device also uses
     receive VBUS state updates, the link must first enable the         SESS_VLD to detect when an OTG B-device is initiating
     corresponding interrupts in the USB_INTR_EN_R and                  VBUS pulsing SRP. The control of this external charge
     USB_INTR_EN_F registers. Link uses the indicator                   pump is accomplished via the PSW pin.
     signals to take action based on typical configurations
     (host, peripheral, OTG device). Table 12 shows the                 RxEvent Encoding
     VBUS indicators in RXCMD based on the configuration.
                                                                        As mentioned in Table 9, this encoding provides
     Table 12. VBUS Indicator Signals in RXCMD                          information to the link related to the packets received on
                                                                        the USB bus. The primary encodings are RxActive,
     Configuration A_VBUS_                   SESS_    SESS_             RxError, and HostDisconnect.
                     VLD                      VLD      END
                                                                        RxActive
      Standard Host             Yes           No        No
                                                                        When the FUSB2805 detects a SYNC pattern on the
         Standard                                                       USB bus, it signals an RxActive event to the link. This
                                No            Yes       No
         Peripheral                                                     RxActive event can be communicated in two methods:
      OTG A-Device              Yes           Yes       No               FUSB2805 simultaneously asserts DIR and NXT; or
      OTG B-Device              No            Yes       Yes              FUSB2805 sends an RXCMD to the link with the
                                                                          RxActive field in the RxEvent bits set to 1b.
     For the standard USB host controller application, the
     following applies:                                                 The link must be capable of detecting both methods
                                                                        and the RxActive frames the receive packet from the
             The system must be able to provide 500 mA                 first byte to the last byte. It also must assume that
     for 4.75 V ≤ VBUS ≤ 5.25 V.                                        RxActive is set to 0b when indicated in an RXCMD or
              An external circuit is to be used to detect over-        when DIR is de-asserted, whichever occurs first.
     current conditions. If the external over-current detector          The RxActive is also used by the link to time the high-
     provides a digital fault signal, the signal must be                speed packets and ensure that the bus turn-around
     connected to the FAULT input pin and the link must do              times are met.
     the following:
           1.   Set the IND_COMPL bit in the INTF_CTRL                  RxError
                register to 0b or 1b, depending on the polarity         When the FUSB2805 detects an error while receiving a
                of the external fault signal.                           USB packet, it de-asserts NXT and sends an RXCMD
                                                                        with the RxError field set to 1b. The received packet is
           2.   Set the USE_EXT_VBUS_IND bit in the                     no longer valid and must be dropped by the link.
                OTG_CTRL register to 1b.
                                                                        HostDisconnect
           3.   If it is not necessary to qualify the fault
                                                                        This encoding is only valid when the FUSB2805 is
                indicator with the internal A_VBUS_VLD
                                                                        configured    as     a     host     (DP_PULLDOWN=
                comparator, set the IND_PASSTHRU bit in the
                                                                        DM_PULLDOWN=1b) and indicates to the host
                INTF_CTRL register to 1b.
                                                                        controller when a peripheral is connected (0b) or
     For the standard USB peripheral controller                         disconnected (1b). The host controller must enable
     applications, the standard peripherals detect when                 HostDisconnect by setting the HOST_DISCON_R and
     VBUS is at a sufficient level for operation. SESS_VLD              HOST_DISC_F bits in the USB_INTR_EN_R and
     must be enabled to detect the start and end of a                   USB_INTR_EN_F registers, respectively. Changes in
     USB peripheral operation. Detection of the                         HostDisconnect cause the FUSB2805 to send an
     A_VBUS_VLD and SESS_END thresholds is not                          RXCMD to the link with the updated value.
     needed for standard peripherals.
                                                                        In peripheral mode, HostDisconnect must be ignored
     For a device configured as an OTG B-device, SESS_VLD               and must not mask events on RxActive or RxError.
     must be used to detect when VBUS is at a sufficient level
                                                                        Refer to ULPI specifications, section 3.8.1 for details on
     for operation. SESS_END must be used to detect when
                                                                        RXCMD and TXCMD operations and functionality.
     VBUS has dropped to a LOW level, allowing the B-device
     to safely initiate VBUS pulsing SRP.
     A device configured as an OTG A-device must provide
     a minimum of 8 mA onto VBUS. This 8 mA (minimum) is
© 2008 Fairchild Semiconductor Corporation                                                                           www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                              23


                                                                                                                                        FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Register Read and Write Operations
     The link can read or write register bytes, and set or            assert NXT when DIR is asserted during the register
     clear register bits as needed, using the TXCMD byte.             read operation, including during the period that the
     The FUSB2805 supports immediate and extended                     register read data is being returned, to ensure that a
     addressing register operations, with the extended                USB receive event always overrides the register read
     register addressing being optional for the link. If the          during any cycle (see section 3.8.3.5 of ULPI Rev. 1.1
     FUSB2805 asserts DIR during an operation, the register           specification). If the FUSB2805 aborts the RegRead by
     operation is aborted. When a register operation is               asserting DIR early, the link must retry the RegRead
     aborted, the link must retry until successful.                   when the bus is idle.
                                                                      For an EXTW (extended register write), the link sends a
     Immediate Register Read and Write                                register write command with the address set to 2Fh and
     Immediate address registers are accessed by first                waits for NXT to assert. In the cycle after NXT asserts,
     sending the TXCMD byte as either a RegRead or                    the link sends the extended register address and waits
     RegWrite command with the required register address.             for NXT to assert again. When NXT asserts the second
                                                                      time, the link sends the register write data and waits for
     For RegRead, the link sends its read command request             NXT to assert again. When NXT asserts the third time,
     and waits for NXT to assert. In the cycle after NXT              the link asserts STP in the following cycle to complete
     asserts, the FUSB2805 asserts DIR to gain control of             the operation. If the FUSB2805 aborts the RegWrite by
     the bus. In the cycle after DIR asserts, the FUSB2805            asserting DIR, the link must retry the RegWrite when
     must return the register read data. The FUSB2805 does            the bus is idle.
     not assert NXT when DIR is asserted during the register
     read operation, including during the period that the             For back-to-back extended read and USB receive
     register read data is being returned, to ensure that a           signaling, refer to ULPI specifications section 3.8.3.5 for
     USB receive event always overrides the register read             details and timing waveforms.
     during any cycle (see section 3.8.3.2 of ULPI Rev. 1.1
                                                                      Please refer to ULPI specification, section 3.8.3 for
     specification). If the FUSB2805 aborts the RegRead by
                                                                      details on register read and write operations and
     asserting DIR early, the link must retry the RegRead
                                                                      functionality.
     when the bus is idle.
     For RegWrite, the link sends its write command request
     and waits for NXT to assert. In the cycle after NXT              Aborting ULPI Transfers
     asserts, the link sends the register write data and waits
     for NXT to assert again. When NXT asserts the second             There are two ways to abort ULPI transfers:
     time, the link asserts STP in the following cycle to                Link aborted by the FUSB2805
     complete the operation. The FUSB2805 must detect
                                                                         FUSB2805 aborted by the link.
     STP assertion before it accepts another transmit
     command. If the FUSB2805 aborts the RegWrite by
     asserting, DIR the link must retry the RegWrite when             Link Aborted by the FUSB2805
     the link is idle.                                                When the link is transferring data, the FUSB2805 can
                                                                      abort the link by asserting DIR.
     For back-to-back read/write and USB receive signaling,
     refer to ULPI specifications, section 3.8.3.3 for details
     and timing waveforms.                                            FUSB2805 Aborted by the Link
                                                                      When FUSB2805 has DIR asserted (in synchronous
     Extended Register Read and Write                                 mode), the link can abort by asserting STP. There are
                                                                      very specific criteria to meet in the timing diagram to
     Extended addressing read (EXTR) and write (EXTW)                 guarantee the link transaction, which is related to the
     means that the address is available in the next clock            cycle in which STP is asserted by the link to request
     cycle. Accessing immediate address 2Fh indicates an              aborting the FUSB2805 (see section 3.3.4.2 of the ULPI
     access to the extended register set.                             Rev. 1.1 specification for timing details). While this
     For an EXTR (extended register read), the link sends a           feature can be used at any time, it is provided to
     register-read command with the address set to 2Fh and            terminate a “babbling” port by disabling the FUSB2805.
     waits for NXT to assert. In the cycle after NXT asserts,         The FUSB2805 cannot guarantee the validity of USB
     the link sends the extended register address and waits           data during the current packet and the next packet if the
     for NXT to assert again. When NXT asserts the second             link asserts STP during a USB receive packet.
     time, the FUSB2805 asserts DIR to gain control of the            Please refer to ULPI specification, section 3.8.4 for
     bus. In the cycle after DIR asserts, the FUSB2805 must           details on aborting ULPI transfers.
     return the register read data. The FUSB2805 does not
© 2008 Fairchild Semiconductor Corporation                                                                          www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                            24


                                                                                                                                         FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     USB High-Speed Detection Handshake (Chirp)
     The sequence for detection includes the USB reset and
     the HS detection handshake (“chirp”) and includes the              3.   Host Chirp Response – If the host does not detect
     following sequence of events:                                           the peripheral chirp, it must continue asserting SE0
                                                                             until the end of reset. If the peripheral chirp
     1.    USB Reset - The host detects the peripheral                       response is detected by the host for a period no
           attachment (LS if DM is HIGH; FS if DP is HIGH). If               less than 2.5 µs, then no more than 100 µs after
           LS is detected, the host does not continue with the               the bus leaves chirp-K, the host sends a
           following sequence of events. If a FS peripheral is               TXCMD(NOPID) with an alternating sequence of
           detected, it resets the peripheral by writing to                  chirp-Ks and chirp-Js. Each chirp-K or chirp-J must
           FUNC_CTRL and setting XCVRSELECT[1:0]=00b                         last no less than 40 µs and no longer than 60 µs.
           (high speed) and TERMSELECT=0b that drives a
           SE0 on the bus (DP and DM connected to GND                   4.   High-Speed Idle Response – The peripheral must
           through       45 Ω).   The     host     also     sets             detect a minimum of chirp K-J-K-J-K-J, with each
           OPMODE[1:0]=10b for correct chirp transmit and                    chirp detection being for at least 2.5 µs. The
           receive. The start of SE0 is defined as T0 time. The              peripheral      sets     TERMSELECT=0b           and
           peripheral FUSB2805 asserts DIR and informs the                   OPMODE[1:0]=00b after seeing the minimum chirp
           link of the LINESTATE change using an RXCMD.                      sequence. The peripheral is in high-speed mode
                                                                             and detects the !squelch (LINESTATE=01b). When
           Note:                                                             the peripheral detects squelch (LINESTATE=10b),
           16. The host must also take into account, when                    it recognizes that the host has completed chirp and
               receiving chirp signaling, the high-speed                     waits for HS USB traffic to begin. After transmitting
               differential receiver output so as not to see                 the    chirp    sequence,     the   host    changes
               false bus activity.                                           OPMODE[1:0]=00b and begins sending packets.
     2.    Peripheral Chirp Response - After detecting the              Figure 14 shows the USB reset and HS chirp sequence.
           SE0 for no less than 2.5 µs; if HS capable, the              Refer to ULPI Rev. 1.1 specification, section 3.8.5.1 for
           peripheral sets XCVRSELECT[1:0]=10b and                      details on HS detection timing.
           OPMODE[1:0]=10b, then sends immediately after a
           TXCMD (NOPID) command. This means a
           transmission of a chirp-K for no less than 1ms and
           ending no more than 7 ms after the reset time, T0.
           If the peripheral is in low-power mode, it must wake
           up the clock within 5.6 ms, leaving 200 µs for the
           link to start transmitting the chirp-K and 1.2 ms for
           the chirp-K to complete (based on worst-case 10%
           slow clock).
© 2008 Fairchild Semiconductor Corporation                                                                           www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                              25


                                                                                                                                                                                                  FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
             ULPI HOST                                                                                 HS Detection Handshake (chirp)
                                          USB Reset
                     FS/LS                      Host                        Peripheral                                                    Host
                     Detect                    Drives                       Responds                                                    Responds                                 HS
                                    t0                                                                                                                                          Idle
                                         SE0                                 (chirp)                                                     (chirp)
                        TXCMD                                                                                  TXCMD                                             TXCMD
                                                          K                                            00                   K       J     …..      K     J
            D0-D7       RegWr                                                                                  NOPID                                             RegWr
            DIR
             NXT
             STP
                          01 (FS)                                                            00 (HS)
           XcvrSelect
            TermSelect
                           00                                                                                                                                                    00
            OpMode                                                                        10 (chirp)
                        (Normal)                                                                                                                                              (Normal)
                                                SE0              Peripheral Chirp-K             Squelch                                 Host Chirp-K/J                         Squelch
            LineState     J (01b)
                                               (00b)                   (10b)                     (00b)                                    (10b/01b)                             (00b)
             ULPI Peripheral
                                         SE0                                                                                        RXCMDs
                                                TXCMD     TXCMD                                                                                                  TXCMD
            D0-D7                                                     K    K   ...    K            00          K       J        K        J         K         J                00
                                                RegWr     NOPID                                                                                                  RegWr
            DIR
            NXT
             STP
            XcvrSelect                          01 (FS)                                      00 (HS)
            TermSelect
                                            00                                                                                                                        00
            OpMode                                                                                             10 (chirp)
                                         (Normal)                                                                                                                  (Normal)
                                                SE0              Peripheral Chirp-K             Squelch                     Host Chirp-K/J                         !Squelch     Squelch
            LineState     J (01b)
                                               (00b)                   (10b)                     (00b)                        (10b/01b)                              (01b)       (00b)
            USB Signals
             D+
              D-
                                                    Figure 14.       USB Reset and HS Chirp Handshake Timing
     Note:
     17. Timing is not to scale and not all the RXCMD updates or bus turn-around cycles are necessarily shown. The bus
         turn-around cycles would be included for one cycle after every assertion and de-assertion of DIR.
© 2008 Fairchild Semiconductor Corporation                                                                                                                                    www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                                           26


                                                                                                                                                                                                FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     USB Suspend and Resume
     This section describes the suspend and resume                                                     clearing the SUSPENDM bit in the FUNC_CTRL
     functionality, when initiated by a host or hub, and how to                                        register, causing the FUSB2805 to draw only
     subsequently wake the downstream peripheral.                                                      suspend current. The host may or may not be
                                                                                                       powered down.
     Full-Speed Suspend and Resume                                                            3.       Resume K – When the host wishes to wake the
     The sequence of events for a host and peripheral using                                            peripheral, it sets OPMODE[1:0]=10b and transmits
     FUSB2805 is described below and shown in Figure 15.                                               a K-state for at least 20 ms. The peripheral link
                                                                                                       detects the resume-K on LINESTATE and asserts
     Sequence of events:                                                                               STP to wake the FUSB2805.
     1.    FS Traffic – Initially both the host and peripheral                                4.       EOP – When STP is asserted, the FUSB2805 on
           are sending FS traffic over the USB bus                                                     the host side automatically appends an EOP (End
           (XCVRSELECT = 01b). The host has its 15 kΩ pull-                                            of Packet) of two bits of SE0 at LS bit rate, followed
           down resistors enabled (DP_PULLDOWN =                                                       by one bit of J-state. The FUSB2805 on the host
           DM_PULLDOWN = 1b) and the 45 Ω terminations                                                 side knows to add the EOP because
           disabled (TERMSELECT=1b). The peripheral has                                                DP_PULLDOWN and DM_PULLDOWN are set to
           the 1.5 kΩ pull-up connected to DP for full-speed.                                          1b for a host. After the EOP is completed, the host
           or DM for low-speed (TERMSELECT is set to 1b).                                              link sets OPMODE[1:0]=00b for normal FS
     2.    Suspend – If the peripheral detects no bus activity                                         operation. The peripheral link detects the EOP and
           for 3 ms, it enters “suspend” state. The peripheral                                         resumes normal FS operation.
           places the FUSB2805 into low-power mode by
                       ULPI HOST                XCVRSELECT[1:0]=01b (FS), DP_PULLDOWN=1b, DM_PULLDOWN=1b, TERMSELECT=1b
                       in FS Mode
                                            FS Traffic                  FS Suspend                 Resume-K                          EOP            FS Traffic
                                                                                 TXCMD   TXCMD
                                                                                                   K        K       …..   K                        TXCMD
                       D0-D7                                                     RegWr   NOPID
                       DIR
                        NXT
                        STP
                                                                               00                                                                                   00
                      OpMode                                                                               10 (chirp)
                                                                            (Normal)                                                                             (Normal)
                       LineState                                                     J                 K                      SE0          J
                        ULPI Peripheral
                           in FS Mode            XCVRSELECT[1:0]=01b (FS) , DP_PULLDOWN=0b, TERMSELECT=1b
                      CLOCK
                                                         TXCMD          LINESTATE J                                 TXCMD
                       D0-D7           TXCMD                                               LINESTATE K                          SE0        J
                                                         RegWr                                                      RegWr
                       DIR
                       NXT
                        STP
                      XcvrSelect                         01 (FS)                         00 (HS)
                                                   00                                                                                                         00
                       OpMode                                                                          10 (chirp)
                                                (Normal)                                                                                                   (Normal)
                       SuspendM
                      LineState      J /K                                  J                               K                   SE0             J
                       USB Signals
                        D+
                        D-
                                    Figure 15.                     FS Suspend and Resume Timing (Timing Not to Scale)
     Note:
     18. Timing is not to scale and not all the RXCMD updates or bus turn-around cycles are necessarily shown. The bus
         turn-around cycles would be included for one cycle after every assertion and de-assertion of DIR.
© 2008 Fairchild Semiconductor Corporation                                                                                                                                  www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                                    27


                                                                                                                                                                                        FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     High-Speed Suspend and Resume
     The sequence of events for a host and HS peripheral                                         FUNC_CTRL register, causing the FUSB2805 to
     using FUSB2805 is described below and shown in                                              draw only suspend current. The host also changes
     Figure 16.                                                                                  the       FUSB2805        to      FS       mode
                                                                                                 (XCVRSELECT[1:0]=01b), removes the 45 Ω
     Sequence of events:                                                                         terminations (TERMSELECT=1b), and may or may
     1.    HS Traffic – Initially both the host and peripheral                                   not be powered down.
           are idle. The host has its 15 kΩ pull-down resistors                            3.    Resume K – When the host wishes to wake the
           enabled (DP_PULLDOWN=DM_PULLDOWN=1b)                                                  peripheral, it sets OPMODE[1:0]=10b and transmits
           and       the    45 Ω      terminations     enabled                                   a full-speed K-state for at least 20 ms. The
           (TERMSELECT=0b). The peripheral has its 45 Ω                                          peripheral link detects the resume-K (10b) on
           terminations enabled (TERMSELECT=0b).                                                 LINESTATE and asserts STP to wake FUSB2805.
     2.    FS Suspend - If the peripheral detects no bus                                   4.    HS Traffic – the host link sets HS
           activity for 3 ms, it enters the suspend state. The                                   (XCVRSELECT[1:0]=00b) and enables its 45 Ω
           peripheral link places the FUSB2805 into FS mode                                      terminations (TERMSELECT=0b). The peripheral
           (XCVRSELECT[1:0]=01b), removes the 45 Ω                                               link detects SE0 on LINESTATE, sets HS mode
           terminations, and enables the 1.5 kΩ pull-up                                          (XCVRSELECT[1:0]=00b), and enables its 45 Ω
           resistor on DP (TERMSELECT=1b). The peripheral                                        terminations (TERMSELECT=0b). The host link
           link then places the FUSB2805 into low-power                                          sets OPMODE[1:0]=00b for normal HS operation.
           mode by clearing the SUSPENDM bit in the
                       ULPI HOST            DP_PULLDOWN=1b, DM_PULLDOWN=1b
                       in HS Mode
                                        HS Traffic               FS Suspend                            Resume-K                                   HS Traffic
                                                      TXCMD                   TXCMD   TXCMD                                     TXCMD
                                                                                                 K      K         …..       K                TXCMD
                       D0-D7                          RegWr                   RegWr   NOPID                                     RegWr
                       DIR
                        NXT
                        STP
                       XcvrSelect                     00(HS)                           01 (FS)                                               00
                       TermSelect
                                                                        00                                                                   00
                      OpMode                                                                          10 (chirp)
                                                                     (Normal)                                                             (Normal)
                                     !squelch        squelch                                                                            squelch      !squelch
                       LineState                                     FS J                                    FS K
                                       (01b)          (00b)                                                                              (00b)         (01b)
                        ULPI Peripheral
                           in FS Mode           DP_PULLDOWN=0b
                      CLOCK
                                                                                                                                  SE0
                                                      TXCMD                                                         TXCMD               TXCMD
                       D0-D7          TXCMD                      LINESTATE J               LINESTATE K
                                                      RegWr                                                         RegWr               RegWr
                       DIR
                       NXT
                        STP
                      XcvrSelect                     00 (HS)                           01 (FS)                                                          00 (HS)
                                               00                                                                                                           00
                       OpMode                                                                        10 (chirp)
                                            (Normal)                                                                                                     (Normal)
                      TermSelect
                       SuspendM
                                     !squelch        Squelch          FS J                                          FS K                squelch      !squelch
                      LineState        (01b)          (00b)           (01b)                                         (10b)                (00b)         (01b)
                       USB Signals
                        D+
                        D-
                                                        Figure 16.     HS Suspend and Resume Timing
     Note:
     19. Timing is not to scale and not all the RXCMD updates or bus turn-around cycles are necessarily shown. The bus
         turn-around cycles would be included for one cycle after every assertion and de-assertion of DIR.
© 2008 Fairchild Semiconductor Corporation                                                                                                                          www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                                 28


                                                                                                                                                                                                              FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Remote Wake Up
     The FUSB2805 supports peripherals that can initiate                                                5.         The host takes over resume driving within 1ms of
     remote wake-up. When placed into USB suspend, the                                                             detecting the remote wake-up.
     peripheral remembers the speed at which it was
     originally operating. Depending on that original                                                   6.         The peripheral stops driving resume.
     operating speed, the link follows one of the protocols
                                                                                                        7.         The peripheral recognizes the host continuing to
     described below.
                                                                                                                   drive the resume.
     The sequence of events is:
                                                                                                        8.         The host stops driving resume and the FUSB2805
     1.    Both the host and peripheral are assumed to be in                                                       automatically adds the EOP to the end of resume.
           low-power mode.                                                                                         The peripheral recognizes the EOP as the end
                                                                                                                   of resume.
     2.    The peripheral begins remote wake-up by
           re-enabling the clock and setting its SUSPENDM                                               9.         Both the host and peripheral revert to normal
           bit=1b.                                                                                                 operation by writing OPMODE[1:0]=00b. If the host
                                                                                                                   or the peripheral was previously in HS mode, it
     3.    The peripheral begins driving a K-state on the bus                                                      must revert to HS mode before the SE0 of the EOP
           to signal resume. The peripheral link must assume                                                       is completed. This can be achieved by writing
           that LINESTATE is K (01b) while transmitting (since                                                     XCVRSELECT[1:0]=00b and TERMSELECT=0b
           it does not receive any RXCMDs).                                                                        after LINESTATE indicates SE0.
     4.    The host recognizes the resume, re-enables its                                               Figure 17 shows the remote wake-up timing.
           clock, and sets its SUSPENDM bit.
                         ULPI Peripheral          Remote Wake Up Timing
                         D [7:0]      Linestate         TXCMD        TXCMD                                                                                               TXCMD
                                                                                                00h                           RXCMD          RXCMD             RXCMD
                                                        RegWr        NOPID                                                                                               RegWr
                          DIR
                           NXT
                           STP
                          XcvrSelect                                                 00 (HS), 01 (FS) or 10( LS)                                                       00 (HS only)
                          TermSelect                                                                                           Termselect = 0b for HS only
                                                                                                                         10 (chirp)                                               00
                         OpMode                                                                                                                                                (Normal)
                            ULPI Host      TermSelect=1b
                                                                                             TXCMD            TXCMD                                            TXCMD
                          D [7:0]                                        Linestate                                                    00h
                                                                                             RegWr            NOPID                                            RegWr
                          DIR
                          STP
                          NXT
                          XcvrSelect                                                                     01 (FS) or 10( LS)                                             00 (HS only)
                         TermSelect                                                                                             Termselect = 0b for HS only
                                                                                                                      10 (chirp)                                            00
                         OpMode                                                                                                                                          (Normal)
                          USB Signals
                           D+
                           D-
                                1                  2                 3                4                       5      6        7               8                9
                                                                                                                                                  T1
                                                                                                                                             LS EOP Interval
                                                  Figure 17.          Remote Wake-Up from Low-Power Mode
     Note:
     20. Timing is not to scale and not all the RXCMD LINESTATE updates or bus turn-around cycles are necessarily
         shown. The bus turn-around cycles are included for one cycle after every assertion and de-assertion of DIR.
© 2008 Fairchild Semiconductor Corporation                                                                                                                                                www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                                             29


                                                                                                                                                                            FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     In some mobile applications; the system clock, CLKIN,                               signaling in response to the remote wake-up event. This
     may be turned off to conserve battery power. In effect                              can be viewed as a „light sleep‟ mode whereby the PHY
     placing the device into a “deep sleep” mode. When this                              is suspended, internal PLL and clock trees are powered
     occurs, a remote wakeup event may not be able to start                              down, but power is being dissipated in the system to run
     CLKIN or the subsequent internal PHY clock to restore                               CLKIN.
     resume signaling in the required 1ms period to the
     remote wake-up capable device.                                                      If, however, the implementation is such that the CLKIN
                                                                                         is also powered down, it is most likely to take >1 ms to
     To allow for this capability, the FUSB2805 has an                                   wake from suspended (low-power) mode. In this
     autoresume feature.                                                                 scenario, the FUSB2805 is required to internally drive
                                                                                         resume-K until the PHY clocks are restored and it
     Autoresume                                                                          receives a TXCMD (NOPID type) from the link. With the
     When a USB host detects remote wake-up signaling                                    clock restoration, the link takes over the resume-K
     (resume-K) from a downstream peripheral (or hub), the                               signaling to keep the remote wake-up capable
     host must take over the resume-K signaling within 1ms                               peripheral awake. The FUSB2805 is responsible for
     (see USB2.0 Specification Sections 7.1.7.7 and 7.12).                               setting the suspendM register back to 1b before exiting
                                                                                         low-power mode. The time taken for this clock wake up
     Depending on the system architecture, the FUSB2805                                  is specified as the tSTART_HOST timing parameter.
     may utilize the autoresume feature. When the
     FUSB2805 is configured as a host and is suspended;                                  The autoresume feature is enabled or disabled
     CLKIN is running; the STP assertion to exit low-power                               according to Table 18 and is described in Figure 18
     mode results in the PHY clock restarting in under 1ms.                              (timing is not to scale).
     The link can immediately take control of the resume
            VIO = 1.8V
                           CLKIN Preparation3
                               TCLKIN_PREP
            CLKIN
                          LINK Wakeup1    Clock Wakeup
                            TSTART_LINK    TSTART_HOST
           CLOCK
                                                                                                         turn          TXCMD
            D0-D7                                                      Low Power Mode                   around
                                                                                                                                         K         K            K
                                                                                                                       NOPID
               DIR
              STP
              NXT
       SuspendM
            D+/D-
               Idle-J                                                        Resume-K
                         Downstream                             Host PHY automatically takes over driving resume-K
                                                                                                                                         Link drives resume-K
                          Peripheral
                                                                                                                                              PHY stops
                            drives
                                                                                                                                              autoresume
                           Remote
                          Wakeup2
                           1
                             Link Wakeup time is a function of the application implementation response to LINESTATE[1:0], the time for CLKIN to become active
                           and for the Link to assert STP within the system. This time needs to meet the UTMI+ and ULPI Specification.
                           2
                             The time from the remote wakeup being signaled and the FUSB2500 driving resume-K is of the order of tens of nanoseconds
                           3
                             The TCLKIN_PREP is the time for CLKIN to have become active prior to STP going high. This always has to be greater than zero
                                                           Figure 18.         Autoresume Signaling
© 2008 Fairchild Semiconductor Corporation                                                                                                              www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                               30


                                                                                                                                                           FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     No Automatic Generation of SYNC or EOP Packets
     This functionality is considered optional in the ULPI                       data set to FEh. If data is set to 00h when STP is
     specification, but is supported by the FUSB2805 and                         asserted, the FUSB2805 does not transmit an EOP.
     allows for the link to turn off the automatic generation of                 The FUSB2805 also detects if the PID byte is A5h
     SYNC and EOP packets. This is only pertinent to HS                          (indicating SOF) and automatically sends a long EOP
     packet data. It is provided for backward compatibility for                  when STP is asserted. To transmit chirp and resume
     the controllers that include SYNC and EOP bytes in the                      signaling, the link sets OPMODE[1:0]=10b.
     data payload when transmitting packets. The
     FUSB2805 does not automatically generate SYNC and                           Figure 19 shows USB packets without automatic SYNC
     EOP when OPMODE[1:0]=11b. The FUSB2805 NRZI                                 and EOP generation.
     encodes the data and performs bit stuffing. The link                        Please refer to ULPI specification, section 3.8.5.6 for
     must always send packets using the TXCMD(NOPID)                             details on no SYNC and EOP generation functionality.
     packet type. The FUSB2805 does not provide bit
     stuffing on an individual byte basis, but automatically
     turns off bit stuffing for EOP when STP is asserted with
         ULPI Signals
         CLOCK
          D [7:0]         TXCMD           00h    00h     00h   08h   PID        D1   D2    D3    ….     ….     DN-1   DN   FEh
          DIR
          STP
          NXT
         UTMI+ Equivalent Signals
         TxValid
         TxReady
         TxBitstuffEnable
         USB Signals
         D+/D-                  Idle                   Sync          PID                        Data Payload                     EOP         Idle
                    Figure 19.         USB Packets without Automatic SYNC and EOP Generation (OpMode=11b)
     OTG Operations                                                              The VA_VBUS_VLD threshold allows for the A-device to
                                                                                 determine if it is capable of outputting a valid voltage on
     The FUSB2805 provides full support for OTG Rev. 1.3                         VBUS. For the FUSB2805, the VBUS source voltage is
     compliance. The supporting functional blocks for dual-                      external to the device when an A-device, so the
     role devices include:                                                       ExtVBUSIndicator signal must be utilized.
          Voltage comparators (for VBUS-valid, session-end,                     These comparators are controlled, and determine when
           and session-valid signaling)                                          RXCMDs are sent, by interaction with the INTF_CTRL,
          DP and DM pull-up and pull-down resistors                             OTG_CTRL, USB_INTR_R, USB_INTR_F, USB_INTR_
           compliant to the USB2.0 resistor ECN                                  STAT, and USB_INTR_L registers.
          ID detection for micro-A or micro-B plug insertion                    Table 13 defines use of the UseExternalVbusIndicator,
          VBUS charge and discharge resistors                                   IndicatorPassThru, and IndicatorComplement register
                                                                                 bits to control the use of the ExternalVbusIndicator input
     VBUS Comparators
                                                                                 pin and the internal VBUS-valid comparator output to
     The FUSB2805 combines the A-device and B-device
                                                                                 generate the VA_VBUS_VLD indicator for encoding in
     session valid signals into VSESS_VLD due to overlapping
                                                                                 the RXCMD data byte.
     thresholds that allow for such combination.
                                                                                 Figure 20 shows a graphical representation of the
                                                                                 RXCMD VBUS-valid.
© 2008 Fairchild Semiconductor Corporation                                                                                             www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                      31


                                                                                                                                         FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Pull-Up and Pull-Down Resistors
     The FUSB2805 integrates the DP and DM termination                   Please refer to ULPI specifications, section 3.8.7, for
     resistors required to initiate data line pulsing. The pull-         details on OTG functionality with respect to ULPI or
     up and pull-down resistors are connected according to               OTG supplement Rev. 1.3 for USB2.0. Please refer to
     Table 4.                                                            ULPI specifications section 3.8.7.3 for further detail on
                                                                         OTG VBUS comparator thresholds.
     Table 13. RXCMD VBUS_VALID Over-Current Conditions
       Typical             UseExternal           IndicatorPass      Indicator
                                                                                            RXCMD VBUS Valid Source
      Application          VBUSIndicator              Thru         Complement
       OTG Device                   0               Don‟t Care        Don‟t Care      Internal VA_VBUS_VLD comparator
                                    1                    1                 0          External active HIGH VA_VBUS_VLD signal
                                    1                    1                 1          External active LOW VA_VBUS_VLD_N signal
                                                                                      External active HIGH power fault signal
                                    1                    0                 1          qualified with internal VA_VBUS_VLD
                                                                                      comparator
                                                                                      External active LOW power fault signal
                                    1                    0                 0          qualified with internal VA_VBUS_VLD
                                                                                      comparator
                                    1                    1                 0          External active HIGH power fault signal
     Standard Host
                                    1                    1                 1          External active LOW power fault signal
        Standard
                                    0               Don‟t Care        Don‟t Care      Internal VA_VBUS_VLD comparator
        Peripheral
       VBUS
                           +                 Internal VbusValid                             (0,X)
                            -
                                                                                            (1,0)            RXCMD VbusValid
       ExternalVbusIndicator (Fault)
                                                                                            (1,1)
                                                   ComplementOutput
         IndicatorComplement
        (UseExternalVbusIndicator, Indicator PassThru)
                                   Figure 20.      Graphical Representation of the RXCMD VBUS-Valid
© 2008 Fairchild Semiconductor Corporation                                                                           www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                               32


                                                                                                                                           FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Serial Modes
     Figure 21 and Figure 22 provide examples of 6-pin and               Please refer to ULPI specification, section 3.10 for
     3-pin serial modes as controlled in the INTF_CTRL                   details on the 3-pin and 6-pin serial mode functionality.
     register via the 6-pin and 3-pin register bits.
                                                            TRANSMIT           RECEIVE
                 DATA[0]
                  Tx_Enable
                                   SYNC            DATA          EOP              SYNC                 DATA          EOP
                 DATA[1]
                 Tx_DAT/
                 RX_RCV
                 DATA[2]
                 Tx_SE0/
                 RX_SE0
                  DP
                  DM
                                   Figure 21.   3-Pin Serial Mode – Transmit and Receive Example
                                                             TRANSMIT           RECEIVE
                 DATA[0]
                 Tx_Enable
                                      SYNC           DATA          EOP             SYNC                 DATA          EOP
                 DATA[1]
                 Tx_DAT
                 DATA[2]
                 Tx_SE0
                 DATA[4]
                 Rx_DP
                 DATA[5]
                 Rx_DM
                 DATA[6]
                 Rx_RCV
                       DP
                       DM
                                   Figure 22.   6-Pin Serial Mode – Transmit and Receive Example
     Avoiding Contention on the ULPI Data Bus
     Because the ULPI data bus is bi-directional, it is                  When FUSB2805 wants to take control of data bus to
     necessary to avoid situations in which both the link and            initiate a data transfer, it changes DIR value from 0 to 1.
     FUSB2805 drive the data bus simultaneously.
                                                                         At this point, HOST/LINK should disable its output pad
     The following points should be considered while                     buffers. This needs to be as fast as possible, so LINK
     implementing the data bus drive control on the link.                should use a combinational path from DIR.
     After the power-up and clock stabilization, the default             FUSB2805 does not enable its output buffers
     states are:                                                         immediately, but delays the enabling buffers until the
                                                                         next clock edge, avoiding bus contention.
          FUSB2805 drives DIR=0.
          Data bus is an INPUT to FUSB2805.                             When data transfer is no longer required by the
                                                                         FUSB2805, it changes DIR from 1 to 0 and starts to turn
          HOST/LINK ULPI data bus is OUTPUT (with all                   off its output drivers immediately. The HOST/LINK
           data bus bits driven to 0).                                   senses the change of DIR from 1 to 0, but delays
                                                                         enabling its output buffers for one CLOCK cycle,
                                                                         thereby avoiding data bus contention.
© 2008 Fairchild Semiconductor Corporation                                                                             www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                              33


                                                                                                                                         FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     ULPI Registers
     ULPI provides an immediate register set, with a 6-bit           immediate register set. The FUSB2805 must support
     address, that is part of the transmit command byte. An          both immediate and extended register operations.
     extended register set is also provided (8-bit address)
     that requires an extra clock cycle to complete. The             The registers specific to FUSB2805 – vendor ID,
     immediate register set is mirrored into the lower end of        product ID, and power control registers, are described
     the extended address space. For example, an operation           in the following sections.
     to the extended address of 00XXXXXX operates on the
     Table 14. Register Map
                                                                                               Address (6 bits)
                                Field Name                           Size (bits)
                                                                                       Rd           Wr         Set          Clr
     Immediate Register Set
     Vendor ID Low (see Table 16)                                        8            00h
     Vendor ID High (see Table 16)                                       8            01h
     Product ID Low (see Table 16)                                       8            02h
     Product ID High (see Table 16)                                      8            03h
     Function Control (see Table 17)                                     8           04-06h         04h        05h          06h
     Interface Control (see Table 18)                                    8           07-09h         07h        08h          09h
     OTG Control (see Table 19)                                          8          0A-0Ch          0Ah        0Bh         0Ch
     USB Interrupt Enable Rising (see Table 20)                          8          0D-0Fh          0Dh        0Eh          0Fh
     USB Interrupt Enable Falling (see Table 21)                         8           10-12h         10h        11h          12h
     USB Interrupt Status Register (see Table 22)                        8            13h
     USB Interrupt Latch Register (see Table 23)                         8            14h
     Debug (see Table 25)                                                8            15h
     Scratch (see Table 26)                                              8           16-18h         16h        17h          18h
                   (21)
     Reserved                                                            8                           19-2Eh
     Access Extended Register Set (see below)                            8                          2Fh
     Reserved (defined in ULPI specification as vendor
                                                                         8                           30-3Ch
     specific)
     Extended Register Set                                                                      Address (8 bits)
     Maps to Immediate Register Set (see below modes)                    8                           00-3Fh
     Reserved (80-FFh defined in ULPI specification as
                                                                         8                           40-FFh
     vendor specific)
     Note:
     21. 19-27h carkit; not supported by FUSB2805.
     Table 15. Register Access Legend
      Access Code             Expanded Name                                        Meaning
              rd                       Read      Register can be read. Read-only if this is the only mode given.
              wr                       Write     Pattern on the data bus is written over all bits of the register.
               s                        Set      Pattern on the data bus is OR‟d with and written into the register.
                                                 Pattern on the data bus is a mask. If a bit in the mask is set, the
               c                       Clear
                                                 corresponding register bit is set to zero (cleared).
     Notes:
     22. The register set above is compliant with the register set defined in the ULPI specifications. For details, please
         refer to section 4.0 of the ULPI specifications, version 1.1.
© 2008 Fairchild Semiconductor Corporation                                                                           www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                           34


                                                                                                                                              FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     ULPI Registers Specific to FUSB2805
     Table 16. Vendor ID and Product ID Registers
            Register              Bits Access Address                 Value                         Description
                                                                                Lower byte of vendor ID supplied by USB-IF. Fixed
     VENDOR_ID_LOW                 7:0          rd           00h        79h
                                                                                value of 79h.
                                                                                Upper byte of vendor ID supplied by USB-IF. Fixed
     VENDOR_ID_HIGH                7:0          rd           01h        07h
                                                                                value of 07h.
     PRODUCT_ID_LOW                7:0          rd           02h        00h     Lower byte of product ID number. Fixed value of 00h.
     PRODUCT_ID_HIGH               7:0          rd           03h        25h     Upper byte of product ID number. Fixed value of 25h.
     Function Control Register– FUNC_CTRL (04h-06h Read, 04h Write, 05h Set, 06h Clear)
     These registers control the UTMI function settings of the FUSB2805.
     Table 17. Function Control Register
      Field Name         Bits       Access           Reset                                Description
                                                             Selects the transceiver speed:
                                                             00b: Enable HS transceiver
                                                             01b: Enable FS transceiver
       XcvrSelect         1:0       rd/wr/s/c         01b
                                                             10b: Enable LS transceiver
                                                             11b: Enable FS transceiver for LS packets (FS preamble pre-pended by
                                                             default)
                                                             Controls the internal 1.5 kΩ pull-up resistor and 45 Ω HS terminations.
                                                             Control over the bus resistor changes, as described in Table 4, by the
       TermSelect          2        rd/wr/s/c         0b     XcvrSelect, OpMode, DpPulldown, and DmPulldown register settings.
                                                             Since LS peripherals never support FS or HS for HS-capable
                                                             transceivers, the FUSB2805 does not support providing 1.5 k on D-.
                                                             Selects the required bit encoding style during transmit.
                                                             00b: Normal operation
                                                             01b: Non-driving
        OpMode            4:3       rd/wr/s/c         00b
                                                             10b: Disable bit stuffing and NRZI encoding
                                                             11b: Do not automatically add SYNC and EOP when transmitting.
                                                             Must only be used for HS packets.
                                                             Active HIGH transceiver reset. After the link sets this bit, the FUSB2805
                                                             must assert DIR and reset the UTMI+ core. When the reset is
                                                             completed, the FUSB2805 de-asserts DIR and automatically clears this
                                                             bit. After de-asserting DIR, the FUSB2805 must re-assert DIR and send
          Reset            5        rd/wr/s/c         0b     an RXCMD update to the link. The link must wait for DIR to de-assert
                                                             before using the ULPI bus. Does not reset the ULPI interface or ULPI
                                                             register set.
                                                             0b: No Reset
                                                             1b: Reset
                                                             Active LOW PHY suspend. Puts the FUSB2805 into low-power mode.
                                                             The FUSB2805 can power down all blocks except the FS receiver, OTG
                                                             comparators, and the ULPI interface pins. The FUSB2805 must
       SuspendM            6        rd/wr/s/c         1b     automatically set this bit to 1b when low-power mode is exited (prior to
                                                             exit STP is asserted by the link).
                                                             0b: Low-power mode
                                                             1b: Powered
      RESERVED             7        rd/wr/s/c         0b     Reserved
© 2008 Fairchild Semiconductor Corporation                                                                                www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                    35


                                                                                                                                          FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Interface Control Register – INTF_CTRL (07h-09h Read, 07h Write, 08h Set, 09h Clear)
     These registers control various interface and PHY                   Rev 1.1; however, many are supported by the
     features of the FUSB2805. All bits in this register are             FUSB2805 and are provided for legacy link cores.
     viewed as optional features in the ULPI Specification
     Table 18. Interface Control Register
           Field Name               Bits Access Reset                                     Description
                                                              Changes the ULPI interface to 6-pin serial mode. The FUSB2805
                                                              must automatically clear this bit when serial mode is exited. It is an
                                                              optional mode for support by the ULPI PHY.
     6-pin FsLsSerialMode
                                      0      rd/wr/s/c   0b   A PHY with only four data pins, D[3:0] cannot support this mode.
     6PIN_FSLS_SER
                                                              0b: FS/LS packets are sent using the parallel interface.
                                                              1b: FS/LS packets are sent using the 6-pin serial interface
                                                              assignments. CLKIN must remain running.
                                                              Changes the ULPI interface to 3-pin serial mode. The FUSB2805
                                                              must automatically clear this bit when serial mode is exited. It is an
     3-pin FsLsSerialMode                                     optional mode for support by the ULPI PHY.
                                      1      rd/wr/s/c   0b
     3PIN_FSLS_SER                                            0b: FS/LS packets are sent using the parallel interface.
                                                              1b: FS/LS packets are sent using the 3-pin serial interface
                                                              assignments. CLKIN must remain running.
     CarkitMode
     (not supported in                2      rd/wr/s/c   0b   Reserved
     FUSB2805)
                                                              Active LOW clock suspend. Used to output CLOCK in serial
                                                              modes. Internal clock circuitry is not powered down and CLKIN
     ClockSuspendM                    3      rd/wr/s/c   0b   must remain running for serial modes.
                                                              0b: Clock is not output in serial modes.
                                                              1b: Clock is output in serial modes.
                                                              Enables the PHY to automatically transmit resume signaling.
                                                              0b: The system is able to wake up its PHY clock in < 1 ms and
                                                              Autoresume feature is disabled.
     Autoresume                       4      rd/wr/s/c   0b   1b: The system is unable to wake up its PHY clock in 1 ms and
                                                              Autoresume feature is enabled.
                                                              Refer to USB2.0 specification, section 7.1.7.7 and section 7.12 for
                                                              more information.
                                                              Tells the FUSB2805 to invert the ExternalVBUSIndicator input
                                                              signal, generating the complement output (ie.FAULT).
                                                              0b: FUSB2805 does not invert ExternalVBUSIndicator signal
     Indicator Complement
                                      5      rd/wr/s/c   0b   (default).
     IND_COMPL
                                                              1b: FUSB2805 inverts ExternalVBUSIndicator signal.
                                                              Refer to 3.8.7.3 and Figure 45 of the ULPI Rev. 1.1, October 2004
                                                              specification for details.
                                                              Controls whether the complement output is qualified with the
                                                              internal VBUSValid comparator before being used in the V BUS state
                                                              in the RXCMD.
                                                              0b: Complement output signal is qualified with the internal
     Indicator Pass Thru
                                      6      rd/wr/s/c   0b   VBUSValid comparator.
     IND_PASS_THRU
                                                              1b: Complement output signal is not qualified with the internal
                                                              VBUSValid comparator.
                                                              Refer to 3.8.7.3 and Figure 45 of the ULPI Rev. 1.1, October 2004
                                                              specification for details.
                                                                                              Continued on the following page…
© 2008 Fairchild Semiconductor Corporation                                                                            www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                               36


                                                                                                                                           FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
           Field Name               Bits     Access      Reset                             Description
                                                                 Controls circuitry built into the FUSB2805 for protecting the
                                                                 ULPI interface when the link three-states STP and D[7:0].
                                                                 Any pull-ups or pull-downs employed by this feature can be
                                                                 disabled. This bit is not intended to affect the operation of the
                                                                 holding state. When this bit is enabled, the FUSB2805
                                                                 automatically detects when the link stops driving STP.
     Interface Protect
                                                                 0b: Enables the interface-protect circuit (default). A weak
     Disable                          7      rd/wr/s/c    0b
                                                                 pull-up resistor is attached to STP and, if STP is unexpectedly
     INTF_PROT_DIS
                                                                 HIGH, the FUSB2805 attaches weak pull-down resistors on
                                                                 D[7:0] to protect the data inputs.
                                                                 1b: Disables the interface-protect circuit. Detaches the weak
                                                                 pull-down resistors on D[7:0] and weak pull-up on STP.
                                                                 Refer to 3.12 of the ULPI Rev. 1.1, October 2004 specification
                                                                 for details.
     OTG Control Register – OTG_CTRL (0Ah-0Ch Read, 0Ah Write, 0Bh Set, 0Ch Clear)
     These registers control the UTMI+ OTG function settings of the FUSB2805.
     Table 19. OTG Control Register
       Field Name            Bits Access Reset                                         Description
                                                         Connects a pull-up to ID line and enables sampling the signal level;
     IDPullup                  0      rd/wr/s/c    0b    0b: Disables sampling of ID pin
                                                         1b: Enables sampling of ID pin
                                                                                                      (23)
                                                         Enables the 15 kΩ pull-down resistor on D+
     DpPulldown                1      rd/wr/s/c    1b    0b: Pull-down resistor not connected to D+
                                                         1b: Pull-down resistor connected to D+
                                                                                                      (23)
                                                         Enables the 15 kΩ pull-down resistor on D-
     DmPulldown                2      rd/wr/s/c    1b    0b: Pull-down resistor not connected to D-
                                                         1b: Pull-down resistor connected to D-
                                                         Discharges VBUS through a resistor. A minimum of 656 Ω is defined in
                                                         the OTG specification. If the link sets this bit to 1b, it waits for an
                                                         RXCMD indicating SessEnd has transitioned from 0b to 1b, then resets
     DischrgVBUS               3      rd/wr/s/c    0b
                                                         this bit to 0b to stop the discharge event.
                                                         0b: Do not discharge VBUS
                                                         1b: Discharge VBUS
                                                         Charges VBUS through a resistor. Used for VBUS pulsing SRP. A
                                                         minimum output impedance of 281 Ω with a voltage source of 3.0 V as
                                                         defined in the OTG specification can be used. The link must first check
     ChrgVBUS                  4      rd/wr/s/c    0b    that VBUS has been discharged (see DischrgVBUSbit) and that both D+
                                                         and D- have signaled an SE0 for a minimum of 2ms.
                                                         0b: Do not charge VBUS
                                                         1b: Charge VBUS
     Reserved                  5      rd/wr/s/c    0b    Reserved
                                                         Selects the external 5 V VBUS supply via PSW pin.
     DrvVBUS External          6      rd/wr/s/c    0b    0b: Drive PSW LOW
                                                         1b: Drive PSW HIGH
                                                         Tells the FUSB2805 to use an external VBUS over-current indicator.
                                                         This bit is optional.
                                                         0b: Use the internal OTG comparator (VA_VBUS_VLD) or internal VBUS
     UseExternalVBUS
                               7      rd/wr/s/c    0b    valid indicator (default).
     Indicator
                                                         1b: Use external VBUS valid indicator signal on FAULT
                                                         Refer to 3.8.7.3 of the ULPI Rev. 1.1, October 2004 specification for
                                                         details.
     Note:
     23. Resistor termination implementations conform to USB2.0 resistor ECN.
© 2008 Fairchild Semiconductor Corporation                                                                             www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                37


                                                                                                                                            FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     USB Interrupt Enable (Rising) Register – INTR_EN_R_CTRL (0Dh-0Fh Read, 0Dh Write,
     0Eh Set, 0Fh Clear)
     These register bits control the interrupt event                         when both rising and falling edge enables are disabled.
     notification settings of the FUSB2805 for LOW-to-HIGH                   To ensure interrupts are detectable when CLOCK is
     signal changes. By default, all transitions are enabled.                powered down, the link should enable both rising and
     Interrupt circuitry can be powered down in any mode                     falling edges.
     Table 20. USB Interrupt Enable (Rising) Register
          Field Name              Bits Access Reset                                         Description
                                                                 Generates an interrupt event notification when HostDisconnect
     HostDisconnect Rise               0     rd/wr/s/c    1b     changes from LOW to HIGH. Applicable only in host mode
                                                                 (DpPulldown and DmPulldown both set to 1b).
                                                                 Generates an interrupt event notification when VBUSValid changes
     VBUSValid Rise                    1     rd/wr/s/c    1b
                                                                 from LOW to HIGH.
                                                                 Generates an interrupt event notification when SessValid changes
     SessValid Rise                    2     rd/wr/s/c    1b
                                                                 from LOW to HIGH. SessValid is the same as UTMI+ AValid.
                                                                 Generates an interrupt event notification when SessEnd changes
     SessEnd Rise                      3     rd/wr/s/c    1b
                                                                 from LOW to HIGH.
                                                                 Generates an interrupt event notification when IDGnd changes
     IDGnd Rise                        4     rd/wr/s/c    1b     from LOW to HIGH. IDGnd is valid 50 ms after IDPullup is set to
                                                                 1b; otherwise, IDGnd is undefined and should be ignored.
     RESERVED                      7:5       rd/wr/s/c    0b     Reserved
     USB Interrupt Enable (Falling) Register – INTR_EN_F_CTRL (10h-12h Read, 10h Write,
     11h Set, 12h Clear)
     These register bits control the interrupt event                         powered down, the link should enable both rising and
     notification settings of the FUSB2805 for HIGH-to-LOW                   falling edges.
     signal changes. By default, all transitions are enabled.
     Interrupt circuitry can be powered down in any mode                     Note:
     when both rising and falling edge enables are disabled.                 24. RxActive and RxError must always be
     To ensure interrupts are detectable when CLOCK is                           communicated immediately, these events are not
                                                                                 included in this register.
     Table 21. USB Interrupt Enable (Falling) Register
         Field Name              Bits        Access      Reset                              Description
                                                                 Generates an interrupt event notification when HostDisconnect
     HostDisconnect Fall           0         rd/wr/s/c    1b     changes from HIGH to LOW. Applicable only in host mode
                                                                 (DpPulldown and DmPulldown both set to 1b).
                                                                 Generates an interrupt event notification when VBUSValid changes
     VBUSValid Fall                1         rd/wr/s/c    1b
                                                                 from HIGH to LOW.
                                                                 Generates an interrupt event notification when SessValid changes
     SessValid Fall                2         rd/wr/s/c    1b
                                                                 from HIGH to LOW. SessValid is the same as UTMI+ AValid.
                                                                 Generates an interrupt event notification when SessEnd changes
     SessEnd Fall                  3         rd/wr/s/c    1b
                                                                 from HIGH to LOW.
                                                                 Generates an interrupt event notification when IDGnd changes
     IDGnd Fall                    4         rd/wr/s/c    1b     from HIGH to LOW. IDGnd is valid 50ms after IDPullup is set to
                                                                 1b; otherwise, IDGnd is undefined and should be ignored.
     RESERVED                    7:5         rd/wr/s/c    0b     Reserved
© 2008 Fairchild Semiconductor Corporation                                                                              www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                   38


                                                                                                                                                 FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     USB Interrupt Status Register – USB_INTR_STAT (13h Read Only)
     These register bits indicate the current value of the                     edge enables are disabled. To ensure interrupts are
     interrupt event source signal. Interrupt circuitry can be                 detectable when CLOCK is powered down, the link
     powered down in any mode when both rising and falling                     should enable both rising and falling edges.
     Table 22. USB Interrupt Status Register
       Field Name            Bits     Access           Reset                                  Description
                                                                  Current value of UTMI+ HostDisconnect output. Applicable only in
     HostDisconnect            0             rd         0b        host mode (DpPulldown and DmPulldown both set to 1b).
                                                                  Automatically reset to 0b when low-power mode is entered.
     VBUSValid                 1             rd         0b        Current value of UTMI+ VBUSValid output.
                                                                  Current value of UTMI+ SessValid output. SessValid is the same as
     SessValid                 2             rd         0b
                                                                  UTMI+ AValid.
     SessEnd                   3             rd         0b        Current value of UTMI+ SessEnd output.
                                                                  Current value of UTMI+ IDGnd output. IDGnd is valid 50ms after
     IDGnd                     4             rd         0b        IDPullup is set to 1b; otherwise, IDGnd is undefined and should be
                                                                  ignored.
     RESERVED                 7:5            rd         Xb        Reserved
     USB Interrupt Latch – USB_INTR_L (14h Read Only with Auto-Clear)
     These register bits are set by the FUSB2805 when an                       when both rising and falling edge enables are disabled.
     unmasked change occurs on the corresponding internal                      To ensure interrupts are detectable when CLOCK is
     signal. The FUSB2805 automatically clears all bits                        powered down, the link should enable both rising and
     when the link reads this register or when low-power                       falling edges.
     mode is entered. The FUSB2805 also clears this
     register when either 6-pin or 3-pin serial mode is                        It is optional for the link to read the USB Interrupt Latch
     entered, regardless of the value of ClockSuspendM.                        register in synchronous mode because the RXCMD
     Interrupt circuitry can be powered down in any mode                       byte already indicates the interrupt source directly.
     Table 23. USB Interrupt Latch Register
           Field Name               Bits Access           Reset                                  Description
                                                                      Set to 1b by the FUSB2805 when an unmasked event occurs
                                                                      on HostDisconnect. Cleared when this register is read.
     HostDisconnect Latch             0           rd         0b
                                                                      Applicable only in host mode (DpPulldown and DmPulldown
                                                                      both set to 1b).
                                                                      Set to 1b by the FUSB2805 when an unmasked event occurs
     VBUSValid Latch                  1           rd         0b
                                                                      on VBUSValid. Cleared when this register is read.
                                                                      Set to 1b by the FUSB2805 when an unmasked event occurs
     SessValid Latch                  2           rd         0b       on SessValid. Cleared when this register is read. SessValid is
                                                                      the same as UTMI+ AValid.
                                                                      Set to 1b by the FUSB2805 when an unmasked event occurs
     SessEnd Latch                    3           rd         0b
                                                                      on SessEnd. Cleared when this register is read.
                                                                      Set to 1b by the FUSB2805 when an unmasked event occurs
                                                                      on IDGnd. Cleared when this register is read. IDGnd is valid
     IDGnd Latch                      4           rd         0b
                                                                      50 ms after IDPullup is set to 1b; otherwise, IDGnd is undefined
                                                                      and should be ignored.
     RESERVED                        7:5          rd         0b       Reserved
© 2008 Fairchild Semiconductor Corporation                                                                                   www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                     39


                                                                                                                                               FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     The FUSB2805 must follow the rules defined in Table                      USB interrupt latch bit is set, the interrupt condition is
     24 for setting any of the Latch register bits. If register               given immediately in the register read data and the
     read data is returned to the link in the same cycle, a                   latch bit is not set to 1b.
     Table 24. Interrupt Latch Register Setting Rules
                                             Input Conditions
        Register Read Data Returned in                Interrupt Latch Bit Set (1b) in Current           Resultant Value of Latch
             Current Clock Cycle                                   Clock Cycle                                Register Bit
                          NO                                             NO                                         0b
                          NO                                             YES                                        1b
                          YES                                            NO                                         0b
                          YES                                            YES                                        0b
     Debug Register (15h Read Only)
     These register bits indicate the current values of various signals useful for debugging.
     Table 25. Debug Register
       Field Name              Bits        Access      Reset                                   Description
     LineState0                  0             rd           0b     Contains the current value of Linestate0
     LineState1                  1             rd           0b     Contains the current value of Linestate1
     RESERVED                    7:2           rd           0b     Reserved
     Scratch Register (16h-18h Read, 16h Write, 17h Set, 18h Clear)
     These register bits indicate the current values of various signals useful for debugging.
     Table 26. Scratch Register
      Field Name          Bits         Access       Reset                                   Description
                                                             Empty register byte for testing purposes. Software can read, write, set,
     Scratch               7:0         rd/wr/s/c     00h
                                                             and clear this register and the FUSB2805 functionality is not affected.
© 2008 Fairchild Semiconductor Corporation                                                                                 www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                    40


                                                                                                                                         FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Absolute Maximum Ratings
     Stresses exceeding the absolute maximum ratings may damage the device. The device may not function or be
     operable above the recommended operating conditions and stressing the parts to these levels is not recommended.
     In addition, extended exposure to stresses above the recommended operating conditions may affect device
     reliability. The absolute maximum ratings are stress ratings only.
      Symbol                                       Parameter                               Min.        Max.                Unit
                                      (25)      Continuous                                 -0.5        +5.5
         VCC        Supply Voltage                                                                                          V
                                                Pulse                                      -0.5        +5.5
          VIO       I/O Supply Voltage                                                     -0.5        +5.5                 V
                                                Pins: STP, DIR, NXT, D[7:0], CFG1,
                                                                                           -0.5      VIO + 0.5
                                                RESET_N, CLKIN
                                         (26)
          VIN       DC Input Voltage                                                                                        V
                                                Pins: FAULT, Chip_Select_N                 -0.5        +5.5
                                                                                                             (27)
                                                Pins: DP, DM, VBUS                         -0.5        5.5
          IIK       DC Input Diode Current                                                 -50                             mA
          ILU       DC Latch-Up Current                                                    -100                            mA
         TSTG       Storage Temperature                                                    -65         +150                °C
                                       All Pins                                                            6
                    Human Body Model,
                                       I/O to GND                                                          12
                    JEDEC: JESD22-A114
                                       Power to GND                                                        12              kV
         ESD
                    Charged Device Model, JEDEC: JESD22-C101                                               2
                    IEC 61000 Board Level, Air Gap                                                         19
                    Machine Model, JEDEC: JESD22-A115                                                     350               V
     Notes:
     25. VCC is able to withstand short (up to 5 ms) pulses of up to 5.5 V peak voltage.
     26. The input and output negative ratings may be exceeded only if the input and output diode current ratings
         are observed.
     27. VBUS is able to withstand higher voltages using an external series resistance. Target is to withstand >10 V for
         greater than five (5) seconds with a series resistance of 1 kΩ ±5%.
     Recommended Operating Conditions
     The Recommended Operating Conditions table defines the conditions for actual device operation. Recommended
     operating conditions are specified to ensure optimal performance to the datasheet specifications. Fairchild does n ot
     recommend exceeding them or designing to Absolute Maximum Ratings.
       Symbol                                      Parameter                             Min.      Typ.             Max.     Unit
          VCC        Supply Voltage                                                      2.7        3.6             4.5         V
        VCC3V3                                                                         VCC-0.1      3.30            3.60
                     Internal Regulated Supply Voltages                                                                         V
        VDD1V2                                                                           1.08       1.20            1.32
          VIO        I/O Supply Voltage                                                  1.65                       3.60        V
                                                  (28)
                     Input Voltage – Digital I/O
                                                                                          0                         VIO
          VIN        (STP, D[7:0], CFG1, NXT, DIR, FAULT, CLKIN, RESET_N)                                                       V
                     VBUS, Chip_Select_N                                                  0                         5.25
          VAIO       Input Voltage – Analog I/O (DP, DM, ID)                             -0.5                       3.6         V
           TA        Operating Temperature                                               -40        +25             +85         °C
     Note:
     28. The digital inputs must be held HIGH or LOW; they must not float.
© 2008 Fairchild Semiconductor Corporation                                                                           www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                41


                                                                                                                                    FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Static Characteristics
     VCC3V3=VCC-0.1 to 3.6 V; VDD1V2=1.1 V to 1.25 V; VIO=1.65 V to 3.60 V; TJ=-40°C to +85°C; unless otherwise specified.
       Symbol                    Parameter                      Conditions                Min.      Typ.     Max.      Unit
     Supply Pins
                      Power-On Reset Trip
          VPOR                                       Referenced to VDDIO Supply                               1.4        V
                      Voltage
                                                     Full-Speed Data at 12 MHz, 50 pF
                                                                                                     25
                                                     Load
          IVCC        Operating Supply Current       Full-Speed Data at 12 MHz, Idle                 23                mA
                                                     HS Receiving at 480 MHz                         31
                                                     HS Transmitting at 480 MHz                      36
                      Low-Power Mode Supply          Bit SuspendM=0b, CLKIN=LOW,
       IVCC(lowpwr)           (32)                                                                   95       200       µA
                      Current                        PSW De-asserted
                      Current Drawn from VCC in      VIO Off or Chip_Select_N
         IPWRDN                                                                                      22       36        µA
                      Power-Down Mode                De-asserted, No VBUS Present
           IIO        Operating VIO Supply Current 12pF on CLOCK, ULPI Idle                          2.1               mA
                      Static VIO Supply Current in
        IIOPWRDN                                     Chip_Select_N De-asserted                                 2        µA
                      Power-Down Mode
                      Static VIO Supply Current in
         IIOSPND                                     I/O Pins Idle                                             2        µA
                      Suspend Mode (Low-Power)
                      Static VBUS Supply Current in
     IVBUS_SUSPND                                   I/O Pins Idle                                    60       90        µA
                      Suspend Mode (Low-Power)
     Digital Pins (CLOCK, DIR, STP, NXT, D0-D7, RESET_N)
           VIL        LOW Level Input Voltage                                                               0.3•VIO      V
           VIH        HIGH Level Input Voltage                                           0.7•VIO                         V
          VOL         LOW Level Output Voltage       IOL=4 mA                                                 0.4        V
          VOH         HIGH Level Output Voltage      IOH=4 mA                            VIO-0.4                         V
                      Input Pull-Down Current
           IPD                                       VIN=VIO                               25        50       90        µA
                      (Interface Protect – D[7:0])
                      Input Pull-Up Current
           IPU                                       VIN=0 V                               -30       -50      -80       µA
                      (Interface Protect –STP)
     Digital Pins (FAULT)
           VIL        LOW Level Input Voltage                                                                 0.8        V
           VIH        HIGH Level Input Voltage                                             2.0                           V
           IIN        Input Leakage Current                                                 -1                 1        µA
     Digital Pins (PSW)
                      HIGH Level Output Voltage-
        VOHPSW                                       External 100 k Pull-Down to GND      2.6                3.6        V
                      PSW
         IOHPSW       HIGH Level Current-PSW         External 100 k Pull-Down to GND                          4       mA
                                                                                         Continued on the following page…
© 2008 Fairchild Semiconductor Corporation                                                                      www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                42


                                                                                                                                     FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Static Characteristics (Continued)
     VCC3V3=VCC-0.1 to 3.6 V; VDD1V2=1.1 V to 1.25 V; VIO=1.65 V to 3.60 V; TJ=-40°C to +85°C; unless otherwise specified.
       Symbol                         Parameter                          Conditions           Min.     Typ.    Max.     Unit
     Analog I/O Pins (DP, DM)
     FS/LS Path
           VDI         Differential Input Sensitivity          |VDP – VDM|                                      0.2       V
           VCM         Differential Common Mode Voltage        Includes VDI Range              0.8              2.5       V
           VIL         LOW-Level Input Voltage                                                                  0.8       V
           VIH         HIGH-Level Input Voltage                                                2.0                        V
                                                               Pull-Up on DP;
           VOL         LOW-Level Output Voltage                                                 0               0.3       V
                                                               RL=1.5 k to 3.6 V
                                                               Pull-Down on DP/DM;
           VOH         HIGH-Level Output Voltage                                               2.8              3.6       V
                                                               RL=15 k to GND
         VTERM         Termination Voltage for 1.5 kΩ Pull-Up Resistor                         3.0              3.6       V
           RPU         Pull-Up Resistance on DP                Per USB2.0 Resistor ECN        900              1575      
                                                               Bit DP_WKPU_EN=1,
         RWKPU         Weak Pull-Up Resistance on DP                                          105.8   132.0   158.0      k
                                                               VBUS>VA-SESS_VLD
     HS Path
                       High-Speed Squelch Detection            Squelch Detected                                100
         VHSSQ                                                                                                          mV
                       Threshold                               No Squelch Detected            150
         VDSCHS        HS Disconnect Detection Threshold (Differential)                       525              625      mV
          VDIHS        HS Differential Input Sensitivity       |VDP – VDM|                    300                       mV
                       HS Differential Common-Mode
         VCMHS                                                 Includes VDIHS Range            -50             +500     mV
                       Voltage
          VILHS        HS Idle-Level Input Voltage (Differential)                              -10             +10      mV
          VIHHS        HS LOW-Level Input Voltage (Differential)                               -10             +10      mV
          VOLHS        HS HIGH-Level Output Voltage                                           360              440      mV
         VCHIRPJ       Chirp-J Output Voltage (Differential)                                  700              1100     mV
         VCHIRPK       Chirp-K Output Voltage (Differential)                                  -900             -500     mV
           IOZ         Leakage Current                                                         -4               +4       µA
                       Driver Output Impedance (Both HS        Steady-State Conditions per
          ZDRV                                                                                40.5             49.5      
                       and FS)                                 USB2.0
           ZIN         Input Impedance                                                         0.8                      M
           RPD         Pull-Down Resistance on DP, DM          Per USB2.0 Resistor ECN        14.25           24.80      k
           CI/O        Capacitance                             Pin to GND                                       10       pF
     VBUS Comparators
      Vth(VBUSVLD)     VBUS Valid Threshold                                                   4.40             4.75       V
      Vth(SESSEND)     VBUS Session-End Comparator Threshold                                   0.2              0.8       V
      Vhys(SESSEND) VBUS Session-End Comparator Hysteresis                                             150              mV
                       VBUS Session-Valid Comparator
      Vth(SESSVLD)                                             A-Device and B-Device           0.8              2.0       V
                       Threshold
      Vhys(SESSVLD) VBUS Session-Valid Comparator Hysteresis                                           200              mV
                                                                                             Continued on the following page…
© 2008 Fairchild Semiconductor Corporation                                                                       www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                               43


                                                                                                                                    FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Static Characteristics (Continued)
     VCC3V3= VCC-0.1 to 3.6 V; VDD1V2=1.1 V to 1.25 V; VIO=1.65 V to 3.60 V; TJ=-40°C to +85°C; unless otherwise specified.
        Symbol                         Parameter                     Conditions            Min.     Typ.     Max.      Unit
     VBUS Resistors
                                                           Connect to VCC3V3 when
        RVBUS(PU)       VBUS Charge Resistance                                              281                         
                                                           CHRG_VBUS=1
                                                           Connect to GND when
        RVBUS(PD)       VBUS Discharge Resistance                                           656                         
                                                           DISCHRG_VBUS=1
                                                           Not in Power-Down Mode           80        90      100
        RVBUS(IDLE)     VBUS Idle Impedance                Chip Select De-assserted                                     k
                                                                                            40                100
                                                           or VIO Lost
     ID Detection Circuit (ID)
            tID         ID Detection Time                                                   50                          ms
          RID_PU        ID Pull-Up Resistance              Bit ID_PULL_UP=1                 40        50       60       k
        RID_PU_WK       Weak ID Pull-Up Resistance         Bit ID_PULL_UP=0                 320      400      480       k
          VPU_ID        ID Pull-Up Reference                                                3.0      3.3      3.6        V
          VTH_ID        ID Threshold                                                        1.0               2.0        V
     External Resistor Reference
                        Voltage Across External RREF
          VRREF                                            SUSPENDM Bit=HIGH                         0.8                 V
                        (12 kΩ ±1%)
     Reset
                                                           CLKIN Running,
                                                                                                              850       µs
                        PHY Clock Startup when Remote      Autoresume=0
       tSTART_HOST
                        Wake-up Event Occurs               CLKIN Must be Started
                                                                (30)                                         110.9      µs
                                                           First , Autoresume=1
     Clock Input
                                                (31)       USB Config 0                              19.2
           fCLKIN       Input Clock Frequency                                                                          MHz
                                                           USB Config 1                              26.0
          JCLKIN        RMS Jitter                                                                            200       ps
          CLKIN        Duty Cycle                                                                    50                %
          VCLKIN        Amplitude                                                                    1.8                 V
         tR_CLKIN,
                        Rise and Fall Time                                                                     5        ns
          tF_CLKIN
     Output CLOCK Characteristics
                                                           Active Only When a Clock
        fCLK60_OUT      Output Clock Frequency                                                        60               MHz
                                                           is Input on CLKIN
        JCLK60_OUT      RMS Output Jitter                                                                     500       ps
        CLK60_OUT      Duty Cycle                                                                    50                %
                                                           CLOCK Pin Transitioning
         tR_CLK60       Rise Time                          from 10% to 90% of VIO           1.0               4.0       ns
                                                           (CL 4 – 12 pF)
                                                           CLOCK Pin Transitioning
         tF_CLK60       Fall Time                          from 90% to 10% of VIO           1.0               4.4       ns
                                                           (CL 4 – 12 pF)
                                                           Measured from Power
          tstartPLL     Startup (PLL Stabilization) Time                                                      640       µs
                                                           Good or Assertion of STP
     Notes:
     29. Excludes suspend current through 15 k host pull-down when configured as a peripheral controller. Typically an
         additional 200 µA is allowed.
     30. Time for CLKIN to be woken up is a function of external system timing, so Autoresume is needed for remote
         wake-up capability (please see Figure 18).
     31. An external clock is to be applied to the CLKIN pin. Recommended frequency accuracy is 200 ppm.
© 2008 Fairchild Semiconductor Corporation                                                                      www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                           44


                                                                                                                                       FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Dynamic Characteristics
     VCC3V3= VCC-0.1 to 3.6 V; VDD1V2=1.1 V to 1.25 V; VIO=1.65 V to 3.60 V; TJ=-40°C to +85°C; unless otherwise specified.
        Symbol                       Parameter                    Conditions                 Min.    Typ.    Max.        Unit
     Output CLOCK Characteristics
                                                        Active Only When a Clock is
        fCLK60_OUT       Output Clock Frequency                                                       60                 MHz
                                                        Input on CLKIN
        JCLK60_OUT       RMS Output Jitter                                                                    500         ps
        CLK60_OUT       Duty Cycle                                                                   50                   %
                                                        CLOCK Pin Transitioning from
          tR_CLK60       Rise Time                                                            1.0             4.0         ns
                                                        10% to 90% of VIO (CL – 4-12 pF)
                                                        CLOCK Pin Transitioning from
          tF_CLK60       Fall Time                                                            1.0             4.4         ns
                                                        90% to 10% of VIO (CL - 4-12 pF)
                         Startup (PLL Stabilization)    Measured from Power Good or
          tstartPLL                                                                                           640         µs
                         Time                           Assertion of STP
     Regulator Characteristics
                                                        4.7 µF ±20% Decoupling on
         tregPWRUP       Regulator Power-Up Time                                                              1.2         ms
                                                        VCC3V3 and VDD1V2
                                                        4.7 µF ±20% Decoupling on
         tregPWRDN       Regulator Power-Down Time                                                            100         ms
                                                        VCC3V3 and VDD1V2
     Digital I/O Pins
            CIN          Pin Input Capacitance          Input-only Pins, (STP, RESET_N)       2.7     3.0     3.5         pF
                                                        Bi-directional Pins as Input
          CIN_BIDI       Pin Input Capacitance                                                2.7     3.0     3.5         pF
                                                        (CLK, D0-D7)
                                                        Output (Digital) Pins (NXT, DIR,
           COUT          Pin Output Capacitance                                               2.7     3.0     3.5         pF
                                                        CLKOUT)
     ULPI Interface Single Data Rate (SDR) Timing
                                                        Input-only Pins
                         Setup Time with Respect to     (STP) & Bi-       Output
            tSU                                                                                6                          ns
                         Positive Edge of Clock         directional Pins  60 MHz Clock
                                                        (D0-D7) as Inputs
                                                        Input-only Pins
                         Hold Time with Respect to      (STP) & Bi-       Output
            tHD                                                                                0                          ns
                         Positive Edge of Clock         directional Pins  60 MHz Clock
                                                        (D0-D7) as Inputs
                                                                            Output
                                                                            60 MHz
                         Output Delay with Respect to   Output-only Pins
            tDC                                                             Clock, 12 pF                       9          ns
                         Positive Edge of Clock         (DIR, NXT)
                                                                            on all ULPI
                                                                            pins
                                                                            Output
                                                        Bi-directional      60 MHz
                         Output Delay with Respect to
            tDD                                         Pins as Output      Clock, 12 pF                       9          ns
                         Positive Edge of Clock
                                                        (D0-D7)             on all ULPI
                                                                            pins
                                                        Transitioning from 10% to 90% of
            trise        Rise Time                                                            1.0             5.0         ns
                                                        VIO (CL – 4-12 pF)
                                                        Transitioning from 90% to 10% of
            tfall        Fall Time                                                            1.0             5.0         ns
                                                        VIO (CL – 4-12 pF)
                                                                                           Continued on the following page…
© 2008 Fairchild Semiconductor Corporation                                                                         www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                            45


                                                                                                                                    FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Dynamic Characteristics (Continued)
     VCC3V3= VCC-0.1 to 3.6 V; VDD1V2=1.1 V to 1.25 V; VIO=1.65 V to 3.60 V; TJ=-40°C to +85°C; unless otherwise specified.
      Symbol                      Parameter                          Conditions                 Min.    Typ.    Max. Unit
     ULPI Interface Exiting and Entering Low-Power Mode
                                                       From DIR LH Transition-to-CLOCK
         tCS      Entering Low-Power Mode Time                                                          0.145            µs
                                                       Stop (6 Cycles Minimum)
                                             (32)      From DIR LH Transition STP to LH
         tSTP     Low-Power Mode Delay                                                                    2              µs
                                                       Transition
                  Exiting Low-Power Mode               From STOP LH Transition to DIR HL
         tWU                                                                                             111             µs
                  (Total Wake-Up Time)                 Transition
                  Exiting Low-Power Mode               From STOP LH Transition-to-Clock
        tCWU                                                                                            110.9            µs
                  (Clock Wake-Up Time)                 Start
                  Exiting Low-Power Mode               From Clock Start-to-DIR HL Transition
         tCD                                                                                              97             ns
                  (Clock-to-DIR)                       (6 Clock Cycles)
     Analog I/O Pins
     High-Speed Driver Characteristics
        tHSR      Differential Rise Time                                                         500                     ps
        tHSF      Differential Fall Time                                                         500                     ps
     Full-Speed Driver Characteristics
         tFR      Rise Time                            CL=50 pF; 10 to 90% of |VOH –VOL|          4               20     ns
         tFF      Fall Time                            CL=50 pF; 10 to 90% of |VOH –VOL|          4               20     ns
                  Differential Rise Time /             Excluding First Transition from Idle
       FRFM                                                                                      90.0           111.1     %
                  Fall Time Matching                   State
                                                       Excluding First Transition from Idle
        VCRS      Output Signal Crossover Voltage                                                1.3             2.0      V
                                                       State
                                                       CL=200pF to 600pF; 1.5 kΩ pull up on
         tLR      Rise Time                                                                       75             300     ns
                                                       D- enabled; 10 to 90% of |VOH –VOL|
                                                       CL=200pF to 600pF; 1.5 kΩ pull up on
         tLF      Fall Time                                                                       75             300     ns
                                                       D- enabled; 10 to 90% of |VOH –VOL|
                  Differential Rise Time / Fall        Excluding First Transition from Idle
       LRFM                                                                                      80.0            125      %
                  Time Matching                        State
     Serial Mode Driver Timing
                  Driver Serial Mode Propagation
       tPLHDS                                          TX_DAT [D1], TX_SE0 [D2] to D+/D-                          20     ns
                  Delay (LOW to HIGH)
                  Driver Serial Mode Propagation
       tPHLDS                                          TX_DAT [D1], TX_SE0 [D2] to D+/D-                          20     ns
                  Delay (HIGH to LOW)
      tPHZLZDS    Driver Serial Mode Disable Delay     TX_ENABLE [D0] to D+/D-                                    12     ns
      tPZHZLDS    Driver Serial Mode Enable Delay      TX_ENABLE [D0] to D+/D-                                    20     ns
                                                                                         Continued on the following page…
© 2008 Fairchild Semiconductor Corporation                                                                      www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                           46


                                                                                                                                    FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Dynamic Characteristics (Continued)
     VCC3V3= VCC-0.1 to 3.6 V; VDD1V2=1.1 V to 1.25 V; VIO=1.65 V to 1.95 V; TJ=-40°C to +85°C; unless otherwise specified.
      Symbol                      Parameter                          Conditions                  Min. Typ. Max. Unit
     Serial Mode Receiver Timing
                   Receiver Serial Mode Propagation
        tPLHRS                                         D+/D- to RX_RCV [D6]                                       20     ns
                   Delay (LOW to HIGH)
                   Receiver Serial Mode Propagation
        tPHLRS                                         D+/D- to RX_RCV [D6]                                       20     ns
                   Delay (HIGH to LOW)
                   Single Ended VP Serial Mode
        tPLHPS                                         D+ to RX_DP [D4]                                           20     ns
                   Propagation Delay (LOW to HIGH)
                   Single Ended VP Serial Mode
        tPHLPS                                         D+ to RX_DP[D4]                                            20     ns
                   Propagation Delay (HIGH to LOW)
                   Single Ended VM Serial Mode
        tPLHMS                                         D- to RX_DM [D5]                                           20     ns
                   Propagation Delay (LOW to HIGH)
                   Single Ended VM Serial Mode
        tPHLMS                                         D- to RX_DM [D5]                                           20     ns
                   Propagation Delay (HIGH to LOW)
     Note:
     32. This parameter is guaranteed by design.
© 2008 Fairchild Semiconductor Corporation                                                                      www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                           47


                                                                                                                                                      FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
     Physical Dimensions
                                                                                                                   5.25 MIN
                                                                                                                    (3.75)
                      0.15 C                                                                                      3.10 MAX
                                           5.10                                                                                   (0.60 )
                                                                    B
               (2X)                        4.90
                                                                        A                                                                (0.48 )
                                                                                            5.25 MIN
                                                                     5.10
                                                                     4.90                        (3.75 )                              3.10 MAX
        PIN #1 IDENT
                                                                                                                                       (0.21 )
                                                                                                                                       X4
                                                                                 0.15 C
                                                                         (2X)
                                          TOP VIEW                                                0.28 MAX          0.50
                                                                                                  X32
                                                                                                           RECOMMENDED LAND PATTERN
                             0.80 MAX
            0.10 C                                                      (0.20)
      32X
         0.08 C 0.05
                                                                            C
                0.00
      SEATING PLANE                       SIDE VIEW
                                                                                    NOTES:
                                             3.20                                   A. EXCEPT WHERE NOTED, CONFORMS TO JEDEC REGISTRATION
                                             3.00                                      MO-220, VARIATION WHHD-6.
                                                                 A                  B. DIMENSIONS ARE IN MILLIMETERS.
                                                                        0.50
                                                                        0.30        C. DIMENSIONS AND TOLERANCES PER ASME Y14.5M-1994.
          PIN #1 IDENT               1                 8                            D. LAND PATTERN PER IPC SM-782.
                                                                                    E. DIMENSIONS ARE NOT INCLUSIVE OF BURRS, MOLD FLASH, OR
                         32                    49               9                      TIE BAR PROTRUSIONS.
                                              0.
                                                                                    F. DRAWING FILENAME: MKT-MLP32Brev1.
                      0.50
                                                                     3.20
                                                                     3.00
       (DATUM B)
                                                                                (DATUM A)
                         25                                     16
                                    24                     17     32X
                                                                0.18-0.30
                             0.50                                     0.10          C A B
                                                                      0.05          C
                                         BOTTOM VIEW
                                           Figure 23.       32-Lead, Molded Leadless Package (MLP)
     Package drawings are provided as a service to customers considering Fairchild components. Drawings may change in any manner
     without notice. Please note the revision and/or date on the drawing and contact a Fairchild Semiconductor representative to verify
     or obtain the most recent revision. Package specifications do not expand the terms of Fairchild’s worldwide terms and conditions,
     specifically the warranty therein, which covers Fairchild products.
     Always visit Fairchild Semiconductor’s online packaging area for the most recent package drawings:
     http://www.fairchildsemi.com/dwg/ML/MLP32B.pdf.
© 2008 Fairchild Semiconductor Corporation                                                                                        www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                                                               48


                                                                      FUSB2805 — USB2.0 High-Speed OTG Transceiver with ULPI Interface
© 2008 Fairchild Semiconductor Corporation        www.fairchildsemi.com
FUSB2805 • Rev. 1.0.3                        49


  ON Semiconductor and            are trademarks of Semiconductor Components Industries, LLC dba ON Semiconductor or its subsidiaries in the United States and/or other countries.
  ON Semiconductor owns the rights to a number of patents, trademarks, copyrights, trade secrets, and other intellectual property. A listing of ON Semiconductor’s product/patent
  coverage may be accessed at www.onsemi.com/site/pdf/Patent−Marking.pdf. ON Semiconductor reserves the right to make changes without further notice to any products herein.
  ON Semiconductor makes no warranty, representation or guarantee regarding the suitability of its products for any particular purpose, nor does ON Semiconductor assume any liability
  arising out of the application or use of any product or circuit, and specifically disclaims any and all liability, including without limitation special, consequential or incidental damages.
  Buyer is responsible for its products and applications using ON Semiconductor products, including compliance with all laws, regulations and safety requirements or standards,
  regardless of any support or applications information provided by ON Semiconductor. “Typical” parameters which may be provided in ON Semiconductor data sheets and/or
  specifications can and do vary in different applications and actual performance may vary over time. All operating parameters, including “Typicals” must be validated for each customer
  application by customer’s technical experts. ON Semiconductor does not convey any license under its patent rights nor the rights of others. ON Semiconductor products are not
  designed, intended, or authorized for use as a critical component in life support systems or any FDA Class 3 medical devices or medical devices with a same or similar classification
  in a foreign jurisdiction or any devices intended for implantation in the human body. Should Buyer purchase or use ON Semiconductor products for any such unintended or unauthorized
  application, Buyer shall indemnify and hold ON Semiconductor and its officers, employees, subsidiaries, affiliates, and distributors harmless against all claims, costs, damages, and
  expenses, and reasonable attorney fees arising out of, directly or indirectly, any claim of personal injury or death associated with such unintended or unauthorized use, even if such
  claim alleges that ON Semiconductor was negligent regarding the design or manufacture of the part. ON Semiconductor is an Equal Opportunity/Affirmative Action Employer. This
  literature is subject to all applicable copyright laws and is not for resale in any manner.
PUBLICATION ORDERING INFORMATION
LITERATURE FULFILLMENT:                                                     N. American Technical Support: 800−282−9855 Toll Free               ON Semiconductor Website: www.onsemi.com
 Literature Distribution Center for ON Semiconductor                         USA/Canada
 19521 E. 32nd Pkwy, Aurora, Colorado 80011 USA                             Europe, Middle East and Africa Technical Support:                   Order Literature: http://www.onsemi.com/orderlit
 Phone: 303−675−2175 or 800−344−3860 Toll Free USA/Canada                    Phone: 421 33 790 2910
 Fax: 303−675−2176 or 800−344−3867 Toll Free USA/Canada                     Japan Customer Focus Center                                         For additional information, please contact your local
 Email: orderlit@onsemi.com                                                  Phone: 81−3−5817−1050                                              Sales Representative
© Semiconductor Components Industries, LLC                                         www.onsemi.com                                                                              www.onsemi.com
                                                                                                1


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
ON Semiconductor:
 FUSB2805MLX
