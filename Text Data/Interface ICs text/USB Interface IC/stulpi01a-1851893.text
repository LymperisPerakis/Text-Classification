                                                                  STULPI01A, STULPI01B
                                                 High-speed USB On-The-Go ULPI transceiver
                                                                                           Datasheet − production data
Features
■   USB-IF high-speed certified to the universal
    serial bus specification rev. 2.0
■   Meets the requirements of the universal serial
    bus specification rev. 2.0, On-The-Go
    supplement to the USB 2.0 specification 1.0a
    and ULPI transceiver specification 1.1
■   Standard ULPI (UTMI+ low pin interface) 1.1                                         µTFBGA36
    digital interface
■   Fully compliant with ULPI 1.1 register set
■   External square wave clock with VDVIO
    amplitude must be applied to oscillator input XI
                                                                  Applications
■   Supports 480 Mbit/s High-speed, 12 Mbit/s                     ■   Mobile phones
    Full-speed and 1.5 Mbit/s Low-speed modes of                  ■   PDAs
    operation
                                                                  ■   MP3 players
■   Supports 2.7 V UART mode
                                                                  ■   Digital still cameras
■   Supports session request protocol (SRP) and
                                                                  ■   Set-top box
    host negotiation protocol (HNP) for dual-role
    device features                                               ■   Portable navigation devices
■   Ability to control external charge pump for
    higher VBUS currents                                          Description
■   Single supply, +3 V to +4.5 V voltage range                   The STULPI01 is a high-speed USB 2.0
■   Integrated dual voltage regulator to supply                   transceiver compliant with ULPI (UTMI+ low pin
    internal circuits with stable 3.3 V and 1.2 V                 interface) and OTG (On-The-Go) specifications,
■   Integrated overcurrent detector                               providing a complete physical layer solution for
                                                                  any high-speed USB host, device or OTG dual-
■   Integrated HS termination and FS/LS/OTG                       role core. It allows USB ASICs to interface with
    pull-up/pull-down resistors                                   the physical layer of the USB through a 12-pin
■   Integrated USB 2.0 “short-circuit withstand”                  interface. It contains VBUS comparators, an ID
    protection                                                    line detector, USB differential drivers and
■   Power-down mode with very low-power                           receivers and a complete ULPI register map and
    consumption for battery-powered devices                       interrupt generator. The STULPI01 transceiver is
                                                                  suitable for mobile applications and battery-
■   Ideal for system ASICs with built-in USB host,                powered devices because of its low-power
    device or OTG cores                                           consumption, Power-down operating mode and
■   Available in µTFBGA36 RoHS package                            minimal die/package dimensions.
■   –40 to 85 °C operating temperature range
June 2012                                              Doc ID 14817 Rev 4                                          1/44
This is information on a product in full production.                                                          www.st.com 1


Contents                                                                                    STULPI01A, STULPI01B
Contents
1        Application diagrams . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
2        Bump configuration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
3        Maximum ratings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
4        Electrical characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
5        Timing diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
6        Block description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
         6.1    Oscillator and PLL . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
         6.2    Voltage reference . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
         6.3    Power-on reset (POR) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
         6.4    UTMI + CORE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
         6.5    ULPI wrapper . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
         6.6    External charge pump . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
         6.7    VBUS comparators and VBUS overcurrent (OC) detector . . . . . . . . . . . . 19
         6.8    VB_REF_FAULT pin . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
         6.9    Voltage regulator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
         6.10   ID detector . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
         6.11   USB 2.0 PHY . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
         6.12   Power saving features . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
         6.13   Modes of operation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
                6.13.1   ULPI synchronous mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
                6.13.2   6-pin FS/LS serial mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
                6.13.3   3-pin FS/LS serial mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
         6.14   Car Kit (UART) mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
         6.15   Low-power mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
         6.16   Power-down mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
2/44                                    Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                                                 Contents
          6.17   VIO OFF mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
          6.18   Startup procedure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
                 6.18.1   ULPI device detection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
                 6.18.2   SDR mode selection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
                 6.18.3   External clock detection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
                 6.18.4   Reset behavior . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
                 6.18.5   Interface protection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
                 6.18.6   Software reset . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
                 6.18.7   High-speed mode entry . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
7         State transitions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
8         ULPI registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
9         Package mechanical data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
10        Order codes      . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
11        Revision history . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
                                          Doc ID 14817 Rev 4                                                                   3/44


List of tables                                                                                              STULPI01A, STULPI01B
List of tables
Table 1.     Bill of materials - external components . . . . . . . . . . . . . . . . . . . . . . .             ....... ...... .....6
Table 2.     Pinout and bump description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .           ....... ...... .....7
Table 3.     Absolute maximum ratings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .          ....... ...... .....9
Table 4.     Thermal data. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ....... ...... .....9
Table 5.     Recommended operating conditions . . . . . . . . . . . . . . . . . . . . . . . .                  ....... ...... .....9
Table 6.     Electrical characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    ....... ...... . . . . 10
Table 7.     Switching characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       ....... ...... . . . . 14
Table 8.     High-speed driver eye pattern . . . . . . . . . . . . . . . . . . . . . . . . . . . . .           ....... ...... . . . . 16
Table 9.     VB_REF_FAULT configuration bit settings. . . . . . . . . . . . . . . . . . . .                    ....... ...... . . . . 20
Table 10.    Car kit signals mapping . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       ....... ...... . . . . 22
Table 11.    Low-power mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .      ....... ...... . . . . 23
Table 12.    USB state transitions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     ....... ...... . . . . 28
Table 13.    ULPI register map overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .          ....... ...... . . . . 30
Table 14.    Register access legend . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .        ....... ...... . . . . 30
Table 15.    Vendor and product ID . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       ....... ...... . . . . 31
Table 16.    Power control register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    ....... ...... . . . . 31
Table 17.    Function control register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     ....... ...... . . . . 32
Table 18.    Interface control register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    ....... ...... . . . . 33
Table 19.    OTG control register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    ....... ...... . . . . 34
Table 20.    USB interrupt enable rising register . . . . . . . . . . . . . . . . . . . . . . . . .            ....... ...... . . . . 35
Table 21.    USB interrupt enable falling register . . . . . . . . . . . . . . . . . . . . . . . . .           ....... ...... . . . . 36
Table 22.    USB interrupt status register. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .        ....... ...... . . . . 36
Table 23.    USB interrupt latch register. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       ....... ...... . . . . 37
Table 24.    Setting rules for interrupt latch register . . . . . . . . . . . . . . . . . . . . . . .          ....... ...... . . . . 37
Table 25.    Debug register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  ....... ...... . . . . 38
Table 26.    Scratch register. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ....... ...... . . . . 38
Table 27.    Car kit control register. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   ....... ...... . . . . 38
Table 28.    µTFBGA36 mechanical data. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .             ....... ...... . . . . 40
Table 29.    Tape and reel µTFBGA36 mechanical data . . . . . . . . . . . . . . . . . . .                      ....... ...... . . . . 41
Table 30.    Order codes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ....... ...... . . . . 42
Table 31.    Document revision history . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .         ....... ...... . . . . 43
4/44                                                Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                                                      List of figures
List of figures
Figure 1.  Peripheral only, configuration with external clock . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
Figure 2.  Pin connections . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
Figure 3.  High-speed driver eye pattern . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
Figure 4.  Rise and fall time . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
Figure 5.  Simplified block diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
Figure 6.  VB_REF_FAULT pin functionality. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
Figure 7.  USB 2.0 PHY block diagram. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
Figure 8.  Startup sequence . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
Figure 9.  RESETn behavior . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
Figure 10. High-speed mode entry . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
Figure 11. UART mode entry (2.7 V) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
Figure 12. UART mode exit (2.7 V) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
Figure 13. µTFBGA36 package outline . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
Figure 14. Tape and reel µTFBGA36 package outline . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41
                                                 Doc ID 14817 Rev 4                                                                         5/44


Application diagrams                                                                                        STULPI01A, STULPI01B
1                Application diagrams
Figure 1.        Peripheral only, configuration with external clock
                                   C                        C
                                     F3                      F2
                          CF4                                                               Battery
                                                                                            voltage
                                  VDVIO       3V3V 1V2V
                                                            VBAT
                                  VDVIO                        XI                                    CF1
                                  VDVIO                           open       External clock
                                                             XO
                                                                  or ground 19.2/26 MHz
                       CF4
                                                                             VDVIO amplitutde
         High-speed                                                                                                   Mini-B
                                  CLK                         ID
         USB-OTG
                                  DIR                         DP                                                     D+
          controller
                                  STP                        DM                                                      D-
                                  NXT                      VBUS                                                      VBUS
                                  D[0]...D[7]                       RBUS                                             GND
                                                                          C
                                                                            T
                                  RESETn                                RREF
                                  CSn / PWRDN              RREF
                                                                                                    E1          E2
                   GND                                     PSWn
                                                    VB_REF_FAULT
                                   5x GND
                                                                                                                             AM04944v2
Table 1.         Bill of materials - external components
       Qty.                   Symbol                     Value                                           Description
                                                                            Filtering capacitor. Suggested components:
                                                                            Murata 10 V X5R (GRM188R61A105KA61) or
          1                     CF1                    0.1 - 1 µF
                                                                            Murata 10 V Y5V (GRM188F51A105ZA01) or
                                                                            TAIYO YUDEN 25 V X5R (TMK107BJ105KA)
                                                                            Filtering capacitor. Suggested components:
                                                                            Murata 10 V X5R (GRM188R61A105KA61) or
          2                     CF4                    0.1 - 1 µF
                                                                            Murata 10 V Y5V (GRM188F51A105ZA01) or
                                                                            TAIYO YUDEN 25 V X5R (TMK107BJ105KA)
                                                                            Filtering capacitor. Suggested components:
                                                                            Murata 10 V X5R (GRM188R61A105KA61) or
          1                     CF2                  1 µF - 1.5 µF
                                                                            Murata 10 V Y5V (GRM188F51A105ZA01) or
                                                                            TAIYO YUDEN 25 V X5R (TMK107BJ105KA)
                                                                            Filtering capacitor. Suggested components:
          1                     CF3                    1 - 4.7 µF           Murata 10 V Y5V (GRM188F51A475ZE20) or
                                                                            TAIYO YUDEN 6.3 V X5R (JMK107BJ475KA)
          1                     CT                       4.7 µF             Tank capacitor
          1                    RREF                      12 kΩ              Reference resistor ±1%
          1                     E1                                          USBULC6-2F3
          1                     E2                                          ESDA14V2-2BF3
          1                    RBUS                      2.2 kΩ             Series overvoltage protection resistor
6/44                                                  Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                          Bump configuration
2           Bump configuration
Figure 2.   Pin connections
            1     2   3    4     5     6
                                                                  F     NC     NC   VBAT  T VBUS     XI    XO
      A
                                                                             VB_REF
                                                                  E    GND   _FAULT  3V3V    GND    DIR   1V2V
      B
                                                                  D     DP    GND      ID   PSWn    NXT   STP
      C
                                                                                      CSn/
                                                                  C    DM    RREF   PWRDN
                                                                                            RESETn GND     D7
      D
                                                                              1V8
                                                                              V     V1V8           V1V8
                                                                  B     D0     DVIO    DVIO  GND
                                                                                             GND     DVIO  D6
      E                                                                       VIO     VIO           VIO
                                                                  A     D1     D2       D3   CLK    D4     D5
      F
                                                                         1      2      3      4      5      6
          µTFBGA36 (through top side view)                                µTFBGA36 (bottom view)
                                                                                                               AM04945v1
Table 2.    Pinout and bump description
   Bump        Symbol      Type                                     Description
    B1           D0          I/O   Data bit [0] (VDVIO referred). UART TXD signal.
    A1           D1          I/O   Data bit [1] (VDVIO referred). UART RXD signal.
    A2           D2          I/O   Data bit [2] (VDVIO referred). UART reserved pin.
    A3           D3          I/O   Data bit [3] (VDVIO referred). UART active high interrupt indication.
    A4           CLK          O    Clock out (VDVIO referred)
    A5           D4          I/O   Data bit [4] (VDVIO referred)
    A6           D5          I/O   Data bit [5] (VDVIO referred)
    B6           D6          I/O   Data bit [6] (VDVIO referred)
    C6           D7          I/O   Data bit [7] (VDVIO referred)
    D6           STP           I   ULPI stop signal (VDVIO referred)
    D5           NXT          O    ULPI next signal (VDVIO referred)
    E5           DIR          O    ULPI direction signal (VDVIO referred)
    C3       CSn/PWRDN         I   Chip select active low, power-down active high
    C4         RESETn          I   Active low asynchronous reset
    D1           DP          I/O   Positive data line of the USB. 5 V tolerant.
    C1           DM          I/O   Negative data line of the USB. 5 V tolerant.
    D3            ID           I   ID pin of the USB connector for initial device role selection. 5 V tolerant.
    F4          VBUS         I/O   VBUS line of the USB interface, requires an external capacitor of 4.7 µF.
                                           Doc ID 14817 Rev 4                                                       7/44


Bump configuration                                                           STULPI01A, STULPI01B
Table 2.  Pinout and bump description (continued)
   Bump      Symbol     Type                                  Description
     F1        NC            Not connected
     F2        NC            Not connected.
                             Voltage reference for internal OC detector input or digital input from
     E2   VB_REF_FAULT     I
                             external OC detector (V3V3V referred). 5 V tolerant.
     D4       PSWn        O  External charge pump control, active low. 5 V tolerant, open drain.
     F5         XI         I External clock input (VDVIO referred).
     F6        XO         O  XO pin must be left floating or grounded (crystal is not supported).
                             Battery power input for the LDO (3 V – 4.5 V). Bypass VBAT to GND with
     F3       VBAT      PWR
                             a 1 µF capacitor.
     E3       3V3V      PWR 3.3 V LDO output. Bypass 3V3V to GND with a 1.5 µF capacitor.
     E6       1V2V      PWR 1.2 V LDO output. Bypass 1V2V to GND with a 1.5 µF capacitor.
     C2       RREF       I/O Reference resistor (12 kΩ ±1%)
                             Digital I/O supply voltage. Bypass each VDVIO to GND with
 B2/B3/B5     VDVIO     PWR
                             a 100 nF-1 μF capacitor. Balls B2-B5 can share common capacitor.
   C5/D2      GND       PWR Ground
 B4/E4/E1     GND       PWR Ground
8/44                                  Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                       Maximum ratings
3           Maximum ratings
Table 3.    Absolute maximum ratings
  Symbol                                    Parameter                                        Value       Unit
   VDVIO  Digital I/O supply voltage                                                     -0.3 to +4.0      V
   V1V2   Digital core supply voltage (provided internally by LDO)                       -0.3 to +1.4      V
   V3V3   Analog supply voltage (provided internally by LDO)                             -0.3 to +4.0      V
   VBAT   Battery supply voltage                                                         -0.3 to +7.0      V
          DC voltage on digital pins (CLK, DIR, STP, NXT, D[0-7], RESETn, XI,
  VDCDIG                                                                                 -0.3 to +4.0      V
          CSn/PWRDN)
 VDCVBUS DC voltage on 5 V tolerant pins (VBUS,VB_REF_FAULT, DP, DM, ID)                 -0.3 to +5.5      V
   TSTG   Storage temperature range                                                      -40 to +125      °C
 VESD-HBM Electrostatic discharge voltage on all pins (according to JESD22-A114-B)            ±2.0        kV
Note:       Absolute maximum ratings are those values above which damage to the device may occur.
            Functional operation under these conditions is not implied. All voltages are referenced to
            GND.
Table 4.    Thermal data
  Symbol                                    Parameter                                       Value         Unit
   RthJA  Thermal resistance junction-ambient (simulated value as per JEDEC JSD51)           113.8       °C/W
   RthJC  Thermal resistance junction-case (simulated value as per JEDEC JSD51)                47        °C/W
   RthJB  Thermal resistance junction-base (simulated value as per JEDEC JSD51)               66.2       °C/W
Table 5.    Recommended operating conditions
  Symbol                               Parameter                               Min.     Typ.       Max.  Unit
   VBAT   Battery supply voltage                                                3.0      3.6        4.5     V
   VDVIO  Digital I/O supply voltage                                            1.65    1.80        3.6     V
    TA    Operating temperature range                                           -40                 +85    °C
    CT    Tank capacitor                                                          1      4.7        6.5    µF
   RREF   External reference resistor                                          11.88      12       12.12   kΩ
          External square wave (01A, 01B versions)                                   19.2 or 26          MHz
   XTAL
          Recommended rise/fall time                                                     4                 ns
                                              Doc ID 14817 Rev 4                                            9/44


Electrical characteristics                                                 STULPI01A, STULPI01B
4            Electrical characteristics
Table 6.     Electrical characteristics
   Symbol              Parameter               Test conditions(1)    Min.  Typ.     Max.     Unit
 Power consumption
                                         Active mode (USB bus idle)          15              mA
                                         Active mode (FS
                                         transmission, 12 Mb/s                       30      mA
                                         traffic)
                                         Active mode (HS
                                                                                     50      mA
                                         transmission)
                                         Suspend mode (not
      IBAT     Supply current
                                         including DP pull-up
                                                                            120               µA
                                         current, external clock
                                         stopped)
                                         UART mode (no
                                                                             15              mA
                                         transmission)
                                         Power-down mode                    0.4       2       µA
                                         VIO OFF mode (VDVIO = 0)           0.4       2       µA
               ULPI bus supply current   Power-down mode                    0.1      10       µA
     IDVIO
               VDVIO                     Active mode, 4 pF load             1.8              mA
 Logic inputs and outputs
    CULPIIN    ULPI port I/O capacitance                                    2.4      3.5      pF
               High level output voltage                            VDVIO
      VOH                                IOH = -2 mA                                          V
               (ULPI bus)                                           -0.15
               Low level output voltage
      VOL                                IOL = +2 mA                                0.15      V
               (ULPI bus)
               High level output leakage VOH_PSWn = 3.3 V power
  IOZH_PSWn                                                                          1.0      µA
               (PSWn)                    switch disabled
               Low level output voltage  IOL = +2 mA power switch
  VOL_PSWn                                                                          0.15      V
               (PSWn)                    enabled
               High level input voltage                             0.65 x
      VIH                                                                                     V
               (ULPI port and RESETn)                               VDVIO
               Low level input voltage
       VIL                                                                      0.35 x VDVIO  V
               (ULPI port and RESETn)
               High level input leakage
       IIH                               VIH = VDVIO -0.2 V                         ±1.0      µA
               current
10/44                                       Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                             Electrical characteristics
Table 6.     Electrical characteristics (continued)
    Symbol             Parameter                 Test conditions         Min.     Typ.       Max.     Unit
              Low level input leakage cur-
       IIL                                 VIL = 0.2 V                                       ±1.0      µA
              rent
              High level input voltage
     VPDH                                  VBAT = 3.0 V to 4.5 V         1.4                           V
              (CSn/PWRDN pin)
              Low level input voltage
     VPDL                                  VBAT = 3.0 V to 4.5 V                              0.4      V
              (CSn/PWRDN pin)
              High level input leakage
      IPDH                                 VPD = 1.4 V, VBAT = 4.5 V                         ±1.0      µA
              current (CSn/PWRDN pin)
              Low level input leakage
      IPDL                                 VPD = 0.4 V, VBAT = 4.5 V                         ±1.0      µA
              current (CSn/PWRDN pin)
              High level input voltage
    VFAULTH                                Overcurrent_PD bit is set 0.65 x V3V3                       V
              (VB_REF_FAULT pin)
              Low level input voltage
    VFAULTL                                Overcurrent_PD bit is set                     0.15 x V3V3   V
              (VB_REF_FAULT pin)
              VB_REF_FAULT pin input
  RIN_VB_REF                                                             112       148       168       kΩ
              resistance
              External clock input
 VXI_HYST_EXT                              XO = ‘0’ at reset                       500                mV
              hysteresis
              High level input voltage                                  0.65 x
      VXIH                                 XO = ‘0’ at reset                                           V
              (XI pin)                                                  VDVIO
              Low level input voltage
      VXIL                                 XO = ‘0’ at reset                             0.15 x VDVIO  V
              (XI pin)
 VBUS
  VBUS_LKG    VBUS leakage voltage         No load                                           200      mV
     RVBUS    VBUS input impedance                                        40                 100       kΩ
              VBUS valid comparator
   VBUS_VLD                                1 kΩ series resistors         4.4      4.75                 V
              threshold
              Session valid comparator     Low to high transition        0.8      1.45        2.0      V
  VSESS_VLD   threshold for both A and B
              device                       High to low transition                 1.25                 V
              Session end comparator
  VSESS_END                                                              0.2                  0.8      V
              threshold
              VBUS charge pull-up
  RVBUS_PU                                                               650       950       1150       Ω
              resistance
              VBUS discharge pull-down
  RVBUS_PD                                                               800      1250       1500       Ω
              resistance
                                             Doc ID 14817 Rev 4                                       11/44


Electrical characteristics                                                   STULPI01A, STULPI01B
Table 6.      Electrical characteristics (continued)
    Symbol              Parameter                 Test conditions      Min.  Typ.      Max.     Unit
 Overcurrent detector
               Overcurrent trip threshold   VOC = VB_REF_FAULT –
      VOC                                                                20    45       95      mV
               VB_REF_FAULT – VBUS          VBUS
 ID
     IID_PU    ID pin pull-up current       VID = 0 V                          70                µA
               ID line short resistance to
    RID_GND                                                                              1       kΩ
               detect ID GND state
               ID line short resistance to
   RID_FLOAT                                                           100                       kΩ
               detect ID FLOAT state
 UART mode (2.7 V ± 5%)
               High level output voltage                              VDVIO
   VOH_UART                                 IOH = -2 mA                                          V
               (D1, D3)                                               - 0.15
               Low level output voltage
   VOL_UART                                 IOL = +2 mA                                0.15      V
               (D1, D3)
               High level input voltage                               0.65 x
  VIH_UART_D0                                                                                    V
               (D0)                                                   VDVIO
  VIL_UART_D0  Low level input voltage (D0)                                        0.35 x VDVIO  V
               High level output voltage
   VOH_DFMS                                 IOH = -2 mA                2.16            2.85      V
               (DP)
               Low level output voltage     IOL = +2 mA,
   VOL_DFMS                                                           -0.10            0.37      V
               (DP)                         Pull-up = 10 kΩ
               High level input voltage
   VIH_DTMS                                                             2.0             3.0      V
               (DM)
               Low level input voltage
   VIL_DTMS                                                            -0.3            0.81      V
               (DM)
 Full-speed/low-speed driver
               Output impedance (acting
      ZDRV     also as high-speed                                      40.5            49.5       Ω
               termination)
   VOH_DRV     High level output voltage    RLH = 14.25 kΩ              2.8             3.6      V
    VOL_DRV    Low level output voltage     RLL = 1.425 kΩ              0.0             0.3      V
                                                                  (2)
      VCRS     Driver crossover voltage     CLOAD = 50 to 600 pF        1.3   1.67      2.0      V
 High-speed driver
     VHSOI     HS idle level                                            -10             10      mV
    VHSDPJ                                  (2)
               HS data DP J state level                                380             440      mV
     VHSDK     HS data DP K state level                                 -10             10      mV
12/44                                          Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                       Electrical characteristics
Table 6.       Electrical characteristics (continued)
   Symbol                  Parameter                   Test conditions            Min.         Typ.        Max.         Unit
    VHSDNJ                                       (2)
                 HS data DN J state level                                         380                       440          mV
    VHSDNK       HS data DN K state level                                          -10                       10          mV
                 Chirp J level (differential     (2)
    VCHIRPJ                                                                       700                      1100          mV
                 voltage)
                 Chirp K level (differential
   VCHIRPK                                                                        -900                     -500          mV
                 voltage
 Full-speed/Low-speed receivers
                 Diff. receiver input
      VDI                                         VCM = 0.8 to 2.5 V              200                                    mV
                 sensitivity (VDP-VDM)
                 SE receivers switching           Low to high transition           0.8          1.6         2.0           V
    VSE_TH
                 threshold                        High to low transition           0.8          1.1         2.0           V
                                                  PU/PD resistors
      RINP       Input resistance                                                 300                                     kΩ
                                                  deactivated
      CIN                                        (2)
                 Input capacitance                                                                            5           pF
                 Difference in capacitance
      ΔCIN       between DP and DM input
                                                                                                             10           %
   VDT_LKG       Data line leakage voltage        RPU_EXT = 300 kΩ                                          342          mV
 High-speed receiver
                 HS squelch detector
     VHSSQ                                                                        100                       150          mV
                 threshold
                 HS disconnect detection
    VHSDSC                                                                        525                       625          mV
                 threshold
                 HS data signaling common        (2)
    VHSCM                                                                          -50                      500          mV
                 mode volt. range
   VHSTERM                                       (2)
                 Termination voltage in HS                                         -10                       10          mV
 Data pull-up/pull-down resistors
                 Data line pull-up resistance
      R PU                                                                       1.425                                    kΩ
                 (DP, DM)
      VIHZ       FS idle high level voltage                                        2.7                                    V
                 Data line pull-down
      R PD                                                                       14.25                     24.8           kΩ
                 resistance (DP, DM)
 Voltage regulator
                 3.3 V internal power supply
     3V3V                                         VBAT = 3.6 V, Active mode       3.26          3.4        3.54           V
                 voltage
                 1.2 V internal power supply
     1V2V                                         VBAT = 3.6 V, Active mode      1.187         1.25        1.31           V
                 voltage
1. Characteristics measured over recommended operating conditions unless otherwise noted. All typical values are referred
   to TA = 25 °C, VDVIO = 1.8 V, VBAT = 3.6 V, RREF = 12 kΩ; CT = 4.7 µF.
2. Guaranteed by design.
                                                    Doc ID 14817 Rev 4                                                  13/44


Electrical characteristics                                                             STULPI01A, STULPI01B
Table 7.     Switching characteristics
     Symbol                  Parameter                     Test conditions(1)     Min.    Typ.    Max.  Unit
 Reset
   tRESETEXT  Width of reset pulse on RESETn pin                                   10                    µs
 UART mode
              Switching time (max. low to min.
       tRISE                                          CLOAD = 185 pF                              215    ns
              high)
              Switching time (min. high to max.
       tFALL                                          CLOAD = 185 pF                              215    ns
              low)
      tPD_RX  Delay time (50% DM to 50% D1)           CL = 10 pF                                   60    ns
      tPD_TX  Delay time (50% D0 to 50% DP)                                                        60    ns
                                                      UART_2V7 = 1 measured
  tUARTON2V7 Turn-on time for TXD line (2V7)                                                2      2.5   ms
                                                      from DIR assertion
                                                      UART_2V7 = 1 measured
 tUARTOFF2V7 Turn-off time for TXD line (2V7)                                                       1    µs
                                                      from STP assertion
                                                      UART_2V7 = 0 measured
     tUARTON  Turn-on time for TXD line                                                            60    ns
                                                      from DIR assertion
                                                      UART_2V7 = 0 measured
    tUARTOFF  Turn-off time for TXD line                                                           60    ns
                                                      from DIR de-assertion
 Low-speed driver
         tLR  Data signal rise time                   CLOAD = 600 pF               75      100    300    ns
         tLF  Data signal fall time                   CLOAD = 600 pF               75      100    300    ns
      RFM LS  Rise and fall time matching                                          -20             20    %
       DRLS   Low-speed data rate                                               1.49925         1.50075 Mb/s
       tDDJ1  Data jitter to next transition          Includes freq. tolerances    -25             25    ns
       tDDJ2  Data jitter for paired transitions      Includes freq. tolerances    -14             14    ns
      tLEOPT  SE0 interval of EOP                                                 1250            1500   ns
 Full-speed driver
         tFR  Data signal rise time                   CLOAD = 50 pF                  4             20    ns
         tFF  Data signal fall time                   CLOAD = 50 pF                  4             20    ns
      RFMFS   Rise and fall time matching                                          -10            +10    %
       DRHS   Full-speed data rate                                               11.994         12.006  Mb/s
        tDJ1  Data jitter to next transition          Includes freq. tolerances   -3.5             3.5   ns
        tDJ2  Data jitter for paired transitions      Includes freq. tolerances     -4              4    ns
      tFEOPT  SE0 interval of EOP                                                  160            175    ns
 Clock generation constants
        tPLL  PLL lock time                           (2)                                         200    µs
        tDLL                                          (2)
              DLL lock time                                                                       280    µs
14/44                                            Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                          Electrical characteristics
Table 7.          Switching characteristics (continued)
    Symbol                       Parameter                     Test conditions             Min.       Typ.       Max. Unit
 High-speed driver
      tHSR        Data rise time                                                            500                        ps
       tHSF       Data fall time                                                            500                        ps
                  Waveform requirements including                                          Specified by eye pattern
                  jitter                                                                           (Figure 3)
      DRHS        High-speed data rate                                                    479.76               480.24 Mb/s
 ULPI interface
 CLOCK (measured on CLK pin)
    fSTART_U                                             (2)
                  Frequency (first transition)                                               54         60        66  MHz
   fSTEADY_U      Frequency (steady-state)                                                 59.97        60      60.03 MHz
   DSTART_U       Duty cycle (first transition)                                              40         50        60   %
                                                         (2)
  DSTEADY_U       Duty cycle (steady-state)                                                  45         50        55   %
                  Time to reach steady-state
                  frequency and duty cycle after first   (2)
  TSTEADY_U                                                                                                      1.4   ms
                  transition
   TJITTER_U      Jitter                                                                               400             ps
                                                         Measured from assertion
                                                         of STP during suspend, or
  tSCLK60OUT Clock startup time                                                             250                  900   µs
                                                         after release of RESETn
                                                         pin
 ULPI control signals (SDR mode)(2)
     TSC_U        Control in setup time                                                     6.0                        ns
                                                         CLOAD = 15 pF
     THC_U        Control in hold time                                                      0.0                        ns
                                                         VDVIO = 1.65 - 3.6 V
     TDC_U        Control output delay                                                                           9.0   ns
 ULPI data signals (SDR mode)(2)
     TSD_U        Data in setup time                                                        6.0                        ns
                                                         CLOAD = 15 pF
     THD_U        Data in hold time                                                         3.0                        ns
                                                         VDVIO = 1.65 - 3.6 V
     TDD_U        Data output delay                                                                              9.0   ns
1. Over recommended operating conditions unless otherwise noted. All the typical values are referred to TA = 25 °C,
     V DVIO = 1.8 V, VBAT = 3.6 V, CT = 4.7 µF.
2. Guaranteed by design.
                                                    Doc ID 14817 Rev 4                                                15/44


Electrical characteristics                                                                                 STULPI01A, STULPI01B
Figure 3.       High-speed driver eye pattern
                                  Level 1
                                                                                                       +400 mV
                                                            Point 3        Point 4                    differential
                                                                                                          0V
                                                    Point 1                        Point 2
                                                                                                      differential
                                                            Point 5        Point 6                     -400 mV
                                                                                                      differential
                                  Level 2
                                              0%                 Unit interval              100 %
                                                                                                                               AM04946v2
Table 8.        High-speed driver eye pattern
      Parameter              Level 1          Level 2       Point 1       Point 2       Point 3      Point 4         Point 5  Point 6
    Voltage level           525 mV(1) –525 mV(1)
                                                               0V            0V         300 mV       300 mV         –300 mV  –300 mV
      (DP – DM)              475 mV          –475 mV
         Time
                                                               5%           95%           35%          65%            35%       65%
 (% of unit interval)
1. This value is valid for unit intervals following a transition. For all other intervals the other value is valid.
16/44                                                     Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                Timing diagram
5            Timing diagram
Figure 4.    Rise and fall time
                                     tR                                    tF
   VOH_DRV
                                             90%                   90%
                                     10%                                10%
   VOL_DRV
                                                                                            CS26080
Figure 5.    Simplified block diagram
                                 ID           VBUS    PSWn          VB_REF_FAULT
                                                                                       RESETn
        XI         Oscillator                                                Power
                      and               OTG block
                                               Block                       on reset
       XO                                                       Over-
                      PLL                                      current
                                        Charge pump,
                                                Pump,           fault
      VDVIO                          VBUS comparators
                                            Comparators       detector
                                          ID Detector
                                             detector
      GND
       CLK
        DIR
                                                                             Dual        VBAT
                  ULPI
                   ULPI                                                    voltage
        STP
                                     UTMI +     UTMI +                    regulator
        NXT                                                 USB 2.0                       GND
                  wrapper                                    PHY
                                   interface
                                    Interface    Core
                                                 core
       D0 - D7
                                                                            Voltage
                                                                          reference
                                                                                         RREF
                                                          DP    DM
                                                                                         AM04947v2
                                            Doc ID 14817 Rev 4                                 17/44


Block description                                                                 STULPI01A, STULPI01B
6          Block description
           The STULPI01 integrates a comparator for the VBUS, ID line detector, differential HS data
           driver, differential and single-ended receivers, low dropout voltage regulators, and control
           logic.
           The STULPI01 provides a complete solution for the connection of a digital USB
           host/device/OTG controller to a USB bus.
6.1        Oscillator and PLL
           An external clock (digital square wave VDVIO referred) driven into XI must be used (version
           STULPI01A or STULPI01B).
           The PLL internally produces all frequencies needed for operation:
           ●     60-MHz clock for the UTMI core and ULPI interface controller
           ●     1.5 MHz for low-speed USB data
           ●     12 MHz for full-speed USB data
           ●     480 MHz for high-speed USB data
           ●     Other internal frequencies for data conversion and data recovery.
6.2        Voltage reference
           This block provides the precise reference voltage needed by the internal circuit.
           It requires a 12 kΩ +/- 1% resistor connected to the RREF pin.
6.3        Power-on reset (POR)
           The power-on reset circuit generates a reset pulse upon power-up which is used to initialize
           the entire digital logic. Power-on reset senses the V3V3V and V1V2V voltage.
           During the power-on reset pulse, the ULPI pins are in a high impedance state with pull-
           down/pull-up resistors disabled.
6.4        UTMI + core
           This is the digital heart of the chip and performs the bit-stuffing, NRZI decoding and serial to
           parallel conversion during receive and the reverse operation during transmit for HS and
           FS/LS.
6.5        ULPI wrapper
           This implements the ULPI related protocol and conversion from UTMI+ to ULPI interface.
           This block also implements the interrupt logic and complete ULPI register set.
18/44                                        Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                  Block description
6.6       External charge pump
          It is possible to use an external charge pump or power switch controlled by the PSWn pin
          (active low open drain). This functionality is controlled by DrvVbus and DrvVbusExternal
          ULPI OTG control register bits.
6.7       VBUS comparators and VBUS overcurrent (OC) detector
          These comparators monitor the VBUS voltage.
          VBUS valid status signals that the voltage is above the VBUS_VLD level (4.4 V). Session valid
          status signals that the VBUS voltage is above the VSESS_VLD level (0.8 to 2.0 V). Session end
          detector signals that VBUS voltage is below VSESS_END level.
          The STULPI01 also implements an embedded VBUS overcurrent detector which compares
          VBUS voltage to the external analog 5 V reference signal applied to the VB_REF_FAULT pin.
6.8       VB_REF_FAULT pin
          VBUS overcurrent conditions can be monitored by either an internal or external OC detector.
          The internal OC detector is enabled when the overcurrent_PD bit in the power control
          register (vendor-specific area) is set to 0b and Use External VBUS Indicator is set to 1b. In
          this mode, the VB_REF_FAULT pin functions as the input of the analog reference for internal
          overcurrent detector.
          If the external charge pump is already equipped with an overcurrent detector, its output can
          be also monitored through the VB_REF_FAULT pin, but the overcurrent_PD bit must be set
          to 1b. In this mode, VB_REF_FAULT functions as the standard digital input pin with 5 V
          tolerance. Functionality of the VB_REF_FAULT pin can be seen in more detail in Figure 6.
Note:     After reset, the overcurrent_PD bit is 1b, the internal overcurrent detector is disabled.
                                          Doc ID 14817 Rev 4                                        19/44


Block description                                                                                    STULPI01A, STULPI01B
Figure 6.      VB_REF_FAULT pin functionality
     VBUS
                               VBUS
                                     +
                                          VBUSVLD          Internal VBUS Valid
                                                                                                       [0,X]
                                REF  -
                                                                                                                   RX CMD VBUS Valid
                                                                                                        [1,0]
                                VBUS
     VBREF_FAULT                     +
                                          VBOC
                              VBREF                                     0
                                      -                                                                [1,1]
                                        /EN
                                                                        1
                                                                                                              2
                                        EN
    RIN_VBREF                  FAULT
                                                                                   [UseExternalVbusIndicator, IndicatorPassthru]
                         Schmitt
                     (5 V TOLERANT)                                  OverCurrent_PD or neg (UseExternalVbusIndicator)
                                             IndicatorComplement
                                                                                                                           AM04948v2
Table 9.       VB_REF_FAULT configuration bit settings
                                         Use External                                                                   Indicator
     RX CMD VBUS valid                                       Overcurrent_PD          Indicator Pass-Thru
                                        Vbus Indicator                                                                complement
            VBUSVLD                            0                       1                         X                          X
              VBOC                             1                       0                         1                          X
     VBOC and VBUSVLD                          1                       0                         0                          X
           neg (FAULT)                         1                       1                         1                           0
              FAULT                            1                       1                         1                           1
     VBUSVLD and FAULT                         1                       1                         0                           1
 VBUS_VLD and neg (FAULT)                      1                       1                         0                           0
6.9            Voltage regulator
               The dual output ultra low dropout voltage regulator provides the power supply for analog and
               digital internal circuits. An external capacitor on both the 3V3V and 1V2V pins is needed for
               proper operation.
6.10           ID detector
               This block provides the sensing of the status of the ID line. It is capable of detecting whether
               the pin is floating or tied to the ground.
6.11           USB 2.0 PHY
               The USB 2.0 PHY block provides a complete physical layer transceiver for low-speed, full-
               speed, and high-speed USB operating modes. The analog part of this block deals with
               impedance adaptation, controlled voltage swing, and Common mode voltage generation
20/44                                                  Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                   Block description
          and sensing. The digital part consists of a serializer and deserializer, transforming serial bit
          stream to 8-bit parallel port, and finite state machine implementing the PHY protocol layer,
          bit stuffing, unstuffing, etc.
          Figure 7.      USB 2.0 PHY block diagram
                                                                    3.3 V
                                            HS
                                         Ser-Des                                DP
                                          LS/FS                     3.3 V
                                         Ser-Des
                                                                                DN
                                          HS Disconnect Det.
                                           Squelch Detector
                                                                        19.25 kΩ
                                          LS/FS SE Receivers
                                                                                                 AM04949v2
6.12      Power saving features
          To reduce power consumption, the STULPI01 implements 2 Low-power modes of operation.
          1.    Low-power mode, which is defined in the ULPI specification.
          2.    Power-down mode to save more power in case USB function is not needed.
          More information on these modes can be found in the following paragraphs.
6.13      Modes of operation
6.13.1    ULPI synchronous mode
          The STULPI01 transceiver supports SDR mode operation (12-pin interface). The selection
          of SDR mode is performed during the startup reset procedure.
6.13.2    6-pin FS/LS serial mode
          This mode is entered by writing to the corresponding bit in the Interface Control register.
6.13.3    3-pin FS/LS serial mode
          This mode is entered by writing to the corresponding bit in the Interface Control register.
                                             Doc ID 14817 Rev 4                                     21/44


Block description                                                                   STULPI01A, STULPI01B
6.14           Car Kit (UART) mode
               This mode is entered by writing to the Car Kit mode bit in the interface control register. The
               STULPI01 does not implement all features of Car Kit mode, only the UART functionality is
               preserved.
Table 10.      Car kit signals mapping
 Default car kit signals mapping (UART_DIR = 0)
           Signal                                ULPI lines                               USB lines
            TXD              DATA[0] (input)   ->                                        DM (output)
            RXD              DATA[1] (output) <-                                          DP (input)
         Reserved            DATA[2] (input)
            INT              DATA[3] (output)
 Car kit signals mapping (UART_DIR = 1)
           Signal                                ULPI lines                               USB lines
            TXD              DATA[0] (input)   ->                            DP (output)
            RXD              DATA[1] (output) <-                             DM (input)
         Reserved            DATA[2] (input)
            INT              DATA[3] (output)
               TXD or RXD paths are activated only when the corresponding bits TXD_EN/RXD_EN in car
               kit control register bits (Table 23) are set.
               The UART_2V7 bit controls the voltage level of UART signaling. If 2V7 volt signaling is used,
               after the UART mode is entered, PLL is disabled and the voltage on the regulator output
               starts to decrease to 2.7 V. After a time marked as tUARTON2V7, the TXD output on the USB
               bus is enabled.
               When leaving Car Kit mode, TXD is disabled immediately when the STP pin is asserted.
               The time required to exit Car Kit mode is equivalent to the time needed for PLL startup.
               When 3.3 volt UART signaling is selected, the TXD line is enabled immediately after
               entering Car Kit mode, and disabled after exiting this mode.
Note:          When Car Kit mode is used with 2V7 signaling, the PLL and output clock are always
               stopped regardless of the setting of the ClockSuspendM bit.
6.15           Low-power mode
               The STULPI01 enters Low-power mode when the SuspendM bit in the interface control
               register is set to 0b. Most of the references are turned off, PLL and clock are turned off, but
               the full wake-up capability as defined in the ULPI specification is still maintained.
               When in Low-power mode, the PHY drives D3-D0 with the signals listed in Table 11. Line
               state is driven combinatorially from the SE receivers. The INT signal is asserted whenever
               any unmasked interrupt occurs. The PHY latches interrupt events directly from analog
               circuitry because the clock is powered down.
22/44                                             Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                           Block description
Table 11.     Low-power mode
       Signal                Map to             Dir                              Description
   Linestate (0)               D0               out               Driven combinatorially from SE receivers
   Linestate (1)               D1               out               Driven combinatorially from SE receivers
      Reserved                 D2               out                                Reserved
                                                             Active high interrupt indication. Asserted whenever
        INT                    D3               out
                                                                       any unmasked interrupt occurs.
              Low-power mode is exited by asserting the STP pin high. PLL is started immediately, and
              when the clock becomes stable, it is passed on the output of the CLK pin. Then, after a
              minimum of 5 clock cycles, DIR is deasserted and Low-power mode is exited. The
              SuspendM bit is reset to 1b.
Note:         The STP signal must be kept high until the DIR is deasserted, otherwise Low-power mode is
              not exited.
6.16          Power-down mode
              Power-down mode is entered by asserting the CSn/PWRDN pin high. Internal voltage
              regulators are disabled, and the device has minimum possible power consumption. The
              STULPI01 has no wake-up capability or USB functionality during Power-down mode. This
              mode can be exited by deasserting the CSn/PWRDN pin. Voltage regulators are turned on
              and the internal power-on reset circuit resets the chip to initial state. ULPI interface pins are
              in high impedance state during Power-down mode.
6.17          VIO OFF mode
              If VDVIO is below the minimum value, VIO OFF mode is entered. The behavior of the device
              in VIO OFF mode is the same as in Power-down mode.
6.18          Startup procedure
6.18.1        ULPI device detection
              The link detects ULPI device presence by sampling the DIR signal at the reset time
              (Figure 8). The NXT signal is '0' after reset to signal an 8-bit device to the link controller.
              CLK is '1' to signal a DDR capable device.
6.18.2        SDR mode selection
              The STULPI01 samples the D0 line on the first rising edge of the output clock on the CLK
              pin. When the sampled value is '0', the STULPI01 remains in SDR mode.
              SDR mode can be selected again only after hardware reset. During software reset mode,
              selection is not performed.
                                             Doc ID 14817 Rev 4                                              23/44


Block description                                                                STULPI01A, STULPI01B
Note:      IMPORTANT: The controller must not drive the DATA lines to a value other than 0x00 or
           0x01 during the first rising edge of ULPI CLK, otherwise the behavior of the device may be
           undefined.
6.18.3     External clock detection
           The square wave clock can be applied to the oscillator input. The input square wave clock
           amplitude is referenced to VDVIO.
           The XO pin can be left floating or grounded.
6.18.4     Reset behavior
           A typical startup sequence is shown in Figure 12.
           The STULPI01 contains an internal power-on reset generator which senses the V3V3V and
           V1V2V voltage. Assertion of RESETn is not necessary for proper initialization. However, if
           required, this pin can be also used. The internal reset signal is the combination of the signal
           from the RESETn pin and the signal from the internal power-on reset circuit.
           When RESETn is asserted, all internal registers are reset to their default values, the output
           DIR signal is driven to '1', and data lines are pulled low by weak pull-downs.
           During reset, the STP pin can be driven low, high, or can be left floating. It is pulled up by
           internal pull-up and the ULPI interface enters a holding state.
           During the reset state, the NXT signal is driven low and the CLK is driven high.
           When the PLL is stabilized, the clock on the CLK pin is enabled, and DIR is deasserted.
Note:      The minimum duration of the external reset signal is TRESETEXT. (See Table 7).
           When internal POR reset is asserted, the reset procedure is equivalent to the RESETn
           signal, with the only exception being that the ULPI lines are in high impedance state. All pull-
           downs and pull-ups on the ULPI signals are also disabled.
6.18.5     Interface protection
           The STULPI01 activates weak pull-downs on data lines and pull-up on the STP during reset
           and holding state. These are to provide interface protection during startup and anytime the
           link is not able to drive the ULPI lines properly.
           The holding state is entered when the controller drives the STP for more than 1 clock cycle.
           Any command on the ULPI bus is ignored in this state. For more information see ULPI
           specification 1.1, section 3.12 (Safeguarding PHY input signals).
           Interface protection can be switched off at any time after startup in order to save power, by
           writing the Interface Protect Disable bit in the Interface Control register to 1b.
6.18.6     Software reset
           The STULPI01 supports software reset by writing the RESET bit in the function control
           register to 1b.
           During software reset, DIR is asserted and the pull-down resistors on data lines are
           enabled, but the ULPI registers remain unaffected. Software reset initializes UTMI core logic
           only. Also, during software reset, external clock detection, SDR mode selection is not
           performed, and the clock is not turned off (PLL is not restarted).
24/44                                       Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                  Block description
Note:     Software reset is not required in the startup procedure for the STULPI. The chip is ready for
          operation after the hardware reset procedure.
6.18.7    High-speed mode entry
          In High-speed mode, the internal 480-MHz clock is generated by the DLL, which must be
          calibrated any time the device enters High-speed mode by writing '00' to the XcvrSel field in
          the Function Control register. During the DLL calibration, it is not possible to accept any
          commands, therefore, to avoid any communication problems with the controller, the clock on
          the ULPI interface is stopped. See Figure 10 for more information.
Figure 8. Startup sequence
                                         Doc ID 14817 Rev 4                                         25/44


Block description                                   STULPI01A, STULPI01B
Figure 9.  RESETn behavior
                                                                  AM04951v1
Figure 10. High-speed mode entry
26/44                            Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                  Block description
Figure 11. UART mode entry (2.7 V)
Figure 12. UART mode exit (2.7 V)
                                   Doc ID 14817 Rev 4             27/44


State transitions                                                                                            STULPI01A, STULPI01B
7            State transitions
Table 12.    USB state transitions
                                                            Register settings                                            Resistor settings
                                               XcvrSelect    TermSelect            DpPulldown   DmPulldown   rpu_dp_en     rpu_dm_en   rpd_dp_en   rpd_dm_en   hsterm_en
                                                                          OpMode
                  Signaling mode
General settings
3-state drivers                               XXb            Xb           01b      0b           0b           0b           0b           0b          0b          0b
3-state drivers with pull-down enabled        XXb            Xb           01b      1b           1b           0b           0b           1b          1b          0b
Power-up or Vbus < Vth(SESSEND)               01b            0b           00b      1b           1b           0b           0b           1b          1b          0b
Host settings
Host chirp                                    00b            0b           10b      1b           1b           0b           0b           1b          1b          1b
Host high-speed                               00b            0b           00b      1b           1b           0b           0b           1b          1b          1b
Host full-speed                               X1b            1b           00b      1b           1b           0b           0b           1b          1b          0b
Host HS/FS suspend                            01b            1b           00b      1b           1b           0b           0b           1b          1b          0b
Host HS/FS resume                             01b            1b           10b      1b           1b           0b           0b           1b          1b          0b
Host low-speed                                10b            1b           00b      1b           1b           0b           0b           1b          1b          0b
Host low-speed suspend                        10b            1b           00b      1b           1b           0b           0b           1b          1b          0b
Host low-speed resume                         10b            1b           10b      1b           1b           0b           0b           1b          1b          0b
Host test_J/Test_K                            00b            0b           10b      1b           1b           0b           0b           1b          1b          1b
Peripheral settings
Peripheral chirp                              00b            1b           10b      0b           0b           1b           0b           0b          0b          0b
Peripheral high-speed                         00b            0b           00b      0b           0b           0b           0b           0b          0b          1b
Peripheral full-speed                         01b            1b           00b      0b           0b           1b           0b           0b          0b          0b
Peripheral HS/FS suspend                      01b            1b           00b      0b           0b           1b           0b           0b          0b          0b
Peripheral HS/FS resume                       01b            1b           10b      0b           0b           1b           0b           0b          0b          0b
Peripheral low-speed                          10b            1b           00b      0b           0b           0b           1b           0b          0b          0b
Peripheral low-speed suspend                  10b            1b           00b      0b           0b           0b           1b           0b          0b          0b
Peripheral low-speed resume                   10b            1b           10b      0b           0b           0b           1b           0b          0b          0b
Peripheral test_J/Test_K                      00b            0b           10b      0b           0b           0b           0b           0b          0b          1b
28/44                                    Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                                                                    State transitions
Table 12.   USB state transitions (continued)
                                                             Register settings                                            Resistor settings
                                                XcvrSelect    TermSelect            DpPulldown   DmPulldown   rpu_dp_en     rpu_dm_en      rpd_dp_en   rpd_dm_en    hsterm_en
                                                                           OpMode
               Signaling mode
OTG device, peripheral chirp                    00b           1b           10b      0b           1b           1b           0b              0b          1b           0b
OTG device, peripheral high-speed               00b           0b           00b      0b           1b           0b           0b              0b          1b           1b
OTG device, peripheral full-speed               01b           1b           00b      0b           1b           1b           0b              0b          1b           0b
OTG device, peripheral HS/FS suspend            01b           1b           00b      0b           1b           1b           0b              0b          1b           0b
OTG device, peripheral HS/FS resume             01b           1b           10b      0b           1b           1b           0b              0b          1b           0b
OTG device, peripheral, Test_J/Test_K           00b           0b           10b      0b           1b           0b           0b              0b          1b           1b
                                        Doc ID 14817 Rev 4                                                                                                         29/44


ULPI registers                                                                            STULPI01A, STULPI01B
8              ULPI registers
Table 13.      ULPI register map overview
                                                                                         Address (6 bits)
                          Field name                         Size (bits)
                                                                                 Rd           Wr        Set      Clr
 Immediate register set
 Vendor ID low                                                    8             00h            -         -        -
 Vendor ID high                                                   8             01h            -         -        -
 Product ID low                                                   8             02h            -         -        -
 Product ID high                                                  8             03h            -         -        -
 Function control                                                 8            04-06h        04h        05h      06h
 Interface control                                                8            07-09h        07h        08h      09h
 OTG control                                                      8           0A-0Ch         0Ah       0Bh      0Ch
 USB interrupt enable rising                                      8           0D-0Fh         0Dh       0Eh       0Fh
 USB interrupt enable falling                                     8            10-12h        10h        11h      12h
 USB interrupt status register                                    8             13h            -         -        -
 USB interrupt latch register                                     8             14h            -         -        -
 Debug                                                            8             15h            -         -        -
 Scratch                                                          8            16-18h        16h        17h      18h
 Car kit control register                                         8            16-1Bh        19h       1Ah      1Bh
 Reserved                                                         8                           1C-2Eh
 Access extended register set (see Table 14)                      8               -          2Fh         -        -
 Reserved                                                         8                            30-3Ch
 Power control                                                                                3D-3Fh
 Extended register set                                                                   Address (8 bits)
 Maps to immediate register set above                             8                            00-3Fh
 Reserved                                                         8                            40-FFh
Table 14.      Register access legend
 Access code          Expanded name                                        Meaning
        rd                  Read          Register can be read. Read-only if this is the only mode given.
        wr                  Write         Pattern on the data bus is written over all bits of the register.
                                          Pattern on the data bus is OR’d with the register value and written into
         s                   Set
                                          the register.
                                          Pattern on the data bus is a mask. If a bit in the mask is set, then the
         c                  Clear
                                          corresponding register bit is set to zero (cleared).
30/44                                          Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                          ULPI registers
Table 15.     Vendor and product ID
       Register         Bits    Access    Address    Value                      Description
 VENDOR_ID_LOW           7:0      rd        00h       83 h                Lower byte of vendor ID.
 VENDOR_ID_HIGH          7:0      rd        01h       04 h                Upper byte of vendor ID.
 PRODUCT_ID_LOW          7:0      rd        02h       4b h            Lower byte of product ID number.
 PRODUCT_ID_HIGH         7:0      rd        03h       4f h            Upper byte of product ID number.
Table 16.     Power control register
      Field name        Bits   Access      Reset                           Description
 Reserved                 0    rd/wr/s/c      0b    Reserved. The link must never write a 1b to this bit.
                                                    Power control of the internal overcurrent circuit.
 Overcurrent_PD           1    rd/wr/s/c      1b    0b: enables the overcurrent circuit.
                                                    1b: disables the overcurrent circuit.
                                                    0b: Txd on DM and Rxd on DP
 UART_DIR                 2    rd/wr/s/c      0b
                                                    1b: Txd on DP and Rxd on DM
                                                    0b: UART signaling at 3V3
 UART_2V7                 3    rd/wr/s/c      1b
                                                    1b: UART signaling at 2V7
 Reserved                7:4   rd/wr/s/c      0b    Reserved. The link must never write a 1b to these bits.
Note:         3Dh-3Fh(Read), 3Dh(Write), 3Eh(Set), 3Fh(Clear). These addresses control various power
              aspects of the USB transceiver.
                                           Doc ID 14817 Rev 4                                             31/44


ULPI registers                                                                        STULPI01A, STULPI01B
Table 17.   Function control register
 Field name                Bits   Access    Reset                           Description
                                                    Selects the required transceiver speed.
                                                    00b: enables HS transceiver
                                                    01b: enables FS transceiver
                                                    10b: enables LS transceiver
 XcvrSelect                1:0   rd/wr/s/c   01b    11b: enables FS transceiver for LS packets (FS preamble
                                                    is automatically pre-pended)
                                                    Important note: Every time XcvrSelect is changed to
                                                    ‘00’, the output ULPI clock is stopped for the time needed
                                                    for internal DLL calibration.
                                                    Controls the internal pull-up resistors or HS terminations.
                                                    Control over these resistors changes depending on
 TermSelect                 2    rd/wr/s/c   0b
                                                    XcvrSelect, OpMode, DpPulldown and DmPulldown, as
                                                    shown in Table 24.
                                                    Selects the required bit encoding style during transmit.
                                                    00b: normal operation
                                                    01b: non-driving
 OpMode                    4:3   rd/wr/s/c   00b
                                                    10b: disables bit-stuff and NRZI encoding
                                                    11b: does not automatically add SYNC and EOP when
                                                    transmitting. Must be used only for HS packets.
                                                    Active high transceiver reset. After the link sets this bit,
                                                    the STULPI01 asserts DIR and reset the UTMI+ core.
                                                    When the reset is complete, the STULPI01 de-asserts
                                                    DIR and automatically clears this bit. After de-asserting
                                                    DIR, the STULPI01 re-asserts DIR and sends an RX
 Reset                      5    rd/wr/s/c   0b
                                                    CMD update to the link.
                                                    Note: If Reset bit is set to ‘1’ and SuspendM bit is set to
                                                    ‘0’ in the same register access, SuspendM bit takes
                                                    higher priority and the chip enters Low-power mode.
                                                    Reset bit is cleared.
                                                    Active low PHY suspend. Puts PHY into Low-power
                                                    mode. The STULPI01 automatically sets this bit to ‘1’
                                                    when Low-power mode is exited.
                                                    0b: Low-power mode
 SuspendM                   6    rd/wr/s/c   1b     1b: Powered
                                                    Note: If Reset bit is set to ‘1’ and SuspendM bit is set to
                                                    ‘0’ in the same register access, SuspendM bit takes
                                                    higher priority and the chip enters Low-power mode.
                                                    Reset bit is cleared.
 Reserved                   7    rd/wr/s/c   0b     Reserved
Note:       04h-06h(Read), 04h(Write), 05h(Set), 06h(Clear). These addresses control UTMI function
            setting of the USB transceiver PHY.
32/44                                      Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                              ULPI registers
Table 18.     Interface control register
     Field name        Bits   Access     Reset                              Description
                                                  Changes the ULPI interface to 6-pin Serial mode. The
                                                  STULPI01 automatically clears this bit when Serial mode is
 6-pin
                        0     rd/wr/s/c    0b     exited.
 FsLsSerialMode
                                                  0b: FS/LS packets are sent using parallel interface.
                                                  1b: FS/LS packets are sent using 6-pin serial interface.
                                                  Changes the ULPI interface to 3-pin Serial mode. The
                                                  STULPI01 automatically clears this bit when Serial mode is
 3-pin
                        1     rd/wr/s/c    0b     exited.
 FsLsSerialMode
                                                  0b: FS/LS packets are sent using parallel interface.
                                                  1b: FS/LS packets are sent using 4-pin serial interface.
                                                  The STULPI01 does not support all the features of Car Kit
                                                  mode. Only the UART functionality is implemented.
 Carkit mode            2     rd/wr/s/c    0b
                                                  0b: disables serial Car Kit mode.
                                                  1b: enables serial Car Kit mode.
                                                  Active low clock suspend. Valid only in Serial mode and Car
                                                  Kit mode. Powers down the internal clock circuitry. Valid only
                                                  when SuspendM = 1b. The STULPI01 ignores
 ClockSuspendM          3     rd/wr/s/c    0b     ClockSuspend when SuspendM = 0b. By default, the clock
                                                  is not powered in Serial and Car Kit modes.
                                                  0b: clock is not powered in Serial and Car Kit modes.
                                                  1b: clock is powered in Serial and Car Kit modes.
                                                  The STULPI01 does not implement auto-resume feature,
 Reserved               4     rd/wr/s/c    0b
                                                  because the clock can be restarted in less than 1ms.
                                                  Gives the command to invert the ExternalVbusIndicator
                                                  signal, generating the complement output.
 Indicator
                        5     rd/wr/s/c    0b     0b: The STULPI01 does not invert ExternalVbusIndicator
 complement
                                                  signal
                                                  1b: STULPI01 inverts ExternalVbusIndicator signal.
                                                  Controls whether the complement output is qualified with the
                                                  Internal VbusValid comparator before being used in the
                                                  Vbus State in the RX CMD.
 Indicator
                        6     rd/wr/s/c    0b     0b: complements output signal is qualified with the Internal
 PassThru
                                                  VbusValid comparator.
                                                  1b: complements output signal is not qualified with the
                                                  Internal VbusValid comparator.
                                                  Controls circuitry for protecting the ULPI interface when the
                                                  link 3-states STP and DATA. This bit is not intended to affect
                                                  the operation of the holding state. Refer to Section 3.12 of
 Interface protect                                ULPI specification 1.1 for more details.
                        7     rd/wr/s/c    0b
 disable                                          0b: enables the interface protection circuit (default).
                                                  1b: disables the interface protection circuit.
                                                  Interface protection circuit consists of pull-down resistors on
                                                  DATA and pull-up resistors on STP.
Note:         07h-09h(Read), 07h(Write), 08h(Set), 09h(Clear). These addresses enable alternative
              interfaces and STULPI01 features.
                                           Doc ID 14817 Rev 4                                                33/44


ULPI registers                                                                        STULPI01A, STULPI01B
Table 19.     OTG control register
      Field name        Bits   Access    Reset                            Description
                                               Connects a pull-up to the ID line and enables sampling of the
                                               signal level.
 IdPullup                0     rd/wr/s/c  0b
                                               0b: disables sampling of ID line.
                                               1b: enables sampling of ID line.
                                               Enables the 15 kΩ pull-down resistor on DP.
 DpPulldown              1     rd/wr/s/c  1b   0b: pull-down resistor not connected to DP.
                                               1b: pull-down resistor connected to DP.
                                               Enables the 15 kΩ pull-down resistor on DM.
 DmPulldown              2     rd/wr/s/c  1b   0b: pull-down resistor not connected to DM.
                                               1b: pull-down resistor connected to DM.
                                               Discharges VBUS through a resistor. If the link sets this bit to 1,
                                               it waits for an RX CMD indicating SessEnd has transition from 0
 DischrgVbus             3     rd/wr/s/c  0b   to 1, and then resets this bit to 0 to stop the discharge.
                                               0b: does not discharge VBUS
                                               1b: discharges VBUS
                                               Charges VBUS through a resistor. Used for VBUS pulsing SRP.
 ChrgVbus                4     rd/wr/s/c  0b   0b: does not charge VBUS
                                               1b: charges VBUS
                                               Signals the internal charge pump or external supply to drive 5 V
                                               on VBUS.
 DrvVbus                 5     rd/wr/s/c  0b
                                               0b: does not drive VBUS (default)
                                               1b: drives 5 V on VBUS
                                               Selects between the internal and the external 5 V VBUS supply.
 DrvVbus External        6     rd/wr/s/c  0b   0b: drives VBUS using the internal charge pump (default).
                                               1b: drives VBUS using external supply.
                                               Tells STULPI01 to use an external VBUS overcurrent indicator.
 UseExternal                                   0b: uses the internal OTG comparator or internal
                         7     rd/wr/s/c  0b
 VbusIndicator                                 VBUS valid indicator (default)
                                               1b: uses external VBUS valid indicator signal
Note:         0Ah-0Ch(Read), 0Ah(Write), 0Bh(Set), 0Ch(Clear). These addresses control UTMI + OTG
              functions of the PHY.
34/44                                       Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                                ULPI registers
Table 20.     USB interrupt enable rising register
 Field name                  Bits      Access      Reset                           Description
                                                           Generates an interrupt event notification when host
                                                           disconnect changes from low to high. Applicable only in
 Host disconnect rise         0        rd/wr/s/c     1b
                                                           Host mode (DpPulldown and DmPulldown both set to
                                                           1b).
                                                           Generates an interrupt event notification when
 VbusValid rise               1        rd/wr/s/c     1b
                                                           VbusValid changes from low to high.
                                                           Generates an interrupt event notification when
 SessValid rise               2        rd/wr/s/c     1b    SessValid changes from low to high. SessValid is the
                                                           same as UTMI+AValid.
                                                           Generates an interrupt event notification when SessEnd
 SessEnd rise                 3        rd/wr/s/c     1b
                                                           changes from low to high.
                                                           Generates an interrupt event notification when ID
                                                           changes from low to high. ID is valid 50 ms after
 ID rise                      4        rd/wr/s/c     1b
                                                           IdPullup is set to 1b, otherwise ID is undefined and
                                                           should be ignored.
 Reserved                    7:5       rd/wr/s/c     0b    Reserved.
Note:         0Dh-0Fh(Read), 0Dh(Write), 0Eh(Set), 0Fh(Clear).
              If set, the bits in this register cause an interrupt event notification to be generated when the
              corresponding PHY signal changes from low to high. By default, all transitions are enabled.
              RxActive and RxError must always be communicated immediately and so are not included
              in this register. Interrupt circuitry can be powered down in any mode when both rising and
              falling edge enables are disabled. To ensure interrupts are detectable when clock is
              powered down, the link should enable both rising and falling edges.
                                                 Doc ID 14817 Rev 4                                             35/44


ULPI registers                                                                              STULPI01A, STULPI01B
Table 21.     USB interrupt enable falling register
 Field name               Bits    Access     Reset                               Description
                                                    Generates an interrupt event notification when the host
 Host disconnect fall      0     rd/wr/s/c    1b    disconnect changes from high to low. Applicable only in Host
                                                    mode.
                                                    Generates an interrupt event notification when VbusValid
 VbusValid fall            1     rd/wr/s/c    1b
                                                    changes from high to low.
                                                    Generates an interrupt event notification when SessValid
 SessValid fall            2     rd/wr/s/c    1b    changes from high to low. SessValid is the same as
                                                    UTMI+AValid.
                                                    Generates an interrupt event notification when SessEnd
 SessEnd fall              3     rd/wr/s/c    1b
                                                    changes from high to low.
                                                    Generates an interrupt event notification when ID changes from
 ID fall                   4     rd/wr/s/c    1b    high to low. ID is valid 50 ms after IdPullup is set to 1b, otherwise
                                                    ID is undefined and should be ignored.
 Reserved                 7:5    rd/wr/s/c    0b    Reserved
Note:         Address 10h-12h(Read), 10h(Write), 11h(Set), 12h(Clear).
              If set, the bits in this register cause an interrupt event notification to be generated when the
              corresponding PHY signal changes from high to low. By default, all transitions are enabled.
              RxActive and RxError must always be communicated immediately and so are not included
              in this register. Interrupt circuitry can be powered down in any mode when both rising and
              falling edge enables are disabled. To ensure interrupts are detectable when clock is
              powered down, the link should enable both rising and falling edges.
Table 22.     USB interrupt status register
 Field name              Bits    Access      Reset                               Description
                                                    Current value of UTMI+Host disconnect output. Applicable only
 Host disconnect           0         rd       0b    in Host mode. Automatically reset to 0b when Low-power mode
                                                    is entered.
 VbusValid                 1         rd       0b    Current value of UTMI+VbusValid output.
                                                    Current value of UTMI+SessValid output. SessValid is the same
 SessValid                 2         rd       0b
                                                    as UTMI+AValid.
 SessEnd                   3         rd       0b    Current value of UTMI+SessEnd output.
                                                    Current value of UTMI+ID output. ID is valid 50 ms after IdPullup
 ID                        4         rd       0b
                                                    is set to 1b, otherwise ID is undefined and should be ignored.
 Reserved                 7:5        rd       0b    Reserved
Note:         Address 13h(Read-only).
              These bits indicate the current value of the interrupt source signal. Interrupt circuitry can be
              powered down in any mode when both rising and falling edge enables are disabled. To
              ensure interrupts are detectable when clock is powered down, the link should enable both
              rising and falling edges.
36/44                                            Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                                     ULPI registers
Table 23.      USB interrupt latch register
 Field name               Bits    Access     Reset                                Description
                                                      Set to 1b by the STULPI01 when an unmasked event occurs on
 Host disconnect
                           0         rd       0b      host disconnect. Cleared when this register is read. Applicable
 latch
                                                      only in Host mode.
                                                      Set to 1b by the STULPI01 when an unmasked event occurs on
 VbusValid latch           1         rd       0b
                                                      VbusValid. Cleared when this register is read.
                                                      Set to 1b by the STULPI01 when an unmasked event occurs on
 SessValid latch           2         rd       0b      SessValid. Cleared when this register is read. SessValid is the
                                                      same as UTMI+AValid.
                                                      Set to 1b by the STULPI01 when an unmasked event occurs on
 SessEnd latch             3         rd       0b
                                                      SessEnd. Cleared when this register is read.
                                                      Set to 1b by the STULPI01 when an unmasked event occurs on
 ID latch                  4         rd       0b      ID. Cleared when this register is read. ID is valid 50 ms after ID
                                                      is set to 1b, otherwise ID is undefined and should be ignored.
 Reserved                 7:5        rd       0b      Reserved
Note:          Address 14h(Read-only with auto-clear).
               These bits are set by the STULPI01 when an unmasked change occurs on the
               corresponding internal signal. The STULPI01 automatically clears all bits when the link
               reads this register, or when Low-power mode is entered. The STULPI01 also clears this
               register when Serial mode or Car Kit mode is entered regardless of the value of
               ClockSuspendM. The interrupt circuitry is powered down in any mode when both rising and
               falling edge enables are disabled. To ensure the interrupts are detectable when the clock is
               powered down, the link should enable both rising and falling edges.
               The STULPI01 follows the rules in Table 20 for setting any latch register bit. It is important to
               note that if the register read data is returned to the link in the same cycle that a USB
               interrupt latch bit is to be set, the interrupt condition is given immediately in the register read
               data and the latch bit is not set.
               Note that it is optional for the link to read the USB interrupt latch register in Synchronous
               mode because the RX CMD byte already indicates the interrupt source directly.
Table 24.      Setting rules for interrupt latch register
                               Input conditions
                                                                                  Resultant value of latch register bit
    Register read data returned in        Interrupt latch bit is to be set in
          current clock cycle                    current clock cycle
                    No                                     No                                        0
                    No                                     Yes                                       1
                   Yes                                     No                                        0
                   Yes                                     Yes                                       0
                                                  Doc ID 14817 Rev 4                                                37/44


ULPI registers                                                                     STULPI01A, STULPI01B
Table 25.   Debug register
 Field name            Bits    Access    Reset                             Description
 LineState0             0         rd       0b     Contains the current value of LineState(0)
 LineState1             1         rd       0b     Contains the current value of LineState(1)
 Reserved              7:2        rd       0b     Reserved
Note:       Address 15h(Read-only) indicates the current value of various signals useful for debugging.
Table 26.   Scratch register
 Field name            Bits    Access    Reset                              Description
                                                  Empty register byte for testing purposes. The software can
 Scratch               7:0     rd/wr/s/c  00b     read, write, set, and clear this register and the STULPI01
                                                  functionality is not affected.
Note:       Address 16h-18h(Read), 16h(Write), 17h(Set), 18h(Clear).
Table 27.   Car kit control register
 Field name            Bits    Access    Reset                             Description
 Reserved               0     rd/wr/s/c   0b
 Reserved               1     rd/wr/s/c   0b
 TxdEn                  2     rd/wr/s/c   0b      Enables TXD signal in Car Kit mode
 RxdEn                  3     rd/wr/s/c   0b      Enables RXD signal in Car Kit mode
 Reserved               4     rd/wr/s/c   0b
 Reserved               5     rd/wr/s/c   0b
 Reserved               6     rd/wr/s/c   0b
 Reserved               7     rd/wr/s/c   0b
Note:       Address 19h-1Bh(Read), 19h(Write), 1Ah(Set), 1Bh(Clear).
38/44                                    Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                        Package mechanical data
9         Package mechanical data
          In order to meet environmental requirements, ST offers these devices in different grades of
          ECOPACK® packages, depending on their level of environmental compliance. ECOPACK
          specifications, grade definitions and product status are available at: www.st.com.
          ECOPACK is an ST trademark.
                                          Doc ID 14817 Rev 4                                     39/44


Package mechanical data                                         STULPI01A, STULPI01B
Figure 13. µTFBGA36 package outline
                                                                                
                                                                                       "
Table 28.  µTFBGA36 mechanical data
                                                Dimensions
    Symbol                  mm .                                mils.
                Min.        Typ.           Max.            Min.  Typ.       Max.
       A         0.93        1.1           1.11            36.6   3.3        43.7
      A1         0.15                      0.25            5.9                9.8
      A2        0.78                       0.86            30.7              33.9
       b        0.25         0.30          0.35             9.8  11.8        13.8
       D         3.5         3.6            3.7           137.8 141.7       145.7
      D1                     2.5                                 98.4
       E         3.5         3.6            3.7           137.8 141.7       145.7
      E1                     2.5                                 98.4
       e                     0.5                                 19.7
       F                     0 .55                               21 .7
40/44                               Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                               Package mechanical data
Figure 14. Tape and reel µTFBGA36 package outline
                                                                                 4A2 4&"'!
1. Drawing not to scale.
Table 29.     Tape and reel µTFBGA36 mechanical data
                                                   Dimensions
     Symbol                      mm.                                 inch.
                         Min.    Typ.         Max.           Min.     Typ.       Max.
       A                                       330                              12.992
       C                 12.8                  13.2          0.504               0.519
       D                 20.2                                0.795
       N                  60                                 2.362
        T                                      14.4                              0.567
       Ao                         3.9                                0.154
       Bo                         3.9                                0.154
       Ko                        1.50                                0.059
       Po                 3.9                  4.1           0.154               0.161
       P                  7.9                  8.1           0.311               0.319
                                       Doc ID 14817 Rev 4                              41/44


Order codes                                                                                           STULPI01A, STULPI01B
10             Order codes
Table 30.      Order codes
    Order code                        Key differences                               Package                        Packaging
 STULPI01ATBR(1)       fOSC = 19.2 MHz, CSn/PWRDN = 0 “ON” µTFBGA36 (3.6 x 3.6 mm typ.) 3000 parts per reel
 STULPI01BTBR(1) fOSC = 26 MHz, CSn/PWRDN = 0 “ON”                       µTFBGA36 (3.6 x 3.6 mm typ.) 3000 parts per reel
1. All these versions need a digital external clock on the XI pin; the XO pin must be left floating or grounded (crystal is not
   supported).
42/44                                                 Doc ID 14817 Rev 4


STULPI01A, STULPI01B                                                                        Revision history
11           Revision history
Table 31.    Document revision history
      Date      Revision                                        Changes
  20-Jun-2008      1     First release.
                         Replaced “IV8VIO” with “DVIO” throughout datasheet; updated Table 2, 3, 5, 7;
 24-Sep-2010       2
                         updated ECOPACK® text in Section 9; reformatted document, minor textual changes.
                         Updated Table 2, 3, 12; updated pin name to VDVIO throughout document; minor
  26-Jan-2011      3
                         formatting changes.
                         Updated Section 9 (data in Table 28, titles of Figure 13 and Figure 14, Table 28 and
  07-Jun-2012      4
                         Table 29), minor text corrections throughout document.
                                           Doc ID 14817 Rev 4                                             43/44


                                                                                                              STULPI01A, STULPI01B
                                                             Please Read Carefully:
Information in this document is provided solely in connection with ST products. STMicroelectronics NV and its subsidiaries (“ST”) reserve the
right to make changes, corrections, modifications or improvements, to this document, and the products and services described herein at any
time, without notice.
All ST products are sold pursuant to ST’s terms and conditions of sale.
Purchasers are solely responsible for the choice, selection and use of the ST products and services described herein, and ST assumes no
liability whatsoever relating to the choice, selection or use of the ST products and services described herein.
No license, express or implied, by estoppel or otherwise, to any intellectual property rights is granted under this document. If any part of this
document refers to any third party products or services it shall not be deemed a license grant by ST for the use of such third party products
or services, or any intellectual property contained therein or considered as a warranty covering the use in any manner whatsoever of such
third party products or services or any intellectual property contained therein.
UNLESS OTHERWISE SET FORTH IN ST’S TERMS AND CONDITIONS OF SALE ST DISCLAIMS ANY EXPRESS OR IMPLIED
WARRANTY WITH RESPECT TO THE USE AND/OR SALE OF ST PRODUCTS INCLUDING WITHOUT LIMITATION IMPLIED
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE (AND THEIR EQUIVALENTS UNDER THE LAWS
OF ANY JURISDICTION), OR INFRINGEMENT OF ANY PATENT, COPYRIGHT OR OTHER INTELLECTUAL PROPERTY RIGHT.
UNLESS EXPRESSLY APPROVED IN WRITING BY TWO AUTHORIZED ST REPRESENTATIVES, ST PRODUCTS ARE NOT
RECOMMENDED, AUTHORIZED OR WARRANTED FOR USE IN MILITARY, AIR CRAFT, SPACE, LIFE SAVING, OR LIFE SUSTAINING
APPLICATIONS, NOR IN PRODUCTS OR SYSTEMS WHERE FAILURE OR MALFUNCTION MAY RESULT IN PERSONAL INJURY,
DEATH, OR SEVERE PROPERTY OR ENVIRONMENTAL DAMAGE. ST PRODUCTS WHICH ARE NOT SPECIFIED AS "AUTOMOTIVE
GRADE" MAY ONLY BE USED IN AUTOMOTIVE APPLICATIONS AT USER’S OWN RISK.
Resale of ST products with provisions different from the statements and/or technical features set forth in this document shall immediately void
any warranty granted by ST for the ST product or service described herein and shall not create or extend in any manner whatsoever, any
liability of ST.
                             ST and the ST logo are trademarks or registered trademarks of ST in various countries.
                           Information in this document supersedes and replaces all information previously supplied.
            The ST logo is a registered trademark of STMicroelectronics. All other names are the property of their respective owners.
                                                 © 2012 STMicroelectronics - All rights reserved
                                                     STMicroelectronics group of companies
   Australia - Belgium - Brazil - Canada - China - Czech Republic - Finland - France - Germany - Hong Kong - India - Israel - Italy - Japan -
       Malaysia - Malta - Morocco - Philippines - Singapore - Spain - Sweden - Switzerland - United Kingdom - United States of America
                                                                   www.st.com
44/44                                                        Doc ID 14817 Rev 4


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
STMicroelectronics:
 STULPI01BTBR STULPI01ATBR
