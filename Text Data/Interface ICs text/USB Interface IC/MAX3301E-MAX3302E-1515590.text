19-3275; Rev 3; 10/07
USB On-the-Go Transceivers and Charge Pumps
                             General Description                                                                     Features
                                                                                                                                          MAX3301E/MAX3302E
The MAX3301E/MAX3302E fully integrated USB On-the-                o USB 2.0-Compliant Full-/Low-Speed OTG
Go (OTG) transceivers and charge pumps allow mobile                 Transceivers
devices such as PDAs, cellular phones, and digital                o Ideal for USB On-the-Go, Embedded Host, or
cameras to interface directly with USB peripherals and              Peripheral Devices
each other without the need of a host PC. Use the
MAX3301E/MAX3302E with an embedded USB host to                    o ±15kV ESD Protection on ID_IN, VBUS, D+, and D-
directly connect to peripherals such as printers or                 Terminals
external hard drives.                                             o Charge Pump for VBUS Signaling and Operation
The MAX3301E/MAX3302E integrate a USB OTG trans-                    Down to 3V
ceiver, a VBUS charge pump, a linear regulator, and an            o Internal VBUS and ID Comparators
I2C-compatible, 2-wire serial interface. An internal level        o Internal Switchable Pullup and Pulldown
shifter allows the MAX3301E/MAX3302E to interface                   Resistors for Host/Peripheral Functionality
with +1.65V to +3.6V logic supply voltages. The
                                                                  o I2C Bus Interface with Command and Status
MAX3301E/MAX3302E’s OTG-compliant charge pump
                                                                    Registers
operates with +3V to +4.5V input supply voltages, and
supplies an OTG-compatible output on V BUS while                  o Linear Regulator Powers Internal Circuitry and
sourcing more than 8mA of output current.                           D+/D- Pullup Resistors
The MAX3301E/MAX3302E enable USB OTG communi-                     o Support SRP and HNP
cation from highly integrated digital devices that cannot
supply or tolerate the +5V VBUS levels that USB OTG                                          Ordering Information
requires. The device supports USB OTG session-request
protocol (SRP) and host-negotiation protocol (HNP).                                       PACKAGE
                                                                                                          PIN-               PKG
                                                                         PART               SIZE
The MAX3301E/MAX3302E provide built-in ±15kV elec-                                                        PACKAGE            CODE
                                                                                            (mm)
trostatic-discharge (ESD) protection for the VBUS, ID_IN,
D+, and D- terminals. The MAX3301E/MAX3302E are                    MAX3301EEBA-T           2.5 x 2.5      25 UCSP‡            B25-1
available in 25-bump chip-scale (UCSP™), 25-bump                   MAX3301EETJ               5x5          32 TQFN-EP**      T3255-4
WLP package, 28-pin TQFN, and 32-pin TQFN pack-
ages and operate over the extended -40°C to +85°C                  MAX3302EEBA-T*          2.5 x 2.5      25 UCSP‡            B25-1
temperature range.                                                 MAX3302EETI               4x4          28 TQFN-EP**      T2844-1
                                                                   MAX3302EEWA+T         2.54 x 2.54      25 WLP           W252A2-1
                                        Selector Guide
                                                                  Note: All devices specified over the -40°C to +85°C operating
                                         I2C ADDRESSES FOR        range.
                                                                  ‡UCSP bumps are in a 5 x 5 array. The UCSP package size is
    PART          POWER-UP STATE†         SPECIAL-FUNCTION
                                              REGISTER 2          2.5mm x 2.5mm x 0.62mm. Requires solder temperature profile
                                                                  described in the Absolute Maximum Ratings section. UCSP reli-
                 Shutdown (sdwn = 1,                              ability is integrally linked to the user’s assembly methods, circuit
                 bit 0 of special-                                board material and environment. See the UCSP Applications
MAX3301E                                 16h, 17h
                                                                  Information section of this data sheet for more information.
                 function register 2)
                                                                  *Future product—contact factory for availability.
                                                                  **EP = Exposed paddle.
                 Operating (sdwn = 1,
                                                                  T = Tape and reel.
MAX3302E         bit 0 of special-       10h, 11h, and 16h, 17h   +Denotes a lead-free package.
                 function register 2)
†The
   MAX3301E powers up in its lowest power state and the
MAX3302E powers up in the operational, VP/VM USB mode.
                                         Applications
        Mobile Phones              Digital Cameras
        PDAs                       MP3 Players
                                                                  Pin Configurations appear at end of data sheet.
                        ________________________________________________________________ Maxim Integrated Products                    1
For pricing, delivery, and ordering information, please contact Maxim Direct at 1-888-629-4642,
or visit Maxim’s website at www.maxim-ic.com.


                    USB On-the-Go Transceivers and Charge Pumps
                    ABSOLUTE MAXIMUM RATINGS
MAX3301E/MAX3302E
                    All voltages are referenced to GND.                                                             Continuous Power Dissipation (TA = +70°C)
                    VCC, VL .....................................................................-0.3V to +6V         25-Bump WLP (derate 12.2mW/°C above +70°C).......976mW
                    TRM (regulator off or supplied by VBUS) ..-0.3V to (VBUS + 0.3V)                                  25-Bump UCSP (derate 12.2mW/°C above +70°C) ....976mW
                    TRM (regulator supplied by VCC)...............-0.3V to (VCC + 0.3V)                               32-Pin TQFN (5mm x 5mm x 0.8mm) (derate 21.3mW/°C
                    D+, D- (transmitter tri-stated) ...................................-0.3V to +6V                      above +70°C).........................................................1702mW
                    D+, D- (transmitter functional)....................-0.3V to (VCC + 0.3V)                          28-Pin TQFN (4mm x 4mm x 0.8mm) (derate 20.8mW/°C
                    VBUS .........................................................................-0.3V to +6V           above +70°C).........................................................1666mW
                    ID_IN, SCL, SDA.......................................................-0.3V to +6V              Operating Temperature Range ...........................-40°C to +85°C
                    INT, SPD, RESET, ADD, OE/INT, RCV, VP,                                                          Junction Temperature ......................................................+150°C
                      VM, SUS, DAT_VP, SE0_VM ......................-0.3V to (VL + 0.3V)                            Storage Temperature Range .............................-65°C to +150°C
                    C+.............................................................-0.3V to (VBUS + 0.3V)           Lead Temperature (soldering, 10s) .................................+300°C
                    C-................................................................-0.3V to (VCC + 0.3V)         Bump Reflow Temperature (Note 1)
                    Short-Circuit Duration, VBUS to GND .........................Continuous                           Infrared (15s) ...............................................................+200°C
                                                                                                                      Vapor Phase (20s) .......................................................+215°C
                    Note 1: The UCSP package is constructed using a unique set of packaging techniques that impose a limit on the thermal profile the
                    device can be exposed to during board-level solder attach and rework. This limit permits only the use of the solder profiles recom-
                    mended in the industry-standard specification, JEDEC 020A, paragraph 7.6, Table 3 for IR/VPR and convection reflow. Preheating is
                    required. Hand or wave soldering is not allowed.
                    Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional
                    operation of the device at these or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to
                    absolute maximum rating conditions for extended periods may affect device reliability.
                    DC ELECTRICAL CHARACTERISTICS
                    (VCC = +3V to +4.5V, VL = +1.65V to +3.6V, CFLYING = 100nF, CVBUS = 1µF, ESRCVBUS = 0.1Ω (max), TA = TMIN to TMAX, unless
                    otherwise noted. Typical values are at VCC = +3.7V, VL = +2.5V, TA = +25°C.) (Note 2)
                                   PARAMETER                             SYMBOL                                  CONDITIONS                              MIN          TYP         MAX         UNITS
                     Supply Voltage                                         VCC                                                                           3.0                       4.5           V
                     TRM Output Voltage                                     VTRM                                                                          3.0                       3.6           V
                     Logic Supply Voltage                                    VL                                                                          1.65                      3.60           V
                     VL Supply Current                                       IVL          I2C interface in steady state                                                              5           µA
                                                                                          USB normal mode, CL = 50pF, device
                     VCC Operating Supply Current                            ICC                                                                                                    10           mA
                                                                                          switching at full speed
                     VCC Supply Current During Full-                                      VVBUS_DRV = 1, IVBUS = 0                                                     1.4           2
                                                                                                                                                                                                 mA
                     Speed Idle                                                           VVBUS_DRV = 0, D+ = high, D- = low                                           0.5          0.8
                     VCC Shutdown Supply Current                        ICC(SHDN)                                                                                      3.5          10           µA
                     VCC Interrupt Shutdown Supply
                                                                        ICC(ISHDN) ID_IN unconnected or high                                                           20           30           µA
                     Current
                     VCC Suspend Supply Current                                           USB suspend mode, ID_IN unconnected or high                                 170          500           µA
                     LOGIC I/O
                     RCV, DAT_VP, SE0_VM, INT,
                     OE/INT, VP, VM Output High                             VOH           IOUT = 1mA (sourcing)                                        VL - 0.4                                   V
                     Voltage
                     RCV, DAT_VP, SE0_VM, INT,
                     OE/INT, VP, VM Output Low                              VOL           IOUT = 1mA (sinking)                                                                      0.4           V
                     Voltage
                     OE/INT, SPD, SUS, RESET,
                     DAT_VP, SE0_VM Input High                               VIH                                                                       2/3 x VL                                   V
                     Voltage
                    2    _______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
DC ELECTRICAL CHARACTERISTICS (continued)
                                                                                                                                     MAX3301E/MAX3302E
(VCC = +3V to +4.5V, VL = +1.65V to +3.6V, CFLYING = 100nF, CVBUS = 1µF, ESRCVBUS = 0.1Ω (max), TA = TMIN to TMAX, unless
otherwise noted. Typical values are at VCC = +3.7V, VL = +2.5V, TA = +25°C.) (Note 2)
          PARAMETER                SYMBOL                     CONDITIONS                    MIN       TYP     MAX       UNITS
OE/INT, SPD, SUS, RESET
DAT_VP, SE0_VM Input Low             VIL                                                                       0.4       V
Voltage
ADD Input High Voltage              VIHA                                                   2/3 x VL                      V
ADD Input Low Voltage               VILA                                                                     1/3 x VL    V
Input Leakage Current                                                                                  ±1                µA
TRANSCEIVER SPECIFICATIONS
Differential Receiver Input
                                             |VD+ - VD-|                                     0.2                         V
Sensitivity
Differential Receiver Common-
                                                                                             0.8               2.5       V
Mode Voltage
Single-Ended Receiver Input Low
                                    VILD     D+, D-                                                            0.8       V
Voltage
Single-Ended Receiver Input
                                    VIHD     D+, D-                                          2.0                         V
High Voltage
Single-Ended Receiver Hysteresis                                                                      0.2                V
Single-Ended Output Low Voltage     VOLD     D+, D-, RL = 1.5kΩ from D+ or D- to 3.6V                          0.3       V
Single-Ended Output High Voltage    VOHD     D+, D-, RL = 15kΩ from D+ or D- to GND          2.8               3.6       V
Off-State Leakage Current                    D+, D-                                                            ±1        µA
                                             D+, D-, not         Low steady-state drive       2                13
Driver Output Impedance                                                                                                  Ω
                                             including REXT      High steady-state drive      2                13
ESD PROTECTION (VBUS, ID_IN, D+, D-)
Human Body Model                                                                                      ±15                kV
IEC 61000-4-2 Air-Gap Discharge                                                                       ±10                kV
IEC 61000-4-2 Contact Discharge                                                                        ±6                kV
THERMAL SHUTDOWN
                                                                                                                         o
Thermal Shutdown Low-to-High                                                                          +160                   C
                                                                                                                         o
Thermal Shutdown High-to-Low                                                                          +150                   C
CHARGE-PUMP SPECIFICATIONS (vbus_drv = 1)
VBUS Output Voltage                 VBUS     3V < VCC < 4.5V, CVBUS = 10µF, IVBUS = 8mA     4.80              5.25       V
VBUS Output Current                 IVBUS                                                     8                          mA
VBUS Output Ripple                           IVBUS = 8mA, CVBUS = 10µF                                100                mV
                     _______________________________________________________________________________________                     3


                    USB On-the-Go Transceivers and Charge Pumps
                    DC ELECTRICAL CHARACTERISTICS (continued)
MAX3301E/MAX3302E
                    (VCC = +3V to +4.5V, VL = +1.65V to +3.6V, CFLYING = 100nF, CVBUS = 1µF, ESRCVBUS = 0.1Ω (max), TA = TMIN to TMAX, unless
                    otherwise noted. Typical values are at VCC = +3.7V, VL = +2.5V, TA = +25°C.) (Note 2)
                               PARAMETER                SYMBOL                      CONDITIONS              MIN      TYP     MAX     UNITS
                     Switching Frequency                   fSW                                                       390              kHz
                     VBUS Leakage Voltage                           VVBUS_DRV = 0                                             0.2       V
                                                                    CVBUS = 10µF, IVBUS = 8mA, measured
                     VBUS Rise Time                                                                                           100      ms
                                                                    from 0 to +4.4V
                                                                    VVBUS_DISCHRG = 1, VVBUS_DRV = 0,
                     VBUS Pulldown Resistance                                                                3.8      5       6.5      kΩ
                                                                    VVBUS_CHRG = 0
                                                                    VVBUS_CHRG = 1, VVBUS_DRV = 0,
                     VBUS Pullup Resistance                                                                 650      930     1250      Ω
                                                                    VVBUS_DISCHRG = 0
                                                                    VVBUS_DISCHRG = 0, VVBUS_DRV = 0,
                     VBUS Input Impedance                ZINVBUS                                             40       70      100      kΩ
                                                                    VVBUS_CHRG = 0
                     COMPARATOR SPECIFICATIONS
                     VBUS Valid Comparator Threshold    VTH-VBUS                                             4.4     4.6      4.8       V
                     VBUS Valid Comparator Hysteresis   VHYS-VBUS                                                     50               mV
                     Session-Valid Comparator             VTH-
                                                                                                             0.8     1.4      2.0       V
                     Threshold                          SESS_VLD
                     Session-End Comparator               VTH-
                                                                                                             0.2     0.5      0.8       V
                     Threshold                          SESS_END
                     dp_hi Comparator Threshold                                                              0.8     1.3      2.0       V
                     dm_hi Comparator Threshold                                                              0.8     1.3      2.0       V
                     cr_int Pulse Width                                                                              750               ns
                     cr_int Comparator Threshold                                                             0.4     0.5      0.6       V
                     ID_IN SPECIFICATIONS
                                                                                                            0.2 x            0.8 x
                     ID_IN Input Voltage for Car Kit                                                                                    V
                                                                                                            VCC              VCC
                                                                                                                             0.1 x
                     ID_IN Input Voltage for A Device                                                                                   V
                                                                                                                             VCC
                                                                                                            0.9 x
                     ID_IN Input Voltage for B Device                                                                                   V
                                                                                                            VCC
                     ID_IN Input Impedance               ZID_IN                                              70      100      130      kΩ
                     ID_IN Input Leakage Current                    ID_IN = VCC                              -1               +1       µA
                     ID_IN Pulldown Resistance                      id_pulldown = 1                                  150      300      Ω
                     TERMINATING RESISTOR SPECIFICATIONS (D+, D-)
                     D+ Pulldown Resistor                           dp_pulldown = 1                         14.25     15     15.75     kΩ
                     D- Pulldown Resistor                           dm_pulldown = 1                         14.25     15     15.75     kΩ
                     D+ Pullup Resistor                             dp_pullup = 1                           1.425    1.5     1.575     kΩ
                     D- Pullup Resistor                             dm_pullup = 1                           1.425    1.5     1.575     kΩ
                    4   _______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                                                                            MAX3301E/MAX3302E
TIMING CHARACTERISTICS
(VCC = +3V to +4.5V, VL = +1.65V to +3.6V, CFLYING = 100nF, CVBUS = 1µF, ESRCVBUS = 0.1Ω (max), TA = TMIN to TMAX, unless
otherwise noted. Typical values are at VCC = +3.7V, VL = +2.5V, TA = +25°C.) (Note 2)
          PARAMETER                  SYMBOL                      CONDITIONS               MIN    TYP     MAX     UNITS
 TRANSMITTER CHARACTERISTICS (FULL-SPEED MODE)
 D+, D- Rise Time                        tR       Figures 2 and 5                          4              20       ns
 D+, D- Fall Time                        tF       Figures 2 and 5                          4              20       ns
 Rise-/Fall-Time Matching                         Figures 2 and 5 (Note 3)                90              110      %
 Output-Signal Crossover Voltage      VCRS_F      Figures 2, 6, and 7 (Note 3)            1.3             2.0       V
 TRANSMITTER CHARACTERISTICS (LOW-SPEED MODE)
 D+, D- Rise Time                        tR       Figures 2 and 5                         75              300      ns
 D+, D- Fall Time                        tF       Figures 2 and 5                         75              300      ns
 Rise-/Fall-Time Matching                         Figures 2 and 5                         80              125      %
 Output-Signal Crossover Voltage      VCRS_L      Figures 2, 6, and 7                     1.3             2.0       V
 TRANSMITTER TIMING (FULL-SPEED MODE)
 Driver Propagation Delay              tPLH       Low-to-high, Figures 2 and 6                            25
                                                                                                                   ns
 (DAT_VP, SE0_VM to D+, D-)            tPHL       High-to-low, Figures 2 and 6                            25
 Driver Disable Delay                  tPDZ       Figures 1 and 8                                         25       ns
 Driver Enable Delay                   tPZD       Figures 2 and 8                                         25       ns
 TRANSMITTER TIMING (LOW-SPEED MODE) (Low-speed delay timing is dominated by the slow rise and fall times.)
 SPEED-INDEPENDENT TIMING CHARACTERISTICS
 Receiver Disable Delay                tPVZ       Figure 4                                                30       ns
 Receiver Enable Delay                 tPZV       Figure 4                                                30       ns
 D+ Pullup Assertion Time                         During HNP                                               3       µs
 RCV Rise Time                           tR       Figures 3 and 5, CL = 15pF                      4                ns
 RCV Fall Time                           tF       Figures 3 and 5, CL = 15pF                      4                ns
 Differential-Receiver Propagation                Figures 3 and 10, |D+ - D-| to DAT_VP                   30
                                     tPHL, tPLH                                                                    ns
 Delay                                            Figures 3 and 9, |D+ - D-| to RCV                       30
 Single-Ended-Receiver                            Figures 3 and 9, D+, D- to DAT_VP,
                                     tPHL, tPLH                                                           30       ns
 Propagation Delay                                SE0_VM
 Interrupt Propagation Delay                                                                              100      µs
 VBUS_CHRG Propagation Delay                      Dominated by the VBUS rise time                0.2               µs
 Time to Exit Shutdown                                                                                     1       µs
 Shutdown Delay                                                                                           10       µs
                    _______________________________________________________________________________________             5


                    USB On-the-Go Transceivers and Charge Pumps
                    I2C-/SMBus™-COMPATIBLE TIMING SPECIFICATIONS
MAX3301E/MAX3302E
                    (VCC = +3V to +4.5V, VL = +1.65V to +3.6V, CFLYING = 100nF, CVBUS = 1µF, ESRCVBUS = 0.1Ω (max), TA = TMIN to TMAX, unless
                    otherwise noted. Typical values are at VCC = +3.7V, VL = +2.5V, TA = +25°C.) (Note 2)
                              PARAMETER                  SYMBOL                     CONDITIONS                       MIN      TYP       MAX      UNITS
                    Serial Clock Frequency                 fSCL                                                                         400       kHz
                    Bus-Free Time Between Stop and
                                                           tBUF                                                       1.3                          µs
                    Start Conditions
                    Start-Condition Hold Time             tHD_STA                                                     0.6                          µs
                    Stop-Condition Setup Time             tSU_STO                                                     0.6                          µs
                    Clock Low Period                       tLOW                                                       1.3                          µs
                    Clock High Period                      tHIGH                                                      0.6                          µs
                    Data Setup Time                       tSU_DAT                                                    100                           ns
                    Data Hold Time                        tHD_DAT    (Note 4)                                                           0.9        µs
                                                                                                                     20 +
                    Rise Time of SDA and SCL                 tR      (Note 5)                                        0.1 x              300        ns
                                                                                                                      CB
                    Fall Time of SDA and SCL                 tF      Measured from 0.3 x VL to 0.7 x VL (Note 5)                        300        ns
                    Capacitive Load for each Bus
                                                            CB                                                                          400        pF
                    Line
                    SDA AND SCL I/O STAGE CHARACTERISTICS
                                                                                                                                        0.3 x
                    Input-Voltage Low                       VIL                                                                                    V
                                                                                                                                         VL
                                                                                                                     0.7 x
                    Input-Voltage High                      VIH                                                                                    V
                                                                                                                      VL
                    SDA Output-Voltage Low                  VOL      ISINK = 3mA                                                        0.4        V
                    Pulse Width of Suppressed Spike         tSP      (Note 6)                                                  50                  ns
                    Note 2: Parameters are 100% production tested at +25°C. Limits over temperature are guaranteed by design.
                    Note 3: Guaranteed by bench characterization. Limits are not production tested.
                    Note 4: A master device must provide a hold time of at least 300ns for the SDA signal to bridge the undefined region of SCL’s falling
                            edge.
                    Note 5: CB is the total capacitance of one bus line in pF, tested with CB = 400pF.
                    Note 6: Input filters on SDA, SCL, and ADD suppress noise spikes of less than 50ns.
                    SMBus is a trademark of Intel Corporation.
                    6   _______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                                                                                                                                                                                                                                                                               MAX3301E/MAX3302E
                                                                                                                                                                    Typical Operating Characteristics
(Typical operating circuit, VCC = +3.7V, VL = +2.5V, CFLYING = 100nF, TA = +25°C, unless otherwise noted.)
                                            INPUT CURRENT (ICC)                                                                                 VBUS OUTPUT VOLTAGE                                                                                      VBUS OUTPUT VOLTAGE
                                         vs. VBUS OUTPUT CURRENT                                                                              vs. VBUS OUTPUT CURRENT                                                                                   vs. INPUT VOLTAGE (VCC)
                           50                                                                                                 5.50                                                                                                       5.75
                                                                                   MAX3301E toc01                                                                                             MAX3301E toc02                                                                                                  MAX3301E toc03
                                    VCC = 3.3V                                                                                           VCC = 3.0V                                                                                               LINEAR REGULATOR
                                    VCC = 4.2V                                                                                           VCC = 4.2V                                                                                               POWERED BY VCC
                                                                                                                              5.25
                           40                                                                                                                                                                                                            5.50
INPUT CURRENT (ICC) (mA)                                                                            VBUS OUTPUT VOLTAGE (V)                                                                                    VBUS OUTPUT VOLTAGE (V)
                                    LINEAR REGULATOR
                                    POWERED BY VCC                                                                            5.00
                           30                                                                                                                                                                                                            5.25
                                                                                                                              4.75
                           20                                                                                                                                                                                                            5.00               IVBUS = 0
                                                                                                                              4.50                                                                                                                                                 IVBUS = 8mA
                           10                                                                                                            LINEAR REGULATOR                                                                                4.75
                                                                                                                              4.25
                                                                                                                                         POWERED BY VCC
                           0                                                                                                  4.00                                                                                                       4.50
                                0          4      8       12      16          20                                                     0        5       10       15      20     25         30                                                     2.5   3.0     3.5       4.0   4.5      5.0      5.5       6.0
                                           VBUS OUTPUT CURRENT (mA)                                                                               VBUS OUTPUT CURRENT (mA)                                                                                    INPUT VOLTAGE (VCC) (V)
                                        TIME TO ENTER SHUTDOWN                                                                                 TIME TO EXIT SHUTDOWN                                                                                           VBUS DURING SRP
                                                                  MAX3301E toc04                                                                                             MAX3301E toc05                                                                                                  MAX3301E toc06
                                                                                      D+                                                                                                         D-
                                                                                      1V/div                                                                                                     1V/div                                                                                                       VBUS
                                                                                                                                                                                                                                                                                                              1V/div
                                                                                                                                                                                                                                                 CVBUS > 13μF
                                                                                      D-                                                                                                         D+
                                                                                      1V/div                                                                                                     1V/div
                                                                                                                                                                                                                                                                                                              VBUS
                                                                                                                                                                                                                                                                                                              1V/div
                                                                                      SCL                                                                                                        SCL
                                                                                      2V/div                                                                                                     1V/div
                                                                                                                                                                                                                                                 CVBUS > 96μF
                                                   100ns/div                                                                                                4μs/div                                                                                                     20ns/div
                           DRIVER PROPAGATION DELAY HIGH-TO-LOW                                                                 DRIVER PROPAGATION DELAY LOW-TO-HIGH                                                                       DRIVER PROPAGATION DELAY HIGH-TO-LOW
                                     (LOW-SPEED MODE)                                                                                     (LOW-SPEED MODE)                                                                                           (FULL-SPEED MODE)
                                                                 MAX3301E toc07                                                                                             MAX3301E toc08                                                                                                   MAX3301E toc09
                                                                                   DAT_VP                                                                                                     DAT_VP                                                                                                          DAT_VP
                                                                                   1V/div                                                                                                     1V/div                                                                                                          1V/div
                                                                                   D-                                                                                                         D+                                                                                                              D-
                                                                                   1V/div                                                                                                     1V/div                                                                                                          1V/div
                                                                                   D+                                                                                                         D-
                                                                                   1V/div                                                                                                     1V/div                                                                                                          D+
                                                                                                                                                                                                                                                                                                              1V/div
                                                  100ns/div                                                                                                100ns/div                                                                                                    4ns/div
                                                   _______________________________________________________________________________________                                                                                                                                                                      7


                    USB On-the-Go Transceivers and Charge Pumps
MAX3301E/MAX3302E
                                                                                    Typical Operating Characteristics (continued)
                    (Typical operating circuit, VCC = +3.7V, VL = +2.5V, CFLYING = 100nF, TA = +25°C, unless otherwise noted.)
                        DRIVER PROPAGATION DELAY LOW-TO-HIGH                          DRIVER ENABLE DELAY                                                                  DRIVER DISABLE DELAY
                                  (FULL-SPEED MODE)                                    (FULL-SPEED MODE)                                                                    (FULL-SPEED MODE)
                                                          MAX3301E toc10                                MAX3301E toc11                                                                              MAX3301E toc12
                                                                                                                                                                                                                         OE/INT
                                                                           DAT_VP                                        OE/INT                                                                                          1V/div
                                                                           1V/div                                        1V/div
                                                                           D+                                            D+                                                                                             D-
                                                                           1V/div                                        1V/div                                                                                         1V/div
                                                                                                                         D-                                                                                             D+
                                                                           D-                                            1V/div                                                                                         1V/div
                                                                           1V/div
                                              4ns/div                                       10ns/div                                                                                 10ns/div
                                  DRIVER ENABLE DELAY                                 DRIVER DISABLE DELAY                                                                     SUPPLY CURRENT
                                   (LOW-SPEED MODE)                                    (LOW-SPEED MODE)                                                                        vs. TEMPERATURE
                                                          MAX3301E toc13                                MAX3301E toc14
                                                                                                                                                        1.0
                                                                           OE/INT                                        OE/INT                                                                                      MAX3301E toc15
                                                                           1V/div                                        1V/div                         0.8
                                                                                                                                  SUPPLY CURRENT (mA)
                                                                                                                                                        0.6         VCC = 4.2V
                                                                           D+                                            D-
                                                                           1V/div                                        1V/div                                     VCC = 3.3V
                                                                                                                                                        0.4
                                                                                                                                                        0.2
                                                                           D-                                            D+                                     VBUS OFF
                                                                           1V/div                                        1V/div                                 FULL-SPEED IDLE
                          CD+ = CD- = 400pF
                                                                                                                                                         0
                                              100ns/div                                     10ns/div                                                          -40        -15        10      35      60          85
                                                                                                                                                                                 TEMPERATURE (°C)
                    8    _______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                                                        Pin Description
                                                                                                                                            MAX3301E/MAX3302E
               PIN
 MAX3302E      MAX3301E          UCSP/    NAME                                        FUNCTION
28-PIN TQFN   32-PIN TQFN         WLP
                                                 System-Side Data Input/Output. DAT_VP is an input if OE/INT is logic 0.
     1               2            D2      DAT_VP DAT_VP is an output if OE/INT is logic 1. Program the function of DAT_VP
                                                 with the dat_se0 bit (bit 2 of control register 1, see Table 7).
                                                   Input Power Supply. Connect a +3V to +4.5V supply to VCC and bypass to
   2, 25           3, 29         D1, E3    VCC     GND with a 1µF capacitor. The supply range enables direct powering from
                                                   one Li+ battery.
              1, 4, 9, 12, 17,
  3, 9, 23                         —       N.C.    No Connection. Not internally connected.
                  25, 28
     4               5            C1        C-     Charge-Pump Flying-Capacitor Negative Terminal
                                                 System-Side Data Input/Output. SE0_VM is an input if OE/INT is logic 0.
     5               6            C2      SE0_VM SE0_VM is an output if OE/INT is logic 1. Program the function of SE0_VM
                                                 with the dat_se0 bit (bit 2 of control register 1, see Table 7).
   6, 18           7, 21         B1, C5    GND     Ground
     7               8            A1       SDA     I2C-Compatible Serial Data Interface. Open-drain data input/output.
     8               10           B2       SCL     I2C-Compatible Serial Clock Input
                                                   Output Enable. OE/INT controls the input or output status of DAT_VP/SE0_VM
                                                   and D+/D-. When OE/INT is logic 0, the device is in transmit mode. When
                                                   OE/INT is logic 1, the device is in receive mode. When in suspend mode,
                                                   OE/INT can be programmed to function as an interrupt output that detects the
    10               11           A2      OE/INT
                                                   same interrupts as INT. The oe_int_en bit (bit 5 of control register 1, see Table
                                                   7) enables and disables the interrupt circuitry of OE/INT. The irq_mode bit (bit 1
                                                   of special-function register 2, see Table 15) programs the output configuration
                                                   of INT and OE/INT as open-drain or push-pull.
                                                   D+ and D- Differential Receiver Output. In receive mode (see Table 4), when
    11               13           A3       RCV     D+ is high and D- is low, RCV is high. In receive mode, when D+ is low and
                                                   D- is high, RCV is low. RCV is low in suspend mode.
                                                   Speed-Selector Input. Connect SPD to GND to select the low-speed data rate
                                                   (1.5Mbps). Connect SPD to VL to select the full-speed data rate (12Mbps).
                                                   Disable the SPD input by writing a 1 to spd_susp_ctl (bit 1 in special-function
    12               14           B3       SPD
                                                   register 1, see Table 14). The speed bit (bit 0 of control register 1, see Table
                                                   7) determines the maximum data rate of the MAX3301E/MAX3302E when the
                                                   SPD input is disabled.
                                                   System-Side Logic-Supply Input. Connect to the system’s logic-level power
                                                   supply, +1.65V to +3.6V. This sets the maximum output levels of the logic
    13               15           A4        VL
                                                   outputs and the input thresholds of the logic inputs. Bypass to GND with a
                                                   0.1µF capacitor.
                                                   Active-High Suspend Input. Drive SUS low for normal USB operation. Drive
                                                   SUS high to enable suspend mode. RCV asserts low in suspend mode.
                                                   Disable the SUS input by writing a 1 to spd_susp_ctl (bit 1 in special-function
    14               16           A5       SUS
                                                   register 1, see Table 14). The suspend bit (bit 1 of control register 1, see
                                                   Table 7) determines the operating mode of the MAX3301E/MAX3302E when
                                                   the SUS input is disabled.
                _______________________________________________________________________________________                                 9


                    USB On-the-Go Transceivers and Charge Pumps
                                                                                                                         Pin Description (continued)
MAX3301E/MAX3302E
                                              PIN
                      MAX3302E                MAX3301E           UCSP/        NAME                                             FUNCTION
                     28-PIN TQFN             32-PIN TQFN          WLP
                                                                                          Active-Low Interrupt Source. Program the INT output as push-pull or open-
                           15                       18              B4          INT       drain with the irq_mode bit (bit 1 of special-function register 2, see Tables 15
                                                                                          and 16).
                                                                                          Active-Low Reset Input. Drive RESET low to asynchronously reset the
                           16                       19              B5        RESET
                                                                                          MAX3301E/MAX3302E.
                           17                       20              C3         ADD        I2C-Interface Address Selection Input. (See Table 5.)
                                                                                          ID Input. ID_IN is internally pulled up to VCC. The state of ID_IN determines
                           19                       22              C4         ID_IN
                                                                                          ID bits 3 and 5 of the interrupt source register (see Table 10).
                                                                                          USB Differential Data Input/Output. Connect D- to the D- terminal of the USB
                           20                       23              D5           D-
                                                                                          connector through a 27.4Ω ±1% series resistor.
                                                                                          USB Differential Data Input/Output. Connect D+ to the D+ terminal of the USB
                           21                       24              E5          D+
                                                                                          connector through a 27.4Ω ±1% series resistor.
                                                                                          Single-Ended Receiver Output. VM functions as a receiver output in all
                           22                       26              D4          VM
                                                                                          operating modes. VM duplicates D-.
                                                                                          USB Transceiver Regulated Output Voltage. TRM provides a regulated 3.3V
                                                                                          output. Bypass TRM to GND with a 1µF ceramic capacitor installed as close
                                                                                          to the device as possible. TRM normally derives power from VCC. TRM
                           24                       27              E4         TRM        provides power to internal circuitry and provides the pullup voltage for the
                                                                                          internal USB pullup resistor. Do not use TRM to power external circuitry. The
                                                                                          reg_sel bit (bit 3 of special-function register 2, see Table 15 and Table 16)
                                                                                          controls the TRM power source with software.
                                                                                          Single-Ended Receiver Output. VP functions as a receiver output in all
                           26                       30              D3           VP
                                                                                          operating modes. VP duplicates D+.
                                                                                          USB Bus Power. Use VBUS as an output to power the USB bus, or as an input
                           27                       31              E2         VBUS       to power the internal linear regulator. Bits 5 to 7 of control register 2 (see
                                                                                          Table 8) control the charging and discharging functions of VBUS.
                           28                       32              E1          C+        Charge-Pump Flying-Capacitor Positive Terminal
                           EP                       EP              —            EP       Exposed Paddle. Connect EP to GND or leave unconnected.
                                                                                                         Test Circuits and Timing Diagrams
                                                         LOAD FOR DISABLE TIME (D+/D-) MEASUREMENT
                                       TEST POINT        V = 0 FOR tPHZ.                                                       TEST POINT
                                                         V = VTRM FOR tPLZ.                                                              LOAD FOR
                                 27.4Ω         220Ω                                                                  27.4Ω               1) ENABLE TIME (D+/D-) MEASUREMENT
                                                         CL = 50pF FOR FULL SPEED.
                         DUT                                                                                 DUT                         2) DAT_VP/SEO_VM TO D+/D- PROPAGATION DELAY
                                                         CL = 200pF TO 600pF FOR LOW SPEED.
                               D+/D-                                                                               D+/D-                 3) D+/D- RISE/FALL TIMES
                                              CL          V                                                             15kΩ           CL CL = 50pF FOR FULL SPEED.
                                                                                                                                            CL = 200pF TO 600pF FOR LOW SPEED.
                    Figure 1. Load for Disable Time Measurement                                          Figure 2. Load for Enable Time, Transmitter Propagation Delay,
                                                                                                         and Transmitter Rise/Fall Times
                    10   ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                       Test Circuits and Timing Diagrams (continued)
                                                                                                                                                                                   MAX3301E/MAX3302E
                 TEST POINT                                                                            VL
                          LOAD FOR                                                                     OE/INT           VL / 2                VL / 2
  DUT                     1) D+/D- TO RCV/VP/VM/DAT_VP/SEO_VM PROPAGATION DELAYS
        RCV, VP, VM,      2) RCV/VP/VM/DAT_VP/SEO_VM RISE/FALL TIMES (CL = 15pF)                       0V
                                                                                                                                 tPZD                 tPDZ
        DAT_VP,           CL                                                                           VOH
        SEO_VM                                                                                                                                      VOHD - 0.3V
                                                                                                       D+ OR D-
                                                                                                                           VOLD + 0.3V
                                                                                                       VOL
Figure 3. Load for Receiver Propagation Delay and Receiver
Rise/Fall Times
                                                                                   Figure 8. Enable and Disable Timing
                           TEST POINT
                                            270Ω
                    DUT
                          DAT_VP                                                       D+                                                                                3V
                          SEO_VM                             V = 2/3 x VL
                                                                                       D-                                                                                0V
                                                                                                                                 tPHL                             tPLH
                                                                                      RCV                                                                                VL
Figure 4. Load for DAT_VP, SE0_VM Enable/Disable Time
Measurements                                                                                                                                                             VL / 2
                                                                                                                                                                         0V
                               tR                           tF                                                                   tPHL                             tPLH
                                                                                   DAT_VP                                                                                VL
             VOH
                                                                    90%
                                                                                                                                                                         VL / 2
                                                                                                                                                                         0V
                                                                                                                                 tPLH                             tPHL
                                                                    10%            SE0_VM                                                                                VL
              VOL
                                                                                                                                                                         VL / 2
Figure 5. Rise and Fall Times                                                                                                                                            0V
                                                                                            D+/D- RISE/FALL TIMES ≤ 8ns, VL = 1.8V, 2.5V, OR 3.3V
          DAT_VP
                               tPHL                  tPLH
                                                                                   Figure 9. D+/D- to RCV, DAT_VP, SE0_VM Propagation Delays
          SE0_VM                                                                   (VP_VM Mode)
          D+ VOHD
                                           VCRS_F, VCRS_L        VCRS_F, VCRS_L
          D- VOLD                                                                      D+                                                                                3V
Figure 6. Timing of DAT_VP, SE0_VM to D+, D- in VP_VM                                  D-                                                                                0V
Mode (dat_se0 = 0)                                                                                              tPHL                                    tPLH
                                                                                   DAT_VP                                                                                VL
            DAT_VP                                                                                                                                                       VL / 2
                                    tPHL               tPLH
                                                                                                                                                                         0V
            SE0_VM
            D+ VOHD
                                                                                   SE0_VM
                                            VCRS_F, VCRS_L        VCRS_F, VCRS_L
                                                                                            D+/D- RISE/FALL TIMES ≤ 8ns, VL = 1.8V, 2.5V, OR 3.3V
            D- VOLD
Figure 7. Timing of DAT_VP, SE0_VM to D+/D- in DAT_SE0                             Figure 10. D+/D- to DAT_VP, SE0_VM Propagation Delays
Mode (dat_se0 = 1)                                                                 (DAT_SE0 Mode)
                           ______________________________________________________________________________________                                                             11


                    USB On-the-Go Transceivers and Charge Pumps
                                                                                                                     Block Diagram
MAX3301E/MAX3302E
                                                                                      ID
                                                                                                             ID_IN
                                                                                   DETECTOR
                                                  ADD                                                        C+
                                                                                     VBUS                    C-
                                                   INT      SERIAL               CHARGE PUMP
                                                RESET     CONTROLLER
                                                                                    VBUS                     VBUS
                                                                                 COMPARATORS
                                                                                     LINEAR                  TRM
                                                                                   REGULATOR
                                                  SCL
                                                                                PULLUP/PULLDOWN
                                                  SDA                               RESISTORS
                                                                           CAR KIT INTERRUPT
                                                                               DETECTOR
                                               DAT_VP
                                                                                                             D+
                                               SE0_VM                                      DIFF
                                                OE/INT                                      TX
                                                                                                             D-
                                                   VP
                                                   VM                                      DIFF
                                                                      LEVEL
                                                  RCV              TRANSLATOR               RX
                                                  VCC
                                                         POWER                        SE
                                                   VL    BLOCK                        D+
                                                  GND
                                                                                      SE
                                                  SPD                                 D-
                                                  SUS                                             MAX3301E
                                                                                                  MAX3302E
                    Figure 11. Block Diagram
                    12   ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                        Detailed Description                  accordance with USB OTG specifications. The charge
                                                                                                                               MAX3301E/MAX3302E
                                                              pump can be turned off to conserve power when not
The USB OTG specification defines a dual-role USB
                                                              used. Control of the charge pump is set through the
device that acts either as an A device or as a B device.
                                                              vbus_drv bit (bit 5) of control register 2 (see Table 8).
The A device supplies power on V BUS and initially
serves as the USB host. The B device serves as the ini-                                      Linear Regulator (TRM)
tial peripheral and requires circuitry to monitor and pulse   An internal 3.3V linear regulator powers the transceiver
VBUS. These initial roles can be reversed using HNP.          and the internal 1.5kΩ D+/D- pullup resistor. Under the
The MAX3301E/MAX3302E combine a low- and full-                control of internal register bits, the linear regulator can be
speed USB transceiver with additional circuitry required      powered from VCC or VBUS. The regulator power-supply
by a dual-role device. The MAX3301E/MAX3302E                  settings are controlled by the reg_sel bit (bit 3) in special-
employ flexible switching circuitry to enable the device      function register 2 (Tables 15 and 16). This flexibility
to act as a dedicated host or peripheral USB transceiv-       allows the system designer to configure the MAX3301E/
er. For example, the charge pump can be turned off and        MAX3302E for virtually any USB power situation.
the internal regulator can be powered from VBUS for           The output of the TRM is not a power supply. Do not use
bus-powered peripheral applications.                          as a power source for any external circuitry. Connect a
The Selector Guide shows the differences between the          1.0µF (or greater) ceramic or plastic capacitor from TRM
MAX3301E and MAX3302E. The MAX3301E powers up                 to GND, as close to the device as possible.
in its lowest power state and must be turned on by set-
ting the sdwn bit to 0. The MAX3302E powers up in the
                                                                         VBUS Level-Detection Comparators
                                                              Comparators drive interrupt source register bits 0, 1,
operational, VP/VM USB mode. This allows a micro-
                                                              and 7 (Table 10) to indicate important USB OTG VBUS
processor (µP) to use the USB port for power-on boot-
                                                              voltage levels:
up, without having to access I2C. To put the MAX3302E
into low-power shutdown, set the sdwn bit to 0. In the        • VBUS is valid (vbus_vld)
MAX3302E, special-function register 2 can be                  •   USB session is valid (sess_vld)
addressed at I2C register location 10h, 11h (as well as
locations 16h, 17h) to support USB OTG serial-interface       •   USB session has ended (sess_end)
engine (SIE) implementations that are limited to I2C          The vbus_valid comparator sets vbus_vld to 1 if VBUS is
register addresses between 0h and 15h.                        higher than the VBUS valid comparator threshold. The
                                                              VBUS valid status bit (vbus_vld) is used by the A device
                                          Transceiver         to determine if the B device is sinking too much current
The MAX3301E/MAX3302E transceiver complies with               (i.e., is not supported). The session_valid comparator
the USB version 2.0 specification, and operates at full-      sets sess_vld to 1 if VBUS is higher than the session
speed (12Mbps) and low-speed (1.5Mbps) data rates.            valid comparator threshold. This status bit indicates that
Set the data rate with the SPD input. Set the direction of    a data transfer session is valid. The session_end com-
data transfer with the OE/INT input. Alternatively, control   parator sets sess_end to 1 if VBUS is higher than the
transceiver operation with control register 1 (Table 7)
and special-function registers 1 and 2 (see Tables 14,
15, and 16).
                                                                           VBUS
                                        Level Shifters
Internal level shifters allow the system-side interface to
                                                                                                      VBUS_VLD
run at logic-supply voltages as low as +1.65V. Interface                          VTH-VBUS
logic signals are referenced to the voltage applied to
the logic-supply voltage, VL.
                                                                                                      SESS_VLD
                                        Charge Pump                           VTH-SESS_VLD
The MAX3301E/MAX3302E’s OTG-compliant charge
pump operates with +3V to +4.5V input supply voltages
(VCC) and supplies a +4.8V to +5.25V OTG-compatible                                                   SESS_END
output on VBUS while sourcing the 8mA or greater out-                         VTH-SESS_END
put current that an A device is required to supply.
Connect a 0.1µF flying capacitor between C+ and C-.
Bypass VBUS to GND with a 1µF to 6.5µF capacitor, in          Figure 12. Comparator Network Diagram
                   ______________________________________________________________________________________                13


                    USB On-the-Go Transceivers and Charge Pumps
                    session end comparator threshold. Figure 12 shows the                   •   Discharge VBUS through a resistor
MAX3301E/MAX3302E
                    level-detector comparators. The interrupt-enable regis-                 •   Provide power-on or receive power from VBUS
                    ters (Tables 12 and 13) determine whether a falling or
                    rising edge of VBUS asserts these status bits.                          •   Charge VBUS through a resistor
                                                                                            The OTG supplement allows an A device to turn VBUS
                                                                              ID_IN         off when the bus is not being used to conserve power.
                    The USB OTG specification defines an ID input that                      The B device can issue a request that a new session be
                    determines which dual-role device is the default host.                  started using SRP. The B device must discharge VBUS
                    An OTG cable connects ID to ground in the connector                     to a level below the session-end threshold (0.8V) to
                    of one end and is left unconnected in the other end.                    ensure that no session is in progress before initiating
                    Whichever dual-role device receives the grounded end                    SRP. Setting bit 6 of control register 2 to 1, discharges
                    becomes the A device. The MAX3301E/MAX3302E pro-                        VBUS to GND through a 5kΩ current-limiting resistor.
                    vide an internal pullup resistor on ID_IN. Internal com-                When VBUS has discharged, the resistor is removed
                    parators detect if ID_IN is grounded or left floating.                  from the circuit by resetting bit 6 of control register 2.
                                                               Interrupt Logic              An OTG A device is required to supply power on VBUS.
                    When OTG events require action, the MAX3301E/                           The MAX3301E/MAX3302E provide power to VBUS from
                    MAX3302E provide an interrupt output signal on INT.                     VCC or from the internal charge pump. Set bit 5 in control
                    Alternatively, OE/INT can be configured to act as an                    register 2 to 1 in both cases. Bit 5 in control register 2
                    interrupt output while the device operates in USB sus-                  controls a current-limited switch, preventing damage to
                    pend mode. Program INT and OE/INT as open-drain or                      the device in the event of a VBUS short circuit.
                    push-pull interrupts with irq_mode (bit 1 of special-func-              An OTG B device (peripheral mode) can request a ses-
                    tion register 2, see Tables 15 and 16).                                 sion using SRP. One of the steps in implementing SRP
                                                                                            requires pulsing VBUS high for a controlled time. A 930Ω
                                                       VBUS Power Control
                                                                                            resistor limits the current according to the OTG specifi-
                    VBUS is a dual-function port that powers the USB bus
                                                                                            cation. Pulse VBUS through the pullup resistor by assert-
                    and/or provides a power source for the internal linear reg-
                                                                                            ing bit 7 of control register 2. Prior to pulsing VBUS (bit
                    ulator. The VBUS power-control block performs the various
                                                                                            7), a B device first connects an internal pulldown resis-
                    switching functions required by an OTG dual-role device.
                                                                                            tor to discharge VBUS below the session-end threshold.
                    These actions are programmed by the system logic using
                                                                                            The discharge current is limited by the 5kΩ resistor and
                    bits 5 to 7 of control register 2 (see Table 8) to:
                                                                                            set by bit 6 of control register 2. An OTG A device must
                    Table 1. Functional Blocks Enabled During Specific Operating Modes
                                                   sess_end       sess _vld     vbus_ vld       cr_int      dp_hi     dm_hi                     DIFF    SE
                         MODE       I2C   ID_IN                                                                                 TRM      TX
                                                    COMP           COMP          COMP           COMP        COMP      COMP                       RX     RX
                     Shutdown1      ✓       X           X             X             X              X           X          X       X       X      X       X
                      Interrupt
                                    ✓       ✓           X             ✓             X              X           ✓          ✓       X       X      X       X
                     Shutdown2
                     Suspend3       ✓       ✓          ✓              ✓             ✓              ✓           ✓          ✓       ✓      ✓       X       ✓
                      Normal
                                    ✓       ✓          ✓              ✓             ✓              ✓           ✓          ✓       ✓      ✓       ✓       ✓
                     Operating
                     = Enabled.
                    X = Disabled.
                    1. For the MAX3301E, enter shutdown mode by writing a 1 to sdwn (bit 0 of special-function register 2). For the MAX3302E, enter
                       shutdown mode by writing a 0 to sdwn (bit 0 of special-function register 2).
                    2. Enter interrupt shutdown mode by writing a 1 to int_sdwn (bit 0 of special-function register 1).
                    3. Enter suspend mode by writing a 1 to spd_susp_ctl (bit 1 of special-function register 1) and suspend (bit 1 of control register 1), or
                       by writing a 0 to spd_susp_ctl (bit 1 of special-function register 1) and driving SUS high.
                    14    ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
supply 5V power and at least 8mA on VBUS. Setting bit          this mode, OE/INT detects the same interrupts as INT.
                                                                                                                              MAX3301E/MAX3302E
5 of control register 2 turns on the VBUS charge pump.         Set irq_mode (bit 1 in special-function register 2, see
                                                               Tables 15 and 16) to 0 to program OE/INT as an open-
                                    Operating Modes            drain interrupt output. Set irq_mode to 1 to configure
The MAX3301E/MAX3302E have four operating modes to             OE/INT as a push-pull interrupt output.
optimize power consumption. Only the I2C interface
remains active in shutdown mode, reducing supply cur-                                                               RCV
rent to 1µA. The I2C interface, the ID_IN port, and the        RCV monitors D+ and D- when receiving data. RCV is a
session-valid comparator all remain active in interrupt        logic 1 for D+ high and D- low. RCV is a logic 0 for D+
shutdown mode. RCV asserts low in suspend mode; how-           low and D- high. RCV retains its last valid state when D+
ever, all other circuitry remains active. Table 1 lists the    and D- are both low (single-ended zero, or SE0). RCV
active blocks’ power in each of the operating modes.           asserts low in suspend mode. Table 4 shows the state
                                                               of RCV.
                 Applications Information
                                                                                                                     SPD
                                         Data Transfer         Use hardware or software to control the slew rate of the
                          Transmitting Data to the USB         D+ and D- terminals. The SPD input sets the slew rate of
The MAX3301E/MAX3302E transceiver features two                 the MAX3301E/MAX3302E when spd_susp_ctl (bit 1 in
modes of transmission: DAT_SE0 or VP_VM (see Table 3).         special-function register 1, see Table 14) is 0. Drive SPD
Set the transmitting mode with dat_se0 (bit 2 in control       low to select low-speed mode (1.5Mbps). Drive SPD
register 1, see Table 7). In DAT_SE0 mode with OE/INT          high to select full-speed mode (12Mbps). Alternatively,
low, DAT_VP specifies data for the differential transceiv-     when spd_susp_ctl (bit 1 of special-function register 1)
er, and SE0_VM forces D+/D- to the single-ended zero           is 1, software controls the slew rate. The SPD input is
(SE0) state. In VP_VM mode with OE/INT low, DAT_VP             ignored when using software to control the data rate.
drives D+, and SE0_VM drives D-. The differential              The speed bit (bit 0 of control register 1, see Table 7)
receiver determines the state of RCV.                          sets the slew rate when spd_susp_ctl = 1.
                          Receiving Data from the USB                                                             SUS
The MAX3301E/MAX3302E transceiver features two                 Use hardware or software to control the suspend mode
modes of receiving data: DAT_SE0 or VP_VM (see                 of the MAX3301E/MAX3302E. Set spd_susp_ctl (bit 1 of
Table 4). Set the receiving mode with dat_se0 (bit 2 in        special-function register 1, see Table 14) to 0 to allow
control register 1, see Table 7). In DAT_SE0 mode with         the SUS input to enable and disable the suspend mode
OE/INT high, DAT_VP is the output of the differential          of the MAX3301E/MAX3302E. Drive SUS low for normal
receiver and SE0_VM indicates that D+ and D- are both          operation. Drive SUS high to enable suspend mode.
logic-low. In VP_VM mode with OE/INT high, DAT_VP              RCV asserts low in suspend mode while all other circuit-
provides the input logic level of D+ and SE0_VM pro-           ry remains active.
vides the input logic level of D-. The differential receiver   Alternatively, when the spd_susp_ctl bit (bit 1 of special-
determines the state of RCV. VP and VM echo D+ and             function register 1) is set to 1, software controls the sus-
D-, respectively.                                              pend mode. Set the suspend bit (bit 1 of control register
                                                   OE/INT      1, see Table 7) to 1 to enable suspend mode. Set the
OE/INT controls the direction of communication. OE/INT         suspend bit to 0 to resume normal operation. The SUS
can also be programmed to act as an interrupt output           input is ignored when using software to control suspend
when in suspend mode. The output-enable portion con-           mode. The MAX3301E/MAX3302E must be in full-speed
trols the input or output status of DAT_VP/SE0_VM and          mode (SPD = high or speed = 1) to issue a remote
D+/D-. When OE/INT is a logic 0, DAT_VP and SE0_VM             wake-up from the device when in suspend mode.
function as inputs to the D+ and D- outputs in a method                                                        RESET
depending on the status of dat_se0 (bit 2 in control reg-      The active-low RESET input allows the MAX3301E/
ister 1). When OE/INT is a logic 1, DAT_VP and SE0_VM          MAX3302E to be asynchronously reset without cycling
indicate the activity of D+ and D-.                            the power supply. Drive RESET low to reset the internal
OE/INT functions as an interrupt output when the               registers (see Tables 7–16 for the default power-up
MAX3301E/MAX3302E is in suspend mode and                       states). Drive RESET high for normal operation.
oe_int_en = 1 (bit 5 in control register 1, see Table 7). In
                   ______________________________________________________________________________________               15


                    USB On-the-Go Transceivers and Charge Pumps
                             2-Wire I2C-Compatible Serial Interface
MAX3301E/MAX3302E
                                                                                                            Table 2. Setting the Direction of Data
                    A register file controls the various internal switches and
                    operating modes of the MAX3301E/MAX3302E through
                                                                                                            Transfer in General-Purpose Buffer Mode
                    a simple 2-wire interface operating at clock rates up to                                                                      DIRECTION OF DATA
                    400kHz. This interface supports data bursting, where                                       dplus_dir       dminus_ dir
                                                                                                                                                      TRANSFER
                    multiple data phases can follow a single address phase.
                                                                                                                                                       DAT_VP → D+
                                                                               UART Mode                               0            0
                                                                                                                                                       SE0_VM → D-
                    Set uart_en (bit 6 in control register 1) to 1 to place the
                    MAX3301E/MAX3302E in UART mode. D+ transfers                                                                                       DAT_VP → D+
                                                                                                                       0            1
                    data to DAT_VP and SE0_VM transfers data to D- in                                                                                  SE0_VM ← D-
                    UART mode.                                                                                                                         DAT_VP ← D+
                                                                                                                       1            0
                                                                                                                                                       SE0_VM → D-
                                               General-Purpose Buffer Mode
                    Set gp_en (bit 7 in special-function register 1) and                                                                               DAT_VP ← D+
                                                                                                                       1            1
                    dat_se0 (bit 2 in control register 1) to 1, set uart_en (bit 6                                                                     SE0_VM ← D-
                    in control register 1) to 0, and drive OE/INT low to place
                    the MAX3301E/MAX3302E in general-purpose buffer
                                                                                                           pullup resistor, typically 4.7kΩ. The MAX3301E/
                    mode. Control the direction of data transfer with dmi-
                                                                                                           MAX3302E SCL line only operates as an input. SCL
                    nus_dir and dplus_dir (bits 3 and 4 of special-function
                                                                                                           requires a pullup resistor if there are multiple masters on
                    register 1, see Tables 2 and 14).
                                                                                                           the 2-wire interface, or if the master in a single-master
                                                          Serial Addressing                                system has an open-drain SCL output.
                    The MAX3301E/MAX3302E operate as a slave device                                        Each transmission consists of a start condition (see
                    that sends and receives control and status signals                                     Figure 14) sent by a master device, the MAX3301E/
                    through an I2C-compatible 2-wire interface. The inter-                                 MAX3302E 7-bit slave address (determined by the state
                    face uses a serial data line (SDA) and a serial clock line                             of ADD), plus an R/W bit (see Figure 15), a register
                    (SCL) to achieve bidirectional communication between                                   address byte, one or more data bytes, and a stop condi-
                    master(s) and slave(s). A master (typically a microcon-                                tion (see Figure 14).
                    troller) initiates all data transfers to and from the
                    MAX3301E/MAX3302E and generates the SCL clock
                    that synchronizes the data transfer (Figure 13).
                    The MAX3301E/MAX3302E SDA line operates as both an
                    input and as an open-drain output. SDA requires a
                         SDA
                                                                                        tSU: STA                                                    tBUF
                                                             tSU: DAT
                                                tLOW                         tHD: DAT
                                                                                                                    tHD: STA      tSU: STO
                         SCL
                                                            tHIGH
                         tHD: STA
                                                       tR               tF
                                      START                                                        REPEATED START                              STOP      START
                                    CONDITION                                                        CONDITION                               CONDITION CONDITION
                    Figure 13. 2-Wire Serial-Interface Timing Details
                    16    ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                                                                                              MAX3301E/MAX3302E
Table 3. Transmit Mode
                               CONTROL PIN/BIT                       INPUT                 OUTPUT
   MODE                                                                                                             DESCRIPTION
                   SUS     GP_EN      OE/INT     DAT_SE0     DAT_VP     SE0_VM         D+             D-
                    0           0       0               1        0           0         0              1
 Functional         0           0          0            1        1           0         1              0
 DAT_SE0            0           0          0            1        0           1         0              0
                    0           0          0            1        1           1         0              0      USB functional mode
                                                                                                             transceiver and I2C interface
                    0           0          0            0        0           0         0              0      are fully functional
 Functional         0           0          0            0        1           0         1              0
  VP_VM             0           0          0            0        0           1         0              1
                    0           0          0            0        1           1         1              1
                    1           0          0            1        0           0         0              1
                    1           0          0            1        1           0         1              0
                    1           0          0            1        0           1         0              0
                    1           0          0            1        1           1         0              0
                    1           0          0            0        0           0         0              0
  Suspend                                                                                                    USB suspend mode
                    1           0          0            0        1           0         1              0
                    1           0          0            0        0           1         0              1
                    1           0          0            0        1           1         1              1
                                                                                    Driver is    Driver is
                    1           0          1            X        X           X
                                                                                      Hi-Z         Hi-Z
                                                                                    Driver is    Driver is
 Receiving          0           0          1            X        X           X                             See Table 4
                                                                                      Hi-Z         Hi-Z
  General-
                                                                                                             General-purpose buffer
  purpose           X           1          0            1                    See Table 2
                                                                                                             mode
   buffer
    SDA
    SCL    S                                        P
        START                                      STOP
      CONDITION                                  CONDITION
Figure 14. Start and Stop Conditions
                           1           0            0        1          0          0            A0           R/W        ACK
     SDA
           START          MSB                                                                   LSB
     SCL
Figure 15. Slave Address
                        ______________________________________________________________________________________                           17


                    USB On-the-Go Transceivers and Charge Pumps
MAX3301E/MAX3302E
                    Table 4. Receive Mode
                                                      CONTROL PIN/BIT                        INPUTS                         OUTPUTS
                          MODE          SUS
                                                  GP_EN      OE/INT     DAT_SE0      BI_DI D+     D-    DAT_VP       SE0_VM        RCV        VP      VM
                                      (NOTE 7)
                                                                                                       Last value               Last value
                                          0           0         1           1          1      0    0                    1
                                                                                                       of DAT_VP                 of RCV
                                          0           0         1           1          1      1    0        1           0           1
                                          0           0         1           1          1      0    1        0           0           0
                         Functional
                                          0           0         1           1          1      1    1    Undefined       0       Undefined
                         DAT_SE0
                                          1           0         1           1          1      0    0        0           1           0
                                          1           0         1           1          1      1    0        1           0           0
                                          1           0         1           1          1      0    1        0           0           0
                                          1           0         1           1          1      1    1        1           0           0
                                                                                                                                Last value
                                          0           0         1           0          1      0    0        0           0
                                                                                                                                 of RCV
                                          0           0         1           0          1      1    0        1           0           1
                                          0           0         1           0          1      0    1        0           1           0        Echo    Echo
                         Functional                                                                                                           D+      D-
                                          0           0         1           0          1      1    1        1           1       Undefined
                          VP_VM
                                          1           0         1           0          1      0    0        0           0           0
                                          1           0         1           0          1      1    0        1           0           0
                                          1           0         1           0          1      0    1        0           1           0
                                          1           0         1           0          1      1    1        1           1           0
                        General-
                                          X           1         X           X          X               See Table 2                  0
                     purpose buffer
                      Transmitting
                                          X          X          0           X          X                    —                       0
                     (see Table 3)
                     Unidirectional
                      (transmitter        X          X          X           X          0                    —                       0
                          only)
                    Note 7: Enter suspend mode by driving SUS high or by writing a 1 to suspend (bit 1 in control register 1), depending on the status of
                    spd_susp_ctl in special-function register 1.
                    X = Don’t care.
                    18    ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                                                                                                      MAX3301E/MAX3302E
                              Start and Stop Conditions                              an ACK when receiving an address or data by pulling
Both SCL and SDA assert high when the interface is not                               SDA low during the ninth clock period. When transmit-
busy. A master device signals the beginning of a trans-                              ting data, the MAX3301E/MAX3302E wait for the receiv-
mission with a start (S) condition by transitioning SDA                              ing device to generate an ACK. Monitoring ACK allows
from high to low while SCL is high. The master issues a                              for detection of unsuccessful data transfers. An unsuc-
stop (P) condition by transitioning SDA from low to high                             cessful data transfer occurs if a receiving device is busy
while SCL is high. The bus is then free for another trans-                           or if a system fault has occurred. In the event of an
mission (see Figure 14).                                                             unsuccessful data transfer, the bus master should reat-
                                                                                     tempt communication at a later time.
                                            Bit Transfer
One data bit is transferred during each clock pulse. The                                                                       Slave Address
data on SDA must remain stable while SCL is high (see                                A bus master initiates communication with a slave
Figure 16).                                                                          device by issuing a START condition followed by the 7-
                                                                                     bit slave address (see Figure 15). When idle, the
                                      Acknowledge                                    MAX3301E/MAX3302E wait for a START condition fol-
The acknowledge bit (ACK) is the 9th bit attached to                                 lowed by its slave address. The LSB of the address
any 8-bit data word. ACK is always generated by the                                  word is the read/write (R/W) bit. R/W indicates whether
receiving device. The MAX3301E/MAX3302E generate                                     the master is writing to or reading from the
                                                                                     MAX3301E/MAX3302E (R/W = 0 selects the write con-
                                                                                     dition, R/W = 1 selects the read condition). After
                                                                                     receiving the proper address, the MAX3301E/
  SDA                                                                                MAX3302E issue an ACK.
                                                                                     The MAX3301E/MAX3302E have two possible addresses
                                                                                     (see Table 5). Address bits A6 through A1 are preset,
                                                                                     while a reset condition or an I2C general call address
  SCL
                                                                                     loads the value of A0 from ADD. Connect ADD to GND to
                                                                                     set A0 to 0. Connect ADD to VL to set A0 to 1. This allows
              DATA LINE STABLE, CHANGE OF DATA
                                                                                     up to two MAX3301E’s or two MAX3302E’s to share the
                 DATA VALID        ALLOWED                                           same bus.
Figure 16. Bit Transfer                                                                                                  Write Byte Format
                                                                                     Writing data to the MAX3301E/MAX3302E requires the
                                                                                     transmission of at least 3 bytes. The first byte consists of
            START
          CONDITION
                           CLOCK PULSE FOR ACKNOWLEDGEMENT                           the MAX3301E/MAX3302E’s 7-bit slave address, fol-
                                                                                     lowed by a 0 (R/W bit). The second byte determines
                             1             2              8         9
                                                                                     which register is to be written to. The third byte is the
        SCL                                                                          new data for the selected register. Subsequent bytes
                                                                                     are data for sequential registers. Figure 18 shows the
                                                                                     typical write byte format.
     SDA BY
TRANSMITTER
                                                                                                                         Read Byte Format
                S                                                                    Reading data from the MAX3301E/MAX3302E requires
     SDA BY
                                                                                     the transmission of at least 3 bytes. The first byte con-
   RECEIVER                                                                          sists of the MAX3301E/MAX3302E’s slave address, fol-
                                                                                     lowed by a 0 (R/W bit). The second byte selects the
Figure 17. Acknowledge                                                               register from which data is read. The third byte consists
                     SLAVE ADDRESS                                      REGISTER ADDRESS                             DATA
    S                                               R/W   A                                         A                                    A   P
                        (7 BITS)                                             (8 BITS)                               (8 BITS)
         A6     A5    A4    A3   A2   A1       A0    0        MSB                             LSB       MSB                        LSB
Figure 18. Write Byte Format
                           ______________________________________________________________________________________                                19


                    USB On-the-Go Transceivers and Charge Pumps
MAX3301E/MAX3302E
                                                                             SLAVE ADDRESS                                                           REGISTER ADDRESS
                                                   S                                                                      R/W       A                                                   A
                                                                                (7 BITS)                                                                  (8 BITS)
                                                        A6        A5        A4         A3        A2     A1       A0        0        0   MSB                                     LSB     0
                                                                   SLAVE ADDRESS                                                                       DATA
                                              RS                                                                  R/W           A                                                 NA        P
                                                                      (7 BITS)                                                                        (8 BITS)
                                                   A6       A5     A4         A3        A2        A1        A0        1        0    MSB                                   LSB     1         0
                    Figure 19. Read Byte Format
                    R/W: Read/write (R/W = 1: read; R/W = 0: write)                                                                     A: Acknowledge bit from the slave
                    S: Start condition                                                                                                  NA: Not-acknowledged bit from the master
                    RS: Repeated start condition                                                                                        Blank: Master transmission
                    P: Stop condition
                                        SLAVE ADDRESS                                                                 REGISTER ADDRESS (K)                                            DATA (K)
                         S                                                       R/W         A                                                               A                                                 A
                                           (7 BITS)                                                                          (8 BITS)                                                 (8 BITS)
                              A6   A5   A4    A3       A2    A1         A0         0                  MSB                                            LSB          MSB                                  LSB
                                          DATA (K+1)                                                                      DATA (K+2)                                              DATA (K+N)
                                                                                 A                                                                     A                                               A       P
                                           (8 BITS)                                                                        (8 BITS)                                                (8 BITS)
                      MSB                                              LSB                  MSB                                                LSB          MSB                                  LSB
                                                                  MAX3301E/MAX3302E RECOGNIZES                                                 MAX3301E/MAX3302E SENDS
                                                                           ITS ADDRESS                                                                 AN ACK
                                        SLAVE ADDRESS                                                       UNSUPPORTED REGISTER ADDRESS (K)                                          DATA (K)
                         S                                                       R/W         A                                                               A                                                 NA
                                           (7 BITS)                                                                     (8 BITS)                                                      (8 BITS)
                              A6   A5   A4    A3       A2    A1        A0        0                MSB                                                LSB          MSB                                  LSB
                                                                                                                                                                  MAX3301E/MAX3302E RECOGNIZES A WRITE TO AN
                                                                                                                                                                   UNSUPPORTED LOCATION, THEN SENDS A NACK
                    Figure 20. Burst-Mode Write Byte Format
                    of the MAX3301E/MAX3302E’s slave address, followed                                                                  address and the MAX3301E/MAX3302E return an
                    by a 1 (R/W bit). The master then reads one or more                                                                 acknowledge bit. The master writes a data byte to the
                    bytes of data. Figure 19 shows the typical read byte                                                                selected register and receives an acknowledge bit if a
                    format.                                                                                                             supported register address has been chosen. The reg-
                                                                                                                                        ister address increments and is ready for the master to
                                             Burst-Mode Write Byte Format                                                               send the next data byte. The MAX3301E/MAX3302E
                    The MAX3301E/MAX3302E allow a master device to                                                                      send an acknowledge bit after each data byte. If an
                    write to sequential registers without repeatedly sending                                                            unsupported register is selected, the MAX3301E/
                    the slave address and register address each time. The                                                               MAX3302E send a NACK to the master and the register
                    master first sends the slave address, followed by a 0 to                                                            index does not increment (see Figure 20).
                    write data to the MAX3301E/MAX3302E. The
                    MAX3301E/MAX3302E send an acknowledge bit back
                    to the master. The master sends the 8-bit register
                    20       ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                                                                                                                             MAX3301E/MAX3302E
                      SLAVE ADDRESS                                             REGISTER ADDRESS (K)
   S                                                 R/W       A                                                        A      P
                         (7 BITS)                                                      (8 BITS)
          A6     A5   A4    A3      A2   A1    A0     0             MSB                                           LSB
                      SLAVE ADDRESS                                                 DATA (K)                                               DATA (K+1)
   S                                                 R/W      A                                                         A                                           A
                         (7 BITS)                                                   (8 BITS)                                                (8 BITS)
          A6     A5   A4    A3      A2   A1    A0     1             MSB                                           LSB         MSB                             LSB
                      DATA (K+2)                                                DATA (K+3)                                           DATA (K+N)
                                                     A                                                             A                                          NA    P
                       (8 BITS)                                                  (8 BITS)                                             (8 BITS)
  MSB                                          LSB            MSB                                          LSB          MSB                             LSB
                                              MAX3301E/MAX3302E RECOGNIZE                                  MAX3301E/MAX3302E SENDS
                                                     THEIR ADDRESS                                                 AN ACK
   S                  SLAVE ADDRESS                  R/W       A          UNSUPPORTED REGISTER ADDRESS (K)              A      P
                         (7 BITS)                                                     (8 BITS)
         A6      A5   A4    A3      A2   A1    A0     0             MSB                                           LSB
   S                  SLAVE ADDRESS                  R/W       A          UNSUPPORTED REGISTER ADDRESS (K)              A
                         (7 BITS)                                            (8 BITS) — ALL 0's RETURNED
          A6     A5   A4    A3      A2   A1    A0     1             MSB                                           LSB
                                                                                                                 ACK FROM MASTER
Figure 21. Burst-Mode Read Byte Format
Table 5. I2C Slave Address Map
                                                                                               ADDRESS BITS
  ADD INPUT
                                   A6                 A5                       A4                   A3                        A2             A1               A0
       GND (0)                     0                      1                     0                      1                      1               0               0
        VL (1)                     0                      1                     0                      1                      1               0               1
                           ______________________________________________________________________________________                                                       21


                    USB On-the-Go Transceivers and Charge Pumps
MAX3301E/MAX3302E
                    Table 6. Register Map
                            REGISTER          MEMORY ADDRESS                                             DESCRIPTION
                             Vendor ID              00h, 01h          Read only. The contents of registers 00h and 01h are 6Ah and 0Bh, respectively.
                            Product ID              02h, 03h          Read only. The contents of registers 02h and 03h are 01h and 33h, respectively.
                                                    04h (set)
                             Control 1                                Sets operating modes, maximum data rate, and direction of data transfer.
                                                   05h (clear)
                                                    06h (set)         Controls D+/D- pullup/pulldown resistor connections, ID_IN state, and VBUS
                             Control 2
                                                   07h (clear)        behavior.
                          Interrupt source         08h (read)         Read only.
                             Unused*                   09h            Not used.
                                                    0Ah (set)
                           Interrupt latch                            Indicates which interrupts have occurred.
                                                   0Bh (clear)
                         Interrupt-enable           0Ch (set)
                                                                      Enables interrupts for high-to-low transitions.
                           Falling edge            0Dh (clear)
                         Interrupt-enable           0Eh (set)
                                                                      Enables interrupts for low-to-high transitions.
                           Rising edge             0Fh (clear)
                                                                      MAX3301E: Not used.
                         Unused*/Special            10h (set)
                                                                      MAX3302E: Alternate register addresses for special-function register 2. This
                           Function 2              11h (clear)
                                                                      register is also accessible from 16h and 17h.
                                                    12h (set)         Enables hardware/software control of the MAX3301E's behavior, interrupt activity,
                         Special function 1
                                                   13h (clear)        and operating modes.
                            Revision ID             14h, 15h          Read only. The contents of registers 14h and 15h are 77h and 41h, respectively.
                                                    16h (set)         Sets operating modes, INT output configuration, D+/D- behavior in audio mode,
                         Special function 2
                                                   17h (clear)        and TRM source.
                             Unused*                 18h–Fh           Not used.
                    *When writing to an unused register, the device generates a NACK and the register index does not increment.
                                          Burst-Mode Read Byte Format                    condition. If an unsupported register address is encoun-
                    The MAX3301E/MAX3302E allow a master device to                       tered, the MAX3301E/MAX3302E send a byte of zeros.
                    read data from sequential registers with the burst-mode
                    read byte protocol (see Figure 21). The master device                                                                 Registers
                    first sends the slave address, followed by a 0. The                                                          Control Registers
                    MAX3301E/MAX3302E then sends an acknowledge bit.                     There are two read/write control registers. Control regis-
                    Next, the master sends the register address to the                   ter 1 (Table 7) sets operating modes, sets the data rate,
                    MAX3301E/MAX3302E, which then generates another                      and controls the direction of data transfer. Control regis-
                    acknowledge bit. The master then sends a stop condi-                 ter 2 (Table 8) connects the D+/D- pullup or pulldown
                    tion to the MAX3301E/MAX3302E. Next, the master                      resistors, sets the VBUS charge/discharge conditions,
                    sends a start condition, followed by the MAX3301E/                   and grounds ID_IN. The control registers have two
                    MAX3302E’s slave address, and then a 1 to indicate a                 addresses that implement write-one-set and write-one-
                    read command. The MAX3301E/MAX3302E then sends                       clear features for each of these registers. Writing a 1 to
                    data to the master device, one byte at a time. The mas-              the set address sets that bit to 1. Writing a 1 to the clear
                    ter sends an acknowledge bit to the MAX3301E/                        address resets that bit to 0. Writing a 0 to either address
                    MAX3302E after each data byte, and the register                      has no effect on the bits.
                    address of the MAX3301E/MAX3302E increments after
                    each byte. This continues until the master sends a stop
                    22    ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                                                                                                   MAX3301E/MAX3302E
Table 7. Control Register 1 Description (Write to Address 04h to Set, Write to Address
05h to Clear)
                                                                                                                                       VALUE AT
    BIT NUMBER        SYMBOL                                                 OPERATION
                                                                                                                                       POWER-UP
                                    Set to 0 for low-speed (1.5Mbps) mode. Set to 1 for full-speed (12Mbps) mode. This
         0             speed                                                                                                              0
                                    bit changes the data rate only if spd_susp_ctl = 1 in special-function register 1.
                                    Set to 0 for normal operating mode. Set to 1 for suspend mode. This bit changes
         1            suspend                                                                                                             0
                                    the operating mode only if spd_susp_ctl = 1 in special-function register 1.
         2            dat_se0       Set to 0 for VP_VM USB mode. Set to 1 for DAT_SE0 USB mode.                                           0
         3               —          Not used.                                                                                             0
                                Enables the transceiver (when configured as an A device) to connect its pullup
         4         bdis_acon_en resistor if the B device disconnect is detected during HNP. Set to 0 to disable this                      0
                                feature. Set to 1 to enable this feature.
                                    Set to 0 to disable the interrupt output circuitry of OE/INT. Set to 1 to enable the
         5            oe_int_en                                                                                                           0
                                    interrupt output circuitry of OE/INT.
                                    Set to 0 to disable UART mode. Set to 1 to enable UART mode. This bit overrides
         6             uart_en                                                                                                            0
                                    the settings of dminus_dir, dplus_dir, and gp_en bits.
         7               —          Not used.                                                                                             0
Table 8. Control Register 2 Description (Write to Address 06h to Set, Write to Address
07h to Clear)
                                                                                                                                       VALUE AT
    BIT NUMBER        SYMBOL                                                 OPERATION
                                                                                                                                       POWER-UP
         0           dp_pullup      Set to 0 to disconnect the pullup resistor to D+. Set to 1 to connect the pullup resistor to D+.      0
         1           dm_pullup      Set to 0 to disconnect the pullup resistor to D-. Set to 1 to connect the pullup resistor to D-.      0
                                    Set to 0 to disconnect the pulldown resistor to D+. Set to 1 to connect the pulldown
         2          dp_pulldown                                                                                                           1
                                    resistor to D+.
                                    Set to 0 to disconnect the pulldown resistor to D-. Set to 1 to connect the pulldown
         3          dm_pulldown                                                                                                           1
                                    resistor to D-.
         4          id_pulldown     Set to 0 to allow ID_IN to float. Set to 1 to connect ID_IN to GND.                                   0
         5            vbus_drv      Set to 0 to turn VBUS off. Set to 1 to drive VBUS through a low impedance (see Note 8).               0
                                    Set to 0 to disconnect the VBUS discharge resistor. Set to 1 to connect the VBUS
         6          vbus_dischrg                                                                                                          0
                                    discharge resistor (see Note 8).
                                    Set to 0 to disconnect the VBUS charge resistor. Set to 1 to connect the VBUS
         7           vbus_chrg                                                                                                            0
                                    charge resistor (see Note 8).
Note 8: To prevent a high-current state where the transceiver is both sourcing current to VBUS and sinking current from VBUS, the fol-
lowing logic is used to set bits 5, 6, and 7 of control register 2:
•    Setting vbus_drv clears vbus_dischrg and vbus_chrg
•    Setting vbus_dischrg clears vbus_drv and vbus_chrg, unless vbus_drv is set with the same command, in which case vbus_drv
     clears the other bits
•    Setting vbus_chrg clears vbus_drv and vbus_dischrg, unless either of these bits are set with the same command, as shown in Table 9
                      ______________________________________________________________________________________                                  23


                    USB On-the-Go Transceivers and Charge Pumps
MAX3301E/MAX3302E
                    Table 9. VBUS Control Logic
                                      SET COMMAND (ADDRESS 06h)                                         BEHAVIOR OF MAX3301E/MAX3302E
                         vbus_drv             vbus_dischrg             vbus_chrg               vbus_drv              vbus_dischrg              vbus_chrg
                               1                      X                     X                       1                       0                       0
                               0                      1                     X                       0                       1                       0
                               0                      0                     1                       0                       0                       1
                               0                      0                     0                 Not affected            Not affected            Not affected
                    X = Don’t care.
                    Table 10. Interrupt Source Register (Address 08h is Read Only)
                     BIT NUMBER           SYMBOL                                                        CONTENTS
                           0              vbus_vld        Logic 1 if VBUS > VBUS valid comparator threshold.
                           1              sess_vld        Logic 1 if VBUS > session valid comparator threshold.
                                                          Logic 1 if VD+ > dp_hi comparator threshold (D+ assertion during data line pulsing through
                           2               dp_hi
                                                          SRP method).
                           3               id_gnd         Logic 1 if VID_IN < 0.1 x VCC.
                                                          Logic 1 if VD- > dm_hi comparator threshold (D- assertion during data line pulsing through SRP
                           4               dm_hi
                                                          method).
                           5               id_float       Logic 1 if VID_IN > 0.9 x VCC.
                                                          Logic 1 if bdis_acon_en = 1 and the MAX3301E/MAX3302E assert dp_pullup after detecting a
                           6             bdis_acon
                                                          B device disconnect during HNP.
                                                          Logic 1 if VBUS < sess_end comparator threshold, or if VD+ > cr_int comparator threshold (0.4V to
                           7           cr_int_sess_end
                                                          0.6V), depending on the value of int_source (bit 5 of special-function register 1, see Table 14).
                                                           Interrupt Registers              the set address sets that bit to 1. Writing a 1 to the clear
                    Four registers control all interrupt behavior of the                    address resets that bit to 0. Writing a 0 to either
                    MAX3301E/MAX3302E. A source register (Table 10)                         address has no effect on the bits. Special-function reg-
                    indicates the current status of the various interrupt                   ister 1 determines whether hardware or software con-
                    sources. An interrupt latch register (Table 11) indicates               trols the maximum data rate and suspend behavior,
                    which interrupts have occurred. An interrupt-enable low                 sets the direction of data transfer, and toggles general-
                    and interrupt-enable high register enable interrupts on                 purpose buffer mode. Special-function register 2
                    rising or falling (or both) transitions. Tables 10–13 pro-              enables shutdown mode, configures the interrupt out-
                    vide the bit configurations for the various interrupt regis-            put as open-drain or push-pull, sets the TRM power
                    ters. The interrupt latch, interrupt-enable low, and                    source, and controls the D+/D- connections for audio
                    interrupt-enable high registers have two addresses that                 mode. Table 15 depicts the special-function register 2
                    implement write- one-set and write-one-clear features for               for the MAX3301E and Table 16 depicts the special-
                    each of these registers. Writing a 1 to the set address                 function register 2 for the MAX3302E.
                    sets that bit to 1. Writing a 1 to the clear address resets             The MAX3301E powers up in its lowest power state and
                    that bit to 0. Writing a 0 to either address has no effect              must be turned on by setting the sdwn bit to 0. The
                    on the bits.                                                            MAX3302E powers up in the operational, VP/VM USB
                                                Special-Function Registers                  mode. This allows a µP to use the USB port for power-
                    Tables 14, 15, and 16 describe the special-function                     on boot-up, without having to access I2C. To put the
                    registers. The special-function registers have two                      MAX3302E into low-power shutdown, set the sdwn bit
                    addresses that implement write-one-set and write-one-                   to 0. The MAX3302E also has special-function register
                    clear features for each of these registers. Writing a 1 to              2 mapped to two I 2 C register addresses. In the
                                                                                            MAX3302E, special-function register 2 can be
                    24   ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                                                                                             MAX3301E/MAX3302E
Table 11. Interrupt Latch Register Description (Write to Address 0Ah to Set, Write to
Address 0Bh to Clear)
                                                                                                                                 VALUE AT
BIT NUMBER       SYMBOL                                                  CONTENTS
                                                                                                                                 POWER-UP
                                  vbus_vld asserts if a transition occurs on this condition and the appropriate
     0           vbus_vld                                                                                                           0
                                  interrupt-high or interrupt-low enable bit is set. See Tables 10, 12, and 13.
                                  sess_vld asserts if a transition occurs on this condition and the appropriate
     1           sess_vld                                                                                                           0
                                  interrupt-high or interrupt-low enable bit is set. See Tables 10, 12, and 13.
                                  dp_hi asserts if a transition occurs on this condition and the appropriate interrupt-
     2            dp_hi                                                                                                             0
                                  high or interrupt-low enable bit is set. See Tables 10, 12, and 13.
                                  id_gnd asserts if a transition occurs on this condition and the appropriate interrupt-
     3            id_gnd                                                                                                            0
                                  high or interrupt-low enable bit is set. See Tables 10, 12, and 13.
                                  dm_hi asserts if a transition occurs on this condition and the appropriate interrupt-
     4            dm_hi                                                                                                             0
                                  high or interrupt-low enable bit is set. See Tables 10, 12, and 13.
                                  id_float asserts if a transition occurs on this condition and the appropriate interrupt-
     5            id_float                                                                                                          0
                                  high or interrupt-low enable bit is set. See Tables 10, 12, and 13.
                                  bdis_acon asserts if a transition occurs on this condition and the appropriate
     6          bdis_acon                                                                                                           0
                                  interrupt-high or interrupt-low enable bit is set. See Tables 10, 12, and 13.
                                  cr_int_sess_end asserts if a transition occurs on this condition and the appropriate
     7        cr_int_sess_end                                                                                                       0
                                  interrupt-high or interrupt-low enable bit is set. See Tables 10, 12, and 13.
Table 12. Interrupt-Enable Low Register (Write to Address 0Ch to Set, Write to Address
0Dh to Clear)
                                                                                                                                 VALUE AT
 BIT NUMBER          SYMBOL                                                   CONTENTS
                                                                                                                                 POWER-UP
                                         Set to 0 to disable the vbus_vld interrupt for a high-to-low transition. Set to 1 to
     0               vbus_vld                                                                                                       0
                                         enable the vbus_vld interrupt for a high-to-low transition. See Tables 10 and 11.
                                         Set to 0 to disable the sess_vld interrupt for a high-to-low transition. Set to 1 to
     1                sess_vld                                                                                                      0
                                         enable the sess_vld interrupt for a high-to-low transition. See Tables 10 and 11.
                                         Set to 0 to disable the dp_hi interrupt for a high-to-low transition. Set to 1 to
     2                 dp_hi                                                                                                        0
                                         enable the dp_hi interrupt for a high-to-low transition. See Tables 10 and 11.
                                         Set to 0 to disable the id_gnd interrupt for a high-to-low transition. Set to 1 to
     3                 id_gnd                                                                                                       0
                                         enable the id_gnd interrupt for a high-to-low transition. See Tables 10 and 11.
                                         Set to 0 to disable the dm_hi interrupt for a high-to-low transition. Set to 1 to
     4                 dm_hi                                                                                                        0
                                         enable the dm_hi interrupt for a high-to-low transition. See Tables 10 and 11.
                                         Set to 0 to disable the id_float interrupt for a high-to-low transition. Set to 1 to
     5                 id_float                                                                                                     0
                                         enable the id_float interrupt for a high-to-low transition. See Tables 10 and 11.
                                         Set to 0 to disable the bdis_acon interrupt for a high-to-low transition. Set to 1 to
     6               bdis_acon                                                                                                      0
                                         enable the bdis_acon interrupt for a high-to-low transition. See Tables 10 and 11.
                                         Set to 0 to disable the cr_int_sess_end interrupt for a high-to-low transition.
     7            cr_int_sess_end        Set to 1 to enable the cr_int_sess_end interrupt for a high-to-low transition.             0
                                         See Tables 10 and 11.
                ______________________________________________________________________________________                                  25


                    USB On-the-Go Transceivers and Charge Pumps
MAX3301E/MAX3302E
                    Table 13. Interrupt-Enable High Register (Write to Address 0Eh to Set, Write to Address
                    0Fh to Clear)
                                                                                                                                                   VALUE AT
                        BIT NUMBER            SYMBOL                                           CONTENTS
                                                                                                                                                   POWER-UP
                                                           Set to 0 to disable the vbus_vld interrupt for a low-to-high transition. Set to 1 to
                            0                 vbus_vld                                                                                                0
                                                           enable the vbus_vld interrupt for a low-to-high transition. See Tables 10 and 11.
                                                           Set to 0 to disable the sess_vld interrupt for a low-to-high transition. Set to 1 to
                            1                 sess_vld                                                                                                0
                                                           enable the sess_vld interrupt for a low-to-high transition. See Tables 10 and 11.
                                                           Set to 0 to disable the dp_hi interrupt for a low-to-high transition. Set to 1 to
                            2                   dp_hi                                                                                                 0
                                                           enable the dp_hi interrupt for a low-to-high transition. See Tables 10 and 11.
                                                           Set to 0 to disable the id_gnd interrupt for a low-to-high transition. Set to 1 to
                            3                  id_gnd                                                                                                 0
                                                           enable the id_gnd interrupt for a low-to-high transition. See Tables 10 and 11.
                                                           Set to 0 to disable the dm_hi interrupt for a low-to-high transition. Set to 1 to
                            4                  dm_hi                                                                                                  0
                                                           enable the dm_hi interrupt for a low-to-high transition. See Tables 10 and 11.
                                                           Set to 0 to disable the id_float interrupt for a low-to-high transition. Set to 1 to
                            5                  id_float                                                                                               0
                                                           enable the id_float interrupt for a low-to-high transition. See Tables 10 and 11.
                                                           Set to 0 to disable the bdis_acon interrupt for a low-to-high transition. Set to 1 to
                            6                 bdis_acon                                                                                               0
                                                           enable the bdis_acon interrupt for a low-to-high transition. See Tables 10 and 11.
                                                           Set to 0 to disable the cr_int_sess_end interrupt for a low-to-high transition.
                            7            cr_int_sess_end   Set to 1 to enable the cr_int_sess_end interrupt for a low-to-high transition.             0
                                                           See Tables 10 and 11.
                    addressed at I2C register location 10h, 11h (as well as                                                    External Components
                    locations 16h, 17h) to support USB OTG SIE implemen-                                                       External Resistors
                    tations that are limited to I 2 C register addresses                Two external resistors (27.4Ω ±1%) are required for
                    between 0h and 15h.                                                 USB connection. Install one resistor in series between
                              ID and Manufacturer Register Address Map                  D+ of the MAX3301E/MAX3302E and D+ of the USB
                    Table 17 provides the contents of the ID registers of the           connector. Install the other resistor in series between D-
                    MAX3301E/MAX3302E. Addresses 00h and 01h com-                       of the MAX3301E/MAX3302E and D- of the USB con-
                    prise the vendor ID registers. Addresses 02h and 03h                nector (see the Typical Operating Circuit).
                    comprise the product ID registers. Addresses 14h and                                                      External Capacitors
                    15h comprise the revision ID registers.                             Five external capacitors are recommended for proper
                                                           Audio Car Kit                operation. Install all capacitors as close to the device as
                    Many cell phones are required to interface to car kits.             possible. Decouple VL to GND with a 0.1µF ceramic
                    Depending upon the car kit, the interface to the phone              capacitor. Bypass V CC to GND with a 1µF ceramic
                    may be required to support any or all of the following              capacitor. Bypass TRM to GND with a 1µF (or greater)
                    functions:                                                          ceramic or plastic capacitor. Connect a 100nF flying
                                                                                        capacitor between C+ and C- for the charge pump (see
                    • Audio input                                                       the Typical Operating Circuit). Bypass VBUS to GND
                    •    Audio output                                                   with a 1µF to 6.5µF ceramic capacitor in accordance
                    •    Charging                                                       with USB OTG specifications.
                    •    Control and status                                                                                        ESD Protection
                    D+ and D- of the MAX3301E/MAX3302E go to a high-                    To protect the MAX3301E/MAX3302E against ESD, D+,
                    impedance state when in shutdown mode, allowing                     D-, ID_IN, and VBUS, have extra protection against stat-
                    external signals (including audio) to be multiplexed onto           ic electricity to protect the device up to ±15kV. The ESD
                    these lines.                                                        structures withstand high ESD in all states; normal oper-
                    26    ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                                                                                         MAX3301E/MAX3302E
Table 14. Special-Function Register 1 (Write to Address 12h to Set, Write to Address 13h
to Clear)
                                                                                                                           VALUE AT
 BIT NUMBER         SYMBOL                                               CONTENTS
                                                                                                                           POWER-UP
                                   Set to 0 for normal operation. Set to 1 to enter interrupt shutdown mode. The I2C
       0             int_sdwn                                                                                                 0
                                   interface and interrupt sources remain active, while all other circuitry is off.
                                   Set to 0 to control the MAX3301E/MAX3302E behavior with SPD and SUS. Set to 1 to
       1           spd_susp_ctl    control the MAX3301E/MAX3302E behavior with the speed and suspend bits in control          0
                                   register 1 (see Table 7).
                                   Set to 0 to transfer data from DAT_VP and SE0_VM to D+ and D-, respectively.
       2               bi_di       DAT_VP and SE0_VM are always inputs when this bit is 0. Set to 1 to control the            1
                                   direction of data transfer with OE/INT.
                                   Set to 0 to transfer data from SE0_VM to D-. Set to 1 to transfer data from D- to
       3            dminus_dir     SE0_VM. Ensure that gp_en = 1, dat_se0 = 1, uart_en = 0, and OE/INT = low to               0
                                   activate this function.
                                   Set to 0 to transfer data from DAT_VP to D+. Set to 1 to transfer data from D+ to
       4            dplus_dir      DAT_VP. Ensure that gp_en = 1, dat_se0 = 1, uart_en = 0, and OE/INT = low to               0
                                   activate this function.
                                   Set to 0 to use cr_int as the interrupt source for bit 7 of the interrupt source
       5            int_source     register. Set to 1 to use sess_end as the interrupt source for bit 7 of the interrupt      0
                                   source register (see Table 10).
                                   Session end comparator status (read only). Sess_end = 0 when VBUS >
       6            sess_end                                                                                                  —
                                   sess_end threshold. Sess_end = 1 when VBUS < sess_end threshold.
                                   Set to 0 to disable general-purpose buffer mode. Set to 1 to enable general-
       7              gp_en                                                                                                   0
                                   purpose buffer mode.
Note: sess_end value at power-up is dependent on the voltage at VBUS.
Table 15. MAX3301E Special-Function Register 2 (Write to Address 16h to Set, Write to
Address 17h to Clear)
                                                                                                                           VALUE AT
BIT NUMBER          SYMBOL                                               CONTENTS
                                                                                                                           POWER-UP
                                   Set to 0 for normal operation. Set to 1 to enable shutdown mode. Only the I2C
      0               sdwn                                                                                                    1
                                   interface remains active in shutdown.
                                   Set to 0 to set INT and OE/INT as open-drain outputs. Set to 1 to set INT and
      1             irq_mode                                                                                                  0
                                   OE/INT as push-pull outputs.
                                   Set to 0 to leave the D+/D- single-ended receiver inputs connected. Set to 1 to
      2          xcvr_input_disc                                                                                              0
                                   disconnect the D+/D- receiver inputs to reduce power consumption in audio mode.
      3              reg_sel       Set to 0 to power TRM from VCC. Set to 1 to power TRM from VBUS.                           0
     4–7                —          Reserved. Set to 0 for normal operation.                                                  0000
ation, suspend mode, interrupt shutdown, and shut-                   •    ±15kV using the Human Body Model
down. For the ESD structures to work correctly, connect              •    ±6kV using the IEC 61000-4-2 Contact Discharge
a 1µF or greater capacitor from TRM to GND and from                       Method
VBUS to GND. ESD protection can be tested in various
ways; the D+, D-, ID_IN, and VBUS inputs/outputs are                 •    ±10kV using the IEC 61000-4-2 Air-Gap Discharge
characterized for protection to the following limits:                     Method
                    ______________________________________________________________________________________                          27


                    USB On-the-Go Transceivers and Charge Pumps
MAX3301E/MAX3302E
                    Table 16. MAX3302E Special-Function Register 2 (Write to Address 10h or 16h to Set,
                    Write to Address 11h or 17h to Clear)
                                                                                                                                            VALUE AT
                     BIT NUMBER          SYMBOL                                               CONTENTS
                                                                                                                                            POWER-UP
                                                          Set to 0 to enable shutdown mode. Set to 1 for normal operation. Only the I2C
                           0               sdwn                                                                                                1
                                                          interface remains active in shutdown.
                                                          Set to 0 to set INT and OE/INT as open-drain outputs. Set to 1 to set INT and
                           1             irq_mode                                                                                              0
                                                          OE/INT as push-pull outputs.
                                                          Set to 0 to leave the D+/D- single-ended receiver inputs connected. Set to 1 to
                           2           xcvr_input_disc                                                                                         0
                                                          disconnect the D+/D- receiver inputs to reduce power consumption in audio mode.
                           3              reg_sel         Set to 0 to power TRM from VCC. Set to 1 to power TRM from VBUS.                     0
                          4–7                —            Reserved. Set to 0 for normal operation.                                            0000
                    Table 17. ID Registers                                                 test involves approaching the device with a charged
                                                                                           probe. The contact discharge method connects the
                         REGISTER             ADDRESS               CONTENTS               probe to the device before the probe is energized.
                                                    00h                  6Ah               Figure 25 shows the IEC 61000-4-2 current waveform.
                         Vendor ID
                                                    01h                  0Bh                                             Layout Considerations
                                                    02h                  01h               The MAX3301E/MAX3302E high operating frequency
                         Product ID
                                                    03h                  33h               makes proper layout important to ensure stability and
                                                    14h                  77h
                                                                                           maintain the output voltage under all loads. For best
                         Revision ID                                                       performance, minimize the distance between the
                                                    15h                  41h               bypass capacitors and the MAX3301E/MAX3302E. Use
                                                                                           symmetric trace geometry from D+ and D- to the USB
                    ESD performance depends on a variety of conditions.
                                                                                           connector.
                    Contact Maxim for a reliability report that documents
                    test setup, methodology, and results.                                          UCSP Applications Information
                                                       Human Body Model                    For the latest application details on UCSP construction,
                    Figure 22 shows the Human Body Model and Figure 23                     dimensions, tape carrier information, PC board tech-
                    shows the current waveform it generates when dis-                      niques, bump-pad layout, and the recommended reflow
                    charged into a low impedance. This model consists of a                 temperature profile, as well as the latest information on
                    100pF capacitor charged to the ESD voltage of interest,                reliability testing results, refer to the Application Note:
                    which is then discharged into the test device through a                Understanding the Basics of the Wafer-Level Chip-Scale
                    1.5kΩ resistor.                                                        Package (WL-CSP) available on Maxim’s website at
                                                                                           www.maxim-ic.com/ucsp.
                                                                IEC 61000-4-2
                    The IEC 61000-4-2 standard covers ESD testing and
                    performance of finished equipment; it does not specifi-
                    cally refer to integrated circuits. The MAX3301E/
                    MAX3302E helps the user design equipment that meets
                    level 3 of IEC 61000-4-2, without the need for additional
                    ESD-protection components. The major difference
                    between tests done using the Human Body Model and
                    IEC 61000-4-2 is a higher peak current in IEC 61000-4-2,
                    due to the fact that series resistance is lower in the IEC
                    61000-4-2 model. Hence, the ESD-withstand voltage
                    measured to IEC 61000-4-2 is generally lower than that
                    measured using the Human Body Model. Figure 24
                    shows the IEC 61000-4-2 model. The Air-Gap Discharge
                    28   ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                                                                                      MAX3301E/MAX3302E
                       RC             RD
                      1MΩ           1.5kΩ                                                    I
                                                                                      100%
             CHARGE-CURRENT-        DISCHARGE                                         90%
              LIMIT RESISTOR        RESISTANCE
   HIGH-                                                       DEVICE
  VOLTAGE                  Cs      STORAGE                     UNDER
    DC                  100pF      CAPACITOR                    TEST         I PEAK
  SOURCE
Figure 22. Human Body ESD Test Modes
                                                                                      10%
                                                                                                                             t
      IP 100%                               Ir   PEAK-TO-PEAK RINGING   t R = 0.7ns TO 1ns
          90%                                    (NOT DRAWN TO SCALE)                            30ns
                                                                                                        60ns
 AMPERES
                                                                        Figure 25. IEC 61000-4-2 Current Waveform
        36.8%
            10%
              0
                                   TIME
                                                                                                               Chip Information
                  0    tRL
                                       tDL                              PROCESS: BiCMOS
                                   CURRENT WAVEFORM
Figure 23. Human Body Model Current Waveform
                       RC            RD
                  50MΩ to 100MΩ     330Ω
             CHARGE-CURRENT-        DISCHARGE
              LIMIT RESISTOR        RESISTANCE
    HIGH-                                                    DEVICE
   VOLTAGE                  Cs    STORAGE                    UNDER
     DC                  150pF    CAPACITOR                   TEST
   SOURCE
Figure 24. IEC 61000-4-2 ESD Test Model
                             ______________________________________________________________________________________              29


                    USB On-the-Go Transceivers and Charge Pumps
                                                                                                                                                                               Pin Configurations
MAX3301E/MAX3302E
                          TOP VIEW                                                                                                            BOTTOM VIEW
                                          D+      D-       ID_IN       GND          ADD          RESET       INT   N.C.                                             MAX3301E/MAX3302E
                                          24     23       22         21            20            19          18    17
                                                                                                                                                            SDA   OE/INT      RCV          VL     SUS
                            N.C.     25                                                                                      16      SUS
                                                                                                                                                 A
                             VM      26                                                                                      15      VL
                                                                                                                                                            GND    SCL        SPD         INT     RESET
                            TRM      27                                                                                      14      SPD         B
                            N.C.     28                                                                                      13      RCV                    C-    SE0_VM      ADD         ID_IN   GND
                                                                   MAX3301E
                             VCC     29                                                                                      12      N.C.        C
                             VP      30                                                                                      11      OE/INT                 VCC   DAT_VP      VP           VM      D-
                            VBUS     31                                                                                      10      SCL         D
                                                                EXPOSED PADDLE
                             C+      32                                                                                      9       N.C.                   C+     VBUS       VCC         TRM      D+
                                                                                                                                                 E
                                          1       2        3           4            5            6           7     8
                                          N.C.
                                                 DAT_VP
                                                           VCC         N.C.
                                                                                    C-
                                                                                                 SE0_VM
                                                                                                             GND   SDA                                       1      2          3           4       5
                                                                      TQFN                                                                                                   UCSP
                                                                   (5mm x 5mm)                                                                                          (2.5mm x 2.5mm)
                                                                                                                                              BOTTOM VIEW
                          TOP VIEW
                                                 D+       D-       ID_IN      GND       ADD          RESET   INT                                                    MAX3301E/MAX3302E
                                                 21       20       19         18        17           16      15
                                                                                                                                                            SDA   OE/INT      RCV          VL     SUS
                                     VM 22                                                                             14   SUS
                                                                                                                                                 A
                                   N.C. 23                                                                             13   VL
                                                                                                                                                            GND    SCL        SPD         INT     RESET
                                   TRM 24                                                                              12   SPD
                                                                                                                                                 B
                                     VCC 25                                                                            11   RCV
                                                                   MAX3302E
                                     VP 26                                                                             10   OE/INT                          C-    SE0_VM      ADD         ID_IN   GND
                                   VBUS 27                                                                              9   N.C.                 C
                                                                EXPOSED PADDLE
                                     C+ 28                                                                              8   SCL                             VCC                                    D-
                                                                                                                                                                  DAT_VP      VP           VM
                                                                                                                                                 D
                                                  1       2        3          4           5          6        7
                                                 DAT_VP
                                                          VCC      N.C.
                                                                              C-
                                                                                        SE0_VM
                                                                                                     GND     SDA                                            C+     VBUS       VCC         TRM      D+
                                                                                                                                                 E
                                                                      TQFN
                                                                   (4mm x 4mm)                                                                               1      2          3           4       5
                                                                                                                                                                     WLP PACKAGE
                                                                                                                                                                     (2.54mm x 2.54mm)
                    30   ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                        Typical Operating Circuit
                                                                                                          MAX3301E/MAX3302E
                                        VL          VCC
                      0.1μF                                       1μF
                                                                    *USB OTG SPECIFICATIONS LIMIT
            VL(I/O)                     VL          VCC             THE TOTAL CAPACITANCE ON VBUS
                                                                    FROM 1μF (MIN) TO 6.5μF (MAX)
                                                                    FOR A DUAL-ROLE DEVICE.
                              DAT_VP                      VBUS
                                                                  CVBUS*
                              SE0_VM                              4.7μF
                              RCV
                                                                        27.4Ω
                              VP                            D+                                VBUS
                                         MAX3301E                                             D+
                              VM                                        27.4Ω
                                         MAX3302E           D-                                D-
                              OEV/INT
                                                          ID_IN                               ID
           ASIC
                              INT
                                                                                              GND
                              RESET                         C+
                              SUS                                 CFLYING              OTG
                                                                  0.1μF             CONNECTOR
                              SPD
                                                            C-
                              SDA
                              SCL
                              ADD                         TRM
                                             GND
                                                                  1μF
      ______________________________________________________________________________________         31


                    USB On-the-Go Transceivers and Charge Pumps
                                                                                                                    Package Information
MAX3301E/MAX3302E
                    (The package drawing(s) in this data sheet may not reflect the most current specifications. For the latest package outline information,
                    go to www.maxim-ic.com/packages.)
                                                                                                                                                      QFN THIN.EPS
                    32   ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                         Package Information (continued)
                                                                                                                                          MAX3301E/MAX3302E
(The package drawing(s) in this data sheet may not reflect the most current specifications. For the latest package outline information,
go to www.maxim-ic.com/packages.)
                     ______________________________________________________________________________________                         33


                    USB On-the-Go Transceivers and Charge Pumps
                                                                                             Package Information (continued)
MAX3301E/MAX3302E
                    (The package drawing(s) in this data sheet may not reflect the most current specifications. For the latest package outline information,
                    go to www.maxim-ic.com/packages.)
                                                                                                                                                       24L QFN THIN.EPS
                    34   ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                         Package Information (continued)
                                                                                                                                          MAX3301E/MAX3302E
(The package drawing(s) in this data sheet may not reflect the most current specifications. For the latest package outline information,
go to www.maxim-ic.com/packages.)
                     ______________________________________________________________________________________                         35


                    USB On-the-Go Transceivers and Charge Pumps
MAX3301E/MAX3302E
                                                                                             Package Information (continued)
                    (The package drawing(s) in this data sheet may not reflect the most current specifications. For the latest package outline information,
                    go to www.maxim-ic.com/packages.)
                                                                                                                                                      25L WLP.EPS
                    36   ______________________________________________________________________________________


USB On-the-Go Transceivers and Charge Pumps
                                                                         Package Information (continued)
                                                                                                                                                          MAX3301E/MAX3302E
(The package drawing(s) in this data sheet may not reflect the most current specifications. For the latest package outline information,
go to www.maxim-ic.com/packages.)
                                                                                                                                     25L, UCSP.EPS
                                                                                           PACKAGE OUTLINE, 5x5 UCSP
                                                                                                                             1
                                                                                                          21-0096        H       1
                     ______________________________________________________________________________________                                          37


                    USB On-the-Go Transceivers and Charge Pumps
                                                                                                                                       Revision History
MAX3301E/MAX3302E
                     REVISION       REVISION                                                                                                         PAGES
                                                                                      DESCRIPTION
                      NUMBER         DATE                                                                                                           CHANGED
                           0             0        Initial release                                                                                        —
                           1           10/04      Correction                                                                                             —
                           2            1/06      Release of 3302E                                                                                       —
                           3           10/07      Addition of new packaging                                                                  1, 2, 4, 9, 10, 30, 36, 37
                    Maxim cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim product. No circuit patent licenses are
                    implied. Maxim reserves the right to change the circuitry and specifications without notice at any time.
                    38 ____________________Maxim Integrated Products, 120 San Gabriel Drive, Sunnyvale, CA 94086 408-737-7600
                    © 2007 Maxim Integrated Products                                                is a registered trademark of Maxim Integrated Products, Inc.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 MAX3301EETJ+ MAX3301EETJ+T MAX3302EETI+ MAX3302EETI+T MAX3302EEWA+T
