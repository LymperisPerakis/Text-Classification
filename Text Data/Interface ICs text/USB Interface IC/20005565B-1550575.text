                                                              MCP2221A
       USB 2.0 to I2C/UART Protocol Converter with GPIO
                                                      • Serial Number Used During the CDC
  Note:     The MCP2221A is identical to the            Enumeration Can Be Enabled By Using the
            MCP2221 in all aspects except for the       Microchip-provided Configuration Utility or By
            maximum supported baud rate of the          Calling the Proper API From the Support Libraries
            UART, which has been increased from         for this Device
            115200       (MCP2221)        to   460800
            (MCP2221A).                               I2C/SMBus
                                                      • The Device Runs as an I2C Master. The Data to
Features
                                                        Write/Read On the I2C Bus is Conveyed By the
Universal Serial Bus (USB)                              USB Interface.
• Supports Full-Speed USB (12 Mb/s)                   • I2C Master:
• Implements USB Protocol Composite Device:             - Up to 400 kHz clock rate
  - Communication Device Class (CDC) for                - Supports 7-bit or 10-bit addressable devices;
    USB-to-UART conversion                                 10-bit addressable devices are supported
                                                           through the PC host library
  - Human Interface Device (HID) for I2C device
    control and configuration                           - Supports block reads/writes of up to 65,535
                                                           bytes long
• 448-Byte Buffer to Handle Data Throughput at
  Any Supported UART Baud Rate:                       • SMBus Master:
  - 64-byte transmit                                    - Supports all of the SMBus transfers
  - 384-byte receive                                    - SMBus functionality is achieved through a
                                                           combination of chip and support library
• Human Interface Device (HID) for Both
                                                           processing
  I2C Communication and Control:
                                                        - Up to 400 kHz clock rate
    64-byte buffer to handle data throughput at
    any I2C baud rate                                 General Purpose Input/Output (GPIO) Pins
• Fully-Configurable VID and PID Assignments and
                                                      • Four General Purpose Input/Output Pins
  String Descriptors
                                                      • All GP Pins Can Be Assigned to Other
• Bus Powered or Self Powered
                                                        Functionalities
• USB 2.0-Compliant: TID# 40001594
                                                      Other Functionalities
USB Driver and Software Support
                                                      • UART Activity LED Outputs (UTX and URX)
• Enumerates as a Composite USB Device (CDC
                                                      • SSPND Output Pin
  and HID) Using Standard Drivers for Virtual Com
  Port (VCP) on the Following Windows® Operating      • USBCFG Output Pin (Indicates When the
  Systems: XP® (SP3), Vista®, 7, 8, 8.1 and 10          Enumeration Has Completed)
• Configuration Utility for Establishing a Custom     • Three ADC Inputs
  Boot-Up Configuration                               • One DAC with Two Possible Output Options
• I2C/SMBus Terminal                                  • Clock Reference Output: 12 MHz or Other
• Windows DLL                                           Configurable Values
                                                      • External Interrupt Edge Detection
CDC and Universal Asynchronous
Receiver/Transmitter (UART) Options                   Other
• Communications Device Class (CDC) for the           • Operating Voltage: 3.0 to 5.5V
  USB-to-UART Option                                  • Electrostatic Discharge (ESD) Protection: > 4 kV
• Responds to SET LINE CODING Commands to               Human Body Model (HBM)
  Dynamically Change Baud Rates                       • Industrial (I) Operating Temperature: -40°C to +85°C
• Supports Baud Rates: 300-460800                     • Automotive AEC-Q100 Qualified
• UART TX and RX Pins Only
 2016-2017 Microchip Technology Inc.                                                     DS20005565B-page 1


MCP2221A
Package Types
                     MCP2221A                                               MCP2221A
                  PDIP/SOIC/TSSOP                                           4 x 4 QFN*
                                                                      VDD    NC    NC        VSS
            VDD      1            14 VSS
                                                                      16     15    14        13
            GP0      2            13 D+
                                                          GP0     1                            12 D+
            GP1      3            12 D-
                                                          GP1     2               EP               11 D-
            RST      4            11 VUSB
                                                                                  17
            URX      5            10 SCL                  RST     3                              10 VUSB
            UTX      6            9   SDA                  URX    4                                9 SCL
            GP2      7            8   GP3                              5      6        7     8
                                                                      UTX    GP2       GP3   SDA
                                                    * Includes Exposed Thermal Pad (EP); see Table 1-1.
Block Diagram
                                            CONFIG
              USB Module and
                Transceiver
  USB                                                                                                            I2C
  Bus                                                                                                            Bus
                     USB HID                                           I2C Master
                  USB CDC
                                           BUS MATRIX                                                           TXD/RXD
                      Internal
                                                                   UART
                     Oscillator
                                                                      IOC                                        GP Pins
                                                                                                   PIN
                                                                                                   MUX
                                             GPIO
                                            ADC/DAC
                                                                      CLKR
DS20005565B-page 2                                                                      2016-2017 Microchip Technology Inc.


                                                                                             MCP2221A
1.0      FUNCTIONAL DESCRIPTION                                   The MCP2221A has four GP pins for miscellaneous
                                                                  functionalities (including GPIO, USBCFG, SSPND,
The MCP2221A is a USB-to-UART serial converter                    Clock Output, ADC, DAC and interrupt detector).
that enables USB connectivity in applications that have
                                                                  See Table 1-1 and Section 1.7 “Pin MUX Module” for
UART and/or I2C interfaces. The device reduces
                                                                  details about the pin functions.
external components by integrating the USB
termination resistors and the oscillator needed for USB
operation.
TABLE 1-1:         PINOUT DESCRIPTION
         PDIP,
  Pin                    Pin
         SOIC, QFN                    Standard Function                             Alternate Functions
 Name                   Type
         SSOP
 GP0        2       1    I/O   General purpose I/O or alternate SSPND (OUT)            Signals when the host has
                               function pin                                            entered Suspend mode
                                                                   LED_URX (OUT) UART RX LED activity output
                                                                                       (factory default)
 GP1        3       2    I/O   General purpose I/O or alternate CLKR (OUT)             Clock Reference Output
                               function pin                        ADC1 (IN)           ADC Channel 1
                                                                   LED_UTX (OUT)       UART TX Led activity output
                                                                   IOC (IN)            (factory default)
                                                                                       External interrupt edge detector
 RST        4       3      I   Reset input (with internal pull-up) N/A
 URX        5       4      I   UART RX pin (input)                 N/A
 UTX        6       5     O    UART TX pin (output)                N/A
 GP2        7       6    I/O   General purpose I/O or alternate USBCFG (OUT) USB device configured status
                               function pin                        ADC2 (IN)           (factory default)
                                                                   DAC1 (OUT)          ADC Channel 2
                                                                                       DAC Output 1
 GP3        8       7    I/O   General purpose I/O or alternate LED_I2C (OUT)          USB-I2C traffic indicator (factory
                               function pin                        ADC3 (IN)           default)
                                                                   DAC2 (OUT)          ADC Channel 3
                                                                                       DAC Output 2
 SDA        9       8    I/O   I2C Data line                       N/A
 SCL       10       9    I/O   I2C Clock line                      N/A
 VUSB      11      10   USB USB Power pin (internally
                               connected to 3.3V)
                               Should be locally bypassed with
                               a high-quality ceramic capacitor
 D-        12      11   USB USB D-
 D+        13      12   USB USB D+
 VSS       14      13     P    Ground
 NC        —       14     —    Not Connected
                   15
 VDD        1      16     P    Power
 EP        —       17     —    Exposed Thermal Pad (EP)
                               Do not electrically connect.
 2016-2017 Microchip Technology Inc.                                                                 DS20005565B-page 3


MCP2221A
1.1       Supported Operating Systems                  1.3.1        GET/SET LINE CODING
The following operating systems are supported:         The GET_LINE_CODING and SET_LINE_CODING
                                                       commands are used to read and set the UART
• Windows – XP (SP3), Vista, 7, 8, 8.1 and 10          parameters while in operation. For example, terminal
• Linux® – any distribution with support for CDC       applications (e.g., Putty, RealTerm, Hyperterminal,
   and HID classes                                     etc.) send the SET_LINE_COMMAND when connecting
• Mac OS® – all versions – beginning with 10.7         to the port. The MCP2221A responds by setting the
                                                       baud rate only.
1.1.1        ENUMERATION
                                                       The other parameters (Data bits, Parity, Stop bits)
The MCP2221A enumerates as a composite USB             remain unchanged.
device after POR. The device enumerates as both a
Human Interface Device (HID) for I2C, GPIO control,       Note:     MCP2221A supports only eight Data bits,
and as CDC for the USB-to-UART converter.                           no Parity, and one Stop bit.
1.1.1.1        USB HID                                 1.3.1.1        Rounding Errors
The MCP2221A enumerates as an HID, so the device       Primary baud rate settings (with associated rounding
can be configured, while the I2C and GPIO can be       errors) are shown in Table 1-2.
controlled. A DLL package, with example applications   If baud rates other than the ones shown in the table are
and tools, is supplied by Microchip on the device web  used, the error percentage can be calculated using
page, on the Microchip website www.microchip.com.      Equation 1-1 to find the actual baud rate.
1.1.1.2        USB CDC                                 TABLE 1-2:         UART PRIMARY BAUD
The CDC enumeration implements the USB-to-UART                            RATES
data translation.
                                                         Desired Rate        Actual rate                             % Error
1.2       Bus Matrix Module                                    300               300                                   0.00%
                                                              1200               1200                                  0.00%
The Bus Matrix module is the heart of the MCP2221A.
All other modules are tied together and controlled via        2400               2400                                  0.00%
the Bus Matrix module. This module manages the data           4800               4800                                  0.00%
transfers between the USB and the UART, the I2C               9600               9600                                  0.00%
master module, as well as the command requests
                                                             19200              19200                                  0.00%
generated by the USB host controller and commands
for controlling the function of the UART, GPIO, ADC,         38400              38339                                  0.16%
DAC and clock output.                                        57600              57692                                  0.16%
                                                            115200             115385                                  0.16%
1.2.1        UART
                                                            230400             230769                                  0.16%
The control module interfaces to the UART and USB
                                                            460800             461538                                  0.16%
modules.
                                                       EQUATION 1-1:            SOLVING FOR ACTUAL
1.2.2        ACCESSING THE DEVICE
                                                                                BAUD RATE
The MCP2221A can be accessed for reading and
writing via USB host commands. The device cannot be                                   12MHz-
                                                                     ActualRate = -----------------
accessed or controlled via the UART interface.                                         int  x 
1.3       UART Interface                                             Where:
                                                                                             12MHz
                                                                                x = -----------------------------------
                                                                                     DesiredBaud
The MCP2221A UART interface consists of the TX and
RX data signals.
The UART is configurable for several baud rates. The   1.3.2        CUSTOM BAUD RATES
available baud rates are listed in Table 1-2.          Custom baud rates are configured by sending the
                                                       SET_LINE_CODING USB command. See Section 2.0
                                                       “USB Enumeration Process” for more information.
DS20005565B-page 4                                                          2016-2017 Microchip Technology Inc.


                                                                                      MCP2221A
1.4       Device Configuration                           FIGURE 1-1:              CHIP SETTINGS RUN
                                                                                  TIME MANAGEMENT
The MCP2221A keeps all the essential device
configuration settings stored in Flash memory.
                                                                            Power-up/Reset
Device configuration settings affect the way the
MCP2221A behaves at run time.
The settings are stored into the Flash memory on the                    Copy Flash Chip and
device. Some of the settings are also copied into                       GP settings to SRAM
SRAM at Power-Up/Reset.
These device configuration settings reside in the
                                                                           USB enumeration
following two distinct areas of Flash memory:                              and configuration
• Chip Settings                                                            complete
   The Chip settings area stores the key MCP2221A
   parameters – USB parameters, ADC/DAC
   reference voltage choice, start-up DAC value,
   Clock Reference output (CLKR) frequency and
   duty cycle values.                                               No                        Yes
                                                                            SRAM settings
• GP Settings                                                               changes needed
   The GP Settings area stores the GP designation
   settings. For GP settings that are assigned to
   GPIO output operation, output values (logic 1 or 0)
                                                                                                Change the
   are also specified.
                                                                                                SRAM settings
Even though the MCP2221A places a partial copy of
the Chip settings in SRAM, the following Chip settings
always reside in Flash:
• USB Manufacturer/Product and Serial Number
   descriptors                                           The SRAM settings (GP and partial Chip settings) can
                                                         be modified through USB HID commands, and they will
• USB VID and PID pair
                                                         have an effect on the following device features:
• USB options (e.g., the requested amount of
   current that is presented to the USB host during      • GP pin designation (switch between GPIO,
   the USB enumeration process)                            dedicated or special functions modes)
                                                         • GPIO direction and output value (only for GPIO
1.4.1        POWER-UP/RESET DEVICE                         outputs) – for the GPs assigned to work in GPIO
             CONFIGURATION BEHAVIOR                        mode
At Power-up/Reset, the MCP2221A configures the           • Clock Output duty cycle and value – if GP1 is
device options (GP designation, special function pins      assigned for CLKR mode (Clock Reference
parameters and USB enumeration options) according          Output mode), by modifying the SRAM settings,
to the Flash settings. Then, the Flash Chip settings and   the clock frequency and duty cycle can be
GP settings are loaded into SRAM to allow for their        changed at run time
temporary modification at run time.                      • DAC value and voltage reference used – the DAC
                                                           value setting as well as the voltage reference
Chip settings of the device configuration Flash is
                                                           used for it are stored in SRAM settings and they
copied partially into SRAM. Only the run-
                                                           can be changed at run time. Through this
time-modifiable parameters are copied into SRAM.
                                                           mechanism, at run time the user can change the
GP Settings of the Device Configuration Flash (GP          DAC value, as well as the voltage reference.
settings area) are copied entirely into the SRAM. By     • ADC voltage reference value – the voltage
copying the GP settings completely into SRAM, the          reference used for ADC conversions can be
user is allowed to completely change the GP                changed by altering its corresponding SRAM
designation at run time.                                   setting
The SRAM copy of the settings can be altered at run      • Interrupt-on-Change (IOC) detector settings – if
time in order to change certain device behavior, e.g.,     GP1 is assigned for IOC mode, the SRAM
GP designation (the GPs can be re-assigned for a           settings are used for setting up the triggers used
different type of operation than the one assigned at       for external interrupt detection (positive, negative
power-up) and special parameters (DAC value,               edge detection or both)
ADC/DAC voltage references, clock output value).
 2016-2017 Microchip Technology Inc.                                                        DS20005565B-page 5


MCP2221A
1.4.2       CHIP SETTINGS MAP
The Chip settings area resides in Flash memory and is
copied into SRAM at run time. Not all of the device’s
settings can be altered at run time. All the fields in the
Flash settings can be altered by the user.
TABLE 1-3:        CHIP SETTINGS MAP
   Byte
               Register Name                                              Comments
  Index
     0         CHIPSETTING0            Controls the USB CDC serial number enumeration, default state for the GP LED
                                       designation, default state for GP dedicated-function pins and Chip settings
                                       protection level
     1         CHIPSETTING1            Default clock output divider and duty cycle
     2         CHIPSETTING2            DAC reference options and default DAC value
     3         CHIPSETTING3            ADC reference and interrupt detection settings
     4             USBVIDL             USB VID lower byte
     5            USBVIDH              USB VID higher byte
     6             USBPIDL             USB PID lower value
     7            USBPIDH              USB PID higher byte
     8          USBPWRATTR             USB power attributes
     9          USBREQCRT              USB required current
    10              PASS0              Password byte 0
    11              PASS1              Password byte 1
    12              PASS2              Password byte 2
    13              PASS3              Password byte 3
    14              PASS4              Password byte 4
    15              PASS5              Password byte 5
    16              PASS6              Password byte 6
    17              PASS7              Password byte 7
DS20005565B-page 6                                                                   2016-2017 Microchip Technology Inc.


                                                                                        MCP2221A
REGISTER 1-1:          CHIPSETTING0 REGISTER
   R/W-0         R/W-1            R/W-1        R/W-1           R/W-1            R/W-1       R/W-0         R/W-0
CDCSNEN LEDURXINST LEDUTXINST LEDI2CINST SSPNDINST USBCFGINST CHIPPROT1 CHIPPROT0
bit 7                                                                                                          bit 0
Legend:
R = Readable bit             W = Writable bit              U = Unimplemented bit, read as ‘0’
-n = Value at POR            ‘1’ = Bit is set              ‘0’ = Bit is cleared         x = Bit is unknown
bit 7        CDCSNEN: USB CDC Serial Number Enable bit
             1 = USB CDC Serial Number is enumerated
             0 = No USB CDC Serial Number enumeration (factory default)
bit 6        LEDURXINST: LED UART RX Inactive State bit
             1 = LED UART RX is inactive-high and active-low (factory default)
             0 = LED UART RX is inactive-low and active-high
bit 5        LEDUTXINST: LED UART TX Inactive State bit
             1 = LED UART TX is inactive-high and active-low (factory default)
             0 = LED UART TX is inactive-low and active-high
bit 4        LEDI2CINST: LED I2C Inactive State bit
             1 = LED I2C is inactive-high and active-low (factory default)
             0 = LED I2C is inactive-low and active-high
bit 3        SSPNDINST: SSPND Inactive State bit
             1 = SSPND is inactive-high and active-low (factory default)
             0 = SSPND is inactive-low and active-high
bit 2        USBCFGINST: USBCFG Inactive State bit
             1 = USBCFG is inactive-high and active-low (factory default)
             0 = USBCFG is inactive-low and active-high
bit 1-0      CHIPPROT<1:0>: Chip Settings Protection Level bits
             11 =Reserved
             10 =Permanently locked
             01 =Password protection
             00 =Chip settings unprotected (factory default)
 2016-2017 Microchip Technology Inc.                                                             DS20005565B-page 7


MCP2221A
REGISTER 1-2:           CHIPSETTING1 REGISTER
     R/W-0         R/W-0           R/W-0          R/W-1              R/W-0          R/W-0        R/W-1          R/W-0
       —              —              —           CLKDC1            CLKDC0          CLKDIV2      CLKDIV1       CLKDIV0
 bit 7                                                                                                               bit 0
 Legend:
 R = Readable bit              W = Writable bit                  U = Unimplemented bit, read as ‘0’
 -n = Value at POR             ‘1’ = Bit is set                  ‘0’ = Bit is cleared         x = Bit is unknown
 bit 7-5        Reserved: Set to ‘0’
 bit 4-3        CLKDC<1:0>: Clock-Out Duty-Cycle bits
                11 =Duty cycle 75% (75% of 1 clock period is logic ‘1’ and 25% of 1 clock period is logic ‘0’)
                10 =Duty cycle 50% (50% of 1 clock period is logic ‘1’ and 50% of 1 clock period is logic ‘0’)
                       (factory default)
                01 =Duty cycle 25% (25% of 1 clock period is logic ‘1’ and 75% of 1 clock period is logic ‘0’)
                00 =Duty cycle 0% (100% of 1 clock period is logic ‘0’)
 bit 2-0        CLKDIV<2:0>: Clock-Out Divider Output bits
                111 =375 kHz clock output
                110 =750 kHz clock output
                101 =1.5 MHz clock output
                100 =3 MHz clock output
                011 =6 MHz clock output
                010 =12 MHz clock output (factory default)
                001 =24 MHz clock output
                000 =Reserved
REGISTER 1-3:            CHIPSETTING2 REGISTER
     R/W-1         R/W-0           R/W-0          R/W-0              R/W-1          R/W-0        R/W-0          R/W-0
  DACVRM1       DACVRM0          DACREF         DACVAL4           DACVAL3          DACVAL2     DACVAL1        DACVAL0
 bit 7                                                                                                               bit 0
 Legend:
 R = Readable bit              W = Writable bit                  U = Unimplemented bit, read as ‘0’
 -n = Value at POR             ‘1’ = Bit is set                  ‘0’ = Bit is cleared         x = Bit is unknown
 bit 7-6        DACVRM<1:0>: DAC Internal Voltage Reference (DAC VRM) Selection bits
                11 =VRM voltage is 4.096V (only if VDD is above this voltage)
                10 =VRM voltage is 2.048V (factory default)
                01 =VRM voltage is 1.024V
                00 =VRM is off
 bit 5          DACREF: DAC Reference Output Selection bit
                1 = DAC reference output is DAC VRM voltage selection
                0 = DAC reference output is VDD (factory default)
 bit 4-0        DACVAL<4:0>: Initial DAC Output Value bit
                5-bit value for the DAC output (factory default is 8 decimal)
DS20005565B-page 8                                                                     2016-2017 Microchip Technology Inc.


                                                                                            MCP2221A
REGISTER 1-4:          CHIPSETTING3 REGISTER
    R/W-0           R/W-1            R/W-1           R/W-0           R/W-1           R/W-1      R/W-0         R/W-0
      —        INTDETFEEN INTDETREEN              ADCVRM1         ADCVRM0          ADCREF          —            —
bit 7                                                                                                             bit 0
Legend:
R = Readable bit                W = Writable bit                 U = Unimplemented bit, read as ‘0’
-n = Value at POR               ‘1’ = Bit is set                 ‘0’ = Bit is cleared        x = Bit is unknown
bit 7          Reserved: Set to ‘0’
bit 6          INTDETFEEN: Interrupt Falling Edge Detect Enable bit
               1 = Interrupt detector will trigger when a falling edge is detected (factory default)
               0 = Falling edges will not trigger the detector
bit 5          INTDETREEN: Interrupt Rising Edge Detect Enable bit
               1 = Interrupt detector will trigger when a rising edge is detected (factory default)
               0 = Rising edges will not trigger the detector
bit 4-3        ADCVRM<1:0>: ADC Internal Voltage Reference (ADC VRM) Selection bits
               11 =VRM voltage is 4.096V (only if VDD is above this voltage)
               10 =VRM voltage is 2.048V
               01 =VRM voltage is 1.024V (factory default)
               00 = VRM is off
bit 2          ADCREF: ADC Reference Output Selection bit
               1 = ADC reference output is ADC VRM voltage selection (factory default)
               0 = ADC reference output is VDD
bit 1-0        Reserved: Set to ‘0’
REGISTER 1-5:          USBVIDL REGISTER
    R/W-1         R/W-1             R/W-0           R/W-1           R/W-1            R/W-0      R/W-0         R/W-0
 USBVIDL7       USBVIDL6         USBVIDL5        USBVIDL4        USBVIDL3         USBVIDL2    USBVIDL1       USBVIDL0
bit 7                                                                                                             bit 0
Legend:
R = Readable bit               W = Writable bit                 U = Unimplemented bit, read as ‘0’
-n = Value at POR              ‘1’ = Bit is set                 ‘0’ = Bit is cleared         x = Bit is unknown
bit 7-0       USBVIDL<7:0>: USB VID Lower Byte (factory default: 0xD8(hex))
REGISTER 1-6:          USBVIDH REGISTER
    R/W-0         R/W-0             R/W-0           R/W-0           R/W-0            R/W-1      R/W-0         R/W-0
 USBVIDH7       USBVIDH6         USBVIDH5        USBVIDH4        USBVIDH3         USBVIDH2    USBVIDH1      USBVIDH0
bit 7                                                                                                             bit 0
Legend:
R = Readable bit               W = Writable bit                 U = Unimplemented bit, read as ‘0’
-n = Value at POR              ‘1’ = Bit is set                 ‘0’ = Bit is cleared         x = Bit is unknown
bit 7-0       USBVIDH<7:0>: USB VID Higher Byte (factory default: 0x04(hex))
 2016-2017 Microchip Technology Inc.                                                                DS20005565B-page 9


MCP2221A
REGISTER 1-7:         USBPIDL REGISTER
     R/W-1         R/W-1            R/W-0            R/W-1         R/W-1            R/W-1        R/W-0          R/W-1
  USBPIDL7       USBPIDL6        USBPIDL5         USBPIDL4      USBPIDL3         USBPIDL2      USBPIDL1       USBPIDL0
 bit 7                                                                                                               bit 0
 Legend:
 R = Readable bit              W = Writable bit                U = Unimplemented bit, read as ‘0’
 -n = Value at POR             ‘1’ = Bit is set                ‘0’ = Bit is cleared           x = Bit is unknown
 bit 7-0       USBPIDL<7:0>: USB PID Lower Byte (factory default: 0xDD(hex))
REGISTER 1-8:         USBPIDH REGISTER
     R/W-0         R/W-0            R/W-0            R/W-0         R/W-0            R/W-0        R/W-0          R/W-0
  USBPIDH7      USBPIDH6         USBPIDH5         USBPIDH4      USBPIDH3         USBPIDH2      USBPIDH1      USBPIDH0
 bit 7                                                                                                               bit 0
 Legend:
 R = Readable bit              W = Writable bit                U = Unimplemented bit, read as ‘0’
 -n = Value at POR             ‘1’ = Bit is set                ‘0’ = Bit is cleared           x = Bit is unknown
 bit 7-0       USBPIDH<7:0>: USB PID Higher Byte (factory default: 0x00(hex))
REGISTER 1-9:         USBPWRATTR REGISTER
     R/W-0         R/W-0            R/W-0            R/W-0         R/W-0            R/W-0        R/W-0          R/W-0
       —         SELFPWR         REMWKUP               —             —                —            —              —
 bit 7                                                                                                               bit 0
 Legend:
 R = Readable bit              W = Writable bit                U = Unimplemented bit, read as ‘0’
 -n = Value at POR             ‘1’ = Bit is set                ‘0’ = Bit is cleared           x = Bit is unknown
 bit 7         Reserved: Reserved – set to ‘1’ (factory default)
 bit 6         SELFPWR: USB Self-Powered Attribute bit
               1 = Chip will enumerate on the USB bus as being self powered
               0 = Chip will enumerate on the USB bus as being USB bus powered (factory default)
 bit 5         REMWKUP: USB Remote Wake-Up Capability bit
               1 = Chip will enumerate on the USB bus as being able to wake up the USB host
               0 = Chip will enumerate as not being capable of remote wake-up of the USB host (factory default)
 bit 4-0       Reserved: Set all bits to ‘0’ (factory default)
DS20005565B-page 10                                                                    2016-2017 Microchip Technology Inc.


                                                                                         MCP2221A
REGISTER 1-10:         USBREQCRT REGISTER
    R/W-0         R/W-0             R/W-1          R/W-1       R/W-0            R/W-0         R/W-1         R/W-0
  USBRE-         USBRE-            USBRE-         USBRE-      USBRE-          USBRE-         USBRE-        USBRE-
   QCRT7          QCRT6            QCRT5          QCRT4        QCRT3           QCRT2          QCRT1         QCRT0
bit 7                                                                                                           bit 0
Legend:
R = Readable bit               W = Writable bit            U = Unimplemented bit, read as ‘0’
-n = Value at POR              ‘1’ = Bit is set            ‘0’ = Bit is cleared            x = Bit is unknown
bit 7-0       USBREQCRT<7:0>: USB Bus-Powered Required Current Amount bits (in units of 2 mA)
              Factory default is 50 (decimal); the USB enumeration interprets this value as a current requirement of
              100 mA.
REGISTER 1-11:         PASS0 – PASS7 REGISTER
    R/W-0         R/W-0             R/W-0          R/W-0       R/W-0            R/W-0         R/W-0         R/W-0
   PASSx7        PASSx6            PASSx5         PASSx4      PASSx3          PASSx2         PASSx1        PASSx0
bit 7                                                                                                           bit 0
Legend:
R = Readable bit               W = Writable bit            U = Unimplemented bit, read as ‘0’
-n = Value at POR              ‘1’ = Bit is set            ‘0’ = Bit is cleared            x = Bit is unknown
bit 7-0       PASSx<7:0>: Password Byte X Value bits (factory default is 0)
 2016-2017 Microchip Technology Inc.                                                             DS20005565B-page 11


MCP2221A
1.4.3       GP SETTINGS MAP
The GP Settings area resides in Flash memory and is
copied into SRAM at run time. The user can alter both
the Flash and the SRAM GP settings. Any modification
in the SRAM copy of the GP settings will have an
immediate effect. The GP pins designation changes
according to the new content of the SRAM settings.
The Flash variant of the settings will affect the
Power-Up behavior of the GP pins.
TABLE 1-4:        GP SETTINGS MAP
  Byte     Register
                                                                     Comments
 Index       Name
    0    GPSETTING0 GP0 pin designation and GPIO default output value, when GP is set for GPIO output operation
    1    GPSETTING1 GP1 pin designation and GPIO default output value, when GP is set for GPIO output operation
    2    GPSETTING2 GP2 pin designation and GPIO default output value, when GP is set for GPIO output operation
    3    GPSETTING3 GP3 pin designation and GPIO default output value, when GP is set for GPIO output operation
REGISTER 1-12:         GPSETTING0 REGISTER
     R/W-0         R/W-0         R/W-0            R/W-1              R/W-0          R/W-0        R/W-1          R/W-0
       —             —             —          GPIOOUTVAL           GPIODIR         GPDES2       GPDES1        GPDES0
 bit 7                                                                                                               bit 0
 Legend:
 R = Readable bit            W = Writable bit                    U = Unimplemented bit, read as ‘0’
 -n = Value at POR           ‘1’ = Bit is set                    ‘0’ = Bit is cleared         x = Bit is unknown
 bit 7-5        Reserved: Set to ‘0’
 bit 4          GPIOOUTVAL: GPIO Output Value bit (valid only when GP0 is set for GPIO output operation)
                1 = Default output value is logic ‘1’ (factory default)
                0 = Default output value is logic ‘0’
 bit 3          GPIODIR: GPIO Direction bit (input or output; valid only when GP0 is set for GPIO operation)
                1 = GPIO Input
                0 = GPIO Output (factory default)
 bit 2-0        GPDES<2:0>: GP0 Designation bits
                111 =Reserved
                110 =Reserved
                101 =Reserved
                100 =Reserved
                011 =Reserved
                010 =Alternate function 0 (LED UART RX – LEDURX) (factory default)
                001 =Dedicated function operation (SSPND)
                000 =GPIO operation (GPIO0)
DS20005565B-page 12                                                                    2016-2017 Microchip Technology Inc.


                                                                                          MCP2221A
REGISTER 1-13:         GPSETTING1 REGISTER
    R/W-0         R/W-0           R/W-0           R/W-1             R/W-0          R/W-0      R/W-1         R/W-1
      —              —              —          GPIOOUTVAL         GPIODIR         GPDES2     GPDES1        GPDES0
bit 7                                                                                                           bit 0
Legend:
R = Readable bit              W = Writable bit                  U = Unimplemented bit, read as ‘0’
-n = Value at POR             ‘1’ = Bit is set                  ‘0’ = Bit is cleared       x = Bit is unknown
bit 7-5        Reserved: Set to ‘0’
bit 4          GPIOOUTVAL: GPIO Output Value bit (valid only when GP1 is set for GPIO output operation)
               1 = Default output value is logic ‘1’ (factory default)
               0 = Default output value is logic ‘0’
bit 3          GPIODIR: GPIO Direction bit (input or output; valid only when GP1 is set for GPIO operation)
               1 = GPIO Input
               0 = GPIO Output (factory default)
bit 2-0        GPDES<2:0>: GP1 Designation bits
               111 =Reserved
               110 =Reserved
               101 =Reserved
               100 =Alternate function 2 (Interrupt detector)
               011 =Alternate function 1 (LED UART TX – LEDUTX) (factory default)
               010 =Alternate function 0 (ADC1)
               001 =Dedicated function operation (Clock Output)
               000 =GPIO operation (GPIO1)
 2016-2017 Microchip Technology Inc.                                                            DS20005565B-page 13


MCP2221A
REGISTER 1-14:        GPSETTING2 REGISTER
     R/W-0         R/W-0         R/W-0            R/W-1              R/W-0          R/W-0        R/W-0          R/W-1
       —             —             —          GPIOOUTVAL           GPIODIR         GPDES2       GPDES1        GPDES0
 bit 7                                                                                                               bit 0
 Legend:
 R = Readable bit            W = Writable bit                    U = Unimplemented bit, read as ‘0’
 -n = Value at POR           ‘1’ = Bit is set                    ‘0’ = Bit is cleared         x = Bit is unknown
 bit 7-5        Reserved: Set to ‘0’
 bit 4          GPIOOUTVAL: GPIO Output Value bit (valid only when GP2 is set for GPIO output operation)
                1 = Default output value is logic ‘1’ (factory default)
                0 = Default output value is logic ‘0’
 bit 3          GPIODIR: GPIO Direction bit (input or output; valid only when GP2 is set for GPIO operation)
                1 = GPIO Input
                0 = GPIO Output (factory default)
 bit 2-0        GPDES<2:0>: GP2 Designation bits
                111 =Reserved
                110 =Reserved
                101 =Reserved
                100 =Reserved
                011 =Alternate function 1 (DAC1)
                010 =Alternate function 0 (ADC2)
                001 =Dedicated function operation (USBCFG) (factory default)
                000 =GPIO operation (GPIO2)
DS20005565B-page 14                                                                    2016-2017 Microchip Technology Inc.


                                                                                          MCP2221A
REGISTER 1-15:         GPSETTING3 REGISTER
    R/W-0         R/W-0           R/W-0           R/W-1             R/W-0          R/W-0      R/W-0         R/W-1
      —              —              —          GPIOOUTVAL         GPIODIR         GPDES2     GPDES1        GPDES0
bit 7                                                                                                           bit 0
Legend:
R = Readable bit              W = Writable bit                  U = Unimplemented bit, read as ‘0’
-n = Value at POR             ‘1’ = Bit is set                  ‘0’ = Bit is cleared       x = Bit is unknown
bit 7-5        Reserved: Set to ‘0’
bit 4          GPIOOUTVAL: GPIO Output Value bit (valid only when GP3 is set for GPIO output operation)
               1 = Default output value is logic ‘1’ (factory default)
               0 = Default output value is logic ‘0’
bit 3          GPIODIR: GPIO Direction bit (input or output; valid only when GP3 is set for GPIO operation)
               1 = GPIO Input
               0 = GPIO Output (factory default)
bit 2-0        GPDES<2:0>: GP3 Designation bits
               111 =Reserved
               110 =Reserved
               101 =Reserved
               100 =Reserved
               011 =Alternate function 1 (DAC2)
               010 =Alternate function 0 (ADC3)
               001 =Dedicated function operation (LEDI2C) (factory default)
               000 =GPIO operation (GPIO3)
 2016-2017 Microchip Technology Inc.                                                            DS20005565B-page 15


MCP2221A
1.5       USB Module (HID, CDC and                     1.6        USB Transceiver
          Transceiver Modules)
                                                       The MCP2221A has a built-in USB 2.0 full-speed
The USB HID and CDC modules in the MCP2221A            transceiver internally connected to the USB module.
are full-speed USB 2.0-compliant.                      The USB transceiver obtains power from the VUSB pin,
• Composite Device (CDC + HID):                        which is internally connected to the 3.3V regulator. The
   - CDC: USB-to-UART Communications                   best electrical signal quality is obtained when VUSB is
   - HID: I2C Transactions, GPIO Control,              locally bypassed with a high-quality ceramic capacitor.
     Configuration and Miscellaneous Operations
                                                       1.6.1        INTERNAL PULL-UP RESISTORS
     (ADC, DAC, Clock Output)
• 448-byte buffer to handle data throughput at any     The MCP2221A devices have built-in pull-up resistors
   UART Baud Rate:                                     designed to meet the requirements for full-speed USB.
   - 64-Byte Transmit
                                                       1.6.2        MCP2221A POWER OPTIONS
   - 384-Byte Receive
                                                       The following are the main power options for the
• Fully configurable VID and PID assignments and
                                                       MCP2221A:
   descriptors (stored on-chip)
• Bus Powered or Self Powered                          • USB Bus Powered (5V)
                                                       • 3.3V Self Powered
1.5.1       DESCRIPTORS
                                                       1.6.2.1        Internal Power Supply Details
During configuration, the supplied PC interface stores
the descriptors in the MCP2221A.                       MCP2221A offers various options for power supply. To
                                                       meet the required USB signaling levels, the
1.5.2       SUSPEND AND RESUME                         MCP2221A incorporates an internal LDO that is used
                                                       solely by the USB transceiver to present the correct
The USB Suspend and Resume signals are supported
                                                       D+/D- voltage levels.
for power management of the MCP2221A. The device
enters Suspend mode when “Suspend Signaling” is        Figure 1-2 shows the internal connections of the USB
detected on the bus.                                   transceiver LDO in relation to the VDD power supply
                                                       rail. The output of the USB transceiver LDO is tied to
The MCP2221A exits Suspend mode when any of the
                                                       the VUSB line. A capacitor connected to the VUSB pin is
following events occur:
                                                       required if the USB transceiver LDO provides the 3.3V
• “Resume Signaling” is detected or generated          supply to the transceiver.
• A USB “Reset” signal is detected
• A device Reset occurs                                FIGURE 1-2:             MCP2221A INTERNAL
                                                                               POWER SUPPLY DETAILS
                                                                VDD
                                                                                          IN
                                                                                           LDO
                                                                                           3.3V
                                                                                        OUT
                                                               VUSB
                                                                 D+
                                                                                           USB
                                                                                      Transceiver
                                                                 D-
DS20005565B-page 16                                                         2016-2017 Microchip Technology Inc.


                                                                                        MCP2221A
The provided VDD voltage has a direct influence on the     During USB Suspend mode, the D+ or D- pull-up
voltage levels present on the GPIO and UART TX/RX          resistor must remain active, which will consume some
pins. When VDD is 5V, all of these pins will have a        of     the     allowed      suspend      current    budget
logical ‘1’ around 5V with the variations specified in     (500 μA/2.5 mA). The VUSB pin requires an external
Section 4.1 “DC Characteristics”.                          bypass capacitor with a value between 0.22 and
For applications that require a 3.3V logical ‘1’ level,    0.47 μF (ceramic cap).
VDD must be connected to a power supply providing          Figure 1-4 shows a circuit where MCP2221A’s internal
the 3.3V voltage. In this case, the internal USB           LDO is used to provide 3.3V to the USB transceiver.
transceiver LDO cannot provide the required 3.3V           The voltage on the VDD affects the voltage levels onto
power. It is necessary to also connect the VUSB pin of     the UART and GPIO pins. With VDD at 5V, these pins
the MCP2221A to the 3.3V power supply rail. This way,      will have a logic ‘1’ of 5V with the variations specified in
the USB transceiver is powered up directly from the        Section 4.1 “DC Characteristics”.
3.3V power supply.
                                                           FIGURE 1-4:               TYPICAL POWER SUPPLY
1.6.2.2        USB Bus-Powered (5V)                                                  OPTION USING THE 5V
In Bus Power Only mode, all power for the application                                PROVIDED BY THE USB
is drawn from the USB (Figure 1-3). This is effectively
the simplest power method for the device.                     5V (USB Bus)
                                                              or external
                                                              power supply         VDD
FIGURE 1-3:              BUS POWER ONLY
                                                                                                     IN
       VBUS                                 VDD                                                       LDO
                                                                                                      3.3V
                                            VUSB                                   VUSB            OUT
                                            VSS
                                                                                     D+
                                                                                                      USB
                                                                                                 Transceiver
                                                                                     D-
In order to meet the inrush current requirements of the
USB 2.0 specifications, the total effective capacitance
appearing across VBUS and ground must be no more
than 10 μF. If it is more than 10 μF, some kind of inrush
limiting is required. For more details on Inrush Current
Limiting, search for that subject in the latest “Universal
Serial Bus Specification”.
According to the USB 2.0 specification, all USB devices
must also support a Low-Power Suspend mode. In the
USB Suspend mode, devices must consume no more
than 500 μA (or 2.5 mA for high-powered devices that
are remote wake-up capable) from the 5V VBUS line of
the USB cable.
The host signals the USB device to enter Suspend
mode by stopping all USB traffic to that device for more
than 3 ms.
The USB bus provides a 5V voltage. However, the USB
transceiver requires 3.3V for the signaling (on D+ and
D- lines).
 2016-2017 Microchip Technology Inc.                                                           DS20005565B-page 17


MCP2221A
1.6.2.3        3.3V Self-Powered                          1.7       Pin MUX Module
Typically, many embedded applications are using 3.3V      The pin MUX module offers multiple functionalities for
power supplies. When such option is available in the      the GP pins.
target system, MCP2221A can be powered up from the
existing 3.3V power supply rail. The typical connections  1.7.1        CONFIGURABLE PIN FUNCTIONS
for MCP2221A are shown in Figure 1-5.
                                                          The pins can be configured as:
In this example, MCP2221A has both VDD and VUSB
                                                          • GPIO – individually configurable general purpose
lines tied to the 3.3V rail. These tied connections
                                                             input or output
disable the internal USB transceiver LDO of the
MCP2221A to regulate the power supply on the VUSB         • SSPND – USB Suspend state
pin. Another consequence is that the ‘1’ logical level on • USBCFG – indicates USB configuration status
the GPIO pins will be at the 3.3V level, in accordance    • LED_URX – indicates UART receive traffic (when
with the variations specified in Section 4.1 “DC             seen from the MCP2221A)
Characteristics”.                                         • LED_UTX – indicates UART transmit traffic (when
                                                             seen from the MCP2221A)
1.6.2.4        Remote Wake-Up Capability
                                                          • LED_I2C – indicates I2C traffic
The MCP2221A offers a mechanism for triggering a          • ADC1/2/3 – analog inputs connected to the
remote wake-up event for the USB host. The remote            internal 10-bit ADC
wake-up trigger works only with the external interrupt
                                                          • DAC1/2 – analog outputs connected to the same
detector.
                                                             5-bit DAC
In order to use this capability, GP1 must be designated   • CLKR – digital clock output (the nominal value is
for interrupt detection operation. Before the USB host       12 MHz, but other values are possible)
goes into Sleep/Standby, the interrupt detector must be
                                                          • IOC – external interrupt detector
set up for detecting positive edges, negative edges or
both; also, the detector flag must be cleared. After
                                                          1.7.1.1        GPIO Pin Function
these conditions are met, the USB host can go into
Sleep/Standby mode and it will be awakened whenever       When the GPIO pin function is enabled for a given
an external signal on GP1 triggers the interrupt          GP(n) pin, it will operate as a digital input or an output
detector.                                                 pin. When configured as a digital output, its value is
                                                          controlled through the USB HID commands. When
FIGURE 1-5:              USING AN EXTERNALLY              configured as a digital input, its logic value is read using
                                                          USB HID commands.
                         PROVIDED 3.3V POWER
                         SUPPLY                           1.7.1.2        SSPND Pin Function
  5V (USB Bus)                                            The SSPND pin (if enabled) reflects the USB state
  or external   External                                  (Suspend/Resume).         The       pin     is    active-low
  power supply    3.3V            VDD
                  LDO                                     (factory-default setting; see the CHIPSETTING0
                                                          register for more details) when the Suspend state has
                                              IN
                                                          been issued by the USB host. Likewise, the pin drives
                                               LDO        high after the Resume state is achieved.
                                               3.3V
                                                          This pin allows the application to go into Low Power
                                  VUSB     OUT            mode when USB communication is suspended and
                                                          switches to a full active state when USB activity is
                                                          resumed.
                                                          1.7.1.3        USBCFG Pin Function
                                                          The USBCFG pin (if enabled) starts out low (factory
                                   D+          USB        default setting; see the CHIPSETTING0 register for
                                          Transceiver     more details) during power-up or after Reset and goes
                                   D-
                                                          high after the device successfully configures to the
                                                          USB. The pin will go low when in Suspend mode and
                                                          high when the USB resumes.
DS20005565B-page 18                                                             2016-2017 Microchip Technology Inc.


                                                                                    MCP2221A
1.7.1.4        LED_URX                                  1.7.1.6        LED_I2C
The “RX” in this pin name refers to the UART of the     The “I2C” in this pin name refers to the I2C module in
MCP2221A. The LED_URX pin is an indicator of UART       the MCP2221A. The LED_I2C pin is an indicator of I2C
RX characters being received.                           activity.
This pin will pulse low or high (depending on the chip  This pin will pulse low or high (depending on the chip
configuration settings; see the CHIPSETTING0            configuration settings; see the CHIPSETTING0
register for more details) for a period of time (a few  register for details) for a period of time (a few
milliseconds). This allows the application to provide a milliseconds). This allows the application to provide a
visual indication of the UART RX traffic.               visual indication of the I2C traffic.
1.7.1.5        LED_UTX                                  1.7.1.7        ADC1/2/3
The “TX” in this pin name refers to the UART of the     When GP1/2/3 are configured for ADC operation, they
MCP2221A. The LED_UTX pin is an indicator of UART       will work as analog input pins and they are tied to the
TX characters being transmitted.                        first three channels of the 10-bit ADC in the
This pin will pulse low or high (depending on the chip  MCP2221A.
configuration settings; see the CHIPSETTING0
                                                        1.7.1.8        DAC1/2
register for more details) for a period of time (a few
milliseconds). This allows the application to provide a When GP2/3 are configured for DAC operation, they
visual indication of the UART TX traffic.               will work as analog output pins and they are tied to the
                                                        output of the MCP2221A’s 5-bit DAC.
TABLE 1-5:         GP DESIGNATION TABLE
       GP
 Designation           Assignment               GP0          GP1                 GP2                  GP3
   Bits <2:0>
       000        GPIO                          GPIO        GPIO                GPIO                 GPIO
       001        DEDICATED_FUNC               SSPND     CLK OUT               USBCFG               LED_I2C
       010        ALT_FUNC_0                 LED_URX        ADC1                ADC2                 ADC3
       011        ALT_FUNC_1                     —       LED_UTX                DAC1                 DAC2
       100        ALT_FUNC_2                     —           IOC                  —                    —
 2016-2017 Microchip Technology Inc.                                                         DS20005565B-page 19


MCP2221A
1.8       GPIO/ADC/DAC Module                          1.8.3         DAC CONVERTER
This module communicates with the USB HID              The DAC is 5-bit wide, has a single analog output and
sub-module through the Bus Matrix module. It allows    it uses its own VRM module.
the manipulation of GPIOs, retrieving the ADC data     The DAC output voltage can be routed to GP2/3 (if
and setting the DAC value.                             GP2/3 are configured for DAC operation).
                                                       If the GP2 and GP3 are configured for DAC operation,
1.8.1        GPIO
                                                       they will present the same analog voltage value
When the GPs are configured for GPIO operation,        because they are connected to the same DAC output.
those configured GPs can be used as digital inputs or
outputs.                                               FIGURE 1-7:             DAC SUB-MODULE
When working as outputs, the GPs output logic levels                           DETAILS
(logic 0 or 1).
                                                              5-Bit Value                             Analog
1.8.1.1         VRM                                                                                   Output
                                                                                    5-Bit DAC
The ADC and DAC sub-modules each have a voltage
reference module (VRM). Each VRM can be configured      CHIPSETTING2<5>
(at power-up and run time) to output one of the four
                                                                                  Analog MUX
voltage choices available.
The VRM can provide the following voltages as a                          VDD
reference:
• VDD – the VRM output is exactly the voltage           CHIPSETTING2<7:6> OFF             2.048V
   present at the VDD pin of the MCP2221A. It can                                 1.024V       4.096V
   take any value from 3.3 to 5V.                                                      VRM
• 1.024V – the VRM output of 1.024V is obtained
   from an internal voltage reference
• 2.048V – the VRM output of 2.048V is obtained
   from an internal voltage reference
• 4.096V – the VRM output of 4.096V is obtained
   from an internal voltage reference. If the VDD is
   lower than 4.096V, the VRM output will have the
   value of VDD.
1.8.2        ADC CONVERTER
The ADC converter is producing 10-bit values and it
uses its own VRM module.
It features three external channels (connected to
GP1/2/3 if configured for ADC operation).
The sampling rate of the ADC is around 1000 sps.
FIGURE 1-6:             ADC SUB-MODULE
                        DETAILS
      3 Ext. Channels                           10-Bit
                                                Value
                            10-bit ADC
 CHIPSETTING3<2>
                          Analog MUX
                 VDD
                      OFF         2.048V
 CHIPSETTING3<4:3>        1.024V       4.096V
                               VRM
DS20005565B-page 20                                                         2016-2017 Microchip Technology Inc.


                                                                                        MCP2221A
1.9       CLKR                                              1.13      I2C Master Module
When GP1 is configured for clock output operation, the      The I2C master module is responsible for the I2C traffic
GP1 pin will act as a digital output, providing a clock     generation. The module is controlled through the USB
signal derived from the device’s internal clock. The        HID, through the Bus Matrix module.
clock’s nominal frequency is 12 MHz ± 0.25%. Other          The I2C module only implements the functionality of an
clock values and duty cycles are possible by setting        I2C/SMBus master.
different values that are associated with this mode of
operation.                                                  1.13.1       I2C/SMBUS MASTER
                                                            The I2C master initiates all the I2C/SMBus transactions
1.10      IOC                                               (being read or write operations) on the bus.
When GP1 is configured for Interrupt-on-Change (IOC)        The I2C/SMBus master module has the following
operation, GP1 acts as a digital input that is sensitive to capabilities:
positive and negative edges. Depending on the
                                                            • sending/receiving data at a multitude of bit rates,
settings associated with this mode of operation, the
                                                               up to 400 kbps
GP1 can detect positive, negative or both edges.
                                                            • 7-bit Addressing mode
1.11      RESET/POR                                         • single data transfers of up to 65,535 bytes
                                                            • clock-stretching (it allows the slower I2C Slaves to
1.11.1       RESET PIN                                         communicate)
The RST pin provides a method for triggering an             All the user data to be sent/transmitted over the I2C bus
external Reset of the device. A Reset is generated by       is conveyed to the USB host only through the USB HID
holding the pin low. These devices have a noise filter in   interface.
the Reset path, which detects and ignores small
pulses.                                                     1.14      Bus Matrix Module
1.11.2       POR                                            The Bus Matrix module manages the communication
                                                            between various functional modules, such as: USB
A POR pulse is generated on-chip whenever VDD rises
                                                            (HID and CDC), I2C, UART, GPIO/ADC/DAC, Config,
above a certain threshold. This allows the device to
                                                            IOC, CLKR, pin MUX.
start in the initialized state when VDD is adequate for
operation.
                                                            1.15      Config Module
To take advantage of the POR circuitry, tie the RST pin
to VDD through a resistor (1 – 10 k). This will            The Config module is in charge of the      storage of the
eliminate external RC components usually needed to          device settings and also of their           management
create a POR delay.                                         (loading/modifying/access protection).      The module
                                                            uses nonvolatile memory for storing        the power-up
When the device starts normal operation (i.e., exits the
                                                            device settings.
Reset condition), device operating parameters
(voltage, frequency, temperature, etc.) must be met to      At power-up, the module loads the settings from the
ensure operation. If these conditions are not achieved,     nonvolatile storage area into an SRAM location
the device must be held in Reset until the operating        (volatile settings). These settings represent the
conditions are met.                                         device’s configuration, along with other key parameters
                                                            (e.g., string descriptors, VID/PID, etc.). After the
1.12      Internal Oscillator                               settings are loaded in SRAM (volatile settings), they
                                                            can be changed through the USB HID interface.
The MCP2221A features an internal oscillator that
                                                            The user can read/modify/change either settings
provides a 12 MHz clock, which is needed for the USB
                                                            (nonvolatile or volatile) through the same interface
modules (HID and CDC).
                                                            (USB HID).
Full-speed USB is nominally 12 Mb/s. The clock
                                                            The Config module contains the relevant power-up
signal’s accuracy is over temp (2,500 ppm maximum).
                                                            settings that are used by the MCP2221A. A few
The internal clock of the MCP2221A is fed into the          examples of settings are: USB descriptors, GP
CLKR module to provide a clock signal outside of the        settings, ADC, DAC, CLKR.
device.
GP1 can be configured as a clock output pin providing
a 12 MHz clock to the rest of the system. Other clock
and duty-cycle values are possible by using different
settings for this module.
 2016-2017 Microchip Technology Inc.                                                           DS20005565B-page 21


MCP2221A
2.0       USB ENUMERATION PROCESS                          The case with no serial number is useful for
                                                           test/validation of products using the MCP2221A. The
The MCP2221A implements the CDC class to support           fact that all the tested boards are not supplying a serial
the USB-to-UART protocol converter functionality.          number will force Windows to assign them the same
Using USB-to-UART (CDC class) adapters with                COM port number (but only if connected to the same
personal computers running the Windows operating           USB port).
system (OS) requires some consideration because of
                                                           The MCP2221A is factory-set to not use a serial
the way the Windows OS responds to their connection.
                                                           number. Later in the process, if a customer wants the
When a USB-to-UART (CDC class) adapter is                  benefits provided by using a serial number, the
connected to the USB port of the PC, Windows               Configuration Utility from Microchip can be used to
searches for a driver. After a suitable driver is found,   enable the MCP2221A to enumerate its serial number
the system creates an entry in the registry. The entry     as well.
stores relevant information about the USB-to-UART
                                                           The MCP2221A comes with a uniquely-provided serial
adapter, its driver and the associated COM port.
                                                           number to be used during the USB enumeration
The COM port and its number are legacy-type                process; however, this can be changed by the user in
adapters, which are still supported by Windows OS.         the Configuration Utility.
Historically, the COM ports in a computer are part of the
                                                           The serial number enumeration enable/disable can be
computer’s motherboard and are assigned a different
                                                           changed, as well, using the Configuration Utility.
index number. With the advent of USB-to-UART
adapters, the Windows OS kept the COM port concept         All the USB-related settings mentioned above are part
and extended it to support the USB adapters.               of the Device Configuration (Chip settings area) and
                                                           they reside only in Flash. When the Chip settings area
Whenever a USB-to-UART adapter is first connected to
                                                           (1st area) is being copied into the SRAM (at power-up),
a PC, the system searches the registry for an entry that
                                                           the USB settings are skipped (not copied into SRAM).
is suitable for the connected adapter. If one is not
found, the system asks for a suitable driver. If this step
is completed, it creates a registry entry, and assigns a
COM port number as well. Then, whenever the
USB-to-UART adapter is connected to that PC, the
system checks the registry entry, loads the specified
driver and assigns the given COM port number (as
found in the registry entry).
During the enumeration process, the device can
specify a serial number. If it does, this number is stored
in the registry entry and it is used to assign the same
COM port number to the adapter in question, no matter
which USB port the adapter is connected to.
USB-to-UART adapters have the option to not present
a serial number during USB enumeration. In this case,
the operating system would not be able to differentiate
between two identical devices, if neither is providing its
serial number. Each time one of these two devices
(with no serial number provided during enumeration) is
connected to the same USB port, they will have the
same COM port number assigned.
Both functionalities (with or without serial numbers) are
very useful for different applications.
When the serial number is provided, an adapter using
the MCP2221A solution receives the same COM port
number from a Windows machine, no matter which
USB port they are connected to.
DS20005565B-page 22                                                               2016-2017 Microchip Technology Inc.


                                                                                                 MCP2221A
3.0       USB HID COMMUNICATION
Except for the USB CDC and UART modules, all the
other modules in the MCP2221A use USB HID protocol
for communication.
The USB HID protocol uses 64-byte reports.
A typical command exchange starts with a 64-byte
packet that is written by the USB host (i.e., the PC).
Afterward, the USB host reads the response from the
device as a 64-byte packet.
3.1       USB HID Commands/Responses
3.1.1        STATUS/SET PARAMETERS
This command offers many options for this device. It is
used to poll for the status of the device. It is also used
to establish certain I2C bus parameters/conditions.
TABLE 3-1:          COMMAND STRUCTURE
  Byte
               Function Description              Value                                   Effect
 Index
    0                      —                     0x10     Status/Set Parameters – command code
    1     Don’t care                          Any value
    2     Cancel current I2C/SMBus               0x10     When this value is put in this field, the device will cancel the
          transfer (sub-command)                          current I2C/SMBus transfer and will attempt to free the I2C bus.
                                                          This command is very useful since it can cancel a transfer and
                                                          free the bus. An example would be when trying to communicate
                                                          with a device using a wrong address. This will cause a timeout
                                                          to occur. This time-out situation can be read using the
                                                          “Status/Set Parameter” and the cancellation of the I2C/SMBus
                                                          transfer can be achieved by this sub-command.
                                               Any other No effect.
                                                 value
    3     Set I2C/SMBus communication            0x20     When this value is put in this field, the device will take the next
          speed (sub-command)                             command field and interpret it as the system clock divider that
                                                          will give the I2C/SMBus communication clock.
                                               Any other No effect.
                                                 value
    4     The I2C/SMBus system clock               —      The value in this field is being taken into consideration only
          divider that will be used to                    when the Byte Index 3 contains the code for establishing a new
          establish the communication                     communication speed. In all the other cases, this field’s value
          speed                                           will not matter.
  5-63    Don’t care                          Any value
 2016-2017 Microchip Technology Inc.                                                                   DS20005565B-page 23


MCP2221A
3.1.1.1     Responses
TABLE 3-2:        RESPONSE 1 STRUCTURE
  Byte
              Function Description            Value                                Effect
 Index
    0                    —                    0x10     Status/Set Parameters – command code echo
    1                    —                    0x00     Command completed successfully
    2   Cancel transfer                       0x00     No special operation (i.e., Cancel current I2C/SMBus
                                                       transfer)
                                              0x10     The current I2C/SMBus transfer was marked for
                                                       cancellation. The actual I2C/SMBus transfer cancellation
                                                       and bus release will need some time (a few hundreds of
                                                       microseconds, depending on the communication speed
                                                       initially chosen for the canceled transfer)
                                              0x11     The I2C engine (inside MCP2221A) was already in Idle
                                                       mode. The cancellation command had no effect.
    3                    —                    0x00     No Set I2C/SMBus communication speed was issued.
                                              0x20     The new I2C/SMBus communication speed is now
                                                       considered.
                                              0x21     The I2C/SMBus communication speed was not set
                                                       (e.g., I2C transfer in progress).
    4                    —                The divider  Only in the case when the code for establishing a new
                                          value given  communication speed is given at Byte Index 3.
                                          at the same
                                          index in the
                                           command
                                               field
                                              0x00     When the communication speed is not being set.
   5-7  Don’t care                         Any value
    8   Internal I2C state machine state         —
        value
    9   Lower byte (16-bit value) of the         —
        requested I2C transfer length
   10   Higher byte (16-bit value) of the        —
        requested I2C transfer length
   11   Lower byte (16-bit value) of the         —
        already transferred (through I2C)
        number of bytes
   12   Higher byte (16-bit value) of the        —
        already transferred (through I2C)
        number of bytes
   13   Internal I2C data buffer counter         —
                  2C
   14   Current I communication                  —
        speed divider value
   15   Current I2C time-out value               —
   16   Lower byte (16-bit value) of the         —
        I2C address being used
   17   Higher byte (16-bit value) of the        —
        I2C address being used
 18-21 Don’t care                          Any value
   22   SCL line value –                         —
        as read from the pin
DS20005565B-page 24                                                              2016-2017 Microchip Technology Inc.


                                                                                  MCP2221A
TABLE 3-2:        RESPONSE 1 STRUCTURE (CONTINUED)
  Byte
               Function Description      Value                                Effect
 Index
   23    SDA line value –                  —
         as read from the pin
   24    Interrupt edge detector state   0 or 1
   25    I2C Read pending value         0, 1 or 2 This field is used by the USB host to know if the
                                                  MCP2221A still has to read from a slave device.
 26-45 Don’t care                      Any value
   46    MCP2221A Hardware Revision        —
         Major (‘A’)
   47    MCP2221A Hardware Revision        —
         Minor (‘6’)
   48    MCP2221A Firmware Revision        —
         Major (‘1’)
   49    MCP2221A Firmware Revision        —
         Minor (‘1’)
 50-55 ADC Data (16-bit) values.           —      3 x (16-bit) little-endian ADC channel values (CH0 LSB,
                                                  CH0 MSB, CH1 LSB, CH1 MSB, CH2 LSB, CH2 MSB).
 56-63 Don’t care                      Any value
 2016-2017 Microchip Technology Inc.                                                    DS20005565B-page 25


MCP2221A
3.1.2       READ FLASH DATA
This command is used to read various important data
structures and strings that are stored in Flash memory
on the MCP2221A.
TABLE 3-3:         COMMAND STRUCTURE
  Byte
               Function Description              Value                               Effect
 Index
    0                     —                       0xB0    Read Flash Data – command code
    1     Read Flash Data Sub-code.               0x00    Read Chip Settings – it will read the MCP2221A
          The value in this field will instruct           Flash settings
          the MCP2221A on what Flash              0x01    Read GP Settings – it will read the MCP2221A Flash
          data to be read.                                GP settings
                                                  0x02    Read USB Manufacturer Descriptor String –
                                                          reads the USB Manufacturer String Descriptor used during
                                                          the USB enumeration
                                                  0x03    Read USB Product Descriptor String – reads the
                                                          USB Product String Descriptor used during the USB
                                                          enumeration
                                                  0x04    Read USB Serial Number Descriptor String –
                                                          reads the USB Serial Number String Descriptor that is
                                                          used during USB enumeration. This serial number can be
                                                          changed by the user through a specific USB HID com-
                                                          mand.
                                                  0x05    Read Chip Factory Serial Number – reads the fac-
                                                          tory-set serial number. This serial number cannot be
                                                          changed.
                                                Any other No meaning. The device will reply with a code for an
                                                  value   unsupported command at Byte Index 1 in the Response
                                                          report.
  2-63    Reserved                                0x00
3.1.2.1       Responses
TABLE 3-4:         RESPONSE STRUCTURE
  Byte
               Function Description              Value                               Effect
 Index
    0                     —                       0xB0    Read Flash Data – command code
    1                     —                       0x00    Command completed successfully
                                                  0x01    Command not supported
    2     Data structure length or                 —
          Don’t care
  3-63    Data or Don’t care                       —      Depends on the issued sub-command or the returned
                                                          code at Byte Index 1
DS20005565B-page 26                                                                2016-2017 Microchip Technology Inc.


                                                                                     MCP2221A
TABLE 3-5:          RESPONSE STRUCTURE – READ CHIP SETTINGS SUB-COMMAND
  Byte
                 Function Description         Value                              Effect
 Index
   0                         —                0xB0  Read Flash Data – command code echo
   1                         —                0x00  Command completed successfully
   2    Structure length                        —
   3    Don’t care                              —
   4    Bit 7: CDC Serial Number                 1  The USB serial number will be used during the USB
        Enumeration Enable                          enumeration of the CDC interface.
                                                 0  No serial number descriptor will be presented during the
                                                    USB enumeration.
        Bit 6: Initial value for LEDUARTRX      —   This value represents the logic level signaled when no
        pin option                                  UART RX activity takes places. When the UART RX (of the
                                                    MCP2221A) is receiving data, the LEDUARTRX pin will
                                                    take the negated value of this bit.
        Bit 5: Initial value for LEDUARTTX      —   This value represents the logic level signaled when no
        pin option                                  UART TX transmission takes place. When the UART TX (of
                                                    the MCP2221A) is sending data, the LEDUARTTX pin will
                                                    take the negated value of this bit.
        Bit 4: Initial value for LEDI2C pin     —   This value represents the logic level signaled when no I2C
        option                                      traffic occurs. When the I2C traffic is active, the LEDI2C pin
                                                    (if enabled) will take the negated value of this bit.
        Bit 3: Initial value for SSPND pin      —   This value represents the logic level signaled when the
        option                                      device is not in Suspend mode. Upon entering Suspend
                                                    mode, the SSPND pin (if enabled) will take the negated
                                                    value of this bit.
        Bit 2: Initial value for USBCFG pin     —   This value represents the logic level signaled when the
        option                                      device is not USB configured. When the device will be USB
                                                    configured, the USBCFG pin (if enabled) will take the
                                                    negated value of this bit.
        Bits 1-0: Chip Configuration security 11-10 Permanently locked
        option                                  01  Password-protected
                                                00  Unsecured
   5    Bits 7-5                              Don’t
                                               care
        Bits 4-0: Clock Output divider value    —   If the GP pin (exposing the clock output) is enabled for
                                                    clock output operation, the divider value will be used on the
                                                    48 MHz USB internal clock and its divided output will be
                                                    sent to this pin.
   6    Bits 7-6: DAC Reference voltage         11  Reference voltage is 4.096V (only if VDD is above this
        option                                      voltage)
                                                10  Reference voltage is 2.048V
                                                01  Reference voltage is 1.024V
                                                00  Reference voltage is off (this is useful for the case in which
                                                    the DAC uses other reference than VRM DAC; e.g., VDD)
        Bit 5: DAC reference option             1   DAC reference is VRM DAC voltage
                                                 0  DAC reference is VDD
        Bits 4-0: Power-up DAC value            —
 2016-2017 Microchip Technology Inc.                                                         DS20005565B-page 27


MCP2221A
TABLE 3-5:        RESPONSE STRUCTURE – READ CHIP SETTINGS SUB-COMMAND (CONTINUED)
  Byte
                Function Description            Value                                   Effect
 Index
   7   Bit 7                                     Don’t
                                                 care
       Bit 6: Interrupt detection – negative      —       If set, the interrupt detection flag will be set when a
       edge                                               negative edge occurs.
       Bit 5: Interrupt detection – positive      —       If set, the interrupt detection flag will be set when a positive
       edge                                               edge occurs.
       Bit 4-3: ADC Reference Voltage             11      Reference voltage is 4.096V (only if VDD is above this
                                                          voltage)
                                                  10      Reference voltage is 2.048V
                                                  01      Reference voltage is 1.024V
                                                  00      Reference voltage is off (this is useful for the case in which
                                                          the ADC uses other reference than VRM ADC; e.g., VDD)
       Bit 2                                      1       DAC reference is VDD DAC voltage
                                                   0      DAC reference is VRM
       Bit 1                                     Don’t
                                                 care
       Bit 0                                     Don’t
                                                 care
   8   Lower byte of the 16-bit USB VID           —
       value
   9   Higher byte of the 16-bit USB VID          —
       value
   10  Lower byte of the 16-bit USB PID           —
       value
   11  Higher byte of the 16-bit USB PID          —
       value
   12  USB power attributes(1)                    —       This value will be used by the MCP2221A’s USB
                                                          Configuration Descriptor (power attributes value) during the
                                                          USB enumeration.
   13  USB requested number of mA(s)(1)           —       The requested mA value during the USB enumeration will
                                                          represent the value at this index multiplied by 2.
 14-63 Don’t care                                 —
 Note 1:   Please consult the USB 2.0 specification for details on the correct values for power and attributes
DS20005565B-page 28                                                                   2016-2017 Microchip Technology Inc.


                                                                                    MCP2221A
TABLE 3-6:        RESPONSE STRUCTURE – READ GP SETTINGS SUB-COMMAND
  Byte
               Function Description       Value                               Effect
 Index
   0                     —                0xB0   Read Flash Data – command code echo
   1                     —                0x00   Command completed successfully
   2                     —                       Structure length
   3                     —                Don’t
                                           care
   4    GP0 Power-Up Settings
        Bit 7-5:                          Don’t
                                           care
        Bit 4: GPIO Output value            —    When GP0 is set as an output GPIO, this value will be
                                                 present at the GP0 pin at Power-up/Reset.
        Bit 3: GPIO Direction               1    GPIO Input mode
        (Input/Output) – Works only when    0    GPIO Output mode
        GP0 is set for GPIO operation
        Bit 2-0: GP0 Designation         111-011 Don’t care
                                           010   Alternate function 0 (LED UART RX)
                                           001   Dedicated function operation (SSPND)
                                           000   GPIO operation
   5    GP1 Power-Up Settings
        Bits7-5:                          Don’t
                                           care
        Bit 4: GPIO Output value            —    When GP1 is set as an output GPIO, this value will be
                                                 present at the GP1 pin at Power-up/Reset.
        Bit 3: GPIO Direction               1    GPIO Input mode
        (Input/Output) – Works only when    0    GPIO Output mode
        GP0 is set for GPIO operation
        Bit 2-0: GP1 Designation         111-101 Don’t care
                                           001   Dedicated function operation (Clock Output)
                                           100   Alternate function 2 (Interrupt Detection)
                                           011   Alternate function 1 (LED UART TX)
                                           010   Alternate function 0 (ADC1)
                                           000   GPIO operation
   6    GP2 Power-Up Settings
        Bits7-5:                          Don’t
                                           care
        Bit 4: GPIO Output value            —    When GP2 is set as an output GPIO, this value will be
                                                 present at the GP2 pin at Power-up/Reset.
        Bit 3: GPIO Direction               1    GPIO Input mode
        (Input/Output) – Works only when    0    GPIO Output mode
        GP2 is set for GPIO operation
        Bit 2-0: GP1 Designation         111-100 Don’t care
                                           011   Alternate function 1 (DAC1)
                                           010   Alternate function 0 (ADC2)
                                           001   Dedicated function operation (USB)
                                           000   GPIO operation
 2016-2017 Microchip Technology Inc.                                                       DS20005565B-page 29


MCP2221A
TABLE 3-6:         RESPONSE STRUCTURE – READ GP SETTINGS SUB-COMMAND (CONTINUED)
  Byte
                Function Description           Value                                  Effect
 Index
    7    GP3 Power-Up Settings
         Bits7-5:                              Don’t
                                                care
         Bit 4: GPIO Output value                 —      When GP3 is set as an output GPIO, this value will be
                                                         present at the GP3 pin at Power-up/Reset.
         Bit 3: GPIO Direction                    1      GPIO Input mode
         (Input/Output) – Works only when         0      GPIO Output mode
         GP3 is set for GPIO operation
         Bit 2-0: GP1 Designation            111-100 Don’t care
                                                 011     Alternate function 1 (DAC2)
                                                 010     Alternate function 0 (ADC3)
                                                 001     Dedicated function operation (LED I2C)
                                                 000     GPIO operation
  8-63                    —                    Don’t
                                                care
TABLE 3-7:         RESPONSE STRUCTURE – READ USB MANUFACTURER DESCRIPTOR STRING
                   SUB-COMMAND
                  Byte Index                 Value                                  Effect
                      0                       0xB0 Read Flash Data – command code echo
                      1                       0x00    Command completed successfully
                                                (2)
                      2                               Number of bytes + 2 in the provided USB Manufacturer
                                                      Descriptor String. The actual string starts at Byte Index 4.
                      3                       0x03    The value at this index must always be 0x03.
                                    (1)
 4 + 2 x Unicode_char_number + 0                —     Lower byte of the 16-bit Unicode character.
 4 + 2 x Unicode_char_number + 1(1)             —     Higher byte of the 16-bit Unicode character.
                                         (1)
 (4 + 2 x Unicode_char_number + 2) - 63         —     Don’t care. Only if the USB String Descriptor is less than 60-
                                                      bytes long in total.
 Note 1:     “Unicode_char_number” value starts from 0 to a maximum of 30 (included).
        2:   The value at Byte Index 2 must be 2 + 2 x (number of Unicode characters in the string).
TABLE 3-8:         RESPONSE STRUCTURE – READ USB PRODUCT DESCRIPTOR STRING
                   SUB-COMMAND
                  Byte Index                  Value                                  Effect
                      0                        0xB0    Read Flash Data – command code echo
                      1                        0x00    Command completed successfully
                                                 (2)
                      2                                Number of bytes + 2 in the provided USB Product Descriptor
                                                       String. The actual string starts at Byte Index 4.
                      3                        0x03    The value at this index must always be 0x03
                                    (1)
 4 + 2 x Unicode_char_number + 0                 —     Lower byte of the 16-bit Unicode character.
 4 + 2 x Unicode_char_number + 1(1)              —     Higher byte of the 16-bit Unicode character.
                                         (1)
 (4 + 2 x Unicode_char_number + 2) - 63          —     Don’t care. Only if the USB String Descriptor is less than
                                                       60-bytes long (in total).
 Note 1:     “Unicode_char_number” value starts from 0 to a maximum of 30 (included).
        2:   The value at Byte Index 2 must be 2 + 2 x (number of Unicode characters in the string).
DS20005565B-page 30                                                                  2016-2017 Microchip Technology Inc.


                                                                                             MCP2221A
TABLE 3-9:         RESPONSE STRUCTURE – READ USB SERIAL NUMBER DESCRIPTOR STRING
                   SUB-COMMAND
                 Byte Index                  Value                                    Effect
                       0                      0xB0     Read Flash Data – command code echo
                       1                      0x00     Command completed successfully
                                                (2)
                       2                               The number of bytes + 2 in the provided USB Serial Number
                                                       Descriptor String.
                                                       The actual string starts at Byte Index 4
                       3                      0x03     The value at this index must always be 0x03
                                    (1)
 4 + 2 x Unicode_char_number + 0                       Lower byte of the 16-bit Unicode character
 4 + 2 x Unicode_char_number + 1(1)                    Higher byte of the 16-bit Unicode character
                                         (1)
 (4 + 2 x Unicode_char_number + 2) - 63                Don’t care.
                                                       Only if the USB String Descriptor is less than 60-bytes long in
                                                       total.
 Note 1:     “Unicode_char_number” value starts from 0 to a maximum of 30 (included).
        2:   The value at Byte Index 2 must be 2 + 2 x (number of Unicode characters in the string).
TABLE 3-10:        RESPONSE STRUCTURE – READ CHIP FACTORY SERIAL NUMBER
                   SUB-COMMAND(1)
               Byte Index               Value                                       Effect
                    0                    0xB0      Read Flash Data – command code echo
                    1                    0x00      Command completed successfully
                    2                      —       Structure length
                    3                    Don’t
                                         care
 4 - (4 + Structure length - 1)            —       Structure data – Factory Serial Number String
 (4 + Structure length) - 63             Don’t
                                         care
 Note 1:     The Chip Serial Number is typically 8 bytes in length.
 2016-2017 Microchip Technology Inc.                                                               DS20005565B-page 31


MCP2221A
3.1.3       WRITE FLASH DATA
This command is used to write various important data
structures and strings into the Flash memory of the
device.
TABLE 3-11:        COMMAND STRUCTURE
  Byte
                   Function Description           Value                         Effect
 Index
    0                          —                  0xB1  Write Flash Data – command code
    1    Write Flash Data Sub-code. The            0x00 Write Chip Settings – it will write the MCP2221A
         value in this field will instruct the          Flash settings
         MCP2221A about the particular Flash       0x01 Write GP Settings – it will write the MCP2221A
         settings to be altered.                        Flash GP settings
                                                   0x02 Write USB Manufacturer Descriptor String –
                                                        writes the USB Manufacturer String Descriptor used
                                                        during the USB enumeration
                                                   0x03 Write USB Product Descriptor String – writes
                                                        the USB Product String Descriptor used during the USB
                                                        enumeration
                                                   0x04 Write USB Serial Number Descriptor String –
                                                        writes the USB Serial Number String Descriptor used
                                                        during the USB enumeration
                                                   Any  No meaning. The device will reply with a code for an
                                                  other unsupported command at Byte Index 1 in the response
                                                  value report.
  2-63   Data to be written                         —   Data format depends on the Write Flash Data Sub-code
                                                        (at Byte Index 1).
DS20005565B-page 32                                                          2016-2017 Microchip Technology Inc.


                                                                                        MCP2221A
TABLE 3-12:         SUB-COMMAND STRUCTURE – WRITE CHIP SETTINGS SUB-COMMAND
  Byte                                      Value
              Function Description                                               Effect
 Index
   0                       —                0xB1  Write Flash Data – command code
   1                       —                0x00  Write Chip Settings – it will write the MCP2221A Flash
                                                  device settings
   2    Bit 7: CDC Serial Number              1   The USB serial number will be used during the USB enumeration
        Enumeration Enable                        of the CDC interface.
                                              0   No serial number descriptor will be presented during the USB
                                                  enumeration.
        Bit 6: Initial value for              —   This value represents the logic level signaled when no UART RX
        LEDUARTRX pin option                      activity takes places. When the UART RX (of the MCP2221A) is
                                                  receiving data, the LEDUARTRX pin will take the negated value
                                                  of this bit.
        Bit 5: Initial value for              —   This value represents the logic level signaled when no UART TX
        LEDUARTTX pin option                      transmission takes place. When the UART TX (of the
                                                  MCP2221A) is sending data, the LEDUARTTX pin will take the
                                                  negated value of this bit.
        Bit 4: Initial value for LEDI2C pin   —   This value represents the logic level signaled when no I2C traffic
        option                                    occurs. When I2C traffic is active, the LEDI2C pin (if enabled) will
                                                  take the negated value of this bit.
        Bit 3: Initial value for SSPND pin    —   This value represents the logic level signaled when the device is
        option                                    not in Suspend mode. Upon entering Suspend mode, the
                                                  SSPND pin (if enabled) will take the negated value of this bit.
        Bit 2: Initial value for USBCFG       —   This value represents the logic level signaled when the device is
        pin option                                not USB configured. When the device will be USB-configured,
                                                  the USBCFG pin (if enabled) will take the negated value of this
                                                  bit.
        Bit 1-0: Chip Configuration         11-10 Permanently locked
        security option                       01  Password-protected
                                              00  Unsecured
   3    Bit 7-5                             Don’t
                                             care
        Bit 4-0: Clock Output divider         —   If the GP pin (exposing the clock output) is enabled for clock
        value                                     output operation, the divider value will be used on the 48 MHz
                                                  USB internal clock and its divided output will be sent to this pin.
   4    Bit 7-6: DAC Reference voltage        11  Reference voltage is 4.096V (only if VDD is above this voltage)
        option                                10  Reference voltage is 2.048V
                                              01  Reference voltage is 1.024V
                                              00  Reference voltage is off (this is useful for the case in which the
                                                  DAC uses other reference than VRM DAC, i.e., VDD)
        Bit 5: DAC reference option           1   DAC reference is VDD
                                               0  DAC reference is VRM DAC voltage
        Bit 4-0: Power-up DAC value           —
 2016-2017 Microchip Technology Inc.                                                            DS20005565B-page 33


MCP2221A
TABLE 3-12:       SUB-COMMAND STRUCTURE – WRITE CHIP SETTINGS SUB-COMMAND
  Byte                                  Value
             Function Description                                              Effect
 Index
    5  Bit 7                            Don’t
                                         care
       Bit 6: Interrupt detection –       —   If set, the interrupt detection flag will be set when a negative
       negative edge                          edge occurs.
       Bit 5: Interrupt detection –       —   If set, the interrupt detection flag will be set when a positive edge
       positive edge                          occurs.
       Bit 4-3: ADC Reference Voltage     11  Reference voltage is 4.096V (only if VDD is above this voltage).
                                          10  Reference voltage is 2.048V
                                          01  Reference voltage is 1.024V
                                          00  Reference voltage is off (this is useful for the case in which the
                                              ADC uses other reference than VRM ADC; e.g., VDD)
       Bit 2: ADC Reference Option        1   ADC reference voltage is VRM ADC
                                           0  ADC reference voltage is VDD
       Bit 1                            Don’t
                                         care
       Bit 0                            Don’t
                                         care
    6  Lower byte of the 16-bit USB VID   —
       value.
    7  Higher byte of the 16-bit USB      —
       VID value.
    8  Lower byte of the 16-bit USB PID   —
       value.
    9  Higher byte of the 16-bit USB      —
       PID value.
   10  USB power attributes               —   This value will be used by the MCP2221A’s USB Configuration
                                              Descriptor (power attributes value) during the USB enumeration.
   11  USB requested number of mA(s)      —   The requested mA value during the USB enumeration will
                                              represent the value at this index multiplied by 2.
 12-19 8-bytes password (for Flash        —
       modifications protection)
 20-63                  —               Don’t
                                         care
DS20005565B-page 34                                                             2016-2017 Microchip Technology Inc.


                                                                                    MCP2221A
TABLE 3-13:       SUB-COMMAND STRUCTURE – WRITE GP SETTINGS SUB-COMMAND
  Byte
               Function Description       Value                                 Effect
 Index
   0                    —                  0xB1     Write Flash Data – command code
   1                    —                  0x01     Write GP Settings – it will write the MCP2221A Flash
                                                    GP settings
   2    GP0 Power-Up Settings
        Bit 7-5:                         Don’t care
        Bit 4: GPIO Output value            —       When GP0 is set as an output GPIO, this value will be
                                                    present at the GP0 pin at Power-up/Reset.
        Bit 3: GPIO Direction                1      GPIO Input mode
        (Input/Output) – Works only when     0      GPIO Output mode
        GP0 is set for GPIO operation.
        Bit 2-0: GP0 Designation         111-011    Don’t care
                                           010      Dedicated function operation (SSPND)
                                           001      Alternate function 0 (LED UART RX)
                                           000      GPIO operation
   3    GP1 Power-Up Settings
        Bit 7-5:                         Don’t care
        Bit 4: GPIO Output value            —       When GP1 is set as an output GPIO, this value will be
                                                    present at the GP1 pin at Power-up/Reset.
        Bit 3: GPIO Direction                1      GPIO Input mode
        (Input/Output) – Works only when     0      GPIO Output mode
        GP1 is set for GPIO operation.
        Bit 2-0: GP1 Designation         111-101    Don’t care
                                           100      Alternate function 2 (Interrupt Detection)
                                           011      Alternate function1 (LED UART TX)
                                           010      Alternate function 0 (ADC1)
                                           001      Dedicated function operation (Clock Output)
                                           000      GPIO operation
   4    GP2 Power-Up Settings
        Bit 7-5:                         Don’t care
        Bit 4: GPIO Output value            —       When GP2 is set as an output GPIO, this value will be
                                                    present at the GP2 pin at Power-up/Reset.
        Bit 3: GPIO Direction                1      GPIO Input mode
        (Input/Output) – Works only when     0      GPIO Output mode
        GP2 is set for GPIO operation.
        Bit 2-0: GP2 Designation         111-100    Don’t care
                                           011      Alternate function1 (DAC1)
                                           010      Alternate function 0 (ADC2)
                                           001      Dedicated function operation (Clock Output)
                                           000      GPIO operation
 2016-2017 Microchip Technology Inc.                                                       DS20005565B-page 35


MCP2221A
TABLE 3-13:        SUB-COMMAND STRUCTURE – WRITE GP SETTINGS SUB-COMMAND (CONTINUED)
  Byte
                Function Description            Value                                   Effect
 Index
    5    GP3 Power-Up Settings
         Bit 7-5:                              Don’t care
         Bit 4: GPIO Output value                 —         When GP3 is set as an output GPIO, this value will be
                                                            present at the GP2 pin at Power-up/Reset.
         Bit 3: GPIO Direction                     1        GPIO Input mode
         (Input/Output) – Works only when          0        GPIO Output mode
         GP3 is set for GPIO operation.
         Bit 2-0: GP3 Designation              111-100      Don’t care
                                                 011        Alternate function 1 (DAC2)
                                                 010        Alternate function 0 (ADC3)
                                                 001        Dedicated function operation (LED I2C)
                                                 000        GPIO operation
  6-63                                         Don’t care
TABLE 3-14:        SUB-COMMAND STRUCTURE – WRITE USB MANUFACTURER DESCRIPTOR
                   STRING SUB-COMMAND
               Byte Index                Value                                      Effect
                   0                     0xB1      Write Flash Data – command code
                   1                     0x02      Write USB Manufacturer Descriptor String – writes the
                                                   USB Manufacturer String Descriptor used during the USB
                                                   enumeration
                                           (2)
                   2                               Number of bytes + 2 in the provided USB Serial Number Descriptor
                                                   String
                   3                     0x03      The value at this index must always be 0x03.
                                    (1)
 4 + 2 x Unicode_char_number + 0           —       Lower byte of the 16-bit Unicode character.
 4 + 2 x Unicode_char_number + 1(1)        —       Higher byte of the 16-bit Unicode character.
 Note 1:     “Unicode_char_number” value starts from 0 to a maximum of 30 (included).
        2:   The value at Byte Index 2 must be 2 + 2 x (number of Unicode characters in the string).
TABLE 3-15:        SUB-COMMAND STRUCTURE – WRITE USB PRODUCT DESCRIPTOR
                   STRING SUB-COMMAND
               Byte Index                Value                                      Effect
                   0                     0xB1      Write Flash Data – command code
                   1                     0x03      Write USB Product Descriptor String – writes the USB
                                                   Product String Descriptor used during the USB enumeration
                                           (2)     Number of bytes + 2 in the provided USB Serial Number Descriptor
                   2
                                                   String. The actual string starts at Byte Index 4.
                   3                     0x03      The value at this index must always be 0x03.
                                    (1)    —       Lower byte of the 16-bit Unicode character
 4 + 2 x Unicode_char_number + 0
 4 + 2 x Unicode_char_number + 1(1)        —       Higher byte of the 16-bit Unicode character
 Note 1:     “Unicode_char_number” value starts from 0 to a maximum of 30 (included).
        2:   The value at Byte Index 2 must be 2 + 2 x (number of Unicode characters in the string).
DS20005565B-page 36                                                                   2016-2017 Microchip Technology Inc.


                                                                                            MCP2221A
TABLE 3-16:       SUB-COMMAND STRUCTURE – WRITE USB SERIAL NUMBER DESCRIPTOR
                  STRING SUB-COMMAND
              Byte Index                Value                                     Effect
                  0                     0xB1      Write Flash Data – command code
                  1                     0x04      Write USB Serial Number Descriptor String – writes
                                                  the USB Serial Number String Descriptor used during the USB
                                                  enumeration
                                          (2)
                  2                               Number of bytes + 2 in the provided USB Serial Number Descriptor
                                                  String. The actual string starts at Byte Index 4
                  3                     0x03      The value at this index must always be 0x03.
                                    (1)
 4 + 2 x Unicode_char_number + 0          —       Lower byte of the 16-bit Unicode character
 4 + 2 x Unicode_char_number + 1(1)       —       Higher byte of the 16-bit Unicode character
 Note 1:    “Unicode_char_number” value starts from 0 to a maximum of 30 (included).
        2:  The value at Byte Index 2 must be 2 + 2 x (number of Unicode characters in the string).
3.1.3.1       Responses
TABLE 3-17:       RESPONSE STRUCTURE – READ CHIP FACTORY SERIAL NUMBER
                  SUB-COMMAND
  Byte
               Value                                                  Effect
 Index
    0           0xB1         Write Flash Data – command code
    1           0x00         Command completed successfully
                0x02         Command not supported
                0x03         Command not allowed
  2-63       Don’t care
 2016-2017 Microchip Technology Inc.                                                              DS20005565B-page 37


MCP2221A
3.1.4       SEND FLASH ACCESS PASSWORD
This command is used to send a user-supplied
password that will be compared to the one stored in the
device’s Flash when Flash updates (Chip/GP
configuration, USB strings) are required and the Flash
data is password-protected.
In the case where no protection mechanism is in place
or the Flash data has been permanently locked, this
command has no meaning.
TABLE 3-18:        COMMAND STRUCTURE
  Byte
           Value                                               Effect
 Index
    0      0xB2      Send Flash Access Password – command code
    1      Don’t
            care
    2        —       Password byte 1
    3        —       Password byte 2
    4        —       Password byte 3
    5        —       Password byte 4
    6        —       Password byte 5
    7        —       Password byte 6
    8        —       Password byte 7
    9        —       Password byte 8
 10-63       —       Don’t care
3.1.4.1       Responses
TABLE 3-19:        RESPONSE 1 STRUCTURE
  Byte
           Value                                               Effect
 Index
    0      0xB2      Send Flash Access Password – command code echo
    1       0x00     Command completed successfully
            0x03     Command not allowed (when the number of failed Flash updates has been reached, no password
                     will be accepted)
  2-63     Don’t
            care
DS20005565B-page 38                                                             2016-2017 Microchip Technology Inc.


                                                                                              MCP2221A
3.1.5        I2C WRITE DATA
This command is used to write user-given data to the
I2C slave device (the speed is specified by the
STATUS/SET Parameters command).
The command will have the following effects:
• The I2C engine will send the “START” condition.
• The selected I2C slave address is sent next and
   the I2C engine will wait for the slave to send an
  Acknowledge bit.
• The user data follows next and the I2C engine
   awaits for the Acknowledge bit from the slave.
• If the requested length is more than 60 bytes,
   subsequent user bytes will be sent on the bus.
• When the user data length (being sent on the bus)
   reaches the requested length, the I2C engine will
   send the “STOP” condition on the bus.
TABLE 3-20:         COMMAND STRUCTURE(1)
  Byte
            Value                                                     Effect
 Index
    0       0x90      I2C Write Data – command code
    1     Low Byte Requested I2C transfer length – 16-bit value – low byte
    2     High Byte Requested I2C transfer length – 16-bit value – high byte
    3     I2C Slave 8-bit value representing the I2C slave address to communicate with (even – address to write,
           Address odd – address to read) (Note 2)
  4-63        —       User data to be sent to the selected I2C slave device
 Note 1:     When the requested transfer length is more than 60 bytes, subsequent “I2C Write Data” commands will
             transport the reminder of the user data (till the requested length).
        2:   The I2C slave address is represented on 8 bits, with even values for writes and odd for reads. To get the
             8-bit address value out of a 7-bit address, the 7-bit value needs to be shifted left by 1 position. For write
             operations use the shifted value, while for reads add 1 to the shifted value.
3.1.5.1        Responses
TABLE 3-21:         RESPONSE 1 STRUCTURE
  Byte
            Value                                                     Effect
 Index
    0       0x90      I2C Write Data – command code echo
    1       0x00      Command completed successfully
            0x01      I2C Engine is busy (command not completed)
    2         —       Internal I2C Engine state (at the moment the command was issued) – useful for monitoring the
                      status of the I2C Engine
  3-63      Don’t
             care
 2016-2017 Microchip Technology Inc.                                                                 DS20005565B-page 39


MCP2221A
3.1.6        I2C WRITE DATA                                         • The user data follows next and the I2C engine
             REPEATED-START                                           waits for the Acknowledge bit from the slave.
This command is used to write user-given data to the                • If the requested length is more than 60 bytes,
I2C slave device (the speed is specified by the                       subsequent user bytes will be sent on the bus.
STATUS/SET Parameters command).                                     • When the user data length (being sent on the bus)
                                                                      reaches the requested length, the I2C engine will
The command will have the following effects:
                                                                      send the “STOP” condition on the bus.
• The I2C engine will send the “Repeated-START”
   condition.
• The selected I2C slave address is sent next and
   the I2C engine will wait for the slave to send an
  Acknowledge bit.
TABLE 3-22:         COMMAND STRUCTURE (1)
  Byte
            Value                                                     Effect
 Index
    0       0x92      I2C Write Data Repeated-START – command code
                      (cI2C_CMD_RSTART_WRDATA7)
    1     Low Byte Requested I2C transfer length –
                      16-bit value – low byte
    2     High Byte Requested I2C transfer length –
                      16-bit value – high byte
    3     I2C Slave 8-bit value representing the I2C slave address to communicate with (even – address to write,
           Address odd – address to read) (Note 2)
  4-63        —       User data to be sent to the selected I2C slave device
 Note 1:     When the requested transfer length is more than 60 bytes, subsequent “I2C Write Data Repeated-START”
             commands will transport the reminder of the user data (till the requested length).
        2:   The I2C slave address is represented on 8 bits, with even values for writes and odd for reads. To get the
             8-bit address value out of a 7-bit address, the 7-bit value needs to be shifted left by 1 position. For write
             operations use the shifted value, while for reads add 1 to the shifted value.
3.1.6.1        Responses
TABLE 3-23:         RESPONSE 1 STRUCTURE
  Byte
            Value                                                     Effect
 Index
    0       0x92      I2C Write Data Repeated-START – command code echo
                      (cI2C_CMD_RSTART_WRDATA7)
    1       0x00      Command completed successfully
            0x01      I2C Engine is busy
                      (command not completed)
    2         —       Internal I2C Engine state (at the moment the command was issued) – useful for monitoring the
                      status of the I2C Engine
  3-63      Don’t
             care
DS20005565B-page 40                                                                     2016-2017 Microchip Technology Inc.


                                                                                               MCP2221A
3.1.7        I2C WRITE DATA NO STOP                                 • The user data follows next and the I2C engine
                                                                      waits for the Acknowledge bit from the slave.
This command is used to write user-given data to the
I2C slave device (the speed is specified by the                     • If the requested length is more than 60 bytes,
STATUS/SET Parameters command).                                       subsequent user bytes will be sent on the bus.
                                                                    • When the user data length (being sent on the bus)
The command will have the following effects:
                                                                      reaches the requested length, the I2C engine will
• The I2C engine will send the “START” condition.                     not send the “STOP” condition on the bus.
• The selected I2C slave address is sent next and
   the I2C engine will wait for the slave to send an
  Acknowledge bit.
TABLE 3-24:         COMMAND STRUCTURE (1)
  Byte
            Value                                                     Effect
 Index
    0       0x94      I2C Write Data No STOP – command code
    1     Low Byte Requested I2C transfer length – 16-bit value – low byte
    2     High Byte Requested I2C transfer length – 16-bit value – high byte
    3     I2C Slave 8-bit value representing the I2C slave address to communicate with (even – address to write,
           Address odd – address to read) (Note 2)
  4-63        —       User data to be sent to the selected I2C slave device
 Note 1:     When the requested transfer length is more than 60 bytes, subsequent “I2C Write Data No STOP” com-
             mands will transport the reminder of the user data (till the requested length).
        2:   The I2C slave address is represented on 8 bits, with even values for writes and odd for reads. To get the
             8-bit address value out of a 7-bit address, the 7-bit value needs to be shifted left by 1 position. For write
             operations use the shifted value, while for reads add 1 to the shifted value.
3.1.7.1        Responses
TABLE 3-25:         RESPONSE 1 STRUCTURE
  Byte
            Value                                                     Effect
 Index
    0       0x94      I2C Write Data No STOP – command code echo
    1       0x00      Command completed successfully
            0x01      I2C Engine is busy (command not completed)
    2         —       Internal I2C Engine state (at the moment the command was issued) – useful for monitoring the
                      status of the I2C Engine
  3-63      Don’t
             care
 2016-2017 Microchip Technology Inc.                                                                 DS20005565B-page 41


MCP2221A
3.1.8        I2C READ DATA                                          • The user data is read next and the I2C engine
                                                                      sends the Acknowledge bit to the slave.
This command is used to read user-given data to the
I2C slave device (the speed is specified by the                     • If the requested length is more than 60 bytes,
STATUS/SET Parameters command).                                       subsequent user bytes will be read from the I2C
                                                                      slave on the bus.
The command will have the following effects:
                                                                    • When the user data length (being sent on the bus)
• The I2C engine will send the “START” condition.                     reaches the requested length, the I2C engine will
• The selected I2C slave address is sent next and                     send the “STOP” condition on the bus.
   the I2C engine will wait for the slave to send an
  Acknowledge bit.
TABLE 3-26:         COMMAND STRUCTURE
  Byte
            Value                                                     Effect
 Index
    0       0x91      I2C Read Data – command code
    1     Low Byte Requested I2C transfer length – 16-bit value – low byte
    2     High Byte Requested I2C transfer length – 16-bit value – high byte
    3     I2C Slave 8-bit value representing the I2C slave address to communicate with (even – address to write,
           Address odd – address to read) (Note 1)
  4-63      Don’t
             care
 Note 1:     The I2C slave address is represented on 8 bits, with even values for writes and odd for reads. To get the
             8-bit address value out of a 7-bit address, the 7-bit value needs to be shifted left by 1 position. For write
             operations use the shifted value, while for reads add 1 to the shifted value.
3.1.8.1        Responses
TABLE 3-27:         RESPONSE 1 STRUCTURE
  Byte
            Value                                                     Effect
 Index
    0       0x91      I2C Read Data – command code echo
    1       0x00      Command completed successfully
            0x01      I2C Engine is busy (command not completed)
    2         —       Internal I2C Engine state (at the moment the command was issued) – useful for monitoring the I2C
                      Engine’s status
  3-63      Don’t
             care
DS20005565B-page 42                                                                     2016-2017 Microchip Technology Inc.


                                                                                               MCP2221A
3.1.9        I2C READ DATA                                          • The user data is read next and the I2C engine
             REPEATED-START                                           sends the Acknowledge bit to the slave.
This command is used to read user-given data to the                 • If the requested length is more than 60 bytes,
I2C slave device (the speed is specified by the                       subsequent user bytes will be read from the I2C
STATUS/SET Parameters command).                                       slave on the bus.
                                                                    • When the user data length (being sent on the bus)
The command will have the following effect:
                                                                      reaches the requested length, the I2C engine will
• The I2C engine will send the “Repeated-START”                       send the “STOP” condition on the bus.
   condition.
• The selected I2C slave address is sent next and
   the I2C engine will wait for the slave to send an
  Acknowledge bit.
TABLE 3-28:         COMMAND STRUCTURE
  Byte
            Value                                                     Effect
 Index
    0       0x93      I2C Read Data Repeated-START – command code
    1     Low Byte Requested I2C transfer length – 16-bit value – low byte
    2     High Byte Requested I2C transfer length – 16-bit value – high byte
    3     I2C Slave 8-bit value representing the I2C slave address to communicate with (even – address to write,
           Address odd – address to read) (Note 1)
  4-63      Don’t
             care
 Note 1:     The I2C slave address is represented on 8 bits, with even values for writes and odd for reads. To get the
             8-bit address value out of a 7-bit address, the 7-bit value needs to be shifted left by 1 position. For write
             operations use the shifted value, while for reads add 1 to the shifted value.
3.1.9.1        Responses
TABLE 3-29:         RESPONSE 1 STRUCTURE
  Byte
            Value                                                     Effect
 Index
    0       0x93      I2C Read Data Repeated-START – command code echo
    1       0x00      Command completed successfully
            0x01      I2C Engine is busy (command not completed)
    2         —       Internal I2C Engine state (at the moment the command was issued) – useful for monitoring the
                      status of the I2C Engine
  3-63      Don’t
             care
 2016-2017 Microchip Technology Inc.                                                                 DS20005565B-page 43


MCP2221A
3.1.10      I2C READ DATA – GET I2C DATA
This command is used to read back the data from the
I2C slave device.
TABLE 3-30:       COMMAND STRUCTURE
  Byte
           Value                                                 Effect
 Index
   0       0x40    I2C Read Data – Get I2C Data – command code
  1-63     Don’t
            care
3.1.10.1      Responses
TABLE 3-31:       RESPONSE 1 STRUCTURE
  Byte
           Value                                                 Effect
 Index
   0       0x40    I2C Read Data – Get I2C Data – command code echo
   1       0x00    Command completed successfully
           0x41    Error reading the I2C slave data from the I2C engine
   2         —     Internal I2C Engine state (at the moment the command was issued) – useful for monitoring the I2C
                   Engine’s status
   3       0-60    The number of read-back data bytes to follow in this packet: from 0 to a maximum of 60 bytes of
                   read-back bytes
            127    This value is signaled when an error has occurred and the following data should not be taken into
                   account
  4-63       —     User Data or Don’t care
DS20005565B-page 44                                                                2016-2017 Microchip Technology Inc.


                                                                                          MCP2221A
3.1.11       SET GPIO OUTPUT VALUES
This command is used to change the GPIO output
value for those GP pins assigned for GPIO operation
(GPIO outputs).
TABLE 3-32:         COMMAND STRUCTURE
  Byte           Function
                                      Value                                     Effect
 Index         Description
   0                 —                0x50   Set GPIO Output Values – command code
   1                 —                Don’t
                                       care
   2    Alter GP0 output              0x00   Do not modify GP0 output (if GP0 is set as GPIO output)
         (enable/disable)          Any other The next byte (index 3) will be the value used to set GP0 output (only if
                                      value  GP0 is set for GPIO output)
   3     GP0 output value             0x00   GP0 (if set up for GPIO output operation) will take a logical value of ‘0’
                                   Any other GP0 (if set up for GPIO output operation) will take a logical value of ‘1’
                                      value
   4    Alter GP0 pin direction       0x00   Leave the GP0 GPIO designation as is (input or output)
         (enable/disable)          Any other The next byte (index 5) will be the value used to set GP0’s pin direction
                                      value  (only if GP0 is set for GPIO operation)
   5     GP0 pin direction            0x00   Set GP0 GPIO as output
         (input or output)         Any other GP0 (if set up for GPIO operation) will be set as a digital input
                                      value
   6    Alter GP1 output              0x00   Do not modify GP1 output (if GP1 is set as GPIO output)
         (enable/disable)          Any other The next byte (index 7) will be the value used to set GP1 output (only if
                                      value  GP1 is set for GPIO output)
   7     GP1 output value             0x00   GP1 (if set up for GPIO output operation) will take a logical value of ‘0’
                                   Any other GP1 (if set up for GPIO output operation) will take a logical value of ‘1’
                                      value
   8    Alter GP1 pin direction       0x00   Leave the GP1 GPIO designation as is (input or output)
         (enable/disable)          Any other The next byte (index 9) will be the value used to set GP1’s pin direction
                                      value  (only if GP1 is set for GPIO operation)
   9     GP1 pin direction            0x00   Set GP1 GPIO as output
         (input or output)         Any other GP1 (if set up for GPIO operation) will be set as a digital input
                                      value
   10   Alter GP2 output              0x00   Do not modify GP2 output (if GP2 is set as GPIO output)
         (enable/disable)          Any other The next byte (index 11) will be the value used to set GP2 output (only if
                                      value  GP2 is set for GPIO output)
   11    GP2 output value             0x00   The GP2 (if GP2 is set up for GPIO output operation) will take a logical
                                             value of ‘0’
                                   Any other GP2 (if GP2 is set up for GPIO output operation) will take a logical value
                                      value  of ‘1’
   12   Alter GP2 pin direction       0x00   Leave the GP2 GPIO designation as is (input or output)
         (enable/disable)          Any other The next byte (index 13) will be the value used to set GP2’s pin direction
                                      value  (only if GP2 is set for GPIO operation)
   13    GP2 pin direction            0x00   Set GP2 GPIO as output
         (input or output)         Any other GP2 (if set up for GPIO operation) will be set as a digital input
                                      value
   14   Alter GP3 output              0x00   Do not modify GP3 output (if GP3 is set as GPIO output)
         (enable/disable)          Any other The next byte (index 11) will be the value used to set GP3 output (only if
                                      value  GP3 is set for GPIO output)
 2016-2017 Microchip Technology Inc.                                                             DS20005565B-page 45


MCP2221A
TABLE 3-32:        COMMAND STRUCTURE (CONTINUED)
  Byte          Function
                                  Value                                      Effect
 Index        Description
   15   GP3 output value          0x00     GP3 (if set up for GPIO output operation) will take a logical value of ‘0’.
                                Any other GP3 (if set up for GPIO output operation) will take a logical value of ‘1’
                                  value
   16   Alter GP3 pin direction   0x00     Leave the GP3 GPIO designation as is (input or output)
        (enable/disable)        Any other The next byte (index 17) will be the value used to set GP3’s pin direction
                                  value    (only if GP3 is set for GPIO operation)
   17   GP3 pin direction         0x00     Set GP3 GPIO as output
        (input or output)       Any other GP3 (if set up for GPIO operation) will be set as a digital input
                                  value
 18-63 Reserved                   0x00
3.1.11.1      Responses
TABLE 3-33:        RESPONSE 1 STRUCTURE
  Byte          Function
                                   Value                                     Effect
 Index         Description
   0                —              0x50     Set GPIO Output Values – command code
   1                —              0x00     Command completed successfully
   2    Alter GP0 output           0xEE     If GP0 is not set for GPIO operation
        (enable/disable) status  Any other If GP0 is already set for GPIO operation, the value will be copied from
                                   value    the same byte index in the command structure
   3    GP0 output value status    0xEE     If GP0 is not set for GPIO operation
                                 Any other If GP0 is already set for GPIO operation, the value will be copied from
                                   value    the same byte index in the command structure
   4    Alter GP0 pin direction    0xEE     If GP0 is not set for GPIO operation
        (enable/disable)         Any other If GP0 is already set for GPIO operation, the value will be copied from
                                   value    the same byte index in the command structure
    5   GP1 pin direction          0xEE     If GP1 is not set for GPIO operation
        (input or output)        Any other If GP1 is already set for GPIO operation, the value will be copied from
                                   value    the same byte index in the command structure
    6   Alter GP1 output           0xEE     If GP1 is not set for GPIO operation
        (enable/disable) status  Any other If GP1 is already set for GPIO operation, the value will be copied from
                                   value    the same byte index in the command structure
    7   GP1 output value status    0xEE     If GP1 is not set for GPIO operation
                                 Any other If GP1 is already set for GPIO operation, the value will be copied from
                                   value    the same byte index in the command structure
    8   Alter GP1 pin direction    0xEE     If GP1 is not set for GPIO operation
        (enable/disable)         Any other If the GP1 is already set for GPIO operation, the value will be copied
                                   value    from the same byte index in the command structure
    9   GP1 pin direction          0xEE     If GP1 is not set for GPIO operation
        (input or output)        Any other If GP1 is already set for GPIO operation, the value will be copied from
                                   value    the same byte index in the command structure
   10   Alter GP2 output           0xEE     If GP2 is not set for GPIO operation
        (enable/disable) status  Any other If GP2 is already set for GPIO operation, the value will be copied from
                                   value    the same byte index in the command structure
DS20005565B-page 46                                                               2016-2017 Microchip Technology Inc.


                                                                                          MCP2221A
TABLE 3-33:        RESPONSE 1 STRUCTURE (CONTINUED)
  Byte          Function
                                      Value                                   Effect
 Index         Description
   11   GP2 output value status       0xEE    If GP2 is not set for GPIO operation
                                    Any other If GP2 is already set for GPIO operation, the value will be copied from
                                      value   the same byte index in the command structure
   12   Alter GP2 pin direction       0xEE    If GP2 is not set for GPIO operation
        (enable/disable)            Any other If GP2 is already set for GPIO operation, the value will be copied from
                                      value   the same byte index in the command structure
   13   GP2 pin direction             0xEE    If GP2 is not set for GPIO operation
        (input or output)           Any other If GP2 is already set for GPIO operation, the value will be copied from
                                      value   the same byte index in the command structure
   14   Alter GP3 output              0xEE    If GP3 is not set for GPIO operation
        (enable/disable) status     Any other If GP3 is already set for GPIO operation, the value will be copied from
                                      value   the same byte index in the command structure
   15   GP3 output value status       0xEE    If GP3 is not set for GPIO operation
                                    Any other If GP3 is already set for GPIO operation, the value will be copied from
                                      value   the same byte index in the command structure
   16   Alter GP3 pin direction       0xEE    If GP3 is not set for GPIO operation
        (enable/disable)            Any other If GP3 is already set for GPIO operation, the value will be copied from
                                      value   the same byte index in the command structure
   17   GP3 pin direction             0xEE    If GP3 is not set for GPIO operation
        (input or output)           Any other If GP3 is already set for GPIO operation, the value will be copied from
                                      value   the same byte index in the command structure
 18-63              —                 Don’t
                                       care
 2016-2017 Microchip Technology Inc.                                                            DS20005565B-page 47


MCP2221A
3.1.12      GET GPIO VALUES
This command is used to retrieve the GPIO direction
and pin value for those GP pins assigned for GPIO
operation (GPIO inputs or outputs).
TABLE 3-34:       COMMAND STRUCTURE
  Byte
           Value                                                 Effect
 Index
   0       0x51     Get GPIO Values – command code
  1-63     Don’t
            care
3.1.12.1      Responses
TABLE 3-35:       RESPONSE 1 STRUCTURE
  Byte      Function
                             Value                                         Effect
 Index    Description
   0            —             0x51      Get GPIO Values – command code
   1            —             0x00      Command completed successfully
   2    GP0 pin value         0xEE      If GP0 is not set for GPIO operation
                          Other values If GP0 is already set for GPIO operation, the value represents the GP0 logic
                         (0x00 or 0x01) pin value
   3    GP0 direction         0xEF      If GP0 is not set for GPIO operation
        value             Other values If GP0 is already set for GPIO operation, the value represents the GP0 pin
                         (0x00 or 0x01) designation (0x00 for output and 0x01 for input)
   4    GP1 pin value         0xEE      If GP1 is not set for GPIO operation
                          Other values If GP1 is already set for GPIO operation, the value represents the GP1 logic
                         (0x00 or 0x01) pin value
   5    GP1 direction         0xEF      If GP1 is not set for GPIO operation
        value             Other values If GP1 is already set for GPIO operation, the value represents the GP1 pin
                         (0x00 or 0x01) designation (0x00 for output and 0x01 for input)
   6    GP2 pin value         0xEE      If GP2 is not set for GPIO operation
                          Other values If GP2 is already set for GPIO operation, the value represents the GP2 logic
                         (0x00 or 0x01) pin value
   7    GP2 direction         0xEF      If GP2 is not set for GPIO operation
        value             Other values If GP2 is already set for GPIO operation, the value represents the GP2 pin
                         (0x00 or 0x01) designation (0x00 for output and 0x01 for input)
   8    GP3 pin value         0xEE      If GP3 is not set for GPIO operation
                          Other values If GP3 is already set for GPIO operation, the value represents the GP3 logic
                         (0x00 or 0x01) pin value
   9    GP3 direction         0xEF      If GP3 is not set for GPIO operation
        value             Other values If GP3 is already set for GPIO operation, the value represents the GP3 pin
                         (0x00 or 0x01) designation (0x00 for output and 0x01 for input)
 10-63          —          Don’t care
DS20005565B-page 48                                                               2016-2017 Microchip Technology Inc.


                                                                                            MCP2221A
3.1.13        SET SRAM SETTINGS
This command is used to alter various run time Chip
settings. The altered settings reside in SRAM memory
and they will not affect the chip’s Power-up/Reset
default settings. These altered settings will be active
until the next chip Power-up/Reset.
TABLE 3-36:          COMMAND STRUCTURE
  Byte
            Function Description        Value                                     Effect
 Index
   0                   —                0x60    Set SRAM settings – command code
   1                   —                Don’t
                                         care
   2      Clock Output Divider Value – this allows the user to modify the clock output value on the fly, at run-time
          Bit 7: Enable loading of a       1    The 4-0 bits will be loaded into the clock divider
          new clock divider                0    Clock divider value won’t be altered
          Bit 6-5                       Don’t
                                         care
          Bit 4-3: Duty cycle             00    0% duty cycle
                                          01    25% duty cycle
                                          10    50% duty cycle
                                          11    75% duty cycle
          Bit 2-0: Clock divider          —
          value
   3      DAC Voltage Reference – this allows the user to modify the DAC reference voltage
          Bit 7: Enable loading of a       1    Bits 2-0 will be used for DAC reference voltage selection
          new DAC reference                0    DAC reference will remain unaltered
          Bit 6-3                       Don’t
                                         care
          Bit 2-1: DAC VRM voltage        11    VRM voltage is 4.096V (only if VDD is higher than this value)
          selection. These bits are       10    VRM voltage is 2.048V
          used to change the DAC
                                          01    VRM voltage is 1.024V
          VRM voltage
                                          00    VRM voltage is off
          Bit 0: This bit is used to      1     DAC voltage reference is the internal DAC voltage reference module
          change the DAC                        (DAC VRM)
          reference voltage                0    DAC voltage reference is VDD
   4      Set DAC Output Value
          Bit 7: Enable loading of a       1    Bits 4-0 will be used for DAC reference voltage selection
          new DAC value                    0    The current DAC value will remain unaltered
          Bit 6-5                       Don’t
                                         care
          Bit 4-0: The new DAC            —
          value
 2016-2017 Microchip Technology Inc.                                                              DS20005565B-page 49


MCP2221A
TABLE 3-36:       COMMAND STRUCTURE (CONTINUED)
  Byte
         Function Description       Value                                        Effect
 Index
   5   ADC Voltage Reference – this allows the user to modify the ADC reference voltage
       Bit 7: Enable loading of a     1       Bits 2-0 will be used for ADC reference voltage selection
       new ADC reference              0       ADC reference will remain unaltered
       Bit 6-3                      Don’t
                                     care
       Bit 2-1: These bits are        11      VRM voltage is 4.096V (only if VDD is higher than this value)
       used to change the DAC         10      VRM voltage is 2.048V
       VRM voltage
                                      01      VRM voltage is 1.024V
                                      00      VRM voltage is off
       Bit 0: This bit is used to     1       VDD ADC voltage reference is the internal ADC voltage reference
       change the DAC                         module (ADC VRM)
       reference voltage               0      ADC voltage reference is VDD
   6   Setup the interrupt detection mechanism and clear the detection flag – useful for preparing the interrupt
       detection module to detect a new interrupt condition
       Bit 7: Enable the               1      The interrupt detection settings and flag will change
       modification of the             0      The interrupt detection settings and flag will remain unchanged
       interrupt detection
       conditions
       Bit 6-5                      Don’t
                                     care
       Bit 4                          —       Enable the modification of the positive edge detection
       Bit 3: The new value for        1      Interrupt detection will trigger on positive edges
       the positive edge               0      Interrupt detection will not trigger on positive edges
       detector
       Bit 2                          —       Enable the modification of the negative edge detection
       Bit 1: The new value for        1      Interrupt detection will trigger on negative edges
       the negative edge               0      Interrupt detection will not trigger on negative edges
       detector
       Bit 0: Clear the interrupt      1      Clear the interrupt detection flag
       detection flag                  0      Leave the interrupt detection flag as is
   7   Alter GPIO configuration:       1      Alter the GP designation. The values from Byte Index 8 will be used to
       alters the current GP                  load a new set of values into the SRAM GP settings.
       designation                     0      Do not alter the current GP designation
   8   GP0 Settings
       Bit 7-5                      Don’t
                                     care
       Bit 4: GPIO Output value       —       When GP0 is set as an output GPIO, this value will be present at the
                                              GP0 pin
       Bit 3: GPIO Direction           1      GPIO Input mode
       (Input/Output) – Works          0      GPIO Output mode
       only when GP0 is set for
       GPIO operation
       Bit 2-0: GP0 Designation   111-011 Don’t care
                                     010      Alternate function 0 (LED UART RX)
                                     001      Dedicated function operation (SSPND)
                                     000      GPIO operation
DS20005565B-page 50                                                                  2016-2017 Microchip Technology Inc.


                                                                                         MCP2221A
TABLE 3-36:       COMMAND STRUCTURE (CONTINUED)
  Byte
          Function Description         Value                                   Effect
 Index
    9   GP1 Settings
        Bit 7-5                        Don’t
                                        care
        Bit 4: GPIO Output value         —    When GP1 is set as an output GPIO, this value will be present at the
                                              GP1 pin
        Bit 3: GPIO Direction            1    GPIO Input mode
        (Input/Output) – Works           0    GPIO Output mode
        only when GP1 is set for
        GPIO operation
        Bit 2-0: GP0 Designation      111-101 Don’t care
                                        100   Alternate function 2 (Interrupt Detection)
                                        011   Alternate function 1 (LED UART TX)
                                        010   Alternate function 0 (ADC1)
                                        001   Dedicated function operation (Clock Output)
                                        000   GPIO operation
   10   GP2 Settings
        Bit 7-5                        Don’t
                                        care
        Bit 4: GPIO Output value         —    When GP2 is set as an output GPIO, this value will be present at the
                                              GP2 pin
        Bit 3: GPIO Direction            1    GPIO Input mode
        (Input/Output) – Works           0    GPIO Output mode
        only when GP2 is set for
        GPIO operation
        Bit 2-0: GP2 Designation      111-100 Don’t care
                                        011   Alternate function 1 (DAC1)
                                        010   Alternate function 0 (ADC2)
                                        001   Dedicated function operation (USBCFG)
                                        000   GPIO operation
   11   GP3 Settings
        Bit 7-5                        Don’t
                                        care
        Bit 4: GPIO Output value         —    When GP3 is set as an output GPIO, this value will be present at the
                                              GP3 pin
        Bit 3: GPIO Direction            1    GPIO Input mode
        (Input/Output) – Works           0    GPIO Output mode
        only when GP3 is set for
        GPIO operation
        Bit 2-0: GP3 Designation      111-100 Don’t care
                                        011   Alternate function 1 (DAC2)
                                        010   Alternate function 0 (ADC3)
                                        001   Dedicated function operation (LED I2C)
                                        000   GPIO operation
 12-63 Reserved                        0x00
 2016-2017 Microchip Technology Inc.                                                        DS20005565B-page 51


MCP2221A
3.1.13.1     Responses
TABLE 3-37:      RESPONSE 1 STRUCTURE
  Byte
          Value                                        Effect
 Index
   0       0x60   Set SRAM settings – command code echo
   1       0x00   Command completed successfully
  2-63    Don’t
           care
3.1.14     GET SRAM SETTINGS
This command is used to retrieve the run time Chip and
GP settings.
TABLE 3-38:      COMMAND STRUCTURE
  Byte
          Value                                        Effect
 Index
   0       0x61   Get SRAM Settings – command code echo
  1-63     0x00   Command completed successfully
DS20005565B-page 52                                            2016-2017 Microchip Technology Inc.


                                                                                        MCP2221A
3.1.14.1      Responses
TABLE 3-39:         RESPONSE 1 STRUCTURE
  Byte
                   Function Description            Value                             Effect
 Index
   0                          —                    0x61  Get SRAM Settings – command code echo
   1                          —                    0x00  Command completed successfully
   2    Length in bytes of the SRAM Chip             —
        settings area.
   3    Length in bytes of the SRAM GP               —
        settings area.
   4    Bit 7: CDC Serial Number Enumeration          1  The USB serial number will be used during the USB
        Enable                                           enumeration of the CDC interface
                                                      0  No serial number descriptor will be presented during
                                                         the USB enumeration
        Bit 6: Initial value for LEDUARTRX pin       —   This value represents the logic level signaled when no
        option                                           UART RX activity takes places. When the UART RX (of
                                                         the MCP2221A) is receiving data, the LEDUARTRX pin
                                                         will take the negated value of this bit.
        Bit 5: Initial value for LEDUARTTX pin       —   This value represents the logic level signaled when no
        option.                                          UART TX transmission takes place. When the UART
                                                         TX (of the MCP2221A) is sending data, the
                                                         LEDUARTTX pin will take the negated value of this bit.
        Bit 4: Initial value for LEDI2C pin option   —   This value represents the logic level signaled when no
                                                         I2C traffic occurs. When I2C traffic is active, the LEDI2C
                                                         pin (if enabled) will take the negated value of this bit.
        Bit 3: Initial value for SSPND pin option    —   This value represents the logic level signaled when the
                                                         device is not in Suspend mode. Upon entering Suspend
                                                         mode, the SSPND pin (if enabled) will take the negated
                                                         value of this bit.
        Bit 2: Initial value for USBCFG pin          —   This value represents the logic level signaled when the
        option                                           device is not USB configured. When the device will be
                                                         USB-configured, the USBCFG pin (if enabled) will take
                                                         the negated value of this bit.
        Bit 1-0: Chip Configuration security         10  Permanently locked
        option                                       01  Password-protected
                                                     00  Unsecured
   5    Bit 7-5                                    Don’t
                                                    care
        Bit 4-0: Clock Output divider value          —   If the GP pin (exposing the clock output) is enabled for
                                                         clock output operation, the divider value will be used on
                                                         the 48 MHz USB internal clock and its divided output
                                                         will be sent to this pin. (Bits 4-3 for duty cycle and bits
                                                         2-0 for the clock divider.)
   6    Bit 7-6: DAC Reference voltage option        11  Reference voltage is 4.096V
                                                     10  Reference voltage is 2.048V
                                                     01  Reference voltage is 1.024V
                                                     00  Reference voltage is off (this is useful for the case in
                                                         which the DAC uses other reference than VRM DAC;
                                                         e.g., VDD)
        Bit 5: DAC reference option                   1  DAC reference is VRM DAC voltage
                                                      0  DAC reference is VDD
        Bit 4-0: Power-up DAC value                  —
 2016-2017 Microchip Technology Inc.                                                            DS20005565B-page 53


MCP2221A
TABLE 3-39:       RESPONSE 1 STRUCTURE (CONTINUED)
  Byte
                 Function Description             Value                            Effect
 Index
    7  Bit 7                                      Don’t
                                                   care
       Bit 6: Interrupt detection – negative        —   If set, the interrupt detection flag will be set when a
       edge                                             negative edge occurs
       Bit 5: Interrupt detection – positive edge   —   If set, the interrupt detection flag will be set when a
                                                        positive edge occurs
       Bit 4-3: ADC Reference Voltage               11  Reference voltage is 4.096V (only if VDD is above this
                                                        voltage)
                                                    10  Reference voltage is 2.048V
                                                    01  Reference voltage is 1.024V
                                                    00  Reference voltage is off (this is useful for the case in
                                                        which the ADC uses other reference than VRM DAC;
                                                        e.g., VDD)
       Bit 2: ADC Reference Option                   1  ADC reference is VRM ADC
                                                     0  ADC reference is VDD
       Bit 1                                      Don’t
                                                   care
       Bit 2                                      Don’t
                                                   care
    8  Lower byte of the 16-bit USB VID value       —
    9  Higher byte of the 16-bit USB VID value      —
   10  Lower byte of the 16-bit USB PID value       —
   11  Higher byte of the 16-bit USB PID value      —
   12  USB power attributes                         —   This value will be used by the MCP2221A’s USB
                                                        Configuration Descriptor (power attributes value) during
                                                        the USB enumeration
   13  USB requested number of mA(s)                —   The requested mA value during the USB enumeration
                                                        will represent the value at this index multiplied by 2
   14  Current supplied-password byte 1             —
   15  Current supplied-password byte 2             —
   16  Current supplied-password byte 3             —
   17  Current supplied-password byte 4             —
   18  Current supplied-password byte 5             —
   19  Current supplied-password byte 6             —
   20  Current supplied-password byte 7             —
   21  Current supplied-password byte 8             —
DS20005565B-page 54                                                             2016-2017 Microchip Technology Inc.


                                                                                    MCP2221A
TABLE 3-39:       RESPONSE 1 STRUCTURE (CONTINUED)
  Byte
                 Function Description           Value                            Effect
 Index
   22   GP0 Settings
        Bit 7-5                                 Don’t
                                                 care
        Bit 4: GPIO Output value                  —    When the GP0 is set as an output GPIO, this value will
                                                       be present at the GP0 pin
        Bit 3: GPIO Direction (Input/Output) –    1    GPIO Input mode
        Works only when GP0 is set for GPIO       0    GPIO Output mode
        operation
        Bit 2-0: GP0 Designation               111-011 Don’t care
                                                 010   Alternate function 0 (LED UART RX)
                                                 001   Dedicated function operation (SSPND)
                                                 000   GPIO operation
   23   GP1 Settings
        Bit 7-5                                 Don’t
                                                 care
        Bit 4: GPIO Output value                  —    When the GP1 is set as an output GPIO, this value will
                                                       be present at the GP1 pin
        Bit 3: GPIO Direction (Input/Output) –    1    GPIO Input mode
        Works only when GP1 is set for GPIO       0    GPIO Output mode
        operation
        Bit 2-0: GP1 Designation               111-101 Don’t care
                                                 100   Alternate function 2 (Interrupt Detection)
                                                 011   Alternate function 1 (LED UART TX)
                                                 010   Alternate function 0 (ADC1)
                                                 001   Dedicated function operation (Clock Output)
                                                 000   GPIO operation
   24   GP2 Settings
        Bit 7-5                                 Don’t
                                                 care
        Bit 4: GPIO Output value                  —    When the GP2 is set as an output GPIO, this value will
                                                       be present at the GP2 pin
        Bit 3: GPIO Direction (Input/Output) –    1    GPIO Input mode
        Works only when GP2 is set for GPIO       0    GPIO Output mode
        operation
        Bit 2-0: GP2 Designation               111-100 Don’t care
                                                 011   Alternate function 1 (DAC1)
                                                 010   Alternate function 0 (ADC2)
                                                 001   Dedicated function operation (USBCFG)
                                                 000   GPIO operation
 2016-2017 Microchip Technology Inc.                                                      DS20005565B-page 55


MCP2221A
TABLE 3-39:        RESPONSE 1 STRUCTURE (CONTINUED)
  Byte
                  Function Description           Value                            Effect
 Index
   25    GP3 Settings
         Bit 7-5                                 Don’t
                                                  care
         Bit 4: GPIO Output value                  —    When the GP3 is set as an output GPIO, this value will
                                                        be present at the GP3 pin
         Bit 3: GPIO Direction (Input/Output) –    1    GPIO Input mode
         Works only when GP3 is set for GPIO       0    GPIO Output mode
         operation
         Bit 2-0: GP3 Designation               111-100 Don’t care
                                                  011   Alternate function 1 (DAC2)
                                                  010   Alternate function 0 (ADC3)
                                                  001   Dedicated function operation (LED I2C)
                                                  000   GPIO operation
 26-63                                           Don’t
                                                  care
3.1.15       RESET CHIP
This command is used to force a Reset of the
MCP2221A device. This command is useful when the
Flash memory is updated with new data. The
MCP2221A would need to be re-enumerated to see the
new data.
   Note:     This command is the only command that
             does not expect a response.
TABLE 3-40:        COMMAND STRUCTURE
  Byte
           Value                                            Effect
 Index
    0       0x70     Reset Chip – command code
    1       0xAB
    2      0xCD
    3       0xEF
  4-63      0x00     Reserved
DS20005565B-page 56                                                            2016-2017 Microchip Technology Inc.


                                                                                                                                MCP2221A
4.0       ELECTRICAL
          CHARACTERISTICS
Absolute Maximum Ratings (†)(1)
Ambient temperature under bias ...............................................................................................................-40°C to +85°C
Storage temperature .............................................................................................................................. -65°C to +150°C
Voltage on VDD with respect to VSS ......................................................................................................... -0.3V to +6.0V
Voltage on RST with respect to VSS .......................................................................................................... -0.3V to +9.0V
Voltage on VUSB pin with respect to VSS .................................................................................................. -0.3V to +4.0V
Voltage on D+ and D- pins with respect to VSS ........................................................................... -0.3V to (VUSB + 0.3V)
Voltage on all other pins with respect to VSS ................................................................................. -0.3V to (VDD + 0.3V)
Total power dissipation(2) .....................................................................................................................................800 mW
Maximum current out of VSS pin ............................................................................................................................ 95 mA
Maximum current into VDD pin ............................................................................................................................... 95 mA
Clamp current, IK (VPIN < 0 or VPIN > VDD)20 mA
Maximum output current sunk by any I/O pin..........................................................................................................25 mA
Maximum output current sourced by any I/O pin ....................................................................................................25 mA
Maximum current sunk by all ports .........................................................................................................................90 mA
Maximum current sourced by all ports ................................................................................................................... 90 mA
 † NOTICE: Stresses above those listed under “Absolute Maximum Ratings” may cause permanent damage to the
 device. This is a stress rating only and functional operation of the device at those or any other conditions above those
 indicated in the operation listings of this specification is not implied. Exposure above maximum rating conditions for
 extended periods may affect device reliability.
Note 1:     VUSB must always be  VDD + 0.3V.
       2:   Power dissipation is calculated as follows: PDIS = VDD x {IDD –  IOH} +  {(VDD –
            VOH) x IOH} + (VOL x IOL).
 2016-2017 Microchip Technology Inc.                                                                                                       DS20005565B-page 57


MCP2221A
   4.1     DC CHARACTERISTICS
                                        Operating Conditions (unless otherwise indicated):
   DC Characteristics
                                        3.0V VDD  5.5V at -40C  TA  +85C (I-Temp)
    Param.
                  Characteristic         Sym.         Min.       Typ.    Max.     Units           Conditions
      No.
     D001   Supply Voltage                VDD         3.0         —       5.5       V
            POR                          VPOR                     1.6      —        V
            Release Voltage
            POR                             —                     0.8      —        V
            Rearm Voltage
     D003   VDD Rise Rate to Ensure      SVDD         0.05        —        —      V/ms   Design guidance only
            POR                                                                          Not tested
     D004   Supply Current                 IDD         —          —        —        —
            VDD = 3.0V                      —          —          10       12      mA    FOSC = 12 MHz,
            VDD = 5.0V                      —          —          13       15      mA    (330 nF on VUSB)
     D005   Standby Current               IDDS         —          46       —        μA
            Input Low-Voltage
     D031   Schmitt Trigger (URX)          VIL         —          —     0.2 VDD      V   3.0V  VDD  5.5V
            TTL (GP pins)                              —          —       0.8            4.5V  VDD  5.5V
            Input High-Voltage
     D041   Schmitt Trigger (URX)          VIH      0.8 VDD       —       VDD        V   3.0V  VDD  5.5V
            TTL (GP pins)                              2.0        —       VDD            4.5V  VDD  5.5V
            Input Leakage Current
     D060   GP, URX                         IIL        —         ±50     ±100       nA   VSS  VPIN  VDD,
                                                                                         pin at high-Z
            Output Low-Voltage
     D080   GP, UTX                        VOL         —          —       0.6        V   IOL = 8.0 mA, VDD = 5.0V
                                                       —          —       0.6            IOL = 6.0 mA, VDD = 3.3V
            Output High-Voltage
     D090   GP, UTX                       VOH      VDD – 0.7      —        —         V   IOH = -3.5 mA, VDD = 5.0V
                                                   VDD – 0.7      —        —             IOH = -3.0 mA, VDD = 3.3V
            Capacitive Loading Specs on Output Pins
     D102   GPIO                           CIO         —          —        50       pF   Note 1
   Note 1:    Characterized only, not 100% tested.
DS20005565B-page 58                                                            2016-2017 Microchip Technology Inc.


                                                                                        MCP2221A
FIGURE 4-1:             POR AND POR REARM WITH SLOW RISING VDD
                         VDD
                       VPOR
                      VPORR
                         VSS
                   NPOR (1)
                                                            POR REARM
                         VSS
                                                     TVLOW (2)            TPOR(3)
                          Note 1: When NPOR is low, the device is held in Reset.
                               2: TPOR 1 μs typical.
                               3: TVLOW 2.7 μs typical.
TABLE 4-1:         USB MODULE SPECIFICATIONS
                                      Operating Conditions (unless otherwise indicated):
        DC Characteristics
                                      3.0V  VDD  5.5V at -40°C  TA  +85°C (I-Temp)
 Param.
                Characteristic          Sym.      Min.       Typ.   Max.     Units              Conditions
   No.
  D313    USB Voltage                   VUSB      3.0         —      3.6       V      Voltage on the VUSB pin must
                                                                                      be in this range for proper
                                                                                      USB operation
  D314    Input Leakage on Pin            IIL      —          —      ±1        μA     VSS  VPIN  VDD pin at
                                                                                      high-impedance
  D315    Input Low Voltage            VILUSB      —          —      0.8       V      For VUSB range
          for USB Buffer
  D316    Input High Voltage           VIHUSB     2.0         —      —         V      For VUSB range
          for USB Buffer
  D318    Differential Input            VDIFS      —          —      0.2       V     The difference between D+
          Sensitivity                                                                 and D- must exceed this value
                                                                                      while VCM is met
  D319    Differential Common            VCM      0.8         —      2.5       V
          Mode Range
  D320    Driver Output                 ZOUT       28         —      44        W
          Impedance(1)
  D321    Voltage Output Low             VOL      0.0         —      0.3       V      1.5 k load connected to 3.6V
  D322    Voltage Output High            VOH      2.8         —      3.6       V      1.5 k load connected to
                                                                                      ground
 Note 1:    The D+ and D- signal lines have been built-in impedance matching resistors. No external resistors,
            capacitors or magnetic components are necessary on the D+/D- signal paths between the MCP2221A
            family device and the USB cable.
 2016-2017 Microchip Technology Inc.                                                            DS20005565B-page 59


MCP2221A
TABLE 4-2:        A/D CONVERTER (ADC) CHARACTERISTICS
Standard Operating Conditions (unless otherwise stated)
Operating temperature Tested at +25°C
 Param
                  Characteristic        Sym. Min.     Typ.     Max. Units                    Conditions
   No.
AD01      Resolution                    NR       —     —        10     bit
AD08      Recommended Impedance of ZAIN          —     —        10     k     Can go higher if external 0.01F capaci-
         Analog Voltage Source                                                tor is present on input pin.
TABLE 4-3:        DIGITAL-TO-ANALOG CONVERTER (DAC) SPECIFICATIONS
 Operating Conditions: 3.0V < VDD < 5.5V, -40°C < TA < +85°C (unless otherwise stated).
   Param
                    Characteristic           Sym.      Min.      Typ.      Max.      Units          Comments
    No.
 DAC01*     Step Size                      CLSB         —       VDD/32      —           V
 DAC02*     Absolute Accuracy              CACC         —         —         1/2      LSb
 DAC03*     Unit Resistor Value (R)        CR           —         5K        —          
 DAC04*     Settling Time(1)               CST          —         —         10         s
       *    These parameters are characterized but not tested.
 Note 1:   Settling time measured while DACVAL<4:0> transitions from ‘0000’ to ‘1111’.
TABLE 4-4:        THERMAL CONSIDERATIONS
Standard Operating Conditions (unless otherwise stated)
Operating temperature: -40C  TA  +85C (I-Temp)
 Param.
                   Characteristic            Sym.       Typ.      Units                     Conditions
   No.
  TH01 Thermal Resistance Junction            θJA        70       C/W 14-pin PDIP package
         to Ambient                                     95.3      C/W 14-pin SOIC package
                                                         100      C/W 14-pin TSSOP package
                                                        45.7      C/W 16-pin QFN 4 x 4 mm package
  TH02 Thermal Resistance Junction            θJC        32       C/W 14-pin PDIP package
         to Case                                         31       C/W 14-pin SOIC package
                                                        24.4      C/W 14-pin TSSOP package
                                                         6.3      C/W 16-pin QFN 4 x 4 mm package
  TH03 Maximum Junction Temperature          TJMAX      +150        C
  TH04 Power Dissipation                      PD          —         W      PD = PINTERNAL + PI/O
  TH05 Internal Power Dissipation          PINTERNAL      —         W      PINTERNAL = IDD x VDD(1)
  TH06 I/O Power Dissipation                  PI/O        —         W      PI/O = (IOL x VOL) + (IOH x (VDD – VOH))
  TH07 Derated Power                         PDER         —         W      PDER = PDMAX (TJ – TA)/θJA(2, 3)
Note 1: IDD is the current to run the device alone without driving any load on the output pins.
       2: TA = Ambient Temperature.
       3: TJ = Junction Temperature.
DS20005565B-page 60                                                                  2016-2017 Microchip Technology Inc.


                                                                                     MCP2221A
4.2      AC Characteristics
4.2.1        TIMING PARAMETER SYMBOLOGY
The timing parameter symbols have been created in
one of the following formats:
 1. TppS2ppS                                                2. TppS
 T
 F          Frequency                                       T         Time
 E          Error
 Lowercase letters (pp) and their meanings:
 pp
 io         Input or Output pin                             osc       Oscillator
 rx         Receive                                         tx        Transmit
 bitclk     RX/TX BITCLK                                    RST       Reset
 drt        Device Reset Timer
 Uppercase letters and their meanings:
 S
 F          Fall                                            P         Period
 H          High                                            R         Rise
 I          Invalid (high-impedance)                        V         Valid
 L          Low                                             Z         High-impedance
4.2.2        TIMING CONDITIONS
The operating temperature and voltage specified in
Table 4-5 apply to all timing specifications, unless
otherwise noted. Figure 4-2 specifies the load
conditions for the timing specifications.
TABLE 4-5:          TEMPERATURE AND VOLTAGE SPECIFICATIONS – AC
                                Standard Operating Conditions (unless otherwise stated)
                                Operating temperature -40C  TA  +85C
   AC CHARACTERISTICS
                                Operating voltage VDD range as described in DC spec,
                                Section 4.1 “DC Characteristics”.
FIGURE 4-2:             LOAD CONDITIONS
                        FOR DEVICE TIMING
                        SPECIFICATIONS
                 Pin
                                   50 pF
 2016-2017 Microchip Technology Inc.                                                   DS20005565B-page 61


MCP2221A
4.2.3       TIMING DIAGRAMS AND
            SPECIFICATIONS
TABLE 4-6:         RESET, OSCILLATOR START-UP TIMER AND POWER-UP TIMER PARAMETERS
 Standard Operating Conditions (unless otherwise stated)
 Operating Temperature: -40°C  TA  +85°C
  Param
                      Characteristic              Sym.    Min.   Typ.†    Max.     Units          Conditions
   No.
    30     RST Pulse Width (low)                  TRST      2      —        —       μs
    31     Power-up Timer                        TPWRT     40      65      140      ms
    32     Oscillator Start-Up Time               TOST     —      1024      —      TOST
         * These parameters are characterized but not tested.
         † Data in the “Typ.” column is at 5V, +25°C, unless otherwise stated. These parameters are for design
          guidance only and are not tested.
DS20005565B-page 62                                                                2016-2017 Microchip Technology Inc.


                                                                                           MCP2221A
5.0      PACKAGING INFORMATION
5.1      Package Marking Information
                      14-Lead PDIP (300 mil)                                       Example
                                                                                  MCP2221A
                                                                                           e3
                                                                                         P ^^
                                                                                     1448256
                         14-Lead SOIC (3.90 mm)                                  Example
                                                                                MCP2221A
                                                                                       SL
                                                                                  1448256
                 14-Lead TSSOP (4.4 mm)                                                Example
                     XXXXXXXX                                                          2221AST
                            YYWW                                                         1448
                                                                                          256
                              NNN
                        16-Lead QFN (4x4x0.9 mm)                           Example
                                                                                    2221A
                                                                                         e3
                                                                                     ML ^^
                                                                                    703256
               Legend: XX...X        Customer-specific information
                           Y         Year code (last digit of calendar year)
                           YY        Year code (last 2 digits of calendar year)
                           WW        Week code (week of January 1 is week ‘01’)
                           NNN      Alphanumeric traceability code
                            e3       Pb-free JEDEC designator for Matte Tin (Sn)
                           *         This package is Pb-free. The Pb-free JEDEC designator ( e3 )
                                     can be found on the outer packaging for this package.
               Note:    In the event the full Microchip part number cannot be marked on one line, it will
                        be carried over to the next line, thus limiting the number of available
                        characters for customer-specific information.
 2016-2017 Microchip Technology Inc.                                                            DS20005565B-page 63


MCP2221A
                     
          3 % & %! % 4" ) '   %    4 $%  %"%
              %% 255)))&    &5 4
                             N
     NOTE 1
                                                                         E1
                             1     2      3
                                                D
                                                                                                       E
            A                                                          A2
                                                                                L                                       c
             A1
                                       b1
                                     b                    e                                            eB
                                                                6%                7+8-
                                                    &  9&%        7        7:            ;
                    7!&(  $                                 7                    
                    %                                                          1+
                        % %                                   <          <            
                     ""4        4                         0       ,           0
                    1 % %                                0         <              <
                        !" %     !" ="%                 -               ,           ,0
                     ""4="%                          -               0           >
                    : 9%                                         ,0       0           0
                      % %                           9       0       ,           0
                    9"     4                                       >                  0
                    6     9"="%                             (       0       ?           
                    9 ) 9"="%                                (              >           
                    :  ) *                       1          <          <            ,
 
  !"#$%! & '(!%&! %( %")% %  % " 
 *$%+  %  %
, &   "-"  %!"& "$   % !    "$   % !            %#".   "
 &  "%    -/0
       1+21 &    %#%!       ))% !%%   
                                                                                                    ) +01
DS20005565B-page 64                                                                        2016-2017 Microchip Technology Inc.


                                                                                      MCP2221A
   Note:    For the most current package drawings, please see the Microchip Packaging Specification located at
            http://www.microchip.com/packaging
 2016-2017 Microchip Technology Inc.                                                         DS20005565B-page 65


MCP2221A
   Note:   For the most current package drawings, please see the Microchip Packaging Specification located at
           http://www.microchip.com/packaging
DS20005565B-page 66                                                            2016-2017 Microchip Technology Inc.


                                                                                 MCP2221A
         3 % & %! % 4" ) '   %    4 $%  %"%
             %% 255)))&    &5 4
 2016-2017 Microchip Technology Inc.                                                    DS20005565B-page 67


MCP2221A
   Note:  For the most current package drawings, please see the Microchip Packaging Specification located at
          http://www.microchip.com/packaging
DS20005565B-page 68                                                            2016-2017 Microchip Technology Inc.


                                                                                       MCP2221A
   Note:    For the most current package drawings, please see the Microchip Packaging Specification located at
            http://www.microchip.com/packaging
 2016-2017 Microchip Technology Inc.                                                          DS20005565B-page 69


MCP2221A
   Note:  For the most current package drawings, please see the Microchip Packaging Specification located at
          http://www.microchip.com/packaging
DS20005565B-page 70                                                            2016-2017 Microchip Technology Inc.


                                                                                        MCP2221A
 16-Lead Plastic Quad Flat, No Lead Package (ML) - 4x4x0.9mm Body [QFN]
   Note:   For the most current package drawings, please see the Microchip Packaging Specification located at
           http://www.microchip.com/packaging
                                                        D                     A    B
                                                 N
                           NOTE 1
                                         1
                                         2
                                                                                   E
                         (DATUM B)
                         (DATUM A)
                        2X
                              0.15 C
                              2X
                                    0.15 C         TOP VIEW
                                                                                     0.10 C
                     C                                                                            A1
                         A
         SEATING
            PLANE                                                          16X
                              (A3)                                               0.08 C
                                                  SIDE VIEW
                                                                         0.10    C A B
                                                       D2
                                                                                             0.10    C A B
                                                                                       E2
                                        2
                            e
                            2
                                        1
                          NOTE 1
                                                                              K
                                               N
                                  0.40                                  16X b
                                                    e                         0.10     C A B
                                               BOTTOM VIEW
                                                               Microchip Technology Drawing C04-127D Sheet 1 of 2
 2016-2017 Microchip Technology Inc.                                                         DS20005565B-page 71


MCP2221A
 16-Lead Plastic Quad Flat, No Lead Package (ML) - 4x4x0.9mm Body [QFN]
  Note:    For the most current package drawings, please see the Microchip Packaging Specification located at
           http://www.microchip.com/packaging
                                                           Units             MILLIMETERS
                                               Dimension Limits      MIN         NOM          MAX
                        Number of Pins                      N                      16
                        Pitch                                e                 0.65 BSC
                        Overall Height                      A        0.80         0.90        1.00
                        Standoff                            A1       0.00         0.02        0.05
                        Contact Thickness                   A3                 0.20 REF
                        Overall Width                       E                  4.00 BSC
                        Exposed Pad Width                   E2       2.50         2.65        2.80
                        Overall Length                      D                  4.00 BSC
                        Exposed Pad Length                  D2       2.50         2.65        2.80
                        Contact Width                        b       0.25         0.30        0.35
                        Contact Length                       L       0.30         0.40        0.50
                        Contact-to-Exposed Pad               K       0.20           -           -
      Notes:
      1. Pin 1 visual index feature may vary, but must be located within the hatched area.
      2. Package is saw singulated
      3. Dimensioning and tolerancing per ASME Y14.5M
              BSC: Basic Dimension. Theoretically exact value shown without tolerances.
              REF: Reference Dimension, usually without tolerance, for information purposes only.
                                                                 Microchip Technology Drawing C04-127D Sheet 2 of 2
DS20005565B-page 72                                                                2016-2017 Microchip Technology Inc.


                                                                                       MCP2221A
   Note:    For the most current package drawings, please see the Microchip Packaging Specification located at
            http://www.microchip.com/packaging
 2016-2017 Microchip Technology Inc.                                                         DS20005565B-page 73


MCP2221A
NOTES:
DS20005565B-page 74  2016-2017 Microchip Technology Inc.


                                            MCP2221A
APPENDIX A:              REVISION HISTORY
Revision B (July 2017)
The following is the list of modifications:
1.  Added Table 4-2 and Table 4-3.
2.  Minor typographical edits.
Revision A (June 2016)
Original Release of this Document.
 2016-2017 Microchip Technology Inc.         DS20005565B-page 75


MCP2221A
NOTES:
DS20005565B-page 76  2016-2017 Microchip Technology Inc.


                                                                                                           MCP2221A
PRODUCT IDENTIFICATION SYSTEM
To order or obtain information, e.g., on pricing or delivery, contact your local Microchip sales office.
 PART NO.           [X](1)                X            /XX                                 Examples:
    Device    Tape and Reel Temperature Package                                            a)  MCP2221A- I/P:    Industrial temperature,
                  Option              Range                                                                      14LD PDIP Package
                                                                                           a)  MCP2221A- I/SL:   Industrial temperature,
  Device:                  MCP2221A: USB-to-I2C/UART Protocol Converter                                          14LD SOIC Package
                           MCP2221AT: USB-to-I2C/UART Protocol Converter                   b)  MCP2221AT- I/SL: Tape and Reel,
                                           (Tape and Reel)                                                       Industrial temperature,
                                                                                                                 14LD SOIC Package
  Temperature Range: I            =      -40C to   +85C   (Industrial)                   a)  MCP2221A- I/ST:   Industrial temperature,
                                                                                                                 14LD TSSOP Package
                                                                                           b)  MCP2221AT- I/ST: Tape and Reel,
  Package:                 ML     = Plastic Quad Flat, No Lead Package – 4x4x0.9 mm                             Industrial temperature,
                                     Body (QFN), 16-Lead                                                        14LD TSSOP Package
                           P      = Plastic Dual In Line, 300 mil. Body (PDIP), 14-Lead    a)  MCP2221A- I/ML: Industrial temperature,
                           SL     = Plastic Small Outline – Narrow, 3.90 mm Body                                 16LD 4x4 QFN Package
                                     (SOIC), 14-Lead                                       b)  MCP2221AT- I/ML: Tape and Reel,
                           ST     = Plastic Thin Shrink Small Outline – 4.4 mm Body                             Industrial temperature,
                                     (TSSOP), 14-Lead                                                           16LD 4x4 QFN Package
  Note 1:   Tape and Reel identifier only appears in the catalog part number description.
            This identifier is used for ordering purposes and is not printed on the device
            package. Check with your Microchip Sales Office for package availability with
            the Tape and Reel option.
 2016-2017 Microchip Technology Inc.                                                                               DS20005565B-page 77


MCP2221A
NOTES:
DS20005565B-page 78  2016-2017 Microchip Technology Inc.


Note the following details of the code protection feature on Microchip devices:
•      Microchip products meet the specification contained in their particular Microchip Data Sheet.
•      Microchip believes that its family of products is one of the most secure families of its kind on the market today, when used in the
       intended manner and under normal conditions.
•      There are dishonest and possibly illegal methods used to breach the code protection feature. All of these methods, to our
       knowledge, require using the Microchip products in a manner outside the operating specifications contained in Microchip’s Data
       Sheets. Most likely, the person doing so is engaged in theft of intellectual property.
•      Microchip is willing to work with the customer who is concerned about the integrity of their code.
•      Neither Microchip nor any other semiconductor manufacturer can guarantee the security of their code. Code protection does not
       mean that we are guaranteeing the product as “unbreakable.”
Code protection is constantly evolving. We at Microchip are committed to continuously improving the code protection features of our
products. Attempts to break Microchip’s code protection feature may be a violation of the Digital Millennium Copyright Act. If such acts
allow unauthorized access to your software or other copyrighted work, you may have a right to sue for relief under that Act.
Friday, May 10, 2002Information contained in this publication               Trademarks
regarding device applications and the like is provided only for             The Microchip name and logo, the Microchip logo, AnyRate,
your convenience and may be superseded by updates. It is                    dsPIC, FlashFlex, flexPWR, Heldo, JukeBlox, KeeLoq,
your responsibility to ensure that your application meets with              KeeLoq logo, Kleer, LANCheck, LINK MD, MediaLB, MOST,
your specifications. MICROCHIP MAKES NO REPRESENTA-                         MOST logo, MPLAB, OptoLyzer, PIC, PICSTART, PIC32 logo,
TIONS OR WARRANTIES OF ANY KIND WHETHER                                     RightTouch, SpyNIC, SST, SST Logo, SuperFlash and UNI/O
EXPRESS OR IMPLIED, WRITTEN OR ORAL, STATUTORY                              are registered trademarks of Microchip Technology
OR OTHERWISE, RELATED TO THE INFORMATION,                                   Incorporated in the U.S.A. and other countries.
INCLUDING BUT NOT LIMITED TO ITS CONDITION,
QUALITY, PERFORMANCE, MERCHANTABILITY OR                                    ClockWorks, The Embedded Control Solutions Company,
FITNESS FOR PURPOSE. Microchip disclaims all liability                      ETHERSYNCH, Hyper Speed Control, HyperLight Load,
arising from this information and its use. Use of Microchip                 IntelliMOS, mTouch, Precision Edge, and QUIET-WIRE are
devices in life support and/or safety applications is entirely at           registered trademarks of Microchip Technology Incorporated
the buyer’s risk, and the buyer agrees to defend, indemnify and             in the U.S.A.
hold harmless Microchip from any and all damages, claims,                  Analog-for-the-Digital Age, Any Capacitor, AnyIn, AnyOut,
suits, or expenses resulting from such use. No licenses are                 BodyCom, chipKIT, chipKIT logo, CodeGuard, dsPICDEM,
conveyed, implicitly or otherwise, under any Microchip                      dsPICDEM.net, Dynamic Average Matching, DAM, ECAN,
intellectual property rights unless otherwise stated.                       EtherGREEN, In-Circuit Serial Programming, ICSP, Inter-Chip
                                                                            Connectivity, JitterBlocker, KleerNet, KleerNet logo, MiWi,
                                                                            motorBench, MPASM, MPF, MPLAB Certified logo, MPLIB,
                                                                            MPLINK, MultiTRAK, NetDetach, Omniscient Code
                                                                            Generation, PICDEM, PICDEM.net, PICkit, PICtail,
                                                                            PureSilicon, RightTouch logo, REAL ICE, Ripple Blocker,
                                                                            Serial Quad I/O, SQI, SuperSwitcher, SuperSwitcher II, Total
                                                                            Endurance, TSHARC, USBCheck, VariSense, ViewSpan,
                                                                            WiperLock, Wireless DNA, and ZENA are trademarks of
                                                                            Microchip Technology Incorporated in the U.S.A. and other
                                                                            countries.
                                                                            SQTP is a service mark of Microchip Technology Incorporated
                                                                            in the U.S.A.
Microchip received ISO/TS-16949:2009 certification for its worldwide
headquarters, design and wafer fabrication facilities in Chandler and       Silicon Storage Technology is a registered trademark of
Tempe, Arizona; Gresham, Oregon and design centers in California            Microchip Technology Inc. in other countries.
and India. The Company’s quality system processes and procedures
are for its PIC® MCUs and dsPIC® DSCs, KEELOQ® code hopping                 GestIC is a registered trademarks of Microchip Technology
devices, Serial EEPROMs, microperipherals, nonvolatile memory and           Germany II GmbH & Co. KG, a subsidiary of Microchip
analog products. In addition, Microchip’s quality system for the design
and manufacture of development systems is ISO 9001:2000 certified.          Technology Inc., in other countries.
                                                                           All other trademarks mentioned herein are property of their
                                                                            respective companies.
                                                                            © 2016-2017, Microchip Technology Incorporated, Printed in
                                                                            the U.S.A., All Rights Reserved.
                                                                            ISBN: 978-1-5224-1897-9
 2016-2017 Microchip Technology Inc.                                                                              DS20005565B-page 79


                          Worldwide Sales and Service
AMERICAS                  ASIA/PACIFIC               ASIA/PACIFIC                   EUROPE
Corporate Office          Asia Pacific Office        China - Xiamen                 Austria - Wels
2355 West Chandler Blvd.  Suites 3707-14, 37th Floor Tel: 86-592-2388138            Tel: 43-7242-2244-39
Chandler, AZ 85224-6199   Tower 6, The Gateway       Fax: 86-592-2388130            Fax: 43-7242-2244-393
Tel: 480-792-7200         Harbour City, Kowloon      China - Zhuhai                 Denmark - Copenhagen
Fax: 480-792-7277         Hong Kong                  Tel: 86-756-3210040            Tel: 45-4450-2828
Technical Support:        Tel: 852-2943-5100         Fax: 86-756-3210049            Fax: 45-4485-2829
http://www.microchip.com/ Fax: 852-2401-3431         India - Bangalore              Finland - Espoo
support
                          Australia - Sydney         Tel: 91-80-3090-4444           Tel: 358-9-4520-820
Web Address:              Tel: 61-2-9868-6733        Fax: 91-80-3090-4123           France - Paris
www.microchip.com         Fax: 61-2-9868-6755        India - New Delhi              Tel: 33-1-69-53-63-20
Atlanta                                              Tel: 91-11-4160-8631           Fax: 33-1-69-30-90-79
                          China - Beijing
Duluth, GA                Tel: 86-10-8569-7000       Fax: 91-11-4160-8632           France - Saint Cloud
Tel: 678-957-9614         Fax: 86-10-8528-2104       India - Pune                   Tel: 33-1-30-60-70-00
Fax: 678-957-1455
                          China - Chengdu            Tel: 91-20-3019-1500           Germany - Garching
Austin, TX                Tel: 86-28-8665-5511       Japan - Osaka                  Tel: 49-8931-9700
Tel: 512-257-3370         Fax: 86-28-8665-7889       Tel: 81-6-6152-7160            Germany - Haan
Boston                                               Fax: 81-6-6152-9310            Tel: 49-2129-3766400
                          China - Chongqing
Westborough, MA           Tel: 86-23-8980-9588       Japan - Tokyo                  Germany - Heilbronn
Tel: 774-760-0087         Fax: 86-23-8980-9500       Tel: 81-3-6880- 3770           Tel: 49-7131-67-3636
Fax: 774-760-0088
                          China - Dongguan           Fax: 81-3-6880-3771            Germany - Karlsruhe
Chicago                   Tel: 86-769-8702-9880      Korea - Daegu                  Tel: 49-721-625370
Itasca, IL
                          China - Guangzhou          Tel: 82-53-744-4301            Germany - Munich
Tel: 630-285-0071
                          Tel: 86-20-8755-8029       Fax: 82-53-744-4302            Tel: 49-89-627-144-0
Fax: 630-285-0075
                          China - Hangzhou           Korea - Seoul                  Fax: 49-89-627-144-44
Dallas
                          Tel: 86-571-8792-8115      Tel: 82-2-554-7200             Germany - Rosenheim
Addison, TX
                          Fax: 86-571-8792-8116      Fax: 82-2-558-5932 or          Tel: 49-8031-354-560
Tel: 972-818-7423
                          China - Hong Kong SAR      82-2-558-5934
Fax: 972-818-2924                                                                   Israel - Ra’anana
                          Tel: 852-2943-5100         Malaysia - Kuala Lumpur        Tel: 972-9-744-7705
Detroit
                          Fax: 852-2401-3431         Tel: 60-3-6201-9857
Novi, MI                                                                            Italy - Milan
                          China - Nanjing            Fax: 60-3-6201-9859
Tel: 248-848-4000                                                                   Tel: 39-0331-742611
                          Tel: 86-25-8473-2460       Malaysia - Penang              Fax: 39-0331-466781
Houston, TX
                          Fax: 86-25-8473-2470       Tel: 60-4-227-8870
Tel: 281-894-5983                                                                   Italy - Padova
                          China - Qingdao            Fax: 60-4-227-4068
Indianapolis                                                                        Tel: 39-049-7625286
                          Tel: 86-532-8502-7355      Philippines - Manila
Noblesville, IN                                                                     Netherlands - Drunen
                          Fax: 86-532-8502-7205      Tel: 63-2-634-9065
Tel: 317-773-8323                                                                   Tel: 31-416-690399
                          China - Shanghai           Fax: 63-2-634-9069
Fax: 317-773-5453                                                                   Fax: 31-416-690340
Tel: 317-536-2380         Tel: 86-21-3326-8000       Singapore                      Norway - Trondheim
                          Fax: 86-21-3326-8021       Tel: 65-6334-8870
Los Angeles                                                                         Tel: 47-7289-7561
                          China - Shenyang           Fax: 65-6334-8850
Mission Viejo, CA                                                                   Poland - Warsaw
Tel: 949-462-9523         Tel: 86-24-2334-2829       Taiwan - Hsin Chu              Tel: 48-22-3325737
Fax: 949-462-9608         Fax: 86-24-2334-2393       Tel: 886-3-5778-366
                                                     Fax: 886-3-5770-955            Romania - Bucharest
Tel: 951-273-7800         China - Shenzhen
                                                                                    Tel: 40-21-407-87-50
Raleigh, NC               Tel: 86-755-8864-2200      Taiwan - Kaohsiung
Tel: 919-844-7510         Fax: 86-755-8203-1760      Tel: 886-7-213-7830            Spain - Madrid
                                                                                    Tel: 34-91-708-08-90
New York, NY              China - Wuhan              Taiwan - Taipei
                                                                                    Fax: 34-91-708-08-91
Tel: 631-435-6000         Tel: 86-27-5980-5300       Tel: 886-2-2508-8600
                          Fax: 86-27-5980-5118       Fax: 886-2-2508-0102           Sweden - Gothenberg
San Jose, CA                                                                        Tel: 46-31-704-60-40
Tel: 408-735-9110         China - Xian               Thailand - Bangkok
Tel: 408-436-4270         Tel: 86-29-8833-7252       Tel: 66-2-694-1351             Sweden - Stockholm
                          Fax: 86-29-8833-7256       Fax: 66-2-694-1350             Tel: 46-8-5090-4654
Canada - Toronto
Tel: 905-695-1980                                                                   UK - Wokingham
Fax: 905-695-2078                                                                   Tel: 44-118-921-5800
                                                                                    Fax: 44-118-921-5820
DS20005565B-page 80                                                         2016-2017 Microchip Technology Inc.
                                                                                                         11/07/16


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Microchip:
 MCP2221AT-I/ML MCP2221A-I/SL MCP2221A-I/ML MCP2221AT-I/SL MCP2221A-I/ST MCP2221A-I/P
MCP2221AT-I/ST
