                            Obsolete – Part Discontinued, Use PI5USB30213A
                                                                                                             PI5USB30213
                                                                                               2
                                 USB 3.0/3.1 Gen 1 SuperSpeed Mux/Demux Switch with I C Control for Type-C Connector
Features                                                            Description
          USB Type-C™ Specification 1.1                             The PI5USB30213 is a dual d ifferential channel bi-direct ional
          Dual Differential Channel, 2:1 USB 3.0/31 GEN 1           mu ltip lexer/de-multip lexer switch solution for USB 3.0/31
            Mux/DeMux                                               GEN 1 Type-C connector applications.
                                                                    PI5USB30213 switches between the USB controller and the
          Switches USB controller and Type-C connector
                                                                    new Type-C connector. It supports host mode, device mode
          Supports Host-mode/Device-mode/Dual-role mode             and dual-role mode ports with auto matic configuration based
          Auto-configure ports orientation through CC detection     on the voltage levels detected on CC pin. It offers excellent
          Supports VCONN to power active cables and other           signal integrity for high-speed signals at low power
            accessories                                             dissipation.
          Supports over-current protection and over-voltage         PI5USB30213 supports both pin and I2 C control base on
            protection for VCONN                                    ADDR pin setting. In pin control mode, the PORT input pin
          Allow both pin control and I2 C interface                 determines the port setting, whether this is a host, device or
          Integrated power switches, high-precision resistors and   dual-role port. In host mode, the system can monitor ID pin to
            current sources for CC pins                             know the connector status while default current mode is set.
                                                                    Systems running in device mode can monitor system VBUS
          Provides support for default current, 1.5A and 3A         for connector status as well as OUT1 and OUT2 p ins for host's
            modes with I2 C control                                 charging profile capability.
          Output indicator for plug-in detection
          Power saving mode                                         Enabling I2 C control mode allo w high flexib ility for port
          Wide power supply range : 2.7V – 5.5V                     control and commun ications through registers read/write in
                                                                    PI5USB30213. There is also flexib ility to support Defau lt,
          Temperature Range: -40o C to 85o C                        1.5A and 3A current modes. An interrupt signal for indicating
          Packaging (Pb-free & Green):                              changes with the I2 C registers is sent to the master to notify
            – 24- contact, X1QFN(2mm x 4mm)                         the system any change in the Type-C connector while in
                                                                    parallel the system can still monitor ID pin.
Applications
                                                                    Block Diagram
     Notebooks
     Mobile Phones
     Tablets
     Docking Station
Pin Configuration
                                                                                Figure 2. PI5USB30213 Block diagram
               Figure 1. Pin Assignment (Top View)
PI5USB30213                                                                                    www.diodes.com             12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                   Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                  1


                                                                                                                        PI5USB30213
Pin Descriptions
       Pin Number             Pin Name                   I/O    Description
                                                                I2 C communication clock signal.
                                                                Dual function as open drain Type-C Current Mode Detect 1 in pin
                                                                control mode when port is a device;
       1                      SCL/OUT2                   I/O    OUT2 OUT1 Current Mode
                                                                  Hi-Z Hi-Z Default
                                                                  Hi-Z Low Medium
                                                                  Low Low High
                                                                Open drain output. In I2 C control mode, this is an active LOW interrupt
                                                                signal for indicating changes in I2 C registers.
       2                      INTB/OUT3                  O      Dual function as analog audio adapter detection in pin control mode:
                                                                OUT3=Hi-Z – Not detected;
                                                                OUT3=Low – Analog audio adapter detected
                                                                Tri-level input pin to indicate port mode (for pin control only):
                                                                PORT is floating –Try.SNK Dual Role (DRP);
       3                      PORT                       I
                                                                PORT=VDD – Host (SRC);
                                                                PORT=GND – Device (SNK)
       4                      Ap                         I/O    Differential USB 3.0/31 GEN 1 signal A (PHY side)
       5                      An                         I/O    Differential USB 3.0/31 GEN 1 signal A (PHY side)
       6                      VDD                        Power  Positive supply voltage from VBAT
       7                      Bn                         I/O    Differential USB 3.0/31 GEN 1 signal B (PHY side)
       8                      Bp                         I/O    Differential USB 3.0/31 GEN 1 signal B (PHY side)
                                                                Open drain output. Asserted low when CC pin detected device
       9                      ID                         O      attachment when port is a Host (or dual-role acting as Host), otherwise
                                                                ID is hi-z.
       10                     VCONN                      Power  Supply voltage for VCONN
       11                     CC1                        I/O    Type-C Configuration channel signals
       12                     CC2                        I/O    Type-C Configuration channel signals
                                                                Active-low enable input pin (with internal weak pull up)
       13                     ENB                        I      ENB=VDD – Disabled/Low Power State
                                                                ENB=GND – Enabled/Active State
       14                     B1p                        I/O    Differential USB 3.0/31 GEN 1 signal B for position 1 connection
       15                     B1n                        I/O    Differential USB 3.0/31 GEN 1 signal B for position 1 connection
       16                     A1p                        I/O    Differential USB 3.0/31 GEN 1 signal A for position 1 connection
       17                     A1n                        I/O    Differential USB 3.0/31 GEN 1 signal A for position 1 connection
       18                     B2n                        I/O    Differential USB 3.0/31 GEN 1 signal B for position 2 connection
       19                     B2p                        I/O    Differential USB 3.0/31 GEN 1 signal B for position 2 connection
       20                     A2n                        I/O    Differential USB 3.0/31 GEN 1 signal A for position 2 connection
       21                     A2p                        I/O    Differential USB 3.0/31 GEN 1 signal A for position 2 connection
                                                                Tri-level input pin to indicate I2 C address or pin control mode:
                                                                ADDR is floating – Pin control mode;
       22                     ADDR                       I
                                                                ADDR=VDD            – I2 C enabled with ADDR bit 6 equal to 1;
                                                                ADDR=GND            – I2 C enabled with ADDR bit 6 equal to 0
       23                     VBUSDET                    I      VBUS detection
                                                                I2 C communication data signal.
                                                                Dual function as open drain Type-C Current Mode Detect 1 in pin
                                                                control mode when port is a device;
       24                     SDA/OUT1                   I/O    OUT2 OUT1 Current Mode
                                                                  Hi-Z Hi-Z Default
                                                                  Hi-Z Low Medium
                                                                  Low Low High
       Thermal Pad            GND                        Ground Ground
PI5USB30213                                                                                              www.diodes.com              12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                              Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                            2


                                                                         PI5USB30213
PI5USB30213 –Typical Application Circuit
PI5USB30213                                                www.diodes.com            12/1/2017
Datasheet Number DS40461 Rev 1-2                                              Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                         3


                                                                                                                                                                                                     PI5USB30213
Maximum Ratings
                                                                                                                                                                 Note:
  Storage Temperature......................................................................................................-65oC to +150oC                       Stresses greater than those listed under MAXIMUM
                                                                                                                                                                 RATINGS may cause permanent damage to the device.
  Junction Temperature ..........................................................................................................................125 oC          This is a stress rating only and functional operation of the
  Supply Voltage from Battery/Baseband...................................................................-0.5V to +6.0V                                          device at these or any other conditions above those
  Switch I/O Voltage USB ......................................................................................................-0.5V to +3V                      indicated in the operational sections of this specification
  ID Pin Sink current ..................................................................................................................................10mA     is not implied. Exposure to absolute maximum rating
                                                                                                                                                                 conditions for extended periods may affect reliability.
  ESD: HBM all pins ..............................................................................................................................2000V
  CC1/CC2 Pin Sink Current...................................................................................................................3mA
  VBUSDET Pin Sink Current ..........................................................................................................0.1mA
  Continuous Output Current (CC1, CC2) ....................................................Internally limited
Recommended Operation Conditions
        Symbol                                                                                          Parameter                                                                    Min.           Max.          Units
          VDD              Battery Supply Voltage                                                                                                                                      2.7            5.5            V
          VBUS             System VBUS Voltage                                                                                                                                          4             28             V
        VBAT_TH            Battery Supply Under-Voltage Lockout, falling edge                                                                                                          2.2           2.65            V
         VCONN             VCONN Supply Voltage Range                                                                                                                                  2.7            5.5            V
        VSWCM              Switch I/O Common Mode Voltage                                                                                                                               0              2             V
           VIH             High level input voltage (SCL, SDA, ENB)                                                                                                                   1.05                           V
           VIL             Low level input voltage (SCL, SDA, ENB)                                                                                                                                    0.4            V
          V3IH             High level input voltage (ADDR,PORT)                                                                                                                    VDD-0.4                           V
          V3IL             Low level input voltage (ADDR,PORT)                                                                                                                                        0.4            V
  VIN_CC12                 CC1, CC2 input voltage(1)                                                                                                                                              VDD+0.5            V
  VIN_VBUSDET              VBUSDET input voltage(2)                                                                                                                                                   4.5            V
           TA              Operating Temperature                                                                                                                                      -40             85            °C
          ICC1             Continuous output current, CC1                                                                                                                               0            400            mA
          ICC2             Continuous output current, CC2                                                                                                                               0            400            mA
Note :
(1) CC1 and CC2 are internally clamped to maximum (VDD,VCONN) +1.0V (typ.)
(2) VBUSDET is internally clamped to ~5.5V
DC Electrical Characteristics
Min and Max apply for T A between -40°C to 85°C and TJ up to +125°C (unless otherwise noted). Typical values are
referenced to VDD =3.6V, TA =+25°C
  Symbol                                         Parameter                                                                                            Test Conditions                 Min.      Typ.       Max.       Units
USB SuperSpeed Switches (Axp, Axn, Bxp, Bxn)
               USB3.0/3.1 Gen 1 SS TX/RX Switch
 RSSON (1)                                                                                                                 ILOAD = -8mA, Vin = 0V                                        -         6          9         Ω
               On-Resistance
               USB3.0/3.1 Gen 1 DC Bias Resistance
  RSSBIAS                                                                                                                                                                                -       200          -        kΩ
               to Ground
CC1/CC2 Configuration(Device mode, SNK)
      RD       Device mode pull down resistor                                                                                                                                           4.6       5.1        5.6       kΩ
 VTH3_SNK High current mode entry threshold                                                                                                                                            1.16      1.23       1.31        V
 VTH2_SNK Medium current mode entry threshold                                                                                                                                          0.61      0.66       0.70        V
 VTH1_SNK Default current mode entry threshold                                                                                                                                         0.15       0.2       0.25        V
CC1/CC2 Configuration(Host mode, SRC)
                                                                                                                           Default current mode                                         64        80         96
       IP      Host mode pull up current source                                                                            Medium current mode (1.5A)                                  166       180        194        µA
                                                                                                                           High current mode (3A)                                      304       330        356
VBUS Detection
    VVBUS VBUS detection threshold                                                                                         Rvbus=910kohm                                                2.5       3.0        4.0        V
VCONN
  RVCONN VCONN switch on-resistance                                                                                        ILOAD = 100mA, VCONN = 5V                                     -        0.5        0.6        Ω
PI5USB30213                                                                                                                                                                         www.diodes.com                 12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                                                                                                            Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                                                                                                     4


                                                                                                                            PI5USB30213
   IVCONN
   @ 80% VCONN output current at 80% VCONN                           VCONN = 5V, Vcc1 or Vcc2=4.5V             500      570         650        mA
   VCONN
     ITRIP VCONN over current protection threshold VCONN = 2.7V-5.0V                                           500      700         975        mA
     VOVP VCONN over voltage protection                                                                        5.8       6.0         6.2        V
Host Interface Pins (INTB,ID,OUT1,OUT2,OUT3)
              Output Low Voltage at
      VOL                                                                                                        0        -          0.4        V
              1.6mA Sink current(Open-Drain)
      IOFF Off-state leakage current                                 VINTB.ID/ID/OUT1/OUT2/OUT3                  -        -           1        µA
Input Control Pins (ENB, ADDR, PORT, SCL, SDA)
       IIH    High-level input current                                                                          -5        -           5        µA
       IIL    Low-level input current                                                                           -5        -           5        µA
Current Consumption
              operating current, Device mode                         SNK connects to SRC                         -      200         300        µA
      IDD                                                            SRC connects to SNK
              operating current, Host mode                                                                       -      280         400        µA
                                                                     Default current mode
 IDEV_STBY Device mode standby current                               VDD =3.6V, Floating CC1 and CC2             -       45          65        µA
IDUAL_STBY Dual-Role mode standby current                            VDD =3.6V, Floating CC1 and CC2             -       55          75        µA
IHOST_STBY Host mode standby current                                 VDD =3.6V, Floating CC1 and CC2                     65          85        µA
  IDISABLE Chip is disabled                                          ENB=VDD                                     -        -           5        µA
Thermal Shutdown
                                                                                                                                                o
     TOTP Thermal shutdown threshold                                                                             -      155           -           C
                                                                                                                                                o
      Thys Thermal shutdown hysteresis                                                                           -       20           -           C
Note :
(1) On-resistance is the voltage drop between the two terminals at the indicated current through the switch.
AC Electrical Characteristics
Min and Max apply for T A between -40°C to 85°C and TJ up to +125°C (unless otherwise noted). Typical values are referenced
to TA =+25°C, VDD =3.8V.
Symbol            Parameter                                                    Test Conditions                     Min.     Typ.      Max. Units
     BW USB       -3dB Differential Bandwidth of USB channel                                                         -         8        -       GHz
          IL      Differential insertion loss                                                                        -      -0.9        -        dB
         RL       Differential return loss                                     f=2.5GHz, Vcm=0V                      -       -15        -        dB
     XTALK        Differential crosstalk                                                                             -       -30        -        dB
         Ton      Turn-On Time                                                                                       -        20        -         s
         Toff     Turn-Off Time                                                                                      -         1        -         s
Capacitance       (TA = 0°C to 85°C)
Symbol            Parameter                                                   Test Conditions                  Min.     Typ.      Max.       Units
   CONUSB         TXn+, TXn- On Capacitance (USB Mode)                                                             -      1.5         -         pF
       Coff       TXn+, TXn- OFF Capacitance (USB Mode)                                                            -       1          -         pF
I2C AC Electrical Characteristics
                                                                                                              Fast Mode (400kHz)
Symbol                                                   Parameter                                                                            Units
                                                                                                                 Min.            Max.
      fSCL        SCL Clock Frequency                                                                              0             400           kHz
    tHDSTA        Hold Time (Repeated) START Condition                                                            0.6              -            µs
     tLOW         LOW Period of SCL Clock                                                                         1.3              -            µs
     tHIGH        HIGH Period of SCL Clock                                                                        0.6              -            µs
    tSETSTA       Set-up Time for Repeated START Condition                                                        0.6              -            µs
    tHDDAT        Data Hold Time                                                                                   0             0.9            µs
   TSUDAT         Data Set-up Time                                                                                250              -            ns
         tr       Rise Time of SDA and SCL Signals                                                                 -             300
                                                                                                                                                ns
         tf       Fall Time of SDA and SCL Signals                                                                 -             300
    tSETSTO       Set-up Time for STOP Condition                                                                  0.6              -            µs
      t BUF       Bus-Free Time between STOP and START Conditions                                                 1.3              -            µs
        tSP       Pulse Width of Spikes that Must Be Suppressed by the Input Filter                                0              50            ns
PI5USB30213                                                                                                  www.diodes.com                12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                                    Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                                  5


                                                                                                                 PI5USB30213
                                  Figure 3. Definition of Timing for Full-Speed Mode Devices on the I2 C Bus
                                                               Table 1. I2 C Slave Address
              Name                      Size (Bits)      Bit 7       Bit 6       Bit 5     Bit 4 Bit 3    Bit 2     Bit 1        Bit 0
 Slave Address(ADDR=1)                                    0           1            0         1     1        0        1           R/W
                                               8
 Slave Address(ADDR=0)                                    0           0            0         1     1        0        1           R/W
PI5USB30213                                                                                        www.diodes.com             12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                       Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                             6


                                                                                                                 PI5USB30213
I2C Data Transfer
Note:
PI5USB30213 does not have offset byte. All registers must be read or written sequentially from 0x00. For example, in order to read address
0x04, PI5USB30213 I2C registers must be read sequentially from 0x01, 0x02, 0x03 to 0x04. In order to write address 0x02, it must be written
sequentially from 0x01 to 0x02.
PI5USB30213                                                                                       www.diodes.com                12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                         Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                   7


                                                                                                                  PI5USB30213
Detailed Description
ADDR
ADDR is a tri-level input pin to indicate I2C or pin control (or GPIO) mode. When ADDR p in is floating, the part is set to pin
control mode. When ADDR is set to VDD o r GND, I2C mode is enabled, and b it 6 of I2C address is equal to 1 or 0 accordin g to
ADDR set to VDD or GND (see Table 1: I2C Slave Address).
Configuration
The PI5USB30213 requires minimal configuration for proper detection and reporting. Write register 0x02 (Control Register) to
configure different charging profiles and port settings .
Processor Communication
Typical communication steps between the processor and the PI5USB30213 during plug detection are:
1. INTB asserted LOW, indicating changes in register 0x03 (Interrupt register) or register 0x04 (CC status register).
2. Processor reads Interrupt registers to determine which event occurred. Interrupt Register (0x03) indicates if an attach or detach
      event was detected. All interrupt flags in Interrupt Register (0x03) will be cleared after the I2 C read action. INTB will beco me
      hi-z again after the clearance of interrupt flags.
3. Processor reads CC Status Register (0x04) to determine p lugin details and charging profile. Processor can configure the power
      and USB channels according to information in CC Status Register.
Interrupts
The baseband processor recognizes interrupt signals by observing the INTB signal, wh ich is active LOW. Interrupts are masked
upon bit 0 of Control Register 0x02 (Interrupt Mask Bit) . After the Interrupt Mask Bit is cleared by the baseband processor, the
INTB pin is hi-z in preparat ion for a future interrupt. When an interruptible event occurs, INTB t ransitions LOW and returns hi-z
when the processor reads the Interrupt Register (0x03). Subsequent to the initial power up or reset; if the processor writes a “1”
to Interrupt Mask Bit when the system is already powered up, the INTB p in stays hi-z and ignores all interrupts until the Interrupt
Mask Bit is cleared.
      Besides monitoring the I2 C registers, the system can also monitor ID pin and VBUS for connector status. If the port is
configured as a device (or dual-role acting as device), VBUS will go to 5V when host attachment is detected. If the port is
configured as a host (or dual-role acting as host), ID pin will pull low when device attachment is detected, and system should
assert VBUS.
Port Setting (Host/Device/Dual-Role)
When power is applied to VDD, an internal Power -On Reset (POR) holds the PI5USB30213 in a reset con dition until VDD has
reached 2.7V. At that point, the reset condition is released and the PI5USB30213 registers and I2 C-bus state machine will initialize
to their default states. [2:1] of Control Reg ister (0x02) are init ialized according to the PORT p in setting (see Table 3 I2 C Register
Table). Type-C connector can be configured as host, device or dual-role port per the register. After power up, the port setting can
still be changed by I2C writes to Bits [2:1] of Control Reg ister (0x02). Thereafter, VDD must be lowered below 1.0V to reset the
device (both registers and I2 C-bus state machine).
PI5USB30213 connects current sources to CC1 and CC2 when operating in host mode. It will also set the current level accord ing
to the charging current setting. In device mode, PI5USB30213 will connect two integrated resistor Rd1 and Rd2 to CC1 and CC2
respectively. Dual-Role mode enables CC1 and CC2 toggle between host mode and device mode alternatively every 50ms. The
toggling will stop after connection is made and role negotiated.
Current Mode Setting and Detection
Type-C connector can be configured as different current modes per CC1/ CC2 setting. Host mode (or dual ro le acting as Host)
allo ws the system to configure between h igh current mode (3A), med iu m current mode (1.5A) and default current mode. Different
current modes can be set by writ ing control register (x02h). When in Device mode (or dual role acting as device), CC1/ CC2 pins
allo w the system to detect the host charging capability. The charging capability is reported in CC Status Register (0x04) which can
help the system configure the charging current accordingly.
ID
When PI5USB30213 is configured as host mode (or dual ro le acting as host), ID pin will be pulled low when a device is attached
to the type-C connector. The ID pin will work as interrupt signal to acknowledge system when there is device attachment. It
should be noted the ID pin will not be driven low when an audio or debug accessory is detected, and ID pin will always stay hi-z
when port is in device mode.
Audio and Debug Accessory
PI5USB30213 can detect Audio or Debug Accessory attachment as per CC1/CC2 s etting. This is reported in CC Status Register
(0x04) to help system configure Audio Adapter Accessory and Debug Accessory Mode accordingly.
PI5USB30213                                                                                       www.diodes.com                12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                         Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                      8


                                                                                                                   PI5USB30213
VBUS Detection
PI5USB30213 detects VBUS to determine the attached state when port is a device. A 910koh m +/- 5% is required to connect
VBUS of the connector to VBUSDET input pin to protect the IC from the possible high voltag e of VBUS during alternative mode.
ENB
ENB is an active low enable input pin. When ENB p in is high, part is in disable and low power state . All outputs, with the
exception of CC1, CC2, SCL & SDA are in High-Z state. CC1 and CC2 pins are pulled lo w with resistors Rd in d isable state. I2 C
port will also be reset during disable state. SCL & SDA are still functional when the part is disable and ADDR is not floating. I2C
port will also reset during every transition (rising or falling edge) of ENB. Connection State will also be reset and forced to be
“DISABLED” state. However, disable has no effect on the value of Register 02H (Control).
When ENB pin is low, part is enabled. The connection state will activate and detection will restart.
Dead Battery startup
PI5USB30213 ensures dead battery charging when VDD=0V. Both CC1 and CC2 will be pulled down when VDD=0V. Such
configuration helps other host port detect the dead battery port as a device mode port and enable charging through VBUS.
VCONN Power Path at CC1/CC2 Pin
PI5USB30213 offers low-resistance switch path between CC1/ CC2 to VCONN pin fo r powering accessories or active cables.
There are over-voltage, over-current and thermal protections online to protect the system from fault connection.
VCONN Fault Condition Trigger and Recover
Over-current protection is online in PI5USB30213 to protect VCONN fro m being drawn a continuous current exceeding 700mA.
Graph below further describes the characteristic of the over-current protection scheme. If the voltage at CC1/CC2 is lower than
~1.8V, the current limit will further be reduced down to 200mA. When the current limit is hit (OCP event), PI5USB30213 pulls
low INTB pin to acknowledge the processor a fault condition happened.
                                         VCC1 /VCC2
                                                         Decreasing load resistance
                                       VCONN
                                      4.5V
                                                                                                  Decreasing
                                                                                                  load resistance
                                   ~1.8V
                                                                                               IVCONN
                                                            ~200mA               ~570mA
                                                Figure 4. Output Voltage vs. Current Limit Threshold
Power Delivery Communication
USB Po wer Delivery is a feature on the USB Type-C connector. When USB PD is implemented, USB PD Bi-phase Mark Coded
(BMC) carried on the CC wire shall be used for USB PD communications between USB Type-C ports.
At attach, VBUS shall be operationally stable prior to init iating USB PD co mmunications. As a UFP may wait for 200msec to
establish a successful connection after VBUS is detected. USB PD co mmun ications fro m DFP should be init iated at least 200msec
after VBUS is turned on and stable. Otherwise, the connection may not be successfully established until USB PD co mmunicat ion
is finished.
PI5USB30213                                                                                          www.diodes.com            12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                        Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                              9


                                                                                                                PI5USB30213
Pin Control Functional Description
Type-C connector port setting (PORT)
Type-C connector can be configured as different ports by changing PORT pin voltage level.
                                       Table 2A. Port Setting
                                         Port setting                              PORT
                                         Device (SNK)                              GND
                                         Dual-role port (DRP) with Try.SNK         No Connection
                                         Host (SRC)                                VDD
Type-C connector current mode detection (OUT1, OUT2)
Type-C connector can detect different host current modes and other accessories per CC1/CC2 setting. When PI5USB30213
operates in device mode (or dual role mode acting as device), it detects CC1/CC2 status to determine host charging current mo des
and reports to the system using OUT1 and OUT2 p ins . OUT1 and OUT2 will always stay hi-z unless med iu m o r h igh current
mode is detected.
                            Table 2B. Current Mode Detection
                                                                                  OUT2              OUT1
                              Default current mode                                 Hi-Z             Hi-Z
                              Medium current mode (1.5A)                           Hi-Z              Low
                              High current mode (3A)                               Low               Low
Type-C Connector current mode setting in host mode
When PI5USB30213 is configured as a host, the current mode can only be set to Default Current Mode(current source Ip=80uA).
I2C control is required to set current mode to 1.5A or 3A.
Audio Adapter Accessory Detection (OUT3)
PI5USB30213 detects analog audio adapter attachment as per CC1/ CC2 setting. Th is is reported by the OUT3 pin. OUT3 will be
pulled low when an analog audio adapter attachment is detected. Otherwise, OUT3 will stay hi-z.
                                                      Table 2C. Audio Adapter Accessory Detection
                                         Audio Accessory                           OUT3
                                         Detected                                  Low
                                         Not Detected                              Hi-Z
ADDR, ID, ENB, and Dead Battery Startup
Functionality of the ADDR, ID, and ENB pins are the same for pin control or I2C control modes. Dead Battery Startup operation
is also the same for pin control and I2C control modes. Please refer to previous section for detail description.
PI5USB30213                                                                                       www.diodes.com            12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                     Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                          10


                                                                                                                             PI5USB30213
Table 3. I2C Register
Address      Name                Description                                                                    Default Value            Type
0x01         Device ID           Bits [7:3] = Version ID                                                        00h                      R
                                     00000 = Product version
                                 Bits [2:0] = Vendor ID(Pericom)
                                     000 = Pericom
0x02         Control             Bit 7 = Powersaving                                                            00h                      R/W
                                                                                                                Upon first enable,
                                     0 = Enable/Active state                                                    Bits [2:1] are
                                     1 = Disable and low power state                                            initialized
                                     In Disable and low power state, all outputs of PI5USB30213, with the       according          to
                                      exception of CC1 and CC2 pins, are in High-Z State. CC1 and CC2 pins      PORT pin setting
                                      are pulled low with resistor Rd.                                          as follows:
                                 Bits [6] = Dual role 2 Try.SRC or Try.SNK setting                                PORT       Bits
                                                                                                                  pin        [2:1]
                                     0 = Enable Try.SRC supported                                                 initial
                                     1 = Enable Try.SNC supported                                                 settins
                                                                                                                  GND        00
                                 Bits [5] = Accessory Detection in Device M ode                                   VDD        01
                                                                                                                  Float      10
                                     0 = Disable
                                     1 = Enable                                                                 Note:           This
                                                                                                                initialization only
                                 Bits [4:3] = Charging current mode                                             happens         once
                                 System can set the charging current mode when port is a host or dual role      when ENB is first
                                 acting as host. These bits are ignored when port is a device or dual role      time pulled low
                                 acting as device.                                                              after
                                                                                                                PI5USB30213 is
                                     00 = Default current mode                                                  powered on.. Bits
                                     01 = M edium current mode (1.5A)                                           [2:1]     can     be
                                     10 = High current mode (3A)                                                changed by I2C
                                                                                                                command
                                 Bits [2:1] = Port setting                                                      afterwards.
                                 System can set the role of the port.
                                     00 = Device (SNK)
                                     01 = Host (SRC)
                                     10 = Dual Role (DRP)
                                     11 = Dual Role 2 (DRP) where Try.SRC or Try.SNC is supported
                                 Bit 0 = Interrupt M ask
                                 INTB pin is used to acknowledge system if there is any interrupt events
                                 triggered. When this bit is set to 0, INTB pin is pulled low when an interrupt
                                 event occur. When this bit is set to 1, INTB pin ignores all interrupt and
                                 remain High-Z.
                                     0 = Do not mask interrupt
                                     1 = M ask interrupt
0x03         Interrupt           Bit 7 = Fault condition recovery                                               00h                      Clearable
                                 This bit indicates if VCONN recover from fault conditions including OCP,                                read     only.
                                 OVP, OTP                                                                                                Bits[7:0] are
                                                                                                                                         cleared when
                                     0 = Fault event not recovered                                                                       Byte 3 is
                                     1 = Fault event recovered                                                                           read.
                                 Bit 6 = OCP event
                                 VCONN over-current protection indicator
                                     0 = No OCP event
                                     1 = OCP event detected
PI5USB30213                                                                                                  www.diodes.com                  12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                                      Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                             11


                                                                                                                            PI5USB30213
Address      Name                Description                                                                     Default Value      Type
0x03         Interrupt           Bit 5 = OVP event
                                 VCONN over-voltage protection indicator
                                     0 = No OVP event
                                     1 = OVP event detected
                                 Bit 4 = = Reserved. Read 0’s.
                                 Bit 3 = OTP event
                                 VCONN over-temperature protection indicator
                                     0 = No OTP event
                                     1 = OTP event detected
                                 Bit 2 = Fault Ocurring.
                                     0 = No fault is occurring
                                     1 = Fault(s) is occurring
                                 *This bit will be set or clear per real time condition. And won’t be
                                 cleared by I2C reading. No interrupt will be reported by the change
                                 of this bit.
                                 Bit 1 = Detach event
                                 When this bit is set to 1, it indicates the unplug action. The port changes
                                 from attached state (Attached.SNK, Attached.SRC, AudioAccessory or
                                 DebugAccessory state) to unattached state.
                                 Bit 0 = Attach event
                                 When this bit is set to 1, it indicates the plug action. The port changes from
                                 unattached state to attached state.
0x04         CC status           Bit 7 = VBUS detection                                                          00h                R
                                 This bit reports VBUS status when PI5USB30213 is in device mode, dual
                                 role mode acting as device or accessory mode.
                                     0 = VBUS not detected
                                     1 = VBUS detected
                                 Bits [6:5] = Charging current detection
                                 These bits report the detected host charging current status when port is a
                                 device or dual role acting as device.
                                     00 = Standby
                                     01 = Default current mode
                                     10 = M edium current mode (1.5A)
                                     11 = High current mode (3A)
                                 Bits [4:2] = Attached port status
                                     000 = Standby
                                     001 = Device
                                     010 = Host
                                     011 = Audio Adapter Accessory
                                     100 = Debug Accessory
                                 Bits [1:0] = Plug polarity
                                     00 = Standby
                                     01 = CC1 makes connection
                                     10 = CC2 makes connection
                                     11 = Undetermined (e.g. AudioAccessory, DebugAccessory or other
                                 undetermined connections)
PI5USB30213                                                                                                   www.diodes.com            12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                                 Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                                12


                                                                                                                                   PI5USB30213
Register Table
                              Reset
Address Register Type                          Bit 7         Bit 6          Bit 5          Bit 4          Bit 3         Bit 2          Bit 1          Bit 0
                              Value
          Device
 01H                 Read 00000000                                   Version ID : 00000                                    Vendor ID(Pericom): 000
            ID
                                                                         Accessory
                                                                                         Charging Current mode
                                         Powersaving Dual-role 2 Detection in                                              Port setting         Interrupt M ask
                                                                                             (Host/Dual-role)
                                                                       Device M ode
                    Read/                                0: Try.SRC                                                                               0: Does not
 02H      Control          00000000            0: No                                                                       00: Device
                    Write                                 supported                             00: Default                                          M ask
                                         Powersaving                     0: Disable                                        01: Host
                                                              1:                                01: M edium                                        Interrupts
                                                 1:                      1: Enable                                         10: Dual-role
                                                          Try.SNK                               10: High                                            1: M ask
                                         Powersaving                                                                       11: Dual-role 2
                                                          supported                                                                                Interrupts
                                               Fault                                                                    Fault
                                                         OCP Event OVP Event                           OTP Event                     Detach          Attach
                                           Recovery                                                                  Occurring*
                    Read/                                0: No OCP 0: No OVP                           0: No OTP 0: No fault is
 03H Interrupt             00000000 0: fault event                                                                                       0: No Interrupt
                    Clear                not recovered      event           event                         event       occurring
                                                                                         reserved
                                         1: fault event 1: OCP                                                      1: Fault(s) is
                                                                       1: OVP event                   1: OTP event                 1: detached 1: attached
                                           recovered        event                                                     occurring
                                              VBUS
                                           detection
                                           (Port is a Charging current detection
                                                                                                  Attached Port Status                     Plug polarity
                                         Device or in         (Port is a Device)
                                           Accessory
                                              M ode)
 04H CC status Read 00000000
                                                                                              000: Standby
                                          0: Vbus not              00: Standby                001: Device                                  00: Standby
                                            detected               01: Default                010: Host                                01: CC1 connected
                                             1: Vbus               10: M edium                011: Audio                               10: CC2 connected
                                            detected               11: High                   100: Debug Accessory                      11: undetermined
*This bit will be set or clear per real time condition. And won’t be cleared by I2C reading. No interrupt will be reported by
the change of this bit.
Upon first enable, Bit 1 and Bit 2 of register 02H are initialized according to the pin #3 PORT setting as follows:
Pin #3 Port Initial Connection                                                    Bit 2 & Bit 1 of Register 02H initialization
PORT pin is floating – Dual role;                                                 10
PORT pin =VDD – Host;                                                             01
PORT pin =GND – Device                                                            00
This initialization only happens once when ENB pin is first time pulled low after PI5USB30213 is powered on.. Bit 1
and Bit 2 of register 02H can be changed by I2C commands afterwards.
PI5USB30213                                                                                                      www.diodes.com                    12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                                            Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                                   13


                                                                          PI5USB30213
Connection State Diagram: SRC
PI5USB30213                                                 www.diodes.com            12/1/2017
Datasheet Number DS40461 Rev 1-2                                               Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                         14


                                                                          PI5USB30213
Connection State Diagram: SNK
PI5USB30213                                                 www.diodes.com            12/1/2017
Datasheet Number DS40461 Rev 1-2                                               Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                         15


                                                                          PI5USB30213
Connection State Diagram: DRP
PI5USB30213                                                 www.diodes.com            12/1/2017
Datasheet Number DS40461 Rev 1-2                                               Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                         16


                                                                          PI5USB30213
Connection State Diagram: DRP with Try.SRC Supported
PI5USB30213                                                 www.diodes.com            12/1/2017
Datasheet Number DS40461 Rev 1-2                                               Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                         17


                                                                          PI5USB30213
Connection State Diagram: DRP with Try.SNK Supported
PI5USB30213                                                 www.diodes.com            12/1/2017
Datasheet Number DS40461 Rev 1-2                                               Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                         18


                                                                                                                              PI5USB30213
Mechanical Information
X1QFN 2 X 4 -24 Contact
Ordering Information
Ordering Number                                   Package Code           Package Description
PI5USB30213XEAEX             1,2,3
                                                         XEA             24-contact, Extra Thin Fine Pitch QFN (X1QFN), Tape & Reel
Note :
      T hermal characteristics can be found on the company web site at www.diodes.com/design/support/packaging/
      E = Pb-free and Green
      Adding X Suffix= T ape/Reel
PI5USB30213                                                                                                     www.diodes.com            12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                                   Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                               19


                                                                                                                                                              PI5USB30213
                                                                                   IMPORTANT NOTICE
DIODES INCORP ORATED MAKES NO WARRANTY OF ANY KIND, EXP RESS OR IMP LIED, WITH REGARDS TO THIS DOCUMENT, INCLUDING, BUT NOT LIMITED
TO, THE IMP LIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A P ARTICULAR P URP OSE (AND THEIR EQUIVALENTS UNDER THE LAWS OF A NY
JURISDICTION).
Diodes Incorporated and its subsidiaries reserve the right to make modifications, enhancements, improvements, corrections or other changes without further notice to this document and
any product described herein. Diodes Incorporated does not assume any liability arising out of the application or use of this document or any product described herein; neither does Diodes
Incorporated convey any license under its patent or trademark rights, nor the rights of others. Any Customer or user of this document or products described herein in such applications
shall assume all risks of such use and will agree to hold Diodes Incorporated and all the companies whose products are represented on Diodes Incorporated website, harmless against all
damages.
Diodes Incorporated does not warrant or accept any liability whatsoever in respect of any products purchased through unauthorized sales channel.
Should Customers purchase or use Diodes Incorporated products for any unintended or unauthorized application, Customers shall indemnify and hold Diodes Incorporated and its
representatives harmless against all claims, damages, expenses, and attorney fees arising out of, directly or indirectly, any claim of personal in jury or death associated with such
unintended or unauthorized application.
P roducts described herein may be covered by one or more United States, international or foreign patents pending. P roduct names and markings noted herein may also be covered by one
or more United States, international or foreign trademarks.
This document is written in English but may be translated into multiple languages for reference. Only the English version of this document is the final and determinative format released
by Diodes Incorporated.
                                                                                       LIFE SUPPORT
Diodes Incorporated products are specifically not authorized for use as critical components in life sup port devices or systems without the express written approval of the Chief Executive
Officer of Diodes Incorporated. As used herein:
A. Life support devices or systems are devices or systems which:
      1. are intended to implant into the body, or
2. support or sustain life and whose failure to perform when properly used in accordance with instructions for use provided in the labeling can be reasonably expected to result in
significant injury to the user.
B. A critical component is any component in a life su pport device or system whose failure to perform can be reasonably expected to cause the
    failure of the life support device or to affect its safety or effectiveness.
Customers represent that they have all necessary expertise in the safety and regulatory ramifications of their life support devices or systems, and acknowledge and agree that they are
solely responsible for all legal, regulatory and safety -related requirements concerning their products and any use of Diodes Incorporated products in such safety-critical, life support
devices or systems, notwithstanding any devices - or systems-related information or support that may be provided by Diodes Incorporated. Further, Customers must fully indemnify
Diodes Incorporated and its representatives against any damages arising out of the use of Diodes Incorporated products in such safety -critical, life support devices or systems.
Copyright © 2016, Diodes Incorporated
www.diodes.com
PI5USB30213                                                                                                                             www.diodes.com                          12/1/2017
Datasheet Number DS40461 Rev 1-2                                                                                                                                        Diodes Incororated
All trademarks are property of their respectiv e owners.
                                                                                               20


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Diodes Incorporated:
 PI5USB30213XEAEX
