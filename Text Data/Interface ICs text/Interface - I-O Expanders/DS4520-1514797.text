Click here for production status of specific part numbers.
DS4520                                                                                            9-Bit I2C Nonvolatile
                                                                                     I/O Expander Plus Memory
General Description                                                  Features
The DS4520 is a 9-bit nonvolatile (NV) I/O expander                  ● Programmable Replacement for Mechanical
with 64 bytes of NV user memory controlled by an I2C-                   Jumpers and Switches
compatible serial interface. The DS4520 offers users a               ● Nine NV Input/Output Pins
digitally programmable alternative to hardware jumpers
and mechanical switches that are being used to control               ● 64-Byte NV User Memory (EEPROM)
digital logic nodes. Furthermore, the digital state of each          ● I2C-Compatible Serial Interface
pin can be read through the serial interface. Each I/O               ● Up to 8 Devices Can be Multidropped on the
pin is independently configurable. The outputs are open                 Same I2C Bus
drain with selectable pullups. Each output has the ability
                                                                     ● Open-Drain Outputs with Configurable Pullups
to sink up to 12mA. Since the device is NV, it powers up
in the desired state allowing it to control digital logic inputs     ● Outputs Capable of Sinking 12mA
immediately on power-up without having to wait for the               ● Low Power Consumption
host CPU to initiate control.
                                                                     ● Wide Operating Voltage (2.7V to 5.5V)
Applications                                                         ● Operating Temperature Range: -40°C to +85°C
●● RAM-Based FPGA Bank Switching for
    Multiple Profiles                                                Ordering Information
●● Selecting Between Boot Flash
●● Setting ASIC Configurations/Profiles                                  PART            TEMP RANGE       PIN-PACKAGE
●● Servers                                                            DS4520E+           -40°C to +85°C   16 TSSOP
●● Network Storage
                                                                     Add “TRL” for tape and reel orders.
●● Routers
●● Telecom Equipment
●● PC Peripherals
Typical Operating Circuit                                            Pin Configuration
                   VCC                                                      TOP VIEW
                                     DS4520                                           I/O_0 1              16 GND
     0.1µF                     VCC
                                              I/O_0                                   I/O_1 2              15 I/O_8
             4.7kΩ       4.7kΩ                I/O_1
                                                          FPGA                        I/O_2 3      DS4520  14 I/O_7
        FROM                                  I/O_2
                               SCL
      SYSTEM                                                                          I/O_3 4              13 I/O_6
                                              I/O_3
  CONTROLLER                   SDA
                                              I/O_4        CLOCK                      I/O_4 5              12 I/O_5
                               A0             I/O_5        GENERATOR
                                                                                         A0 6              11 A2
                               A1             I/O_6        CPU                           A1 7              10 SCL
                               A2             I/O_7        SPEED
                               GND            I/O_8        SELECT                       VCC 8              9  SDA
19-8355; Rev 1; 7/18


DS4520                                                                                                                                         9-Bit I2C Nonvolatile
                                                                                                                                 I/O Expander Plus Memory
Absolute Maximum Ratings
Voltage on VCC, SDA, and SCL Pins                                                                     Operating Temperature Range............................ -40°C to +85°C
    Relative to Ground............................................-0.5V to +6.0V                      EEPROM Programming Temperature Range.........0°C to +70°C
Voltage on A0, A1, A2, and I/O_n [n = 0 to 8] Relative                                                Storage Temperature Range............................. -55°C to +125°C
    to Ground............. -0.5V to (VCC + 0.5V) not to exceed +6.0V                                  Soldering Temperature... See IPC/JEDEC J-STD-020A Specification
Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional operation of the device at these
or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to absolute maximum rating conditions for extended periods may affect
device reliability.
Recommended DC Operating Conditions
(TA = -40°C to +85°C)
                    PARAMETER                           SYMBOL                                 CONDITIONS                                   MIN          TYP           MAX         UNITS
  Supply Voltage                                           VCC            (Note 1)                                                          +2.7                        +5.5           V
  Input Logic 1                                             VIH                                                                            0.7 x VCC             VCC + 0.3             V
  Input Logic 0                                              VIL                                                                            -0.3                 0.3 x VCC             V
DC Electrical Characteristics
(VCC = +2.7V to +5.5V; TA = -40°C to +85°C, unless otherwise noted.)
                    PARAMETER                           SYMBOL                                 CONDITIONS                                   MIN          TYP           MAX         UNITS
  Standby Current                                         ISTBY            (Note 2)                                                                         2            10           µA
  Input Leakage                                               IL                                                                            -1.0                        +1.0          µA
  Input Current each I/O Pin                                 II/O          0.4V < VI/O < 0.9VCC (Note 3)                                    -1.0                        +1.0          µA
                                                                           3mA sink current                                                   0                          0.4
  Low-Level Output Voltage (SDA)                        VOL SDA                                                                                                                        V
                                                                           6mA sink current                                                   0                          0.6
  I/O Pin Low-Level Output Voltage                       VOL I/O           12mA sink current                                                                             0.4           V
  I/O Pin Pullup Resistors                                 RPU                                                                               4.0          5.5            7.5          kΩ
  I/O Capacitance                                          CI/O            (Note 4)                                                                                      10           pF
  Power-On Reset Voltage                                  VPOR                                                                                            1.6                          V
www.maximintegrated.com                                                                                                                                           Maxim Integrated │ 2


DS4520                                                                                           9-Bit I2C Nonvolatile
                                                                                      I/O Expander Plus Memory
AC Electrical Characteristics (See Figure 2)
(VCC = +2.7V to +5.5V; TA = -40°C to +85°C, unless otherwise noted. Timing referenced to VIL(MAX) and VIH(MIN).)
            PARAMETER                    SYMBOL                CONDITIONS                     MIN       TYP      MAX      UNITS
  SCL Clock Frequency                        fSCL  (Note 5)                                    0                 400        kHz
  Bus Free Time Between Stop
                                            tBUF                                              1.3                            μs
  and Start Conditions
  Hold Time (Repeated) Start
                                          tHD:STA                                             0.6                            μs
  Condition
  Low Period of SCL                         tLOW                                              1.3                            μs
  High Period of SCL                       tHIGH                                              0.6                            μs
  Data Hold Time                          tHD:DAT                                              0                  0.9        μs
  Data Setup Time                         tSU:DAT                                             100                            ns
  Start Setup time                        tSU:STA                                             0.6                            μs
  SDA and SCL Rise Time                       tR   (Note 6)                                  20 + 0.1CB          300         ns
  SDA and SCL Fall Time                        tF  (Note 6)                                  20 + 0.1CB          300         ns
  Stop Setup Time                         tSU:STO                                             0.6                            μs
  SDA and SCL Capacitive Loading              CB   (Note 6)                                                      400         pF
  EEPROM Write Time                          tWR   (Note 7)                                              10       20        ms
Nonvolatile Memory Characteristics
(VCC = +2.7V to +5.5V, unless otherwise noted.)
            PARAMETER                    SYMBOL                CONDITIONS                     MIN       TYP      MAX      UNITS
  EEPROM Writes                                    +70°C (Note 4)                            50,000
Note 1: All voltages referenced to ground.
Note 2: ISTBY is specified with SDA = SCL = VCC, outputs floating, and inputs connected to VCC or GND.
Note 3: The DS4520 does not obstruct the SDA and SCL lines if VCC is switched off as long as the voltages applied to these
          inputs do not violate their minimum and maximum input voltage levels.
Note 4: Guaranteed by design.
Note 5: Timing shown is for fast-mode (400kHz) operation. This device is also backward compatible with I2C standard-mode timing.
Note 6: CB—total capacitance of one bus line in picofarads.
Note 7: EEPROM write time applies to all the EEPROM memory and SRAM shadowed EEPROM memory when SEE = 0.
          The EEPROM write time begins after a stop condition occurs.
www.maximintegrated.com                                                                                       Maxim Integrated │ 3


DS4520                                                                                                                                    9-Bit I2C Nonvolatile
                                                                                                                                    I/O Expander Plus Memory
Typical Operating Characteristics
(VCC = +5.0V, TA = +25°C, unless otherwise noted.)
                                        SUPPLY CURRENT vs. SUPPLY VOLTAGE                                                     SUPPLY CURRENT vs. TEMPERATURE
                                  2.0                                                                                  2.5
                                                                                 DS4520 toc01                                                                               DS4520 toc02
                                             I/O0–I/O7 CONTROL BITS = 0                                                            I/O0–I/O7 CONTROL BITS = 0
                                             I/O0–I/O7 PULLUPS DISABLED                                                            I/O0–I/O7 PULLUPS DISABLED
                                             VCC = SDA = SCL                                                           2.0         VCC = SDA = SCL = 5V
                                  1.5
           SUPPLY CURRENT (µA)                                                                   SUPPLY CURRENT (µA)
                                                                                                                       1.5
                                  1.0
                                                                                                                       1.0
                                  0.5
                                                                                                                       0.5
                                   0                                                                                    0
                                        3.0          3.5       4.0        4.5   5.0                                          -40      -20      0     20    40     60   80
                                                      SUPPLY VOLTAGE (V)                                                                      TEMPERATURE (°C)
                                                                                                                                            I/O OUTPUT VOLTAGE
                                        SUPPLY CURRENT vs. SCL FREQUENCY                                                                    vs. SUPPLY VOLTAGE
                                  20                                                                                    6
                                                                                  DS4520 toc03                                                                              DS4520 toc04
                                              VCC = SDA = 5V                                                                       PULLUPS ENABLED
                                  18                                                                                               PULLDOWNS DISABLED
                                                                                                                        5
                                  16
            SUPPLY CURRENT (µA)
                                  14
                                                                                                                        4
                                                                                                 I/O VOLTAGE (V)
                                  12
                                  10                                                                                    3
                                                                                                                                 HIGH IMPEDANCE
                                    8
                                                                                                                        2
                                    6
                                                                                                                                                   EEPROM RECALL AT VPOR
                                    4
                                                                                                                        1
                                    2
                                    0                                                                                   0
                                         0           100       200        300   400                                          0         1       2      3     4      5        6
                                                      SCL FREQUENCY (kHz)                                                                    SUPPLY VOLTAGE (V)
www.maximintegrated.com                                                                                                                                           Maxim Integrated │ 4


DS4520                                                                                               9-Bit I2C Nonvolatile
                                                                                        I/O Expander Plus Memory
Pin Description
   PIN       NAME                                                              FUNCTION
    1        I/O_0    Input/Output 0. Bidirectional I/O pin.
    2        I/O_1    Input/Output 1. Bidirectional I/O pin.
    3        I/O_2    Input/Output 2. Bidirectional I/O pin.
    4        I/O_3    Input/Output 3. Bidirectional I/O pin.
    5        I/O_4    Input/Output 4. Bidirectional I/O pin.
    6          A0     I2C Address Input. Inputs A0, A1, and A2 determine the I2C slave address of the device.
    7          A1     I2C Address Input. Inputs A0, A1, and A2 determine the I2C slave address of the device.
    8         VCC     Power-Supply Voltage
    9         SDA     I2C Serial Data Open-Drain Input/Output
   10         SCL     I2C Serial Clock Input
   11          A2     I2C Address Input. Inputs A0, A1, and A2 determine the I2C slave address of the device.
   12        I/O_5    Input/Output 5. Bidirectional I/O pin.
   13        I/O_6    Input/Output 6. Bidirectional I/O pin.
   14        I/O_7    Input/Output 7. Bidirectional I/O pin.
   15        I/O_8    Input/Output 8. Bidirectional I/O pin.
   16         GND     Ground
Block Diagram
                                                             DS4520
    SDA
                                                           I/O CONTROL                    I/O CELL (x9)
    SCL
                             I2 C                           REGISTERS
      A0                                                                                          VCC
                        INTERFACE
      A1
      A2                                             PULLUP ENABLE (F0h-F1h)
             VCC
                                                                                                RPU
     VCC                                                                                                            I/O_n
                                                                                                                    [n = 0 TO 8]
                                                       I/O CONTROL (F2h-F3h)
    GND
                          EEPROM
                          64 BYTES                        I/O STATUS (F8h-F9h)
                       USER MEMORY
                        [00h TO 3Fh]
www.maximintegrated.com                                                                                       Maxim Integrated │ 5


DS4520                                                                                     9-Bit I2C Nonvolatile
                                                                                 I/O Expander Plus Memory
Detailed Description                                         Slave Address and Address Pins
The DS4520 contains nine bidirectional, NV, input/output     The DS4520’s slave address is determined by the state
(I/O) pins, and a 64-byte EEPROM user memory. The I/O        of the A0, A1, and A2 address pins as shown in Figure 1.
pins and user memory are accessible through an I2C-          Address pins connected to GND result in a ‘0’ in the cor-
compatible serial bus.                                       responding bit position in the slave address. Conversely,
                                                             address pins connected to VCC result in a ‘1’ in the cor-
Programmable NV I/O Pins                                     responding bit positions. I2C communication is described
Each programmable I/O pin consists of an input and an        in detail in a later section.
open-collector output with a selectable internal pullup
resistor. To enable the pullups for each I/O pin, write to   I2C Serial Interface Description
the Pullup Enable Registers (F0h and F1h). To pull the
output low or place the pulldown transistor into a high-
                                                             I2C Definitions
impedance state, write to the I/O Control Registers (F2h     The following terminology is commonly used to describe
and F3h). To read the voltage levels present on the I/O      I2C data transfers.
pins, read the I/O Status Registers (F8h and F9h). To        Master Device: The master device controls the slave
determine the status of the output register, read the I/O    devices on the bus. The master device generates SCL
Control Registers and the Pullup Resistor Registers. The     clock pulses, start, and stop conditions.
I/O Control Registers and the Pullup Enable Registers        Slave Devices: Slave devices send and receive data at
are all SRAM shadowed EEPROM registers. It is possible       the master’s request.
to disable the EEPROM writes of the registers using the
SEE bit in the Configuration Register. This reduces the      Bus Idle or Not Busy: Time between stop and start
time required to write to the register and increases the     conditions when both SDA and SCL are inactive and
amount of times the I/O pins can be adjusted before the      in their logic-high states. When the bus is idle it often
EEPROM is worn out.                                          initiates a low-power mode for slave devices.
                                                             Start Condition: A start condition is generated by
Memory Map and Memory Types                                  the master to initiate a new data transfer with a slave.
The DS4520 memory map is shown in Table 1. Three             Transitioning SDA from high to low while SCL remains
different types of memory are present in the DS4520:         high generates a start condition. See the timing diagram
EEPROM, SRAM shadowed EEPROM, and SRAM.                      for applicable timing.
Memory locations specified as EEPROM are NV. Writing
                                                             Stop Condition: A stop condition is generated by the
to these locations results in an EEPROM write cycle for a
                                                             master to end a data transfer with a slave. Transitioning
time specified by tWR in the AC Electrical Characteristics
                                                             SDA from low to high while SCL remains high generates
table. Locations specified as SRAM shadowed EEPROM
                                                             a stop condition. See the timing diagram for applicable
can be configured to operate in one of two modes specified
                                                             timing.
by the SEE bit (the LSB of the Configuration Register, F4h).
When the SEE bit = 0 (default), the memory location acts     Repeated Start Condition: The master can use a
like EEPROM. However, when SEE = 1, shadow SRAM is           repeated start condition at the end of one data transfer to
written to instead of the EEPROM. This eliminates both the   indicate that it immediately initiates a new data transfer
EEPROM write time, tRW, as well as the concern of            following the current one. Repeated starts are commonly
wearing out the EEPROM. This is ideal for applica-           used during read operations to identify a specific memory
tions that wish to constantly write to the I/Os. Power-      address to begin a data transfer. A repeated start con-
up default states can be programmed for the I/Os in          dition is issued identically to a normal start condition.
EEPROM (with SEE = 0) and then once powered-up, SEE          See the timing diagram for applicable timing.
can be written to a 1 so the I/Os can be updated periodi-    Bit Write: Transitions of SDA must occur during the low
cally in SRAM. The final type of memory present in the       state of SCL. The data on SDA must remain valid and
DS4520 is standard SRAM.                                     unchanged during the entire high pulse of SCL plus the
                                                             setup and hold time requirements (see Figure 2). Data is
                                                             shifted into the device during the rising edge of the SCL.
www.maximintegrated.com                                                                               Maxim Integrated │ 6


DS4520                                                                                                         9-Bit I2C Nonvolatile
                                                                                                   I/O Expander Plus Memory
Table 1. DS4520 Memory Map
                                                                                                                                   FACTORY
 ADDRESS             TYPE               NAME                                          FUNCTION
                                                                                                                                   DEFAULT
  00h to 3Fh      EEPROM           User Memory      64 bytes of general-purpose user EEPROM.                                           00h
                                                    Undefined address space for future expansion. Reads and writes to this
  40 to E7h            —              Reserved                                                                                          —
                                                    space have no effect on the device.
  E8 to EFh       EEPROM              Reserved      —                                                                                   —
                                                    Pullup enable for I/O_0 to I/O_7. I/O_0 is the LSB and I/O_7 is the
                                        Pullup
     F0h                                            MSB. Set the corresponding bit to enable the pullup; clear the bit to              00h
                                      Enable 0
                                                    disable the pullup.
                                        Pullup      Pullup enable for I/O_8. I/O_8 is the LSB. Only the LSB is used. Set the
     F1h                                                                                                                               00h
                                      Enable 1      LSB bit to enable the pullup on I/O_8; clear the LSB to disable the pullup.
                    SRAM                            I/O control for I/O_0 to I/O_7. I/O_0 is the LSB and I/O_7 is the MSB.
                  Shadowed                          Clearing the corresponding bit of the register pulls the selected I/O pin
     F2h          EEPROM_          I/O Control 0    low; setting the bit places the pulldown transistor into a high-impedance         FFh
                                                    state. When the pulldown is high impedance, the output floats if no
                  [EEPROM                           pullup/down is connected to the pin.
                  writes are
                  disabled if                       I/O control for I/O_8. I/O_8 is the LSB. Only the LSB is used. Clearing
                   the SEE                          the LSB of the register pulls the I/O_8 pin low; setting the LSB places the
     F3h                           I/O Control 1                                                                                       01h
                    bit = 1]                        pulldown transistor into a high-impedance state. When the pulldown is high
                                                    impedance, the output floats if no pullup/down is connected to the pin.
                                                    Configuration register. The LSB is the SEE bit. When set, this bit
     F4h                           Configuration    disables writes to the EEPROM; writing only affects the shadow SRAM.               00h
                                                    When set to 0, both the EEPROM and the shadow SRAM is written.
  F5h to F7h                       User Memory      3 bytes of general-purpose user EEPROM.                                            00h
                                                    I/O status for I/O_0 to I/O_7. I/O_0 is the LSB and I/O_7 is the MSB.
     F8h                            I/O Status 0    Writing to this register has no effect. Read this register to determine
                                                    the state of the I/O_0 to I/O_7 pins.
                                                    I/O status for I/O_8. I/O_8 is the LSB. Only the LSB is used; the other
                    SRAM                                                                                                                —
     F9h                            I/O Status 1    bits could be any value when read. Writing to this register has no effect.
                                                    Read this register to determine the state of the I/O_8 pin.
                                    SRAM User
 FAh to FFh                                         6 bytes of general-purpose SRAM.
                                      Memory
           MSB                                         LSB
             1      0     1      0     A2    A1  A0   R/W
                             SLAVE                 READ/WRITE
                            ADDRESS*                   BIT
          *THE SLAVE ADDRESS IS DETERMINED BY
           ADDRESS PINS A0, A1, AND A2.
Figure 1. DS4520 Slave Address Byte
www.maximintegrated.com                                                                                                    Maxim Integrated │ 7


DS4520                                                                                                             9-Bit I2C Nonvolatile
                                                                                                          I/O Expander Plus Memory
Bit Read: At the end a write operation, the master must                             The master must NACK the last byte read to terminated
release the SDA bus line for the proper amount of setup                             communication so the slave returns control of SDA to the
time before the next rising edge of SCL during a bit read                           master.
(see Figure 2). The device shifts out each bit of data on                           Slave Address Byte: Each slave on the I2C bus responds
SDA at the falling edge of the previous SCL pulse and                               to a slave address byte sent immediately following a start
the data bit is valid at the rising edge of the current SCL                         condition. The slave address byte contains the slave
pulse. Remember that the master generates all SCL clock                             address in the most significant 7 bits and the R/W bit in
pulses including when it is reading bits from the slave.                            the least significant bit.
Acknowledgement (ACK and NACK): An acknowledge-                                     The DS4520’s slave address is determined by the state
ment (ACK) or not acknowledge (NACK) is always the 9th                              of the A0, A1, and A2 address pins as shown in Figure
bit transmitted during a byte transfer. The device receiving                        1. Address pins connected to GND result in a ‘0’ in the
data (the master during a read or the slave during a write                          corresponding bit position in the slave address.
operation) performs an ACK by transmitting a zero during                            Conversely, address pins connected to VCC result in a ‘1’
the 9th bit. A device performs a NACK by transmitting a                             in the corresponding bit positions.
one during the 9th bit. Timing (Figure 2) for the ACK and
NACK is identical to all other bit writes. An ACK is the                            When the R/W bit is 0 (such as in A0h), the master is
acknowledgement that the device is properly receiving                               indicating it will write data to the slave. If R/W = 1, (A1h
data. A NACK is used to terminate a read sequence or as                             in this case), the master is indicating it will read from the
an indication that the device is not receiving data.                                slave.
Byte Write: A byte write consists of 8 bits of information                          If an incorrect slave address is written, the DS4520
transferred from the master to the slave (most significant                          assumes the master is communicating with another I2C
bit first) plus a 1-bit acknowledgement from the slave to                           device and ignores the communication until the next start
the master. The 8 bits transmitted by the master are done                           condition is sent.
according to the bit write definition and the acknowledge-                          Memory Address: During an I2C write operation, the
ment is read using the bit read definition.                                         master must transmit a memory address to identify the
Byte Read: A byte read is an 8-bit information transfer                             memory location where the slave is to store the data. The
from the slave to the master plus a 1-bit ACK or NACK                               memory address is always the second byte transmitted
from the master to the slave. The 8 bits of information that                        during a write operation following the slave address byte.
are transferred (most significant bit first) from the slave
to the master are read by the master using the bit read
definition above, and the master transmits an ACK using
the bit write definition to receive additional data bytes.
   SDA
                    tBUF
                                                                                                     tHD:STA               tSP
                                        tLOW              tR       tF
   SCL
                                    tHD:STA                           tHIGH                       tSU:STA
                                                                            tSU:DAT
             STOP        START                                                           REPEATED                                      tSU:STO
                                                                                           START
                                                           tHD:DAT
      NOTE: TIMING IS REFERENCED TO VIL(MAX) AND VIH(MIN)
Figure 2. I2C Timing Diagram
www.maximintegrated.com                                                                                                        Maxim Integrated │ 8


DS4520                                                                                    9-Bit I2C Nonvolatile
                                                                                I/O Expander Plus Memory
I2C Communication                                            action are still subject to a write cycle. The DS4520’s
Writing a Single Byte to a Slave: The master must            EEPROM write cycles are specified in the Nonvolatile
generate a start condition, write the slave address byte     Memory Characteristics table. The specification shown is
(R/W = 0), write the memory address, write the byte          at the worst-case temperature. It is capable of handling
of data, and generate a stop condition. Remember the         approximately 10x that many writes at room temperature.
master must read the slave’s acknowledgement during all      Reading a Single Byte from a Slave: Unlike the write
byte write operations.                                       operation that uses the specified memory address byte
Writing Multiple Bytes to a Slave: To write multiple         to define where the data is to be written, the read opera-
bytes to a slave, the master generates a start condi-        tion occurs at the present value of the memory address
tion, writes the slave address byte (R/W = 0), writes the    counter. To read a single byte from the slave, the master
memory address, writes up to 8 data bytes, and gener-        generates a start condition, writes the slave address byte
ates a stop condition.                                       with R/W = 1, reads the data byte with a NACK to indicate
                                                             the end of the transfer, and generates a stop condition.
The DS4520 is capable of writing up to 8 bytes (one page     However, since requiring the master to keep track of the
or row) with a single write transaction. This is internally  memory address counter is impractical, the following
controlled by an address counter that allows data to be      method should be used to perform reads from a specified
written to consecutive addresses without transmitting        memory location.
a memory address before each data byte is sent. The
address counter limits the write to one 8-byte page.         Manipulating the Address Counter for Reads: A dummy
Attempts to write to additional pages of memory without      write cycle can be used to force the address counter to a
sending a stop condition between pages results in the        particular value. To do this the master generates a start
address counter wrapping around to the beginning of the      condition, writes the slave address byte (R/W = 0), writes
present row. The first row begins at address 00h and sub-    the memory address where it desires to read, generates
sequent rows begin at multiples of 8 there on (08h, 10h,     a repeated start condition, writes the slave address byte
18h, 20h, etc).                                              (R/W = 1), reads data with ACK or NACK as applicable,
                                                             and generates a stop condition.
To prevent address wrapping from occurring, the mas-
ter must send a stop condition at the end of the page,       See Figure 3 for a read example using the repeated start
and then wait for the bus free or EEPROM write time to       condition to specify the starting memory location.
elapse. Then the master can generate a new start condi-      Reading Multiple Bytes from a Slave: The read opera-
tion, write the slave address byte (R/W = 0), and the first  tion can be used to read multiple bytes with a single
memory address of the next memory row before continu-        transfer. When reading bytes from the slave, the master
ing to write data.                                           simply ACKs the data byte if it desires to read another
Acknowledge Polling: Any time an EEPROM page is              byte before terminating the transaction. After the master
written, the DS4520 requires the EEPROM write time           reads the last byte it must NACK to indicate the end of the
(tW) after the stop condition to write the contents of       transfer and generates a stop condition.
the page to EEPROM. During the EEPROM write time,
the device does not acknowledge its slave address            Applications Information
because it is busy. It is possible to take advantage of this Power-Supply Decoupling
phenomenon by repeatedly addressing the DS4520,              To achieve best results, it is highly recommended that a
which allows communication to continue as soon as the        decoupling capacitor is used on the IC power-supply pins.
device is ready. The alternative to acknowledge polling      Typical values of decoupling capacitors are 0.01µF and
is to wait for a maximum period of tW to elapse before       0.1µF. Use a high-quality, ceramic, surface-mount capaci-
attempting to access the device.                             tor, and mount it as close as possible to the VCC and GND
EEPROM Write Cycles: When EEPROM writes occur,               pins of the IC to minimize lead inductance.
the DS4520 writes the whole EEPROM memory page
even if only a single byte on a page was modified.
Writes that do not modify all 8 bytes on the page are
valid and do not corrupt any other bytes on the same
page. Because the whole page is written, even bytes
on the page that were not modified during the trans-
www.maximintegrated.com                                                                               Maxim Integrated │ 9


DS4520                                                                                                                                             9-Bit I2C Nonvolatile
                                                                                                                                 I/O Expander Plus Memory
   TYPICAL I2C WRITE TRANSACTION
              MSB                                     LSB            MSB                                   LSB             MSB                                     LSB
     START     1     0     1     0   A2    A1   A0 R/W       SLAVE    b7  b6   b5    b4   b3   b2    b1    b0     SLAVE     b7   b6     b5    b4    b3   b2  b1     b0   SLAVE   STOP
                                                              ACK                                                  ACK                                                    ACK
                               SLAVE                 READ/                     REGISTER ADDRESS                                                 DATA
                             ADDRESS*               WRITE
                                                                                *THE SLAVE ADDRESS IS DETERMINED BY ADDRESS PINS A0, A1, AND A2.
   EXAMPLE I2C TRANSACTIONS (WHEN A0, A1, AND A2 ARE CONNECTED TO GND)
                                                    A0h                   F2h
   A) SINGLE BYTE WRITE
                                       START 1 0 1 0 0 0 0 0 SLAVE 1 1 1 1 0 0 1 0 SLAVE 0 0 0 0 0 0 0 0      SLAVE    STOP
      -WRITE I/O CONTROL 0                                       ACK                  ACK                      ACK
      REGISTER TO 00h
                                                    A0h                   F8h                                    A1h                    DATA
   B) SINGLE BYTE READ                                                                        REPEATED                                                MASTER
                                        START 1 0 1 0 0 0 0 0 SLAVE 1 1 1 1 1 0 0 0 SLAVE                  1 0 1 0 0 0 0 1 SLAVE      I/O STATUS               STOP
      -READ I/O STATUS 0 RESISTER                                ACK                  ACK       START                        ACK                       NACK
                                                    A0h                   F0h                    FFh
   C) SINGLE BYTE WRITE                                         SLAVE                SLAVE                    SLAVE
                                        START 1 0 1 0 0 0 0 0          11110 000             111 1 1 1 1 1               STOP
      -WRITE PULLUP ENABLE 0                                     ACK                  ACK                       ACK
      REGISTER TO FFh
                                                    A0h                   F2h                    00h                       00h
   D) TWO BYTE WRITE                                            SLAVE                SLAVE                   SLAVE                    SLAVE
                                        START 1 0 1 0 0 0 0 0          11110 010             00000000                 00000000                   STOP
      -WRITE I/O CONTROL 0 AND                                   ACK                  ACK                      ACK                      ACK
      I/O CONTROL 1 REGISTERS TO 00h
                                                   A0h                    F8h                                    A1h                     DATA                     DATA
                                                                SLAVE                SLAVE    REPEATED
   D) TWO BYTE READ
                                        START 1 0 1 0 0 0 0 0          111 11000                           1 0 1 0 0 0 0 1 SLAVE    I/O STATUS 0
                                                                                                                                                     MASTER   I/O STATUS 1   MASTER
                                                                                                                                                                                      STOP
      -READ I/O STATUS 0 AND I/O                                 ACK                  ACK       START                        ACK                       ACK                    NACK
      STATUS 1 RGISTERS
Figure 3. I2C Communication Examples
Chip Information                                                                                   Package Information
TRANSISTOR COUNT: 14,398                                                                           For the latest package outline information and land patterns
                                                                                                   (footprints), go to www.maximintegrated.com/packages. Note
SUBSTRATE CONNECTED TO GROUND
                                                                                                   that a “+”, “#”, or “-” in the package code indicates RoHS status
                                                                                                   only. Package drawings may show a different suffix character, but
                                                                                                   the drawing pertains to the package regardless of RoHS status.
                                                                                                       PACKAGE                 PACKAGE                   OUTLINE                 LAND
                                                                                                            TYPE                   CODE                      NO.            PATTERN NO.
                                                                                                       DS4520E+                     U16-1                  21-0066              90-0117
www.maximintegrated.com                                                                                                                                           Maxim Integrated │ 10


DS4520                                                                                                                       9-Bit I2C Nonvolatile
                                                                                                                I/O Expander Plus Memory
Revision History
  REVISION          REVISION                                                                                                                       PAGES
                                                                             DESCRIPTION
  NUMBER                DATE                                                                                                                    CHANGED
        0                6/04        Initial release                                                                                                    —
        1                7/18        Updated Ordering Information                                                                                       1
For pricing, delivery, and ordering information, please visit Maxim Integrated’s online storefront at https://www.maximintegrated.com/en/storefront/storefront.html.
Maxim Integrated cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim Integrated product. No circuit patent licenses
are implied. Maxim Integrated reserves the right to change the circuitry and specifications without notice at any time. The parametric values (min and max limits)
shown in the Electrical Characteristics table are guaranteed. Other parametric values quoted in this data sheet are provided for guidance.
Maxim Integrated and the Maxim Integrated logo are trademarks of Maxim Integrated Products, Inc.                 © 2018 Maxim Integrated Products, Inc. │ 11


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 DS4520E+ DS4520E+TRL DS4520E
