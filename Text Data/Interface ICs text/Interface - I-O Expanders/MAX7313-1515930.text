19-3059; Rev 5; 6/11
                  KIT
           ATION
      EVALU    BLE
        AVA ILA
         16-Port I/O Expander with LED Intensity
  Control, Interrupt, and Hot-Insertion Protection
                            General Description                                                                                 Features
                                                                                                                                                 MAX7313
The MAX7313 I2C-compatible serial interfaced periph-           o 400kbs, 2-Wire Serial Interface, 5.5V Tolerant
eral provides microprocessors with 16 I/O ports. Each          o 2V to 3.6V Operation
I/O port can be individually configured as either an
open-drain current-sinking output rated at 50mA and            o Overall 8-Bit PWM LED Intensity Control
5.5V, or a logic input with transition detection. A 17th           Global 16-Step Intensity Control
port can be used for transition detection interrupt, or as         Individual 16-Step Intensity Controls
a general-purpose output. The outputs are capable of           o Two-Phase LED Blinking
driving LEDs, or providing logic outputs with external         o High Output Current (50mA max Per Port)
resistive pullup up to 5.5V.
                                                               o Outputs are 5.5V-Rated Open Drain
PWM current drive is integrated with 8 bits of control.
                                                               o Supports Hot Insertion
Four bits are global control and apply to all LED outputs
to provide coarse adjustment of current from fully off to      o Inputs are Overvoltage Protected to 5.5V
fully on with 14 intensity steps. Each output then has         o Transition Detection with Interrupt Output
individual 4-bit control, which further divides the global-    o 1.2µA (typ), 3.6µA (max) Standby Current
ly set current into 16 more steps. Alternatively, the cur-
rent control can be configured as a single 8-bit control       o Small 4mm x 4mm TQFN Package
that sets all outputs at once.                                 o -40°C to +125°C Temperature Range
The MAX7313 is pin and software compatible with the            o All Ports Can Be Configured as Inputs or Outputs
MAX7311, PCA9535, and PCA9555.
                                                                                           Ordering Information
Each output has independent blink timing with two blink
phases. All LEDs can be individually set to be on or off               PART                TEMP RANGE                          PIN-PACKAGE
during either blink phase, or to ignore the blink control.      MAX7313ATG+                -40°C to +125°C                     24 TQFN-EP*
The blink period is controlled by a register.                   MAX7313AEG+                -40°C to +125°C                     24 QSOP
The MAX7313 supports hot insertion. All port pins, the         +Denotes a lead(Pb)-free/RoHS-compliant package.
INT output, SDA, SCL, and the slave-address inputs             *EP = Exposed Pad.
ADO-2 remain high impedance in power-down (V+ =0V)
with up to 6V asserted upon them.                                                                 Pin Configurations
The MAX7313 is controlled through the 2-wire
I2C/SMBus serial interface, and can be configured to                  TOP VIEW
any one of 64 I2C addresses.                                                         AD0   P15   P14   P13   P12     P11
                                                                                     18    17    16    15    14     13
                                       Applications
                                                                            SCL 19                                         12 P10
     LCD Backlights
                                                                            SDA 20                                         11 P9
     LED Status Indication
                                                                             V+ 21                                         10 P8
     Portable Equipment                                                 INT/O16 22          MAX7313ATG                          GND
                                                                                                                           9
     Keypad Backlights                                                      AD1 23                                              P7
                                                                                                                           8
     RGB LED Drivers                                                        AD2 24   +
                                                                                                                   *EP
                                                                                                                           7    P6
     Notebook Computers                                                              1     2     3     4     5       6
                                                                                     P0    P1    P2    P3    P4      P5
                                                                                             TQFN
Typical Application Circuit appears at end of data sheet.                                  4mm x 4mm
                                                                           *CONNECT EP TO GND
                                                                  Pin Configurations continued at end of data sheet.
                       ________________________________________________________________ Maxim Integrated Products                            1
For pricing, delivery, and ordering information, please contact Maxim Direct at 1-888-629-4642,
or visit Maxim’s website at www.maxim-ic.com.


          16-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          ABSOLUTE MAXIMUM RATINGS
MAX7313
          Voltage (with respect to GND)                                                                     Continuous Power Dissipation (TA = +70°C)
          V+ .............................................................................-0.3V to +4V        24-Pin QSOP (derate 9.5mW/°C over +70°C)..............761mW
          SCL, SDA, AD0, AD1, AD2, P0–P15 ........................-0.3V to +6V                                24-TQFN (derate 20.8mW/°C over +70°C) ................1666mW
          INT/O16 ....................................................................-0.3V to +8V          Operating Temperature Range (TMIN to TMAX)-40°C to +125°C
          DC Current on P0–P15, INT/O16 ........................................55mA                        Junction Temperature ......................................................+150°C
          DC Current on SDA.............................................................10mA                Storage Temperature Range .............................-65°C to +150°C
          Maximum GND Current ....................................................350mA                     Lead Temperature (soldering, 10s) .................................+300°C
                                                                                                            Soldering Temperature (reflow) .......................................+260°C
          Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional
          operation of the device at these or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to
          absolute maximum rating conditions for extended periods may affect device reliability.
          ELECTRICAL CHARACTERISTICS
          (Typical Operating Circuit, V+ = 2V to 3.6V, TA = TMIN to TMAX, unless otherwise noted. Typical values are at V+ = 3.3V, TA = +25°C.)
          (Note 1)
                        PARAMETER                           SYMBOL                                       CONDITIONS                                 MIN       TYP        MAX       UNITS
           Operating Supply Voltage                              V+                                                                                   2                   3.6         V
           Output Load External Supply
                                                                VEXT                                                                                  0                   5.5         V
           Voltage
                                                                            SCL and SDA at V+; other                 TA = +25°C                                1.2        2.3
           Standby Current
                                                                  I+        digital inputs at V+ or GND;             TA = -40°C to +85°C                                  2.8        µA
           (Interface Idle, PWM Disabled)
                                                                            PWM intensity control disabled           TA = TMIN to TMAX                                    3.6
                                                                            SCL and SDA at V+; other                 TA = +25°C                                8.5       15.1
           Supply Current
                                                                  I+        digital inputs at V+ or GND;             TA = -40°C to +85°C                                 16.5        µA
           (Interface Idle, PWM Enabled)
                                                                            PWM intensity control enabled            TA = TMIN to TMAX                                   17.2
           Supply Current                                                   fSCL = 400kHz; other digital             TA = +25°C                                50        95.3
           (Interface Running, PWM                                I+        inputs at V+ or GND; PWM                 TA = -40°C to +85°C                                 99.2        µA
           Disabled)                                                        intensity control disabled               TA = TMIN to TMAX                                  102.4
           Supply Current                                                   fSCL = 400kHz; other digital             TA = +25°C                                57       110.2
           (Interface Running, PWM                                I+        inputs at V+ or GND; PWM                 TA = -40°C to +85°C                                117.4        µA
           Enabled)                                                         intensity control enabled                TA = TMIN to TMAX                                  122.1
           Input High Voltage
                                                                                                                                                   0.7 ✕
           SDA, SCL, AD0, AD1, AD2,                              VIH                                                                                                                  V
                                                                                                                                                    V+
           P0–P15
           Input Low Voltage
                                                                                                                                                                         0.3 ✕
           SDA, SCL, AD0, AD1, AD2,                              VIL                                                                                                                  V
                                                                                                                                                                          V+
           P0–P15
           Input Leakage Current
           SDA, SCL, AD0, AD1, AD2,                            IIH, IIL     Input = GND or V+                                                       -0.2                 +0.2        µA
           P0–P15
           Input Capacitance
           SDA, SCL, AD0, AD1, AD2,                                                                                                                             8                    pF
           P0–P15
          2     _______________________________________________________________________________________


        16-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
ELECTRICAL CHARACTERISTICS (continued)
                                                                                                                                         MAX7313
(Typical Operating Circuit, V+ = 2V to 3.6V, TA = TMIN to TMAX, unless otherwise noted. Typical values are at V+ = 3.3V, TA = + 25°C.)
(Note 1)
          PARAMETER                SYMBOL                         CONDITIONS                         MIN     TYP      MAX     UNITS
                                                                              TA = +25°C                     0.15     0.26
                                              V+ = 2V, ISINK = 20mA           TA = -40°C to +85°C                      0.3
                                                                              TA = TMIN to TMAX                       0.32
                                                                              TA = +25°C                     0.13     0.23
Output Low Voltage
                                      VOL     V+ = 2.5V, ISINK = 20mA         TA = -40°C to +85°C                     0.26      V
P0–P15, INT/O16
                                                                              TA = TMIN to TMAX                       0.28
                                                                              TA = +25°C                     0.12     0.23
                                              V+ = 3.3V, ISINK = 20mA         TA = -40°C to +85°C                     0.24
                                                                              TA = TMIN to TMAX                       0.26
Output Low-Voltage SDA               VOLSDA   ISINK = 6mA                                                              0.4      V
PWM Clock Frequency                   fPWM                                                                    32               kHz
TIMING CHARACTERISTICS
(Typical Operating Circuit, V+ = 2V to 3.6V, TA = TMIN to TMAX, unless otherwise noted. Typical values are at V+ = 3.3V, TA = +25°C.)
(Note 1)
                    PARAMETER                          SYMBOL                CONDITIONS              MIN      TYP     MAX     UNITS
 Serial Clock Frequency                                  fSCL                                                         400      kHz
 Bus Free Time Between a STOP and a START
                                                         tBUF                                         1.3                       µs
 Condition
 Hold Time, Repeated START Condition                   tHD, STA                                       0.6                       µs
 Repeated START Condition Setup Time                   tSU, STA                                       0.6                       µs
 STOP Condition Setup Time                             tSU, STO                                       0.6                       µs
 Data Hold Time                                        tHD, DAT   (Note 2)                                             0.9      µs
 Data Setup Time                                       tSU, DAT                                      180                        ns
 SCL Clock Low Period                                    tLOW                                         1.3                       µs
 SCL Clock High Period                                   tHIGH                                        0.7                       µs
                                                                                                             20 +
 Rise Time of Both SDA and SCL Signals, Receiving           tR    (Notes 3, 4)                                        300       ns
                                                                                                             0.1Cb
                                                                                                             20 +
 Fall Time of Both SDA and SCL Signals, Receiving           tF    (Notes 3, 4)                                        300       ns
                                                                                                             0.1Cb
                                                                                                             20 +
 Fall Time of SDA Transmitting                           tF.TX    (Notes 2, 3, 5)                                     250       ns
                                                                                                             0.1Cb
 Pulse Width of Spike Suppressed                          tSP     (Notes 2, 6)                                50                ns
 Capacitive Load for Each Bus Line                        Cb      (Notes 2, 3)                                        400       pF
                     _______________________________________________________________________________________                         3


          16-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          TIMING CHARACTERISTICS (continued)
MAX7313
          (Typical Operating Circuit, V+ = 2V to 3.6V, TA = TMIN to TMAX, unless otherwise noted. Typical values are at V+ = 3.3V, TA = +25°C.)
          (Note 1)
                                                        PARAMETER                                                                     SYMBOL                       CONDITIONS                                             MIN         TYP         MAX    UNITS
           Interrupt Valid                                                                                                                tIV         Figure 10                                                                                    6.5    µs
           Interrupt Reset                                                                                                                tIR         Figure 10                                                                                     1     µs
           Output Data Valid                                                                                                              tDV         Figure 10                                                                                     5     µs
           Input Data Setup Time                                                                                                          tDS         Figure 10                                                            100                            ns
           Input Data Hold Time                                                                                                           tDH         Figure 10                                                             1                             µs
          Note 1: All parameters tested at TA = +25°C. Specifications over temperature are guaranteed by design.
          Note 2: A master device must provide a hold time of at least 300ns for the SDA signal (referred to VIL of the SCL signal) to bridge
                  the undefined region of SCL’s falling edge.
          Note 3: Guaranteed by design.
          Note 4: Cb = total capacitance of one bus line in pF. tR and tF measured between 0.3 x VDD and 0.7 x VDD.
          Note 5: ISINK ≤ 6mA. Cb = total capacitance of one bus line in pF. tR and tF measured between 0.3 x VDD and 0.7 x VDD.
          Note 6: Input filters on the SDA and SCL inputs suppress noise spikes less than 50ns.
          __________________________________________Typical Operating Characteristics
          (TA = +25°C, unless otherwise noted.)
                                                                                                                                     SUPPLY CURRENT vs. TEMPERATURE                                                    SUPPLY CURRENT vs. TEMPERATURE
                                       STANDBY CURRENT vs. TEMPERATURE                                                                 (PWM DISABLED; fSCL = 400kHz)                                                     (PWM ENABLED; fSCL = 400kHz)
                                  10                                                                                           70                                                                                70
                                                                                         MAX7313 toc01                                                                     MAX7313 toc02                                                                       MAX7313 toc03
                                               V+ = 3.6V                                                                                                                                                         65
                                   9           PWM ENABLED                                                                     60                                                                                60
                                   8                                                                                                                                                                             55
                                                                                                                                                                                                                                 V+ = 3.6V
           STANDBY CURRENT (µA)                                                                          SUPPLY CURRENT (µA)                                                               SUPPLY CURRENT (µA)
                                   7                                                                                           50                                                                                50
                                                                                                                                                V+ = 3.6V
                                                                                                                                                                                                                 45
                                   6                                                                                           40                                                                                40                          V+ = 2.7V
                                   5                                 V+ = 2V                                                                                V+ = 2.7V                                            35
                                                 V+ = 2.7V           PWM ENABLED                                               30                                                                                30
                                   4                                                                                                                                                                                                           V+ = 2V
                                                 PWM ENABLED                 V+ = 3.6V                                                                                                                           25
                                   3                                                                                           20                             V+ = 2V                                            20
                                         V+ = 2V           V+ = 2.7V         PWM
                                   2     PWM DISABLED PWM DISABLED DISABLED                                                                                                                                      15
                                                                                                                               10                                                                                10
                                   1                                                                                                                                                                              5
                                   0                                                                                           0                                                                                  0
                                       -40 -25 -10 5 20 35 50 65 80 95 110 125                                                      -40 -25 -10 5 20 35 50 65 80 95 110 125                                           -40 -25 -10 5 20 35 50 65 80 95 110 125
                                                     TEMPERATURE (°C)                                                                             TEMPERATURE (°C)                                                                  TEMPERATURE (°C)
          4                       _______________________________________________________________________________________


                           16-Port I/O Expander with LED Intensity
                    Control, Interrupt, and Hot-Insertion Protection
                                                                                                                                                                                                                                                                                                                      MAX7313
                                                                                                                                             Typical Operating Characteristics (continued)
(TA = +25°C, unless otherwise noted.)
                                        PORT OUTPUT LOW VOLTAGE WITH 50mA                                                                          PORT OUTPUT LOW VOLTAGE WITH 20mA                                                                         PWM CLOCK FREQUENCY
                                          LOAD CURRENT vs. TEMPERATURE                                                                               LOAD CURRENT vs. TEMPERATURE                                                                              vs. TEMPERATURE
                                  0.6                                                                                                        0.6                                                                                           1.050
                                                                                           MAX7313 toc04                                                                                             MAX7313 toc05                                                                                   MAX7313 toc06
                                                                                                                                                     ALL OUTPUTS LOADED
PORT OUTPUT LOW VOLTAGE VOL (V)                                                                            PORT OUTPUT LOW VOLTAGE VOL (V)
                                  0.5                                                                                                        0.5                                                                                           1.025              V+ = 3.6V
                                                                                                                                                                                                                     PWM CLOCK FREQUENCY
                                                             V+ = 2.7V
                                  0.4       V+ = 2V                                                                                          0.4                                                                                           1.000
                                  0.3                                                                                                        0.3                  V+ = 2V                                                                  0.975                                        V+ = 2V
                                                                                                                                                                                                                                                                  V+ = 2.7V
                                  0.2                          V+ = 3.6V                                                                     0.2                                                                                           0.950
                                  0.1                                                                                                        0.1                                V+ = 3.6V                                                  0.925
                                                                                                                                                                    V+ = 2.7V
                                                                                                                                                                                                                                                       NORMALIZED TO V+ = 3.3V, TA = +25°C
                                   0                                                                                                          0                                                                                            0.900
                                        -40 -25 -10 5 20 35 50 65 80 95 110 125                                                                    -40 -25 -10 5 20 35 50 65 80 95 110 125                                                         -40 -25 -10 5 20 35 50 65 80 95 110 125
                                                      TEMPERATURE (°C)                                                                                          TEMPERATURE (°C)                                                                                   TEMPERATURE (°C)
                                           SCOPE SHOT OF 2 OUTPUT PORTS                                                                               SCOPE SHOT OF 2 OUTPUT PORTS                                                                            SINK CURRENT vs. VOL
                                                                           MAX7313 toc07                                                                                             MAX7313 toc08
                                                                                                                                                                                                                                           0.35
                                                                                                                                                                                                                                                                                                      MAX7313 toc09
                                          MASTER INTENSITY SET TO 1/15                                                                               MASTER INTENSITY SET TO 14/15
                                                                                              OUTPUT 1                                                                                                      OUTPUT 1 0.30
                                                                                              2V/div                                                                                                                                                                          V+ = 2V
                                                                                                                                                                                                            2V/div
                                          OUTPUT 1 INDIVIDUAL INTENSITY                                                                              OUTPUT 1 INDIVIDUAL INTENSITY                                   0.25
                                                                                                                                                                                                                                                                           V+ = 2.7V
                                          SET TO 1/16                                                                                                SET TO 1/16
                                                                                                                                                                                                                                           0.20
                                                                                                                                                                                                                        VOL (V)                                V+ = 3.3V
                                                                                                                                                                                                                                           0.15
                                                                                              OUTPUT 2                                                                                                      OUTPUT 2                                                                    V+ = 3.6V
                                                                                              2V/div                                                                                                        2V/div   0.10
                                          OUTPUT 2 INDIVIDUAL INTENSITY                                                                              OUTPUT 2 INDIVIDUAL INTENSITY
                                          SET TO 15/16                                                                                               SET TO 14/15                                                                          0.05
                                                                                                                                                                                                                                                                          ONLY ONE OUTPUT LOADED
                                                                                                                                                                                                                                              0
                                                          2ms/div                                                                                                    2ms/div                                                                       0         10        20         30      40        50
                                                                                                                                                                                                                                                                   SINK CURRENT (mA)
                                                          _______________________________________________________________________________________                                                                                                                                                       5


          16-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
                                                                                                                                           Pin Description
MAX7313
                            PIN
                                                            NAME                                                           FUNCTION
                QSOP              TQFN-EP
                                                                              Output Port. Open-drain output rated at 7V, 50mA. Configurable as interrupt
                   1                 22                     INT/O16
                                                                              output or general-purpose output.
                                                        AD0, AD1,             Address Inputs. Sets device slave address. Connect to either GND, V+,
                21, 2, 3          18, 23, 24
                                                          AD2                 SCL, or SDA to give 64 logic combinations. See Table 1.
              4–11, 13–20         1–8, 10–17                P0–P15            Input/Output Ports. P0–P15 are open-drain I/Os rated at 5.5V, 50mA.
                  12                  9                      GND              Ground. Do not sink more than 350mA into the GND pin.
                  22                 19                      SCL              I2C-Compatible Serial Clock Input
                  23                 20                      SDA              I2C-Compatible Serial Data I/O
                                                                              Positive Supply Voltage. Bypass V+ to GND with a 0.047µF ceramic
                  24                 21                       V+
                                                                              capacitor.
                                                                              Exposed Pad (TQFN only). Internally connected to GND. Connect to a large
                  —                  —                        EP              analog ground plane to maximize thermal performance. Not intended to use
                                                                              as an electrical connection point.
                                              DATA FROM
                                          SHIFT REGISTER
                                                             CONFIGURATION                                                 OUTPUT PORT
                                                               REGISTER                                                    REGISTER DATA
                                              DATA FROM
                                                                D    Q
                                          SHIFT REGISTER                        OUTPUT
                                                                     FF          PORT
                                                  WRITE                        REGISTER
                                          CONFIGURATION         CK        Q     D    Q
                                                  PULSE
                                                                                     FF
                                            WRITE PULSE                         CK        Q
                                                                                                                           I/O PIN
                                                                                                                      Q2
                                                                                     INPUT PORT                            GND
                                                                                      REGISTER
                                                                                                                           INPUT PORT
                                                                                       D    Q
                                                                                                                           REGISTER DATA
                                                                                               FF
                                                                                                                           TO INT
                                               READ PULSE                                 CK        Q
          Figure 1. Simplified Schematic of I/O Ports
                                     Functional Overview                                                MAX7313’s supply voltage. The MAX7313 is rated for a
                                                                                                        ground current of 350mA, allowing all 17 outputs to sink
          The MAX7313 is a general-purpose input/output (GPIO)
                                                                                                        20mA at the same time. Figure 1 shows the output
          peripheral that provides 16 I/O ports, P0–P15, con-
                                                                                                        structure of the MAX7313. The ports default to inputs on
          trolled through an I2C-compatible serial interface. A
                                                                                                        power-up.
          17th output-only port, INT/O16, can be configured as
          an interrupt output or as a general-purpose output port.                                              Port Inputs and Transition Detection
          All output ports sink loads up to 50mA connected to                                           Input ports registers reflect the incoming logic levels of
          external supplies up to 5.5V, independent of the                                              the port pins, regardless of whether the pin is defined
          6    _______________________________________________________________________________________


        16-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
as an input or an output. Reading an input ports regis-                             PWM intensity control uses a 4-bit master control and 4
                                                                                                                                                      MAX7313
ter latches the current-input logic level of the affected                           bits of individual control per output (Tables 13, 14). The
eight ports. Transition detection allows all ports config-                          4-bit master control provides 16 levels of overall intensi-
ured as inputs to be monitored for changes in their                                 ty control, which applies to all PWM-enabled output
logic status. The action of reading an input ports regis-                           ports. The master control sets the maximum pulse
ter samples the corresponding 8 port bits’ input condi-                             width from 1/15 to 15/15 of the PWM time period. The
tions. This sample is continuously compared with the                                individual settings comprise a 4-bit number further
actual input conditions. A detected change in input                                 reducing the duty cycle to be from 1/16 to 15/16 of the
condition causes the INT/O16 interrupt output to go                                 time window set by the master control.
low, if configured as an interrupt output. The interrupt is                         For applications requiring the same PWM setting for all
cleared either automatically if the changed input                                   output ports, a single global PWM control can be used
returns to its original state, or when the appropriate                              instead of all the individual controls to simplify the con-
input ports register is read.                                                       trol software and provide 240 steps of intensity control
The INT/O16 pin can be configured as either an inter-                               (Tables 10 and 13).
rupt output or as a 17th output port with the same static
or blink controls as the other 16 ports (Table 4).
                                                                                                                                      Standby Mode
                                                                                    When the serial interface is idle and the PWM intensity
        Port Output Control and LED Blinking                                        control is unused, the MAX7313 automatically enters
The two blink phase 0 registers set the output logic lev-                           standby mode. If the PWM intensity control is used, the
els of the 16 ports P0–P15 (Table 8). These registers                               operating current is slightly higher because the internal
control the port outputs if the blink function is disabled.                         PWM oscillator is running. When the serial interface is
A duplicate pair of registers, the blink phase 1 regis-                             active, the operating current also increases because
ters, are also used if the blink function is enabled                                the MAX7313, like all I2C slaves, has to monitor every
(Table 9). In blink mode, the port outputs can be                                   transmission.
flipped between using the blink phase 0 registers and
the blink phase 1 registers using software control (the                                                                   Serial Interface
blink flip flag in the configuration register) (Table 4).                                                                    Serial Addressing
                                     PWM Intensity Control                          The MAX7313 operates as a slave that sends and
The MAX7313 includes an internal oscillator, nominally                              receives data through an I2C-compatible 2-wire inter-
32kHz, to generate PWM timing for LED intensity con-                                face. The interface uses a serial data line (SDA) and a
trol. PWM intensity control can be enabled on an out-                               serial clock line (SCL) to achieve bidirectional commu-
put-by-output basis, allowing the MAX7313 to provide                                nication between master(s) and slave(s). A master (typ-
any mix of PWM LED drives and glitch-free logic out-                                ically a microcontroller) initiates all data transfers to and
puts (Table 10). PWM can be disabled entirely, in                                   from the MAX7313 and generates the SCL clock that
which case all output ports are static and the MAX7313                              synchronizes the data transfer (Figure 2).
operating current is lowest because the internal oscilla-                           The MAX7313 SDA line operates as both an input and
tor is turned off.                                                                  an open-drain output. A pullup resistor, typically 4.7kΩ,
                                                                                    is required on SDA. The MAX7313 SCL line operates
             SDA
                                                                          tSU,STA                                              tBUF
                                                 tSU,DAT                                    tHD,STA
                                     tLOW
                                                                tHD,DAT                                      tSU,STO
             SCL                                  tHIGH
               tHD,STA
                                            tR             tF
                   START CONDITION                                        REPEATED START CONDITION                       STOP           START
                                                                                                                       CONDITION      CONDITION
Figure 2. 2-Wire Serial Interface Timing Details
                         _______________________________________________________________________________________                                  7


          16-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          only as an input. A pullup resistor, typically 4.7kΩ, is                                from high to low while SCL is high. When the master
MAX7313
          required on SCL if there are multiple masters on the 2-                                 has finished communicating with the slave, it issues a
          wire interface, or if the master in a single-master system                              STOP (P) condition by transitioning SDA from low to
          has an open-drain SCL output.                                                           high while SCL is high. The bus is then free for another
          Each transmission consists of a START condition                                         transmission (Figure 3).
          (Figure 3) sent by a master, followed by the MAX7313                                                                            Bit Transfer
          7-bit slave address plus R/W bit, a register address                                    One data bit is transferred during each clock pulse.
          byte, one or more data bytes, and finally a STOP condi-                                 The data on SDA must remain stable while SCL is high
          tion (Figure 3).                                                                        (Figure 4).
                                  START and STOP Conditions                                                                                Acknowledge
          Both SCL and SDA remain high when the interface is                                      The acknowledge bit is a clocked 9th bit that the recipi-
          not busy. A master signals the beginning of a transmis-                                 ent uses to handshake receipt of each byte of data
          sion with a START (S) condition by transitioning SDA                                    (Figure 5). Thus, each byte transferred effectively
                                                                                                  requires 9 bits. The master generates the 9th clock
                                                                                                  pulse, and the recipient pulls down SDA during the
              SDA                                                                                 acknowledge clock pulse so the SDA line is stable low
                                                                                                  during the high period of the clock pulse. When the
              SCL
                     S                                                                P           master is transmitting to the MAX7313, the device gen-
                   START                                                           STOP           erates the acknowledge bit because the MAX7313 is
                 CONDITION                                                       CONDITION        the recipient. When the MAX7313 is transmitting to the
                                                                                                  master, the master generates the acknowledge bit
          Figure 3. START and STOP Conditions                                                     because the master is the recipient.
                                                                                                                                          Slave Address
                                                                                                  The MAX7313 has a 7-bit long slave address (Figure 6).
              SDA                                                                                 The eighth bit following the 7-bit slave address is the
                                                                                                  R/W bit. The R/W bit is low for a write command, high
                                                                                                  for a read command.
              SCL
                                                                                                  The slave address bits A6 through A0 are selected by
                           DATA LINE STABLE; CHANGE OF DATA                                       the address inputs AD0, AD1, and AD2. These pins can
                              DATA VALID        ALLOWED                                           be connected to GND, V+, SDA, or SCL. The MAX7313
                                                                                                  has 64 possible slave addresses (Table 1) and, there-
          Figure 4. Bit Transfer                                                                  fore, a maximum of 64 MAX7313 devices can be con-
                                                                                                  trolled independently from the same interface.
                                                                   CLOCK PULSE
                                                                                                               Message Format for Writing the MAX7313
                           START
                         CONDITION                            FOR ACKNOWLEDGE                     A write to the MAX7313 comprises the transmission of
                                                                                                  the MAX7313’s slave address with the R/W bit set to
                    SCL                 1            2                 8          9
                                                                                                  zero, followed by at least 1 byte of information. The first
                SDA BY
                                                                                                  byte of information is the command byte. The command
           TRANSMITTER                                                                            byte determines which register of the MAX7313 is to be
                  SDA BY
                                                                                                  written to by the next byte, if received (Table 2). If a
                RECEIVER     S                                                                    STOP condition is detected after the command byte is
                                                                                                  received, then the MAX7313 takes no further action
          Figure 5. Acknowledge                                                                   beyond storing the command byte.
                    SDA           A6            A5                A4             A3          A2            A1         A0          R/W        ACK
                                 MSB                                                                                  LSB
                    SCL
          Figure 6. Slave Address
          8     _______________________________________________________________________________________


        16-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
Table 1. MAX7313 I2C Slave Address Map
                                                                                                           MAX7313
                                                               DEVICE ADDRESS
  PIN AD2   PIN AD1     PIN AD0
                                      A6        A5        A4         A3         A2     A1        A0
   GND       SCL          GND          0        0         1          0          0       0         0
   GND       SCL           V+          0        0         1          0          0       0         1
   GND       SDA          GND          0        0         1          0          0       1         0
   GND       SDA           V+          0        0         1          0          0       1         1
    V+       SCL          GND          0        0         1          0          1       0         0
    V+       SCL           V+          0        0         1          0          1       0         1
    V+       SDA          GND          0        0         1          0          1       1         0
    V+       SDA           V+          0        0         1          0          1       1         1
   GND       SCL          SCL          0        0         1          1          0       0         0
   GND       SCL          SDA          0        0         1          1          0       0         1
   GND       SDA          SCL          0        0         1          1          0       1         0
   GND       SDA          SDA          0        0         1          1          0       1         1
    V+       SCL          SCL          0        0         1          1          1       0         0
    V+       SCL          SDA          0        0         1          1          1       0         1
    V+       SDA          SCL          0        0         1          1          1       1         0
    V+       SDA          SDA          0        0         1          1          1       1         1
   GND       GND          GND          0        1         0          0          0       0         0
   GND       GND           V+          0        1         0          0          0       0         1
   GND        V+          GND          0        1         0          0          0       1         0
   GND        V+           V+          0        1         0          0          0       1         1
    V+       GND          GND          0        1         0          0          1       0         0
    V+       GND           V+          0        1         0          0          1       0         1
    V+        V+          GND          0        1         0          0          1       1         0
    V+        V+           V+          0        1         0          0          1       1         1
   GND       GND          SCL          0        1         0          1          0       0         0
   GND       GND          SDA          0        1         0          1          0       0         1
   GND        V+          SCL          0        1         0          1          0       1         0
   GND        V+          SDA          0        1         0          1          0       1         1
    V+       GND          SCL          0        1         0          1          1       0         0
    V+       GND          SDA          0        1         0          1          1       0         1
    V+        V+          SCL          0        1         0          1          1       1         0
    V+        V+          SDA          0        1         0          1          1       1         1
             _______________________________________________________________________________________   9


          16-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          Table 1. MAX7313 I2C Slave Address Map (continued)
MAX7313
                                                                              DEVICE ADDRESS
               PIN AD2     PIN AD1      PIN AD0
                                                     A6        A5        A4         A3         A2        A1   A0
                SCL          SCL         GND          1         0         1         0          0         0    0
                SCL          SCL          V+          1         0         1         0          0         0    1
                SCL          SDA         GND          1         0         1         0          0         1    0
                SCL          SDA          V+          1         0         1         0          0         1    1
                SDA          SCL         GND          1         0         1         0          1         0    0
                SDA          SCL          V+          1         0         1         0          1         0    1
                SDA          SDA         GND          1         0         1         0          1         1    0
                SDA          SDA          V+          1         0         1         0          1         1    1
                SCL          SCL          SCL         1         0         1         1          0         0    0
                SCL          SCL          SDA         1         0         1         1          0         0    1
                SCL          SDA          SCL         1         0         1         1          0         1    0
                SCL          SDA          SDA         1         0         1         1          0         1    1
                SDA          SCL          SCL         1         0         1         1          1         0    0
                SDA          SCL          SDA         1         0         1         1          1         0    1
                SDA          SDA          SCL         1         0         1         1          1         1    0
                SDA          SDA          SDA         1         0         1         1          1         1    1
                SCL         GND          GND          1         1         0         0          0         0    0
                SCL         GND           V+          1         1         0         0          0         0    1
                SCL          V+          GND          1         1         0         0          0         1    0
                SCL          V+           V+          1         1         0         0          0         1    1
                SDA         GND          GND          1         1         0         0          1         0    0
                SDA         GND           V+          1         1         0         0          1         0    1
                SDA          V+          GND          1         1         0         0          1         1    0
                SDA          V+           V+          1         1         0         0          1         1    1
                SCL         GND           SCL         1         1         0         1          0         0    0
                SCL         GND           SDA         1         1         0         1          0         0    1
                SCL          V+           SCL         1         1         0         1          0         1    0
                SCL          V+           SDA         1         1         0         1          0         1    1
                SDA         GND           SCL         1         1         0         1          1         0    0
                SDA         GND           SDA         1         1         0         1          1         0    1
                SDA          V+           SCL         1         1         0         1          1         1    0
                SDA          V+           SDA         1         1         0         1          1         1    1
          10    ______________________________________________________________________________________


        16-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
                                                                                                                                                                               MAX7313
                                    COMMAND BYTE IS STORED ON RECEIPT OF
                                                                                 D15    D14   D13    D12        D11    D10      D9    D8
                                                         STOP CONDITION
                                           ACKNOWLEDGE FROM MAX7313
                   S                     SLAVE ADDRESS               0       A                      COMMAND BYTE                                A        P
                                                              R/W                                        ACKNOWLEDGE FROM MAX7313
Figure 7. Command Byte Received
                                                                      ACKNOWLEDGE FROM MAX7313                               ACKNOWLEDGE FROM MAX7313
            HOW COMMAND BYTE AND DATA BYTE MAP INTO
                                                          D15 D14 D13 D12 D11 D10        D9   D8           D7     D6    D5      D4   D3    D2       D1       D0
                               MAX7313'S REGISTERS
                         ACKNOWLEDGE FROM MAX7313
        S                SLAVE ADDRESS           0    A                  COMMAND BYTE                A                         DATA BYTE                          A   P
                                                                                                                               1
                                           R/W                                                                               BYTE
                                                                                                                 AUTOINCREMENT MEMORY ADDRESS
Figure 8. Command and Single Data Byte Received
                                                                     ACKNOWLEDGE FROM MAX7313                                ACKNOWLEDGE FROM MAX7313
            HOW COMMAND BYTE AND DATA BYTE MAP INTO
                                                          D15 D14 D13 D12 D11 D10        D9   D8           D7     D6    D5     D4    D3    D2       D1   D0
                               MAX7313'S REGISTERS
                         ACKNOWLEDGE FROM MAX7313
        S                SLAVE ADDRESS           0    A              COMMAND BYTE                    A                         DATA BYTE                          A   P
                                                                                                                              N
                                          R/W                                                                              BYTES
                                                                                                                AUTOINCREMENT MEMORY ADDRESS
Figure 9. n Data Bytes Received
Any bytes received after the command byte are data                                 tive bytes from the MAX7313 with the first data byte
bytes. The first data byte goes into the internal register                         being read from the register addressed by the initial-
of the MAX7313 selected by the command byte (Figure                                ized command byte. When performing read-after-write
8). If multiple data bytes are transmitted before a STOP                           verification, remember to reset the command byte’s
condition is detected, these bytes are generally stored                            address because the stored command byte address
in subsequent MAX7313 internal registers because the                               has been autoincremented after the write (Table 2). A
command byte address autoincrements (Table 2). A                                   diagram of a read from the input ports registers is
diagram of a write to the output ports registers (blink                            shown in Figure 10 reflecting the states of the ports.
phase 0 registers or blink phase 1 registers) is given in
Figure 10.
                                                                                                         Operation with Multiple Masters
                                                                                   If the MAX7313 is operated on a 2-wire interface with
                          Message Format for Reading                               multiple masters, a master reading the MAX7313 should
The MAX7313 is read using the MAX7313’s internally                                 use a repeated start between the write, which sets the
stored command byte as an address pointer the same                                 MAX7313’s address pointer, and the read(s) that takes
way the stored command byte is used as an address                                  the data from the location(s) (Table 2). This is because it
pointer for a write. The pointer autoincrements after                              is possible for master 2 to take over the bus after master
each data byte is read using the same rules as for a                               1 has set up the MAX7313’s address pointer but before
write (Table 2). Thus, a read is initiated by first configur-                      master 1 has read the data. If master 2 subsequently
ing the MAX7313’s command byte by performing a                                     changes the MAX7313’s address pointer, then master
write (Figure 7). The master can now read n consecu-                               1’s delayed read can be from an unexpected location.
                        ______________________________________________________________________________________                                                            11


          16-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
MAX7313
                  WRITE TO OUTPUT PORTS REGISTERS (BLINK PHASE 0 REGISTERS/BLINK PHASE 1 REGISTERS)
                  SCL       1    2     3   4     5    6      7    8   9
                                SLAVE ADDRESS                             COMMAND BYTE
                  SDA S A6 A5 A4 A3 A2 A1 A0                      0   A     0    0    0    0    0      0   0    1   A MSB         DATA1       LSB   A MSB         DATA2              LSB A    P
                         START CONDITION                         R/W ACKNOWLEDGE FROM SLAVE                         ACKNOWLEDGE FROM SLAVE          ACKNOWLEDGE FROM SLAVE                STOP
                                                                                                                                                                                        CONDITION
                P7–P0                                                                                                                                            DATA1 VALID
                                                                                                                                                          tDV
               P15– P8                                                                                                                                                                       DATA2 VALID
                                                                                                                                                                               tDV
                  READ FROM INPUT PORTS REGISTERS
                  SCL       1    2     3   4     5    6   7       8   9
                                       SLAVE ADDRESS                            COMMAND BYTE
                  SDA S A6 A5 A4 A3 A2 A1 A0 1                        A MSB               DATA1                LSB A MSB           DATA6       LSB NA P
                                                                                                                                                            STOP CONDITION
                         START CONDITION                         R/W ACKNOWLEDGE FROM SLAVE                         ACKNOWLEDGE FROM MASTER         NO ACKNOWLEDGE FROM
                                                                                                                                                    MASTER
                P7–P0                      DATA1                           DATA2               DATA3                                DATA4
                                                                               tDH
               P15–P8                                  DATA5                                                                        DATA6
                                                                                                                        tDS
                  INTERRUPT VALID/RESET
                  SCL       1    2     3   4     5    6   7       8   9
                                     SLAVE ADDRESS                          COMMAND BYTE
                  SDA S A6 A5 A4 A3 A2 A1 A0 1                        A MSB               DATA2                LSB A MSB           DATA4       LSB NA P
                                                                                                                                                            STOP CONDITION
                         START CONDITION                         R/W ACKNOWLEDGE FROM SLAVE                         ACKNOWLEDGE FROM MASTER         NO ACKNOWLEDGE FROM
                                                                                                                                                    MASTER
                P7–P0           DATA1                                                     DATA2
               P15–P8                                DATA3                                                                        DATA4
                   INT
                                           tIV                                  tIR tIV                                     tIR
          Figure 10. Read, Write, and Interrupt Timing Diagrams
                        Command Address Autoincrementing                                                                                                  Detailed Description
          The command address stored in the MAX7313 circu-
          lates around grouped register functions after each data                                                                                                            Initial Power-Up
          byte is written or read (Table 2).                                                                                On power-up all control registers are reset and the
                                                                                                                            MAX7313 enters standby mode (Table 3). Power-up
                                                                                  Device Reset                              status makes all ports into inputs and disables both the
          If a device reset input is needed, consider the                                                                   PWM oscillator and blink functionality.
          MAX7314. The MAX7314 includes a RST input, which
          clears any transaction to or from the MAX7314 on the                                                                                                  Configuration Register
          serial interface and configures the internal registers to                                                         The configuration register is used to configure the PWM
          the same state as a power-up reset.                                                                               intensity mode, interrupt, and blink behavior, operate
                                                                                                                            the INT/O16 output, and read back the interrupt status
                                                                                                                            (Table 4).
          12     ______________________________________________________________________________________


        16-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
                                                                                                                              MAX7313
Table 2. Register Address Map
                                                         ADDRESS CODE                         AUTOINCREMENT
                  REGISTER
                                                             (HEX)                               ADDRESS
            Read input ports P7–P0                            0x00                                   0x01
           Read input ports P15–P8                            0x01                                   0x00
          Blink phase 0 outputs P7–P0                         0x02                                   0x03
         Blink phase 0 outputs P15–P8                         0x03                                   0x02
           Ports configuration P7–P0                          0x06                                   0x07
          Ports configuration P15–P8                          0x07                                   0x06
          Blink phase 1 outputs P7–P0                         0x0A                                  0x0B
         Blink phase 1 outputs P15–P8                         0x0B                                  0x0A
             Master, O16 intensity                            0x0E                            0x0E (no change)
                 Configuration                                0x0F                            0x0F (no change)
            Outputs intensity P1, P0                          0x10                                   0x11
            Outputs intensity P3, P2                          0x11                                   0x12
            Outputs intensity P5, P4                          0x12                                   0x13
            Outputs intensity P7, P6                          0x13                                   0x14
            Outputs intensity P9, P8                          0x14                                   0x15
           Outputs intensity P11, P10                         0x15                                   0x16
           Outputs intensity P13, P12                         0x16                                   0x17
           Outputs intensity P15, P14                         0x17                                   0x10
                                 Ports Configuration          compared data (Figure 10). Randomly changing a port
The 16 I/O ports P0 through P15 can be configured to          from an output to an input may cause a false interrupt
any combination of inputs and outputs using the ports         to occur if the state of the input does not match the
configuration registers (Table 5). The INT/O16 output         content of the appropriate input ports register. The
can also be configured as an extra general-purpose            interrupt status is available as the interrupt flag INT in
output using the configuration register (Table 4).            the configuration register (Table 4).
                                              Input Ports     The input status of all ports are sampled immediately
The input ports registers are read only (Table 6). They       after power-up as part of the MAX7313’s internal initial-
reflect the incoming logic levels of the ports, regardless    ization, so if all the ports are pulled to valid logic levels
of whether the port is defined as an input or an output       at that time an interrupt does not occur at power-up.
by the ports configuration registers. Reading an input                                                 INT/O16 Output
ports register latches the current-input logic level of the   The INT/O16 output pin can be configured as either the
affected eight ports. A write to an input ports register is   INT output that reflects the interrupt flag logic state or
ignored.                                                      as a general-purpose output O16. When used as a
                                     Transition Detection     general-purpose output, the INT/O16 pin has the same
All ports configured as inputs are always monitored for       blink and PWM intensity control capabilities as the
changes in their logic status. The action of reading an       other ports.
input ports register or writing to the configuration regis-   Set the interrupt enable I bit in the configuration register
ter samples the corresponding 8 port bits’ input condi-       to configure INT/O16 as the INT output (Table 4). Clear
tion (Tables 4, 6). This sample is continuously               interrupt enable to configure INT/O16 as the O16. O16
compared with the actual input conditions. A detected         logic state is set by the 2 bits O1 and O0 in the configu-
change in input condition causes an interrupt condition.      ration register. O16 follows the rules for blinking select-
The interrupt is cleared either automatically if the          ed by the blink enable flag E in the configuration
changed input returns to its original state, or when the      register. If blinking is disabled, then interrupt output
appropriate input ports register is read, updating the        control O0 alone sets the logic state of the INT/O16 pin.
                   ______________________________________________________________________________________               13


          16-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
MAX7313
          Table 3. Power-Up Configuration
                                                                                              ADDRESS                   REGISTER DATA
                REGISTER FUNCTION                     POWER-UP CONDITION                       CODE
                                                                                               (HEX)
                                                                                                         D7    D6      D5          D4   D3          D2                D1     D0
           Blink phase 0 outputs P7–P0                High-impedance outputs                      0x02   1     1       1           1      1         1                 1          1
           Blink phase 0 outputs P15–P8               High-impedance outputs                      0x03   1     1       1           1      1         1                 1          1
               Ports configuration P7–P0               Ports P7–P0 are inputs                     0x06   1     1       1           1      1         1                 1          1
               Ports configuration P15–P8              Ports P15–P8 are inputs                    0x07   1     1       1           1      1         1                 1          1
           Blink phase 1 outputs P7–P0                High-impedance outputs                      0x0A   1     1       1           1      1         1                 1          1
           Blink phase 1 outputs P15–P8               High-impedance outputs                      0x0B   1     1       1           1      1         1                 1          1
                                                     PWM oscillator is disabled;
                 Master, O16 intensity                                                            0x0E   0     0       0           0      1         1                 1          1
                                                      O16 is static logic output
                                                     INT/O16 is interrupt output;
                     Configuration                        blink is disabled;                      0x0F   0     0       0           0      1         1                 0          0
                                                      global intensity is enabled
                Outputs intensity P1, P0            P1, P0 are static logic outputs               0x10   1     1       1           1      1         1                 1          1
                Outputs Intensity P3, P2            P3, P2 are static logic outputs               0x11   1     1       1           1      1         1                 1          1
                Outputs intensity P5, P4            P5, P4 are static logic outputs               0x12   1     1       1           1      1         1                 1          1
                Outputs intensity P7, P6            P7, P6 are static logic outputs               0x13   1     1       1           1      1         1                 1          1
                Outputs intensity P9, P8            P9, P8 are static logic outputs               0x14   1     1       1           1      1         1                 1          1
               Outputs intensity P11, P10       P11, P10 are static logic outputs                 0x15   1     1       1           1      1         1                 1          1
               Outputs intensity P13, P12       P13, P12 are static logic outputs                 0x16   1     1       1           1      1         1                 1          1
               Outputs intensity P15, P14       P15, P14 are static logic outputs                 0x17   1     1       1           1      1         1                 1          1
          Table 4. Configuration Register
                                                                    ADDRESS                                   REGISTER DATA
                           REGISTER                                  CODE
                                                                     (HEX)
                                                                                       D7          D6    D5     D4           D3          D2             D1                 D0
                                                                                      INTERRUPT
                                                                                                         INTERRUPT
                                                                                                                            INTERRUPT
                                                             R/W
                                                                                                                                                         BLINK FLIP
                                                                                                           OUTPUT                        GLOBAL                             BLINK
                       CONFIGURATION                                                                —
                                                                                                          CONTROL
                                                                                                                                        INTENSITY                          ENABLE
                                                                                        STATUS             AS GPO             ENABLE
                    Write device configuration                 0       0x0F                         X
                                                                                      INT                O1     O0             I          G              B                  E
                 Read back device configuration                1                                    O
                          Disable blink                       —                         X           X    X         X          X           X               X                  0
                           Enable blink                       —                         X           X    X         X          X           X               X                  1
                                                              —                         X           X    X         X          X           X               0                  1
                   Flip blink register (see text)
                                                              —                         X           X    X         X          X           X               1                  1
          14    ______________________________________________________________________________________


        16-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
                                                                                                                                            MAX7313
Table 4. Configuration Register (continued)
                                                     ADDRESS                         REGISTER DATA
                  REGISTER                            CODE
                                                      (HEX)
                                                                D7         D6   D5     D4     D3          D2         D1           D0
                                                               INTERRUPT
                                                                                INTERRUPT
                                                                                             INTERRUPT
                                               R/W
                                                                                                                     BLINK FLIP
                                                                                  OUTPUT                  GLOBAL                   BLINK
            CONFIGURATION                                                  —
                                                                                 CONTROL
                                                                                                         INTENSITY                ENABLE
                                                                 STATUS           AS GPO       ENABLE
         Write device configuration             0                          X
                                                               INT              O1     O0       I          G         B             E
      Read back device configuration            1                          O
 Disable global intensity control—intensity
 is set by registers 0x10–0x17 for ports P0
 through P15 when configured as outputs,
                                               —                 X         X    X      X       X           0         X             X
     and by D3–D0 of register 0x0E for
  INT/O16 when INT/O16 pin is configured
              as an output port
 Enable global intensity control—intensity
 for all ports configured as outputs is set    —                 X         X    X      X       X           1         X             X
         by D3–D0 of register 0x0E
  Disable data change interrupt—INT/O16
                                               —                 X         X    X      X       0           X         X             X
 output is controlled by the O0 and O1 bits
  Enable data change interrupt—INT/O16
                                                      0x0F
   output is controlled by port input data     —                 X         X    X      X       1           X         X             X
                   change
  INT/O16 output is low (blink is disabled)    —                 X         X    X      0       0           X         X             0
 INT/O16 output is high impedance (blink
                                               —                 X         X    X      1       0           X         X             0
              is disabled)
 INT/O16 output is low during blink phase 0    —                 X         X    X      0       0           X         X             1
 INT/O16 output is high impedance during
                                               —                 X         X    X      1       0           X         X             1
             blink phase 0
 INT/O16 output is low during blink phase 1    —                 X         X    0      X       0           X         X             1
 INT/O16 output is high impedance during
                                               —                 X         X    1      X       0           X         X             1
             blink phase 1
  Read-back data change interrupt status
    —data change is not detected, and
                                                1                0         0    X      X       X           X         X             X
   INT/O16 output is high when interrupt
           enable (I bit) is set
 Read-back data change interrupt status
 —data change is detected, and INT/O16
                                                1                1         0    X      X       X           X         X             X
 output is low when interrupt enable (I bit)
                  is set
X = Don’t care.
                     ______________________________________________________________________________________                            15


          16-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
MAX7313
          Table 5. Ports Configuration Registers
                                                            ADDRESS                                  REGISTER DATA
                           REGISTER                   R/W    CODE
                                                             (HEX)
                                                                           D7         D6       D5      D4     D3         D2    D1      D0
                    Ports configuration P7–P0
                                                       0
                     (1 = input, 0 = output)                   0x06        OP7       OP6      OP5      OP4    OP3       OP2    OP1     OP0
               Read back ports configuration P7–P0     1
                    Ports configuration P15–P8
                                                       0
                      (1 = input, 0 = output)                  0x07        OP15      OP14    OP13     OP12    OP11     OP10    OP9     OP8
               Read back ports configuration P15–P8    1
          Table 6. Input Ports Registers
                                                            ADDRESS                                  REGISTER DATA
                           REGISTER                   R/W    CODE
                                                             (HEX)
                                                                           D7         D6       D5      D4     D3         D2    D1      D0
                     Read input ports P7–P0            1       0x00        IP7        IP6     IP5      IP4    IP3       IP2    IP1     IP0
                     Read input ports P15–P8           1       0x01        IP15      IP14     IP13     IP12   IP11      IP10   IP9     IP8
          If blinking is enabled, then both interrupt output con-               The blink mode is disabled by clearing the blink enable
          trols O0 and O1 set the logic state of the INT/O16 pin                flag E in the configuration register (Table 4). When blink
          according to the blink phase. PWM intensity control for               mode is disabled, the state of the blink flip flag is
          O16 is set by the 4 global intensity bits in the master               ignored, and the blink phase 0 registers alone control
          and O16 intensity register (Table 13).                                the output ports.
                                                        Blink Mode                                            Blink Phase Registers
          In blink mode, the output ports can be flipped between                When the blink function is disabled, the two blink phase
          using either the blink phase 0 registers or the blink phase           0 registers set the logic levels of the 16 ports (P0 through
          1 registers. Flip control is by software control (the blink           P15) when configured as outputs (Table 8). A duplicate
          flip flag B in the configuration register) (Table 4). If hard-        pair of registers called the blink phase 1 registers are
          ware flip control is needed, consider the MAX7314, which              also used if the blink function is enabled (Table 9). A
          includes a BLINK input, as well as software control.                  logic high sets the appropriate output port high imped-
          The blink function can be used for LED effects by pro-                ance, while a logic low makes the port go low.
          gramming different display patterns in the two sets of                Reading a blink phase register reads the value stored
          output port registers, and using the software or hard-                in the register, not the actual port condition. The port
          ware controls to flip between the patterns.                           output itself may or may not be at a valid logic level,
          If the blink phase 1 registers are written with 0xFF, then            depending on the external load connected.
          the BLINK input can be used as a hardware disable to,                  Table 7. Blink Controls
          for example, instantly turn off an LED pattern pro-
          grammed into the blink phase 0 registers. This tech-                      BLINK             BLINK                     OUTPUT
                                                                                                                  BLINK
          nique can be further extended by driving the BLINK                       ENABLE              FLIP
                                                                                                                FUNCTION
                                                                                                                               REGISTERS
          input with a PWM signal to modulate the LED current to                   FLAG E            FLAG B                      USED
          provide fading effects.                                                                                              Blink phase 0
                                                                                       0               X            Disabled
          The blink mode is enabled by setting the blink enable                                                                   registers
          flag E in the configuration register (Table 4). When blink
                                                                                                                               Blink phase 0
          mode is enabled, the state of the blink flip flag sets the                                   0
                                                                                                                                  registers
          phase, and the output ports are set by either the blink                      1                            Enabled
          phase 0 registers or the blink phase 1 registers (Table 7).                                  1
                                                                                                                               Blink phase 1
                                                                                                                                  registers
                                                                                 X = Don’t care.
          16     ______________________________________________________________________________________


        16-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
The 17th output, O16, is controlled through 2 bits in the           Each output’s individual 4-bit intensity control only
                                                                                                                                 MAX7313
configuration register, which provide the same static or            operates during the number of timeslots gated by the
blink control as the other 16 output ports.                         master intensity. The individual controls provide 16
                                                                    intensity settings from 1/16 through 16/16 (Table 14).
                            PWM Intensity Control
The MAX7313 includes an internal oscillator, nominally              Figures 15, 16, and 17 show examples of individual
32kHz, to generate PWM timing for LED intensity con-                intensity control settings. The highest value an individ-
trol or other applications such as PWM trim DACs.                   ual or global setting can be set to is 16/16. This setting
PWM can be disabled entirely for all the outputs. In this           forces the output to ignore the master control, and fol-
case, all outputs are static and the MAX7313 operating              low the logic level set by the appropriate blink phase
current is lowest because the internal PWM oscillator is            register bit. The output becomes a glitch-free static out-
turned off.                                                         put with no PWM.
The MAX7313 can be configured to provide any combi-                    Using PWM Intensity Controls with Blink Disabled
nation of PWM outputs and glitch-free logic outputs.                When blink is disabled (Table 7), the blink phase 0 reg-
Each PWM output has an individual 4-bit intensity con-              isters specify each output’s logic level during the PWM
trol (Table 14). When all outputs are to be used with the           on-time (Table 8). The effect of setting an output’s blink
same PWM setting, the outputs can be controlled                     phase 0 register bit to 0 or 1 is shown in Table 11. With
together instead using the global intensity control                 its output bit set to zero, an LED can be controlled with
(Table 13). Table 10 shows how to set up the MAX7313                16 intensity settings from 1/16th duty through fully on,
to suit a particular application.                                   but cannot be turned fully off using the PWM intensity
                                             PWM Timing             control. With its output bit set to 1, an LED can be con-
The PWM control uses a 240-step PWM period, divided                 trolled with 16 intensity settings from fully off through
into 15 master intensity timeslots. Each master intensity           15/16th duty.
timeslot is divided further into 16 PWM cycles (Figure 11).            Using PWM Intensity Controls with Blink Enabled
The master intensity operates as a gate, allowing the indi-         When blink is enabled (Table 7), the blink phase 0 regis-
vidual output settings to be enabled from 1 to 15 timeslots         ters and blink phase 1 registers specify each output’s
per PWM period (Figures 12, 13, 14) (Table 13).                     logic level during the PWM on-time during the respective
Table 8. Blink Phase 0 Registers
                                               ADDRESS                                REGISTER DATA
               REGISTER                  R/W    CODE
                                                (HEX)
                                                              D7         D6      D5     D4      D3      D2      D1      D0
      Write outputs P7–P0 phase 0          0
                                                  0x02        OP7       OP6     OP5     OP4     OP3     OP2     OP1     OP0
    Read back outputs P7–P0 phase 0        1
      Write outputs P15–P8 phase 0         0
                                                  0x03        OP15     OP14    OP13    OP12    OP11    OP10     OP9     OP8
   Read back outputs P15–P8 phase 0        1
Table 9. Blink Phase 1 Registers
                                               ADDRESS                                REGISTER DATA
               REGISTER                  R/W    CODE
                                                (HEX)
                                                               D7        D6      D5      D4     D3      D2      D1      D0
       Write outputs P7–P0 phase 1         0
                                                  0x0A        OP7       OP6     OP5     OP4     OP3     OP2     OP1     OP0
    Read back outputs P7–P0 phase 1        1
      Write outputs P15–P8 phase 1         0
                                                  0x03        OP15     OP14    OP13    OP12    OP11    OP10     OP9     OP8
   Read back outputs P15–P8 phase 1        1
                   ______________________________________________________________________________________                  17


          16-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
MAX7313
          Table 10. PWM Application Scenarios
                                  APPLICATION                                                                                                           RECOMMENDED CONFIGURATION
                                                                                                                   Set the master, O16 intensity register 0x0E to any value 0x00 to 0x0F.
          All outputs static without PWM                                                                           The global intensity G bit in the configuration register is don't care.
                                                                                                                   The output intensity registers 0x10 through 0x17 are don't care.
                                                                                                                   Set the master, O16 intensity register 0x0E to any value from 0x10 to 0xFF.
                                                                                                                   Clear global intensity G bit to 0 in the configuration register to disable global intensity
          A mix of static and PWM outputs, with PWM
                                                                                                                   control.
          outputs using different PWM settings
                                                                                                                   For the static outputs, set the output intensity value to 0xF.
                                                                                                                   For the PWM outputs, set the output intensity value in the range 0x0 to 0xE.
          A mix of static and PWM outputs, with PWM                                                                As above. Global intensity control cannot be used with a mix of static and PWM
          outputs all using the same PWM setting                                                                   outputs, so write the individual intensity registers with the same PWM value.
                                                                                                                   Set the master, O16 intensity register 0x0E to any value except from 0x10 to 0xFF.
                                                                                                                   Set global intensity G bit to 1 in the configuration register to enable global intensity
          All outputs PWM using the same PWM
                                                                                                                   control.
          setting
                                                                                                                   The master, O16 intensity register 0x0E is the only intensity register used.
                                                                                                                   The output intensity registers 0x10 through 0x17 are don't care.
                                                                                                                     ONE PWM PERIOD IS 240 CYCLES OF THE 32kHz PWM
                                                                                                                      OSCILLATOR. A PWM PERIOD CONTAINS 15 MASTER
                                                                                                                                  INTENSITY TIMESLOTS
                                  14               15           1               2            3             4          5        6               7   8          9             10       11       12           13           14            15         1             2
                                               15 16 1              2       3       4    5       6     7       8     9 10 11 12 13 14 15 16              1         2
                                                                                                 EACH MASTER INTENSITY
                                                                                                  TIMESLOT CONTAINS 16
                                                                                                     PWM CYCLES
          Figure 11. PWM Timing
                                                                                                                                                          .
               14    15   1   2        3       4        5   6       7       8       9    10       11   12      13    14   15   1   2
                                                                                                                                                              14       15    1   2    3   4        5   6        7   8        9   10    11   12       13   14       15   1   2
                                                                                                                                       .
                                                                                                                                                                                                                                                                                .
          Figure 12. Master Set to 1/15                                                                                                                Figure 14. Master Set to 15/15
                .
               14 15 1        2            3       4    5       6       7       8       9 10 11 12 13 14                   15 1        2
                                                                                                                                           .
          Figure 13. Master Set to 14/15
          18        ______________________________________________________________________________________


        16-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
                                                                                                                                                                                                       MAX7313
                                      MASTER INTENSITY TIMESLOT                                                            NEXT MASTER INTENSITY TIMESLOT
                   1     2    3   4    5    6    7   8   9 10 11 12 13 14 15 16                     1   2   3    4     5     6    7   8   9 10 11 12 13 14 15 16
Figure 15. Individual (or Global) Set to 1/16
                                      MASTER INTENSITY TIMESLOT                                                            NEXT MASTER INTENSITY TIMESLOT
                    1    2    3   4     5    6   7   8   9 10 11 12 13 14 15 16                     1   2   3     4    5      6   7   8   9 10 11 12 13 14 15 16
Figure 16. Individual (or Global) Set to 15/16
                                                              MASTER INTENSITY TIMESLOT CONTROL IS IGNORED
                   1     2    3   4    5    6    7   8   9 10 11 12 13 14 15 16                     1   2   3    4     5     6    7   8   9 10 11 12 13 14 15 16
Figure 17. Individual (or Global) Set to 16/16
Table 11. PWM Intensity Settings (Blink Disabled)
  OUTPUT          PWM DUTY CYCLE                            LED BEHAVIOR WHEN                                     PWM DUTY CYCLE                        LED BEHAVIOR WHEN
    (OR         OUTPUT BLINK PHASE 0                       OUTPUT BLINK PHASE 0                                 OUTPUT BLINK PHASE 0                   OUTPUT BLINK PHASE 0
  GLOBAL)         REGISTER BIT = 0                            REGISTER BIT = 0                                    REGISTER BIT = 1                        REGISTER BIT = 1
 INTENSITY                                                    (LED IS ON WHEN                                                                             (LED IS ON WHEN
  SETTING                                                      OUTPUT IS LOW)                                                                              OUTPUT IS LOW)
                LOW TIME              HIGH TIME                                                                 LOW TIME              HIGH TIME
     0x0               1/16                 15/16            Lowest PWM intensity                                    15/16                1/16              Highest PWM intensity
     0x1               2/16                 14/16                                                                    14/16                2/16
     0x2               3/16                 13/16                                                                    13/16                3/16
     0x3               4/16                 12/16                                                                    12/16                4/16
                                                                        Increasing PWM intensity                                                                    Increasing PWM intensity 
     0x4               5/16                 11/16                                                                    11/16                5/16
     0x5               6/16                 10/16                                                                    10/16                6/16
     0x6               7/16                 9/16                                                                      9/16                7/16
     0x7               8/16                 8/16                                                                      8/16                8/16
     0x8               9/16                 7/16                                                                      7/16                9/16
     0x9           10/16                    6/16                                                                      6/16                10/16
     0xA           11/16                    5/16                                                                      5/16                11/16
     0xB           12/16                    4/16                                                                      4/16                12/16
     0xC           13/16                    3/16                                                                      3/16                13/16
     0xD           14/16                    2/16                                                                      2/16                14/16
     0xE           15/16                    1/16             Highest PWM intensity                                    1/16                15/16             Lowest PWM intensity
                                                             Full intensity, no PWM                              Static high           Static high
     0xF         Static low            Static low                                                                                                           LED off continuously
                                                             (LED on continuously)                              impedance             impedance
                        ______________________________________________________________________________________                                                                                    19


          16-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          blink phases (Tables 8 and 9). The effect of setting an                                  Applications Information
MAX7313
          output’s blink phase x register bit to 0 or 1 is shown in
          Table 12. LEDs can be flipped between either directly on                                                            Hot Insertion
          and off, or between a variety of high/low PWM intensities.           I/O ports P0–P15, interrupt output INT/016, and serial
                                                                               interface SDA, SCL, AD0–2 remain high impedance
                                     Global/O16 Intensity Control              with up to 6V asserted on them when the MAX7313 is
          The 4 bits used for output O16’s PWM individual inten-               powered down (V+ = 0V). The MAX7313 can therefore
          sity setting also double as the global intensity control             be used in hot-swap applications.
          (Table 13). Global intensity simplifies the PWM settings
          when the application requires them all to be the same,                                            Output Level Translation
          such as for backlight applications, by replacing the 17              The open-drain output architecture allows the ports to
          individual settings with 1 setting. Global intensity is              level translate the outputs to higher or lower voltages
          enabled with the Global Intensity flag G in the configu-             than the MAX7313 supply. An external pullup resistor
          ration register (Table 4). When global PWM control is                can be used on any output to convert the high-imped-
          used, the 4 bits of master intensity and 4 bits of global            ance logic-high condition to a positive voltage level.
          intensity effectively combine to provide an 8 bit, 240-              The resistor can be connected to any voltage up to
          step intensity control applying to all outputs.                      5.5V. For interfacing CMOS inputs, a pullup resistor
          It is not possible to apply global PWM control to a sub-             value of 220kΩ is a good starting point. Use a lower
          set of the ports, and use the others as logic outputs. To            resistance to improve noise immunity, in applications
          mix static logic outputs and PWM outputs, individual                 where power consumption is less critical, or where a
          PWM control must be selected (Table 10).                             faster rise time is needed for a given capacitive load.
          Table 12. PWM Intensity Settings (Blink Enabled)
                                                                                         EXAMPLES OF LED BLINK BEHAVIOR
                         PWM DUTY CYCLE            PWM DUTY CYCLE                         (LED IS ON WHEN OUTPUT IS LOW)
            OUTPUT        OUTPUT BLINK              OUTPUT BLINK
              (OR           PHASE X                   PHASE X                       BLINK PHASE 0                       BLINK PHASE 0
            GLOBAL)      REGISTER BIT = 0          REGISTER BIT = 1                REGISTER BIT = 0                    REGISTER BIT = 1
           INTENSITY
            SETTING                                                                 BLINK PHASE 1                       BLINK PHASE 1
                          LOW          HIGH         LOW          HIGH
                          TIME         TIME         TIME         TIME              REGISTER BIT = 1                    REGISTER BIT = 0
               0x0        1/16         15/16        15/16         1/16
               0x1        2/16         14/16        14/16         2/16
               0x2        3/16         13/16        13/16         3/16
                                                                             Phase 0: LED on at low intensity    Phase 0: LED on at high intensity
               0x3        4/16         12/16        12/16         4/16
                                                                             Phase 1: LED on at high intensity   Phase 1: LED on at low intensity
               0x4        5/16         11/16        11/16         5/16
               0x5        6/16         10/16        10/16         6/16
               0x6        7/16         9/16          9/16         7/16
               0x7        8/16         8/16          8/16         8/16                Output is half intensity during both blink phases
               0x8        9/16         7/16          7/16         9/16
               0x9        10/16        6/16          6/16        10/16
               0xA        11/16        5/16          5/16        11/16
                                                                             Phase 0: LED on at high intensity   Phase 0: LED on at low intensity
               0xB        12/16        4/16          4/16        12/16
                                                                             Phase 1: LED on at low intensity    Phase 1: LED on at high intensity
               0xC        13/16        3/16          3/16        13/16
               0xD        14/16        2/16          2/16        14/16
               0xE        15/16        1/16          1/16        15/16
                                                   Static high Static high   Phase 0: LED on continuously        Phase 0: LED off continuously
               0xF      Static low   Static low
                                                  impedance impedance        Phase 1: LED off continuously       Phase 1: LED on continuously
          20   ______________________________________________________________________________________


        16-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
                                                                                                                                  MAX7313
Table 13. Master, O16 Intensity Register
                                                     ADDRESS                           REGISTER DATA
                REGISTER                              CODE
                                                      (HEX)
                                               R/W              D7        D6      D5     D4      D3      D2      D1     D0
                                                                MSB                      LSB    MSB                     LSB
   MASTER AND GLOBAL INTENSITY
                                                                     MASTER INTENSITY                  O16 INTENSITY
     Write master and global intensity          0
                                                                M3       M2       M1     M0      G3      G2      G1     G0
  Read back master and global intensity         1
  Master intensity duty cycle is 0/15 (off);
       internal oscillator is disabled;        —                 0        0       0       0      —       —       —       —
   all outputs will be static with no PWM
    Master intensity duty cycle is 1/15        —                 0        0       0       1      —       —       —       —
    Master intensity duty cycle is 2/15        —                 0        0       1       0      —       —       —       —
    Master intensity duty cycle is 3/15        —                 0        0       1       1      —       —       —       —
                     —                         —                —         —       —       —      —       —       —       —
    Master intensity duty cycle is 13/15       —      0X0E       1        1       0       1      —       —       —       —
    Master intensity duty cycle is 14/15       —                 1        1       1       0      —       —       —       —
 Master intensity duty cycle is 15/15 (full)   —                 1        1       1       1      —       —       —       —
      O16 intensity duty cycle is 1/16         —                —         —       —       —       0       0      0       0
      O16 intensity duty cycle is 2/16         —                —         —       —       —       0       0      0       1
      O16 intensity duty cycle is 3/16         —                —         —       —       —       0       0      1       0
                     —                         —                —         —       —       —      —       —       —       —
     O16 intensity duty cycle is 14/16         —                —         —       —       —       1       1      0       1
     O16 intensity duty cycle is 15/16         —                —         —       —       —       1       1      1       0
     O16 intensity duty cycle is 16/16
                                               —                —         —       —       —       1       1      1       1
        (static output, no PWM)
                      Compatibility with MAX7311                     50mA. Choose the resistor value according to the fol-
The MAX7313 is pin compatible and software compatible                lowing formula:
with the standard register structure used by MAX7311,
PCA9535, and PCA9555. However, some MAX7311 func-                              RLED = (VSUPPLY - VLED - VOL) / ILED
tions are not implemented in the MAX7313, and the
MAX7313’s PWM and blink functionality is not supported               where:
in the MAX7311. Software compatibility is clearly not                RLED is the resistance of the resistor in series with the
100%, but the MAX7313 was designed so the subset                     LED (Ω).
(omitted) features default to the same power-up behavior             VSUPPLY is the supply voltage used to drive the LED (V).
as the MAX7311, PCA9535, and PCA9555, and superset                   VLED is the forward voltage of the LED (V).
features do not use existing registers in a different way. In        VOL is the output low voltage of the MAX7313 when
practice, many applications can use the MAX7313 as a                 sinking ILED (V).
drop-in replacement for the MAX7311.                                 ILED is the desired operating current of the LED (A).
                                       Driving LED Loads             For example, to operate a 2.2V red LED at 14mA from a
When driving LEDs, a resistor in series with the LED                 5V supply, RLED = (5 - 2.2 - 0.25) / 0.014 = 182Ω.
must be used to limit the LED current to no more than
______________________________________________________________________________________________________                       21


          16-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
MAX7313
          Table 14. Output Intensity Registers
                                                             ADDRESS                          REGISTER DATA
                            REGISTER                          CODE
                                                         R/W  (HEX)
                                                                       D7        D6    D5       D4    D3        D2    D1     D0
                                                                       MSB                     LSB    MSB                    LSB
                   OUTPUTS P1, P0 INTENSITY
                                                                            OUTPUT P1 INTENSITY            OUTPUT P0 INTENSITY
                    Write output P1, P0 intensity        0
                                                                       P1I3     P1I2   P1I1    P1I0   P0I3     P0I2   P0I1   P0I0
                 Read back output P1, P0 intensity       1
               Output P1 intensity duty cycle is 1/16    —              0        0      0         0    —        —      —     —
               Output P1 intensity duty cycle is 2/16    —              0        0      0         1    —        —      —     —
               Output P1 intensity duty cycle is 3/16    —              0        0      1         0    —        —      —     —
                                 —                       —             —         —      —       —      —        —      —     —
               Output P1 intensity duty cycle is 14/16   —              1        1      0         1    —        —      —     —
               Output P1 intensity duty cycle is 15/16   —              1        1      1         0    —        —      —     —
               Output P1 intensity duty cycle is 16/16        0X10
                                                         —              1        1      1         1    —        —      —     —
                   (static logic level, no PWM)
               Output P0 intensity duty cycle is 1/16    —             —         —      —       —      0        0      0         0
               Output P0 intensity duty cycle is 2/16    —             —         —      —       —      0        0      0         1
               Output P0 intensity duty cycle is 3/16    —             —         —      —       —      0        0      1         0
                                 —                       —             —         —      —       —      —        —      —     —
               Output P0 intensity duty cycle is 14/16   —             —         —      —       —      1        1      0         1
               Output P0 intensity duty cycle is 15/16   —             —         —      —       —      1        1      1         0
               Output P0 intensity duty cycle is 16/16
                                                         —             —         —      —       —      1        1      1         1
                   (static logic level, no PWM)
                                                                       MSB                     LSB    MSB                    LSB
                   OUTPUTS P3, P2 INTENSITY
                                                                            OUTPUT P3 INTENSITY            OUTPUT P2 INTENSITY
                                                               0x11
                    Write output P3, P2 intensity        0
                                                                       P3I3     P3I2   P3I1    P3I0   P2I3     P2I2   P2I1   P2I0
                 Read back output P3, P2 intensity       1
                                                                       MSB                     LSB    MSB                    LSB
                   OUTPUTS P5, P4 INTENSITY
                                                                            OUTPUT P5 INTENSITY            OUTPUT P4 INTENSITY
                                                               0x12
                    Write output P5, P4 intensity        0
                                                                       P5I3     P5I2   P5I1    P5I0   P4I3     P4I2   P4I1   P4I0
                 Read back output P5, P4 intensity       1
                                                                       MSB                     LSB    MSB                    LSB
                   OUTPUTS P7, P6 INTENSITY
                                                                            OUTPUT P7 INTENSITY            OUTPUT P6 INTENSITY
                                                               0x13
                    Write output P7, P6 intensity        0
                                                                       P7I3     P7I2   P7I1    P7I0   P6I3     P6I2   P6I1   P6I0
                 Read back output P7, P6 intensity       1
          22     ______________________________________________________________________________________


        16-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
                                                                                                                                                    MAX7313
Table 14. Output Intensity Registers (continued)
                                                   ADDRESS                                       REGISTER DATA
                REGISTER                            CODE
                                               R/W  (HEX)
                                                                        D7      D6         D5      D4         D3         D2        D1       D0
                                                                       MSB                         LSB       MSB                           LSB
      OUTPUTS P9, P8 INTENSITY
                                                                          OUTPUT P9 INTENSITY                   OUTPUT P8 INTENSITY
                                                          0x14
       Write output P9, P8 intensity             0
                                                                       P9I3    P9I2       P911     P9I0      P8I3       P812     P811      P810
    Read back output P9, P8 intensity            1
                                                                       MSB                         LSB       MSB                           LSB
     OUTPUTS P11, P10 INTENSITY
                                                                         OUTPUT P11 INTENSITY                  OUTPUT P10 INTENSITY
                                                          0x15
      Write output P11, P10 intensity            0
                                                                       P11I3   P11I2     P11I1    P11I0      P10I3     P10I2     P10I1     P10I0
   Read back output P11, P10 intensity           1
                                                                       MSB                         LSB       MSB                           LSB
     OUTPUTS 13, P12 INTENSITY
                                                                         OUTPUT P13 INTENSITY                  OUTPUT P12 INTENSITY
                                                          0x16
      Write output P13, P12 intensity            0
                                                                       P13I3   P13I2     P13I1    P13I0      P12I3     P12I2     P12I1     P12I0
   Read back output P13, P12 intensity           1
                                                                       MSB                         LSB       MSB                           LSB
     OUTPUTS P15, P14 INTENSITY
                                                                         OUTPUT P15 INTENSITY                  OUTPUT P14 INTENSITY
                                                          0x17
      Write output P15, P14intensity             0
                                                                       P15I3   P15I2     P15I1    P15I0      P14I3     P14I2     P14I1     P14I0
   Read back output P15, P14 intensity           1
        OUTPUT O16 INTENSITY                                                    See master, O16 intensity register (Table 13).
Table 15. MAX7311, PCA9535, and PCA9555 Register Compatibility
    MAX7311,
                                                                                        MAX7311, PCA9535,
    PCA9535,
                       ADDRESS              MAX7313 IMPLEMENTATION                          PCA9555                        COMMENTS
     PCA9555
                                                                                        IMPLEMENTATION
    REGISTER
Inputs P15–P0          0x00, 0x01      Inputs registers                                Implemented                  Same functionality
Outputs P15–P0         0x02, 0x03      Blink phase 0 registers                         Implemented                  Same functionality
                                                                                       Implemented;                 If polarity inversion feature
                                       Not implemented; register writes are
Polarity inversion     0x04, 0x05                                                      power-up default is          is unused, MAX7313
                                       ignored; register reads return 0x00
                                                                                       0x00                         defaults to correct state
Configuration          0x06, 0x07      Ports configuration registers                   Not implemented              Same functionality
No registers          0x0B, 0x0C       Blink phase 1 registers                         Not implemented
No register               0x0E         Master, O16 intensity register                  Not implemented              Power-up default disables
                                                                                                                    the blink and intensity
No register               0x0F         Configuration register                          Not implemented              (PWM) features
No registers           0x10–0x17       Outputs intensity registers                     Not implemented
                     ______________________________________________________________________________________                                    23


          16-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
               Driving Load Currents Higher than 50mA
MAX7313
          The MAX7313 can be used to drive loads drawing more                         2V TO 3.6V
          than 50mA, like relays and high-current white LEDs, by
                                                                                                                           5V
          paralleling outputs. Use at least one output per 50mA of          0.047µF
          load current; for example, a 5V 330mW relay draws
          66mA and needs two paralleled outputs to drive it.                             V+              P0
          Ensure that the paralleled outputs chosen are controlled        µC
                                                                                                         P1
          by the same blink phase register, i.e., select outputs            SDA       SDA     MAX7313    P2    BAS16
          from the P0 through P7 range, or the P8 through P15                                            P3
                                                                            SCL       SCL
          range. This way, the paralleled outputs are turned on                                          P4
          and off together. Do not use output O16 as part of a                                           P5
          load-sharing design. O16 cannot be switched at the                   I/O    INT/O16            P6
          same time as any of the other outputs because it is con-                                       P7
          trolled by a different register.                                                               P8
          The MAX7313 must be protected from the negative                             AD0                P9
                                                                                      AD1                P10
          voltage transient generated when switching off induc-
                                                                                      AD2                P11
          tive loads, such as relays, by connecting a reverse-
                                                                                                         P12
          biased diode across the inductive load (Figure 18). The
                                                                                                         P13
          peak current through the diode is the inductive load’s
                                                                                                         P14
          operating current.                                                                             P15
                                                                                                   GND
                           Power-Supply Considerations
          The MAX7313 operates with a power-supply voltage of
          2V to 3.6V. Bypass the power supply to GND with at
                                                                     Figure 18. Diode-Protected Switching Inductive Load
          least 0.047µF as close to the device as possible.
          For the QFN version, connect the underside exposed
          pad to GND.
          24    ______________________________________________________________________________________


       16-Port I/O Expander with LED Intensity
Control, Interrupt, and Hot-Insertion Protection
                                                                                             Typical Application Circuit
                                                                                                                                           MAX7313
                                                               5V
                                        3.3V
                             0.047µF
                                         V+              P0
                            µC
                                                         P1
                             SDA       SDA     MAX7313   P2
                             SCL       SCL               P3
                                                         P4
                                                         P5
                                 I/O   INT/O16           P6
                                                         P7
                                                         P8
                                       AD0               P9                        INPUT 1
                                       AD1               P10                       INPUT 2
                                       AD2               P11                       INPUT 3
                                                         P12                       INPUT 4
                                                         P13                       INPUT 5
                                                                    5V 3.3V
                                                         P14
                                                 GND     P15
                                                                                  OUTPUT 10
                                                                                  OUTPUT 11
  Pin Configurations (continued)                                                                         Chip Information
                                                                         PROCESS: BiCMOS
 TOP VIEW               +                                                                          Package Information
            INT/O16 1                    24 V+
                                                                        For the latest package outline information and land patterns
              AD1 2                      23 SDA                         (footprints), go to www.maxim-ic.com/packages. Note that a
                                                                        “+”, “#”, or “-” in the package code indicates RoHS status only.
              AD2 3                      22 SCL
                                                                        Package drawings may show a different suffix character, but
                P0 4                     21 AD0                         the drawing pertains to the package regardless of RoHS status.
                P1 5    MAX7313AEG       20 P15                               PACKAGE         PACKAGE                      LAND
                                                                                                         OUTLINE NO.
                                                                                TYPE            CODE                    PATTERN NO.
                P2 6                     19 P14
                                                                              24 TQFN          T2444+4     21-0139         90-0022
                P3 7                     18 P13
                                                                              24 QSPI           E24+1      21-0055         90-0172
                P4 8                     17 P12
                P5 9                     16 P11
                P6 10                    15 P10
                P7 11                    14 P9
              GND 12                     13 P8
                            QSOP
                ______________________________________________________________________________________                               25


          16-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
                                                                                                                            Revision History
MAX7313
           REVISION       REVISION                                                                                                           PAGES
                                                                              DESCRIPTION
           NUMBER          DATE                                                                                                             CHANGED
                 5            6/11      Added lead(Pb)-free parts to Ordering Information and corrected error in Table 9                       1, 17
          Maxim cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim product. No circuit patent licenses are
          implied. Maxim reserves the right to change the circuitry and specifications without notice at any time.
          26 ____________________Maxim Integrated Products, 120 San Gabriel Drive, Sunnyvale, CA 94086 408-737-7600
          © 2011 Maxim Integrated Products                                        Maxim is a registered trademark of Maxim Integrated Products, Inc.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 MAX7313AEG+ MAX7313AEG+T MAX7313ATG+ MAX7313ATG+T
