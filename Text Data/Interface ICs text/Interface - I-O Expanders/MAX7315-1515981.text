19-3056; Rev 3; 1/05
                    KIT
              ATION
         EVALU    BLE
           AVA ILA
          8-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
                            General Description                                                                           Features
                                                                                                                                           MAX7315
The MAX7315 I2C-/SMBus-compatible serial interfaced            ♦ 400kbps, 2-Wire Serial Interface, 5.5V Tolerant
peripheral provides microprocessors with 8 I/O ports.
                                                               ♦ 2V to 3.6V Operation
Each I/O port can be individually configured as either an
open-drain current-sinking output rated at 50mA at 5.5V,       ♦ Overall 8-Bit PWM LED Intensity Control
or a logic input with transition detection. A ninth port can        Global 16-Step Intensity Control
be used for transition detection interrupt or as a general-         Plus Individual 16-Step Intensity Control
purpose output. The outputs are capable of directly dri-       ♦ Automatic Two-Phase LED Blinking
ving LEDs, or providing logic outputs with external
                                                               ♦ 50mA Maximum Port Output Current
resistive pullup up to 5.5V.
                                                               ♦ Supports Hot Insertion
PWM current drive is integrated with 8 bits of control.
Four bits are global control and apply to all LED outputs      ♦ Outputs Are 5.5V-Rated Open Drain
to provide coarse adjustment of current from fully off to      ♦ Inputs Are Overvoltage Protected to 5.5V
fully on in 14 intensity steps. Each output then has indi-     ♦ Transition Detection with Interrupt Output
vidual 4-bit control, which further divides the globally
                                                               ♦ Low Standby Current (1.2µA typ; 3.3µA max)
set current into 16 more steps. Alternatively, the current
control can be configured as a single 8-bit control that       ♦ Tiny 3mm x 3mm, Thin QFN Package
sets all outputs at once.                                      ♦ -40°C to +125°C Temperature Range
The MAX7315 is pin and software compatible with the            ♦ All Ports Can Be Configured as Inputs or Outputs
PCA9534 and PCA9554(A).
Each output has independent blink timing with two blink
phases. All LEDs can be individually set to be on or off                                   Ordering Information
during either blink phase, or to ignore the blink control.                             TEMPPIN-        TOP PKG
The blink period is controlled by a register.                      PART
                                                                                      RANGEPACKAGE MARK CODE
The MAX7315 supports hot insertion. All port pins, the INT                                 16 Thin QFN
output, SDA, SCL, and the slave address inputs ADO-2            MAX7315ATE -40°C to +125°C 3mm x 3mm AAU T1633-4
remain high impedance in power-down (V+ = 0V) with up                                      x 0.8mm
to 6V asserted upon them.                                       MAX7315AEE -40°C to +125°C 16 QSOP      —   —
The MAX7315 is controlled through the 2-wire I2C/SMBus          MAX7315AUE -40°C to +125°C 16 TSSOP                            —   —
serial interface, and can be configured to one of 64 I2C
addresses.
                                       Applications                                                Pin Configurations
     LCD Backlights                  Keypad Backlights
                                                                                                  INT/O8
                                                                     TOP VIEW
     LED Status Indication           RGB LED Drivers                                       SCL             P7   P6
                                                                                           12     11       10   9
     Portable Equipment              Cellular Phones
     Laptop Computers                                                           SDA   13                             8   P5
                                                                                 V+   14                             7   P4
                                                                                               MAX7315ATE
                                                                                ADO   15                             6   GND
                                                                                AD1   16                             5   P3
Typical Application Circuit appears at end of data sheet.
                                                                                           1       2       3    4
                                                                                           AD2
                                                                                                  P0       P1   P2
                                                                                                 THIN QFN
                                                                  Pin Configurations continued at end of data sheet.
                       ________________________________________________________________ Maxim Integrated Products                      1
For pricing, delivery, and ordering information, please contact Maxim/Dallas Direct! at
1-888-629-4642, or visit Maxim’s website at www.maxim-ic.com.


          8-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          ABSOLUTE MAXIMUM RATINGS
MAX7315
          Voltage (with respect to GND)                                                                       16-Pin TSSOP (derate 9.4mW/°C over +70°C) ............754mW
          V+ .............................................................................-0.3V to +4V        16-Pin QSOP (derate 8.3mW/°C over +70°C)..............666mW
          SCL, SDA, AD0, AD1, AD2, P0–P7 ..........................-0.3V to +6V                               16-Pin QFN (derate 14.7mW/°C over +70°C) ............1176mW
          INT/O8 .....................................................................-0.3V to +8V          Operating Temperature Range (TMIN to TMAX)-40°C to +125°C
          DC Current on P0–P7, INT/O8 ............................................55mA                      Junction Temperature ......................................................+150°C
          DC Current on SDA.............................................................10mA                Storage Temperature Range .............................-65°C to +150°C
          Maximum GND Current ....................................................190mA                     Lead Temperature (soldering, 10s) .................................+300°C
          Continuous Power Dissipation (TA = +70°C)
          Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional
          operation of the device at these or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to
          absolute maximum rating conditions for extended periods may affect device reliability.
          ELECTRICAL CHARACTERISTICS
          (Typical Operating Circuit, V+ = 2V to 3.6V, TA = TMIN to TMAX, unless otherwise noted. Typical values are at V+ = 3.3V, TA = +25°C.)
          (Note 1)
                        PARAMETER                           SYMBOL                                       CONDITIONS                                 MIN       TYP       MAX       UNITS
           Operating Supply Voltage                              V+                                                                                  2                    3.6         V
           Output Load External Supply
                                                                VEXT                                                                                 0                    5.5         V
           Voltage
                                                                            SCL and SDA at V+; other                 TA = +25°C                                1.2        2.3
           Standby Current
                                                                  I+        digital inputs at V+ or GND;             TA = -40°C to +85°C                                  2.6        µA
           (Interface Idle, PWM Disabled)
                                                                            PWM intensity control disabled           TA = TMIN to TMAX                                    3.3
                                                                            SCL and SDA at V+; other                 TA = +25°C                                 7        12.1
           Supply Current
                                                                  I+        digital inputs at V+ or GND;             TA = -40°C to +85°C                                 13.5        µA
           (Interface Idle, PWM Enabled)
                                                                            PWM intensity control enabled            TA = TMIN to TMAX                                   14.4
           Supply Current                                                   fSCL = 400kHz; other digital             TA = +25°C                                40         76
           (Interface Running, PWM                                I+        inputs at V+ or GND; PWM                 TA = -40°C to +85°C                                  78         µA
           Disabled)                                                        intensity control disabled               TA = TMIN to TMAX                                    80
           Supply Current                                                   fSCL = 400kHz; other digital             TA = +25°C                                51        110
           (Interface Running, PWM                                I+        inputs at V+ or GND; PWM                 TA = -40°C to +85°C                                 117         µA
           Enabled)                                                         intensity control enabled                TA = TMIN to TMAX                                   122
           Input High Voltage
                                                                                                                                                   0.7 ✕
           SDA, SCL, AD0, AD1, AD2,                              VIH                                                                                                                  V
                                                                                                                                                    V+
           P0–P7
           Input Low Voltage
                                                                                                                                                                        0.3 ✕
           SDA, SCL, AD0, AD1, AD2,                              VIL                                                                                                                  V
                                                                                                                                                                         V+
           P0–P7
           Input Leakage Current
           SDA, SCL, AD0, AD1, AD2,                            IIH, IIL     Input = GND or V+                                                       -0.2                 +0.2        µA
           P0–P7
           Input Capacitance
           SDA, SCL, AD0, AD1, AD2,                                                                                                                             8                    pF
           P0–P7
          2     _______________________________________________________________________________________


           8-Port I/O Expander with LED Intensity
  Control, Interrupt, and Hot-Insertion Protection
ELECTRICAL CHARACTERISTICS (continued)
                                                                                                                                        MAX7315
(Typical Operating Circuit, V+ = 2V to 3.6V, TA = TMIN to TMAX, unless otherwise noted. Typical values are at V+ = 3.3V, TA= + 25°C.)
(Note 1)
          PARAMETER                SYMBOL                         CONDITIONS                        MIN     TYP      MAX    UNITS
                                                                              TA = +25°C                    0.15     0.25
                                              V+ = 2V, ISINK = 20mA           TA = -40°C to +85°C                    0.29
                                                                              TA = TMIN to TMAX                      0.31
                                                                              TA = +25°C                    0.13     0.22
 Output Low Voltage
                                      VOL     V+ = 2.5V, ISINK = 20mA         TA = -40°C to +85°C                    0.25      V
 P0–P7, INT/O8
                                                                              TA = TMIN to TMAX                      0.27
                                                                              TA = +25°C                    0.12     0.22
                                              V+ = 3.3V, ISINK = 20mA         TA = -40°C to +85°C                    0.23
                                                                              TA = TMIN to TMAX                      0.25
 Output Low-Voltage SDA              VOLSDA   ISINK = 6mA                                                             0.4      V
 PWM Clock Frequency                 fPWM                                                                    32               kHz
TIMING CHARACTERISTICS
(Typical Operating Circuit, V+ = 2V to 3.6V, TA = TMIN to TMAX, unless otherwise noted. Typical values are at V+ = 3.3V, TA = +25°C.)
(Note 1)
                    PARAMETER                         SYMBOL                 CONDITIONS              MIN     TYP     MAX     UNITS
 Serial Clock Frequency                                  fSCL                                                         400     kHz
 Bus Free Time Between a STOP and a START
                                                         tBUF                                        1.3                       µs
 Condition
 Hold Time, Repeated START Condition                   tHD, STA                                      0.6                       µs
 Repeated START Condition Setup Time                   tSU, STA                                      0.6                       µs
 STOP Condition Setup Time                             tSU, STO                                      0.6                       µs
 Data Hold Time                                        tHD, DAT   (Note 2)                                            0.9      µs
 Data Setup Time                                       tSU, DAT                                      180                       ns
 SCL Clock Low Period                                    tLOW                                        1.3                       µs
 SCL Clock High Period                                  tHIGH                                        0.7                       µs
                                                                                                            200 +
 Rise Time of Both SDA and SCL Signals, Receiving           tR    (Notes 3, 4)                                        300      ns
                                                                                                            0.1Cb
                                                                                                            200 +
 Fall Time of Both SDA and SCL Signals, Receiving           tF    (Notes 3, 4)                                        300      ns
                                                                                                            0.1Cb
                                                                                                            200 +
 Fall Time of SDA Transmitting                           tF.TX    (Notes 3, 5)                                        250      ns
                                                                                                            0.1Cb
 Pulse Width of Spike Suppressed                            tSP   (Note 6)                                    50               ns
 Capacitive Load for Each Bus Line                          Cb    (Note 3)                                            400      pF
                      _______________________________________________________________________________________                       3


          8-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          TIMING CHARACTERISTICS (continued)
MAX7315
          (Typical Operating Circuit, V+ = 2V to 3.6V, TA = TMIN to TMAX, unless otherwise noted. Typical values are at V+ = 3.3V, TA = +25°C.)
          (Note 1)
                                                       PARAMETER                                                                      SYMBOL                       CONDITIONS                                             MIN         TYP        MAX     UNITS
           Interrupt Valid                                                                                                                tIV         Figure 10                                                                                    6.5    µs
           Interrupt Reset                                                                                                                tIR         Figure 10                                                                                     1     µs
           Output Data Valid                                                                                                              tDV         Figure 10                                                                                     5     µs
           Input Data Setup Time                                                                                                          tDS         Figure 10                                                            100                            ns
           Input Data Hold Time                                                                                                           tDH         Figure 10                                                             1                             µs
          Note 1: All parameters tested at TA = +25°C. Specifications over temperature are guaranteed by design.
          Note 2: A master device must provide a hold time of at least 300ns for the SDA signal (referred to VIL of the SCL signal) to bridge
                  the undefined region of SCL’s falling edge.
          Note 3: Guaranteed by design.
          Note 4: Cb = total capacitance of one bus line in pF. tR and tF measured between 0.3 x VDD and 0.7 x VDD.
          Note 5: ISINK ≤ 6mA. Cb = total capacitance of one bus line in pF. tR and tF measured between 0.3 x VDD and 0.7 x VDD.
          Note 6: Input filters on the SDA and SCL inputs suppress noise spikes less than 50ns.
          __________________________________________Typical Operating Characteristics
          (TA = +25°C, unless otherwise noted.)
                                                                                                                                     SUPPLY CURRENT vs. TEMPERATURE                                                    SUPPLY CURRENT vs. TEMPERATURE
                                       STANDBY CURRENT vs. TEMPERATURE                                                                 (PWM DISABLED; fSCL = 400kHz)                                                     (PWM ENABLED; fSCL = 400kHz)
                                  10                                                                                           70                                                                                70
                                                                                         MAX7315 toc01                                                                     MAX7315 toc02                                                                       MAX7315 toc03
                                               V+ = 3.6V                                                                                                                                                         65
                                   9           PWM ENABLED                                                                     60                                                                                60
                                   8                                                                                                                                                                             55
                                                                                                                                                                                                                                 V+ = 3.6V
           STANDBY CURRENT (µA)                                                                          SUPPLY CURRENT (µA)                                                               SUPPLY CURRENT (µA)
                                   7                                                                                           50                                                                                50
                                                                                                                                                V+ = 3.6V
                                                                                                                                                                                                                 45
                                   6
                                                                                                                               40                                                                                40                          V+ = 2.7V
                                   5                                 V+ = 2V                                                                                V+ = 2.7V                                            35
                                   4             V+ = 2.7V           PWM ENABLED                                               30                                                                                30
                                                 PWM ENABLED                 V+ = 3.6V                                                                                                                           25                            V+ = 2V
                                   3                                         PWM                                               20                             V+ = 2V                                            20
                                         V+ = 2V           V+ = 2.7V
                                   2     PWM DISABLED PWM DISABLED DISABLED                                                                                                                                      15
                                                                                                                               10                                                                                10
                                   1
                                                                                                                                                                                                                  5
                                   0                                                                                            0                                                                                 0
                                       -40 -25 -10 5 20 35 50 65 80 95 110 125                                                      -40 -25 -10 5 20 35 50 65 80 95 110 125                                           -40 -25 -10 5 20 35 50 65 80 95 110 125
                                                     TEMPERATURE (°C)                                                                             TEMPERATURE (°C)                                                                  TEMPERATURE (°C)
          4                       _______________________________________________________________________________________


                                 8-Port I/O Expander with LED Intensity
                        Control, Interrupt, and Hot-Insertion Protection
                                                                                                                                                                                                                                                                                                                      MAX7315
                                                                                                                                              Typical Operating Characteristics (continued)
(TA = +25°C, unless otherwise noted.)
                                        PORT OUTPUT LOW VOLTAGE WITH 50mA                                                                          PORT OUTPUT LOW VOLTAGE WITH 20mA                                                                          PWM CLOCK FREQUENCY
                                          LOAD CURRENT vs. TEMPERATURE                                                                               LOAD CURRENT vs. TEMPERATURE                                                                               vs. TEMPERATURE
                                  0.6                                                                                                        0.6                                                                                            1.050
                                                                                           MAX7315 toc04                                                                                             MAX7315 toc05                                                                                    MAX7315 toc06
                                                                                                                                                     ALL OUTPUTS LOADED
PORT OUTPUT LOW VOLTAGE VOL (V)                                                                            PORT OUTPUT LOW VOLTAGE VOL (V)
                                  0.5                                                                                                        0.5                                                                                            1.025              V+ = 3.6V
                                                                                                                                                                                                                      PWM CLOCK FREQUENCY
                                                             V+ = 2.7V
                                  0.4       V+ = 2V                                                                                          0.4                                                                                            1.000
                                  0.3                                                                                                        0.3                  V+ = 2V                                                                   0.975                                        V+ = 2V
                                                                                                                                                                                                                                                                   V+ = 2.7V
                                  0.2                          V+ = 3.6V                                                                     0.2                                                                                            0.950
                                  0.1                                                                                                        0.1                                V+ = 3.6V                                                   0.925
                                                                                                                                                                    V+ = 2.7V
                                                                                                                                                                                                                                                        NORMALIZED TO V+ = 3.3V, TA = +25°C
                                   0                                                                                                          0                                                                                             0.900
                                        -40 -25 -10 5 20 35 50 65 80 95 110 125                                                                    -40 -25 -10 5 20 35 50 65 80 95 110 125                                                          -40 -25 -10 5 20 35 50 65 80 95 110 125
                                                      TEMPERATURE (°C)                                                                                          TEMPERATURE (°C)                                                                                    TEMPERATURE (°C)
                                           SCOPE SHOT OF 2 OUTPUT PORTS                                                                               SCOPE SHOT OF 2 OUTPUT PORTS                                                                              SINK CURRENT vs. VOL
                                                                           MAX7315 toc07                                                                                             MAX7315 toc08
                                                                                                                                                                                                                                            0.35
                                                                                                                                                                                                                                                                                                      MAX7315 toc09
                                         MASTER INTENSITY SET TO 1/15                                                                                MASTER INTENSITY SET TO 14/15
                                                                                             OUTPUT 1,                                                                                                         OUTPUT 1,                    0.30
                                                                                                                                                                                                                                                                               V+ = 2V
                                                                                             2V/div                                                                                                            2V/div
                                                                                                                                                                                                                                            0.25
                                          OUTPUT 1 INDIVIDUAL INTENSITY                                                                              OUTPUT 1 INDIVIDUAL INTENSITY                                                                                          V+ = 2.7V
                                          SET TO 1/16                                                                                                SET TO 1/16
                                                                                                                                                                                                                                            0.20
                                                                                                                                                                                                                          VOL (V)                               V+ = 3.3V
                                                                                                                                                                                                                                            0.15
                                                                                             OUTPUT 2,                                                                                                         OUTPUT 2,                                                                 V+ = 3.6V
                                                                                             2V/div                                                                                                            2V/div                       0.10
                                          OUTPUT 2 INDIVIDUAL INTENSITY                                                                              OUTPUT 2 INDIVIDUAL INTENSITY
                                          SET TO 15/16                                                                                               SET TO 14/15                                                                           0.05
                                                                                                                                                                                                                                                                           ONLY ONE OUTPUT LOADED
                                                                                                                                                                                                                                               0
                                                          2ms/div                                                                                                    2ms/div                                                                        0         10        20         30      40        50
                                                                                                                                                                                                                                                                    SINK CURRENT (mA)
                                                         _______________________________________________________________________________________                                                                                                                                                      5


          8-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
                                                                                                                                       Pin Description
MAX7315
                           PIN
                                                          NAME                                                         FUNCTION
              QSOP/TSSOP             QFN
                                                         AD0, AD1,         Address Inputs. Sets device slave address. Connect to either GND, V+,
                1, 2, 3            15, 16, 1
                                                           AD2             SCL, or SDA to give 64 logic combinations. See Table 1.
               4–7, 9–12           2–5, 7–10              P0–P7            Input/Output Ports. P0–P7 are open-drain I/Os rated at 5.5V, 50mA.
                   8                   6                   GND             Ground. Do not sink more than 190mA into the GND pin.
                                                                           Output Port. Open-drain output rated at 7.0V, 50mA. Configurable as
                  13                  11                  INT/O8
                                                                           interrupt output or general-purpose output.
                  14                  12                   SCL             I2C-Compatible Serial Clock Input
                  15                  13                   SDA             I2C-Compatible Serial Data I/O
                                                                           Positive Supply Voltage. Bypass V+ to GND with a 0.047µF ceramic
                  16                  14                    V+
                                                                           capacitor
                   —                 PAD             Exposed pad           Exposed Pad on Package Underside. Connect to GND.
                                           DATA FROM
                                       SHIFT REGISTER
                                                          CONFIGURATION                                                OUTPUT PORT
                                                            REGISTER                                                   REGISTER DATA
                                           DATA FROM
                                                             D    Q
                                       SHIFT REGISTER                        OUTPUT
                                                                  FF          PORT
                                               WRITE                        REGISTER
                                       CONFIGURATION         CK        Q     D    Q
                                               PULSE
                                                                                 FF
                                           WRITE PULSE                      CK        Q
                                                                                                                       I/O PIN
                                                                                                                  Q2
                                                                                 INPUT PORT                            GND
                                                                                  REGISTER
                                                                                                                       INPUT PORT
                                                                                   D    Q
                                                                                                                       REGISTER DATA
                                                                                           FF
                                                                                                                       TO INT
                                           READ PULSE                                 CK        Q
          Figure 1. Simplified Schematic of I/O Ports
                                    Functional Overview                                             supply voltage. The MAX7315 is rated for a ground cur-
                                                                                                    rent of 190mA, allowing all nine outputs to sink 20mA at
          The MAX7315 is a general-purpose input/output (GPIO)
                                                                                                    the same time. Figure 1 shows the output structure of
          peripheral that provides eight I/O ports, P0–P7, con-
                                                                                                    the MAX7315. The ports default to inputs on power-up.
          trolled through an I2C-compatible serial interface. A 9th
          output-only port, INT/O8, can be configured as an inter-                                          Port Inputs and Transition Detection
          rupt output or as a general-purpose output port. All out-                                 An input ports register reflects the incoming logic levels
          put ports sink loads up to 50mA connected to external                                     of the port pins, regardless of whether the pin is
          supplies up to 5.5V, independent of the MAX7315’s                                         defined as an input or an output. Reading the input
          6   _______________________________________________________________________________________


          8-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
ports register latches the current-input logic level of the                         PWM intensity control uses a 4-bit master control and 4
                                                                                                                                                     MAX7315
affected eight ports. Transition detection allows all ports                         bits of individual control per output (Tables 13, 14). The
configured as inputs to be monitored for changes in                                 4-bit master control provides 16 levels of overall intensi-
their logic status. The action of reading the input ports                           ty control, which applies to all PWM-enabled output
register samples the corresponding 8 port bits’ input                               ports. The master control sets the maximum pulse width
condition. This sample is continuously compared with                                from 1/15 to 15/15 of the PWM time period. The individ-
the actual input conditions. A detected change in input                             ual settings comprise a 4-bit number further reducing
condition causes the INT/O8 interrupt output to go low,                             the duty cycle to be from 1/16 to 15/16 of the time win-
if configured as an interrupt output. The interrupt is                              dow set by the master control.
cleared either automatically if the changed input returns                           For applications requiring the same PWM setting for all
to its original state, or when the input ports register is                          output ports, a single global PWM control can be used
read.                                                                               instead of all the individual controls to simplify the con-
The INT/O8 pin can be configured as either an interrupt                             trol software and provide 240 steps of intensity control
output or as a 9th output port with the same static or                              (Tables 10 and 13).
blink controls as the other eight ports (Table 4).
                                                                                                                                     Standby Mode
        Port Output Control and LED Blinking                                        When the serial interface is idle and the PWM intensity
The blink phase 0 register sets the output logic levels of                          control is unused, the MAX7315 automatically enters
the eight ports P0–P7 (Table 8). This register controls                             standby mode. If the PWM intensity control is used, the
the port outputs if the blink function is disabled. A dupli-                        operating current is slightly higher because the internal
cate register, the blink phase 1 register, is also used if                          PWM oscillator is running. When the serial interface is
the blink function is enabled (Table 9). In blink mode,                             active, the operating current also increases because
the port outputs can be flipped between using the blink                             the MAX7315, like all I2C slaves, has to monitor every
phase 0 register and the blink phase 1 register using                               transmission.
software control (the blink flip flag in the configuration
register) (Table 4).                                                                                                     Serial Interface
                                     PWM Intensity Control                                                                  Serial Addressing
The MAX7315 includes an internal oscillator, nominally                              The MAX7315 operates as a slave that sends and
32kHz, to generate PWM timing for LED intensity con-                                receives data through an I2C-compatible 2-wire inter-
trol. PWM intensity control can be enabled on an out-                               face. The interface uses a serial data line (SDA) and a
put-by-output basis, allowing the MAX7315 to provide                                serial clock line (SCL) to achieve bidirectional commu-
any mix of PWM LED drives and glitch-free logic out-                                nication between master(s) and slave(s). A master (typ-
puts (Table 10). PWM can be disabled entirely, in which                             ically a microcontroller) initiates all data transfers to and
case all output ports are static and the MAX7315 oper-                              from the MAX7315 and generates the SCL clock that
ating current is lowest because the internal oscillator is                          synchronizes the data transfer (Figure 2).
turned off.                                                                         The MAX7315 SDA line operates as both an input and
                                                                                    an open-drain output. A pullup resistor, typically 4.7kΩ,
                                                                                    is required on SDA. The MAX7315 SCL line operates
            SDA
                                                                          tSU,STA                                             tBUF
                                                 tSU,DAT                                    tHD,STA
                                     tLOW
                                                                tHD,DAT                                     tSU,STO
             SCL                                  tHIGH
               tHD,STA
                                            tR             tF
                   START CONDITION                                        REPEATED START CONDITION                      STOP           START
                                                                                                                      CONDITION      CONDITION
Figure 2. 2-Wire Serial Interface Timing Details
                         _______________________________________________________________________________________                                 7


          8-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          only as an input. A pullup resistor, typically 4.7kΩ, is                                 from high to low while SCL is high. When the master
MAX7315
          required on SCL if there are multiple masters on the 2-                                  has finished communicating with the slave, it issues a
          wire interface, or if the master in a single-master system                               STOP (P) condition by transitioning SDA from low to
          has an open-drain SCL output.                                                            high while SCL is high. The bus is then free for another
          Each transmission consists of a START condition                                          transmission (Figure 3).
          (Figure 3) sent by a master, followed by the MAX7315                                                                             Bit Transfer
          7-bit slave address plus R/W bit, a register address                                     One data bit is transferred during each clock pulse.
          byte, one or more data bytes, and finally a STOP condi-                                  The data on SDA must remain stable while SCL is high
          tion (Figure 3).                                                                         (Figure 4).
                                      Start and Stop Conditions                                                                             Acknowledge
          Both SCL and SDA remain high when the interface is                                       The acknowledge bit is a clocked 9th bit that the recipi-
          not busy. A master signals the beginning of a transmis-                                  ent uses to handshake receipt of each byte of data
          sion with a START (S) condition by transitioning SDA                                     (Figure 5). Thus, each byte transferred effectively
                                                                                                   requires 9 bits. The master generates the 9th clock
                                                                                                   pulse, and the recipient pulls down SDA during the
              SDA                                                                                  acknowledge clock pulse so the SDA line is stable low
                                                                                                   during the high period of the clock pulse. When the
              SCL
                        S                                                              P           master is transmitting to the MAX7315, the device gen-
                      START                                                         STOP           erates the acknowledge bit because the MAX7315 is
                    CONDITION                                                     CONDITION        the recipient. When the MAX7315 is transmitting to the
                                                                                                   master, the master generates the acknowledge bit
          Figure 3. Start and Stop Conditions                                                      because the master is the recipient.
                                                                                                                                           Slave Address
                                                                                                   The MAX7315 has a 7-bit long slave address (Figure 6).
              SDA                                                                                  The eighth bit following the 7-bit slave address is the
                                                                                                   R/W bit. The R/W bit is low for a write command, high
              SCL
                                                                                                   for a read command.
                                                                                                   The slave address bits A6 through A0 are selected by
                            DATA LINE STABLE; CHANGE OF DATA                                       the address inputs AD0, AD1, and AD2. These pins can
                               DATA VALID        ALLOWED                                           be connected to GND, V+, SDA, or SCL. The MAX7315
                                                                                                   has 64 possible slave addresses (Table 1) and, there-
          Figure 4. Bit Transfer                                                                   fore, a maximum of 64 MAX7315 devices can be con-
                                                                                                   trolled independently from the same interface.
                                                                    CLOCK PULSE
                                                                                                               Message Format for Writing the MAX7315
                              START
                            CONDITION                          FOR ACKNOWLEDGE                     A write to the MAX7315 comprises the transmission of
                                                                                                   the MAX7315’s slave address with the R/W bit set to
                        SCL               1            2                8          9
                                                                                                   zero, followed by at least 1 byte of information. The first
                   SDA BY                                                                          byte of information is the command byte. The command
              TRANSMITTER                                                                          byte determines which register of the MAX7315 is to be
                      SDA BY                                                                       written to by the next byte, if received (Table 2). If a
                    RECEIVER    S                                                                  STOP condition is detected after the command byte is
                                                                                                   received, then the MAX7315 takes no further action
          Figure 5. Acknowledge                                                                    beyond storing the command byte.
                      SDA            A6           A5               A4             A3          A2           A1          A0         R/W         ACK
                                    MSB                                                                                LSB
                      SCL
          Figure 6. Slave Address
          8     _______________________________________________________________________________________


          8-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
Table 1. MAX7315 I2C Slave Address Map
                                                                                                          MAX7315
                                                              DEVICE ADDRESS
  PIN AD2   PIN AD1    PIN AD0
                                     A6        A5        A4         A3         A2     A1        A0
   GND       SCL         GND          0         0        1          0          0       0         0
   GND       SCL          V+          0         0        1          0          0       0         1
   GND       SDA         GND          0         0        1          0          0       1         0
   GND       SDA          V+          0         0        1          0          0       1         1
    V+       SCL         GND          0         0        1          0          1       0         0
    V+       SCL          V+          0         0        1          0          1       0         1
    V+       SDA         GND          0         0        1          0          1       1         0
    V+       SDA          V+          0         0        1          0          1       1         1
   GND       SCL         SCL          0         0        1          1          0       0         0
   GND       SCL         SDA          0         0        1          1          0       0         1
   GND       SDA         SCL          0         0        1          1          0       1         0
   GND       SDA         SDA          0         0        1          1          0       1         1
    V+       SCL         SCL          0         0        1          1          1       0         0
    V+       SCL         SDA          0         0        1          1          1       0         1
    V+       SDA         SCL          0         0        1          1          1       1         0
    V+       SDA         SDA          0         0        1          1          1       1         1
   GND       GND         GND          0         1        0          0          0       0         0
   GND       GND          V+          0         1        0          0          0       0         1
   GND        V+         GND          0         1        0          0          0       1         0
   GND        V+          V+          0         1        0          0          0       1         1
    V+       GND         GND          0         1        0          0          1       0         0
    V+       GND          V+          0         1        0          0          1       0         1
    V+        V+         GND          0         1        0          0          1       1         0
    V+        V+          V+          0         1        0          0          1       1         1
   GND       GND         SCL          0         1        0          1          0       0         0
   GND       GND         SDA          0         1        0          1          0       0         1
   GND        V+         SCL          0         1        0          1          0       1         0
   GND        V+         SDA          0         1        0          1          0       1         1
    V+       GND         SCL          0         1        0          1          1       0         0
    V+       GND         SDA          0         1        0          1          1       0         1
    V+        V+         SCL          0         1        0          1          1       1         0
    V+        V+         SDA          0         1        0          1          1       1         1
            _______________________________________________________________________________________   9


          8-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          Table 1. MAX7315 I2C Slave Address Map (continued)
MAX7315
                                                                              DEVICE ADDRESS
               PIN AD2     PIN AD1      PIN AD0
                                                     A6        A5        A4         A3         A2        A1   A0
                SCL          SCL         GND          1         0         1         0          0         0    0
                SCL          SCL          V+          1         0         1         0          0         0    1
                SCL          SDA         GND          1         0         1         0          0         1    0
                SCL          SDA          V+          1         0         1         0          0         1    1
                SDA          SCL         GND          1         0         1         0          1         0    0
                SDA          SCL          V+          1         0         1         0          1         0    1
                SDA          SDA         GND          1         0         1         0          1         1    0
                SDA          SDA          V+          1         0         1         0          1         1    1
                SCL          SCL         SCL          1         0         1         1          0         0    0
                SCL          SCL         SDA          1         0         1         1          0         0    1
                SCL          SDA         SCL          1         0         1         1          0         1    0
                SCL          SDA         SDA          1         0         1         1          0         1    1
                SDA          SCL         SCL          1         0         1         1          1         0    0
                SDA          SCL         SDA          1         0         1         1          1         0    1
                SDA          SDA         SCL          1         0         1         1          1         1    0
                SDA          SDA         SDA          1         0         1         1          1         1    1
                SCL         GND          GND          1         1         0         0          0         0    0
                SCL         GND           V+          1         1         0         0          0         0    1
                SCL          V+          GND          1         1         0         0          0         1    0
                SCL          V+           V+          1         1         0         0          0         1    1
                SDA         GND          GND          1         1         0         0          1         0    0
                SDA         GND           V+          1         1         0         0          1         0    1
                SDA          V+          GND          1         1         0         0          1         1    0
                SDA          V+           V+          1         1         0         0          1         1    1
                SCL         GND          SCL          1         1         0         1          0         0    0
                SCL         GND          SDA          1         1         0         1          0         0    1
                SCL          V+          SCL          1         1         0         1          0         1    0
                SCL          V+          SDA          1         1         0         1          0         1    1
                SDA         GND          SCL          1         1         0         1          1         0    0
                SDA         GND          SDA          1         1         0         1          1         0    1
                SDA          V+          SCL          1         1         0         1          1         1    0
                SDA          V+          SDA          1         1         0         1          1         1    1
          10    ______________________________________________________________________________________


          8-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
                                                                                                                                                                       MAX7315
                                    COMMAND BYTE IS STORED ON RECEIPT OF
                                                                               D15   D14   D13    D12        D11    D10     D9    D8
                                                         STOP CONDITION
                                           ACKNOWLEDGE FROM MAX7315
                   S                     SLAVE ADDRESS               0     A                     COMMAND BYTE                               A        P
                                                              R/W                                     ACKNOWLEDGE FROM MAX7315
Figure 7. Command Byte Received
                                                                     ACKNOWLEDGE FROM MAX7315                         ACKNOWLEDGE FROM MAX7315
            HOW COMMAND BYTE AND DATA BYTE MAP INTO
                                                          D15 D14 D13 D12 D11 D10    D9    D8           D7     D6   D5     D4    D3    D2       D1   D0
                               MAX7315'S REGISTERS
                         ACKNOWLEDGE FROM MAX7315
        S                SLAVE ADDRESS          0     A              COMMAND BYTE                 A                       DATA BYTE                       A   P
                                                                                                                           1
                                          R/W                                                                            BYTE
                                                                                                             AUTOINCREMENT MEMORY ADDRESS
Figure 8. Command and Single Data Byte Received
                                                                     ACKNOWLEDGE FROM MAX7315                         ACKNOWLEDGE FROM MAX7315
            HOW COMMAND BYTE AND DATA BYTE MAP INTO
                                                          D15 D14 D13 D12 D11 D10    D9    D8           D7     D6   D5     D4    D3    D2       D1   D0
                               MAX7315'S REGISTERS
                         ACKNOWLEDGE FROM MAX7315
        S                SLAVE ADDRESS          0     A              COMMAND BYTE                 A                       DATA BYTE                       A   P
                                                                                                                           N
                                          R/W                                                                           BYTES
                                                                                                             AUTOINCREMENT MEMORY ADDRESS
Figure 9. n Data Bytes Received
Any bytes received after the command byte are data                              tive bytes from the MAX7315 with the first data byte
bytes. The first data byte goes into the internal register                      being read from the register addressed by the initial-
of the MAX7315 selected by the command byte (Figure                             ized command byte. When performing read-after-write
8). If multiple data bytes are transmitted before a STOP                        verification, remember to reset the command byte’s
condition is detected, these bytes are generally stored                         address because the stored command byte address
in subsequent MAX7315 internal registers because the                            has been autoincremented after the write (Table 2). A
command byte address autoincrements (Table 2). A                                diagram of a read from the input ports register is shown
diagram of a write to the output ports registers (blink                         in Figure 10 reflecting the states of the ports.
phase 0 register or blink phase 1 register) is given in
Figure 10.
                                                                                                      Operation with Multiple Masters
                                                                                If the MAX7315 is operated on a 2-wire interface with
                          Message Format for Reading                            multiple masters, a master reading the MAX7315 should
The MAX7315 is read using the MAX7315’s internally                              use a repeated start between the write, which sets the
stored command byte as an address pointer the same                              MAX7315’s address pointer, and the read(s) that takes
way the stored command byte is used as an address                               the data from the location(s) (Table 2). This is because it
pointer for a write. The pointer autoincrements after                           is possible for master 2 to take over the bus after master
each data byte is read using the same rules as for a                            1 has set up the MAX7315’s address pointer but before
write (Table 2). Thus, a read is initiated by first configur-                   master 1 has read the data. If master 2 subsequently
ing the MAX7315’s command byte by performing a                                  changes the MAX7315’s address pointer, then master
write (Figure 7). The master can now read n consecu-                            1’s delayed read can be from an unexpected location.
                        ______________________________________________________________________________________                                                    11


          8-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
MAX7315
                WRITE TO OUTPUT PORTS REGISTERS (BLINK PHASE 0 REGISTERS/BLINK PHASE 1 REGISTERS)
                 SCL      1    2     3   4     5   6   7    8   9
                              SLAVE ADDRESS                         COMMAND BYTE
                 SDA S A6 A5 A4 A3 A2 A1 A0                 0   A     0    0    0    0    0      0   0    1   A MSB         DATA1       LSB   A MSB         DATA2              LSB A   P
                       START CONDITION                     R/W ACKNOWLEDGE FROM SLAVE                         ACKNOWLEDGE FROM SLAVE          ACKNOWLEDGE FROM SLAVE                STOP
                                                                                                                                                                                  CONDITION
               P7–P0                                                                                                                                       DATA1 VALID              DATA2 VALID
                                                                                                                                                    tDV                  tDV
                READ FROM INPUT PORTS REGISTERS
                SCL       1    2     3   4     5   6   7    8   9
                                     SLAVE ADDRESS                        COMMAND BYTE
                SDA S A6 A5 A4 A3 A2 A1 A0 1                    A MSB               DATA1                LSB A MSB           DATA4       LSB NA P
                                                                                                                                                      STOP CONDITION
                       START CONDITION                     R/W ACKNOWLEDGE FROM SLAVE                         ACKNOWLEDGE FROM MASTER         NO ACKNOWLEDGE FROM
                                                                                                                                              MASTER
               P7–P0                     DATA1                       DATA2               DATA3                                DATA4
                                                                         tDH                                      tDS
                INTERRUPT VALID/RESET
                 SCL      1    2     3   4     5   6   7    8   9
                                   SLAVE ADDRESS                      COMMAND BYTE
                 SDA S A6 A5 A4 A3 A2 A1 A0 1                   A MSB               DATA2                LSB A MSB           DATA4       LSB NA P
                                                                                                                                                    STOP CONDITION
                       START CONDITION                     R/W ACKNOWLEDGE FROM SLAVE                         ACKNOWLEDGE FROM MASTER         NO ACKNOWLEDGE FROM
                                                                                                                                              MASTER
               P7–P0          DATA1                                                 DATA2                                   DATA3
                 INT
                                         tIV                              tIR tIV                                     tIR
          Figure 10. Read, Write, and Interrupt Timing Diagrams
                       Command Address Autoincrementing                                                                                             Detailed Description
          The command address stored in the MAX7315 circu-
          lates around grouped register functions after each data                                                                                                      Initial Power-Up
          byte is written or read (Table 2).                                                                           On power-up all control registers are reset and the
                                                                                                                       MAX7315 enters standby mode (Table 3). Power-up
                                                                               Device Reset                            status makes all ports into inputs and disables both the
          If a device reset input is needed, consider the                                                              PWM oscillator and blink functionality.
          MAX7316. The MAX7316 includes a RST input, which
          clears any transaction to or from the MAX7316 on the                                                                                            Configuration Register
          serial interface and configures the internal registers to                                                    The configuration register is used to configure the PWM
          the same state as a power-up reset.                                                                          intensity mode, interrupt, and blink behavior, operate
                                                                                                                       the INT/O8 output, and read back the interrupt status
                                                                                                                       (Table 4).
          12     ______________________________________________________________________________________


          8-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
Table 2. Register Address Map
                                                                                                                                 MAX7315
                                                          ADDRESS CODE                          AUTOINCREMENT
                  REGISTER
                                                              (HEX)                                ADDRESS
                Read input ports                               0x00                              0x00 (no change)
             Blink phase 0 outputs                             0x01                              0x01 (no change)
               Ports configuration                             0x03                              0x03 (no change)
             Blink phase 1 outputs                             0x09                              0x09 (no change)
              Master, O8 intensity                             0x0E                              0x0E (no change)
                 Configuration                                 0x0F                              0x0F (no change)
            Outputs intensity P1, P0                           0x10                                    0x11
            Outputs intensity P3, P2                           0x11                                    0x12
            Outputs intensity P5, P4                           0x12                                    0x13
            Outputs intensity P7, P6                           0x13                                    0x10
                                     Ports Configuration       ization, so if all the ports are pulled to valid logic levels
The 8 I/O ports P0 through P7 can be configured to any         at that time an interrupt does not occur at power-up.
combination of inputs and outputs using the ports con-
                                                                                                            INT/O8 Output
figuration register (Table 5). The INT/O8 output can also
                                                               The INT/O8 output pin can be configured as either the
be configured as an extra general-purpose output
                                                               INT output that reflects the interrupt flag logic state or as
using the configuration register (Table 4).
                                                               a general-purpose output O8. When used as a general-
                                               Input Ports     purpose output, the INT/O8 pin has the same blink and
The input ports register is read only (Table 6). It reflect    PWM intensity control capabilities as the other ports.
the incoming logic levels of the ports, regardless of          Set the interrupt enable I bit in the configuration register
whether the port is defined as an input or an output by        to configure INT/O8 as the INT output (Table 4). Clear
the ports configuration register. Reading the input ports      interrupt enable to configure INT/O8 as the O8. O8
register latches the current-input logic level of the          logic state is set by the 2 bits O1 and O0 in the configu-
affected eight ports. A write to the input ports register is   ration register. O8 follows the rules for blinking selected
ignored.                                                       by the blink enable flag E in the configuration register. If
                                     Transition Detection      blinking is disabled, then interrupt output control O0
All ports configured as inputs are always monitored for        alone sets the logic state of the INT/O8 pin. If blinking is
changes in their logic status. The action of reading the       enabled, then both interrupt output controls O0 and O1
input ports register or writing to the configuration regis-    set the logic state of the INT/O8 pin according to the
ter samples the corresponding 8 port bits’ input condi-        blink phase. PWM intensity control for O8 is set by the 4
tion (Tables 4, 6). This sample is continuously                global intensity bits in the master, O8 intensity register
compared with the actual input conditions. A detected          (Table 13).
change in input condition causes an interrupt condition.                                                      Blink Mode
The interrupt is cleared either automatically if the           In blink mode, the output ports can be flipped between
changed input returns to its original state, or when the       using either the blink phase 0 register or the blink phase
input ports register is read, updating the compared            1 register. Flip control is by software control (the blink flip
data (Figure 10). Randomly changing a port from an             flag B in the configuration register) (Table 4). If hardware
output to an input may cause a false interrupt to occur if     flip control is needed, consider the MAX7316, which
the state of the input does not match the content of the       includes a BLINK input, as well as software control.
input ports register. The interrupt status is available as
the interrupt flag INT in the configuration register (Table    The blink function can be used for LED effects by pro-
4).                                                            gramming different display patterns in the two sets of
The input status of all ports is sampled immediately
after power-up as part of the MAX7315’s internal initial-
                   ______________________________________________________________________________________                 13


          8-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          Table 3. Power-Up Configuration
MAX7315
                                                                                              ADDRESS                   REGISTER DATA
               REGISTER FUNCTION                      POWER-UP CONDITION                       CODE
                                                                                               (HEX)
                                                                                                         D7   D6       D5          D4   D3          D2                D1     D0
            Blink phase 0 outputs P7–P0               High-impedance outputs                      0x01   1     1       1           1      1         1                 1          1
               Ports configuration P7–P0               Ports P7–P0 are inputs                     0x03   1     1       1           1      1         1                 1          1
            Blink phase 1 outputs P7–P0               High-impedance outputs                      0x09   1     1       1           1      1         1                 1          1
                                                     PWM oscillator is disabled;
                 Master, O8 intensity                                                             0x0E   0     0       0           0      1         1                 1          1
                                                      O8 is static logic output
                                                     INT/O8 is interrupt output;
                    Configuration                        blink is disabled;                       0x0F   0     0       0           0      1         1                 0          0
                                                     global intensity is enabled
               Outputs intensity P1, P0             P1, P0 are static logic outputs               0x10   1     1       1           1      1         1                 1          1
               Outputs Intensity P3, P2             P3, P2 are static logic outputs               0x11   1     1       1           1      1         1                 1          1
               Outputs intensity P5, P4             P5, P4 are static logic outputs               0x12   1     1       1           1      1         1                 1          1
               Outputs intensity P7, P6             P7, P6 are static logic outputs               0x13   1     1       1           1      1         1                 1          1
          Table 4. Configuration Register
                                                                    ADDRESS                                   REGISTER DATA
                            REGISTER                                 CODE
                                                                     (HEX)
                                                                                       D7          D6    D5     D4           D3          D2             D1                 D0
                                                                                      INTERRUPT
                                                                                                         INTERRUPT
                                                                                                                            INTERRUPT
                                                             R/W
                                                                                                                                                         BLINK FLIP
                                                                                                           OUTPUT                        GLOBAL                             BLINK
                       CONFIGURATION                                                                —
                                                                                                          CONTROL
                                                                                                                                        INTENSITY                          ENABLE
                                                                                        STATUS             AS GPO             ENABLE
                   Write device configuration                  0                                    X
                                                                                      INT                O1     O0             I          G              B                  E
                Read-back device configuration                 1                                    O
                            Disable blink                     —                         X           X    X         X          X           X               X                  0
                            Enable blink                      —                         X           X    X         X          X           X               X                  1
                                                              —        0x0F             X           X    X         X          X           X               0                  1
                   Flip blink register (see text)
                                                              —                         X           X    X         X          X           X               1                  1
          Disable global intensity control—intensity
          is set by registers 0x10–0x13 for ports P0
           through P7 when configured as outputs,
                                                              —                         X           X    X         X          X           0               X                 X
          and by D3–D7 of register 0x0E for INT/O8
             when INT/O8 pin is configured as an
                          output port
           Enable global intensity control—intensity
           for all ports configured as outputs is set         —                         X           X    X         X          X           1               X                 X
                   by D3–D0 of register 0x0E
          X = Don’t care.
          14    ______________________________________________________________________________________


          8-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
Table 4. Configuration register (continued)
                                                                                                                                                  MAX7315
                                                     ADDRESS                            REGISTER DATA
                  REGISTER                            CODE
                                                      (HEX)
                                                                D7         D6      D5     D4       D3          D2         D1           D0
                                                               INTERRUPT
                                                                                    INTERRUPT
                                                                                                  INTERRUPT
                                               R/W
                                                                                                                          BLINK FLIP
                                                                                      OUTPUT                   GLOBAL                   BLINK
            CONFIGURATION                                                  —
                                                                                     CONTROL
                                                                                                              INTENSITY                ENABLE
                                                                 STATUS               AS GPO        ENABLE
  Disable data change interrupt—INT/O8                                     X
                                               —               INT                 O1     O0         I          G         B             E
 output is controlled by the O0 and O1 bits                                O
  Enable data change interrupt—INT/O8
  output is controlled by port input data      —                 X         X       X       X        1           X          X            X
                  change
  INT/O8 output is low (blink is disabled)     —                 X         X       X       0        0           X          X             0
 INT/O8 output is high impedance (blink is
                                               —                 X         X       X       1        0           X          X             0
                 disabled)
  INT/O8 output is low during blink phase 0    —      0x0F       X         X       X       0        0           X          X             1
 INT/O8 output is high impedance during
                                               —                 X         X       X       1        0           X          X             1
             blink phase 0
  INT/O8 output is low during blink phase 1    —                 X         X       0       X        0           X          X             1
 INT/O8 output is high impedance during
                                               —                 X         X       1       X        0           X          X             1
             blink phase 1
  Read-back data change interrupt status
    —data change is not detected, and
                                                1                0         0       X       X        X           X          X            X
   INT/O8 output is high when interrupt
           enable (I bit) is set
 Read-back data change interrupt status
 —data change is detected, and INT/O8
                                                1                1         0       X       X        X           X          X            X
 output is low when interrupt enable (I bit)
                  is set
X = Don’t care.
output port registers, and using the software or hard-                phase 0 register or the blink phase 1 register (Table 7).
ware controls to flip between the patterns.                           The blink mode is disabled by clearing the blink enable
If the blink phase 1 register is written with 0xFF, then              flag E in the configuration register (Table 4). When blink
the BLINK input can be used as a hardware disable to,                 mode is disabled, the blink phase 0 register alone con-
for example, instantly turn off an LED pattern pro-                   trols the output ports.
grammed into the blink phase 0 register. This technique
can be further extended by driving the BLINK input with
                                                                                                  Blink Phase Registers
                                                                      When the blink function is disabled, the blink phase 0
a PWM signal to modulate the LED current to provide
                                                                      register sets the logic levels of the 8 ports (P0 through
fading effects.
                                                                      P7) when configured as outputs (Table 8). A duplicate
The blink mode is enabled by setting the blink enable                 register called the blink phase 1 register is also used if
flag E in the configuration register (Table 4). When blink            the blink function is enabled (Table 9). A logic high sets
mode is enabled, the state of the blink flip flag sets the            the appropriate output port high impedance, while a
phase, and the output ports are set by either the blink               logic low makes the port go low.
                     ______________________________________________________________________________________                                  15


          8-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          Table 5. Ports Configuration Register
MAX7315
                                                          ADDRESS                                 REGISTER DATA
                         REGISTER                   R/W    CODE
                                                           (HEX)
                                                                        D7         D6       D5      D4     D3        D2    D1       D0
                      Ports configuration
                                                     0
                    (1 = input, 0 = output)                 0x03        OP7       OP6      OP5      OP4    OP3       OP2   OP1     OP0
                Read-back ports configuration        1
          Table 6. Input Ports Register
                                                          ADDRESS                                 REGISTER DATA
                         REGISTER                   R/W    CODE
                                                           (HEX)
                                                                        D7         D6       D5      D4     D3        D2    D1       D0
                      Read input ports               1      0x00        IP7        IP6      IP5     IP4    IP3       IP2   IP1     IP0
          Reading a blink phase register reads the value stored           intensity settings from 1/16 through 16/16 (Table 14).
          in the register, not the actual port condition. The port        Figures 15, 16, and 17 show examples of individual
          output itself may or may not be at a valid logic level,         intensity control settings. The highest value an individ-
          depending on the external load connected.                       ual or global setting can be set to is 16/16. This setting
          The 9th output, O8, is controlled through 2 bits in the         forces the output to ignore the master control, and fol-
          configuration register, which provide the same static or        low the logic level set by the appropriate blink phase
          blink control as the other 8 output ports.                      register bit. The output becomes a glitch-free static out-
                                                                          put with no PWM.
                                         PWM Intensity Control
          The MAX7315 includes an internal oscillator, nominally             Using PWM Intensity Controls with Blink Disabled
          32kHz, to generate PWM timing for LED intensity con-            When blink is disabled (Table 7), the blink phase 0 reg-
          trol or other applications such as PWM trim DACs. PWM           ister specifies each output’s logic level during the PWM
          can be disabled entirely for all the outputs. In this case,     on-time (Table 8). The effect of setting an output’s blink
          all outputs are static and the MAX7315 operating cur-           phase 0 register bit to 0 or 1 is shown in Table 11. With
          rent is lowest because the internal PWM oscillator is           its output bit set to zero, an LED can be controlled with
          turned off.                                                     16 intensity settings from 1/16th duty through fully on,
          The MAX7315 can be configured to provide any combi-             but cannot be turned fully off using the PWM intensity
          nation of PWM outputs and glitch-free logic outputs.            control. With its output bit set to 1, an LED can be con-
          Each PWM output has an individual 4-bit intensity con-          trolled with 16 intensity settings from fully off through
          trol (Table 14). When all outputs are to be used with the       15/16th duty.
          same PWM setting, the outputs can be controlled
          together instead using the global intensity control
          (Table 13). Table 10 shows how to set up the MAX7315                Table 7. Blink Controls
          to suit a particular application.                                      BLINK             BLINK                    OUTPUT
                                                                                                              BLINK
                                                                                ENABLE              FLIP                   REGISTERS
                                                       PWM Timing                                           FUNCTION
                                                                                FLAG E            FLAG B                     USED
          The PWM control uses a 240-step PWM period, divided
          into 15 master intensity timeslots. Each master intensity                                                        Blink phase 0
                                                                                    0               X           Disabled
          timeslot is divided further into 16 PWM cycles (Figure 11).                                                         register
          The master intensity operates as a gate, allowing the indi-                                                      Blink phase 0
          vidual output settings to be enabled from 1 to 15 timeslots                               0
                                                                                                                              register
          per PWM period (Figures 12, 13, 14) (Table 13).                           1                            Enabled
                                                                                                                           Blink phase 1
          Each output’s individual 4-bit intensity control only                                     1
                                                                                                                              register
          operates during the number of timeslots gated by the
          master intensity. The individual controls provide 16                X = Don’t care.
          16   ______________________________________________________________________________________


          8-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
    Using PWM Intensity Controls with Blink Enabled                                          Output Level Translation
                                                                                                                                 MAX7315
When blink is enabled (Table 7), the blink phase 0 regis-         The open-drain output architecture allows the ports to
ter and blink phase 1 register specify each output’s logic        level translate the outputs to higher or lower voltages
level during the PWM on-time during the respective blink          than the MAX7315 supply. An external pullup resistor
phases (Tables 8 and 9). The effect of setting an output’s        can be used on any output to convert the high-imped-
blink phase X register bit to 0 or 1 is shown in Table 12.        ance logic-high condition to a positive voltage level.
LEDs can be flipped between either directly on and off,           The resistor can be connected to any voltage up to
or between a variety of high/low PWM intensities.                 5.5V. For interfacing CMOS inputs, a pullup resistor
                                                                  value of 220kΩ is a good starting point. Use a lower
                             Global/O8 Intensity Control          resistance to improve noise immunity, in applications
The 4 bits used for output O8’s PWM individual intensity          where power consumption is less critical, or where a
setting also double as the global intensity control (Table        faster rise time is needed for a given capacitive load.
13). Global intensity simplifies the PWM settings when
the application requires them all to be the same, such                           Compatibility with PCA9534 and
as for backlight applications, by replacing the 9 individ-                                           PCA9554(A)
ual settings with 1 setting. Global intensity is enabled          The MAX7315 is pin compatible and software compatible
with the global intensity flag G in the configuration reg-        with PCA9534, and its variants PCA9554 and PCA9554A.
ister (Table 4). When global PWM control is used, the 4           However, some PCA9534 and PCA9554(A) functions are
bits of master intensity and 4 bits of O8 intensity effec-        not implemented in the MAX7315, and the MAX7315's
tively combine to provide an 8 bit, 240-step intensity            PWM and blink functionality is not supported in the
control applying to all outputs.                                  PCA9534 and PCA9554(A). Software compatibility is
It is not possible to apply global PWM control to a sub-          clearly not 100%, but the MAX7315 was designed so the
set of the ports, and use the others as logic outputs. To         subset (omitted) features default to the same power-up
mix static logic outputs and PWM outputs, individual              behavior as the PCA9534 and PCA9554(A), and the
PWM control must be selected (Table 10).                          superset features do not use existing registers in a differ-
                                                                  ent way. In practice, many applications can use the
                Applications Information                          MAX7315 as a drop-in replacement for the PCA9534 or
                                                                  PCA9554(A) with no software change.
                                        Hot Insertion
I/O ports PO-P7, interrupt output INT/08, and serial                                                 Driving LED Loads
interface SDA, SCL, AD0-2 remain high impedance with              When driving LEDs, a resistor in series with the LED
up to 6V asserted on them when the MAX7315 is pow-                must be used to limit the LED current to no more than
ered down (V+ = 0V). The MAX7315 can therefore be                 50mA. Choose the resistor value according to the fol-
used in hot-swap applications.                                    lowing formula:
                                                                            RLED = (VSUPPLY - VLED - VOL) / ILED
Table 8. Blink Phase 0 Register
                                               ADDRESS                               REGISTER DATA
               REGISTER                  R/W    CODE
                                                (HEX)
                                                             D7        D6      D5      D4       D3      D2      D1      D0
          Write outputs phase 0           0
                                                 0x01        OP7      OP6      OP5     OP4     OP3     OP2     OP1      OP0
       Read-back outputs phase 0          1
Table 9. Blink Phase 1 Register
                                               ADDRESS                               REGISTER DATA
               REGISTER                  R/W    CODE
                                                (HEX)
                                                             D7        D6      D5      D4       D3      D2      D1      D0
          Write outputs phase 1           0
                                                 0x09        OP7      OP6      OP5     OP4     OP3     OP2     OP1      OP0
       Read-back outputs phase 1          1
                   ______________________________________________________________________________________                  17


          8-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          Table 10. PWM Application Scenarios
MAX7315
                                     APPLICATION                                                                                                               RECOMMENDED CONFIGURATION
                                                                                                                          Set the master, O8 intensity register 0x0E to any value from 0x00 to 0x0F.
          All outputs static without PWM                                                                                  The global intensity G bit in the configuration register is don't care.
                                                                                                                          The output intensity registers 0x10 through 0x13 are don't care.
                                                                                                                          Set the master, O8 intensity register 0x0E to any value from 0x10 to 0xFF.
                                                                                                                          Clear global intensity G bit to 0 in the configuration register to disable global intensity
          A mix of static and PWM outputs, with PWM
                                                                                                                          control.
          outputs using different PWM settings
                                                                                                                          For the static outputs, set the output intensity value to 0xF.
                                                                                                                          For the PWM outputs, set the output intensity value in the range 0x0 to 0xE.
          A mix of static and PWM outputs, with PWM                                                                       As above. Global intensity control cannot be used with a mix of static and PWM
          outputs all using the same PWM setting                                                                          outputs, so write the individual intensity registers with the same PWM value.
                                                                                                                          Set the master, O8 intensity register 0x0E to any value from 0x10 to 0xFF.
                                                                                                                          Set global intensity G bit to 1 in the configuration register to enable global intensity
          All outputs PWM using the same PWM
                                                                                                                          control.
          setting
                                                                                                                          The master, O8 intensity register 0x0E is the only intensity register used.
                                                                                                                          The output intensity registers 0x10 through 0x13 are don't care.
                                                                                                                            ONE PWM PERIOD IS 240 CYCLES OF THE 32kHz PWM
                                                                                                                             OSCILLATOR. A PWM PERIOD CONTAINS 15 MASTER
                                                                                                                                         INTENSITY TIMESLOTS
                                     14               15               1               2            3             4           5          6            7   8         9                 10           11           12           13       14        15             1             2
                                                  15 16 1                  2       3       4    5       6     7       8     9 10 11 12 13 14 15 16              1            2
                                                                                                        EACH MASTER INTENSITY
                                                                                                         TIMESLOT CONTAINS 16
                                                                                                            PWM CYCLES
          Figure 11. PWM Timing
                                                                                                                                                                    .
               14       15   1   2        3       4        5       6       7       8       9    10       11   12      13     14   15     1    2
                                                                                                                                                                        14       15        1   2        3   4        5   6        7   8    9   10    11   12       13   14       15   1   2
                                                                                                                                                  .
                                                                                                                                                                                                                                                                                              .
          Figure 12. Master Set to 1/15                                                                                                                       Figure 14. Master Set to 15/15
                    .
                14 15 1              2        3       4        5       6       7       8       9 10 11 12 13 14                        15 1       2
                                                                                                                                                      .
          Figure 13. Master Set to 14/15
          18        ______________________________________________________________________________________


          8-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
                                                                                                                                                                                                         MAX7315
                                    MASTER INTENSITY TIMESLOT                                                                  NEXT MASTER INTENSITY TIMESLOT
                   1    2   3   4    5   6    7   8       9 10 11 12 13 14 15 16                   1   2       3     4    5      6   7   8   9 10 11 12 13 14 15 16
Figure 15. Individual (or Global) Set to 1/16
                                    MASTER INTENSITY TIMESLOT                                                                  NEXT MASTER INTENSITY TIMESLOT
                   1    2   3   4    5    6   7   8       9 10 11 12 13 14 15 16                   1       2   3     4     5     6   7   8   9 10 11 12 13 14 15 16
Figure 16. Individual (or Global) Set to 15/16
                                                                 MASTER INTENSITY TIMESLOT CONTROL IS IGNORED
                   1    2   3   4    5    6   7       8    9 10 11 12 13 14 15 16                      1       2    3     4      5   6   7   8   9 10 11 12 13 14 15 16
Figure 17. Individual (or Global) Set to 16/16
Table 11. PWM Intensity Settings (Blink Disabled)
  OUTPUT          PWM DUTY CYCLE                            LED BEHAVIOR WHEN                                        PWM DUTY CYCLE                         LED BEHAVIOR WHEN
    (OR         OUTPUT BLINK PHASE 0                       OUTPUT BLINK PHASE 0                                    OUTPUT BLINK PHASE 0                    OUTPUT BLINK PHASE 0
  GLOBAL)         REGISTER BIT = 0                            REGISTER BIT = 0                                       REGISTER BIT = 1                         REGISTER BIT = 1
 INTENSITY                                                    (LED IS ON WHEN                                                                                 (LED IS ON WHEN
  SETTING                                                      OUTPUT IS LOW)                                                                                  OUTPUT IS LOW)
                LOW TIME            HIGH TIME                                                                      LOW TIME              HIGH TIME
     0x0            1/16                 15/16                Lowest PWM intensity                                       15/16               1/16               Highest PWM intensity
     0x1            2/16                 14/16                                                                           14/16               2/16
     0x2            3/16                 13/16                                                                           13/16               3/16
     0x3            4/16                 12/16                                                                           12/16               4/16
                                                                      ß Increasing PWM intensity                                                                       Increasing PWM intensity à
     0x4            5/16                 11/16                                                                           11/16               5/16
     0x5            6/16                 10/16                                                                           10/16               6/16
     0x6            7/16                 9/16                                                                            9/16                7/16
     0x7            8/16                 8/16                                                                            8/16                8/16
     0x8            9/16                 7/16                                                                            7/16                9/16
     0x9           10/16                 6/16                                                                            6/16                10/16
     0xA           11/16                 5/16                                                                            5/16                11/16
     0xB           12/16                 4/16                                                                            4/16                12/16
     0xC           13/16                 3/16                                                                            3/16                13/16
     0xD           14/16                 2/16                                                                            2/16                14/16
     0xE           15/16                 1/16                Highest PWM intensity                                       1/16                15/16              Lowest PWM intensity
                                                              Full intensity, no PWM                                Static high           Static high
     0xF         Static low          Static low                                                                                                                 LED off continuously
                                                              (LED on continuously)                                impedance             impedance
                       ______________________________________________________________________________________                                                                                       19


          8-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          where:                                                               outputs are turned on and off together. Do not use out-
MAX7315
          RLED is the resistance of the resistor in series with the            put O8 as part of a load-sharing design. O8 cannot be
          LED (Ω).                                                             switched at the same time as any of the other outputs
          VSUPPLY is the supply voltage used to drive the LED (V).             because it is controlled by a different register.
          VLED is the forward voltage of the LED (V).                          The MAX7315 must be protected from the negative
          VOL is the output low voltage of the MAX7315 when                    voltage transient generated when switching off induc-
          sinking ILED (V).                                                    tive loads, such as relays, by connecting a reverse-
          ILED is the desired operating current of the LED (A).                biased diode across the inductive load (Figure 18). The
                                                                               peak current through the diode is the inductive load’s
          For example, to operate a 2.2V red LED at 14mA from a                operating current.
          5V supply, RLED = (5 - 2.2 - 0.25) / 0.014 = 182Ω.
                                                                                                     Power-Supply Considerations
               Driving Load Currents Higher than 50mA                          The MAX7315 operates with a power-supply voltage of
          The MAX7315 can be used to drive loads drawing more                  2V to 3.6V. Bypass the power supply to GND with at
          than 50mA, like relays and high-current white LEDs, by               least 0.047µF as close to the device as possible. For
          paralleling outputs. Use at least one output per 50mA of             the QFN version, connect the underside exposed pad
          load current; for example, a 5V 330mW relay draws                    to GND.
          66mA and needs two paralleled outputs to drive it.
          Ensure that the paralleled outputs chosen are controlled                                               Chip Information
          by the same blink phase register, i.e., select outputs               TRANSISTOR COUNT: 17,611
          from the P0 through P7 range. This way, the paralleled
                                                                               PROCESS: BiCMOS
          Table 12. PWM Intensity Settings (Blink Enabled)
                                                                                         EXAMPLES OF LED BLINK BEHAVIOR
                         PWM DUTY CYCLE            PWM DUTY CYCLE                         (LED IS ON WHEN OUTPUT IS LOW)
            OUTPUT        OUTPUT BLINK              OUTPUT BLINK
              (OR           PHASE X                   PHASE X                       BLINK PHASE 0                       BLINK PHASE 0
            GLOBAL)      REGISTER BIT = 0          REGISTER BIT = 1                REGISTER BIT = 0                    REGISTER BIT = 1
           INTENSITY
            SETTING                                                                 BLINK PHASE 1                       BLINK PHASE 1
                          LOW          HIGH         LOW          HIGH
                          TIME         TIME         TIME         TIME              REGISTER BIT = 1                    REGISTER BIT = 0
               0x0        1/16         15/16        15/16         1/16
               0x1        2/16         14/16        14/16         2/16
               0x2        3/16         13/16        13/16         3/16
                                                                             Phase 0: LED on at low intensity    Phase 0: LED on at high intensity
               0x3        4/16         12/16        12/16         4/16
                                                                             Phase 1: LED on at high intensity   Phase 1: LED on at low intensity
               0x4        5/16         11/16        11/16         5/16
               0x5        6/16         10/16        10/16         6/16
               0x6        7/16         9/16          9/16         7/16
               0x7        8/16         8/16          8/16         8/16                Output is half intensity during both blink phases
               0x8        9/16         7/16          7/16         9/16
               0x9        10/16        6/16          6/16        10/16
               0xA        11/16        5/16          5/16        11/16
                                                                             Phase 0: LED on at high intensity   Phase 0: LED on at low intensity
               0xB        12/16        4/16          4/16        12/16
                                                                             Phase 1: LED on at low intensity    Phase 1: LED on at high intensity
               0xC        13/16        3/16          3/16        13/16
               0xD        14/16        2/16          2/16        14/16
               0xE        15/16        1/16          1/16        15/16
                                                   Static high Static high   Phase 0: LED on continuously        Phase 0: LED off continuously
               0xF      Static low   Static low
                                                  impedance impedance        Phase 1: LED off continuously       Phase 1: LED on continuously
          20    ______________________________________________________________________________________


          8-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
Table 13. Master, O8 Intensity Register
                                                                                                                            MAX7315
                                                     ADDRESS                       REGISTER DATA
                REGISTER                              CODE
                                                      (HEX)
                                               R/W             D7      D6     D5       D4    D3     D2     D1     D0
                                                               MSB                     LSB   MSB                  LSB
  MASTER AND GLOBAL INTENSITY
                                                                    MASTER INTENSITY               O8 INTENSITY
    Write master and global intensity           0
                                                               M3      M2     M1       M0    G3     G2     G1     G0
 Read back master and global intensity          1
 Master intensity duty cycle is 0/15 (off);
     internal oscillator is disabled;          —                0       0     0         0    —      —      —      —
  all outputs will be static with no PWM
    Master intensity duty cycle is 1/15        —                0       0     0         1    —      —      —      —
    Master intensity duty cycle is 2/15        —                0       0     1         0    —      —      —      —
    Master intensity duty cycle is 3/15        —                0       0     1         1    —      —      —      —
                     —                         —               —       —      —        —     —      —      —      —
   Master intensity duty cycle is 13/15        —      0X0E      1       1     0         1    —      —      —      —
   Master intensity duty cycle is 14/15        —                1       1     1         0    —      —      —      —
 Master intensity duty cycle is 15/15 (full)   —                1       1     1         1    —      —      —      —
      O8 intensity duty cycle is 1/16          —               —       —      —        —      0      0     0       0
      O8 intensity duty cycle is 2/16          —               —       —      —        —      0      0     0       1
      O8 intensity duty cycle is 3/16          —               —       —      —        —      0      0     1       0
                     —                         —               —       —      —        —     —      —      —      —
     O8 intensity duty cycle is 14/16          —               —       —      —        —      1      1     0       1
     O8 intensity duty cycle is 15/16          —               —       —      —        —      1      1     1       0
     O8 intensity duty cycle is 16/16
                                               —               —       —      —        —      1      1     1       1
        (static output, no PWM)
______________________________________________________________________________________________________                 21


          8-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
          Table 14. Output Intensity Registers
MAX7315
                                                             ADDRESS                           REGISTER DATA
                            REGISTER                          CODE
                                                         R/W  (HEX)
                                                                       D7        D6      D5       D4       D3       D2       D1     D0
                                                                       MSB                       LSB      MSB                       LSB
                   OUTPUTS P1, P0 INTENSITY
                                                                            OUTPUT P1 INTENSITY                 OUTPUT P0 INTENSITY
                    Write output P1, P0 intensity        0
                                                                       P1I3     P1I2    P1I1     P1I0     P0I3      P0I2    P0I1    P0I0
                 Read back output P1, P0 intensity       1
               Output P1 intensity duty cycle is 1/16    —              0        0        0        0       —         —       —      —
               Output P1 intensity duty cycle is 2/16    —              0        0        0        1       —         —       —      —
               Output P1 intensity duty cycle is 3/16    —              0        0        1        0       —         —       —      —
                                 —                       —             —         —       —        —        —         —       —      —
               Output P1 intensity duty cycle is 14/16   —              1        1        0        1       —         —       —      —
               Output P1 intensity duty cycle is 15/16   —              1        1        1        0       —         —       —      —
               Output P1 intensity duty cycle is 16/16        0X10
                                                         —              1        1        1        1       —         —       —      —
                   (static logic level, no PWM)
               Output P0 intensity duty cycle is 1/16    —             —         —       —        —         0        0        0       0
               Output P0 intensity duty cycle is 2/16    —             —         —       —        —         0        0        0       1
               Output P0 intensity duty cycle is 3/16    —             —         —       —        —         0        0        1       0
                                 —                       —             —         —       —        —        —         —       —      —
               Output P0 intensity duty cycle is 14/16   —             —         —       —        —         1        1        0       1
               Output P0 intensity duty cycle is 15/16   —             —         —       —        —         1        1        1       0
               Output P0 intensity duty cycle is 16/16
                                                         —             —         —       —        —         1        1        1       1
                   (static logic level, no PWM)
                                                                       MSB                       LSB      MSB                       LSB
                   OUTPUTS P3, P2 INTENSITY
                                                                            OUTPUT P3 INTENSITY                 OUTPUT P2 INTENSITY
                                                               0x11
                    Write output P3, P2 intensity        0
                                                                       P3I3     P3I2    P3I1     P3I0     P2I3      P2I2    P2I1    P2I0
                 Read back output P3, P2 intensity       1
                                                                       MSB                       LSB      MSB                       LSB
                   OUTPUTS P5, P4 INTENSITY
                                                                            OUTPUT P5 INTENSITY                 OUTPUT P4 INTENSITY
                                                               0x12
                    Write output P5, P4 intensity        0
                                                                       P5I3     P5I2    P5I1     P5I0     P4I3      P4I2    P4I1    P4I0
                 Read back output P5, P4 intensity       1
                                                                       MSB                       LSB      MSB                       LSB
                   OUTPUTS P7, P6 INTENSITY
                                                                            OUTPUT P7 INTENSITY                 OUTPUT P6 INTENSITY
                                                               0x13
                    Write output P7, P6 intensity        0
                                                                       P7I3     P7I2    P7I1     P7I0     P6I3      P6I2    P6I1    P6I0
                 Read back output P7, P6 intensity       1
                     OUTPUT O8 INTENSITY                                        See the master, O8 intensity register (Table 13).
          22     ______________________________________________________________________________________


          8-Port I/O Expander with LED Intensity
 Control, Interrupt, and Hot-Insertion Protection
Table 15. MAX7311, PCA9535, and PCA9555 Register Compatibility
                                                                                                                                                                 MAX7315
     PCA9534,                                                                                 MAX7311, PCA9535,
    PCA9554(A)                ADDRESS           MAX7313 IMPLEMENTATION                            PCA9555                              COMMENTS
    REGISTER                                                                                  IMPLEMENTATION
Inputs                            0x00     Inputs registers                                  Implemented                       Same functionality
Outputs                           0x01     Blink phase 0 registers                           Implemented                       Same functionality
                                                                                             Implemented;                      If polarity inversion feature
                                           Not implemented; register writes are
Polarity inversion                0x02                                                       power-up default is               is unused, MAX7313
                                           ignored; register reads return 0x00
                                                                                             0x00                              defaults to correct state
Configuration                     0x03     Ports configuration registers                     Not implemented                   Same functionality
No registers                      0x0B     Blink phase 1 registers                           Not implemented
No register                       0x0E     Master and global/O8 intensity register           Not implemented                   Power-up default disables
                                                                                                                               the blink and intensity
No register                       0x0F     Configuration register                            Not implemented                   (PWM) features
No registers                  0x10–0x13    Outputs intensity registers                       Not implemented
                     2V TO 3.6V                                                         Pin Configurations (continued)
                                                              5V              TOP VIEW
         0.047µF
                                                                                                   AD0 1                          16 V+
                        V+                P0                                                       AD1 2                          15 SDA
      µC
                                          P1                                                       AD2 3                          14 SCL
         SDA         SDA      MAX7315     P2     BAS16
                                          P3                                                           P0 4       MAX7315AEE      13 INT/O8
         SCL         SCL                                                                                          MAX7315AUE
                                          P4                                                           P1 5                       12 P7
                                          P5
           I/O       INT/O8                                                                            P2 6                       11 P6
                                          P6
                                          P7                                                           P3 7                       10 P5
                     AD0
                     AD1                                                                           GND 8                           9   P4
                     AD2
                                  GND
                                                                                                                  QSOP/TSSOP
                                                                                                 Typical Application Circuit
Figure 18. Diode-Protected Switching Inductive Load                                                                        5V
                                                                                                   3.3V
                                                                                   0.047µF
                                                                                                   V+                 P0
                                                                                  µC
                                                                                                                      P1
                                                                                     SDA         SDA      MAX7315     P2
                                                                                     SCL         SCL                  P3
                                                                                                                      P4                          INPUT 1
                                                                                                                      P5                          INPUT 2
                                                                                       I/O       INT/O8                            5V 3.3V
                                                                                                                      P6
                                                                                                 AD0                  P7
                                                                                                 AD1
                                                                                                 AD2                                              OUTPUT1
                                                                                                            GND
                                                                                                                                                  OUTPUT2
                        ______________________________________________________________________________________                                              23


          8-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
                                                                                                          Package Information
MAX7315
          (The package drawing(s) in this data sheet may not reflect the most current specifications. For the latest package outline information,
          go to www.maxim-ic.com/packages.)
                                                                                                                                               QSOP.EPS
          24   ______________________________________________________________________________________


           8-Port I/O Expander with LED Intensity
  Control, Interrupt, and Hot-Insertion Protection
                                                                                                                                            Package Information (continued)
                                                                                                                                                                                                                                                                MAX7315
(The package drawing(s) in this data sheet may not reflect the most current specifications. For the latest package outline information,
go to www.maxim-ic.com/packages.)
                                                                                                                                                                                                                                     12x16L QFN THIN.EPS
                                                                                                                                                                        (NE - 1) X e
                                                    MARKING                           E
                                                                            E/2
                                                                                                                                                                                                     D2/2
                                                                                                                                                  (ND - 1) X e
                                                             D/2                  AAAA                                                                 e
                                                     D                                                          CL                                                                                           D2
                                                                                                                                                           k
                                                                                                                                                                                                     b        0.10 M C A B
                                                                                     CL
                                                                                                                                                                  L                 E2/2
                                                                                                                                                                               E2
                                                                                                                                            C
                                                                                                                                            L                                                     C
                                                                                                                                                                                                  L
                                                              0.10 C                        0.08 C
                                                                                          A
                                                                                          A2
                                                                                          A1                                L                                                                                        L
                                                                                                                                            e                                                 e
                                                                                                                                                                                PACKAGE OUTLINE
                                                                                                                                                                                8, 12, 16L THIN QFN, 3x3x0.8mm
                                                                                                                                                                                                                             1
                                                                                                                                                                                                  21-0136                I       2
                        PKG               8L 3x3                          12L 3x3                     16L 3x3
                                                                                                                                                EXPOSED PAD VARIATIONS
                        REF.     MIN. NOM. MAX.                MIN. NOM. MAX.                  MIN. NOM. MAX.
                                                                                                                         PKG.                   D2                        E2
                         A       0.70      0.75     0.80       0.70         0.75     0.80      0.70     0.75     0.80    CODES                                                              PIN ID          JEDEC
                                                                                                                                     MIN.       NOM.   MAX.      MIN.   NOM.        MAX.
                         b       0.25      0.30     0.35           0.20     0.25     0.30      0.20     0.25     0.30
                                                                                                                         TQ833-1     0.25       0.70   1.25      0.25    0.70       1.25   0.35 x 45°       WEEC
                         D       2.90      3.00     3.10       2.90         3.00     3.10      2.90     3.00     3.10                                  1.25
                                                                                                                         T1233-1     0.95       1.10             0.95    1.10       1.25   0.35 x 45°       WEED-1
                         E       2.90      3.00      3.10      2.90         3.00     3.10      2.90     3.00      3.10
                                                                                                                         T1233-3     0.95       1.10   1.25      0.95    1.10       1.25   0.35 x 45°       WEED-1
                         e               0.65 BSC.                      0.50 BSC.                     0.50 BSC.
                                                                                                                         T1233-4     0.95       1.10   1.25      0.95    1.10       1.25   0.35 x 45°       WEED-1
                         L       0.35      0.55      0.75      0.45         0.55     0.65      0.30     0.40      0.50
                                                                                                                         T1633-2     0.95       1.10   1.25      0.95    1.10       1.25   0.35 x 45°       WEED-2
                         N                   8                               12                          16
                                                                                                                         T1633F-3    0.65       0.80   0.95      0.65    0.80       0.95   0.225 x 45°      WEED-2
                         ND                  2                               3                            4
                                                                                                                         T1633FH-3   0.65       0.80   0.95      0.65   0.80        0.95   0.225 x 45°      WEED-2
                        NE                   2                               3                            4
                                                                                                                         T1633-4     0.95       1.10   1.25      0.95    1.10       1.25   0.35 x 45°       WEED-2
                         A1          0     0.02      0.05           0       0.02     0.05       0       0.02      0.05
                        A2               0.20 REF                         0.20 REF                    0.20 REF           T1633-5     0.95       1.10   1.25      0.95    1.10       1.25   0.35 x 45°       WEED-2
                         k       0.25        -           -     0.25          -        -        0.25       -          -
                         NOTES:
                               1.    DIMENSIONING & TOLERANCING CONFORM TO ASME Y14.5M-1994.
                               2.    ALL DIMENSIONS ARE IN MILLIMETERS. ANGLES ARE IN DEGREES.
                               3.    N IS THE TOTAL NUMBER OF TERMINALS.
                               4.    THE TERMINAL #1 IDENTIFIER AND TERMINAL NUMBERING CONVENTION SHALL CONFORM TO
                                     JESD 95-1 SPP-012. DETAILS OF TERMINAL #1 IDENTIFIER ARE OPTIONAL, BUT MUST BE LOCATED
                                     WITHIN THE ZONE INDICATED. THE TERMINAL #1 IDENTIFIER MAY BE EITHER A MOLD OR
                                     MARKED FEATURE.
                               5.    DIMENSION b APPLIES TO METALLIZED TERMINAL AND IS MEASURED BETWEEN 0.20 mm AND 0.25 mm
                                     FROM TERMINAL TIP.
                                6.   ND AND NE REFER TO THE NUMBER OF TERMINALS ON EACH D AND E SIDE RESPECTIVELY.
                                7.   DEPOPULATION IS POSSIBLE IN A SYMMETRICAL FASHION.
                                8.   COPLANARITY APPLIES TO THE EXPOSED HEAT SINK SLUG AS WELL AS THE TERMINALS      .
                                9.   DRAWING CONFORMS TO JEDEC MO220 REVISION C.
                               10.   MARKING IS FOR PACKAGE ORIENTATION REFERENCE ONLY.
                               11.   NUMBER OF LEADS SHOWN ARE FOR REFERENCE ONLY.
                               12.   WARPAGE NOT TO EXCEED 0.10mm.
                                                                                                                                                                                PACKAGE OUTLINE
                                                                                                                                                                                8, 12, 16L THIN QFN, 3x3x0.8mm
                                                                                                                                                                                                                             2
                                                                                                                                                                                                  21-0136                I       2
                     ______________________________________________________________________________________                                                                                                                                                25


          8-Port I/O Expander with LED Intensity
          Control, Interrupt, and Hot-Insertion Protection
MAX7315
                                                                                           Package Information (continued)
          (The package drawing(s) in this data sheet may not reflect the most current specifications. For the latest package outline information,
          go to www.maxim-ic.com/packages.)
                                                                                                                                                                TSSOP4.40mm.EPS
                                                                                                                   PACKAGE OUTLINE, TSSOP 4.40mm BODY
                                                                                                                                                        1
                                                                                                                                21-0066           I         1
          Maxim cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim product. No circuit patent licenses are
          implied. Maxim reserves the right to change the circuitry and specifications without notice at any time.
          26 ____________________Maxim Integrated Products, 120 San Gabriel Drive, Sunnyvale, CA 94086 408-737-7600
          © 2005 Maxim Integrated Products                 Printed USA                         is a registered trademark of Maxim Integrated Products.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 MAX7315AEE+ MAX7315AEE+T MAX7315ATE+ MAX7315ATE+T MAX7315AUE+ MAX7315AUE+T
