MAX7317                                                      10-Port SPI-Interfaced I/O Expander with
                                                             Overvoltage and Hot-Insertion Protection
General Description                                              Benefits and Features
The MAX7317 serial-interfaced peripheral provides                ●● Industry-Standard 4-Wire Interface Simplifies I/O
microprocessors with 10 I/O ports rated to 7V. Each port            Ports Expansion Independent of Microprocessor
can be individually configured as either an open-drain              Architecture
output, or an overvoltage-protected Schmitt input.                  • High-Speed, 26MHz, SPI-/QSPI™-/MICROWIRE®-
The MAX7317 supports hot insertion. All port pins remain               Compatible Serial Interface
high impedance in power-down (V+ = 0V) with up to 8V                • 2.25V to 3.6V Operation
asserted on them.                                                ●● Protection Circuitry Ensures Robust Operation
The MAX7317 is available in 16-pin TQFN and QSOP                    • I/O Port Inputs Are Overvoltage Protected to 7V
packages and operates in the -40°C to +125°C range.                 • I/O Port Outputs Are 7V-Rated Open Drain
                                                                    • I/O Ports Support Hot Insertion
For a similar part with constant-current outputs and
8-bit PWM controls, refer to the MAX6966/MAX6967 data            ●● Low Power Consumption and Small Package Reduce
sheet.                                                              Board Size and Power-Supply Requirements
                                                                    • 0.7μA (typ), 1.9μA (max) Standby Current
Applications                                                        • 3mm x 3mm, 0.8mm High TQFN Package
●●   Portable Equipment
●●   Cellular Phones                                             Ordering Information
●●   White Goods
                                                                                                                   PIN-            TOP
●●   Industrial Controllers                                           PART            TEMP RANGE
                                                                                                                   PACKAGE        MARK
●●   System Monitoring
                                                                                                    16 TQFN-EP*
                                                                  MAX7317ATE+       -40°C to +125°C 3mm x 3mm x                   ACH
                                                                                                    0.8mm
QSPI is a trademark of Motorola, Inc.
MICROWIRE is a registered trademark of National                   MAX7317AEE+       -40°C to +125°C 16 QSOP                        —
Semiconductor Corp.
                                                                 +Denotes a lead(Pb)-free/RoHS-compliant package.
                                                                 *EP = Exposed pad.
Typical Application Circuit
                              +3.3V
                                                                 Pin Configurations
             µC
                                  MAX7317                                     TOP VIEW
                                                                                                  DOUT
              SCLK        SCLK
                                                                                                         P9   P8   P7
              MOSI        DIN
                                            P0                                                    12     11   10   9
              MISO        DOUT              P1
                                                                                         DIN 13                         8   P6
                                            P2
                  CS      CS                                                             V+ 14                          7   P5
                                            P3
                                                                                                   MAX7317ATE
                                            P4                                        SCLK 15                           6   GND
                                                 I/O PORTS
                                            P5
                                                                                         CS 16                          5   P4
                                            P6
                                            P7                                                +    1     2    3     4
                                            P8                                                    P0     P1   P2   P3
                                            P9
                                GND                                                                      TQFN
                                                                   Pin Configurations continued at end of data sheet.
19-3380; Rev 4; 4/15


MAX7317                                                                                         10-Port SPI-Interfaced I/O Expander with
                                                                                                 Overvoltage and Hot-Insertion Protection
Absolute Maximum Ratings
Voltage (with respect to GND)                                                                         Continuous Power Dissipation (TA = +70°C)
V+.............................................................................-0.3V to +4V               16-Pin TQFN (derate 14.7mW/°C above +70°C)....... 1176mW
SCLK, DIN, CS, DOUT................................-0.3V to (V+ + 0.3V)                                   16-Pin QSOP (derate 8.3mW/°C above +70°C)..........667mW
P_ ............................................................................-0.3V to +8V           Operating Temperature Range
DC Current into P_ .............................................................24mA                      (TMIN to TMAX).............................................. -40°C to +125°C
DC Current into DOUT........................................................10mA                      Junction Temperature.......................................................+150°C
Total GND Current.............................................................200mA                   Storage Temperature Range............................. -65°C to +150°C
                                                                                                      Lead Temperature (soldering, 10s).................................. +300°C
Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional operation of the device at these
or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to absolute maximum rating conditions for extended periods may affect
device reliability.
Electrical Characteristics
(Typical Operating Circuit, V+ = 2.25V to 3.6V, TA = TMIN to TMAX, unless otherwise noted. Typical values are at V+ = 3.3V, TA = +25°C.)
(Note 1)
                 PARAMETER                                SYMBOL                               CONDITIONS                                   MIN          TYP            MAX        UNITS
 Operating Supply Voltage                                      V+                                                                           2.25                        3.60           V
 Output Load External Supply
                                                              VEXT                                                                                                        7            V
 Voltage P0–P9
                                                                                                             TA = +25°C                                  0.70            1.5
 Standby Current                                                             All digital inputs at V+
                                                             ISTBY                                           TA = TMIN to +85°C                                          1.7          µA
 (Interface Idle)                                                            or GND
                                                                                                             TA = TMIN to TMAX                                           1.9
                                                                             fSCLK = 26MHz; other TA = +25°C                                              385           620
 Supply Current                                                 I+           digital inputs at V+ or         TA = TMIN to +85°C                                         680           µA
                                                                             GND; DOUT unloaded T = T
                                                                                                               A      MIN to TMAX                                       730
 Input High Voltage
                                                               VIH           P0–P9 output register set to 0x01                            0.7 x V+                                     V
 (P0–P9, DIN, SCLK, CS)
 Input Low Voltage
                                                               VIL           P0–P9 output register set to 0x01                                                       0.3 x V+          V
 (P0–P9, DIN, SCLK, CS)
 Input Leakage Current
                                                             IIH, IIL                                                                       -0.2                        +0.2          µA
 (P0–P9, DIN, SCLK, CS)
 Input Capacitance
                                                                             (Note 2)                                                                      10                         pF
 (P0–P9, DIN, SCLK, CS
 Output Low Voltage (P0–P9)                                 VOLP_            ISINK = 0.5mA, output register set to 0x00                                                  0.4           V
 Output Low Short-Circuit Current
                                                                             VOLPOUT = 5V                                                                10.8            20           mA
 (P0–P9)
 Output High Voltage (DOUT)                              VOHDOUT ISOURCE = -6mA                                                           V+ - 0.3V                                    V
 Output Low Voltage (DOUT)                                VOLDOUT ISINK = 6mA                                                                                            0.3           V
 Power-On Reset Voltage                                      VPOR                                                                             2                                        V
www.maximintegrated.com                                                                                                                                           Maxim Integrated │ 2


MAX7317                                                                    10-Port SPI-Interfaced I/O Expander with
                                                                           Overvoltage and Hot-Insertion Protection
Timing Characteristics
(Typical Operating Circuit, V+ = 2.25V to 3.6V, TA = TMIN to TMAX, unless otherwise noted. Typical values are at V+ = 3.3V, TA = +25°C.)
(Note 1)
            PARAMETER                   SYMBOL                              CONDITIONS                 MIN      TYP     MAX      UNITS
 SCLK Clock Period                          tCP                                                        38.4                        ns
 SCLK Pulse-Width High                      tCH                                                         19                         ns
 SCLK Pulse-Width Low                       tCL                                                         19                         ns
 CS Fall to SCLK Rise Setup Time           tCSS                                                         9.5                        ns
 SCLK Rise to CS Rise Hold Time            tCSH                                                         2.5                        ns
 DIN Setup Time                             tDS                                                         9.5                        ns
 DIN Hold Time                              tDH                                                         2.5                        ns
 Output Data Propagation Delay              tDO                                                                          19        ns
 DOUT Output Rise and Fall Times            tFT      CLOAD = 20pF (Note 2)                                               10        ns
 Minimum CS Pulse High                     tCSW                                                        38.4                        ns
Note 1: All parameters are tested at TA = +25°C. Specifications over temperature are guaranteed by design.
Note 2: Guaranteed by design.
MAX7317 Block Diagram
                                               MAX7317
                                                                         I/O REGISTER                    P0
                                                                                                         P1
                                                                                                         P2
                                                                                         I/O PORTS       P3
                                                                                                         P4
                              SCLK
                                CS                                                                       P5
                                                 4-WIRE SERIAL INTERFACE
                               DIN                                                                       P6
                              DOUT                                                                       P7
                                                                                                         P8
                                                                                                         P9
www.maximintegrated.com                                                                                            Maxim Integrated │ 3


MAX7317                                                                                                                              10-Port SPI-Interfaced I/O Expander with
                                                                                                                                     Overvoltage and Hot-Insertion Protection
Typical Operating Characteristics
(TA = +25°C, unless otherwise noted.)
                                         PORT SINK CURRENT                                                                  STANDBY CURRENT                                                                        SUPPLY CURRENT (I+)
                                          vs. PORT VOLTAGE                                                                   vs. TEMPERATURE                                                                        vs. TEMPERATURE
                          15                                                                                 1.0                                                                                    0.5
                                                  TA = -40°C          MAX7317 toc01                                                                          MAX7317 toc02                                                                      MAX7317 toc03
                                                                                                             0.9                                                                                             V+ = 3.3V              V+ = 3.6V
                          12                                                                                                                                                                        0.4
 PORT SINK CURRENT (mA)
                                                  TA = +25°C                                                                                     V+ = 3.6V
                                                                                      STANDBY CURRENT (µA)                                                                   STANDBY CURRENT (mA)
                                                   TA = +85°C                                                0.8
                           9                                                                                                         V+ = 3.3V                                                      0.3
                                                                                                             0.7         V+ = 2.7V
                                                   TA = +125°C
                           6                                                                                                                                                                        0.2
                                                                                                             0.6
                                                                                                                                                                                                                V+ = 2.7V
                           3                                                                                                            V+ = 2.25V                                                  0.1                           V+ = 2.25V
                                                                                                             0.5
                           0                                                                                 0.4                                                                                     0
                               0         2          4            6    8                                            -40 -25 -10 5 20 35 50 65 80 95 110 125                                                -40 -25 -10 5 20 35 50 65 80 95 110 125
                                             PORT VOLTAGE (V)                                                                 TEMPERATURE (°C)                                                                           TEMPERATURE (°C)
Pin Description
                                   PIN
                                                         NAME                                                                                           FUNCTION
          QSOP                           TQFN
                                                                     Serial-Clock Input. On SCLK’s rising edge, data shifts into the internal shift register. On
                          1               15             SCLK
                                                                     SCLK’s falling edge, data is clocked out of DOUT. SCLK is active only while CS is low.
                                                                     Chip-Select Input. Serial data is loaded into the shift register while CS is low. The most recent
                          2               16               CS
                                                                     16 bits of data latch on CS’s rising edge.
                                                                     I/O Ports. P0 to P9 can be configured as open-drain, current-sink outputs rated at 20mA
 3–7, 9–13 1–5, 7–11                                    P0–P9        maximum, or as CMOS inputs, or as open-drain outputs. Loads should be connected to a
                                                                     supply voltage no higher than 7V.
                          8                  6            GND        Ground
                                                                     Serial-Data Output. The data into DIN is valid at DOUT 15.5 clock cycles later. Use this pin to
                          14              12             DOUT
                                                                     daisy-chain several devices or allow data readback. Output is push-pull.
                                                                     Serial-Data Input. Data from DIN loads into the internal 16-bit shift register on SCLK’s rising
                          15              13              DIN
                                                                     edge.
                          16              14               V+        Positive Supply Voltage. Bypass V+ to GND with a 0.047µF ceramic capacitor.
                          —              PAD               EP        Exposed Pad on Package Underside. Connect to GND.
www.maximintegrated.com                                                                                                                                                                                                        Maxim Integrated │ 4


MAX7317                                                    10-Port SPI-Interfaced I/O Expander with
                                                           Overvoltage and Hot-Insertion Protection
Detailed Description                                         The 10 registers, 0x00 through 0x09, control an I/O port
The MAX7317 is a general-purpose input/output (GPIO)         each (Table 4). Four pseudo-register addresses, 0x0A
peripheral that provides 10 I/O ports, P0 to P9, con-        through 0x0D, allow groups of outputs to be set to the
trolled through a high-speed SPI-compatible serial           same value with a single command by writing the same
interface. The 10 I/O ports can be used as inputs or         data to multiple output registers.
open-drain outputs in any combination. Ports withstand       Serial Interface
7V independent of the MAX7317’s supply voltage whether
                                                             The MAX7317 communicates through an SPI-
used as inputs or outputs.
                                                             compatible 4-wire serial interface. The interface has
Figure 1 shows the I/O port structure of the MAX7317.        three inputs: clock (SCLK), chip select (CS), and data in
                                                             (DIN), and one output, data out (DOUT). CS must be
Register Structure
                                                             low to clock data into or out of the device, and DIN
The MAX7317 contains 10 internal registers, addressed        must be stable when sampled on the rising edge of
as 0x00–0x09, which control the peripheral (Table 2).        SCLK. DOUT is stable on the rising edge of SCLK.
Two further addresses, 0x0E and 0x0F, do not store
data but return the port input status when read. Four        SCLK and DIN can be used to transmit data to other
virtual addresses, 0x0A–0x0D, allow more than one            peripherals. The MAX7317 ignores all activity on SCLK
register to be written with the same data to simplify        and DIN except when CS is low.
software. The RAM register provides 1 byte of memory         Note that the SPI protocol expects DOUT to be high
that can be used for any purpose. The no-op address,         impedance when the MAX7317 is not being accessed;
0x20, causes no action when written or read, and is          DOUT on the MAX7317 is never high impedance. Go to
used as a dummy register when accessing one                  www.maximintegrated.com/an1879 for ways to convert
MAX7317 out of multiple cascaded devices.                    the MAX7317 to tri-state, if required.
Initial Power-Up                                             Control and Operation Using
On power-up, all control registers are reset (Table          the 4-Wire Interface
2). Power-up status sets I/O ports P0 to P9 high             Controlling the MAX7317 requires sending a 16-bit
impedance, and puts the device into shutdown mode.           word. The first byte, D15 through D8, is the command,
                                                             and the second byte, D7 through D0, is the data byte
RAM Register                                                 (Table 5).
The RAM register provides a byte of memory that can
be used for any purpose.
GPIO Port Direction Configuration
The 10 I/O ports P0 through P9 can be configured to
any combination of inputs and outputs. Ports with-
                                                                                       OUTPUT
stand 7V independent of the MAX7317’s supply voltage,                               PORT REGISTER
                                                                      DATA FROM
whether used as inputs or outputs. Configure a port as            SHIFT REGISTER
                                                                                  D                  OUTPUT PORT
                                                                                                  Q  REGISTER DATA
an input by setting its output register to 0x01, which
                                                                                          FF                          I/O PIN
sets the port output high impedance (Table 4).
                                                                    WRITE PULSE  CK               Q                 N
Input Port Registers
Reading an input port register returns the logic levels at
                                                                                        INPUT                    GND
the I/O port pins. The input port registers are read only.                          PORT REGISTER
A write to an input port register is ignored.
                                                                                                  Q INPUT PORT
                                                                                 D
                                                                                                    REGISTER DATA
Output Registers                                                                          FF
The MAX7317 uses one 8-bit register to control each
                                                                     READ PULSE  CK
output port (Table 4). Each port can be configured as
an input or open-drain output. Write 0x00 to the output
register to set the port as a logic-low output, or 0x01 to
set the port as a logic-high output or logic input.
                                                             Figure 1. Simplified Schematic of I/O Ports
www.maximintegrated.com                                                                                    Maxim Integrated │ 5


MAX7317                                                     10-Port SPI-Interfaced I/O Expander with
                                                            Overvoltage and Hot-Insertion Protection
Table 1. Register Address Map
                                                                      COMMAND ADDRESS                    CODE
                          REGISTER
                                                           D15    D14 D13 D12  D11   D10  D9    D8       (hex)
 Port P0 output level                                      R/W     0    0   0   0     0     0    0        0x00
 Port P1 output level                                      R/W     0    0   0   0     0     0    1        0x01
 Port P2 output level                                      R/W     0    0   0   0     0     1    0        0x02
 Port P3 output level                                      R/W     0    0   0   0     0     1    1        0x03
 Port P4 output level                                      R/W     0    0   0   0     1     0    0        0x04
 Port P5 output level                                      R/W     0    0   0   0     1     0    1        0x05
 Port P6 output level                                      R/W     0    0   0   0     1     1    0        0x06
 Port P7 output level                                      R/W     0    0   0   0     1     1    1        0x07
 Port P8 output level                                      R/W     0    0   0   1     0     0    0        0x08
 Port P9 output level                                      R/W     0    0   0   1     0     0    1        0x09
 Write ports P0 through P9 with same output level           0
                                                                   0    0   0   1     0     1    0        0x0A
 Read port P0 output level                                  1
 Write ports P0 through P3 with same output level           0
                                                                   0    0   0   1     0     1    1        0x0B
 Read port P0 output level                                  1
 Write ports P4 through P7 with same output level           0
                                                                   0    0   0   1     1     0    0       0x0C
 Read port P4 output level                                  1
 Write ports P8 or P9 with same output level                0
                                                                   0    0   0   1     1     0    1       0x0D
 Read port P8 output level                                  1
 Read ports P7 through P0 inputs                            1      0    0   0   1     1     1    0        0x0E
 Read ports P9 and P8 inputs                                1      0    0   0   1     1     1    1        0x0F
 RAM                                                       R/W     0    0   1   0     0     1    1        0x13
 No-op                                                     R/W     0    1   0   0     0     0    0        0x20
 Factory reserved; do not write to this register           R/W     1    1   1   1     1     0    1       0x7D
Table 2. Initial Power-Up Register Status
                                                           ADDRESS                REGISTER DATA
          REGISTER                  POWER-UP CONDITION
                                                           CODE (hex)  D7  D6  D5    D4   D3   D2     D1     D0
 Port P0 output level                Port 0 high impedance    0x00      1   1   1     1    1    1      1      1
 Port P1 output level                Port 1 high impedance    0x01      1   1   1     1    1    1      1      1
 Port P2 output level                Port 2 high impedance    0x02      1   1   1     1    1    1      1      1
 Port P3 output level                Port 3 high impedance    0x03      1   1   1     1    1    1      1      1
 Port P4 output level                Port 4 high impedance    0x04      1   1   1     1    1    1      1      1
 Port P5 output level                Port 5 high impedance    0x05      1   1   1     1    1    1      1      1
 Port P6 output level                Port 6 high impedance    0x06      1   1   1     1    1    1      1      1
 Port P7 output level                Port 7 high impedance    0x07      1   1   1     1    1    1      1      1
 Port P8 output level                Port 8 high impedance    0x08      1   1   1     1    1    1      1      1
 Port P9 output level                Port 9 high impedance    0x09      1   1   1     1    1    1      1      1
 RAM                                           0x00           0x13      0   0   0     0    0    0      0      0
www.maximintegrated.com                                                                       Maxim Integrated │ 6


MAX7317                                               10-Port SPI-Interfaced I/O Expander with
                                                      Overvoltage and Hot-Insertion Protection
Connecting Multiple MAX7317s to the                      together, and providing an individual CS per the MAX7317
4-Wire Bus                                               device (Figure 2). This connection works regardless of
Multiple MAX7317s can be interfaced to a common SPI      the configuration of DOUT/OSC, but does not allow the
bus by connecting DIN inputs together, SCLK inputs       MAX7317s to be read.
Table 3. Input Ports Register
                                              ADDRESS                         REGISTER DATA
                REGISTER                 R/W    CODE
                                                (hex)   D7       D6      D5       D4    D3      D2     D1       D0
                                                       Port     Port     Port    Port   Port   Port    Port     Port
           Read input ports P7–P0         1     0X0E
                                                         P7      P6      P5       P4    P3      P2     P1       P0
                                                                                                       Port     Port
           Read input ports P9, P8        1     0X0F      0       0       0        0     0       0
                                                                                                       P9       P8
Table 4. Output Registers Format
                                             ADDRESS                          REGISTER DATA
                REGISTER                R/W    CODE                            BINARY
                                                                                                                hex
                                               (hex)   D7     D6      D5      D4     D3    D2    D1     D0
 Port P0 level                           —            MSB            Output P0 level and PWM           LSB
 Port P0 is open-drain logic low         —              0      0       0       0      0     0      0     0     0x00
 Port P0 is open-drain logic high (high        0x00
 impedance without external pullup) or   —              0      0       0       0      0     0      0     1     0x01
 logic input
 Port P1 level                           —     0x01   MSB Port P1 level                                LSB
                                                                                                               0x00
 Port P2 level                           —     0x02   MSB Port P2 level                                LSB
 Port P3 level                           —     0x03   MSB Port P3 level                                LSB       or
 Port P4 level                          —-     0x04   MSB Port P4 level                                LSB
                                                                                                               0x01
 Port P5 level                           —     0x05   MSB Port P5 level                                LSB
 Port P6 level                           —     0x06   MSB Port P6 level                                LSB
 Port P7 level                           —     0x07   MSB Port P7 level                                LSB
 Port P8 level                           —     0x08   MSB Port P8 level                                LSB
 Port P9 level                           —     0x09   MSB Port P9 level                                LSB
 Writes ports P0 through P9
                                         0            MSB Ports P0 through P9 level                    LSB
 with same level                               0x0A
 Reads port P0 level                     1            MSB Port P0 level                                LSB
 Writes ports P0 through P3
                                         0            MSB Ports P0 through P3 level                    LSB
 with same level                               0x0B
 Reads port P0 level                     1            MSB Port P0 level                                LSB
 Writes ports P4 through P7
                                         0            MSB Ports P4 through P7 level                    LSB
 with same level                               0x0C
 Reads port P4 level                     1            MSB Port P4 level                                LSB
 Write ports P8 and P9 with same level   0            MSB Ports P8, P9 level                           LSB
                                               0x0D
 Read port P8 level                      1            MSB Port P8 level                                LSB
www.maximintegrated.com                                                                          Maxim Integrated │ 7


MAX7317                                                        10-Port SPI-Interfaced I/O Expander with
                                                               Overvoltage and Hot-Insertion Protection
Alternatively, MAX7317s can be daisy-chained by                  If fewer or greater than 16 bits are clocked into the
connecting the DOUT of one device to the DIN of the              MAX7317 between taking CS low and taking CS high
next, and driving SCLK and CS lines in parallel (Figure 3).      again, the MAX7317 stores the last 16 bits received,
This connection allows the MAX7317s to be read. Data             including the previous transmission(s). The general case
at DIN propagates through the internal shift registers and       is when n bits (where n > 16) are transmitted to the
appears at DOUT 15.5 clock cycles later, clocked out on          MAX7317. The last bits comprising bits {n-15} to {n}, are
the falling edge of SCLK. When sending commands to               retained, and are parallel loaded into the 16-bit latch as
daisy-chained MAX7317s, all devices are accessed at              bits D15 to D0, respectively (Figure 6).
the same time. An access requires (16 x n) clock cycles,
where n is the number of MAX7317s connected together.            Reading Device Registers
The serial interface speed (maximum SCLK) is limited to          Any register data within the MAX7317 can be read by
10MHz when multiple devices are daisy-chained due to             sending a logic high to bit D15. The sequence is:
the DOUT propagation delay and DIN setup time.                   1) Take SCLK low.
The MAX7317 is written to using the following sequence           2) Take CS low. This enables the internal 16-bit shift
(Figure 5):                                                           register.
1) Take SCLK low.                                                3) Clock 16 bits of data into DIN, D15 first to D0 last.
2) Take CS low. This enables the internal 16-bit shift                D15 is high, indicating a read command and bits
   register.                                                          D14 through D8 contain the address of the register
                                                                      to read. Bits D7 to D0 contain dummy data, which is
3) Clock 16 bits of data into DIN, D15 first to D0 last,
                                                                      discarded.
   observing the setup and hold times. Bit D15 is low,
   indicating a write command.                                   4) Take CS high (either while SCLK is still high after
                                                                      clocking in the last data bit, or after taking SCLK low).
4) Take CS high (either while SCLK is still high after
                                                                      Positions D7 through D0 in the shift register are now
   clocking in the last data bit, or after taking SCLK low).
                                                                      loaded with the register data addressed by bits D15
5) Take SCLK low (if not already low).                                through D8.
                                                                 5) Take SCLK low (if not already low).
                                                                 6) Issue another read or write command, and exam-
                                                                      ine the bit stream at DOUT; the second 8 bits are
                                                                      the contents of the register addressed by bits D14
                                                                      through D8 in step 3.
Table 5. Serial-Data Format
  D15      D14    D13     D12      D11      D10     D9      D8   D7       D6       D5      D4     D3       D2      D1        D0
  R/W     MSB                  ADDRESS                     LSB  MSB                          DATA                           LSB
                                  CS3
                                  CS2
                          µC
                                  CS1         CS1  MAX7317          CS2    MAX7317           CS3   MAX7317
                                 MOSI         DIN                   DIN                      DIN
                                 SCLK         SCLK                  SCLK                     SCLK
Figure 2. MAX7317 Multiple CS Connection
www.maximintegrated.com                                                                                      Maxim Integrated │ 8


MAX7317                                                                   10-Port SPI-Interfaced I/O Expander with
                                                                          Overvoltage and Hot-Insertion Protection
                               MOSI             DIN           DOUT         DIN              DOUT            DIN            DOUT
                                  CS            CS                         CS                               CS     MAX7317
                                                     MAX7317                         MAX7317
                          µC   SCLK             SCLK                       SCLK                             SCLK
                               MISO
Figure 3. MAX7317 Daisy-Chain Connection
                    CS
                                                                                                            tCSW
                                                          tCL                                         tCSH
                                         tCSS                      tCH                    tCP
                 SCLK
                                           tDS
                                                 tDH
                   DIN                        D15              D14              D1                 D0
                                                                                            tDO
                 DOUT                                                                                                   D15
Figure 4. Timing Diagram
      CS
    SCLK
     DIN         D15
                        D14   D13    D12       D11    D10       D9     D8    D7       D6        D5       D4     D3    D2      D1     D0
                  =0
    DOUT                                                                                                                                  D15 = 0
                                                                                   .
Figure 5. 16-Bit Write Transmission to the MAX7317
www.maximintegrated.com                                                                                                          Maxim Integrated │ 9


MAX7317                                                          10-Port SPI-Interfaced I/O Expander with
                                                                 Overvoltage and Hot-Insertion Protection
       CS
     SCLK
      DIN      BIT   BIT    N-15  N-14 N-13   N-12  N-11 N-10 N-9   N-8    N-7    N-6     N-5     N-4   N-3     N-2   N-1     N
                1     2
    DOUT                     N-31 N-30 N-29   N-28  N-27 N-26 N-25  N-24   N-23   N-22    N-21    N-20  N-19    N-18 N-17    N-16
                                                                                .
Figure 6. Transmission of More than 16 Bits to the MAX7317
Applications Information                                           improve noise immunity in applications where power
                                                                   consumption is less critical, or where a faster rise time is
Hot Insertion                                                      needed for a given capacitive load.
The I/O ports P0–P9 remain high impedance with up to
8V asserted on them when the MAX7317 is powered                    Power-Supply Considerations
down (V+ = 0V). The MAX7317 can therefore be used in               The MAX7317 operates with a power-supply                       voltage of
hot-swap applications.                                             2.25V to 3.6V. Bypass the power supply to                      GND with
                                                                   a 0.047µF ceramic capacitor as close to the                     device as
SPI Routing Considerations                                         possible. For the TQFN version, connect the                     underside
The MAX7317’s SPI interface is guaranteed to                       exposed pad to GND.
operate at 26Mbps on a 2.5V supply, and on a 3.3V
supply typically operates at 35Mbps. This means that               Chip Information
transmission line issues should be considered when                 PROCESS: BiCMOS
the interface connections are longer than 100mm,
particularly with higher supply voltages. Avoid running
long adjacent tracks for SCLK, DIN, and CS without                 Pin Configurations (continued)
interleaving GND traces; otherwise, the signals may
                                                                                     TOP VIEW
cross-couple, giving false clock or chip-select transi-                                                +
                                                                                               SCLK 1
tions. Ringing may manifest itself as communication                                                                   16 V+
issues, often intermittent, typically due to double clocking                                     CS 2                 15 DIN
caused by ringing at the SCLK input. Fit a 1kΩ to 10kΩ                                           P0 3                 14 DOUT
                                                                                                        MAX7317AEE
parallel termination resistor to either GND or V+ at the                                         P1 4                 13 P9
DIN, SCLK, and CS inputs to damp ringing for moder-                                              P2 5                 12 P8
ately long interface runs. Use line-impedance-matching                                           P3 6                 11 P7
terminations when making connections between boards.                                             P4 7                 10 P6
                                                                                                GND 8                  9  P5
Output-Level Translation
The open-drain output architecture allows the ports to                                                       QSOP
level translate the outputs to higher or lower voltages
than the MAX7317 supply. An external pullup resistor               Package Information
can be used on any output to convert the high-                     For the latest package outline information and land patterns
impedance logic-high condition to a positive voltage level.        (footprints), go to www.maximintegrated.com/packages. Note
The resistor can be connected to any voltage up to                 that a “+”, “#”, or “-” in the package code indicates RoHS status
7V. When using a pullup on a constant-current output,              only. Package drawings may show a different suffix character, but
select the resistor value to sink no more than a few               the drawing pertains to the package regardless of RoHS status.
hundred µA in logic-low condition. This ensures that the
                                                                      PACKAGE          PACKAGE            OUTLINE         LAND PATTERN
current-sink output saturates close to GND. For
                                                                         TYPE             CODE                NO.                 NO.
interfacing CMOS inputs, a pullup resistor value of 220kΩ
is a good starting point. Use a lower resistance to                    16 QSOP            E16+4            21-0055             90-0167
                                                                    16 TQFN-EP          T1633+4            21-0136             90-0031
www.maximintegrated.com                                                                                              Maxim Integrated │ 10


MAX7317                                                                           10-Port SPI-Interfaced I/O Expander with
                                                                                  Overvoltage and Hot-Insertion Protection
Revision History
   REVISION          REVISION                                                                                                                       PAGES
                                                                             DESCRIPTION
   NUMBER                DATE                                                                                                                    CHANGED
         2               4/05        —                                                                                                               1–17
                                     No /V OPNs; removed automotive reference from Applications section; updated
         3               5/14                                                                                                                           1
                                     Packaging Information
         4               4/15        Updated Benefits and Features section                                                                              1
For pricing, delivery, and ordering information, please contact Maxim Direct at 1-888-629-4642, or visit Maxim Integrated’s website at www.maximintegrated.com.
Maxim Integrated cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim Integrated product. No circuit patent licenses
are implied. Maxim Integrated reserves the right to change the circuitry and specifications without notice at any time. The parametric values (min and max limits)
shown in the Electrical Characteristics table are guaranteed. Other parametric values quoted in this data sheet are provided for guidance.
Maxim Integrated and the Maxim Integrated logo are trademarks of Maxim Integrated Products, Inc.                 © 2015 Maxim Integrated Products, Inc. │ 11


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 MAX7317AEE+ MAX7317AEE+T MAX7317ATE+ MAX7317ATE+T
