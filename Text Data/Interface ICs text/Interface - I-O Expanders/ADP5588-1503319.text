                                                                                                                      Mobile I/O Expander and
                                                                                                                    QWERTY Keypad Controller
Data Sheet                                                                                                                           ADP5588
FEATURES                                                                                                                      FUNCTIONAL BLOCK DIAGRAM
18-GPIO port expander or 10 × 8 keypad matrix                                                                                                                       REF                       ADP5588
                                                                                                                                                                  VOLTAGE
GPIOs configurable to GPIs, GPOs, and keypad rows or
   columns                                                                                                      GND 19
Dual light sensor inputs (C8 and C9)                                                                            VCC                                                                                               C9
                                                                                                                     21                                                             C9              C9
                                                                                                                                                                                                                 18
I2C interface                                                                                                   SCL 23
I2C register read autoincrement                                                                                                                                     REF
                                                                                                                SDA 22 CONTROL                 CONTROL            VOLTAGE
                                                                                                                       REGISTERS              INTERFACE                                                           C8
1.8 V to 3.0 V operation                                                                                                                                                            C8              C8
                                                                                                                                                                                                                 17
                                                                                                                RST 20
Keypad lock capability
                                                                                                                 INT 24
Open-drain interrupt output
Key press and key release interrupts
GPI interrupt with level programmability                                                                                  1    2    3    4    5    6    7     8    9    10    11    12    13    14    15    16
Programmable pull-ups
                                                                                                                                                                                                                      07673-001
                                                                                                                      R7      R6   R5   R4   R3   R2   R1   R0    C0   C1    C2    C3    C4    C5    C6    C7
Key event counter with overflow interrupt
50 μs debounce on the reset line and GPIs                                                                                                                   Figure 1.
1 μA typical idle current, 55 μA typical polling current drain
   for one key press
Small 4 mm × 4 mm LFCSP package
APPLICATIONS
Keypad and I/O expander designed for QWERTY type phones
  that require a large keypad matrix
GENERAL DESCRIPTION                                                                                         When used for smaller keypad matrices, unused row and
The ADP5588 is an I/O port expander and keypad matrix                                                       column pins can be reconfigured to act as general-purpose
designed for QWERTY type phones that require a large keypad                                                 inputs, outputs, or light sensor inputs. R0, R1, R2, R3, R4, R5, R6,
matrix and expanded I/O lines. I/O expander ICs are used in                                                 and R7 denote the row pins of the matrix, while C0, C1, C2, C3,
mobile platforms as a solution to the limited number of GPIOs                                               C4, C5, C6, C7, C8, and C9 denote the column pins. At power-up,
available in the main processor.                                                                            all rows and columns default as GPIs and must be programmed to
                                                                                                            function as part of the keypad matrix, GPOs, or light sensor inputs.
In its small 4 mm × 4 mm package, the ADP5588 contains                                                      In addition to keypad and GPIO functionalities, C8 and C9 can
enough power to handle all key scanning and decoding and flag                                               also be configured as light sensor inputs.
the processor of key presses and releases via the I2C® interface
and interrupt. It frees the main microprocessor from having to                                              When configured as keypad lines, the function of the C8 and
monitor the keypad, thereby minimizing current drain and                                                    C9 lines is straightforward: the control interface disconnects
increasing processor bandwidth. It is also equipped with a                                                  these lines from the comparator inputs, disables the light sensor
buffer/FIFO and key event counter to handle and keep track of                                               comparator, and connects them to the keypad columns of the
up to 10 unprocessed key or GPI events with overflow wrap and                                               keypad matrix. When used as light sensor comparator inputs,
interrupt capability.                                                                                       the control interface disconnects these pins from the keypad,
                                                                                                            enables the comparators, and connects these lines to the com-
The ADP5588 has a keylock capability with an option to trigger                                              parator inputs. Two external capacitors (0.1 μF) are required
or not trigger an interrupt at key presses and releases. All com-                                           when these pins are configured as light sensor inputs. When
munication to the main processor is done using one interrupt line                                           used as GPIOs, these pins are removed from the keypad and the
and two I2C-compatible interface lines. The ADP5588 can be                                                  light sensor interface, and the light sensor comparators are
configured to have a keypad matrix of up to 8 rows × 10 columns                                             disabled, along with the logic for the sensors.
(a maximum of 80 keys).
Rev. D                                                                     Document Feedback
Information furnished by Analog Devices is believed to be accurate and reliable. However, no
responsibility is assumed by Analog Devices for its use, nor for any infringements of patents or other
rights of third parties that may result from its use. Specifications subject to change without notice. No   One Technology Way, P.O. Box 9106, Norwood, MA 02062-9106, U.S.A.
license is granted by implication or otherwise under any patent or patent rights of Analog Devices.         Tel: 781.329.4700 ©2008–2019 Analog Devices, Inc. All rights reserved.
Trademarks and registered trademarks are the property of their respective owners.                           Technical Support                                  www.analog.com


ADP5588                                                                                                                                                                                        Data Sheet
TABLE OF CONTENTS
Features .............................................................................................. 1               Keypad Operation .........................................................................7
Applications ....................................................................................... 1                  General-Purpose Inputs and Outputs ........................................9
                                                                                                                      2
Functional Block Diagram .............................................................. 1                            I C Programming and Digital Control ........................................ 14
General Description ......................................................................... 1                         Registers ....................................................................................... 15
Revision History ............................................................................... 2                      Register Descriptions ................................................................. 16
Specifications..................................................................................... 3                   Comparator Register Descriptions .......................................... 21
  DC Electrical Characteristics ...................................................... 3                             Applications Information .............................................................. 24
Absolute Maximum Ratings............................................................ 5                                  Applications Overview .............................................................. 24
  Thermal Resistance ...................................................................... 5                           Keypad Current .......................................................................... 24
  ESD Caution .................................................................................. 5                      Backlight Control Application.................................................. 24
Pin Configuration and Function Descriptions ............................. 6                                          Outline Dimensions ....................................................................... 26
Theory of Operation ........................................................................ 7                          Ordering Guide .......................................................................... 26
REVISION HISTORY
10/2019—Rev. C to Rev. D                                                                                             4/2009—Rev. A to Rev. B
Changes to Table 18 ........................................................................ 16                      Changes to Title .................................................................................1
Updated Outline Dimensions ....................................................... 26                                Changes to Ordering Guide .......................................................... 26
Changes to Ordering Guide .......................................................... 26
                                                                                                                     11/2008—Rev. Sp0 to Rev. A
2/2012—Rev. B to Rev. C
Changes to Table 12 .......................................................................... 8
Changes to Table 27 ........................................................................ 18
                                                                                                    Rev. D | Page 2 of 28


Data Sheet                                                                                                                                      ADP5588
SPECIFICATIONS
TA = TJ = −40°C to +85°C, unless otherwise noted.
DC ELECTRICAL CHARACTERISTICS
Table 1. General DC Electrical Characteristics
Parameter                                                            Symbol            Conditions                                Min     Typ  Max        Unit
SUPPLY VOLTAGE
   VCC Input Voltage Range                                           VCC                                                         1.7          3.0        V
   Photosensor Voltage                                               VPHOTOSENSOR                                                             VCC + 0.2
   Supply Current1                                                   ICC               VCC = 1.8 V to 3.0 V, TA = −40°C to +85°C         1    10         μA
      With One Key Press                                             ICC               VCC = 1.8 V, TA = −40°C to +85°C                  55   90         μA
      With One Key Press                                             ICC               VCC = 3.0 V, TA = −40°C to +85°C                  100  200        μA
      With GPI Low (Pull-Up Enabled)2                                ICC               VCC = 1.8 V to 3.0 V, TA = −40°C to +85°C         20   50         μA
      With GPI Low (Pull-Up Disabled)                                ICC               VCC = 1.8 V to 3.0 V, TA = −40°C to +85°C         2    10         μA
      With One GPO Active3                                           ICC               VCC = 1.8 V, TA = −40°C to +85°C                       50         μA
AMBIENT LIGHT SENSOR (CMP_IN1, CMP_IN2)
   Maximum Sensor Range                                              ISENSOR           VCC = 1.8 V to 3.0 V, TA = 25°C           0.85    1.0  1.15       mA
   Sensor Supply Current (One Comparator Enabled,                    ICC               VCC = 1.8 V to 3.0 V                              100  150        μA
      0 Minimum Input Current)4
   Sensor Current (One Comparator Enabled,                           ICC               VCC = 1.8 V to 3.0 V                              160  200        μA
      Maximum Input Current)4
   Sensor Current (Both Comparators Enabled,                         ICC               VCC = 1.8 V to 3.0 V                              130  180        μA
      Minimum Input Current)4
   Sensor Current (Both Comparators Enabled,                         ICC               VCC = 1.8 V to 3.0 V                              240  400        μA
      Maximum Input Current)4
OSCILLATOR CURRENT
   Oscillator Current (Enabled)                                      ICC               VCC = 1.8 V to 3.0 V                              40              μA
1
  Operating current measured with I/Os defaulting as GPIs with all pull-ups enabled and all inputs open.
2
  With one GPI low.
3
  Load = 100 k.Ω
4
  Photosensor maximum voltage = VCC + 0.2.
Table 2. I/O DC Electrical Characteristics
Parameter                                                                  Symbol          Conditions                 Min        Typ         Max        Unit
INPUT LOGIC LEVELS (SCL, SDA, RST, C0 to C9, R0 to R7)1
   Logic Low Input Voltage                                                 VIL             1.7 V ≤ VIO ≤ 3.0 V                               0.2 x VCC  V
   Logic High Input Voltage                                                VIH             1.7 V ≤ VIO ≤ 3.0 V        0.65 x VCC                        V
   Schmitt Trigger Hysteresis                                              VHYST                                                 0.10                   V
   Input Leakage Current                                                   VI-LEAKAGE      1.7 V ≤ VIO ≤ 3.0 V        −1                     1          μA
OUTPUT LOGIC LEVELS (C0 to C9, R0 to R7)
   Logic Low Output Voltage                                                VOL             ISINK = 1 mA                                      0.40       V
   Output High Voltage                                                     VOH             ISOURCE = 1 mA                        VCC − 0.3 V            V
OUTPUT LOGIC LEVELS (INT, SDA)
   Output Low Voltage                                                      VOL             ISINK = 3 mA                                      0.40       V
                                                                                           1.7 V ≤ VCC ≤ 3.0 V
   Output High Voltage                                                     VOH             1.7 V ≤ VCC ≤ 3.0 V                   0.95 × VCC             V
   Logic High Leakage Current                                              VO-LEAKAGE      1.7 V ≤ VCC ≤ 3.0 V                   0.1         1          μA
PULL-UP RESISTANCE FOR GPIOs (C0 to C9, R0 to R7)2                         RPULL-UP                                              100                    kΩ
1
  Power-up default current. All I/Os default as GPIs and are open; C8 and C9 default as GPIs; I2C is idle.
2
  GPIO internal pull-ups are designed to 100 kΩ.
                                                                             Rev. D | Page 3 of 28


ADP5588                                                                                                                                                          Data Sheet
Table 3. Comparator Input Capacitor
Parameter                                                                               Symbol                     Min           Typ                  Max                       Unit
Comparator Input Capacitor Value                                                        CCOMP                                    0.1                                            μF
Table 4. Capacitance Loading1
Parameter                                                                                      Symbol               Min           Typ                 Max                 Unit
I/O Input Capacitance                                                                          CIN                                1                   10                  pF
I/O Output Loading Capacitance                                                                 COUT                                                   50                  pF
Capacitive Load for Each Bus Line                                                              CB2                                                    400                 pF
1
    Guaranteed by design.
2
    CB = total capacitance of one bus line in picofarads.
Table 5. AC Characteristics1
Parameter                                                                               Symbol                     Min           Typ                  Max                       Unit
Delay from Reset Deassertion to I2C Access                                              RSTD                       60                                                           μs
Keypad Unlock Timer                                                                     TKUT                                     7                                              sec
Keypad Interrupt Mask Timer                                                             TKIMT                                    31                                             sec
Debounce                                                                                TD                                       50                                             μs
Filter Time                                                                             TTTR                       0.070                              12                        sec
1
    Guaranteed by design.
Table 6. I2C AC Electrical Characteristics1
Parameter                                                                               Symbol                     Min           Typ                  Max                       Unit
SCL Clock Frequency                                                                     fSCL                                                          400                       kHz
SCL High Time                                                                           tHIGH                      0.6                                                          μs
SCL Low Time                                                                            tLOW                       1.3                                                          μs
Data Setup Time                                                                         tSU, DAT                   100                                                          ns
Data Hold Time                                                                          tHD, DAT                   0                                  0.9                       μs
Setup Time for Repeated Start                                                           tSU, STA                   0.6                                                          μs
Hold Time for Start/Repeated Start                                                      tHD, STA                   0.6                                                          μs
Bus Free Time for Stop and Start                                                        tBUF                       1.3                                                          μs
Setup Time for Stop Condition                                                           tSU, STO                   0.6                                                          μs
Rise Time for SCL and SDA2                                                              tR                         20 + 0.1 CB                        300                       ns
Fall Time for SCL and SDA2                                                              tF                         20 + 0.1 CB                        300                       ns
Pulse Width of Suppressed Spike                                                         tSP                        0                                  50                        μs
1
    Guaranteed by design.
2
    tR and tF are measured between 0.3 × VCC and 0.7 × VCC.
                SDA
                                                                                                  tF                                                  tBUF
                                       tLOW          tR              tSU, DAT             tF                  tHD, STA           tSP         tR
                SCL
                                                                                tHIGH     tSU, STA                                tSU, STO
                            S                             tHD, DAT                                      Sr                                        P          S
                       S = START CONDITION
                                                                                                                                                                    07673-002
                       Sr = REPEATED START CONDITION
                       P = STOP CONDITION
                                                                          Figure 2. I2C Interface Timing Diagram
                                                                                    Rev. D | Page 4 of 28


Data Sheet                                                                                                                            ADP5588
ABSOLUTE MAXIMUM RATINGS
Table 7.                                                                         THERMAL RESISTANCE
Parameter                                       Rating                           θJA is specified for the worst-case conditions, that is, a device
VCC                                             −3 V to +4.0 V                   soldered in a circuit board for surface-mount packages.
R0 to R7, C0 to C9                              −3 V to VCC + 0.3 V
SCL                                             −3 V to VCC + 0.3 V              Table 8. Thermal Resistance
SDA                                             −3 V to VCC + 0.3 V              Package Type                       θJA         θJC         Unit
RST                                             −3 V to VCC + 0.3 V              24-Lead LFCSP_VQ                   57.8        9.4         °C/W
INT                                             −3 V to VCC + 0.3 V              Maximum Power                      600                     mW
GND                                             −0.3 V to +0.3 V
Operating Ambient Temperature Range             −40°C to +85°C                   ESD CAUTION
Operating Junction Temperature Range            −40°C to +125°C
Storage Temperature Range                       −65°C to +150°C
ESD Machine Model                               ±200 V
ESD Human Body Model                            ±2000 V
ESD Charged Device Model                        ±1000 V
Soldering Condition                             JEDEC J-STD-020
Stresses at or above those listed under Absolute Maximum
Ratings may cause permanent damage to the product. This is a
stress rating only; functional operation of the product at these
or any other conditions above those indicated in the operational
section of this specification is not implied. Operation beyond
the maximum operating conditions for extended periods may
affect product reliability.
                                                                Rev. D | Page 5 of 28


ADP5588                                                                                                                     Data Sheet
PIN CONFIGURATION AND FUNCTION DESCRIPTIONS
                                                                 INT
                                                                 SCL
                                                                 SDA
                                                                 VCC
                                                                 RST
                                                                 GND
                                                                 24
                                                                 23
                                                                 22
                                                                 21
                                                                 20
                                                                 19
                                                                    PIN 1
                                                      R7   1        INDICATOR      18   CMP_IN2/C9
                                                      R6   2                       17   CMP_IN1/C8
                                                      R5   3      ADP5588          16   C7
                                                      R4   4       TOP VIEW        15   C6
                                                      R3   5     (Not to Scale)    14   C5
                                                      R2   6                       13   C4
                                                                  7
                                                                  8
                                                                  9
                                                                 10
                                                                 11
                                                                 12
                                                                 R1
                                                                 R0
                                                                 C0
                                                                 C1
                                                                 C2
                                                                 C3
                                             NOTES
                                                                                                     07673-003
                                             1. NC = NO CONNECT.
                                             2. EXPOSED PAD MUST BE CONNECTED TO GROUND.
                                                           Figure 3. Pin Configuration
Table 9. Pin Function Descriptions
Pin No.     Mnemonic      Description
1           R7            GPIO, Row 7 in the Keypad Matrix.
2           R6            GPIO, Row 6 in the Keypad Matrix.
3           R5            GPIO, Row 5 in the Keypad Matrix.
4           R4            GPIO, Row 4 in the Keypad Matrix.
5           R3            GPIO, Row 3 in the Keypad Matrix.
6           R2            GPIO, Row 2 in the Keypad Matrix.
7           R1            GPIO, Row 1 in the Keypad Matrix.
8           R0            GPIO, Row 0 in the Keypad Matrix.
9           C0            GPIO, Column 0 in the Keypad Matrix.
10          C1            GPIO, Column 1 in the Keypad Matrix.
11          C2            GPIO, Column 2 in the Keypad Matrix.
12          C3            GPIO, Column 3 in the Keypad Matrix.
13          C4            GPIO, Column 4 in the Keypad Matrix.
14          C5            GPIO, Column 5 in the Keypad Matrix.
15          C6            GPIO, Column 6 in the Keypad Matrix.
16          C7            GPIO, Column 7 in the Keypad Matrix.
17          CMP_IN1/C8    GPIO, Column 8 in the Keypad Matrix; Comparator Input for Photosensor 1.
18          CMP_IN2/C9    GPIO, Column 9 in the Keypad Matrix; Comparator Input for Photosensor 2.
19          GND           Ground.
20          RST           Hardware Reset (Active Low). This bit resets the device to the power default conditions. The reset pin must be
                          driven for a minimum of 50 μs to be valid and to prevent falsing due to ESD glitches or noise in the system. If
                          not used, RST must be tied high with a pull-up.
21          VCC           VCC = 1.7 V to 3.3 V.
22          SDA           I2C Serial Data (Open Drain Requires External Pull-up).
23          SCL           I2C Clock.
24          INT           Processor Interrupt, Active Low, Open Drain. This pin can be pulled up to 2.7 V or 1.8 V for selection flexibility in
                          the processor GPIO supply group.
EP          EPAD          Exposed Pad. The exposed pad must be connected to ground.
                                                               Rev. D | Page 6 of 28


Data Sheet                                                                                                                                                                                  ADP5588
THEORY OF OPERATION
                                  GND                                                                 REF                        ADP5588
                                         19                                                         VOLTAGE
                 VCC
                                  VCC                                                                                                                                         VCC
                                         21
                                                                                                                                                       C9
                                  SCL                                                                                                             18
                                         23
                                                                                                                      C9               C9                        0.1µF
                                  SDA                CONTROL
                                         22         REGISTERS                CONTROL
                                                                            INTERFACE                 REF             C8               C8
                                  RST                                                               VOLTAGE                                            C8
                                         20
                                                                                                                                                  17
                                   INT                                                                                                                      0.1µF
                                         24
                       SCL
                                              1     2     3     4     5      6     7      8     9    10    11    12    13    14    15       16
                       SDA
                       RST                R7       R6    R5    R4    R3     R2    R1    R0     C0   C1    C2    C3    C4    C5    C6    C7
                       INT
                                              A7 A6 A5 A4 A3 A2 A1 A0
                                              B7 B6 B5 B4 B3 B2 B1 B0
                                              C7 C6 C5 C4 C3 C2 C1 C0
                                              D7 D6 D5 D4 D3 D2 D1 D0
                                              E7 E6 E5 E4 E3 E2 E1 E0
                                              F7 F6 F5 F4 F3 F2 F1 F0
                                              G7 G6 G5 G4 G3 G2 G1 G0
                                              H7 H6 H5 H4 H3 H2 H1 H0
                                              I7    I6    I5    I4    I3     I2    I1     I0
                                              J7 J6       J5 J4 J3 J2 J1 J0                                                                                                     07673-009
                                                                           Figure 4. Typical Operating Circuit
The ADP5588 is a GPIO expander that can be configured either                                               Table 10. Key Event Number Assignment Table
as an 18-I/O port expander or as a 10 column × 8 row keypad                                                Row             C0          C1        C2         C3      C4   C5   C6            C7   C8   C9
matrix (80 keys maximum). It is ideal for cellular phone designs                                           R0              1           2         4          4       5    6    7             8    9    10
and other portable devices that require a large extended keypad                                            R1              11          12        13         14      15   16   17            18   19   20
and/or expanded I/Os (see the Applications Information section                                             R2              21          22        23         24      25   26   27            28   29   30
for various configurations). When smaller size keypads are                                                 R3              31          32        33         34      35   36   37            38   39   40
required, unused GPIOs in the keypad matrix can be used as                                                 R4              41          42        43         44      45   46   47            48   49   50
I/Os (GPOs and GPIs). Two of the columns (C8 and C9) can                                                   R5              51          52        53         54      55   56   57            58   59   60
also be configured as comparator inputs for single or dual light                                           R6              61          62        63         64      65   66   67            68   69   70
sensors. All GPIOs (rows and columns) default as GPIs at power-                                            R7              71          72        73         74      75   76   77            78   79   80
up with pull-ups and debounce enabled.
                                                                                                           When one key press or multiple key presses (short between
KEYPAD OPERATION                                                                                           column and row) occur, the internal state machine checks the
Any number of rows and columns, up to 10 columns × 8 rows,                                                 row pins to determine which one is driven low and then triggers
can be configured to be part of the keypad matrix. The rows                                                an interrupt. The state machine then starts a key scan cycle to
and columns that make up the keypad matrix must be con-                                                    determine which keys are pressed. After a key has been pressed
figured by setting the corresponding bits in Register 0x1D                                                 for 25 ms, the state machine sets the appropriate key(s) in the
through Register 0x1F. Keys on the keypad matrix appear on                                                 key event status register with the key-pressed bits set (the MSB
the key event table with a decimal value of 1 (0x01 hexidecimal                                            in the key event register) in the order detected. If the KE_IEN
or 0000001 binary) and run through 80 decimals (0x50 hexi-                                                 field in Register 0x01 is set, the state machine then sets the
decimal or 1010000 binary). See Table 10 for key event number                                              KE_INT field in Register 0x01 and generates an interrupt to the
assignments. The keypad, in idle mode, is configured with                                                  host processor.
columns being driven low and rows as inputs high with pull-ups.
                                                                                       Rev. D | Page 7 of 28


ADP5588                                                                                                                                                                                                                                                      Data Sheet
To prevent glitches or narrow press times registering as valid                                                                                                                                  The first read of any of the FIFO registers displays the first
key presses, the key scanner requires the key to be pressed for                                                                                                                                 event that happened and its status. Subsequent reads of the
two scan cycles. The key scanner has a sampling period of 25 ms,                                                                                                                                same register replace the register data with the next event that
so the key must be pressed and held for at least 25 ms to register as                                                                                                                           happens. If tracking of all the events is important, it is best to
pressed. If the key is continuously pressed, the key scanner                                                                                                                                    use a single register per event. After all the events in the FIFO
continues to sample every 25 ms. If a key that was pressed is                                                                                                                                   are read, reading of any of the event registers yields a zero value.
released for 25 ms or greater, the state machine sets the appro-                                                                                                                                Table 11 and Table 12 show the event sequences as they are
priate keys in the key event status register with the key pressed                                                                                                                               logged in and read from the FIFO. The 10 FIFO registers are
bits cleared in the order detected. Because the release of a key is                                                                                                                             labeled A through J, and keys are labeled A0 through J7.
not necessarily in sync with the key scan sampling period, it may
take between 25 ms and 50 ms for a key to register as released.                                                                                                                                 Table 11. Example of Event Sequence
After the key is registered as released, the key scanner goes back                                                                                                                              Key Pressed/Released                 Status              Key Event Counter
to idle mode. Figure 5 shows the row and column pins                                                                                                                                            A0                                   Pressed             1
connected to a typical 10 × 8, 80-switch keypad matrix.                                                                                                                                         B1                                   Pressed             2
                                                                                                                     VCC                                                                        A0                                   Released            3
                                                                                                                                                                                                C2                                   Pressed             4
 D7_PULL        D6_PULL        D5_PULL        D4_PULL        D3_PULL        D2_PULL        D1_PULL        D0_PULL
                                                                                                                                                                                                B1                                   Released            5
                                                                                                                                                                                                D3                                   Pressed             6
                                                                                                                                                                                                C2                                   Released            7
                                                                                                                           KEYPAD SCAN AND DECODE
                                                                                                                                                                                                E4                                   Pressed             8
                                                                                                                                                                                                E4                                   Released            9
                                                                                                                                                                                                D3                                   Released            10
                                                                                                                                                                                                Table 12. Interpretation of FIFO Event Reading
                                                                                                                                                                                                                   Key Event         Key Event Reg-          Key Event
                                                                                                                                                                                                Key Event          Register          ister Content           Register
 R7 R6 R5 R4 R3 R2 R1 R0                                                                                                                            C0 C1 C2 C3 C4 C5 C6 C7 C8 C9               Counter            Read              (Binary)1               Interpretation
                                                                                                                                                                                                10                 N/A               N/A                     N/A
       A7 A6 A5 A4 A3 A2 A1 A0
                                                                                                                                                                                                9                  D                 1 0000001               Key A0 pressed
       B7 B6 B5 B4 B3 B2 B1 B0
                                                                                                                                                                                                8                  E                 1 0001100               Key B1 pressed
       C7 C6 C5 C4 C3 C2 C1 C0
                                                                                                                                                                                                7                  C                 0 0000001               Key A0 released
       D7 D6 D5 D4 D3 D2 D1 D0
       E7 E6 E5 E4 E3 E2 E1 E0
                                                                                                                                                                                                6                  F                 1 0010111               Key C2 pressed
       F7 F6 F5 F4 F3 F2 F1 F0
                                                                                                                                                                                                5                  G                 0 0001100               Key B1 released
       G7 G6 G5 G4 G3 G2 G1 G0
                                                                                                                                                                                                4                  A                 1 0100010               Key D3 pressed
       H7 H6 H5 H4 H3 H2 H1 H0                                                                                                                                                                  3                  B                 0 0010111               Key C2 released
           I7             I6             I5             I4             I3             I2             I1             I0                                                                          2                  H                 1 0101101               Key E4 pressed
       J7             J6             J5                 J4             J3             J2             J1             J0                                                                          1                  J                 0 0101101               Key E4 released
                                                                                                                                                                                    07673-010   0                  I                 0 0100010               Key D3 released
                          10 × 8 KEYPAD MATRIX
                                                                                                                                                                                                1
                                                                  Figure 5. Keypad Decode Configuration                                                                                             The first number indicates a key press or key release in Bit 7 of the key event
                                                                                                                                                                                                    register: 1 = key press; 0 = key release.
Key Event Tracking                                                                                                                                                                              Key Event Overflow
The 10-key event registers are set to act as a FIFO, meaning that                                                                                                                               The ADP5588 is equipped with an overflow feature to handle key
reading any of the 10-key event registers yields the key events in                                                                                                                              events beyond the FIFO capacity. When all events are filled, any
the order they were pressed and released.                                                                                                                                                       additional events set the OVR_FLOW_INT bit in Register 0x02;
Tracking of key events is done with the help of the key event                                                                                                                                   if the OVR_FLOW_IEN bit in Register 0x01 is set, the host
counter (the KEC field in Register 0x03) and the FIFO/key                                                                                                                                       processor is also interrupted when overflow occurs. When the
event registers (Register 0x04 through Register 0x0D). The KEC                                                                                                                                  FIFO is not full, new events are added as the last events.
count increases as keys are pressed and released; up to 10 events                                                                                                                               The OVR_FLOW_M bit in Register 0x01 sets the mode of
can be logged in the counter. The FIFO/key event registers, on                                                                                                                                  operation during overflows. Clearing the OVR_FLOW_M bit
the other hand, display the key events and their status (pressed                                                                                                                                causes new incoming events to be discarded, and setting this bit
or released) as they are read out of the FIFO. The FIFO registers                                                                                                                               rolls over and overwrites old data with new data starting at the
are made of eight bits, with the MSB dedicated as the status bit                                                                                                                                first event.
(1 indicates a press and 0 indicates a release); the remaining
seven bits are used to display binary representation of the keys
that are pressed or released.
                                                                                                                                                                             Rev. D | Page 8 of 28


Data Sheet                                                                                                                                                 ADP5588
Autoincrement                                                                                      display the unlock message. The host then reads the lock status
The ADP5588 features automatic increment during I C read     2                                     register to see if the keypad is unlocked. After the first key event
access. This allows the user to increment the address pointer                                      interrupt, the state machine does not interrupt the processor
without having to send a read command for subsequent addresses.                                    again unless the correct sequence is keyed. The state machine
This minimizes processor intervention and, therefore, saves                                        resets if the correct sequences are not keyed before the keypad
processor bandwidth and current drain. Bit 7 of Register 0x01                                      lock interrupt mask timer expires.
must be set to initiate autoincrement (see Figure 16 for the full                                  The state of the keypad lock interrupt mask bit (Register 0x01,
write and read sequence).                                                                          Bit 2) in the configuration register determines whether the
Key Event Interrupt                                                                                interrupt pin is asserted when the keylock interrupt status bit
                                                                                                   (Register 0x02, Bit 2) is set. Setting the keylock interrupt mask
On a key event (KE) interrupt, the processor reads the interrupt
                                                                                                   bit causes the INT pin to be asserted when the keylock interrupt
register to determine the cause of the interrupt. If the KE_INT
                                                                                                   status bit is set in Register 0x02; clearing that bit masks the
bit in Register 0x02 is the cause of the interrupt, the state
                                                                                                   interrupt, causing the interrupt pin not to respond to the keylock
machine sets the KE_INT bit and reads the key event count
                                                                                                   interrupt status bit. The mask interrupt timer should be set for
from the KEC[3:0] field in Register 0x03 to determine the number
                                                                                                   the time that it takes for the LCD to dim or turn off so that, if a
of events. It then reads the INT_STAT register (Register 0x02)
                                                                                                   key is pressed, the backlight is set to bright mode again or reset
to make sure that no new events have come in. After all the
                                                                                                   to turn on the LCD.
events are read, the KEC field is decremented to zero (KEC = 0)
and the KE_INT bit can be cleared by writing a 1 to it. Both key                                   When the unlock mask interrupt timer equals 0, only the
presses and key releases are capable of generating key event                                       correct unlock sequence can generate an interrupt. Disabling
interrupts. The KE_INT bit cannot be cleared, and the INT pin                                      the unlock mask interrupt timer allows the processor to remain
cannot be deasserted, until the FIFO is cleared of all events.                                     undisturbed for situations in which the user has the phone in a
        REG. 0x1D
                                                                                                   pocket or purse and the keys are constantly pressed. The flow
      THROUGH 0x1F                                                                                 chart in Figure 6 shows the interaction of the interrupt mask
        KP_MODE
                        REG. 0x02
                                                                                                   timer and interrupt generation.
        REG. 0x01    WRITE 1 TO CLEAR
         KE_IEN          KE_INT                AND         INT DRIVE                               GENERAL-PURPOSE INPUTS AND OUTPUTS
        REG. 0x03                                                                                  The ADP5588 supports up to 18 programmable GPIOs that can
                                                                       07673-011
   READ KE(s) TO CLEAR
          KEC                                                                                      be configured to address a variety of uses. Figure 7 shows the
                Figure 6. Key Event Interrupt Generation                                           makeup of a typical GPIO block where GPIOx represents any of
                                                                                                   the 18 I/O lines.
Keypad Lock/Unlock Feature                                                                                                                   VCC
The ADP5588 has a locking feature that allows the user to lock
the keypad or GPIs (configured to be part of the event table).
Once enabled, the keypad lock can prevent generation of key event
interrupts and key events to be recorded in the key event table.                                                              Dx_PULL
                                                                                                            Dx_IN_DBNC
This feature comprises the Unlock Key 1 and Unlock Key 2
registers (Register 0x0F and Register 0x10), the keypad lock                                                Dx_IN        DEBOUNCE
interrupt mask, the keypad unlock timers (Register 0x0E),
and the LCK1 and LCK2 bits, and the keylock enable bit                                                                    VCC
(Register 0x03).
                                                                                                            Dx_OUT                                      GPIOx
The unlock keys can be programmed with any value of the keys
                                                                                                                                                                07673-012
in the keypad matrix or any GPI values that are part of the key
event table. When the keypad lock interrupt mask timer is                                                   Dx_DIR
enabled, the user must press two specific keys before a keylock                                                          Figure 7. Typical GPIO Block
interrupt is generated or keypad events are recorded. After the                                    General Purpose Inputs (GPI)
keypad is locked (set Bit 6, Register 0x03 to enable the lock), the
                                                                                                   The ADP5588 allows the user to configure all or some of its
first time that the user presses any key, a key event interrupt is
                                                                                                   GPIOs into GPIs (general-purpose inputs). After the GPIOs are
generated. No additional interrupt is generated unless both
                                                                                                   configured as GPIs, the user can opt to also turn on pull-up
unlock key sequences are correct; then a keylock interrupt is
                                                                                                   resistors and interrupt generation capability, thus reducing the
generated.
                                                                                                   amount of software monitoring and processor interaction and
If the correct unlock keys are not pressed before the mask timer                                   saving power.
expires, the state machine starts over. The first key event
                                                                                                   The programmed level of the GPI interrupt determines the
interrupt is generated to allow the software to see that the user
                                                                                                   active level of the GPI pin. For example, if a GPI interrupt level
has pressed a key so that the host can turn on the LCD and
                                                                                   Rev. D | Page 9 of 28


ADP5588                                                                                                                               Data Sheet
is programmed as high, a high on that pin is considered active                   Table 13. GPI Event Number Assignments for Rows
and meets the interrupt requirement. If the interrupt is pro-                    R0        R1      R2             R3     R4     R5                R6      R7
grammed as low, a low on that pin is considered active and                       97        98      99             100    101    102               103     104
meets the interrupt requirement.
                                                                                 Table 14. GPI Event Number Assignments for Columns
GPI data and interrupt status are reflected in the GPIO interrupt
                                                                                 C0       C1    C2      C3         C4    C5    C6         C7        C8     C9
and data status registers (Register 0x11 through Register 0x16).
                                                                                 105      106   107     108        109   110   111        112       113    114
Caution must be taken during software implementation because
an interrupt may be set immediately after register settings. To                  For a GPI that is set as active high, and is enabled in the key
prevent this, correct logic levels must be present at the GPIs,                  event table, the state machine adds an event to the event count
and the GPIO interrupt level must be set before GPIO interrupt                   and event table whenever that GPI goes high. If the GPI is set to
enable or GPI event FIFO enable registers are set. Figure 8 shows                active low, a transition from high to low is considered a press
the interrupt generation scheme, where Dx represents any one                     and is also added to the event count and event table. After the
of the 18 GPIOs.                                                                 interrupt state is met, the state machine internally sets an
   REG. 0x23                                                                     interrupt for the opposite state programmed in the register to
 THROUGH 0x25
     Dx_IN                          REG. 0x11
                                                                                 prevent polling for the released state, thereby saving current.
              INTERRUPT           THROUGH 0x13 REG. 0x02                         After the released state is achieved, it is added to the event table.
   REG. 0x26  CONDITION            READ TWICE   WRITE 1
 THROUGH 0x28                       TO CLEAR   TO CLEAR
                DECODE                                      INT                  The press and release are still indicated by Bit 7 in the event
    Dx_ILVL                AND     Dx_IN_ISTAT  GPI_INT
                                                            DRIVE
                                                                                 register (Register 0x04 through Register 0x0D). The GPI events
                                                                    07673-013
   REG. 0x01                                                                     can also be used as unlocked sequences.
   Dx_IN_IEN
                                                                                 When the GPI_EM_REGx bit in Register 0x20 through Register
                 Figure 8. GPIO Interrupt Generation
                                                                                 0x22 is set, GPI events are not tracked when the keypad is
GPI Events                                                                       locked. The GPIEM_CFG bit (Register 0x01, Bit 6) must be
A column or row configured as a GPI can be programmed to be                      cleared for the GPI events to be tracked in the event counter
part of the key event table and therefore also capable of gener-                 and event table when the keypad is locked.
ating a key event interrupt. A key event interrupt caused by a                   50 Microsecond Interrupt Configuration
GPI follows the same process flow as a key event interrupt
                                                                                 The ADP5588 gives the user the flexibility of deasserting the
caused by a key press. GPIs configured as part of the key event
                                                                                 interrupt for 50 μs while there is a pending event. When the
table allow single key switches and other GPI interrupts to be
                                                                                 INT_CFG bit in Register 0x01 is set, any attempt to clear the
monitored. As part of the event table, GPIs are represented by
                                                                                 interrupt bit while the interrupt pin is already asserted results in a
the decimal value 97 (0x61 or 1100001) through the decimal
                                                                                 50 μs deassertion. When the INT_CFG bit is cleared, processor
value 114 (0x72 or 1110010). See Table 13 and Table 14 for GPI
                                                                                 interrupt remains asserted if the host tries to clear the interrupt.
event number assignments for rows and columns.
                                                                                 This feature is particularly useful for software development and
                                                                                 edge triggering applications.
                      KEY EVENT INTERRUPT                                                                   VCC
                          GPIO INTERRUPT
                       KEYLOCK INTERRUPT
                                                           OR                                         INT
                      OVERFLOW INTERRUPT                                            INT
                                                                                   LOGIC
                    COMPARATOR 1 INTERRUPT
                    COMPARATOR 2 INTERRUPT
                    GPIEM_ OVR_FLOW_ K_LCK_IM GPI_IEN KE_IEN K_LCK_EN
                     CFG      IEN
                          KEYPAD LOCK INTERRUPT MASK TIMER
                                                                                                                                      07673-014
                                 INTERRUPT CONFIGURATION
                                                                Figure 9. INT Pin Drive
                                                                Rev. D | Page 10 of 28


Data Sheet                                                                                                                              ADP5588
                                                                        START
                                                           NO                         YES
                                                                 MASK TIMER = 0
                                   NO    KEY PRESS        YES                                      KEY PRESS     NO
                                         DETECTED                                                  DETECTED
                                                                                                        YES
                                                         GENERATE
                                                        KE INTERRUPT
                                                                                                 FIRST UNLOCK    NO
                                                      START MASK TIMER                           KEY DETECTED
                                                                                                        YES
                                              YES        MASK TIMER
                                                                                            START UNLOCK1 TO UNLOCK2
                                                          EXPIRES
                                                                NO
                                                                                                  UNLOCK1 TO
                                                                                                                   YES
                                                 NO     FIRST UNLOCK                                UNLOCK2
                                                        KEY DETECTED                             TIMER EXPIRES
                                                                                                        NO
                                                                YES
                                              START UNLOCK1 TO UNLOCK2
                                                                                                 SECOND UNLOCK     NO
                                                                                                  KEY DETECTED
                                                         UNLOCK1 TO
                                           YES
                                                           UNLOCK2                                      YES
                                                        TIMER EXPIRES
                                                                                                   GENERATE
                                                                NO                             KEYLOCK INTERRUPT
                                              YES        MASK TIMER
                                                          EXPIRES
                                                                NO
                                              NO       SECOND UNLOCK
                                                        KEY DETECTED
                                                                YES
                                                                                                                         07673-015
                                                          GENERATE
                                                      KEYLOCK INTERRUPT
                                                 Figure 10. Keypad Lock Interrupt Mask Timer Flowchart
Debouncing                                                                           Power-On Reset
The ADP5588 has a 50 μs debounce time for GPIOs configured                           For built-in power-up initialization for applications lacking a
as GPIs and rows in keypad scanning mode. The reset line                             power-on reset signal, a reset pin, RST, allows the user to reset
always has a 50 μs debounce time.                                                    the registers to default values in the event of a brownout or
                                                                                     other reset conditions.
General Purpose Outputs (GPOs)
                                                                                     Ambient Light Sensing
The ADP5588 allows the user to configure all or some of its
GPIOs as GPOs. These GPOs can be used as extra enables for                           The ADP5588 has built in light sensor comparator inputs to
the host processor or simply as trigger outputs. When configured                     detect ambient light conditions. An ADC samples the output of
as an output (GPO), a digital buffer drives the pin to 0 V for a 0                   external photosensors connected to the comparator inputs, and
and to VCC for a 1. To set any GPIO as a GPO, make sure that                         the result is fed into programmable trip comparators. The ADC
the corresponding bits in Register 0x1D through Register 0x1F are                    has an input range of 0 μA to 1000 μA (typical). The device can
set for GPIO mode; then use Register 0x23 through Register 0x25                      handle up to two photosensors (use Register 0x30 through
to set the corresponding bits for GPO mode.                                          Register 0x3A to configure the photosensor inputs).
                                                                     Rev. D | Page 11 of 28


ADP5588                                                                                                                                                   Data Sheet
Light Sensor Inputs                                                                                The L2_CMPR and L3_CMPR comparators can be enabled
Each light sensor input has two built-in comparators (the L2                                       independently of each other, and the ADC and comparator(s)
comparator and the L3 comparator) with two programmable                                            run continuously when L2_EN and/or L3_EN is set.
trip points, L2 and L3. The trip points are used to select among                                   Photosensor Operation
three operation modes based on ambient lighting conditions:                                        The comparator inputs remain idle until enabled, at which
outdoor, office, and dark modes.                                                                   point they detect lighting conditions from the photosensor
               L2 = 1               L2 = 1             L2 = 0                                      output. Depending on lighting conditions, and where the L2
               L3 = 1               L3 = 0             L3 = 0                                      and L3 trip points are set in the comparator level trip registers
                                                                       1 kLUX
                                                                                                   (Register 0x33 through Register 0x3A), the comparators set a
                                                                       1000µA
                                                                                                   value of 1 or 0 to L2_OUT and L3_OUT. The values of L2 and
 0 LUX
                                                                                                   L3 determine what mode or setting adjustment is required for a
  0µA
               DARK                 OFFICE           OUTDOOR
                                                                                                   particular lighting condition. Figure 11, Figure 12, and Table 15
                                                                                                   summarize the mode settings and logical values of L2 and L3.
                                                                                                   Table 15. L2_OUT and L3_OUT Comparator Mode
                                                                                     07673-016
                           L3                 L2
                                BRIGHTNESS
                                                                                                   Combination
         Figure 11. Light Sensor Comparator Modes and Trip Points                                  L3                  L2                  Mode
                                                                                                   0                   0                   Outdoor
L2 Comparator
                                                                                                   0                   1                   Office
The L2 comparator is used to detect when the photosensor                                           1                   1                   Dark
output drops below the programmable L2_TRIP point. When
                                                                                                   It is also possible to use the light sensor comparators in single-
this event occurs, the L2_OUT status signal is set. L2_CMPR
                                                                                                   shot mode. A single-shot measurement is done when the
contains programmable hysteresis, meaning that the photo-
                                                                                                   FORCE_RD bit in Register 0x31 is set. After the single-shot
sensor output must rise above L2_TRIP + L2_HYS before
                                                                                                   measurement is completed, the internal state machine clears the
L2_OUT is cleared.
                                                                                                   FORCE_RD bit. It takes 80 ms for a complete conversion. To
L2_CMPR is enabled via the L2_EN bit (Bit 0, Register 0x31 for                                     reduce the potential for flickering, the sensors can be programmed
Sensor 1 and Bit 0, Register 0x32 for Sensor 2). The L2_TRIP                                       for a number of sequential readings. The filter settings in
and L2_HYS values of L2_CMPR can be set between 0 μA and                                           Register 0x31 and Register 0x32 determine the number of
1000 μA in steps of 4 μA.                                                                          sequential readings needed by the user; these settings range
L3 Comparator                                                                                      from 80 ms to 10.24 sec.
The L3 comparator is used to detect when the photosensor                                                                                                L2_EN
output drops below the programmable L3_TRIP point. When                                                                          L2_HYST     L2_TRIP
this event occurs, the L3_OUT status signal is set. L3_CMPR                                         VCC                                                 L2_CMP     L2_OUT
contains programmable hysteresis, meaning that the photo-
sensor output must rise above L3_TRIP + L3_HYS before                                                          COMP                         FILTER
                                                                                                                         ADC
L3_OUT is cleared. L3_CMPR is enabled via the L3_EN bit.                                              PHOTO-
                                                                                                               INPUT                       SETTING
The L3_TRIP and L3_HYS values of L3_CMPR can be set                                                   SENSOR
between 0 μA and 127.5 μA in steps of 0.5 μA.                                                                                                           L3_CMP     L3_OUT
                                                                                                                                 L3_HYST     L3_TRIP
                                L2_TRIP
                                L2_HYST                                                                                                                 L3_EN               07673-018
                          L3_TRIP                                                                              Figure 13. Light Sensor and Trip Points Block Diagram
                          L3_HYST
                                                                       07673-017
                    1               10         100              1000
                             ADC RANGE (µA)
                        Figure 12. Comparator Ranges
                                                                                   Rev. D | Page 12 of 28


Data Sheet                                                                                                                          ADP5588
Comparator Interrupt                                                             in Register 0x02. If the comparator interrupt enable bits are set,
The ADP5588 allows the user to trigger an interrupt based on                     the interrupt pin is asserted every time the comparator
the light sensor comparator inputs. Changes in lighting condition                interrupt bits are set. The comparator interrupt flag can be
that cause the settings of L2 and L3 to jump from one mode to                    cleared only by writing a 1 to it.
another (dark, office, outdoor) set the comparator interrupt bits
Table 16. Device Configuration
                      Keypad                                         GPIO                                       Photosensor Inputs
                                                                                                 Photosensor
Matrix      Active Pins        Number of Keys      Available GPIO          Number of GPIOs       Input Pin(s)      Number of Photosensor Inputs
10 × 8      C0 to C9, R0 to R7 80                  0                       0                     None              0
8×8         C0 to C7, R0 to R7 64                  0                       0                     C8, C9            2
                                                   C8                      1                     C9                1
                                                   C9                      1                     C8                1
8×7         C0 to C7, R0 to R6 56                  R7                      1                     C8, C9            2
                                                   C8, R7                  2                     C9                1
                                                   R7, C8, C9              3                     None              0
8×6         C0 to C7, R0 to R5 48                  R6, R7                  2                     C8, C9            2
                                                   R6, R7, C8              3                     C9                1
                                                   R6, R7, C8, C9          4                     None              0
8×5         C0 to C7, R0 to R4 40                  R5, R7                  3                     C8, C9            2
                                                   R5 to R7, C8            4                     C9                1
                                                   R5 to R7, C8 to C9      5                     None              0
7×7         C0 to C6, R0 to R6 49                  R7, C7                  2                     C8, C9            2
                                                   R7, C7 to C8            3                     C9                1
                                                   R7, C7 to C9            4                     None              0
7×6         C0 to C6, R0 to R5 42                  R6 to R7, C7            3                     C8, C9            2
                                                   R6 to R7, C7 to C8      4                     C9                1
                                                   R6 to R7, C7 to C9      5                     None              0
7×5         C0 to C6, R0 to R4 35                  R5 to R7, C7            4                     C8, C9            2
                                                   R5 to R7, C7 to C8      5                     C9                1
                                                   R5 to R7, C7 to C9      6                     None              0
6×6         C0 to C5, R0 to R5 36                  R6 to R7, C6 to C7      4                     C8, C9            2
                                                   R6 to R7, C6 to C8      5                     C9                1
                                                   R6 to R7, C6 to C9      6                     None              0
6×5         C0 to C5, R0 to R4 30                  R5 to R7, C6 to C7      5                     C8, C9            2
                                                   R5 to R7, C6 to C8      6                     C9                1
                                                   R5 to R7, C6 to C9      7                     None              0
6×4         C0 to C5, R0 to R3 24                  R4 to R7, C6 to C7      6                     C8, C9            2
                                                   R4 to R7, C6 to C8      7                     C9                1
                                                   R4 to R7, C6 to C9      8                     None              0
…           …                  …                   …                       …                     …                 …
0×0         None               0                   R0 to R7, C0 to C9      18                    None              0
                                                                Rev. D | Page 13 of 28


ADP5588                                                                                                                                                                                                                                                                                                               Data Sheet
I2C PROGRAMMING AND DIGITAL CONTROL
The ADP5588 provides full software programmability to                                                                                                                                         Figure 15 shows a typical read sequence for reading back an
facilitate its adoption in various product architectures. All                                                                                                                                 internal register. The cycle begins with a start condition
register programming is done via the I2C bus at Address 0x69                                                                                                                                  followed by the chip write address (0x68). The ADP5588
(01101001) for a read and Address 0x68 (01101000) for a write.                                                                                                                                acknowledges the chip write address byte by pulling the data
                                                                                                                                                                                              line low. The address of the register from which data is to be
All communication to the ADP5588 is done via its I2C-compatible                                                                                                                               read is sent next. The ADP5588 acknowledges the register
serial interface. Figure 14 shows a typical write sequence for                                                                                                                                address byte by pulling the data line low. The cycle continues
programming an internal register. The cycle begins with a start                                                                                                                               with a repeat start followed by the chip read address (0x69). The
condition followed by the chip write address (0x68). The                                                                                                                                      ADP5588 acknowledges the chip read address byte by pulling
ADP5588 acknowledges the chip write address byte by pulling                                                                                                                                   the data line low. The ADP5588 places the contents of the
the data line low. The address of the register to which data is to                                                                                                                            previously addressed register on the bus for readback. There is no
be written is sent next. The ADP5588 acknowledges the register                                                                                                                                acknowledge following the readback data byte, and the cycle is
address byte by pulling the data line low. The data byte to be                                                                                                                                completed with a stop condition.
written is sent next. The ADP5588 acknowledges the data byte
by pulling the data line low. A stop condition completes the
sequence.
                                                                                                               0 = WRITE
                                              ST       0       1             1     0               0       0   0       0         0                                                                                        0                                                                   0 SP
                                                                                                                               ADP5588 ACK                                                                              ADP5588 ACK                                                         ADP5588 ACK
                                                                             CHIP ADDRESS                                                                  SUBADDRESS                                                                       ADP5588 RECEIVES DATA
                                                                                                                                                                                                                                                                                                          07673-019
                                                                                                                                                   Figure 14. I2C Write Sequence
                                                               0 = WRITE                                                                                                                                                                          1 = READ
         ST       0       1       1       0   0        0       0             0     0               0       0   0       0          0                0   1       1         0           ST   0       1       1               0             0     0   0   1      0                                                            1 SP
                                                                                                                                                                                                                                                                                                                       ADP5588 NO ACK
                                                                                 ADP5588 ACK                                                                           ADP5588 ACK                                                                        ADP5588 ACK
                               CHIP ADDRESS                                                                    SUBADDRESS                                                                                 CHIP ADDRESS                                                                ADP5588 SENDS DATA
                                                                                                                                                                                                                                                                                                                                                       07673-020
                                                                                                                           Figure 15. I2C Read and Write Sequences
                                                   0 = WRITE                                                                                                                                  1 = READ
          ST 0        1       1       0   1   0    0       0     0           0   0             0       0   0   0   1       1           0 ST 0              1       1          0      1    0   0       1      0                                                            0 ...                                             1 ST
          START                                                                                                                                                                                                                                                                                                                           STOP
                                                                                                                                                                                                                                                                                                                         ADP5588 NO ACK
                                                               ADP5588 ACK                                                           ADP5588 ACK                                                          ADP5588 ACK                                                   ADP5588 ACK
                              CHIP ADDRESS                                       READ START ADDR                                                               CHIP ADDRESS                                                           ADP5588 SENDS DATA 1                                ADP5588 SENDS DATA N
                                                                                                                                                                                                                                                                                                                                                 07673-021
                                                                                                                                             Figure 16. I2C Read Autoincrement
                                                                                                                                                       Rev. D | Page 14 of 28


Data Sheet                                                                                                                           ADP5588
REGISTERS
The general behavior of registers is as follows:                               •     Interrupt bits are cleared by writing 1 to the flag; writing 0
•    All registers are 0 on reset.                                                   or reading the flag has no effect, with the exception of the
                                                                                     key press, key release, and GPIO interrupt status registers,
•    All registers are read/write unless otherwise specified.
                                                                                     which are cleared on a read.
•    Unused bits are read as 0.
Table 17.
Address                    Register Name                           Description
0x00                       DEV_ID                                  Device ID
0x01                       CFG                                     Configuration Register 1
0x02                       INT_STAT                                Interrupt status register
0x03                       KEY_LCK_EC_STAT                         Keylock and event counter register
0x04                       KEY_EVENTA                              Key Event Register A
0x05                       KEY_EVENTB                              Key Event Register B
0x06                       KEY_EVENTC                              Key Event Register C
0x07                       KEY_EVENTD                              Key Event Register D
0x08                       KEY_EVENTE                              Key Event Register E
0x09                       KEY_EVENTF                              Key Event Register F
0x0A                       KEY_EVENTG                              Key Event Register G
0x0B                       KEY_EVENTH                              Key Event Register H
0x0C                       KEY_EVENTI                              Key Event Register I
0x0D                       KEY_EVENTJ                              Key Event Register J
0x0E                       KP_LCK_TMR                              Keypad Unlock 1 to Keypad Unlock 2 timer
0x0F                       UNLOCK1                                 Unlock Key 1
0x10                       UNLOCK2                                 Unlock Key 2
0x11                       GPIO_INT_STAT1                          GPIO interrupt status
0x12                       GPIO_INT_STAT2                          GPIO interrupt status
0x13                       GPIO_INT_STAT3                          GPIO interrupt status
0x14                       GPIO_DAT_STAT1                          GPIO data status, read twice to clear
0x15                       GPIO_DAT_STAT2                          GPIO data status, read twice to clear
0x16                       GPIO_DAT_STAT3                          GPIO data status, read twice to clear
0x17                       GPIO_DAT_OUT1                           GPIO data out
0x18                       GPIO_DAT_OUT2                           GPIO data out
0x19                       GPIO_DAT_OUT3                           GPIO data out
0x1A                       GPIO_INT_EN1                            GPIO interrupt enable
0x1B                       GPIO_INT_EN2                            GPIO interrupt enable
0x1C                       GPIO_INT_EN3                            GPIO interrupt enable
0x1D                       KP_GPIO1                                Keypad or GPIO selection
0x1E                       KP_GPIO2                                Keypad or GPIO selection
0x1F                       KP_GPIO3                                Keypad or GPIO selection
0x20                       GPI_EM_REG1                             GPI Event Mode 1
0x21                       GPI_EM_REG2                             GPI Event Mode 2
0x22                       GPI_EM_REG3                             GPI Event Mode 3
0x23                       GPIO_DIR1                               GPIO data direction
0x24                       GPIO_DIR2                               GPIO data direction
0x25                       GPIO_DIR3                               GPIO data direction
0x26                       GPIO_INT_LVL1                           GPIO edge/level detect
0x27                       GPIO_INT_LVL2                           GPIO edge/level detect
0x28                       GPIO_INT_LVL3                           GPIO edge/level detect
0x29                       DEBOUNCE_DIS1                           Debounce disable
0x2A                       DEBOUNCE_DIS2                           Debounce disable
0x2B                       DEBOUNCE_DIS3                           Debounce disable
0x2C                       GPIO_PULL1                              GPIO pull disable
0x2D                       GPIO_PULL2                              GPIO pull disable
                                                              Rev. D | Page 15 of 28


ADP5588                                                                                                                       Data Sheet
Address               Register Name                               Description
0x2E                  GPIO_PULL3                                  GPIO pull disable
0x2F                  Not used                                    Not used
0x30                  CMP_CFG_STAT                                Comparator configuration and status register
0x31                  CMP_CONFG_SENS1                             Sensor 1 comparator configuration register
0x32                  CMP_CONFG_SENS2                             Sensor 2 comparator configuration register
0x33                  CMP1_LVL2_TRIP                              L2 light sensor reference level (output falling for Sensor 1)
0x34                  CMP1_LVL2_HYS                               L2 light sensor hysteresis (active when output rising) for Sensor 1
0x35                  CMP1_LVL3_TRIP                              L3 light sensor reference level (output falling for Sensor 1)
0x36                  CMP1_LVL3_HYS                               L3 light sensor hysteresis (active when output rising) for Sensor 1
0x37                  CMP2_LVL2_TRIP                              L2 light sensor reference level (output falling for Sensor 2)
0x38                  CMP2_LVL2_HYS                               L2 light sensor hysteresis (active when output rising) for Sensor 2
0x39                  CMP2_LVL3_TRIP                              L3 light sensor reference level (output falling for Sensor 2)
0x3A                  CMP2_LVL3_HYS                               L3 light sensor hysteresis (active when output rising) for Sensor 2
0x3B                  CMP1_ADC_DAT_R1                             Comparator 1 ADC Data Register 1
0x3C                  CMP1_ADC_DAT_R2                             Comparator 1 ADC Data Register 2
0x3D                  CMP2_ADC_DAT_R1                             Comparator 2 ADC Data Register 1
0x3E                  CMP2_ADC_DAT_R2                             Comparator 2 ADC Data Register 2
REGISTER DESCRIPTIONS
Table 18. DEV_ID—Register 0x00 (Device ID)
Default: 0000 XXXX (where X = don’t care).
Register Name    Register Description                     Bit 7         Bit 6       Bit 5      Bit 4       Bit 3      Bit 2     Bit 1    Bit 0
DEV_ID           Device ID[3:0], MFG ID[7:4]              MFID3         MFID2       MFID1      MFID0       DID3       DID2      DID1     DID0
Table 19. CFG—Register 0x01 (Configuration Register 1)
Field            Bit        Description
AUTO_INC         7          I2C autoincrement. Burst read is supported; burst write is not supported.
                            1: I2C autoincrement is on.
                            0: I2C autoincrement is off.
GPIEM_CFG        6          GPI event mode configuration.
                            1: GPI events are not tracked when the keypad is locked.
                            0: GPI events are tracked when the keypad is locked.
OVR_FLOW_M       5          Overflow mode.
                            1: Overflow mode is on; register overflow data shifts in, starting at the last event and losing first event data.
                            0: Overflow mode is off; register overflow data is lost.
INT_CFG          4          Interrupt configuration.
                            1: Processor interrupt deasserts for 50 μs and reasserts with pending key events.
                            0: Processor interrupt remains asserted when host tries to clear interrupt while there is a pending key event.
OVR_FLOW_IEN     3          Overflow interrupt enable.
                            1: Overflow interrupt is enabled.
                            0: Overflow interrupt is disabled.
K_LCK_IM         2          Keypad lock interrupt mask.
                            1: Keypad lock interrupt is enabled.
                            0: Keypad lock interrupt is disabled.
GPI_IEN          1          GPI interrupt enable.
                            1: GPI interrupt is enabled.
                            0: GPI interrupt is disabled.
KE_IEN           0          Key events interrupt enable.
                            1: Key events interrupt is enabled.
                            0: Key events interrupt is disabled.
                                                             Rev. D | Page 16 of 28


Data Sheet                                                                                                                                                  ADP5588
Table 20. INT_STAT—Register 0x02 (Interrupt Status Register)
Field                                      Bit                Description
CMP2_INT                                   5                  Comparator interrupt status. When set, write 1 to clear.
                                                              1: Comparator 2 interrupt is detected.
                                                              0: Comparator 2 interrupt is not detected.
CMP1_INT                                   4                  Comparator interrupt status. When set, write 1 to clear.
                                                              1: Comparator 1 interrupt is detected.
                                                              0: Comparator 1 interrupt is not detected.
OVR_FLOW_INT1                              3                  Overflow interrupt status. When set, write 1 to clear.
                                                              1: Overflow interrupt is detected.
                                                              0: Overflow interrupt is not detected.
K_LCK_INT2                                 2                  Keylock interrupt status. When set, write 1 to clear.
                                                              1: Keylock interrupt is detected.
                                                              0: Keylock interrupt is not detected.
GPI_INT1, 3                                1                  GPI interrupt status. When set, write 1 to clear.
                                                              1: GPI interrupt is detected.
                                                              0: GPI interrupt is not detected.
KE_INT1, 3                                 0                  Key events interrupt status. When set, write 1 to clear.
                                                              1: Key events interrupt is detected.
                                                              0: Key events interrupt is not detected.
1
  The KE_INT, GPI_INT, and OVR_FLOW_INT bits reflect the status of the interrupts when the interrupt types are enabled even if the processor interrupt is masked.
2
  The K_LCK_INT bit is the interrupt to the processor when the keypad lock sequence is triggered.
3
  If there is a pending key event or GPI interrupt in their respective registers, KE_INT does not clear until the FIFO is empty, and the GPI_INT bit does not clear until the
  cause of the interrupt is resolved. The host must write a 1 to the INT bits to clear.
Table 21. KEY_LCK_EC_STAT—Register 0x03 (Keylock and Event Counter Register)
Field                                      Bit                Description
K_LCK_EN                                   [6]                0: Lock feature is disabled.
                                                              1: Lock feature is enabled.
LCK2, LCK1                                 [5:4]              Keypad lock status[1:0] (00 = unlocked; 11 = locked; read only bits).
KEC1                                       [3:0]              Key event count of key event register.
1
  The KEC bit indicates the key event count of key event registers that have values in the bit (KEC(0000) = 0 events, KEC(0001) = 1 event, KEC(1010) = 10 events. As the
  key events are read and cleared, the state machine automatically reduces the event count on KEC.
Table 22. KEY_EVENTx—Register 0x04 to Register 0x0D (Key Event Register A to Key Event Register J)1
Register Name              Register Description                                            Bit 7        Bit 6       Bit 5     Bit 4      Bit 3     Bit 2     Bit 1       Bit 0
KEY_EVENTA                 Key Event Register A status (KE[6:0] = Key number),             KA7          KA6         KA5       KA4        KA3       KA2       KA1         KA0
(Register 0x04)            KP[7] = 0: released, 1: pressed (cleared on read)
KEY_EVENTB                 Key Event Register B status (KE[6:0] = Key number),             KB7          KB6         KB5       KB4        KB3       KB2       KB1         KB0
(Register 0x05)            KP[7 ]= 0: released, 1: pressed (cleared on read)
KEY_EVENTC                 Key Event Register C status (KE[6:0] = Key number),             KC7          KC6         KC5       KC4        KC3       KC2       KC1         KC0
(Register 0x06)            KP[7] = 0: released, 1: pressed (cleared on read)
KEY_EVENTD                 Key Event Register B status (KE[6:0] = Key number),             KD7          KD6         KD5       KD4        KD3       KD2       Kd1         KD0
(Register 0x07)            KP[7] = 0: released, 1: pressed (cleared on read)
KEY_EVENTE2                Key Event Register B status (KE[6:0] = Key number),             KE7          KE6         KE5       KE4        KE3       KE2       KE1         KE0
(Register 0x08)            KP[7]= 0: released, 1: pressed (cleared on read)
KEY_EVENTF                 Key Event Register B status (KE[6:0] = Key number),             KF7          KF6         KF5       KF4        KF3       KF2       KF1         KF0
(Register 0x09)            KP[7] = 0: released, 1: pressed (cleared on read)
KEY_EVENTG                 Key Event Register B status (KE[6:0] = Key number),             KG7          KG6         KG5       KG4        KG3       KG2       KG1         KG0
(Register 0x0A)            KP[7] = 0: released, 1: pressed (cleared on read)
KEY_EVENTH                 Key Event Register B status (KE[6:0] = Key number),             KH7          KH6         KH5       KH4        KH3       KH2       KH1         KH0
(Register 0x0B)            KP[7] = 0: released, 1: pressed (cleared on read)
                                                                              Rev. D | Page 17 of 28


ADP5588                                                                                                                                                  Data Sheet
Register Name              Register Description                                            Bit 7         Bit 6      Bit 5     Bit 4      Bit 3     Bit 2      Bit 1    Bit 0
KEY_EVENTI                 Key Event Register B status (KE[6:0] = Key number),             KI7           KI6        KI5       KI4        KI3       KI2        KI1      KI0
(Register 0x0C)            KP[7] = 0: released, 1: pressed (cleared on read)
KEY_EVENTJ                 Key Event Register B status (KE[6:0] = Key number),             KJ7           KJ6        KJ5       KJ4        KJ3       KJ2        KJ1      KJ0
(Register 0x0D)            KP[7] = 0: released, 1: pressed (cleared on read)
1
  Data in key events is provided as a FIFO, where data is sequentially provided on each read, regardless of an event register read. The user can read register Event A only
  for an event count or can read registers sequentially.
2
  KE[6:0] reflects the value 1 to 80 for key press events and the value 97 to 114 for GPI events. For KE[7:0], 0 = key released event, 1 = key pressed event. For GPIEM_CFG,
  0 reflects a change in the GPI from GPI_INT_LVL = true to GPI_INT_LVL = false; 1 reflects a change in the GPI in which the GPI_INT_LVL condition becomes true.
Table 23. KP_LCK_TMR—Register 0x0E (Keypad Unlock 1 to Keypad Unlock 2 Timer)
Register Name              Register Description                                      Bit 7         Bit 6       Bit 5       Bit 4       Bit 3      Bit 2     Bit 1      Bit 0
KP_LCK_TMR                 Keypad UnLock 1 to Keypad UnLock 2 timer[2:0]             KIMT7         KIMT6       KIMT5       KIMT4       KIMT3      KLLT2     KLLT1      KLLT0
(Register 0x0E)            (0: disabled, 1 sec to 7 sec)
                           Keypad Lock Interrupt Mask Timer[7:3]
                           (0: disabled, 0 sec to 31 sec)1, 2
1
  When the keypad lock interrupt mask timer is enabled, the user must press two specific keys before a keylock interrupt is generated or keypad events are recorded.
  After the keypad is locked, the first time that the user presses any key, a key event interrupt is generated. No additional interrupt is generated unless both unlock key
  sequences are correct; then a keylock interrupt is generated. When the interrupt mask timer is disabled (0), an interrupt is generated only when the correct full unlock
  sequence is completed.
2
  The Unlock 1 and Unlock 2 timer keys can be either a key sequence or GPIEM_CFG sequence. The unlock timer keys can be programmed with any value of the keys in
  the keypad matrix or any GPI values that are part of the key event table. The keylock enable bit (Bit 6, Register 0x03) must be set to lock the keypad.
Table 24. UNLOCK1—Register 0x0F (Unlock Key 1)
Register Name              Register Description                                   Bit 7       Bit 6        Bit 5       Bit 4       Bit 3       Bit 2      Bit 1       Bit 0
UNLOCK1                    Unlock Key 1[6:0] (contains key number                 N/A         ULK6         ULK5        ULK4        ULK3        ULK2       ULK1        ULK0
(Register 0x0F)            for Unlock Key 1; 0: disabled)
Table 25. UNLOCK2—Register 0x10 (Unlock Key 2)
Register Name              Register Description                                   Bit 7       Bit 6        Bit 5       Bit 4       Bit 3       Bit 2      Bit 1       Bit 0
UNLOCK2                    Unlock Key 2[6:0] (contains key number                 N/A         ULK6         ULK5        ULK4        ULK3        ULK2       ULK1        ULK0
(Register 0x10)            for Unlock Key 2; 0: disabled)
Table 26. GPIO_INT_STATx—Register 0x11 to Register 0x13 (GPIO Interrupt Status)
Register Name              Register Description                                   Bit 7       Bit 6        Bit 5       Bit 4       Bit 3       Bit 2      Bit 1       Bit 0
GPIO_INT_STAT1             GPIO interrupt status (used to check                   R7IS        R6IS         R5IS        R4IS        R3IS        R2IS       R1IS        R0IS
(Register 0x11)            GPIO interrupt status, cleared on read)
GPIO_INT_STAT2             GPIO interrupt status (used to check                   C7IS        C6IS         C5IS        C4IS        C3IS        C2IS       C1IS        C0IS
(Register 0x12)            GPIO interrupt status, cleared on read)
GPIO_INT_STAT3             GPIO interrupt status (used to check                   N/A         N/A          N/A         N/A         N/A         N/A        C9IS        C8IS
(Register 0x13)            GPIO interrupt status, cleared on read)
Table 27. GPIO_DAT_STATx—Register 0x14 to Register 0x16 (GPIO Data Status)
Register Name              Register Description                                   Bit 7       Bit 6        Bit 5       Bit 4       Bit 3       Bit 2      Bit 1       Bit 0
GPIO_DAT_STAT1             GPIO data status (shows GPIO state                     R7DS        R6DS         R5DS        R4DS        R3DS        R2DS       R1DS        R0DS
(Register 0x14)            when read for inputs)
GPIO_DAT_STAT2             GPIO data status (shows GPIO state                     C7DS        C6DS         C5DS        C4DS        C3DS        C2DS       C1DS        C0DS
(Register 0x15)            when read for inputs)
GPIO_DAT_STAT3             GPIO data status (shows GPIO state                     N/A         N/A          N/A         N/A         N/A         N/A        C9DS        C8DS
(Register 0x16)            when read for inputs)
                                                                              Rev. D | Page 18 of 28


Data Sheet                                                                                                   ADP5588
Table 28. GPIO_DAT_OUTx—Register 0x17 to Register 0x19 (GPIO Data Out)
Register Name    Register Description                         Bit 7        Bit 6   Bit 5 Bit 4 Bit 3 Bit 2 Bit 1 Bit 0
GPIO_DAT_OUT1    GPIO data out (GPIO data to be written to    R7DO         R6DO    R5DO  R4DO  R3DO  R2DO  R1DO  R0DO
(Register 0x17)  GPIO out driver, inputs are not affected).
                 This is needed so that the value can be
                 written prior to being set as an output.
GPIO_DAT_OUT2    GPIO data out (GPIO data to be written to    C7DO         C6DO    C5DO  C4DO  C3DO  C2DO  C1DO  C0DO
(Register 0x18)  GPIO out driver, inputs are not affected).
                 This is needed so that the value can be
                 written prior to being set as an output.
GPIO_DAT_OUT3    GPIO data out (GPIO data to be written to    N/A          N/A     N/A   N/A   N/A   N/A   C9DO  C8DO
(Register 0x19)  GPIO out driver, inputs are not affected).
                 This is needed so that the value can be
                 written prior to being set as an output.
Table 29. GPIO_INT_ENx—Register 0x1A to Register 0x1C (GPIO Interrupt Enable)
Register Name    Register Description                         Bit 7        Bit 6   Bit 5 Bit 4 Bit 3 Bit 2 Bit 1 Bit 0
GPIO_INT_EN1     GPIO interrupt enable (enables               R7IE         R6IE    R5IE  R4IE  R3IE  R2IE  R1IE  R0IE
(Register 0x1A)  interrupts for GP inputs only)
GPIO_INT_EN2     GPIO interrupt enable (enables               C7IE         C6IE    C5IE  C4IE  C3IE  C2IE  C1IE  C0IE
(Register 0x1B)  interrupts for GP inputs only)
GPIO_INT_EN3     GPIO interrupt enable (enables               N/A          N/A     N/A   N/A   N/A   N/A   C9IE  C8IE
(Register 0x1C)  interrupts for GP inputs only)
Table 30. KP_GPIOx—Register 0x1D to Register 0x1F (Keypad or GPIO Selection)
Register Name    Register Description                         Bit 7        Bit 6   Bit 5 Bit 4 Bit 3 Bit 2 Bit 1 Bit 0
KP_GPIO1         Keypad or GPIO selection                     R7           R6      R5    R4    R3    R2    R1    R0
(Register 0x1D)  0: GPIO
                 1: KP matrix
KP_GPIO2         Keypad or GPIO selection                     C7           C6      C5    C4    C3    C2    C1    C0
(Register 0x1E)  0: GPIO
                 1: KP matrix
KP_GPIO3         Keypad or GPIO selection                     N/A          N/A     N/A   N/A   N/A   N/A   C9    C8
(Register 0x1F)  0: GPIO
                 1: KP matrix
Table 31. GPI_EM_REGx—Register 0x20 to Register 0x22 (GPI Event Mode 1 to GPI Event Mode 3)
Register Name    Register Description                         Bit 7        Bit 6   Bit   Bit 4 Bit 3 Bit 2 Bit 1 Bit 0
GPI_EM_REG1      GPI Event Mode Register 1                    R7_EM        R6_EM   R5_EM R4_EM R3_EM R2_EM R1_EM R0_EM
(Register 0x20)  0: GPI not part of event FIFO
                 1: GPI part of event FIFO (R0 to R7)
GPI_EM_REG2      GPI Event Mode Register 2                    C7_EM        C6_EM   C5_EM C4_EM C3_EM C2_EM C1_EM C0_EM
(Register 0x21)  0: GPI not part of event FIFO
                 1: GPI part of event FIFO (C0 to C7)
GPI_EM_REG3      GPI Event Mode Register 3                    NA           NA      NA    NA    NA    NA    C9_EM C8_EM
(Register 0x22)  0: GPI not part of event FIFO
                 1: GPI part of event FIFO (C8 to C9)
                                                            Rev. D | Page 19 of 28


ADP5588                                                                                                              Data Sheet
Table 32. GPIO_DIRx—Register 0x23 to Register 0x25 (GPIO Data Direction)
Register Name         Register Description                                Bit 7     Bit 6   Bit 5  Bit 4 Bit 3 Bit 2  Bit 1 Bit 0
GPIO_DIR1             GPIO data direction                                 R7D       R6D     R5D    R4D   R3D   R2D    R1D   R0D
(Register 0x23)       0: GPIO
                      1: Output
GPIO_DIR2             GPIO data direction                                 C7D       C6D     C5D    C4D   C3D   C2D    C1D   C0D
(Register 0x24)       0: GPIO
                      1: Output
GPIO_DIR3             GPIO data direction                                 N/A       N/A     N/A    N/A   N/A   N/A    C9D   C8D
(Register 0x25)       0: GPIO
                      1: Output
Table 33. GPIO_INT_LVLx—Register 0x26 to Register 0x28 (GPIO Edge/Level Detect)
Register Name         Register Description                                Bit 7     Bit 6   Bit 5  Bit 4 Bit 3 Bit 2  Bit 1 Bit 0
GPIO_INT_LVL1         GPIO INT level detect                               R7IL      R6IL    R5IL   R4IL  R3IL  R2IL   R1IL  R0IL
(Register 0x26)       0: Low
                      1: High
GPIO_INT_LVL2         GPIO INT level detect                               C7IL      C6IL    C5IL   C4IL  C3IL  C2IL   C1IL  C0IL
(Register 0x27)       0: Low
                      1: High
GPIO_INT_LVL3         GPIO INT level detect                               N/A       N/A      N/A   N/A   N/A   N/A    C9IL  C8IL
(Register 0x28)       0: Low
                      1: High
Table 34. DEBOUNCE_DISx—Register 0x29 to Register 0x2B (Debounce Disable)
Register Name         Register Description                                Bit 7     Bit 6   Bit 5  Bit 4 Bit 3 Bit 2  Bit 1 Bit 0
DEBOUNCE_DIS1         Debounce disable (inputs)                           R7DD      R6DD    R5DD   R4DD  R3DD  R2DD   R1DD  R0DD
(Register 0x29)       0: Enabled
                      1: Disabled
DEBOUNCE_DIS2         Debounce disable (inputs)                           C7DD      C6DD    C5DD   C4DD  C3DD  C2DD   C1DD  C0DD
(Register 0x2A)       0: Enabled
                      1: Disabled
DEBOUNCE_DIS3         Debounce disable (inputs)                           N/A       N/A     N/A    N/A   N/A   N/A    C9DD  C8DD
(Register 0x2B)       0: Enabled
                      1: Disabled
Table 35. GPIO_PULLx—Register 0x2C to Register 0x2E (GPIO Pull Disable)
Register Name         Register Description                                Bit 7     Bit 6   Bit 5  Bit 4 Bit 3 Bit 2  Bit 1 Bit 0
GPIO_PULL1            GPIO pull disable (remove pull-ups from inputs)     R7PD      R6PD    R5PD   R4PD  R3PD  R2PD   R1PD  R0PD
(Register 0x2C)       0: Pull enabled
                      1: Pull disabled
GPIO_PULL2            GPIO pull disable (remove pull-ups from inputs)     C7PD      C6PD    C5PD   C4PD  C3PD  C2PD   C1PD  C0PD
(Register 0x2D)       0: Pull enabled
                      1: Pull disabled
GPIO_PULL3            GPIO pull disable (remove pull-ups from inputs)     N/A       N/A     N/A    N/A   N/A   N/A    C9PD  C8PD
(Register 0x2E)       0: Pull enabled
                      1: Pull disabled
Table 36. Register 0x2F
Field                                             Bit                                  Description
Not Used                                          N/A                                  Not used
                                                             Rev. D | Page 20 of 28


Data Sheet                                                                                                                                            ADP5588
COMPARATOR REGISTER DESCRIPTIONS
Table 37. CMP_CFG_STAT—Register 0x30 (Comparator Configuration and Status Register)
Field                Bit                  Description
CMP2_L3_OUT          7                    Sensor 2 Comparator L3 output.
                                          0: Ambient light is greater than Level 3 (dark).
                                          1: L3_CMP has detected a change in ambient light from Level 2 (office) to L3 (dark).
CMP2_L2_OUT          6                    Sensor 2 Comparator L2 output.
                                          0: Ambient light is greater than Level 2 (office).
                                          1: L2_CMP has detected a change in ambient light from Level 1 (outdoor) to L2 (office).
CMP1_L3_OUT          5                    Sensor 1 Comparator L3 output.
                                          0: Ambient light is greater than Level 3 (dark).
                                          1: L3_CMP has detected a change in ambient light from Level 2 (office) to L3 (dark).
CMP1_L2_OUT          4                    Sensor 1 Comparator L2 output.
                                          0: Ambient light is greater than Level 2 (office).
                                          1: L2_CMP has detected a change in ambient light from Level 1 (outdoor) to L2 (office).
CMP2_IEN             3                    Sensor 2 comparator interrupt.
                                          0: Interrupt disabled.
                                          1: Interrupt enabled.
CMP1_IEN             2                    Sensor 1 comparator interrupt.
                                          0: Interrupt disabled.
                                          1: Interrupt enabled.
CMP2_EN              1                    Sensor 2 comparator input.
                                          0: Input disabled.
                                          1: Input enabled.
CMP1_EN              0                    Sensor 1 comparator input.
                                          0: Input disabled.
                                          1: Input enabled.
Table 38. CMP_CONFG_SENS1—Register 0x31 (Sensor 1 Comparator Configuration Register)
Field                Bit                  Description
                     [7:6]                Not used.
FILT (2-0)           [5:3]                Programs the number of consecutive measurements required to transition the L2 and L3 levels.
                                          FILT                                         Number Required                            Approximate Time (sec)
                                          000                                          1                                          0.08
                                          001                                          2                                          0.16
                                          010                                          4                                          0.32
                                          011                                          8                                          0.64
                                          100                                          16                                         1.28
                                          101                                          32                                         2.56
                                          110                                          64                                         5.12
                                          111                                          128                                        10.24
FORCE_RD             2                    1: Forces a read of the light sensor; reset by the internal state machine after conversion is complete and
                                          L2_OUT and L3_OUT are valid.1
L3_EN                1                    1: Enables the L3 comparator for Sensor 1 input.
                                          0: Disables the L3 comparator for Sensor 1 input.
L2_EN                0                    1: Enables the L2 comparator for Sensor 1 input.
                                          0: Disables the L2 comparator for Sensor 1 input.
                                          Note that the L3 comparator has priority over the L2 comparator.
1
  When the software forces a conversion, the state machine clears the forced bit after the conversion is done and the proper registers have been updated.
                                                                          Rev. D | Page 21 of 28


ADP5588                                                                                                                                            Data Sheet
Table 39. CMP_CONFG_SENS2—Register 0x32 (Sensor 2 Comparator Configuration Register)
Field           Bit           Description
                [7:6]         Not used.
FILT (2-0)      [5:3]         Programs the number of consecutive measurements required to transition the L2 and L3 levels.
                              FILT                                    Number Required                                   Approximate Time (sec)
                              000                                     1                                                 0.08
                              001                                     2                                                 0.16
                              010                                     4                                                 0.32
                              011                                     8                                                 0.64
                              100                                     16                                                1.28
                              101                                     32                                                2.56
                              110                                     64                                                5.12
                              111                                     128                                               10.24
FORCE_RD        2             1: Forces a read of the light sensor; reset by the internal state machine after conversion is complete and
                              L2_OUT and L3_OUT are valid.1
L3_EN           1             1: Enables the L3 comparator for Sensor 2 input.
                              0: Disables the L3 comparator for Sensor 2 input.
L2_EN            0            1: Enables the L3 comparator for Sensor 2 input.
                              0: Disables the L3 comparator for Sensor 2 input.
                              Note that the L3 comparator has priority over the L2 comparator.
1
  When the software forces a conversion, the state machine clears the forced bit after the conversion is complete and the proper registers have been updated.
Table 40. CMP1_LVL2_TRIP—Register 0x33 (L2 Light Sensor Reference Level (Output Falling for Sensor 1)
Field                  Bit          Description
L2_T7 to L2_T0         [7:0]        Sensor 1 comparator Level 2 (Office) reference. If the comparator input is below this trip point, the
                                    comparator trips and enters Level 2 (office) mode and L2_OUT is set. The programmable range is from 0 μA
                                    to 1000 μA (0 lux to 2550 lux) in steps of 4 μA.
Table 41. CMP1_LVL2_HYS—Register 0x34 (L2 Light Sensor Hysteresis (Active When Output Rising) for Sensor 1)
Field                  Bit           Description
L2_H7 to L2_H0         [7:0]         Sensor 1 comparator Level 2 (Office) hysteresis. If the comparator input is above L2_TRP + L2_HYS, the
                                     comparator trips and enters Level 1 (outdoor) mode and L2_OUT is cleared. The programmable range is from
                                     0 μA to 1000 μA (0 lux to 2550 lux) in steps of 4 μA.
Table 42. CMP1_LVL3_TRIP—Register 0x35 (L3 Light Sensor Reference Level (Output Falling for Sensor 1)
Field                  Bit          Description
L3_T7 to L3_T0         [7:0]        Sensor 1 comparator Level 3 (Dark) reference. If the comparator input is below L3_TRP, the comparator trips
                                    and enters Level 3 (dark) mode and L3_OUT is set. The programmable range is from 0 μA to 127.5 μA (0 lux to
                                    318.75 lux) in steps of 0.5 μA.
Table 43. CMP1_LVL3_HYS—Register 0x36 (L3 Light Sensor Hysteresis (Active When Output Rising) for Sensor 1)
Field                  Bit          Description
L3_H                   [7:0]        Sensor 1 comparator Level 3 (Dark) hysteresis. If the comparator input is above L3_TRP + L3_HYS, the
                                    comparator trips and enters Level 2 (office) mode and L3_OUT is cleared. The programmable range is from
                                    0 μA to 127.5 μA (0 lux to 318.75 lux) in steps of 0.5 μA.
                                                                          Rev. D | Page 22 of 28


Data Sheet                                                                                                                             ADP5588
Table 44. CMP2_LVL2_TRIP—Register 0x37 (L2 Light Sensor Reference Level (Output Falling for Sensor 2)
Field                   Bit          Description
L2_T7 to L2_T0          [7:0]        Sensor 2 comparator Level 2 (Office) reference. If the comparator input is below this trip point, the
                                     comparator trips and enters Level 2 (office) mode and L2_OUT is set. The programmable range is from 0 μA to
                                     1000 μA (0 lux to 2550 lux) in steps of 4 μA.
Table 45. CMP2_LVL2_HYS—Register 0x38 (L2 Light Sensor Hysteresis (Active When Output Rising) for Sensor 2)
Field                   Bit           Description
L2_H7 to L2_H0          [7:0]         Sensor 2 comparator Level 2 (Office) hysteresis. If the comparator input is above L2_TRP + L2_HYS, the
                                      comparator trips and enters Level 1 (outdoor) mode and L2_OUT is cleared. The programmable range is from
                                      0 μA to 1000 μA (0 lux to 2550 lux) in steps of 4 μA.
Table 46. CMP2_LVL3_TRIP—Register 0x39 (L3 Light Sensor Reference Level (Output Falling for Sensor 2)
Field                   Bit          Description
L3_T7 to L3_T0          [7:0]        Sensor 2 Comparator Level 3 (Dark) Reference. If the comparator input is below L3_TRP, the comparator trips
                                     and enters Level 3 (dark) mode and L3_OUT is set. The programmable range is from 0 μA to 127.5 μA (0 lux to
                                     318.75 lux) in steps of 0.5 μA.
Table 47. CMP2_LVL3_HYS—Register 0x3A (L3 Light Sensor Hysteresis (Active When Output Rising) for Sensor 2)
Field                   Bit          Description
L3_H                    [7:0]        Sensor 2 comparator Level 3 (Dark) hysteresis. If the comparator input is above L3_TRP + L3_HYS, the
                                     comparator trips and enters Level 2 (office) mode and L3_OUT is cleared. The programmable range is from
                                     0 μA to 127.5 μA (0 lux to 318.75 lux) in steps of -.5 μA.
Table 48. CMP1_ADC_DAT_R1—Register 0x3B (Comparator 1 ADC Data Register 1)
Register Name                 Register Description                       Bit 7        Bit 6      Bit 5 Bit 4  Bit 3      Bit 2     Bit 1    Bit 0
CMP1_ADC_DAT                  Comparator ADC data register,              NA           NA         NA    ADC12  ADC11      ADC10     ADC9     ADC8
                              Bits[7:0]
Table 49. CMP1_ADC_DAT_R2—Register 0x3C (Comparator 1 ADC Data Register 2)1
Register Name                 Register Description                       Bit 7        Bit 6      Bit 5 Bit 4  Bit 3      Bit 2     Bit 1    Bit 0
CMP1_ADC_DAT                  Comparator ADC data register,              ADC7         ADC6       ADC5  ADC4   ADC3       ADC2      ADC1     ADC0
                              Bits[7:0]
1
  Read-only register; contains the most current 13-bit ADC data of the comparator for Sensor 1.
Table 50. CMP2_ADC_DAT_R1—Register 0x3D (Comparator 2 ADC Data Register 1)
Register Name                Register Description                        Bit 7        Bit 6      Bit 5 Bit 4  Bit 3      Bit 2     Bit 1    Bit 0
CMP1_ADC_DAT                 Comparator ADC Data Register                N/A          N/A              ADC12  ADC11      ADC10     ADC9     ADC8
                             [7:0]
Table 51. CMP2_ADC_DAT_R2—Register 0x3E (Comparator 2 ADC Data Register 2)1
Register Name                 Register Description                       Bit 7        Bit 6      Bit 5 Bit 4  Bit 3      Bit 2     Bit 1    Bit 0
CMP1_ADC_DAT                  Comparator ADC data register,              ADC7         ADC6       ADC5  ADC    ADC3       ADC2      ADC1     ADC0
                              Bits[7:0]
1
  Read-only register; contains the most current 13-bit ADC data of the comparator for Sensor 2.
                                                                          Rev. D | Page 23 of 28


ADP5588                                                                                                                                                                       Data Sheet
APPLICATIONS INFORMATION
                                              GND                                                               REF                        ADP5588
                                                     19                                                       VOLTAGE
                         VCC
                                              VCC                                                                                                                            VCC
                                                     21
                                                                                                                                                             C9
                                              SCL                                                                                                       18
                                                     23
                                                                                                                                C9                C9                0.1µF
                                              SDA                CONTROL
                                                     22         REGISTERS               CONTROL
                                                                                       INTERFACE                REF             C8                C8
                                              RST                                                             VOLTAGE                                        C8
                                                     20
                                                                                                                                                        17
                                               INT                                                                                                                0.1µF
                                                     24
                                SCL
                                SDA
                                                          1     2     3     4     5     6     7     8     9    10    11    12    13    14    15    16
                 HOST           RST
              PROCESSOR         INT                   R7       R6    R5    R4    R3    R2    R1    R0    C0   C1    C2    C3    C4    C5    C6    C7
                                       VCC
                                             GPL1
                                             VCC                                                                                                        ENABLE 2 (GPO)
                                                GPL2
                                                                                                                                                          BACKLIGHT
                                                          A7 A6 A5 A4 A3 A2 A1 A0                                                                        ENABLE (GPO)       BACKLIGHT
                                                                                                                                                                             DRIVER
                                                          B7 B6 B5 B4 B3 B2 B1 B0
                                                          C7 C6 C5 C4 C3 C2 C1 C0
                                                          D7 D6 D5 D4 D3 D2 D1 D0
                                                          E7 E6 E5 E4 E3 E2 E1 E0
                                                          F7 F6 F5 F4 F3 F2 F1 F0
                                                          G7 G6 G5 G4 G3 G2 G1 G0
                                                          H7 H6 H5 H4 H3 H2 H1 H0
                                                          I7    I6    I5    I4    I3    I2    I1    I0
                                                          J7 J6       J5 J4 J3 J2 J1 J0
                                  PWM OUTPUT                                                                                                                                            07673-022
                                                                    Figure 17. ADP5588 Detailed Application Block Diagram
APPLICATIONS OVERVIEW                                                                                               BACKLIGHT CONTROL APPLICATION
The ADP5588 is designed to complement host processors in a                                                          Although the ADP5588 is not designed with a backlight driver,
variety of ways. Its versatility makes it the ideal solution for                                                    the built-in light sensor comparator inputs, with programmable
mobile platforms that require extended keypads and GPIO                                                             registers and trip points, give the backlight designer all the
expanders. The programmable registers give the designer the                                                         necessary tools to control the backlight based on lighting con-
flexibility to configure any or all its GPIOs in a variety of ways.                                                 ditions or environment. With a few I2C commands, the designer
Figure 17 shows a detailed application diagram.                                                                     can program the device to monitor lighting conditions and
KEYPAD CURRENT                                                                                                      trigger an interrupt based on preset trip points. Once program-
                                                                                                                    med, the state machine uses these trip points and hysteresis
Keypad current drain varies based on how many keys and how
                                                                                                                    values to alert the microprocessor of any change in lighting
many rows and columns are pressed during multiple key presses.
                                                                                                                    conditions. In addition to the L2_OUT and L3_OUT bits, four
Table 52 shows typical current drain for a single press and for
                                                                                                                    additional registers (Register 0x3B through Register 0x3E, two
two key presses.
                                                                                                                    registers per light sensor) provide detailed accounts of the
Table 52. Typical Current Drain                                                                                     internal ADC due to light condition changes. The ADC has a
Key Presses            Conditions1                        Typical                Unit                               full-scale current of 1000 μA and a dynamic range of 8000,
1                      VCC = 1.8 V to 3.0 V               55                     μA                                 which translates to 0.125 μA or 0.3125 lux per step. These two
2                      VCC = 1.8 V to 3.0 V               100                    μA                                 corresponding registers per sensor form a 13-bit register that
1
    TA = TJ = −40°C to +85°C.
                                                                                                                    can be read to provide detailed translation of the light sensor
                                                                                                                    input at any instant.
                                                                                             Rev. D | Page 24 of 28


Data Sheet                                                                                              ADP5588
                                                                    KEYPAD MATRIX
                                                          A0 B0 C0 D0 E0 F0 G0 H0 I0   J0
                                                          A1 B1 C1 D1 E1 F1 G1 H1 I1   J1
                                                          A2 B2 C2 D2 E2 F2 G2 H2 I2   J2
                                                          A3 B3 C3 D3 E3 F3 G3 H3 I3   J3
                          VCC
                                                          A4 B4 C4 D4 E4 F4 G4 H4 I4   J4
                            LIGHT                         A5 B5 C5 D5 E5 F5 G5 H5 I5   J5
                         SENSORS
                                                          A6 B6 C6 D6 E6 F6 G6 H6 I6   J6
                                                          A7 B7 C7 D7 E7 F7 G7 H7 I7   J7
                            I2C
                HOST        INT
             PROCESSOR
                                      ADP5588
                           RST
                                                                    EXPANDED
                                             BACKLIGHT                GPIOs
                                             ENABLE
                                                                                            07673-023
                 PWM                  BACKLIGHT
                                                                    BACKLIGHT
                                       DRIVER
                                    Figure 18. Integration Block Diagram
                                           Rev. D | Page 25 of 28


ADP5588                                                                                                                                                                                   Data Sheet
OUTLINE DIMENSIONS
                                                                                                                                     DETAIL A
                                                                                                                                    (JEDEC 95)
                                                              4.10                           0.30
                                                              4.00 SQ                        0.25
                                                  PIN 1
                                             INDICATOR        3.90                           0.20
                                                  AREA
                                                                                                                      24           P IN 1
                                                                                                   19
                                                                                                                                   IN D IC ATO R AR E A OP T IO N S
                                                                                              18                           1       (SEE DETAIL A)
                                                                                     0.50
                                                                                     BSC                                                 2.20
                                                                                                          EXPOSED
                                                                                                            PAD                          2.10 SQ
                                                                                                                                         2.00
                                                                                              13                               6
                                                                                    0.50           12                 7
                                                                                                                                       0.20 MIN
                                                             TOP VIEW                                   BOTTOM VIEW
                                                                                    0.40
                                                                                    0.30
                                                                                                             FOR PROPER CONNECTION OF
                                                  0.80                                                       THE EXPOSED PAD, REFER TO
                                                  0.75       SIDE VIEW                                       THE PIN CONFIGURATION AND
                                                                                    0.05 MAX                 FUNCTION DESCRIPTIONS
                                                  0.70
                                                                                    0.02 NOM                 SECTION OF THIS DATA SHEET.
                                                                                      COPLANARITY
                                             SEATING                                       0.08
                                              PLANE                             0.203 REF
                               PKG-004714
                                                                                                                                                                      09-07-2018-B
                                                              COMPLIANT TO JEDEC STANDARDS MO-220-WGGD-8
                                                          Figure 19. 24-Lead Lead Frame Chip Scale Package [LFCSP]
                                                              4 mm × 4 mm Body and 0.75 mm Package Height
                                                                                  (CP-24-10)
                                                                       Dimensions shown in millimeters
ORDERING GUIDE
Model1                                      Temperature Range            Package Description                                                                                         Package Option
ADP5588ACPZ-R7                              −40°C to +85°C               24-Lead Lead Frame Chip Scale Package [LFCSP]                                                               CP-24-10
ADP5588-EVALZ                                                            Evaluation Board
1
    Z = RoHS Compliant Part.
                                                                             Rev. D | Page 26 of 28


Data Sheet                        ADP5588
NOTES
           Rev. D | Page 27 of 28


ADP5588                                                                                    Data Sheet
NOTES
©2008–2019 Analog Devices, Inc. All rights reserved. Trademarks and
registered trademarks are the property of their respective owners.
                                                  D07673-0-10/19(D)
                                                                    Rev. D | Page 28 of 28


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Analog Devices Inc.:
 ADP5588ACPZ-R7 ADP5588-EVALZ
