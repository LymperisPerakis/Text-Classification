                                                                                               SX1508B/SX1509B
                                                                 World’s Lowest Voltage Level Shifting GPIO
                                                                         with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
SX1508B/SX1509B
World’s Lowest Voltage Level Shifting GPIO with LED Driver and Keypad Engine
GENERAL DESCRIPTION                                          KEY PRODUCT FEATURES
The SX1508B and SX1509B are complete ultra low               •   1.2V to 3.6V Low Operating Voltage with Dual
voltage General Purpose parallel Input/Output (GPIO)             Independent I/O Rails (VCC1, VCC2)
expanders ideal for low power handheld battery                    Enable Direct Level Shifting Between I/O
powered equipment. This family of GPIOs comes in                       Banks and Host Controller
8-, 16-channel configuration and allows easy serial
                                                   2         •   5.5V Tolerant I/Os, Up to 15mA Output Sink on
expansion of I/O through a standard 400kHz I C
                                                                 All I/Os (No Total Sink Current Limit)
interface. GPIO devices can provide additional control
and monitoring when the microcontroller or chipset           •   Integrated LED Driver for Enhanced Lighting
has insufficient I/O ports, or in systems where serial            Intensity Control (256-step PWM)
communication and control from a remote location is               Blink Control (224 On/Off values)
advantageous.                                                     Breathing Control (224 Fade In/Out values)
These devices can also act as a level shifter to             •   On-Chip Keypad Scanning Engine
connect a microcontroller running at one voltage level            Support Up to 8x8 Matrix (64 Keys)
to a component running at a different voltage level,
                                                                  Configurable Input Debouncer
thus eliminating the need for extra level translating
circuits. The core is operating as low as 1.425V while       •   8/16 Channels of True Bi-directional Style I/O
the dual I/O banks can operate between 1.2V and                   Programmable Pull-up/Pull-down
3.6V independent of the core voltage and each other               Push/Pull or Open-drain outputs
(5.5V tolerant).                                                  Programmable Polarity
The SX1508B and SX1509B feature a fully                      •   Open Drain Active Low Interrupt Output (NINT)
programmable LED Driver with internal oscillator for              Bit Maskable
enhanced lighting control such as intensity (via 256-
step PWM), blinking and breathing (fade in/out) make              Programmable Edge Sensitivity
them highly versatile for a wide range of LED                •   Built-in Clock Management (Internal 2MHz
applications.                                                    Oscillator/External Clock Input, 7 clock values)
In addition, keypad applications are also supported               OSCIO can be Configured as GPO
                                                             •
                                                                           2
with an on-chip scanning engine that enables                     400kHz I C Compatible Slave Interface
continuous keypad monitoring up to 64 keys without           •   4 User-Selectable I²C Slave Addresses
any additional host interaction reducing bus activity.
                                                             •   Power-On Reset and Reset Input (NRESET)
The SX1508B and SX1509B have the ability to                  •   Ultra Low Current Consumption: 1uA Typ
generate mask-programmable interrupts based on a
falling/rising edge of any of its GPIO lines. A              •   -40°C to +85°C Operating Temperature Range
dedicated pin (NINT) indicates to a host controller          •   Up to 2kV HBM ESD Protection
that a state change occurred on one or more of the           •   Small Footprint Packages
lines. Each GPIO is programmable via a bank of 8-bit
                                                             •   Pb & Halogen Free, RoHS/WEEE compliant
configuration registers that include data, direction,
pull-up/pull-down, interrupt mask and interrupt              TYPICAL APPLICATIONS
registers. These I/O expanders feature small footprint
packages and are rated from -40°C to +85°C                   •   Cell phones, PDAs, MP3 players
temperature range.                                           •   Digital camera, Notebooks, GPS Units
                                                             •   Any battery powered equipment
ORDERING INFORMATION
  Part Number        I/Os     Package        Marking
                                                                                                  OSCIO
 SX1508BIULTRT         8     QFN-UT-20        GAA2                                                                              LEVEL SHIFTING
 SX1509BIULTRT        16     QFN-UT-28        GBA3                                                                  VCC1
                                                                                                                  1.2 - 3.6V
  SX1508BEVK           8    Evaluation Kit      -                                                                   IO0
                                                                                                                    IO1
                                                                                 VDDM
  SX1509BEVK          16    Evaluation Kit      -                             1.425 - 3.6V
                                                                                                                    IO2
                                                                                                                    IO3
                                                                   Host                                                         FULL LED DRIVE
                                                                 Controller        I2C
                                                                                  NINT
                                                                                             SX1508B                VCC2
                                                                                                                  1.2 - 3.6V
                                                                                NRESET                              IO4
                                                                                                                    IO5
                                                                                                                    IO6
                                                                                                                    IO7        KEYPAD SCANNING
                                                                                               ADDR0      ADDR1
                                                                                                                               BUTTON CONTROL
          th
Rev 4 – 26 April 2011                                    1                                                        www.semtech.com


                                                                                                       SX1508B/SX1509B
                                                                            World’s Lowest Voltage Level Shifting GPIO
                                                                                        with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
                                               Table of Contents
GENERAL DESCRIPTION ..................................................................................................................... 1
ORDERING INFORMATION................................................................................................................... 1
KEY PRODUCT FEATURES.................................................................................................................. 1
TYPICAL APPLICATIONS ..................................................................................................................... 1
1     PIN DESCRIPTION ...................................................................................................................... 4
                                   2
  1.1       SX1508B 8-channel I C GPIO with LED Driver and Keypad Engine                                                                     4
                                     2
  1.2       SX1509B 16-channel I C GPIO with LED Driver and Keypad Engine                                                                    5
  1.3       I/Os Feature Summary                                                                                                             6
2     ELECTRICAL CHARACTERISTICS ............................................................................................... 7
  2.1       Absolute Maximum Ratings                                                                                                         7
  2.2       Electrical Specifications                                                                                                        7
3     TYPICAL OPERATING CHARACTERISTICS ............................................................................... 10
4     BLOCK DETAILED DESCRIPTION ............................................................................................. 11
                                   2
  4.1       SX1508B 8-channel I C GPIO with LED Driver and Keypad Engine                                                                   11
                                     2
  4.2       SX1509B 16-channel I C GPIO with LED Driver and Keypad Engine                                                                  11
  4.3       Reset                                                                                                                          12
      4.3.1      Hardware (NRESET)                                                                                                         12
      4.3.2      Software (RegReset)                                                                                                       12
                                 2
  4.4       2-Wire Interface (I C)                                                                                                         12
      4.4.1      WRITE                                                                                                                     13
      4.4.2      READ                                                                                                                      13
  4.5       I/O Banks                                                                                                                      14
      4.5.1      Input Debouncer                                                                                                           14
      4.5.2      Keypad Scanning Engine                                                                                                    14
      4.5.3      Level Shifter                                                                                                             15
      4.5.4      Polarity Inverter                                                                                                         16
  4.6       Interrupt (NINT)                                                                                                               16
  4.7       Clock Management                                                                                                               17
  4.8       LED Driver                                                                                                                     17
      4.8.1      Overview                                                                                                                  17
      4.8.2      Static Mode                                                                                                               18
      4.8.3      Single Shot Mode                                                                                                          18
      4.8.4      Blink Mode                                                                                                                19
      4.8.5      LED Driver Modes                                                                                                          19
      4.8.6      Synchronization of LED Drivers across several ICs                                                                         20
      4.8.7      Tutorial                                                                                                                  20
5     CONFIGURATION REGISTERS .................................................................................................. 22
  5.1       SX1508B 8-channel GPIO with LED Driver and Keypad Engine                                                                       22
  5.2       SX1509B 16-channel GPIO with LED Driver and Keypad Engine                                                                      26
6     APPLICATION INFORMATION ................................................................................................... 32
  6.1       Typical Application Circuit                                                                                                    32
  6.2       Typical LED Connection                                                                                                         32
7     PACKAGING INFORMATION ..................................................................................................... 33
  7.1       QFN-UT 20-pin Outline Drawing                                                                                                  33
  7.2       QFN-UT 20-pin Land Pattern                                                                                                     33
           th
Rev 4 – 26 April 2011                                          2                                                    www.semtech.com


                                                                                                   SX1508B/SX1509B
                                                                        World’s Lowest Voltage Level Shifting GPIO
                                                                                     with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
  7.3      QFN-UT 28-pin Outline Drawing                                                                                               34
  7.4      QFN-UT 28-pin Land Pattern                                                                                                  34
8     SOLDERING PROFILE .............................................................................................................. 35
9     MARKING INFORMATION ......................................................................................................... 36
          th
Rev 4 – 26 April 2011                                      3                                                    www.semtech.com


                                                                                                                       SX1508B/SX1509B
                                                                                                      World’s Lowest Voltage Level Shifting GPIO
                                                                                                              with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
1     PIN DESCRIPTION
                                    2
1.1    SX1508B 8-channel I C GPIO with LED Driver and Keypad Engine
                    Pin   Symbol        Type         Description
                     1    NRESET          DI         Active low reset input
                     2     SDA           DIO         I2C serial data line
                     3     SCL            DI         I2C serial clock line
                     4    ADDR0           DI         Address input bit 0, connect to VDDM or GND
                                                     I/O[0], at power-on configured as an input
                     5     I/O[0]        DIO (*1)
                                                     LED driver : Intensity control (PWM)
                                                     I/O[1], at power-on configured as an input
                     6     I/O[1]        DIO (*1)
                                                     LED driver : Intensity control (PWM)
                     7     VCC1            P         Supply voltage for Bank A I/O[3-0]
                     8     GND             P         Ground Pin
                                                     I/O[2], at power-on configured as an input
                     9     I/O[2]        DIO (*1)
                                                     LED driver : Intensity control (PWM), Blinking
                                                     I/O[3], at power-on configured as an input
                    10     I/O[3]        DIO (*1)
                                                     LED driver : Intensity control (PWM), Blinking, Breathing (Fade In/Out)
                    11     NINT          DO          Active low interrupt output
                    12    ADDR1           DI         Address input bit 1, connect to VDDM or GND
                    13    OSCIO         DIO (*1)     Oscillator input/output, can also be used as GPO
                    14    VDDM            P          Main supply voltage
                                                     I/O[4], at power-on configured as an input
                    15     I/O[4]        DIO (*1)
                                                     LED driver : Intensity control (PWM)
                                                     I/O[5], at power-on configured as an input
                    16     I/O[5]        DIO (*1)
                                                     LED driver : Intensity control (PWM)
                    17     VCC2            P         Supply voltage for Bank B I/O[7-4]
                    18     GND             P         Ground Pin
                                                     I/O[6], at power-on configured as an input
                    19     I/O[6]        DIO (*1)
                                                     LED driver : Intensity control (PWM), Blinking
                                                     I/O[7], at power-on configured as an input
                    20     I/O[7]        DIO (*1)
                                                     LED driver : Intensity control (PWM), Blinking, Breathing (Fade In/Out)
        D/I/O/P: Digital/Input/Output/Power
        (*1)
           This pin is programmable through the I2C interface
                                                   Table 1 – SX1508B Pin Description
                                                          I/O[7]   I/O[6]    GND    VCC2     I/O[5]
                                        NRESET                                                             I/O[4]
                                            SDA                                                            VDDM
                                            SCL                                                            OSCIO
                                         ADDR0                               GND                           ADDR1
                                                                            (PAD)
                                           I/O[0]                                                          NINT
                                                          I/O[1]   VCC1      GND    I/O[2]   I/O[3]
                                               Figure 1 – SX1508B QFN-UT-20 Pinout
               th
Rev 4 – 26 April 2011                                                         4                                                www.semtech.com


                                                                                                                                                         SX1508B/SX1509B
                                                                                                                        World’s Lowest Voltage Level Shifting GPIO
                                                                                                                                with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
                                   2
1.2   SX1509B 16-channel I C GPIO with LED Driver and Keypad Engine
                Pin   Symbol           Type         Description
                                             (*1)   I/O[2], at power-on configured as an input
                 1       I/O[2]        DIO
                                                    LED driver : Intensity control (PWM), Blinking
                                                    I/O[3], at power-on configured as an input
                2           I/O[3]      DIO (*1)
                                                    LED driver : Intensity control (PWM), Blinking
                3           GND           P         Ground Pin
                4           VCC1          P         Supply voltage for Bank A I/O[7-0]
                                                    I/O[4], at power-on configured as an input
                5           I/O[4]      DIO (*1)
                                                    LED driver : Intensity control (PWM), Blinking, Breathing (Fade In/Out)
                                             (*1)   I/O[5], at power-on configured as an input
                6           I/O[5]      DIO
                                                    LED driver : Intensity control (PWM), Blinking, Breathing (Fade In/Out)
                                             (*1)   I/O[6], at power-on configured as an input
                7           I/O[6]      DIO
                                                    LED driver : Intensity control (PWM), Blinking, Breathing (Fade In/Out)
                                                    I/O[7], at power-on configured as an input
                8           I/O[7]      DIO (*1)
                                                    LED driver : Intensity control (PWM), Blinking, Breathing (Fade In/Out)
                9           NINT         DO         Active low interrupt output
                10        ADDR1          DI         Address input bit 1, connect to VDDM or GND
                11         OSCIO       DIO (*1)     Oscillator input/output, can also be used as GPO
                12         VDDM           P         Main supply voltage
                                             (*1)   I/O[8], at power-on configured as an input
                13          I/O[8]      DIO
                                                    LED driver : Intensity control (PWM), Blinking
                                             (*1)   I/O[9], at power-on configured as an input
                14          I/O[9]      DIO
                                                    LED driver : Intensity control (PWM), Blinking
                                             (*1)   I/O[10], at power-on configured as an input
                15         I/O[10]      DIO
                                                    LED driver : Intensity control (PWM), Blinking
                                                    I/O[11], at power-on configured as an input
                16         I/O[11]      DIO (*1)
                                                    LED driver : Intensity control (PWM), Blinking
                17          GND           P         Ground Pin
                18          VCC2          P         Supply voltage for Bank B I/O[15-8]
                                             (*1)   I/O[12], at power-on configured as an input
                19         I/O[12]      DIO
                                                    LED driver : Intensity control (PWM), Blinking, Breathing (Fade In/Out)
                                             (*1)   I/O[13], at power-on configured as an input
                20         I/O[13]      DIO
                                                    LED driver : Intensity control (PWM), Blinking, Breathing (Fade In/Out)
                                             (*1)   I/O[14], at power-on configured as an input
                21         I/O[14]      DIO
                                                    LED driver : Intensity control (PWM), Blinking, Breathing (Fade In/Out)
                                                    I/O[15], at power-on configured as an input
                22         I/O[15]      DIO (*1)
                                                    LED driver : Intensity control (PWM), Blinking, Breathing (Fade In/Out)
                23        NRESET         DI         Active low reset input
                24           SDA        DIO         I2C serial data line
                25           SCL         DI         I2C serial clock line
                26        ADDR0          DI         Address input bit 0, connect to VDDM or GND
                                             (*1)   I/O[0], at power-on configured as an input
                27          I/O[0]      DIO
                                                    LED driver : Intensity control (PWM), Blinking
                                             (*1)   I/O[1], at power-on configured as an input
                28          I/O[1]      DIO
                                                    LED driver : Intensity control (PWM), Blinking
      (*1)                                        2
           This pin is programmable through the I C interface
                                                Table 2 – SX1509B Pin Description
                                                    28 I/O[1]   27 I/O[0]   26 ADDR0     25 SCL      24 SDA     23 NRESET    22 I/O[15]
                                                                                                                                          21   I/O[14]
                                        I/O[2] 1
                                                                                                                                          20   I/O[13]
                                        I/O[3] 2
                                                                               TOP VIEW                                                   19   I/O[12]
                                        GND 3
                                                                                         GND                                              18   VCC2
                                       VCC1 4
                                                                                        (PAD)
                                                                                                                                          17   GND
                                        I/O[4] 5
                                                                                                                                               I/O[11]
                                        I/O[5] 6                                                                                          16
                                                                                                                                               I/O[10]
                                        I/O[6] 7                                                                                          15
                                                                             ADDR1 10     OSCIO 11    VDDM 12
                                                     I/O[7] 8    NINT 9                                          I/O[8] 13    I/O[9] 14
                                           Figure 2 – SX1509B QFN-UT-28 Pinout
           th
Rev 4 – 26 April 2011                                       5                                                                                                www.semtech.com


                                                                                       SX1508B/SX1509B
                                                                    World’s Lowest Voltage Level Shifting GPIO
                                                                              with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
1.3   I/Os Feature Summary
                                          SX1508B                            SX1509B
                    I/O         LED Driver           Keypad          LED Driver         Keypad
                            PWM     Blink   Breathe Row    Col.  PWM    Blink  Breathe Row   Col.
                     0        √                      √            √      √              √
                     1        √                      √            √      √              √
                     2        √      √               √            √      √              √
                     3        √      √         √     √            √      √              √
                     4        √                             √     √      √        √     √
                     5        √                             √     √      √        √     √
                     6        √      √                      √     √      √        √     √
                     7        √      √         √            √     √      √        √     √
                     8                                            √      √                    √
                     9                                            √      √                    √
                    10                                            √      √                    √
                    11                                            √      √                    √
                    12                                            √      √        √           √
                    13                                            √      √        √           √
                    14                                            √      √        √           √
                    15                                            √      √        √           √
                                           Table 3 – I/Os Feature Summary
Please note that in addition to table above, all I/Os feature bank-to-bank and bank-to-host level shifting.
          th
Rev 4 – 26 April 2011                                      6                                     www.semtech.com


                                                                                                        SX1508B/SX1509B
                                                                              World’s Lowest Voltage Level Shifting GPIO
                                                                                          with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
2      ELECTRICAL CHARACTERISTICS
2.1      Absolute Maximum Ratings
Stress above the limits listed in the following table may cause permanent failure. Exposure to absolute ratings for
extended time periods may affect device reliability. The limiting values are in accordance with the Absolute
Maximum Rating System (IEC 134). All voltages are referenced to ground (GND).
                 Symbol          Description                                                       Min    Max     Unit
                Vmax_VDDM        Main supply voltage                                              - 0.4    3.7      V
               Vmax_VCC1-2       Digital I/O pin supply voltage                                   - 0.4    3.7      V
                                                                        (1)
                                 Electrostatic handling HBM model (SX1508B)                         -     2000
                  VES_HBM                                               (1)                                         V
                                 Electrostatic handling HBM model (SX1509B)                         -     1500
                  VES_CDM        Electrostatic handling CDM model                                   -     1000      V
                                 Electrostatic handling MM model (SX1508B)                          -      200
                  VES_MM                                                                                            V
                                 Electrostatic handling MM model (SX1509B)                          -      150
                     TA          Operating ambient temperature range                               -40     +85     °C
                     TC          Junction temperature range                                        -40    +125     °C
                    TSTG         Storage temperature range                                         -55    +150     °C
                                                                   (2)
                     Ilat        Latchup-free input pin current                                 +/-100        -    mA
(1) Tested according to JESD22-A114A
(2) Static latch-up values are valid at maximum temperature according to JEDEC 78 specification
                                               Table 4 - Absolute Maximum Ratings
2.2      Electrical Specifications
Table below assumes default registers values, unless otherwise specified. Typical values are given for                       TA =
+25°C, VDDM=VCC1=VCC2=3.3V.
  Symbol Description                                              Conditions                  Min         Typ        Max     Unit
   Supply
     VDDM Main supply voltage                                                                1.425          -         3.6      V
    VCC1,2 I/O banks supply voltage                                                            1.2          -         3.6      V
                                                                Oscillator OFF                   -          1          5
                  Main supply current
                                2                            Internal osc. (2MHz)                -        175        235      µA
                  (SX1508B, I C inactive)
                                                             External osc. (32kHz)               -         10          -
     IDDM
                                                                Oscillator OFF                   -          1          5
                  Main supply current
                                2                            Internal osc. (2MHz)                -        365        460      µA
                  (SX1509B, I C inactive)
                                                             External osc. (32kHz)               -         10          -
                                              (1)
    ICC1,2 I/O banks supply current                                                              -          1          2      µA
   I/Os set as Input
                                                                                              0.7*                       (8)
                                                                 VCC1,2 >= 2V                               -        5.5
                                                                                           VCC1,2
     VIH           High level input voltage                                                                                    V
                                                                                              0.8*                       (8)
                                                                 VCC1,2 < 2V                                -        5.5
                                                                                           VCC1,2
                                                                                                                     0.3*
                                                                 VCC1,2 >= 2V                 -0.4          -
                                                                                                                   VCC1,2
      VIL         Low level input voltage                                                                                      V
                                                                                                                     0.2*
                                                                 VCC1,2 < 2V                  -0.4          -
                                                                                                                   VCC1,2
                                                              Assuming no active
   ILEAK          Input leakage current                                                         -1          -          1      µA
                                                                  pull-up/down
      CI          Input capacitance                                       -                      -          -         10      pF
  I/Os set as Output
                                                                                           VCC1,2
     VOH          High level output voltage                              -                                 -       VCC1,2     V
                                                                                             – 0.3
     VOL          Low level output voltage                               -                    -0.4         -         0.3      V
                                                                                                                       (2)
                                                                 VCC1,2 >= 2V                    -          -         8
     IOH          High level output source current                                                                     (2)   mA
                                                                 VCC1,2 < 2V                     -          -         2
                                                                                                                        (2)
                                                                 VCC1,2 >= 2V                    -          -        15
     IOL          Low level output sink current                                                                        (2)   mA
                                                                 VCC1,2 < 2V                     -          -         8
               th
Rev 4 – 26 April 2011                                                7                                          www.semtech.com


                                                                                     SX1508B/SX1509B
                                                                  World’s Lowest Voltage Level Shifting GPIO
                                                                          with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
 Symbol Description                                  Conditions              Min         Typ       Max   Unit
     tPV      Output data valid timing               Cf. Figure 8              -          -         425    ns
 NINT (Output)
     VOL      Low level output voltage                       -                -0.4         -         0.3    V
                                                     VDDM >= 2V                 -          -          8
     IOLM     Low level output sink current                                                                mA
                                                      VDDM < 2V                 -          -          4
       tIV    Interrupt valid timing             From input data change         -          -          4    µs
                                                From RegInterruptSource
       tIR    Interrupt reset timing                                            -          -          4    µs
                                                         clearing
 NRESET (Input)
                                                     VDDM >= 2V           0.7*VDDM         -     VDDMmax
   VIHMR      High level input voltage                                                                     V
                                                      VDDM < 2V           0.8*VDDM         -     VDDMmax
                                                     VDDM >= 2V               -0.4         -    0.3*VDDM
     VILM     Low level input voltage                                                                      V
                                                      VDDM < 2V               -0.4         -    0.2*VDDM
   ILEAK Input leakage current                               -                 -1          -          1    µA
       CI     Input capacitance                              -                  -          -         10    pF
   VPOR Power-On-Reset voltage                        Cf. Figure 6              -         0.8         -    V
 VDROPH High brown-out voltage                        Cf. Figure 6              -      VDDM-1         -    V
  VDROPL Low brown-out voltage                        Cf. Figure 6              -         0.2         -    V
    tRESET    Reset time                              Cf. Figure 6              -          -         2.5   ms
    tPULSE    Reset pulse from host uC                Cf. Figure 6            200          -          -    ns
 ADDR0, ADDR1 (Inputs)
                                                     VDDM >= 2V           0.7*VDDM         -    VDDM+0.3
   VIHMA      High level input voltage                                                                      V
                                                      VDDM < 2V           0.8*VDDM         -    VDDM+0.3
                                                     VDDM >= 2V               -0.4         -    0.3*VDDM
     VILM     Low level input voltage                                                                       V
                                                      VDDM < 2V               -0.4         -    0.2*VDDM
   ILEAK Input leakage current                               -                 -1          -          1    µA
       CI     Input capacitance                              -                  -          -         10    pF
 OSCIO (Input/Output)
                                                     VDDM >= 2V           0.7*VDDM         -    VDDM+0.3
   VIHMO      High level input voltage          1.425V =< VDDM < 2V       0.8*VDDM         -    VDDM+0.3    V
                                                    VDDM < 1.425V         0.9*VDDM         -    VDDM+0.3
                                                     VDDM >= 2V               -0.4         -    0.3*VDDM
                                                                                                            V
    VILMO     Low level input voltage            1.425V =< VDDM < 2V          -0.4         -    0.2*VDDM
                                                    VDDM < 1.425V             -0.4         -    0.1*VDDM
   ILEAK      Input leakage current                          -                 -1          -          1    µA
       CI     Input capacitance                              -                  -          -         10    pF
   VOHM       High level output voltage                      -            VDDM-0.3         -       VDDM     V
     VOL      Low level output voltage                       -                -0.4         -         0.3    V
                                                     VDDM >= 2V                 -          -          8
    IOHM      High level output source current                                                             mA
                                                      VDDM < 2V                 -          -          2
                                                     VDDM >= 2V                 -          -          8
     IOLM     Low level output sink current                                                                mA
                                                      VDDM < 2V                 -          -          4
                                         (3)
 SCL (Input) and SDA (Input/Output)
                                              2                                    2
 Interface complies with slave F/S mode I C interface as described by Philips I C specification version 2.1
                                                                       2
 dated January, 2000. Please refer to that document for more detailed I C specifications.
 VOL          Low level output voltage                      -                -0.4         -         0.3     V
                                                     VDDM >= 2V                -          -          8
 IOLM         Low level output sink current                                                              mA
                                                     VDDM < 2V                 -          -          4
                                                     VDDM >= 2V           0.7*VDDM        -     VDDMmax
 VIHMR        High level input voltage                                                                      V
                                                     VDDM < 2V            0.8*VDDM        -      VDDMmax
                                                     VDDM >= 2V              -0.4         -     0.3*VDDM
 VILM         Low level input voltage                                                                       V
                                                     VDDM < 2V               -0.4         -     0.2*VDDM
           th
Rev 4 – 26 April 2011                                  8                                      www.semtech.com


                                                                                                             SX1508B/SX1509B
                                                                                  World’s Lowest Voltage Level Shifting GPIO
                                                                                               with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
  Symbol          Description                                         Conditions                   Min            Typ           Max      Unit
  fSCL            SCL clock frequency                                        -                       -              -           400      kHz
                  Hold time (repeated) START
  tHD;STA                                                                    -                      0.6             -             -        µs
                  condition
  tLOW            LOW period of the SCL clock                                -                      1.3             -             -        µs
  tHIGH           HIGH period of the SCL clock                               -                      0.6             -             -        µs
                  Set-up time for a repeated
  tSU;STA                                                                    -                      0.6             -             -        µs
                  START condition
                                                                                                     (4)                            (5)
  tHD;DAT         Data hold time                                             -                      0               -          0.9         µs
                                                                                                       (6)
  tSU;DAT         Data set-up time                                           -                    100               -             -        ns
                                                                                                           (7)
  tr              Rise time of both SDA and SCL                              -                 20+0.1Cb             -           300        ns
                                                                                                           (7)
  tf              Fall time of both SDA and SCL                              -                 20+0.1Cb             -           300        ns
  tSU;STO         Set-up time for STOP condition                             -                      0.6             -             -        µs
                  Bus free time between a STOP
  tBUF                                                                       -                      1.3             -             -        µs
                  and START condition
  Cb              Capacitive load for each bus line                          -                       -              -           400        pF
                  Noise margin at the LOW level
                                                                                                                  0.1*
  VnL             for each connected device                                  -                       -                            -         V
                                                                                                                VDDM
                  (including hysteresis)
                  Noise margin at the HIGH level
                                                                                                                  0.2*
  VnH             for each connected device                                  -                       -                            -         V
                                                                                                                VDDM
                  (including hysteresis)
                  Pulse width of spikes
  tSP                                                                        -                       -              -            50        ns
                  suppressed by the input filter
  Miscellaneous
                  Programmable pull-up/down
  RPULL                                                                      -                       -             42             -        kΩ
                  resistors for IO[0-7]
                                                                         Internal                   1.3             2            2.6
  fOSC            Oscillator frequency                                                                                                   MHz
                                                                External from OSCIN
                                                                                                     -              -            2.6
                                                                 (40-60% duty cycle)
(1) Assuming no load connected to outputs and inputs fixed to VCC1,2 or GND.
(2) Can be increased by tying together and driving simultaneously several I/Os.
(3) All values referred to VIHMR min and VILM max levels.
(4) A device must internally provide a hold time of at least 300ns for the SDA signal (referred to VIHMR min) to bridge the undefined region of
the falling edge of SCL.
(5) The maximum tHD;DAT has only to be met if the device does not stretch the LOW period (tLOW ) of the SCL signal.
(6) A Fast-mode I2C-bus device can be used in a Standard-mode I2C-bus system, but the requirement tSU;DAT ≥ 250 ns must then be met.
This will automatically be the case if the device does not stretch the LOW period of the SCL signal.
If such a device does stretch the LOW period of the SCL signal, it must output the next data bit to the SDA line tr max+ tSU;DAT = 1000 + 250
= 1250 ns (according to the Standard-mode I2C-bus specification) before the SCL line is released.
(7) Cb = total capacitance of one bus line in pF. If mixed with Hs-mode devices, faster fall-times are allowed.
(8) With RegHighInput bit enabled (VCCx min =1.65V), else 3.6V (VCCx min = 1.2V)
                                                    Table 5 – Electrical Specifications
               th
Rev 4 – 26 April 2011                                                   9                                              www.semtech.com


                                                                                                                                                                                                                                                                              SX1508B/SX1509B
                                                                                                                                                                                                 World’s Lowest Voltage Level Shifting GPIO
                                                                                                                                                                                                         with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
3   TYPICAL OPERATING CHARACTERISTICS
                                                                     SX1509B IDDM vs.VDDM (Oscillator Enabled)                                                                                                                      SX1509B IDDM vs.VDDM (Oscillator Enabled)
                           360                                                                                                                                                               360
                           340                                                                                                                                                               340
                           320                                                                                                                                                               320
                           300                                                                                                                                                               300
                           280                                                                                                                                                               280
                           260                                                                                                                                                               260
                I D D M (u A )                                                                                                                                                   ID D M (u A )
                           240                                                                                                                                                               240
                           220                                                                                                                                                               220
                           200                                                                                                                                                               200
                           180                                                                                                                                                               180
                           160                                                                                                                                                               160
                           140                                                                                                                                                               140
                           120                                                                                                                                                               120
                           100                                                                                                                                                               100
                                          1.3       1.5        1.7   1.9          2.1            2.3       2.5        2.7         2.9    3.1           3.3     3.5                                      1.3         1.5    1.7      1.9         2.1     2.3       2.5         2.7   2.9   3.1        3.3   3.5
                                                                                                       VDDM (V)                                                                                                                                               VDDM (V)
                                                                               Fosc vs.Temperature (VDDM = 3.6V)                                                                                                                                      Fosc vs. VDDM
                                    2.5                                                                                                                                                        2.5
                                    2.3                                                                                                                                                        2.3
                                    2.1                                                                                                                                                        2.1
                       F o s c (M H z )
                                    1.9                                                                                                                                            F o s c (M H z )
                                                                                                                                                                                               1.9
                                    1.7                                                                                                                                                        1.7
                                    1.5                                                                                                                                                        1.5
                                    1.3                                                                                                                                                        1.3
                                              -50          -30            -10                10                  30               50              70               90                                   1.3         1.5    1.7      1.9         2.1     2.3       2.5         2.7   2.9   3.1        3.3   3.5
                                                                                                       Temp (oC)                                                                                                                                              VDDM (V)
                                                                              VOL vs. IOL (VCCx = 3.6V, Temp 25C)                                                                                                                VOL vs.Temperature (VCCx = 3.6V, IOL = 15mA)
                                   0.3                                                                                                                                                                  0.3
                             0.25                                                                                                                                                                     0.25
                                   0.2                                                                                                                                                                  0.2
                 V O L (V )                                                                                                                                                               V O L (V )
                             0.15                                                                                                                                                                     0.15
                                   0.1                                                                                                                                                                  0.1
                             0.05                                                                                                                                                                     0.05
                                          0                                                                                                                                                               0
                                              0            2              4                  6                 8                 10          12               14                                              -50         -30             -10           10               30         50          70          90
                                                                                                       IOL (mA)                                                                                                                                               Temp (oC)
                                                                           VOH vs. IOH (VDDM = 3.6V, Temp 25C)                                                                                                                     VOH vs. Temperature (VCCx = 3.6V, IOH = 8mA)
                                 3.6
                                                                                                                                                                                                        3.6
                         3.55                                                                                                                                                                         3.55
                                 3.5                                                                                                                                                                    3.5
                         3.45                                                                                                                                                                         3.45
               V O H (V )                                                                                                                                                                  V O H (V )
                                 3.4                                                                                                                                                                    3.4
                         3.35                                                                                                                                                                         3.35
                                 3.3                                                                                                                                                                    3.3
                         3.25                                                                                                                                                                         3.25
                                 3.2                                                                                                                                                                    3.2
                                           -8             -7         -6                 -5                -4                -3          -2               -1             0                                     -50         -30             -10          10                30         50          70          90
                                                                                                       IOH (mA)                                                                                                                                               Temp (oC)
                                                                                                           Figure 3 – Typical Operating Characteristics
          th
Rev 4 – 26 April 2011                                                                                                                                                       10                                                                                                                             www.semtech.com


                                                                                     SX1508B/SX1509B
                                                              World’s Lowest Voltage Level Shifting GPIO
                                                                          with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
4   BLOCK DETAILED DESCRIPTION
                            2
4.1   SX1508B 8-channel I C GPIO with LED Driver and Keypad Engine
                                                   OSCIO
                                   Keypad       Clock Mgmt          LED Driver
                                   Engine          External        Intensity (PWM)
                                                     Clock
                                 16 Keys Max                          Blink (Timer)
                                                   Internal
                                                  Oscillator       Breathe (Ramp)
                                                                                      VCC1
                    VDDM                                                              I/O[0]
                                                                    I/O Bank A        I/O[1]
                                    Reset
                  NRESET                                            A                 I/O[2]
                                                   2
                                                  I C Bus    8-Bit                    I/O[3]
                                                  Control    R/W
                      SCL                                                             VCC2
                                    Input                                             I/O[4]
                                    Filter                          I/O Bank B        I/O[5]
                      SDA                                           A                 I/O[6]
                                                                                      I/O[7]
                   ADDR1
                   ADDR0
                                              SX1508B                 Interrupt       NINT
                                                    GND
                 Figure 4 – 8-channel Low Voltage GPIO with LED Driver and Keypad Engine
                              2
4.2   SX1509B 16-channel I C GPIO with LED Driver and Keypad Engine
                                                   OSCIO
                                  Keypad        Clock Mgmt           LED Driver
                                  Engine           External         Intensity (PWM)
                                64 Keys Max         Clock
                                                                       Blink (Timer)
                                     Auto          Internal
                                Sleep/Wakeup      Oscillator        Breathe (Ramp)
                                                                                       VCC1
                                                                                       I/O[0]
                                                                                       I/O[1]
                                                                                        I/O[2]
                                                                     I/O Bank A         I/O[3]
                   VDDM                                              A                  I/O[4]
                                                             8-Bit
                                   Reset                                                I/O[5]
                                                             R/W                        I/O[6]
                 NRESET
                                                  I2C Bus                               I/O[7]
                                                  Control                              VCC2
                     SCL           Input                     8-Bit                      I/O[8]
                                                                                        I/O[9]
                                   Filter                    R/W
                                                                                        I/O[10]
                     SDA
                                                                     I/O Bank B         I/O[11]
                                                                     A                  I/O[12]
                  ADDR1
                                                                                        I/O[13]
                  ADDR0
                                                                                        I/O[14]
                                                                                        I/O[15]
                                              SX1509B
                                                                       Interrupt       NINT
                                                    GND
                Figure 5 – 16-channel Low Voltage GPIO with LED Driver and Keypad Engine
          th
Rev 4 – 26 April 2011                                  11                                       www.semtech.com


                                                                                                  SX1508B/SX1509B
                                                                         World’s Lowest Voltage Level Shifting GPIO
                                                                                    with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
4.3    Reset
4.3.1 Hardware (NRESET)
The SX1508B and SX1509B generate their own power on reset signal after a power supply is connected to the
VDDM pin. NRESET input pin can be used to reset the chip anytime, it must be connected to VDDM (or greater)
either directly (if not used), or via a resistor.
                          1             2     3             4           5               6           1         2
             VDROPH
      VDDM
                VPOR
             VDROPL
      Reset
                Undefined                                                 Undefined       Undefined
      Signal
                             tRESET             tPULSE                                                tRESET
                                     Figure 6 – Power-On / Brown-out Reset Conditions
     1. Device behavior is undefined until VDDM rises above VPOR, at which point internal reset procedure is
         started.
     2. After tRESET, the reset procedure is completed.
     3. In operation, the SX1508B and SX1509B may be reset (POR like or LED driver counters only depending
         on RegMisc setting) at anytime by an external device driving NRESET low for tPULSE or longer. Chip can
         be accessed normally again after NRESET rising edge.
     4. During a brown-out event, if VDDM drops above VDROPH a reset will not occur.
     5. During a brown-out event, if VDDM drops between VDROPH and VDROPL a reset may occur.
     6. During a brown-out event, if VDDM drops below VDROPL a reset will occur next time VPOR is crossed.
Please note that a brown-out event is defined as a transient event on VDDM. If VDDM is attached to a battery,
then the gradual decay of the battery voltage will not be interpreted as a brown-out event.
Please also note that a sharp rise in VDDM (> 1V/us) may induce a circuit reset.
4.3.2 Software (RegReset)
Writing consecutively 0x12 and 0x34 to RegReset register will reset all registers to their default values.
                            2
4.4    2-Wire Interface (I C)
The SX1508B and SX1509B 2-wire interface operates only in slave mode. In this configuration, the device has
one or 4 possible devices addresses defined by ADDR[1:0] pins:
                Device       ADDR[1:0]                 Address       Description
                                    00           0x20 (0100000)      First address of the 2-wire interface
                                    01           0x21 (0100001)      Second address of the 2-wire interface
              SX1508B
                                    10           0x22 (0100010)      Third address of the 2-wire interface
                                    11           0x23 (0100011)      Fourth address of the 2-wire interface
                                    00           0x3E (0111110)      First address of the 2-wire interface
                                    01           0x3F (0111111)      Second address of the 2-wire interface
              SX1509B
                                    10           0x70 (1110000)      Third address of the 2-wire interface
                                    11           0x71 (1110001)      Fourth address of the 2-wire interface
                                             Table 6 - 2-Wire Interface Address
2 lines are used to exchange data between an external master host and the slave device:
     • SCL : Serial CLock
     • SDA : Serial DAta
             th
Rev 4 – 26 April 2011                                          12                                        www.semtech.com


                                                                                         SX1508B/SX1509B
                                                                      World’s Lowest Voltage Level Shifting GPIO
                                                                              with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
                                                               2                                          2
The SX1508B and SX1509B are read-write slave-mode I C devices and comply with the Philips I C standard
Version 2.1 dated January, 2000. The SX1508B and SX1509B have a few user-accessible internal 8-bits
registers to set the various parameters of operation (Cf. §5 for detailed configuration registers description). The
 2
I C interface has been designed for program flexibility, in that once the slave address has been sent to the
SX1508B or SX1509B enabling it to be a slave transmitter/receiver, any register can be written or read
independently of each other. The start and stop commands frame the data-packet and the repeat start condition
is allowed if necessary.
Seven bit addressing is used and ten bit addressing is not allowed. Any general call address will be ignored by
the SX1508B and SX1509B. The SX1508B and SX1509B are not CBUS compatible and can operate in standard
mode (100kbit/s) or fast mode (400kbit/s).
4.4.1    WRITE
After the start condition [S], the slave address (SA) is sent, followed by an eighth bit (‘0’) indicating a Write. The
slave then Acknowledges [A] that it is being addressed, and the Master sends an 8 bit Data Byte consisting of
the slave Register Address (RA). The Slave Acknowledges [A] and the master sends the appropriate 8 bit Data
Byte (WD0). Again the slave Acknowledges [A]. In case the master needs to write more data, a succeeding 8 bit
Data Byte will follow (WD1), acknowledged by the slave [A]. This sequence will be repeated until the master
terminates the transfer with the Stop condition [P].
                                  Figure 7 - 2-Wire Serial Interface, Write Operation
When successive register data (WD1...WDn) is supplied by the master, the register address can be
automatically incremented or kept fixed depending on the setting programmed in RegMisc.
                                                            1
                                                                                                     tpv
                                     Figure 8 – Example: Write RegData Register
4.4.2     READ
After the start condition [S], the slave address (SA) is sent, followed by an eighth bit (‘0’) indicating a Write. The
slave then Acknowledges [A] that it is being addressed, and the Master responds with an 8 bit Data consisting of
the Register Address (RA). The slave Acknowledges [A] and the master sends the Repeated Start Condition
[Sr]. Once again, the slave address (SA) is sent, followed by an eighth bit (‘1’) indicating a Read.
The slave responds with an Acknowledge [A] and the read Data byte (RD0). If the master needs to read more
data it will acknowledge [A] and the slave will send the next read byte (RD1). This sequence can be repeated
until the master terminates with a NACK [N] followed by a stop [P].
             th
Rev 4 – 26 April 2011                                      13                                      www.semtech.com


                                                                                                            SX1508B/SX1509B
                                                                                           World’s Lowest Voltage Level Shifting GPIO
                                                                                                   with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
                                  Figure 9 - 2-Wire Serial Interface, Read Operation
When successive register data (RD1...RDn) is read by the master, the register address will be automatically
incremented or kept fixed depending on the setting programmed in RegMisc.
4.5     I/O Banks
4.5.1     Input Debouncer
Each input can be individually debounced by setting corresponding bits in RegDebounce register. At power up
the debounce function is disabled. After enabling the debouncer, the change of the input value is accepted only if
the input value is identical at two consecutive sampling times.
The debounce time common to all IOs can be set in RegDebounceConfig register from 0.5 to 64ms (fOSC =
2MHz).
4.5.2     Keypad Scanning Engine
SX1508B, and SX1509B integrate a fully programmable keypad scanning engine to implement keypad
applications up to 8x8 matrix (i.e. 64 keys).
Please note that SX1509B also implements an Auto Sleep/Wakeup feature to save power consumption when no
key has been pressed for a programmed time.
                                                                        Y
                                             SX1508B
                                                       IO3
                                                       IO2
                                                       IO1
                                                       IO0
                                                                                            X
                                                       IO4
                                                       IO5
                                                       IO6
                                                       IO7
                                        - IO[3-0] as outputs (scanning)   RegKeyData =
                                        - IO[7-4] as inputs
                                                                                       X Y
                                   Figure 10 – 4x4 Keypad Connection to SX1508B
Following procedure should be implemented on the host controller for a 4x4 keypad:
1. Set RegDir to 0xF0 (IO[3-0] as outputs, IO[7-4] as inputs) , set RegOpenDrain to 0x0F (IO[3-0] as open-drain
outputs), set RegPullup to 0xF0 (pull-ups enabled on inputs IO[7-4]).
2. Enable and configure debouncing on IO[7-4] (RegDebounceEnable = 0xF0, Ex : RegDebounceConfig = 0x05)
3. Enable and configure keypad scanning engine (Ex : RegKeyConfig = 0x7D) This will start an infinite loop with
the following sequence to IO[3:0]: ZZZ0, ZZ0Z, Z0ZZ, 0ZZZ. Make sure that scan interval is set to higher value
than the debounce time.
4. When a key is pressed, NINT goes low, key scan is halted and the key coordinates are stored in RegKeyData:
          •     The column data will be stored in RegKeyData[7:4] (Note: column indication is active low)
             th
Rev 4 – 26 April 2011                                                          14                                    www.semtech.com


                                                                                                   SX1508B/SX1509B
                                                                                World’s Lowest Voltage Level Shifting GPIO
                                                                                          with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
        •      The row data will be stored in RegKeyData[3:0] (Note: row indication is active low)
        •      When RegKeyData is read, this data along with the interrupt is automatically cleared (same behavior
               as reading RegData) and the key scan continues to the next row.
5. Restart from point 4.
This implementation allows the host to handle both single and multi-touches easily (fast AAAAAA sequence is a
long press of key A, fast ABABABAB sequence is key A and key B pressed together, etc)
4.5.3 Level Shifter
Because of their 5.5V tolerant I/O banks with independent supply voltages between 1.2V and 3.6V, the SX1508B
and SX1509B can perform level shifting of signals from one I/O bank to another without uC activity by
programming the corresponding configuration register bits accordingly in RegLevelShifter (and RegDir).
This can save significant BOM cost in a final application where only a few signals need to be level-shifted (no
need for an additional external level shifter IC).
                                                        1.2-3.6V
                                                  VCC1
                                                                                 1.2-5.5V
                                                    IO0
                                                                 tLevelShiftMin
                                            SX1508/9B
                                                        1.2-3.6V
                                                                                 1.2-3.6V
                                                  VCC2
                                                   IO4
                                          Figure 11 – Level Shifting Example
The minimum pulse width tLevelShiftMin which can be level shifted properly depends on VCCx and VDDM:
                             tLevelShiftMin = Input Delay + Core Delay + Output Delay
Input/Core/Output delays vs VCCx/VDDM are given in figures below.
            th
Rev 4 – 26 April 2011                                     15                                                www.semtech.com


                                                                                                                                                                                                                SX1508B/SX1509B
                                                                                                                                                                    World’s Lowest Voltage Level Shifting GPIO
                                                                                                                                                                            with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
                                                                                                                   IO Input Delay vs. Supply Voltage
                                                                                     10.000
                                                                                      9.000
                                                                                      8.000
                                                                                      7.000
                                                                                      6.000
                                                                             (ns)
                                                                            Tdelay
                                                                                      5.000
                                                                                      4.000
                                                                                      3.000
                                                                                      2.000
                                                                                      1.000
                                                                                      0.000
                                                                                          1.000           1.500           2.000             2.500                   3.000          3.500
                                                                                                                                      VCCx (V)
                                                                                                                                  Typical    Worst Case
                                           SX1508B Digital Core Delay vs. Supply Voltage                                                                                    SX1509B Digital Core Delay vs. Supply Voltage
                   28                                                                                                                                      28
                   26                                                                                                                                      26
                   24                                                                                                                                      24
           (ns)    22                                                                                                                              (ns)
                                                                                                                                                           22
          Tdelay   20
                                                                                                                                                 Tdelay
                                                                                                                                                           20
                   18                                                                                                                                      18
                   16                                                                                                                                      16
                   14                                                                                                                                      14
                         1               1.5             2                  2.5                    3               3.5                                          1            1.5             2                  2.5            3        3.5
                                                                    VDDM (V)                                                                                                                            VDDM (V)
                                                              Typical       Worst Case                                                                                                           Typical        Worst Case
                                    IO Output Delay vs. Supply Voltage ( LowDriveEn=0, 20pF Load)                                                                       IO Output Delay vs. Supply Voltage (LowDriveEn=1, 20pF Load)
                   140.000                                                                                                                                140.000
                   120.000                                                                                                                                120.000
                   100.000                                                                                                                                100.000
           (ns)     80.000                                                                                                                      (ns)       80.000
          Tdelay    60.000                                                                                                                     Tdelay      60.000
                    40.000                                                                                                                                 40.000
                    20.000                                                                                                                                 20.000
                        0.000                                                                                                                               0.000
                            1.000           1.500         2.000             2.500                 3.000           3.500                                         1.000          1.500          2.000             2.500         3.000    3.500
                                                                        VCCx (V)                                                                                                                           VCCx (V)
                                                                  Typical     Worst Case                                                                                                              Typical    Worst Case
                                                          Figure 12 – Level Shifter Max Frequency Calculation Data
4.5.4 Polarity Inverter
Each IO’s polarity can be individually inverted by setting corresponding bit in RegPolarity register. Please note
that polarity inversion can also be combined with level shifting feature.
4.6    Interrupt (NINT)
At start-up, the transition detection logic is reset, and NINT is released to a high-impedance state. The interrupt
mask register is set to 0xFF, disabling the interrupt output for transitions on all I/O ports. The transition flags are
cleared to indicate no data changes.
An interrupt NINT can be generated on any programmed combination of I/Os rising and/or falling edges through
the RegInterruptMask and RegSense registers.
If needed, the I/Os which triggered the interrupt can then be identified by reading RegInterruptSource register.
When NINT is low (i.e. interrupt occurred), it can be reset back high (i.e. cleared) by writing 0xFF in
RegInterruptSource (this will also clear corresponding bits in RegEventStatus register).
The interrupt can also be cleared automatically when reading RegData register (Cf. RegMisc)
Example: We want to detect rising edge of I/O[1] on SX1508B (NINT will go low).
   1. We enable interrupt on I/O[1] in RegInterruptMask
                   th
Rev 4 – 26 April 2011                                                                                                              16                                                                                              www.semtech.com


                                                                                        SX1508B/SX1509B
                                                                       World’s Lowest Voltage Level Shifting GPIO
                                                                               with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
     RegInterruptMask =“XXXXXX0X”
    2. We set edge sense for I/O[1] in RegSense
     RegSenseLow =“XXXX01XX”
Please note that independently from the “user defined” process described above the keypad engine, when
enabled, also uses NINT to indicate a key press.
Hence we have NINT = “user defined condition occurred” OR “keypad engine condition occurred”.
4.7   Clock Management
A main oscillator clock fOSC is needed by the LED driver, keypad engine and debounce features.
Clock management block is illustrated in figure below.
                                                            OSCIO
                                                             Clock
                                                             Mgmt
                                                        External   Div
                                                          Clock         fOSC
                                                         Internal
                                                        Oscillator
                                      Figure 13 – Clock Management Overview
The block is configured in register RegClock (Cf §5 for more detailed information):
     Selection of internal clock source: none (OFF) or internal oscillator or external clock input from OSCIN.
     Definition of OSCIO pin function (OSCIN or OSCOUT)
     OSCOUT frequency setting (sub-multiple of fOSC)
Please note that if needed the OSCOUT feature can be used as an additional GPO (Cf. RegClock)
4.8   LED Driver
4.8.1 Overview
Every IO has its own independent LED driver (Cf §6.2 for typical LED connection) , all IOs can perform intensity
control (PWM) while some of them additionally include blinking and breathing features (Cf pin description §1)
The LED drivers of all I/Os share the same clock ClkX configurable in RegMisc[6:4]. Please note that for power
consumption reasons ClkX is OFF by default.
Assuming ClkX is not OFF, LED driver for IO[X] is enabled when RegLEDDriverEnable[X] = 1 in which case it
can operate in one of the three modes below:
    •    Static mode (all I/Os, with or without fade in/out)
    •    Single shot mode (blinking capable I/Os only, with or without fade in/out)
    •    Blink mode (blinking capable I/Os only, with or without fade in/out)
            th
Rev 4 – 26 April 2011                                        17                                  www.semtech.com


                                                                                                       SX1508B/SX1509B
                                                                                World’s Lowest Voltage Level Shifting GPIO
                                                                                           with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
          RegData[X]
              1
              0
                                                                                                                   t
          IO[X] Intensity (PWM value)
          100%
          IOnX                         ON
                Fade In                                       Fade Out
          IOffX                                                                       OFF
             0                                                                                                     t
                   TRiseX               TOnX                       TFallX              TOffX
                                                   Figure 14 – LED Driver Overview
Each IO[X] has its own set of programmable registers (Cf §5 for more detailed information):
      RegTOnX (blinking capable I/Os only): TOnX, ON time of IO[X]
      RegIOnX (all I/Os): IOnX, ON intensity of IO[X]
      RegOffX (blinking capable I/Os only): TOffX and IOffX, OFF time and intensity of IO[X]
      RegTRiseX(breathing capable I/Os only): TRiseX, fade in time of IO[X]
      RegTFallX(breathing capable I/Os only): TFallX, fade out time of IO[X]
Please note that the LED driver mode is selectable for each IO bank between linear and logarithmic. (Cf §4.8.5)
All the figures assume normal IO polarity, for inverse polarity RegData control must be inverted (does not invert
the polarity of the IO signal itself).
4.8.2 Static Mode
Only mode available for non blinking capable IOs (with Off intensity = 0), else invoked when TOnX = 0.
If the I/O doesn’t support fading the LED intensity will step directly to the IOnX/IOffX value.
      RegData(X)
                 On intensity(max) determined by
                           register RegIOnX
      IOLED(X) level
                 Off intensity(min) determined by
                         register RegIOffX
                                                     Fade in rate determined by Fade out rate determined
                                                        register RegTRiseX       by register RegTFallX
                                                  Figure 15 – LED Driver Static Mode
4.8.3 Single Shot Mode
Invoked when TOnX != 0 and TOffX = 0.
If the I/O doesn’t support fading the LED intensity will step directly to the IOnX/IOffX value.
             th
Rev 4 – 26 April 2011                                                  18                                    www.semtech.com


                                                                                                           SX1508B/SX1509B
                                                                                  World’s Lowest Voltage Level Shifting GPIO
                                                                                              with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
             RegData(X)
                                        On intensity(max)
             IOLED(X) level
                         Off intensity(min)
                          Fade in rate determined by                  Minimum intensity duration
                              register RegTRiseX                        determined by register
                                                                              RegData(x)
                               Fade out rate determined
                                 by register RegTFallX
                                               Figure 16 – LED Driver Single Shot Mode
4.8.4 Blink Mode
Invoked when TOnX != 0 and TOffX != 0.
If the I/O doesn’t support fading the LED intensity will step directly to the IOnX/IOffX value.
                                                                                           When RegData(X) is cleared, the LED
                                                                                          will complete any current ramp, and then
                                                                                                  stay at minimum intensity
      RegData(X)
                               On intensity(max)
      IOLED(X) level
                Off intensity(min)
                 Fade in rate determined by                                        Maximum intensity
                      register RegTRiseX            Minimum intensity duration
                                                                                 duration determined by
                                                      determined by register
                                                                                    register RegTOnX
                                                            RegTOffX
                       Fade out rate determined
                         by register RegTFallX
                                                   Figure 17 – LED Driver Blink Mode
4.8.5     LED Driver Modes
For each IO bank, the LED driver mode of fading capable IOs can be selected between linear or logarithmic in
RegMisc.
Lin.     Log.      Lin.      Log.      Lin.    Log.     Lin.    Log.      Lin.   Log.      Lin.     Log.      Lin.    Log.     Lin. Log.
   0       0         32        4        64      13       96      28       128     53       160        88      192     135      224  198
   1       0         33        4        65      13       97      28       129     53       161        88      193     135      225  198
   2       0         34        4        66      13       98      30       130     53       162        88      194     135      226  198
   3       0         35        4        67      13       99      30       131     53       163        88      195     135      227  198
   4       0         36        5        68      14      100      31       132     56       164        93      196     142      228  207
   5       0         37        5        69      14      101      31       133     56       165        93      197     142      229  207
   6       0         38        5        70      14      102      32       134     56       166        93      198     142      230  207
   7       0         39        5        71      14      103      32       135     56       167        93      199     142      231  207
   8       1         40        6        72      16      104      34       136     60       168        98      200     150      232  216
   9       1         41        6        73      16      105      34       137     60       169        98      201     150      233  216
  10       1         42        6        74      17      106      35       138     60       170        98      202     150      234  216
  11       1         43        6        75      17      107      35       139     60       171        98      203     150      235  216
  12       1         44        7        76      18      108      36       140     65       172       104      204     157      236  225
             th
Rev 4 – 26 April 2011                                                 19                                              www.semtech.com


                                                                                                                                           SX1508B/SX1509B
                                                                                                                 World’s Lowest Voltage Level Shifting GPIO
                                                                                                                         with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
 13                         1             45        7         77     18    109     36     141    65     173    104                            205     157      237   225
 14                         1             46        7         78     19    110     38     142    65     174    104                            206     157      238   225
 15                         1             47        7         79     19    111     38     143    65     175    104                            207     157      239   225
 16                         2             48        8         80     20    112     39     144    69     176    110                            208     165      240   235
 17                         2             49        8         81     20    113     39     145    69     177    110                            209     165      241   235
 18                         2             50        8         82     21    114     41     146    69     178    110                            210     165      242   235
 19                         2             51        8         83     21    115     41     147    69     179    110                            211     165      243   235
 20                         2             52        9         84     22    116     42     148    73     180    116                            212     172      244   245
 21                         2             53        9         85     22    117     42     149    73     181    116                            213     172      245   245
 22                         2             54        9         86     23    118     44     150    73     182    116                            214     172      246   245
 23                         2             55        9         87     23    119     44     151    73     183    116                            215     172      247   245
 24                         3             56       10         88     24    120     46     152    78     184    122                            216     181      248   255
 25                         3             57       10         89     24    121     46     153    78     185    122                            217     181      249   255
 26                         3             58       10         90     25    122     46     154    78     186    122                            218     181      250   255
 27                         3             59       10         91     25    123     46     155    78     187    122                            219     181      251   255
 28                         3             60       11         92     26    124     49     156    83     188    129                            220     189      252   255
 29                         3             61       11         93     26    125     49     157    83     189    129                            221     189      253   255
 30                         3             62       12         94     27    126     49     158    83     190    129                            222     189      254   255
 31                         3             63       12         95     27    127     49     159    83     191    129                            223     189      255   255
                                                             Table 7 – LED Driver Linear vs Logarithmic Function (I)
               300
               250
               200
  IOn (IOff)
                                                                                                                                                       Linear mode
               150
                                                                                                                                                       Log mode
               100
                   50
                   0
                        1   10       19   28   37 46   55   64   73   82 91 100 109 118 127 136 145 154 163 172 181 190 199 208 217 226 235 244 253
                                                                                   RegIOn (4xRegOff[2:0])
                                                            Figure 18 – LED Driver Linear vs Logarithmic Function (II)
4.8.6                   Synchronization of LED Drivers across several ICs
When several GPIO expanders are used in the same application it may be useful that their LEDs drivers are
synchronous for coherent global operation.
In this case all ICs should share their fOSC through their OSCIO pins and have their reset connected together.
When RegMisc of each IC is set accordingly, NRESET signal can then be used to reset all devices’ internal
counters (but not the register settings) and allow synchronous LED operation (blinking, fading) across multiple
devices.
4.8.7                   Tutorial
Below are the steps required to use the LED driver with the typical LED connection described §6.2:
               -        Disable input buffer (RegInputDisable)
               -        Disable pull-up (RegPullUp)
                                th
Rev 4 – 26 April 2011                                                                                20                                               www.semtech.com


                                                                                    SX1508B/SX1509B
                                                                  World’s Lowest Voltage Level Shifting GPIO
                                                                           with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
   -    Enable open drain (RegOpenDrain)
   -    Set direction to output (RegDir) – by default RegData is set high => LED OFF
   -    Enable oscillator (RegClock)
   -    Configure LED driver clock and mode if relevant (RegMisc)
   -    Enable LED driver operation (RegLEDDriverEnable)
   -    Configure LED driver parameters (RegTOn, RegIOn, RegOff, RegTRise, RegTFall)
   -    Set RegData bit low => LED driver started
          th
Rev 4 – 26 April 2011                                   21                                   www.semtech.com


                                                                                                                SX1508B/SX1509B
                                                                                            World’s Lowest Voltage Level Shifting GPIO
                                                                                                       with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
5   CONFIGURATION REGISTERS
5.1    SX1508B 8-channel GPIO with LED Driver and Keypad Engine
        Address               Name                              Description                                                Default
      Device and IO Banks
             0x00             RegInputDisable                   Input buffer disable register                             0000 0000
             0x01             RegLongSlew                       Output buffer long slew register                          0000 0000
             0x02             RegLowDrive                       Output buffer low drive register                          0000 0000
             0x03             RegPullUp                         Pull-up register                                          0000 0000
             0x04             RegPullDown                       Pull-down register                                        0000 0000
             0x05             RegOpenDrain                      Open drain register                                       0000 0000
             0x06             RegPolarity                       Polarity register                                         0000 0000
             0x07             RegDir                            Direction register                                        1111 1111
             0x08             RegData                           Data register                                             1111 1111*
             0x09             RegInterruptMask                  Interrupt mask register                                   1111 1111
            0x0A              RegSenseHigh                      Sense register for I/O[7:4]                               0000 0000
            0x0B              RegSenseLow                       Sense register for I/O[3:0]                               0000 0000
            0x0C              RegInterruptSource                Interrupt source register                                 0000 0000
            0x0D              RegEventStatus                    Event status register                                     0000 0000
            0x0E              RegLevelShifter                   Level shifter register                                    0000 0000
            0x0F              RegClock                          Clock management register                                 0000 0000
             0x10             RegMisc                           Miscellaneous device settings register                    0000 0000
             0x11             RegLEDDriverEnable                LED driver enable register                                0000 0000
      Debounce and Keypad Engine
             0x12             RegDebounceConfig                 Debounce configuration register                           0000 0000
             0x13             RegDebounceEnable                 Debounce enable register                                  0000 0000
             0x14             RegKeyConfig                      Key scan configuration register                           0000 0000
             0x15             RegKeyData                        Key value                                                 1111 1111
      LED Driver (PWM, blinking, breathing)
             0x16             RegIOn0                           ON intensity register for I/O[0]                          1111 1111
             0x17             RegIOn1                           ON intensity register for I/O[1]                          1111 1111
             0x18             RegTOn2                           ON time register for I/O[2]                               0000 0000
             0x19             RegIOn2                           ON intensity register for I/O[2]                          1111 1111
            0x1A              RegOff2                           OFF time/intensity register for I/O[2]                    0000 0000
            0x1B              RegTOn3                           ON time register for I/O[3]                               0000 0000
            0x1C              RegIOn3                           ON intensity register for I/O[3]                          1111 1111
            0x1D              RegOff3                           OFF time/intensity register for I/O[3]                    0000 0000
            0x1E              RegTRise3                         Fade in register for I/O[3]                               0000 0000
            0x1F              RegTFall3                         Fade out register for I/O[3]                              0000 0000
             0x20             RegIOn4                           ON intensity register for I/O[4]                          1111 1111
             0x21             RegIOn5                           ON intensity register for I/O[5]                          1111 1111
             0x22             RegTOn6                           ON time register for I/O[6]                               0000 0000
             0x23             RegIOn6                           ON intensity register for I/O[6]                          1111 1111
             0x24             RegOff6                           OFF time/intensity register for I/O[6]                    0000 0000
             0x25             RegTOn7                           ON time register for I/O[7]                               0000 0000
             0x26             RegIOn7                           ON intensity register for I/O[7]                          1111 1111
             0x27             RegOff7                           OFF time/intensity register for I/O[7]                    0000 0000
             0x28             RegTRise7                         Fade in register for I/O[7]                               0000 0000
             0x29             RegTFall7                         Fade out register for I/O[7]                              0000 0000
      Miscellaneous
            0x2A              RegHighInput                      High input enable register                                0000 0000
      Software Reset
            0x7D              RegReset                          Software reset register                                   0000 0000
      Test (not to be written)
            0x7E              RegTest1                          Test register                                             0000 0000
            0x7F              RegTest2                          Test register                                             0000 0000
    *Bits set as output take “1” as default value.
                                                  Table 8 – SX1508B Configuration Registers Overview
               th
Rev 4 – 26 April 2011                                                         22                                         www.semtech.com


                                                                                           SX1508B/SX1509B
                                                                   World’s Lowest Voltage Level Shifting GPIO
                                                                              with LED Driver and Keypad Engine
 ADVANCED COMMUNICATIONS & SENSING
Addr  Name               Default Bits Description
                                      Disables the input buffer of each IO
0x00  RegInputDisable     0x00    7:0 0 : Input buffer is enabled (input actually being used)
                                      1 : Input buffer is disabled (input actually not being used or LED connection)
                                      Enables increased slew rate of the output buffer of each [output-configured] IO
0x01  RegLongSlew         0x00    7:0 0 : Increased slew rate is disabled
                                      1 : Increased slew rate is enabled
                                      Enables reduced drive of the output buffer of each [output-configured] IO
0x02  RegLowDrive         0x00    7:0 0 : Reduced drive is disabled
                                      1 : Reduced drive is enabled. IOL specifications are divided by 2.
                                      Enables the pull-up for each IO
0x03  RegPullUp           0x00    7:0 0 : Pull-up is disabled
                                      1 : Pull-up is enabled
                                      Enables the pull-down for each IO
0x04  RegPullDown         0x00    7:0 0 : Pull-down is disabled
                                      1 : Pull-down is enabled
                                      Enables open drain operation for each [output-configured] IO
0x05  RegOpenDrain        0x00    7:0 0 : Regular push-pull operation
                                      1 : Open drain operation
                                      Enables polarity inversion for each IO
0x06  RegPolarity         0x00    7:0 0 : Normal polarity : RegData[x] = IO[x]
                                      1 : Inverted polarity : RegData[x] = !IO[x] (for both input and output configured IOs)
                                      Configures direction for each IO.
0x07  RegDir              0xFF    7:0 0 : IO is configured as an output
                                      1 : IO is configured as an input
                                      Write: Data to be output to the output-configured IOs
0x08  RegData             0xFF    7:0
                                      Read: Data seen at the IOs, independent of the direction configured.
                                      Configures which [input-configured] IO will trigger an interrupt on NINT pin
0x09  RegInterruptMask    0xFF    7:0 0 : An event on this IO will trigger an interrupt
                                      1 : An event on this IO will NOT trigger an interrupt
                                  7:6 Edge sensitivity of RegData[7]                                 00 : None
                                  5:4 Edge sensitivity of RegData[6]                                 01 : Rising
0x0A  RegSenseHigh        0x00
                                  3:2 Edge sensitivity of RegData[5]                                 10 : Falling
                                  1:0 Edge sensitivity of RegData[4]                                 11 : Both
                                  7:6 Edge sensitivity of RegData[3]                                 00 : None
                                  5:4 Edge sensitivity of RegData[2]                                 01 : Rising
0x0B  RegSenseLow         0x00
                                  3:2 Edge sensitivity of RegData[1]                                 10 : Falling
                                  1:0 Edge sensitivity of RegData[0]                                 11 : Both
                                      Interrupt source (from IOs set in RegInterruptMask)
                                      0 : No interrupt has been triggered by this IO
                                      1 : An interrupt has been triggered by this IO (an event as configured in relevant
0x0C  RegInterruptSource  0x00    7:0 RegSense register occured).
                                      Writing '1' clears the bit in RegInterruptSource and in RegEventStatus
                                      When all bits are cleared, NINT signal goes back high.
                                      Event status of all IOs.
                                      0 : No event has occured on this IO
                                      1 : An event has occured on this IO (an edge as configured in relevant RegSense
0x0D  RegEventStatus      0x00    7:0 register occured).
                                      Writing '1' clears the bit in RegEventStatus and in RegInterruptSource if relevant.
                                      If the edge sensitivity of the IO is changed, the bit(s) will be cleared automatically
                                  7:6 Level shifter mode for IO[3] (Bank A) and IO[7] (Bank B)           00 : OFF
                                  5:4 Level shifter mode for IO[2] (Bank A) and IO[6] (Bank B)           01 : A->B
0x0E  RegLevelShifter     0x00
                                  3:2 Level shifter mode for IO[1] (Bank A) and IO[5] (Bank B)           10 : B->A
                                  1:0 Level shifter mode for IO[0] (Bank A) and IO[4] (Bank B)           11 : Reserved
                                   7  Unused
                                      Oscillator frequency (fOSC) source
                                      00 : OFF. LED driver, keypad engine and debounce features are disabled.
                                  6:5 01 : External clock input (OSCIN)
                                      10 : Internal 2MHz oscillator
                                      11 : Reserved
0x0F  RegClock            0x00        OSCIO pin function (Cf. §4.7)
                                   4  0 : OSCIO is an input (OSCIN)
                                      1 : OSCIO is an output (OSCOUT)
                                      Frequency of the signal output on OSCOUT pin:
                                      0x0 : 0Hz, permanent "0" logical level (GPO)
                                  3:0
                                      0xF : 0Hz, permanent "1" logical level (GPO)
                                      Else : fOSCOUT = fOSC/(2^(RegClock[3:0]-1))
                                      LED Driver mode for Bank B ‘s fading capable IOs (IO7)
0x10  RegMisc             0x00     7  0: Linear
                                      1: Logarithmic
           th
 Rev 4 – 26 April 2011                               23                                                 www.semtech.com


                                                                                      SX1508B/SX1509B
                                                              World’s Lowest Voltage Level Shifting GPIO
                                                                         with LED Driver and Keypad Engine
 ADVANCED COMMUNICATIONS & SENSING
                                  Frequency of the LED Driver clock ClkX of all IOs:
                              6:4 0 : OFF. LED driver functionality is disabled for all IOs.
                                  Else : ClkX = fOSC/(2^(RegMisc[6:4]-1))
                                  LED Driver mode for Bank A ‘s fading capable IOs (IO3)
                               3  0: Linear
                                  1: Logarithmic
                                  NRESET pin function when externally forced low (Cf. §4.3.1 and §4.8.5).
                                  0: Equivalent to POR
                               2
                                  1: Reset PWM/Blink/Fade counters (not user programmed values)
                                  This bit is can only be reset manually or by POR, not by NRESET.
                                  Auto-increment register address (Cf. §4.4)
                               1  0: ON. When several consecutive data are read/written, register address is incremented.
                                  1: OFF. When several consecutive data are read/written, register address is kept fixed.
                                  Autoclear NINT on RegData read (Cf. §4.6)
                                  0: ON. RegInterruptSource is also automatically cleared when RegData is read.
                               0
                                  1: OFF. RegInterruptSource must be manually cleared, either directly or via
                                  RegEventStatus.
                                  Enables LED Driver for each [output-configured] IO
0x11  RegLEDDriverEnable 0x00 7:0 0 : LED Driver is disabled
                                  1 : LED Driver is enabled
                              7:3 Unused
                                  Debounce time (Cf. §4.5.1)
                                  000: 0.5ms x 2MHz/fOSC
                                  001: 1ms x 2MHz/fOSC
0x12  RegDebounceConfig  0x00     010: 2ms x 2MHz/fOSC
                              2:0 011: 4ms x 2MHz/fOSC
                                  100: 8ms x 2MHz/fOSC
                                  101: 16ms x 2MHz/fOSC
                                  110: 32ms x 2MHz/fOSC
                                  111: 64ms x 2MHz/fOSC
                                  Enables debouncing for each [input-configured] IO
0x13  RegDebounceEnable  0x00 7:0 0 : Debouncing is disabled
                                  1 : Debouncing is enabled
                               7  Unused
                                  Number of rows (outputs) + key scan enable
                                  00 : Key scan OFF
                              6:5 01 : 2 rows – IO[0:1]
                                  10 : 3 rows – IO[0:2]
                                  11 : 4 rows – IO[0:3]
                                  Number of columns (inputs)
                                  00 : 1 column – IO[4]
                              4:3 01 : 2 columns – IO[4:5]
0x14  RegKeyConfig       0x00     10 : 3 columns – IO[4:6]
                                  11 : 4 columns – IO[4:7]
                                  Scan time per row (must be set above debounce time).
                                  000 : 1ms x 2MHz/fOSC
                                  001 : 2ms x 2MHz/fOSC
                                  010 : 4ms x 2MHz/fOSC
                              2:0 011 : 8ms x 2MHz/fOSC
                                  100 : 16ms x 2MHz/fOSC
                                  101 : 32ms x 2MHz/fOSC
                                  110 : 64ms x 2MHz/fOSC
                                  111 : 128ms x 2MHz/fOSC
                                  Key which generated NINT (active low)
0x15  RegKeyData         0xFF 7:0 Ex: RegKeyData=11011110 => key [IO5;IO0] has been pressed and generated NINT
                                  When read it is automatically cleared together with NINT and key scan continues.
                              7:5 Unused
                                  ON Time of IO[X]:
0xXX  RegTOnX            0x00     0 : Infinite (Static mode, TOn directly controlled by RegData, Cf §4.8.2)
                              4:0
                                  1 - 15 : TOnX = 64 * RegTOnX * (255/ClkX)
                                  16 - 31 : TOnX = 512 * RegTOnX * (255/ClkX)
                                  ON Intensity of IO[X]
0xXX  RegIOnX            0xFF 7:0 - Linear mode : IOnX = RegIOnX
                                  - Logarithmic mode (fading capable IOs only) : IOnX = f(RegIOnX) , Cf §4.8.5
                                  OFF Time of IO[X]:
                                  0 : Infinite (Single shot mode, TOff directly controlled by RegData, Cf §4.8.3)
                              7:3
                                  1 - 15 : TOffX = 64 * RegOffX[7:3] * (255/ClkX)
0xXX  RegOffX            0x00     16 - 31 : TOffX = 512 * RegOffX[7:3] * (255/ClkX)
                                  OFF Intensity of IO[X]
                              2:0 - Linear mode : IOffX = 4 x RegOff[2:0]
                                  - Logarithmic mode (fading capable IOs only) : IOffX = f(4 x RegOffX[2:0]) , Cf §4.8.5
                              7:5 Unused
                                  Fade In setting of IO[X]
0xXX  RegTRiseX          0x00     0 : OFF
                              4:0
                                  1 - 15 : TRiseX = (RegIOnX-(4xRegOffX[2:0])) * RegTRiseX * (255/ClkX)
                                  16 - 31 : TRiseX = 16 * (RegIOnX-(4xRegOffX[2:0])) * RegTRiseX * (255/ClkX)
           th
 Rev 4 – 26 April 2011                           24                                              www.semtech.com


                                                                                        SX1508B/SX1509B
                                                                World’s Lowest Voltage Level Shifting GPIO
                                                                          with LED Driver and Keypad Engine
 ADVANCED COMMUNICATIONS & SENSING
                                7:5   Unused
                                      Fade Out setting of IO[X]
0xXX  RegTFallX        0x00           0 : OFF
                                4:0
                                      1 - 15 : TFallX = (RegIOnX-(4xRegOffX[2:0])) * RegTFallX * (255/ClkX)
                                      16 - 31 : TFallX = 16 * (RegIOnX-(4xRegOffX[2:0])) * RegTFallX * (255/ClkX)
                                      Enables high input mode for each [input-configured] IO
0x2A  RegHighInput     0x00     7:0   0 : OFF. VIH max = 3.6V and VCCx min = 1.2V
                                      1 : ON. VIH max = 5.5V and VCCx min = 1.65V
                                      Software reset register
0x7D  RegReset         0x00     7:0   Writing consecutively 0x12 and 0x34 will reset the device (same as POR).
                                      Always reads 0.
                       Table 9 – SX1508B Configuration Registers Description
           th
 Rev 4 – 26 April 2011                              25                                             www.semtech.com


                                                                                               SX1508B/SX1509B
                                                                        World’s Lowest Voltage Level Shifting GPIO
                                                                                   with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
5.2   SX1509B 16-channel GPIO with LED Driver and Keypad Engine
       Address      Name                    Description                                                Default
      Device and IO Banks
         0x00       RegInputDisableB        Input buffer disable register - I/O[15-8] (Bank B)        0000 0000
         0x01       RegInputDisableA        Input buffer disable register - I/O[7-0] (Bank A)         0000 0000
         0x02       RegLongSlewB            Output buffer long slew register - I/O[15-8] (Bank B)     0000 0000
         0x03       RegLongSlewA            Output buffer long slew register - I/O[7-0] (Bank A)      0000 0000
         0x04       RegLowDriveB            Output buffer low drive register - I/O[15-8] (Bank B)     0000 0000
         0x05       RegLowDriveA            Output buffer low drive register - I/O[7-0] (Bank A)      0000 0000
         0x06       RegPullUpB              Pull-up register - I/O[15-8] (Bank B)                     0000 0000
         0x07       RegPullUpA              Pull-up register - I/O[7-0] (Bank A)                      0000 0000
         0x08       RegPullDownB            Pull-down register - I/O[15-8] (Bank B)                   0000 0000
         0x09       RegPullDownA            Pull-down register - I/O[7-0] (Bank A)                    0000 0000
         0x0A       RegOpenDrainB           Open drain register - I/O[15-8] (Bank B)                  0000 0000
         0x0B       RegOpenDrainA           Open drain register - I/O[7-0] (Bank A)                   0000 0000
         0x0C       RegPolarityB            Polarity register - I/O[15-8] (Bank B)                    0000 0000
         0x0D       RegPolarityA            Polarity register - I/O[7-0] (Bank A)                     0000 0000
         0x0E       RegDirB                 Direction register - I/O[15-8] (Bank B)                   1111 1111
         0x0F       RegDirA                 Direction register - I/O[7-0] (Bank A)                    1111 1111
         0x10       RegDataB                Data register - I/O[15-8] (Bank B)                        1111 1111*
         0x11       RegDataA                Data register - I/O[7-0] (Bank A)                         1111 1111*
         0x12       RegInterruptMaskB       Interrupt mask register - I/O[15-8] (Bank B)              1111 1111
         0x13       RegInterruptMaskA       Interrupt mask register - I/O[7-0] (Bank A)               1111 1111
         0x14       RegSenseHighB           Sense register for I/O[15:12]                             0000 0000
         0x15       RegSenseLowB            Sense register for I/O[11:8]                              0000 0000
         0x16       RegSenseHighA           Sense register for I/O[7:4]                               0000 0000
         0x17       RegSenseLowA            Sense register for I/O[3:0]                               0000 0000
         0x18       RegInterruptSourceB     Interrupt source register - I/O[15-8] (Bank B)            0000 0000
         0x19       RegInterruptSourceA     Interrupt source register - I/O[7-0] (Bank A)             0000 0000
         0x1A       RegEventStatusB         Event status register - I/O[15-8] (Bank B)                0000 0000
         0x1B       RegEventStatusA         Event status register - I/O[7-0] (Bank A)                 0000 0000
         0x1C       RegLevelShifter1        Level shifter register                                    0000 0000
         0x1D       RegLevelShifter2        Level shifter register                                    0000 0000
         0x1E       RegClock                Clock management register                                 0000 0000
         0x1F       RegMisc                 Miscellaneous device settings register                    0000 0000
         0x20       RegLEDDriverEnableB     LED driver enable register - I/O[15-8] (Bank B)           0000 0000
         0x21       RegLEDDriverEnableA     LED driver enable register - I/O[7-0] (Bank A)            0000 0000
      Debounce and Keypad Engine
         0x22       RegDebounceConfig       Debounce configuration register                           0000 0000
         0x23       RegDebounceEnableB      Debounce enable register - I/O[15-8] (Bank B)             0000 0000
         0x24       RegDebounceEnableA      Debounce enable register - I/O[7-0] (Bank A)              0000 0000
         0x25       RegKeyConfig1           Key scan configuration register                           0000 0000
         0x26       RegKeyConfig2           Key scan configuration register                           0000 0000
         0x27       RegKeyData1             Key value (column)                                        1111 1111
         0x28       RegKeyData2             Key value (row)                                           1111 1111
      LED Driver (PWM, blinking, breathing)
         0x29       RegTOn0                 ON time register for I/O[0]                               0000 0000
         0x2A       RegIOn0                 ON intensity register for I/O[0]                          1111 1111
         0x2B       RegOff0                 OFF time/intensity register for I/O[0]                    0000 0000
         0x2C       RegTOn1                 ON time register for I/O[1]                               0000 0000
         0x2D       RegIOn1                 ON intensity register for I/O[1]                          1111 1111
         0x2E       RegOff1                 OFF time/intensity register for I/O[1]                    0000 0000
         0x2F       RegTOn2                 ON time register for I/O[2]                               0000 0000
         0x30       RegIOn2                 ON intensity register for I/O[2]                          1111 1111
         0x31       RegOff2                 OFF time/intensity register for I/O[2]                    0000 0000
         0x32       RegTOn3                 ON time register for I/O[3]                               0000 0000
         0x33       RegIOn3                 ON intensity register for I/O[3]                          1111 1111
         0x34       RegOff3                 OFF time/intensity register for I/O[3]                    0000 0000
         0x35       RegTOn4                 ON time register for I/O[4]                               0000 0000
         0x36       RegIOn4                 ON intensity register for I/O[4]                          1111 1111
         0x37       RegOff4                 OFF time/intensity register for I/O[4]                    0000 0000
         0x38       RegTRise4               Fade in register for I/O[4]                               0000 0000
           th
Rev 4 – 26 April 2011                                     26                                         www.semtech.com


                                                                                                               SX1508B/SX1509B
                                                                                           World’s Lowest Voltage Level Shifting GPIO
                                                                                                      with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
        Address               Name                             Description                                               Default
             0x39             RegTFall4                        Fade out register for I/O[4]                              0000 0000
            0x3A              RegTOn5                          ON time register for I/O[5]                               0000 0000
            0x3B              RegIOn5                          ON intensity register for I/O[5]                          1111 1111
            0x3C              RegOff5                          OFF time/intensity register for I/O[5]                    0000 0000
            0x3D              RegTRise5                        Fade in register for I/O[5]                               0000 0000
            0x3E              RegTFall5                        Fade out register for I/O[5]                              0000 0000
            0x3F              RegTOn6                          ON time register for I/O[6]                               0000 0000
             0x40             RegIOn6                          ON intensity register for I/O[6]                          1111 1111
             0x41             RegOff6                          OFF time/intensity register for I/O[6]                    0000 0000
             0x42             RegTRise6                        Fade in register for I/O[6]                               0000 0000
             0x43             RegTFall6                        Fade out register for I/O[6]                              0000 0000
             0x44             RegTOn7                          ON time register for I/O[7]                               0000 0000
             0x45             RegIOn7                          ON intensity register for I/O[7]                          1111 1111
             0x46             RegOff7                          OFF time/intensity register for I/O[7]                    0000 0000
             0x47             RegTRise7                        Fade in register for I/O[7]                               0000 0000
             0x48             RegTFall7                        Fade out register for I/O[7]                              0000 0000
             0x49             RegTOn8                          ON time register for I/O[8]                               0000 0000
            0x4A              RegIOn8                          ON intensity register for I/O[8]                          1111 1111
            0x4B              RegOff8                          OFF time/intensity register for I/O[8]                    0000 0000
            0x4C              RegTOn9                          ON time register for I/O[9]                               0000 0000
            0x4D              RegIOn9                          ON intensity register for I/O[9]                          1111 1111
            0x4E              RegOff9                          OFF time/intensity register for I/O[9]                    0000 0000
            0x4F              RegTOn10                         ON time register for I/O[10]                              0000 0000
             0x50             RegIOn10                         ON intensity register for I/O[10]                         1111 1111
             0x51             RegOff10                         OFF time/intensity register for I/O[10]                   0000 0000
             0x52             RegTOn11                         ON time register for I/O[11]                              0000 0000
             0x53             RegIOn11                         ON intensity register for I/O[11]                         1111 1111
             0x54             RegOff11                         OFF time/intensity register for I/O[11]                   0000 0000
             0x55             RegTOn12                         ON time register for I/O[12]                              0000 0000
             0x56             RegIOn12                         ON intensity register for I/O[12]                         1111 1111
             0x57             RegOff12                         OFF time/intensity register for I/O[12]                   0000 0000
             0x58             RegTRise12                       Fade in register for I/O[12]                              0000 0000
             0x59             RegTFall12                       Fade out register for I/O[12]                             0000 0000
            0x5A              RegTOn13                         ON time register for I/O[13]                              0000 0000
            0x5B              RegIOn13                         ON intensity register for I/O[13]                         1111 1111
            0x5C              RegOff13                         OFF time/intensity register for I/O[13]                   0000 0000
            0x5D              RegTRise13                       Fade in register for I/O[13]                              0000 0000
            0x5E              RegTFall13                       Fade out register for I/O[13]                             0000 0000
            0x5F              RegTOn14                         ON time register for I/O[14]                              0000 0000
             0x60             RegIOn14                         ON intensity register for I/O[14]                         1111 1111
             0x61             RegOff14                         OFF time/intensity register for I/O[14]                   0000 0000
             0x62             RegTRise14                       Fade in register for I/O[14]                              0000 0000
             0x63             RegTFall14                       Fade out register for I/O[14]                             0000 0000
             0x64             RegTOn15                         ON time register for I/O[15]                              0000 0000
             0x65             RegIOn15                         ON intensity register for I/O[15]                         1111 1111
             0x66             RegOff15                         OFF time/intensity register for I/O[15]                   0000 0000
             0x67             RegTRise15                       Fade in register for I/O[15]                              0000 0000
             0x68             RegTFall15                       Fade out register for I/O[15]                             0000 0000
      Miscellaneous
             0x69             RegHighInputB                    High input enable register - I/O[15-8] (Bank B)           0000 0000
            0x6A              RegHighInputA                    High input enable register - I/O[7-0] (Bank A)            0000 0000
      Software Reset
            0x7D              RegReset                         Software reset register                                   0000 0000
      Test (not to be written)
            0x7E              RegTest1                         Test register                                             0000 0000
            0x7F              RegTest2                         Test register                                             0000 0000
    *Bits set as output take “1” as default value.
                                                 Table 10 – SX1509B Configuration Registers Overview
               th
Rev 4 – 26 April 2011                                                        27                                         www.semtech.com


                                                                                          SX1508B/SX1509B
                                                                 World’s Lowest Voltage Level Shifting GPIO
                                                                            with LED Driver and Keypad Engine
 ADVANCED COMMUNICATIONS & SENSING
Addr  Name              Default Bits Description
                                     Disables the input buffer of each IO
0x00  RegInputDisableB   0x00    7:0 0 : Input buffer is enabled (input actually being used)
                                     1 : Input buffer is disabled (input actually not being used or LED connection)
                                     Disables the input buffer of each IO
0x01  RegInputDisableA   0x00    7:0 0 : Input buffer is enabled (input actually being used)
                                     1 : Input buffer is disabled (input actually not being used, LED connection)
                                     Enables increased slew rate of the output buffer of each [output-configured] IO
0x02  RegLongSlewB       0x00    7:0 0 : Increased slew rate is disabled
                                     1 : Increased slew rate is enabled
                                     Enables increased slew rate of the output buffer of each [output-configured] IO
0x03  RegLongSlewA       0x00    7:0 0 : Increased slew rate is disabled
                                     1 : Increased slew rate is enabled
                                     Enables reduced drive of the output buffer of each [output-configured] IO
0x04  RegLowDriveB       0x00    7:0 0 : Reduced drive is disabled
                                     1 : Reduced drive is enabled. IOL specifications are divided by 2.
                                     Enables reduced drive of the output buffer of each [output-configured] IO
0x05  RegLowDriveA       0x00    7:0 0 : Reduced drive is disabled
                                     1 : Reduced drive is enabled. IOL specifications are divided by 2.
                                     Enables the pull-up for each IO
0x06  RegPullUpB         0x00    7:0 0 : Pull-up is disabled
                                     1 : Pull-up is enabled
                                     Enables the pull-up for each IO
0x07  RegPullUpA         0x00    7:0 0 : Pull-up is disabled
                                     1 : Pull-up is enabled
                                     Enables the pull-down for each IO
0x08  RegPullDownB       0x00    7:0 0 : Pull-down is disabled
                                     1 : Pull-down is enabled
                                     Enables the pull-down for each IO
0x09  RegPullDownA       0x00    7:0 0 : Pull-down is disabled
                                     1 : Pull-down is enabled
                                     Enables open drain operation for each [output-configured] IO
0x0A  RegOpenDrainB      0x00    7:0 0 : Regular push-pull operation
                                     1 : Open drain operation
                                     Enables open drain operation for each [output-configured] IO
0x0B  RegOpenDrainA      0x00    7:0 0 : Regular push-pull operation
                                     1 : Open drain operation
                                     Enables polarity inversion for each IO
0x0C  RegPolarityB       0x00    7:0 0 : Normal polarity : RegData[x] = IO[x]
                                     1 : Inverted polarity : RegData[x] = !IO[x] (for both input and output configured IOs)
                                     Enables polarity inversion for each IO
0x0D  RegPolarityA       0x00    7:0 0 : Normal polarity : RegData[x] = IO[x]
                                     1 : Inverted polarity : RegData[x] = !IO[x] (for both input and output configured IOs)
                                     Configures direction for each IO.
0x0E  RegDirB            0xFF    7:0 0 : IO is configured as an output
                                     1 : IO is configured as an input
                                     Configures direction for each IO.
0x0F  RegDirA            0xFF    7:0 0 : IO is configured as an output
                                     1 : IO is configured as an input
                                     Write: Data to be output to the output-configured IOs
0x10  RegDataB           0xFF    7:0
                                     Read: Data seen at the IOs, independent of the direction configured.
                                     Write: Data to be output to the output-configured IOs
0x11  RegDataA           0xFF    7:0
                                     Read: Data seen at the IOs, independent of the direction configured.
                                     Configures which [input-configured] IO will trigger an interrupt on NINT pin
0x12  RegInterruptMaskB  0xFF    7:0 0 : An event on this IO will trigger an interrupt
                                     1 : An event on this IO will NOT trigger an interrupt
                                     Configures which [input-configured] IO will trigger an interrupt on NINT pin
0x13  RegInterruptMaskA  0xFF    7:0 0 : An event on this IO will trigger an interrupt
                                     1 : An event on this IO will NOT trigger an interrupt
                                 7:6 Edge sensitivity of RegData[15]                               00 : None
                                 5:4 Edge sensitivity of RegData[14]                               01 : Rising
0x14  RegSenseHighB      0x00
                                 3:2 Edge sensitivity of RegData[13]                               10 : Falling
                                 1:0 Edge sensitivity of RegData[12]                               11 : Both
                                 7:6 Edge sensitivity of RegData[11]                               00 : None
                                 5:4 Edge sensitivity of RegData[10]                               01 : Rising
0x15  RegSenseLowB       0x00                                                                      10 : Falling
                                 3:2 Edge sensitivity of RegData[9]
                                                                                                   11 : Both
                                 1:0 Edge sensitivity of RegData[8]
                                 7:6 Edge sensitivity of RegData[7]                                00 : None
                                 5:4 Edge sensitivity of RegData[6]                                01 : Rising
0x16  RegSenseHighA      0x00
                                 3:2 Edge sensitivity of RegData[5]                                10 : Falling
                                 1:0 Edge sensitivity of RegData[4]                                11 : Both
0x17  RegSenseLowA       0x00    7:6 Edge sensitivity of RegData[3]                                00 : None
           th
 Rev 4 – 26 April 2011                              28                                                www.semtech.com


                                                                                        SX1508B/SX1509B
                                                                World’s Lowest Voltage Level Shifting GPIO
                                                                           with LED Driver and Keypad Engine
 ADVANCED COMMUNICATIONS & SENSING
                               5:4 Edge sensitivity of RegData[2]
                               3:2 Edge sensitivity of RegData[1]
                               1:0 Edge sensitivity of RegData[0]
                                   Interrupt source (from IOs set in RegInterruptMask)
                                   0 : No interrupt has been triggered by this IO
                                   1 : An interrupt has been triggered by this IO (an event as configured in relevant
0x18  RegInterruptSourceB 0x00 7:0 RegSense register occured).
                                   Writing '1' clears the bit in RegInterruptSource and in RegEventStatus
                                   When all bits are cleared, NINT signal goes back high.
                                   Interrupt source (from IOs set in RegInterruptMask)
                                   0 : No interrupt has been triggered by this IO
                                   1 : An interrupt has been triggered by this IO (an event as configured in relevant
0x19  RegInterruptSourceA 0x00 7:0 RegSense register occured).
                                   Writing '1' clears the bit in RegInterruptSource and in RegEventStatus
                                   When all bits are cleared, NINT signal goes back high.
                                   Event status of all IOs.
                                   0 : No event has occured on this IO
                                   1 : An event has occured on this IO (an edge as configured in relevant RegSense
0x1A  RegEventStatusB     0x00 7:0 register occured).
                                   Writing '1' clears the bit in RegEventStatus and in RegInterruptSource if relevant.
                                   If the edge sensitivity of the IO is changed, the bit(s) will be cleared automatically
                                   Event status of all IOs.
                                   0 : No event has occured on this IO
                                   1 : An event has occured on this IO (an edge as configured in relevant RegSense
0x1B  RegEventStatusA     0x00 7:0 register occured).
                                   Writing '1' clears the bit in RegEventStatus and in RegInterruptSource if relevant.
                                   If the edge sensitivity of the IO is changed, the bit(s) will be cleared automatically
                               7:6 Level shifter mode for IO[7] (Bank A) and IO[15] (Bank B)          00 : OFF
                               5:4 Level shifter mode for IO[6] (Bank A) and IO[14] (Bank B)          01 : A->B
0x1C  RegLevelShifter1    0x00
                               3:2 Level shifter mode for IO[5] (Bank A) and IO[13] (Bank B)          10 : B->A
                               1:0 Level shifter mode for IO[4] (Bank A) and IO[12] (Bank B)          11 : Reserved
                               7:6 Level shifter mode for IO[3] (Bank A) and IO[11] (Bank B)          00 : OFF
                               5:4 Level shifter mode for IO[2] (Bank A) and IO[10] (Bank B)          01 : A->B
0x1D  RegLevelShifter2    0x00
                               3:2 Level shifter mode for IO[1] (Bank A) and IO[9] (Bank B)           10 : B->A
                               1:0 Level shifter mode for IO[0] (Bank A) and IO[8] (Bank B)           11 : Reserved
                                7  Unused
                                   Oscillator frequency (fOSC) source
                                   00 : OFF. LED driver, keypad engine and debounce features are disabled.
                               6:5 01 : External clock input (OSCIN)
                                   10 : Internal 2MHz oscillator
                                   11 : Reserved
0x1E  RegClock            0x00     OSCIO pin function (Cf. §4.7)
                                4  0 : OSCIO is an input (OSCIN)
                                   1 : OSCIO is an output (OSCOUT)
                                   Frequency of the signal output on OSCOUT pin:
                                   0x0 : 0Hz, permanent "0" logical level (GPO)
                               3:0
                                   0xF : 0Hz, permanent "1" logical level (GPO)
                                   Else : fOSCOUT = fOSC/(2^(RegClock[3:0]-1))
                                   LED Driver mode for Bank B ‘s fading capable IOs (IO15-12)
                                7  0: Linear
                                   1: Logarithmic
                                   Frequency of the LED Driver clock ClkX of all IOs:
                               6:4 0 : OFF. LED driver functionality is disabled for all IOs.
                                   Else : ClkX = fOSC/(2^(RegMisc[6:4]-1))
                                   LED Driver mode for Bank A ‘s fading capable IOs (IO7-4)
                                3  0: Linear
                                   1: Logarithmic
0x1F  RegMisc             0x00     NRESET pin function when externally forced low (Cf. §4.3.1 and §4.8.5)
                                   0: Equivalent to POR
                                2
                                   1: Reset PWM/Blink/Fade counters (not user programmed values)
                                   This bit is can only be reset manually or by POR, not by NRESET.
                                   Auto-increment register address (Cf. §4.4)
                                1  0: ON. When several consecutive data are read/written, register address is incremented.
                                   1: OFF. When several consecutive data are read/written, register address is kept fixed.
                                   Autoclear NINT on RegData read (Cf. §4.6)
                                   0: ON. RegInterruptSourceA/B is also automatically cleared when RegDataA/B is read.
                                0
                                   1: OFF. RegInterruptSourceA/B must be manually cleared, either directly or via
                                   RegEventStatusA/B.
                                   Enables LED Driver for each [output-configured] IO
0x20  RegLEDDriverEnableB 0x00 7:0 0 : LED Driver is disabled
                                   1 : LED Driver is enabled
           th
 Rev 4 – 26 April 2011                            29                                                 www.semtech.com


                                                                                       SX1508B/SX1509B
                                                               World’s Lowest Voltage Level Shifting GPIO
                                                                          with LED Driver and Keypad Engine
 ADVANCED COMMUNICATIONS & SENSING
                                   Enables LED Driver for each [output-configured] IO
0x21  RegLEDDriverEnableA 0x00 7:0 0 : LED Driver is disabled
                                   1 : LED Driver is enabled
                               7:3 Unused
                                   Debounce time (Cf. §4.5.1)
                                   000: 0.5ms x 2MHz/fOSC
                                   001: 1ms x 2MHz/fOSC
0x22  RegDebounceConfig   0x00     010: 2ms x 2MHz/fOSC
                               2:0 011: 4ms x 2MHz/fOSC
                                   100: 8ms x 2MHz/fOSC
                                   101: 16ms x 2MHz/fOSC
                                   110: 32ms x 2MHz/fOSC
                                   111: 64ms x 2MHz/fOSC
                                   Enables debouncing for each [input-configured] IO
0x23  RegDebounceEnableB  0x00 7:0 0 : Debouncing is disabled
                                   1 : Debouncing is enabled
                                   Enables debouncing for each [input-configured] IO
0x24  RegDebounceEnableA  0x00 7:0 0 : Debouncing is disabled
                                   1 : Debouncing is enabled
                                7  Reserved
                                   Auto Sleep time (no key press within this time will set keypad engine to sleep)
                                   000 : OFF
                                   001 : 128ms x 2MHz/fOSC
                                   010 : 256ms x 2MHz/fOSC
                               6:4 011 : 512ms x 2MHz/fOSC
                                   100 : 1sec x 2MHz/fOSC
                                   101 : 2sec x 2MHz/fOSC
                                   110 : 4sec x 2MHz/fOSC
0x25  RegKeyConfig1       0x00
                                   111 : 8sec x 2MHz/fOSC
                                3  Unused
                                   Scan time per row (must be set above debounce time).
                                   000 : 1ms x 2MHz/fOSC
                                   001 : 2ms x 2MHz/fOSC
                                   010 : 4ms x 2MHz/fOSC
                               2:0 011 : 8ms x 2MHz/fOSC
                                   100 : 16ms x 2MHz/fOSC
                                   101 : 32ms x 2MHz/fOSC
                                   110 : 64ms x 2MHz/fOSC
                                   111 : 128ms x 2MHz/fOSC
                               7:6 Unused
                                   Number of rows (outputs) + key scan enable
                                   000 : Key scan OFF
                                   001 : 2 rows – IO[0:1]
                                   010 : 3 rows – IO[0:2]
                               5:3 011 : 4 rows – IO[0:3]
                                   100 : 5 rows – IO[0:4]
                                   101 : 6 rows – IO[0:5]
                                   110 : 7 rows – IO[0:6]
0x26  RegKeyConfig2       0x00     111 : 8 rows – IO[0:7]
                                   Number of columns (inputs)
                                   000 : 1 column – IO[8]
                                   001 : 2 columns – IO[8:9]
                                   010 : 3 columns – IO[8:10]
                               2:0 011 : 4 columns – IO[8:11]
                                   100 : 5 columns – IO[8:12]
                                   101 : 6 columns – IO[8:13]
                                   110 : 7 columns – IO[8:14]
                                   111 : 8 columns – IO[8:15]
                                   Column which generated NINT (active low)
0x27  RegKeyData1         0xFF 7:0 Ex: RegKeyData1=11011111 => IO13 has generated NINT
                                   The register is automatically cleared when RegKeyData2 is read.
                                   Row which generated NINT (active low)
                                   Ex: RegKeyData2=11111110 => IO0 has generated NINT
0x28  RegKeyData2         0xFF 7:0
                                   When the register is read both RegKeyData1 & RegKeyData2 are automatically cleared
                                   together with NINT and key scan continues.
                               7:5 Unused
                                   ON Time of IO[X]:
0xXX  RegTOnX             0x00     0 : Infinite (Static mode, TOn directly controlled by RegData, Cf §4.8.2)
                               4:0
                                   1 - 15 : TOnX = 64 * RegTOnX * (255/ClkX)
                                   16 - 31 : TOnX = 512 * RegTOnX * (255/ClkX)
                                   ON Intensity of IO[X]
0xXX  RegIOnX             0xFF 7:0 - Linear mode : IOnX = RegIOnX
                                   - Logarithmic mode (fading capable IOs only) : IOnX = f(RegIOnX) , Cf §4.8.5
           th
 Rev 4 – 26 April 2011                            30                                              www.semtech.com


                                                                                          SX1508B/SX1509B
                                                                 World’s Lowest Voltage Level Shifting GPIO
                                                                            with LED Driver and Keypad Engine
 ADVANCED COMMUNICATIONS & SENSING
                                      OFF Time of IO[X]:
                                      0 : Infinite (Single shot mode, TOff directly controlled by RegData, Cf §4.8.3)
                                 7:3
                                      1 - 15 : TOffX = 64 * RegOffX[7:3] * (255/ClkX)
0xXX  RegOffX           0x00          16 - 31 : TOffX = 512 * RegOffX[7:3] * (255/ClkX)
                                      OFF Intensity of IO[X]
                                 2:0  - Linear mode : IOffX = 4 x RegOff[2:0]
                                      - Logarithmic mode (fading capable IOs only) : IOffX = f(4 x RegOffX[2:0]) , Cf §4.8.5
                                 7:5  Unused
                                      Fade In setting of IO[X]
0xXX  RegTRiseX         0x00          0 : OFF
                                 4:0
                                      1 - 15 : TRiseX = (RegIOnX-(4xRegOffX[2:0])) * RegTRiseX * (255/ClkX)
                                      16 - 31 : TRiseX = 16 * (RegIOnX-(4xRegOffX[2:0])) * RegTRiseX * (255/ClkX)
                                 7:5  Unused
                                      Fade Out setting of IO[X]
0xXX  RegTFallX         0x00          0 : OFF
                                 4:0
                                      1 - 15 : TFallX = (RegIOnX-(4xRegOffX[2:0])) * RegTFallX * (255/ClkX)
                                      16 - 31 : TFallX = 16 * (RegIOnX-(4xRegOffX[2:0])) * RegTFallX * (255/ClkX)
                                      Enables high input mode for each [input-configured] IO
0x69  RegHighInputB     0x00     7:0  0 : OFF. VIH max = 3.6V and VCCx min = 1.2V
                                      1 : ON. VIH max = 5.5V and VCCx min = 1.65V
                                      Enables high input mode for each [input-configured] IO
0x6A  RegHighInputA     0x00     7:0  0 : OFF. VIH max = 3.6V and VCCx min = 1.2V
                                      1 : ON. VIH max = 5.5V and VCCx min = 1.65V
                                      Software reset register
0x7D  RegReset          0x00     7:0  Writing consecutively 0x12 and 0x34 will reset the device (same as POR).
                                      Always reads 0.
                       Table 11 – SX1509B Configuration Registers Description
           th
 Rev 4 – 26 April 2011                               31                                              www.semtech.com


                                                                                               SX1508B/SX1509B
                                                                              World’s Lowest Voltage Level Shifting GPIO
                                                                                      with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
6     APPLICATION INFORMATION
6.1    Typical Application Circuit
                                                                             OSCIO
                                                           3.3V                                2.5V
                                                                         VDDM      VCC1                5V   5V
                                                                                    I/O[0]
                                                                                    I/O[1]
                          Host
                       controller                                                   I/O[2]
                               I/O                                       NRESET     I/O[3]
                                                                            SX1508B            1.2V
                                                                                   VCC2
                              SCL                                        SCL        I/O[4]
                                                                                    I/O[5]
                                                                                    I/O[6]
                             SDA                                         SDA        I/O[7]
                               I/O                                       ADDR1
                                                                         ADDR0       NINT
                                                                               GND
                          Optional (depends
                          on the application)
                                       Figure 19 - Typical Application Schematic
6.2    Typical LED Connection
Typical LED Connection is described below. The LED is usually connected to a high voltage (VBAT) to take
advantage of the high sink current of the I/O and to accommodate high LED threshold voltages (VLED).
Please note that in this configuration the IO must be programmed as open drain output (RegOpenDrain) with no
pull-up (RegPullUp) and input buffer must be disabled (RegInputBufferDisable).
VCCx can take any value without compromising LED operation.
                                                                   VCCx     VBAT
                                                        VCCx                     VLED
                                                                                      *
                                               SX1508/9B
                                                                               R
                                                           IOx
                                                                       IOL
                                           *
                                            LED colour/technology dependent
                                             Figure 20 – Typical LED Operation
Serial R must be calculated for IOL not to exceed its max spec (Cf. Table 5) else VOL will increase.
           th
Rev 4 – 26 April 2011                                               32                                  www.semtech.com


                                                                             SX1508B/SX1509B
                                                           World’s Lowest Voltage Level Shifting GPIO
                                                                    with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
7   PACKAGING INFORMATION
7.1   QFN-UT 20-pin Outline Drawing
QFN-UT 20-pin, 3 x 3 mm, 0.4 mm pitch
                               Figure 21 - QFN-UT 20-pin Outline Drawing
7.2   QFN-UT 20-pin Land Pattern
                                Figure 22 - QFN-UT 20-pin Land Pattern
          th
Rev 4 – 26 April 2011                             33                                  www.semtech.com


                                                                             SX1508B/SX1509B
                                                           World’s Lowest Voltage Level Shifting GPIO
                                                                    with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
7.3   QFN-UT 28-pin Outline Drawing
QFN-UT 28-pin, 4 x 4 mm, 0.4 mm pitch
                               Figure 23 - QFN-UT 28-pin Outline Drawing
7.4   QFN-UT 28-pin Land Pattern
                                Figure 24 - QFN-UT 28-pin Land Pattern
          th
Rev 4 – 26 April 2011                             34                                  www.semtech.com


                                                                                     SX1508B/SX1509B
                                                                    World’s Lowest Voltage Level Shifting GPIO
                                                                            with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
8   SOLDERING PROFILE
The soldering reflow profile for the SX1508B and SX1509B is described in the standard IPC/JEDEC J-STD-
020C. For detailed information please go to http://www.jedec.org/download/search/jstd020c.pdf
                       Figure 25 - Classification Reflow Profile (IPC/JEDEC J-STD-020C)
          th
Rev 4 – 26 April 2011                                   35                                    www.semtech.com


                                                                      SX1508B/SX1509B
                                                     World’s Lowest Voltage Level Shifting GPIO
                                                             with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
9   MARKING INFORMATION
                                      GAA2
                                      yyww
                                      xxxx
                                yyww = Date Code
                                xxxx = Semtech Lot No.
                        Figure 26 – SX1508B Marking Information
                                     GBA3
                                     yyww
                                     xxxxx
                                     xxxxx
                            yyww = Date Code
                            xxxxx = Semtech Lot No.
                            xxxxx
                        Figure 27 – SX1509B Marking Information
          th
Rev 4 – 26 April 2011                      36                                  www.semtech.com


                                                                                        SX1508B/SX1509B
                                                                    World’s Lowest Voltage Level Shifting GPIO
                                                                              with LED Driver and Keypad Engine
ADVANCED COMMUNICATIONS & SENSING
  © Semtech 2011
  All rights reserved. Reproduction in whole or in part is prohibited without the prior written consent of the
  copyright owner. The information presented in this document does not form part of any quotation or contract, is
  believed to be accurate and reliable and may be changed without notice. No liability will be accepted by the
  publisher for any consequence of its use. Publication thereof does not convey nor imply any license under patent
  or other industrial or intellectual property rights. Semtech assumes no responsibility or liability whatsoever for
  any failure or unexpected operation resulting from misuse, neglect improper installation, repair or improper
  handling or unusual physical or electrical stress including, but not limited to, exposure to parameters beyond the
  specified maximum ratings or operation outside the specified range.
  SEMTECH PRODUCTS ARE NOT DESIGNED, INTENDED, AUTHORIZED OR WARRANTED TO BE
  SUITABLE FOR USE IN LIFE-SUPPORT APPLICATIONS, DEVICES OR SYSTEMS OR OTHER CRITICAL
  APPLICATIONS. INCLUSION OF SEMTECH PRODUCTS IN SUCH APPLICATIONS IS UNDERSTOOD TO
  BE UNDERTAKEN SOLELY AT THE CUSTOMER’S OWN RISK. Should a customer purchase or use Semtech
  products for any such unauthorized application, the customer shall indemnify and hold Semtech and its officers,
  employees, subsidiaries, affiliates, and distributors harmless against all claims, costs damages and attorney
  fees which could arise.
  Notice: All referenced brands, product names, service names and trademarks are the property of their
  respective owners.
 Contact Information
 Semtech Corporation
 Advanced Communications and Sensing Products Division
 200 Flynn Road, Camarillo, CA 93012
 Phone: (805) 498-2111 Fax: (805) 498-3804
            th
Rev 4 – 26 April 2011                                    37                                      www.semtech.com


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Semtech:
 SX1509BIULTRT SX1508BIULTRT
