                                                                                                EVALUATION KIT AVAILABLE
                                                                            MAX6650/MAX6651
                                    Fan-Speed Regulators and Monitors
                              with SMBus/I2C-Compatible Interface
                          General Description                    ____________________________Features
The MAX6650/MAX6651 fan controllers use an                       ♦ Closed/Open-Loop Fan-Speed Control for
SMBus/I2C-compatible interface to regulate and moni-                5V/12V Fans
tor the speed of 5VDC/12VDC brushless fans with built-           ♦ 2-Wire SMBus/I2C-Compatible Interface
in tachometers. They automatically force the fan’s               ♦ Monitors Tachometer Output
tachometer frequency (fan speed) to match a prepro-                     Single Tachometer (MAX6650)
grammed value in the Fan-Speed Register by using an                     Up to Four Tachometers (MAX6651)
external MOSFET or bipolar transistor to linearly regu-
                                                                 ♦ Programmable Alert Output
late the voltage across the fan. The MAX6650 regulates
the speed of a single fan by monitoring its tachometer           ♦ GPIOs
output. The MAX6651 also regulates the speed of a sin-           ♦ Hardware Full-On Override
gle fan, but it contains additional tachometer inputs to         ♦ Synchronize Multiple Fans
monitor up to four fans and control them as a single unit
                                                                 ♦ Four Selectable Slave Addresses
when they are used in parallel.
                                                                 ♦ 3V to 5.5V Supply Voltage
The MAX6650/MAX6651 provide general-purpose
input/output (GPIO) pins that serve as digital inputs,           ♦ Small Packages
digital outputs, or various hardware interfaces. Capable               10-Pin µMAX (MAX6650)
                                                                       16-Pin QSOP (MAX6651)
of sinking 10mA, these open-drain inputs/outputs can
drive an LED. To add additional hardware control, con-
figure GPIO1 to fully turn on the fan in case of software                                    Ordering Information
failure. To generate an interrupt when a fault condition
is detected, configure GPIO0 to behave as an active-                       PART            TEMP RANGE         PIN-PACKAGE
low alert output. Synchronize multiple devices by set-             MAX6650EUB             -40°C to +85°C      10 µMAX
ting GPIO2 (MAX6651 only) as an internal clock output              MAX6650EUB+            -40°C to +85°C      10 µMAX
or an external clock input.
                                                                   MAX6651EEE             -40°C to +85°C      16 QSOP
The MAX6650 is available in a space-saving 10-pin
                                                                   MAX6651EEE+            -40°C to +85°C      16 QSOP
µMAX® package, and the MAX6651 is available in a
small 16-pin QSOP package.                                       +Denotes a lead(Pb)-free/RoHS-compliant package.
 ________________________Applications                            Pin Configurations appear at end of data sheet.
        RAID                 Desktop Computers
        Servers              Networking                          µMAX is a registered trademark of Maxim Integrated Products, Inc.
        Workstations         Telecommunications
                                                                                    Typical Operating Circuit
                                                                                          VFAN
                                                                                     5V OR 12V
                               VCC                   VCC
                         3V TO 5.5V
                                                                               10kΩ
                                                           MAX6650
                                                     SCL            TACH0                     FAN
                         SMBus/I2C
                        INTERFACE
                                                     SDA                FB
                                        LED
                                               ALERT                                            CCOMP
                                                     GPIO0            OUT                       10μF
                                             FULL ON
                                                     GPIO1            ADD
                                                                      GND
 For pricing, delivery, and ordering information, please contact Maxim Direct at
 1-888-629-4642, or visit Maxim Integrated’s website at www.maximintegrated.com.                              19-1784; Rev 5; 12/12


MAX6650/MAX6651
Fan-Speed Regulators and Monitors
with SMBus/I2C-Compatible Interface
ABSOLUTE MAXIMUM RATINGS
VCC to GND ..............................................................-0.3V to +6V      Operating Temperature Range ...........................-40°C to +85°C
FB, TACH_ ..........................................................-0.3V to +13.2V        Junction Temperature .....................................................+150°C
All Other Pins..............................................-0.3V to (VCC + 0.3V)          Storage Temperature Range .............................-65°C to +150°C
Output Voltages..........................................-0.3V to (VCC + 0.3V)             Lead Temperature (soldering, 10s) .................................+300°C
Maximum Current                                                                            Soldering Temperature (reflow)
    Into VCC, GND, VOUT ...................................................100mA              Lead(Pb)-free..............................................................+260°C
    Into All Other Pins ..........................................................50mA        Containing lead(Pb) ....................................................+240°C
Continuous Power Dissipation (TA = +70°C)
    µMAX (derate 5.6mW/°C above +70°C) .....................444mW
    QSOP (derate 8.3mW/°C above +70°C) .....................667mW
Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional
operation of the device at these or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to
absolute maximum rating conditions for extended periods may affect device reliability.
ELECTRICAL CHARACTERISTICS
(VCC = 3.0V to 5.5V, TA = -40°C to +85°C, unless otherwise noted. Typical values are at TA = +25°C and VCC = 5V.)
            PARAMETER                            SYMBOL                                CONDITIONS                            MIN            TYP            MAX           UNITS
 POWER SUPPLY (VCC)
 Supply Voltage                                       VCC                                                                     3.0                            5.5            V
 Supply Current                                       ICC           Full-on mode, IOUT = 0                                                                    10          mA
 OUTPUT (OUT)
 Output Voltage Range                                VOUT           IOUT = ±100µA                                             0.3                      VCC - 0.3            V
 Output Sink Current                                 ISINK          VOUT = 0.5V                                               10                                          mA
 Output Source Current                            ISOURCE           VOUT = VCC - 1.8V                                         50                                          mA
 TACHOMETER INPUTS (TACH_)
                                                                    5V fan, 0 < VFB < 4.5V                                VFB + 0.5                    VFB +1.5
 Tachometer Threshold                              VTACH_                                                                                                                   V
                                                                    12V fan, 0 < VFB < 9V                                 VFB + 1.0                    VFB +3
 Tachometer Input Impedance                        RTACH_           0 < VTACH < 9V                                            70             100            150            kΩ
 FEEDBACK (FB)
 DAC Differential Nonlinearity                                      Guaranteed monotonicity on FB (Note 1)                                                    5           LSB
 Useful DAC Resolution                                              Measured at FB (Note 1)                                                                   8           bits
 Feedback Input Impedance                             RFB           0 < VFB < 9V                                              70             100            150            kΩ
 GENERAL-PURPOSE INPUTS/OUTPUTS (GPIO_) (Note 2)
 Input Low Voltage                               VIL(GPIO_)                                                                                                  0.8            V
                                                                    VCC ≤ 3.6V                                                 2
 Input High Voltage                              VIH(GPIO_)                                                                                                                 V
                                                                    VCC > 3.6V                                                 3
 Input Hysteresis                                    VHYS                                                                                    200                          mV
 Pullup Resistor                                   RGPIO_                                                                                    100                           kΩ
 Output Sink Current                                IGPIO_          VGPIO_ = 0.4V                                             10                                          mA
2                                                                                                                                                             Maxim Integrated


                                                                              MAX6650/MAX6651
                                  Fan-Speed Regulators and Monitors
                             with SMBus/I2C-Compatible Interface
ELECTRICAL CHARACTERISTICS (continued)
(VCC = 3.0V to 5.5V, TA = -40°C to +85°C, unless otherwise noted. Typical values are at TA = +25°C and VCC = 5V.)
           PARAMETER               SYMBOL                     CONDITIONS                         MIN      TYP     MAX  UNITS
  ADDRESS SELECT (ADD)
  ADD Input Low Voltage             VIL(ADD)  Selects slave address 90h (Table 1)                                  0.1    V
  ADD Input High Voltage            VIH(ADD)  Selects slave address 96h (Table 1)              VCC - 0.05                 V
  ADD Input Leakage                  ILADD    Selects slave address 36h (Table 1) (Note 3)        -1                0    µA
  ADD External Pulldown Resistor
                                     RADD     Selects slave address 3Eh (Table 1)                9.5              10.5  kΩ
  to GND
  ADD Pulldown Current                IADD    VADD = 0.5V (Note 4)                               -80              -40    µA
 SMBus/I2C INTERFACE (SDA, SCL)
  Data Output Sink Current            ISDA    VSDA = 0.6V                                          6                    mA
  Input Leakage Current                       0 < VIN < VCC                                                        ±1    µA
  Input Low Voltage                     VIL                                                                        0.8    V
                                              VCC ≤ 3.6V                                           2
  Input High Voltage                    VIH                                                                               V
                                              VCC > 3.6V                                           3
  Input Hysteresis                    VHYS                                                                200           mV
TIMING CHARACTERISTICS
(VCC = 3.0V to 5.5V, TA = -40°C to +85°C, unless otherwise noted. Typical values are at TA = +25°C and VCC = 5V.)
           PARAMETER               SYMBOL                     CONDITIONS                         MIN      TYP     MAX  UNITS
  TACHOMETERS
  Glitch Rejection                            Minimum pulse duration                                      500            µs
  GPIO2 (Note 2)
  Clock Frequency                     fCLK                                                                254           kHz
  Clock Frequency Uncertainty         fCLK    VCC = 5V                                           -10              +10    %
  SMBus/I2C    INTERFACE (Figures 3, 4)
  SCL Clock Frequency                  fSCL                                                       0               400   kHz
  Bus Free Time Between Stop
                                      tBUF                                                       1.3                     µs
  and Start Condition
  Hold-Time Start Condition         tHD:STA                                                      0.6                     µs
  Low Period of the SCL Clock         tLOW                                                       1.3                     µs
  High Period of the SCL Clock       tHIGH                                                       0.6                     µs
  Data Hold Time                    tHD:DAT   (Note 5)                                            0               900    µs
  Data Setup Time                   tSU:DAT                                                      100                     ns
  Rise-Time SDA/SCL Signal
                                        tR    (Note 6)                                         20 + 0.1CB(pF)     300    ns
  (Receiving)
  Fall-Time SDA/SCL Signal
                                         tF   (Note 6)                                         20 + 0.1CB(pF)     300    ns
  (Receiving)
  Fall-Time SDA Signal
                                         tF   ISINK < 6mA (Note 6)                             20 + 0.1CB(pF)     250    ns
  (Transmitting)
 Maxim Integrated                                                                                                            3


MAX6650/MAX6651
Fan-Speed Regulators and Monitors
with SMBus/I2C-Compatible Interface
TIMING CHARACTERISTICS (continued)
(VCC = 3.0V to 5.5V, TA = -40°C to +85°C, unless otherwise noted. Typical values are at TA = +25°C and VCC = 5V.)
                                     PARAMETER                        SYMBOL                                                             CONDITIONS                                                                 MIN              TYP              MAX         UNITS
 Setup Time for Stop Condition                                            tSU:STO                                                                                                                                   0.6                                                    µs
 Pulse Width of Spike Suppressed                                          tSPIKE                                                                                                                                         0               50                                ns
Note 1: For proper measurement of VFB, connect OUT and FB as shown in the Typical Operating Circuit.
Note 2: GPIO2, GPIO3, and GPIO4 only in the MAX6651.
Note 3: Guaranteed by design and not 100% production tested.
Note 4: For RADD component test purposes only.
Note 5: Note that the transition must internally provide at least a hold time to bridge the undefined region (300ns max) of SCL’s
        falling edge.
Note 6: CB is the total capacitance of one bus line in pF. Tested with CB = 400pF. Rise and fall times are measured between 0.3 x
        VCC and 0.7 x VCC.
                                                                                                                                                   Typical Operating Characteristics
(TA = +25°C, unless otherwise noted.)
                                     INTERNAL OSCILLATOR FREQUENCY                                                               INTERNAL OSCILLATOR FREQUENCY                                                                     FEEDBACK VOLTAGE
                                           vs. SUPPLY VOLTAGE                                                                           vs. TEMPERATURE                                                                             vs. TEMPERATURE
                        265                                                                                          300                                                                                     2.5
                                                                               MAX6650/51-01                                                                         MAX6650/51-02                           2.4                                                                  MAX6650/51-03
                        260                                                                                          280
                                                                                                                                                                                      FEEDBACK VOLTAGE (V)
                                                                                                                                                VCC = 5.5V                                                   2.3
 FREQUENCY (kHz)                                                                                FREQUENCY (kHz)
                        255                                                                                          260                                                                                                                         VCC = 5.5V,
                                                                                                                                                                                                             2.2                          VFAN = 5.5V, VFAN = 12.0V
                                                                                                                                                                                                             2.1
                        250                                                                                          240                     VCC = 3.0V
                                                                                                                                                                                                             2.0
                                                                                                                                                                                                                                     VFAN = 12.0V, VFAN = 5.5V
                        245                                                                                          220
                                                                                                                                                                                                             1.9                            VCC = 3.0V
                        240                                                                                          200                                                                                     1.8
                               3.0       3.5      4.0      4.5      5.0      5.5                                           -50           0                50       100                                             -50                    0                50                   100
                                               SUPPLY VOLTAGE (V)                                                                       TEMPERATURE (°C)                                                                                 TEMPERATURE (°C)
                                      FEEDBACK VOLTAGE vs. SUPPLY                                                                       SUPPLY CURRENT
                                         VOLTAGE (DAC SET TO 35)                                                                      vs. SUPPLY VOLTAGE                                                             SUPPLY CURRENT vs. TEMPERATURE
                        2.20                                                                                         3.8                                                                                     4.0
                                                                               MAX6650/51-04                                                                          MAX6650/51-05                                                                                               MAX6650/51-06
                                                                                                                                                                                                                             VCC = 5.5V
                        2.15                      VFAN = 5.5V                                                        3.6
                                                                                                                     3.4                                                                                     3.5
                        2.10
 FEEDBACK VOLTAGE (V)                                                                          SUPPLY CURRENT (mA)                                                                    SUPPLY CURRENT (mA)
                                                                                                                     3.2
                        2.05                                                                                                                                                                                 3.0
                                                                                                                     3.0
                        2.00                     VFAN = 12.0V
                                                                                                                     2.8
                        1.95                                                                                                                                                                                 2.5
                                                                                                                     2.6                                                                                                                             VCC = 3V
                        1.90                                                                                         2.4                                                                                     2.0
                        1.85                                                                                         2.2
                        1.80                                                                                         2.0                                                                                     1.5
                               3.0       3.5      4.0      4.5      5.0      5.5                                           3.0 3.2 3.4 3.6 3.8 4.0 4.2 4.4 4.6 4.8 5.0                                             -40       -20     0        20     40     60        80        100
                                               SUPPLY VOLTAGE (V)                                                                       SUPPLY VOLTAGE (V)                                                                               TEMPERATURE (°C)
4                                                                                                                                                                                                                                                         Maxim Integrated


                                                                             MAX6650/MAX6651
                                Fan-Speed Regulators and Monitors
                             with SMBus/I2C-Compatible Interface
                                                                                                        Pin Description
      PIN   PIN
                                 NAME                                                FUNCTION
   MAX6650       MAX6651
       1              1          TACH0           Tachometer Input. Used to close the loop around the tachometer.
                             TACH2, TACH3,
      —           2, 3, 16                       Tachometer Inputs. Used to monitor tachometers only.
                                 TACH1
       2              4           GND            Ground
       3              5            SDA           2-Wire Serial-Data Input/Output (open drain)
       4              6            SCL           2-Wire Serial Clock Input
       5              8           ADD            Slave Address Select Input (Table 1)
      —            7, 12      GPIO4, GPIO3       General-Purpose Input/Output (open drain)
                                                 General-Purpose Input/Output (open drain). Configurable to act either as an out-
       6              9          GPIO1
                                                 put or as an input (FULL ON or general purpose).
                                                 General-Purpose Input/Output (open drain). Configurable to act as a general
       7             10          GPIO0
                                                 input/output line or an active-low ALERT output.
                                                 General-Purpose Input/Output (open drain). Configurable to act as a general
      —              11          GPIO2
                                                 input/output line, an internal clock output, or an external clock input.
       8             13            OUT           Output. Drives the external MOSFET or bipolar transistor.
       9             14            VCC           +3.0V to +5.5V Power Supply
                                                 Feedback Input. Closes the loop around the external MOSFET or bipolar tran-
      10             15             FB
                                                 sistor.
                           Detailed Description                    The second control loop consists of the internal digital
                                                                   logic that controls the fan’s speed. The MAX6650/
The MAX6650/MAX6651 use an SMBus/I2C-Compatible
                                                                   MAX6651 control fan speed by forcing the tachometer
interface to regulate and monitor the speed of
                                                                   frequency to equal a reference frequency set by the
5VDC/12VDC brush-less fans with built-in open-collec-
                                                                   Fan-Speed Register, the prescaler, and the internal
tor/drain tachometers. Regulating fan speed propor-
                                                                   oscillator (see the Fan-Speed Register section). When
tionally with temperature saves power, increases fan
                                                                   the tachometer frequency is too high, the value of the
life, and reduces acoustic noise. Since fan speed is
                                                                   DAC’s input register is increased by the regulator.
proportional to the voltage across the fan, the
                                                                   Once the DAC voltage increases, the analog control
MAX6650/MAX6651 control the speed by regulating the
                                                                   loop forces the feedback voltage to rise, which reduces
voltage on the low side of the fan with an external MOS-
                                                                   the voltage across the fan. Since fan speed is propor-
FET or bipolar transistor.
                                                                   tional to the voltage across the fan, the fan slows down.
The MAX6650/MAX6651 each contain two internal con-
trol loops. The first loop controls the voltage across the                              2-Wire SMBus/I2C-Compatible
fan. The internal digital-to-analog converter (DAC) sets                                                     Digital Interface
the reference voltage for an internal amplifier (Figure 1),        From a software perspective, the MAX6650/MAX6651
which then drives the gate of an external N-channel                appear as a set of byte-wide registers that contain
MOSFET (or the base of a bipolar transistor) to regulate           speed control, tachometer count, alarm conditions, or
the voltage on the low side of the fan. As the reference           configuration bits. These devices use a standard
voltage provided by the DAC changes, the feedback                  SMBus/I2C-compatible 2-wire serial interface to access
amplifier automatically adjusts the feedback voltage,              the internal registers.
which changes the voltage across the fan.
Maxim Integrated                                                                                                                  5


MAX6650/MAX6651
Fan-Speed Regulators and Monitors
with SMBus/I2C-Compatible Interface
                                                                                                    VFAN = 5V OR 12V
               VCC
         3V TO 5.5V   VCC     SMBus/I2C
                              INTERFACE       MAX6650
                              FAN SPEED
                                              MAX6651                      90kΩ
                                                                                             TACH0
                                                                                                                      FAN
                      SCL    CONFIGURE
         SMBus/I2C                                              10kΩ
        INTERFACE     SDA  ALARM ENABLE
                           ALARM STATUS                                                          FB
                                               TACHOMETER
                                                  COUNT           VOFFSET
                            TACH COUNT
                                                                      90kΩ
                             COUNT TIME
                               GPIO DEF                                                        OUT
                                                 CONTROL              10kΩ
                            GPIO STATUS           LOGIC
                                 DAC
                                                                                              GPIO0    ALERT
                                                        8-BIT
                      ADD  ADDRESS                      DAC
                            DECODE                                                            GPIO1   FULL ON
                                                              VREF
           10kΩ                                                                      GPIO
                                                                                   BLOCKS
                      GND                                                         (FIGURE 5)
Figure 1. Block Diagram
The MAX6650/MAX6651 employ three standard SMBus                  Table 1. Slave Address Decoding (ADD)
protocols: write byte, read byte, and receive byte
(Figure 2). The shorter protocol (receive) allows quicker                                                       ADDRESS
transfers, provided that the correct data register was                          ADD
previously selected by a write or read byte instruction.                                                 HEX           BINARY
Use caution with the shorter protocol in multimaster
                                                                                GND                        90          1001 000
systems, since a second master could overwrite the
command byte without informing the first master.                                VCC                        96          1001 011
                                       Slave Addresses                 No connection (high-Z)              36          0011 011
The device address can be set to one of four different
values. Accomplish this by pin-strapping ADD so that                    10kΩ resistor to GND               3E          0011 111
more than one MAX6650/MAX6651 can reside on the
same bus without address conflicts (Table 1).
6                                                                                                                    Maxim Integrated


                                                                           MAX6650/MAX6651
                                  Fan-Speed Regulators and Monitors
                             with SMBus/I2C-Compatible Interface
     S        ADDRESS            WR       ACK           COMMAND           ACK           DATA             ACK P
                 7 bits           0                          8 bits                     8 bits
         Slave Address                           Command byte: Selects        Data byte: Data goes into
                                                 which register you are       the register set by the
                                                 writing to.                  command byte (to set
                                                                              thresholds, configuration
                                                                              masks, and sampling rate).
Figure 2a. SMBus Protocol: Write Byte Format
     S        ADDRESS            WR       ACK           COMMAND           ACK
                 7 bits           0                          8 bits
         Slave Address                           Command byte: Selects
                                                 which register you are
                                                 reading from.
     S        ADDRESS            RD       ACK               DATA           A      P
                 7 bits           1                          8 bits
         Slave Address.                         Data byte: Reads from
         Repeated due to                        the register set by the
         change in data-flow                    command byte.
         direction
Figure 2b. SMBus Protocol: Read Byte Format
     S        ADDRESS            RD       ACK               DATA           A      P
                 7 bits           1                          8 bits
         Slave Address                          Data byte: Reads data
                                                from the register com-
                                                manded by the last
                                                read-byte or write-byte
                                                transmission; also
                                                used for SMBus alert
                                                response return address.
Figure 2c. SMBus Protocol: Receive Byte Format
S = Start condition     Shaded = Slave transmission        WR = Write = 0
P = Stop condition      ACK = Acknowledged = 0             RD = Read =1
                        A = Not acknowledged = 1
Maxim Integrated                                                                                               7


MAX6650/MAX6651
Fan-Speed Regulators and Monitors
with SMBus/I2C-Compatible Interface
                          A              B               C              D          E   F             G          H           I  J          K            L     M
                                    tLOW   tHIGH
      SMBCLK
      SMBDATA
                  tSU:STA   tHD:STA                 tSU:DAT                                  tHD:DAT                                            tSU:STO tBUF
        A = START CONDITION                                 F = ACKNOWLEDGE BIT CLOCKED INTO MASTER                J = ACKNOWLEDGE CLOCKED INTO MASTER
        B = MSB OF ADDRESS CLOCKED INTO SLAVE               G = MSB OF DATA CLOCKED INTO SLAVE                     K = ACKNOWLEDGE CLOCK PULSE
        C = LSB OF ADDRESS CLOCKED INTO SLAVE               H = LSB OF DATA CLOCKED INTO SLAVE                     L = STOP CONDITION, DATA EXECUTED BY SLAVE
        D = R/W BIT CLOCKED INTO SLAVE                      I = SLAVE PULLS SMBDATA LINE LOW                       M = NEW START CONDITION
        E = SLAVE PULLS SMBDATA LINE LOW
Figure 3. SMBus Write Timing Diagram
                          A              B                 C                D         E  F             G                  H            I             J       K
                                    tLOW   tHIGH
     SMBCLK
     SMBDATA
                   tSU:STA tHD:STA                    tSU:DAT                                                                                tSU:STO    tBUF
              A = START CONDITION                                  E = SLAVE PULLS SMBDATA LINE LOW                    I = ACKNOWLEDGE CLOCK PULSE
              B = MSB OF ADDRESS CLOCKED INTO SLAVE                F = ACKNOWLEDGE BIT CLOCKED INTO MASTER             J = STOP CONDITION
              C = LSB OF ADDRESS CLOCKED INTO SLAVE                G = MSB OF DATA CLOCKED INTO MASTER                 K = NEW START CONDITION
              D = R/W BIT CLOCKED INTO SLAVE                       H = LSB OF DATA CLOCKED INTO MASTER
Figure 4. SMBus Read Timing Diagram
                                    Command-Byte Functions                                tachometer pulses, so the required Fan-Speed Register
The 8-bit Command-Byte Register (Table 2) is the mas-                                     value (KTACH) may be calculated as:
ter index that points to the various other registers within                                        tTACH = 1 / (2 x Fan Speed)
MAX6650/MAX6651. The register’s power-on reset
(POR) state is 0000 0000, so that a receive-byte trans-                                            KTACH = [tTACH x KSCALE x (fCLK / 128)] - 1
mission (a protocol that lacks the command byte)                                          where the fan speed is in rotations per second (RPS),
occurring immediately after POR returns the current                                       tTACH is the period of the tachometer signal, fCLK is the
speed setting.                                                                            internal oscillator frequency (254kHz ±10%), and
                                               Fan-Speed Register                         KSCALE is the prescaler value (see Configuration-Byte
In closed-loop mode, the MAX6650/MAX6651 use the                                          Register). Since the fan speed is inversely proportional
Fan-Speed Register to set the period of the tachometer                                    to the tachometer period, the Fan-Speed Register value
signal that controls the fan speed. The Fan-Speed                                         (KTACH) does not linearly control the fan speed (Table
Register is ignored in all other modes of operation. The                                  3). Select the prescaler value so the fan’s full speed is
MAX6650/MAX6651 regulate the fan speed by forcing                                         achieved with a register value of approximately 64
the tachometer period (tTACH) equal to the scaled reg-                                    (0100 0000) to optimize speed range and resolution.
ister value. One revolution of the fan generates two                                      The MAX6651 may be controlled by an external oscilla-
8                                                                                                                                                     Maxim Integrated


                                                                         MAX6650/MAX6651
                                 Fan-Speed Regulators and Monitors
                             with SMBus/I2C-Compatible Interface
Table 2. Command-Byte Assignments
                                                                      POR (DEFAULT)
      REGISTER              COMMAND             READ      WRITE                                       FUNCTION
                                                                            STATE
         SPEED               0000 0000            x         x                 00h           Fan speed
        CONFIG               0000 0010            x         x                 0Ah           Configuration
      GPIO DEF               0000 0100            x         x                 FFh           GPIO definition
          DAC                0000 0110            x         x                 00h           DAC
   ALARM ENABLE              0000 1000            x         x                 00h           Alarm enable
        ALARM                0000 1010            x         —                 00h           Alarm status
         TACH0               0000 1100            x         —                 00h           Tachometer 0 count
         TACH1               0000 1110            x         —                 00h           Tachometer 1 count
         TACH2               0001 0000            x         —                 00h           Tachometer 2 count
         TACH3               0001 0010            x         —                 00h           Tachometer 3 count
      GPIO STAT              0001 0100            x         —                 1Fh           GPIO status
        COUNT                0001 0110            x         x                 02h           Tachometer count time
 Table 3. Fan Speed
                                          tTACH                   FAN SPEED (RPS)                  FAN SPEED (RPM)
             KTACH                     KSCALE (ms)                     KSCALE                            KSCALE
                                   1        4         16        1          4          16         1           4      16
           0000 0000              1.0        *         *      500           *          *      30,000         *       *
           0000 0001              1.0        *         *      500           *          *      30,000         *       *
           0000 0010              1.5        *         *      330           *          *      20,000         *       *
                —                 —         —         —        —           —          —          —           —      —
           0001 1110               16       3.9        *       32         128          *       1900        7700      *
           0001 1111               16       4.0       1.0      31         124        500       1900        7400   30,000
           0010 0000               17       4.2       1.0      30         120        480       1800        7200   29,000
                —                 —         —         —        —           —          —          —           —      —
           0100 0000               33       8.2       2.1     15.3        61.1       240        910        3700   15,000
                —                 —         —         —        —           —          —          —           —      —
           1111 1000              125       31        7.8       4         15.9        64        240         960    3830
*The minimum allowed tachometer period is 1ms.
tor that overrides the internal oscillator (see General-       fan’s full speed is achieved with a register value of
Purpose Input/Output). When using an external oscillator       approximately 64 (0100 0000) to optimize speed range
(fOSC), calculate the Fan-Speed Register value with fCLK       and resolution (see the Fan Speed Register section). The
equal to f OSC . Codes above F8h (1111 1000) are               fourth bit selects the fan operating voltage.
allowed, but will not significantly decrease the frequency.    The fifth and sixth bits configure the operating mode.
                      Configuration-Byte Register              The MAX6650/MAX6651 have four modes of operation:
The Configuration-Byte Register (Table 4) adjusts the          full-on, full-off (shutdown), closed-loop, and open-loop.
prescaler, changes the tachometer threshold voltage,           In closed-loop operation, the external microcontroller
and sets the mode of operation. The three least-signifi-       (µC) sets the desired speed by writing an 8-bit word to
cant bits configure the prescaler division used to scale       the Fan-Speed Register (see the Fan-Speed Register
the tachometer period. Select the prescaler value so the       section). The MAX6650/MAX6651 monitor the fan’s
                                                               tachometer output and automatically adjust the voltage
 Maxim Integrated                                                                                                        9


 MAX6650/MAX6651
Fan-Speed Regulators and Monitors
with SMBus/I2C-Compatible Interface
 Table 4. Configuration Byte Register
                                            POR (DEFAULT)
          BIT                 NAME                                                         FUNCTION
                                                 STATE
     7 (MSB) to 6                —                    0         Always 0
                                                                Operating Mode:
                                                                00 = Software full-on (default)
        5 to 4                MODE                   00         01 = Software off (shutdown)
                                                                10 = Closed-loop operation
                                                                11 = Open-loop operation
                                                                Fan/Tachometer Voltage:
           3                   5/12V                  1         0 = 5V
                                                                1 = 12V (default)
                                                                Prescaler Division:
                                                                000 = Divide by 1
                                                                001 = Divide by 2
     2 to 0 (LSB)             SCALE                 010
                                                                010 = Divide by 4 (default)
                                                                011 = Divide by 8
                                                                100 = Divide by 16
                                                                                        General-Purpose Input/Output
                                    VCC            VCC             The GPIO pins connect to the drain of the internal N-
                                                   3.0V TO 5.5V
                                                                   channel MOSFET and pullup resistor (Figure 5). When
                    MAX6650                   CBYPASS
                    MAX6651
                                                                   the N-channel MOSFET is off (Table 5), the pullup resis-
                            100kΩ                                  tor provides a logic-level high output. However, with the
                                                                   MOSFET off, the GPIO may serve as an input pin and
                GPIO               GPIO_
                                                                   its state is read from the GPIO Status Register (Table
               STATUS                                              6). The MAX6650/MAX6651 power up with the MOSFET
              REGISTER
                                                                   off, so input signals may be safely connected to the
                                                                   GPIO pins. When using the GPIO pin as a general-pur-
                                                                   pose output, change the output by writing to the GPIO
                GPIO                                               Definition Register.
             DEFINITION
              REGISTER                                             GPIO0 may be configured as an ALERT output that will
                                    GND                            go low whenever a fault-condition is detected (see the
                                                                   Alarm-Enable and Status Registers section). GPIO1
                                                                   may be configured as a FULL ON input to allow hard-
                                                                   ware control to fully turn on the fan in case of software
 Figure 5. General-Purpose Input/Output Structure                  or µC failure. GPIO2 (MAX6651 only) may be config-
                                                                   ured as an internal clock output or as an external clock
across the fan until the desired speed is reached. Open-           input to allow synchronization of multiple devices.
loop operation allows the µC to regulate fan speed direct-                      Alarm-Enable and Status Registers
ly. The µC reads the fan speed from the Tach-                      The alarms are enabled only when the appropriate bits of
ometer-Count Register. Based on the tachometer                     the Alarm-Enable Register are set (Table 7). The maxi-
count, the µC decides if the fan speed requires adjust-            mum and minimum output level alarms function only
ment, and changes the voltage across the fan by writ-              when the device is configured to operate in the closed-
ing an 8-bit word to the DAC Register. Full-on mode                loop mode (see the Configuration-Byte Register section).
applies the maximum voltage across the fan, forcing it
to spin at full speed. Configuring GPIO1 (see the                  The Alarm Status Register allows the system to deter-
General-Purpose Input/Output section) as an active-low             mine which alarm caused the alert output (Table 8).
input provides additional hardware control that fully              The set-alarm and alert outputs clear after reading the
turns on the fan and overrides all software commands.
 10                                                                                                            Maxim Integrated


                                                                    MAX6650/MAX6651
                               Fan-Speed Regulators and Monitors
                           with SMBus/I2C-Compatible Interface
Table 5. GPIO Definition Register
                POR
                          MAX6650       MAX6651
  BIT       (DEFAULT)                                STATE                           FUNCTION
                             PIN          PIN
              STATE
                             N/A                        0    GPIO4 outputs a logic-low level.
    7             1                      GPIO4
                         (must be 1)                   1     GPIO4 outputs a logic-high level or serves as an input.
                             N/A                        0    GPIO3 outputs a logic-low level.
    6             1                      GPIO3
                         (must be 1)                   1     GPIO3 outputs a logic-high level or serves as an input.
                                                       00    GPIO2 serves as an external clock input.
                             N/A                       01    GPIO2 serves as an internal clock output.
   5:4           11                      GPIO2
                        (must be 11)                   10    GPIO2 outputs a logic-low level.
                                                       11    GPIO2 outputs a logic-high level or serves as an input.
                                                       00    GPIO1 outputs a logic-high level or serves as an input.
                                                       01    GPIO1 serves as a FULL ON input.
   3:2           11         GPIO1        GPIO1
                                                       10    GPIO1 outputs a logic-low level.
                                                       11    GPIO1 outputs a logic-high level or serves as an input.
                                                       00    GPIO0 outputs a logic-high level or serves as an input.
                                                       01    GPIO0 serves as an ALERT output.
   1:0           11         GPIO0        GPIO0
                                                       10    GPIO0 outputs a logic-low level.
                                                       11    GPIO0 outputs a logic-high level or serves as an input.
Table 6. GPIO Status Register                              The MAX6651 contains three additional tachometer
                                                           inputs, which may be used to monitor additional fans. For
                                               POR         accurate control of multiple fans, use identical fans.
        BIT                NAME             (DEFAULT
                                              STATE)       The Tachometer Count-Time Register sets the integration
                                                           time over which the MAX6650/MAX6651 count tachome-
  7 (MSB) to 5            Always 0              0
                                                           ter pulses. The devices can count up to 255 (FFh) pulses
         4          GPIO4 (MAX6651 only)        1          during the selected count time. If more than 255 pulses
         3          GPIO3 (MAX6651 only)        1          occur, the IC sets the overflow alarm and the Tachometer
         2          GPIO2 (MAX6651 only)        1          Count Register reports the maximum value of 255. Set
                                                           the time register so the count register will not overflow
         1                 GPIO1                1
                                                           under worst-case conditions (maximum fan speed) while
      0 (LSB)              GPIO0                1          maximizing resolution. Calculate the maximum measur-
                                                           able fan speed and minimum resolution with the following
                                                           equations:
Alarm Status Register if the condition that caused the
alarm is removed.                                                Max Fan Speed (in RPS) = 255 / (2 x tCOUNT)
                                                                   Min Resolution (in RPS) = 1 / (2 x tCOUNT)
                                         Tachometer
The Tachometer Count Registers record the number of        where tCOUNT is the tachometer count time; 1kHz is the
pulses on the corresponding tachometer input during the    maximum allowable tachometer input frequency for the
period defined by the Tachometer Count-Time Register.      MAX6650/MAX6651.
Maxim Integrated                                                                                                     11


MAX6650/MAX6651
Fan-Speed Regulators and Monitors
with SMBus/I2C-Compatible Interface
Table 7. Alarm-Enable Register Bit Masks
                                                POR
        BIT                NAME              (DEFAULT)                          FUNCTION
                                               STATE
   7 (MSB) to 5              —                    0     Always 0
         4          GPIO2 (MAX6651 only)          0     GPIO2 Alarm Enable/Disable (MAX6651 only)
         3                 GPIO1                  0     GPIO1 Alarm Enable/Disable
         2                 TACH                   0     Tachometer Overflow Alarm Enable/Disable
         1                  MIN                   0     Minimum Output Level Alarm Enable/Disable
      0 (LSB)               MAX                   0     Maximum Output Level Alarm Enable/Disable
1 = Enabled
Table 8. Alarm Status Register Bit Assignments
                                                POR
        BIT                NAME              (DEFAULT)                           FUNCTION
                                               STATE
   7 (MSB) to 5              —                    0     Always 0
          4         GPIO2 (MAX6651 only)          0     GPIO2 Alarm. Set when GPIO2 is low (MAX6651 only).
          3                GPIO1                  0     GPIO1 Alarm. Set when GPIO1 is low.
          2                TACH                   0     Tachometer Overflow Alarm
          1                 MIN                   0     Minimum Output Level Alarm
      0 (LSB)               MAX                   0     Maximum Output Level Alarm
1 = Alarm condition
Table 9. Tachometer Count-Time Register                    Upon power-up, the Tachometer Count Registers reset
(Assumes two pulses per revolution)                        to 00h and the Tachometer Count-Time Register sets a
                                                           1s integration time.
  REGISTER       COUNT        MAXIMUM         MINIMUM
    VALUE         TIME       FAN SPEED     RESOLUTION                            Digital-to-Analog Converter
  (KCOUNT)          (s)          (RPS)      (Hz/COUNT)     When using the open-loop mode of operation, the DAC
                                                           Register sets the voltage on the low side of the fan. An
  0000 0000        0.25           512             2        internal operational amplifier compares the feedback
  0000 0001         0.5           256             1        voltage (VFB) with the reference voltage set by the 8-bit
  0000 0010         1.0           128            0.5       DAC, and adjusts the output voltage (VOUT) until the
  0000 0011         2.0            64           0.25       two input voltages are equal. The voltage at the FB pin
                                                           may be determined by the following equation:
The first 6 bits of the Tachometer Count-Time Register               VFB = (10 x VREF x KDAC) / 256
are always zero, and the last 2 bits set the count time    and the voltage across the fan is:
(Table 9). The count time may be determined from the
following equation:                                                          ⎛ 90k ⎞ ⎛ KDAC         ⎞
                                                                     VFAN – ⎜       + 1⎟ ⎜      V   ⎟
                tCOUNT = 0.25s x    2KCOUNT                                  ⎝ 10k ⎠ ⎝ 256 REF ⎠
where KCOUNT is the numerical value of the two 2LSBs.      where KDAC is the numerical value of the DAC Register
The 0.25 factor has a ±10% uncertainty.                    and VREF = 1.5V. The minimum feedback voltage is
                                                           limited by the voltage drop across the external MOS-
                                                           FET (RON x IFAN), and the maximum voltage is limited
                                                           by the fan’s supply voltage (VFAN). For linear opera-
12                                                                                                     Maxim Integrated


                                                                             MAX6650/MAX6651
                                      Fan-Speed Regulators and Monitors
                                with SMBus/I2C-Compatible Interface
                                                                                          VFAN
                                                                                     5V OR 12V
                                 VCC                    VCC
                           3V TO 5.5V
                                                                                10kΩ
                                                              MAX6650
                                                        SCL            TACH0                  FAN
                           SMBus/I2C
                          INTERFACE
                                                        SDA               FB
                                                  ALERT                                         CCOMP
                                                        GPIO0            OUT                    10μF
                                                FULL ON
                                                        GPIO1            ADD
                                                                         GND
Figure 6. Fan Control with a Bipolar Transistor
tion, use DAC values between 08h and B0h (see                       breakdown voltage, current rating, and drain-to-source
Typical Operating Characteristics). When using the                  on-resistance (RDS(ON)). Gate-to-source conduction
closed-loop mode of operation, the contents of the                  threshold must be compatible with available VCC. The
DAC Register are ignored. When writing to the DAC,                  maximum gate-to-source voltage and the drain-to-
wait at least 500µs before attempting to read back.                 source breakdown voltage rating should both be at
                                                                    least a few volts higher than the fan supply voltage
                                  Power-on Reset (POR)              (VFAN). Choose a MOSFET with a maximum continuous
The MAX6650/MAX6651 have volatile memory. To pre-                   drain current rating higher than the maximum fan cur-
vent ambiguous power-supply conditions from corrupt-                rent. RDS(ON) should be as low as practical to maxi-
ing the data in the memory and causing erratic                      mize the feedback voltage range. Maximum power
behavior, a POR voltage detector monitors VCC and                   dissipation in the power transistor can be approximat-
clears the memory if VCC falls below 1.6V. When power               ed by P = (VFAN X IFAN(MAX)) / 4. Bipolar power transis-
is first applied and VCC rises above 1.6V, the logic                tors are practical for driving small and midsize fans
blocks begin operating (though reads and writes at                  (Figure 6). Very-high-current fans may require output
VCC levels below 3V are not recommended).                           transistor base current greater than the MAX6650’s
Power-up defaults include the following:                            50mA drive capability. Bipolar Darlington transistors
                                                                    will work but have poor saturation characteristics and
• All alarms are disabled.                                          could lose up to 2V to 3V of drive voltage.
• Prescale divider is set to 4.
                                                                                                      Resistor Selection
• Fan speed is set in full-on mode.                                 The tachometer input voltages (VTACH_) and feedback
See Table 2 for the default states of all registers.                voltage (V FB ) cannot exceed 13.2V (see Absolute
                                                                    Maximum Ratings). When using a fan powered by a
                 Applications Information                           13.2V or greater supply (VFAN), protect these inputs
                 MOSFET and Bipolar Transistor                      from overvoltage conditions with series resistors. The
                                                                    resistance required to protect these pins may be calcu-
                                                 Selection
                                                                    lated from the following equation:
The MAX6650/MAX6651 drive an external N-channel
MOSFET that requires five important parameters for                         RPROTECT = [(VFAN(MAX) - 13.2V) x RIN] / 13.2V
proper selection: gate-to-source conduction threshold,
maximum gate-to-source voltage, drain-to-source                     where VFAN(MAX) is the worst-case maximum supply
                                                                    voltage used to power the fan and RIN is the input
Maxim Integrated                                                                                                          13


 MAX6650/MAX6651
Fan-Speed Regulators and Monitors
with SMBus/I2C-Compatible Interface
impedance of the tachometer input (150kΩ max) or the                                                             Fan Selection
feedback input (150kΩ max).
                                                                            For closed-loop operation and fan monitoring, the
                               Compensation Capacitor                       MAX6650/MAX6651 require fans with tachometer outputs.
A compensation capacitor is needed from the fan’s low                       A tachometer output is typically specified as an option on
side to ground to stabilize the analog control loop.                        many fan models from a variety of manufacturers. Verify
Typically, this capacitor should be 10µF, but depend-                       the nature of the tachometer output (open collector, totem-
ing on the type of fan being used, a value between 1µF                      pole) and the resultant levels, and configure the connec-
and 100µF may be required. The proper value has                             tion to the MAX6650/MAX6651 accordingly. Note how
been selected when no ringing is present on the volt-                       many pulses per revolution are generated by the
age at the fan’s low side.                                                  tachometer output (this varies from model to model and
                                                                            among manufacturers, though two pulses per revolution is
                                                                            the most common).
                                                                            Table 10 lists the representative fan manufacturers and
                                                                            the models they make available with tachometer outputs.
 Table 10. Fan Manufacturers
   MANUFACTURER                      FAN MODEL OPTION                                                       Low-Speed Operation
                                                                            Brushless DC fans increase reliability by replacing
                             All DC brushless models can be
                                                                            mechanical commutation with electronic commutation. By
   Comair Rotron             ordered with optional tachometer
                                                                            lowering the voltage across the fan to reduce its speed,
                             output.
                                                                            the MAX6650/MAX6651 are also lowering the supply volt-
                             Tachometer output optional on some             age for the electronic commutation and tachometer elec-
   EBM-Papst
                             models.                                        tronics. If the voltage supplied to the fan is lowered too
                             All DC brushless models can be                 far, the internal electronics may no longer function prop-
   NMB                       ordered with optional tachometer               erly. Some of the following symptoms are possible:
                             output.                                        • The fan may stop spinning.
                             Panaflo and flat unidirectional
                                                                            • The tachometer output may stop generating a signal.
   Panasonic                 miniature fans can be ordered with             • The tachometer output may generate more than two
                             tachometer output.                                pulses per revolution.
                             Tachometer output optional on some
                                                                            The problems that occur, and the supply voltages at
   Sunon                                                                    which they occur, depend on which fan is used. As a
                             models.
                                                                                                             VFAN 5V OR 12V
                                                                                   10kΩ
                          VCC                           VCC                                   FAN
                                                                      TACH0
                    3V TO 5.5V                                                                 0
                                                                                      10kΩ
                                                              MAX6651                               FAN
                                                                      TACH1
                                                                                                     1
                                                        SCL
                    SMBus/I2C                                                            10kΩ
                   INTERFACE
                                                        SDA           TACH2                              FAN
                                                                                                          2
                                                                         FB
                                                 ALERT
                                                        GPIO0           OUT                       CCOMP
                                               FULL ON
                                                        GPIO1           ADD
                                                                        GND
 Figure 7. Using the MAX6651 to Control Parallel Fans
 14                                                                                                                         Maxim Integrated


                                                                                 MAX6650/MAX6651
                                   Fan-Speed Regulators and Monitors
                              with SMBus/I2C-Compatible Interface
                                    VCC
                                 3V OR 5.5V
                                            TACH0          FAN TACH 1
                                            TACH1          FAN TACH 2        TO FAN VOLTAGE
                                                                                5V OR 12V
                                            TACH2          FAN TACH 3
                                MAX6651
                                            TACH3                         COM               NO0     FAN TACH 4
                                                                                            NO1     FAN TACH 5
                                                                                MAX4051             FAN TACH 6
                                                                                            NO2
                                            GPIO2                         ADDA              NO3     FAN TACH 7
                                            GPIO3                          ADDB             NO4     FAN TACH 8
                                            GPIO4                          ADDC             NO5     FAN TACH 9
                                                                          INH               NO6     FAN TACH 10
                                                                                            NO7     FAN TACH 11
                                                                            GND             V-
Figure 8. Monitoring Multiple Fans
very rough rule of thumb, 12V fans can be expected to                                                           Closed-Loop Mode
experience problems somewhere around 1/4 to 1/2                       The MAX6650 allows the system to read the DAC value
their rated speed.                                                    used to regulate the fan speed. For a given speed, a
                                                                      significant change in the required DAC value may indi-
                    Predicting Future Fan Failure                     cate future fan problems.
In systems that require maximum reliability, such as
servers and network equipment, it can be advantageous                                          Monitoring More than 4 Fans
to predict fan failure before it actually happens, to alert           Use the MAX6651 to monitor up to four fans at a time
the system operator before the fan fails, minimizing down             (Figure 7). For systems requiring more than four fans,
time. The MAX6650 allows the user to monitor the fan’s                Figure 8 shows an application using an analog multi-
condition through the following modes.                                plexer (mux) to monitor 11 fans. GPIO2, GPIO3, and
                                                                      GPIO4 are connected to the mux’s address pins. By
                                                  Full-On Mode        writing the appropriate value to the GPIO pins, the
By occasionally (over a period of days or weeks) turning              desired tachometer gets selected and counted by the
the fan on full and measuring the resultant speed, a                  TACH3 input. Because the TACH inputs are double-
failing fan can be detected by a trend of decreasing                  buffered, and only sampled every other time slot, it is
speeds at a given power-supply voltage. Power-up is a                 important to wait at least 4 times the tachometer count
convenient time to measure the maximum fan speed.                     time before reading the register after changing the mux
                                             Open-Loop Mode           address. In the extreme case, a total of 25 fans can be
The fan’s condition can also be monitored using open-                 monitored using three multiplexers connected to
loop mode. By characterizing the fan while it is new,                 TACH1, TACH2, and TACH3. Do not connect TACH0 to
fan failure can be determined by writing a predeter-                  a mux if the MAX6651 is under closed-loop mode.
mined value to the DAC and measuring the resultant                                                     N + 1 Fan Application
fan speed. A decrease over time of the resultant speed                As shown in Figure 9, if any MAX6650 cannot maintain
may be an indication of future fan failure.                           speed regulation, all other fans will automatically be
                                                                      turned on full. This can be useful in high-reliability sys-
                                                                      tems where any single fan failure should not cause
Maxim Integrated                                                                                                               15


MAX6650/MAX6651
Fan-Speed Regulators and Monitors
with SMBus/I2C-Compatible Interface
                             TO INT PIN             ALERT
                              ON NC                         GPIO0
                                                                MAX6650                   FAN
                                                                                           1
                                                   FULL ON  GPIO1
                                                     ALERT
                                                            GPIO0
                                                                MAX6650                   FAN
                                                                                           2
                                                   FULL ON  GPIO1
                                                     ALERT
                                                            GPIO0
                                                                MAX6650                   FAN
                                                                                           3
                                                    FULL ON GPIO1
                                                    ALERT
                                                            GPIO0
                                                                MAX6650                   FAN
                                                                                           4
                                                   FULL ON  GPIO1
Figure 9. N + 1 Application
downtime. The system should be designed so that the                   ured as FULL ON input. The MAX6501 TOVER pin goes
number of fans used is one more than are actually                     low whenever its temperature goes above a preset value.
needed. This way, there is sufficient cooling even if a               This pulls the FULL ON pin (GPIO1) low, forcing the fan to
fan fails. With all fans operating correctly, it is unneces-          spin at its maximum speed. Figure 12 shows the use of
sary to run the fans at their maximum speed. Reducing                 multiple MAX6501s. The MAX6501 has an open-drain
fan speed can reduce noise and increase the life of the               output, allowing multiple devices to be wire ORed to the
fans. However, once a fan fails, it is important that the             FULL ON input. This configuration allows fail-safe moni-
remaining fans spin at their maximum speed.                           toring of multiple locations around the system.
In Figure 9, all the GPIO0s are configured as ALERT                                                  Hot-Swap Application
outputs, and all the GPIO1s are configured as                         Hot swapping of a fan can be detected using the circuit
FULL ON inputs. If any MAX6650 generates an ALERT                     in Figure 13 where GPIO2 is configured to generate an
(indicating failure), the remaining MAX6650s will auto-               alert whenever it is pulled low. As long as the fan card
matically turn their fans on full.                                    is connected, GPIO2 is high. However, when the fan
   Temperature Monitoring and Fan Control                             card is removed, a 2.2kΩ resistor pulls GPIO2 low,
The circuit shown in Figure 10 provides complete tem-                 causing an interrupt. This signals to the system that a
perature monitoring and fan control. The MAX1617A (a                  hot swap is occurring.
remote/local temperature serial interface with SMBus)                              Step-by-Step Part Selection
monitors temperature with a diode-connected transis-
tor. Based on the temperature readings provided by                                               and Software Setup
the MAX1617A, the µC can adjust the fan speed pro-
portionally with temperature. Connecting the ALERT
                                                                             Determining the Fan System Topology
                                                                      The MAX6650/MAX6651 support three fan system
output of the MAX1617A to the FULL ON input of the
                                                                      topologies. These are single fan control, parallel fan
MAX6650/MAX6651 (see the General-Purpose Input/
                                                                      control, and synchronized fan control.
Output section) allows the fan to turn on fully if the
MAX1617A detects an overtemperature condition.                                                              Single Fan Control
                                                                      The simplest configuration is a single MAX6650 for
                            MAX6501 Hardware Fail-Safe
                                                                      each fan. If two or more fans are required per system,
Figure 11 shows an application using a MAX6501 as a
                                                                      then additional MAX6650 controllers are used (one per
hardware fail-safe. The MAX6650 has its GPIO1 config-
                                                                      fan). The advantage of this configuration is the ability to
16                                                                                                                 Maxim Integrated


                                                        MAX6650/MAX6651
                                Fan-Speed Regulators and Monitors
                           with SMBus/I2C-Compatible Interface
                                                  GND
                                                  ADD1
                                                  ADD0 MAX1617A
                                                                                     TEMPERATURE
                                                                                        SENSOR
                                                  STBY            DXP
                                                  VCC             DXN
                                                  SCL
                                                                                   INTERRUPT TO μC
                                                  SDA           ALERT
                     VCC                                                   ALERT
                                                                 GPIO0
                                                                          FULL ON
                                                                GPIO1
                         VCC
                                                                       VFAN = 5V OR 12V
                                                       MAX6650
                                                       MAX6651
                  μC
                         SCL                      SCL           TACH0                       FAN
                         SDA                      SDA               FB
                         GND                      VCC             OUT
                                                  ADD
                                                  GND
Figure 10. Temperature Monitoring and Fan Control
Maxim Integrated                                                                                   17


MAX6650/MAX6651
Fan-Speed Regulators and Monitors
with SMBus/I2C-Compatible Interface
                                                                                                    VFAN
                                                                                               5V OR 12V
                                   VCC                       VCC
                             3V TO 5.5V
                                                                    MAX6650              10kΩ
                                                             SCL             TACH0                      FAN
                             SMBus/I2C
                            INTERFACE
                                                             SDA                FB
                                                      ALERT
                                                             GPIO0
                                                                                                           CCOMP
                                                                               OUT                         10μF
                         MAX6501
                                                    FULL ON
                              TOVER                          GPIO1             ADD
                                                                               GND
Figure 11. MAX6501 Hardware Fail-Safe
                                                                                                        VFAN
                                                                                                   5V OR 12V
                                               VCC                  VCC
                                         3V TO 5.5V
                                                                          MAX6650            10kΩ
                                                                    SCL            TACH0                    FAN
                                         SMBus/I2C
                                        INTERFACE
                                                                    SDA               FB
                                                              ALERT
                                                                    GPIO0
                         MAX6501
                                                                                                              CCOMP
                              TOVER                                                  OUT                      10μF
                                                            FULL ON
                         MAX6501                                    GPIO1            ADD
                              TOVER
                                                                                     GND
                         MAX6501
                              TOVER
Figure 12. MAX6501 Hardware Fail-Safe
independently control each fan. The disadvantage is                   savings. If all the fans connected in parallel are the
cost, size, and complexity.                                           same type, they will tend to run at similar speeds.
For single fan control, use the MAX6650 (unless addi-                 However, if one or more of the fans are wearing out,
tional GPIOs are needed).                                             speed mismatches can occur. The MAX6651 allows the
                                                                      system to monitor up to four fans, ensuring any signifi-
                                        Parallel Fan Control          cant speed mismatches can be detected.
If multiple fans are required but independent control is              For parallel fan control while monitoring up to four fan
not, then a single MAX6650/MAX6651 connected to                       speeds, select the MAX6651.
two or more fans in parallel may make sense (Figure 7).
The obvious advantage is simplicity, size, and cost
18                                                                                                                  Maxim Integrated


                                                                             MAX6650/MAX6651
                                 Fan-Speed Regulators and Monitors
                                with SMBus/I2C-Compatible Interface
                                                                                     VFAN        HOT-SWAP SECTION
                                                                               5V OR 12V
                           VCC                VCC
                     3V TO 5.5V
                                                                        10kΩ
                                                    MAX6651
                                              SCL           TACH0                                 FAN
                     SMBus/I2C
                    INTERFACE
                                              SDA              FB
                                       ALERT
                                              GPIO0
                                                                                          CCOMP
                                                              OUT                         10μF
                                     FULL ON
                                              GPIO1           ADD
                                                              GND
                                                                              VID
                                                            GPIO2
                                                                                 2.2kΩ
Figure 13. Hot-Swap Application
For parallel fan control while monitoring only a single           For synchronized fan control, select the MAX6651.
fan, select the MAX6650.
                                                                                                                  Combination
            Synchronized Fan Control (MAX6651 Only)               In more complex systems, a combination of some or all
In systems with multiple fans, an audible beat frequency          of the above control types may be needed.
can sometimes be detected due to fan speed mismatch.
This happens in systems where fans are connected in                                                           Choosing a Fan
parallel or in systems with a MAX6650 controlling each            Once the topology is chosen, the next step is to choose
fan. In parallel fan systems, speed mismatches occur              a fan. See the appropriate section.
because no two fans are identical. Slight mechanical              Enter a zero in bit 3 of the configuration register for a
variations or loading differences can result in enough of         5V fan and 1 for a 12V fan.
a speed mismatch to cause an audible beat.                        Configuring this bit also adjusts the tachometer input
Even in systems where there is a MAX6650/MAX6651                  threshold voltage. This optimizes operation of the
for each fan, there can still be speed mismatches. This           MAX6650/MAX6651 for the operating voltage of the fan
is primarily due to the oscillator tolerance. The                 being used.
MAX6650/MAX6651 oscillator tolerance is specified to
be ±10%. In the worst case, this could result in a 20%                                    Setting the Mode of Operation
(one 10% high, one 10% low) speed mismatch.                       The MAX6650/MAX6651 have four modes of operation
                                                                  as determined by bits 5 and 6 of the configuration reg-
The solution is to use a single MAX6651 for each fan,             ister: full on, full off, open loop, and closed loop.
and configure the parts to use a shared clock. The
shared clock can either be an external system clock or                                                                Full-On
one of the MAX6651’s internal clocks. If an external              The full-on mode applies the maximum available volt-
clock is used, its frequency can range from approxi-              age across the fan, guaranteeing maximum cooling.
mately 50kHz to 500kHz.                                           Full-on mode can be entered through software or hard-
Maxim Integrated                                                                                                            19


MAX6650/MAX6651
Fan-Speed Regulators and Monitors
with SMBus/I2C-Compatible Interface
ware control. To enter full-on mode through hardware,       Below is a possible strategy for controlling the fan
see the Setting Up the GPIOs section. Note that a hard-     under open-loop mode:
ware full-on overrides all other modes.                     1) On power-up, put the device in open-loop mode with
Configure the MAX6650/MAX6651 to run in software                a DAC value of 00 (full speed).
full-on mode by entering 00 into bits 5 and 4 of the con-   2) Allow the fan speed to settle.
figuration register.
                                                            3) Read the TACH register to determine the speed.
                                                   Full-Off 4) Gradually increase the DAC register value (in steps
The full-off mode removes all the voltage across the            of 1 or 2) until the desired speed is obtained.
fan, causing the fan to stop. Because the MAX6650/
MAX6651 work by controlling the voltage on the low          In open-loop mode, any one of the four tachometer regis-
side of the fan, either 5V or 12V will be on both leads.    ters (MAX6651) can be used to measure and regulate the
                                                            fan’s speed. This is especially useful in parallel fan sys-
Enter full-off mode by entering 01 into bits 5 and 4 of     tems where up to four fans will be controlled as one unit.
the configuration register.
                                                            Care must be taken with this mode to prevent instabili-
                                               Open Loop    ty, which can be caused by trying to update the fan
In open-loop mode, the MAX6650/MAX6651 do not               speed too often or in increments that are too large.
actually regulate the fan speed. Speed regulation           Instability can result in the fan speeding up and slowing
requires an external µC. Although open-loop mode            down repeatedly. Determining the proper update rate,
allows maximum flexibility, it also requires the most       as shown in the following steps, depends largely on the
software/processor overhead.                                fan’s mechanical time constant and the system’s loop
In open-loop mode, the MAX6650/MAX6651 act as an            gain (DAC step sizes):
SMB/I2C-controlled voltage regulator. The µC adjusts        1) Enter open-loop mode by setting bits 5 and 4 of the
the voltage across the fan by writing an 8-bit value to         control register to 11.
the DAC register. This gives the µC direct control of the   2) Determine the speed of the fan(s) by reading the
voltage across the fan. Speed regulation is accom-              TACH register(s).
plished by periodically reading the tachometer regis-
ter(s) and adjusting the DAC register appropriately. The    3) Increase or decrease the DAC register to decrease
DAC value controls the voltage across the fan accord-           or increase the voltage across the fan, thereby
ing to the following equation:                                  adjusting its speed.
VFAN = VFAN_SUPPLY - [((R2) / R1) + 1] x VREF x KDAC /                                                    Closed Loop
         256                                                In closed-loop mode, the SMBus/I2C master (usually a
                                                            µC) writes a desired fan speed to the MAX6650/
where VFAN = the voltage across the fan, VFAN_SUPPLY        MAX6651, and the device automatically adjusts the
= the supply voltage for the fan (5V or 12V), R2 = 90kΩ     voltage across the fan to maintain this speed. This
(typ), R1 = 10kΩ (typ), VREF = 1.5V (typ), and KDAC =       operation mode requires less software/processor over-
the value in the DAC register.                              head than the open-loop mode. Once the desired
Note several important things in this equation. First, the  speed has been written, the MAX6650/MAX6651 con-
voltage across the fan moves in the opposite direction      trol the fan’s speed independently, with no intervention
of the DAC value. In other words, low DAC values cor-       required from the master. If desired, the MAX6650/
respond to higher voltages across the fan and therefore     MAX6651 can be configured to generate an interrupt if
higher speeds. Second, DAC values greater than 180          it is unable to regulate the fan’s speed at the desired
will result in 0V across a 12V fan. Similarly, DAC values   value (see Setting Up Alarms). The MAX6650/MAX6651
greater than 76 will produce 0V across a 5V fan. This       can regulate only the speed of the fan connected to the
limits the useful range of the DAC from 0 to 180 for 12V    TACH0 input. Fans connected in parallel to the TACH0
fans and 0 to 76 for 5V fans.                               fan will tend to run at similar speeds (assuming similar
                                                            fans). When going from full-off to closed-loop-mode, it
Remember that device tolerances can cause the output        is recommended following this sequence:
voltage value to vary significantly from unit to unit and
over temperature. However, because this voltage is          1) Full-off mode
within a closed speed-control loop, such errors are cor-    2) Full-on mode (with sufficient pause to initiate
rected by the loop.                                              movement)
                                                            3) Closed-loop mode
 20                                                                                                       Maxim Integrated


                                                                     MAX6650/MAX6651
                                 Fan-Speed Regulators and Monitors
                             with SMBus/I2C-Compatible Interface
The MAX6650 regulates fan speed in the following            speed register equals approximately 64 (decimal).
manner. The output of an internal 254kHz oscillator is      Although 64 is a good target value, values between 20
divided by 128, generating a roughly 2kHz signal. This      and 100 will work fine.
signal is divided by 1 plus the value in the speed regis-   The prescaler value also affects the response time and
ter and is used as a reference frequency. For example,      the stability of the speed-control loop. Adjusting the
02h in the speed register will result in a 667Hz [2kHz /    prescaler value effectively adjusts the loop gain. A larg-
(02h+1)] reference frequency, which is then compared        er prescaler value will slow the response time and
against the frequency at the tachometer input divided       increase stability, while a smaller prescaler value will
by the prescaler value. The MAX6650/MAX6651                 yield quicker response time. The optimum prescaler
attempt to keep the tachometer frequency divided by         value for response time and stability depends on the
the prescaler equal to the reference frequency by           fan’s mechanical time constant. Small, fast-spinning
adjusting the voltage across the fan. If the tachometer     fans will tend to have small mechanical time constants
frequency divided by the prescaler value is less than       and can benefit from smaller prescaler values. A good
the reference frequency, the voltage across the fan is      rule of thumb is to try the selected prescaler value in
increased. Remember that the tachometer will give two       the target system. Set K TACH to around 75% of full
pulses per revolution of the fan. The following equations   scale, and watch for overshoot or oscillation in the fan
describe the operation.                                     speed. Also look for overshoot or oscillation when
When in regulation:                                         KTACH is changed from one value to another (e.g., from
  [fCLK / (128 x (KTACH + 1))] = 2 x FanSpeed / KSCALE      75% of full-scale speed to 90% of full scale). If there is
                                                            unacceptable overshoot or if the fan speeds up and
where fCLK = oscillator frequency (either the 254kHz        slows down with K TACH , set it to a constant value;
internal oscillator or the externally applied clock), KTACH increase the prescaler value.
= the value in the speed register, FanSpeed = the
speed of the fan in revolutions per second (Hz),            Enter the appropriate prescaler value in bits zero to 2 of
KSCALE = the prescaler value (1, 2, 4, 8, or 16).           the configuration register.
Solving for all four variables:                             Fan speed is a trade-off between cooling requirements,
                                                            noise, power, and fan wear. In general, it is desirable
     KTACH = [(fCLK x KSCALE) / (256 x FanSpeed)] - 1       (within limits) to run the fan at the slowest speed that
     KSCALE = [256 x FanSpeed x (KTACH + 1)] / fCLK         will accomplish the cooling goals. This will reduce
     FanSpeed = KSCALE x fCLK / [256 x (KTACH + 1)]         power consumption, increase fan life, and minimize
                                                            noise. When calculating the desired fan speed, remem-
     fCLK = 256 x FanSpeed x (KTACH + 1) / KSCALE           ber that the above equations are written in rotations per
If the internal oscillator is used, setting fCLK to 254kHz  second (RPS), where most fans are specified in rota-
can further reduce the equations:                           tions per minute (RPM).
     Equation 1: KSCALE = FanSpeed x (KTACH + 1) / 992      Write the desired fan speed to the speed register.
     Equation 2: KTACH = (992 x KSCALE / FanSpeed) - 1      Example:
     Equation 3: FanSpeed = 992 x KSCALE / (KTACH + 1)      Assume the following:
Enter closed-loop mode by entering 10 into bits 5 and 4     • 12V fan is rated at 2000RPM at 12V.
of the configuration register.                              • Use the internal oscillator (fCLK = 254kHz).
Note that in equation 3, the fan speed is inversely pro-    • Desired fan speed = 1500RPM (25RPS).
portional to (KTACH + 1). This means the regulated fan
speed is a nonlinear function of the value written to the   First, calculate an appropriate prescaler value
speed register. Low values written to the speed register    (KSCALE) using equation 1. Attempt to get KTACH as
can result in large relative changes in fan speed. For      close to 64 as possible for the maximum speed of
best results, design the system so that small values        2000RPM.
(such as 02h) are not needed. This is easily accom-         • Set FanSpeed = 33.3RPS (2000RPM/60).
plished because an 8-bit speed register is used, and        • Set KTACH = 64.
fan-speed control should rarely need more than 16
speeds. A good compromise is to design the system           • Solving equation 1 gives KSCALE = 2.18.
(by selecting the appropriate prescaler value) so that
the maximum-rated speed of the fan occurs when the
 Maxim Integrated                                                                                                   21


 MAX6650/MAX6651
Fan-Speed Regulators and Monitors
with SMBus/I2C-Compatible Interface
We will start with KSCALE = 2 (to increase stability, a 4                                           Digital Out Low
could be tried, or to improve response time, a 1 could     All GPIOs can be configured to output a logic-level low.
be tried).                                                 The MAX6650/MAX6651 are designed to sink up to
Second, calculate the appropriate value for the Speed      10mA. This high sink current can be especially useful
Register (KTACH) using equation 2.                         for driving LEDs.
• Set FanSpeed = 25RPS (1500PRM/60).                       On the MAX6651, for GPIO3 and GPIO4, write a zero to
                                                           the appropriate location in the GPIO definition register.
• Solving for equation 2 gives KTACH = 78 for KSCALE
   = 2, KTACH = 39 for KSCALE = 1, or KTACH = 158 for      For GPIO0, GPIO1, and (MAX6551 only) GPIO2, write a
   K = 4.                                                  10 to the appropriate location in the GPIO definition
                                                           register.
    Determining the Tachometer Count Time
To monitor the fan speed using the SMBus/I2C, the next                                              Digital Out High
step is to determine the tachometer count time. In sys-    All GPIOs can be configured to generate a logic-level
tems running in open-loop mode, this is necessary. In      high. An output high is generated using an open-drain
closed-loop or full-speed mode, reading the tachome-       output stage with an internal pullup resistor of nominally
ter can serve as a valuable check to ensure the fan and    100kΩ. The MAX6650/MAX6651 power-up default state
the control loop are operating properly.                   is with all GPIOs configured as output highs.
The MAX6650/MAX6651 use an 8-bit counter to count          On the MAX6651, for GPIO3 and GPIO4, write a 1 to
the tachometer pulses. This means the device can           the appropriate location in the GPIO definition register.
count from 0 to 255 tachometer pulses before overflow-     For GPIO0, GPIO1, and (MAX6551 only) GPIO2, write
ing. The MAX6650/MAX6651 can accommodate a large           an 11 to the appropriate location in the GPIO definition
range of fan speeds by allowing the counting interval to   register.
be programmed. Smaller/faster fans should use smaller
count times. Although larger fans could also use small-                                                 Digital Input
er count times, resolution would suffer. Choose the        Since a logic-level high output is open drain with an
slowest count time that will not overflow under worst-     internal pullup, an external device can actively pull this
case conditions. Fans are mechanical devices, and          pin low. The MAX6650/MAX6651 allow the user to read
their speeds are subject to large tolerance variations. If the GPIO value through the GPIO status register.
an overflow does occur, the counter will read 255. The     • Configure the GPIO as an output logic level high (see
MAX6650/MAX6651 can be configured to generate an              above).
alert if an overflow is encountered (see Setting Up        • Read the state of the GPIO by reading the GPIO sta-
Alarms). Note that the prescaler value has no effect on       tus register.
the TACH0 register.
Enter the appropriate count-time value in the tachometer                                                Alert Output
count-time register.                                       GPIO0 can also serve as an ALERT output. The ALERT
                                                           output is designed to drive an interrupt on a µC. The
Example:                                                   ALERT output goes low whenever an enabled alarm
Assume a 12V fan rated at 2000 RPM.                        condition occurs (see Setting Up Alarms).
To accommodate large tolerance variations, choose a        Configure GPIO0 as an ALERT output by writing a 01 to
count time appropriate for a maximum speed of              bits 1 and 0 of the GPIO definition register.
3000RPM; 3000RPM is 50RPS and generates a 100Hz
(2 pulses/revolution) tachometer signal. Table 9 indi-                                                 Full-On Input
cates a count time of 2s will optimize resolution. With a  GPIO1 can also be configured as a full-on input. When
2s count time, speeds as fast as 3825RPM can be            the full-on pin is pulled low, the MAX6650/MAX6651
monitored without overflow. The minimum resolution will    apply the full available voltage across the fan. This hap-
be 15RPM or 0.75% of the rated speed of 2000RPM.           pens independently of the software mode of operation.
                                                           This is a particularly valuable feature in high-reliability
                             Setting Up the GPIOs          systems, designed to prevent software malfunctions
To increase versatility, the MAX6650/MAX6651 have          from causing system overheating.
two and five general-purpose digital inputs/outputs,       Configure GPIO1 as a full-on input by writing a 01 to
respectively. These GPIOs can be configured through        bits 3 and 2 of the GPIO definition register.
the SMBus/I2C.
 22                                                                                                      Maxim Integrated


                                                                    MAX6650/MAX6651
                                Fan-Speed Regulators and Monitors
                           with SMBus/I2C-Compatible Interface
                                     Synchronizing Fans
GPIO2 can be configured to allow multiple MAX6651s
to synchronize the speeds of the fans they are driving                        MAX6501                            FAN
(Figure 14). Synchronization is accomplished by having        CLOCK OUT                                           1
                                                                          GPIO2
one of the MAX6651s (or an external clock) serve as
the clock master by configuring one of the GPIO2s in
the system as a clock output. The remaining GPIO2s in
the system need to be configured as clock inputs:
• Electrically connect all MAX6651 GPIO2s together.
                                                                              MAX6501                            FAN
• Configure one of the MAX6651’s GPIO2s to be a                                                                   2
   clock output, using the GPIO Definition Register (set       CLOCK IN
                                                                          GPIO2
   bits 5 and 4 to 01).
• Configure the rest of the GPIO2s as clock inputs, using
   the GPIO Definition Register (set bits 5 and 4 to 00).
• Configure all MAX6651s in closed-loop mode.
• Configure all prescaler values to be equal.
                                                                              MAX6501                            FAN
• Write identical values to all speed registers.                                                                  3
                                                               CLOCK IN
                                                                          GPIO2
                                  Setting Up Alarms
The MAX6650/MAX6651 can be configured to generate
an ALERT output on GPIO0 whenever certain events,         Figure 14. Synchronizing Fans
such as control loop out of regulation, tachometer over-
flow, or GPI01/GPI02 being driven low, occur. This is     Enable the minimum/maximum output level alarm by
designed to enhance the “set and forget” functionality    setting bits 0 and 1 of the alarm enable register to 11.
of the fan control system.
Configure GPIO0 to be an ALERT output (see above).                                    Tachometer Overflow Alarm
                                                          If any tachometer counter overflows (reaches a count of
                  Minimum/Maximum Output Level Alarm      255), this alarm will be set.
The minimum/maximum output level alarms are               Enable the overflow output level alarm by setting bit 2
designed to warn the system when the MAX6650/             of the alarm enable register bit to 1.
MAX6651 are unable to maintain speed regulation in
closed-loop mode. The MAX6650/MAX6651 maintain                                                 GPIO1/2 Pulled Low
speed regulation by adjusting the voltage across the      Enabling this alarm causes the ALERT output to go low
fan. If the desired speed can’t be attained, one of these whenever GPIO1 or GPIO2 is pulled low. This will occur
alarms will be generated. Possible causes for failure to  independent of the configuration of GPIO1 or GPIO2.
attain the desired speed include system programming
                                                          Enable the GPIO1/GPIO2 output level alarms by setting
problems, incipient fan failure, and a programmed
                                                          bits 3 and/or 4 of the alarm enable register bit to 1.
speed that the fan cannot support.
The minimum output alarm occurs when the DAC out-                                              Clearing the ALERT
put is 00h. A DAC value of 00h means that the             Once an ALERT is generated, determine which alarm
MAX6650/MAX6651 have applied the largest available        caused the ALERT pin to go low. Do this by reading the
voltage across the fan. This typically means the fan is   Alarm Status Register. An ALERT output will stay active
unable to spin as fast as the desired speed.              (low) even if the condition that caused the alert is
                                                          removed. Reading the Alarm Status Register clears the
The maximum output alarm occurs when the DAC value
                                                          ALERT, if the condition that caused the alert is gone. If
is FFh. A DAC value of FFh means the MAX6650/MAX6651
                                                          the condition has not gone away, the ALERT will stay
have tried to reduce the voltage across the fan to 0.
                                                          active. Disabling the alarm with the Alarm Enable
Although this would seem to indicate the fan is spinning
                                                          Register will cause the ALERToutput to go inactive.
faster than the desired speed, this should rarely hap-
pen. If this alarm occurs, it probably indicates some     Read the Alarm Status Register.
type of system error.
 Maxim Integrated                                                                                                    23


MAX6650/MAX6651
Fan-Speed Regulators and Monitors
with SMBus/I2C-Compatible Interface
                                                                                                  Pin Configurations
                    TOP VIEW
                             TACH0 1                 10 FB                TACH0 1              16 TACH1
                               GND 2                  9 VCC               TACH2 2              15 FB
                                         MAX6650                          TACH3 3              14 VCC
                               SDA 3                  8 OUT
                               SCL 4                  7 GPIO0               GND 4     MAX6651  13 OUT
                               ADD 5                  6 GPIO1               SDA 5              12 GPIO3
                                                                            SCL 6              11 GPIO2
                                          μMAX
                                                                           GPIO4 7             10 GPIO0
                                                                            ADD 8               9  GPIO1
                                                                                       QSOP
                                                                                              Package Information
For the latest package outline information and land patterns (footprints), go to www.maximintegrated.com/packages. Note that a
“+”, “#”, or “-” in the package code indicates RoHS status only. Package drawings may show a different suffix character, but the
drawing pertains to the package regardless of RoHS status.
        PACKAGE TYPE                     PACKAGE CODE                         OUTLINE NO.               LAND PATTERN NO.
             10 µMAX                          U10-2                              21-0061                     90-0330
            16 QSOP                            E16-1                             21-0055                     90-0167
24                                                                                                                Maxim Integrated


                                                                                                MAX6650/MAX6651
                                          Fan-Speed Regulators and Monitors
                                     with SMBus/I2C-Compatible Interface
                                                                                                                          Revision History
  REVISION       REVISION                                                                                                                          PAGES
                                                                              DESCRIPTION
   NUMBER           DATE                                                                                                                          CHANGED
                                  Added lead-free parts to the Ordering Information                                                                    1
       4              7/10
                                  Updated Table 5 to include the pins for both the MAX6650 and MAX6651                                                 11
                                  Updated the ADD parameters in the Electrical Characteristics table; updated the
       5            12/12         conditions notes for tHD:DAT, tR, and tF in the Timing Characteristics table; updated                              3, 6
                                  Table 1
Maxim Integrated cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim Integrated product. No circuit patent
licenses are implied. Maxim Integrated reserves the right to change the circuitry and specifications without notice at any time. The parametric values (min and
max limits) shown in the Electrical Characteristics table are guaranteed. Other parametric values quoted in this data sheet are provided for guidance.
Maxim Integrated 160 Rio Robles, San Jose, CA 95134 USA 1-408-601-1000                                                                                      25
© 2012 Maxim Integrated Products, Inc.                      Maxim Integrated and the Maxim Integrated logo are trademarks of Maxim Integrated Products, Inc.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 MAX6650EUB+ MAX6650EUB+T MAX6651EEE+ MAX6651EEE+T
