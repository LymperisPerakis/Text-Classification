                                PI7C9X440SL
           PCI EXPRESS TO USB 2.0 HOST CONTROLLER
                                  DATASHEET
                                   REVISION 3
                                   January 2018
                                                1545 Barber Lane Milpitas, CA 95035
                                                            Telephone: 408-232-9100
                                                                   FAX: 408-434-1040
                                                     Internet: http://www.diodes.com
Document Number DS40394 Rev 3-2


                                                                                                                   PI7C9X440SL
                                                              IMPORTANT NOTICE
DIODES INCORPORATED MAKES NO WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, WITH REGARDS TO THIS
DOCUMENT, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
PARTICULAR PURPOSE (AND THEIR EQUIVALENTS UNDER THE LAWS OF ANY JURISDICTION).
Diodes Incorporated and its subsidiaries reserve the right to make modifications, enhancements, improvements, corrections or
other changes without further notice to this document and any product described herein. Diodes Incorporated does not assume any
liability arising out of the application or use of this document or any product described herein; neither does Diodes Incorporated
convey any license under its patent or trademark rights, nor the rights of others. Any Customer or user of this document or products
described herein in such applications shall assume all risks of such use and will agree to hold Diodes Incorporated and all the
companies whose products are represented on Diodes Incorporated website, harmless against all damages.
Diodes Incorporated does not warrant or accept any liability whatsoever in respect of any products purchased through unauthorized
sales channel.
Should Customers purchase or use Diodes Incorporated products for any unintended or unauthorized application, Customers shall
indemnify and hold Diodes Incorporated and its representatives harmless against all claims, damages, expenses, and attorney fees
arising out of, directly or indirectly, any claim of personal injury or death associated with such unintended or unauthorized
application.
Products described herein may be covered by one or more United States, international or foreign patents pending. Product names
and markings noted herein may also be covered by one or more United States, international or foreign trademarks.
This document is written in English but may be translated into multiple languages for reference. Only the English version of this
document is the final and determinative format released by Diodes Incorporated.
                                                                 LIFE SUPPORT
Diodes Incorporated products are specifically not authorized for use as critical components in life support devices or systems
without the express written approval of the Chief Executive Officer of Diodes Incorporated. As used herein:
A. Life support devices or systems are devices or systems which:
             1. are intended to implant into the body, or
             2. support or sustain life and whose failure to perform when properly used in accordance with instructions for use
provided in the labeling can be reasonably expected to result in significant injury to the user.
B. A critical component is any component in a life support device or system whose failure to perform can be reasonably expected
to cause the
     failure of the life support device or to affect its safety or effectiveness.
Customers represent that they have all necessary expertise in the safety and regulatory ramifications of their life support devices or
systems, and acknowledge and agree that they are solely responsible for all legal, regulatory and safety-related requirements
concerning their products and any use of Diodes Incorporated products in such safety-critical, life support devices or systems,
notwithstanding any devices- or systems-related information or support that may be provided by Diodes Incorporated. Further,
Customers must fully indemnify Diodes Incorporated and its representatives against any damages arising out of the use of Diodes
Incorporated products in such safety-critical, life support devices or systems.
Copyright © 2016, Diodes Incorporated
www.diodes.com
PI7C9X440SL                                                       Page 2 of 102                                       January 2018
Document Number DS40394 Rev 3-2                                 www.diodes.com                                    © Diodes Incorporated


                                                                                                                  PI7C9X440SL
REVISION HISTORY
Date        Revision Number     Description
06/30/09    0.2                 Preliminary datasheet
10/20/09    0.3                 Added Section 6 EEPROM Interface and System Management Bus
                                Added Section 7 Register Description
                                Updated Table 11-3 DC Electrical Characteristics
06/18/10    0.4                 Updated Section 6.1.3 EEPROM Space Address Map and 6.1.4 Mapping EEPROM Contents to
                                Configuration Registers (Offset – C0h Physical Layer Control 3)
                                Updated Section 7.2 PCI Express Configuration Registers (Offset – C0h, C4h, C8h)
                                Added Section 14 Recommended Components
06/23/10    0.5                 Updated Section 3 Pin Definition and Section 4 Pin Assignments (VDDCAUX to ADDC, VAUX to
                                VDDR)
                                Updated Figure 12-1 Package outline drawing
08/27/10    0.6                 Updated Section 1 Features (Industrial Temperature Range)
                                Updated Section 3.3 USB Interface Signals (OCI and POE pins)
                                Updated Section 3.5 Miscellaneous Signals (NC pins)
                                Updated Section 13 Ordering Information (Industrial Temperature Range)
                                Updated Table 11-1 (Ambient Temperature with power applied)
11/18/10    0.7                 Updated Section 3.3 USB Interface Signals (PME_L pin)
                                Updated Section 3.5 Miscellaneous Signals (MAIN_DETECT, GPIO and SMBCLK pins)
                                Corrected Section 4.1 Pin List (Pin 30)
                                Updated Section 6.1.4 Mapping EEPROM Contents to Configuration Registers (24h, 3Eh)
                                Updated Section 7.3.17 Serial Bus Release Number Register and 7.3.18 Miscellaneous Register
12/23/10    0.8                 Updated 7.3.10 Base Address Register 0, 7.3.11 Base Address Register 0, 7.3.17 Serial Bus Release
                                Number Register, 7.3.18 Frame Length Adjustment Register, 7.3.19 Port Wake Capability Register,
                                7.3.22 Power Management Data Register, 7.3.27 Message Signaled Interrupt Capability ID Register,
                                7.3.29 Message Control Register, 7.3.30 Message Address Register, 7.3.31 Message Data Register,
                                7.3.40 Device Control Register, 7.3.42 Link Capabilities Register, 7.3.43 Link Control Register
04/29/11    1.0                 Updated Table 9-3 JTAG boundary scan register definition
                                Updated 7.3.24 Power Management Data Register (bit 15)
                                Production PI7X9X440SL datasheet revision 1.0 released
06/10/11    1.1                 Updated Section 8.2 USB Interface
                                Updated Section 10.1 Express Power States
                                Updated Section 11.3 DC Specification
07/15/11    1.2                 Update Section 7.2.46, 7.2.53. 7.2.55. 7.2.57, 7.2.58 and 7.3.40.
11/07/11    1.3                 Added Table 8.2 Input Clock Requirements for USB Interface
11/23/11    1.4                 Added Table 11-4 DC electrical characteristics for Digital I/O
                                Updated Table 11-7 USB Interface Characteristics
02/13/11    1.5                 Updated Section 5.1.1.3 Receiver Equalization
                                Updated Section 5.1.1.6 Driver Amplitude
                                Updated Section 7.2.53 Physical Layer Control 0 - Offset B4h (Upstream Port)
                                Updated Section 7.2.55 Physical Layer Control 0 - Offset B4h (Downstream Port)
08/13/13    1.6                 Updated Section 1 Features (Power Dissipation)
                                Updated Section 3.5 Miscellaneous Signals (GPIO)
                                Updated Section 11.2 Power Consumption
09/25/13    1.7                 Updated Section 3.6 Power Pins (Added pin 129 to VSS)
                                Updated Section 4.1 Pin Assignments (Added pin 129)
01/05/16    1.8                 Updated Section 13 Ordering Information
01/17/17    1.9                 Updated Table 11-4 DC Electrical Characteristics for Digital I/O
                                Updated Logo
                                Updated Section 11.1 Absolute Maximum Ratings
                                Added Section 11.2 Operating Ambient Temperature
03/22/17    2.0                 Updated Section 3.4 JTAG Boundary Scan Signals
                                Updated Figure 12-1 Package Outline Drawing
                                Updated Section 11.1 Absolute Maximum Ratings
                                Remove Section 14 Recommended Components
01/11/18    3                   Revision numbering system changed to whole number
                                Updated Section 13 Ordering Information
                                Added Figure 12-2 Part Marking
PI7C9X440SL                                           Page 3 of 102                                                  January 2018
Document Number DS40394 Rev 3-2                      www.diodes.com                                              © Diodes Incorporated


                                                                                                                                                               PI7C9X440SL
TABLE OF CONTENTS
1   FEATURES ......................................................................................................................................................... 10
2   GENERAL DESCRIPTION .............................................................................................................................. 11
3   PIN DEFINITION .............................................................................................................................................. 13
  3.1     SIGNAL TYPES ......................................................................................................................................... 13
  3.2     PCI EXPRESS INTERFACE SIGNALS .................................................................................................... 13
  3.3     USB INTERFACE SIGNALS .................................................................................................................... 13
  3.4     JTAG BOUNDARY SCAN SIGNALS ...................................................................................................... 14
  3.5     MISCELLANEOUS SIGNALS.................................................................................................................. 15
  3.6     POWER PINS ............................................................................................................................................. 15
4   PIN ASSIGNMENTS ......................................................................................................................................... 16
  4.1     PIN LIST OF 128-PIN LQFP ....................................................................................................................... 16
5   FUNCTIONAL DESCRIPTION ....................................................................................................................... 17
  5.1     PCI EXPRESS INTERFACE FUNCTIONALITIES .................................................................................. 17
     5.1.1      PHYSICAL LAYER CIRCUIT ............................................................................................................. 17
       5.1.1.1    RECEIVER DETECTION ............................................................................................................................... 18
       5.1.1.2    RECEIVER SIGNAL DETECTION ............................................................................................................... 18
       5.1.1.3    RECEIVER EQUALIZATION ....................................................................................................................... 18
       5.1.1.4    TRANSMITTER SWING................................................................................................................................ 18
       5.1.1.5    DRIVE AMPLITUDE AND DE-EMPHASIS SETTINGS ............................................................................. 19
       5.1.1.6    DRIVE AMPLITUDE ..................................................................................................................................... 20
       5.1.1.7    DRIVE DE-EMPHASIS .................................................................................................................................. 20
       5.1.1.8    TRANSMITTER ELECTRICAL IDLE LATENCY ....................................................................................... 21
     5.1.2      DATA LINK LAYER (DLL) ................................................................................................................. 21
     5.1.3      TRANSACTION LAYER RECEIVE BLOCK (TLP DECAPSULATION) ............................................ 21
     5.1.4      ROUTING ........................................................................................................................................... 21
     5.1.5      TC/VC MAPPING ............................................................................................................................... 22
     5.1.6      QUEUE ............................................................................................................................................... 22
       5.1.6.1    PH .................................................................................................................................................................... 22
       5.1.6.2    PD .................................................................................................................................................................... 22
       5.1.6.3    NPHD .............................................................................................................................................................. 22
       5.1.6.4    CPLH ............................................................................................................................................................... 22
       5.1.6.5    CPLD ............................................................................................................................................................... 23
     5.1.7      TRANSACTION ORDERING .............................................................................................................. 23
     5.1.8      FLOW CONTROL ............................................................................................................................... 24
     5.1.9      TRANSATION LAYER TRANSMIT BLOCK (TLP ENCAPSULATION) ............................................. 24
  5.2     USB HOST CONTROLLER FUNCTIONALITIES .................................................................................. 25
     5.2.1      OHCI HOST CONTROLLER .............................................................................................................. 25
       5.2.1.1    OHCI LEGACY SUPPORT ............................................................................................................................ 25
     5.2.2      EHCI HOST CONTROLLER .............................................................................................................. 25
     5.2.3      PHYSICAL LAYER CIRCUIT ............................................................................................................. 26
       5.2.3.1    HS DRIVER TIMING CONTROL.................................................................................................................. 26
       5.2.3.2    HS DRIVER AMPLITUDE ............................................................................................................................. 26
       5.2.3.3    HS DRIVER SLOPE CONTROL .................................................................................................................... 27
       5.2.3.4    REFERENCE VOLTAGE FOR DISCONNECT CIRCUIT ........................................................................... 27
       5.2.3.5    REFERENCE VOLTAGE FOR SQUELCH CIRCUIT .................................................................................. 27
       5.2.3.6    REFERENCE VOLTAGE FOR CALIBRATION CIRCUIT .......................................................................... 28
       5.2.3.7    CHARGE PUMP CURRENT FOR PLL ......................................................................................................... 28
       5.2.3.8    FS RISE/FALL TIME CONTROL .................................................................................................................. 28
       5.2.3.9    LS RISE/FALL TIME CONTROL .................................................................................................................. 28
       5.2.3.10      HS DRIVER PRE-EMPHASIS ................................................................................................................... 29
PI7C9X440SL                                                                Page 4 of 102                                                                          January 2018
Document Number DS40394 Rev 3-2                                          www.diodes.com                                                                      © Diodes Incorporated


                                                                                                                                      PI7C9X440SL
6   EEPROM INTERFACE AND SYSTEM MANAGEMENT BUS.................................................................. 30
  6.1     EEPROM INTERFACE.............................................................................................................................. 30
     6.1.1      AUTO MODE EERPOM ACCESS...................................................................................................... 30
     6.1.2      EEPROM MODE AT RESET .............................................................................................................. 30
     6.1.3      EEPROM SPACE ADDRESS MAP .................................................................................................... 30
     6.1.4      MAPPING EEPROM CONTENTS TO CONFIGURATION REGISTERS .......................................... 32
  6.2     SMBUS INTERFACE ................................................................................................................................. 40
7   REGISTER DESCRIPTION ............................................................................................................................. 42
  7.1     REGISTER TYPES .................................................................................................................................... 42
  7.2     PCI EXPRESS CONFIGURATION REGISTERS ..................................................................................... 42
     7.2.1      VENDOR ID REGISTER – OFFSET 00h ........................................................................................... 43
     7.2.2      DEVICE ID REGISTER – OFFSET 00h ............................................................................................. 44
     7.2.3      COMMAND REGISTER – OFFSET 04h ............................................................................................ 44
     7.2.4      PRIMARY STATUS REGISTER – OFFSET 04h ................................................................................. 44
     7.2.5      REVISION ID REGISTER – OFFSET 08h ......................................................................................... 45
     7.2.6      CLASS CODE REGISTER – OFFSET 08h ......................................................................................... 45
     7.2.7      CACHE LINE REGISTER – OFFSET 0Ch ......................................................................................... 45
     7.2.8      PRIMARY LATENCY TIMER REGISTER – OFFSET 0Ch ................................................................ 46
     7.2.9      HEADER TYPE REGISTER – OFFSET 0Ch ...................................................................................... 46
     7.2.10     PRIMARY BUS NUMBER REGISTER – OFFSET 18h ...................................................................... 46
     7.2.11     SECONDARY BUS NUMBER REGISTER – OFFSET 18h ................................................................ 46
     7.2.12     SUBORDINATE BUS NUMBER REGISTER – OFFSET 18h ............................................................ 46
     7.2.13     SECONDARY LATENCY TIMER REGISTER – OFFSET 18h ........................................................... 46
     7.2.14     I/O BASE ADDRESS REGISTER – OFFSET 1Ch .............................................................................. 46
     7.2.15     I/O LIMIT ADDRESS REGISTER – OFFSET 1Ch ............................................................................. 47
     7.2.16     SECONDARY STATUS REGISTER – OFFSET 1Ch .......................................................................... 47
     7.2.17     MEMORY BASE ADDRESS REGISTER – OFFSET 20h ................................................................... 47
     7.2.18     MEMORY LIMIT ADDRESS REGISTER – OFFSET 20h .................................................................. 48
     7.2.19     PREFETCHABLE MEMORY BASE ADDRESS REGISTER – OFFSET 24h ..................................... 48
     7.2.20     PREFETCHABLE MEMORY LIMIT ADDRESS REGISTER – OFFSET 24h .................................... 48
     7.2.21     PREFETCHABLE MEMORY BASE ADDRESS UPPER 32-BITS REGISTER – OFFSET 28h ......... 48
     7.2.22     PREFETCHABLE MEMORY LIMIT ADDRESS UPPER 32-BITS REGISTER – OFFSET 2Ch ....... 49
     7.2.23     I/O BASE ADDRESS UPPER 16-BITS REGISTER – OFFSET 30h ................................................... 49
     7.2.24     I/O LIMIT ADDRESS UPPER 16-BITS REGISTER – OFFSET 30h.................................................. 49
     7.2.25     CAPABILITY POINTER REGISTER – OFFSET 34h ......................................................................... 49
     7.2.26     INTERRUPT LINE REGISTER – OFFSET 3Ch ................................................................................. 49
     7.2.27     INTERRUPT PIN REGISTER – OFFSET 3Ch ................................................................................... 49
     7.2.28     BRIDGE CONTROL REGISTER – OFFSET 3Ch .............................................................................. 50
     7.2.29     POWER MANAGEMENT CAPABILITY ID REGISTER – OFFSET 80h ........................................... 50
     7.2.30     NEXT ITEM POINTER REGISTER – OFFSET 80h ........................................................................... 51
     7.2.31     POWER MANAGEMENT CAPABILITIES REGISTER – OFFSET 80h ............................................. 51
     7.2.32     POWER MANAGEMENT DATA REGISTER – OFFSET 84h ............................................................ 51
     7.2.33     PPB SUPPORT EXTENSIONS – OFFSET 84h .................................................................................. 52
     7.2.34     DATA REGISTER – OFFSET 84h ...................................................................................................... 52
     7.2.35     MSI CAPABILITY ID REGISTER – OFFSET 8Ch (Downstream Port Only) .................................... 52
     7.2.36     NEXT ITEM POINTER REGISTER – OFFSET 8Ch (Downstream Port Only) ................................. 52
     7.2.37     MESSAGE CONTROL REGISTER – OFFSET 8Ch (Downstream Port Only) .................................. 52
     7.2.38     MESSAGE ADDRESS REGISTER – OFFSET 90h (Downstream Port Only) .................................... 52
     7.2.39     MESSAGE UPPER ADDRESS REGISTER – OFFSET 94h (Downstream Port Only) ...................... 53
     7.2.40     MESSAGE DATA REGISTER – OFFSET 98h (Downstream Port Only) ........................................... 53
     7.2.41     VPD CAPABILITY ID REGISTER – OFFSET 9Ch (Upstream Port Only) ........................................ 53
     7.2.42     NEXT ITEM POINTER REGISTER – OFFSET 9Ch (Upstream Port Only) ...................................... 53
     7.2.43     VPD REGISTER – OFFSET 9Ch (Upstream Port Only) .................................................................... 53
PI7C9X440SL                                               Page 5 of 102                                                                  January 2018
Document Number DS40394 Rev 3-2                         www.diodes.com                                                               © Diodes Incorporated


                                                                                                                      PI7C9X440SL
     7.2.44     VPD DATA REGISTER – OFFSET A0h (Upstream Port Only) ......................................................... 54
     7.2.45     VENDOR SPECIFIC CAPABILITY ID REGISTER – OFFSET A4h .................................................. 54
     7.2.46     NEXT ITEM POINTER REGISTER – OFFSET A4h .......................................................................... 54
     7.2.47     LENGTH REGISTER – OFFSET A4h ................................................................................................ 54
     7.2.48     XPIP CSR0 – OFFSET A8h (Test Purpose Only) ............................................................................... 54
     7.2.49     XPIP CSR1 – OFFSET ACh (Test Purpose Only) .............................................................................. 54
     7.2.50     REPLAY TIME-OUT COUNTER – OFFSET B0h (Upstream Port)................................................... 54
     7.2.51     ACKNOWLEDGE LATENCY TIMER – OFFSET B0h ....................................................................... 55
     7.2.52     SWITCH OPERATION MODE – OFFSET B4h (Upstream Port) ...................................................... 55
     7.2.53     PHYSICAL LAYER CONTROL 0 – OFFSET B4h (Upstream Port) ................................................... 56
     7.2.54     SWITCH OPERATION MODE – OFFSET B4h (Downstream Port) ................................................. 56
     7.2.55     PHYSICAL LAYER CONTROL 0 – OFFSET B4h (Downstream Port) .............................................. 57
     7.2.56     XPIP CSR2 / TL CSR – OFFSET B8h (Test Purpose Only) ............................................................... 57
     7.2.57     PHYSICAL LAYER CONTROL 1 – OFFSET B8h (Test Purpose Only) ............................................. 57
     7.2.58     PHYSCIAL LAYER CONTROL 2 – OFFSET BCh ............................................................................. 57
     7.2.59     PHYSICAL LAYER CONTROL 3 REGISTER – OFFSET C0h ........................................................... 58
     7.2.60     SSID/SSVID CAPABILITY ID REGISTER – OFFSET C4h ................................................................ 58
     7.2.61     NEXT ITEM POINTER REGISTER – OFFSET C4h .......................................................................... 58
     7.2.62     SUBSYSTEM VENDOR ID REGISTER – OFFSET C8h .................................................................... 58
     7.2.63     SUBSYSTEM ID REGISTER – OFFSET C8h ..................................................................................... 58
     7.2.64     GPIO CONTROL REGISTER – OFFSET D8h (Upstream Port Only) ............................................... 58
     7.2.65     EEPROM CONTROL REGISTER – OFFSET DCh (Upstream Port Only) ........................................ 60
     7.2.66     EEPROM ADDRESS REGISTER – OFFSET DCh (Upstream Port Only) ......................................... 60
     7.2.67     EEPROM DATA REGISTER – OFFSET DCh (Upstream Port Only) ................................................ 61
     7.2.68     PCI EXPRESS CAPABILITY ID REGISTER – OFFSET E0h ............................................................ 61
     7.2.69     NEXT ITEM POINTER REGISTER – OFFSET E0h .......................................................................... 61
     7.2.70     PCI EXPRESS CAPABILITIES REGISTER – OFFSET E0h .............................................................. 61
     7.2.71     DEVICE CAPABILITIES REGISTER – OFFSET E4h ....................................................................... 61
     7.2.72     DEVICE CONTROL REGISTER – OFFSET E8h............................................................................... 62
     7.2.73     DEVICE STATUS REGISTER – OFFSET E8h ................................................................................... 63
     7.2.74     LINK CAPABILITIES REGISTER – OFFSET ECh ............................................................................ 63
     7.2.75     LINK CONTROL REGISTER – OFFSET F0h .................................................................................... 64
     7.2.76     LINK STATUS REGISTER – OFFSET F0h ........................................................................................ 65
     7.2.77     SLOT CAPABILITIES REGISTER (Downstream Port Only) – OFFSET F4h ................................... 66
     7.2.78     SLOT CONTROL REGISTER (Downstream Port Only) – OFFSET F8h ........................................... 66
     7.2.79     SLOT STATUS REGISTER (Downstream Port Only) – OFFSET F8h ............................................... 67
     7.2.80     PCI EXPRESS ADVANCED ERROR REPORTING CAPABILITY ID REGISTER – OFFSET 100h . 68
     7.2.81     CAPABILITY VERSION – OFFSET 100h .......................................................................................... 68
     7.2.82     NEXT ITEM POINTER REGISTER – OFFSET 100h ......................................................................... 68
     7.2.83     UNCORRECTABLE ERROR STATUS REGISTER – OFFSET 104h ................................................. 68
     7.2.84     UNCORRECTABLE ERROR MASK REGISTER – OFFSET 108h .................................................... 69
     7.2.85     UNCORRECTABLE ERROR SEVERITY REGISTER – OFFSET 10Ch ............................................. 70
     7.2.86     CORRECTABLE ERROR STATUS REGISTER – OFFSET 110 h ...................................................... 71
     7.2.87     CORRECTABLE ERROR MASK REGISTER – OFFSET 114 h ......................................................... 71
     7.2.88     ADVANCE ERROR CAPABILITIES AND CONTROL REGISTER – OFFSET 118h ......................... 72
     7.2.89     HEADER LOG REGISTER – OFFSET From 11Ch to 128h .............................................................. 72
     7.2.90     PCI EXPRESS VIRTUAL CHANNEL CAPABILITY ID REGISTER – OFFSET 140h (Upstream Only)
                72
     7.2.91     CAPABILITY VERSION – OFFSET 140h (Upstream Only) .............................................................. 72
     7.2.92     NEXT ITEM POINTER REGISTER – OFFSET 140h (Upstream Only) ............................................. 72
     7.2.93     PORT VC CAPABILITY REGISTER 1 – OFFSET 144h (Upstream Only) ........................................ 73
     7.2.94     PORT VC CAPABILITY REGISTER 2 – OFFSET 148h (Upstream Only) ........................................ 73
     7.2.95     PORT VC CONTROL REGISTER – OFFSET 14Ch (Upstream Only)............................................... 73
     7.2.96     PORT VC STATUS REGISTER – OFFSET 14Ch (Upstream Only) ................................................... 74
     7.2.97     VC RESOURCE CAPABILITY REGISTER (0) – OFFSET 150h (Upstream Only) ............................ 74
PI7C9X440SL                                    Page 6 of 102                                                             January 2018
Document Number DS40394 Rev 3-2               www.diodes.com                                                         © Diodes Incorporated


                                                                                                                                      PI7C9X440SL
     7.2.98     VC RESOURCE CONTROL REGISTER (0) – OFFSET 154h (Upstream Only) .............................. 74
     7.2.99     VC RESOURCE STATUS REGISTER (0) – OFFSET 158h (Upstream Only) .................................... 75
     7.2.100      PORT ARBITRATION TABLE REGISTER (0) – OFFSET 180h-1BCh (Upstream Only) .............. 75
     7.2.101      PCI EXPRESS POWER BUDGETING CAPABILITY ID REGISTER – OFFSET 20Ch ................ 76
     7.2.102      CAPABILITY VERSION – OFFSET 20Ch ...................................................................................... 76
     7.2.103      NEXT ITEM POINTER REGISTER – OFFSET 20Ch .................................................................... 76
     7.2.104      DATA SELECT REGISTER – OFFSET 210h ................................................................................. 76
     7.2.105      POWER BUDGETING DATA REGISTER – OFFSET 214h .......................................................... 76
     7.2.106      POWER BUDGET CAPABILITY REGISTER – OFFSET 218h ..................................................... 77
  7.3     USB DEVICE CONFIGURATION REGISTERS (FUNC0/FUNC1/FUNC2) .......................................... 78
     7.3.1      VENDOR ID REGISTER – OFFSET 00h ........................................................................................... 78
     7.3.2      DEVICE ID REGISTER – OFFSET 00h ............................................................................................. 79
     7.3.3      COMMAND REGISTER – OFFSET 04h ............................................................................................ 79
     7.3.4      STATUS REGISTER – OFFSET 04h .................................................................................................. 79
     7.3.5      REVISION ID REGISTER – OFFSET 08h ......................................................................................... 80
     7.3.6      CLASS CODE REGISTER – OFFSET 08h ......................................................................................... 80
     7.3.7      CACHE LINE REGISTER – OFFSET 0Ch ......................................................................................... 80
     7.3.8      MASTER LATENCY TIMER REGISTER – OFFSET 0Ch .................................................................. 81
     7.3.9      HEADER TYPE REGISTER – OFFSET 0Ch ...................................................................................... 81
     7.3.10     BASE ADDRESS REGISTER 0 – OFFSET 10h (Func 0 and Func 1) ................................................ 81
     7.3.11     BASE ADDRESS REGISTER 0 – OFFSET 10h (Func 2 Only) .......................................................... 81
     7.3.12     SUBSYSTEM VENDOR REGISTER – OFFSET 2Ch ......................................................................... 81
     7.3.13     SUBSYSTEM ID REGISTER – OFFSET 2Ch ..................................................................................... 81
     7.3.14     CAPABILITIES POINTER REGISTER – OFFSET 34h...................................................................... 81
     7.3.15     INTERRUPT LINE REGISTER – OFFSET 3Ch ................................................................................. 82
     7.3.16     INTERRUPT PIN REGISTER – OFFSET 3Ch ................................................................................... 82
     7.3.17     SERIAL BUS RELEASE NUMBER REGISTER – OFFSET 60h (Func 2 Only) ................................. 82
     7.3.18     FRAME LENGTH ADJUSTMENT REGISTER – OFFSET 60h (Func 2 Only) .................................. 82
     7.3.19     PORT WAKE CAPABILITY REGISTER – OFFSET 60h (Func 2 Only) ............................................ 82
     7.3.20     MISCELLANEOUS REGISTER – OFFSET 68h (Func 2 Only) ......................................................... 83
     7.3.21     POWER MANAGEMENT CAPABILITY ID REGISTER – OFFSET 80h ........................................... 83
     7.3.22     NEXT ITEM POINTER REGISTER – OFFSET 80h ........................................................................... 83
     7.3.23     POWER MANAGEMENT CAPABILITIES REGISTER – OFFSET 80h ............................................. 84
     7.3.24     POWER MANAGEMENT DATA REGISTER – OFFSET 84h ............................................................ 84
     7.3.25     PPB SUPPORT EXTENSIONS – OFFSET 84h .................................................................................. 85
     7.3.26     PM DATA REGISTER – OFFSET 84h ............................................................................................... 85
     7.3.27     MESSAGE SIGNALED INTERRUPT (MSI) Capability ID Register 8Ch .......................................... 85
     7.3.28     MESSAGE SIGNALED INTERRUPT (MSI) NEXT ITEM POINTER 8Ch ......................................... 85
     7.3.29     MESSAGE CONTROL REGISTER – OFFSET 8Ch ........................................................................... 85
     7.3.30     MESSAGE ADDRESS REGISTER – OFFSET 90h............................................................................. 85
     7.3.31     MESSAGE DATA REGISTER – OFFSET 94h .................................................................................... 86
     7.3.32     USB PHYSICAL LAYER CONTROL REGISTER (USB PORT 1) – OFFSET A0h ............................. 86
     7.3.33     USB PHYSICAL LAYER CONTROL REGISTER (USB PORT 2) – OFFSET A4h ............................. 86
     7.3.34     USB PHYSICAL LAYER CONTROL REGISTER (USB PORT 3) – OFFSET A8h ............................. 87
     7.3.35     USB PHYSICAL LAYER CONTROL REGISTER (USB PORT 4) – OFFSET ACh ............................ 87
     7.3.36     PCI EXPRESS CAPABILITY ID REGISTER – OFFSET E0h ............................................................ 88
     7.3.37     NEXT ITEM POINTER REGISTER – OFFSET E0h .......................................................................... 88
     7.3.38     PCI EXPRESS CAPABILITIES REGISTER – OFFSET E0h .............................................................. 88
     7.3.39     DEVICE CAPABILITIES REGISTER – OFFSET E4h ....................................................................... 88
     7.3.40     DEVICE CONTROL REGISTER – OFFSET E8h............................................................................... 89
     7.3.41     DEVICE STATUS REGISTER – OFFSET E8h ................................................................................... 90
     7.3.42     LINK CAPABILITIES REGISTER – OFFSET ECh ............................................................................ 90
     7.3.43     LINK CONTROL REGISTER – OFFSET F0h .................................................................................... 91
     7.3.44     LINK STATUS REGISTER – OFFSET F0h ........................................................................................ 91
8   CLOCK SCHEME ............................................................................................................................................. 93
PI7C9X440SL                                               Page 7 of 102                                                                  January 2018
Document Number DS40394 Rev 3-2                         www.diodes.com                                                               © Diodes Incorporated


                                                                                                                                       PI7C9X440SL
  8.1     PCI EXPRESS INTERFACE ...................................................................................................................... 93
  8.2     USB INTERFACE ...................................................................................................................................... 93
9   IEEE 1149.1 COMPATIBLE JTAG CONTROLLER .................................................................................... 94
  9.1     INSTRUCTION REGISTER ...................................................................................................................... 94
  9.2     BYPASS REGISTER ................................................................................................................................. 94
  9.3     DEVICE ID REGISTER ............................................................................................................................. 94
  9.4     BOUNDARY SCAN REGISTER ............................................................................................................... 95
  9.5     JTAG BOUNDARY SCAN REGISTER ORDER ...................................................................................... 95
10 POWER MANAGEMENT ................................................................................................................................ 97
  10.1    PCI EXPRESS POWER STATES .............................................................................................................. 97
  10.2    USB POWER STATES .............................................................................................................................. 97
11 ELECTRICAL AND TIMING SPECIFICATIONS ....................................................................................... 98
  11.1    ABSOLUTE MAXIMUM RATINGS ........................................................................................................ 98
  11.2    OPERATING AMBIENT TEMPERATURE ......................................................................................................... 98
  11.3    POWER CONSUMPTION ......................................................................................................................... 98
  11.4    DC SPECIFICATIONS .............................................................................................................................. 98
  11.5    AC SPECIFICATIONS .............................................................................................................................. 99
12 PACKAGE INFORMATION.......................................................................................................................... 101
13 ORDERING INFORMATION........................................................................................................................ 102
PI7C9X440SL                                                Page 8 of 102                                                                  January 2018
Document Number DS40394 Rev 3-2                          www.diodes.com                                                               © Diodes Incorporated


                                                                                                                                        PI7C9X440SL
TABLE OF FIGURES
FIGURE 2-1 PI7C9X440SL TOPOLOGY ....................................................................................................................... 12
FIGURE 5-1 DRIVER OUTPUT WAVEFORM ................................................................................................................... 19
FIGURE 6-1 SMBUS ARCHITECTURE IMPLEMENTATION ON PI7C9X440SL ................................................................ 41
FIGURE 12-1 PACKAGE OUTLINE DRAWING .............................................................................................................. 101
FIGURE 12-2 PART MARKING .................................................................................................................................... 101
LIST OF TABLES
TABLE 5-1 RECEIVER DETECTION THRESHOLD SETTINGS ........................................................................................... 18
TABLE 5-2 RECEIVER SIGNAL DETECT THRESHOLD .................................................................................................... 18
TABLE 5-3 TRANSMITTER SWING SETTINGS ................................................................................................................ 19
TABLE 5-4 DRIVE AMPLITUDE BASE LEVEL REGISTERS ............................................................................................. 20
TABLE 5-5 DRIVE AMPLITUDE BASE LEVEL SETTINGS................................................................................................ 20
TABLE 5-6 DRIVE DE-EMPHASIS BASE LEVEL REGISTER ............................................................................................ 20
TABLE 5-7 DRIVE DE-EMPHASIS BASE LEVEL SETTINGS ............................................................................................ 20
TABLE 5-8 SUMMARY OF PCI EXPRESS ORDERING RULES .......................................................................................... 23
TABLE 5-9 HS DRIVER TIMING CONTROL FOR PMOS ................................................................................................. 26
TABLE 5-10 HS DRIVER TIMING CONTROL FOR NMOS .............................................................................................. 26
TABLE 5-11 HS DRIVER AMPLITUDE CONTROL .......................................................................................................... 26
TABLE 5-12 HS DRIVER SLOPE CONTROL ................................................................................................................... 27
TABLE 5-13 REFERENCE VOLTAGE FOR DISCONNECT CIRCUIT ................................................................................... 27
TABLE 5-14 REFERENCE VOLTAGE FOR SQUELCH CIRCUIT......................................................................................... 27
TABLE 5-15 REFERENCE VOLTAGE FOR CALIBRATION CIRCUIT.................................................................................. 28
TABLE 5-16 CHARGE PUMP CURRENT CONTROL......................................................................................................... 28
TABLE 5-17 FS RISE/FALL T IME CONTROL ................................................................................................................. 28
TABLE 5-18 LS RISE/FALL T IME CONTROL ................................................................................................................. 29
TABLE 5-19 HS DRIVER PRE-EMPHASIS CONTROL ..................................................................................................... 29
TABLE 6-1 SMBUS ADDRESS PIN CONFIGURATION .................................................................................................... 41
TABLE 7-1 TABLE ENTRY SIZE IN 4 BITS ..................................................................................................................... 75
TABLE 8-1 INPUT CLOCK REQUIREMENTS FOR PCI EXPRESS INTERFACE .................................................................... 93
TABLE 8-2 INPUT CLOCK REQUIREMENTS FOR USB INTERFACE ................................................................................. 93
TABLE 9-1 INSTRUCTION REGISTER CODES ................................................................................................................. 94
TABLE 9-2 JTAG DEVICE ID REGISTER ...................................................................................................................... 94
TABLE 9-3 JTAG BOUNDARY SCAN REGISTER DEFINITION ........................................................................................ 95
TABLE 11-1 ABSOLUTE MAXIMUM RATINGS .............................................................................................................. 98
TABLE 11-2 OPERATING AMBIENT TEMPERATURE ...................................................................................................... 98
TABLE 11-3 PI7C9X440SL POWER DISSIPATION ........................................................................................................ 98
TABLE 11-4 DC ELECTRICAL CHARACTERISTICS ........................................................................................................ 98
TABLE 11-5 DC ELECTRICAL CHARACTERISTICS FOR DIGITAL I/O ............................................................................. 99
TABLE 11-6 PCI EXPRESS INTERFACE - DIFFERENTIAL TRANSMITTER (TX) OUTPUT CHARACTERISTICS ................... 99
TABLE 11-7 PCI EXPRESS INTERFACE - DIFFERENTIAL RECEIVER (RX) INPUT CHARACTERISTICS ............................. 99
TABLE 11-8 USB INTERFACE CHARACTERISTICS ...................................................................................................... 100
PI7C9X440SL                                                 Page 9 of 102                                                                  January 2018
Document Number DS40394 Rev 3-2                           www.diodes.com                                                               © Diodes Incorporated


                                                                                                 PI7C9X440SL
1 Features
    General Features
     PCI Express to four USB 2.0 host controller ports
     Strapped pins configurable with optional EEPROM or SMBus
     SMBus interface support
     Low Power Dissipation at 432 mW typical in L0 normal mode
     Industrial Temperature Range -40oC to 85oC
     128-pin LQFP 14mm x 14mm package
    Industrial Compliance
     Compliant with PCI Express Base Specification Revision 1.1
     Compliant with PCI Express CEM Specification Revision 1.1
     Compliant with PCI-to-PCI Bridge Architecture Specification Revision 1.2
     Compliant with Advanced Configuration Power Interface (ACPI) Specification
     Compliant with Universal Serial Bus Specification Revision 2.0 (data rate 1.5/12/480 Mbps)
     Compliant with Open Host Controller Interface Specification for USB Rev 1.0a
     Compliant with Enhanced Host Controller Interface Specification for USB Rev 1.0
     Compliant with System Management (SM) Bus, Version 1.0
    PCI Express Interface
     One x1 PCIe 1.1 port
     Advanced Power Saving
              - Link Power Management
              - Supports L0, L0s, L1, L2, L2/L3Ready and L3 link power state
              - Active state power management for L0s and L1 state
              - PME# support in L2 state
              - Device State Power Management
              - Supports D0, D3Hot and D3Cold device power state
              - 3.3V Aux Power support in D3Cold power state
     Supports up to 256-byte maximum payload size
     Programmable driver current and de-emphasis level at the PCIe port
     Reliability, Availability and Serviceability
    USB Host Controller
     USB Root Hub with 4 downstream facing ports shared by OHCI and EHCI host controllers
     All USB downstream facing ports are able to handle high-speed (480 Mbps), full-speed (12 Mbps) and low-
           speed (1.5 Mbps) transactions
     PCI Express to USB bridging through PCI Express multi-functional core of PI7C9X440SL
     Two OHCI host controllers for full-speed and low-speed and one EHCI host controller for high-speed
     Programmable PHY parameters for each USB port
     Operational registers of the USB Host Controller are directly mapped to PCI memory space
PI7C9X440SL                                        Page 10 of 102                                  January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                              © Diodes Incorporated


                                                                                                    PI7C9X440SL
2 GENERAL DESCRIPTION
The PI7C9X440SL PCI Express-to-USB 2.0 Host Controller complies with PCI Express Base Specification
Revision 1.1, Open Host Controller Interface Specification Revision 1.0a, and Enhanced Host Controller Interface
Specification Revision 1.0. The high-performance architecture of the PI7C9X440SL is capable of bridging from one
PCIe x1 upstream port to four USB 2.0 ports. The device allows simultaneous access to multiple USB devices from
system host processor, and therefore expands the connectivity domain of the system. The USB ports of the device
can support all the available speeds including High-Speed (HS), Full-Speed (FS) and Low-Speed (LS). The PCIe-
to-USB2.0 bridge function of the device is implemented by two types of host controllers, the Enhanced Host
Controller Interface (EHCI) and Open Host Controller Interface (OHCI). There are one EHCI controller and two
OHCI controllers residing in PI7C9X440SL. The EHCI controller handles High-Speed USB transaction while the
OHCI controllers handle Full-Speed or Low-Speed USB transaction.
From the perspective of system model, the device contains two cascaded virtual PCI-to-PCI bridges, where the
upstream-port bridge sits upon the downstream-port bridge over a virtual PCI Bus, and three USB controllers are
attached to the downstream PCI Express port. During enumeration, the internal PCIe upstream and downstream
ports are given unique bus numbers, device number and function number that are logically formed as a destination
ID. The USB host controllers are viewed as a multi-functional device by the bootstrapping procedures. The EHCI
controller is assigned function #2 and the two OHCI controllers are assigned function #0 and #1, and all the
controllers are assigned the same device number. The memory-map and IO address ranges are exclusively allocated
to each port and USB host controller. After the software enumeration is completed, the transaction packets are
routed to the dedicated PCIe port or USB host controller based on the embedded contents of address or destination
ID.
For the PCIe-to-USB bridging function, the four USB ports are first served in a host-centric manner by EHCI or
OHCI host controllers, which then interface with the PCIe port to transfer packets to/from the upstream port through
switch fabric. At High-Speed mode, all the USB ports are handled by ECHI controller with function #2. At Full-
Speed and Low-Speed modes, USB port #1 and port #2 are handled by OHCI controller with function #0 and USB
port #3 and port #4 are handled by OHCI controller with function #1. The Root Hub resides between the USB ports
and host controllers and handles connection sessions from the host controller cores to USB ports.
PI7C9X440SL                                        Page 11 of 102                                      January 2018
Document Number DS40394 Rev 3-2                   www.diodes.com                                   © Diodes Incorporated


                                                                                    PI7C9X440SL
                                                  PCIe x1 Link
                                                     x1 PCIe
                                                 Upstream Port
                                                Virtual PCI Bus
                                            PCIe Downstream Port
                                EHCI Host          OHCI Host           OHCI Host
                                Controller          Controller         Controller
                                                    Root Hub
                                 USB Port 1    USB Port 2   USB Port 3  USB Port 4
                                        Figure 2-1 PI7C9X440SL Topology
PI7C9X440SL                                        Page 12 of 102                      January 2018
Document Number DS40394 Rev 3-2                   www.diodes.com                   © Diodes Incorporated


                                                                                                                       PI7C9X440SL
3 PIN DEFINITION
3.1    SIGNAL TYPES
               TYPE OF SIGNAL             DESCRIPTION
                      I                   Input
                      O                   Output
                      P                   Power
       “_L” in signal name indicates Active LOW signal
3.2    PCI EXPRESS INTERFACE SIGNALS
         NAME              PIN                  TYPE   DESCRIPTION
         REFCLKP           51, 52                  I   Reference Clock Input Pairs: Connect to external 100MHz
         REFCLKN                                       differential clock.
                                                       The input clock signals must be delivered to the clock buffer cell
                                                       through an AC-coupled interface so that only the AC information of
                                                       the clock is received, converted, and buffered. It is recommended that a
                                                       0.1uF be used in the AC-coupling.
         PERP              37                      I   PCI Express Data Serial Input Pair: Differential data receive
         PERN              38                      I   signals.
         PETP              41                     O    PCI Express Data Serial Output Pairs: Differential data transmit
         PETN              42                     O    signals.
         PERST_L           104                     I   System Reset (Active LOW): When PERST_L is asserted, the
                                                       internal states of whole chip except sticky logics are initialized.
         REXT              57                      I   External Reference Resistor: Connect an external resistor (1.43K
                                                       Ohm +/- 1%) to REXT_GND to provide a reference to both the bias
                                                       currents and impedance calibration circuitry.
         REXT_GND          56                      I   External Reference Resistor Ground: Connect to an external resistor
                                                       to REXT.
3.3    USB INTERFACE SIGNALS
         NAME              PIN                  TYPE   DESCRIPTION
         DP [4:1]          85, 93, 117, 124      I/O   USB D+ Signal: USB D+ analog signal covering HS/FS/LS. DP [x] is
                                                       correspondent to Portx, where x=1,2,3,4.
         DM [4:1]          84, 92, 116, 123      I/O   USB D- Signal: USB D- analog signal covering HS/FS/LS. DP [x] is
                                                       correspondent to Portx, where x=1,2,3,4.
         OCI [4:1]         7, 6, 5, 4              I   Over Current Input (Active LOW): These signals are asserted low to
                                                       indicate that an over-current condition has occurred. OCI [x] is
                                                       correspondent to Portx, where x=1,2,3,4.
         POE [4:1]         13, 12, 11, 10         O    Power Output Enable (Active LOW): Power supply control output
                                                       for USB Root Hub Port. When these signals are asserted low, they
                                                       enable an external power switch to turn on the power supply. POE [x]
                                                       is correspondent to Portx, where x=1,2,3,4.
         RREF[4:1]         87, 95, 119, 126      I/O   External Resistor Connection for Current Reference: This analog
                                                       signal is the connection to the external resistor. It sets the reference
                                                       current. No external capacitor should be connected. The recommended
                                                       value for the resistor is 6.04 kohm and accuracy of +/- 1%.
         XI                102                     I   Crystal Oscillator Input: A 12MHz crystal oscillator is required.
         XO                103                    O    Crystal Oscillator Output
         PME_L             113                    O    Power Management Event (Low Active): This signal is asserted
                                                       whenever the USB power state is resumed to Operational State from
                                                       Suspend State.
         LEG_EMU_EN        20                     O    OHCI Legacy Emulation Enable: This signal indicates that Legacy
                                                       emulation support is enabled for the OHCI controller, and the
                                                       application can read or write to I/O ports 60h/64h when I/O access for
                                                       the OHCI controller is enabled. See section 5.2.1.1 for details of the
                                                       Legacy Mode.
PI7C9X440SL                                          Page 13 of 102                                                      January 2018
Document Number DS40394 Rev 3-2                      www.diodes.com                                                  © Diodes Incorporated


                                                                                                   PI7C9X440SL
         NAME              PIN  TYPE   DESCRIPTION
         SMI_O             14    O     System Management Interrupt: This signal is used to indicate that an
                                       interrupt condition has occurred. The signal is used only when OHCI
                                       Legacy support is enabled. See section 5.2.1.1 for details of the Legacy
                                       Mode.
         IO_HIT_I          3      I    Application I/O Hit: This signal indicates a PCI I/O cycle strobe. See
                                       section 5.2.1.1 for details of the Legacy Mode.
         IRQ1_I            16     I    External Interrupt 1: This external keyboard controller interrupt 1
                                       causes an emulation interrupt. See section 5.2.1.1 for details of the
                                       Legacy Mode.
         IRQ1_O            18    O     OHCI Legacy IRQ1: This signal is asserted when an emulation
                                       interrupt condition exists and OutputFull, IRQEn, and AuxOutputFull
                                       are asserted. See section 5.2.1.1 for details of the Legacy Mode.
         IRQ12_I           17     I    External Interrupt 12: This external keyboard controller interrupt 12
                                       causes an emulation interrupt. See section 5.2.1.1 for details of the
                                       Legacy Mode.
         IRQ12_O           19    O     OHCI Legacy IRQ12: This signal is asserted when an emulation
                                       interrupt condition exists, OutputFull and IRQEn are asserted, and
                                       AuxOutputFull is de-asserted. See section 5.2.1.1 for details of the
                                       Legacy Mode.
3.4    JTAG BOUNDARY SCAN SIGNALS
         NAME              PIN  TYPE   DESCRIPTION
         TCK               26     I    Test Clock: TCK is the test clock to synchronize the state information
                                       and data during boundary scan operation. When JTAG boundary scan
                                       function is not implemented, this pin should be left open (NC).
         TMS               27     I    Test Mode Select: TMS controls the state of the Test Access Port
                                       (TAP) controller. When JTAG boundary scan function is not
                                       implemented, this pin should be pulled low through a 5.1K pull-down
                                       resistor.
         TDO               25     O    Test Data Output: TDO is the test data output and connects to the
                                       end of the JTAG scan chain. When JTAG boundary scan function is
                                       not implemented, this pin should be left open (NC).
         TDI               28     I    Test Data Input: TDI is the test data input and connects to the
                                       beginning of the JTAG scan chain. It allows the test instructions and
                                       data to be serially shifted into the Test Access Port. When JTAG
                                       boundary scan function is not implemented, this pin should be left open
                                       (NC).
         TRST_L            29     I    Test Reset (Active LOW): TRST_L is the test reset to initialize the
                                       Test Access Port (TAP) controller. When JTAG boundary scan
                                       function is not implemented, this pin should be pulled low through a
                                       5.1K pull-down resistor.
PI7C9X440SL                          Page 14 of 102                                                   January 2018
Document Number DS40394 Rev 3-2      www.diodes.com                                               © Diodes Incorporated


                                                                                                               PI7C9X440SL
3.5    MISCELLANEOUS SIGNALS
         NAME              PIN                TYPE   DESCRIPTION
         EECLK             99                   O    EEPROM Clock: Clock signal to the EEPROM interface.
         EEPD              98                  I/O   EEPROM Data: Bi-directional serial data interface to and from the
                                                     EEPROM. The pin is set to 1 by default.
         SMBCLK            21                    I   SMBus Clock: System management Bus Clock.
         SMBDATA           64                  I/O   SMBus Data: Bi-Directional System Management Bus Data.
         SCAN_EN           15                  I/O   Full-Scan Enable Control: For normal operation, SCAN_EN is an
                                                     output with a value of “0”. SCAN_EN becomes an input during
                                                     manufacturing testing.
         GPIO[7:0]         76, 75, 74, 73,     I/O   General Purpose input and output: These eight general-purpose pins
                           72, 71, 70, 69            are programmed as either input-only or bi-directional pins by writing
                                                     the GPIO output enable control register.
         MAIN_DETECT       24                    I   Main Power Detect: MAIN_DETECT should be tied to the Aux
                                                     Power of the system through a 4.7K ohm pull-up resistor if the USB
                                                     remote wakeup function is to be supported. Otherwise, this signal
                                                     should be tied to the Main Power of the system through a 4.7K ohm
                                                     pull-up resistor.
         TEST1/3/4/5/6     1, 65, 77, 114,       I   Test Pins: For testing purposes only. TEST1 and TEST4 should be tied
                           66                        to ground, and TEST3, TEST5, and TEST6 should be tied to high for
                                                     normal operation. The suggested value for the pull-up and pull-down
                                                     resistor is 5.1K.
         NC                2, 30, 31, 32, 43,        Not Connected: These pins can be left floating.
                           44, 47, 48, 55,
                           58, 59, 62, 63,
                           78, 79, 80, 88,
                           107, 108
3.6    POWER PINS
         NAME              PIN                TYPE   DESCRIPTION
         VDDC              22, 35, 81, 100,      P   VDDC Supply (1.0V): Used as digital core power pins.
                           109, 111
         VDDR              8, 33, 67, 105,       P   VDDR Supply (3.3V): Used as digital I/O power pins.
                           112
         VDDA              83, 90, 91, 97,       P   VDDA Supply (3.3V): Used as USB analog power pins.
                           115, 121, 122,
                           128
         AVDD              40, 46, 49, 60,       P   AVDD Supply (1.0V): Used as PCI Express analog power pins.
         AVDDH             54                    P   AVDDH Supply (3.3V): Used as PCI Express analog high voltage
                                                     power pins.
         VSS               9, 23, 34, 36, 39,    P   VSS Ground: Used as ground pins.
                           45, 50, 53, 61,
                           68, 82, 86, 89,           GND: The central thermal pad underneath the package should be
                           94, 96, 101, 106,         connected to ground.
                           110, 118, 120,
                           125, 127, 129
PI7C9X440SL                                        Page 15 of 102                                                 January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                             © Diodes Incorporated


                                                                         PI7C9X440SL
4 PIN ASSIGNMENTS
4.1    PIN LIST of 128-PIN LQFP
         PIN       NAME          PIN  NAME             PIN  NAME    PIN      NAME
        1         TEST1         33   VDDR             65   TEST3   97      VDDA
        2         NC            34   VSS              66   TEST6   98      EEPD
        3         IO_HIT_I      35   VDDC             67   VDDR    99      EECLK
        4         OCI[1]        36   VSS              68   VSS     100     VDDC
        5         OCI[2]        37   PERP             69   GPIO[0] 101     VSS
        6         OCI[3]        38   PERN             70   GPIO[1] 102     XI
        7         OCI[4]        39   VSS              71   GPIO[2] 103     XO
        8         VDDR          40   AVDD             72   GPIO[3] 104     PERST_L
        9         VSS           41   PETP             73   GPIO[4] 105     VDDR
        10        POE[1]        42   PETN             74   GPIO[5] 106     VSS
        11        POE[2]        43   NC               75   GPIO[6] 107     NC
        12        POE[3]        44   NC               76   GPIO[7] 108     NC
        13        POE[4]        45   VSS              77   TEST4   109     VDDC
        14        SMI_O         46   AVDD             78   NC      110     VSS
        15        SCAN_EN       47   NC               79   NC      111     VDDC
        16        IRQ1_I        48   NC               80   NC      112     VDDR
        17        IRQ12_I       49   AVDD             81   VDDC    113     PME_L
        18        IRQ1_O        50   VSS              82   VSS     114     TEST5
        19        IRQ12_O       51   REFCLKP          83   VDDA    115     VDDA
        20        LEG_EMU_EN    52   REFCLKN          84   DM[4]   116     DM[2]
        21        SMBCLK        53   VSS              85   DP[4]   117     DP[2]
        22        VDDC          54   AVDDH            86   VSS     118     VSS
        23        VSS           55   NC               87   RREF[4] 119     RREF[2]
        24        MAIN_DETECT   56   REXT_GND         88   NC      120     VSS
        25        TDO           57   REXT             89   VSS     121     VDDA
        26        TCK           58   NC               90   VDDA    122     VDDA
        27        TMS           59   NC               91   VDDA    123     DM[1]
        28        TDI           60   AVDD             92   DM[3]   124     DP[1]
        29        TRST_L        61   VSS              93   DP[3]   125     VSS
        30        NC            62   NC               94   VSS     126     RREF[1]
        31        NC            63   NC               95   RREF[3] 127     VSS
        32        NC            64   SMBDATA          96   VSS     128     VDDA
                                                                   129     E_PAD
PI7C9X440SL                              Page 16 of 102                     January 2018
Document Number DS40394 Rev 3-2          www.diodes.com                 © Diodes Incorporated


                                                                                                      PI7C9X440SL
5 FUNCTIONAL DESCRIPTION
The PCI Express-to-USB Bridge contains two virtual PCI-to-PCI Bridges (VPPB) connected by a virtual PCI bus.
One of the VPPB is implemented as the upstream port, and the other VPPB is implemented as the downstream port
to connect to the USB Host Controllers (OHCI and EHCI). The upstream PCIe port encompasses complete PCIe
architecture with the physical, data link, and transaction layers. One VPPB represents a single PCIe Port, which
handles the transmission and reception of PCIe packets. The USB Host Controller is able to handle operational
registers and descriptor link list, which provide a communication channel for Host Controller Driver (HCD) to
initiate USB packet transactions to and from USB devices.
The operation of the PCIe to USB bridging functions are depicted as follows. The HCD first prepares the data
structure of the USB commands or data. Then, the host controllers are notified to fetch the commands or data,
which are eventually converted from PCIe into USB packet format. Depending on the direction of transfer, the host
controller moves and converts the packet to/from USB devices. When the transfer is complete, an interrupt message
will notify the HCD to process the data stored in the system memory the descriptor points to.
5.1     PCI EXPRESS INTERFACE FUNCTIONALITIES
5.1.1 PHYSICAL LAYER CIRCUIT
The physical layer circuit design is based on the PHY Interface for PCI Express Architecture (PIPE). It contains
Physical Media Attachment (PMA) and Physical Coding Sub-layer (PCS) blocks. PMA includes Serializer/
Deserializer (SERDES), PLL1, Clock Recovery module, receiver detection circuits, beacon transmitter, electrical
idle detector, and input/output buffers. PCS consists of framer, 8B/10B encoder/decoder, receiver elastic buffer, and
PIPE PHY control/status circuitries. To provide the flexibility for port configuration, each lane has its own control
and status signals for MAC to access individually. In addition, a pair of PRBS generator and checker is included for
PHY built-in self test. The main functions of physical layer circuits include the conversion between serial-link and
parallel bus, provision of clock source for the interface, resolving clock difference in receiver end, and detection of
physical layer errors.
In order to meet the needs of different application, the drive amplitude, de-emphasis and equalization of each
transmitting channels can be adjusted using EEPROM individually. De-emphasis of -3.5 db is implemented by the
transmitters when full swing signaling is used, while an offset can be individually applied to each channel.
1
  Multiple lanes could share the PLL.
PI7C9X440SL                                         Page 17 of 102                                       January 2018
Document Number DS40394 Rev 3-2                     www.diodes.com                                   © Diodes Incorporated


                                                                                                      PI7C9X440SL
5.1.1.1 RECEIVER DETECTION
The physical layer circuits implement receiver detection, which detects the presence of an attached 50 ohm to
ground termination as per PCI Express Specification. The detect circuits determine if the voltage levels of the
receiver have crossed the internal threshold after a configurable time determined by the Receiver Detection
Threshold field in the Physical Layer Control Register 2 (offset BCh, bit[6:4]) as listed in Table 5-1.
        Table 5-1 Receiver Detection Threshold Settings
               Receiver Detection               Threshold
                   Threshold
                      000                          1.0 us
                      001                          2.0 us
                      010                 4.0 us (Recommended)
                      011                          5.0 us
                      100                          7.0 us
                      101                        Reserved
                      110                        Reserved
                      111                        Reserved
5.1.1.2 RECEIVER SIGNAL DETECTION
Receiver signal idling is detected with levels above a programmable threshold specified by Receiver Signal Detect
field in the Physical Layer Control Register 2 (Offset BCh, bit[22:21]) as listed in Table 5-2, and can be configured
on a per-port basis via EEPROM settings.
        Table 5-2 Receiver Signal Detect Threshold
             Receiver Signal Detect           Min (mV ppd)                  Max (mV ppd)
          00                                         50                          150
          01 (Recommended)                           65                          175
          10                                         75                          200
          11                                        120                          240
5.1.1.3 RECEIVER EQUALIZATION
The receiver implements programmable equalizer via the Receiver Equalization field in the Physical Layer Control
Register 2 (Offset BCh, bit[25:22]). There are 16 possible settings. It is recommended that customers determine the
optimal equalization settings based on their environment to and their application.
5.1.1.4 TRANSMITTER SWING
The PCI Express transmitters support implementations of both full voltage swing and half (low) voltage swing. In
full swing signaling mode, the transmitters implement de-emphasis, while in half swing mode, the transmitters do
not. The Transmitter Swing field in the Physical Layer Control Register 2 (offset BCh, Bit[30]) is used for the
selection of full swing signaling or half swing signaling.
PI7C9X440SL                                             Page 18 of 102                                   January 2018
Document Number DS40394 Rev 3-2                        www.diodes.com                                © Diodes Incorporated


                                                                                                             PI7C9X440SL
        Table 5-3 Transmitter Swing Settings
                 Transmitter Swing                         Mode                  De-emphasis
                        0                           Full Voltage Swing           Implemented
                        1                           Half Voltage Swing        Not implemented
5.1.1.5 DRIVE AMPLITUDE AND DE-EMPHASIS SETTINGS
Depending on the operation condition (voltage swing and de-emphasis condition), one of the Drive Amplitude Base
Level fields in the Physical Layer Control Register 0 (offset B4h) and one of the Drive De-Emphasis Base Level
fields in the Physical Layer Control Register 1 (offset B8h) are active for configuration of the amplitude and
de-emphasis.
In addition, optional offset values can be added to the drive amplitude and drive de-emphasis on a per-port basis via
EEPROM settings (EEPROM offset 70h, bit[3:0]). The final drive amplitude and drive de-emphasis are the
summation of the base level value and the offset value. The offset value for drive amplitude is 25 mV pd, and 6.25
mV pd for drive de-emphasis.
 The driver output waveform is the synthesis of amplitude and de-emphasis as shown in Figure 5-1. The driver
amplitude without de-emphasis is specified as a peak differential voltage level (mVpd), and the driver de-emphasis
modifies the driver amplitude.
                                                                          Amplitude + De-Emphasis
                                                                          Amplitude – De-Emphasis
                                        1     1    1     1
                                0                              0    0  0
                                                                                - (Amplitude) + De-Emphasis
                                                                                - (Amplitude) – De-Emphasis
                                  Input digital wave form
                                  Output analog waveform
                                            Figure 5-1 Driver Output Waveform
PI7C9X440SL                                                Page 19 of 102                                       January 2018
Document Number DS40394 Rev 3-2                            www.diodes.com                                   © Diodes Incorporated


                                                                                                                     PI7C9X440SL
5.1.1.6 DRIVE AMPLITUDE
Only one of the Drive Amplitude Level field in the Physical Control Register 0 (offset B4h, bit[20:16], bit[25:21]
and bit[30:26]) listed in Table 5-4 is active depending on the de-emphasis and swing condition. The settings and the
corresponding values of the amplitude level are listed in Table 5-5
       Table 5-4 Drive Amplitude Base Level Registers
                Active Register                  De-Emphasis Condition                   Swing Condition
          Drive Amplitude Level (3P5                      -3.5 db                                Full
                     Nom)
       Table 5-5 Drive Amplitude Base Level Settings
            Setting       Amplitude           Setting         Amplitude         Setting         Amplitude
                           (mV pd)                             (mV pd)                           (mV pd)
            00000              0               00111              175           01110               350
            00001             25               01000              200           01111               375
            00010             50               01001              225           10000               400
            00011             75               01010              250           10001               425
            00100             100              01011              275           10010               450
            00101             125              01100              300           10011               475
            00110             150              01101              325           Others           Reserved
        Note:
        1. Nominal levels. Actual levels will vary with temperature, voltage and board effects.
        2. The maximum nominal amplitude of the output driver is 475 mV pd. Combined values of driver amplitude and de-emphasis greater
        than 475 mV pd should be avoided.
5.1.1.7 DRIVE DE-EMPHASIS
The Drive De-Emphasis Level field in the Physical Control Register 1 (Offset B8h, bit[20:16]) listed in Table 5-6
controls the de-emphasis base level. The settings and the corresponding values of the de-emphasis level are listed in
Table 5-7
       Table 5-6 Drive De-Emphasis Base Level Register
                    Register                  De-Emphasis Condition
           Drive De-Emphasis Level                     -3.5 db
       Table 5-7 Drive De-Emphasis Base Level Settings
           Setting     De-Emphasis           Setting       De-Emphasis         Setting      De-Emphasis
                          (mV pd)                             (mV pd)                           (mV pd)
           00000             0.0              01011             68.75          10110              137.5
           00001            6.25              01100              75.0          10111             143.75
           00010            12.5              01101             81.25          11000              150.0
           00011            18.75             01110              87.5          11001             156.25
           00100            25.0              01111             93.75          11010              162.5
           00101            31.25             10000             100.0          11011             168.75
           00110            37.5              10001            106.25          11100              175.0
           00111            43.75             10010             112.5          11101             181.25
           01000            50.0              10011            118.75          11110              187.5
           01001            56.25             10100             125.0          11111             194.75
           01010            62.5              10101            131.25             -                 -
        Note:
        1. Nominal levels. Actual levels will vary with temperature, voltage and board effects.
        2. The maximum nominal amplitude of the output driver is 475 mV pd. Combined values of driver amplitude and de-emphasis greater
        than 475 mV pd should be avoided.
PI7C9X440SL                                                     Page 20 of 102                                         January 2018
Document Number DS40394 Rev 3-2                                www.diodes.com                                      © Diodes Incorporated


                                                                                                    PI7C9X440SL
5.1.1.8 TRANSMITTER ELECTRICAL IDLE LATENCY
After the last character of the PCI Express transmission, the output current is reduced, and a differential voltage of
less than 20 mV with common mode of VTX-CM-DC is established within 20 UI. This delay time is programmable
via Transmitter PHY Latency field in the Physical Layer Control Register 2 (Offset BCh, bit[3:0]).
5.1.2 DATA LINK LAYER (DLL)
The Data Link Layer (DLL) provides a reliable data transmission between two PCI Express points. An ACK/NACK
protocol is employed to guarantee the integrity of the packets delivered. Each Transaction Layer Packet (TLP) is
protected by a 32-bit LCRC for error detection. The DLL receiver performs LCRC calculation to determine if the
incoming packet is corrupted in the serial link. If an LCRC error is found, the DLL transmitter would issue a NACK
data link layer packet (DLLP) to the opposite end to request a re-transmission, otherwise an ACK DLLP would be
sent out to acknowledge on reception of a good TLP.
In the transmitter, a retry buffer is implemented to store the transmitted TLPs whose corresponding ACK/NACK
DLLP have not been received yet. When an ACK is received, the TLPs with sequence number equals to and smaller
than that carried in the ACK would be flushed out from the buffer. If a NACK is received or no ACK/NACK is
returned from the link partner after the replay timer expires, then a replay mechanism built in DLL transmitter is
triggered to re-transmit the corresponding packet that receives NACK or time-out and any other TLP transmitted
after that packet.
Meanwhile, the DLL is also responsible for the initialization, updating, and monitoring of the flow-control credit.
All of the flow control information is carried by DLLP to the other end of the link. Unlike TLP, DLLP is guarded
by 16-bit CRC to detect if data corruption occurs.
In addition, the Media Access Control (MAC) block, which is consisted of LTSSM, multiple lanes deskew,
scrambler/de-scrambler, clock correction from inserting skip order-set, and PIPE-related control/status circuits, is
implemented to interface physical layer with data link layer.
5.1.3 TRANSACTION LAYER RECEIVE BLOCK (TLP DECAPSULATION)
The receiving end of the transaction layer performs header information retrieval and TC/VC mapping, and it
validates the correctness of the transaction type and format. If the TLP is found to contain illegal header or the
indicated packet length mismatches with the actual packet length, then a Malformed TLP is reported as an error
associated with the receiving port. To ensure end-to-end data integrity, a 32-bit ECRC is checked against the TLP at
the receiver if the digest bit is set in header.
5.1.4 ROUTING
The transaction layer implements three types of routing protocols: ID-based, address-based, and implicit routing.
For configuration reads, configuration writes, transaction completion, and user-defined messages, the packets are
routed by their destination ID constituted of bus number, device number, and function number. Address routing is
employed to forward I/O or memory transactions to the destination port, which is located within the address range
indicated by the address field carried in the packet header. The packet header indicates the packet types including
memory read, memory write, IO read, IO write, Message Signaling Interrupt (MSI) and user-defined message.
Implicit routing is mainly used to forward system message transactions such as virtual interrupt line, power
management, and so on. The message type embedded in the packet header determines the routing mechanism.
PI7C9X440SL                                          Page 21 of 102                                    January 2018
Document Number DS40394 Rev 3-2                      www.diodes.com                                © Diodes Incorporated


                                                                                                     PI7C9X440SL
If the incoming packet can not be forwarded to any other port due to a miss to hit the defined address range or
targeted ID, this is considered as Unsupported Request (UR) packet, which is similar to a master abort event in PCI
protocol.
5.1.5 TC/VC MAPPING
The 3-bit TC field defined in the header identifies the traffic class of the incoming packets. To enable the
differential service, a TC/VC mapping table at destination port that is pre-programmed by system software or
EEPROM pre-load is utilized to cast the TC labeled packets into the desired virtual channel. Note that all the traffic
classes are mapped to VC0, since only VC0 is available on the interface. After the TC/VC mapping, the receive
block dispatches the incoming request, completion, or data into the VC0 queues.
5.1.6 QUEUE
In PCI Express, it defines six different packet types to represent request, completion, and data. They are respectively
Posted Request Header (PH), Posted Request Data payload (PD), Non-Posted Request Header (NPH), Non-Posted
Data Payload (NPD), Completion Header (CPLH) and Completion Data payload (CPLD). Each packet with
different type would be put into a separate queue in order to facilitate the following ordering processor. Since NPD
usually contains one DW, it can be merged with the corresponding NPH into a common queue named NPHD.
5.1.6.1 PH
PH queue provides TLP header spaces for posted memory writes and various message request headers. Each header
space occupies sixteen bytes to accommodate 3 DW or 4 DW headers.
5.1.6.2 PD
PD queue is used for storing posted request data. If the received TLP is of the posted request type and is determined
to have payload coming with the header, the payload data would be put into PD queue.
5.1.6.3 NPHD
NPHD queue provides TLP header spaces for non-posted request packets, which include memory read, IO read, IO
write, configuration read, and configuration write. Each header space takes twenty bytes to accommodate a 3-DW
header, s 4-DW header, s 3-WD header with 1-DW data, and a 4-DW header with 1-DW data.
5.1.6.4 CPLH
CPLH queue provides TLP header space for completion packets. Each header space takes twelve bytes to
accommodate a 3-DW header. Please note that there is no 4-DW completion headers.
PI7C9X440SL                                         Page 22 of 102                                      January 2018
Document Number DS40394 Rev 3-2                     www.diodes.com                                  © Diodes Incorporated


                                                                                                      PI7C9X440SL
5.1.6.5 CPLD
CPLD queue is used for storing completion data. If the received TLP is of the completion type and is determined to
have payload coming with the header, the payload data would be put into CPLD queue.
5.1.7 TRANSACTION ORDERING
Within a VPPB, a set of ordering rules is defined to regulate the transactions on the PCI Express interface including
Memory, IO, Configuration and Messages, in order to avoid deadlocks and to support the Producer-Consumer
model. The ordering rules defined in table 5-4 apply within a single Traffic Class (TC). There is no ordering
requirement among transactions within different TC labels.
       Table 5-8 Summary of PCI Express Ordering Rules
       Row Pass Column          Posted       Read          Non-posted Write   Read          Non-posted Write
                                Request      Request       Request            Completion    Completion
       Posted Request           Yes/No1      Yes5          Yes5               Yes5          Yes5
       Read Request             No2          Yes           Yes                Yes           Yes
       Non-posted Write Request No2          Yes           Yes                Yes           Yes
       Read Completion          Yes/No3      Yes           Yes                Yes           Yes
       Non-Posted Write         Yes4         Yes           Yes                Yes           Yes
       Completion
1. When the Relaxed Ordering Attribute bit is cleared, the Posted Request transactions including memory write and
message request must complete on the egress bus of VPPB in the order in which they are received on the ingress
bus of VPPB. If the Relaxed Ordering Attribute bit is set, the Posted Request is permitted to pass over other Posted
Requests occurring before it.
2. A Read Request transmitting in the same direction as a previously queued Posted Request transaction must push
the posted write data ahead of it. The Posted Request transaction must complete on the egress bus before the Read
Request can be attempted on the egress bus. The Read transaction can go to the same location as the Posted data.
Therefore, if the Read transaction were to pass the Posted transaction, it would return stale data.
3. When the Relaxed Ordering Attribute bit is cleared, a Read completion must ‘‘pull’’ ahead of previously queued
posted data transmitting in the same direction. In this case, the read data transmits in the same direction as the
posted data, and the requestor of the read transaction is on the same side of the VPPB as the completer of the posted
transaction. The posted transaction must deliver to the completer before the read data is returned to the requestor. If
the Relaxed Ordering Attribute bit is set, then a read completion is permitted to pass a previously queued Memory
Write or Message Request.
4. Non-Posted Write Completions are permitted to pass a previous Memory Write or Message Request transaction.
Such transactions are actually transmitting in the opposite directions and hence have no ordering relationship.
5. Posted Request transactions must be given opportunities to pass Non-posted Read and Write Requests as well as
Completions. Otherwise, deadlocks may occur when some older Bridges that do not support delayed transactions
are mixed with PCIe interface in the same system. A fairness algorithm is used to arbitrate between the Posted
Write queue and the Non-posted transaction queue.
PI7C9X440SL                                          Page 23 of 102                                      January 2018
Document Number DS40394 Rev 3-2                      www.diodes.com                                  © Diodes Incorporated


                                                                                                    PI7C9X440SL
5.1.8 FLOW CONTROL
PCI Express employs Credit-Based Flow Control mechanism to make buffer utilization more efficient.
The transaction layer transmitter ensures that it does not transmit a TLP to an opposite receiver unless the receiver
has enough buffer space to accept the TLP. The transaction layer receiver has the responsibility to advertise the free
buffer space to an opposite transmitter to avoid packet stale. In this device, each port has separate queues for
different traffic types and the credits are on the fly sent to data link layer, which compares the current available
credits with the monitored one and reports the updated credit to the counterpart. If no new credit is acquired, the
credit reported is scheduled for every 30 us to prevent from link entering retrain. On the other hand, the receiver at
each egress port gets the usable credits from the opposite end in a link. It would broadcast them to all the other
ingress ports for gating the packet transmission.
5.1.9 TRANSATION LAYER TRANSMIT BLOCK (TLP ENCAPSULATION)
The transmit portion of transaction layer performs the following functions. They are to construct the all types of
forwarded TLP generated from VC arbiter, respond with the completion packet when the local resource (i.e.
configuration register) is accessed and regenerate the message that terminated at receiver to RC if acts as an
upstream port.
PI7C9X440SL                                         Page 24 of 102                                     January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                  © Diodes Incorporated


                                                                                                    PI7C9X440SL
5.2     USB HOST CONTROLLER FUNCTIONALITIES
5.2.1 OHCI HOST CONTROLLER
The OHCI Host Controller (HC) is responsible for communications between Host Controller Driver (HCD)
software and USB Full Speed/Low Speed devices. The OHCI/HC and HCD exchange the information via
operational registers, bulk transfer descriptors, control transfer descriptors and Host Controller Communication
Area (HCCA), which are for interrupt and isochronous transfer types.
When communicating with operational registers, the OHCI/HC acts as a PCI target device to accept the commands
provided by HCD and reports the status requested by HCD. The operational register contains the pointers that
indicate the locations of HCCA and descriptors for bulk and control within the system memory. The HCD receives
the IO Request Packet (IRP) from USB driver software and prepares the data structure of Endpoint Descriptor (ED)
and Transfer Descriptor (TD) in the format of linked list in the system memory. After ED and TD are prepared, the
HC is notified and acts as a PCI master to fetch the ED and TD and move data between the USB devices and
memory area by following the instructions described in the descriptors.
An ED is comprised of the information including endpoint address, speed, data flow direction and maximum packet
size, etc. A TD contains the information of data toggle, buffer position in system memory, complete status code and
data buffer size. The EDs are linked together based on their transfer type, and each ED points to a list of TD queue
that is used to transfer the data or command associated with a specific endpoint.
5.2.1.1 OHCI LEGACY SUPPORT
The OHCI host controller implements legacy support for emulation of PS/2 mouse and/or keyboard in operating
systems, applications, and drivers that do not support USB functions. The emulation code translates the standard
USB compliant keyboard/mouse data and transfers the data to/from PS/2 compatible legacy keyboard interface at
I/O addresses 60h and 64h.
The legacy support interface is consisted of 7 hardware pins, LEG_EN, SMI_O, IO_HIT_I, IRQ_1_I, IRQ1_O,
IRQ12_I and IRQ12_O, and 4 operational registers, HceControl, HceInput, HceOutput and HceStatus (offset 100h,
104h, 108h and 10Ch). When EmulationEnable bit in HceControl register is set to 1, legacy emulation is enabled.
The host controller decodes accesses to I/O registers 60h and 64h, and generates IRQ1 and/or IRQ12 when
appropriate.
When legacy emulation is enabled, reads and writes of the I/O register 60h and 64h are captured in HceInput,
HceOutput, and HceStatus operational registers.
For details, refer to OpenHCI Specification 1.0, Appendix B.
5.2.2 EHCI HOST CONTROLLER
The EHCI Host Controller (HC) is responsible for communications between HC Driver software and USB High
Speed devices. Similar to OHCI/HC, the EHCI/HC and HCD exchange the information via operational registers as
well as data structure arranged in periodic schedule and asynchronous schedule traversals in the system memory.
The periodic schedule traversal is used for time-sensitive isochronous and interrupts transfer types while the
asynchronous schedule traversal is for less time-sensitive control and bulk transfer types. The handling of EHCI
data structure is similar to that in OHCI. However, EHCI data is more complicated due to micro-frame scheduling
and split transaction support. For isochronous and interrupt transactions, the data structure contains High Speed
PI7C9X440SL                                         Page 25 of 102                                     January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                  © Diodes Incorporated


                                                                                                     PI7C9X440SL
device isochronous transfer descriptors (iTD), Full Speed device split-transaction isochronous transfer descriptors
(siTD) and queue head structure queue element descriptors (qTD) for interrupt devices. For bulk and control
transactions, the HC utilizes the qTD to represent the asynchronous data transfer types for High Speed bulk and
control devices.
5.2.3 PHYSICAL LAYER CIRCUIT
The USB physical layer circuit design is based on USB 2.0 Specification. The design contains PLL, bias current
generator, voltage bandgap, clock and data recovery, sync detector, NRZI Encoder / Decoder, Serializer /
De-Serializer, VBUS pulsing and discharge SRP circuit, and VBUS threshold comparators.
The USB physical layer parameters can be configured by setting the USB Physical Layer Control Register (Offset
A0h for port 1, A4h for port 2, A8h for port 3, and ACh for port 4) and EEPROM. Each of the USB port has its own
set of physical layer control parameters, and the configuration of the parameters is performed on a per-port basis.
5.2.3.1 HS DRIVER TIMING CONTROL
The timing of the HS Driver can be adjusted by changing the ratio of PMOS/NMOS strength. The PMOS Strength
for HS Driver Timing and the PMOS Strength for HS Driver Timing fields (bit[0] and bit[2:1]) in the USB Physical
Layer Control Register control the PMOS and NMOS strength respectively.
        Table 5-9 HS Driver Timing Control for PMOS
       PMOS Strength for HS Driver Timing         HS Driver Timing for PMOS
       0 (default)                                             2x
       1                                                       8x
        Table 5-10 HS Driver Timing Control for NMOS
       NMOS Strength for HS Driver Timing         HS Driver Timing for NMOS
       00 (default)                                            2x
       01                                                      4x
       10                                                      6x
       11                                                      8x
5.2.3.2 HS DRIVER AMPLITUDE
The amplitude of the HS driver current can be adjusted by setting the HS Driver Amplitude field (bit[4:3]) in the
USB Physical Layer Control Register.
        Table 5-11 HS Driver Amplitude Control
       HS Driver Amplitude                           HS Driver Current
       00 (default)                                           I
       01                                                 I + 2.5%
       10                                                  I + 5%
       11                                                 I + 7.5%
      Note: I=17.78mA
PI7C9X440SL                                         Page 26 of 102                                      January 2018
Document Number DS40394 Rev 3-2                     www.diodes.com                                  © Diodes Incorporated


                                                                                                 PI7C9X440SL
5.2.3.3 HS DRIVER SLOPE CONTROL
The rise/fall times of the HS Driver can be adjusted by setting the HS Driver Slope Control field (bit[8:5]) in the
USB Physical Layer Control Register. The field controls the injection of additional charge and changes the RC
constant.
         Table 5-12 HS Driver Slope Control
        HS Driver Slope Control                          Rise/Fall Time
        0000 (default)                           Actual values depend on boards,
        0001                                        ambient temperatures, etc.
        0010
        0011
        0100
        0101
        0110
        0111
        1000
        1001
        1010
        1011
        1100
        1101
        1110
        1111
5.2.3.4 REFERENCE VOLTAGE FOR DISCONNECT CIRCUIT
The reference voltage of the disconnect circuit can be adjusted by setting the Reference Voltage for Disconnect
Circuit field (bit[10:9]) in the USB Physical Layer Control Register.
         Table 5-13 Reference Voltage for Disconnect Circuit
        Reference Voltage for Disconnect Circuit                 Vref575m
        00                                                (46 + 2) / 100 * vbg
        01                                                (46 + 3) / 100 * vbg
        10 (default)                                      (46 + 4) / 100 * vbg
        11                                                (46 + 5) / 100 * vbg
5.2.3.5 REFERENCE VOLTAGE FOR SQUELCH CIRCUIT
The reference voltage of the squelch circuit can be adjusted by setting the Reference Voltage for Squelch Circuit
field (bit[12:11]) in the USB Physical Layer Control Register.
         Table 5-14 Reference Voltage for Squelch Circuit
        Reference Voltage for Squelch Circuit    Differential Reference Voltage
        00                                                9 / 100 * vbg
        01                                             (9 + 1) / 100 * vbg
        10 (default)                                   (9 + 2) / 100 * vbg
        11                                             (9 + 3) / 100 * vbg
PI7C9X440SL                                          Page 27 of 102                                 January 2018
Document Number DS40394 Rev 3-2                      www.diodes.com                             © Diodes Incorporated


                                                                                                 PI7C9X440SL
5.2.3.6 REFERENCE VOLTAGE FOR CALIBRATION CIRCUIT
The reference voltage of the calibration circuit can be adjusted by setting the Reference Voltage for Calibration
Circuit field (bit[15:13]) in the USB Physical Layer Control Register.
        Table 5-15 Reference Voltage for Calibration Circuit
       Reference Voltage for Calibration Circuit              Vref575mtune
       000                                                (46) / 100 * vbg
       001                                              (46 + 1) / 100 * vbg
       010                                              (46 + 2) / 100 * vbg
       011                                              (46 + 3) / 100 * vbg
       100 (default)                                    (46 + 4) / 100 * vbg
       101                                              (46 + 5) / 100 * vbg
       110                                              (46 + 6) / 100 * vbg
       111                                              (46 + 7) / 100 * vbg
5.2.3.7 CHARGE PUMP CURRENT FOR PLL
The charge pump current can be adjusted by setting the Charge Pump Current for PLL field (bit[17:16]) in the USB
Physical Layer Control Register.
        Table 5-16 Charge Pump Current Control
       Charge Pump Current for PLL               Charge Pump Current (mA)
       00 (default)                                          Icp
       01                                                 Icp * 0.5
       10                                                 Icp * 1.5
       11                                                  Icp * 2
     Note: Icp=40uA
5.2.3.8 FS RISE/FALL TIME CONTROL
The rise/fall times for FS can be adjusted by setting the FS Rise/Fall Time Control field (bit[19:18]) in the USB
Physical Layer Control Register.
        Table 5-17 FS Rise/Fall Time Control
       FS Rise/Fall Time Control                       Rise/Fall Time
       00                                         Normal FS rise time - 30%
       01 (default)                                  Normal FS rise time
       10                                            Normal FS rise time
       11                                         Normal FS rise time +30%
5.2.3.9 LS RISE/FALL TIME CONTROL
The rise/fall times for LS can be adjusted by setting the LS Rise/Fall Time Control field (bit[21:20]) in the USB
Physical Layer Control Register.
PI7C9X440SL                                        Page 28 of 102                                   January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                               © Diodes Incorporated


                                                                                            PI7C9X440SL
       Table 5-18 LS Rise/Fall Time Control
      LS Rise/Fall Time Control                   Rise/Fall Time
      00                                     Normal LS rise time - 30%
      01 (default)                              Normal LS rise time
      10                                        Normal LS rise time
      11                                     Normal LS rise time +30%
5.2.3.10           HS DRIVER PRE-EMPHASIS
The amplitude of the HS Driver can be adjusted by setting the HS Driver Pre-Emphasis field (bit[23:22]) in the
USB Physical Layer Control Register.
       Table 5-19 HS Driver Pre-Emphasis Control
      HS Driver Pre-Emphasis                    HS Drive Current
      00 (default)                                       I
      01                                             I + 10%
      10                                                 I
      11                                             I + 20%
     Note: I=17.78mA
PI7C9X440SL                                    Page 29 of 102                                  January 2018
Document Number DS40394 Rev 3-2               www.diodes.com                               © Diodes Incorporated


                                                                                                     PI7C9X440SL
6 EEPROM INTERFACE AND SYSTEM MANAGEMENT BUS
The EEPROM interface consists of two pins: EECLK (EEPROM clock output) and EEPD (EEPROM
bi-directional serial data). The Switch may control an ISSI IS24C04 or compatible parts using into 512x8 bits.
The EEPROM is used to initialize a number of registers before enumeration. This is accomplished after PRST# is
de-asserted, at which time the data from the EEPROM is loaded. The EEPROM interface is organized into a 16-bit
base, and the Switch supplies a 7-bit EEPROM word address. The Switch does not control the EEPROM address
input. It can only access the EEPROM with address input set to 0.
The System Management Bus interface consists of two pins: SMBCLK (System Management Bus Clock input) and
SMBDATA (System Management Bus Data input/ output).
6.1     EEPROM INTERFACE
6.1.1 AUTO MODE EERPOM ACCESS
The Swidge may access the EEPROM in a WORD format by utilizing the auto mode through a hardware sequencer.
The EEPROM start-control, address, and read/write commands can be accessed through the configuration register.
Before each access, the software should check the Autoload Status bit before issuing the next start.
6.1.2 EEPROM MODE AT RESET
During a reset, the Switch will automatically load the information/data from the EEPROM if the automatic load
condition is met. The first offset in the EEPROM contains a signature. If the signature is recognized, the autoload
initiates right after the reset.
During the autoload, the Bridge will read sequential words from the EEPROM and write to the appropriate registers.
Before the Bridge registers can be accessed through the host, the autoload condition should be verified by reading
bit [3] offset DCh (EEPROM Autoload Status). The host access is allowed only after the status of this bit is set to '0'
which indicates that the autoload initialization sequence is complete.
6.1.3 EEPROM SPACE ADDRESS MAP
                         15 – 8                                           7–0             BYTE OFFSET
                                    EEPROM Signature (1516h)                                  00h
                                      Vendor ID for Port 0 ~ 3                                02h
                                       Device ID for Port 0 ~ 3                               04h
             Extended VC Count / Link Capability / Switch Mode Operation / Interrupt pin      06h
                                            for Port 1 ~ 2
                                 Subsystem Vender ID for Port 0 ~ 3                           08h
                                     Subsystem ID for Port 0 ~ 3                              0Ah
                                  Misc Configuration for Port 0 ~ 3                           0Ch
                       Reserved                                Revision ID for Port 0 ~ 3     0Eh
                     FTS / RefClk ppm Difference / Scramble Control for Port 0                10h
                     FTS / RefClk ppm Difference / Scramble Control for Port 1                12h
                     FTS / RefClk ppm Difference / Scramble Control for Port 2                14h
                                              Reserved                                        16h
                                Physical Layer Control 0 for Port 0 ~ 2                       18h
                                Physical Layer Control 1 for Port 0 ~ 2                       1Ah
                           Physical Layer Control 2, Bit[6:0] for Port 0 ~ 2                  1Ch
PI7C9X440SL                                                   Page 30 of 102                            January 2018
Document Number DS40394 Rev 3-2                              www.diodes.com                         © Diodes Incorporated


                                                                                                        PI7C9X440SL
                      15 – 8                                            7–0                  BYTE OFFSET
                                            Reserved                                             1Eh
           TC/VC Map for Port 0 (VC0)            Slot Clock / LPVC Count / Port Num, Port 0      20h
           TC/VC Map for Port 1(VC0)              Slot Implemented / Slot Clock / LPVC Count     22h
                                                                / Port Num, Port 1
           TC/VC Map for Port 2 (VC0)             Slot Implemented / Slot Clock / LPVC Count     24h
                                                                / Port Num, Port 2
                                            Reserved                                             26h
                                      Vendor ID for Func 0                                       28h
                                      Vendor ID for Func 1                                       2Ah
                                      Vendor ID for Func 2                                       2Ch
                                    Device Control for Func 0                                    2Eh
                                            Reserved                                             30h
                                    Slot Capability 0 for Port 1                                 32h
                                    Slot Capability 0 for Port 2                                 34h
                                            Reserved                                             36h
                                      Device ID for Func 0                                       38h
                                      Device ID for Func 1                                       3Ah
                                      Device ID for Func 2                                       3Ch
                               Miscellaneous Register for Func 2                                 3Eh
                                            Reserved                                             40h
                                    Slot Capability 1 for Port 1                                 42h
                                    Slot Capability 1 for Port 2                                 44h
                                            Reserved                                             46h
                        Revision ID / Programming Interface for Func 0                           48h
                        Revision ID / Programming Interface for Func 1                           4Ah
                        Revision ID / Programming Interface for Func 2                           4Ch
                  USB Physical Layer Control Register (USB Port 1), Bit[15:0]                    4Eh
                 PM Data for Port 0                           PM Capability for Port 0           50h
                 PM Data for Port 1                           PM Capability for Port 1           52h
                 PM Data for Port 2                           PM Capability for Port 2           54h
                 PM Data for Port 3                           PM Capability for Port 3           56h
                                      Class Code for Func 0                                      58h
                                      Class Code for Func 1                                      5Ah
                                      Class Code for Func 2                                      5Ch
                  USB Physical Layer Control Register (USB Port 2), Bit[15:0]                    5Eh
                         Power Budgeting Capability Register for Port 0                          60h
                         Power Budgeting Capability Register for Port 1                          62h
                         Power Budgeting Capability Register for Port 2                          64h
                                            Reserved                                             66h
                                Subsystem Vendor ID for Func 0                                   68h
                                Subsystem Vendor ID for Func 1                                   6Ah
                                Subsystem Vendor ID for Func 2                                   6Ch
                                    Device Control for Func 1                                    6Eh
                         Physical Layer Control 2, Bit[30:16] for Port 0                         70h
                         Physical Layer Control 2, Bit[30:16] for Port 1                         72h
                         Physical Layer Control 2, Bit[30:16] for Port 2                         74h
                                            Reserved                                             76h
                                     Subsystem ID for Func 0                                     78h
                                     Subsystem ID for Func 1                                     7Ah
                                     Subsystem ID for Func 2                                     7Ch
                                            Reserved                                             7Eh
                          Physical Layer Control 2, Bit[12:8] for Port 0                         80h
                          Physical Layer Control 2, Bit[12:8] for Port 1                         82h
                          Physical Layer Control 2, Bit[12:8] for Port 2                         84h
                                            Reserved                                             86h
                     Reserved                              Capability Pointer for Func 0         88h
                     Reserved                              Capability Pointer for Func 1         8Ah
                     Reserved                              Capability Pointer for Func 2         8Ch
                  USB Physical Layer Control Register (USB Port 3), Bit[15:0]                    8Eh
                          PM Control Parameter / Rx Polarity for Port 0                          90h
                          PM Control Parameter / Rx Polarity for Port 1                          92h
                          PM Control Parameter / Rx Polarity for Port 2                          94h
                                            Reserved                                             96h
             PM Capability for Func 0                      Next Pointer Item for Func 0          98h
PI7C9X440SL                                                 Page 31 of 102                                 January 2018
Document Number DS40394 Rev 3-2                            www.diodes.com                              © Diodes Incorporated


                                                                                                      PI7C9X440SL
                        15 – 8                                          7–0                BYTE OFFSET
             PM Capability for Func 1                       Next Pointer Item for Func 1       9Ah
             PM Capability for Func 2                       Next Pointer Item for Func 2       9Ch
                   USB Physical Layer Control Register (USB Port 4), Bit[15:0]                 9Eh
                                Replay Time-out Counter for Port 0                             A0h
                                Replay Time-out Counter for Port 1                             A2h
                                Replay Time-out Counter for Port 2                             A4h
                                             Reserved                                          A6h
                      PM Capability / PM Data / Next Pointer Item for Func 0                   A8h
                      PM Capability / PM Data / Next Pointer Item for Func 1                   AAh
                      PM Capability / PM Data / Next Pointer Item for Func 2                   ACh
                                     Device Control for Func 0                                 AEh
                               Acknowledge Latency Timer for Port 0                            B0h
                               Acknowledge Latency Timer for Port 1                            B2h
                               Acknowledge Latency Timer for Port 2                            B4h
                                             Reserved                                          B6h
            Next Pointer Item for Func 0                      Capability ID for Func 0         B8h
            Next Pointer Item for Func 1                      Capability ID for Func 1         BAh
            Next Pointer Item for Func 2                      Capability ID for Func 2         BCh
                                             Reserved                                          BEh
                                 Physical Layer Control 3 for Port 0                           C0h
                                             Reserved                                          C2h
                                             Reserved                                          C4h
                                             Reserved                                          C6h
                                 PCI Express Capability for Func 0                             C8h
                                 PCI Express Capability for Func 1                             CAh
                                 PCI Express Capability for Func 2                             CCh
      USB Physical Layer Control Register (USB         USB Physical Layer Control Register     CEh
                 Port 2), Bit[23:16]                          (USB Port 1), Bit[23:16]
                                             Reserved                                          D0h
                                             Reserved                                          D2h
                                             Reserved                                          D4h
                                             Reserved                                          D6h
                                   Device Capability 0 for Func 0                              D8h
                                   Device Capability 0 for Func 1                              DAh
                                   Device Capability 0 for Func 2                              DCh
      USB Physical Layer Control Register (USB         USB Physical Layer Control Register     DEh
                 Port 4), Bit[23:16]                          (USB Port 3), Bit[23:16]
                                             Reserved                                          E0h
                                             Reserved                                          E2h
                                             Reserved                                          E4h
                                             Reserved                                          E6h
                                   Device Capability 1 for Func 0                              E8h
                                   Device Capability 1 for Func 1                              EAh
                                   Device Capability 1 for Func 2                              ECh
6.1.4 MAPPING EEPROM CONTENTS TO CONFIGURATION REGISTERS
            ADDRESS            PCI CFG OFFSET            DESCRIPTION
               00h                                       EEPROM signature – 1516h
               02h             00h ~ 01h                 Vendor ID for Port 0~3
               04h             02h ~ 03h                 Device ID for Port 0~3
PI7C9X440SL                                                  Page 32 of 102                              January 2018
Document Number DS40394 Rev 3-2                             www.diodes.com                           © Diodes Incorporated


                                                                                                               PI7C9X440SL
            ADDRESS         PCI CFG OFFSET    DESCRIPTION
               06h          ECh (Port 0~2)    Link Capability for Port 0~2
                            ECh – Bit[14:12]           Bit[3:1]: It represents L0s Exit Latency for all ports
                            ECh – Bit[17:15]           Bit[6:4]: It represents L1 Exit Latency for all ports
                            B4h (Port 0~2)    Switch Mode Operation for Port 0~2
                            B4h – Bit[5]               Bit[8]: Ordering on Different Egress Port Mode
                                Bit[6]                 Bit[9]: Ordering on Different Tag of Completion Mode
                                Bit[0]                 Bit[10]: Store and Forward
                                Bit[2:1]               Bit[12:11]: Cut-through Threshold
                                Bit[3]                 Bit[13]: Port Arbitration Mode
                                Bit[4]                 Bit[14]: Credit Update Mode
                            3Ch (Port 1~2)    Interrupt pin for Port 1~2
                            3Ch – Bit[8]               Bit[15]: Set when INTA is requested for interrupt
                                                        resource
               08h          C4h ~ C5h         Subsystem Vender ID
               0Ah          C6h ~ C7h         Subsystem ID
               0Ch          E4h (Port 0~3)    Max_Payload_Size Support for Port 0~3
                            E4h – Bit[0]               Bit[0]: Indicated the maximum payload size that the
                                                        device can support for the TLP
                            ECh (Port 0~3)    ASPM Support for Port 0~3
                            ECh – Bit[11 :10]          Bit[2:1]: Indicate the level of ASPM supported on the
                                                        PCIe link
                            E4h (Port 0~3)    Role_Base Error Reporting for Port 0~3
                            E4h – Bit[15]              Bit[3]: Indicate implement the role-base error reporting
                            B0h (Port 0~3)    MSI/AER Capability Disable for Port 0~3
                            B0h – Bit[14]              Bit[4]: Disable MSI capability
                            B0h – Bit[15]              Bit[5]: Disable AER capability
                            B4h (Port 0~3)    Compliance Pattern Parity Control Disable for Port 0~3
                            B4h – Bit[15]              Bit[6]: Compliance Pattern Parity Control Disable
                            B0h (Port 0~3)    Power Management Capability Disable for Port 0~3
                            B0h – Bit[13]              Bit[7]: Disable Power Management Capability
                            B4h (Port 0~3)    Ordering Frozen for Port 0~3
                            B4h – Bit[7]               Bit[10]: Freeze the ordering feature
                            B8h (Port 0~3)    TX SOF Latency Mode for Port 0~3
                            B8h – Bit[12]              Bit[11]: Set to zero to shorten latency
                            ECh (Port 1~3)    Surprise Down Capability Enable for for Port 1~3
                            ECh – Bit[19]              Bit[12]: Enable Surprise Down Capability
                            B8h (Port 0~3)    Power Management’s Data Select Register R/W Capability for
                            B8h – Bit[13]     Port 0~3
                                                       Bit[13]: Enable Data Select Register R/W
                            B8h (Port 0~3)    Flow Control Update Type for Port 0~3
                            B8h – Bit[14]              Bit[14]: Select Flow Control Update Type
                            B8h (Port 0~3)    4KB Boundary Check Enable for Port 0~3
                            B8h – Bit[15]              Bit[15]: Enable 4KB Boundary Check
               0Eh          08h (Port 0~3)    Revision ID for Port 0~3
                            08h – Bit[7:0]             Bit [7:0]: Indicates the Revision ID of chip.
               10h          B8h (Port 0)      FTS Number for Port 0
                            B8h – Bit[7 :0]            Bit[7:0]: FTS number at receiver side
                            A8h (Port 0)      RefClk ppm Difference for Port 0
                            A8h – Bit[14:13]           Bit[9:8]: It represents RefClk ppm difference between the
                                                                  two ends in one link; 00: 0 ppm, 01: 100 ppm,
                                                                  10: 200 ppm, 11: 300 ppm
                            B8h (Port 0)      Scrambler Control for Port 0
PI7C9X440SL                                      Page 33 of 102                                                   January 2018
Document Number DS40394 Rev 3-2                 www.diodes.com                                                © Diodes Incorporated


                                                                                                                 PI7C9X440SL
            ADDRESS         PCI CFG OFFSET    DESCRIPTION
                            B8h – Bit[11:10]              Bit[11:10]: Scrambler Control
                            B8h – Bit[12]                 Bit[12]: L0s
               12h          B8h (Port 1)      FTS Number for Port 1
                            B8h – Bit[7 :0]               Bit[7:0]: FTS number at receiver side
                            A8h (Port 1)      RefClk ppm Difference for Port 1
                            A8h – Bit[14:13]              Bit[9:8]: It represents RefClk ppm difference between the
                                                                    two ends in one link; 00: 0 ppm, 01: 100 ppm,
                                                                    10: 200 ppm, 11: 300 ppm
                            B8h (Port 1)      Scrambler Control for Port 1
                            B8h – Bit[9:8]                Bit[11:10]: Scrambler Control
                            B8h – Bit[10]                 Bit[12]: L0s
               14h          B8h (Port 2)      FTS Number for Port 2
                            B8h – Bit[7:0]                Bit[7:0]: FTS number at receiver side
                            A8h (Port 2)      RefClk ppm Difference for Port 2
                            A8h – Bit [14:13]             Bit[9:8]: It represents RefClk ppm difference between the
                                                                     two ends in one link; 00: 0 ppm, 01: 100 ppm,
                                                                     10: 200 ppm, 11: 300 ppm
                            B8h (Port 2)      Scrambler Control for Port 2
                            B8h – Bit[9:8]                Bit[11:10]: Scrambler Control
                            B8h – Bit[10]                 Bit[12]: L0s
               18h          B4h (Port 0~2)    Physical Layer Control 0 for Port 0~2
                            B4h – Bit[20 :16]             Bit[4:0]: Drive Amplitude Level (3P5 Nom)
                            B4h – Bit[25 :21]             Bit[9:5]: Drive Amplitude Level (6P0 Nom)
                            B4h – Bit[30 :26]             Bit[14:10]: Drive Amplitude Level (Half)
               1Ah          B8h (Port 0~2)    Physical Layer Control 1 for Port 0~2
                            B8h – Bit[20 :16]             Bit[4:0]: Drive De-Emphasis Level
                            B8h – Bit[25 :21]             Bit[9:5]: Reserved
                            B8h – Bit[30 :26]             Bit[14:10]: Reserved
               1Ch          BCh (Port 0~2)    Physical Layer Control 2 for Port 0~2
                            BCh – Bit[3 :0]               Bit[3:0]: Transmitter PHY Latency
                            BCh – Bit[6 :4]               Bit[6:4]: Receiver Detection Threshold
               20h          F0h (Port 0)      Slot Clock Configuration for Port 0
                            F0h – Bit[28]                 Bit[1]: When set, the component uses the clock provided
                                                           on the connector
                            80h (Port 0)      Device specific Initialization for Port 0
                            80h – Bit[21]                 Bit[2]: When set, the DSI is required
                            ECh (Port 0)      Port Number for Port 0
                            ECh – Bit[25:24]              Bit[5:4]: It represents the logic port numbering for
                                                                     physical port 0
                            84h (Port 0)      PMCSR Data Scale for Port 0
                            84h – Bit[14:13]  Bit[7:6]: It represents the PMCSR Data Scale for physical port 0
                            154h (Port 0)     VC0 TC/VC Map for Port 0
                            154h – Bit[7:1]               Bit[15:9]: When set, it indicates the corresponding TC is
                                                                       mapped into VC0
               22h          E0h (Port1)       PCIe Capability Slot Implemented for Port 1
                            E0h – Bit[24]                 Bit[0]: When set, the slot is implemented for Port 1
                            F0h (Port 1)      Slot Clock Configuration for Port 1
                            F0h – Bit[28]                 Bit[1]: When set, the component uses the clock provided
                                                                   on the connector
                            80h (Port 1)      Device specific Initialization for Port 1
                            80h – Bit[21]                 Bit[2]: When set, the DSI is required
                            ECh (Port 1)      Port Number for Port 1
                            ECh – Bit[25:24]              Bit[5:4]: It represents the logic port numbering for
                                                                     physical port 1
                            84h (Port 1)      PMCSR Data Scale for Port 1
                            84h – Bit[14:13]  Bit[7:6]: It represents the PMCSR Data Scale for physical port 1
PI7C9X440SL                                      Page 34 of 102                                                     January 2018
Document Number DS40394 Rev 3-2                 www.diodes.com                                                  © Diodes Incorporated


                                                                                                                  PI7C9X440SL
            ADDRESS         PCI CFG OFFSET     DESCRIPTION
                            154h (Port 1)      VC0 TC/VC Map for Port 1
                            154h – Bit[7:1]                Bit[15:9]: When set, it indicates the corresponding TC is
                                                                        mapped into VC0
               24h          E0h (Port 2)       PCIe Capability Slot Implemented for Port 2
                            E0h – Bit[24]                  Bit[0]: When set, the slot is implemented for Port 2
                            F0h (Port 2)       Slot Clock Configuration for Port 2
                            F0h – Bit[28]                  Bit[1]: When set, the component uses the clock provided
                                                                     on the connector
                            80h (Port 2)       Device specific Initialization for Port 2
                            80h – Bit[21]                  Bit[2]: When set, the DSI is required
                            ECh (Port 2)       Port Number for Port 2
                            ECh – Bit[25:24]               Bit[5:4]: It represents the logic port numbering for
                                                                      physical port 2
                            84h (Port 2)       PMCSR Data Scale for Port 2
                            84h – Bit[14:13]   Bit[7:6]: It represents the PMCSR Data Scale for physical port 2
                            154h (Port 2)      VC0 TC/VC Map for Port 2
                            154h – Bit[7:1]                Bit[15:9]: When set, it indicates the corresponding TC is
                                                                        mapped into VC0
               28h          00h ~ 01h (Func 0) Vendor ID for Func 0
               2Ah          00h ~ 01h (Func 1) Vendor ID for Func 1
               2Ch          00h ~ 01h (Func 2) Vendor ID for Func 2
               2Eh          E8h (Func 0)       PCI Express Capability for Func 0
                            E8h – Bit[0]                   Bit[0]: Correctable Error Reporting Enable
                            E8h – Bit[1]                   Bit[1]: Non-Fatal Error Reporting Enable
                            E8h – Bit[2]                   Bit[2]: Fatal Error Reporting Enable
                            E8h – Bit[3]                   Bit[3]: Unsupported Request Reporting Enable
                            E8h – Bit[4]                   Bit[4]: Enable Relaxed Ordering
                            E8h – Bit[7 :5]                Bit[7:5]: Max_Payload_Size
                            E8h – Bit[8]                   Bit[8]: Extended Tag Field Enable
                            E8h – Bit[9]                   Bit[9]: Phantom Function Enable
                            E8h – Bit[10]                  Bit[10]: Auxiliary (AUX) Power PM Enable
                            E8h – Bit[11]                  Bit[11]: Enable No Snoop
                            E8h – Bit[14 :12]              Bit[14:12]: Max_Read_ Request_Size
               32h          F4h (Port 1)       Slot Capability 0 of Port 1
                            F4h – Bit[15:0]                Bit[15:0]: Mapping to the low word of slot capability
                                                                        register
               34h          F4h (Port 2)       Slot Capability 0 of Port 2
                            F4h – Bit[15:0]                Bit[15:0]: Mapping to the low word of slot capability
                                                                        register
               38h          02h ~ 03h (Func 0) Device ID for Func 0
               3Ah          02h ~ 03h (Func 1) Device ID for Func 1
               3Ch          02h ~ 03h (Func 2) Device ID for Func 2
               3Eh          68h (Func 2)       Miscellaneous Register for Func 2
                            68h – Bit[0]                   Bit[0]: Enable Basic Mode
                            68h – Bit[1]                   Bit[1]: Enable Boundary 64-byte
                            68h – Bit[2]                   Bit[2]: Enable EHCI Prefetch
                            68h – Bit[3]                   Bit[3]: Reserved. Must to be 0b.
                            68h – Bit[4]                   Bit[4]: Enable User Max_Read_Request_Size
                            68h – Bit[6:5]                 Bit[6:5]: User Max_Read_Request_Size
                            68h – Bit[14:8]                Bit[14:8]: Prefetch DW Size (Unit: DW)
               42h          F4h (Port 1)       Slot Capability 1 of Port 1
                            F4h – Bit[31:16]               Bit[15:0]: Mapping to the high word of slot capability
                                                                        register
               44h          F4h (Port 2)       Slot Capability 1 of Port 2
                            F4h – Bit[31:16]               Bit[15:0]: Mapping to the high word of slot capability
                                                                        register
               48h          08h (Func 0)       Revision ID and Class Code for Func 0
                            08h – Bit[7:0]                 Bit[7:0]: Revision ID
                            08h – Bit[15:8]                Bit[15:8]: Programming Interface
               4Ah          08h (Func 1)       Revision ID and Class Code for Func 1
                            08h – Bit[7:0]                 Bit[7:0]: Revision ID
                            08h – Bit[15:8]                Bit[15:8]: Programming Interface
PI7C9X440SL                                       Page 35 of 102                                                     January 2018
Document Number DS40394 Rev 3-2                  www.diodes.com                                                  © Diodes Incorporated


                                                                                                             PI7C9X440SL
            ADDRESS         PCI CFG OFFSET   DESCRIPTION
               4Ch          08h (Func 2)     Revision ID and Class Code for Func 2
                            08h – Bit[7:0]            Bit[7:0]: Revision ID
                            08h – Bit[15:8]           Bit[15:8]: Programming Interface
               4Eh          A0h (Func 0~2)   USB Physical Layer Control Register (USB Port 1), Bit[15:0]
                            A0h – Bit[15 :0]          Bit[15:0]: USB Physical Layer Control Register (USB
                                                       Port 1), Bit[15:0]
               50h          84h (Port 0)     No_Soft_Reset for Port 0
                            84h – Bit[3]              Bit[0]: No_Soft_Reset.
                            80h (Port 0)     Power Management Capability for Port 0
                            80h – Bit[24:22]          Bit[3:1]: AUX Current
                            80h – Bit[25]             Bit[4]: read only as 1 to indicate Bridge supports the D1
                                                                power management state
                            80h – Bit[26]             Bit[5]: read only as 1 to indicate Bridge supports the D2
                                                                power management state
                            80h – Bit[29:28]          Bit[7:6]: PME Support for D2 and D1 states
               51h          84h (Port 0)     Power Management Data for Port 0
                            84h – Bit[31:24]          Bit[15:8]: read only as Data register
               52h          84h (Port 1)     No_Soft_Reset for Port 1
                            84h – Bit[3]              Bit[0]: No_Soft_Reset.
                            80h (Port 1)     Power Management Capability for Port 1
                            80h – Bit[24:22]          Bit[3:1]: AUX Current
                            80h – Bit[25]             Bit[4]: read only as 1 to indicate Bridge supports the D1
                                                                power management state
                            80h – Bit[26]             Bit[5]: read only as 1 to indicate Bridge supports the D2
                                                                power management state
                            80h – Bit[29:28]          Bit[7:6]: PME Support for D2 and D1 states
               53h          84h (Port 1)     Power Management Data for Port 1
                            84h – Bit[31:24]          Bit[15:8]: read only as Data register
               54h          84h (Port 2)     No_Soft_Reset for Port 2
                            84h – Bit[3]              Bit[0]: No_Soft_Reset.
                            80h (Port 2)     Power Management Capability for Port 2
                            80h – Bit[24:22]          Bit[3:1]: AUX Current
                            80h – Bit[25]             Bit[4]: read only as 1 to indicate Bridge supports the D1
                                                                power management state
                            80h – Bit[26]             Bit[5]: read only as 1 to indicate Bridge supports the D2
                                                                power management state
                            80h – Bit[29:28]          Bit[7:6]: PME Support for D2 and D1 states
               55h          84h (Port 2)     Power Management Data for Port 2
                            84h – Bit[31:24]          Bit[15:8]: read only as Data register
               56h          84h (Port 3)     No_Soft_Reset for Port 3
                            84h – Bit[3]              Bit[0]: No_Soft_Reset.
                            80h (Port 3)     Power Management Capability for Port 3
                            80h – Bit[24:22]          Bit[3:1]: AUX Current
                            80h – Bit[25]             Bit[4]: read only as 1 to indicate Bridge supports the D1
                                                                power management state
                            80h – Bit[26]             Bit[5]: read only as 1 to indicate Bridge supports the D2
                                                                power management state
                            80h – Bit[29:28]          Bit[7:6]: PME Support for D2 and D1 states
               57h          84h (Port 3)     Power Management Data for Port 3
                            84h – Bit[31:24]          Bit[15:8]: read only as Data register
               58h          08h (Func 0)     Class Code for Func 0
                            08h – Bit[23:16]          Bit[7:0]: Sub-Class Code
                            08h – Bit[31:24]          Bit[15:8]: Base Class Code
               5Ah          08h (Func 1)     Class Code for Func 1
                            08h – Bit[23:16]          Bit[7:0]: Sub-Class Code
                            08h – Bit[31:24]          Bit[15:8]: Base Class Code
               5Ch          08h (Func 2)     Class Code for Func 2
                            08h – Bit[23:16]          Bit[7:0]: Sub-Class Code
                            08h – Bit[31:24]          Bit[15:8]: Base Class Code
               5Eh          A4h (Func 0~2)   USB Physical Layer Control Register (USB Port 2), Bit[15:0]
                            A4h – Bit[15 :0]          Bit[15:0]: USB Physical Layer Control Register (USB
                                                       Port 2), Bit[15:0]
PI7C9X440SL                                    Page 36 of 102                                                   January 2018
Document Number DS40394 Rev 3-2                www.diodes.com                                               © Diodes Incorporated


                                                                                                           PI7C9X440SL
            ADDRESS         PCI CFG OFFSET     DESCRIPTION
               60h          214h (Port 0)      Power Budget Register for Port 0
                            214h– Bit[7:0]              Bit[7:0]: Base Power
                            214h– Bit[9:8]              Bit[9:8]: Data Scale
                            214h– Bit[12:10]            Bit[12:10]: PM State
                            218h– Bit[0]                Bit[15]: System Allocated
               62h          214h (Port 1)      Power Budget Register for Port 1
                            214h– Bit[7:0]              Bit[7:0]: Base Power
                            214h– Bit[9:8]              Bit[9:8]: Data Scale
                            214h– Bit[12:10]            Bit[12:10]: PM State
                            218h– Bit[0]                Bit[15]: System Allocated
               64h          214h (Port 2)      Power Budget Register for Port 2
                            214h– Bit[7:0]              Bit[7:0]: Base Power
                            214h– Bit[9:8]              Bit[9:8]: Data Scale
                            214h– Bit[12:10]            Bit[12:10]: PM State
                            218h– Bit[0]                Bit[15]: System Allocated
               68h          2Ch ~ 2Dh (Func 0) Subsystem Vendor ID for Func 0
               6Ah          2Ch ~ 2Dh (Func 1) Subsystem Vendor ID for Func 1
               6Ch          2Ch ~ 2Dh (Func 2) Subsystem Vendor ID for Func 2
               6Eh          E8h (Func 1)       PCI Express Capability for Func 1
                            E8h – Bit[0]                Bi[0]: Correctable Error Reporting Enable
                            E8h – Bit[1]                Bit[1]: Non-Fatal Error Reporting Enable
                            E8h – Bit[2]                Bit[2]: Fatal Error Reporting Enable
                            E8h – Bit[3]                Bit[3]: Unsupported Request Reporting Enable
                            E8h – Bit[7 :5]             Bit[7:5]: Max_Payload_Size
                            E8h – Bit[10]               Bit[10]: Auxiliary (AUX) Power PM Enable
               70h          BCh (Port 0)       Physical Layer Control 2, Bit[30:16] for Port 0
                            BCh – Bit[16]               Bit[0]: Per-Lane Main Drive Offset Enable (Margining)
                            BCh – Bit[17]               Bit[1]: Per-Lane Main Drive Offset Enable (Nominal)
                            BCh – Bit[18]               Bit[2]: Per-Lane De-Emphasis Drive Offset Enable
                                                         (Margining)
                            BCh – Bit[19]               Bit[3]: Per-Lane De-Emphasis Drive Offset Enable
                                                         (Nominal)
                            BCh – Bit[21:20]            Bit[5:4]: Receiver Signal Detection
                            BCh – Bit[25:22]            Bit[9:6]: Receiver Equalization
                            BCh – Bit[29:26]            Bit[13:10]: Reserved
                            BCh – Bit[30]               Bit[14] : Transmitter Swing
               72h          BCh (Port 1)       Physical Layer Control 2, Bit[30:16] for Port 1
                            BCh – Bit[16]               Bit[0]: Per-Lane Main Drive Offset Enable (Margining)
                            BCh – Bit[17]               Bit[1]: Per-Lane Main Drive Offset Enable (Nominal)
                            BCh – Bit[18]               Bit[2]: Per-Lane De-Emphasis Drive Offset Enable
                                                         (Margining)
                            BCh – Bit[19]               Bit[3]: Per-Lane De-Emphasis Drive Offset Enable
                                                         (Nominal)
                            BCh – Bit[21:20]            Bit[5:4]: Receiver Signal Detection
                            BCh – Bit[25:22]            Bit[9:6]: Receiver Equalization
                            BCh – Bit[29:26]            Bit[13:10]: Reserved
                            BCh – Bit[30]               Bit[14] : Transmitter Swing
               74h          BCh (Port 2)       Physical Layer Control 2, Bit[30:16] for Port 2
                            BCh – Bit[16]               Bit[0]: Per-Lane Main Drive Offset Enable (Margining)
                            BCh – Bit[17]               Bit[1]: Per-Lane Main Drive Offset Enable (Nominal)
                            BCh – Bit[18]               Bit[2]: Per-Lane De-Emphasis Drive Offset Enable
                                                         (Margining)
                            BCh – Bit[19]               Bit[3]: Per-Lane De-Emphasis Drive Offset Enable
                                                         (Nominal)
                            BCh – Bit[21:20]            Bit[5:4]: Receiver Signal Detection
                            BCh – Bit[25:22]            Bit[9:6]: Receiver Equalization
                            BCh – Bit[29:26]            Bit[13:10]: Reserved
                            BCh – Bit[30]               Bit[14] : Transmitter Swing
               78h          2Eh ~ 2Fh (Func 0) Subsystem ID for Func 0
               7Ah          2Eh ~ 2Fh (Func 1) Subsystem ID for Func 1
               7Ch          2Eh ~ 2Fh (Func 2) Subsystem ID for Func 2
               80h          BCh (Port 0)       Physical Layer Control 2, Bit[12:8] for Port 0
                            BCh – Bit[8]                Bit [0]: CDR Loop Bandwidth Enable
                            BCh – Bit[10 :9]            Bit [2:1]: CDR Threshold
                            BCh – Bit[12 :11]           Bit [4:3]: CDR Loop Bandwidth Gain
PI7C9X440SL                                      Page 37 of 102                                              January 2018
Document Number DS40394 Rev 3-2                  www.diodes.com                                          © Diodes Incorporated


                                                                                                          PI7C9X440SL
            ADDRESS         PCI CFG OFFSET    DESCRIPTION
               82h          BCh (Port 1)      Physical Layer Control 2, Bit[12:8] for Port 1
                            BCh – Bit[8]               Bit [0]: CDR Loop Bandwidth Enable
                            BCh – Bit[10 :9]           Bit [2:1]: CDR Threshold
                            BCh – Bit[12 :11]          Bit [4:3]: CDR Loop Bandwidth Gain
               84h          BCh (Port 2)      Physical Layer Control 2, Bit[12:8] for Port 2
                            BCh – Bit[8]               Bit [0]: CDR Loop Bandwidth Enable
                            BCh – Bit[10 :9]           Bit [2:1]: CDR Threshold
                            BCh – Bit[12 :11]          Bit [4:3]: CDR Loop Bandwidth Gain
               88h          34h (Func 0)      Capabilities Pointer for Func 0
                            34h – Bit[7:0]             Bit[7:0]: Capabilities Pointer
               8Ah          34h (Func 1)      Capabilities Pointer for Func 1
                            34h – Bit[7:0]             Bit[7:0]: Capabilities Pointer
               8Ch          34h (Func 2)      Capabilities Pointer for Func 2
                            34h – Bit[7:0]             Bit[7:0]: Capabilities Pointer
               8Eh          A8h (Func 0~2)    USB Physical Layer Control Register (USB Port 3), Bit[15:0]
                            A8h – Bit[15 :0]           Bit[15:0]: USB Physical Layer Control Register (USB
                                                        Port 3), Bit[15:0]
               90h          B4h (Port 0)      PM Control Parameter for Port 0
                            B4h – Bit[9:8]             Bit[1:0] : D3 enters L1
                            B4h – Bit[11:10]           Bit[3:2] : L1 delay count select
                            B4h – Bit[13:12]           Bit[5:4] : L0s enable
                            B4h (Port 0)      Rx Polarity Inversion Disable for port 0
                            B4h – Bit[14]              Bit[6] : RX Polarity Inversion Disable
                            B0h (Port 0)      Decode VGA for Port 0
                            B0h – Bit[31]       Bit[7]
               92h          B4h (Port 1)      PM Control Parameter for Port 1
                            B4h – Bit[9:8]             Bit[1:0] : D3 enters L1
                            B4h – Bit[11:10]           Bit[3:2] : L1 delay count select
                            B4h – Bit[13:12]           Bit[5:4] : L0s enable
                            B4h (Port 1)      Rx Polarity Inversion Disable for port 1
                            B4h – Bit[14]              Bit[6] : RX Polarity Inversion Disable
                            B0h (Port 1)      Decode VGA for Port 1
                            B0h – Bit[31]       Bit[7]
               94h          B4h (Port 2)      PM Control Parameter for Port 2
                            B4h – Bit[9:8]             Bit[1:0] : D3 enters L1
                            B4h – Bit[11:10]           Bit[3:2] : L1 delay count select
                            B4h – Bit[13:12]           Bit[5:4] : L0s enable
                            B4h (Port 2)      Rx Polarity Inversion Disable for port 2
                            B4h – Bit[14]              Bit[6] : RX Polarity Inversion Disable
                            B0h (Port 2)      Decode VGA for Port 2
                            B0h – Bit[31]       Bit[7]
               98h          80h (Func 0)      Power Management Capability for Func 0
                            80h – Bit[15:8]            Bit[7:0]: Next Item Pointer
                            80h – Bit[21]              Bit[8]: Device Specific Initialization
                            80h – Bit[24:22]           Bit[11:9]: AUX Current
                            80h – Bit[25]              Bit[12]: D1 Power State Support
                            80h – Bit[26]              Bit[13]: D2 Power State Support
               9Ah          80h (Func 1)      Power Management Capability for Func 1
                            80h – Bit[15:8]            Bit[7:0]: Next Item Pointer
                            80h – Bit[21]              Bit[8]: Device Specific Initialization
                            80h – Bit[24:22]           Bit[11:9]: AUX Current
                            80h – Bit[25]              Bit[12]: D1 Power State Support
                            80h – Bit[26]              Bit[13]: D2 Power State Support
               9Ch          80h (Func 2)      Power Management Capability for Func 2
                            80h – Bit[15:8]            Bit[7:0]: Next Item Pointer
                            80h – Bit[21]              Bit[8]: Device Specific Initialization
                            80h – Bit[24:22]           Bit[11:9]: AUX Current
                            80h – Bit[25]              Bit[12]: D1 Power State Support
                            80h – Bit[26]              Bit[13]: D2 Power State Support
PI7C9X440SL                                     Page 38 of 102                                               January 2018
Document Number DS40394 Rev 3-2                 www.diodes.com                                           © Diodes Incorporated


                                                                                                           PI7C9X440SL
            ADDRESS         PCI CFG OFFSET    DESCRIPTION
               9Eh          ACh (Func 0~2)    USB Physical Layer Control Register (USB Port 4), Bit[15:0]
                            ACh – Bit[15 :0]            Bit[15:0]: USB Physical Layer Control Register (USB
                                                         Port 4), Bit[15:0]
               A0h          B0h (Port 0)      Replay Time-out Counter for Port 0
                            B0h – Bit[12 :0]            Bit[12:0]: Replay Time-out Counter
               A2h          B0h (Port 1)      Replay Time-out Counter for Port 1
                            B0h – Bit[12 :0]            Bit[12:0]: Replay Time-out Counter
               A4h          B0h (Port 2)      Replay Time-out Counter for Port 2
                            B0h – Bit[12 :0]            Bit[12:0]: Replay Time-out Counter
               A8h          80h (Func 0)      Power Management Capability for Func 0
                            80h – Bit[31 :27]           Bit[4:0]: PME# Support
                            84h (Func 0)      Power Management Data for Func 0
                            84h – Bit[3]                Bit[5]: No_Soft_Reset
                            8Ch (Func 0)      Next Item Pointer for Func 0
                            8Ch – Bit[15 :8]  Bit[15:8]: Next Item Pointer
               AAh          80h (Func 1)      Power Management Capability for Func 1
                            80h – Bit[31 :27]           Bit[4:0]: PME# Support
                            84h (Func 1)      Power Management Data for Func 1
                            84h – Bit[3]                Bit[5]: No_Soft_Reset
                            8Ch (Func 1)      Next Item Pointer for Func 1
                            8Ch – Bit[15 :8]  Bit[15:8]: Next Item Pointer
               ACh          80h (Func 2)      Power Management Capability for Func 2
                            80h – Bit[31 :27]           Bit[4:0]: PME# Support
                            84h (Func 2)      Power Management Data for Func 2
                            84h – Bit[3]                Bit[5]: No_Soft_Reset
                            8Ch (Func 2)      Next Item Pointer for Func 2
                            8Ch – Bit[15 :8]  Bit[15:8]: Next Item Pointer
               AEh          E8h (Func 2)      PCI Express Capability for Func 2
                            E8h – Bit[0]                Bit[0]: Correctable Error Reporting Enable
                            E8h – Bit[1]                Bit[1]: Non-Fatal Error Reporting Enable
                            E8h – Bit[2]                Bit[2]: Fatal Error Reporting Enable
                            E8h – Bit[3]                Bit[3]: Unsupported Request Reporting Enable
                            E8h – Bit[7 :5]             Bit[7:5]: Max_Payload_Size
                            E8h – Bit[10]               Bit[10]: Auxiliary (AUX) Power PM Enable
               B0h          B0h (Port 0)      Acknowledge Latency Timer for Port 0
                            B0h – Bit[30 :16]           Bit[14:0]: Acknowledge Latency Timer
               B2h          B0h (Port 1)      Acknowledge Latency Timer for Port 1
                            B0h – Bit[30 :16]           Bit[14:0]: Acknowledge Latency Timer
               B4h          B0h (Port 2)      Acknowledge Latency Timer for Port 2
                            B0h – Bit[30 :16]           Bit[14:0]: Acknowledge Latency Timer
               B8h          E0h (Func 0)      PCI Express Capability for Func 0
                            E0h – Bit[7 :0]             Bit[7:0]: Enhanced Capabilities ID
                            E0h – Bit[15 :8]            Bit[15:8]: Next Item Pointer
               BAh          E0h (Func 1)      PCI Express Capability for Func 1
                            E0h – Bit[7 :0]             Bit[7:0]: Enhanced Capabilities ID
                            E0h – Bit[15 :8]            Bit[15:8]: Next Item Pointer
               BCh          E0h (Func 2)      PCI Express Capability for Func 2
                            E0h – Bit[7 :0]             Bit[7:0]: Enhanced Capabilities ID
                            E0h – Bit[15 :8]            Bit[15:8]: Next Item Pointer
               C0h          C0h – Bit[6 :0]   Physical Layer Control 3 for Port 0
                                                        Bit [6:0]: Lane Mode
               C8h          E0h (Func 0)      PCI Express Capability for Func 0
                            E0h – Bit[19 :16]           Bit[3:0]: Capability Version
                            E0h – Bit[23 :20]           Bit[7:4]: Device/Port Type
               CAh          E0h (Func 1)      PCI Express Capability for Func 1
                            E0h – Bit[19 :16]           Bit[3:0]: Capability Version
                            E0h – Bit[23 :20]           Bit[7:4]: Device/Port Type
               CCh          E0h (Func 2)      PCI Express Capability for Func 2
                            E0h – Bit[19 :16]           Bit[3:0]: Capability Version
                            E0h – Bit[23 :20]           Bit[7:4]: Device/Port Type
PI7C9X440SL                                      Page 39 of 102                                               January 2018
Document Number DS40394 Rev 3-2                 www.diodes.com                                            © Diodes Incorporated


                                                                                                              PI7C9X440SL
             ADDRESS          PCI CFG OFFSET       DESCRIPTION
                CEh           A0h (Func 0~2)       USB Physical Control Register (USB Port 1), Bit[23:16]
                              A0h – Bit[23 :16]            Bit[7:0]: USB Physical Control Register (USB Port 1),
                                                            Bit[23:16]
                              A4h (Func 0~2)       USB Physical Control Register (USB Port 2), Bit[23:16]
                              A4h – Bit[23 :16]            Bit[15:8]: USB Physical Control Register (USB Port 1),
                                                            Bit[23:16]
                D8h           E4h (Func 0)         Device Capability 0 for Func 0
                              E4h – Bit[2 :0]              Bit[2:0]: Max_Payload_Size Supported
                              E4h – Bit[8 :6]              Bit[8:6]: Endpoint Los Acceptable Latency
                              E4h – Bit[11 :9]             Bit[11:9]: Endpoint L1 Acceptable Latency
                              E4h – Bit[15]                Bit[15]: Role_Base Error Reporting
                DAh           E4h (Func 1)         Device Capability 0 for Func 1
                              E4h – Bit[2 :0]              Bit[2:0]: Max_Payload_Size Supported
                              E4h – Bit[8 :6]              Bit[8:6]: Endpoint Los Acceptable Latency
                              E4h – Bit[11 :9]             Bit[11:9]: Endpoint L1 Acceptable Latency
                              E4h – Bit[15]                Bit[15]: Role_Base Error Reporting
                DCh           E4h (Func 2)         Device Capability 0 for Func 2
                              E4h – Bit[2 :0]              Bit[2:0]: Max_Payload_Size Supported
                              E4h – Bit[8 :6]              Bit[8:6]: Endpoint Los Acceptable Latency
                              E4h – Bit[11 :9]             Bit[11:9]: Endpoint L1 Acceptable Latency
                              E4h – Bit[15]                Bit[15]: Role_Base Error Reporting
                DEh           A8h (Func 0~2)       USB Physical Control Register (USB Port 3), Bit[23:16]
                              A8h – Bit[23 :16]            Bit[7:0]: USB Physical Control Register (USB Port 1),
                                                            Bit[23:16]
                              ACh (Func 0~2)       USB Physical Control Register (USB Port 4), Bit[23:16]
                              ACh – Bit[23 :16]            Bit[15:8]: USB Physical Control Register (USB Port 1),
                                                            Bit[23:16]
                E8h           E4h (Func 0)         PCI Express Capability 1 for Func 0
                              E4h – Bit[25 :18]            Bit[9:2]: Captured Slot Power Limit Value
                              E4h – Bit[27 :26]            Bit[11:10]: Captured Slot Power Limit Scale
                EAh           E4h (Func 1)         PCI Express Capability 1 for Func 1
                              E4h – Bit[25 :18]            Bit[9:2]: Captured Slot Power Limit Value
                              E4h – Bit[27 :26]            Bit[11:10]: Captured Slot Power Limit Scale
                ECh           E4h (Func 2)         PCI Express Capability 1 for Func 2
                              E4h – Bit[25 :18]            Bit[9:2]: Captured Slot Power Limit Value
                              E4h – Bit[27 :26]            Bit[11:10]: Captured Slot Power Limit Scale
6.2      SMBus INTERFACE
The Swidge provides the System Management Bus (SMBus), a two-wire interface through which a simple device
can communicate with the rest of the system. The SMBus interface on the Swidge is a bi-directional slave interface.
It can receive data from the SMBus master or send data to the master. The interface allows full access to the
configuration registers. A SMBus master, such as the processor or other SMBus devices, can read or write to every
RW configuration register (read/write register). In addition, the RO and HwInt registers (read-only and hardware
initialized registers) that can be auto-loaded by the EEPROM interface can also be read and written by the SMBus
interface. This feature allows increases in the system expandability and flexibility in system implementation.
PI7C9X440SL                                          Page 40 of 102                                              January 2018
Document Number DS40394 Rev 3-2                      www.diodes.com                                         © Diodes Incorporated


                                                                                                PI7C9X440SL
                                                          Processor             Other SMBus
                      Pericom PCIe                    (SMBus Master)               Devices
                          Swidge
                                   SMBCLK
                                  SMBDATA
                             Figure 6-1 SMBus Architecture Implementation on PI7C9X440SL
The SMBus interface on the Swidge consists of one SMBus clock pin (SMBCLK), a SMBus data pin (SMBDATA),
and 3 SMBus address pins (GPIO[5:7]). The SMBus clock pin provides or receives the clock signal. The SMBus
data pin facilitates the data transmission and reception. Both of the clock and data pins are bi-directional. The
SMBus address pins determine the address to which the Swidge responds to. The SMBus address pins generate
addresses according to the following table:
                                       Table 6-1 SMBus Address Pin Configuration
            BIT      SMBus Address
              0      GPIO[5]
              1      GPIO[6]
              2      GPIO[7]
              3      1
              4      0
              5      1
              6      1
PI7C9X440SL                                       Page 41 of 102                                   January 2018
Document Number DS40394 Rev 3-2                   www.diodes.com                               © Diodes Incorporated


                                                                                                                        PI7C9X440SL
7 REGISTER DESCRIPTION
7.1          REGISTER TYPES
               REGISTER TYPE                        DEFINITION
               HwInt                                Hardware Initialization
               RO                                   Read Only
               RW                                   Read / Write
               RWC                                  Read / Write 1 to Clear
               RWCS                                 Sticky - Read Only / Write 1 to Clear
               RWS                                  Sticky - Read / Write
               ROS                                  Sticky – Read Only
7.2          PCI EXPRESS CONFIGURATION REGISTERS
             When the PCI Express port of the Swidge is set to operate at the transparent mode, it is represented by
             a logical PCI-to-PCI bridge that implements type 1 configuration space header. The following table
             details the allocation of the register fields of the PCI 2.3 compatible type 1 configuration space header.
                      31 –24                    23 – 16                      15 - 8                      7 –0              BYTE OFFSET
                                  Device ID                                              Vendor ID                                   00h
                               Primary Status                                            Command                                     04h
                                               Class Code                                             Revision ID                    08h
                     Reserved                 Header Type           Primary Latency Timer           Cache Line Size                  0Ch
                                                              Reserved                                                            10h – 17h
                 Secondary Latency          Subordinate Bus         Secondary Bus Number         Primary Bus Number                  18h
                       Timer                    Number
                              Secondary Status                         I/O Limit Address           I/O Base Address                  1Ch
                            Memory Limit Address                                   Memory Base Address                               20h
                     Prefetchable Memory Limit Address                      Prefetchable Memory Base Address                         24h
                                         Prefetchable Memory Base Address Upper 32-bit                                               28h
                                         Prefetchable Memory Limit Address Upper 32-bit                                              2Ch
                       I/O Limit Address Upper 16-bit                          I/O Base Address Upper 16-bit                         30h
                                                Reserved                                         Capability Pointer to               34h
                                                                                                           80h
                                                              Reserved                                                               38h
                               Bridge Control                             Interrupt Pin              Interrupt Line                  3Ch
                                                              Reserved                                                           40h – 7Fh
                       Power Management Capabilities                 Next Item Pointer=8C          Capability ID=01                  80h
                      PM Data                 PPB Support                         Power Management Data                              84h
                                               Extensions
                              Message Control                        Next Item Pointer=9C          Capability ID=05                  8Ch
                                                          Message Address                                                            90h
                                                      Message Upper Address                                                          94h
                                  Reserved                                              Message Data                                 98h
                                VPD Register                         Next Item Pointer=A4          Capability ID=03                  9Ch
                                                         VPD Data Register                                                           A0h
                            Length in Bytes (14h)                    Next Item Pointer=C0          Capability ID=09                  A4h
                                                            XPIP_CSR0                                                                A8h
                                                            XPIP_CSR1                                                               ACh
                             ACK Latency Timer                                    Replay Time-out Counter                            B0h
                           Physical Layer Control 0                                Switch Operation Mode                             B4h
                           Physical Layer Control 1                                 XPIP CSR2 / TL CSR                               B8h
                                                      Physical Layer Control 2                                                      BCh
                                                Reserved                                              Lane Mode                      C0h
                                  Reserved                          Next Item                 SSID/SSVID                             C4h
                                                                    Pointer=E0              Capability ID=0D
                                     SSID                                                 SSVID                                      C8h
                                                              Reserved                                                           C8h – D7h
PI7C9X440SL                                                 Page 42 of 102                                                 January 2018
Document Number DS40394 Rev 3-2                           www.diodes.com                                               © Diodes Incorporated


                                                                                                                          PI7C9X440SL
                       31 –24                     23 – 16                      15 - 8                      7 –0             BYTE OFFSET
                                                        GPIO Data and Control                                                         D8h
                                 EEPROM Data                             EEPROM Address             EEPROM Control                   DCh
                       PCI Express Capabilities Register               Next Item Pointer=00         Capability ID=10                  E0h
                                                          Device Capabilities                                                         E4h
                                  Device Status                                         Device Control                                E8h
                                                           Link Capabilities                                                          ECh
                                   Link Status                                           Link Control                                 F0h
                                                            Slot Capabilities                                                         F4h
                                   Slot Status                                           Slot Control                                 F8h
                                                                Reserved                                                              FCh
             Other than the PCI 2.3 compatible configuration space header, the Swidge also implements PCI
             express extended configuration space header, which includes advanced error reporting, virtual channel,
             and power budgeting capability registers. The following table details the allocation of the register
             fields of PCI express extended capability space header. The first extended capability always begins at
             offset 100h with a PCI Express Enhanced Capability header and the rest of capabilities are located at
             an offset greater than 0FFh relative to the beginning of PCI compatible configuration space.
                      31 –24                     23 – 16                      15 - 8                     7 –0              BYTE OFFSET
                      Next Capability Offset              Cap.          PCI Express Extended Capability ID=0001h                    100h
                                                        Version
                                                 Uncorrectable Error Status Register                                                104h
                                                 Uncorrectable Error Mask Register                                                  108h
                                                Uncorrectable Error Severity Register                                               10Ch
                                                  Correctable Error Status Register                                                 110h
                                                   Correctable Error Mask Register                                                  114h
                                          Advanced Error Capabilities and Control Register                                          118h
                                                         Header Log Register                                                    11Ch – 128h
                                                               Reserved                                                         12Ch – 13Fh
                  Next Capability Offset=20Ch             Cap.          PCI Express Extended Capability ID=0002h                    140h
                                                        Version
                                                    Port VC Capability Register 1                                                   144h
                VC Arbitration Table                             Port VC Capability Register 2                                      148h
                      Offset=3
                             Port VC Status Register                              Port VC Control Register                          14Ch
                Port Arbitration Table                        VC Resource Capability Register (0)                                   150h
                      Offset=4
                                                  VC Resource Control Register (0)                                                  154h
                        VC Resource Status Register (0)                                  Reserved                                   158h
                                                               Reserved                                                          15Ch-17Ch
                                           Port Arbitration Table with 128 Phases for VC0                                       180h – 1BCh
                                                               Reserved                                                         1C0h – 1FCh
                                                               Reserved                                                         200h – 20Bh
                  Next Capability Offset=000h             Cap.          PCI Express Extended Capability ID=0004h                    20Ch
                                                        Version
                                                 Reserved                                       Data Select Register                210h
                                                            Data Register                                                           214h
                                                 Reserved                                           Power Budget                    218h
                                                                                                 Capability Register
7.2.1        VENDOR ID REGISTER – OFFSET 00h
               BIT           FUNCTION                TYPE        DESCRIPTION
               15:0          Vendor ID                  RO       Identifies Pericom as the vendor of this device. The default value may be
                                                                 changed by SMBus or auto-loading from EEPROM.
                                                                 Reset to 12D8h.
PI7C9X440SL                                                  Page 43 of 102                                                 January 2018
Document Number DS40394 Rev 3-2                             www.diodes.com                                              © Diodes Incorporated


                                                                                                                   PI7C9X440SL
7.2.2        DEVICE ID REGISTER – OFFSET 00h
               BIT        FUNCTION             TYPE   DESCRIPTION
               31:16      Device ID             RO    Identifies this device as the PI7C9X440. The default value may be changed
                                                      by SMBus or auto-loading from EEPROM.
                                                      Resets to 400Ch.
7.2.3        COMMAND REGISTER – OFFSET 04h
               BIT        FUNCTION             TYPE   DESCRIPTION
                                                      0b: Ignores I/O transactions on the primary interface
                                                      1b: Enables responses to I/O transactions on the primary interface
               0          I/O Space Enable      RW
                                                      Resets to 0b.
                                                      0b: Ignores memory transactions on the primary interface
                          Memory Space                1b: Enables responses to memory transactions on the primary interface
               1                                RW
                          Enable
                                                      Reset to 0b.
                                                      0b: Does not initiate memory or I/O transactions on the upstream port and
                                                          handles as an Unsupported Request (UR) to memory and I/O transactions
                                                          on the downstream port. For Non-Posted Requests, a completion with UR
                                                          completion status must be returned
               2          Bus Master Enable     RW
                                                      1b: Enables the Swidge Port to forward memory and I/O Read/Write
                                                          transactions in the upstream direction
                                                      Reset to 0b.
               3          Special Cycle Enable  RO    Does not apply to PCI Express. Must be hardwired to 0b.
                          Memory Write And            Does not apply to PCI Express. Must be hardwired to 0b.
               4                                RO
                          Invalidate Enable
                          VGA Palette Snoop           Does not apply to PCI Express. Must be hardwired to 0b.
               5                                RO
                          Enable
                                                      0b: Swidge may ignore any parity errors that it detects and continue normal
                                                         operation
                          Parity Error
               6                                RW    1b: Swidge must take its normal action when a parity error is detected
                          Response Enable
                                                      Reset to 0b.
               7          Wait Cycle Control    RO    Does not apply to PCI Express. Must be hardwired to 0.
                                                      0b: Disables the reporting of Non-fatal and Fatal errors detected by the
                                                          Swidge to the Root Complex
               8          SERR# enable          RW    b1: Enables the Non-fatal and Fatal error reporting to Root Complex
                                                      Reset to 0b.
                          Fast Back-to-Back           Does not apply to PCI Express. Must be hardwired to 0b.
               9                                RO
                          Enable
                                                      Controls the ability of a PCI Express device to generate INTx Interrupt
                                                      Messages. In the Swidge, this bit does not affect the forwarding of INTx
               10         Interrupt Disable     RW    messages from the downstream ports.
                                                      Reset to 0b.
               15:11      Reserved              RO    Reset to 0b.
7.2.4        PRIMARY STATUS REGISTER – OFFSET 04h
               BIT        FUNCTION             TYPE   DESCRIPTION
               18:16      Reserved              RO    Reset to 000b.
                                                      Indicates that an INTx Interrupt Message is pending internally to the device.
               19         Interrupt Status      RO    In the Swidge, the forwarding of INTx messages from the downstream device
                                                      of the Swidge port is not reflected in this bit. Must be hardwired to 0b.
                                                      Set to 1 to enable support for the capability list (offset 34h is the pointer to
               20         Capabilities List     RO
                                                      the data structure).
PI7C9X440SL                                         Page 44 of 102                                                    January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                                 © Diodes Incorporated


                                                                                                                   PI7C9X440SL
               BIT        FUNCTION              TYPE   DESCRIPTION
                                                       Reset to 1b.
               21         66MHz Capable           RO   Does not apply to PCI Express. Must be hardwired to 0b.
               22         Reserved                RO   Reset to 0b.
                          Fast Back-to-Back            Does not apply to PCI Express. Must be hardwired to 0b.
               23                                 RO
                          Capable
                                                       Set to 1 (by a requester) whenever a Parity error is detected or forwarded on
                                                       the primary side of the port in a Swidge.
                          Master Data Parity
               24                                RWC
                          Error                        If the Parity Error Response Enable bit is cleared, this bit is never set.
                                                       Reset to 0b.
               26:25      DEVSEL# timing          RO   Does not apply to PCI Express. Must be hardwired to 0b.
                                                       Set to 1 (by a completer) whenever completing a request on the primary side
                          Signaled Target              using the Completer Abort Completion Status.
               27                                 RO
                          Abort
                                                       Reset to 0b.
                                                       Set to 1 (by a requestor) whenever receiving a Completion with Completer
                          Received Target              Abort Completion Status on the primary side.
               28                                 RO
                          Abort
                                                       Reset to 0b.
                                                       Set to 1 (by a requestor) whenever receiving a Completion with Unsupported
                          Received Master              Request Completion Status on primary side.
               29                                 RO
                          Abort
                                                       Reset to 0b.
                                                       Set to 1 when the Swidge sends an ERR_FATAL or ERR_NONFATAL
                          Signaled System              Message, and the SERR Enable bit in the Command register is 1.
               30                                RWC
                          Error
                                                       Reset to 0b.
                                                       Set to 1 whenever the primary side of the port in a Swidge receives a
                                                       Poisoned TLP.
               31         Detected Parity Error  RWC
                                                       Reset to 0b.
7.2.5        REVISION ID REGISTER – OFFSET 08h
               BIT        FUNCTION              TYPE   DESCRIPTION
               7:0        Revision              RO     Indicates revision number of device. Hardwired to 00h.
7.2.6        CLASS CODE REGISTER – OFFSET 08h
               BIT        FUNCTION              TYPE   DESCRIPTION
               15:8       Programming             RO   Read as 00h to indicate no programming interfaces have been defined for
                          Interface                    PCI-to-PCI Bridges.
               23:16      Sub-Class Code          RO   Read as 04h to indicate device is a PCI-to-PCI Bridge.
               31:24      Base Class Code         RO   Read as 06h to indicate device is a Bridge device.
7.2.7        CACHE LINE REGISTER – OFFSET 0Ch
               BIT        FUNCTION              TYPE   DESCRIPTION
                                                       The cache line size register is set by the system firmware and the operating
                                                       system cache line size. This field is implemented by PCI Express devices as a
                                                       RW field for legacy compatibility, but it has no impact on any PCI Express
               7:0        Cache Line Size        RW
                                                       device functionality.
                                                       Reset to 0b.
PI7C9X440SL                                          Page 45 of 102                                                   January 2018
Document Number DS40394 Rev 3-2                      www.diodes.com                                              © Diodes Incorporated


                                                                                                                  PI7C9X440SL
7.2.8        PRIMARY LATENCY TIMER REGISTER – OFFSET 0Ch
               BIT        FUNCTION             TYPE     DESCRIPTION
                          Primary Latency               Does not apply to PCI Express. Must be hardwired to 00h.
               15:8                             RO
                          timer
7.2.9        HEADER TYPE REGISTER – OFFSET 0Ch
               BIT        FUNCTION             TYPE     DESCRIPTION
                                                        Read as 01h to indicate that the register layout conforms to the standard PCI-
               23:16      Header Type           RO
                                                        to-PCI Bridge layout.
7.2.10       PRIMARY BUS NUMBER REGISTER – OFFSET 18h
               BIT        FUNCTION             TYPE     DESCRIPTION
                                                        Indicates the number of the PCI bus to which the primary interface is
                                                        connected. The value is set in software during configuration.
               7:0        Primary Bus Number    RW
                                                        Reset to 00h.
7.2.11       SECONDARY BUS NUMBER REGISTER – OFFSET 18h
               BIT        FUNCTION             TYPE     DESCRIPTION
                                                        Indicates the number of the PCI bus to which the secondary interface is
                          Secondary Bus                 connected. The value is set in software during configuration.
               15:8                             RW
                          Number
                                                        Reset to 00h.
7.2.12       SUBORDINATE BUS NUMBER REGISTER – OFFSET 18h
               BIT       FUNCTION            TYPE    DESCRIPTION
                                                     Indicates the number of the PCI bus with the highest number that is subordinate
                         Subordinate Bus             to the Bridge. The value is set in software during configuration.
               23:16                          RW
                         Number
                                                     Reset to 00h.
7.2.13       SECONDARY LATENCY TIMER REGISTER – OFFSET 18h
               BIT        FUNCTION             TYPE     DESCRIPTION
                          Secondary Latency             Does not apply to PCI Express. Must be hardwired to 00h.
               31:24                            RO
                          Timer
7.2.14       I/O BASE ADDRESS REGISTER – OFFSET 1Ch
               BIT        FUNCTION             TYPE     DESCRIPTION
               3:0        32-bit Indicator      RO      Read as 01h to indicate 32-bit I/O addressing.
                                                        Defines the bottom address of the I/O address range for the Bridge to
                                                        determine when to forward I/O transactions from one interface to the other.
                          I/O Base Address
               7:4                              RW      The upper 4 bits correspond to address bits [15:12] and are writable. The
                          [15:12]
                                                        lower 12 bits corresponding to address bits [11:0] are assumed to be 0. The
                                                        upper 16 bits corresponding to address bits [31:16] are defined in the I/O base
PI7C9X440SL                                         Page 46 of 102                                                  January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                               © Diodes Incorporated


                                                                                                                   PI7C9X440SL
               BIT        FUNCTION              TYPE   DESCRIPTION
                                                       address upper 16 bits address register.
                                                       Reset to 0h.
7.2.15       I/O LIMIT ADDRESS REGISTER – OFFSET 1Ch
               BIT        FUNCTION              TYPE   DESCRIPTION
               11:8       32-bit Indicator       RO    Read as 01h to indicate 32-bit I/O addressing.
                                                       Defines the top address of the I/O address range for the Bridge to determine
                                                       when to forward I/O transactions from one interface to the other. The upper 4
                                                       bits correspond to address bits [15:12] and are writable. The lower 12 bits
                          I/O Limit Address            corresponding to address bits [11:0] are assumed to be FFFh. The upper 16
               15:12                             RW
                          [15:12]                      bits corresponding to address bits [31:16] are defined in the I/O limit address
                                                       upper 16 bits address register.
                                                       Reset to 0h.
7.2.16       SECONDARY STATUS REGISTER – OFFSET 1Ch
               BIT        FUNCTION              TYPE   DESCRIPTION
               20:16      Reserved               RO    Reset to 00000b.
               21         66MHz Capable          RO    Does not apply to PCI Express. Must be hardwired to 0b.
               22         Reserved               RO    Reset to 0b.
                          Fast Back-to-Back            Does not apply to PCI Express. Must be hardwired to 0b.
               23                                RO
                          Capable
                                                       Set to 1 (by a requester) whenever a Parity error is detected or forwarded on
                                                       the secondary side of the port in a Swidge.
                          Master Data Parity
               24                               RWC
                          Error                        If the Parity Error Response Enable bit is cleared, this bit is never set.
                                                       Reset to 0b.
               26:25      DEVSEL_L timing        RO    Does not apply to PCI Express. Must be hardwired to 0b.
                                                       Set to 1 (by a completer) whenever completing a request in the secondary side
                          Signaled Target              using Completer Abort Completion Status.
               27                                RO
                          Abort
                                                       Reset to 0b.
                                                       Set to 1 (by a requestor) whenever receiving a Completion with Completer
                          Received Target              Abort Completion Status in the secondary side.
               28                                RO
                          Abort
                                                       Reset to 0b.
                                                       Set to 1 (by a requestor) whenever receiving a Completion with Unsupported
                          Received Master              Request Completion Status in secondary side.
               29                                RO
                          Abort
                                                       Reset to 0b.
                                                       Set to 1 when the Swidge sends an ERR_FATAL or ERR_NONFATAL
                          Received System              Message, and the SERR Enable bit in the Bridge Control register is 1.
               30                               RWC
                          Error
                                                       Reset to 0b.
                                                       Set to 1 whenever the secondary side of the port in a Swidge receives a
                                                       Poisoned TLP.
               31         Detected Parity Error RWC
                                                       Reset to 0b.
7.2.17       MEMORY BASE ADDRESS REGISTER – OFFSET 20h
               BIT        FUNCTION              TYPE   DESCRIPTION
               3:0        Reserved               RO    Reset to 0h.
                          Memory Base                  Defines the bottom address of an address range for the Bridge to determine
               15:4                              RW
                          Address [15:4]               when to forward memory transactions from one interface to the other. The
PI7C9X440SL                                          Page 47 of 102                                                   January 2018
Document Number DS40394 Rev 3-2                     www.diodes.com                                               © Diodes Incorporated


                                                                                                                PI7C9X440SL
               BIT        FUNCTION             TYPE   DESCRIPTION
                                                      upper 12 bits correspond to address bits [31:20] and are able to be written to.
                                                      The lower 20 bits corresponding to address bits [19:0] are assumed to be 0.
                                                      Reset to 000h.
7.2.18       MEMORY LIMIT ADDRESS REGISTER – OFFSET 20h
               BIT        FUNCTION             TYPE   DESCRIPTION
               19:16      Reserved              RO    Reset to 0h.
                                                      Defines the top address of an address range for the Bridge to determine when
                                                      to forward memory transactions from one interface to the other. The upper
                          Memory Limit                12 bits correspond to address bits [31:20] and are writable. The lower 20 bits
               31:20                            RW
                          Address [31:20]             corresponding to address bits [19:0] are assumed to be FFFFFh.
                                                      Reset to 000h.
7.2.19       PREFETCHABLE MEMORY BASE ADDRESS REGISTER – OFFSET 24h
               BIT        FUNCTION             TYPE   DESCRIPTION
               3:0        64-bit addressing     RO    Read as 0001b to indicate 64-bit addressing.
                                                      Defines the bottom address of an address range for the Bridge to determine
                                                      when to forward memory read and write transactions from one interface to the
                                                      other. The upper 12 bits correspond to address bits [31:20] and are writable.
                          Prefetchable Memory
               15:4                             RW    The lower 20 bits are assumed to be 0. The memory base register upper 32
                          Base Address [31:20]
                                                      bits contain the upper half of the base address.
                                                      Reset to 000h.
7.2.20       PREFETCHABLE MEMORY LIMIT ADDRESS REGISTER – OFFSET 24h
               BIT        FUNCTION             TYPE   DESCRIPTION
               19:16      64-bit addressing     RO    Read as 0001b to indicate 64-bit addressing.
                                                      Defines the top address of an address range for the Bridge to determine when
                                                      to forward memory read and write transactions from one interface to the
                          Prefetchable Memory         other. The upper 12 bits correspond to address bits [31:20] and are writable.
               31:20      Limit Address         RW    The lower 20 bits are assumed to be FFFFFh. The memory limit upper 32 bits
                          [31:20]                     register contains the upper half of the limit address.
                                                      Reset to 000h.
7.2.21       PREFETCHABLE MEMORY BASE ADDRESS UPPER 32-BITS
             REGISTER – OFFSET 28h
               BIT        FUNCTION             TYPE   DESCRIPTION
                                                      Defines the upper 32-bits of a 64-bit bottom address of an address range for
                          Prefetchable Memory         the Bridge to determine when to forward memory read and write transactions
               31:0       Base Address, Upper   RW    from one interface to the other.
                          32-bits [63:32]
                                                      Reset to 00000000h.
PI7C9X440SL                                         Page 48 of 102                                                January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                             © Diodes Incorporated


                                                                                                               PI7C9X440SL
7.2.22       PREFETCHABLE MEMORY LIMIT ADDRESS UPPER 32-BITS
             REGISTER – OFFSET 2Ch
               BIT        FUNCTION            TYPE   DESCRIPTION
                                                     Defines the upper 32-bits of a 64-bit top address of an address range for the
                          Prefetchable Memory
                                                     Bridge to determine when to forward memory read and write transactions
                          Limit Address,
               31:0                            RW    from one interface to the other.
                          Upper 32-bits
                          [63:32]
                                                     Reset to 00000000h.
7.2.23       I/O BASE ADDRESS UPPER 16-BITS REGISTER – OFFSET 30h
               BIT        FUNCTION            TYPE   DESCRIPTION
                                                     Defines the upper 16-bits of a 32-bit bottom address of an address range for
                          I/O Base Address,          the Bridge to determine when to forward I/O transactions from one interface
               15:0       Upper 16-bits        RW    to the other.
                          [31:16]
                                                     Reset to 0000h.
7.2.24       I/O LIMIT ADDRESS UPPER 16-BITS REGISTER – OFFSET 30h
               BIT        FUNCTION            TYPE   DESCRIPTION
                                                     Defines the upper 16-bits of a 32-bit top address of an address range for the
                          I/O Limit Address,         Bridge to determine when to forward I/O transactions from one interface to
               31:16      Upper 16-bits        RW    the other.
                          [31:16]
                                                     Reset to 0000h.
7.2.25       CAPABILITY POINTER REGISTER – OFFSET 34h
               BIT        FUNCTION            TYPE   DESCRIPTION
                                                     Pointer points to the PCI power management registers (80h).
               7:0        Capability Pointer   RO
                                                     Reset to 80h.
7.2.26       INTERRUPT LINE REGISTER – OFFSET 3Ch
               BIT        FUNCTION            TYPE   DESCRIPTION
               7:0        Interrupt Line       RW    Reset to 00h.
7.2.27       INTERRUPT PIN REGISTER – OFFSET 3Ch
               BIT        FUNCTION            TYPE   DESCRIPTION
                                                     The Swidge implements INTA virtual wire interrupt signals to represent hot-
                                                     plug events at downstream ports. The default value on the downstream ports
               15:8       Interrupt Pin        RO    may be changed by SMBus or auto-loading from EEPROM.
                                                     Reset to 00h.
PI7C9X440SL                                        Page 49 of 102                                                 January 2018
Document Number DS40394 Rev 3-2                   www.diodes.com                                              © Diodes Incorporated


                                                                                                                  PI7C9X440SL
7.2.28       BRIDGE CONTROL REGISTER – OFFSET 3Ch
               BIT        FUNCTION            TYPE   DESCRIPTION
                                                     0b: Ignore Poisoned TLPs on the secondary interface
                                                     1b: Enable the Poisoned TLPs reporting and detection on the secondary
                          Parity Error
               16                              RW    interface
                          Response
                                                     Reset to 0b.
                                                     0b: Disables the forwarding of EER_COR, ERR_NONFATAL and
                                                         ERR_FATAL from secondary to primary interface
                                                     1b: Enables the forwarding of EER_COR, ERR_NONFATAL and
               17         S_SERR# enable       RW
                                                         ERR_FATAL from secondary to primary interface
                                                     Reset to 0b.
                                                     0b: Forwards downstream all I/O addresses in the address range defined by
                                                         the I/O Base, I/O Base, and Limit registers
                                                     1b: Forwards upstream all I/O addresses in the address range defined by the
               18         ISA Enable           RW        I/O Base and Limit registers that are in the first 64KB of PCI I/O address
                                                         space (top 768 bytes of each 1KB block)
                                                     Reset to 0b.
                                                     0: Ignores access to the VGA memory or IO address range
                                                     1: Forwards transactions targeted at the VGA memory or IO address range
                                                     VGA memory range starts from 000A 0000h to 000B FFFFh
               19         VGA Enable           RW
                                                     VGA IO addresses are in the first 64KB of IO address space.
                                                     AD [9:0] is in the ranges 3B0 to 3BBh and 3C0h to 3DFh.
                                                     Reset to 0b. Please note that this bit is reserved in Port 2.
                                                     0b: Executes 10-bit address decoding on VGA I/O accesses
                                                     1b: Executes 16-bit address decoding on VGA I/O accesses
               20         VGA 16-bit decode    RW
                                                     Reset to 0b. Please note that this bit is reserved in Port 2.
               21         Master Abort Mode    RO    Does not apply to PCI Express. Must be hardwired to 0b.
                                                     0b: Does not trigger a hot reset on the corresponding PCI Express Port
                                                     1b: Triggers a hot reset on the corresponding PCI Express Port
                                                        At the downstream port, it asserts PORT_RST# to the attached downstream
                                                        device.
               22         Secondary Bus Reset  RW
                                                        At the upstream port, it asserts the PORT_RST# at all the downstream
                                                        ports.
                                                     Reset to 0b.
                          Fast Back-to-Back          Does not apply to PCI Express. Must be hardwired to 0b.
               23                              RO
                          Enable
                          Primary Master             Does not apply to PCI Express. Must be hardwired to 0b.
               24                              RO
                          Timeout
                          Secondary Master           Does not apply to PCI Express. Must be hardwired to 0b.
               25                              RO
                          Timeout
                          Master Timeout             Does not apply to PCI Express. Must be hardwired to 0b.
               26                              RO
                          Status
                          Discard Timer              Does not apply to PCI Express. Must be hardwired to 0b.
               27                              RO
                          SERR# enable
               31:28      Reserved             RO    Reset to 0h.
7.2.29       POWER MANAGEMENT CAPABILITY ID REGISTER – OFFSET 80h
               BIT        FUNCTION            TYPE   DESCRIPTION
                          Enhanced                   Read as 01h to indicate that these are power management enhanced capability
               7:0                             RO
                          Capabilities ID            registers.
PI7C9X440SL                                        Page 50 of 102                                                   January 2018
Document Number DS40394 Rev 3-2                   www.diodes.com                                                © Diodes Incorporated


                                                                                                                   PI7C9X440SL
7.2.30       NEXT ITEM POINTER REGISTER – OFFSET 80h
               BIT        FUNCTION            TYPE      DESCRIPTION
                                                        At upstream ports, the pointer points to the Vital Protocol Data (VPD)
                                                        capability register (9Ch).
                                                        At downstream ports, the pointer points to the Message capability register
               15:8       Next Item Pointer    RO       (8Ch).
                                                        Reset to 9Ch (Upstream port).
                                                        Reset to 8Ch (Downstream port).
7.2.31       POWER MANAGEMENT CAPABILITIES REGISTER – OFFSET 80h
               BIT       FUNCTION           TYPE    DESCRIPTION
                         Power                      Read as 011b to indicate the device is compliant to Revision 1.2 of PCI Power
               18:16     Management          RO     Management Interface Specifications.
                         Revision
               19        PME# Clock          RO     Does not apply to PCI Express. Must be hardwired to 0b.
               20        Reserved            RO     Reset to 0b.
                                                    Read as 0b to indicate Swidge does not have device specific initialization
                         Device Specific
               21                            RO     requirements. The default value may be changed by SMBus or auto-loading from
                         Initialization
                                                    EEPROM.
                                                    Reset as 111b to indicate the Swidge needs 375 mA in D3 state. The default
               24:22     AUX Current         RO
                                                    value may be changed by SMBus or auto-loading from EEPROM.
                         D1 Power State             Read as 1b to indicate Swidge supports the D1 power management state. The
               25                            RO
                         Support                    default value may be changed by SMBus or auto-loading from EEPROM.
                         D2 Power State             Read as 1b to indicate Swidge supports the D2 power management state. The
               26                            RO
                         Support                    default value may be changed by SMBus or auto-loading from EEPROM.
                                                    Read as 11111b to indicate Swidge supports the forwarding of PME# message in
               31:27     PME# Support        RO     all power states. The default value may be changed by SMBus or auto-loading
                                                    from EEPROM.
7.2.32       POWER MANAGEMENT DATA REGISTER – OFFSET 84h
               BIT        FUNCTION            TYPE      DESCRIPTION
                                                        Indicates the current power state of the Swidge. Writing a value of D0 when
                                                        the previous state was D3 cause a hot reset without asserting DWNRST_L.
                                                        00b: D0 state
               1:0        Power State          RW       01b: D1 state
                                                        10b: D2 state
                                                        11b: D3 hot state
                                                        Reset to 00b.
               2          Reserved             RO       Reset to 0b.
                                                        When set, this bit indicates that device transitioning from D3hot to D0 does
                                                        not perform an internal reset. When clear, an internal reset is performed when
                                                        power state transits from D3hot to D0. This bit can be rewritten with
               3          No_Soft_Reset        RO       EEPROM programming. The default value may be changed by SMBus or
                                                        auto-loading from EEPROM.
                                                        Reset to 1b.
               7:4        Reserved             RO       Reset to 0b.
               8          PME# Enable         RWS       When asserted, the Swidge will generate the PME# message. Reset to 0b.
                                                        Select data registers.
               12:9       Data Select          RW
                                                        Reset to 0h.
               14:13      Data Scale           RO       Reset to 00b.
               15         PME status           ROS      Read as 0b as the PME# message is not implemented.
PI7C9X440SL                                        Page 51 of 102                                                     January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                                 © Diodes Incorporated


                                                                                                              PI7C9X440SL
7.2.33       PPB SUPPORT EXTENSIONS – OFFSET 84h
               BIT        FUNCTION          TYPE   DESCRIPTION
               21:16      Reserved           RO    Reset to 000000b.
                          B2_B3 Support for        Does not apply to PCI Express. Must be hardwired to 0b.
               22                            RO
                          D3HOT
                          Bus Power / Clock        Does not apply to PCI Express. Must be hardwired to 0b.
               23                            RO
                          Control Enable
7.2.34       DATA REGISTER – OFFSET 84h
               BIT        FUNCTION          TYPE   DESCRIPTION
                                                   Data Register. The default value may be changed by SMBus or auto-loading
                                                   from EEPROM.
               31:24      Data Register      RO
                                                   Reset to 0b.
7.2.35       MSI CAPABILITY ID REGISTER – OFFSET 8Ch (Downstream Port Only)
               BIT        FUNCTION          TYPE   DESCRIPTION
                          Enhanced                 Read as 05h to indicate that this is message signal interrupt capability
               7:0                           RO
                          Capabilities ID          register.
7.2.36       NEXT ITEM POINTER REGISTER – OFFSET 8Ch (Downstream Port Only)
               BIT        FUNCTION          TYPE   DESCRIPTION
                                                   Pointer points to Vendor specific capability register (A4h).
               15:8       Next Item Pointer  RO
                                                   Reset to A4h.
7.2.37       MESSAGE CONTROL REGISTER – OFFSET 8Ch (Downstream Port Only)
               BIT        FUNCTION          TYPE   DESCRIPTION
                                                   0b: The function is prohibited from using MSI to request service
                                                   1b: The function is permitted to use MSI to request service and is prohibited
               16         MSI Enable         RW        from using its INTx # pin
                                                   Reset to 0b.
                          Multiple Message         Read as 000b.
               19:17                         RO
                          Capable
                          Multiple Message         Reset to 000b.
               22:20                         RW
                          Enable
                                                   0b: The function is not capable of generating a 64-bit message address
                          64-bit address           1b: The function is capable of generating a 64-bit message address
               23                            RO
                          capable
                                                   Reset to 1b.
               31:24      Reserved           RO    Reset to 00h.
7.2.38       MESSAGE ADDRESS REGISTER – OFFSET 90h (Downstream Port Only)
               BIT        FUNCTION          TYPE   DESCRIPTION
               1:0        Reserved          RO     Reset to 00b.
PI7C9X440SL                                      Page 52 of 102                                                 January 2018
Document Number DS40394 Rev 3-2                 www.diodes.com                                              © Diodes Incorporated


                                                                                                                PI7C9X440SL
               BIT        FUNCTION          TYPE   DESCRIPTION
                                                   If the message enable bit is set, the contents of this register specify the
                                                   DWORD aligned address for MSI memory write transaction.
               31:2       Message Address   RW
                                                   Reset to 0.
7.2.39       MESSAGE UPPER ADDRESS REGISTER – OFFSET 94h (Downstream
             Port Only)
               BIT        FUNCTION          TYPE   DESCRIPTION
                                                   This register is only effective if the device supports a 64-bit message address
                          Message Upper            is set.
               31:0                          RW
                          Address
                                                   Reset to 00000000h.
7.2.40       MESSAGE DATA REGISTER – OFFSET 98h (Downstream Port Only)
               BIT        FUNCTION          TYPE   DESCRIPTION
               15:0       Message Data       RW    Reset to 0000h.
7.2.41       VPD CAPABILITY ID REGISTER – OFFSET 9Ch (Upstream Port Only)
               BIT        FUNCTION          TYPE   DESCRIPTION
                                                   Read as 03h to indicate that these are VPD enhanced capability registers.
                          Enhanced
               7:0                           RO
                          Capabilities ID
                                                   Reset to 03h.
7.2.42       NEXT ITEM POINTER REGISTER – OFFSET 9Ch (Upstream Port Only)
               BIT        FUNCTION          TYPE   DESCRIPTION
                                                   Pointer points to the Vendor specific capability register (A4h).
               15:8       Next Item Pointer  RO
                                                   Reset to A4h.
7.2.43       VPD REGISTER – OFFSET 9Ch (Upstream Port Only)
               BIT        FUNCTION          TYPE   DESCRIPTION
               17:16      Reserved           RO    Reset to 00b.
                                                   Contains DWORD address that is used to generate read or write cycle to the
                                                   VPD table stored in EEPROM.
               23:18      VPD Address        RW
                                                   Reset to 000000b.
               30:24      Reserved           RO    Reset to 0000000b.
                                                   0b: Performs VPD read command to VPD table at the location as specified
                                                        in VPD address. This bit is kept ‘0’ and then set to ‘1’ automatically
                                                        after EEPROM cycle is finished
                                                   1b: Performs VPD write command to VPD table at the location as specified
               31         VPD operation      RW
                                                        in VPD address. This bit is kept ‘1’ and then set to ‘0’ automatically
                                                        after EEPROM cycle is finished.
                                                   Reset to 0b.
PI7C9X440SL                                      Page 53 of 102                                                   January 2018
Document Number DS40394 Rev 3-2                 www.diodes.com                                                © Diodes Incorporated


                                                                                                              PI7C9X440SL
7.2.44       VPD DATA REGISTER – OFFSET A0h (Upstream Port Only)
               BIT        FUNCTION           TYPE   DESCRIPTION
                                                    When read, it returns the last data read from VPD table at the location as
                                                    specified in VPD Address.
               31:0       VPD Data            RW
                                                    When written, it places the current data into VPD table at the location as
                                                    specified in VPD Address.
7.2.45       VENDOR SPECIFIC CAPABILITY ID REGISTER – OFFSET A4h
               BIT        FUNCTION           TYPE   DESCRIPTION
                                                    Read as 09h to indicate that these are vendor specific capability registers.
                          Enhanced
               7:0                            RO
                          Capabilities ID
                                                    Reset to 09h.
7.2.46       NEXT ITEM POINTER REGISTER – OFFSET A4h
               BIT        FUNCTION           TYPE   DESCRIPTION
                                                    Pointer points to the SSID/SSVID capability register (C0h).
               15:8       Next Item Pointer   RO
                                                    Reset to C4h.
7.2.47       LENGTH REGISTER – OFFSET A4h
               BIT        FUNCTION           TYPE   DESCRIPTION
                                                    The length field provides the information for number of bytes in the
                                                     capability structure (including the ID and Next pointer bytes).
               31:16      Length Information  RO
                                                    Reset to 000Ch.
7.2.48       XPIP CSR0 – OFFSET A8h (Test Purpose Only)
               BIT        FUNCTION           TYPE   DESCRIPTION
               31:0       Reserved            RW    Reset to 04001060h.
7.2.49       XPIP CSR1 – OFFSET ACh (Test Purpose Only)
               BIT        FUNCTION           TYPE   DESCRIPTION
               31:0       Reserved            RW    Reset to 04000800h.
7.2.50       REPLAY TIME-OUT COUNTER – OFFSET B0h (Upstream Port)
               BIT        FUNCTION           TYPE   DESCRIPTION
                                                    A 12-bit register contains a user-defined value. The default value may be
                                                    changed by SMBus or auto-loading from EEPROM.
               11:0       User Replay Timer   RW
                                                    Reset to 000h.
PI7C9X440SL                                       Page 54 of 102                                                 January 2018
Document Number DS40394 Rev 3-2                  www.diodes.com                                              © Diodes Incorporated


                                                                                                                 PI7C9X440SL
               BIT        FUNCTION             TYPE   DESCRIPTION
                                                      When asserted, the user-defined replay time-out value is be employed. The
                          Enable User Replay          default value may be changed by SMBus or auto-loading from EEPROM.
               12                               RW
                          Timer
                                                      Reset to 0b.
                                                      The default value may be changed by SMBus or auto-loading from
                          Power Management            EEPROM.
               13                               RO
                          Capability Disable
                                                      Reset to 0b.
                                                      The default value may be changed by SMBus or auto-loading from
                          MSI Capability              EEPROM.
               14                               RO
                          Disable
                                                      Reset to 0b.
                                                      The default value may be changed by SMBus or auto-loading from
                          AER Capability              EEPROM.
               15                               RO
                          Disable
                                                      Reset to 0b.
7.2.51       ACKNOWLEDGE LATENCY TIMER – OFFSET B0h
               BIT        FUNCTION             TYPE   DESCRIPTION
                                                      A 14-bit register contains a user-defined value. The default value may be
                          User ACK Latency            changed by SMBus or auto-loading from EEPROM.
               29:16                            RW
                          Timer
                                                      Reset to 0.
                                                      When asserted, the user-defined ACK latency value is be employed. The
                          Enable User ACK             default value may be changed by SMBus or auto-loading from EEPROM.
               30                               RW
                          Latency
                                                      Reset to 0b.
                                                      When asserted, the VGA Capability is enabled. The value may be changed by
                          VGA Capability              auto-loading from EEPROM.
               31                               RO
                          Enable
                                                      Reset to 1b.
7.2.52       SWITCH OPERATION MODE – OFFSET B4h (Upstream Port)
               BIT       FUNCTION                  TYPE     DESCRIPTION
                                                            When set, a store-forward mode is used. Otherwise, the chip is working
                                                            under cut-through mode. The default value may be changed by SMBus
               0         Store-Forward              RW      or auto-loading from EEPROM.
                                                            Reset to 0b.
                                                            Cut-through Threshold. When forwarding a packet from low-speed port
                                                            to high-speed mode, the chip provides the capability to adjust the
                                                            forwarding threshold. The default value may be changed by SMBus or
                                                            auto-loading from EEPROM.
               2:1       Cut-through Threshold      RW      00b: the threshold is set at the middle of forwarding packet
                                                            01b: the threshold is set ahead 1-cycle of middle point
                                                            10b: the threshold is set ahead 2-cycle of middle point.
                                                            11b: the threshold is set ahead 3-cycle of middle point.
                                                            Reset to 01b.
                                                            When set, the round-robin arbitration will stay in the arbitrated port even
                                                            if the credit is not enough but request is pending.
                                                            When clear, the round-robin arbitration will always go to the requesting
                                                            port, which the outgoing credit is enough for the packet queued in the
               3         Port Arbitration Mode      RW      port.
                                                            The default value may be changed by SMBus or auto-loading from
                                                            EEPROM.
                                                            Reset to 0b.
PI7C9X440SL                                         Page 55 of 102                                                  January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                               © Diodes Incorporated


                                                                                                                     PI7C9X440SL
               BIT       FUNCTION                        TYPE    DESCRIPTION
                                                                 When set, the frequency of releasing new credit to the link partner will
                                                                 be one credit per update.
                                                                 When clear, the frequency of releasing new credit to the link partner will
                                                                 be two credits per update.
               4         Credit Update Mode               RW
                                                                 The default value may be changed by SMBus or auto-loading from
                                                                 EEPROM.
                                                                 Reset to 0b.
                                                                 When set, there has ordering rule on packets for different egress port.
                                                                 The default value may be changed by SMBus or auto-loading from
                         Ordering on Different
               5                                          RW     EEPROM.
                         Egress Port Mode
                                                                 Reset to 0b.
                                                                 When set, there has ordering rule between completion packet with
                                                                 different tag. The default value may be changed by SMBus or auto-
                         Ordering on Different Tag of
               6                                          RW     loading from EEPROM.
                         Completion Mode
                                                                 Reset to 0b.
               7         Reserved                         RO     Reset to 0.
                                                                 The default value may be changed by SMBus or auto-loading from
                         Power management Control                EEPROM.
               13:8                                       RW
                         Parameter
                                                                 Reset to 000001b.
                                                                 The default value may be changed by SMBus or auto-loading from
                         RX Polarity Inversion                   EEPROM.
               14                                         RO
                         Disable
                                                                 Reset to 0b.
                                                                 The default value may be changed by SMBus or auto-loading from
                         Compliance Pattern Parity               EEPROM.
               15                                         RO
                         Control Disable
                                                                 Reset to 0b.
7.2.53       PHYSICAL LAYER CONTROL 0 – OFFSET B4h (Upstream Port)
               BIT       FUNCTION                        TYPE    DESCRIPTION
                                                                 Low Driver Current (LODRV). The default value may be changed by
                         Drive Amplitude Level (3P5              SMBus.
               20:16                                      RO
                         Nom)
                                                                 Reset to10111b.
               25:21     Reserved                         RO
                                                                 Reset to 01101b.
               30:26     Reserved                         RO
                                                                 Reset to 01000b.
7.2.54       SWITCH OPERATION MODE – OFFSET B4h (Downstream Port)
               BIT       FUNCTION                     TYPE    DESCRIPTION
               7:0       Reserved                     RO      Reset to 0.
                                                              The default value may be changed by SMBus or auto-loading from
                         Power Management                     EEPROM.
               13:8                                   RW
                         Control Parameter
                                                              Reset to 000001b.
                                                              The default value may be changed by SMBus or auto-loading from
                         RX Polarity Inversion                EEPROM.
               14                                     RW
                         Disable
                                                              Reset to 0b.
                                                              The default value may be changed by SMBus or auto-loading from
                         Compliance Pattern                   EEPROM.
               15                                     RW
                         Parity Control Disable
                                                              Reset to 0b.
PI7C9X440SL                                               Page 56 of 102                                               January 2018
Document Number DS40394 Rev 3-2                          www.diodes.com                                            © Diodes Incorporated


                                                                                                                PI7C9X440SL
7.2.55       PHYSICAL LAYER CONTROL 0 – OFFSET B4h (Downstream Port)
               BIT       FUNCTION                 TYPE    DESCRIPTION
                                                          It indicates the status of the strapping pin LODRV. The default value may
                         Drive Amplitude Level            be changed by SMBus or auto-loading from EEPROM.
               20:16                              RO
                         (3P5 Nom)
                                                          Reset to10111b.
               25:21     Reserved                 RO
                                                          Reset to 01101b.
               30:26     Reserved                 RO
                                                          Reset to 01000b.
7.2.56       XPIP CSR2 / TL CSR – OFFSET B8h (Test Purpose Only)
               BIT       FUNCTION                        TYPE       DESCRIPTION
               7:0       FTS Number                        RO       Reset to 30h.
               9:8       Scramble control                  RO       Reset to 00b.
               10        Both L0s                          RO       Reset to 0b.
               11        Reserved                          RO       Reset to 0b.
               15:12     TL CSR                            RO       Reset to 0100b.
7.2.57       PHYSICAL LAYER CONTROL 1 – OFFSET B8h (Test Purpose Only)
               BIT       FUNCTION                        TYPE       DESCRIPTION
               20:16     Drive De-Emphasis Level           RO       Reset to10010b.
               25:21     Reserved                          RO       Reset to 01110b.
               30:26     Reserved                          RO       Reset to 10101b.
7.2.58       PHYSCIAL LAYER CONTROL 2 – OFFSET BCh
               BIT        FUNCTION               TYPE   DESCRIPTION
                          Transmitter PHY               Reset to 0111b.
               3:0                                RO
                          Latency
                          Receiver Detection            Reset to 010b.
               6:4                                RO
                          Threshold
               7          Reserved                RO    Reset to 0b.
                          CDR Loop                      Reset to 0b.
               8                                  RO
                          Bandwidth Enable
               10:9       CDR Threshold           RO    Reset to 11b.
                          CDR Loop                      Reset to 11b.
               12:11                              RO
                          Bandwidth Gain
               15:13      Reserved                RO    Reset to 0b.
                          Per-Lane Main Drive           Reset to 0b.
               16         Offset Enable           RO
                          (Margining)
                          Per-Lane Main Drive           Reset to 0b.
               17         Offset Enable           RO
                          (Nominal)
                          Per-Lane De-                  Reset to 0b.
                          Emphasis Drive
               18                                 RO
                          Offset Enable
                          (Margining)
                          Per-Lane De-                  Reset to 0b.
                          Emphasis Drive
               19                                 RO
                          Offset Enable
                          (Nominal)
                          Receiver Signal               Reset to 01b.
               21:20                              RO
                          Detection
PI7C9X440SL                                           Page 57 of 102                                               January 2018
Document Number DS40394 Rev 3-2                      www.diodes.com                                            © Diodes Incorporated


                                                                                                             PI7C9X440SL
               BIT        FUNCTION          TYPE   DESCRIPTION
                          Receiver                 Reset to 0011b.
               25:22                         RO
                          Equalization
               29:26      Reserved           RO    Reset to 0110b.
               30         Transmitter Swing  RO    Reset to 0b.
               31         Reserved           RO    Reset to 0b.
7.2.59       PHYSICAL LAYER CONTROL 3 REGISTER – OFFSET C0h
               BIT        FUNCTION          TYPE   DESCRIPTION
               6:0        Lane Mode          RW    Reset to 0
               31:7       Reserved           RO    Reset to 0
7.2.60       SSID/SSVID CAPABILITY ID REGISTER – OFFSET C4h
               BIT        FUNCTION          TYPE   DESCRIPTION
                          SSID/SSVID               Read as 0Dh to indicate that these are SSID/SSVID capability registers.
               7:0                           RO
                          Capabilities ID
7.2.61       NEXT ITEM POINTER REGISTER – OFFSET C4h
               BIT        FUNCTION          TYPE   DESCRIPTION
                                                   Pointer points to the PCI Express capability register (E0h).
               15:8       Next Item Pointer  RO
                                                   Reset to E0h.
7.2.62       SUBSYSTEM VENDOR ID REGISTER – OFFSET C8h
               BIT        FUNCTION          TYPE   DESCRIPTION
               15:0       SSVID              RO    It indicates the sub-system vendor id. The default value may be changed by
                                                   SMBus or auto-loading from EEPROM.
                                                   Reset to 0000h.
7.2.63       SUBSYSTEM ID REGISTER – OFFSET C8h
               BIT        FUNCTION          TYPE   DESCRIPTION
               31:16      SSID               RO    It indicates the sub-system device id. The default value may be changed by
                                                   SMBus or auto-loading from EEPROM.
                                                   Reset to 0000h.
7.2.64       GPIO CONTROL REGISTER – OFFSET D8h (Upstream Port Only)
               BIT        FUNCTION          TYPE   DESCRIPTION
               0          GPIO [0] Input     RO    State of GPIO [0] pin
                                                   0b: GPIO [0] is an input pin
                          GPIO [0] Output          1b: GPIO [0] is an output pin
               1                             RW
                          Enable
                                                   Reset to 0b.
PI7C9X440SL                                      Page 58 of 102                                                 January 2018
Document Number DS40394 Rev 3-2                 www.diodes.com                                              © Diodes Incorporated


                                                                                                           PI7C9X440SL
               BIT        FUNCTION        TYPE   DESCRIPTION
                                                 Value of this bit will be output to GPIO [0] pin if GPIO [0] is configured as
                          GPIO [0] Output        an output pin.
               2                           RW
                          Register
                                                 Reset to 0b.
               3          Reserved         RO    Reset to 0b.
               4          GPIO [1] Input   RO    State of GPIO [1] pin.
                                                 0b: GPIO [1] is an input pin
                          GPIO [1] Output        1b: GPIO [1] is an output pin
               5                           RW
                          Enable
                                                 Reset to 0b.
                                                 Value of this bit will be output to GPIO [1] pin if GPIO [1] is configured as
                          GPIO [1] Output        an output pin.
               6                           RW
                          Register
                                                 Reset to 0b.
               7          Reserved         RO    Reset to 0b.
               8          GPIO [2] Input   RO    State of GPIO [2] pin
                                                 0b: GPIO [2] is an input pin
                          GPIO [2] Output        1b: GPIO [2] is an output pin
               9                           RW
                          Enable
                                                 Reset to 0b.
                                                 Value of this bit will be output to GPIO [2] pin if GPIO [2] is configured as
                          GPIO [2] Output        an output pin.
               10                          RW
                          Register
                                                 Reset to 0b.
               11         Reserved         RO    Reset to 0b.
               12         GPIO [3] Input   RO    State of GPIO [3] pin.
                                                 0b: GPIO [3] is an input pin
                          GPIO [3] Output        1b: GPIO [3] is an output pin
               13                          RW
                          Enable
                                                 Reset to 0b.
                                                 Value of this bit will be output to GPIO [3] pin if GPIO [3] is configured as
                          GPIO [3] Output        an output pin.
               14                          RW
                          Register
                                                 Reset to 0b.
               15         Reserved         RO    Reset to 0b.
               16         GPIO [4] Input   RO    State of GPIO [4] pin.
                                                 0b: GPIO [4] is an input pin
                          GPIO [4] Output        1b: GPIO [4] is an output pin
               17                          RW
                          Enable
                                                 Reset to 0b.
                                                 Value of this bit will be output to GPIO [4] pin if GPIO [4] is configured as
                          GPIO [4] Output        an output pin.
               18                          RW
                          Register
                                                 Reset to 0b.
               19         Reserved         RO    Reset to 0b.
               20         GPIO [5] Input   RO    State of GPIO [5] pin.
                                                 0b: GPIO [5] is an input pin
                          GPIO [5] Output        1b: GPIO [5] is an output pin
               21                          RW
                          Enable
                                                 Reset to 0b.
                                                 Value of this bit will be output to GPIO [5] pin if GPIO [5] is configured as
                          GPIO [5] Output        an output pin.
               22                          RW
                          Register
                                                 Reset to 0b.
               23         Reserved         RO    Reset to 0b.
               24         GPIO [6] Input   RO    State of GPIO [6] pin.
                                                 0b: GPIO [6] is an input pin
                          GPIO [6] Output        1b: GPIO [6] is an output pin
               25                          RW
                          Enable
                                                 Reset to 0b.
                                                 Value of this bit will be output to GPIO [6] pin if GPIO [6] is configured as
                          GPIO [6] Output        an output pin.
               26                          RW
                          Register
                                                 Reset to 0b.
               27         Reserved         RO    Reset to 0b.
               28         GPIO [7] Input   RO    State of GPIO [7] pin.
PI7C9X440SL                                    Page 59 of 102                                                January 2018
Document Number DS40394 Rev 3-2               www.diodes.com                                             © Diodes Incorporated


                                                                                                           PI7C9X440SL
               BIT        FUNCTION        TYPE   DESCRIPTION
                                                 0b: GPIO [7] is an input pin
                          GPIO [7] Output        1b: GPIO [7] is an output pin
               29                          RW
                          Enable
                                                 Reset to 0b.
                                                 Value of this bit will be output to GPIO [7] pin if GPIO [7] is configured as
                          GPIO [7] Output        an output pin.
               30                          RW
                          Register
                                                 Reset to 0b.
               31         Reserved         RO    Reset to 0b.
7.2.65       EEPROM CONTROL REGISTER – OFFSET DCh (Upstream Port Only)
               BIT        FUNCTION        TYPE   DESCRIPTION
                                                 Starts the EEPROM read or write cycle.
               0          EEPROM Start     RW
                                                 Reset to 0b.
                                                 Sends the command to the EEPROM.
                                                 0b: EEPROM read
               1          EEPROM Command   RW
                                                 1b: EEPROM write
                                                 Reset to 0b.
                                                 1b: EEPROM acknowledge was not received during the EEPROM cycle.
                          EEPROM Error
               2                           RO
                          Status
                                                 Reset to 0b.
                                                 0b: EEPROM autoload was unsuccessful or is disabled
                                                 1b: EEPROM autolad occurred successfully after RESET. Configuration
                          EEPROM Autoload
               3                           RO       registers were loaded with values in the EEPROM
                          Success
                                                 It will be cleared when read at this bit.
                                                 0b: EEPROM autoload was unsuccessful or is disabled
                                                 1b: EEPROM autoload occurred successfully after PREST. Configuration
                          EEPROM Autoload
               4                           RO    registers were loaded with values stored in the EEPROM
                          Status
                                                 Reset to 0b.
                                                 0b: EEPROM autoload enabled
                          EEPROM Autoload        1b: EEPROM autoload disabled
               5                           RW
                          Disable
                                                 Reset to 1b.
                                                 Determines the frequency of the EEPROM clock, which is derived from the
                                                 primary clock.
                                                 00b: Reserved
                          EEPROM Clock
               7:6                         RW    01b: PEXCLK / 1024 (PEXCLK is 125MHz)
                          Rate
                                                 10b: Reserved
                                                 11b: Test Mode
                                                 Reset to 01b.
7.2.66       EEPROM ADDRESS REGISTER – OFFSET DCh (Upstream Port Only)
               BIT        FUNCTION        TYPE   DESCRIPTION
               8          Reserved         RO    Reset to 0b.
                                                 Contains the EEPROM address.
               15:9       EEPROM Address   RW
                                                 Reset to 0b.
PI7C9X440SL                                    Page 60 of 102                                                January 2018
Document Number DS40394 Rev 3-2               www.diodes.com                                             © Diodes Incorporated


                                                                                                                 PI7C9X440SL
7.2.67       EEPROM DATA REGISTER – OFFSET DCh (Upstream Port Only)
               BIT        FUNCTION           TYPE    DESCRIPTION
                                                     Contains the data to be written to the EEPROM. After completion of a read
                                                     cycle, this register will contain the data from the EEPROM.
               31:16      EEPROM Data         RW
                                                     Reset to 0000h.
7.2.68       PCI EXPRESS CAPABILITY ID REGISTER – OFFSET E0h
               BIT        FUNCTION           TYPE    DESCRIPTION
                          Enhanced                   Read as 10h to indicate that these are PCI express enhanced capability
               7:0                            RO
                          Capabilities ID            registers.
7.2.69       NEXT ITEM POINTER REGISTER – OFFSET E0h
               BIT        FUNCTION           TYPE    DESCRIPTION
               15:8       Next Item Pointer   RO     Read as 00h. No other ECP registers.
7.2.70       PCI EXPRESS CAPABILITIES REGISTER – OFFSET E0h
               BIT        FUNCTION           TYPE    DESCRIPTION
                                                     Read as 0001b to indicate the device is compliant to the PCI Express Base
               19:16      Capability Version  RO
                                                     Specifications.
                                                     Indicates the type of PCI Express logical device.
               23:20      Device/Port Type    RO
                                                     Reset to 0101b (Upstream port).
                                                     Reset to 0110b (Downstream port).
                                                     When set, indicates that the PCIe Link associated with this Port is connected
                                                     to a slot. This field is valid for downstream port of the Swidge. The default
               24         Slot Implemented   HwInt
                                                     value may be changed by the status of strapped pin, SMBUs, or auto-loading
                                                     from EEPROM.
                          Interrupt Message          Read as 0b. No MSI messages are generated in the transparent mode.
               29:25                          RO
                          Number
               31:30      Reserved            RO     Reset to 00b.
7.2.71       DEVICE CAPABILITIES REGISTER – OFFSET E4h
               BIT        FUNCTION           TYPE     DESCRIPTION
                                                      Indicates the maximum payload size that the device can support for TLPs.
                                                      Each port of the Swidge supports 256 bytes max payload size. The default
                          Max_Payload_Size
               2:0                            RO      value may be changed by SMBus or auto-loading from EEPROM.
                          Supported
                                                      Reset to 001b.
                                                      Indicates the support for use of unclaimed function numbers as Phantom
                          Phantom Functions           functions. Read as 00b, since the Swidge does not act as a requester.
               4:3                            RO
                          Supported
                                                      Reset to 00b.
                                                      Indicates the maximum supported size of Tag field as a Requester. Read as 0,
                          Extended Tag Field          since the Swidge does not act as a requester.
               5                              RO
                          Supported
                                                      Reset to 0b.
PI7C9X440SL                                        Page 61 of 102                                                   January 2018
Document Number DS40394 Rev 3-2                  www.diodes.com                                                 © Diodes Incorporated


                                                                                                                   PI7C9X440SL
               BIT        FUNCTION              TYPE    DESCRIPTION
                                                        Acceptable total latency that an Endpoint can withstand due to the transition
                                                        from L0s state to the L0 state. For Swidge, the ASPM software would not
                          Endpoint L0s
               8:6                               RO     check this value.
                          Acceptable Latency
                                                        Reset to 000b.
                                                        Acceptable total latency that an Endpoint can withstand due to the transition
                                                        from L1 state to the L0 state. For Swidge, the ASPM software would not
                          Endpoint L1
               11:9                              RO     check this value.
                          Acceptable Latency
                                                        Reset to 000b.
               14:12      Reserved               RO     Reset to 000b.
                                                        When set, indicates that the device implements the functionality originally
                                                        defined in the Error Reporting ECN. The default value may be changed by
                          Role_Based Error
               15                                RO     SMBus or auto-loading from EEPROM.
                          Reporting
                                                        Reset to 1b.
               17:16      Reserved               RO     Reset to 00b.
                                                        It applies to Upstream Port only. In combination with the Slot Power Limit
                                                        Scale value, specifies the upper limit on power supplied by slot.
                          Captured Slot Power
               25:18                             RO
                          Limit Value                   This value is set by the Set_Slot_Power_Limit message or hardwired to 00h.
                                                        Reset to 00h.
                                                        It applies to Upstream Port only. Specifies the scale used for the Slot Power
                                                        Limit Value.
                          Captured Slot Power
               27:26                             RO
                          Limit Scale                   This value is set by the Set_Slot_Power_Limit message or hardwired to 00b.
                                                        Reset to 00b.
               31:28      Reserved               RO     Reset to 0h.
7.2.72       DEVICE CONTROL REGISTER – OFFSET E8h
               BIT        FUNCTION              TYPE    DESCRIPTION
                                                        0b: Disable Correctable Error Reporting
                          Correctable Error             1b: Enable Correctable Error Reporting
               0                                 RW
                          Reporting Enable
                                                        Reset to 0b.
                                                        0b: Disable Non-Fatal Error Reporting
                          Non-Fatal Error               1b: Enable Non-Fatal Error Reporting
               1                                 RW
                          Reporting Enable
                                                        Reset to 0b.
                                                        0b: Disable Fatal Error Reporting
                          Fatal Error Reporting         1b: Enable Fatal Error Reporting
               2                                 RW
                          Enable
                                                        Reset to 0b.
                                                        0b: Disable Unsupported Request Reporting
                          Unsupported Request           1b: Enable Unsupported Request Reporting
               3                                 RW
                          Reporting Enable
                                                        Reset to 0b.
                                                        When set, it permits the device to set the Relaxed Ordering bit in the attribute
                                                        field of transaction. Since the Swidge can not either act as a requester or alter
                          Enable Relaxed
               4                                 RO     the content of packet it forwards, this bit always returns ‘0’ when read.
                          Ordering
                                                        Reset to 0b.
                                                        This field sets maximum TLP payload size for the device. Permissible values
                                                        that can be programmed are indicated by the Max_Payload_Size Supported in
                                                        the Device Capabilities register. Any value exceeding the Max_Payload_Size
               7:5        Max_Payload_Size       RW     Supported written to this register results into clamping to the
                                                        Max_Payload_Size Supported value.
                                                        Reset to 000b.
PI7C9X440SL                                          Page 62 of 102                                                   January 2018
Document Number DS40394 Rev 3-2                     www.diodes.com                                                © Diodes Incorporated


                                                                                                                  PI7C9X440SL
               BIT        FUNCTION             TYPE    DESCRIPTION
                                                       Does not apply to PCI Express Swidge. Returns ‘0’ when read.
                          Extended Tag Field
               8                                RW
                          Enable
                                                       Reset to 0b.
                                                       Does not apply to PCI Express Swidge. Returns ‘0’ when read.
                          Phantom Function
               9                                RW
                          Enable
                                                       Reset to 0b.
                                                       When set, indicates that a device is enabled to draw AUX power independent
                          Auxiliary (AUX)              of PME AUX power.
               10                               RWS
                          Power PM Enable
                                                       Reset to 0b.
                                                       When set, it permits to set the No Snoop bit in the attribute field of
                                                       transaction. Since the Swidge can not either act as a requester or alter the
               11         Enable No Snoop        RO    content of packet it forwards, this bit always returns ‘0’ when read.
                                                       Reset to 0b.
                                                       This field sets the maximum Read Request size for the device as a Requester.
                                                       Since the Swidge does not generate read request by itself, these bits are
                          Max_Read_
               14:12                             RO    hardwired to 000b.
                          Request_Size
                                                       Reset to 000b.
               15         Reserved               RO    Reset to 0b.
7.2.73       DEVICE STATUS REGISTER – OFFSET E8h
               BIT        FUNCTION             TYPE   DESCRIPTION
                                                      Asserted when correctable error is detected. Errors are logged in this register
                                                      regardless of whether error reporting is enabled or not in the Device Control
                          Correctable Error
               16                              RW1C   register.
                          Detected
                                                      Reset to 0b.
                                                      Asserted when non-fatal error is detected. Errors are logged in this register
                                                      regardless of whether error reporting is enabled or not in the Device Control
                          Non-Fatal Error
               17                              RW1C   register.
                          Detected
                                                      Reset to 0b.
                                                      Asserted when fatal error is detected. Errors are logged in this register
                                                      regardless of whether error reporting is enabled or not in the Device Control
               18         Fatal Error Detected RW1C   register.
                                                      Reset to 0b.
                                                      Asserted when unsupported request is detected. Errors are logged in this
                                                      register regardless of whether error reporting is enabled or not in the Device
                          Unsupported Request
               19                              RW1C   Control register.
                          Detected
                                                      Reset to 0b.
                                                      Asserted when the AUX power is detected by the Swidge
                          AUX Power
               20                               RO
                          Detected
                                                      Reset to 1b.
                                                      Each port of Swidge does not issue Non-posted Requests on its own behalf,
                                                      so this bit is hardwired to 0b.
               21         Transactions Pending  RO
                                                      Reset to 0b.
               31:22      Reserved              RO    Reset to 0.
7.2.74       LINK CAPABILITIES REGISTER – OFFSET ECh
               BIT        FUNCTION             TYPE   DESCRIPTION
                          Maximum Link                Read as 0001b to indicate the maximum speed of the Express link is 2.5 Gb/s.
               3:0                               RO
                          Speed
PI7C9X440SL                                         Page 63 of 102                                                   January 2018
Document Number DS40394 Rev 3-2                     www.diodes.com                                               © Diodes Incorporated


                                                                                                                PI7C9X440SL
               BIT        FUNCTION            TYPE   DESCRIPTION
                                                     Indicates the maximum width of the given PCIe Link. The width of each port
                                                     is determined by strapped pin or EEPROM pre-loaded value.
                          Maximum Link
                9:4                            RO
                          Width                      Reset to 000001b (x1) for Port 0.
                                                     Reset to 000001b (x1) for Port 1.
                                                     Reset to 000001b (x1) for Port 2.
                                                     Indicates the level of ASPM supported on the given PCIe Link. Each port of
                          Active State Power         Swidge supports L0s and L1 entry. The default value may be changed by
               11:10      Management           RO    SMBus or auto-loading from EEPROM.
                          (ASPM) Support
                                                     Reset to 01b.
                                                     Indicates the L0s exit latency for the given PCIe Link.
                                                     The length of time this port requires to complete transition from L0s to L0 is
                                                     in the range of 256ns to less than 512ns. The default value may be changed
               14:12      L0s Exit Latency     RO
                                                     by SMBus or auto-loading from EEPROM.
                                                     Reset to 011b.
                                                     Indicates the L1 exit latency for the given PCIe Link.
                                                     The length of time this port requires to complete transition from L1 to L0 is in
                          L1 Exit                    the range of 16us to less than 32us. The default value may be changed by
               17:15                           RO
                          Latency                    SMBus or auto-loading from EEPROM.
                                                     Reset to 000b.
               18         Reserved             RO    Reset to 0b.
                                                     For a Downstream port, this bit must be set to 1b if the component supports
                                                     the optional capability of detecting and reporting a Surprise Down error
                                                     condition.
                          Surprise Down Error
               19                              RO
                          Reporting Capable          For Upstream Ports, which does not support this optional capability, this bit
                                                     must be hardwired to 0b.
                                                     Rest to 0b.
                                                     For a Downstream Port, this bit must be set to 1b if the component supports
                                                     the optional capability of reporting the DL_Active state of the Data Link
                                                     Control and Management State Machine. For a hot-plug capable Downstream
                          Data Link Layer            Port, this bit must be set to 1b.
               20         Active Reporting     RO
                          Capable                    For Upstream Port, this bit must be hardwired to 0b.
                                                     Reset to 0b for upstream port.
                                                     Reset to 1b for downstream ports with hot-plug capable
               23:21      Reserved             R0    Reset to 000b
                                                     Indicates the PCIe Port Number for the given PCIe Link. The default value
                                                     may be changed by SMBus or auto-loading from EEPROM.
               31:24      Port Number          RO
                                                     Reset to 00h for Port 0.
                                                     Reset to 01h for Port 1.
                                                     Reset to 02h for Port 2.
7.2.75       LINK CONTROL REGISTER – OFFSET F0h
               BIT        FUNCTION            TYPE   DESCRIPTION
                                                     00b: ASPM is Disabled
                                                     01b: L0s Entry Enabled
                                                     10b: L1 Entry Enabled
                          Active State Power         11b: L0s and L1 Entry Enabled
               1:0        Management           RW
                          (ASPM) Control             Note that the receiver must be capable of entering L0s even when the field is
                                                     disabled.
                                                     Reset to 00b.
               2          Reserved             RO    Reset to 0b.
PI7C9X440SL                                        Page 64 of 102                                                 January 2018
Document Number DS40394 Rev 3-2                   www.diodes.com                                              © Diodes Incorporated


                                                                                                                PI7C9X440SL
               BIT        FUNCTION        TYPE     DESCRIPTION
                                                   Does not apply to PCI Express Swidge. Returns ‘0’ when read.
                          Read Completion
               3                           RO
                          Boundary (RCB)
                                                   Reset to 0b.
                                                   At upstream port, it is not allowed to disable the link, so this bit is hardwired
                                                   to ‘0’. For downstream ports, it disables the link when this bit is set.
               4          Link Disable     RW
                                                   Reset to 0b.
                                                   At upstream port, it is not allowed to retrain the link, so this bit is hardwired
                                                   to 0b. For downstream ports, it initiates Link Retraining when this bit is set.
               5          Retrain Link     RW
                                                   This bit always returns 0b when read.
                                                   0b: The components at both ends of a link are operating with asynchronous
                                                        reference clock
                          Common Clock             1b: The components at both ends of a link are operating with a distributed
               6                           RW
                          Configuration                 common reference clock
                                                   Reset to 0b.
                                                   When set, it transmits 4096 FTS ordered sets in the L0s state for entering L0
                                                   state and transmits 1024 TS1 ordered sets in the L1 state for entering L0 state.
               7          Extended Synch   RW
                                                   Reset to 0b.
               15:8       Reserved         RO      Reset to 00h.
7.2.76       LINK STATUS REGISTER – OFFSET F0h
               BIT        FUNCTION        TYPE     DESCRIPTION
                                                   Read as 0001b to indicate the negotiated speed of the Express link is 2.5
               19:16      Link Speed       RO
                                                   Gb/s.
                                                   Indicates the negotiated width of the given PCIe link.
                          Negotiated Link
               25:20                       RO
                          Width
                                                   Reset to 000001b (x1).
                                                   When set, indicates a Link training error occurred.
                                                   This bit is cleared by hardware upon successful training of the link to the L0
               26         Training Error   RO      link state.
                                                   Reset to 0b.
                                                   When set, indicates the link training is in progress. Hardware clears this bit
                                                   once link training is complete.
               27         Link Training    RO
                                                   Reset to 0b.
                                                   0b: the Swidge uses an independent clock irrespective of the presence of a
                                                        reference on the connector
                                                   1b: the Swidge uses the same reference clock that the platform provides on
                                                        the connector
                          Slot Clock
               28                         HwInt
                          Configuration
                                                   The default value may be changed by the status of strapped pin, SMBus, or
                                                   auto-loading from EEPROM.
                                                   Reset to 0b.
                                                  Indicates the status of the Data Link Control and Management State Machine.
                          Data Link Layer         It returns a 1b to indicate the DL_Active state, 0b otherwise.
               29                          RO
                          Link Active
                                                  Reset to 0b.
               31:30      Reserved         RO     Reset to 00b.
PI7C9X440SL                                     Page 65 of 102                                                    January 2018
Document Number DS40394 Rev 3-2               www.diodes.com                                                  © Diodes Incorporated


                                                                                                                   PI7C9X440SL
7.2.77       SLOT CAPABILITIES REGISTER (Downstream Port Only) – OFFSET F4h
               BIT        FUNCTION             TYPE    DESCRIPTION
                                                       When set, it indicates that an Attention Button is implemented on the chassis
                                                       for this slot. The default value may be changed by SMBus or auto-loading
                          Attention Button
               0                                RO     from EEPROM.
                          Present
                                                       Reset to 0b.
                                                       When set, it indicates that a Power Controller is implemented for this slot.
                                                       The default value may be changed by SMBus or auto-loading from
                          Power Controller
               1                                RO     EEPROM.
                          Present
                                                       Reset to 0b.
               2          Reserved              RO     Reset to 0b.
                                                       When set, it indicates that an Attention Indicator is implemented on the
                                                       chassis for this slot. The default value may be changed by SMBus or auto-
                          Attention Indicator
               3                                RO     loading from EEPROM.
                          Present
                                                       Reset to 0b.
                                                       When set, it indicates that a Power Indicator is implemented on the chassis
                                                       for this slot. The default value may be changed by SMBus or auto-loading
                          Power Indicator
               4                                RO     from EEPROM.
                          Present
                                                       Reset to 0b.
                                                       When set, it indicates that a device present in this slot might be removed from
                                                       the system without any prior notification. The default value may be changed
               5          Hot-Plug Surprise     RO     by SMBus or auto-loading from EEPROM.
                                                       Reset to 0b.
                                                       When set, it indicates that this slot is capable of supporting Hot-Plug
               6          Hot-Capable          HwInt   operation. The default value may be changed by the status of strapped pin or
                                                       auto-loading from EEPROM.
                                                       It applies to Downstream Port only. In combination with the Slot Power Limit
                                                       Scale value, specifies the upper limit on power supplied by slot. Writes to this
                          Slot Power Limit             register also cause the Port to send the Set_Slot_Power_Limit message. The
               14:7                             RW
                          Value                        default value may be changed by SMBus or auto-loading from EEPROM.
                                                       Reset to 00h.
                                                       It applies to Downstream Port only. Specifies the scale used for the Slot
                                                       Power Limit Value. Writes to this register also cause the Port to send the
                          Slot Power Limit             Set_Slot_Power_Limit message. The default value may be changed by
               16:15                            RW
                          Scale                        SMBus or auto-loading from EEPROM.
                                                       Reset to 00b.
               18:17      Reserved              RO     Reset to 00b.
                                                       It indicates the physical slot number attached to this Port. The default value
                          Physical Slot                may be changed by SMBus or auto-loading from EEPROM.
               31:19                            RO
                          Number
                                                       Reset to 0.
7.2.78       SLOT CONTROL REGISTER (Downstream Port Only) – OFFSET F8h
               BIT        FUNCTION             TYPE    DESCRIPTION
                                                       When set, it enables the generation of Hot-Plug interrupt or wakeup event on
                          Attention Button             an attention button pressed event.
               0                                RW
                          Pressed Enable
                                                       Reset to 0b.
                                                       When set, it enables the generation of Hot-Plug interrupt or wakeup event on
                          Power Fault Detected         a power fault event.
               1                                RW
                          Enable
                                                       Reset to 0b.
               2          Reserved              RO     Reset to 0b.
PI7C9X440SL                                          Page 66 of 102                                                   January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                                 © Diodes Incorporated


                                                                                                               PI7C9X440SL
               BIT        FUNCTION             TYPE   DESCRIPTION
                                                      When set, it enables the generation of Hot-Plug interrupt or wakeup event on
                          Presence Detect             a presence detect changed event.
               3                                RW
                          Changed Enable
                                                      Reset to 0b.
                                                      When set, it enables the generation of Hot-Plug interrupt when the Hot-Plug
                          Command
                                                      Controller completes a command.
               4          Completed Interrupt   RW
                          Enable
                                                      Reset to 0b.
                                                      When set, it enables generation of Hot-Plug interrupt on enabled Hot-Plug
                          Hot-Plug Interrupt          events.
               5                                RW
                          Enable
                                                      Reset to 0b.
                                                      Controls the display of Attention Indicator.
                                                      00b: Reserved
                                                      01b: On
                                                      10b: Blink
                          Attention Indicator
               7:6                              RW    11b: Off
                          Control
                                                      Writes to this register also cause the Port to send the
                                                      ATTENTION_INDICATOR_* Messages.
                                                      Reset to 11b.
                                                      Controls the display of Power Indicator.
                                                      00b: Reserved
                                                      01b: On
                                                      10b: Blink
                          Power Indicator
               9:8                              RW    11b: Off
                          Control
                                                      Writes to this register also cause the Port to send the
                                                      POWER_INDICATOR_* Messages.
                                                      Reset to 11b.
                                                      0b: reset the power state of the slot (Power On)
                          Power Controller            1b: set the power state of the slot (Power Off)
               10                               RW
                          Control
                                                      Reset to 0b.
               11         Reserved              RO    Reset to 0b.
                                                      If the Data Link Layer Link Active capability is implemented, when set to 1b,
                          Data Link Layer             this field enables software notification when Data Link Layer Link Active
               12         State Changed         RW    field is changed.
                          Enable
                                                      Reset to 0b.
               15:13      Reserved              RO    Reset to 000b
7.2.79       SLOT STATUS REGISTER (Downstream Port Only) – OFFSET F8h
               BIT        FUNCTION             TYPE   DESCRIPTION
                                                      When set, it indicates the Attention Button is pressed.
                          Attention Button
               16                              RW1C
                          Pressed
                                                      Reset to 0b.
                                                      When set, it indicates a Power Fault is detected.
               17         Power Fault Detected RW1C
                                                      Reset to 0b.
                                                      When set, it indicates a MRL Sensor Changed is detected.
                          MRL Sensor
               18                               RO
                          Changed
                                                      Reset to 0b.
                                                      When set, it indicates a Presence Detect Changed is detected.
                          Presence Detect
               19                              RW1C
                          Changed
                                                      Reset to 0b.
                                                      When set, it indicates the Hot-Plug Controller completes an issued command.
                          Command
               20                              RW1C
                          Completed
                                                      Reset to 0b.
PI7C9X440SL                                         Page 67 of 102                                                January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                             © Diodes Incorporated


                                                                                                                    PI7C9X440SL
               BIT        FUNCTION              TYPE   DESCRIPTION
                                                       Reflects the status of MRL Sensor.
                                                       0b: MRL Closed
               21         MRL Sensor State       RO
                                                       1b: MRL Opened
                                                       Reset to 0b.
                                                       Indicates the presence of a card in the slot.
                                                       0b: Slot Empty
                                                       1b: Card Present in slot
               22         Presence Detect State  RO
                                                       This register is implemented on all Downstream Ports that implement slots.
                                                       For Downstream Ports not connected to slots (where the Slot Implemented bit
                                                       of the PCI Express Capabilities register is 0b), this bit returns 1b.
                                                       Reset to 1b.
               23         Reserved               RO    Reset to 0.
                          Data Link Layer              This bit is set when the value reported in the Data Link Layer Link Active
               24                               RW1C
                          State Changed                field of the Link Status register is changed.
               31:25      Reserved               RO    Reset to 0
7.2.80       PCI EXPRESS ADVANCED ERROR REPORTING CAPABILITY ID
             REGISTER – OFFSET 100h
               BIT        FUNCTION              TYPE   DESCRIPTION
                          Extended                     Read as 0001h to indicate that these are PCI express extended capability
               15:0                              RO
                          Capabilities ID              registers for advance error reporting.
7.2.81       CAPABILITY VERSION – OFFSET 100h
               BIT        FUNCTION              TYPE   DESCRIPTION
                                                       Read as 1h. Indicates PCI-SIG defined PCI Express capability structure
                                                       version number.
               19:16      Capability Version     RO
                                                       Reset to 1h.
7.2.82       NEXT ITEM POINTER REGISTER – OFFSET 100h
               BIT        FUNCTION              TYPE   DESCRIPTION
                                                       Pointer points to the PCI Express Extended VC capability register (140h).
                          Next Capability
               31:20                             RO
                          Offset                       Reset to 140h (upstream port).
                                                       Reset to 20Ch (downstream port).
7.2.83       UNCORRECTABLE ERROR STATUS REGISTER – OFFSET 104h
               BIT        FUNCTION              TYPE    DESCRIPTION
                                                        When set, indicates that the Training Error event has occurred.
               0          Training Error Status RW1CS
                                                        Reset to 0b.
               3:1        Reserved               RO     Reset to 000b.
                                                        When set, indicates that the Data Link Protocol Error event has occurred.
                          Data Link Protocol
               4                                RW1CS
                          Error Status
                                                        Reset to 0b.
               11:5       Reserved               RO     Reset to 0.
PI7C9X440SL                                          Page 68 of 102                                                   January 2018
Document Number DS40394 Rev 3-2                     www.diodes.com                                                © Diodes Incorporated


                                                                                                                PI7C9X440SL
               BIT        FUNCTION              TYPE    DESCRIPTION
                                                        When set, indicates that a Poisoned TLP has been received or generated.
               12         Poisoned TLP Status   RW1CS
                                                        Reset to 0b.
                                                        When set, indicates that the Flow Control Protocol Error event has occurred.
                          Flow Control
               13                               RW1CS
                          Protocol Error Status
                                                        Reset to 0b.
                                                        When set, indicates that the Completion Timeout event has occurred.
                          Completion Timeout
               14                               RW1CS
                          Status
                                                        Reset to 0b.
                                                        When set, indicates that the Completer Abort event has occurred.
                          Completer Abort
               15                               RW1CS
                          Status
                                                        Reset to 0b.
                                                        When set, indicates that the Unexpected Completion event has occurred.
                          Unexpected
               16                               RW1CS
                          Completion Status
                                                        Reset to 0b.
                                                        When set, indicates that the Receiver Overflow event has occurred.
                          Receiver Overflow
               17                               RW1CS
                          Status
                                                        Reset to 0b.
                                                        When set, indicates that a Malformed TLP has been received.
                          Malformed TLP
               18                               RW1CS
                          Status
                                                        Reset to 0b.
                                                        When set, indicates that an ECRC Error has been detected.
               19         ECRC Error Status     RW1CS
                                                        Reset to 0b.
                                                        When set, indicates that an Unsupported Request event has occurred.
                          Unsupported Request
               20                               RW1CS
                          Error Status
                                                        Reset to 0b.
               31:21      Reserved                RO    Reset to 0.
7.2.84       UNCORRECTABLE ERROR MASK REGISTER – OFFSET 108h
               BIT        FUNCTION              TYPE   DESCRIPTION
                                                       When set, the Training Error event is not logged in the Header Log register
                                                       and not issued as an Error Message to RC either.
               0          Training Error Mask    RWS
                                                       Reset to 0b.
               3:1        Reserved                RO   Reset to 000b.
                                                       When set, the Data Link Protocol Error event is not logged in the Header Log
                          Data Link Protocol           register and not issued as an Error Message to RC either.
               4                                 RWS
                          Error Mask
                                                       Reset to 0b.
               11:5       Reserved                RO   Reset to 0.
                                                       When set, an event of Poisoned TLP has been received or generated is not
                                                       logged in the Header Log register and not issued as an Error Message to RC
               12         Poisoned TLP Mask      RWS   either.
                                                       Reset to 0b.
                                                       When set, the Flow Control Protocol Error event is not logged in the Header
                          Flow Control                 Log register and not issued as an Error Message to RC either.
               13                                RWS
                          Protocol Error Mask
                                                       Reset to 0b.
                                                       When set, the Completion Timeout event is not logged in the Header Log
                          Completion Timeout           register and not issued as an Error Message to RC either.
               14                                RWS
                          Mask
                                                       Reset to 0b.
                                                       When set, the Completer Abort event is not logged in the Header Log register
                          Completer Abort              and not issued as an Error Message to RC either.
               15                                RWS
                          Mask
                                                       Reset to 0b.
                                                       When set, the Unexpected Completion event is not logged in the Header Log
                          Unexpected                   register and not issued as an Error Message to RC either.
               16                                RWS
                          Completion Mask
                                                       Reset to 0b.
PI7C9X440SL                                          Page 69 of 102                                                January 2018
Document Number DS40394 Rev 3-2                      www.diodes.com                                            © Diodes Incorporated


                                                                                                              PI7C9X440SL
               BIT        FUNCTION            TYPE   DESCRIPTION
                                                     When set, the Receiver Overflow event is not logged in the Header Log
                          Receiver Overflow          register and not issued as an Error Message to RC either.
               17                             RWS
                          Mask
                                                     Reset to 0b.
                                                     When set, an event of Malformed TLP has been received is not logged in the
                          Malformed TLP              Header Log register and not issued as an Error Message to RC either.
               18                             RWS
                          Mask
                                                     Reset to 0b.
                                                     When set, an event of ECRC Error has been detected is not logged in the
                                                     Header Log register and not issued as an Error Message to RC either.
               19         ECRC Error Mask     RWS
                                                     Reset to 0b.
                                                     When set, the Unsupported Request event is not logged in the Header Log
                          Unsupported Request        register and not issued as an Error Message to RC either.
               20                             RWS
                          Error Mask
                                                     Reset to 0b.
               31:21      Reserved             RO    Reset to 0.
7.2.85       UNCORRECTABLE ERROR SEVERITY REGISTER – OFFSET 10Ch
               BIT        FUNCTION            TYPE   DESCRIPTION
                                                     0b: Non-Fatal
                          Training Error             1b: Fatal
               0                              RWS
                          Severity
                                                     Reset to 1b.
               3:1        Reserved             RO    Reset to 000b.
                                                     0b: Non-Fatal
                          Data Link Protocol         1b: Fatal
               4                              RWS
                          Error Severity
                                                     Reset to 1b.
               11:5       Reserved             RO    Reset to 0.
                                                     0b: Non-Fatal
                          Poisoned TLP               1b: Fatal
               12                             RWS
                          Severity
                                                     Reset to 0b.
                                                     0b: Non-Fatal
                          Flow Control
                                                     1b: Fatal
               13         Protocol Error      RWS
                          Severity
                                                     Reset to 1b.
                                                     0b: Non-Fatal
                          Completion Timeout         1b: Fatal
               14                             RWS
                          Error Severity
                                                     Reset to 0b.
                                                     0b: Non-Fatal
                          Completer Abort            1b: Fatal
               15                             RWS
                          Severity
                                                     Reset to 0b.
                                                     0b: Non-Fatal
                          Unexpected                 1b: Fatal
               16                             RWS
                          Completion Severity
                                                     Reset to 0b.
                                                     0b: Non-Fatal
                          Receiver Overflow          1b: Fatal
               17                             RWS
                          Severity
                                                     Reset to 1b.
                                                     0b: Non-Fatal
                          Malformed TLP              1b: Fatal
               18                             RWS
                          Severity
                                                     Reset to 1b.
                                                     0b: Non-Fatal
                                                     1b: Fatal
               19         ECRC Error Severity RWS
                                                     Reset to 0.
PI7C9X440SL                                        Page 70 of 102                                               January 2018
Document Number DS40394 Rev 3-2                   www.diodes.com                                            © Diodes Incorporated


                                                                                                                PI7C9X440SL
               BIT        FUNCTION              TYPE   DESCRIPTION
                                                       0b: Non-Fatal
                          Unsupported Request          1b: Fatal
               20                                RWS
                          Error Severity
                                                       Reset to 0b.
               31:21      Reserved                RO   Reset to 0.
7.2.86       CORRECTABLE ERROR STATUS REGISTER – OFFSET 110 h
               BIT        FUNCTION              TYPE    DESCRIPTION
                                                        When set, the Receiver Error event is detected.
               0          Receiver Error Status RW1CS
                                                        Reset to 0b.
               5:1        Reserved                RO    Reset to 00000b.
                                                        When set, the event of Bad TLP has been received is detected.
               6          Bad TLP Status        RW1CS
                                                        Reset to 0b.
                                                        When set, the event of Bad DLLP has been received is detected.
               7          Bad DLLP Status       RW1CS
                                                        Reset to 0b.
                                                        When set, the REPLAY_NUM Rollover event is detected.
                          REPLAY_NUM
               8                                RW1CS
                          Rollover status
                                                        Reset to 0b.
               11:9       Reserved                RO    Reset to 000b.
                                                        When set, the Replay Timer Timeout event is detected.
                          Replay Timer
               12                               RW1CS
                          Timeout status
                                                        Reset to 0b.
                                                        When set, the Advisory Non-Fatal Error event is detected.
                          Advisory Non-Fatal
               13                               RW1CS
                          Error status
                                                        Reset to 0b.
               31:14      Reserved                RO    Reset to 0b.
7.2.87       CORRECTABLE ERROR MASK REGISTER – OFFSET 114 h
               BIT        FUNCTION              TYPE   DESCRIPTION
                                                       When set, the Receiver Error event is not logged in the Header Log register
                                                       and not issued as an Error Message to RC either.
               0          Receiver Error Mask    RWS
                                                       Reset to 0b.
               5:1        Reserved                RO   Reset to 00000b.
                                                       When set, the event of Bad TLP has been received is not logged in the Header
                                                       Log register and not issued as an Error Message to RC either.
               6          Bad TLP Mask           RWS
                                                       Reset to 0b.
                                                       When set, the event of Bad DLLP has been received is not logged in the
                                                       Header Log register and not issued as an Error Message to RC either.
               7          Bad DLLP Mask          RWS
                                                       Reset to 0b.
                                                       When set, the REPLAY_NUM Rollover event is not logged in the Header
                          REPLAY_NUM                   Log register and not issued as an Error Message to RC either.
               8                                 RWS
                          Rollover Mask
                                                       Reset to 0b.
               11:9       Reserved                RO   Reset to 000b.
                                                       When set, the Replay Timer Timeout event is not logged in the Header Log
                          Replay Timer                 register and not issued as an Error Message to RC either.
               12                                RWS
                          Timeout Mask
                                                       Reset to 0b.
                                                       When set, the Advisory Non-Fatal Error event is not logged in the Header
                          Advisory Non-Fatal           Long register and not issued as an Error Message to RC either.
               13                                RWS
                          Error Mask
                                                       Reset to 1b.
               31:14      Reserved                RO   Reset to 0.
PI7C9X440SL                                          Page 71 of 102                                                January 2018
Document Number DS40394 Rev 3-2                      www.diodes.com                                            © Diodes Incorporated


                                                                                                                    PI7C9X440SL
7.2.88       ADVANCE ERROR CAPABILITIES AND CONTROL REGISTER – OFFSET
             118h
               BIT        FUNCTION            TYPE   DESCRIPTION
                                                     It indicates the bit position of the first error reported in the Uncorrectable
                                                     Error Status register.
               4:0        First Error Pointer  ROS
                                                     Reset to 00000b.
                                                     When set, it indicates the Swidge has the capability to generate ECRC.
                          ECRC Generation
               5                               RO
                          Capable
                                                     Reset to 1b.
                                                     When set, it enables the generation of ECRC when needed.
                          ECRC Generation
               6                              RWS
                          Enable
                                                     Reset to 0b.
                                                     When set, it indicates the Swidge has the capability to check ECRC.
                          ECRC Check
               7                               RO
                          Capable
                                                     Reset to 1b.
                                                     When set, the function of checking ECRC is enabled.
               8          ECRC Check Enable   RWS
                                                     Reset to 0b.
               31:9       Reserved             RO    Reset to 0.
7.2.89       HEADER LOG REGISTER – OFFSET From 11Ch to 128h
               BIT        FUNCTION            TYPE   DESCRIPTION
               31:0       1st DWORD            ROS   Hold the 1st DWORD of TLP Header. The Head byte is in big endian.
               63:32      2nd DWORD            ROS   Hold the 2nd DWORD of TLP Header. The Head byte is in big endian.
               95:64      3rd DWORD            ROS   Hold the 3rd DWORD of TLP Header. The Head byte is in big endian.
               127:96     4th DWORD            ROS   Hold the 4th DWORD of TLP Header. The Head byte is in big endian.
7.2.90       PCI EXPRESS VIRTUAL CHANNEL CAPABILITY ID REGISTER – OFFSET
             140h (Upstream Only)
               BIT        FUNCTION            TYPE   DESCRIPTION
                          Extended                   Read as 0002h to indicate that these are PCI express extended capability
               15:0                            RO
                          Capabilities ID            registers for virtual channel.
7.2.91       CAPABILITY VERSION – OFFSET 140h (Upstream Only)
               BIT        FUNCTION            TYPE   DESCRIPTION
                                                     Read as 1h. Indicates PCIe Base Specification compliance.
               19:16      Capability Version   RO
                                                     Reset to 1h.
7.2.92       NEXT ITEM POINTER REGISTER – OFFSET 140h (Upstream Only)
               BIT        FUNCTION            TYPE   DESCRIPTION
                                                     Pointer points to the PCI Express Power Budgeting Capability register
                          Next Capability            (20Ch).
               31:20                           RO
                          Offset
                                                     Reset to 20Ch.
PI7C9X440SL                                        Page 72 of 102                                                     January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                                 © Diodes Incorporated


                                                                                                                 PI7C9X440SL
7.2.93       PORT VC CAPABILITY REGISTER 1 – OFFSET 144h (Upstream Only)
               BIT        FUNCTION             TYPE   DESCRIPTION
                                                      It indicates the number of extended Virtual Channels in addition to the default
                                                      VC supported by the Swidge.
               2:0        Extended VC Count     RO
                                                      Reset to 000b.
               3          Reserved              RO    Reset to 0b.
                                                      It indicates the number of extended Virtual Channels in addition to the default
                                                      VC belonging to the low-priority VC (LPVC) group. The default value may
                          Low Priority
               6:4                              RO    be changed by SMBus or auto-loading from EEPROM.
                          Extended VC Count
                                                      Reset to 000b.
               7          Reserved              RO    Reset to 0b.
                                                      It indicates the reference clock for Virtual Channels that support time-based
                                                      WRR Port Arbitration. Defined encoding is 00b for 100 ns reference clock.
               9:8        Reference Clock       RO
                                                      Reset to 00b.
                                                      Read as 10b to indicate the size of Port Arbitration table entry in the device is
                          Port Arbitration            4 bits.
               11:10                            RO
                          Table Entry Size
                                                      Reset to 10b.
               31:12      Reserved              RO    Reset to 0.
7.2.94       PORT VC CAPABILITY REGISTER 2 – OFFSET 148h (Upstream Only)
               BIT        FUNCTION             TYPE   DESCRIPTION
                                                      It indicates the types of VC Arbitration supported by the device for the LPVC
                                                      group. This field is valid when LPVC is greater than 0. The Swidge supports
                          VC Arbitration              Hardware fixed arbitration scheme, e.g., Round Robin and Weight Round
               7:0                              RO
                          Capability                  Robin arbitration with 32 phases in LPVC.
                                                      Reset to 00000000b.
               23:8       Reserved              RO    Reset to 0.
                                                      It indicates the location of the VC Arbitration Table as an offset from the base
                                                      address of the Virtual Channel Capability register in the unit of DQWD (16
                          VC Arbitration Table
               31:24                            RO    bytes).
                          Offset
                                                      Reset to 00h.
7.2.95       PORT VC CONTROL REGISTER – OFFSET 14Ch (Upstream Only)
               BIT        FUNCTION             TYPE   DESCRIPTION
                                                      When set, the programmed VC Arbitration Table is applied to the hardware.
                          Load VC Arbitration         This bit always returns 0b when read.
               0                                RW
                          Table
                                                      Reset to 0b.
                                                      This field is used to configure the VC Arbitration by selecting one of the
                                                      supported VC Arbitration schemes. The valid values for the schemes
                          VC Arbitration              supported by Swidge are 0b and 1b. Other value than these written into this
               3:1                              RW
                          Select                      register will be treated as default.
                                                      Reset to 0b.
               15:4       Reserved              RO    Reset to 0.
PI7C9X440SL                                         Page 73 of 102                                                 January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                              © Diodes Incorporated


                                                                                                                   PI7C9X440SL
7.2.96       PORT VC STATUS REGISTER – OFFSET 14Ch (Upstream Only)
               BIT        FUNCTION              TYPE   DESCRIPTION
                                                       When set, it indicates that any entry of the VC Arbitration Table is written by
                                                       software. This bit is cleared when hardware finishes loading values stored in
                          VC Arbitration Table
               16                                RO    the VC Arbitration Table after the bit of “Load VC Arbitration Table” is set.
                          Status
                                                       Reset to 0b.
               31:17      Reserved               RO    Reset to 0.
7.2.97       VC RESOURCE CAPABILITY REGISTER (0) – OFFSET 150h (Upstream
             Only)
               BIT        FUNCTION              TYPE   DESCRIPTION
                                                       It indicates the types of Port Arbitration supported by the VC resource. The
                                                       Swidge supports Hardware fixed arbitration scheme, e.g., Round Robin,
                          Port Arbitration             Weight Round Robin (WRR) arbitration with 128 phases (3~4 enabled ports)
               7:0                               RO
                          Capability                   and Time-based WRR with 128 phases (3~4 enabled ports).
                                                       Reset to 00001001b.
               13:8       Reserved               RO    Reset to 000000b.
                                                       When set, it indicates the VC resource only supports transaction optimized
                          Advanced Packet              for Advanced Packet Switching (AS).
               14                                RO
                          Switching
                                                       Reset to 0b.
                                                       This bit is not applied to PCIe Switch.
                          Reject Snoop
               15                                RO
                          Transactions
                                                       Reset to 0b.
                                                       It indicates the maximum numbers of time slots (minus one) are allocated for
                                                       Isochronous traffic. The default value may be changed by SMBus or auto-
                          Maximum Time
               22:16                             RO    loading from EEPROM.
                          Slots
                                                       Reset to 7Fh.
               23         Reserved               RO    Reset to 0b.
                                                       It indicates the location of the Port Arbitration Table (n) as an offset from the
                                                       base address of the Virtual Channel Capability register in the unit of DQWD
                          Port Arbitration
               31:24                             RO    (16 bytes).
                          Table Offset
                                                       Reset to 04h for Port Arbitration Table (0).
7.2.98       VC RESOURCE CONTROL REGISTER (0) – OFFSET 154h (Upstream
             Only)
               BIT        FUNCTION              TYPE   DESCRIPTION
                                                       This field indicates the TCs that are mapped to the VC resource. Bit locations
                                                       within this field correspond to TC values. When the bits in this field are set, it
                                                       means that the corresponding TCs are mapped to the VC resource. The
               7:0        TC/VC Map              RW
                                                       default value may be changed by SMBus or auto-loading from EEPROM.
                                                       Reset to FFh.
               15:8       Reserved               RO    Reset to 00h.
                                                       When set, the programmed Port Arbitration Table is applied to the hardware.
                          Load Port Arbitration        This bit always returns 0b when read.
               16                                RW
                          Table
                                                       Reset to 0b.
                                                       This field is used to configure the Port Arbitration by selecting one of the
                                                       supported Port Arbitration schemes. The permissible values for the schemes
                          Port Arbitration             supported by Swidge are 000b and 011b at VC0, other value than these
               19:17                             RW
                          Select                       written into this register will be treated as default.
                                                       Reset to 000b.
PI7C9X440SL                                          Page 74 of 102                                                  January 2018
Document Number DS40394 Rev 3-2                     www.diodes.com                                               © Diodes Incorporated


                                                                                                                           PI7C9X440SL
               BIT         FUNCTION                  TYPE      DESCRIPTION
               23:20       Reserved                   RO       Reset to 0h.
                                                               This field assigns a VC ID to the VC resource.
               26:24       VC ID                      RO
                                                               Reset to 000b.
               30:27       Reserved                   RO       Reset to 0h.
                                                               0b: it disables this Virtual Channel
                                                               1b: it enables this Virtual Channel
               31          VC Enable                  RW
                                                               Reset to 1b.
7.2.99       VC RESOURCE STATUS REGISTER (0) – OFFSET 158h (Upstream Only)
               BIT         FUNCTION                  TYPE      DESCRIPTION
               15:0        Reserved                   RO       Reset to 0000h.
                                                               When set, it indicates that any entry of the Port Arbitration Table is written by
                                                               software. This bit is cleared when hardware finishes loading values stored in
                           Port Arbitration
               16                                     RO       the Port Arbitration Table after the bit of “Load Port Arbitration Table” is set.
                           Table Status
                                                               Reset to 0b.
                                                               When set, it indicates that the VC resource is still in the process of
                           VC Negotiation                      negotiation. This bit is cleared after the VC negotiation is complete.
               17                                     RO
                           Pending
                                                               Reset to 0b.
               31:18       Reserved                   RO       Reset to 0.
7.2.100      PORT ARBITRATION TABLE REGISTER (0) – OFFSET 180h-1BCh
             (Upstream Only)
             The Port arbitration table is a read-write register array that contains a table for Port arbitration. Each
             table entry allocates two bits to represent Port Number. The table entry size is dependent on the
             number of enabled ports (refer to bit 10 and 11 of Port VC capability register 1). The arbitration table
             contains 128 entries if three or four ports are to be enabled. The following table shows the register
             array layout for the size of entry equal to two.
                                                      Table 7-1 Table Entry Size in 4 Bits
                  63 - 56      55 - 48       47 - 40     39 - 32       31 - 24        23 - 16        15 - 8        7-0           Byte Location
                   Phase        Phase         Phase       Phase         Phase          Phase         Phase        Phase
                                                                                                                                       00h
                  [15:14]     [13:12]        [11:10]      [9:8]          [7:6]         [5:4]          [3:2]        [1:0]
                   Phase        Phase         Phase       Phase         Phase          Phase         Phase        Phase
                                                                                                                                       08h
                  [31:30]     [29:28]        [27:26]     [25:24]       [23:22]        [21:20]       [19:18]      [17:16]
                   Phase        Phase         Phase       Phase         Phase          Phase         Phase        Phase
                                                                                                                                       10h
                  [47:46]     [45:44]        [43:42]     [41:40]       [39:38]        [37:36]       [35:34]      [33:32]
                   Phase        Phase         Phase       Phase         Phase          Phase         Phase        Phase
                                                                                                                                       18h
                  [63:62]     [61:60]        [59:58]     [57:56]       [55:54]        [53:52]       [51:50]      [49:48]
                   Phase        Phase         Phase       Phase         Phase          Phase         Phase        Phase
                                                                                                                                       20h
                  [79:78]     [77:76]        [75:74]     [73:72]       [71:70]        [69:68]       [67:66]      [65:64]
                   Phase        Phase         Phase       Phase         Phase          Phase         Phase        Phase
                                                                                                                                       28h
                  [95:94]     [93:92]        [91:90]     [89:88]       [87:86]        [85:84]       [83:82]      [81:80]
                   Phase        Phase         Phase       Phase         Phase          Phase         Phase        Phase
                                                                                                                                       30h
                 [111:110]   [109:108]      [107:106]   [105:104]     [103:102]     [101:100]       [99:98]      [97:96]
                   Phase        Phase         Phase       Phase         Phase          Phase         Phase        Phase
                                                                                                                                       38h
                 [127:126]   [125:124]      [123:122]   [121:120]     [119:118]     [117:116]      [115:114]    [113:112]
PI7C9X440SL                                                Page 75 of 102                                                     January 2018
Document Number DS40394 Rev 3-2                           www.diodes.com                                                  © Diodes Incorporated


                                                                                                               PI7C9X440SL
7.2.101      PCI EXPRESS POWER BUDGETING CAPABILITY ID REGISTER –
             OFFSET 20Ch
               BIT        FUNCTION           TYPE   DESCRIPTION
                          Extended                  Read as 0004h to indicate that these are PCI express extended capability
               15:0                           RO
                          Capabilities ID           registers for power budgeting.
7.2.102      CAPABILITY VERSION – OFFSET 20Ch
               BIT        FUNCTION           TYPE   DESCRIPTION
                                                    Read as 1h. Indicates PCIe Base Specification compliance.
               19:16      Capability Version  RO
                                                    Reset to 1h.
7.2.103      NEXT ITEM POINTER REGISTER – OFFSET 20Ch
               BIT        FUNCTION           TYPE   DESCRIPTION
                                                    Read as 000h. No other ECP registers.
                          Next Capability
               31:20                          RO
                          Offset
                                                    Reset to 000h.
7.2.104      DATA SELECT REGISTER – OFFSET 210h
               BIT        FUNCTION           TYPE   DESCRIPTION
                                                    It indexes the power budgeting data reported through the data register.
                                                    When 00h, it selects D0 Max power budget
               7:0        Data Selection      RW    When 01h, it selects D0 Sustained power budget
                                                    Other values would return zero power budgets, which means not supported
                                                    Reset to 00h.
               31:8       Reserved            RO    Reset to 000000h.
7.2.105      POWER BUDGETING DATA REGISTER – OFFSET 214h
               BIT        FUNCTION           TYPE   DESCRIPTION
                                                    It specifies the base power value in watts. This value represents the required
                                                    power budget in the given operation condition. The default value may be
               7:0        Base Power          RO    changed by auto-loading from EEPROM.
                                                    Reset to 04h.
                                                    It specifies the scale to apply to the base power value. The default value may
                                                    be changed by auto-loading from EEPROM.
               9:8        Data Scale          RO
                                                    Reset to 00b.
                                                    It specifies the power management sub state of the given operation condition.
                                                    It is initialized to the default sub state.
               12:10      PM Sub State        RO
                                                    Reset to 000b.
                                                    It specifies the power management state of the given operation condition.
                                                    It defaults to the D0 power state. The default value may be changed by auto-
               14:13      PM State            RO    loading from EEPROM.
                                                    Reset to 00b.
PI7C9X440SL                                       Page 76 of 102                                                  January 2018
Document Number DS40394 Rev 3-2                  www.diodes.com                                               © Diodes Incorporated


                                                                                                             PI7C9X440SL
               BIT        FUNCTION         TYPE   DESCRIPTION
                                                  It specifies the type of the given operation condition.
                                                  It defaults to the Maximum power state. The default value may be changed by
               17:15      Type              RO    auto-loading from EEPROM.
                                                  Reset to 111b.
                                                  It specifies the power rail of the given operation condition.
               20:18      Power Rail        RO
                                                  Reset to 010b.
               31:21      Reserved          RO    Reset to 0.
7.2.106      POWER BUDGET CAPABILITY REGISTER – OFFSET 218h
               BIT        FUNCTION         TYPE   DESCRIPTION
                                                  When set, it indicates that the power budget for the device is included within
                                                  the system power budget. The default value may be changed by auto-loading
               0          System Allocated  RO    from EEPROM.
                                                  Reset to 0b.
               31:1       Reserved          RO    Reset to 0.
PI7C9X440SL                                     Page 77 of 102                                                  January 2018
Document Number DS40394 Rev 3-2                www.diodes.com                                               © Diodes Incorporated


                                                                                                                        PI7C9X440SL
7.3    USB DEVICE CONFIGURATION REGISTERS (FUNC0/FUNC1/FUNC2)
             The swidge contains two Open HCI (OHCI) host controllers (function number 0 and 1) and one
             Enhanced HCI (EHCI) controller (function number 2). OHCI host controllers handle full-speed and
             low-speed device while EHCI host controller handles high speed device. The OHCI and EHCI host
             controllers are connected to an internal PCI express port (device number 3).
             The following table details the allocation of the register fields of the PCI 2.3 compatible type 0
             configuration space header.
                     31 – 24               23 – 16                15 – 8                   7–0             BYTE OFFSET
                              Device ID                                     Vendor ID                            00h
                                Status                                      Command                              04h
                                          Class Code                                   Revision ID               08h
                    Reserved            Header Type           Master Latency        Cache Line Size              0Ch
                                                                   Timer
                                              Base Address Register 0                                            10h
                                                     Reserved                                                 14h – 28h
                             Subsystem ID                             Subsystem Vendor ID                        2Ch
                                                     Reserved                                                    30h
                                                 Capability Pointer                                              34h
                                                     Reserved                                                    38h
                               Reserved                        Interrupt Pin          Interrupt Line             3Ch
                                                     Reserved                                                 40h – 5Fh
                     Port Wake Capability Register                FLADJ                   SBRN                   60h
                                                     Reserved                                                    64h
                                               Miscellaneous Register                                            68h
                                                     Reserved                                                 6Ch – 7Fh
                    Power Management Capabilities             Next ID = 8C         Capability ID = 01            80h
                    PM Data             PPB Support                 Power Management Data                        84h
                       Message Control Register                Next ID =E0         Capability ID = 05            8Ch
                                            Low 32-bit Message Address                                           90h
                                               Message Data Register                                             94h
                                                     Reserved                                                 98h - 9Ch
                                 USB Physical Layer Control Register (USB Port 1)                                A0h
                                 USB Physical Layer Control Register (USB Port 2)                                A4h
                                 USB Physical Layer Control Register (USB Port 3)                                A8h
                                 USB Physical Layer Control Register (USB Port 4)                                ACh
                                                     Reserved                                                 B0h – DCh
                    PCI Express Capability Register           Next ID = 00h        Capability ID = 10            E0h
                                                 Device Capability                                               E4h
                             Device Status                                Device Control                         E8h
                                                  Link Capability                                                ECh
                              Link Status                                  Link Control                          F0h
                                                     Reserved                                                 F4h - FCh
7.3.1        VENDOR ID REGISTER – OFFSET 00h
               BIT        FUNCTION               TYPE      DESCRIPTION
               15:0       Vendor ID                RO      Identifies Pericom as the vendor of this device. The default value may be changed
                                                           by auto-loading from EEPROM.
                                                           Reset to 12D8h.
PI7C9X440SL                                                Page 78 of 102                                                 January 2018
Document Number DS40394 Rev 3-2                           www.diodes.com                                              © Diodes Incorporated


                                                                                                                     PI7C9X440SL
7.3.2        DEVICE ID REGISTER – OFFSET 00h
               BIT        FUNCTION              TYPE    DESCRIPTION
               31:16      Device ID              RO     Identifies this device as the PCIe to OHCI/EHCI I/O bridge. The default
                                                        value may be changed by SMBUS or auto-loading from EEPROM.
                                                        Reset to 400Eh for OHCI (Func 0 /Func 1).
                                                        Reset to 400Fh for EHCI (Func 2)
7.3.3        COMMAND REGISTER – OFFSET 04h
               BIT        FUNCTION              TYPE    DESCRIPTION
                                                        Controls a device’s response to I/O Space accesses. A value of 0 disables the
                                                        device response. A value of 1 allows the device to respond to I/O Space
               0          I/O Space Enable       RW     accesses.
                                                        Reset to 0b.
                                                        Controls a device’s response to Memory Space accesses. A value of 0
                                                        disables the device response. A value of 1 allows the device to response to
                          Memory Space
               1                                 RW     memory Space accesses.
                          Enable
                                                        Reset to 0b.
                                                        Controls a device’s ability to act as a master on the PCI bus. A value of 0
                                                        disables the device from generating PCI accesses. A value of 1 allows the
               2          Bus Master Enable      RO     device to behave as a bus master.
                                                        Reset to 0b.
               3          Special Cycle Enable   RO     Does not apply to PCI Express. Must be hardwired to 0b.
                          Memory Write And              Does not apply to PCI Express. Must be hardwired to 0b.
               4                                 RO
                          Invalidate Enable
                          VGA Palette Snoop             Does not apply to PCI Express. Must be hardwired to 0b.
               5                                 RO
                          Enable
                                                        Controls the device’s response to parity errors. When the bit is set, the device
                                                        must take its normal action when a parity error is detected. When the bit is 0,
                          Parity Error
               6                                 RW     the device sets its Detected Parity Error Status bit when an error is detected.
                          Response Enable
                                                        Reset to 0b.
               7          Wait Cycle Control     RO     Does not apply to PCI Express. Must be hardwired to 0b.
                                                        This bit, when set, enables reporting of Non-fatal and Fatal errors detected by
                                                        the device to the Root Complex.
               8          SERR# enable           RW
                                                        Reset to 0b.
                          Fast Back-to-Back             Does not apply to PCI Express. Must be hardwired to 0b.
               9                                 RO
                          Enable
                                                        Controls the ability of the I/O bridge to generate INTx interrupt Messages.
               10         Interrupt Disable      RW
                                                        Reset to 0b.
               15:11      Reserved               RO     Reset to 00000b.
7.3.4        STATUS REGISTER – OFFSET 04h
               BIT       FUNCTION              TYPE   DESCRIPTION
               18:16     Reserved               RO    Reset to 000b.
                                                      Indicates that an INTx interrupt Message is pending internally to the device.
               19        Interrupt Status       RO
                                                      Reset to 0b.
                                                      Set to 1 to enable support for the capability list (offset 34h is the pointer to the
                                                      data structure)
               20        Capabilities List      RO
                                                      Reset to 1b.
               21        66MHz Capable          RO    Does not apply to PCI Express. Must be hardwired to 0b.
PI7C9X440SL                                          Page 79 of 102                                                     January 2018
Document Number DS40394 Rev 3-2                     www.diodes.com                                                 © Diodes Incorporated


                                                                                                                 PI7C9X440SL
               BIT       FUNCTION           TYPE   DESCRIPTION
               22        Reserved            RO    Reset to 0b.
                         Fast Back-to-Back         Does not apply to PCI Express. Must be hardwired to 0b.
               23                            RO
                         Capable
                         Master Data Parity        It is not implemented. Hardwired to 0b.
               24                           RWC
                         Error
               26:25     DEVSEL# Timing      RO    Does not apply to PCI Express. Must be hardwired to 0b.
                                                   Set to 1 (by a completer) whenever completing a request in the I/O bridge side
                         Signaled Target           using Completer Abort Completion Status.
               27                           RWC
                         Abort
                                                   Reset to 0b.
                         Received Target           It is not implemented. Hardwired to 0b.
               28                           RWC
                         Abort
                         Received Master           It is not implemented. Hardwired to 0b.
               29                           RWC
                         Abort
                                                   Set to 1 when the I/O bridge sends an ERR_FATAL or ERR_NONFATAL
                         Signaled System           Message, and the SERR Enable bit in the Command register is 1.
               30                           RWC
                         Error
                                                   Reset to 0b.
                                                   Set to 1 whenever the I/O bridge receives a Poisoned TLP.
                         Detected Parity
               31                           RWC
                         Error
                                                   Reset to 0b.
7.3.5        REVISION ID REGISTER – OFFSET 08h
               BIT        FUNCTION           TYPE     DESCRIPTION
               7:0        Revision           RO       Indicates revision number of the I/O bridge. The default value may be
                                                      changed by SMBUS or auto-loading from EEPROM.
                                                      Reset to 00h.
7.3.6        CLASS CODE REGISTER – OFFSET 08h
               BIT        FUNCTION           TYPE     DESCRIPTION
               15:8       Programming         RO      Read as 10h to indicate no programming interfaces have been defined for
                          Interface                   OHCI controllers.
                                                      Read as 20h to indicate no programming interfaces have been defined for
                                                      EHCI controllers.
                                                      The default value may be changed by SMBUS or auto-loading from
                                                      EEPROM.
               23:16      Sub-Class Code      RO      Read as 03h to indicate device is USB bus controller. The default value may
                                                      be changed by SMBUS or auto-loading from EEPROM.
               31:24      Base Class Code     RO      Read as 0Ch to indicate device is a serial bus controller. The default value
                                                      may be changed by SMBUS or auto-loading from EEPROM.
7.3.7        CACHE LINE REGISTER – OFFSET 0Ch
               BIT        FUNCTION           TYPE     DESCRIPTION
                                                      The cache line size register is set by the system firmware and the operating
                                                      system to system cache line size. This field is implemented by PCI Express
                                                      devices as a RW field for legacy compatibility purposes but has no impact on
               7:0        Cache Line Size     RW
                                                      any PCI Express device functionality.
                                                      Reset to 00h.
PI7C9X440SL                                       Page 80 of 102                                                   January 2018
Document Number DS40394 Rev 3-2                  www.diodes.com                                                © Diodes Incorporated


                                                                                                                    PI7C9X440SL
7.3.8        MASTER LATENCY TIMER REGISTER – OFFSET 0Ch
               BIT        FUNCTION              TYPE    DESCRIPTION
               15:8       Latency timer          RO     Does not apply to PCI Express. Must be hardwired to 00h.
7.3.9        HEADER TYPE REGISTER – OFFSET 0Ch
               BIT        FUNCTION              TYPE    DESCRIPTION
               23:16      Header Type            RO     Read as 80h to indicate it is a multi-function device.
7.3.10       BASE ADDRESS REGISTER 0 – OFFSET 10h (Func 0 and Func 1)
               BIT       FUNCTION             TYPE   DESCRIPTION
               11:0      Base Address 0        RO    Reset to 000h.
                                                     Use this I/O base address to map the OHCI registers.
               31:12     Base Address 0        RW
                                                     Reset to 00000h.
7.3.11       BASE ADDRESS REGISTER 0 – OFFSET 10h (Func 2 Only)
               BIT       FUNCTION             TYPE   DESCRIPTION
               7:0       Base Address 0        RO    Reset to 00h.
                                                     Use this I/O base address to map the EHCI registers.
               31:8      Base Address 0        RW
                                                     Reset to 000000h.
7.3.12       SUBSYSTEM VENDOR REGISTER – OFFSET 2Ch
               BIT       FUNCTION              TYPE   DESCRIPTION
                                                      Indicates the sub-system vendor id. The default value may be changed by
                                                      SMBUS or auto-loading from EEPROM.
               15:0      Sub Vendor ID          RO
                                                      Reset to 12D8h.
7.3.13       SUBSYSTEM ID REGISTER – OFFSET 2Ch
               BIT       FUNCTION              TYPE   DESCRIPTION
                                                      Indicates the sub-system device id. The default value may be changed by
                                                      SMBUS or auto-loading from EEPROM.
               31:16     Sub System ID          RO
                                                      Reset to 400Eh for OHCI (Func 0 /Func 1)
                                                      Reset to 400Fh for EHCI (Func 2)
7.3.14       CAPABILITIES POINTER REGISTER – OFFSET 34h
               BIT       FUNCTION              TYPE   DESCRIPTION
                                                      This optional register points to a linked list of new capabilities implemented
                                                      by the device. This default value may be changed by SMBUS or auto-loading
               7:0       Capabilities Pointer   RO    from EEPROM.
                                                      The default value is 80h.
PI7C9X440SL                                          Page 81 of 102                                                    January 2018
Document Number DS40394 Rev 3-2                     www.diodes.com                                                © Diodes Incorporated


                                                                                                                    PI7C9X440SL
7.3.15       INTERRUPT LINE REGISTER – OFFSET 3Ch
               BIT        FUNCTION            TYPE    DESCRIPTION
               7:0        Interrupt Line       RW     Used to communicate interrupt line routing information. POST software will
                                                      write the routing information into this register as it initializes and configures
                                                      the system.
                                                      Reset to 00h.
7.3.16       INTERRUPT PIN REGISTER – OFFSET 3Ch
               BIT        FUNCTION            TYPE    DESCRIPTION
                                                      Identifies the legacy interrupt Message(s) the device uses.
               15:8       Interrupt Pin        RO     Reset to 01h for Func 0.
                                                      Reset to 02h for Func 1
                                                      Reset to 03h for Func 2
7.3.17       SERIAL BUS RELEASE NUMBER REGISTER – OFFSET 60h (Func 2 Only)
               BIT       FUNCTION           TYPE   DESCRIPTION
                                                   Release Number. All other combinations are reserved.
                         Serial Bus Release
               7:0                           RO
                         Number
                                                   Reset to 20h
7.3.18       FRAME LENGTH ADJUSTMENT REGISTER – OFFSET 60h (Func 2 Only)
               BIT       FUNCTION           TYPE   DESCRIPTION
                                                   Frame Length Timing Value. Each decimal value change to this register
                                                   corresponds to 16 high-speed bit times. The SOF cycle time (number of SOF
                                                   counter clock periods to generate a SOF micro-frame length) is equal to 59488 +
                                                   value in this field. The default value is 32 (20h), which gives a SOF cycle time of
                                                   6000.
                                                               Frame Length              FLADJ Value
                                                          (# High Speed bit times)         (Decimal)
                         Frame Length                            (decimal)
               13:8                          RW                    59488                     0 (00h)
                         Adjustment                                59504                     1 (01h)
                                                                   59520                     2 (02h)
                                                                     …
                                                                   59984                    31 (1Fh)
                                                                   60000                    32 (20h)
                                                                     …
                                                                   60480                    62 (3Eh)
                                                                   60496                    63 (3Fh)
                                                   Reset to 20h
               15:14     Reserved            RO    Reset to 0
7.3.19       PORT WAKE CAPABILITY REGISTER – OFFSET 60h (Func 2 Only)
               BIT       FUNCTION           TYPE   DESCRIPTION
                                                   Bit position zero of this register indicates whether the register is implemented. A
                         Port Wake                 one in bit position zero indicates that the register is implemented. Bit positions 1
               20:16                         RW
                         Capability Mask           through 4 correspond to a physical port implemented on this host controller. For
                                                   example, bit position 1 corresponds to port 1, position 2 to port 2, etc.
PI7C9X440SL                                        Page 82 of 102                                                     January 2018
Document Number DS40394 Rev 3-2                   www.diodes.com                                                  © Diodes Incorporated


                                                                                                                    PI7C9X440SL
               BIT       FUNCTION             TYPE    DESCRIPTION
                                                      Reset to Fh
               31:21     Reserved               RO    Reset to 0
7.3.20       MISCELLANEOUS REGISTER – OFFSET 68h (Func 2 Only)
               BIT       FUNCTION                  TYPE     DESCRIPTION
                                                            When set, only one USB controller will active at the same time. Otherwise,
                                                            all USB controllers allow active at the same time. The default value may be
               0         Enable Basic Mode          RW      changed by SMBUS or auto-loading from EEPROM.
                                                            Reset to 0b.
                                                            When set, the max_read_request_size is set to 64 byte. The default value
                                                            may be changed by SMBUS or auto-loading from EEPROM.
               1         Enable Boundary 64-byte    RW
                                                            Reset to 0b.
                                                            When set, EHCI will enable the prefetect function. The default value may
                                                            be changed by SMBUS or auto-loading from EEPROM.
               2         Enable EHCI Prefetch       RW
                                                            Reset to 0b.
               3         Reserved                   RW      Reset to 0b.
                                                            When set, the user-defined max_read_request_size value is employed. The
                         Enable User                        default value may be changed by SMBUS or auto-loading from EEPROM.
               4                                    RW
                         Max_Read_Request_Size
                                                            Reset to 0b.
                                                            A 2-bit register contains a user-defined value. The default value may be
                                                            changed by SMBUS or auto-loading from EEPROM.
                                                            00b: 128 byte
                         User
               6:5                                  RW      01b: Reserved
                         Max_Read_Request_Size
                                                            10b: Reserved
                                                            11b: Reserved
                                                            Reset to 00b.
               7         Reserved                   RO      Reset to 0
                                                            A 7-bit register contains a user-defined value for the prefetch size and the
                                                            unit is dword. The default value may be changed by SMBUS or auto-
               14:8      Prefetch DW Size           RW      loading from EEPROM.
                                                            Reset to 10h.
               15        Reserved                   RW      Reset to 1b.
               31:16     Reserved                   RO      Reset to 0000h.
7.3.21       POWER MANAGEMENT CAPABILITY ID REGISTER – OFFSET 80h
               BIT        FUNCTION               TYPE   DESCRIPTION
                          Enhanced                      Read as 01h to indicate that these are power management enhanced capability
               7:0                                RO
                          Capabilities ID               registers.
7.3.22       NEXT ITEM POINTER REGISTER – OFFSET 80h
               BIT        FUNCTION               TYPE   DESCRIPTION
                                                        The pointer points to the Message capability register (8Ch). The default value
                                                        may be changed by SMBUS or auto-loading from EEPROM.
               15:8       Next Item Pointer       RO
                                                        Reset to 8Ch.
PI7C9X440SL                                           Page 83 of 102                                                   January 2018
Document Number DS40394 Rev 3-2                      www.diodes.com                                                © Diodes Incorporated


                                                                                                              PI7C9X440SL
7.3.23       POWER MANAGEMENT CAPABILITIES REGISTER – OFFSET 80h
               BIT        FUNCTION         TYPE   DESCRIPTION
                          Power Management        Read as 011b to indicate the I/O bridge is compliant to Revision 1.1 of PCI
               18:16                        RO
                          Revision                Power Management Interface Specifications.
               19         PME# Clock        RO    Does not apply to PCI Express. Must be hardwired to 0b.
               20         Reserved          RO    Reset to 0b.
                                                  Read as 0b to indicate the I/O bridge does not have device specific
                          Device Specific
               21                           RO    initialization requirements. The default value may be changed by SMBUS or
                          Initialization
                                                  auto-loading from EEPROM.
                                                  Reset as 111b to indicate the I/O bridge need 375 mA in D3 state. The default
               24:22      AUX Current       RO
                                                  value may be changed by SMBUS or auto-loading from EEPROM.
                                                  Read as 1b to indicate the I/O bridge supports the D1 power management
                          D1 Power State
               25                           RO    state. The default value may be changed by SMBUS or auto-loading from
                          Support
                                                  EEPROM.
                                                  Read as 1b to indicate the I/O bridge supports the D2 power management
                          D2 Power State
               26                           RO    state. The default value may be changed by SMBUS or auto-loading from
                          Support
                                                  EEPROM.
                                                  Read as 11111b to indicate the I/O bridge supports the forwarding of PME#
               31:27      PME# Support      RO    message in all power states. The default value may be changed by SMBUS or
                                                  auto-loading from EEPROM.
7.3.24       POWER MANAGEMENT DATA REGISTER – OFFSET 84h
               BIT        FUNCTION         TYPE   DESCRIPTION
                                                  Indicates the current power state of the I/O bridge. Writing a value of D0
                                                  causes a hot reset without asserting PEREST_L when the previous state was
                                                  D3.
                                                  00b: D0 state
               1:0        Power State       RW
                                                  01b: D1 state
                                                  10b: D2 state
                                                  11b: D3 hot state
                                                  Reset to 00b.
               2          Reserved          RO    Read as 0b.
                                                  When set, this bit indicates that I/O bridge transitioning from D3hot to D0
                                                  does not perform an internal reset.
                                                  When clear, an internal reset is performed when power state transits from
               3          No_Soft_Reset     RO    D3hot to D0. The default value may be changed by SMBUS or auto-loading
                                                  from EEPROM.
                                                  Reset to 1b.
               7:4        Reserved          RO    Read as 0h.
                                                  When asserted, the I/O bridge will generate the PME# message.
               8          PME# Enable       RW
                                                  Reset to 0b.
                                                  Select data registers.
               12:9       Data Select       RW
                                                  Reset to 0h.
               14:13      Data Scale        RO    Read as 00b.
                                                  Indicates that the PME# message is pending internally to the I/O bridge for
                                                  Func 0 and Func 1.
                                           RWC /  This bit is reserved for Func 2 and always read as 0.
               15         PME status
                                            RO
                                                  Reset to 0b (RWC) for OHCI (Func 0 /Func 1).
                                                  Read as 0b (RO) for EHCI (Func 2)
PI7C9X440SL                                     Page 84 of 102                                                  January 2018
Document Number DS40394 Rev 3-2                www.diodes.com                                               © Diodes Incorporated


                                                                                                               PI7C9X440SL
7.3.25       PPB SUPPORT EXTENSIONS – OFFSET 84h
               BIT        FUNCTION           TYPE    DESCRIPTION
               21:16      Reserved            RO     Reset to 000000b.
                          B2_B3 Support for          Does not apply to PCI Express. Must be hardwired to 0b.
               22                             RO
                          D3HOT
                          Bus Power / Clock          Does not apply to PCI Express. Must be hardwired to 0b.
               23                             RO
                          Control Enable
7.3.26       PM DATA REGISTER – OFFSET 84h
               BIT        FUNCTION           TYPE    DESCRIPTION
                                                     PM Data Register.
               31:24      PM Data Register    RO
                                                     Reset to 00h
7.3.27       MESSAGE SIGNALED INTERRUPT (MSI) Capability ID Register 8Ch
               BIT       FUNCTION           TYPE   DESCRIPTION
                                                   Read as 05h to indicate that this is Message Signaled Interrupt capability
                         Enhanced                  register.
               7:0                           RO
                         Capability ID
                                                   The MSI Function is not implemented on this device.
7.3.28       MESSAGE SIGNALED INTERRUPT (MSI) NEXT ITEM POINTER 8Ch
               BIT        FUNCTION           TYPE    DESCRIPTION
                                                     The pointer points to the PCI Express capability register (E0h). The default
                                                     value may be changed by SMBUS or auto-loading from EEPROM.
               15:8       Next Item Pointer   RO
                                                     Reset to E0h.
7.3.29       MESSAGE CONTROL REGISTER – OFFSET 8Ch
               BIT        FUNCTION           TYPE    DESCRIPTION
                                                     The MSI Function is not implemented on this device.
               16         MSI Enable          RW
                                                     Reset to 0b.
                                                     The MSI Function is not implemented on this device.
                          Multiple Message
               19:17                          RO
                          Capable
                                                     Read as 000b.
                                                     The MSI Function is not implemented on this device.
                          Multiple Message
               22:20                          RW
                          Enable
                                                     Reset to 000b.
                                                     The MSI Function is not implemented on this device.
                          64-bit address
               23                             RO
                          capable
                                                     Reset to 0b.
               31:24      Reserved            RO     Reset to 00h.
7.3.30       MESSAGE ADDRESS REGISTER – OFFSET 90h
               BIT        FUNCTION           TYPE    DESCRIPTION
               1:0        Reserved           RO      Reset to 00b.
PI7C9X440SL                                       Page 85 of 102                                                 January 2018
Document Number DS40394 Rev 3-2                  www.diodes.com                                              © Diodes Incorporated


                                                                                                            PI7C9X440SL
               BIT        FUNCTION             TYPE    DESCRIPTION
                                                       The MSI Function is not implemented on this device.
               31:2       Message Address      RW
                                                       Reset to 0.
7.3.31       MESSAGE DATA REGISTER – OFFSET 94h
               BIT       FUNCTION            TYPE   DESCRIPTION
                                                    The MSI Function is not implemented on this device.
               15:0      Message Data         RW
                                                    Reset to 0000h.
7.3.32       USB PHYSICAL LAYER CONTROL REGISTER (USB PORT 1) – OFFSET
             A0h
               BIT       FUNCTION            TYPE   DESCRIPTION
                         PMOS Strength for          Reset to 0b. The default value may be changed by SMBUS or auto-loading from
               0         HS Driver Timing     RO    EEPROM.
                         Control
                         NMOS Strength for    RO    Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               2:1       HS Driver Timing           EEPROM.
                         Control
                         HS Driver            RO    Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               4:3
                         Amplitude                  EEPROM.
                         HS Driver Slope      RO    Reset to 0000b. The default value may be changed by SMBUS or auto-loading
               8:5
                         Control                    from EEPROM.
                         Reference Voltage    RO    Reset to 10b. The default value may be changed by SMBUS or auto-loading from
               10:9      for Disconnect             EEPROM.
                         Circuit
                         Reference Voltage    RO    Reset to 10b. The default value may be changed by SMBUS or auto-loading from
               12:11
                         for Squelch Circuit        EEPROM.
                         Reference Voltage    RO    Reset to 100b. The default value may be changed by SMBUS or auto-loading
               15:13     for Calibration            from EEPROM.
                         Circuit
                         Charge Pump          RO    Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               17:16
                         Current for PLL            EEPROM.
                         FS Rise/Fall Time    RO    Reset to 01b. The default value may be changed by SMBUS or auto-loading from
               19:18
                         Control                    EEPROM.
                         LS Rise/Fall Time    RO    Reset to 01b. The default value may be changed by SMBUS or auto-loading from
               21:20
                         Control                    EEPROM.
                         HS Driver Pre-       RO    Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               23:22
                         Emphasis                   EEPROM.
7.3.33       USB PHYSICAL LAYER CONTROL REGISTER (USB PORT 2) – OFFSET
             A4h
               BIT       FUNCTION            TYPE   DESCRIPTION
                         PMOS Strength for          Reset to 0b. The default value may be changed by SMBUS or auto-loading from
               0         HS Driver Timing     RO    EEPROM.
                         Control
                         NMOS Strength for    RO    Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               2:1       HS Driver Timing           EEPROM.
                         Control
                         HS Driver            RO    Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               4:3
                         Amplitude                  EEPROM.
                         HS Driver Slope      RO    Reset to 0000b. The default value may be changed by SMBUS or auto-loading
               8:5
                         Control                    from EEPROM.
                         Reference Voltage    RO    Reset to 10b. The default value may be changed by SMBUS or auto-loading from
               10:9
                         for Disconnect             EEPROM.
PI7C9X440SL                                         Page 86 of 102                                             January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                          © Diodes Incorporated


                                                                                                          PI7C9X440SL
               BIT       FUNCTION            TYPE  DESCRIPTION
                         Circuit
                         Reference Voltage    RO   Reset to 10b. The default value may be changed by SMBUS or auto-loading from
               12:11
                         for Squelch Circuit       EEPROM.
                         Reference Voltage    RO   Reset to 100b. The default value may be changed by SMBUS or auto-loading
               15:13     for Calibration           from EEPROM.
                         Circuit
                         Charge Pump          RO   Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               17:16
                         Current for PLL           EEPROM.
                         FS Rise/Fall Time    RO   Reset to 01b. The default value may be changed by SMBUS or auto-loading from
               19:18
                         Control                   EEPROM.
                         LS Rise/Fall Time    RO   Reset to 01b. The default value may be changed by SMBUS or auto-loading from
               21:20
                         Control                   EEPROM.
                         HS Driver Pre-       RO   Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               23:22
                         Emphasis                  EEPROM.
7.3.34       USB PHYSICAL LAYER CONTROL REGISTER (USB PORT 3) – OFFSET
             A8h
               BIT       FUNCTION            TYPE  DESCRIPTION
                         PMOS Strength for         Reset to 0b. The default value may be changed by SMBUS or auto-loading from
               0         HS Driver Timing     RO   EEPROM.
                         Control
                         NMOS Strength for    RO   Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               2:1       HS Driver Timing          EEPROM.
                         Control
                         HS Driver            RO   Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               4:3
                         Amplitude                 EEPROM.
                         HS Driver Slope      RO   Reset to 0000b. The default value may be changed by SMBUS or auto-loading
               8:5
                         Control                   from EEPROM.
                         Reference Voltage    RO   Reset to 10b. The default value may be changed by SMBUS or auto-loading from
               10:9      for Disconnect            EEPROM.
                         Circuit
                         Reference Voltage    RO   Reset to 10b. The default value may be changed by SMBUS or auto-loading from
               12:11
                         for Squelch Circuit       EEPROM.
                         Reference Voltage    RO   Reset to 100b. The default value may be changed by SMBUS or auto-loading
               15:13     for Calibration           from EEPROM.
                         Circuit
                         Charge Pump          RO   Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               17:16
                         Current for PLL           EEPROM.
                         FS Rise/Fall Time    RO   Reset to 01b. The default value may be changed by SMBUS or auto-loading from
               19:18
                         Control                   EEPROM.
                         LS Rise/Fall Time    RO   Reset to 01b. The default value may be changed by SMBUS or auto-loading from
               21:20
                         Control                   EEPROM.
                         HS Driver Pre-       RO   Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               23:22
                         Emphasis                  EEPROM.
7.3.35       USB PHYSICAL LAYER CONTROL REGISTER (USB PORT 4) – OFFSET
             ACh
               BIT       FUNCTION            TYPE  DESCRIPTION
                         PMOS Strength for         Reset to 0b. The default value may be changed by SMBUS or auto-loading from
               0         HS Driver Timing     RO   EEPROM.
                         Control
                         NMOS Strength for    RO   Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               2:1       HS Driver Timing          EEPROM.
                         Control
                         HS Driver            RO   Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               4:3
                         Amplitude                 EEPROM.
                         HS Driver Slope      RO   Reset to 0000b. The default value may be changed by SMBUS or auto-loading
               8:5
                         Control                   from EEPROM.
PI7C9X440SL                                       Page 87 of 102                                             January 2018
Document Number DS40394 Rev 3-2                   www.diodes.com                                         © Diodes Incorporated


                                                                                                                PI7C9X440SL
               BIT       FUNCTION            TYPE   DESCRIPTION
                         Reference Voltage    RO    Reset to 10b. The default value may be changed by SMBUS or auto-loading from
               10:9      for Disconnect             EEPROM.
                         Circuit
                         Reference Voltage    RO    Reset to 10b. The default value may be changed by SMBUS or auto-loading from
               12:11
                         for Squelch Circuit        EEPROM.
                         Reference Voltage    RO    Reset to 100b. The default value may be changed by SMBUS or auto-loading
               15:13     for Calibration            from EEPROM.
                         Circuit
                         Charge Pump          RO    Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               17:16
                         Current for PLL            EEPROM.
                         FS Rise/Fall Time    RO    Reset to 01b. The default value may be changed by SMBUS or auto-loading from
               19:18
                         Control                    EEPROM.
                         LS Rise/Fall Time    RO    Reset to 01b. The default value may be changed by SMBUS or auto-loading from
               21:20
                         Control                    EEPROM.
                         HS Driver Pre-       RO    Reset to 00b. The default value may be changed by SMBUS or auto-loading from
               23:22
                         Emphasis                   EEPROM.
7.3.36       PCI EXPRESS CAPABILITY ID REGISTER – OFFSET E0h
               BIT        FUNCTION             TYPE    DESCRIPTION
                                                       Read as 10h to indicate that these are PCI express enhanced capability
                          Enhanced
               7:0                              RO     registers. The default value may be changed by SMBUS or auto-loading from
                          Capabilities ID
                                                       EEPROM.
7.3.37       NEXT ITEM POINTER REGISTER – OFFSET E0h
               BIT        FUNCTION             TYPE    DESCRIPTION
                                                       Read as 00h. No other ECP registers. The default value may be changed by
                                                       SMBUS or auto-loading from EEPROM.
               15:8       Next Item Pointer     RO
                                                       Reset to 00h.
7.3.38       PCI EXPRESS CAPABILITIES REGISTER – OFFSET E0h
               BIT        FUNCTION             TYPE    DESCRIPTION
                                                       Read as 0001b to indicate the I/O bridge is compliant to Revision 1.0a of PCI
               19:16      Capability Version    RO     Express Base Specifications. The default value may be changed by SMBUS
                                                       or auto-loading from EEPROM.
                                                       Indicates the type of Legacy PCI Express Endpoint device. The default value
                                                       may be changed by SMBUS or auto-loading from EEPROM.
               23:20      Device/Port Type      RO
                                                       Reset to 1h.
               24         Slot Implemented      RO     It is not implemented. Hardwired to 0b.
                          Interrupt Message            It is not implemented. Hardwired to 00000b.
               29:25                            RO
                          Number
               31:30      Reserved              RO     Reset to 00b.
7.3.39       DEVICE CAPABILITIES REGISTER – OFFSET E4h
               BIT        FUNCTION            TYPE    DESCRIPTION
                                                      Indicates the maximum payload size that the I/O bridge can support for TLPs.
                                                      The I/O bridge supports 256 bytes max payload size. The default value may be
                          Max_Payload_Size
               2:0                             RO     changed by SMBUS or auto-loading from EEPROM.
                          Supported
                                                      Reset to 001b.
PI7C9X440SL                                         Page 88 of 102                                                 January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                              © Diodes Incorporated


                                                                                                              PI7C9X440SL
               BIT       FUNCTION            TYPE   DESCRIPTION
                         Phantom Functions          It is not implemented. Hardwired to 00b.
               4:3                            RO
                         Supported
                         Extended Tag Field         It is not implemented. Hardwired to 0b.
               5                              RO
                         Supported
                                                    Acceptable total latency that an Endpoint can withstand due to the transition
                                                    from L0s state to the L0 state. The default value may be changed by SMBUS or
                         Endpoint L0s
               8:6                            RO    auto-loading from EEPROM.
                         Acceptable Latency
                                                    Reset to 000b.
                                                    Acceptable total latency that an Endpoint can withstand due to the transition
                                                    from L1 state to the L0 state. The default value may be changed by SMBUS or
                         Endpoint L1
               11:9                           RO    auto-loading from EEPROM.
                         Acceptable Latency
                                                    Reset to 000b.
                         Attention Button           It is not implemented. Hardwired to 0b.
               12                             RO
                         Present
                         Attention Indicator        It is not implemented. Hardwired to 0b.
               13                             RO
                         Present
                         Power Indicator            It is not implemented. Hardwired to 0b.
               14                             RO
                         Present
                                                    When set, indicated that the device implements the functionality originally
                                                    defined in the Error Reporting ECN. The default value may be changed by
                         Role_Base Error
               15                             RO    SMBUS or auto-loading from EEPROM.
                         Reporting
                                                    Reset to 1b.
               17:16     Reserved             RO    Reset to 00b.
                                                    In combination with the Slot Power Limit Scale value, specifies the upper limit
                                                    on power supplied by slot.
                         Captured Slot Power
               25:18                          RO    This value is set by the Set_Slot_Power_Limit message or hardwired to “00h”.
                         Limit Value
                                                    The default value may be changed by SMBUS or auto-loading from EEPROM.
                                                    Reset to 00b.
                                                    Specifies the scale used for the Slot Power Limit Value.
                         Captured Slot Power        This value is set by the Set_Slot_Power_Limit message or hardwired to “00b”.
               27:26                          RO
                         Limit Scale                The default value may be changed by SMBUS or auto-loading from EEPROM.
                                                    Reset to 00b.
               31:28     Reserved             RO    Reset to 0h.
7.3.40       DEVICE CONTROL REGISTER – OFFSET E8h
               BIT       FUNCTION            TYPE   DESCRIPTION
                                                    0b: Disable Correctable Error Reporting.
                                                    1b: Enable Correctable Error Reporting.
                         Correctable Error
               0                              RW    The default value may be changed by SMBUS or auto-loading from EEPROM.
                         Reporting Enable
                                                    Reset to 0b.
                                                    0b: Disable Non-Fatal Error Reporting.
                                                    1b: Enable Non-Fatal Error Reporting.
                         Non-Fatal Error
               1                              RW    The default value may be changed by SMBUS or auto-loading from EEPROM.
                         Reporting Enable
                                                    Reset to 0b.
                                                    0b: Disable Fatal Error Reporting.
                                                    1b: Enable Fatal Error Reporting.
                         Fatal Error
               2                              RW    The default value may be changed by SMBUS or auto-loading from EEPROM.
                         Reporting Enable
                                                    Reset to 0b.
                                                    0b: Disable Unsupported Request Reporting.
                         Unsupported                1b: Enable Unsupported Request Reporting.
               3         Request Reporting    RW    The default value may be changed by SMBUS or auto-loading from EEPROM.
                         Enable
                                                    Reset to 0b.
PI7C9X440SL                                       Page 89 of 102                                                 January 2018
Document Number DS40394 Rev 3-2                   www.diodes.com                                             © Diodes Incorporated


                                                                                                                   PI7C9X440SL
               BIT       FUNCTION              TYPE   DESCRIPTION
                         Enable Relaxed
               4                                RW
                         Ordering                     Reset to 1b.
                                                      This field sets maximum TLP payload size for the device. Permissible values
                                                      that can be programmed are indicated by the Max_Payload_Size Supported in
                                                      the Device Capabilities register. Any value exceeding the Max_Payload_Size
                                                      Supported written to this register results into clamping to the Max_Payload_Size
               7:5       Max_Payload_Size       RW
                                                      Supported value. The default value may be SMBUS or changed by auto-loading
                                                      from EEPROM.
                                                      Reset to 000b.
                         Extended Tag Field           It is not implemented. Hardwired to 0b.
               8                                RO
                         Enable
                         Phantom Function             It is not implemented. Hardwired to 0b.
               9                                RO
                         Enable
                                                      When set, indicates that the I/O bridge is enabled to draw AUX power
                                                      independent of PME AUX power. The default value may be changed by
                         Auxiliary (AUX)
               10                               RO    SMBUS or auto-loading from EEPROM.
                         Power PM Enable
                                                      Reset to 0b.
               11        Enable No Snoop        RO    It is not implemented. Hardwired to 0b.
                         Max_Read_
               14:12                            RO
                         Request_Size                 Reset to 000b.
               15        Reserved               RO    Reset to 0b.
7.3.41       DEVICE STATUS REGISTER – OFFSET E8h
               BIT        FUNCTION              TYPE    DESCRIPTION
                                                        Asserted when correctable error is detected. Errors are logged in this register
                                                        regardless of whether error reporting is enabled or not in the Device Control
                          Correctable Error
               16                               RW1C    register.
                          Detected
                                                        Reset to 0b.
                                                        Asserted when non-fatal error is detected. Errors are logged in this register
                                                        regardless of whether error reporting is enabled or not in the Device Control
                          Non-Fatal Error
               17                               RW1C    register.
                          Detected
                                                        Reset to 0b.
                                                        Asserted when fatal error is detected. Errors are logged in this register
                                                        regardless of whether error reporting is enabled or not in the Device Control
               18         Fatal Error Detected  RW1C    register.
                                                        Reset to 0b.
                                                        Asserted when unsupported request is detected. Errors are logged in this
                                                        register regardless of whether error reporting is enabled or not in the Device
                          Unsupported Request
               19                               RW1C    Control register.
                          Detected
                                                        Reset to 0b.
                                                        Asserted when the AUX power is detected by the I/O bridge
                          AUX Power
               20                                RO
                          Detected
                                                        Reset to 1b.
               21         Transactions Pending   RO     It is not implemented. Hardwired to 0b.
               31:22      Reserved               RO     Reset to 000h.
7.3.42       LINK CAPABILITIES REGISTER – OFFSET ECh
               BIT        FUNCTION              TYPE    DESCRIPTION
                                                        Indicates the Maximum Link Speed of the given PCIe Link.
                          Maximum Link
               3:0                               RO     Defined encodings are: 0001b, which indicates 2.5 Gb/s Link
                          Speed
                                                        Reset to 1h.
PI7C9X440SL                                          Page 90 of 102                                                  January 2018
Document Number DS40394 Rev 3-2                     www.diodes.com                                               © Diodes Incorporated


                                                                                                              PI7C9X440SL
               BIT        FUNCTION           TYPE   DESCRIPTION
                                                    Indicates the maximum width of the given PCIe Link.
                          Maximum Link
                9:4                           RO
                          Width
                                                    Reset to 000001b (x1).
                                                    Indicates the level of ASPM supported on the given PCIe Link. The I/O
                          Active State Power        bridge supports L0s and L1 entry. The default value may be changed by
               11:10      Management          RO    SMBUS or auto-loading from EEPROM.
                          (ASPM) Support
                                                    Reset to 01b.
                                                    Indicates the L0s exit latency for the given PCIe Link. The length of time this
                                                    I/O bridge requires to complete transition from L0s to L0 is in the range of
                                                    256ns to less than 512ns. The default value may be changed by SMBUS or
               14:12      L0s Exit Latency    RO
                                                    auto-loading from EEPROM.
                                                    Reset to 011b.
                                                    Indicates the L1 exit latency for the given PCIe Link. The length of time this
                                                    I/O bridge requires to complete transition from L1 to L0 is in the range of
                          L1 Exit                   16us to less than 32us. The default value may be changed by SMBUS or auto-
               17:15                          RO
                          Latency                   loading from EEPROM.
                                                    Reset to 000b.
               23:18      Reserved            RO    Reset to 00000b.
               31:24      Port Number         RO    It is not implemented. Hardwired to 00h.
7.3.43       LINK CONTROL REGISTER – OFFSET F0h
               BIT        FUNCTION           TYPE   DESCRIPTION
                                                    00b: ASPM is Disabled.
                                                    01b: L0s Entry Enabled.
                                                    10b: L1 Entry Enabled.
                          Active State Power        11b: L0s and L1 Entry Enabled.
               1:0        Management          RW
                          (ASPM) Control            Note that the receiver must be capable of entering L0s even when the field is
                                                    disabled.
                                                    Reset to 00b.
               2          Reserved            RO    Reset to 0h.
                          Read Completion           It is not implemented. Hardwired to 0b.
               3                              RO
                          Boundary (RCB)
               4          Link Disable        RW    Reset to 0b.
               5          Retrain Link        RW    Reset to 0b.
                                                    0b: The components at both ends of a link are operating with asynchronous
                                                    reference clock.
                          Common Clock              1b: The components at both ends of a link are operating with a distributed
               6                              RW
                          Configuration             common reference clock.
                                                    Reset to 0b.
                                                    When set, it transmits 4096 FTS ordered sets in the L0s state for entering L0
                                                    state and transmits 1024 TS1 ordered sets in the L1 state for entering L0 state
               7          Extended Synch      RW
                                                    Reset to 0b.
               15:8       RsvdP               RO    Reset to 00h.
7.3.44       LINK STATUS REGISTER – OFFSET F0h
               BIT        FUNCTION           TYPE   DESCRIPTION
                                                    Indicates the negotiated Link Speed of the given PCIe Link.
               19:16      Link Speed          RO    Defined encodings are: 0001b, which indicates 2.5 Gb/s Link
                                                    Reset to 1h.
PI7C9X440SL                                       Page 91 of 102                                                January 2018
Document Number DS40394 Rev 3-2                  www.diodes.com                                             © Diodes Incorporated


                                                                                                           PI7C9X440SL
               BIT        FUNCTION        TYPE   DESCRIPTION
                                                 Indicates the negotiated width of the given PCIe Link,
                          Negotiated Link
               25:20                       RO
                          Width
                                                 Reset to 000001b.
                                                 When set, indicates a Link training error occurred.
                                                 This bit is cleared by hardware upon successful training of the link to the L0
               26         Training Error   RO    link state.
                                                 Reset to 0b.
                                                 When set, indicates the link training is in progress. Hardware clears this bit
                                                 once link training is complete.
               27         Link Training    RO
                                                 Reset to 0b.
                          Slot Clock             It is not implemented. Hardwired to 0b.
               28                          RO
                          Configuration
               31:29      Reserved         RO    Reset to 000b.
PI7C9X440SL                                    Page 92 of 102                                                 January 2018
Document Number DS40394 Rev 3-2               www.diodes.com                                              © Diodes Incorporated


                                                                                                                 PI7C9X440SL
8 CLOCK SCHEME
8.1    PCI EXPRESS INTERFACE
The PCI Express interface of PI7C9X440SL requires 100MHz differential clock inputs through REFCLKP and
REFCLKN Pins as shown in the following table.
       Table 8-1 Input Clock Requirements for PCI Express Interface
         Parameter                                     Symbol                     Min        Max.         Unit
         Reference Frequency(1)                        fj                         83.3      312.5         MHz
         Accuracy                                      Aj                        -300        +300          ppm
         Duty Cycle                                    DCj                         45         55            %
         > 1.5 MHz to Nyquist RMS jitter after         TREFCLK-HF-RMS               -         3.1        ps RMS
         applying PCIe filter function
         10 KHz – 1.5 MHz RMS jitter                   TREFCLK-LF-RMS               -         3.0        ps RMS
         Spread Spectrum Clock frequency               SSCfreq                     30         33          KHz
       (1) Does not include ±300ppm. Only certain clock frequencies will produce valid PCI Express data.
       (2) Specified as per PCI Express Card Electromechanical specification, Rev 1.1.
8.2    USB INTERFACE
PI7C9X440SL requires an external 12 MHz crystal or oscillator of ±60ppm tolerance.
       Table 8-2 Input Clock Requirements for USB Interface
         Parameter                           Condition                  Min          Typ.      Max.        Unit
         Clock deviation                                                -150                    150        ppm
         Rise/fall time                                                                         200         ps
         Jitter (peak-to-peak)               <1.2MHz                      0                      50         ps
         Jitter (peak-to-peak)               >1.2MHz                      0                     100         ps
         Duty-cycle                                                      40                      60         %
PI7C9X440SL                                                Page 93 of 102                                           January 2018
Document Number DS40394 Rev 3-2                           www.diodes.com                                        © Diodes Incorporated


                                                                                                              PI7C9X440SL
9 IEEE 1149.1 COMPATIBLE JTAG CONTROLLER
An IEEE 1149.1 compatible Test Access Port (TAP) controller and associated TAP pins are provided to support
boundary scan in PI7C9X440SL for board-level continuity test and diagnostics. The TAP pins assigned are TCK,
TDI, TDO, TMS and TRST_L. All digital input, output, input/output pins are tested except TAP pins.
9.1     INSTRUCTION REGISTER
The IEEE 1149.1 Test Logic consists of a TAP controller, an instruction register, and a group of test data registers
including Bypass and Boundary Scan registers. The TAP controller is a synchronous 16-state machine driven by the
Test Clock (TCK) and the Test Mode Select (TMS) pins. An independent power on reset circuit is provided to
ensure the machine is in TEST_LOGIC_RESET state at power-up.
PI7C9X440SL implements a 5-bit Instruction register to control the operation of the JTAG logic. The defined
instruction codes are shown in the following table. Those bit combinations that are not listed are equivalent to the
BYPASS (11111) instruction:
        Table 9-1 Instruction Register Codes
          Instruction Operation Code (binary)  Register Selected  Operation
          EXTEST                00000          Boundary Scan      Drives / receives off-chip test data
          SAMPLE                00001          Boundary Scan      Samples inputs / pre-loads outputs
          HIGHZ                 00101          Bypass             Tri-states output and I/O pins except TDO pin
          CLAMP                 00100          Bypass             Drives pins from boundary-scan register and selects Bypass
                                                                  register for shifts
          IDCODE                01100          Device ID          Accesses the Device ID register, to read manufacturer ID, part
                                                                  number, and version number
          BYPASS                11111          Bypass             Selected Bypass Register
          INT_SCAN              00010          Internal Scan      Scan test
          MEM_BIST              01010          Memory BIST        Memory BIST test
9.2     BYPASS REGISTER
     The required bypass register (one-bit shift register) provides the shortest path between TDI and TDO when a
     bypass instruction is in effect. This allows rapid movement of test data to and from other components on the
     board. This path can be selected when no test operation is being performed on the PI7C9X440SL.
9.3     DEVICE ID REGISTER
     This register identifies Pericom as the manufacturer of the device and details the part number and revision
     number for the device.
         Table 9-2 JTAG Device ID Register
          Bit         Type                     Value              Description
          31-28       RO                       0001               Version number
          27-12       RO                       1001001000000100   Last 4 digits (hex) of the die part number
          11-1        RO                       01000111111        Pericom identifier assigned by JEDEC
          0           RO                       1                  Fixed bit equal to 1’b1
PI7C9X440SL                                           Page 94 of 102                                             January 2018
Document Number DS40394 Rev 3-2                      www.diodes.com                                          © Diodes Incorporated


                                                                                                      PI7C9X440SL
9.4    BOUNDARY SCAN REGISTER
       The boundary scan register has a set of serial shift-register cells. A chain of boundary scan cells is formed by
       connected the internal signal of the PI7C9X440SL package pins. The VDD, VSS, and JTAG pins are not in
       the boundary scan chain. The input to the shift register is TDI and the output from the shift register is TDO.
       There are 4 different types of boundary scan cells, based on the function of each signal pin.
       The boundary scan register cells are dedicated logic and do not have any system function. Data may be
       loaded into the boundary scan register master cells from the device input pins and output pin-drivers in
       parallel by the mandatory SAMPLE and EXTEST instructions. Parallel loading takes place on the rising
       edge of TCK.
9.5    JTAG BOUNDARY SCAN REGISTER ORDER
       Table 9-3 JTAG Boundary Scan Register Definition
           Boundary Scan
          Register Number          Pin Name                 Pin No                   Type          Tri-state Control Cell
                  0                  TEST5                   114                     Input                     4
                  1                  IRQ1_I                   16                     Bidir                     4
                  2                 IRQ12_I                   17                     Bidir                     4
                  3                 IRQ1_O                    18                     Bidir                     4
                  4                                                                 Control
                  5                IRQ12_O                    19                     Bidir                     4
                  6             LEG_EMU_EN                    20                     Bidir                     4
                  7                SMBCLK                     21                     Bidir                     4
                  8               SMBDATA                     64                     Bidir                     4
                  9                  TEST3                    65                     Bidir                     4
                 10                  TEST6                    66                     Bidir                     4
                 11                 GPIO[0]                   69                     Bidir                    12
                 12                                                                 Control
                 13                 GPIO[1]                   70                     Bidir                    14
                 14                                                                 Control
                 15                 GPIO[2]                   71                     Bidir                    16
                 16                                                                 Control
                 17                 GPIO[3]                   72                     Bidir                    18
                 18                                                                 Control
                 19                 GPIO[4]                   73                     Bidir                    20
                 20                                                                 Control
                 21                 GPIO[5]                   74                     Bidir                    22
                 22                                                                 Control
                 23                 GPIO[6]                   75                     Bidir                    24
                 24                                                                 Control
                 25                 GPIO[7]                   76                     Bidir                    26
                 26                                                                 Control
                 27                  TEST4                    77                     Bidir                     4
                 28                                                                 Internal
                 29                                                                 Internal
                 30                                                                 Internal
                 31                  EECLK                    99                    Output2
                 32                   EEPD                    98                     Bidir                    33
                 33                                                                 Control
                 34                PERST_L                   104                     Input
                 35                                                                 Internal
                 36                                                                 Internal
                 37                                                                 Internal
                 38             MAIN_DETECT                   24                     Input
                 39                                                                 Internal
                 40                                                                 Internal
                 41                  TEST1                     1                     Bidir                     4
PI7C9X440SL                                        Page 95 of 102                                       January 2018
Document Number DS40394 Rev 3-2                    www.diodes.com                                   © Diodes Incorporated


                                                                   PI7C9X440SL
           Boundary Scan
          Register Number       Pin Name        Pin No   Type    Tri-state Control Cell
                 42                                     Internal
                 43             IO_HIT_I           3     Bidir               4
                 44              OCI[1]            4     Input
                 45              OCI[2]            5     Input
                 46              OCI[3]            6     Input
                 47              OCI[4]            7     Input
                 48              POE[1]           10     Bidir               4
                 49              POE[2]           11     Bidir               4
                 50              POE[3]           12     Bidir               4
                 51              POE[4]           13     Bidir               4
                 52              SMI_O            14     Bidir               4
                 53                                     Internal
PI7C9X440SL                              Page 96 of 102               January 2018
Document Number DS40394 Rev 3-2          www.diodes.com           © Diodes Incorporated


                                                                                               PI7C9X440SL
10 POWER MANAGEMENT
10.1 PCI EXPRESS POWER STATES
The PI7C9X440SL implements a full set of PCI Express power management capabilities including full support for
D0, D1, D2, D3-hot, and D3-cold Power States. The PCI Express Physical Link Layer of the PI7C9X440SL device
supports the PCI Express Link Power Management with L0, L0s, L1, L2/L3 ready and L3 Power States.
During the transition from D3-hot to D3-cold state, the main power supplies of VDDC and VDDR are turned off to
save power. PI7C9X440SL has been designed to have sticky registers that are powered by auxiliary power supplies.
PI7C9X440SL forwards power management messages to the upstream Switches or root complex.
PI7C9X440SL also supports ASPM (Active State Power Management) to facilitate the link power saving and PME
messaging.
10.2 USB POWER STATES
The EHCI Host Controller implements power management states compliant to PCI Bus Power Management
Interface Specification, Revision 1.1 including D0, D1, D2, and D3-hot.
The OHCI Host Controller implements the following power states via the operational registers: USB_Reset,
USB_Operational, USB_Suspend and USB_Resume. These states define the Host Controller’s responsibilities
relating to USB signaling and bus states. The OHCI Host Controller asserts the Power Management Event signal
(PME_L) whenever the power state is resumed to Operational State from Suspend State.
PI7C9X440SL                                        Page 97 of 102                                 January 2018
Document Number DS40394 Rev 3-2                   www.diodes.com                              © Diodes Incorporated


                                                                                                                     PI7C9X440SL
11 ELECTRICAL AND TIMING SPECIFICATIONS
11.1 ABSOLUTE MAXIMUM RATINGS
       Table 11-1 Absolute Maximum Ratings
       (Above which the useful life may be impaired. For user guidelines, not tested.)
         Item                                                                                             Absolute Max. Rating
         Storage Temperature                                                                                 -65oC to 150oC
         Junction Temperature, Tj                                                                                125 oC
         Digital core and analog supply voltage to ground potential (VDDC and AVDD)                           -0.3v to 1.2v
         Digital I/O and analog high supply voltage to ground potential (VDDR, VDDA and AVDDH)                -0.3v to 3.8v
         DC input voltage for Digital I/O signals                                                             -0.3v to 3.8v
       Note:
       Stresses greater than those listed under MAXIMUM RATINGS may cause permanent damage to the device. This is a
       stress rating only and functional operation of the device at these or any conditions above those indicated in the
       operational sections of this specification is not implied. Exposure to absolute maximum rating conditions for extended
       periods of time may affect reliability.
11.2 Operating Ambient Temperature
       Table 11-2 Operating Ambient Temperature
       (Above witch the useful life may be impaired.)
         Item                                                            Low        High          Unit
                                                                                                   o
         Ambient Temperature with power applied                          -40         85             C
       Note: Exposure to high temperature conditions for extended periods of time may affect reliability.
11.3 POWER CONSUMPTION
       Table 11-3 PI7C9X440SL Power Dissipation
         Mode                        Typical Power Dissipation (mW)
         L0 Normal Mode                                 432
11.4 DC SPECIFICATIONS
       Table 11-4 DC Electrical Characteristics
         Power Pins                 Min.                      Typ.                     Max.
         VDDC                       0.9v                      1.0v                     1.1v
         VDDR                       3.0v                      3.3v                     3.6v
         VDDA                       3.0v                      3.3v                     3.6v
         AVDD                       0.95v                     1.0v                     1.1v
         AVDDH                      3.0v                      3.3v                     3.6v
       VDDC: digital power supply for the core
       VDDR: digital power supply for 3.3v I/O Interface
       VDDA: analog power supply for 3.3v USB Interface
       AVDD: analog power supply for 1.0v PCI Express Interface
       AVDDH: analog power supply for 3.3v PCI Express Interface
PI7C9X440SL                                                  Page 98 of 102                                            January 2018
Document Number DS40394 Rev 3-2                             www.diodes.com                                         © Diodes Incorporated


                                                                                                                   PI7C9X440SL
       Table 11-5 DC Electrical Characteristics for Digital I/O
         Symbol            Parameter                                            Min.       Typ.          Max.
         VIH               Input High Voltage                                   2.0V
         VIL               Input Low Voltage                                                             0.8V
         VT                Threshold Point                                      1.29V      1.39V         1.49V
         VT+               Schmitt trig. Low to High Threshold Point            1.47V      1.61V         1.75V
         VT-               Schmitt trig. High to Low Threshold Point            0.99V      1.08V         1.18V
         IL                Input Leakage Current                                                         ±1uA
         Ioz               Tri-State Output Leakage Current                                              ±1uA
         PPU               Pull-up Resistor                                     61kohm     75kohm        105kohm
         PPD               Pull-down Resistor                                   101kohm    199kohm       332kohm
         VOL               Output Low Voltage @ IOL=2, 4mA                                               0.4V
         VOH               Output High Voltage @ IOH=2, 4mA                     2.4V
         IOL               Low Level Output Current @VOL =0.4V 2mA              2.1mA      3.3mA         4.1mA
                                                                        4mA     4.2mA      6.6mA         8.2mA
         IOH               High Level Output Current @VOH =2.4V 2mA             2.8mA      6.1mA         9.9mA
                                                                        4mA     5.5mA      12.2mA        19.8mA
11.5 AC SPECIFICATIONS
       Table 11-6 PCI Express Interface - Differential Transmitter (TX) Output Characteristics
         Parameter                                       Symbol                   Min    Typ      Max        Unit
         Unit Interval                                   UI                       399.88 400.0    400.12     ps
         Differential p-p TX voltage swing               VTX-DIFF-P-P             800    -        -          mV
                                                                                                             ppd
         Lower power differential p-p TX voltage         VTX-DIFF-P-P-LOW         400    -        -          mV
         swing                                                                                               ppd
         TX de-emphasis level ratio                      VTX-DE-RATIO             -3.0   -        -4.0       dB
         Minimum TX eye width                            TTX-EYE                  0.75   -        -          UI
         Maximum time between the jitter median          TTX-EYE-MEDIAN-to-MAX-   -      -        0.125      UI
         and max deviation from the median               JITTER
         Transmitter rise and fall time                  TTX-RISE-FALL            0.125  -        -          UI
         Maximum TX PLL Bandwidth                        BWTX-PLL                 -      -        22         MHz
         Maximum TX PLL BW for 3dB peaking               BWTX-PLL-LO-3DB          1.5    -        -          MHz
         Absolute Delta of DC Common Mode                VTX-CM-DC-ACTIVE-IDLE-   0      -        100        mV
         Voltage During L0 and Electrical Idle           DELTA
         Absolute Delta of DC Common Mode                VTX-CM-DC-LINE-DELTA     0      -        25         mV
         Voltage between D+ and D–
         Electrical Idle Differential Peak Output        VTX-IDLE-DIFF-AC-p       0      -        20         mV
         Voltage
         The Amount of Voltage Change Allowed            VTX-RCV-DETECT           -      -        600        mV
         During Receiver Detection
         Transmitter DC Common Mode Voltage              VTX-DC-CM                0      -        3.6        V
         Transmitter Short-Circuit Current Limit         ITX-SHORT                -      -        90         mA
         DC Differential TX Impedance                    ZTX-DIFF-DC              80     100      120        Ω
         Lane-to-Lane Output Skew                        LTX-SKEW                 -      -        500 ps     ps
                                                                                                  + 2 UI
       Table 11-7 PCI Express Interface - Differential Receiver (RX) Input Characteristics
         Parameter                                       Symbol                   Min    Typ      Max        Unit
         Unit Interval                                   UI                       399.88 400.0    400.12     ps
         Differential RX Peak-to-Peak Voltage            VRX-DIFF-PP-CC           175    -        1200       mV
         Receiver eye time opening                       TRX-EYE                  0.4    -        -          UI
         Maximum time delta between median and           TRX-EYE-MEDIAN-to-MAX-   -      -        0.3        UI
         deviation from median                           JITTER
         Receiver DC common mode impedance               ZRX-DC                   40     -        60         Ω
         DC differential impedance                       ZRX-DIFF-DC              80     -        120        Ω
         RX AC Common Mode Voltage                       VRX-CM-AC-P              -      -        150        mV
         DC input CM input impedance during reset        ZRX-HIGH-IMP-DC          200    -        -          kΩ
         or power down
PI7C9X440SL                                                   Page 99 of 102                                          January 2018
Document Number DS40394 Rev 3-2                               www.diodes.com                                      © Diodes Incorporated


                                                                                                                         PI7C9X440SL
         Parameter                                                 Symbol                  Min   Typ     Max      Unit
         Electrical Idle Detect Threshold                          VRX-IDLE-DET-DIFFp-p    65    -       175      mV
         Lane to Lane skew                                         LRX-SKEW                -     -       20       ns
       Table 11-8 USB Interface Characteristics
         Parameter                                 Conditions                                  Min   Typ     Max    Unit
                                                                   Timing Characteristics
         trise                                     1.5 Mbps                                    75    -       300    ns
                                                   12 Mbps                                     4             20
                                                   480 Mbps                                    0.5
         tfall                                     1.5 Mbps                                    75    -       300    ns
                                                   12 Mbps                                     4             20
                                                   480 Mbps                                    0.5
         Jitter                                    1.5 Mbps                                    -     -       10     ns
                                                   12 Mbps                                                   1
                                                   480 Mbps                                                  0.2
                                                                  Electrical Characteristics
         Vcm DC                                    HS Mode                                     -0.05 -       0.5    V
         (DC level measured at receiver connector)
                                                   LS/FS Mode                                  0.8           2.5
         Crossover Voltages                        LS Mode                                     1.3   -       2      V
                                                   FS Mode                                     1.3           2
         Power supply ripple noise                 < 1.2MHz                                    -10   0       10     mV
         (Analog 3.3V)                             > 1.2MHz                                    -50   0       50
         Power supply ripple noise                 All conditions                              -50   0       50     mV
         CORE
         (Digital Supply)
                                                           VBUS Comparators Voltage Thresholds
         A-Device Session Valid                    -                                           0.8   -       2.0    V
         B-Device Session Valid                    -                                           0.8   -       4.0    V
         B-Device Session End                      -                                           0.2   -       0.8    V
         VBUS Valid                                -                                           4.4   -       4.75   V
                                                                          DC Levels
         LS Idle Voltage                                                                       2.7   3.0     3.6    V
         FS Idle Voltage                                                                       2.7   3.0     3.6    V
         HS Test K                                 D+                                          -10.0 0.0     10.0   mV
                                                   D-                                          360   400     440    mV
         HS Test J                                 D+                                          360   400     440    mV
                                                   D-                                          -10.0 0.0     10.0   mV
         HS Test SE0                               D+                                          -10.0 0.0     10.0   mV
                                                   D-                                          -10.0 0.0     10.0   mV
                                                                       CHIRP Levels
         CHIRP ‘J’                                 D+ - D-                                     700   -       1100   mV
         CHIRP ‘K’                                 D+ - D-                                     -900  -       -500   mV
PI7C9X440SL                                                            Page 100 of 102                                     January 2018
Document Number DS40394 Rev 3-2                                        www.diodes.com                                  © Diodes Incorporated


                                                                                         PI7C9X440SL
12 PACKAGE INFORMATION
The package of PI7C9X440SL is a 14mm x 14mm LQFP (128 Pin) package. The following are the package
information and mechanical dimension:
                                   Figure 12-1 Package Outline Drawing
                                        Figure 12-2 Part Marking
PI7C9X440SL                                   Page 101 of 102                               January 2018
Document Number DS40394 Rev 3-2               www.diodes.com                            © Diodes Incorporated


                                                                                                                         PI7C9X440SL
13 ORDERING INFORMATION
   Part Number                        Temperature Range                            Package                       Pb-Free & Green
   PI7C9X440SL□FDEX                   -40o to 85oC                                 128-pin LQFP                  Yes
                                      (Industrial Temperature Range)               14mm x 14mm
Notes:
1.   EU Directive 2002/95/EC (RoHS), 2011/65/EU (RoHS 2) & 2015/863/EU (RoHS 3) compliant. All applicable RoHS exemptions applied.
2.   See http://www.diodes.com/quality/lead-free/ for more information about Diodes Incorporated’s definitions of Halogen- and Antimony-free,
     “Green” and Lead-free.
3.   Thermal characteristics can be found on the company web site at www.diodes.com/design/support/packaging/
4.   E = Pb-free and Green
5.   X suffix = Tape/Reel
                             PI 7C 9X440SL                       FD E X
                                                                                               Tape & Reel
                                                                                        Pb-Free and Green
                                                                                              Package Code
                                                                                           Blank=Standard
                                                                                                   =Revision
                                                                                                Device Type
                                                                                            Device Number
                                                                                                        Family
                                                                                                       Pericom
PI7C9X440SL                                                   Page 102 of 102                                               January 2018
Document Number DS40394 Rev 3-2                               www.diodes.com                                            © Diodes Incorporated


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Diodes Incorporated:
 PI7C9X440SLBFDEX PI7C9X442SLBFDEX PI7C9X440SLBFDE PI7C9X442SLBFDE PI7C9X440SLBFDEX-2017
