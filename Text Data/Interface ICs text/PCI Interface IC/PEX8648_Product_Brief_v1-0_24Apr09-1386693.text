         Version 1.0 2009
Features
  PEX 8648 Vitals
                                                                PEX 8648
  o 48-lane, 12-port PCIe Gen2 switch
    - Integrated 5.0 GT/s SerDes
  o 27 x 27mm2, 676-pin FCBGA package
                                                  PCIe Gen2, 5.0GT/s 48-lane, 12-port PCIe Switch
  o Typical Power: 3.7 Watts
                                                The ExpressLaneTM PEX 8648 device offers PCI Express switching
                                                capability enabling users to add scalable high bandwidth, non-blocking
  PEX 8648 Key Features
                                                interconnection to a wide variety of applications including servers,
  o Standards Compliant
    - PCI Express Base Specification, r2.0      storage systems, and communications platforms. The PEX 8648 is
      (backwards compatible w/ PCIe r1.0a/1.1)  well suited for fan-out, aggregation, and peer-to-peer applications.
    - PCI Power Management Spec, r1.2
    - Microsoft Vista Compliant
    - Supports Access Control Services
                                                High Performance & Low Packet Latency
    - Dynamic link-width control                The PEX 8648 architecture supports packet cut-thru with a maximum
    - Dynamic SerDes speed control              latency of 140ns (x16 to x16). This, combined with large packet memory
  o High Performance                            and non-blocking internal switch architecture, provides full line rate on all
    - Non-blocking switch fabric                ports for performance-hungry applications such as servers and switch
    - Full line rate on all ports
    - Packet Cut-Thru with 140ns max packet     fabrics. The low latency enables applications to achieve high throughput and
      latency (x16 to x16)                      performance. In addition to low latency, the device supports a packet payload
    - 2KB Max Payload Size                      size of up to 2048 bytes, enabling the user to achieve even higher throughput.
    - Read Pacing (bandwidth throttling)
    - Dual-Cast
  o Flexible Configuration
                                                Data Integrity
    - Ports configurable as x1, x2, x4, x8, x16 The PEX 8648 provides end-to-end CRC (ECRC) protection and Poison bit
    - Registers configurable with strapping     support to enable designs that require end-to-end data integrity. PLX also
      pins, EEPROM, I2C, or host software       supports data path parity and memory (RAM) error correction as packets
    - Lane and polarity reversal                pass through the switch.
    - Compatible with PCIe 1.0a PM
  o Dual-Host & Fail-Over Support
    - Configurable Non-Transparent port         Flexible Register & Port Configuration
    - Moveable upstream port                    The PEX 8648’s 12 ports can be configured to lane widths of x1, x2, x4, x8,
    - Crosslink port capability                 or x16. Flexible buffer allocation, along with the device's flexible packet
  o Quality of Service (QoS)                    flow control, maximizes throughput for applications where more traffic
    - Eight traffic classes per port
    - Weighted round-robin source               flows in the downstream, rather than upstream, direction. Any port can be
      port arbitration                          designated as the upstream port, which can be changed dynamically. The
  o Reliability, Availability, Serviceability   PEX 8648 also provides
    - 3 Hot Plug Ports with native HP Signals   several ways to                           x4                          x8
    - All ports hot plug capable thru I2C
      (Hot Plug Controller on every port)
                                                configure its registers.
    - ECRC and Poison bit support               The device can be
    - Data Path parity                          configured through
                                                                                   PEX 8648                    PEX 8648
    - Memory (RAM) Error Correction             strapping pins, I2C
    - INTA# and FATAL_ERR# signals              interface, host
    - Advanced Error Reporting
    - Port Status bits and GPIO available       software, or an optional
    - Per port error diagnostics                serial EEPROM. This                  11 x4                   4 x8 2 x4
    - Performance Monitoring                    allows for easy debug
      • Per port payload & header counters      during the development                    x8                          x8
                                                phase, performance
                                                monitoring during the
                                                operation phase, and
                                                                                   PEX 8648                    PEX 8648
                                                driver or software
                                                upgrade. Figure 1
                                                shows some of the PEX
                                                8648’s common port                   10 x4                  2 x8 6x4
                                                configurations.              Figure 1. Common Port Configurations


Dual-Host & Failover Support                               ports connect to PCI Express slots, each port’s Hot Plug
The PEX 8648 product supports a Non-Transparent            Controller can be used to manage the hot-plug event of
(NT) Port, which enables the implementation of multi-      its associated slot. Every port on the PEX 8648 is
host systems in communications, storage, and blade         equipped with a hot-plug control/status register to
server applications. The NT port allows systems to         support hot-plug capability through external logic via the
isolate host memory domains by presenting the              I2C interface.
processor subsystem as an endpoint rather than another
memory system. Base address registers are used to          SerDes Power and Signal Management
translate addresses; doorbell registers are used to send   The PEX 8648 supports software control of the SerDes
interrupts between the address domains; and scratchpad     outputs to allow optimization of power and signal
registers (accessible by both CPUs) allow inter-           strength in a system. The PLX SerDes implementation
processor communication (see Figure 2).                    supports four levels of power – off, low, typical, and
                                                           high. The SerDes block also supports loop-back modes
                   Primary
                   Primary Host
                           Host    Secondary
                                   Secondary Host
                                             Host
                                                           and advanced reporting of error conditions, which
                      CPU              CPU
                                                           enables efficient management of the entire system.
                      Root                                 Interoperability
                   Complex                                 The PEX 8648 is designed to be fully compliant with the
                                                           PCI Express Base Specification r2.0, and is backwards
                                                           compatible to PCI Express Base Specification r1.1 and
                             NT
                                                           r1.0a. Additionally, it supports auto-negotiation, lane
                   PEX 8648          Non-Transparent       reversal, and polarity reversal. Furthermore, the PEX
                                            Port           8648 is tested for Microsoft Vista compliance. All PLX
           End        End       End                        switches undergo thorough interoperability testing in
           Point      Point     Point                      PLX’s Interoperability Lab and compliance testing at
           Figure 2. Non-Transparent Port                  the PCI-SIG plug-fest.
Dual Cast
The PEX 8648 supports Dual Cast, a feature which
allows for the copying of data (e.g. packets) from one     Applications
ingress port to two egress ports allowing for higher       Suitable for host-centric as well as peer-to-peer traffic
performance in dual-graphics, storage, security, and       patterns, the PEX 8648 can be configured for a wide
redundant applications.                                    variety of form factors and applications.
Read Pacing                                                Host Centric Fan-out
The Read Pacing feature allows users to throttle the       The PEX 8648, with its symmetric or asymmetric lane
amount of read requests being made by downstream           configuration capability, allows user-specific tuning to a
devices. When a downstream device requests several         variety of host-centric applications. Figure 3 shows a
long reads back-to-back, the Root Complex gets tied up     typical server design where the root complex provides a
in serving this downstream port. If this port has a narrow PCI Express link that needs to be expanded to a larger
link and is therefore slow in receiving these read packets number of smaller ports for a variety of I/O functions. In
from the Root Complex, then other downstream ports         this example, the PEX 8648 has a 16-lane upstream port,
may become starved – thus, impacting performance. The      and five downstream ports using x8 and x4 links.
Read Pacing feature enhances performances by allowing
for the adequate servicing of all downstream devices.      The PEX 8648 can also be used to create PCIe Gen1 (2.5
                                                           Gbps) ports. The PEX 8648 is backwards compatible
Hot Plug for High Availability                             with PCIe Gen1 devices. Therefore, the PEX 8648
Hot plug capability allows users to replace hardware       enables a Gen 2 native Chip Set to fan-out to Gen 1
modules and perform maintenance without powering           endpoints. In Figure 3, the PCIe slots connected to the
down the system. The PEX 8648 hot plug capability          PEX 8648’s downstream ports can be populated with
feature makes it suitable for High Availability (HA)       either PCIe Gen1 or PCIe Gen 2 devices. Conversely,
applications. Three downstream ports include a             the PEX 8648 can also be used to create Gen 2 ports on
Standard Hot Plug Controller. If the PEX 8648 is used in   a Gen 1 native Chip Set in the same fashion.
an application where one or more of its downstream


                       CPU   CPU
                                                           switch fabrics and the remaining 10 downstream ports
                                                           on each switch are used to fan-out to the 20 AMC blades
                       CPU   CPU
                                                           (or 10 AMC Carrier Modules).
                                                               10-20 AMC or 10 AMC
                                          Memory                  Carrier Modules     Fabric
                       Chipset
                                                                                                  To
                x16                x16                                                         Backplane
   Endpoint
                                                                                                                         CPU
                                                                                                           PEX 8648
                            PEX 8648
                      x8
        Endpoint
                        x8              x4                                                                       NT
                                                                                                                     To other
                                                                                                           PEX 8648    Fabric
                          x8          x4
                   PCIe Gen1 or PCIe Gen2 slots
             Figure 3. Fan-in/out Usage
                                                              Figure 5. ATCA/MicroTCA Backplane Usage
Communications Systems
The PEX 8648 can also be utilized in communications        Fail-Over Storage Systems with Dual Cast
applications. Figure 4 shows a PEX 8648 being used in a    The PEX 8648’s Dual Cast feature proves to be very
router to connect multiple endpoints in a line card to the useful in storage systems. In Figure 6, the Dual Cast
control module using PowerPC. The link-widths for each     feature enables the PEX 8648 to copy data going to its
module can be configured as required. The peer-to-peer     four downstream ports to the backup system and vice
communication feature of the PEX 8648 allows the           versa (see yellow traffic patterns) in one transaction as
endpoints to communicate with each other without any       opposed to having to execute two separate transactions
intervention or management by the host.                    to send data to the redundant chassis. By offloading the
                                                           task of backing up data onto the secondary system,
                                                           processor and system performance is enhanced. Non-
                                                           Transparent (NT) ports are used to isolate the host
      Control
      Module          PowerPC             Memory           domains of the backup system from the primary system.
                                                                                                                        Backup
                                                                   CPU   CPU                         CPU   CPU
                                                                                                                         System
                                                                   CPU   CPU                         CPU   CPU
                            x8 or x4
      End                                        End
     Point                                      Point                              Memory            Chipset          Memory
                                                                   Chipset
                        PEX 8648
      End                                        End                 x8                                x8
     Point                                      Point                                  x8                   PEX
                                                                                                  NT        8648
                                                                  PEX 8648
                    End           End
     Line Card                   Point
                    Point
                                                              All                                                         All
                                                             x8s                                                          x8s
               Figure 4. Router Usage
                                                                          NT              NT               NT                 NT
                                                                   PEX 8616        PEX 8616         PEX 8616         PEX 8616
Backplane Communication                                           x4      x4      x4      x4       x4      x4       x4        x4
With 48 lanes and 12 ports, the PEX 8648 is well suited
for backplane applications requiring high connectivity (a         FC    FC        FC     FC        FC     FC        FC      FC
large number of ports). Figure 5 represents an ATCA or
MicroTCA backplane application with two switch fabric
blades and multiple AMC blades. In this example, two           8 Disk Chassis   8 Disk Chassis   8 Disk Chassis   8 Disk Chassis
PEX 8648s provide peer-to-peer data exchange for up to            Figure 6. Dual Cast in Storage Systems
20 AMC blades connecting to the switch fabric. The
PEX 8648 utilizes its NT port to isolate the hosts on the


    Software Usage Model                                                                      Development Tools
    From a system model viewpoint, each PCI Express port                                      PLX offers hardware and software tools to enable rapid
    is a virtual PCI to PCI bridge device and has its own set                                 customer design activity. These tools consist of a
    of PCI Express configuration registers. It is through the                                 hardware module (PEX 8648RDK), hardware
    upstream port that the BIOS or host can configure the                                     documentation (available at www.plxtech.com), and a
    other ports using standard PCI enumeration. The virtual                                   Software Development Kit (also available at
    PCI to PCI bridges within the PEX 8648 are compliant                                      www.plxtech.com).
    to the PCI and PCI Express system models. The
    Configuration Space Registers (CSRs) in a virtual                                         ExpressLane PEX 8648RDK
    primary/secondary PCI to PCI bridge are accessible by                                     The PEX 8648RDK is a hardware module containing the
    type 0 configuration cycles through the virtual primary                                   PEX 8648 which plugs right into your system. The
    bus interface (matching bus number, device number, and                                    PEX 8648RDK can be used to test and validate customer
    function number).                                                                         software, or used as an evaluation vehicle for PEX 8648
                                                                                              features and benefits. The PEX 8648RDK provides
    Interrupt Sources/Events                                                                  everything that a user needs to get their hardware and
    The PEX 8648 switch supports the INTx interrupt                                           software development started.
    message type (compatible with PCI 2.3 Interrupt signals)
    or Message Signaled Interrupts (MSI) when enabled.                                        Software Development Kit (SDK)
    Interrupts/messages are generated by PEX 8648 for hot                                     PLX’s Software Development Kit is available for
    plug events, doorbell interrupts, baseline error reporting,                               download at www.plxtech.com/sdk. The software
    and advanced error reporting.                                                             development kit includes drivers, source code, and GUI
                                                                                              interfaces to aid in configuring and debugging the
                                                                                              PEX 8648.
                                                 Product Ordering Information
                                                  Part Number                      Description
    PLX Technology, Inc.                          PEX8648-BB50BC                   48-Lane, 12-Port PCI Express Switch (27x27mm2)
    870 Maude Ave.                                PEX8648-BB50BC F                 48-Lane, 12-Port PCI Express Switch, Pb-Free (27x27mm2)
    Sunnyvale, CA 94085 USA                       PEX8648-BB RDK                   PEX 8648 Rapid Development Kit
    info@plxtech.com
                                                 Please visit the PLX Web site at http://www.plxtech.com or contact PLX sales at 408-774-9060 for sampling.
    www.plxtech.com
© 2009 PLX Technology, Inc. All rights reserved. PLX and the PLX logo are registered trademarks of PLX Technology, Inc. ExpressLane is a trademark of PLX Technology,
Inc., which may be registered in some jurisdiction. All other product names that appear in this material are for identification purposes only and are acknowledged to be
trademarks or registered trademarks of their respective companies. Information supplied by PLX is believed to be accurate and reliable, but PLX Technology, Inc. assumes no
responsibility for any errors that may appear in this material. PLX Technology, Inc. reserves the right, without notice, to make changes in product design or specification.
PEX8648-SIL-PB-1.0                                                                                                                                                         04/09


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Broadcom Limited:
 PEX8648-BB50RBC G PEX8648-BB50RBI G
