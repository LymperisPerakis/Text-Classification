              PI7C9X20505GP
        PCI EXPRESS® PACKET SWITCH
                   DATASHEET
                  REVISION 1.6
                  September 2009
                                      3545 North 1ST Street, San Jose, CA 95134
                                 Telephone: 1-877-PERICOM, (1-877-737-4266)
                                                             FAX: 408-435-1100
                                             Internet: http://www.pericom.com
13-0017


                                                                                                                           PI7C9X20505GP
                                                                                                  5Port-5Lane PCI Express® Switch
                                                                                                                  GreenPacketTM Family
                                                                                                                                     Datasheet
  DISCLAIMER
  The information contained in this document is proprietary and confidential to Pericom Semiconductor Cooperation (PSC). No part of this
  document may be copied or reproduced in any form or by any means without prior written consent of PSC.
  The information in this document is subjected to change without notice. PSC retains the right to make changes to this document at any time
  without notice. While the information contained in this document has been checked for accuracy, such information is preliminary, and PSC does
  not warrant the accuracy and completeness of such information. PSC does not assume any liability or responsibility for damages arising from any
  use of the information contained in this document.
  LIFE SUPPORT POLICY
  Pericom Semiconductor Corporation’s products are not authorized for use as critical components in life support devices or systems unless a
  specific written agreement pertaining to such intended use is executed between the manufacturer and an officer of PSC.
  1)    Life support devices or system are devices or systems which:
        a) Are intended for surgical implant into the body or
        b) Support or sustain life and whose failure to perform, when properly used in accordance with instructions for use provided in the
              labeling, can be reasonably expected to result in a significant injury to the user.
  2)    A critical component is any component of a life support device or system whose failure to perform can be reasonably expected to cause the
        failure of the life support device or system, or to affect its safety or effectiveness. Pericom Semiconductor Corporation reserves the right
        to make changes to its products or specifications at any time, without notice, in order to improve design or performance and to supply the
        best possible product. Pericom Semiconductor does not assume any responsibility for use of any circuitry described other than the
        circuitry embodied in a Pericom Semiconductor product. The Company makes no representations that circuitry described herein is free
        from patent infringement or other rights of third parties which may result from its use. No license is granted by implication or otherwise
        under any patent, patent rights or other rights, of Pericom Semiconductor Corporation.
  All other trademarks are of their respective companies.
                                                                       Page 2 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                           PI7C9X20505GP
                                                                                5Port-5Lane PCI Express® Switch
                                                                                                  GreenPacketTM Family
                                                                                                                Datasheet
  REVISION HISTORY
  Date         Revision Number  Description
  12/28/06     0.1              Initial Preliminary Datasheet
  01/02/07     0.2              Add Chapter 3, 4 , 6 and 7
  01/03/07     0.3              Proofreading and Editing
  01/18/07     0.4              Some defaults values of the pins are changed in Chapter 3
  04/13/07     0.5              Changed some pins names in Chapter 3 and Chapter 4
                                Fixed typo error on offset 06H, 20H, 22H, 24H, 26H and 28H of EEPROM
                                Corrected pin function for the bit [6:0] offset B4h to Reserved in section
                                7.2.53
                                Corrected register definition for offset A8h in section 7.2.48 and offset ACh
                                in section 7.2.49
                                Corrected register default value for the bit [2:1] offset B4h in section 7.2.52
                                Corrected register default value for the bit [18:16] offset 80h in section
                                7.2.31
                                Corrected register definition for offset 100h in section 7.2.75
  06/21/07     0.6              Corrected pin description for ATT_IND[4] in section 3.3
                                Corrected register description for offset F0h in section 7.2.70
                                Added 12.3 AC Specifications: Transmitter and Receiver Specifications
                                Updated 8 Clock Scheme (Table 8-1)
                                Removed Reference Clock Output related info from Chapter 1 Features
                                (advanced power saving), Chapter 3 Pin Description (RREF_CO, REFCLK,
                                VDDIO), Chapter 4 Pin Assignment (RREF_CO to TEST6, REFCLK to
                                NC, VDDIO to VDDR), Chapter 8 Clock Scheme (description).
  07/25/07     0.7              Updated Chapter 14 Ordering Information
                                Updated the Pericom Logo
                                Updated Chapter 13 Package Information
                                Corrected Chapter 4 PIN Assignment (PERP[4:0])
  08/17/07     0.8              Added Chapter 6.2 SMBus
                                Added SMBus related items in Chapter 1 Features
                                Modified SMBus related pins (GPIO[5:7])
                                Added Disclaimer
                                Corrected Chapter 6. EEPROM and Chapter 7. Register Description
                                Corrected Chapter 3. Pin Description (PORTACT, TEST6) and Chapter 4.
                                Pin Assignment (A15, L12, N10, R10, T3, T10)
                                Updated Chapter 9. Hot Plug Operation
  10/08/07     0.9              Corrected Chapter 3.6 Power Pins (VDDC, VDDA, VDDCAUX to 1.1V)
                                Added PWR_SAV (L7) pin in Chapter 3 and 4
                                Corrected Chapter 3 Pin Description (TXTERMADJ and RXTERMADJ’s
                                description, and DEQ’s default value)
                                Updated Chapter 3.5 JTAG Signals description
                                Updated Chapter 7.2.53 bit [15:0]
                                Remove VDDP, VDDAUX from Chapter 11 Power Management and
                                Chapter 12.1 Absolute Maximum Ratings
                                Revised Chapter 11 Power Management
                                Updated Chapter 3 Pin Description (PERP/PERN, PETP/PETN, VC1_EN’s
                                name and description, SLOT_IMP’s default value, HOTLPUG’s default
                                value, SLOTCLK’s default value, MRL_PDC’s description,
                                PWR_ENA_L’s default value, EEPD, SMBDATA, PORTERR’s name and
                                description, DTX’s default value)
                                Updated Chapter 4 Pin Assignment (VC_RS to VC1_EN, PORTACT to
                                PORTERR)
                                Updated 5.1 Physical Layer Circuit and Chapter 5.6 Queue
                                Updated Disclaimer and Footer
                                Updated Chapter 14 Ordering Information
                                Fixed Chapter 6.1.4 Mapping EEPROM format
                                                     Page 3 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                      PI7C9X20505GP
                                                                              5Port-5Lane PCI Express® Switch
                                                                                               GreenPacketTM Family
                                                                                                           Datasheet
  Date         Revision Number  Description
  1/30/08      1.0              Modified Chapter 6 EEPROM (0Ch)
                                Modified Chapter 7 Registers (7.2.50 Replay Time-Out Counter, 7.2.52
                                Switch Operation Mode Bit[14,15,17], 7.2.53 Switch Operation Mode
                                Bit[8:15], 7.2.64 PCI Express Capability Bit[24] , 7.2.70 Link Status
                                Bit[28], 7.2.103 Power Budgeting Data, 7.2.104 Power Budget Capability)
  2/20/08      1.1              Updated Chapter 3.5 Power Pins (VDDC, VDDA, VDDAUX)
                                Updated Chapter 1 Features (Power Dissipation)
                                Updated Chapter 12.2 DC Specification (Power Consumption)
  4/15/08      1.2              Updated Chapter 3.1 PCI Express Interface Signals (REFCLKP,
                                REFCLKN)
                                Corrected Chapter 12.2 DC Specifications
  7/1/08       1.3              Modified Chapter 1 Features (Industrial Temperature)
                                Corrected Chapter 7.2.27 Interrupt Pin Register
                                Corrected Chapter 7.2.32 Power Management Data Register Bit 3
                                Corrected Chapter 7.2.51 Acknowledge Latency Timer
                                Modified Chapter 12.1 Absolute Maximum Ratings (Ambient Temperature
                                with power applied)
  11/26/08     1.4              Updated Chapter 14 Ordering Information
                                Removed “Preliminary” and “Confidential” references
  6/8/09       1.5              Updated Chapter 3.2 Port Configuration Signals (SLOT_IMP, HOTPLUG,
                                SLOTCLK)
                                Updated Chapter 3.3 Hot Plug Signals (PWR_IND, ATT_IND)
                                Updated Chapter 3.4 Miscellaneous Signals (PWR_SAV pin removed,
                                EEPD)
                                Updated Chapter 3.5 JTAG Boundary Scan Signals (TMS, TDI, TRST_L)
                                Updated Chapter 14 Ordering Information
  9/25/09      1.6              Updated Section 1 Features (Beacon and Wake# support feature removed)
                                Updated Section 3.1 PCI Express Interface Signals (WAKEUP_L changed
                                to NC)
                                Updated Section 4 Pin Assignment (WAKEUP_L changed to NC)
                                Updated Section 5.1 Physical Layer Circuit
                                Updated Section 10.5 JTAG Boundary Scan Register Order
                                Updated Section 11 Power Management
                                Updated Table 12-3 Transmitter Characteristics
                                Updated Table 12-4 Receiver Characteristics
                                                     Page 4 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                                                  PI7C9X20505GP
                                                                                                              5Port-5Lane PCI Express® Switch
                                                                                                                                      GreenPacketTM Family
                                                                                                                                                              Datasheet
  TABLE OF CONTENTS
  1    FEATURES.........................................................................................................................................................10
  2    GENERAL DESCRIPTION..............................................................................................................................11
  3    PIN DESCRIPTION...........................................................................................................................................12
     3.1      PCI EXPRESS INTERFACE SIGNALS ....................................................................................................12
     3.2      PORT CONFIGURATION SIGNALS .......................................................................................................12
     3.3      HOT PLUG SIGNALS ...............................................................................................................................13
     3.4      MISCELLANEOUS SIGNALS..................................................................................................................13
     3.5      JTAG BOUNDARY SCAN SIGNALS ......................................................................................................14
     3.6      POWER PINS.............................................................................................................................................15
  4    PIN ASSIGNMENTS .........................................................................................................................................16
     4.1      PIN LIST OF 256-PIN PBGA ......................................................................................................................16
  5    FUNCTIONAL DESCRIPTION.......................................................................................................................18
     5.1      PHYSICAL LAYER CIRCUIT ..................................................................................................................18
     5.2      DATA LINK LAYER (DLL)......................................................................................................................20
     5.3      TRANSACTION LAYER RECEIVE BLOCK (TLP DECAPSULATION) ..............................................20
     5.4      ROUTING ..................................................................................................................................................20
     5.5      TC/VC MAPPING......................................................................................................................................21
     5.6      QUEUE.......................................................................................................................................................21
        5.6.1     PH .......................................................................................................................................................21
        5.6.2     PD .......................................................................................................................................................21
        5.6.3     NPHD .................................................................................................................................................21
        5.6.4     CPLH ..................................................................................................................................................21
        5.6.5     CPLD ..................................................................................................................................................22
     5.7      TRANSACTION ORDERING...................................................................................................................22
     5.8      PORT ARBITRATION ..............................................................................................................................23
     5.9      VC ARBITRATION ...................................................................................................................................23
     5.10 FLOW CONTROL .....................................................................................................................................23
     5.11 TRANSATION LAYER TRANSMIT BLOCK (TLP ENCAPSULATION) .............................................23
  6    EEPROM INTERFACE AND SYSTEM MANAGEMENT BUS..................................................................24
     6.1      EEPROM INTERFACE .............................................................................................................................24
        6.1.1     AUTO MODE EERPOM ACCESS .....................................................................................................24
        6.1.2     EEPROM MODE AT RESET..............................................................................................................24
        6.1.3     EEPROM SPACE ADDRESS MAP ....................................................................................................24
        6.1.4     MAPPING EEPROM CONTENTS TO CONFIGURATION REGISTERS..........................................26
     6.2      SMBUS INTERFACE .................................................................................................................................32
  7    REGISTER DESCRIPTION.............................................................................................................................33
     7.1      REGISTER TYPES ....................................................................................................................................33
     7.2      TRANSPARENT MODE CONFIGURATION REGISTERS ....................................................................33
        7.2.1     VENDOR ID REGISTER – OFFSET 00h ...........................................................................................35
        7.2.2     DEVICE ID REGISTER – OFFSET 00h.............................................................................................35
        7.2.3     COMMAND REGISTER – OFFSET 04h............................................................................................35
        7.2.4     PRIMARY STATUS REGISTER – OFFSET 04h.................................................................................36
        7.2.5     REVISION ID REGISTER – OFFSET 08h .........................................................................................36
        7.2.6     CLASS CODE REGISTER – OFFSET 08h .........................................................................................36
                                                                          Page 5 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                         PI7C9X20505GP
                                                                                     5Port-5Lane PCI Express® Switch
                                                                                                             GreenPacketTM Family
                                                                                                                                     Datasheet
        7.2.7     CACHE LINE REGISTER – OFFSET 0Ch.........................................................................................37
        7.2.8     PRIMARY LATENCY TIMER REGISTER – OFFSET 0Ch ................................................................37
        7.2.9     HEADER TYPE REGISTER – OFFSET 0Ch......................................................................................37
        7.2.10    PRIMARY BUS NUMBER REGISTER – OFFSET 18h ......................................................................37
        7.2.11    SECONDARY BUS NUMBER REGISTER – OFFSET 18h ................................................................37
        7.2.12    SUBORDINATE BUS NUMBER REGISTER – OFFSET 18h ............................................................37
        7.2.13    SECONDARY LATENCY TIMER REGISTER – OFFSET 18h ...........................................................37
        7.2.14    I/O BASE ADDRESS REGISTER – OFFSET 1Ch..............................................................................38
        7.2.15    I/O LIMIT ADDRESS REGISTER – OFFSET 1Ch.............................................................................38
        7.2.16    SECONDARY STATUS REGISTER – OFFSET 1Ch ..........................................................................38
        7.2.17    MEMORY BASE ADDRESS REGISTER – OFFSET 20h ...................................................................39
        7.2.18    MEMORY LIMIT ADDRESS REGISTER – OFFSET 20h ..................................................................39
        7.2.19    PREFETCHABLE MEMORY BASE ADDRESS REGISTER – OFFSET 24h.....................................39
        7.2.20    PREFETCHABLE MEMORY LIMIT ADDRESS REGISTER – OFFSET 24h....................................39
        7.2.21    PREFETCHABLE MEMORY BASE ADDRESS UPPER 32-BITS REGISTER – OFFSET 28h .........40
        7.2.22    PREFETCHABLE MEMORY LIMIT ADDRESS UPPER 32-BITS REGISTER – OFFSET 2Ch .......40
        7.2.23    I/O BASE ADDRESS UPPER 16-BITS REGISTER – OFFSET 30h...................................................40
        7.2.24    I/O LIMIT ADDRESS UPPER 16-BITS REGISTER – OFFSET 30h..................................................40
        7.2.25    CAPABILITY POINTER REGISTER – OFFSET 34h .........................................................................40
        7.2.26    INTERRUPT LINE REGISTER – OFFSET 3Ch.................................................................................40
        7.2.27    INTERRUPT PIN REGISTER – OFFSET 3Ch ...................................................................................41
        7.2.28    BRIDGE CONTROL REGISTER – OFFSET 3Ch ..............................................................................41
        7.2.29    POWER MANAGEMENT CAPABILITY ID REGISTER – OFFSET 80h ...........................................42
        7.2.30    NEXT ITEM POINTER REGISTER – OFFSET 80h...........................................................................42
        7.2.31    POWER MANAGEMENT CAPABILITIES REGISTER – OFFSET 80h.............................................42
        7.2.32    POWER MANAGEMENT DATA REGISTER – OFFSET 84h ............................................................42
        7.2.33    PPB SUPPORT EXTENSIONS – OFFSET 84h..................................................................................43
        7.2.34    DATA REGISTER – OFFSET 84h ......................................................................................................43
        7.2.35    MSI CAPABILITY ID REGISTER – OFFSET 8Ch (Downstream Port Only) ....................................43
        7.2.36    NEXT ITEM POINTER REGISTER – OFFSET 8Ch (Downstream Port Only) .................................43
        7.2.37    MESSAGE CONTROL REGISTER – OFFSET 8Ch (Downstream Port Only) ..................................43
        7.2.38    MESSAGE ADDRESS REGISTER – OFFSET 90h (Downstream Port Only) ....................................44
        7.2.39    MESSAGE UPPER ADDRESS REGISTER – OFFSET 94h (Downstream Port Only) ......................44
        7.2.40    MESSAGE DATA REGISTER – OFFSET 98h (Downstream Port Only) ...........................................44
        7.2.41    VPD CAPABILITY ID REGISTER – OFFSET 9Ch (Upstream Port Only)........................................44
        7.2.42    NEXT ITEM POINTER REGISTER – OFFSET 9Ch (Upstream Port Only) ......................................44
        7.2.43    VPD REGISTER – OFFSET 9Ch (Upstream Port Only)....................................................................44
        7.2.44    VPD DATA REGISTER – OFFSET A0h (Upstream Port Only).........................................................45
        7.2.45    VENDOR SPECIFIC CAPABILITY ID REGISTER – OFFSET A4h..................................................45
        7.2.46    NEXT ITEM POINTER REGISTER – OFFSET A4h ..........................................................................45
        7.2.47    LENGTH REGISTER – OFFSET A4h ................................................................................................45
        7.2.48    XPIP CSR0 – OFFSET A8h (Test Purpose Only)...............................................................................45
        7.2.49    XPIP CSR1 – OFFSET ACh (Test Purpose Only) ..............................................................................46
        7.2.50    REPLAY TIME-OUT COUNTER – OFFSET B0h..............................................................................46
        7.2.51    ACKNOWLEDGE LATENCY TIMER – OFFSET B0h.......................................................................46
        7.2.52    SWITCH OPERATION MODE – OFFSET B4h (Upstream Port)......................................................46
        7.2.53    SWITCH OPERATION MODE – OFFSET B4h (Downstream Port) .................................................48
        7.2.54    SSID/SSVID CAPABILITY ID REGISTER – OFFSET B8h................................................................48
        7.2.55    NEXT ITEM POINTER REGISTER – OFFSET B8h ..........................................................................48
        7.2.56    SUBSYSTEM VENDOR ID REGISTER – OFFSET BCh....................................................................48
        7.2.57    SUBSYSTEM ID REGISTER – OFFSET BCh ....................................................................................49
        7.2.58    GPIO CONTROL REGISTER – OFFSET D8h (Upstream Port Only)...............................................49
        7.2.59    EEPROM CONTROL REGISTER – OFFSET DCh (Upstream Port Only)........................................50
                                                 Page 6 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                                      PI7C9X20505GP
                                                                                                  5Port-5Lane PCI Express® Switch
                                                                                                                          GreenPacketTM Family
                                                                                                                                                  Datasheet
        7.2.60    EEPROM ADDRESS REGISTER – OFFSET DCh (Upstream Port Only).........................................51
        7.2.61    EEPROM DATA REGISTER – OFFSET DCh (Upstream Port Only)................................................51
        7.2.62    PCI EXPRESS CAPABILITY ID REGISTER – OFFSET E0h ............................................................51
        7.2.63    NEXT ITEM POINTER REGISTER – OFFSET E0h ..........................................................................51
        7.2.64    PCI EXPRESS CAPABILITIES REGISTER – OFFSET E0h..............................................................51
        7.2.65    DEVICE CAPABILITIES REGISTER – OFFSET E4h .......................................................................52
        7.2.66    DEVICE CONTROL REGISTER – OFFSET E8h...............................................................................52
        7.2.67    DEVICE STATUS REGISTER – OFFSET E8h...................................................................................53
        7.2.68    LINK CAPABILITIES REGISTER – OFFSET ECh............................................................................54
        7.2.69    LINK CONTROL REGISTER – OFFSET F0h....................................................................................55
        7.2.70    LINK STATUS REGISTER – OFFSET F0h ........................................................................................55
        7.2.71    SLOT CAPABILITIES REGISTER (Downstream Port Only) – OFFSET F4h ...................................56
        7.2.72    SLOT CONTROL REGISTER (Downstream Port Only) – OFFSET F8h...........................................57
        7.2.73    SLOT STATUS REGISTER (Downstream Port Only) – OFFSET F8h ...............................................58
        7.2.74    PCI EXPRESS ADVANCED ERROR REPORTING CAPABILITY ID REGISTER – OFFSET 100h.59
        7.2.75    CAPABILITY VERSION – OFFSET 100h ..........................................................................................59
        7.2.76    NEXT ITEM POINTER REGISTER – OFFSET 100h.........................................................................59
        7.2.77    UNCORRECTABLE ERROR STATUS REGISTER – OFFSET 104h .................................................59
        7.2.78    UNCORRECTABLE ERROR MASK REGISTER – OFFSET 108h ....................................................60
        7.2.79    UNCORRECTABLE ERROR SEVERITY REGISTER – OFFSET 10Ch.............................................61
        7.2.80    CORRECTABLE ERROR STATUS REGISTER – OFFSET 110 h......................................................61
        7.2.81    CORRECTABLE ERROR MASK REGISTER – OFFSET 114 h .........................................................62
        7.2.82    ADVANCE ERROR CAPABILITIES AND CONTROL REGISTER – OFFSET 118h.........................62
        7.2.83    HEADER LOG REGISTER – OFFSET From 11Ch to 128h ..............................................................63
        7.2.84    PCI EXPRESS VIRTUAL CHANNEL CAPABILITY ID REGISTER – OFFSET 140h .......................63
        7.2.85    CAPABILITY VERSION – OFFSET 140h ..........................................................................................63
        7.2.86    NEXT ITEM POINTER REGISTER – OFFSET 140h.........................................................................63
        7.2.87    PORT VC CAPABILITY REGISTER 1 – OFFSET 144h ....................................................................63
        7.2.88    PORT VC CAPABILITY REGISTER 2 – OFFSET 148h ....................................................................64
        7.2.89    PORT VC CONTROL REGISTER – OFFSET 14Ch ..........................................................................64
        7.2.90    PORT VC STATUS REGISTER – OFFSET 14Ch...............................................................................64
        7.2.91    VC RESOURCE CAPABILITY REGISTER (0) – OFFSET 150h........................................................65
        7.2.92    VC RESOURCE CONTROL REGISTER (0) – OFFSET 154h ...........................................................65
        7.2.93    VC RESOURCE STATUS REGISTER (0) – OFFSET 158h................................................................66
        7.2.94    VC RESOURCE CAPABILITY REGISTER (1) – OFFSET 15Ch .......................................................66
        7.2.95    VC RESOURCE CONTROL REGISTER (1) – OFFSET 160h ...........................................................66
        7.2.96    VC RESOURCE STATUS REGISTER (1) – OFFSET 164h................................................................67
        7.2.97    VC ARBITRATION TABLE REGISTER – OFFSET 170h...................................................................67
        7.2.98    PORT ARBITRATION TABLE REGISTER (0) and (1) – OFFSET 180h and 1C0h ...........................68
        7.2.99    PCI EXPRESS POWER BUDGETING CAPABILITY ID REGISTER – OFFSET 20Ch ....................68
        7.2.100      CAPABILITY VERSION – OFFSET 20Ch......................................................................................68
        7.2.101      NEXT ITEM POINTER REGISTER – OFFSET 20Ch ....................................................................68
        7.2.102      DATA SELECT REGISTER – OFFSET 210h .................................................................................69
        7.2.103      POWER BUDGETING DATA REGISTER – OFFSET 214h ..........................................................69
        7.2.104      POWER BUDGET CAPABILITY REGISTER – OFFSET 218h .....................................................69
  8    CLOCK SCHEME .............................................................................................................................................70
  9    HOT PLUG OPERATION ................................................................................................................................71
  10 IEEE 1149.1 COMPATIBLE JTAG CONTROLLER....................................................................................72
     10.1    INSTRUCTION REGISTER ......................................................................................................................72
     10.2    BYPASS REGISTER .................................................................................................................................72
     10.3    DEVICE ID REGISTER.............................................................................................................................72
                                                              Page 7 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                                   PI7C9X20505GP
                                                                                               5Port-5Lane PCI Express® Switch
                                                                                                                       GreenPacketTM Family
                                                                                                                                               Datasheet
     10.4    BOUNDARY SCAN REGISTER...............................................................................................................73
     10.5    JTAG BOUNDARY SCAN REGISTER ORDER......................................................................................73
  11 POWER MANAGEMENT ................................................................................................................................75
  12 ELECTRICAL AND TIMING SPECIFICATIONS .......................................................................................76
     12.1    ABSOLUTE MAXIMUM RATINGS ........................................................................................................76
     12.2    DC SPECIFICATIONS ..............................................................................................................................76
     12.3    AC SPECIFICATIONS ..............................................................................................................................77
  13 PACKAGE INFORMATION............................................................................................................................79
  14 ORDERING INFORMATION..........................................................................................................................81
                                                           Page 8 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                                  PI7C9X20505GP
                                                                                              5Port-5Lane PCI Express® Switch
                                                                                                                      GreenPacketTM Family
                                                                                                                                              Datasheet
  TABLE OF FIGURES
  FIGURE 6-1 SMBUS ARCHITECTURE IMPLEMENTATION ON PI7C9X20505GP............................................................32
  FIGURE 13-1 BOTTOM VIEW DRAWING ........................................................................................................................79
  FIGURE 13-2 PACKAGE OUTLINE DRAWING .................................................................................................................80
  LIST OF TABLES
  TABLE 5-1 NOMINAL DRIVER CURRENT VALUES (INOM)............................................................................................18
  TABLE 5-2 RATIO OF ACTUAL CURRENT AND NOMINAL CURRENT .............................................................................18
  TABLE 5-3 DE-EMPHASIS LEVEL VERSUS DEQ [3:0]...................................................................................................19
  TABLE 5-4 SUMMARY OF PCI EXPRESS ORDERING RULES ..........................................................................................22
  TABLE 6-1 SMBUS ADDRESS PIN CONFIGURATION ....................................................................................................32
  TABLE 7-1 REGISTER ARRAY LAYOUT FOR VC ARBITRATION ....................................................................................67
  TABLE 7-2 TABLE ENTRY SIZE IN 4 BITS .....................................................................................................................68
  TABLE 8-1 INPUT CLOCK REQUIREMENTS ...................................................................................................................70
  TABLE 10-1 INSTRUCTION REGISTER CODES ................................................................................................................72
  TABLE 10-2 JTAG DEVICE ID REGISTER .....................................................................................................................72
  TABLE 10-3 JTAG BOUNDARY SCAR REGISTER DEFINITION ........................................................................................73
  TABLE 12-1 ABSOLUTE MAXIMUM RATINGS ................................................................................................................76
  TABLE 12-2 DC ELECTRICAL CHARACTERISTICS .........................................................................................................76
  TABLE 12-3 TRANSMITTER CHARACTERISTICS............................................................................................................77
  TABLE 12-4 RECEIVER CHARACTERISTICS ..................................................................................................................78
                                                          Page 9 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                PI7C9X20505GP
                                                                            5Port-5Lane PCI Express® Switch
                                                                                           GreenPacketTM Family
                                                                                                     Datasheet
  1 Features
        5-lane PCI Express Switch with 5 PCI Express ports
        Non-blocking full-wired switching capability at 20 Gbps when all 5 ports are enabled
        Supports “Cut-through”(Default) as well as “Store and Forward” mode for packet switching
        Peer-to-peer switching between any two downstream ports
        150 ns typical latency for packet routed through Switch without blocking
        Strapped pins configurable with optional EEPROM or SMBus
        SMBus interface support
        Compliant with System Management (SM) Bus, Version 1.0
        Compliant with PCI Express Base Specification Revision 1.1
        Compliant with PCI Express CEM Specification Revision 1.1
        Compliant with PCI-to-PCI Bridge Architecture Specification Revision 1.2
        Compliant with Advanced Configuration Power Interface (ACPI) Specification
        Compliant with PCI Standard Hot-Plug Controller (SHPC) and Subsystem Specification Revision 1.0
        Reliability, Availability and Serviceability
                - Supports Data Poisoning and End-to-End CRC
                - Advanced Error Reporting and Logging
                - Hot Plug support
                - IEEE 1149.6 JTAG interface support
        Advanced Power Saving
                - Empty downstream ports are set to idle state to minimize power consumption
        Link Power Management
                - Supports L0, L0s, L1, L2, L2/L3Ready and L3 link power states
                - Active state power management for L0s and L1 states
        Device State Power Management
                - Supports D0, D3Hot and D3Cold device power states
                - 3.3V Aux Power support in D3Cold power state
        Port Arbitration: Round Robin (RR), Weighted RR and Time-based Weighted RR
        Extended Virtual Channel capability
                - Two Virtual Channels (VC) and Eight Traffic Class (TC) support
                - Disabled VCs’ buffer is assigned to enabled VCs for resource sharing
                - Independent TC/VC mapping for each port
                - Provides VC arbitration selections: Strict Priority, Round Robin (RR) and Programmable
                      Weighted RR
        Supports Isochronous Traffic
                - Isochronous traffic class mapped to VC1 only
                - Strict time based credit policing
        Supports up to 256-byte maximum payload size
        Programmable driver current and de-emphasis level at each individual port
        Low Power Dissipation at 1.0W in L0 normal mode
        Industrial Temperature Range -40o to 85oC
        256-pin PBGA 17mm x 17mm package, 1.0 mm Ball Pitch
                                                      Page 10 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                        PI7C9X20505GP
                                                                                5Port-5Lane PCI Express® Switch
                                                                                                GreenPacketTM Family
                                                                                                               Datasheet
  2 GENERAL DESCRIPTION
  Similar to the role of PCI/PCIX Bridge in PCI/PCIX bus architecture, the function of PCI Express (PCIE) Switch is
  to expand the connectivity to allow more end devices to be reached by host controllers in PCIE serial interconnect
  architecture. The 5-lane PCIE Switch can be configured as 5-port type combinations. It provides users the flexibility
  to expand or fan-out the PCI Express lanes based on their application needs. For some systems that do not need all
  the 5 lanes, the unused lanes can be disabled to reduce power consumption.
  In the PCI Express Architecture, the PCIE Switch forwards posted and non-posted requests and completion packets
  in either downstream or upstream direction concurrently as if a virtual PCI Bridge is in operation on each port. By
  visualizing the port as a virtual Bridge, the Switch can be logically viewed as two-level cascaded multiple virtual
  PCI-to-PCI Bridges, where one upstream-port Bridge sits on all downstream-port Bridges. Similar to a PCI Bridge
  during enumeration, each port is given a unique bus number, device number, and function number by the initiating
  software. The bus number, device number, and function number are combined to form a destination ID for each
  specific port. In addition to that, the memory-map and IO address ranges are exclusively allocated to each port as
  well. After the software enumeration is finished, the packets are routed to the dedicated port based on the embedded
  address or destination ID. To ensure the packet integrity during forwarding, the Switch is not allowed to split the
  packets to multiple small packets or merge the received packets into a large transmit packet. Also, the IDs of the
  requesters and completers are kept unchanged along the path between ingress and egress port.
  The Switch employs the architecture of Combined Input and Output Queue (CIOQ) in implementation. The main
  reason for choosing CIOQ is that the required memory bandwidth of input queue equals to the bandwidth of ingress
  port rather than increasing proportionally with port numbers as an output queue Switch does. The CIOQ at each
  ingress port contains separate dedicated queues to store packets. The packets are arbitrated to the egress port based
  on the PCIe transaction-ordering rule. For the packets without ordering information, they are permitted to pass over
  each other in case that the addressed egress port is available to accept them. As to the packets required to follow the
  ordering rule, the Head-Of-Line (HOL) issue becomes unavoidable for packets destined to different egress ports
  since the operation of producer-consumer model has to be retained; otherwise the system might occur hang-up
  problem. On the other hand, the Switch places replay buffer at each egress port to defer the packets before sending it
  out. This can assure the maximum throughput being achieved and therefore the Switch works efficiently. Another
  advantage of implementing CIOQ in PCIe Switch is that the credit announcement to the counterpart is simplified
  and streamlined because of the credit-based flow control protocol. The protocol requires that each ingress port
  maintains the credits independently without checking other ports' credit availability, which is otherwise required by
  pure output queue architecture.
  The Switch supports two virtual channels (VC0, VC1) and eight traffic classes (TC0 ~ TC7) at each port. The
  ingress port independently assigns packets into the preferred virtual channel while the egress port outputs the packet
  based on the predefined port and VC arbitration algorithm. For instance, the isochronous packet is given a special
  traffic class number other than TC0 and mapped into VC1 accordingly. By employing the strict time based credit
  policy for port arbitration and assigning higher priority to VC1 than VC0, the Switch can therefore guarantee the
  time-sensitive packet is not blocked by regular traffic to assure the quality of service. In addition, some data-centric
  applications only carry TC0/VC0 traffic. As a result, there are no packets that would consume VC1 bandwidth. In
  order to improve the efficiency of buffer usage, the unused VC1 queues can be reassigned to VC0 and enable each
  of the ingress ports to handle more data traffic bursts. This virtual channel resource relocation feature enhances the
  performance of the PCIe Switch further.
                                                        Page 11 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                         PI7C9X20505GP
                                                                           5Port-5Lane PCI Express® Switch
                                                                                               GreenPacketTM Family
                                                                                                                   Datasheet
  3 PIN DESCRIPTION
  3.1     PCI EXPRESS INTERFACE SIGNALS
           NAME                  PIN     TYPE  DESCRIPTION
           REFCLKP          A16            I   Reference Clock Input Pairs: Connects to external 100MHz
           REFCLKN          A15                differential clock.
                                               The input clock signals must be delivered to the clock buffer cell
                                               through an AC-coupled interface so that only the AC information of
                                               the clock is received, converted, and buffered. It is recommended that a
                                               0.1uF be used in the AC-coupling.
           PERP [4:0]       D16, K16,      I   PCI Express Data Serial Input Pairs: Differential data receive
                            M15, T13,          signals in five ports.
                            A13
                                               Port 0 (Upstream Port) is PERP[0] and PERN[0]
                                               Port 1 (Downstream Port) is PERP[1] and PERN[1]
           PERN [4:0]       D15, K15,      I
                                               Port 2 (Downstream Port) is PERP[2] and PERN[2]
                            M16, T12,
                                               Port 3 (Downstream Port) is PERP[3] and PERN[3]
                            B13
                                               Port 4 (Downstream Port) is PERP[4] and PERN[4]
           PETP [4:0]       F15, H15,     O    PCI Express Data Serial Output Pairs: Differential data transmit
                            P16, T15,          signals in five ports.
                            A11
                                               Port 0 (Upstream Port) is PETP[0] and PETN[0]
                                               Port 1 (Downstream Port) is PETP[1] and PETN[1]
           PETN [4:0]       F16, H16,     O    Port 2 (Downstream Port) is PETP[2] and PETN[2]
                            P15, T16,          Port 3 (Downstream Port) is PETP[3] and PETN[3]
                            B11                Port 4 (Downstream Port) is PETP[4] and PETN[4]
           RESET_L          E4             I   System Reset (Active LOW): When RESET_L is asserted, the
                                               internal states of whole chip except sticky logics are initialized.
           DWNRST_L [4:1]   E5, D5, E6,   O    Downstream Device Reset (Active LOW): It provides a reset signal
                            D6                 to the devices connected to the downstream ports of Switch. The signal
                                               is active when either RESET_L is asserted or the device is just plugged
                                               into the Switch. DWNRST_L [x] corresponds to Portx, where x=
                                               1,2,3,4.
  3.2     PORT CONFIGURATION SIGNALS
           NAME                  PIN     TYPE  DESCRIPTION
           VC1_EN           F4             I   Virtual Channel 1 Enable: The chip provides the capability to
                                               support virtual channel 1 (VC1), in addition to the standard virtual
                                               channel 0. When this pin is asserted high, Virtual Channel 1 is enabled,
                                               and virtual channel resource sharing is not available. When it is
                                               asserted low, the chip would allocate the additional VC1 resource to
                                               VC0, and VC1 capability is disabled. The pin has internal pull-down.
           SLOT_IMP [4:1]   *T6, G4, G2,   I   Slot Implemented: It decides if the downstream port is connected to
                            G1                 slot. SLOT_IMP [x] is correspondent to Portx, where x= 1,2,3,4. When
                                               SLOT_IMP [x] is high, the Portx is connected to slot. The strapping
                                               pin SLOT_IMP[4] is shared with PWR_IND[1]. By default,
                                               downstream Port1, Port2, Port3, and Port4 are implemented with slots.
                                               SLOT_IMP[4] has internal pull-down, and SLOT_IMP[3:1] have
                                               internal pull-up.
                                              Page 12 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                          PI7C9X20505GP
                                                                             5Port-5Lane PCI Express® Switch
                                                                                                 GreenPacketTM Family
                                                                                                                    Datasheet
           NAME                  PIN      TYPE  DESCRIPTION
           HOTPLUG [4:1]    *R6, H2, H1,     I  Hot Plug Capability: It determines if the downstream port is able to
                            H4                  support hot plug capability. HOTPLUG [x] is correspondent to Portx,
                                                where x=1,2,3,4. When HOTPLUG [x] is high, Portx supports hot plug
                                                operation. The strapping pin HOTPLUG[4] is shared with
                                                PWR_IND[2]. By default, downstream Port1, Port2, Port 3, and Port4
                                                are equipped with hot plug function. HOTPLUG[4] has internal
                                                pull-down, and HOTPLUG[3:1] have internal pull-up.
           SLOTCLK [4:0]    *P6, J3, J1,     I  Slot Clock Configuration: It determines if the downstream
                            H5, H3              component uses the same physical reference clock that the platform
                                                provides on the connector. When SLOTCLK is high, the platform
                                                reference clock is employed. The strapping pin SLOTCLK[4] is shared
                                                with PWR_IND[3]. By default, downstream Port1, Port2, Port 3, and
                                                Port4 use the same physical reference clock provided by platform.
                                                SLOTCLK[4] has internal pull-down, and SLOTCLK[3:0] have
                                                internal pull-up.
  3.3     HOT PLUG SIGNALS
           NAME                  PIN      TYPE  DESCRIPTION
           PWR_IND [4:1]    T7, *P6, *R6,   O   Power Indicator: Indicates the power status for each slot at
                            *T6                 downstream port. PWR_IND [x] is correspondent to Port x, where
                                                x=1,2,3,4. They are active-high signals. The pins have internal
                                                pull-down.
           ATT_IND [4:1]    L7, N7, P7,     O   Attention Indicator: Indicates the attention status for each slot at
                            R7                  downstream port. ATT_IND [x] is correspondent to Port x, where
                                                x=1,2,3,4. They are active-high signals. Pins are set to “0000” by
                                                default. ATT_IND [4] should be tied to ground through a 47K
                                                pull-down resistor to disable the internal test function. ATT_IND[4:2]
                                                have internal pull-down.
           ATT_BTN [4:1]    L8, M8, P8,      I  Attention Button: When asserted high, it represents the attention
                            R8                  button has been pressed for the slot at the downstream port. ATT_BTN
                                                [x] is correspondent to Port x, where x=1,2,3,4.
           MRL_PDC [4:1]    L9, N9, P9,      I  Presence Detected Change: When asserted low, it represents the
                            R9                  device is present in the slot of downstream ports. Otherwise, it
                                                represents the absence of the device. MRL_PDC [x] is correspondent
                                                to Port x, where x=1,2,3,4.
           PWR_ENA_L [4:1]  M10, N10,       O   SLOT Power Enable (Active LOW): Indicates the enable status of
                            R10, T10            the power connecting to the associated slot. PWR_ENA [x] is
                                                correspondent to Portx, where x=1,2,3,4. They are active-low signals.
                                                Pins are set to “0000” by default.
           PWR_FLT [4:1]    M11, N11,        I  SLOT Power Fault: When asserted high, it indicates a power fault on
                            P11, R11            one or more supply rails. PWR_FLT [x] is correspondent to Port x,
                                                where x=1,2,3,4.
  3.4     MISCELLANEOUS SIGNALS
           NAME                  PIN      TYPE  DESCRIPTION
           EECLK            R14             O   EEPROM Clock: Clock signal to the EEPROM interface.
           EEPD             P14            I/O  EEPROM Data: Bi-directional serial data interface to and from the
                                                EEPROM. The pin has internal pull-up.
           SMBCLK           T4               I  SMBus Clock: System management Bus Clock. Pin has an internal
                                                pull-down.
           SMBDATA          T5             I/O  SMBus Data: Bi-Directional System Management Bus Data.
           SCAN_EN          N14            I/O  Full-Scan Enable Control: For normal operation, SCAN_EN is an
                                                output with a value of “0”. SCAN_EN becomes an input during
                                                manufacturing testing.
           PORTERR [4:0]    N13, P13,       O   Port PHY Error Status: These pins are used to display the PHY Error
                            M12, N12,           status of the ports. When PORTERR is flashing (alternating high and
                            P12                 low signals), it indicates that a PHY error is detected. When it is low,
                                                no PHY error is detected. PORTERR [x] is correspondent to Port x,
                                                where x=0,1,2,3,4.
                                               Page 13 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                            PI7C9X20505GP
                                                                             5Port-5Lane PCI Express® Switch
                                                                                                 GreenPacketTM Family
                                                                                                                    Datasheet
           NAME                  PIN     TYPE   DESCRIPTION
           GPIO [7:0]       L2, L1, K5,   I/O   General Purpose Input and Output: These eight general-purpose
                            K4, K3, K2,         pins are programmed as either input-only or bi-directional pins by
                            J6, J5              writing the GPIO output enable control register.
                                                When SMBus is implemented, GPIO[7:5] act as the SMBus address
                                                pins, which set Bit 2 to 0 of the SMBus address.
           HIDRV            L6              I   High Driver Control: This mode bit is for increasing the nominal
                                                value of the lane’s driver current level. (See Sec. 5.1 for more detailed
                                                descriptions) By default, it is set to ‘0’ without pin strapped.
           LODRV            M2              I   Low Driver Control: This mode bit is for decreasing the nominal
                                                value of the lane’s driver current level. (See Sec. 5.1 for more detailed
                                                descriptions) By default, it is set to ‘0’ without pin strapped.
           DTX [3:0]        N1, M6, M5,     I   Driver Current Level Control: This 4-bit digital word is to control
                            M3                  the driver current level. (See Sec. 5.1 for more detailed descriptions)
                                                By default, they are set to “0000” without pin strapped.
           DEQ [3:0]        P1, N5, N4,     I   Driver Equalization Level Control: This 4-bit digital word is to
                            N2                  control the driver equalization level. (See Sec. 5.1 for more detailed
                                                descriptions) By default, they are set to “1000” without pin strapped.
           RXEQCTL [1:0]    P4, P3          I   Receiver Equalization Level Control: This 2-bit digital word is to
                                                control the receiver equalization level. By default, they are set to “00”
                                                without pin strapped.
           RXTERMADJ [1:0]  T3, R2          I   Receive Termination Adjustment: A control bus to adjust the receive
                                                termination resistor value. By default, they are set to “00” without pin
                                                strapped.
           TXTERMADJ [1:0]  T2, R1          I   Transmit Termination Adjustment: A control bus to adjust the
                                                transmit termination resistor value. By default, they are set to “00”
                                                without pin strapped.
           TEST1            L4              I   Test1: This pin is for internal test purpose. Test1 should be tied to
                                                ground through a pull-down resistor.
           TEST2            D4              I   Test2/3/4/5: These pins are for internal test purpose. Test2, Test3,
           TEST3            D8                  Test4 and Test5 should be tied to 3.3V through a pull-up resistor.
           TEST4            E8
           TEST5            E7
           TEST6            E14             I   Test6: This pin is for internal test purpose. Test6 should be connected
                                                to an (475 ohm +/- 1%) external resistor to Vss.
           NC               A3, A5, A7,         Not Connected: These pins can be just left open.
                            A9, B1, B3,
                            B5, B7, B9,
                            C1, D12,
                            D13, E1, E2,
                            F3, F2, F12,
                            F13,
                            H12, H13,
                            R3, R5,
  3.5     JTAG BOUNDARY SCAN SIGNALS
           NAME              PIN         TYPE   DESCRIPTION
           TCK               L12             I  Test Clock: Used to clock state information and data into and out of
                                                the chip during boundary scan. When JTAG boundary scan function is
                                                not implemented, this pin should be left open (NC).
           TMS               L13             I  Test Mode Select: Used to control the state of the Test Access Port
                                                controller. The pin has internal pull-up. When JTAG boundary scan
                                                function is not implemented, this pin should be pulled low through a
                                                5.1K pull-down resistor.
           TDO               M13            O   Test Data Output: When SCAN_EN is high, it is used (in conjunction
                                                with TCK) to shift data out of the Test Access Port (TAP) in a serial bit
                                                stream. When JTAG boundary scan function is not implemented, this
                                                pin should be left open (NC).
           TDI               L14             I  Test Data Input: When SCAN_EN is high, it is used (in conjunction
                                                with TCK) to shift data and instructions into the TAP in a serial bit
                                                stream. The pin has internal pull-up. When JTAG boundary scan
                                                function is not implemented, this pin should be left open (NC).
                                               Page 14 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                  PI7C9X20505GP
                                                                                    5Port-5Lane PCI Express® Switch
                                                                                                        GreenPacketTM Family
                                                                                                                           Datasheet
           NAME              PIN              TYPE    DESCRIPTION
           TRST_L            K11                I     Test Reset (Active LOW): Active LOW signal to reset the TAP
                                                      controller into an initialized state. The pin has internal pull-up. When
                                                      JTAG boundary scan function is not implemented, this pin should be
                                                      pulled low through a 5.1K pull-down resistor.
  3.6     POWER PINS
           NAME                     PIN         TYPE    DESCRIPTION
           VDDC              D7, D10, E9,         P     VDDC Supply (1.0V): Used as digital core power pins.
                             E10, F6, F7, F8,
                             F9, F10, G5,
                             G7, G12, G13,
                             H6, H7, J7, J12,
                             K6, K8, K10,
                             K12, L5, L10,
                             L11, M7, M9,
                             N6, N8
           VDDR              C6, D14, E12,        P     VDDR Supply (3.3V): Used as digital I/O power pins.
                             G3, G14, J4,
                             K13, L3, M4,
                             P5, R13, T1, T8
           VDDA              D9, D11, E11,        P     VDDA Supply (1.0V): Used as analog power pins.
                             F11, G10, G11,
                             H11, J11, J13
           VDDCAUX           A8, D3, E3,          P     VDDCAUX Supply (1.0V): Used as auxiliary core power pins.
                             N15
           VAUX              F1                   P     VAUX Supply (3.3V): Used as auxiliary I/O power pins.
           VTT               A1, A2, A10,         P     Termination Voltage (1.5V): Provides driver termination voltage
                             B10, G15, G16,             at transmitter. Should be given the same consideration as
                             R15, R16                   VDDCAUX.
           VSS               A4, A6, A12,         P     VSS Ground: Used as ground pins.
                             A14, B2, B4,
                             B6, B8, B12,
                             B14, B15, B16,
                             C2, C3, C4,
                             C5, C7, C8, C9,
                             C10, C11, C12,
                             C13, C14, C15,
                             C16, D1, D2,
                             E13, E15, E16,
                             F5, F14, G6,
                             G8, G9, H8,
                             H9, H10, H14,
                             J2, J8, J9, J10,
                             J14, J15, J16,
                             K1, K7, K9,
                             K14, L15, L16,
                             M1, M14, N3,
                             N16, P2, P10,
                             R4, R12, T9,
                             T11, T14
                                                     Page 15 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                             PI7C9X20505GP
                                                           5Port-5Lane PCI Express® Switch
                                                                       GreenPacketTM Family
                                                                                   Datasheet
  4 PIN ASSIGNMENTS
  4.1     PIN LIST of 256-PIN PBGA
           PIN          NAME    PIN     NAME           PIN    NAME       PIN         NAME
            A1           VTT     E1       NC            J1 SLOTCLK[2]    N1         DTX[3]
            A2           VTT     E2       NC            J2     VSS       N2         DEQ[0]
            A3           NC     E3    VDDCAUX           J3 SLOTCLK[3]    N3           VSS
            A4           VSS     E4    RESET_L          J4    VDDR       N4         DEQ[1]
            A5           NC     E5  DWNRST_L[4]         J5   GPIO[0]     N5         DEQ[2]
            A6           VSS    E6  DWNRST_L[2]         J6   GPIO[1]     N6          VDDC
            A7           NC      E7      TEST5          J7    VDDC       N7       ATT_IND[3]
            A8       VDDCAUX     E8      TEST4          J8     VSS       N8          VDDC
            A9           NC      E9      VDDC           J9     VSS       N9      MRL_PDC[3]
           A10           VTT    E10      VDDC          J10     VSS       N10    PWR_ENA_L[3]
           A11         PETP[0]  E11      VDDA          J11    VDDA       N11     PWR_FLT[3]
           A12           VSS    E12      VDDR          J12    VDDC       N12     PORTERR[1]
           A13         PERP[0]  E13       VSS          J13    VDDA       N13     PORTERR[4]
           A14           VSS    E14      TEST6         J14     VSS       N14       SCAN_EN
           A15        REFCLKN   E15       VSS          J15     VSS       N15      VDDCAUX
           A16        REFCLKP   E16       VSS          J16     VSS       N16          VSS
            B1           NC      F1      VAUX          K1      VSS        P1        DEQ[3]
            B2           VSS     F2       NC           K2    GPIO[2]      P2          VSS
            B3           NC      F3       NC           K3    GPIO[3]      P3     RXEQCTL[0]
            B4           VSS     F4    VC1_EN          K4    GPIO[4]      P4     RXEQCTL[1]
            B5           NC      F5       VSS          K5    GPIO[5]      P5         VDDR
            B6           VSS     F6      VDDC          K6     VDDC        P6     PWR_IND[3] /
                                                                                 SLOTCLK[4]
            B7           NC      F7      VDDC          K7      VSS        P7      ATT_IND[2]
            B8           VSS     F8      VDDC          K8     VDDC        P8     ATT_BTN[2]
            B9           NC      F9      VDDC          K9      VSS        P9     MRL_PDC[2]
           B10           VTT    F10      VDDC          K10    VDDC       P10          VSS
           B11         PETN[0]  F11      VDDA          K11   TRST_L      P11     PWR_FLT[2]
           B12           VSS    F12       NC           K12    VDDC       P12     PORTERR[0]
           B13         PERN[0]  F13       NC           K13    VDDR       P13     PORTERR[3]
           B14           VSS    F14       VSS          K14     VSS       P14         EEPD
           B15           VSS    F15     PETP[4]        K15   PERN[3]     P15        PETN[2]
           B16           VSS    F16    PETN[4]         K16   PERP[3]     P16        PETP[2]
            C1           NC     G1  SLOT_IMP[1]         L1   GPIO[6]     R1     TXTERMADJ[0]
            C2           VSS    G2  SLOT_IMP[2]         L2   GPIO[7]     R2     RXTERMADJ[0]
            C3           VSS    G3       VDDR           L3    VDDR       R3           NC
            C4           VSS    G4  SLOT_IMP[3]         L4    TEST1      R4           VSS
            C5           VSS    G5       VDDC           L5    VDDC       R5           NC
            C6          VDDR    G6        VSS           L6   HIDRV       R6      PWR_IND[2] /
                                                                                 HOTPLUG[4]
            C7           VSS    G7       VDDC           L7 ATT_IND[4]    R7       ATT_IND[1]
            C8           VSS    G8        VSS           L8 ATT_BTN[4]    R8      ATT_BTN[1]
            C9           VSS    G9        VSS           L9 MRL_PDC[4]    R9      MRL_PDC[1]
           C10           VSS    G10      VDDA          L10    VDDC       R10    PWR_ENA_L[2]
           C11           VSS    G11      VDDA          L11    VDDC       R11     PWR_FLT[1]
           C12           VSS    G12      VDDC          L12     TCK       R12          VSS
           C13           VSS    G13      VDDC          L13     TMS       R13         VDDR
           C14           VSS    G14      VDDR          L14     TDI       R14        EECLK
           C15           VSS    G15       VTT          L15     VSS       R15          VTT
           C16           VSS    G16       VTT          L16     VSS       R16          VTT
            D1           VSS    H1  HOTPLUG[2]         M1      VSS       T1          VDDR
            D2           VSS    H2  HOTPLUG[3]         M2    LODRV       T2     TXTERMADJ[1]
            D3       VDDCAUX    H3   SLOTCLK[0]        M3    DTX[0]      T3     RXTERMADJ[1]
            D4          TEST2   H4  HOTPLUG[1]         M4     VDDR       T4        SMBCLK
            D5     DWNRST_L[3]  H5   SLOTCLK[1]        M5    DTX[1]      T5       SMBDATA
                                           Page 16 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                          PI7C9X20505GP
                                                        5Port-5Lane PCI Express® Switch
                                                                    GreenPacketTM Family
                                                                                Datasheet
           PIN          NAME    PIN  NAME          PIN     NAME       PIN        NAME
            D6     DWNRST_L[1]  H6   VDDC          M6     DTX[2]      T6      PWR_IND[1] /
                                                                              SLOT_IMP[4]
            D7          VDDC    H7   VDDC          M7      VDDC       T7      PWR_IND[4]
            D8          TEST3   H8    VSS          M8   ATT_BTN[3]    T8         VDDR
            D9          VDDA    H9    VSS          M9      VDDC       T9          VSS
           D10          VDDC    H10   VSS          M10 PWR_ENA_L[4]   T10    PWR_ENA_L[1]
           D11          VDDA    H11  VDDA          M11  PWR_FLT[4]    T11         VSS
           D12           NC     H12   NC           M12  PORTERR[2]    T12       PERN[1]
           D13           NC     H13   NC           M13      TDO       T13       PERP[1]
           D14          VDDR    H14   VSS          M14      VSS       T14         VSS
           D15        PERN[4]   H15 PETP[3]        M15    PERP[2]     T15       PETP[1]
           D16         PERP[4]  H16 PETN[3]        M16    PERN[2]     T16       PETN[1]
                                       Page 17 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                        PI7C9X20505GP
                                                                                 5Port-5Lane PCI Express® Switch
                                                                                                 GreenPacketTM Family
                                                                                                                Datasheet
  5 FUNCTIONAL DESCRIPTION
  Multiple virtual PCI-to-PCI Bridges (VPPB), connected by a virtual PCI bus, reside in the Switch. Each VPPB
  contains the complete PCIe architecture layers that consist of the physical, data link, and transaction layer. The
  packets entering the Switch via one of VPPBs are first converted from serial bit-stream into parallel bus signals in
  physical layer, stripped off the link-related header by data link layer, and then relayed up to the transaction layer to
  extract out the transaction header. According to the address or ID embedded in the transaction header, the entire
  transaction packets are forwarded to the destination VPPB for formatting as a serial-type PCIe packet through the
  transmit circuits in the data link layer and physical layer. The following sections describe these function elements
  for processing PCIe packets within the Switch.
  5.1       PHYSICAL LAYER CIRCUIT
  The physical layer circuit design is based on the PHY Interface for PCI Express Architecture (PIPE). It contains
  Physical Media Attachment (PMA) and Physical Coding Sub-layer (PCS) blocks. PMA includes Serializer/
  Deserializer (SERDES), PLL1, Clock Recovery module, receiver detection circuits, electrical idle detector, and
  input/output buffers. PCS consists of framer, 8B/10B encoder/decoder, receiver elastic buffer, and PIPE PHY
  control/status circuitries. To provide the flexibility for port configuration, each lane has its own control and status
  signals for MAC to access individually. In addition, a pair of PRBS generator and checker is included for PHY
  built-in self test. The main functions of physical layer circuits include the conversion between serial-link and
  parallel bus, provision of clock source for the Switch, resolving clock difference in receiver end, and detection of
  physical layer errors.
  In order to meet the different application needs, the driving current and equalization of each transmitting channels
  can be adjusted using strapped pins individually (refer to section 3.4 for pin descriptions). The driver current of each
  channel is set to 20mA in default mode without pins being strapped. To change the current value, the user can strap
  the pins either for nominal value (HIDRV, LODRV) or actual value (DTX [3:0]), which is a scaled multiple of
  Inom. The following tables illustrate the possible transmitted current values the chip provides.
          Table 5-1 Nominal Driver Current Values (Inom)
                  HIDRV                 LODRV              NOMINAL DRIVER CURENT
                      0                     0                            20 mA
                      0                     1                            10 mA
                      1                     0                            28 mA
                      1                     1                           Reserved
          Table 5-2 Ratio of Actual Current and Nominal Current
                DTX [3:0]              ACTUAL CURRENT / NOMINAL CURRENT
                    0000                                       1.00
                    0001                                       1.05
                    0010                                       1.10
                    0011                                       1.15
                    0100                                       1.20
                    0101                                       1.25
                    0110                                       1.30
  1
    Multiple lanes could share the PLL.
                                                         Page 18 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                        PI7C9X20505GP
                                                                                5Port-5Lane PCI Express® Switch
                                                                                                GreenPacketTM Family
                                                                                                                Datasheet
                 DTX [3:0]              ACTUAL CURRENT / NOMINAL CURRENT
                   0111                                       1.35
                   1000                                       0.60
                   1001                                       0.65
                   1010                                       0.70
                   1011                                       0.75
                   1100                                       0.80
                   1101                                       0.85
                   1110                                       0.90
                   1111                                       0.95
  The equalization function of transmitting channels can optimize the driver current for different back-plane lengths
  and materials. The table shown below lists the combinations of de-emphasized driver current (ITX –IEQ) to
  non-de-emphasized driver current (ITX) for different values of DEQ [3:0].
           Table 5-3 De-emphasis Level versus DEQ [3:0]
                DEQ [3:0]             (ITX –IEQ) / ITX           De-emphasis (dB)
                   0000                     1.00                        0.00
                   0001                     0.96                        -0.35
                   0010                     0.92                        -0.72
                   0011                     0.88                        -1.11
                   0100                     0.84                        -1.51
                   0101                     0.80                        -1.94
                   0110                     0.76                        -2.38
                   0111                     0.72                        -2.85
                   1000                     0.68                        -3.35
                   1001                     0.64                        -3.88
                   1010                     0.60                        -4.44
                   1011                     0.56                        -5.04
                   1100                     0.52                        -5.68
                   1101                     0.48                        -6.38
                   1110                     0.44                        -7.13
                   1111                     0.40                        -7.96
  By default, the DEQ is set to “1000” to conform to the PCI Express 1.0a specification, which calls for a
  de-emphasis level of between –3 dB and –4 dB.
  In order to improve the data stream integrity across the channels, the receiver of each port of the Switch includes a
  reception equalizer to mitigate the effects of ISI. The reception equalizer is implemented as a selectable high-pass
  filter at the input node, and it is capable of removing as much as 0.4UI of ISI related jitter. The following table
  shows a simple guideline for selecting the appropriate value to adapt with different lengths or connector numbers in
  various applications.
           Table 5-4 Rx Equalizer Settings (RXEQCTL)
             RXEQCTL [1]          RXEQCTL [0]          Rx Eq Setting      Input Jitter              Channel Length
                     0                     0            Max Rx Eq      > 0.25 UI            > 20" and two or more
                                                                                            connectors
                     0                     1            Min Rx Eq      Between 0.1 UI       Between 8'' and 20" and up to
                                                                       and 0.25 UI          two connectors
                     1                    X                            < 0.1 UI             8" or less, up to one connector
                                                         Page 19 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                       PI7C9X20505GP
                                                                                 5Port-5Lane PCI Express® Switch
                                                                                               GreenPacketTM Family
                                                                                                                Datasheet
  5.2       DATA LINK LAYER (DLL)
  The Data Link Layer (DLL) provides a reliable data transmission between two PCI Express points. An ACK/NACK
  protocol is employed to guarantee the integrity of the packets delivered. Each Transaction Layer Packet (TLP) is
  protected by a 32-bit LCRC for error detection. The DLL receiver performs LCRC calculation to determine if the
  incoming packet is corrupted in the serial link. If an LCRC error is found, the DLL transmitter would issue a NACK
  data link layer packet (DLLP) to the opposite end to request a re-transmission, otherwise an ACK DLLP would be
  sent out to acknowledge on reception of a good TLP.
  In the transmitter, a retry buffer is implemented to store the transmitted TLPs whose corresponding ACK/NACK
  DLLP have not been received yet. When an ACK is received, the TLPs with sequence number equals to and smaller
  than that carried in the ACK would be flushed out from the buffer. If a NACK is received or no ACK/NACK is
  returned from the link partner after the replay timer expires, then a replay mechanism built in DLL transmitter is
  triggered to re-transmit the corresponding packet that receives NACK or time-out and any other TLP transmitted
  after that packet.
  Meanwhile, the DLL is also responsible for the initialization, updating, and monitoring of the flow-control credit.
  All of the flow control information is carried by DLLP to the other end of the link. Unlike TLP, DLLP is guarded
  by 16-bit CRC to detect if data corruption occurs.
  In addition, the Media Access Control (MAC) block, which is consisted of LTSSM, multiple lanes deskew,
  scrambler/de-scrambler, clock correction from inserting skip order-set, and PIPE-related control/status circuits, is
  implemented to interface physical layer with data link layer.
  5.3       TRANSACTION LAYER RECEIVE BLOCK (TLP DECAPSULATION)
  The receiving end of the transaction layer performs header information retrieval and TC/VC mapping (see section
  5.5), and it validates the correctness of the transaction type and format. If the TLP is found to contain illegal header
  or the indicated packet length mismatches with the actual packet length, then a Malformed TLP is reported as an
  error associated with the receiving port. To ensure end-to-end data integrity, a 32-bit ECRC is checked against the
  TLP at the receiver if the digest bit is set in header.
  5.4       ROUTING
  The transaction layer implements three types of routing protocols: ID-based, address-based, and implicit routing.
  For configuration reads, configuration writes, transaction completion, and user-defined messages, the packets are
  routed by their destination ID constituted of bus number, device number, and function number. Address routing is
  employed to forward I/O or memory transactions to the destination port, which is located within the address range
  indicated by the address field carried in the packet header. The packet header indicates the packet types including
  memory read, memory write, IO read, IO write, Message Signaling Interrupt (MSI) and user-defined message.
  Implicit routing is mainly used to forward system message transactions such as virtual interrupt line, power
  management, and so on. The message type embedded in the packet header determines the routing mechanism.
  If the incoming packet can not be forwarded to any other port due to a miss to hit the defined address range or
  targeted ID, this is considered as Unsupported Request (UR) packet, which is similar to a master abort event in PCI
  protocol.
                                                          Page 20 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                      PI7C9X20505GP
                                                                                 5Port-5Lane PCI Express® Switch
                                                                                               GreenPacketTM Family
                                                                                                              Datasheet
  5.5     TC/VC MAPPING
  The 3-bit TC field defined in the header identifies the traffic class of the incoming packets. To enable the
  differential service, a TC/VC mapping table at destination port that is pre-programmed by system software or
  EEPROM pre-load is utilized to cast the TC labeled packets into the desired virtual channel. Note that TC0 traffic is
  mapped into VC0 channel by default. After the TC/VC mapping, the receive block dispatches the incoming request,
  completion, or data into the appropriate VC0 and VC1 queues.
  5.6      QUEUE
  In PCI Express, it defines six different packet types to represent request, completion, and data. They are respectively
  Posted Request Header (PH), Posted Request Data payload (PD), Non-Posted Request Header (NPH), Non-Posted
  Data Payload (NPD), Completion Header (CPLH) and Completion Data payload (CPLD). Each packet with
  different type would be put into a separate queue in order to facilitate the following ordering processor. Since NPD
  usually contains one DW, it can be merged with the corresponding NPH into a common queue named NPHD.
  Except NPHD, each virtual channel (VC0 or VC1) has its own corresponding packet header and data queue. When
  only VC0 is needed in some applications, VC1 can be disabled and its resources assigned to VC0 by asserting
  VC1_EN (Virtual Channel 1 Enable) to low.
  5.6.1      PH
  PH queue provides TLP header spaces for posted memory writes and various message request headers. Each header
  space occupies sixteen bytes to accommodate 3 DW or 4 DW headers. There are two PH queues for VC0 and VC1
  respectively.
  5.6.2      PD
  PD queue is used for storing posted request data. If the received TLP is of the posted request type and is determined
  to have payload coming with the header, the payload data would be put into PD queue. There are two PD queues for
  VC0 and VC1 respectively.
  5.6.3 NPHD
  NPHD queue provides TLP header spaces for non-posted request packets, which include memory read, IO read, IO
  write, configuration read, and configuration write. Each header space takes twenty bytes to accommodate a 3-DW
  header, s 4-DW header, s 3-WD header with 1-DW data, and a 4-DW header with 1-DW data. There is only one
  NPHD queue for VC0, since non-posted request cannot be mapped into VC1.
  5.6.4 CPLH
  CPLH queue provides TLP header space for completion packets. Each header space takes twelve bytes to
  accommodate a 3-DW header. Please note that there is no 4-DW completion headers. There are two CPLH queues
  for VC0 and VC1 respectively.
                                                       Page 21 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                       PI7C9X20505GP
                                                                               5Port-5Lane PCI Express® Switch
                                                                                              GreenPacketTM Family
                                                                                                              Datasheet
  5.6.5 CPLD
  CPLD queue is used for storing completion data. If the received TLP is of the completion type and is determined to
  have payload coming with the header, the payload data would be put into CPLD queue. There are two CPLD queues
  for VC0 and VC1 respectively.
  5.7      TRANSACTION ORDERING
  Within a VPPB, a set of ordering rules is defined to regulate the transactions on the PCI Express Switch including
  Memory, IO, Configuration and Messages, in order to avoid deadlocks and to support the Producer-Consumer
  model. The ordering rules defined in table 5-4 apply within a single Traffic Class (TC). There is no ordering
  requirement among transactions within different TC labels. Since the transactions with the same TC label are not
  allowed to map into different virtual channels, it implies no ordering relationship between the traffic in VC0 and
  VC1.
        Table 5-4 Summary of PCI Express Ordering Rules
         Row Pass Column           Posted       Read          Non-posted Write  Read          Non-posted Write
                                   Request     Request        Request           Completion    Completion
         Posted Request            Yes/No1     Yes5           Yes5              Yes5          Yes5
         Read Request              No2         Yes            Yes               Yes           Yes
         Non-posted Write Request  No2         Yes            Yes               Yes           Yes
         Read Completion           Yes/No3     Yes            Yes               Yes           Yes
         Non-Posted Write          Yes4        Yes            Yes               Yes           Yes
         Completion
  1. When the Relaxed Ordering Attribute bit is cleared, the Posted Request transactions including memory write and
  message request must complete on the egress bus of VPPB in the order in which they are received on the ingress
  bus of VPPB. If the Relaxed Ordering Attribute bit is set, the Posted Request is permitted to pass over other Posted
  Requests occurring before it.
  2. A Read Request transmitting in the same direction as a previously queued Posted Request transaction must
  push the posted write data ahead of it. The Posted Request transaction must complete on the egress bus before the
  Read Request can be attempted on the egress bus. The Read transaction can go to the same location as the Posted
  data. Therefore, if the Read transaction were to pass the Posted transaction, it would return stale data.
  3. When the Relaxed Ordering Attribute bit is cleared, a Read completion must ‘‘pull’’ ahead of previously
  queued posted data transmitting in the same direction. In this case, the read data transmits in the same direction as
  the posted data, and the requestor of the read transaction is on the same side of the VPPB as the completer of the
  posted transaction. The posted transaction must deliver to the completer before the read data is returned to the
  requestor. If the Relaxed Ordering Attribute bit is set, then a read completion is permitted to pass a previously
  queued Memory Write or Message Request.
  4. Non-Posted Write Completions are permitted to pass a previous Memory Write or Message Request transaction.
  Such transactions are actually transmitting in the opposite directions and hence have no ordering relationship.
  5. Posted Request transactions must be given opportunities to pass Non-posted Read and Write Requests as well
  as Completions. Otherwise, deadlocks may occur when some older Bridges that do not support delayed transactions
  are mixed with PCIe Switch in the same system. A fairness algorithm is used to arbitrate between the Posted Write
  queue and the Non-posted transaction queue.
                                                       Page 22 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                        PI7C9X20505GP
                                                                                   5Port-5Lane PCI Express® Switch
                                                                                                GreenPacketTM Family
                                                                                                               Datasheet
  5.8     PORT ARBITRATION
  Among multiple ingress ports, the port arbitration built in the egress port determines which input traffic to be
  forwarded to the output port. The arbitration algorithm contains hardware fixed Round Robin, 128-phase Weighted
  Round-Robin and programmable 128-phase time-based WRR. The port arbitration is held within the same VC
  channel. It means that each port has two port arbitration circuitries for VC0 and VC1 respectively. At upstream port,
  in addition to the traffic from inter-port, the intra-port packet such as configurations completion would also join the
  arbitration loop to get the service in Virtual Channel 0.
  5.9     VC ARBITRATION
  After port arbitration, VC arbitration is executed among different VC channels within the same source. Three
  arbitration algorithms are provided to choose the appropriate VC. They are respectively Strict Priority, Round Robin
  or Weighted Round Robin.
  5.10 FLOW CONTROL
  PCI Express employs Credit-Based Flow Control mechanism to make buffer utilization more efficient. The
  transaction layer transmitter ensures that it does not transmit a TLP to an opposite receiver unless the receiver has
  enough buffer space to accept the TLP. The transaction layer receiver has the responsibility to advertise the free
  buffer space to an opposite transmitter to avoid packet stale. In this switch, each port has separate queues for
  different traffic types and the credits are on the fly sent to data link layer, which compares the current available
  credits with the monitored one and reports the updated credit to the counterpart. If no new credit is acquired, the
  credit reported is scheduled for every 30 us to prevent from link entering retrain. On the other hand, the receiver at
  each egress port gets the usable credits from the opposite end in a link. It would broadcast them to all the other
  ingress ports for gating the packet transmission.
  5.11 TRANSATION LAYER TRANSMIT BLOCK (TLP ENCAPSULATION)
  The transmit portion of transaction layer performs the following functions. They are to construct the all types of
  forwarded TLP generated from VC arbiter, respond with the completion packet when the local resource (i.e.
  configuration register) is accessed and regenerate the message that terminated at receiver to RC if acts as an
  upstream port.
                                                         Page 23 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                              PI7C9X20505GP
                                                                                           5Port-5Lane PCI Express® Switch
                                                                                                         GreenPacketTM Family
                                                                                                                   Datasheet
  6 EEPROM INTERFACE AND SYSTEM MANAGEMENT BUS
  The EEPROM interface consists of two pins: EECLK (EEPROM clock output) and EEPD (EEPROM bi-directional
  serial data). The Switch may control an ISSI IS24C04 or compatible parts using into 512x8 bits. The EEPROM is
  used to initialize a number of registers before enumeration. This is accomplished after PRST# is de-asserted, at
  which time the data from the EEPROM is loaded. The EEPROM interface is organized into a 16-bit base, and the
  Switch supplies a 7-bit EEPROM word address. The Switch does not control the EEPROM address input. It can
  only access the EEPROM with address input set to 0.
  The System Management Bus interface consists of two pins: SMBCLK (System Management Bus Clock input) and
  SMBDATA (System Management Bus Data input/ output).
  6.1     EEPROM INTERFACE
  6.1.1 AUTO MODE EERPOM ACCESS
  The Switch may access the EEPROM in a WORD format by utilizing the auto mode through a hardware sequencer.
  The EEPROM start-control, address, and read/write commands can be accessed through the configuration register.
  Before each access, the software should check the Autoload Status bit before issuing the next start.
  6.1.2 EEPROM MODE AT RESET
  During a reset, the Switch will automatically load the information/data from the EEPROM if the automatic load
  condition is met. The first offset in the EEPROM contains a signature. If the signature is recognized, the autoload
  initiates right after the reset.
  During the autoload, the Bridge will read sequential words from the EEPROM and write to the appropriate registers.
  Before the Bridge registers can be accessed through the host, the autoload condition should be verified by reading
  bit [3] offset DCh (EEPROM Autoload Status). The host access is allowed only after the status of this bit is set to '0'
  which indicates that the autoload initialization sequence is complete.
  6.1.3 EEPROM SPACE ADDRESS MAP
                             15 – 8                                           7–0                         BYTE OFFSET
                                            EEPROM Signature (1516h)                                           00h
                                                     Vendor ID                                                 02h
                                                     Device ID                                                 04h
              Extended VC Count / Link Capability / Switch Mode Operation / Interrupt pin for Port 1 ~ 4       06h
                                              Subsystem Vender ID                                              08h
                                                   Subsystem ID                                                0Ah
               Max_Payload_Size Support / ASPM Support / Role_Base Error Reporting / RefClk ppm                0Ch
                                                     Difference
                                                     Reserved                                                  0Eh
                         PM Data for Port 0                         PM Capability for Port 0                   10h
                         PM Data for Port 1                         PM Capability for Port 1                   12h
                         PM Data for Port 2                         PM Capability for Port 2                   14h
                         PM Data for Port 3                         PM Capability for Port 3                   16h
                         PM Data for Port 4                         PM Capability for Port 4                   18h
                                                     Reserved                                                  1Ah
                                                               Page 24 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                         PI7C9X20505GP
                                                                                        5Port-5Lane PCI Express® Switch
                                                                                                    GreenPacketTM Family
                                                                                                              Datasheet
                          15 – 8                                           7–0                       BYTE OFFSET
                                                  Reserved                                                1Ch
                                                  Reserved                                                1Eh
                 TC/VC Map for Port 0 (VC0)              Slot Clock / LPVC Count / Port Num, Port 0       20h
                  TC/VC Map for Port 1(VC0)                 Slot Implemented / Slot Clock / LPVC          22h
                                                                   Count / Port Num, Port 1
                  TC/VC Map for Port 2 (VC0)                Slot Implemented / Slot Clock / LPVC          24h
                                                                   Count / Port Num, Port 2
                  TC/VC Map for Port 3 (VC0)                Slot Implemented / Slot Clock / LPVC          26h
                                                                   Count / Port Num, Port 3
                  TC/VC Map for Port 4 (VC0)                Slot Implemented / Slot Clock / LPVC          28h
                                                                   Count / Port Num, Port 4
                                                  Reserved                                                2Ah
                                                  Reserved                                                2Ch
                                                  Reserved                                                2Eh
                                                  Reserved                                                30h
                                          Slot Capability 0 for Port 1                                    32h
                                          Slot Capability 0 for Port 2                                    34h
                                          Slot Capability 0 for Port 3                                    36h
                                          Slot Capability 0 for Port 4                                    38h
                                                  Reserved                                                3Ah
                                                  Reserved                                                3Ch
                                                  Reserved                                                3Eh
                                                  Reserved                                                40h
                                          Slot Capability 1 for Port 1                                    42h
                                          Slot Capability 1 for Port 2                                    44h
                                          Slot Capability 1 for Port 3                                    46h
                                          Slot Capability 1 for Port 4                                    48h
                                                  Reserved                                                4Ah
                                                  Reserved                                                4Ch
                                                  Reserved                                                4Eh
                  TC/VC Map for Port 0 (VC1)                     Maximum Time Slot for Port 0             50h
                  TC/VC Map for Port 1 (VC1)                     Maximum Time Slot for Port 1             52h
                  TC/VC Map for Port 2 (VC1)                     Maximum Time Slot for Port 2             54h
                  TC/VC Map for Port 3 (VC1)                     Maximum Time Slot for Port 3             56h
                  TC/VC Map for Port 4 (VC1)                     Maximum Time Slot for Port 4             58h
                                                  Reserved                                                5Ah
                                                  Reserved                                                5Ch
                                                  Reserved                                                5Eh
                               Power Budgeting Capability Register for Port 0                             60h
                               Power Budgeting Capability Register for Port 1                             62h
                               Power Budgeting Capability Register for Port 2                             64h
                               Power Budgeting Capability Register for Port 3                             66h
                               Power Budgeting Capability Register for Port 4                             68h
                                                  Reserved                                                6Ah
                                                  Reserved                                                6Ch
                                                  Reserved                                                6Eh
                                     Replay Time-out Counter for Port 0                                   70h
                                     Replay Time-out Counter for Port 1                                   72h
                                     Replay Time-out Counter for Port 2                                   74h
                                     Replay Time-out Counter for Port 3                                   76h
                                     Replay Time-out Counter for Port 4                                   78h
                                                  Reserved                                                7Ah
                                                  Reserved                                                7Ch
                                                  Reserved                                                7Eh
                                   Acknowledge Latency Timer for Port 0                                   80h
                                   Acknowledge Latency Timer for Port 1                                   82h
                                   Acknowledge Latency Timer for Port 2                                   84h
                                   Acknowledge Latency Timer for Port 3                                   86h
                                   Acknowledge Latency Timer for Port 4                                   88h
                                                  Reserved                                                8Ah
                                                  Reserved                                                8Ch
                                                  Reserved                                                8Eh
                                                             Page 25 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                   PI7C9X20505GP
                                                                                      5Port-5Lane PCI Express® Switch
                                                                                                         GreenPacketTM Family
                                                                                                                           Datasheet
                         15 – 8                                         7–0                                 BYTE OFFSET
                                         PHY Parameter for Port 0                                                    90h
                                         PHY Parameter for Port 1                                                    92h
                                         PHY Parameter for Port 2                                                    94h
                                         PHY Parameter for Port 3                                                    96h
                                         PHY Parameter for Port 4                                                    98h
                                               Reserved                                                              9Ah
                                               Reserved                                                              9Ch
                                               Reserved                                                              9Eh
                        Reserved                         PM Control Para/Rx Polarity for Port 0                      A0h
                        Reserved                         PM Control Para/Rx Polarity for Port 1                      A2h
                        Reserved                         PM Control Para/Rx Polarity for Port 2                      A4h
                        Reserved                         PM Control Para/Rx Polarity for Port 3                      A6h
                        Reserved                         PM Control Para/Rx Polarity for Port 4                      A8h
  6.1.4 MAPPING EEPROM CONTENTS TO CONFIGURATION REGISTERS
              ADDRESS               PCI CFG             DESCRIPTION
                                    OFFSET
                  00h                                   EEPROM signature – 1516h
                  02h         00h ~ 01h                 Vendor ID
                  04h         02h ~ 03h                 Device ID
                  06h         144h (Port 0~4)           Extended VC Count for Port 0 ~ 4
                              144h: Bit [0]                      Bit [0]: It represents the supported VC count other than the
                                                                  default VC
                              ECh (Port 0~4)            Link Capability for Port 0 ~ 4
                              ECh: Bit [14:12]                   Bit [3:1]: It represents L0s Exit Latency for all ports
                              ECh: Bit [17:15]                   Bit [6:4]: It represents L1 Exit Latency for all ports
                              B4h (Port 0~4)            Switch Mode Operation for Port 0
                              B4h:Bit [5]                        Bit [8]: no ordering on packets for different egress port mode
                                  Bit [6]                        Bit [9]: no ordering on different tag of completion mode
                                  Bit [0]                        Bit [10]: Store and Forward
                                  Bit [2:1]                      Bit [12:11]: Cut-through Threshold
                                  Bit [3]                        Bit [13] : Port arbitrator Mode
                                  Bit [4]                        Bit [14]: Credit Update Mode
                              3Ch (Port 1~4)            Interrupt pin for Port 1 ~ 4
                              3Ch: Bit [8]                       Bit [15]: Set when INTA is requested for interrupt resource
                  08h         BCh: Bit [15:0]           Subsystem Vender ID
                  0Ah         BCh: Bit [31:16]          Subsystem ID
                  0Ch         E4h(Port 0~4)             Max_Payload_Size Support for Port 0 ~ 4
                              E4h: Bit 0                         Bit [0]: Indicated the maximum payload size that the device
                                                                  can support for the TLP
                              ECh(Port 0~4)             ASPM Support for Port 0 ~ 4
                              ECh: Bit[11:10]                    Bit [2:1] : Indicate the level of ASPM supported on the PCIe link
                              E4h(Port 0~4)             Role_Base Error Reporting for Port 0 ~ 4
                              E4h: Bit[15]                       Bit [3] : Indicate implement the role-base error reporting
                              B0h(port 0~4)             MSI Capability Disable for Port 0~4
                              B0h : Bit [14]                     Bit [4] : Disable MSI capability
                              B0h(port 0~4)             AER Capability Disable for Port 0~4
                              B0h : Bit [15]                     Bit [5] : Disable AER capability
                              B4h(port 0~4)             Compliance Pattern Parity Control Disable for Port 0~4
                              B4h : Bit [15]                     Bit [6] : Disable compliance pattern parity
                                                         Page 26 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                      PI7C9X20505GP
                                                                          5Port-5Lane PCI Express® Switch
                                                                                             GreenPacketTM Family
                                                                                                               Datasheet
              ADDRESS             PCI CFG    DESCRIPTION
                                  OFFSET
                            B0h(port 0~4)    Power Management Capability Disable for Port 0~4
                            B0h : Bit [13]           Bit [7] : Disable Power Management Capability
                            A8h(Port 0~4)    RefClk ppm Difference for Port 0 ~ 4
                            A8h: Bit [14:13]         Bit [9:8]: It represents RefClk ppm difference between the two
                                                      ends in one link; 00: 0 ppm, 01: 100 ppm, 10: 200 ppm, 11: 300
                                                      ppm
                  10h       84h (Port 0)     No_Soft_Reset for Port 0
                            84h: Bit [3]             Bit [0]: No_Soft_Reset.
                            80h (Port 0)     Power Management Capability for Port 0
                            80h: Bit [24:22]         Bit [3:1]: AUX Current.
                            80h: Bit [25]            Bit [4]: read only as 1 to indicate Bridge supports the D1 power
                                                      management state
                            80h: Bit [26]            Bit [5]: read only as 1 to indicate Bridge supports the D2 power
                                                      management state
                            80h: Bit [29:28]         Bit [7:6]: PME Support for D2 and D1 states
                  11h       84h (Port 0)     Power Management Data for Port 0
                            84h: Bit [31:24]         Bit [15:8]: read only as Data register
                  12h       84h (Port 1)     No_Soft_Reset for Port 1
                            84h: Bit [3]             Bit [0]: No_Soft_Reset.
                            80h (Port 1)     Power Management Capability for Port 1
                            80h: Bit [24:22]         Bit [3:1]: AUX Current.
                            80h: Bit [25]            Bit [4]: read only as 1 to indicate Bridge supports the D1 power
                                                      management state
                            80h: Bit [26]            Bit [5]: read only as 1 to indicate Bridge supports the D2 power
                                                      management state
                            80h: Bit [29:28]         Bit [7:6]: PME Support for D2 and D1 states
                  13h       84h (Port 1)     Power Management Data for Port 1
                            84h: Bit [31:24]         Bit [15:8] – read only as Data register
                  14h       84h (Port 2)     No_Soft_Reset for Port 2
                            84h: Bit [3]             Bit [0]: No_Soft_Reset
                            80h (Port 2)     Power Management Capability for Port 2
                            80h: Bit [24:22]         Bit [3:1]: AUX Current
                            80h: Bit [25]            Bit [4]: read only as 1 to indicate Bridge supports the D1 power
                                                      management state
                            80h: Bit [26]            Bit [5]: read only as 1 to indicate Bridge supports the D2 power
                                                      management state
                            80h: Bit [29:28]         Bit [7:6]: PME Support for D2 and D1 states
                  15h       84h (Port 2)     Power Management Data for Port 2
                            84h: Bit [31:24]         Bit [15:8] – read only as Data register
                  16h       84h (Port 3)     No_Soft_Reset for Port 3
                            84h: Bit [3]             Bit [0]: No_Soft_Reset
                            80h (Port 3)     Power Management Capability for Port 3
                            80h: Bit [24:22]         Bit [3:1]: AUX Current
                            80h: Bit [25]            Bit [4]: read only as 1 to indicate Bridge supports the D1 power
                                                      management state
                            80h: Bit [26]            Bit [5]: read only as 1 to indicate Bridge supports the D2 power
                                                      management state
                            80h: Bit [29:28]         Bit [7:6]: PME Support for D2 and D1 states
                  17h       84h (Port 3)     Power Management Data for Port 3
                            84h: Bit [31:24]         Bit [15:8] – read only as Data register
                  18h       84h (Port 4)     No_Soft_Reset for Port 4
                            84h: Bit [3]             Bit [0]: No_Soft_Reset
                            80h (Port 4)     Power Management Capability for Port 4
                            80h: Bit [24:22]         Bit [3:1]: AUX Current
                            80h: Bit [25]            Bit [4]: read only as 1 to indicate Bridge supports the D1 power
                                                      management state
                            80h: Bit [26]            Bit [5]: read only as 1 to indicate Bridge supports the D2 power
                                                      management state
                                             Page 27 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                       PI7C9X20505GP
                                                                           5Port-5Lane PCI Express® Switch
                                                                                                GreenPacketTM Family
                                                                                                                Datasheet
              ADDRESS             PCI CFG    DESCRIPTION
                                  OFFSET
                            80h: Bit [29:28]          Bit [7:6]: PME Support for D2 and D1 states
                  19h       84h (Port 4)     Power Management Data for Port 4
                            84h: Bit [31:24]          Bit [15:8] – read only as Data register
                  20h       F0h (Port 0)     Slot Clock Configuration for Port 0
                            F0h: Bit [28]             Bit [1]: When set, the component uses the clock provided on the
                                                       connector
                            80h (Port 0)     Device specific Initialization for Port 0
                            80h: Bit[21]              Bit [2]: When set, the DSI is required
                            144h (Port 0)    LPVC Count for Port 0
                            144h: Bit [4]             Bit [3]: When set, the VC1 is allocated to LPVC of Egress Port 0
                            ECh (Port 0)     Port Number for Port 0
                            ECh: Bit [26:24]          Bit [6:4]: It represents the logic port numbering for physical port
                                                       0
                            154h (Port 0)    VC0 TC/VC Map for Port 0
                            154h: Bit [7:1]           Bit [15:9]: When set, it indicates the corresponding TC is
                                                       mapped into VC0
                  22h       E0h (Port1)      PCIe Capability Slot Implemented for Port 1
                            E0h: Bit [24]             Bit [0]: When set, the slot is implemented for Port 1
                            F0h (Port 1)     Slot Clock Configuration for Port 1
                            F0h: Bit [28]             Bit [1]: When set, the component uses the clock provided on the
                                                          Connector
                            80h (Port 1)     Device specific Initialization for Port 1
                            80h: Bit[21]              Bit [2]: When set, the DSI is required
                            144h (Port 1)    LPVC Count for Port 1
                            144h: Bit [4]             Bit [3]: When set, the VC1 is allocated to LPVC of Egress Port 1
                            ECh (Port 1)     Port Number for Port 1
                            ECh: Bit [26:24]          Bit [6:4]: It represents the logic port numbering for physical port
                                                       1
                            154h (Port 1)    VC0 TC/VC Map for Port 1
                            154h: Bit [7:1]           Bit [15:9]: When set, it indicates the corresponding TC is
                                                       mapped into VC0
                  24h       E0h (Port 2)     PCIe Capability Slot Implemented for Port 2
                            E0h: Bit [24]             Bit [0]: When set, the slot is implemented for Port 2
                            F0h (Port 2)     Slot Clock Configuration for Port 2
                            F0h: Bit [28]             Bit [1]: When set, the component uses the clock provided on the
                                                       Connector
                            80h (Port 2)     Device specific Initialization for Port 2
                            80h: Bit[21]              Bit [2]: When set, the DSI is required
                            144h (Port 2)    LPVC Count for Port 2
                            144h: Bit [4]             Bit [3]: When set, the VC1 is allocated to LPVC of Egress Port 2
                            ECh (Port 2)     Port Number for Port 2
                            ECh: Bit [26:24]          Bit [6:4]: It represents the logic port numbering for physical port
                                                       2
                            154h (Port 2)    VC0 TC/VC Map for Port 2
                            154h: Bit [7:1]           Bit [15:9]: When set, it indicates the corresponding TC is
                                                       mapped into VC0
                                             Page 28 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                        PI7C9X20505GP
                                                                            5Port-5Lane PCI Express® Switch
                                                                                                 GreenPacketTM Family
                                                                                                                 Datasheet
              ADDRESS             PCI CFG     DESCRIPTION
                                  OFFSET
                  26h       E0h (Port 3)      PCIe Capability Slot Implemented for Port 3
                            E0h: Bit [24]              Bit [0]: When set, the slot is implemented for Port 3
                            F0h (Port 3)      Slot Clock Configuration for Port 3
                            F0h: Bit [28]              Bit [1]: When set, the component uses the clock provided on the
                                                           Connector
                            80h (Port 3)      Device specific Initialization for Port 3
                            80h: Bit[21]               Bit [2]: When set, the DSI is required
                            144h (Port 3)     LPVC Count for Port 3
                            144h: Bit [4]              Bit [3]: When set, the VC1 is allocated to LPVC of Egress Port 3
                            ECh (Port 3)      Port Number for Port 3
                            ECh: Bit [26:24]           Bit [6:4]: It represents the logic port numbering for physical port
                                                        3
                            154h (Port 3)     VC0 TC/VC Map for Port 3
                            154h: Bit [7:1]            Bit [15:9]: When set, it indicates the corresponding TC is
                                                        mapped into VC0
                  28h       E0h (Port 4)      PCIe Capability Slot Implemented for Port 4
                            E0h: Bit [24]              Bit [0]: When set, the slot is implemented for Port 4
                            F0h (Port 4)      Slot Clock Configuration for Port 4
                            F0h: Bit [28]              Bit [1]: When set, the component uses the clock provided on the
                                                           Connector
                            80h (Port 4)      Device specific Initialization for Port 4
                            80h: Bit[21]               Bit [2]: When set, the DSI is required
                            144h (Port 4)     LPVC Count for Port 4
                            144h: Bit [4]              Bit [3]: When set, the VC1 is allocated to LPVC of Egress Port 4
                            ECh (Port 4)      Port Number for Port 4
                            ECh: Bit [26:24]           Bit [6:4]: It represents the logic port numbering for physical port
                                                        4
                            154h (Port 4)     VC0 TC/VC Map for Port 4
                            154h: Bit [7:1]            Bit [15:9]: When set, it indicates the corresponding TC is
                                                        mapped into VC0
                  32h       F4h (Port 1)      Slot Capability 0 of Port 1
                            F4h: Bit [15:0]            Bit [15:0]: Mapping to the low word of slot capability register
                  34h       F4h (Port 2)      Slot Capability 0 of Port 2
                            F4h: Bit [15:0]            Bit [15:0]: Mapping to the low word of slot capability register
                  36h       F4h (Port 3)      Slot Capability 0 of Port 3
                            F4h: Bit [15:0]            Bit [15:0]: Mapping to the low word of slot capability register
                  38h       F4h (Port 4)      Slot Capability 0 of Port 4
                            F4h: Bit [15:0]            Bit [15:0]: Mapping to the low word of slot capability register
                  42h       F4h (Port 1)      Slot Capability 1 of Port 1
                            F4h: Bit [31:16]           Bit [15:0]: Mapping to the high word of slot capability register
                  44h       F4h (Port 2)      Slot Capability 1 of Port 2
                            F4h: Bit [31:16]           Bit [15:0]: Mapping to the high word of slot capability register
                  46h       F4h (Port 3)      Slot Capability 1 of Port 3
                            F4h: Bit [31:16]           Bit [15:0]: Mapping to the high word of slot capability register
                  48h       F4h (Port 4)      Slot Capability 1 of Port 4
                            F4h: Bit [31:16]           Bit [15:0]: Mapping to the high word of slot capability register
                  50h       15Ch (Port 0)     VC1 MAX Time Slot and TC/VC Map for Port 0
                            15Ch: Bit [22:16]          Bit [6:0]: The maximum time slot supported by VC1
                            160h: Bit [7:0]            Bit [15:8]: When set, it indicates the corresponding TC is
                                                        mapped into VC1
                  52h       15Ch (Port 1)     VC1 MAX Time Slot and TC/VC Map for Port 1
                            15Ch: Bit [22:16]          Bit [6:0]: The maximum time slot supported by VC1
                            160h: Bit [7:0]            Bit [15:8]: When set, it indicates the corresponding TC is
                                                        mapped into VC1
                                              Page 29 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                       PI7C9X20505GP
                                                                          5Port-5Lane PCI Express® Switch
                                                                                              GreenPacketTM Family
                                                                                                               Datasheet
              ADDRESS             PCI CFG     DESCRIPTION
                                  OFFSET
                  54h       15Ch (Port 2)     VC1 MAX Time Slot and TC/VC Map for Port 2
                            15Ch: Bit [22:16]         Bit [6:0]: The maximum time slot supported by VC1
                            160h: Bit [7:0]           Bit [15:8]: When set, it indicates the corresponding TC is
                                                       mapped into VC1
                  56h       15Ch (Port 3)     VC1 MAX Time Slot and TC/VC Map for Port 3
                            15Ch: Bit [22:16]         Bit [6:0]: The maximum time slot supported by VC1
                            160h: Bit [7:0]           Bit [15:8]: When set, it indicates the corresponding TC mapped
                                                       into VC1
                  58h       15Ch (Port 4)     VC1 MAX Time Slot and TC/VC Map for Port 4
                            15Ch: Bit [22:16]         Bit [6:0]: The maximum time slot supported by VC1
                            160h: Bit [7:0]           Bit [15:8]: When set, it indicates the corresponding TC is
                                                       mapped into VC1
                  60h       214h (Port 0)     Power Budget Register for Port 0
                            214h: Bit [7:0]           Bit [7:0]: Base Power
                            214h: Bit [9:8]           Bit [9:8]: Data Scale
                            214h: Bit [14:13]         Bit [11:10]: PM State
                            218h: Bit [0]             Bit [15]: System Allocated
                  62h       214h (Port 1)     Power Budget Register for Port 1
                            214h: Bit [7:0]           Bit [7:0]: Base Power
                            214h: Bit [9:8]           Bit [9:8]: Data Scale
                            214h: Bit [14:13]         Bit [11:10]: PM State
                            218h: Bit [0]             Bit [15]: System Allocated
                  64h       214h (Port 2)     Power Budget Register for Port 2
                            214h: Bit [7:0]           Bit [7:0]: Base Power
                            214h: Bit [9:8]           Bit [9:8]: Data Scale
                            214h: Bit [14:13]         Bit [11:10]: PM State
                            218h: Bit [0]             Bit [15]: System Allocated
                  66h       214h (Port 3)     Power Budget Register for Port 3
                            214h: Bit [7:0]           Bit [7:0]: Base Power
                            214h: Bit [9:8]           Bit [9:8]: Data Scale
                            214h: Bit [14:13]         Bit [11:10]: PM State
                            218h: Bit [0]             Bit [15]: System Allocated
                  68h       214h (Port 4)     Power Budget Register for Port 4
                            214h: Bit [7:0]           Bit [7:0]: Base Power
                            214h: Bit [9:8]           Bit [9:8]: Data Scale
                            214h: Bit [14:13]         Bit [11:10]: PM State
                            218h: Bit [0]             Bit [15]: System Allocated
                  70h       B0h (Port 0)      Replay Time-out Counter for Port 0
                            B0h: Bit [15:0]           Bit [15:0]: Relay Time-out Counter
                  72h       B0h (Port 1)      Replay Time-out Counter for Port 1
                            B0h: Bit [15:0]           Bit [15:0]: Relay Time-out Counter
                  74h       B0h (Port 2)      Replay Time-out Counter for Port 2
                            B0h: Bit [15:0]           Bit [15:0]: Relay Time-out Counter
                  76h       B0h (Port 3)      Replay Time-out Counter for Port 3
                            B0h: Bit [15:0]           Bit [15:0]: Relay Time-out Counter
                  78h       B0h (Port 4)      Replay Time-out Counter for Port 4
                            B0h: Bit [15:0]           Bit [15:0]: Relay Time-out Counter
                  80h       B0h (Port 0)      Acknowledge Latency Timer for Port 0
                            B0h: Bit [31:16]          Bit [31:16]: Acknowledge Latency Timer
                  82h       B0h (Port 1)      Acknowledge Latency Timer for Port 1
                            B0h: Bit [31:16]          Bit [31:16]: Acknowledge Latency Timer
                  84h       B0h (Port 2)      Acknowledge Latency Timer for Port 2
                            B0h: Bit [31:16]          Bit [31:16]: Acknowledge Latency Timer
                  86h       B0h (Port 3)      Acknowledge Latency Timer for Port 3
                            B0h: Bit [31:16]          Bit [31:16]: Acknowledge Latency Timer
                  88h       B0h (Port 4)      Acknowledge Latency Timer for Port 4
                            B0h: Bit [31:16]          Bit [31:16]: Acknowledge Latency Timer
                  90h       B4h (Port 0)      PHY Parameter for Port 0
                            B4h: Bit [31:16]          Bit [31:16]: PHY Parameter
                  92h       B4h (Port 1)      PHY Parameter for Port 1
                            B4h: Bit [31:16]          Bit [31:16]: PHY Parameter
                  94h       B4h (Port 2)      PHY Parameter for Port 2
                            B4h: Bit [31:16]          Bit [31:16]: PHY Parameter
                                              Page 30 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                     PI7C9X20505GP
                                                                            5Port-5Lane PCI Express® Switch
                                                                                                GreenPacketTM Family
                                                                                                          Datasheet
              ADDRESS            PCI CFG     DESCRIPTION
                                  OFFSET
                  96h       B4h (Port 3)     PHY Parameter for Port 3
                            B4h: Bit [31:16]            Bit [31:16]: PHY Parameter
                  98h       B4h (Port 4)     PHY Parameter for Port 4
                            B4h: Bit [31:16]            Bit [31:16]: PHY Parameter
                  A0h       B4h (Port 0)     PM Control Parameter for Port 0
                            B4h: Bit [13:8]             Bit [5:4] : L0s enable
                                                        Bit [3:2] : L1 delay count select
                                                        Bit [1:0] : D3 enters L1
                            B4h (Port 0)     Rx Polarity Inversion Disable for port 0
                            B4h: Bit [14]               Bit [6] : Disable Rx polarity capability
                  A2h       B4h (Port 1)     PM Control Parameter for Port 1
                            B4h: Bit [13:8]             Bit [5:4] : L0s enable
                            B4h (Port 1)                Bit [3:2] : L1 delay count select
                            B4h: Bit [14]               Bit [1:0] : D3 enters L1
                                             Rx Polarity Inversion Disable for port 1
                                                        Bit [6] : Disable Rx polarity capability
                  A4h       B4h (Port 2)     PM Control Parameter for Port 2
                            B4h: Bit [13:8]             Bit [5:4] : L0s enable
                                                        Bit [3:2] : L1 delay count select
                                                        Bit [1:0] : D3 enters L1
                            B4h (Port 2)     Rx Polarity Inversion Disable for port 2
                            B4h: Bit [14]               Bit [6] : Disable Rx polarity capability
                  A6h       B4h (Port 3)     PM Control Parameter for Port 3
                            B4h: Bit [13:8]             Bit [5:4] : L0s enable
                                                        Bit [3:2] : L1 delay count select
                                                        Bit [1:0] : D3 enters L1
                            B4h (Port 3)     Rx Polarity Inversion Disable for port 3
                            B4h: Bit [14]               Bit [6] : Disable Rx polarity capability
                  A8h       B4h (Port 4)     PM Control Parameter for Port 4
                            B4h: Bit [13:8]             Bit [5:4] : L0s enable
                                                        Bit [3:2] : L1 delay count select
                                                        Bit [1:0] : D3 enters L1
                            B4h (Port 4)     Rx Polarity Inversion Disable for port 4
                            B4h: Bit [14]    Bit [6] : Disable Rx polarity capability
                                             Page 31 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                   PI7C9X20505GP
                                                                            5Port-5Lane PCI Express® Switch
                                                                                             GreenPacketTM Family
                                                                                                         Datasheet
  6.2     SMBus INTERFACE
  The PI7C9X20505GP provides the System Management Bus (SMBus), a two-wire interface through which a simple
  device can communicate with the rest of the system. The SMBus interface on the PI7C9X20505GP is a
  bi-directional slave interface. It can receive data from the SMBus master or send data to the master. The interface
  allows full access to the configuration registers. A SMBus master, such as the processor or other SMBus devices,
  can read or write to every RW configuration register (read/write register). In addition, the RO and HwInt registers
  (read-only and hardware initialized registers) that can be auto-loaded by the EEPROM interface can also be read
  and written by the SMBus interface. This feature allows increases in the system expandability and flexibility in
  system implementation.
            Figure 6-1 SMBus Architecture Implementation on PI7C9X20505GP
                                                             Processor          Other SMBus
                          PI6C9X20505GP                    (SMBus Master)         Devices
                                        SMBCLK
                                       SMBDATA
  The SMBus interface on the PI7C9X20505GP consists of one SMBus clock pin (SMBCLK), a SMBus data pin
  (SMBDATA), and 3 SMBus address pins (GPIO[5:7]). The SMBus clock pin provides or receives the clock signal.
  The SMBus data pin facilitates the data transmission and reception. Both of the clock and data pins are
  bi-directional. The SMBus address pins determine the address to which the PI7C9X20505GP responds to. The
  SMBus address pins generate addresses according to the following table:
          Table 6-1 SMBus Address Pin Configuration
               BIT      SMBus Address
                0       GPIO[5]
                1       GPIO[6]
                2       GPIO[7]
                3       1
                4       0
                5       1
                6       1
                                                        Page 32 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                       PI7C9X20505GP
                                                                                            5Port-5Lane PCI Express® Switch
                                                                                                               GreenPacketTM Family
                                                                                                                            Datasheet
  7 REGISTER DESCRIPTION
  7.1           REGISTER TYPES
                  REGISTER TYPE                        DEFINITION
                  HwInt                                Hardware Initialization
                  RO                                   Read Only
                  RW                                   Read / Write
                  RWC                                  Read / Write 1 to Clear
                  RWCS                                 Sticky - Read Only / Write 1 to Clear
                  RWS                                  Sticky - Read / Write
                  ROS                                  Sticky – Read Only
  7.2             TRANSPARENT MODE CONFIGURATION REGISTERS
                When the port of the Switch is set to operate at the transparent mode, it is represented by a logical
                PCI-to-PCI Bridge that implements type 1 configuration space header. The following table details the
                allocation of the register fields of the PCI 2.3 compatible type 1 configuration space header.
                        31 –24                    23 – 16                     15 - 8                     7 –0            BYTE OFFSET
                                     Device ID                                            Vendor ID                            00h
                                  Primary Status                                          Command                              04h
                                                 Class Code                                           Revision ID              08h
                        Reserved                Header Type          Primary Latency Timer          Cache Line Size           0Ch
                                                                Reserved                                                    10h – 17h
                   Secondary Latency          Subordinate Bus             Secondary Bus          Primary Bus Number            18h
                          Timer                   Number                     Number
                                 Secondary Status                       I/O Limit Address          I/O Base Address           1Ch
                               Memory Limit Address                                 Memory Base Address                        20h
                        Prefetchable Memory Limit Address                    Prefetchable Memory Base Address                  24h
                                            Prefetchable Memory Base Address Upper 32-bit                                      28h
                                           Prefetchable Memory Limit Address Upper 32-bit                                     2Ch
                          I/O Limit Address Upper 16-bit                        I/O Base Address Upper 16-bit                  30h
                                                   Reserved                                      Capability Pointer to         34h
                                                                                                          80h
                                                                Reserved                                                       38h
                                  Bridge Control                           Interrupt Pin             Interrupt Line           3Ch
                                                                Reserved                                                    40h – 7Fh
                          Power Management Capabilities               Next Item Pointer=8C         Capability ID=01            80h
                        PM Data                 PPB Support                        Power Management Data                       84h
                                                 Extensions
                                 Message Control                      Next Item Pointer=9C         Capability ID=05           8Ch
                                                            Message Address                                                    90h
                                                        Message Upper Address                                                  94h
                                     Reserved                                            Message Data                          98h
                                   VPD Register                       Next Item Pointer=A4         Capability ID=03           9Ch
                                                           VPD Data Register                                                  A0h
                               Length in Bytes (14h)                  Next Item Pointer=B8         Capability ID=09           A4h
                                                              XPIP_CSR0                                                       A8h
                                                              XPIP_CSR1                                                       ACh
                                ACK Latency Timer                                  Replay Time-out Counter                    B0h
                                                   Reserved                                       Forwarding Modes            B4h
                                     Reserved                         Next Item Pointer=E0           SSID/SSVID               B8h
                                                                                                  Capability ID=0D
                                       SSID                                                SSVID                              BCh
                                                                Reserved                                                    C0h – D7h
                                                               Page 33 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                        PI7C9X20505GP
                                                                                              5Port-5Lane PCI Express® Switch
                                                                                                                 GreenPacketTM Family
                                                                                                                              Datasheet
                        31 –24                     23 – 16                      15 - 8                    7 –0            BYTE OFFSET
                                                          GPIO Data and Control                                                 D8h
                                  EEPROM Data                            EEPROM Address             EEPROM Control              DCh
                         PCI Express Capabilities Register             Next Item Pointer=00          Capability ID=10            E0h
                                                            Device Capabilities                                                  E4h
                                   Device Status                                         Device Control                          E8h
                                                             Link Capabilities                                                  ECh
                                    Link Status                                           Link Control                           F0h
                                                              Slot Capabilities                                                  F4h
                                     Slot Status                                          Slot Control                           F8h
                                                                 Reserved                                                       FCh
                Other than the PCI 2.3 compatible configuration space header, the Switch also implements PCI
                express extended configuration space header, which includes advanced error reporting, virtual channel,
                and power budgeting capability registers. The following table details the allocation of the register
                fields of PCI express extended capability space header. The first extended capability always begins at
                offset 100h with a PCI Express Enhanced Capability header and the rest of capabilities are located at
                an offset greater than 0FFh relative to the beginning of PCI compatible configuration space.
                        31 –24                      23 – 16                     15 - 8                    7 –0             BYTE OFFSET
                     Next Capability Offset=140h             Cap.         PCI Express Extended Capability ID=0001h              100h
                                                           Version
                                                    Uncorrectable Error Status Register                                         104h
                                                    Uncorrectable Error Mask Register                                           108h
                                                   Uncorrectable Error Severity Register                                        10Ch
                                                     Correctable Error Status Register                                          110h
                                                     Correctable Error Mask Register                                            114h
                                             Advanced Error Capabilities and Control Register                                   118h
                                                            Header Log Register                                              11Ch – 128h
                                                                  Reserved                                                   12Ch – 13Fh
                    Next Capability Offset=20Ch              Cap.         PCI Express Extended Capability ID=0002h              140h
                                                           Version
                                                      Port VC Capability Register 1                                             144h
                  VC Arbitration Table                              Port VC Capability Register 2                               148h
                        Offset=3
                               Port VC Status Register                              Port VC Control Register                    14Ch
                  Port Arbitration Table                         VC Resource Capability Register (0)                            150h
                        Offset=4
                                                     VC Resource Control Register (0)                                           154h
                          VC Resource Status Register (0)                                   Reserved                            158h
                  Port Arbitration Table                         VC Resource Capability Register (1)                            15Ch
                        Offset=6
                                                     VC Resource Control Register (1)                                           160h
                          VC Resource Status Register (1)                                   Reserved                            164h
                                                                  Reserved                                                   16Ch – 168h
                                                   VC Arbitration Table with 32 Phases                                       170h – 17Ch
                                              Port Arbitration Table with 128 Phases for VC0                                 180h – 1BCh
                                              Port Arbitration Table with 128 Phases for VC1                                 1C0h – 1FCh
                                                                  Reserved                                                   200h – 20Bh
                     Next Capability Offset=000h             Cap.         PCI Express Extended Capability ID=0004h              20Ch
                                                           Version
                                                    Reserved                                       Data Select Register         210h
                                                               Data Register                                                    214h
                                                    Reserved                                           Power Budget             218h
                                                                                                    Capability Register
                                                                 Page 34 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                             PI7C9X20505GP
                                                                                 5Port-5Lane PCI Express® Switch
                                                                                                   GreenPacketTM Family
                                                                                                                     Datasheet
  7.2.1         VENDOR ID REGISTER – OFFSET 00h
                  BIT    FUNCTION             TYPE   DESCRIPTION
                  15:0   Vendor ID             RO    Identifies Pericom as the vendor of this device. The default value may be
                                                     changed by SMBus or auto-loading from EEPROM.
                                                     Reset to 12D8h.
  7.2.2         DEVICE ID REGISTER – OFFSET 00h
                  BIT    FUNCTION             TYPE   DESCRIPTION
                  31:16  Device ID             RO    Identifies this device as the PI7C9X20505GP. The default value may be
                                                     changed by SMBus or auto-loading from EEPROM.
                                                     Resets to 0505h.
  7.2.3         COMMAND REGISTER – OFFSET 04h
                  BIT    FUNCTION             TYPE   DESCRIPTION
                                                     0b: Ignores I/O transactions on the primary interface
                                                     1b: Enables responses to I/O transactions on the primary interface
                  0      I/O Space Enable      RW
                                                     Resets to 0b.
                                                     0b: Ignores memory transactions on the primary interface
                         Memory Space                1b: Enables responses to memory transactions on the primary interface
                  1                            RW
                         Enable
                                                     Reset to 0b.
                                                     0b: Does not initiate memory or I/O transactions on the upstream port and
                                                         handles as an Unsupported Request (UR) to memory and I/O transactions
                                                         on the downstream port. For Non-Posted Requests, a completion with UR
                                                         completion status must be returned
                  2      Bus Master Enable     RW
                                                     1b: Enables the Switch Port to forward memory and I/O Read/Write
                                                         transactions in the upstream direction
                                                     Reset to 0b.
                  3      Special Cycle Enable  RO    Does not apply to PCI Express. Must be hardwired to 0b.
                         Memory Write And            Does not apply to PCI Express. Must be hardwired to 0b.
                  4                            RO
                         Invalidate Enable
                         VGA Palette Snoop           Does not apply to PCI Express. Must be hardwired to 0b.
                  5                            RO
                         Enable
                                                     0b: Switch may ignore any parity errors that it detects and continue normal
                                                       operation
                         Parity Error
                  6                            RW    1b: Switch must take its normal action when a parity error is detected
                         Response Enable
                                                     Reset to 0b.
                  7      Wait Cycle Control    RO    Does not apply to PCI Express. Must be hardwired to 0.
                                                     0b: Disables the reporting of Non-fatal and Fatal errors detected by the
                                                         Switch to the Root Complex
                  8      SERR# enable          RW    b1: Enables the Non-fatal and Fatal error reporting to Root Complex
                                                     Reset to 0b.
                         Fast Back-to-Back           Does not apply to PCI Express. Must be hardwired to 0b.
                  9                            RO
                         Enable
                                                     Controls the ability of a PCI Express device to generate INTx Interrupt
                                                     Messages. In the Switch, this bit does not affect the forwarding of INTx
                  10     Interrupt Disable     RW    messages from the downstream ports.
                                                     Reset to 0b.
                  15:11  Reserved              RO    Reset to 0b.
                                                   Page 35 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                PI7C9X20505GP
                                                                                 5Port-5Lane PCI Express® Switch
                                                                                                       GreenPacketTM Family
                                                                                                                          Datasheet
  7.2.4         PRIMARY STATUS REGISTER – OFFSET 04h
                  BIT    FUNCTION              TYPE   DESCRIPTION
                  18:16  Reserved                RO   Reset to 000b.
                                                      Indicates that an INTx Interrupt Message is pending internally to the device.
                  19     Interrupt Status        RO   In the Switch, the forwarding of INTx messages from the downstream device
                                                      of the Switch port is not reflected in this bit. Must be hardwired to 0b.
                                                      Set to 1 to enable support for the capability list (offset 34h is the pointer to
                                                      the data structure).
                  20     Capabilities List       RO
                                                      Reset to 1b.
                  21     66MHz Capable           RO   Does not apply to PCI Express. Must be hardwired to 0b.
                  22     Reserved                RO   Reset to 0b.
                         Fast Back-to-Back            Does not apply to PCI Express. Must be hardwired to 0b.
                  23                             RO
                         Capable
                                                      Set to 1 (by a requester) whenever a Parity error is detected or forwarded on
                                                      the primary side of the port in a Switch.
                         Master Data Parity
                  24                            RWC
                         Error                        If the Parity Error Response Enable bit is cleared, this bit is never set.
                                                      Reset to 0b.
                  26:25  DEVSEL# timing          RO   Does not apply to PCI Express. Must be hardwired to 0b.
                                                      Set to 1 (by a completer) whenever completing a request on the primary side
                         Signaled Target              using the Completer Abort Completion Status.
                  27                             RO
                         Abort
                                                      Reset to 0b.
                                                      Set to 1 (by a requestor) whenever receiving a Completion with Completer
                         Received Target              Abort Completion Status on the primary side.
                  28                             RO
                         Abort
                                                      Reset to 0b.
                                                      Set to 1 (by a requestor) whenever receiving a Completion with Unsupported
                         Received Master              Request Completion Status on primary side.
                  29                             RO
                         Abort
                                                      Reset to 0b.
                                                      Set to 1 when the Switch sends an ERR_FATAL or ERR_NONFATAL
                         Signaled System              Message, and the SERR Enable bit in the Command register is 1.
                  30                            RWC
                         Error
                                                      Reset to 0b.
                                                      Set to 1 whenever the primary side of the port in a Switch receives a Poisoned
                                                      TLP.
                  31     Detected Parity Error  RWC
                                                      Reset to 0b.
  7.2.5         REVISION ID REGISTER – OFFSET 08h
                  BIT    FUNCTION              TYPE   DESCRIPTION
                  7:0    Revision              RO     Indicates revision number of device. Hardwired to 01h.
  7.2.6         CLASS CODE REGISTER – OFFSET 08h
                  BIT    FUNCTION              TYPE   DESCRIPTION
                  15:8   Programming             RO   Read as 00h to indicate no programming interfaces have been defined for
                         Interface                    PCI-to-PCI Bridges.
                  23:16  Sub-Class Code          RO   Read as 04h to indicate device is a PCI-to-PCI Bridge.
                  31:24  Base Class Code         RO   Read as 06h to indicate device is a Bridge device.
                                                    Page 36 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                          PI7C9X20505GP
                                                                             5Port-5Lane PCI Express® Switch
                                                                                                   GreenPacketTM Family
                                                                                                                    Datasheet
  7.2.7         CACHE LINE REGISTER – OFFSET 0Ch
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   The cache line size register is set by the system firmware and the operating
                                                   system cache line size. This field is implemented by PCI Express devices as a
                                                   RW field for legacy compatibility, but it has no impact on any PCI Express
                  7:0    Cache Line Size     RW
                                                   device functionality.
                                                   Reset to 0b.
  7.2.8         PRIMARY LATENCY TIMER REGISTER – OFFSET 0Ch
                  BIT    FUNCTION           TYPE   DESCRIPTION
                         Primary Latency           Does not apply to PCI Express. Must be hardwired to 00h.
                  15:8                       RO
                         timer
  7.2.9         HEADER TYPE REGISTER – OFFSET 0Ch
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   Read as 01h to indicate that the register layout conforms to the standard
                  23:16  Header Type         RO
                                                   PCI-to-PCI Bridge layout.
  7.2.10        PRIMARY BUS NUMBER REGISTER – OFFSET 18h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   Indicates the number of the PCI bus to which the primary interface is
                                                   connected. The value is set in software during configuration.
                  7:0    Primary Bus Number  RW
                                                   Reset to 00h.
  7.2.11        SECONDARY BUS NUMBER REGISTER – OFFSET 18h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   Indicates the number of the PCI bus to which the secondary interface is
                         Secondary Bus             connected. The value is set in software during configuration.
                  15:8                       RW
                         Number
                                                   Reset to 00h.
  7.2.12        SUBORDINATE BUS NUMBER REGISTER – OFFSET 18h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   Indicates the number of the PCI bus with the highest number that is
                         Subordinate Bus           subordinate to the Bridge. The value is set in software during configuration.
                  23:16                      RW
                         Number
                                                   Reset to 00h.
  7.2.13        SECONDARY LATENCY TIMER REGISTER – OFFSET 18h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                 Page 37 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                            PI7C9X20505GP
                                                                              5Port-5Lane PCI Express® Switch
                                                                                                 GreenPacketTM Family
                                                                                                                      Datasheet
                  BIT    FUNCTION           TYPE   DESCRIPTION
                         Secondary Latency         Does not apply to PCI Express. Must be hardwired to 00h.
                  31:24                      RO
                         Timer
  7.2.14        I/O BASE ADDRESS REGISTER – OFFSET 1Ch
                  BIT    FUNCTION           TYPE   DESCRIPTION
                  3:0    32-bit Indicator    RO    Read as 01h to indicate 32-bit I/O addressing.
                                                   Defines the bottom address of the I/O address range for the Bridge to
                                                   determine when to forward I/O transactions from one interface to the other.
                                                   The upper 4 bits correspond to address bits [15:12] and are writable. The
                         I/O Base Address          lower 12 bits corresponding to address bits [11:0] are assumed to be 0. The
                  7:4                        RW
                         [15:12]                   upper 16 bits corresponding to address bits [31:16] are defined in the I/O base
                                                   address upper 16 bits address register.
                                                   Reset to 0h.
  7.2.15        I/O LIMIT ADDRESS REGISTER – OFFSET 1Ch
                  BIT    FUNCTION           TYPE   DESCRIPTION
                  11:8   32-bit Indicator    RO    Read as 01h to indicate 32-bit I/O addressing.
                                                   Defines the top address of the I/O address range for the Bridge to determine
                                                   when to forward I/O transactions from one interface to the other. The upper
                                                   4 bits correspond to address bits [15:12] and are writable. The lower 12 bits
                         I/O Limit Address         corresponding to address bits [11:0] are assumed to be FFFh. The upper 16
                  15:12                      RW
                         [15:12]                   bits corresponding to address bits [31:16] are defined in the I/O limit address
                                                   upper 16 bits address register.
                                                   Reset to 0h.
  7.2.16        SECONDARY STATUS REGISTER – OFFSET 1Ch
                  BIT    FUNCTION           TYPE   DESCRIPTION
                  20:16  Reserved            RO    Reset to 00000b.
                  21     66MHz Capable       RO    Does not apply to PCI Express. Must be hardwired to 0b.
                  22     Reserved            RO    Reset to 0b.
                         Fast Back-to-Back         Does not apply to PCI Express. Must be hardwired to 0b.
                  23                         RO
                         Capable
                                                   Set to 1 (by a requester) whenever a Parity error is detected or forwarded on
                                                   the secondary side of the port in a Switch.
                         Master Data Parity
                  24                        RWC
                         Error                     If the Parity Error Response Enable bit is cleared, this bit is never set.
                                                   Reset to 0b.
                  26:25  DEVSEL_L timing     RO    Does not apply to PCI Express. Must be hardwired to 0b.
                                                   Set to 1 (by a completer) whenever completing a request in the secondary side
                         Signaled Target           using Completer Abort Completion Status.
                  27                         RO
                         Abort
                                                   Reset to 0b.
                                                   Set to 1 (by a requestor) whenever receiving a Completion with Completer
                         Received Target           Abort Completion Status in the secondary side.
                  28                         RO
                         Abort
                                                   Reset to 0b.
                                                   Set to 1 (by a requestor) whenever receiving a Completion with Unsupported
                         Received Master           Request Completion Status in secondary side.
                  29                         RO
                         Abort
                                                   Reset to 0b.
                  30     Received System    RWC    Set to 1 when the Switch sends an ERR_FATAL or ERR_NONFATAL
                                                 Page 38 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                             PI7C9X20505GP
                                                                                 5Port-5Lane PCI Express® Switch
                                                                                                     GreenPacketTM Family
                                                                                                                       Datasheet
                  BIT    FUNCTION              TYPE   DESCRIPTION
                         Error                        Message, and the SERR Enable bit in the Bridge Control register is 1.
                                                      Reset to 0b.
                                                      Set to 1 whenever the secondary side of the port in a Switch receives a
                                                      Poisoned TLP.
                  31     Detected Parity Error RWC
                                                      Reset to 0b.
  7.2.17        MEMORY BASE ADDRESS REGISTER – OFFSET 20h
                  BIT    FUNCTION              TYPE   DESCRIPTION
                  3:0    Reserved               RO    Reset to 0h.
                                                      Defines the bottom address of an address range for the Bridge to determine
                                                      when to forward memory transactions from one interface to the other. The
                         Memory Base                  upper 12 bits correspond to address bits [31:20] and are able to be written to.
                  15:4                          RW
                         Address [15:4]               The lower 20 bits corresponding to address bits [19:0] are assumed to be 0.
                                                      Reset to 000h.
  7.2.18        MEMORY LIMIT ADDRESS REGISTER – OFFSET 20h
                  BIT    FUNCTION              TYPE   DESCRIPTION
                  19:16  Reserved               RO    Reset to 0h.
                                                      Defines the top address of an address range for the Bridge to determine when
                                                      to forward memory transactions from one interface to the other. The upper
                         Memory Limit                 12 bits correspond to address bits [31:20] and are writable. The lower 20
                  31:20                         RW
                         Address [31:20]              bits corresponding to address bits [19:0] are assumed to be FFFFFh.
                                                      Reset to 000h.
  7.2.19        PREFETCHABLE MEMORY BASE ADDRESS REGISTER – OFFSET 24h
                  BIT    FUNCTION              TYPE   DESCRIPTION
                  3:0    64-bit addressing      RO    Read as 0001b to indicate 64-bit addressing.
                                                      Defines the bottom address of an address range for the Bridge to determine
                                                      when to forward memory read and write transactions from one interface to the
                                                      other. The upper 12 bits correspond to address bits [31:20] and are writable.
                         Prefetchable Memory
                  15:4                          RW    The lower 20 bits are assumed to be 0. The memory base register upper 32
                         Base Address [31:20]
                                                      bits contain the upper half of the base address.
                                                      Reset to 000h.
  7.2.20        PREFETCHABLE MEMORY LIMIT ADDRESS REGISTER – OFFSET 24h
                  BIT    FUNCTION              TYPE   DESCRIPTION
                  19:16  64-bit addressing      RO    Read as 0001b to indicate 64-bit addressing.
                                                      Defines the top address of an address range for the Bridge to determine when
                                                      to forward memory read and write transactions from one interface to the
                         Prefetchable Memory          other. The upper 12 bits correspond to address bits [31:20] and are writable.
                  31:20  Limit Address          RW    The lower 20 bits are assumed to be FFFFFh. The memory limit upper 32 bits
                         [31:20]                      register contains the upper half of the limit address.
                                                      Reset to 000h.
                                                    Page 39 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                            PI7C9X20505GP
                                                                              5Port-5Lane PCI Express® Switch
                                                                                                 GreenPacketTM Family
                                                                                                                     Datasheet
  7.2.21        PREFETCHABLE MEMORY BASE ADDRESS UPPER 32-BITS REGISTER
                – OFFSET 28h
                  BIT    FUNCTION            TYPE   DESCRIPTION
                                                    Defines the upper 32-bits of a 64-bit bottom address of an address range for
                         Prefetchable Memory        the Bridge to determine when to forward memory read and write transactions
                  31:0   Base Address, Upper  RW    from one interface to the other.
                         32-bits [63:32]
                                                    Reset to 00000000h.
  7.2.22        PREFETCHABLE MEMORY LIMIT ADDRESS UPPER 32-BITS REGISTER –
                OFFSET 2Ch
                  BIT    FUNCTION            TYPE   DESCRIPTION
                                                    Defines the upper 32-bits of a 64-bit top address of an address range for the
                         Prefetchable Memory
                                                    Bridge to determine when to forward memory read and write transactions
                         Limit Address,
                  31:0                        RW    from one interface to the other.
                         Upper 32-bits
                         [63:32]
                                                    Reset to 00000000h.
  7.2.23        I/O BASE ADDRESS UPPER 16-BITS REGISTER – OFFSET 30h
                  BIT    FUNCTION            TYPE   DESCRIPTION
                                                    Defines the upper 16-bits of a 32-bit bottom address of an address range for
                         I/O Base Address,          the Bridge to determine when to forward I/O transactions from one interface
                  15:0   Upper 16-bits        RW    to the other.
                         [31:16]
                                                    Reset to 0000h.
  7.2.24        I/O LIMIT ADDRESS UPPER 16-BITS REGISTER – OFFSET 30h
                  BIT    FUNCTION            TYPE   DESCRIPTION
                                                    Defines the upper 16-bits of a 32-bit top address of an address range for the
                         I/O Limit Address,         Bridge to determine when to forward I/O transactions from one interface to
                  31:16  Upper 16-bits        RW    the other.
                         [31:16]
                                                    Reset to 0000h.
  7.2.25        CAPABILITY POINTER REGISTER – OFFSET 34h
                  BIT    FUNCTION            TYPE   DESCRIPTION
                                                    Pointer points to the PCI power management registers (80h).
                  7:0    Capability Pointer   RO
                                                    Reset to 80h.
  7.2.26        INTERRUPT LINE REGISTER – OFFSET 3Ch
                  BIT    FUNCTION            TYPE   DESCRIPTION
                  7:0    Interrupt Line       RW    Reset to 00h.
                                                  Page 40 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                              PI7C9X20505GP
                                                                               5Port-5Lane PCI Express® Switch
                                                                                                    GreenPacketTM Family
                                                                                                                        Datasheet
  7.2.27        INTERRUPT PIN REGISTER – OFFSET 3Ch
                  BIT    FUNCTION            TYPE   DESCRIPTION
                                                    The Switch implements INTA virtual wire interrupt signals to represent
                                                    hot-plug events at downstream ports. The default value on the downstream
                  15:8   Interrupt Pin        RO    ports may be changed by SMBus or auto-loading from EEPROM.
                                                    Reset to 00h.
  7.2.28        BRIDGE CONTROL REGISTER – OFFSET 3Ch
                  BIT    FUNCTION            TYPE   DESCRIPTION
                                                    0b: Ignore Poisoned TLPs on the secondary interface
                                                    1b: Enable the Poisoned TLPs reporting and detection on the secondary
                         Parity Error
                  16                          RW    interface
                         Response
                                                    Reset to 0b.
                                                    0b: Disables the forwarding of EER_COR, ERR_NONFATAL and
                                                        ERR_FATAL from secondary to primary interface
                                                    1b: Enables the forwarding of EER_COR, ERR_NONFATAL and
                  17     S_SERR# enable       RW
                                                        ERR_FATAL from secondary to primary interface
                                                    Reset to 0b.
                                                    0b: Forwards downstream all I/O addresses in the address range defined by
                                                        the I/O Base, I/O Base, and Limit registers
                                                    1b: Forwards upstream all I/O addresses in the address range defined by the
                  18     ISA Enable           RW        I/O Base and Limit registers that are in the first 64KB of PCI I/O address
                                                        space (top 768 bytes of each 1KB block)
                                                    Reset to 0b.
                                                    0: Ignores access to the VGA memory or IO address range
                                                    1: Forwards transactions targeted at the VGA memory or IO address range
                                                    VGA memory range starts from 000A 0000h to 000B FFFFh
                  19     VGA Enable           RW
                                                    VGA IO addresses are in the first 64KB of IO address space.
                                                    AD [9:0] is in the ranges 3B0 to 3BBh and 3C0h to 3DFh.
                                                    Reset to 0b. Please note that this bit is reserved in Port 2, Port 3 and Port 4.
                                                    0b: Executes 10-bit address decoding on VGA I/O accesses
                                                    1b: Executes 16-bit address decoding on VGA I/O accesses
                  20     VGA 16-bit decode    RW
                                                    Reset to 0b. Please note that this bit is reserved in Port 2, Port 3 and Port 4.
                  21     Master Abort Mode    RO    Does not apply to PCI Express. Must be hardwired to 0b.
                                                    0b: Does not trigger a hot reset on the corresponding PCI Express Port
                                                    1b: Triggers a hot reset on the corresponding PCI Express Port
                                                       At the downstream port, it asserts PORT_RST# to the attached downstream
                                                       device.
                  22     Secondary Bus Reset  RW
                                                          At the upstream port, it asserts the PORT_RST# at all the downstream
                                                       ports.
                                                    Reset to 0b.
                         Fast Back-to-Back          Does not apply to PCI Express. Must be hardwired to 0b.
                  23                          RO
                         Enable
                         Primary Master             Does not apply to PCI Express. Must be hardwired to 0b.
                  24                          RO
                         Timeout
                         Secondary Master           Does not apply to PCI Express. Must be hardwired to 0b.
                  25                          RO
                         Timeout
                         Master Timeout             Does not apply to PCI Express. Must be hardwired to 0b.
                  26                          RO
                         Status
                         Discard Timer              Does not apply to PCI Express. Must be hardwired to 0b.
                  27                          RO
                         SERR# enable
                  31:28  Reserved             RO    Reset to 0h.
                                                  Page 41 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                           PI7C9X20505GP
                                                                             5Port-5Lane PCI Express® Switch
                                                                                                 GreenPacketTM Family
                                                                                                                    Datasheet
  7.2.29        POWER MANAGEMENT CAPABILITY ID REGISTER – OFFSET 80h
                  BIT    FUNCTION          TYPE   DESCRIPTION
                         Enhanced                 Read as 01h to indicate that these are power management enhanced capability
                  7:0                       RO
                         Capabilities ID          registers.
  7.2.30        NEXT ITEM POINTER REGISTER – OFFSET 80h
                  BIT    FUNCTION          TYPE   DESCRIPTION
                                                  At upstream ports, the pointer points to the Vital Protocol Data (VPD)
                                                  capability register (9Ch).
                                                  At downstream ports, the pointer points to the Message capability register
                  15:8   Next Item Pointer  RO    (8Ch).
                                                  Reset to 9Ch (Upstream port).
                                                  Reset to 8Ch (Downstream port).
  7.2.31        POWER MANAGEMENT CAPABILITIES REGISTER – OFFSET 80h
                  BIT    FUNCTION          TYPE   DESCRIPTION
                         Power Management         Read as 011b to indicate the device is compliant to Revision 1.2 of PCI
                  18:16                     RO
                         Revision                 Power Management Interface Specifications.
                  19     PME# Clock         RO    Does not apply to PCI Express. Must be hardwired to 0b.
                  20     Reserved           RO    Reset to 0b.
                                                  Read as 0b to indicate Switch does not have device specific initialization
                         Device Specific
                  21                        RO    requirements. The default value may be changed by SMBus or auto-loading
                         Initialization
                                                  from EEPROM.
                                                  Reset as 111b to indicate the Switch needs 375 mA in D3 state. The default
                  24:22  AUX Current        RO
                                                  value may be changed by SMBus or auto-loading from EEPROM.
                         D1 Power State           Read as 1b to indicate Switch supports the D1 power management state. The
                  25                        RO
                         Support                  default value may be changed by SMBus or auto-loading from EEPROM.
                         D2 Power State           Read as 1b to indicate Switch supports the D2 power management state. The
                  26                        RO
                         Support                  default value may be changed by SMBus or auto-loading from EEPROM.
                                                  Read as 11111b to indicate Switch supports the forwarding of PME# message
                  31:27  PME# Support       RO    in all power states. The default value may be changed by SMBus or
                                                  auto-loading from EEPROM.
  7.2.32        POWER MANAGEMENT DATA REGISTER – OFFSET 84h
                  BIT    FUNCTION          TYPE   DESCRIPTION
                                                  Indicates the current power state of the Switch. Writing a value of D0 when
                                                  the previous state was D3 cause a hot reset without asserting DWNRST_L.
                                                  00b: D0 state
                  1:0    Power State        RW    01b: D1 state
                                                  10b: D2 state
                                                  11b: D3 hot state
                                                  Reset to 00b.
                  2      Reserved           RO    Reset to 0b.
                                                  When set, this bit indicates that device transitioning from D3hot to D0 does
                                                  not perform an internal reset. When clear, an internal reset is performed when
                  3      No_Soft_Reset      RO    power state transits from D3hot to D0. This bit can be rewritten with
                                                  EEPROM programming. The default value may be changed by SMBus or
                                                  auto-loading from EEPROM.
                                                Page 42 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                          PI7C9X20505GP
                                                                            5Port-5Lane PCI Express® Switch
                                                                                                GreenPacketTM Family
                                                                                                                   Datasheet
                  BIT    FUNCTION          TYPE   DESCRIPTION
                                                  Reset to 1b.
                  7:4    Reserved           RO    Reset to 0b.
                  8      PME# Enable       RWS    When asserted, the Switch will generate the PME# message. Reset to 0b.
                                                  Select data registers.
                  12:9   Data Select        RW
                                                  Reset to 0h.
                  14:13  Data Scale         RO    Reset to 00b.
                  15     PME status         ROS   Read as 0b as the PME# message is not implemented.
  7.2.33        PPB SUPPORT EXTENSIONS – OFFSET 84h
                  BIT    FUNCTION          TYPE   DESCRIPTION
                  21:16  Reserved           RO    Reset to 000000b.
                         B2_B3 Support for        Does not apply to PCI Express. Must be hardwired to 0b.
                  22                        RO
                         D3HOT
                         Bus Power / Clock        Does not apply to PCI Express. Must be hardwired to 0b.
                  23                        RO
                         Control Enable
  7.2.34        DATA REGISTER – OFFSET 84h
                  BIT    FUNCTION          TYPE   DESCRIPTION
                                                  Data Register. The default value may be changed by SMBus or auto-loading
                                                  from EEPROM.
                  31:24  Data Register      RO
                                                  Reset to 0b.
  7.2.35        MSI CAPABILITY ID REGISTER – OFFSET 8Ch (Downstream Port Only)
                  BIT    FUNCTION          TYPE   DESCRIPTION
                         Enhanced                 Read as 05h to indicate that this is message signal interrupt capability
                  7:0                       RO
                         Capabilities ID          register.
  7.2.36        NEXT ITEM POINTER REGISTER – OFFSET 8Ch (Downstream Port Only)
                  BIT    FUNCTION          TYPE   DESCRIPTION
                                                  Pointer points to the Vendor specific capability register (A4h).
                  15:8   Next Item Pointer  RO
                                                  Reset to A4h.
  7.2.37        MESSAGE CONTROL REGISTER – OFFSET 8Ch (Downstream Port Only)
                  BIT    FUNCTION          TYPE   DESCRIPTION
                                                  0b: The function is prohibited from using MSI to request service
                                                  1b: The function is permitted to use MSI to request service and is prohibited
                  16     MSI Enable         RW        from using its INTx # pin
                                                  Reset to 0b.
                         Multiple Message         Read as 000b.
                  19:17                     RO
                         Capable
                  22:20  Multiple Message   RW    Reset to 000b.
                                                Page 43 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                            PI7C9X20505GP
                                                                             5Port-5Lane PCI Express® Switch
                                                                                                  GreenPacketTM Family
                                                                                                                     Datasheet
                  BIT    FUNCTION          TYPE   DESCRIPTION
                         Enable
                                                  0b: The function is not capable of generating a 64-bit message address
                         64-bit address           1b: The function is capable of generating a 64-bit message address
                  23                        RO
                         capable
                                                  Reset to 1b.
                  31:24  Reserved           RO    Reset to 00h.
  7.2.38        MESSAGE ADDRESS REGISTER – OFFSET 90h (Downstream Port Only)
                  BIT    FUNCTION          TYPE   DESCRIPTION
                  1:0    Reserved          RO     Reset to 00b.
                                                  If the message enable bit is set, the contents of this register specify the
                                                  DWORD aligned address for MSI memory write transaction.
                  31:2   Message Address   RW
                                                  Reset to 0.
  7.2.39        MESSAGE UPPER ADDRESS REGISTER – OFFSET 94h (Downstream Port
                Only)
                  BIT    FUNCTION          TYPE   DESCRIPTION
                                                  This register is only effective if the device supports a 64-bit message address
                         Message Upper            is set.
                  31:0                      RW
                         Address
                                                  Reset to 00000000h.
  7.2.40        MESSAGE DATA REGISTER – OFFSET 98h (Downstream Port Only)
                  BIT    FUNCTION          TYPE   DESCRIPTION
                  15:0   Message Data       RW    Reset to 0000h.
  7.2.41        VPD CAPABILITY ID REGISTER – OFFSET 9Ch (Upstream Port Only)
                  BIT    FUNCTION          TYPE   DESCRIPTION
                                                  Read as 03h to indicate that these are VPD enhanced capability registers.
                         Enhanced
                  7:0                       RO
                         Capabilities ID
                                                  Reset to 03h.
  7.2.42        NEXT ITEM POINTER REGISTER – OFFSET 9Ch (Upstream Port Only)
                  BIT    FUNCTION          TYPE   DESCRIPTION
                                                  Pointer points to the Vendor specific capability register (A4h).
                  15:8   Next Item Pointer  RO
                                                  Reset to A4h.
  7.2.43        VPD REGISTER – OFFSET 9Ch (Upstream Port Only)
                  BIT    FUNCTION          TYPE   DESCRIPTION
                  17:16  Reserved           RO    Reset to 00b.
                                                Page 44 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                           PI7C9X20505GP
                                                                              5Port-5Lane PCI Express® Switch
                                                                                                 GreenPacketTM Family
                                                                                                                    Datasheet
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   Contains DWORD address that is used to generate read or write cycle to the
                                                   VPD table stored in EEPROM.
                  23:18  VPD Address         RW
                                                   Reset to 000000b.
                  30:24  Reserved            RO    Reset to 0000000b.
                                                   0b: Performs VPD read command to VPD table at the location as specified
                                                       in VPD address. This bit is kept ‘0’ and then set to ‘1’ automatically
                                                       after EEPROM cycle is finished
                                                   1b: Performs VPD write command to VPD table at the location as specified
                  31     VPD operation       RW
                                                       in VPD address. This bit is kept ‘1’ and then set to ‘0’ automatically
                                                       after EEPROM cycle is finished.
                                                   Reset to 0b.
  7.2.44        VPD DATA REGISTER – OFFSET A0h (Upstream Port Only)
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   When read, it returns the last data read from VPD table at the location as
                                                   specified in VPD Address.
                  31:0   VPD Data            RW
                                                   When written, it places the current data into VPD table at the location as
                                                   specified in VPD Address.
  7.2.45        VENDOR SPECIFIC CAPABILITY ID REGISTER – OFFSET A4h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   Read as 09h to indicate that these are vendor specific capability registers.
                         Enhanced
                  7:0                        RO
                         Capabilities ID
                                                   Reset to 09h.
  7.2.46        NEXT ITEM POINTER REGISTER – OFFSET A4h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   Pointer points to the SSID/SSVID capability register (B8h).
                  15:8   Next Item Pointer   RO
                                                   Reset to B8h.
  7.2.47        LENGTH REGISTER – OFFSET A4h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   The length field provides the information for number of bytes in the
                                                    capability structure (including the ID and Next pointer bytes).
                  31:16  Length Information  RO
                                                   Reset to 000Ch.
  7.2.48        XPIP CSR0 – OFFSET A8h (Test Purpose Only)
                  BIT    FUNCTION           TYPE   DESCRIPTION
                  31:0   Reserved            RW    Reset to 04001060h.
                                                 Page 45 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                          PI7C9X20505GP
                                                                              5Port-5Lane PCI Express® Switch
                                                                                                 GreenPacketTM Family
                                                                                                                   Datasheet
  7.2.49        XPIP CSR1 – OFFSET ACh (Test Purpose Only)
                  BIT    FUNCTION           TYPE   DESCRIPTION
                  31:0   Reserved            RW    Reset to 04000800h.
  7.2.50        REPLAY TIME-OUT COUNTER – OFFSET B0h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   A 12-bit register contains a user-defined value. The default value may be
                                                   changed by SMBus or auto-loading from EEPROM.
                  11:0   User Replay Timer   RW
                                                   Reset to 000h.
                                                   When asserted, the user-defined replay time-out value is be employed. The
                         Enable User Replay        default value may be changed by SMBus or auto-loading from EEPROM.
                  12                         RW
                         Timer
                                                   Reset to 0b.
                                                   The default value may be changed by SMBus or auto-loading from
                         Power Management          EEPROM.
                  13                         RO
                         Capability Disable
                                                   Reset to 0b.
                                                   The default value may be changed by SMBus or auto-loading from
                         MSI Capability            EEPROM.
                  14                         RO
                         Disable
                                                   Reset to 0b.
                                                   The default value may be changed by SMBus or auto-loading from
                         AER Capability            EEPROM.
                  15                         RO
                         Disable
                                                   Reset to 0b.
  7.2.51        ACKNOWLEDGE LATENCY TIMER – OFFSET B0h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   A 14-bit register contains a user-defined value. The default value may be
                         User ACK Latency          changed by SMBus or auto-loading from EEPROM.
                  29:16                      RW
                         Timer
                                                   Reset to 0.
                                                   When asserted, the user-defined ACK latency value is be employed. The
                         Enable User ACK           default value may be changed by SMBus or auto-loading from EEPROM.
                  30                         RW
                         Latency
                                                   Reset to 0b.
                  31     Reserved            RO    Reset to 0b.
  7.2.52        SWITCH OPERATION MODE – OFFSET B4h (Upstream Port)
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   When set, a store-forward mode is used. Otherwise, the chip is working under
                                                   cut-through mode. The default value may be changed by SMBus or
                  0      Store-Forward       RW    auto-loading from EEPROM.
                                                   Reset to 0b.
                                                 Page 46 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                               PI7C9X20505GP
                                                                                    5Port-5Lane PCI Express® Switch
                                                                                                      GreenPacketTM Family
                                                                                                                         Datasheet
                  BIT    FUNCTION              TYPE    DESCRIPTION
                                                       Cut-through Threshold. When forwarding a packet from low-speed port to
                                                       high-speed mode, the chip provides the capability to adjust the forwarding
                                                       threshold. The default value may be changed by SMBus or auto-loading from
                                                       EEPROM.
                         Cut-through
                  2:1                           RW     00b: the threshold is set at the middle of forwarding packet
                         Threshold
                                                       01b: the threshold is set ahead 1-cycle of middle point
                                                       10b: the threshold is set ahead 2-cycle of middle point.
                                                       11b: the threshold is set ahead 3-cycle of middle point.
                                                       Reset to 01b.
                                                       When set, the round-robin arbitration will stay in the arbitrated port even if
                                                       the credit is not enough but request is pending.
                                                       When clear, the round-robin arbitration will always go to the requesting port,
                         Port Arbitration              which the outgoing credit is enough for the packet queued in the port.
                  3                             RW
                         Mode                          The default value may be changed by SMBus or auto-loading from
                                                       EEPROM.
                                                       Reset to 0b.
                                                       When set, the frequency of releasing new credit to the link partner will be one
                                                       credit per update.
                                                       When clear, the frequency of releasing new credit to the link partner will be
                                                       two credits per update.
                  4      Credit Update Mode     RW
                                                       The default value may be changed by SMBus or auto-loading from
                                                       EEPROM.
                                                       Reset to 0b.
                                                       When set, there has ordering rule on packets for different egress port. The
                         Ordering on
                                                       default value may be changed by SMBus or auto-loading from EEPROM.
                  5      Different Egress Port  RW
                         Mode
                                                       Reset to 0b.
                                                       When set, there has ordering rule between completion packet with different
                         Ordering on                   tag. The default value may be changed by SMBus or auto-loading from
                  6      Different Tag of       RW     EEPROM.
                         Completion Mode
                                                       Reset to 0b.
                  7      Reserved               RO     Reset to 0.
                                                       The default value may be changed by SMBus or auto-loading from
                         Power management              EEPROM.
                  13:8                          RW
                         Control parameter
                                                       Reset to 000001b.
                                                       The default value may be changed by SMBus or auto-loading from
                         RX Polarity                   EEPROM.
                  14                            RO
                         Inversion Disable
                                                       Reset to 0b.
                                                       The default value may be changed by SMBus or auto-loading from
                         Compliance pattern
                                                       EEPROM.
                  15     Parity Control         RO
                         Disable
                                                       Reset to 0b.
                                                       It indicates the status of the strapping pin LODRV. The default value may be
                  16     Low Driver Current    HwInt
                                                       changed by SMBus or auto-loading from EEPROM.
                                                       It indicates the status of the strapping pin HIDRV. The default value may be
                  17     High Driver Current   HwInt
                                                       changed by SMBus or auto-loading from EEPROM.
                         Driver Transmit               It indicates the status of the strapping pins DTX[3:0]. The default value may
                  21:18                        HwInt
                         Current                       be changed by SMBus or auto-loading from EEPROM.
                         De-emphasis                   It indicates the status of the strapping pins DEQ[3:0]. The default value may
                  25:22  Transmit              HwInt   be changed by SMBus or auto-loading from EEPROM.
                         Equalization
                         Receive Termination           It indicates the status of the strapping pins RXTRMADJ[1:0]. The default
                  27:26                        HwInt
                         Adjustment                    value may be changed by SMBus or auto-loading from EEPROM.
                         Transmit                      It indicates the status of the strapping pins TXTRMADJ[1:0]. The default
                  29:28  Termination           HwInt   value may be changed by SMBus or auto-loading from EEPROM.
                         Adjustment
                                                     Page 47 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                             PI7C9X20505GP
                                                                                  5Port-5Lane PCI Express® Switch
                                                                                                    GreenPacketTM Family
                                                                                                                     Datasheet
                  BIT    FUNCTION            TYPE    DESCRIPTION
                         Receiver                    It indicates the status of the strapping pins RXEQCTL[1:0]. The default value
                  31:30  Equalization Level  HwInt   may be changed by SMBus or auto-loading from EEPROM.
                         Control
  7.2.53        SWITCH OPERATION MODE – OFFSET B4h (Downstream Port)
                  BIT    FUNCTION            TYPE    DESCRIPTION
                  7:0    Reserved             RO     Reset to 0.
                                                     The default value may be changed by SMBus or auto-loading from
                         Power management            EEPROM.
                  13:8                        RW
                         Control parameter
                                                     Reset to 000001b.
                                                     The default value may be changed by SMBus or auto-loading from
                         RX Polarity                 EEPROM.
                  14                          RO
                         Inversion Disable
                                                     Reset to 0b.
                                                     The default value may be changed by SMBus or auto-loading from
                         Compliance pattern
                                                     EEPROM.
                  15     Parity Control       RO
                         Disable
                                                     Reset to 0b.
                                                     It indicates the status of the strapping pin LODRV. The default value may be
                  16     Low Driver Current  HwInt
                                                     changed by SMBus or auto-loading from EEPROM.
                                                     It indicates the status of the strapping pin HIDRV. The default value may be
                  17     High Driver Current HwInt
                                                     changed by SMBus or auto-loading from EEPROM.
                         Driver Transmit             It indicates the status of the strapping pins DTX[3:0]. The default value may
                  21:18                      HwInt
                         Current                     be changed by SMBus or auto-loading from EEPROM.
                         De-emphasis                 It indicates the status of the strapping pins DEQ[3:0]. The default value may
                  25:22  Transmit            HwInt   be changed by SMBus or auto-loading from EEPROM.
                         Equalization
                         Receive Termination         It indicates the status of the strapping pins RXTRMADJ[1:0]. The default
                  27:26                      HwInt
                         Adjustment                  value may be changed by SMBus or auto-loading from EEPROM.
                         Transmit                    It indicates the status of the strapping pins TXTRMADJ[1:0]. The default
                  29:28  Termination         HwInt   value may be changed by SMBus or auto-loading from EEPROM.
                         Adjustment
                         Receiver                    It indicates the status of the strapping pins RXEQCTL[1:0]. The default value
                  31:30  Equalization Level  HwInt   may be changed by SMBus or auto-loading from EEPROM.
                         Control
  7.2.54        SSID/SSVID CAPABILITY ID REGISTER – OFFSET B8h
                  BIT    FUNCTION            TYPE    DESCRIPTION
                         SSID/SSVID                  Read as 0Dh to indicate that these are SSID/SSVID capability registers.
                  7:0                         RO
                         Capabilities ID
  7.2.55        NEXT ITEM POINTER REGISTER – OFFSET B8h
                  BIT    FUNCTION            TYPE    DESCRIPTION
                                                     Pointer points to the PCI Express capability register (E0h).
                  15:8   Next Item Pointer    RO
                                                     Reset to E0h.
  7.2.56        SUBSYSTEM VENDOR ID REGISTER – OFFSET BCh
                  BIT    FUNCTION            TYPE    DESCRIPTION
                                                   Page 48 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                       PI7C9X20505GP
                                                                           5Port-5Lane PCI Express® Switch
                                                                                              GreenPacketTM Family
                                                                                                                 Datasheet
                  15:0   SSVID            RO    It indicates the sub-system vendor id. The default value may be changed by
                                                SMBus or auto-loading from EEPROM.
                                                Reset to 0000h.
  7.2.57        SUBSYSTEM ID REGISTER – OFFSET BCh
                  BIT    FUNCTION        TYPE   DESCRIPTION
                  31:16  SSID             RO    It indicates the sub-system device id. The default value may be changed by
                                                SMBus or auto-loading from EEPROM.
                                                Reset to 0000h.
  7.2.58        GPIO CONTROL REGISTER – OFFSET D8h (Upstream Port Only)
                  BIT    FUNCTION        TYPE   DESCRIPTION
                  0      GPIO [0] Input   RO    State of GPIO [0] pin
                                                0b: GPIO [0] is an input pin
                         GPIO [0] Output        1b: GPIO [0] is an output pin
                  1                       RW
                         Enable
                                                Reset to 0b.
                                                Value of this bit will be output to GPIO [0] pin if GPIO [0] is configured as
                         GPIO [0] Output        an output pin.
                  2                       RW
                         Register
                                                Reset to 0b.
                  3      Reserved         RO    Reset to 0b.
                  4      GPIO [1] Input   RO    State of GPIO [1] pin.
                                                0b: GPIO [1] is an input pin
                         GPIO [1] Output        1b: GPIO [1] is an output pin
                  5                       RW
                         Enable
                                                Reset to 0b.
                                                Value of this bit will be output to GPIO [1] pin if GPIO [1] is configured as
                         GPIO [1] Output        an output pin.
                  6                       RW
                         Register
                                                Reset to 0b.
                  7      Reserved         RO    Reset to 0b.
                  8      GPIO [2] Input   RO    State of GPIO [2] pin
                                                0b: GPIO [2] is an input pin
                         GPIO [2] Output        1b: GPIO [2] is an output pin
                  9                       RW
                         Enable
                                                Reset to 0b.
                                                Value of this bit will be output to GPIO [2] pin if GPIO [2] is configured as
                         GPIO [2] Output        an output pin.
                  10                      RW
                         Register
                                                Reset to 0b.
                  11     Reserved         RO    Reset to 0b.
                  12     GPIO [3] Input   RO    State of GPIO [3] pin.
                                                0b: GPIO [3] is an input pin
                         GPIO [3] Output        1b: GPIO [3] is an output pin
                  13                      RW
                         Enable
                                                Reset to 0b.
                                                Value of this bit will be output to GPIO [3] pin if GPIO [3] is configured as
                         GPIO [3] Output        an output pin.
                  14                      RW
                         Register
                                                Reset to 0b.
                  15     Reserved         RO    Reset to 0b.
                  16     GPIO [4] Input   RO    State of GPIO [4] pin.
                                              Page 49 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                       PI7C9X20505GP
                                                                           5Port-5Lane PCI Express® Switch
                                                                                              GreenPacketTM Family
                                                                                                                 Datasheet
                  BIT    FUNCTION        TYPE   DESCRIPTION
                                                0b: GPIO [4] is an input pin
                         GPIO [4] Output        1b: GPIO [4] is an output pin
                  17                      RW
                         Enable
                                                Reset to 0b.
                                                Value of this bit will be output to GPIO [4] pin if GPIO [4] is configured as
                         GPIO [4] Output        an output pin.
                  18                      RW
                         Register
                                                Reset to 0b.
                  19     Reserved         RO    Reset to 0b.
                  20     GPIO [5] Input   RO    State of GPIO [5] pin.
                                                0b: GPIO [5] is an input pin
                         GPIO [5] Output        1b: GPIO [5] is an output pin
                  21                      RW
                         Enable
                                                Reset to 0b.
                                                Value of this bit will be output to GPIO [5] pin if GPIO [5] is configured as
                         GPIO [5] Output        an output pin.
                  22                      RW
                         Register
                                                Reset to 0b.
                  23     Reserved         RO    Reset to 0b.
                  24     GPIO [6] Input   RO    State of GPIO [6] pin.
                                                0b: GPIO [6] is an input pin
                         GPIO [6] Output        1b: GPIO [6] is an output pin
                  25                      RW
                         Enable
                                                Reset to 0b.
                                                Value of this bit will be output to GPIO [6] pin if GPIO [6] is configured as
                         GPIO [6] Output        an output pin.
                  26                      RW
                         Register
                                                Reset to 0b.
                  27     Reserved         RO    Reset to 0b.
                  28     GPIO [7] Input   RO    State of GPIO [7] pin.
                                                0b: GPIO [7] is an input pin
                         GPIO [7] Output        1b: GPIO [7] is an output pin
                  29                      RW
                         Enable
                                                Reset to 0b.
                                                Value of this bit will be output to GPIO [7] pin if GPIO [7] is configured as
                         GPIO [7] Output        an output pin.
                  30                      RW
                         Register
                                                Reset to 0b.
                  31     Reserved         RO    Reset to 0b.
  7.2.59        EEPROM CONTROL REGISTER – OFFSET DCh (Upstream Port Only)
                  BIT    FUNCTION        TYPE   DESCRIPTION
                                                Starts the EEPROM read or write cycle.
                  0      EEPROM Start     RW
                                                Reset to 0b.
                                                Sends the command to the EEPROM.
                                                0b: EEPROM read
                  1      EEPROM Command   RW
                                                1b: EEPROM write
                                                Reset to 0b.
                                                1b: EEPROM acknowledge was not received during the EEPROM cycle.
                         EEPROM Error
                  2                       RO
                         Status
                                                Reset to 0b.
                                                0b: EEPROM autoload was unsuccessful or is disabled
                                                1b: EEPROM autolad occurred successfully after RESET. Configuration
                         EEPROM Autoload
                  3                       RO       registers were loaded with values in the EEPROM
                         Success
                                                It will be cleared when read at this bit.
                                              Page 50 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                           PI7C9X20505GP
                                                                               5Port-5Lane PCI Express® Switch
                                                                                                  GreenPacketTM Family
                                                                                                                  Datasheet
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   0b: EEPROM autoload was unsuccessful or is disabled
                                                   1b: EEPROM autoload occurred successfully after PREST. Configuration
                         EEPROM Autoload
                  4                          RO    registers were loaded with values stored in the EEPROM
                         Status
                                                   Reset to 0b.
                                                   0b: EEPROM autoload enabled
                         EEPROM Autoload           1b: EEPROM autoload disabled
                  5                          RW
                         Disable
                                                   Reset to 1b.
                                                   Determines the frequency of the EEPROM clock, which is derived from the
                                                   primary clock.
                                                   00b: Reserved
                         EEPROM Clock
                  7:6                        RW    01b: PEXCLK / 1024 (PEXCLK is 125MHz)
                         Rate
                                                   10b: Reserved
                                                   11b: Test Mode
                                                   Reset to 01b.
  7.2.60        EEPROM ADDRESS REGISTER – OFFSET DCh (Upstream Port Only)
                  BIT    FUNCTION           TYPE   DESCRIPTION
                  8      Reserved            RO    Reset to 0b.
                                                   Contains the EEPROM address.
                  15:9   EEPROM Address      RW
                                                   Reset to 0.
  7.2.61        EEPROM DATA REGISTER – OFFSET DCh (Upstream Port Only)
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   Contains the data to be written to the EEPROM. After completion of a read
                                                   cycle, this register will contain the data from the EEPROM.
                  31:16  EEPROM Data         RW
                                                   Reset to 0000h.
  7.2.62        PCI EXPRESS CAPABILITY ID REGISTER – OFFSET E0h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                         Enhanced                  Read as 10h to indicate that these are PCI express enhanced capability
                  7:0                        RO
                         Capabilities ID           registers.
  7.2.63        NEXT ITEM POINTER REGISTER – OFFSET E0h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                  15:8   Next Item Pointer   RO    Read as 00h. No other ECP registers.
  7.2.64        PCI EXPRESS CAPABILITIES REGISTER – OFFSET E0h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   Read as 0001b to indicate the device is compliant to Revision 1.0a of PCI
                  19:16  Capability Version  RO
                                                   Express Base Specifications.
                                                 Page 51 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                              PI7C9X20505GP
                                                                                  5Port-5Lane PCI Express® Switch
                                                                                                    GreenPacketTM Family
                                                                                                                        Datasheet
                  BIT    FUNCTION            TYPE    DESCRIPTION
                                                     Indicates the type of PCI Express logical device.
                  23:20  Device/Port Type     RO
                                                     Reset to 0101b (Upstream port).
                                                     Reset to 0110b (Downstream port).
                                                     When set, indicates that the PCIe Link associated with this Port is connected
                                                     to a slot. This field is valid for downstream port of the switch. The default
                  24     Slot Implemented    HwInt
                                                     value may be changed by the status of strapped pin, SMBus, or auto-loading
                                                     from EEPROM.
                         Interrupt Message           Read as 0b. No MSI messages are generated in the transparent mode.
                  29:25                       RO
                         Number
                  31:30  Reserved             RO     Reset to 00b.
  7.2.65        DEVICE CAPABILITIES REGISTER – OFFSET E4h
                  BIT    FUNCTION            TYPE    DESCRIPTION
                                                     Indicates the maximum payload size that the device can support for TLPs.
                                                     Each port of the Switch supports 256 bytes max payload size. The default
                         Max_Payload_Size
                  2:0                         RO     value may be changed by SMBus or auto-loading from EEPROM.
                         Supported
                                                     Reset to 001b.
                                                     Indicates the support for use of unclaimed function numbers as Phantom
                         Phantom Functions           functions. Read as 00b, since the Switch does not act as a requester.
                  4:3                         RO
                         Supported
                                                     Reset to 00b.
                                                     Indicates the maximum supported size of Tag field as a Requester. Read as 0,
                         Extended Tag Field          since the Switch does not act as a requester.
                  5                           RO
                         Supported
                                                     Reset to 0b.
                                                     Acceptable total latency that an Endpoint can withstand due to the transition
                                                     from L0s state to the L0 state. For Switch, the ASPM software would not
                         Endpoint L0s
                  8:6                         RO     check this value.
                         Acceptable Latency
                                                     Reset to 000b.
                                                     Acceptable total latency that an Endpoint can withstand due to the transition
                                                     from L1 state to the L0 state. For Switch, the ASPM software would not
                         Endpoint L1
                  11:9                        RO     check this value.
                         Acceptable Latency
                                                     Reset to 000b.
                  14:12  Reserved             RO     Reset to 000b.
                                                     When set, indicates that the device implements the functionality originally
                                                     defined in the Error Reporting ECN. The default value may be changed by
                         Role_Based Error
                  15                          RO     SMBus or auto-loading from EEPROM.
                         Reporting
                                                     Reset to 1b.
                  17:16  Reserved             RO     Reset to 00b.
                                                     It applies to Upstream Port only. In combination with the Slot Power Limit
                                                     Scale value, specifies the upper limit on power supplied by slot.
                         Captured Slot Power
                  25:18                       RO
                         Limit Value                 This value is set by the Set_Slot_Power_Limit message or hardwired to 00h.
                                                     Reset to 00h.
                                                     It applies to Upstream Port only. Specifies the scale used for the Slot Power
                                                     Limit Value.
                         Captured Slot Power
                  27:26                       RO
                         Limit Scale                 This value is set by the Set_Slot_Power_Limit message or hardwired to 00b.
                                                     Reset to 00b.
                  31:28  Reserved             RO     Reset to 0h.
  7.2.66        DEVICE CONTROL REGISTER – OFFSET E8h
                                                   Page 52 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                               PI7C9X20505GP
                                                                                 5Port-5Lane PCI Express® Switch
                                                                                                     GreenPacketTM Family
                                                                                                                        Datasheet
                  BIT    FUNCTION              TYPE   DESCRIPTION
                                                      0b: Disable Correctable Error Reporting
                         Correctable Error            1b: Enable Correctable Error Reporting
                  0                             RW
                         Reporting Enable
                                                      Reset to 0b.
                                                      0b: Disable Non-Fatal Error Reporting
                         Non-Fatal Error              1b: Enable Non-Fatal Error Reporting
                  1                             RW
                         Reporting Enable
                                                      Reset to 0b.
                                                      0b: Disable Fatal Error Reporting
                         Fatal Error Reporting        1b: Enable Fatal Error Reporting
                  2                             RW
                         Enable
                                                      Reset to 0b.
                                                      0b: Disable Unsupported Request Reporting
                         Unsupported Request          1b: Enable Unsupported Request Reporting
                  3                             RW
                         Reporting Enable
                                                      Reset to 0b.
                                                      When set, it permits the device to set the Relaxed Ordering bit in the attribute
                                                      field of transaction. Since the Switch can not either act as a requester or alter
                         Enable Relaxed
                  4                              RO   the content of packet it forwards, this bit always returns ‘0’ when read.
                         Ordering
                                                      Reset to 0b.
                                                      This field sets maximum TLP payload size for the device. Permissible
                                                      values that can be programmed are indicated by the Max_Payload_Size
                                                      Supported in the Device Capabilities register. Any value exceeding the
                  7:5    Max_Payload_Size       RW    Max_Payload_Size Supported written to this register results into clamping to
                                                      the Max_Payload_Size Supported value.
                                                      Reset to 000b.
                                                      Does not apply to PCI Express Switch. Returns ‘0’ when read.
                         Extended Tag Field
                  8                             RW
                         Enable
                                                      Reset to 0.
                                                      Does not apply to PCI Express Switch. Returns ‘0’ when read.
                         Phantom Function
                  9                             RW
                         Enable
                                                      Reset to 0b.
                                                      When set, indicates that a device is enabled to draw AUX power independent
                         Auxiliary (AUX)              of PME AUX power.
                  10                            RWS
                         Power PM Enable
                                                      Reset to 0b.
                                                      When set, it permits to set the No Snoop bit in the attribute field of
                                                      transaction. Since the Switch can not either act as a requester or alter the
                  11     Enable No Snoop         RO   content of packet it forwards, this bit always returns ‘0’ when read.
                                                      Reset to 0b.
                                                      This field sets the maximum Read Request size for the device as a Requester.
                                                      Since the Switch does not generate read request by itself, these bits are
                         Max_Read_
                  14:12                          RO   hardwired to 000b.
                         Request_Size
                                                      Reset to 000b.
                  15     Reserved                RO   Reset to 0b.
  7.2.67        DEVICE STATUS REGISTER – OFFSET E8h
                  BIT    FUNCTION              TYPE   DESCRIPTION
                                                      Asserted when correctable error is detected. Errors are logged in this register
                                                      regardless of whether error reporting is enabled or not in the Device Control
                         Correctable Error
                  16                           RW1C   register.
                         Detected
                                                      Reset to 0b.
                                                    Page 53 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                             PI7C9X20505GP
                                                                                5Port-5Lane PCI Express® Switch
                                                                                                   GreenPacketTM Family
                                                                                                                       Datasheet
                  BIT    FUNCTION             TYPE   DESCRIPTION
                                                     Asserted when non-fatal error is detected. Errors are logged in this register
                                                     regardless of whether error reporting is enabled or not in the Device Control
                         Non-Fatal Error
                  17                          RW1C   register.
                         Detected
                                                     Reset to 0b.
                                                     Asserted when fatal error is detected. Errors are logged in this register
                                                     regardless of whether error reporting is enabled or not in the Device Control
                  18     Fatal Error Detected RW1C   register.
                                                     Reset to 0b.
                                                     Asserted when unsupported request is detected. Errors are logged in this
                                                     register regardless of whether error reporting is enabled or not in the Device
                         Unsupported Request
                  19                          RW1C   Control register.
                         Detected
                                                     Reset to 0b.
                                                     Asserted when the AUX power is detected by the Switch
                         AUX Power
                  20                           RO
                         Detected
                                                     Reset to 1b.
                                                     Each port of Switch does not issue Non-posted Requests on its own behalf, so
                                                     this bit is hardwired to 0b.
                  21     Transactions Pending  RO
                                                     Reset to 0b.
                  31:22  Reserved              RO    Reset to 0.
  7.2.68        LINK CAPABILITIES REGISTER – OFFSET ECh
                  BIT    FUNCTION             TYPE   DESCRIPTION
                         Maximum Link                Read as 0001b to indicate the maximum speed of the Express link is 2.5 Gb/s.
                  3:0                          RO
                         Speed
                                                     Indicates the maximum width of the given PCIe Link. The width of each port
                                                     is determined by strapped pin or EEPROM pre-loaded value.
                         Maximum Link                Reset to 000001b (x1) for Port 0.
                   9:4                         RO
                         Width                       Reset to 000001b (x1) for Port 1.
                                                     Reset to 000001b (x1) for Port 2.
                                                     Reset to 000001b (x1) for Port 3.
                                                     Reset to 000001b (x1) for Port 4.
                                                     Indicates the level of ASPM supported on the given PCIe Link. Each port of
                         Active State Power          Switch supports L0s and L1 entry. The default value may be changed by
                  11:10  Management            RO    SMBus or auto-loading from EEPROM.
                         (ASPM) Support
                                                     Reset to 11b. Reset to 01b.
                                                     Indicates the L0s exit latency for the given PCIe Link.
                                                     The length of time this port requires to complete transition from L0s to L0 is
                                                     in the range of 256ns to less than 512ns. The default value may be changed
                  14:12  L0s Exit Latency      RO
                                                     by SMBus or auto-loading from EEPROM.
                                                     Reset to 011b.
                                                     Indicates the L1 exit latency for the given PCIe Link.
                                                     The length of time this port requires to complete transition from L1 to L0 is in
                         L1 Exit                     the range of 16us to less than 32us. The default value may be changed by
                  17:15                        RO
                         Latency                     SMBus or auto-loading from EEPROM.
                                                     Reset to 000b.
                  19:18  Reserved              RO    Reset to 00b.
                                                   Page 54 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                             PI7C9X20505GP
                                                                               5Port-5Lane PCI Express® Switch
                                                                                                  GreenPacketTM Family
                                                                                                                       Datasheet
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   For a Downstream Port, this bit must be set to 1b if the component supports
                                                   the optional capability of reporting the DL_Active state of the Data Link
                                                   Control and Management State Machine. For a hot-plug capable Downstream
                         Data Link Layer           Port, this bit must be set to 1b.
                  20     Active Reporting    RO
                         Capable                   For Upstream Port, this bit must be hardwired to 0b.
                                                   Reset to 0b for upstream port.
                                                   Reset to 1b for downstream ports.
                  23:21  Reserved            R0    Reset to 000b
                                                   Indicates the PCIe Port Number for the given PCIe Link. The default value
                                                   may be changed by SMBus or auto-loading from EEPROM.
                                                   Reset to 00h for Port 0.
                  31:24  Port Number         RO
                                                   Reset to 01h for Port 1.
                                                   Reset to 02h for Port 2.
                                                   Reset to 03h for Port 3.
                                                   Reset to 04h for Port 4.
  7.2.69        LINK CONTROL REGISTER – OFFSET F0h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   00b: ASPM is Disabled
                                                   01b: L0s Entry Enabled
                                                   10b: L1 Entry Enabled
                         Active State Power        11b: L0s and L1 Entry Enabled
                  1:0    Management          RW
                         (ASPM) Control            Note that the receiver must be capable of entering L0s even when the field is
                                                   disabled.
                                                   Reset to 00b.
                  2      Reserved            RO    Reset to 0b.
                                                   Does not apply to PCI Express Switch. Returns ‘0’ when read.
                         Read Completion
                  3                          RO
                         Boundary (RCB)
                                                   Reset to 0b.
                                                   At upstream port, it is not allowed to disable the link, so this bit is hardwired
                                                   to ‘0’. For downstream ports, it disables the link when this bit is set.
                  4      Link Disable        RW
                                                   Reset to 0b.
                                                   At upstream port, it is not allowed to retrain the link, so this bit is hardwired
                                                   to 0b. For downstream ports, it initiates Link Retraining when this bit is set.
                  5      Retrain Link        RW
                                                   This bit always returns 0b when read.
                                                   0b: The components at both ends of a link are operating with asynchronous
                                                       reference clock
                         Common Clock              1b: The components at both ends of a link are operating with a distributed
                  6                          RW
                         Configuration                 common reference clock
                                                   Reset to 0b.
                                                   When set, it transmits 4096 FTS ordered sets in the L0s state for entering L0
                                                   state and transmits 1024 TS1 ordered sets in the L1 state for entering L0 state.
                  7      Extended Synch      RW
                                                   Reset to 0b.
                  15:8   Reserved            RO    Reset to 00h.
  7.2.70        LINK STATUS REGISTER – OFFSET F0h
                  BIT    FUNCTION           TYPE   DESCRIPTION
                                                   Read as 0001b to indicate the negotiated speed of the Express link is 2.5
                  19:16  Link Speed          RO
                                                   Gb/s.
                                                 Page 55 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                               PI7C9X20505GP
                                                                                 5Port-5Lane PCI Express® Switch
                                                                                                     GreenPacketTM Family
                                                                                                                       Datasheet
                  BIT    FUNCTION            TYPE    DESCRIPTION
                                                     Indicates the negotiated width of the given PCIe link.
                         Negotiated Link
                  25:20                       RO
                         Width
                                                     Reset to 000001b (x1).
                                                     When set, indicates a Link training error occurred.
                                                     This bit is cleared by hardware upon successful training of the link to the L0
                  26     Training Error       RO     link state.
                                                     Reset to 0b.
                                                     When set, indicates the link training is in progress. Hardware clears this bit
                                                     once link training is complete.
                  27     Link Training        RO
                                                     Reset to 0b.
                                                     0b: the switch uses an independent clock irrespective of the presence of a
                                                          reference on the connector
                                                     1b: the switch uses the same reference clock that the platform provides on the
                                                          connector
                         Slot Clock
                  28                         HwInt
                         Configuration
                                                     The default value may be changed by the status of strapped pin, SMBus, or
                                                     auto-loading from EEPROM.
                                                     Reset to 0b.
                                                    Indicates the status of the Data Link Control and Management State Machine.
                         Data Link Layer            It returns a 1b to indicate the DL_Active state, 0b otherwise.
                  29                          RO
                         Link Active
                                                    Reset to 0b.
                  31:30  Reserved             RO     Reset to 00b.
  7.2.71        SLOT CAPABILITIES REGISTER (Downstream Port Only) – OFFSET F4h
                  BIT    FUNCTION            TYPE    DESCRIPTION
                                                     When set, it indicates that an Attention Button is implemented on the chassis
                                                     for this slot. The default value may be changed by SMBus or auto-loading
                         Attention Button
                  0                           RO     from EEPROM.
                         Present
                                                     Reset to 0b.
                                                     When set, it indicates that a Power Controller is implemented for this slot.
                                                     The default value may be changed by SMBus or auto-loading from
                         Power Controller
                  1                           RO     EEPROM.
                         Present
                                                     Reset to 0b.
                  2      Reserved             RO     Reset to 0b.
                                                     When set, it indicates that an Attention Indicator is implemented on the
                                                     chassis for this slot. The default value may be changed by SMBus or
                         Attention Indicator
                  3                           RO     auto-loading from EEPROM.
                         Present
                                                     Reset to 0b.
                                                     When set, it indicates that a Power Indicator is implemented on the chassis for
                                                     this slot. The default value may be changed by SMBus or auto-loading from
                         Power Indicator
                  4                           RO     EEPROM.
                         Present
                                                     Reset to 0b.
                                                     When set, it indicates that a device present in this slot might be removed from
                                                     the system without any prior notification. The default value may be changed
                  5      Hot-Plug Surprise    RO     by SMBus or auto-loading from EEPROM.
                                                     Reset to 0b.
                                                     When set, it indicates that this slot is capable of supporting Hot-Plug
                  6      Hot-Plug Capable    HwInt   operation. The default value may be changed by the status of strapped pin or
                                                     auto-loading from EEPROM.
                                                   Page 56 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                             PI7C9X20505GP
                                                                                 5Port-5Lane PCI Express® Switch
                                                                                                     GreenPacketTM Family
                                                                                                                       Datasheet
                  BIT    FUNCTION             TYPE   DESCRIPTION
                                                     It applies to Downstream Port only. In combination with the Slot Power Limit
                                                     Scale value, specifies the upper limit on power supplied by slot. Writes to this
                         Slot Power Limit            register also cause the Port to send the Set_Slot_Power_Limit message. The
                  14:7                         RW
                         Value                       default value may be changed by SMBus or auto-loading from EEPROM.
                                                     Reset to 00h.
                                                     It applies to Downstream Port only. Specifies the scale used for the Slot
                                                     Power Limit Value. Writes to this register also cause the Port to send the
                         Slot Power Limit            Set_Slot_Power_Limit message. The default value may be changed by
                  16:15                        RW
                         Scale                       SMBus or auto-loading from EEPROM.
                                                     Reset to 00b.
                  18:17  Reserved              RO    Reset to 00b.
                                                     It indicates the physical slot number attached to this Port. The default value
                         Physical Slot               may be changed by SMBus or auto-loading from EEPROM.
                  31:19                        RO
                         Number
                                                     Reset to 0.
  7.2.72        SLOT CONTROL REGISTER (Downstream Port Only) – OFFSET F8h
                  BIT    FUNCTION             TYPE   DESCRIPTION
                                                     When set, it enables the generation of Hot-Plug interrupt or wakeup event on
                         Attention Button            an attention button pressed event.
                  0                            RW
                         Pressed Enable
                                                     Reset to 0b.
                                                     When set, it enables the generation of Hot-Plug interrupt or wakeup event on
                         Power Fault Detected        a power fault event.
                  1                            RW
                         Enable
                                                     Reset to 0b.
                  2      Reserved              RO    Reset to 0b.
                                                     When set, it enables the generation of Hot-Plug interrupt or wakeup event on
                         Presence Detect             a presence detect changed event.
                  3                            RW
                         Changed Enable
                                                     Reset to 0b.
                                                     When set, it enables the generation of Hot-Plug interrupt when the Hot-Plug
                         Command
                                                     Controller completes a command.
                  4      Completed Interrupt   RW
                         Enable
                                                     Reset to 0b.
                                                     When set, it enables generation of Hot-Plug interrupt on enabled Hot-Plug
                         Hot-Plug Interrupt          events.
                  5                            RW
                         Enable
                                                     Reset to 0b.
                                                     Controls the display of Attention Indicator.
                                                     00b: Reserved
                                                     01b: On
                                                     10b: Blink
                         Attention Indicator
                  7:6                          RW    11b: Off
                         Control
                                                     Writes to this register also cause the Port to send the
                                                     ATTENTION_INDICATOR_* Messages.
                                                     Reset to 11b.
                                                   Page 57 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                PI7C9X20505GP
                                                                                  5Port-5Lane PCI Express® Switch
                                                                                                      GreenPacketTM Family
                                                                                                                         Datasheet
                  BIT    FUNCTION              TYPE   DESCRIPTION
                                                      Controls the display of Power Indicator.
                                                      00b: Reserved
                                                      01b: On
                                                      10b: Blink
                         Power Indicator
                  9:8                           RW    11b: Off
                         Control
                                                      Writes to this register also cause the Port to send the
                                                      POWER_INDICATOR_* Messages.
                                                      Reset to 11b.
                                                      0b: reset the power state of the slot (Power On)
                         Power Controller             1b: set the power state of the slot (Power Off)
                  10                            RW
                         Control
                                                      Reset to 0b.
                  11     Reserved               RO    Reset to 0b.
                                                      If the Data Link Layer Link Active capability is implemented, when set to 1b,
                         Data Link Layer              this field enables software notification when Data Link Layer Link Active
                  12     State Changed          RW    field is changed.
                         Enable
                                                      Reset to 0b.
                  15:13  Reserved               RO    Reset to 000b
  7.2.73        SLOT STATUS REGISTER (Downstream Port Only) – OFFSET F8h
                  BIT    FUNCTION              TYPE   DESCRIPTION
                                                      When set, it indicates the Attention Button is pressed.
                         Attention Button
                  16                           RW1C
                         Pressed
                                                      Reset to 0b.
                                                      When set, it indicates a Power Fault is detected.
                  17     Power Fault Detected  RW1C
                                                      Reset to 0b.
                                                      When set, it indicates a MRL Sensor Changed is detected.
                         MRL Sensor
                  18                            RO
                         Changed
                                                      Reset to 0b.
                                                      When set, it indicates a Presence Detect Changed is detected.
                         Presence Detect
                  19                           RW1C
                         Changed
                                                      Reset to 0b.
                                                      When set, it indicates the Hot-Plug Controller completes an issued command.
                         Command
                  20                           RW1C
                         Completed
                                                      Reset to 0b.
                                                      Reflects the status of MRL Sensor.
                                                      0b: MRL Closed
                  21     MRL Sensor State       RO
                                                      1b: MRL Opened
                                                      Reset to 0b.
                                                      Indicates the presence of a card in the slot.
                                                      0b: Slot Empty
                                                      1b: Card Present in slot
                  22     Presence Detect State  RO
                                                      This register is implemented on all Downstream Ports that implement slots.
                                                      For Downstream Ports not connected to slots (where the Slot Implemented bit
                                                      of the PCI Express Capabilities register is 0b), this bit returns 1b.
                                                      Reset to 1b.
                  23     Reserved               RO    Reset to 0.
                         Data Link Layer              This bit is set when the value reported in the Data Link Layer Link Active
                  24                           RW1C
                         State Changed                field of the Link Status register is changed.
                  31:25  Reserved               RO    Reset to 0
                                                    Page 58 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                              PI7C9X20505GP
                                                                                  5Port-5Lane PCI Express® Switch
                                                                                                     GreenPacketTM Family
                                                                                                                        Datasheet
  7.2.74        PCI EXPRESS ADVANCED ERROR REPORTING CAPABILITY ID
                REGISTER – OFFSET 100h
                  BIT    FUNCTION              TYPE    DESCRIPTION
                         Extended                      Read as 0001h to indicate that these are PCI express extended capability
                  15:0                           RO
                         Capabilities ID               registers for advance error reporting.
  7.2.75        CAPABILITY VERSION – OFFSET 100h
                  BIT    FUNCTION              TYPE    DESCRIPTION
                                                       Read as 1h. Indicates PCI-SIG defined PCI Express capability structure
                                                       version number.
                  19:16  Capability Version      RO
                                                       Reset to 1h.
  7.2.76        NEXT ITEM POINTER REGISTER – OFFSET 100h
                  BIT    FUNCTION              TYPE    DESCRIPTION
                                                       Pointer points to the PCI Express Extended VC capability register (140h).
                         Next Capability
                  31:20                          RO
                         Offset
                                                       Reset to 140h.
  7.2.77        UNCORRECTABLE ERROR STATUS REGISTER – OFFSET 104h
                  BIT    FUNCTION               TYPE    DESCRIPTION
                                                        When set, indicates that the Training Error event has occurred.
                  0      Training Error Status RW1CS
                                                        Reset to 0b.
                  3:1    Reserved                RO     Reset to 000b.
                                                        When set, indicates that the Data Link Protocol Error event has occurred.
                         Data Link Protocol
                  4                            RW1CS
                         Error Status
                                                        Reset to 0b.
                  11:5   Reserved                RO     Reset to 0.
                                                        When set, indicates that a Poisoned TLP has been received or generated.
                  12     Poisoned TLP Status   RW1CS
                                                        Reset to 0b.
                                                        When set, indicates that the Flow Control Protocol Error event has occurred.
                         Flow Control
                  13                           RW1CS
                         Protocol Error Status
                                                        Reset to 0b.
                                                        When set, indicates that the Completion Timeout event has occurred.
                         Completion Timeout
                  14                           RW1CS
                         Status
                                                        Reset to 0b.
                                                        When set, indicates that the Completer Abort event has occurred.
                         Completer Abort
                  15                           RW1CS
                         Status
                                                        Reset to 0b.
                                                        When set, indicates that the Unexpected Completion event has occurred.
                         Unexpected
                  16                           RW1CS
                         Completion Status
                                                        Reset to 0b.
                                                        When set, indicates that the Receiver Overflow event has occurred.
                         Receiver Overflow
                  17                           RW1CS
                         Status
                                                        Reset to 0b.
                                                        When set, indicates that a Malformed TLP has been received.
                         Malformed TLP
                  18                           RW1CS
                         Status
                                                        Reset to 0b.
                                                     Page 59 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                            PI7C9X20505GP
                                                                                5Port-5Lane PCI Express® Switch
                                                                                                  GreenPacketTM Family
                                                                                                                    Datasheet
                  BIT    FUNCTION             TYPE    DESCRIPTION
                                                      When set, indicates that an ECRC Error has been detected.
                  19     ECRC Error Status   RW1CS
                                                      Reset to 0b.
                                                      When set, indicates that an Unsupported Request event has occurred.
                         Unsupported Request
                  20                         RW1CS
                         Error Status
                                                      Reset to 0b.
                  31:21  Reserved              RO     Reset to 0.
  7.2.78        UNCORRECTABLE ERROR MASK REGISTER – OFFSET 108h
                  BIT    FUNCTION            TYPE    DESCRIPTION
                                                     When set, the Training Error event is not logged in the Header Log register
                                                     and not issued as an Error Message to RC either.
                  0      Training Error Mask  RWS
                                                     Reset to 0b.
                  3:1    Reserved              RO    Reset to 000b.
                                                     When set, the Data Link Protocol Error event is not logged in the Header Log
                         Data Link Protocol          register and not issued as an Error Message to RC either.
                  4                           RWS
                         Error Mask
                                                     Reset to 0b.
                  11:5   Reserved              RO    Reset to 0.
                                                     When set, an event of Poisoned TLP has been received or generated is not
                                                     logged in the Header Log register and not issued as an Error Message to RC
                  12     Poisoned TLP Mask    RWS    either.
                                                     Reset to 0b.
                                                     When set, the Flow Control Protocol Error event is not logged in the Header
                         Flow Control                Log register and not issued as an Error Message to RC either.
                  13                          RWS
                         Protocol Error Mask
                                                     Reset to 0b.
                                                     When set, the Completion Timeout event is not logged in the Header Log
                         Completion Timeout          register and not issued as an Error Message to RC either.
                  14                          RWS
                         Mask
                                                     Reset to 0b.
                                                     When set, the Completer Abort event is not logged in the Header Log register
                         Completer Abort             and not issued as an Error Message to RC either.
                  15                          RWS
                         Mask
                                                     Reset to 0b.
                                                     When set, the Unexpected Completion event is not logged in the Header Log
                         Unexpected                  register and not issued as an Error Message to RC either.
                  16                          RWS
                         Completion Mask
                                                     Reset to 0b.
                                                     When set, the Receiver Overflow event is not logged in the Header Log
                         Receiver Overflow           register and not issued as an Error Message to RC either.
                  17                          RWS
                         Mask
                                                     Reset to 0b.
                                                     When set, an event of Malformed TLP has been received is not logged in the
                         Malformed TLP               Header Log register and not issued as an Error Message to RC either.
                  18                          RWS
                         Mask
                                                     Reset to 0b.
                                                     When set, an event of ECRC Error has been detected is not logged in the
                                                     Header Log register and not issued as an Error Message to RC either.
                  19     ECRC Error Mask      RWS
                                                     Reset to 0b.
                                                     When set, the Unsupported Request event is not logged in the Header Log
                         Unsupported Request         register and not issued as an Error Message to RC either.
                  20                          RWS
                         Error Mask
                                                     Reset to 0b.
                  31:21  Reserved              RO    Reset to 0.
                                                   Page 60 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                           PI7C9X20505GP
                                                                                5Port-5Lane PCI Express® Switch
                                                                                                   GreenPacketTM Family
                                                                                                                     Datasheet
  7.2.79        UNCORRECTABLE ERROR SEVERITY REGISTER – OFFSET 10Ch
                  BIT    FUNCTION              TYPE    DESCRIPTION
                                                       0b: Non-Fatal
                         Training Error                1b: Fatal
                  0                             RWS
                         Severity
                                                       Reset to 1b.
                  3:1    Reserved                RO    Reset to 000b.
                                                       0b: Non-Fatal
                         Data Link Protocol            1b: Fatal
                  4                             RWS
                         Error Severity
                                                       Reset to 1b.
                  11:5   Reserved                RO    Reset to 0.
                                                       0b: Non-Fatal
                         Poisoned TLP                  1b: Fatal
                  12                            RWS
                         Severity
                                                       Reset to 0b.
                                                       0b: Non-Fatal
                         Flow Control
                                                       1b: Fatal
                  13     Protocol Error         RWS
                         Severity
                                                       Reset to 1b.
                                                       0b: Non-Fatal
                         Completion Timeout            1b: Fatal
                  14                            RWS
                         Error Severity
                                                       Reset to 0b.
                                                       0b: Non-Fatal
                         Completer Abort               1b: Fatal
                  15                            RWS
                         Severity
                                                       Reset to 0b.
                                                       0b: Non-Fatal
                         Unexpected                    1b: Fatal
                  16                            RWS
                         Completion Severity
                                                       Reset to 0b.
                                                       0b: Non-Fatal
                         Receiver Overflow             1b: Fatal
                  17                            RWS
                         Severity
                                                       Reset to 1b.
                                                       0b: Non-Fatal
                         Malformed TLP                 1b: Fatal
                  18                            RWS
                         Severity
                                                       Reset to 1b.
                                                       0b: Non-Fatal
                                                       1b: Fatal
                  19     ECRC Error Severity    RWS
                                                       Reset to 0.
                                                       0b: Non-Fatal
                         Unsupported Request           1b: Fatal
                  20                            RWS
                         Error Severity
                                                       Reset to 0b.
                  31:21  Reserved                RO    Reset to 0.
  7.2.80        CORRECTABLE ERROR STATUS REGISTER – OFFSET 110 h
                  BIT    FUNCTION               TYPE   DESCRIPTION
                                                       When set, the Receiver Error event is detected.
                  0      Receiver Error Status RW1CS
                                                       Reset to 0b.
                  5:1    Reserved                RO    Reset to 00000b.
                                                       When set, the event of Bad TLP has been received is detected.
                  6      Bad TLP Status        RW1CS
                                                       Reset to 0b.
                                                     Page 61 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                 PI7C9X20505GP
                                                                                 5Port-5Lane PCI Express® Switch
                                                                                                       GreenPacketTM Family
                                                                                                                         Datasheet
                  BIT    FUNCTION             TYPE    DESCRIPTION
                                                      When set, the event of Bad DLLP has been received is detected.
                  7      Bad DLLP Status     RW1CS
                                                      Reset to 0b.
                                                      When set, the REPLAY_NUM Rollover event is detected.
                         REPLAY_NUM
                  8                          RW1CS
                         Rollover status
                                                      Reset to 0b.
                  11:9   Reserved              RO     Reset to 000b.
                                                      When set, the Replay Timer Timeout event is detected.
                         Replay Timer
                  12                         RW1CS
                         Timeout status
                                                      Reset to 0b.
                                                      When set, the Advisory Non-Fatal Error event is detected.
                         Advisory Non-Fatal
                  13                         RW1CS
                         Error status
                                                      Reset to 0b.
                  31:14  Reserved              RO     Reset to 0b.
  7.2.81        CORRECTABLE ERROR MASK REGISTER – OFFSET 114 h
                  BIT    FUNCTION            TYPE    DESCRIPTION
                                                     When set, the Receiver Error event is not logged in the Header Log register
                                                     and not issued as an Error Message to RC either.
                  0      Receiver Error Mask  RWS
                                                     Reset to 0b.
                  5:1    Reserved              RO    Reset to 00000b.
                                                     When set, the event of Bad TLP has been received is not logged in the Header
                                                     Log register and not issued as an Error Message to RC either.
                  6      Bad TLP Mask         RWS
                                                     Reset to 0b.
                                                     When set, the event of Bad DLLP has been received is not logged in the
                                                     Header Log register and not issued as an Error Message to RC either.
                  7      Bad DLLP Mask        RWS
                                                     Reset to 0b.
                                                     When set, the REPLAY_NUM Rollover event is not logged in the Header
                         REPLAY_NUM                  Log register and not issued as an Error Message to RC either.
                  8                           RWS
                         Rollover Mask
                                                     Reset to 0b.
                  11:9   Reserved              RO    Reset to 000b.
                                                     When set, the Replay Timer Timeout event is not logged in the Header Log
                         Replay Timer                register and not issued as an Error Message to RC either.
                  12                          RWS
                         Timeout Mask
                                                     Reset to 0b.
                                                     When set, the Advisory Non-Fatal Error event is not logged in the Header
                         Advisory
                                                     Long register and not issued as an Error Message to RC either.
                  13     Non-Fatal Error      RWS
                         Mask
                                                     Reset to 1b.
                  31:14  Reserved              RO    Reset to 0.
  7.2.82        ADVANCE ERROR CAPABILITIES AND CONTROL REGISTER – OFFSET
                118h
                  BIT    FUNCTION            TYPE    DESCRIPTION
                                                     It indicates the bit position of the first error reported in the Uncorrectable
                                                     Error Status register.
                  4:0    First Error Pointer  ROS
                                                     Reset to 00000b.
                                                     When set, it indicates the Switch has the capability to generate ECRC.
                         ECRC Generation
                  5                            RO
                         Capable
                                                     Reset to 1b.
                                                   Page 62 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                            PI7C9X20505GP
                                                                               5Port-5Lane PCI Express® Switch
                                                                                                 GreenPacketTM Family
                                                                                                                    Datasheet
                  BIT    FUNCTION           TYPE    DESCRIPTION
                                                    When set, it enables the generation of ECRC when needed.
                         ECRC Generation
                  6                         RWS
                         Enable
                                                    Reset to 0b.
                                                    When set, it indicates the Switch has the capability to check ECRC.
                         ECRC Check
                  7                          RO
                         Capable
                                                    Reset to 1b.
                                                    When set, the function of checking ECRC is enabled.
                  8      ECRC Check Enable  RWS
                                                    Reset to 0b.
                  31:9   Reserved            RO     Reset to 0.
  7.2.83        HEADER LOG REGISTER – OFFSET From 11Ch to 128h
                  BIT    FUNCTION           TYPE    DESCRIPTION
                  31:0   1st DWORD           ROS    Hold the 1st DWORD of TLP Header. The Head byte is in big endian.
                  63:32  2nd DWORD           ROS    Hold the 2nd DWORD of TLP Header. The Head byte is in big endian.
                  95:64  3rd DWORD           ROS    Hold the 3rd DWORD of TLP Header. The Head byte is in big endian.
                  127:96 4th DWORD           ROS    Hold the 4th DWORD of TLP Header. The Head byte is in big endian.
  7.2.84        PCI EXPRESS VIRTUAL CHANNEL CAPABILITY ID REGISTER – OFFSET
                140h
                  BIT    FUNCTION           TYPE    DESCRIPTION
                         Extended                   Read as 0002h to indicate that these are PCI express extended capability
                  15:0                       RO
                         Capabilities ID            registers for virtual channel.
  7.2.85        CAPABILITY VERSION – OFFSET 140h
                  BIT    FUNCTION           TYPE    DESCRIPTION
                                                    Read as 1h. Indicates PCIe Base Specification REV. 1.0a.
                  19:16  Capability Version  RO
                                                    Reset to 1h.
  7.2.86        NEXT ITEM POINTER REGISTER – OFFSET 140h
                  BIT    FUNCTION           TYPE    DESCRIPTION
                                                    Pointer points to the PCI Express Power Budgeting Capability register
                         Next Capability            (20Ch).
                  31:20                      RO
                         Offset
                                                    Reset to 20Ch.
  7.2.87        PORT VC CAPABILITY REGISTER 1 – OFFSET 144h
                  BIT    FUNCTION           TYPE    DESCRIPTION
                                                    It indicates the number of extended Virtual Channels in addition to the default
                                                    VC supported by the Switch. The default value may be changed by the status
                  2:0    Extended VC Count  HwInt   of strapped pin or auto-loading from EEPROM.
                                                    Reset to 001b.
                  3      Reserved            RO     Reset to 0b.
                                                  Page 63 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                             PI7C9X20505GP
                                                                                 5Port-5Lane PCI Express® Switch
                                                                                                   GreenPacketTM Family
                                                                                                                       Datasheet
                  BIT    FUNCTION             TYPE   DESCRIPTION
                                                     It indicates the number of extended Virtual Channels in addition to the default
                                                     VC belonging to the low-priority VC (LPVC) group. The default value may
                         Low Priority
                  6:4                          RO    be changed by SMBus or auto-loading from EEPROM.
                         Extended VC Count
                                                     Reset to 000b.
                  7      Reserved              RO    Reset to 0b.
                                                     It indicates the reference clock for Virtual Channels that support time-based
                                                     WRR Port Arbitration. Defined encoding is 00b for 100 ns reference clock.
                  9:8    Reference Clock       RO
                                                     Reset to 00b.
                                                     Read as 10b to indicate the size of Port Arbitration table entry in the device is
                         Port Arbitration            4 bits.
                  11:10                        RO
                         Table Entry Size
                                                     Reset to 10b.
                  31:12  Reserved              RO    Reset to 0.
  7.2.88        PORT VC CAPABILITY REGISTER 2 – OFFSET 148h
                  BIT    FUNCTION             TYPE   DESCRIPTION
                                                     It indicates the types of VC Arbitration supported by the device for the LPVC
                                                     group. This field is valid when LPVC is greater than 0. The Switch supports
                         VC Arbitration              Hardware fixed arbitration scheme, e.g., Round Robin and Weight Round
                  7:0                          RO
                         Capability                  Robin arbitration with 32 phases in LPVC.
                                                     Reset to 00000011b.
                  23:8   Reserved              RO    Reset to 0.
                                                     It indicates the location of the VC Arbitration Table as an offset from the base
                                                     address of the Virtual Channel Capability register in the unit of DQWD (16
                         VC Arbitration Table
                  31:24                        RO    bytes).
                         Offset
                                                     Reset to 03h.
  7.2.89        PORT VC CONTROL REGISTER – OFFSET 14Ch
                  BIT    FUNCTION             TYPE   DESCRIPTION
                                                     When set, the programmed VC Arbitration Table is applied to the hardware.
                         Load VC Arbitration         This bit always returns 0b when read.
                  0                            RW
                         Table
                                                     Reset to 0b.
                                                     This field is used to configure the VC Arbitration by selecting one of the
                                                     supported VC Arbitration schemes. The valid values for the schemes
                         VC Arbitration              supported by Switch are 0b and 1b. Other value than these written into this
                  3:1                          RW
                         Select                      register will be treated as default.
                                                     Reset to 0b.
                  15:4   Reserved              RO    Reset to 0.
  7.2.90        PORT VC STATUS REGISTER – OFFSET 14Ch
                  BIT    FUNCTION             TYPE   DESCRIPTION
                                                     When set, it indicates that any entry of the VC Arbitration Table is written by
                                                     software. This bit is cleared when hardware finishes loading values stored in
                         VC Arbitration Table
                  16                           RO    the VC Arbitration Table after the bit of “Load VC Arbitration Table” is set.
                         Status
                                                     Reset to 0b.
                  31:17  Reserved              RO    Reset to 0.
                                                   Page 64 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                               PI7C9X20505GP
                                                                                  5Port-5Lane PCI Express® Switch
                                                                                                      GreenPacketTM Family
                                                                                                                         Datasheet
  7.2.91        VC RESOURCE CAPABILITY REGISTER (0) – OFFSET 150h
                  BIT    FUNCTION              TYPE   DESCRIPTION
                                                      It indicates the types of Port Arbitration supported by the VC resource. The
                                                      Switch supports Hardware fixed arbitration scheme, e.g., Round Robin,
                                                      Weight Round Robin (WRR) arbitration with 128 phases (3~4 enabled ports)
                         Port Arbitration
                  7:0                           RO    and Time-based WRR with 128 phases (3~4 enabled ports). Note that the
                         Capability
                                                      Time-based WRR is only valid in VC1.
                                                      Reset to 00001001b.
                  13:8   Reserved               RO    Reset to 000000b.
                                                      When set, it indicates the VC resource only supports transaction optimized
                         Advanced Packet              for Advanced Packet Switching (AS).
                  14                            RO
                         Switching
                                                      Reset to 0b.
                                                      This bit is not applied to PCIe Switch.
                         Reject Snoop
                  15                            RO
                         Transactions
                                                      Reset to 0b.
                                                      It indicates the maximum numbers of time slots (minus one) are allocated for
                                                      Isochronous traffic. The default value may be changed by SMBus or
                         Maximum Time
                  22:16                         RO    auto-loading from EEPROM.
                         Slots
                                                      Reset to 7Fh.
                  23     Reserved               RO    Reset to 0b.
                                                      It indicates the location of the Port Arbitration Table (n) as an offset from the
                                                      base address of the Virtual Channel Capability register in the unit of DQWD
                         Port Arbitration
                  31:24                         RO    (16 bytes).
                         Table Offset
                                                      Reset to 04h for Port Arbitration Table (0).
  7.2.92        VC RESOURCE CONTROL REGISTER (0) – OFFSET 154h
                  BIT    FUNCTION              TYPE   DESCRIPTION
                                                      This field indicates the TCs that are mapped to the VC resource. Bit locations
                                                      within this field correspond to TC values. When the bits in this field are set, it
                                                      means that the corresponding TCs are mapped to the VC resource. The
                  7:0    TC/VC Map              RW
                                                      default value may be changed by SMBus or auto-loading from EEPROM.
                                                      Reset to FFh.
                  15:8   Reserved               RO    Reset to 00h.
                                                      When set, the programmed Port Arbitration Table is applied to the hardware.
                         Load Port Arbitration        This bit always returns 0b when read.
                  16                            RW
                         Table
                                                      Reset to 0b.
                                                      This field is used to configure the Port Arbitration by selecting one of the
                                                      supported Port Arbitration schemes. The permissible values for the schemes
                         Port Arbitration             supported by Switch are 000b and 011b at VC0, other value than these
                  19:17                         RW
                         Select                       written into this register will be treated as default.
                                                      Reset to 000b.
                  23:20  Reserved               RO    Reset to 0h.
                                                      This field assigns a VC ID to the VC resource.
                  26:24  VC ID                  RW
                                                      Reset to 000b.
                  30:27  Reserved               RO    Reset to 0h.
                                                      0b: it disables this Virtual Channel
                                                      1b: it enables this Virtual Channel
                  31     VC Enable              RW
                                                      Reset to 1b.
                                                    Page 65 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                               PI7C9X20505GP
                                                                                  5Port-5Lane PCI Express® Switch
                                                                                                      GreenPacketTM Family
                                                                                                                         Datasheet
  7.2.93        VC RESOURCE STATUS REGISTER (0) – OFFSET 158h
                  BIT    FUNCTION          TYPE      DESCRIPTION
                  15:0   Reserved           RO       Reset to 0000h.
                                                     When set, it indicates that any entry of the Port Arbitration Table is written by
                                                     software. This bit is cleared when hardware finishes loading values stored in
                         Port Arbitration
                  16                        RO       the Port Arbitration Table after the bit of “Load Port Arbitration Table” is set.
                         Table Status
                                                     Reset to 0b.
                                                     When set, it indicates that the VC resource is still in the process of
                         VC Negotiation              negotiation. This bit is cleared after the VC negotiation is complete.
                  17                        RO
                         Pending
                                                     Reset to 0b.
                  31:18  Reserved           RO       Reset to 0.
  7.2.94        VC RESOURCE CAPABILITY REGISTER (1) – OFFSET 15Ch
                  BIT    FUNCTION          TYPE      DESCRIPTION
                                                     It indicates the types of Port Arbitration supported by the VC resource. The
                                                     Switch supports Hardware fixed arbitration scheme, e.g., Round Robin,
                                                     Weight Round Robin (WRR) arbitration with 128 phases (3~4 enabled ports)
                         Port Arbitration
                  7:0                       RO       and Time-based WRR with 128 phases (3~4 enabled ports). Note that the
                         Capability
                                                     Time-based WRR is only valid in VC1.
                                                     Reset to 00011001b.
                  13:8   Reserved           RO       Reset to 000000b.
                                                     When set, it indicates the VC resource only supports transaction optimized
                         Advanced Packet             for Advanced Packet Switching (AS).
                  14                        RO
                         Switching
                                                     Reset to 0b.
                                                     This bit is not applied to PCIe Switch.
                         Reject Snoop
                  15                        RO
                         Transactions
                                                     Reset to 0b.
                                                     It indicates the maximum numbers of time slots (minus one) are allocated for
                                                     Isochronous traffic. The default value may be changed by SMBus or
                         Maximum Time
                  22:16                     RO       auto-loading from EEPROM.
                         Slots
                                                     Reset to 7Fh.
                  23     Reserved           RO       Reset to 0b.
                                                     It indicates the location of the Port Arbitration Table (n) as an offset from the
                                                     base address of the Virtual Channel Capability register in the unit of DQWD
                         Port Arbitration
                  31:24                     RO       (16 bytes).
                         Table Offset
                                                     Reset to 08h for Port Arbitration Table (1)
  7.2.95        VC RESOURCE CONTROL REGISTER (1) – OFFSET 160h
                  BIT   FUNCTION            TYPE         DESCRIPTION
                                                         This field indicates the TCs that are mapped to the VC resource. Bit
                                                         locations within this field correspond to TC values. When the bits in this
                                                         field are set, it means that the corresponding TCs are mapped to the VC
                                             RW
                                                         resource. Bit 0 of this filed is read-only and must be set to “0” for the VC1.
                  7:0   TC/VC Map         (Exception
                                                         The default value may be changed by SMBus or auto-loading from
                                           for bit0)
                                                         EEPROM.
                                                         Reset to 00h.
                  15:8  Reserved             RO          Reset to 00h.
                                                   Page 66 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                          PI7C9X20505GP
                                                                                             5Port-5Lane PCI Express® Switch
                                                                                                                GreenPacketTM Family
                                                                                                                                     Datasheet
                  BIT        FUNCTION                  TYPE        DESCRIPTION
                                                                   When set, the programmed Port Arbitration Table is applied to the
                             Load Port                             hardware. This bit always returns 0b when read.
                  16                                    RW
                             Arbitration Table
                                                                   Reset to 0b.
                                                                   This field is used to configure the Port Arbitration by selecting one of the
                                                                   supported Port Arbitration schemes. The permissible values for the
                             Port Arbitration                      schemes supported by Switch are 000b, 011b and 100b at VC1, other value
                  19:17                                 RW
                             Select                                than these written into this register will be treated as default.
                                                                   Reset to 000b.
                  23:20      Reserved                   RO         Reset to 0h.
                                                                   This field assigns a VC ID to the VC resource.
                  26:24      VC ID                      RW
                                                                   Reset to 001b.
                  30:27      Reserved                   RO         Reset to 0h.
                                                                   0b: it disables this Virtual Channel
                                                                   1b: it enables this Virtual Channel
                  31         VC Enable                  RW
                                                                   Reset to 0b.
  7.2.96        VC RESOURCE STATUS REGISTER (1) – OFFSET 164h
                  BIT        FUNCTION                 TYPE      DESCRIPTION
                  15:0       Reserved                  RO       Reset to 0000h.
                                                                When set, it indicates that any entry of the Port Arbitration Table is written by
                                                                software. This bit is cleared when hardware finishes loading values stored in
                             Port Arbitration
                  16                                   RO       the Port Arbitration Table after the bit of “Load Port Arbitration Table” is set.
                             Table Status
                                                                Reset to 0b.
                                                                When set, it indicates that the VC resource is still in the process of
                             VC Negotiation                     negotiation. This bit is cleared after the VC negotiation is complete.
                  17                                   RO
                             Pending
                                                                Reset to 0b.
                  31:18      Reserved                  RO       Reset to 0.
  7.2.97        VC ARBITRATION TABLE REGISTER – OFFSET 170h
                The VC arbitration table is a read-write register array that contains a table for VC arbitration. Each
                table entry allocates four bits, of which three bits are used to represent VC ID and one bit is reserved.
                A total of 32 entries are used to construct the VC arbitration table. The layout for this register array is
                shown below.
                Table 7-1 Register Array Layout for VC Arbitration
                     31 - 28     27 - 24      23 - 20    19 - 16        15 - 12        11 - 8         7-4            3-0          Byte Location
                     Phase        Phase        Phase      Phase          Phase         Phase         Phase          Phase
                                                                                                                                       00h
                       [7]          [6]          [5]        [4]            [3]           [2]           [1]            [0]
                     Phase        Phase        Phase      Phase          Phase         Phase         Phase          Phase
                                                                                                                                       04h
                      [15]         [14]         [13]       [12]           [11]          [10]           [9]            [8]
                     Phase        Phase        Phase      Phase          Phase         Phase         Phase          Phase
                                                                                                                                       08h
                      [23]         [22]         [21]       [20]           [19]          [18]          [17]           [16]
                     Phase        Phase        Phase      Phase          Phase         Phase         Phase          Phase
                                                                                                                                       0Ch
                      [31]         [30]         [29]       [28]           [27]          [26]          [25]           [24]
                                                             Page 67 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                       PI7C9X20505GP
                                                                                          5Port-5Lane PCI Express® Switch
                                                                                                             GreenPacketTM Family
                                                                                                                               Datasheet
  7.2.98        PORT ARBITRATION TABLE REGISTER (0) and (1) – OFFSET 180h and
                1C0h
                The Port arbitration table is a read-write register array that contains a table for Port arbitration. Each
                table entry allocates two bits to represent Port Number. The table entry size is dependent on the
                number of enabled ports (refer to bit 10 and 11 of Port VC capability register 1). The arbitration table
                contains 128 entries if three or four ports are to be enabled. The following table shows the register
                array layout for the size of entry equal to two.
                Table 7-2 Table Entry Size in 4 Bits
                     63 - 56    55 - 48       47 - 40     39 - 32       31 - 24      23 - 16        15 - 8       7-0         Byte Location
                      Phase      Phase         Phase      Phase          Phase        Phase         Phase        Phase
                                                                                                                                  00h
                    [15:14]     [13:12]       [11:10]      [9:8]          [7:6]       [5:4]         [3:2]        [1:0]
                      Phase      Phase         Phase      Phase          Phase        Phase         Phase        Phase
                                                                                                                                  08h
                    [31:30]     [29:28]       [27:26]    [25:24]        [23:22]      [21:20]       [19:18]      [17:16]
                      Phase      Phase         Phase      Phase          Phase        Phase         Phase        Phase
                                                                                                                                  10h
                    [47:46]     [45:44]       [43:42]    [41:40]        [39:38]      [37:36]       [35:34]      [33:32]
                      Phase      Phase         Phase      Phase          Phase        Phase         Phase        Phase
                                                                                                                                  18h
                    [63:62]     [61:60]       [59:58]    [57:56]        [55:54]      [53:52]       [51:50]      [49:48]
                      Phase      Phase         Phase      Phase          Phase        Phase         Phase        Phase
                                                                                                                                  20h
                    [79:78]     [77:76]       [75:74]    [73:72]        [71:70]      [69:68]       [67:66]      [65:64]
                      Phase      Phase         Phase      Phase          Phase        Phase         Phase        Phase
                                                                                                                                  28h
                    [95:94]     [93:92]       [91:90]    [89:88]        [87:86]      [85:84]       [83:82]      [81:80]
                      Phase      Phase         Phase      Phase          Phase        Phase         Phase        Phase
                                                                                                                                  30h
                   [111:110]   [109:108]     [107:106]  [105:104]      [103:102]    [101:100]      [99:98]      [97:96]
                      Phase      Phase         Phase      Phase          Phase        Phase         Phase        Phase
                                                                                                                                  38h
                   [127:126]   [125:124]     [123:122]  [121:120]      [119:118]    [117:116]     [115:114]    [113:112]
  7.2.99        PCI EXPRESS POWER BUDGETING CAPABILITY ID REGISTER –
                OFFSET 20Ch
                  BIT        FUNCTION                 TYPE      DESCRIPTION
                             Extended                           Read as 0004h to indicate that these are PCI express extended capability
                  15:0                                 RO
                             Capabilities ID                    registers for power budgeting.
  7.2.100       CAPABILITY VERSION – OFFSET 20Ch
                  BIT        FUNCTION                 TYPE      DESCRIPTION
                                                                Read as 1h. Indicates PCIe Base Specification REV. 1.0a.
                  19:16      Capability Version        RO
                                                                Reset to 1h.
  7.2.101       NEXT ITEM POINTER REGISTER – OFFSET 20Ch
                  BIT        FUNCTION                 TYPE      DESCRIPTION
                                                                Read as 000h. No other ECP registers.
                             Next Capability
                  31:20                                RO
                             Offset
                                                                Reset to 000h.
                                                            Page 68 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                          PI7C9X20505GP
                                                                              5Port-5Lane PCI Express® Switch
                                                                                                GreenPacketTM Family
                                                                                                                  Datasheet
  7.2.102       DATA SELECT REGISTER – OFFSET 210h
                  BIT    FUNCTION         TYPE   DESCRIPTION
                                                 It indexes the power budgeting data reported through the data register.
                                                 When 00h, it selects D0 Max power budget
                  7:0    Data Selection    RW    When 01h, it selects D0 Sustained power budget
                                                 Other values would return zero power budgets, which means not supported
                                                 Reset to 00h.
                  31:8   Reserved          RO    Reset to 000000h.
  7.2.103       POWER BUDGETING DATA REGISTER – OFFSET 214h
                  BIT    FUNCTION         TYPE   DESCRIPTION
                                                 It specifies the base power value in watts. This value represents the required
                                                 power budget in the given operation condition. The default value may be
                  7:0    Base Power        RO    changed by auto-loading from EEPROM.
                                                 Reset to 04h.
                                                 It specifies the scale to apply to the base power value. The default value may
                                                 be changed by auto-loading from EEPROM.
                  9:8    Data Scale        RO
                                                 Reset to 00b.
                                                 It specifies the power management sub state of the given operation condition.
                                                 It is initialized to the default sub state.
                  12:10  PM Sub State      RO
                                                 Reset to 000b.
                                                 It specifies the power management state of the given operation condition.
                                                 It defaults to the D0 power state. The default value may be changed by
                  14:13  PM State          RO    auto-loading from EEPROM.
                                                 Reset to 00b.
                                                 It specifies the type of the given operation condition.
                                                 It defaults to the Maximum power state. The default value may be changed by
                  17:15  Type              RO    auto-loading from EEPROM.
                                                 Reset to 111b.
                                                 It specifies the power rail of the given operation condition.
                  20:18  Power Rail        RO
                                                 Reset to 010b.
                  31:21  Reserved          RO    Reset to 0.
  7.2.104       POWER BUDGET CAPABILITY REGISTER – OFFSET 218h
                  BIT    FUNCTION         TYPE   DESCRIPTION
                                                 When set, it indicates that the power budget for the device is included within
                                                 the system power budget. The default value may be changed by auto-loading
                  0      System Allocated  RO    from EEPROM.
                                                 Reset to 0b.
                  31:1   Reserved          RO    Reset to 0.
                                               Page 69 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                            PI7C9X20505GP
                                                                                           5Port-5Lane PCI Express® Switch
                                                                                                       GreenPacketTM Family
                                                                                                                   Datasheet
  8 CLOCK SCHEME
  The PI7C9X20505GP requires 100MHz differential clock inputs through REFCLKP and REFCLKN Pins as shown
  in the following table.
          Table 8-1 Input Clock Requirements
            Symbol          Description                                                Min   Typical Max.     Unit
            ClkInFREQ       Reference input clock range                                  -    100       -    MHz
            ClkInDC         Duty cycle of input clock                                   40     50      60      %
            TR, TF          Rise/Fall time of input clock                                -      -      0.2   RCUIa
            VSW             Differential input voltage swing      (peak-to-peak)       800      -     2000    mV
                                                                  (zero-to-peak)       400      -     1000    mV
            a. RCUI (Reference Clock Unit Interval) refers to the reference clock period
                                                                 Page 70 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                        PI7C9X20505GP
                                                                                5Port-5Lane PCI Express® Switch
                                                                                                GreenPacketTM Family
                                                                                                                 Datasheet
  9 HOT PLUG OPERATION
  The PI7C9X20505GP is compliant with the PCI Standard Hot-Plug Controller (SHPC) and Subsystem
  Specification Revision 1.0.
  Systems with the Hot Plug capability allow the attachment and removal of components from the running system
  without severely affecting the normal operation of the system. This feature prevents down-time of the system when
  faulty components need to be replaced or the re-configuration of the system needs to be performed. This feature also
  allows the system to isolate a faulty component and maintain the stability of the rest of the system upon the
  detection of such event. Each downstream port of the device has its own Hot Plug Controller, which operates
  independently from the others. The Hot Plug Controller of the device provides the parallel interface bus to the slot,
  and, therefore, no extra logic is required to convert the signals from the serial interface bus into parallel.
  The Hot Plug operation of the PI7C9X20505GP is implemented by the Hot Plug Signal Pins (Section 3.3) and Hot
  Plug Capability related register sets (Section 7.2.71 to 7.2.73). The Hot Plug Signal Pins of the device consist of
  "PWR_IND", "ATT_IND", "ATT_BTN", "MRL_PDC", "PWR_ENA_L" and "PWR_FLT" pins. The Hot Plug
  Capability register sets provide Hot Plug related status reporting. Additionally, the register sets provide interrupt
  messaging, which signal the occurrences of various Hot Plug events that take place on the slots. Upon receiving of
  the interrupt events, the system software can use the Hot Plug Capability registers to respond to these events.
                                                        Page 71 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                PI7C9X20505GP
                                                                                    5Port-5Lane PCI Express® Switch
                                                                                                       GreenPacketTM Family
                                                                                                                       Datasheet
  10 IEEE 1149.1 COMPATIBLE JTAG CONTROLLER
  An IEEE 1149.1 compatible Test Access Port (TAP) controller and associated TAP pins are provided to support
  boundary scan in PI7C9X20505GP for board-level continuity test and diagnostics. The TAP pins assigned are TCK,
  TDI, TDO, TMS and TRST_L. All digital input, output, input/output pins are tested except TAP pins.
  10.1 INSTRUCTION REGISTER
  The IEEE 1149.1 Test Logic consists of a TAP controller, an instruction register, and a group of test data registers
  including Bypass and Boundary Scan registers. The TAP controller is a synchronous 16-state machine driven by the
  Test Clock (TCK) and the Test Mode Select (TMS) pins. An independent power on reset circuit is provided to
  ensure the machine is in TEST_LOGIC_RESET state at power-up.
  PI7C9X20505GP implements a 5-bit Instruction register to control the operation of the JTAG logic. The defined
  instruction codes are shown in Table 10-1. Those bit combinations that are not listed are equivalent to the BYPASS
  (11111) instruction:
          Table 10-1 Instruction register codes
            Instruction   Operation Code (binary) Register Selected  Operation
            EXTEST                 00000          Boundary Scan      Drives / receives off-chip test data
            SAMPLE                 00001          Boundary Scan      Samples inputs / pre-loads outputs
            HIGHZ                  00101          Bypass             Tri-states output and I/O pins except TDO pin
            CLAMP                  00100          Bypass             Drives pins from boundary-scan register and selects Bypass
                                                                     register for shifts
            IDCODE                 01100          Device ID          Accesses the Device ID register, to read manufacturer ID, part
                                                                     number, and version number
            BYPASS                 11111          Bypass             Selected Bypass Register
            INT_SCAN               00010          Internal Scan      Scan test
            MEM_BIST               01010           Memory BIST       Memory BIST test
  10.2 BYPASS REGISTER
  The required bypass register (one-bit shift register) provides the shortest path between TDI and TDO when a bypass
  instruction is in effect. This allows rapid movement of test data to and from other components on the board. This
  path can be selected when no test operation is being performed on the PI7C9X20505GP.
  10.3 DEVICE ID REGISTER
  This register identifies Pericom as the manufacturer of the device and details the part number and revision number
  for the device.
            Table 10-2 JTAG device ID register
            Bit          Type                     Value              Description
            31-28        RO                       0001               Version number
            27-12        RO                       1001001000000100   Last 4 digits (hex) of the die part number
            11-1         RO                       01000111111        Pericom identifier assigned by JEDEC
            0            RO                       1                  Fixed bit equal to 1’b1
                                                         Page 72 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                      PI7C9X20505GP
                                                                              5Port-5Lane PCI Express® Switch
                                                                                              GreenPacketTM Family
                                                                                                               Datasheet
  10.4 BOUNDARY SCAN REGISTER
  The boundary scan register has a set of serial shift-register cells. A chain of boundary scan cells is formed by
  connected the internal signal of the PI7C9X20505GP package pins. The VDD, VSS, and JTAG pins are not in the
  boundary scan chain. The input to the shift register is TDI and the output from the shift register is TDO. There are 4
  different types of boundary scan cells, based on the function of each signal pin.
  The boundary scan register cells are dedicated logic and do not have any system function. Data may be loaded into
  the boundary scan register master cells from the device input pins and output pin-drivers in parallel by the
  mandatory SAMPLE and EXTEST instructions. Parallel loading takes place on the rising edge of TCK.
  10.5 JTAG BOUNDARY SCAN REGISTER ORDER
            Table 10-3 JTAG boundary scar register definition
              Boundary Scan
             Register Number           Pin Name              Ball Location            Type             Tri-state Control Cell
                     0                  TEST3                     D8                  Input
                     1              DWNRST_L[1]                   D6                 Output2
                     2                  TEST4                      E8                 Input
                     3              DWNRST_L[2]                    E6                Output2
                     4                  TEST5                      E7                 Input
                     5              DWNRST_L[3]                   D5                 Output2
                     6              DWNRST_L[4]                    E5                Output2
                     7                  TEST2                     D4                  Input
                     8                 PERST_L                     E4                 Input
                     9                    NC                       F2                 Input
                    10                    NC                       F3                 Bidir                      16
                    11                 VC1_EN                      F4                 Bidir                      16
                    12               SLOT_IMP[1]                  G1                  Bidir                      16
                    13               SLOT_IMP[2]                  G2                  Bidir                      16
                    14               SLOT_IMP[3]                  G4                  Bidir                      16
                    15               HOTPLUG[1]                   H4                  Bidir                      16
                    16                                                               Control
                    17               HOTPLUG[2]                   H1                  Bidir                      16
                    18               HOTPLUG[3]                   H2                  Bidir                      16
                    19               SLOTCLK[0]                   H3                  Bidir                      16
                    20               SLOTCLK[1]                   H5                  Bidir                      16
                    21               SLOTCLK[2]                    J1                 Bidir                      16
                    22               SLOTCLK[3]                    J3                 Bidir                      16
                    23                  GPIO[0]                    J5                 Bidir                      24
                    24                                                               Control
                    25                  GPIO[1]                    J6                 Bidir                      26
                    26                                                               Control
                    27                  GPIO[2]                   K2                  Bidir                      28
                    28                                                               Control
                    29                  GPIO[3]                   K3                  Bidir                      30
                    30                                                               Control
                    31                  GPIO[4]                   K4                  Bidir                      32
                    32                                                               Control
                    33                  GPIO[5]                   K5                  Bidir                      34
                    34                                                               Control
                    35                  GPIO[6]                    L1                 Bidir                      36
                    36                                                               Control
                    37                  GPIO[7]                    L2                 Bidir                      38
                    38                                                               Control
                    39                  TEST1                      L4                 Bidir                      49
                    40                  HIDRV                      L6                 Bidir                      49
                                                      Page 73 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                   PI7C9X20505GP
                                                                5Port-5Lane PCI Express® Switch
                                                                              GreenPacketTM Family
                                                                                        Datasheet
                   41               LODRV                   M2         Bidir              49
                   42               DTX[0]                  M3         Bidir              49
                   43               DTX[1]                  M5         Bidir              49
                   44               DTX[2]                  M6         Bidir              49
                   45               DTX[3]                   N1        Bidir              49
                   46               DEQ[0]                   N2        Bidir              49
                   47               DEQ[1]                   N4        Bidir              49
                   48               DEQ[2]                   N5        Bidir              49
                   49                                                 Control
                   50               DEQ[3]                   P1        Bidir              49
                   51            RXEQCTL[0]                  P3        Bidir              49
                   52            RXEQCTL[1]                  P4        Bidir              49
                   53           TXTERMADJ[0]                 R1        Bidir              49
                   54           TXTERMADJ[1]                 T2        Bidir              49
                   55           RXTERMADJ[0]                 R2        Bidir              49
                   56           RXTERMADJ[1]                 T3        Bidir              49
                   57                 NC                     R3        Bidir              49
                   58              SMBCLK                    T4        Bidir              49
                   59             SMBDATA                    T5        Bidir              49
                   60      PWR_IND[1]/SLOT_IMP[4]            T6        Bidir              63
                   61      PWR_IND[2]/HOTPLUG[4]             R6        Bidir              63
                   62       PWR_IND[3]/SLOTCLK[4]            P6        Bidir              63
                   63                                                 Control
                   64            PWR_IND[4]                  T7        Bidir              63
                   65             ATT_IND[1]                 R7       Output2
                   66             ATT_IND[2]                 P7        Bidir              63
                   67             ATT_IND[3]                 N7        Bidir              63
                   68             ATT_IND[4]                 L7        Bidir              63
                   69            ATT_BTN[1]                  R8        Input
                   70            ATT_BTN[2]                  P8        Input
                   71            ATT_BTN[3]                 M8         Input
                   72            ATT_BTN[4]                  L8        Input
                   73            MRL_PDC[1]                  R9        Input
                   74            MRL_PDC[2]                  P9        Input
                   75            MRL_PDC[3]                  N9        Input
                   76            MRL_PDC[4]                  L9        Input
                   77            PWR_ENA[1]                 T10       Output2
                   78            PWR_ENA[2]                 R10       Output2
                   79            PWR_ENA[3]                 N10       Output2
                   80            PWR_ENA[4]                 M10       Output2
                   81            PWR_FLT[1]                 R11        Input
                   82            PWR_FLT[2]                 P11        Input
                   83            PWR_FLT[3]                 N11        Input
                   84            PWR_FLT[4]                 M11        Input
                   85            PORTERR[0]]                P12       Output2
                   86            PORTERR[1]                 N12       Output2
                   87            PORTERR[2]                 M12       Output2
                   88            PORTERR[3]                 P13       Output2
                   89            PORTERR[4]                 N13       Output2
                   90               EECLK                   R14       Output2
                   91                EEPD                   P14        Bidir              92
                   92                                                 Control
                                                  Page 74 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                PI7C9X20505GP
                                                                           5Port-5Lane PCI Express® Switch
                                                                                        GreenPacketTM Family
                                                                                                       Datasheet
  11 POWER MANAGEMENT
  The PI7C9X20505GP supports D0, D1, D2, D3-hot, and D3-cold Power States. The PCI Express Physical Link
  Layer of the PI7C9X20505GP device supports the PCI Express Link Power Management with L0, L0s, L1, L2/L3
  ready and L3 Power States.
  During the transition from D3-hot to D3-cold state, the main power supplies of VDDC and VDDR are turned off to
  save power while keeping the VDDCAUX and VAUX with the auxiliary power supplies to maintain all necessary
  information to be restored to the full power D0 state. PI7C9X20505GP has been designed to have sticky registers
  that are powered by auxiliary power supplies. PI7C9X20505GP forwards power management messages to the
  upstream Switches or root complex.
  PI7C9X20505GP also supports ASPM (Active State Power Management) to facilitate the link power saving.
                                                      Page 75 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                  PI7C9X20505GP
                                                                                       5Port-5Lane PCI Express® Switch
                                                                                                         GreenPacketTM Family
                                                                                                                         Datasheet
  12 ELECTRICAL AND TIMING SPECIFICATIONS
  12.1 ABSOLUTE MAXIMUM RATINGS
            Table 12-1 Absolute maximum ratings
          (Above which the useful life may be impaired. For user guidelines, not tested.)
           Storage Temperature                                                                    -65oC to 150oC
            Ambient Temperature with power applied                                                 -40oC to 85oC
            PCI Express supply voltage to ground potential (VDDA, VDDC, and                         -0.3v to 3.0v
            VDDCAUX)
            DC input voltage for PCI Express signals                                                -0.3v to 3.0v
          Note:
          Stresses greater than those listed under MAXIMUM RATINGS may cause permanent damage to the device. This is a
          stress rating only and functional operation of the device at these or any conditions above those indicated in the
          operational sections of this specification is not implied. Exposure to absolute maximum rating conditions for extended
          periods of time may affect reliability.
  12.2 DC SPECIFICATIONS
            Table 12-2 DC electrical characteristics
            Power Pins                Min.                     Typ.                   Max.
            VDDA                      0.9v                     1.0v                   1.1v
            VDDR                      3.0v                     3.3v                   3.6v
            VDDC                      0.9v                     1.0v                   1.1v
            VAUX                      3.0v                     3.3v                   3.6v
            VDDCAUX                   0.9v                     1.0v                   1.1v
            VTT                       VDDC                     1.5v                   1.8v
          VDDA: analog power supply for PCI Express Interface
          VDDR: digital power supply for 3.3v I/O Interface
          VDDC: digital power supply for the core
          VAUX: digital auxiliary power supply for 3.3v I/O Interface
          VDDCAUX: auxiliary power supply for the core
          VTT: termination power supply for PCI Express Interface
          In order to support auxiliary power management fully, it is recommended to have VDDC and VDDCAUX
          separated.
          The typical power consumption of PI7C9X20505GP is about 1.0 watt.
                                                              Page 76 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                                PI7C9X20505GP
                                                                                         5Port-5Lane PCI Express® Switch
                                                                                                         GreenPacketTM Family
                                                                                                                       Datasheet
  12.3 AC SPECIFICATIONS
            Table 12-3 Transmitter Characteristics
            Symbol               Description                                  Min          Typical        Max.    Unit
            Voltage Parameters
            VTX-DIFFa            Output voltage compliance @ typical swing
                                 VTX-DIFFp (peak-to-peak, single ended)       400            500           600    mV
                                 VTX-DIFFpp (peak-to-peak, differential)      800            1000         1200    mV
            VSW                  Supported TX output voltage range (pp,       400b                        1500c   mV
                                 differential)
            VOL                  Low-level output voltage                           VTT - 1.5 *VTX-DIFFp           V
            VOH                  High-level output voltage                           VTT - 0.5VTX-DIFFp            V
            VTX-CM-AC            Transmit common-mode voltage in L0           0.50     VTT - VTX-DIFFp     1.45    V
            VTX-CM-HiZ           Transmit common-mode voltage in L0s                      VTX-CM-AC                V
                                 (TX) & L1
            VTX-DE-RATIO         De-emphasized differential output              0                         -7.96    dB
                                 voltage
            VTX-IDLE-DIFFp       Electric Idle differential peak voltage                                    20    mV
            VTX-RCV-DETECT       Voltage change during Receive                            VTX-DIFFp               mV
                                 Detection
            RLTX-DIFF            Transmitter Differential Return loss          10                                  dB
            RLTX-CM              Transmitter Common Mode Return loss            6                                  dB
            ZOSE                 Single-ended output impedance                 40             50            60     Ω
            ZTX-DIFF-DC          DC Differential TX Impedance                  80            100           120     Ω
            TTX-RISE, TTX-FALL   Rise / Fall time of TxP, TxN outputs          80                          110d    ps
            Jitter Parameters
            UI                   Unit Interval                               399.88          400         400.12    ps
            TTX-MAX-JITTER       Transmitter total jitter (peak-to-peak)                                  0.25e    UI
            TTX-EYE              Minimum TX Eye Width (1 -                    0.75                                 UI
                                 TTX-MAX-JITTER)
            TTX-EYE-MEDIAN-to-   Maximum time between the jitter                                          0.125    UI
            MAX-JITTER           median and
                                 maximum deviation from the median
            Timing Parameters
            LTLAT-10             Transmitter data latency (for n=10)            9                           11     UI
            LTLAT-20             Transmitter data latency (for n=20)            9                           11     UI
            LTX-SKEW             Transmitter data skew between any 2            0                          2+      UI
                                 lanes                                                                    200ps
            TTX-IDLE-SET-TO-IDLE Maximum time to transition to a valid                        4              6     ns
                                 electrical idle after sending an Electrical
                                 Idle ordered set
            TEIExit              Time to exit Electrical Idle (L0s) state                     12            16     ns
                                 into L0
            TRxDetectEn          Pulse width of RxDetectEn input               9.8            10           10.2    us
            TRxDetect            RxDetectEn falling edge to RxDetect                          1              2     ns
                                 delay
          a. Measured with Vtt = 1.2V, HiDrv=’0’,LowDrv=’0’ and Dtx=’0000’.
          b. Minimum swing assumes LoDrv = 1, HiDrv = 0 and Dtx =1100
          c. Max swing assumes LoDrv = 0, HiDrv = 1, Dtx = 0010, VTT = 1.8V
          d. As measured between 20% and 80% points. Will depend on package characteristics.
          e. Measured using PCI Express Compliance Pattern
                                                                   Page 77 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                                           PI7C9X20505GP
                                                                                        5Port-5Lane PCI Express® Switch
                                                                                                    GreenPacketTM Family
                                                                                                                  Datasheet
            Table 12-4 Receiver Characteristics
            Symbol                        Description                              Min    Typical    Max.    Unit
            Voltage Parameters
            VRX-DIFFp-p                   Differential input voltage               170               1200     mV
                                          (peak-to-peak)
            VRX-IDLE-DET-DIFFp-p          Differential input threshold voltage      65                175     mV
                                          (peak-to-peak) to assert
                                          TxIdleDetect output
            VRX-CM-AC                     Receiver common-mode voltage for                  0         150     mV
                                          AC-coupling
            TRX-RISE, TRX-FALL            Rise time / Fall time of RxP, RxN                           160     Ps
                                          inputs
            ZRX-DIFF-DC                   Differential input impedance (DC)         80     100        120      Ω
            ZRX-COM-DC                    Single-ended input impedance              40      50         60      Ω
            ZRX-COM-INITIAL-DC            Initial input common mode                  5      50         60      Ω
                                          impedance (DC)
            ZRX-COM-HIGH-IMP-DC           Powered down input common mode           200k                        Ω
                                          impedance (DC)
            RLRX-DIFF                     Receiver Differential Return Lossa        10                        dB
            RLRX-CM                       Receiver Common Mode Return                6                        dB
                                          Lossb
            Jitter Parameters
            TRX-MAX-JITTER                Receiver total jitter tolerance                             0.65    UI
            TRX-EYE                       Minimum Receiver Eye Width               0.35                       UI
            TRX-EYE-MEDIAN-to-MAX-JITTER  Maximum time between jitter                                0.325    UI
                                          median and max deviation from
                                          median
            Timing Parameters
           LRLAT-10                      Receiver data latency for n=10             28                29     bits
           LRLAT-20                      Receiver data latency for n=20             49                60     bits
           TRX-SKEW                      Receiver data skew between any 2           0                  1c    bits
                                         lanes
           TRX-IDLE_ENTER                Delay from detection of Electrical                10         20      ns
                                         Idle condition on the channel to
                                         assertion of TxIdleDetect output
           TRX-IDLE_EXIT                 Delay from detection of L0s to L0                  5         10      ns
                                         transition to deassertion of
                                         TxIdleDetect output
          a. Over a frequency range of 50 MHz to 1.25 GHz.
          b. Over a frequency range of 50 MHz to 1.25 GHz.
          c. Assuming synchronized bit streams at the respective receiver inputs.
                                                                     Page 78 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                             PI7C9X20505GP
                                                                          5Port-5Lane PCI Express® Switch
                                                                                        GreenPacketTM Family
                                                                                                  Datasheet
  13 PACKAGE INFORMATION
  The package of PI7C9X20505GP is a 17mm x 17mm PBGA (256 Pin) package. The ball pitch is 1.0mm and the
  ball size is 0.5mm. The following are the package information and mechanical dimension:
            Figure 13-1 Bottom view drawing
                                                     Page 79 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                               PI7C9X20505GP
                                                              5Port-5Lane PCI Express® Switch
                                                                          GreenPacketTM Family
                                                                                    Datasheet
            Figure 13-2 Package outline drawing
                                                Page 80 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


                                                                                       PI7C9X20505GP
                                                                     5Port-5Lane PCI Express® Switch
                                                                                 GreenPacketTM Family
                                                                                             Datasheet
  14 ORDERING INFORMATION
         Part Number            Temperature Range             Package          Pb-Free & Green
         PI7C9X20505GP□NDEX     -40o to 85oC                  256-pin PBGA     Yes
                                (Industrial Temperature)      17mm x 17mm
         PI 7C 9X20505GP         ND E X
                                                     Blank=Tray
                                                 X=Tape & Reel
                                                 Blank=Standard
                                             E=Pb-Free and Green
                                                   Package Code
                                                 Blank=Standard
                                                       =Revision
                                                    Device Type
                                                  Device Number
                                                          Family
                                                     PI=Pericom
                                               Page 81 of 81
  September 2009 – Revision 1.6
  Pericom Semiconductor
13-0017


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Diodes Incorporated:
 PI7C9X20505GPBNDE PI7C9X20505GPBNDE-2017
