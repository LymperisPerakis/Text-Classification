                                               16-Lane 4-Port                                                                 89HPES16T4AG2
                                               Gen2 PCI Express® Switch                                                                     Data Sheet
                                         ®
Device Overview                                                                         
                                                                                           Flexible Architecture with Numerous Configuration Options
     The 89HPES16T4AG2 is a member of IDT’s PRECISE™ family of                           – Automatic per port link width negotiation to x8, x4, x2 or x1
PCI Express® switching solutions. The PES16T4AG2 is a 16-lane, 4-                        – Automatic lane reversal on all ports
port Gen2 peripheral chip that performs PCI Express Base switching                       – Automatic polarity inversion
with a feature set optimized for high performance applications such as                   – Ability to load device configuration from serial EEPROM
servers, storage, and communications/networking. It provides connec-                    
                                                                                           Legacy Support
tivity and switching functions between a PCI Express upstream port and                   – PCI compatible INTx emulation
up to three downstream ports and supports switching between down-
                                                                                         – Bus locking
stream ports.                                                                           
                                                                                           Highly Integrated Solution
Features                                                                                 – Incorporates on-chip internal memory for packet buffering and
        High Performance PCI Express Switch                                                  queueing
        – Sixteen 5 Gbps Gen2 PCI Express lanes                                          – Integrates sixteen 5 Gbps embedded SerDes with 8b/10b
        – Four switch ports                                                                   encoder/decoder (no separate transceivers needed)
           • One x8 or x4 upstream port                                                      • Receive equalization (RxEQ)
           • Up to three x4 downstream ports
                                                                                        
                                                                                           Reliability, Availability, and Serviceability (RAS) Features
        – Low latency cut-through switch architecture                                    – Internal end-to-end parity protection on all TLPs ensures data
        – Support for Max Payload Size up to 2048 bytes                                       integrity even in systems that do not implement end-to-end
                                                                                              CRC (ECRC)
        – One virtual channel
                                                                                         – Supports ECRC and Advanced Error Reporting
        – Eight traffic classes
                                                                                         – All internal data and control RAMs are SECDED ECC
        – PCI Express Base Specification Revision 2.0 compliant                               protected
                                                                                         – Supports PCI Express Native Hot-Plug, Hot-Swap capable I/O
                                                                                         – Compatible with Hot-Plug I/O expanders used on PC mother-
                                                                                              boards
                                                                                         – Supports Hot-Swap
Block Diagram
                                                     4-Port Switch Core / 16 PCI Express Lanes
                                                                                            Port
                                 Frame Buffer                Route Table                 Arbitration                  Scheduler
               Transaction Layer                    Transaction Layer                     Transaction Layer                     Transaction Layer
                Data Link Layer                      Data Link Layer                       Data Link Layer                       Data Link Layer
           Multiplexer / Demultiplexer          Multiplexer / Demultiplexer           Multiplexer / Demultiplexer          Multiplexer / Demultiplexer
                      Phy                                  Phy                                    Phy                                   Phy
                    Logical                              Logical                                Logical                               Logical
                     Layer                                Layer                                  Layer                                 Layer
                    SerDes                               SerDes                                 SerDes                               SerDes
                   (Port 0)                             (Port 1)                               (Port 2)                              (Port 3)
                                                                Figure 1 Internal Block Diagram
                                     IDT and the IDT logo are registered trademarks of Integrated Device Technology, Inc.
                                                                           1 of 32                                                             June 2, 2015
                                                                                                                                                       DSC 6928


   IDT 89HPES16T4AG2 Data Sheet
      
          Power Management
         – Utilizes advanced low-power design techniques to achieve low
             typical power consumption                                                                      Processor        Processor
         – Support PCI Express Power Management Interface specifica-
             tion (PCI-PM 2.0)
         – Unused SerDes are disabled.                                                                                                      Memory
                                                                                                                         North             Memory
                                                                                                                                          Memory
         – Supports Advanced Configuration and Power Interface Spec-                                                    Bridge           Memory
             ification, Revision 2.0 (ACPI) supporting active link state
      
          Testability and Debug Features                                                                     x8/x4
         – Built in Pseudo-Random Bit Stream (PRBS) generator
                                                                                                            PES16T4AG2
         – Numerous SerDes test modes
         – Ability to read and write any internal register via the SMBus
                                                                                                             x4       x4           x4
         – Ability to bypass link training and force any link into any mode
         – Provides statistics and performance counters
                                                                                                                    I/O         I/O     I/O        I/O
      
          Seven General Purpose Input/Output Pins                                                  PCI Express
                                                                                                                  10GbE       10GbE    SATA       SATA
                                                                                                       Slot
         – Each pin may be individually configured as an input or output
         – Each pin may be individually configured as an interrupt input                              Figure 2 I/O Expansion Application
         – Some pins have selectable alternate functions
      Packaged in a 19mm x 19mm, 324-ball Flip Chip BGA with                    SMBus Interface
         1mm ball spacing                                                            The PES16T4AG2 contains two SMBus interfaces. The slave inter-
                                                                                 face provides full access to the configuration registers in the
Product Description
                                                                                 PES16T4AG2, allowing every configuration register in the device to be
     Utilizing standard PCI Express interconnect, the PES16T4AG2                 read or written by an external agent. The master interface allows the
provides the most efficient fan-out solution for applications requiring high     default configuration register values of the PES16T4AG2 to be over-
throughput, low latency, and simple board layout with a minimum                  ridden following a reset with values programmed in an external serial
number of board layers. It provides 16 GBps (128 Gbps) of aggregated,            EEPROM. The master interface is also used by an external Hot-Plug I/O
full-duplex switching capacity through 16 integrated serial lanes, using         expander.
proven and robust IDT technology. Each lane provides 5 Gbps of band-
                                                                                     Two pins make up each of the two SMBus interfaces. These pins
width in both directions and is fully compliant with PCI Express Base
                                                                                 consist of an SMBus clock pin and an SMBus data pin. The Master
Specification, Revision 2.0.
                                                                                 SMBus address is hardwired to 0x50, and the slave SMBus address is
     The PES16T4AG2 is based on a flexible and efficient layered archi-          hardwired to 0x77.
tecture. The PCI Express layer consists of SerDes, Physical, Data Link
                                                                                     As shown in Figure 3, the master and slave SMBuses may be used
and Transaction layers in compliance with PCI Express Base specifica-
                                                                                 in a unified or split configuration. In the unified configuration, shown in
tion Revision 2.0. The PES16T4AG2 can operate either as a store and
                                                                                 Figure 3(a), the master and slave SMBuses are tied together and the
forward or cut-through switch and is designed to switch memory and I/O
                                                                                 PES16T4AG2 acts both as a SMBus master as well as a SMBus slave
transactions. It supports eight Traffic Classes (TCs) and one Virtual
                                                                                 on this bus. This requires that the SMBus master or processor that has
Channel (VC) with sophisticated resource management to enable effi-
                                                                                 access to PES16T4AG2 registers supports SMBus arbitration. In some
cient switching and I/O connectivity for servers, storage, and embedded
                                                                                 systems, this SMBus master interface may be implemented using
processors with limited connectivity.
                                                                                 general purpose I/O pins on a processor or micro controller, and may
                                                                                 not support SMBus arbitration. To support these systems, the
                                                                                 PES16T4AG2 may be configured to operate in a split configuration as
                                                                                 shown in Figure 3(b).
                                                                                     In the split configuration, the master and slave SMBuses operate as
                                                                                 two independent buses and thus multi-master arbitration is never
                                                                                 required. The PES16T4AG2 supports reading and writing of the serial
                                                                                 EEPROM on the master SMBus via the slave SMBus, allowing in
                                                                                 system programming of the serial EEPROM.
                                                                          2 of 32                                                                 June 2, 2015


   IDT 89HPES16T4AG2 Data Sheet
                                        Processor                 Other                                        Processor        Other
                    PES16T4AG2
                                          SMBus
                                                     Serial
                                                   EEPROM
                                                             ... SMBus
                                                                                          PES16T4AG2
                                                                                                                SMBus      ... SMBus
                                          Master                 Devices                                         Master        Devices
                             SSMBCLK                                                               SSMBCLK
                             SSMBDAT                                                               SSMBDAT
                             MSMBCLK                                                               MSMBCLK             Serial
                             MSMBDAT                                                               MSMBDAT           EEPROM
                     (a) Unified Configuration and Management Bus                      (b) Split Configuration and Management Buses
                                                    Figure 3 SMBus Interface Configuration Examples
Hot-Plug Interface
    The PES16T4AG2 supports PCI Express Hot-Plug on each downstream port. To reduce the number of pins required on the device, the
PES16T4AG2 utilizes an external I/O expander, such as that used on PC motherboards, connected to the SMBus master interface. Following reset
and configuration, whenever the state of a Hot-Plug output needs to be modified, the PES16T4AG2 generates an SMBus transaction to the I/O
expander with the new value of all of the outputs. Whenever a Hot-Plug input changes, the I/O expander generates an interrupt which is received on
the IOEXPINTN input pin (alternate function of GPIO) of the PES16T4AG2. In response to an I/O expander interrupt, the PES16T4AG2 generates an
SMBus transaction to read the state of all of the Hot-Plug inputs from the I/O expander.
General Purpose Input/Output
    The PES16T4AG2 provides 7 General Purpose Input/Output (GPIO) pins that may be used by the system designer as bit I/O ports. Each GPIO pin
may be configured independently as an input or output through software control. Some GPIO pins are shared with other on-chip functions. These
alternate functions may be enabled via software, SMBus slave interface, or serial configuration EEPROM.
                                                                         3 of 32                                                       June 2, 2015


   IDT 89HPES16T4AG2 Data Sheet
Pin Description
    The following tables list the functions of the pins provided on the PES16T4AG2. Some of the functions listed may be multiplexed onto the same
pin. The active polarity of a signal is defined using a suffix. Signals ending with an “N” are defined as being active, or asserted, when at a logic zero
(low) level. All other signals (including clocks, buses, and select lines) will be interpreted as being active, or asserted, when at a logic one (high) level.
                                  Signal          Type                                Name/Description
                                 PE0RP[3:0]           I    PCI Express Port 0 Serial Data Receive. Differential PCI Express receive
                                 PE0RN[3:0]                pairs for port 0. Port 0 is the upstream port.
                                 PE0TP[3:0]          O     PCI Express Port 0 Serial Data Transmit. Differential PCI Express trans-
                                 PE0TN[3:0]                mit pairs for port 0. Port 0 is the upstream port.
                                 PE1RP[3:0]           I    PCI Express Port 1 Serial Data Receive. Differential PCI Express receive
                                 PE1RN[3:0]                pairs for port 1.
                                 PE1TP[3:0]          O     PCI Express Port 1 Serial Data Transmit. Differential PCI Express trans-
                                 PE1TN[3:0]                mit pairs for port 1.
                                 PE2RP[3:0]           I    PCI Express Port 2 Serial Data Receive. Differential PCI Express receive
                                 PE2RN[3:0]                pairs for port 2.
                                 PE2TP[3:0]          O     PCI Express Port 2 Serial Data Transmit. Differential PCI Express trans-
                                 PE2TN[3:0]                mit pairs for port 2.
                                 PE3RP[3:0]           I    PCI Express Port 3 Serial Data Receive. Differential PCI Express receive
                                 PE3RN[3:0]                pairs for port 3.
                                 PE3TP[3:0]          O     PCI Express Port 3 Serial Data Transmit. Differential PCI Express trans-
                                 PE3TN[3:0]                mit pairs for port 3.
                                PEREFCLKP             I    PCI Express Reference Clock. Differential reference clock pair input. This
                                PEREFCLKN                  clock is used as the reference clock by on-chip PLLs to generate the clocks
                                                           required for the system logic and on-chip SerDes. The frequency of the dif-
                                                           ferential reference clock is set at 100 MHz.
                                                             Table 1 PCI Express Interface Pins
                                  Signal          Type                                Name/Description
                                 MSMBCLK            I/O    Master SMBus Clock. This bidirectional signal is used to synchronize
                                                           transfers on the master SMBus which operates at 400 KHz.
                                 MSMBDAT            I/O    Master SMBus Data. This bidirectional signal is used for data on the mas-
                                                           ter SMBus which operates at 400 KHz.
                                  SSMBCLK           I/O    Slave SMBus Clock. This bidirectional signal is used to synchronize trans-
                                                           fers on the slave SMBus.
                                 SSMBDAT            I/O    Slave SMBus Data. This bidirectional signal is used for data on the slave
                                                           SMBus.
                                                                Table 2 SMBus Interface Pins
                                                                             4 of 32                                                        June 2, 2015


IDT 89HPES16T4AG2 Data Sheet
                   Signal    Type                          Name/Description
                   GPIO[0]    I/O General Purpose I/O.
                                  This pin can be configured as a general purpose I/O pin.
                                  Alternate function pin name: P2RSTN
                                  Alternate function pin type: Output
                                  Alternate function: Reset output for downstream port 2.
                   GPIO[1]    I/O General Purpose I/O.
                                  This pin can be configured as a general purpose I/O pin.
                   GPIO[2]    I/O General Purpose I/O.
                                  This pin can be configured as a general purpose I/O pin.
                                  Alternate function pin name: IOEXPINTN0
                                  Alternate function pin type: Input
                                  Alternate function: I/O expander interrupt 0 input.
                   GPIO[7]    I/O General Purpose I/O.
                                  This pin can be configured as a general purpose I/O pin.
                                  Alternate function pin name: GPEN
                                  Alternate function pin type: Output
                                  Alternate function: General Purpose Event (GPE) output
                   GPIO[8]    I/O General Purpose I/O.
                                  This pin can be configured as a general purpose I/O pin.
                                  Alternate function pin name: P1RSTN
                                  Alternate function pin type: Output
                                  Alternate function: Reset output for downstream port 1
                   GPIO[9]    I/O General Purpose I/O.
                                  This pin can be configured as a general purpose I/O pin.
                                  Alternate function pin name: P3RSTN
                                  Alternate function pin type: Output
                                  Alternate function: Reset output for downstream port 3
                   GPIO[10]   I/O General Purpose I/O.
                                  This pin can be configured as a general purpose I/O pin.
                                    Table 3 General Purpose I/O Pins
                                                  5 of 32                                  June 2, 2015


IDT 89HPES16T4AG2 Data Sheet
                   Signal    Type                             Name/Description
                   CCLKDS      I  Common Clock Downstream. The assertion of this pin indicates that all
                                  downstream ports are using the same clock source as that provided to
                                  downstream devices.This bit is used as the initial value of the Slot Clock
                                  Configuration bit in all of the Link Status Registers for downstream ports.
                                  The value may be overridden by modifying the SCLK bit in each down-
                                  stream port’s PCIELSTS register.
                   CCLKUS      I  Common Clock Upstream. The assertion of this pin indicates that the
                                  upstream port is using the same clock source as the upstream device. This
                                  bit is used as the initial value of the Slot Clock Configuration bit in the Link
                                  Status Register for the upstream port. The value may be overridden by
                                  modifying the SCLK bit in the P0_PCIELSTS register.
                 P01MERGEN     I  Port 0 and 1 Merge. P01MERGEN is an active low signal. It is pulled high
                                  internally via a 92K ohm resistor.
                                  When this pin is low, port 0 is merged with port 1 to form a single x8 port.
                                  The Serdes lanes associated with port 1 become lanes 4 through 7 of port
                                  0. When this pin is high, port 0 and port 1 are not merged, and each oper-
                                  ates as a single x4 port.
                 P23MERGEN     I  Port 2 and 3 Merge. P23MERGEN is an active low signal. It is pulled high
                                  internally via a 92K ohm resistor.
                                  When this pin is low, port 2 is merged with port 3 to form a single x8 port.
                                  The Serdes lanes associated with port 3 become lanes 4 through 7 of port
                                  2. When this pin is high, port 2 and port 3 are not merged, and each oper-
                                  ates as a single x4 port.
                   PERSTN      I  Fundamental Reset. Assertion of this signal resets all logic inside
                                  PES16T4AG2 and initiates a PCI Express fundamental reset.
                SWMODE[2:0]    I  Switch Mode. These configuration pins determine the PES16T4AG2
                                  switch operating mode.
                                  0x0 - Normal switch mode
                                  0x1 - Normal switch mode with Serial EEPROM initialization
                                  0x2 - through 0x7 Reserved
                                  These pins should be static and not change following the negation of
                                  PERSTN.
                                            Table 4 System Pins
                   Signal    Type                             Name/Description
                  JTAG_TCK     I  JTAG Clock. This is an input test clock used to clock the shifting of data
                                  into or out of the boundary scan logic or JTAG Controller. JTAG_TCK is
                                  independent of the system clock with a nominal 50% duty cycle.
                  JTAG_TDI     I  JTAG Data Input. This is the serial data input to the boundary scan logic or
                                  JTAG Controller.
                                        Table 5 Test Pins (Part 1 of 2)
                                                   6 of 32                                                         June 2, 2015


IDT 89HPES16T4AG2 Data Sheet
                   Signal    Type                                  Name/Description
                  JTAG_TDO     O       JTAG Data Output. This is the serial data shifted out from the boundary
                                       scan logic or JTAG Controller. When no data is being shifted out, this signal
                                       is tri-stated.
                  JTAG_TMS      I      JTAG Mode. The value on this signal controls the test mode select of the
                                       boundary scan logic or JTAG Controller.
                JTAG_TRST_N     I      JTAG Reset. This active low signal asynchronously resets the boundary
                                       scan logic and JTAG TAP Controller. An external pull-up on the board is
                                       recommended to meet the JTAG specification in cases where the tester
                                       can access this signal. However, for systems running in functional mode,
                                       one of the following should occur:
                                            1) actively drive this signal low with control logic
                                            2) statically drive this signal low with an external pull-down on the board
                                              Table 5 Test Pins (Part 2 of 2)
                   Signal    Type                                  Name/Description
                   REFRES0    I/O      Port 0 External Reference Resistor. Provides a reference for the Port 0
                                       SerDes bias currents and PLL calibration circuitry. A 3 kOhm +/- 1% resis-
                                       tor should be connected from this pin to ground.
                   REFRES1    I/O      Port 1 External Reference Resistor. Provides a reference for the Port 1
                                       SerDes bias currents and PLL calibration circuitry. A 3 kOhm +/- 1% resis-
                                       tor should be connected from this pin to ground.
                   REFRES2    I/O      Port 2 External Reference Resistor. Provides a reference for the Port 2
                                       SerDes bias currents and PLL calibration circuitry. A 3 kOhm +/- 1% resis-
                                       tor should be connected from this pin to ground.
                   REFRES3    I/O      Port 3 External Reference Resistor. Provides a reference for the Port 3
                                       SerDes bias currents and PLL calibration circuitry. A 3 kOhm +/- 1% resis-
                                       tor should be connected from this pin to ground.
                   VDDCORE      I      Core VDD. Power supply for core logic.
                    VDDI/O      I      I/O VDD. LVTTL I/O buffer power supply.
                    VDDPEA      I      PCI Express Analog Power. Serdes analog power supply (1.0V).
                   VDDPEHA      I      PCI Express Analog High Power. Serdes analog power supply (2.5V).
                   VDDPETA      I      PCI Express Transmitter Analog Voltage. Serdes transmitter analog
                                       power supply (1.0V).
                      VSS       I      Ground.
                                  Table 6 Power, Ground, and SerDes Resistor Pins
                                                          7 of 32                                                       June 2, 2015


 IDT 89HPES16T4AG2 Data Sheet
Pin Characteristics
      Note: Some input pads of the PES16T4AG2 do not contain internal pull-ups or pull-downs. Unused inputs should be tied off to appropriate
      levels. This is especially critical for unused control signal inputs which, if left floating, could adversely affect operation. Also, any input pin left
      floating can cause a slight increase in power consumption.
                                                                                             I/O       Internal
                     Function               Pin Name          Type       Buffer                                             Notes
                                                                                          Type        Resistor1
                PCI Express Inter-      PE0RN[3:0]                I         PCIe        Serial Link
                face                    PE0RP[3:0]                I     differential2
                                        PE0TN[3:0]               O
                                        PE0TP[3:0]               O
                                        PE1RN[3:0]                I
                                        PE1RP[3:0]                I
                                        PE1TN[3:0]               O
                                        PE1TP[3:0]               O
                                        PE2RN[3:0]                I
                                        PE2RP[3:0]                I
                                        PE2TN[3:0]               O
                                        PE2TP[3:0]               O
                                        PE3RN[3:0]                I
                                        PE3RP[3:0]                I
                                        PE3TN[3:0]               O
                                        PE3TP[3:0]               O
                                        PEREFCLKN                 I        HCSL         Diff. Clock                     Refer to Table 8
                                        PEREFCLKP                 I                         Input
                SMBus                   MSMBCLK                 I/O                         STI3                        pull-up on board
                                        MSMBDAT                 I/O                          STI                        pull-up on board
                                        SSMBCLK                 I/O                          STI                        pull-up on board
                                        SSMBDAT                 I/O                          STI                        pull-up on board
                General Purpose I/O     GPIO[10:7, 2:0]         I/O        LVTTL             STI,         pull-up
                                                                                        High Drive
                System Pins             CCLKDS                    I        LVTTL            Input         pull-up
                                        CCLKUS                    I                         Input         pull-up
                                        P01MERGEN                 I                                       pull-up
                                        P23MERGEN                 I                                       pull-up
                                        PERSTN                    I                          STI
                                        SWMODE[2:0]               I                         Input        pull-down
                EJTAG / JTAG            JTAG_TCK                  I        LVTTL             STI          pull-up
                                        JTAG_TDI                  I                          STI          pull-up
                                        JTAG_TDO                 O
                                        JTAG_TMS                  I                          STI          pull-up
                                        JTAG_TRST_N               I                          STI          pull-up
                                                        Table 7 Pin Characteristics (Part 1 of 2)
                                                                       8 of 32                                                              June 2, 2015


IDT 89HPES16T4AG2 Data Sheet
                                                                                                  I/O          Internal
                Function                   Pin Name              Type          Buffer                                       Notes
                                                                                                Type          Resistor1
          SerDes Reference              REFRES0                     I/O         Analog           Input
          Resistors                     REFRES1                     I/O
                                        REFRES2                     I/O
                                        REFRES3                     I/O
                                                          Table 7 Pin Characteristics (Part 2 of 2)
           1.
              Internal resistor values under typical operating conditions are 92K Ω for pull-up and 90K Ω for pull-down.
           2. All receiver pins set the DC common mode voltage to ground. All transmitters must be AC coupled to the media.
           3. Schmitt Trigger Input (STI).
                                                                             9 of 32                                              June 2, 2015


 IDT 89HPES16T4AG2 Data Sheet
Logic Diagram — PES16T4AG2
                    Reference    PEREFCLKP
                     Clocks      PEREFCLKN
                                    PE0RP[0]                                       PE0TP[0]
                PCI Express                                                        PE0TN[0]          PCI Express
                                    PE0RN[0]
                   Switch                                                        ...                   Switch
                SerDes Input
                                          ...                                                       SerDes Output
                                    PE0RP[3]                                       PE0TP[3]
                   Port 0                                                          PE0TN[3]             Port 0
                                    PE0RN[3]
                                    PE1RP[0]                                       PE1TP[0]
                PCI Express                                                        PE1TN[0]          PCI Express
                                    PE1RN[0]
                   Switch                                                        ...                   Switch
                SerDes Input
                                          ...                                                       SerDes Output
                                    PE1RP[3]                                       PE1TP[3]
                   Port 1                                                          PE1TN[3]             Port 1
                                    PE1RN[3]
                                    PE2RP[0]                                       PE2TP[0]
                PCI Express                                                        PE2TN[0]          PCI Express
                                    PE2RN[0]
                   Switch                                                        ...                   Switch
                SerDes Input
                                          ...                                                       SerDes Output
                                    PE2RP[3]                                       PE2TP[3]
                   Port 2                                                          PE2TN[3]             Port 2
                                    PE2RN[3]
                                    PE3RP[0]                                       PE3TP[0]
                PCI Express                                                        PE3TN[0]          PCI Express
                                    PE3RN[0]
                   Switch                                                        ...                   Switch
                SerDes Input
                                          ...                                                       SerDes Output
                                    PE3RP[3]                                       PE3TP[3]
                   Port 3                                PES16T4AG2                PE3TN[3]             Port 3
                                    PE3RN[3]
                                                                             7                       General Purpose
                                                                                   GPIO[10:7,2:0]
                  Master                                                                                   I/O
                                   MSMBCLK
               SMBus Interface
                                   MSMBDAT
                                                                                   JTAG_TCK
                                                                                   JTAG_TDI
                                                                                   JTAG_TDO           JTAG Pins
                   Slave                                                           JTAG_TMS
                                   SSMBCLK
               SMBus Interface                                                     JTAG_TRST_N
                                   SSMBDAT
                                                                                   REFRES0           SerDes
                                                                                   REFRES1
                                                                                                    Reference
                                     CCLKDS                                        REFRES2          Resistors
                                     CCLKUS                                        REFRES3
                                  P01MERGEN
                   System
                                  P23MERGEN
                    Pins
                                     PERSTN
                                                  3
                                 SWMODE[2:0]                                       VDDCORE
                                                                                   VDDI/O
                                                                                   VDDPEA
                                                                                   VDDPEHA          Power/Ground
                                                                                   VSS
                                                                                   VDDPETA
                                               Figure 4 PES16T4AG2 Logic Diagram
                                                          10 of 32                                                     June 2, 2015


 IDT 89HPES16T4AG2 Data Sheet
System Clock Parameters
  Values based on systems running at recommended supply voltages and operating temperatures, as shown in Tables 12 and 14.
      Parameter                            Description                       Condition              Min          Typical      Max           Unit
  RefclkFREQ                Input reference clock frequency range                                    100                       1001         MHz
  TC-RISE                   Rising edge rate                                  Differential           0.6                         4          V/ns
  TC-FALL                   Falling edge rate                                 Differential           0.6                         4          V/ns
  VIH                       Differential input high voltage                   Differential          +150                                     mV
  VIL                       Differential input low voltage                    Differential                                     -150          mV
  VCROSS                    Absolute single-ended crossing point             Single-ended           +250                       +550          mV
                            voltage
  VCROSS-DELTA              Variation of VCROSS over all rising clock        Single-ended                                      +140          mV
                            edges
  VRB                       Ring back voltage margin                          Differential          -100                       +100          mV
  TSTABLE                   Time before VRB is allowed                        Differential           500                                     ps
  TPERIOD-AVG               Average clock period accuracy                                           -300                       2800         ppm
  TPERIOD-ABS               Absolute period, including spread-spec-                                 9.847                     10.203         ns
                            trum and jitter
  TCC-JITTER                Cycle to cycle jitter                                                                               150          ps
  VMAX                      Absolute maximum input voltage                                                                    +1.15           V
  VMIN                      Absolute minimum input voltage                                           -0.3                                     V
  Duty Cycle                Duty cycle                                                                40                        60           %
  Rise/Fall Matching        Single ended rising Refclk edge rate ver-                                               20                       %
                            sus falling Refclk edge rate
  ZC-DC                     Clock source output DC impedance                                          40                        60           Ω
                                                                   Table 8 Input Clock Requirements
   1.
      The input clock frequency is set at 100 MHz.
AC Timing Characteristics
                                                                                               Gen 1                     Gen 2
        Parameter                                  Description                                                                             Units
                                                                                        Min1   Typ1       Max1    Min1   Typ1    Max1
     PCIe Transmit
     UI                       Unit Interval                                             399.88   400      400.12  199.94  200     200.06    ps
     TTX-EYE                  Minimum Tx Eye Width                                       0.75                      0.75                     UI
     TTX-EYE-MEDIAN-to-       Maximum time between the jitter median and maximum                           0.125                            UI
     MAX-JITTER               deviation from the median
     TTX-RISE, TTX-FALL       TX Rise/Fall Time: 20% - 80%                               0.125                     0.15                     UI
     TTX- IDLE-MIN            Minimum time in idle                                         20                       20                      UI
                                                          Table 9 PCIe AC Timing Characteristics (Part 1 of 2)
                                                                              11 of 32                                                   June 2, 2015


IDT 89HPES16T4AG2 Data Sheet
                                                                                                      Gen 1                            Gen 2
     Parameter                                  Description                                                                                           Units
                                                                                           Min1         Typ   1
                                                                                                                  Max   1
                                                                                                                            Min   1
                                                                                                                                        Typ1 Max1
  TTX-IDLE-SET-TO-IDLE Maximum time to transition to a valid Idle after sending                                       8                         8      ns
                          an Idle ordered set
  TTX-IDLE-TO-DIFF-       Maximum time to transition from valid idle to diff data                                    8                          8      ns
  DATA
  TTX-SKEW                Transmitter data skew between any 2 lanes                                                 1.3                        1.3     ns
  TMIN-PULSED             Minimum Instantaneous Lone Pulse Width                                          NA                  0.9                      UI
  TTX-HF-DJ-DD            Transmitter Deterministic Jitter > 1.5MHz Bandwidth                             NA                                  0.15     UI
  TRF-MISMATCH            Rise/Fall Time Differential Mismatch                                            NA                                   0.1     UI
  PCIe Receive
  UI                      Unit Interval                                                    399.88         400     400.12    199.94           200.06    ps
  TRX-EYE (with jitter)   Minimum Receiver Eye Width (jitter tolerance)                       0.4                             0.4                      UI
  TRX-EYE-MEDIUM TO       Max time between jitter median & max deviation                                            0.3                                UI
  MAX JITTER
  TRX-SKEW                Lane to lane input skew                                                                    20                         8      ns
  TRX-HF-RMS              1.5 — 100 MHz RMS jitter (common clock)                                         NA                                   3.4     ps
  TRX-HF-DJ-DD            Maximum tolerable DJ by the receiver (common clock)                             NA                                   88      ps
  TRX-LF-RMS              10 kHz to 1.5 MHz RMS jitter (common clock)                                     NA                                   4.2     ps
  TRX-MIN-PULSE           Minimum receiver instantaneous eye width                                        NA                  0.6                      UI
                                                          Table 9 PCIe AC Timing Characteristics (Part 2 of 2)
   1.
      Minimum, Typical, and Maximum values meet the requirements under PCI Specification 2.0
                                                                                                                            Timing
                                                                           Reference
                                        Signal               Symbol                            Min Max Unit                Diagram
                                                                               Edge
                                                                                                                          Reference
                                 GPIO
                                 GPIO[10:7,2:0]1                Tpw2            None             50        —      ns
                                                               Table 10 GPIO AC Timing Characteristics
                                   1.
                                      GPIO signals must meet the setup and hold times if they are synchronous or the minimum pulse width if
                                   they are asynchronous.
                                   2.
                                      The values for this symbol were determined by calculation, not by testing.
                                                                                12 of 32                                                            June 2, 2015


IDT 89HPES16T4AG2 Data Sheet
                                                                                                                                     Timing
                                                              Reference
                   Signal                 Symbol                                          Min        Max             Unit           Diagram
                                                                   Edge
                                                                                                                                  Reference
           JTAG
           JTAG_TCK                        Tper_16a                 none                  50.0         —                ns         See Figure 5.
                                          Thigh_16a,                                      10.0       25.0               ns
                                           Tlow_16a
           JTAG_TMS1,                      Tsu_16b          JTAG_TCK rising               2.4          —                ns
           JTAG_TDI
                                           Thld_16b                                       1.0          —                ns
           JTAG_TDO                        Tdo_16c          JTAG_TCK falling               —           20               ns
                                                    2
                                           Tdz_16c                                         —           20               ns
           JTAG_TRST_N                    Tpw_16d2                  none                  25.0         —                ns
                                                      Table 11 JTAG AC Timing Characteristics
            1. The
                   JTAG specification, IEEE 1149.1, recommends that JTAG_TMS should be held at 1 while the signal applied at JTAG_TRST_N
            changes from 0 to 1. Otherwise, a race may occur if JTAG_TRST_N is deasserted (going from low to high) on a rising edge of JTAG_TCK
            when JTAG_TMS is low, because the TAP controller might go to either the Run-Test/Idle state or stay in the Test-Logic-Reset state.
            2. The values for this symbol were determined by calculation, not by testing.
                                                                                               Tlow_16a
                                                                                                            Tper_16a
                                                                  Thigh_16a
                           JTAG_TCK
                                                                 Thld_16b
                                                               Tsu_16b
                            JTAG_TDI
                                                                 Thld_16b
                                                               Tsu_16b
                           JTAG_TMS
                                                                                                   Tdo_16c                       Tdz_16c
                           JTAG_TDO
                                                     Tpw_16d
                      JTAG_TRST_N
                                                         Figure 5 JTAG AC Timing Waveform
                                                                         13 of 32                                                                June 2, 2015


   IDT 89HPES16T4AG2 Data Sheet
Recommended Operating Supply Voltages
                   Symbol                       Parameter                        Minimum            Typical        Maximum            Unit
               VDDCORE          Internal logic supply                                 0.9              1.0               1.1             V
               VDDI/O           I/O supply except for SerDes LVPECL/CML             3.135              3.3              3.465            V
               VDDPEA1          PCI Express Analog Power                             0.95              1.0               1.1             V
                        2
               VDDPEHA          PCI Express Analog High Power                        2.25              2.5              2.75             V
                        1
               VDDPETA          PCI Express Transmitter Analog Voltage               0.95              1.0               1.1             V
               VSS              Common ground                                          0                0                 0              V
                                                          Table 12 PES16T4AG2 Operating Voltages
                1.
                   VDDPEA and VDDPETA should have no more than 25mVpeak-peak AC power supply noise superimposed on the 1.0V nominal DC
                value.
                2. V PEHA should have no more than 50mV
                    DD                                        peak-peak AC power supply noise superimposed on the 2.5V nominal DC value.
Absolute Maximum Voltage Rating
                                                                                                 PCIe
                                                    PCIe Analog          PCIe Analog
                               Core Supply                                                   Transmitter        I/O Supply
                                                         Supply           High Supply
                                                                                                Supply
                                      1.5V                 1.5V               4.6V                1.5V               4.6V
                                                 Table 13 PES16T4AG2 Absolute Maximum Voltage Rating
    Warning: For proper and reliable operation in adherence with this data sheet, the device should not exceed the recommended operating voltages
in Table 12. The absolute maximum operating voltages in Table 13 are offered to provide guidelines for voltage excursions outside the recommended
voltage ranges. Device functionality is not guaranteed at these conditions and sustained operation at these values or any exposure to voltages outside
the maximum range may adversely affect device functionality and reliability.
Power-Up/Power-Down Sequence
    During power supply ramp-up, VDDCORE must remain at least 1.0V below VDDI/O at all times. There are no other power-up sequence require-
ments for the various operating supply voltages.
    The power-down sequence can occur in any order.
Recommended Operating Temperature
                                              Grade                                                  Temperature
                                             Commercial                                            0°C to +70°C Ambient
                                              Industrial                                          -40°C to +85°C Ambient
                                                       Table 14 PES16T4AG2 Operating Temperatures
                                                                           14 of 32                                                        June 2, 2015


   IDT 89HPES16T4AG2 Data Sheet
Power Consumption
    Typical power is measured under the following conditions: 25°C Ambient, 35% total link usage on all ports, typical voltages defined in Table 12
(and also listed below).
    Maximum power is measured under the following conditions: 70°C Ambient, 85% total link usage on all ports, maximum voltages defined in
Table 12 (and also listed below).
                                                         PCIe Analog         PCIe Analog        PCIe Termin-
                                   Core Supply                                                                         I/O Supply               Total
                                                             Supply          High Supply         ation Supply
     Number of active
       Lanes per Port
                                   Typ        Max        Typ       Max       Typ       Max      Typ         Max       Typ       Max         Typ      Max
                                  1.0V       1.1V       1.0V       1.1V      2.5V     2.75V     1.0V        1.1V     3.3V     3.465V       Power    Power
         8/4/4             mA       413        905        901       963       110       123      360         429        2          2
                         Watts     0.41        1.0       0.90       1.06      0.28      0.34     0.36       0.47     0.007      0.007       1.96      2.87
        4/4/4/4            mA       413        905        901       963       110       123      180         215        2          2
                         Watts     0.41        1.0       0.90       1.06      0.28      0.34     0.18       0.24      0.01       0.01       1.78      2.64
                                                            Table 15 PES16T4AG2 Power Consumption
Thermal Considerations
    This section describes thermal considerations for the PES16T4AG2 (19mm2 FCBGA324 package). The data in Table 16 below contains informa-
tion that is relevant to the thermal performance of the PES16T4AG2 switch.
              Symbol                             Parameter                           Value          Units                  Conditions
                                              Junction Temperature                     125             oC                     Maximum
                TJ(max)
                TA(max)                       Ambient Temperature                       70             oC                     Maximum
                                                                                                     oC/W                    Zero air flow
                                                                                       16.8
             θJA(effective)    Effective Thermal Resistance, Junction-to-Ambient       10.1          oC/W                   1 m/S air flow
                                                                                        9.2          oC/W                   2 m/S air flow
                 θJB                 Thermal Resistance, Junction-to-Board              4.1          oC/W
                                                                                                     o
                 θJC                  Thermal Resistance, Junction-to-Case             0.3            C/W
                   P                     Power Dissipation of the Device               2.87          Watts                    Maximum
                                        Table 16 Thermal Specifications for PES16T4AG2, 19x19 mm FCBGA324 Package
            Note: It is important for the reliability of this device in any user environment that the junction temperature not exceed the TJ(max) value
            specified in Table 16. Consequently, the effective junction to ambient thermal resistance (θJA) for the worst case scenario must be
            maintained below the value determined by the formula:
                    θJA = (TJ(max) - TA(max))/P
            Given that the values of TJ(max), TA(max), and P are known, the value of desired θJA becomes a known entity to the system designer. How to
            achieve the desired θJA is left up to the board or system designer, but in general, it can be achieved by adding the effects of θJC (value
            provided in Table 16), thermal resistance of the chosen adhesive (θCS), that of the heat sink (θSA), amount of airflow, and properties of the
            circuit board (number of layers and size of the board). As a general guideline, this device will not need a heat sink if the board has 8 or more
            layers AND the board size is larger than 4”x12” AND airflow in excess of 0.5 m/s is available. It is strongly recommended that users perform
            their own thermal analysis for their own board and system design scenarios.
                                                                            15 of 32                                                         June 2, 2015


  IDT 89HPES16T4AG2 Data Sheet
DC Electrical Characteristics
   Values based on systems running at recommended supply voltages, as shown in Table 12.
           Note: See Table 7, Pin Characteristics, for a complete I/O listing.
                                                                                                                                  Condi-
                                                                                Gen1                         Gen2        Unit
 I/O Type       Parameter                 Description                                                                              tions
                                                                     Min1       Typ1      Max1        Min1   Typ1  Max1
Serial Link    PCIe Transmit
               VTX-DIFFp-p       Differential peak-to-peak output      800                  1200       800          1200  mV
                                 voltage
               VTX-DIFFp-p-LOW   Low-Drive Differential Peak to        400                  1200       400          1200  mV
                                 Peak Output Voltage
               VTX-DE-RATIO-     De-emphasized differential output      -3                    -4       -3.0   -3.5  -4.0  dB
               3.5dB             voltage
               VTX-DE-RATIO-     De-emphasized differential output                NA                   -5.5   -6.0  -6.5  dB
               6.0dB             voltage
               VTX-DC-CM         DC Common mode voltage                  0                   3.6         0           3.6   V
               VTX-CM-ACP        RMS AC peak common mode                                      20                          mV
                                 output voltage
               VTX-CM-DC-active- Abs delta of DC common mode                                 100                     100  mV
               idle-delta        voltage between L0 and idle
               VTX-CM-DC-line-   Abs delta of DC common mode                                  25                      25  mV
               delta             voltage between D+ and D-
               VTX-Idle-DiffP    Electrical idle diff peak output                             20                     20   mV
               RLTX-DIFF         Transmitter Differential Return       10                                             10  dB   0.05 - 1.25GHz
                                 loss
                                                                                                                       8  dB   1.25 - 2.5GHz
               RLTX-CM           Transmitter Common Mode                 6                                             6  dB
                                 Return loss
               ZTX-DIFF-DC       DC Differential TX impedance          80         100        120                    120   Ω
               VTX-CM-ACpp       Peak-Peak AC Common                              NA                                100   mV
               VTX-DC-CM         Transmit Driver DC Common               0                   3.6         0           3.6   V
                                 Mode Voltage
               VTX-RCV-DETECT The amount of voltage change                                   600                     600  mV
                                 allowed during Receiver Detec-
                                 tion
               ITX-SHORT         Transmitter Short Circuit Current       0                    90                          90         mA
                                 Limit
                                                        Table 17 DC Electrical Characteristics (Part 1 of 2)
                                                                           16 of 32                                           June 2, 2015


  IDT 89HPES16T4AG2 Data Sheet
                                                                                                                                                 Condi-
                                                                                      Gen1                          Gen2                Unit
 I/O Type        Parameter                  Description                                                                                           tions
                                                                          Min1         Typ1   Max1      Min1        Typ1       Max1
  Serial Link   PCIe Receive
     (cont.)
                VRX-DIFFp-p        Differential input voltage (peak-to-    175                 1200      120                     1200    mV
                                   peak)
                RLRX-DIFF          Receiver Differential Return Loss        10                                                    10     dB   0.05 - 1.25GHz
                                                                                                                                   8           1.25 - 2.5GHz
                RLRX-CM            Receiver Common Mode Return               6                                                     6     dB
                                   Loss
                ZRX-DIFF-DC        Differential input impedance (DC)        80           100    120        Refer to return loss spec     Ω
                ZRX--DC            DC common mode impedance                 40            50     60       40                       60    Ω
                ZRX-COMM-DC        Powered down input common               200k         350k                                      50k    Ω
                                   mode impedance (DC)
                ZRX-HIGH-IMP-DC- DC input CM input impedance for                                50k                               50k    Ω
                POS                V>0 during reset or power down
                ZRX-HIGH-IMP-DC- DC input CM input impedance for                                1.0k                             1.0k    Ω
                NEG                V<0 during reset or power down
                VRX-IDLE-DET-      Electrical idle detect threshold         65                  175       65                     175     mV
                DIFFp-p
                VRX-CM-ACp         Receiver AC common-mode peak                                 150                               150    mV   VRX-CM-ACp
                                   voltage
PCIe REFCLK
                          CIN      Input Capacitance                        1.5           —               1.5          —                 pF
Other I/Os
LOW Drive                 IOL                                               —             2.5    —        —            2.5         —     mA      VOL = 0.4v
Output
                          IOH                                               —            -5.5    —        —           -5.5         —     mA     VOH = 1.5V
High Drive                IOL                                               —           12.0     —        —           12.0         —     mA      VOL = 0.4v
Output
                          IOH                                               —           -20.0    —        —          -20.0         —     mA     VOH = 1.5V
Schmitt Trig-             VIL                                              -0.3           —      0.8     -0.3          —          0.8     V          —
ger Input
(STI)                     VIH                                               2.0           —   VDDI/O +    2.0          —       VDDI/O +   V          —
                                                                                                 0.5                              0.5
Input                     VIL                                              -0.3           —      0.8     -0.3          —          0.8     V          —
                          VIH                                               2.0           —   VDDI/O +    2.0          —       VDDI/O +   V          —
                                                                                                 0.5                              0.5
Capacitance               CIN                                               —             —      8.5      —            —          8.5    pF          —
Leakage                 Inputs                                              —             —     + 10      —            —         + 10    μA    VDDI/O (max)
                    I/OLEAK W/O                                             —             —     + 10      —            —         + 10    μA    VDDI/O (max)
                 Pull-ups/downs
                   I/OLEAK WITH                                             —             —     + 80      —            —         + 80    μA    VDDI/O (max)
                 Pull-ups/downs
                                                          Table 17 DC Electrical Characteristics (Part 2 of 2)
  1.
     Minimum, Typical, and Maximum values meet the requirements under PCI Specification 2.0.
                                                                                17 of 32                                                     June 2, 2015


  IDT 89HPES16T4AG2 Data Sheet
Package Pinout — 324-BGA Signal Pinout for PES16T4AG2
   The following table lists the pin numbers and signal names for the PES16T4AG2 device.
 Pin         Function            Alt    Pin        Function          Alt    Pin       Function          Alt  Pin     Function       Alt
 A1      VSS                            B17    NC                          D15    VDDCORE                   F13  VSS
 A2      VDDI/O                         B18    NC                          D16    VSS                       F14  NC
 A3      P01MERGEN                      C1     PE3TP02                     D17    VSS                       F15  NC
 A4      P23MERGEN                      C2     PE3TN02                     D18    VSS                       F16  VSS
 A5      VSS                            C3     VSS                         E1     PE3TP01                   F17  NC
 A6      VDDI/O                         C4     PE3RP02                     E2     PE3TN01                   F18  NC
 A7      VSS                            C5     PE3RN02                     E3     VSS                       G1   VSS
 A8      JTAG_TDI                       C6     VSS                         E4     PE3RP01                   G2   VSS
 A9      MSMBDAT                        C7     JTAG_TCK                    E5     PE3RN01                   G3   VSS
 A10     VDDI/O                         C8     JTAG_TRST_N                 E6     VDDCORE                   G4   VDDCORE
 A11     VSS                            C9     SSMBDAT                     E7     VDDCORE                   G5   VDDCORE
 A12     GPIO_00                   1    C10    CCLKDS                      E8     VDDCORE                   G6   VDDPEA
 A13     VDDI/O                         C11    SWMODE_2                    E9     VSS                       G7   VDDPEA
 A14     VDDI/O                         C12    GPIO_02                1    E10    VDDCORE                   G8   VDDCORE
 A15     VSS                            C13    GPIO_09                1    E11    VDDCORE                   G9   VDDCORE
 A16     VSS                            C14    NC                          E12    VDDCORE                   G10  VDDCORE
 A17     VDDI/O                         C15    NC                          E13    VDDCORE                   G11  VSS
 A18     VDDI/O                         C16    VSS                         E14    NC                        G12  VDDPEA
 B1      PE3TP03                        C17    NC                          E15    NC                        G13  VDDPEA
 B2      PE3TN03                        C18    NC                          E16    VSS                       G14  VDDCORE
 B3      VSS                            D1     VSS                         E17    NC                        G15  VDDCORE
 B4      PE3RP03                        D2     VSS                         E18    NC                        G16  VSS
 B5      PE3RN03                        D3     VSS                         F1     PE3TP00                   G17  VSS
 B6      VDDI/O                         D4     VDDCORE                     F2     PE3TN00                   G18  VSS
 B7      VDDI/O                         D5     VDDCORE                     F3     VSS                       H1   PE2TP03
 B8      JTAG_TMS                       D6     VSS                         F4     PE3RP00                   H2   PE2TN03
 B9      SSMBCLK                        D7     JTAG_TDO                    F5     PE3RN00                   H3   VSS
 B10     VDDI/O                         D8     MSMBCLK                     F6     VSS                       H4   PE2RP03
 B11     SWMODE_1                       D9     CCLKUS                      F7     VSS                       H5   PE2RN03
 B12     GPIO_01                        D10    SWMODE_0                    F8     VDDCORE                   H6   VDDPEA
 B13     GPIO_10                        D11    PERSTN                      F9     VSS                       H7   VDDPEA
 B14     NC                             D12    GPIO_07                1    F10    VDDCORE                   H8   VDDCORE
 B15     NC                             D13    GPIO_08                1    F11    VSS                       H9   VDDCORE
 B16     VSS                            D14    VDDCORE                     F12    VSS                       H10  VDDCORE
                                               Table 18 PES16T4AG2 324-pin Signal Pin-Out (Part 1 of 3)
                                                                     18 of 32                                              June 2, 2015


 IDT 89HPES16T4AG2 Data Sheet
 Pin      Function  Alt    Pin     Function       Alt     Pin         Function          Alt  Pin     Function       Alt
H11   VSS                 K13  VDDPETA                   M15      NC                        P17  VDDCORE
H12   VDDPEA              K14  VDDCORE                   M16      VSS                       P18  VSS
H13   VDDPEA              K15  NC                        M17      NC                        R1   VSS
H14   NC                  K16  VSS                       M18      NC                        R2   VDDCORE
H15   NC                  K17  NC                        N1       VSS                       R3   VDDCORE
H16   VSS                 K18  NC                        N2       VSS                       R4   PE1RP03
H17   NC                  L1   PE2TP01                   N3       VSS                       R5   PE1RP02
H18   NC                  L2   PE2TN01                   N4       VDDCORE                   R6   NC
J1    PE2TP02             L3   VSS                       N5       VDDCORE                   R7   PE1RP01
J2    PE2TN02             L4   PE2RP01                   N6       VSS                       R8   PE1RP00
J3    VSS                 L5   PE2RN01                   N7       VSS                       R9   VDDCORE
J4    PE2RP02             L6   VDDPETA                   N8       VDDPEA                    R10  PE0RP03
J5    PE2RN02             L7   VDDPETA                   N9       VDDPEHA                   R11  PE0RP02
J6    VDDPEHA             L8   VDDPEA                    N10      VDDPETA                   R12  VDDCORE
J7    VDDPEHA             L9   VDDPEHA                   N11      VDDPEA                    R13  PE0RP01
J8    VDDCORE             L10  VDDPETA                   N12      VDDPEHA                   R14  PE0RP00
J9    VSS                 L11  VDDPEA                    N13      VSS                       R15  VDDCORE
J10   VDDCORE             L12  VDDPEHA                   N14      VSS                       R16  VDDCORE
J11   VSS                 L13  VDDPETA                   N15      VDDCORE                   R17  VDDCORE
J12   VDDPEHA             L14  NC                        N16      VSS                       R18  VSS
J13   VDDPEHA             L15  NC                        N17      VSS                       T1   VSS
J14   NC                  L16  VSS                       N18      VSS                       T2   VSS
J15   NC                  L17  NC                        P1       VSS                       T3   VSS
J16   VSS                 L18  NC                        P2       VDDCORE                   T4   VSS
J17   NC                  M1   PE2TP00                   P3       VDDCORE                   T5   VSS
J18   NC                  M2   PE2TN00                   P4       PE1RN03                   T6   VSS
K1    REFRES2             M3   VSS                       P5       PE1RN02                   T7   VSS
K2    REFRES3             M4   PE2RP00                   P6       VDDCORE                   T8   VSS
K3    VSS                 M5   PE2RN00                   P7       PE1RN01                   T9   VSS
K4    VDDCORE             M6   VDDPETA                   P8       PE1RN00                   T10  VSS
K5    VDDCORE             M7   VDDPETA                   P9       VDDCORE                   T11  VSS
K6    VDDPETA             M8   VDDPEA                    P10      PE0RN03                   T12  VSS
K7    VDDPETA             M9   VDDPEHA                   P11      PE0RN02                   T13  VSS
K8    VDDCORE             M10  VDDPETA                   P12      VDDCORE                   T14  VSS
K9    VSS                 M11  VDDPEA                    P13      PE0RN01                   T15  VSS
K10   VDDCORE             M12  VDDPEHA                   P14      PE0RN00                   T16  VSS
K11   VSS                 M13  VSS                       P15      VDDCORE                   T17  VSS
K12   VDDPETA             M14  NC                        P16      VDDCORE                   T18  VSS
                               Table 18 PES16T4AG2 324-pin Signal Pin-Out (Part 2 of 3)
                                                   19 of 32                                                June 2, 2015


 IDT 89HPES16T4AG2 Data Sheet
 Pin      Function  Alt   Pin     Function         Alt    Pin        Function          Alt   Pin     Function       Alt
 U1   VSS                 U10 PE0TN03                    V1      VSS                         V10 PE0TP03
 U2   PEREFCLKN           U11 PE0TN02                    V2      PEREFCLKP                   V11 PE0TP02
 U3   VSS                 U12 VSS                        V3      VSS                         V12 VSS
 U4   PE1TN03             U13 PE0TN01                    V4      PE1TP03                     V13 PE0TP01
 U5   PE1TN02             U14 PE0TN00                    V5      PE1TP02                     V14 PE0TP00
 U6   REFRES1             U15 VSS                        V6      REFRES0                     V15 VSS
 U7   PE1TN01             U16 VSS                        V7      PE1TP01                     V16 VSS
 U8   PE1TN00             U17 VSS                        V8      PE1TP00                     V17 VSS
 U9   VSS                 U18 VSS                        V9      VSS                         V18 VSS
                              Table 18 PES16T4AG2 324-pin Signal Pin-Out (Part 3 of 3)
Alternate Signal Functions
                                   Pin           GPIO             Alternate
                                   A12          GPIO_00              P2RSTN
                                   C12          GPIO_02           IOEXPINTN0
                                   D12          GPIO_07               GPEN
                                   D13          GPIO_08              P1RSTN
                                   C13          GPIO_09              P3RSTN
                                  Table 19 PES16T4AG2 Alternate Signal Functions
No Connection Pins
                      NC Pins            NC Pins              NC Pins                  NC Pins
                         B14                E15                   H17                    L14
                         B15                E17                   H18                    L15
                         B17                E18                    J14                   L17
                         B18                F14                    J15                   L18
                         C14                F15                    J17                   M14
                         C15                F17                    J18                   M15
                         C17                F18                   K15                    M17
                         C18                H14                   K17                    M18
                         E14                H15                   K18                    R6
                                     Table 20 PES16T4AG2 No Connection Pins
                                                   20 of 32                                                June 2, 2015


 IDT 89HPES16T4AG2 Data Sheet
Power Pins
          VDDCore     VDDCore VDDCore         VDDI/O        VDDPEA  VDDPEHA VDDPETA
             D4          G9     N15              A2              G6     J6     K6
             D5          G10     P2              A6              G7     J7     K7
            D14          G14     P3             A10             G12    J12     K12
            D15          G15     P6             A13             G13    J13     K13
             E6          H8      P9             A14              H6     L9      L6
             E7          H9     P12             A17              H7    L12      L7
             E8          H10    P15             A18             H12    M9      L10
            E10           J8    P16              B6             H13    M12     L13
            E11          J10    P17              B7              L8    N9      M6
            E12          K4      R2             B10             L11    N12     M7
            E13          K5      R3                              M8           M10
             F8          K8      R9                             M11           N10
            F10          K10    R12                              N8
             G4          K14    R15                             N11
             G5          N4     R16
             G8          N5     R17
                                  Table 21 PES16T4AG2 Power Pins
                                             21 of 32                              June 2, 2015


 IDT 89HPES16T4AG2 Data Sheet
Ground Pins
               Vss            Vss       Vss             Vss       Vss Vss
                A1            D18        G17            M16        T3 U3
                A5            E3         G18             N1        T4 U9
                A7            E9         H3              N2        T5 U12
                A11           E16        H11             N3        T6 U15
                A15            F3        H16             N6        T7 U16
                A16            F6         J3             N7        T8 U17
                B3             F7         J9             N13       T9 U18
                B16            F9        J11             N14      T10 V1
                C3            F11        J16             N16      T11 V3
                C6            F12        K3              N17      T12 V9
                C16           F13        K9              N18      T13 V12
                D1            F16        K11             P1       T14 V15
                D2            G1         K16             P18      T15 V16
                D3            G2         L3              R1       T16 V17
                D6            G3         L16             R18      T17 V18
                D16           G11        M3              T1       T18
                D17           G16        M13             T2       U1
                                  Table 22 PES16T4AG2 Ground Pins
                                             22 of 32                     June 2, 2015


  IDT 89HPES16T4AG2 Data Sheet
Signals Listed Alphabetically
                      Signal Name       I/O Type       Location               Signal Category
                    CCLKDS                    I           C10                          System
                    CCLKUS                    I            D9
                    GPIO_00                 I/O           A12              General Purpose Input/Output
                    GPIO_01                 I/O           B12
                    GPIO_02                 I/O           C12
                    GPIO_07                 I/O           D12
                    GPIO_08                 I/O           D13
                    GPIO_09                 I/O           C13
                    GPIO_10                 I/O           B13
                    JTAG_TCK                  I            C7                           JTAG
                    JTAG_TDI                  I            A8
                    JTAG_TDO                 O             D7
                    JTAG_TMS                  I            B8
                    JTAG_TRST_N               I            C8
                    MSMBCLK                 I/O            D8                          SMBus
                    MSMBDAT                 I/O            A9
                    NO CONNECTION                               See Table 20
                    P01MERGEN                 I            A3                         System
                    P23MERGEN                 I            A4
                    PE0RN00                   I           P14                       PCI Express
                    PE0RN01                   I           P13
                    PE0RN02                   I           P11
                    PE0RN03                   I           P10
                    PE0RP00                   I           R14
                    PE0RP01                   I           R13
                    PE0RP02                   I           R11
                    PE0RP03                   I           R10
                    PE0TN00                  O            U14
                    PE0TN01                  O            U13
                    PE0TN02                  O            U11
                    PE0TN03                  O            U10
                    PE0TP00                  O            V14
                    PE0TP01                  O            V13
                    PE0TP02                  O            V11
                                Table 23 89PES16T4AG2 Alphabetical Signal List (Part 1 of 3)
                                                     23 of 32                                           June 2, 2015


IDT 89HPES16T4AG2 Data Sheet
                   Signal Name       I/O Type       Location               Signal Category
                  PE0TP03                O             V10                   PCI Express (Cont.)
                  PE1RN00                 I             P8
                  PE1RN01                 I             P7
                  PE1RN02                 I             P5
                  PE1RN03                 I             P4
                  PE1RP00                 I             R8
                  PE1RP01                 I             R7
                  PE1RP02                 I             R5
                  PE1RP03                 I             R4
                  PE1TN00                O              U8
                  PE1TN01                O              U7
                  PE1TN02                O              U5
                  PE1TN03                O              U4
                  PE1TP00                O              V8
                  PE1TP01                O              V7
                  PE1TP02                O              V5
                  PE1TP03                O              V4
                  PE2RN00                 I             M5
                  PE2RN01                 I             L5
                  PE2RN02                 I             J5
                  PE2RN03                 I             H5
                  PE2RP00                 I             M4
                  PE2RP01                 I             L4
                  PE2RP02                 I             J4
                  PE2RP03                 I             H4
                  PE2TN00                O              M2
                  PE2TN01                O              L2
                  PE2TN02                O              J2
                  PE2TN03                O              H2
                  PE2TP00                O              M1
                  PE2TP01                O              L1
                  PE2TP02                O              J1
                  PE2TP03                O              H1
                  PE3RN00                 I             F5
                  PE3RN01                 I             E5
                  PE3RN02                 I             C5
                             Table 23 89PES16T4AG2 Alphabetical Signal List (Part 2 of 3)
                                                  24 of 32                                       June 2, 2015


IDT 89HPES16T4AG2 Data Sheet
                   Signal Name         I/O Type       Location                  Signal Category
                  PE3RN03                    I            B5                      PCI Express (Cont.)
                  PE3RP00                    I            F4
                  PE3RP01                    I            E4
                  PE3RP02                    I            C4
                  PE3RP03                    I            B4
                  PE3TN00                   O             F2
                  PE3TN01                   O             E2
                  PE3TN02                   O             C2
                  PE3TN03                   O             B2
                  PE3TP00                   O             F1
                  PE3TP01                   O             E1
                  PE3TP02                   O             C1
                  PE3TP03                   O             B1
                  PEREFCLKN                  I            U2
                  PEREFCLKP                  I            V2
                  PERSTN                     I           D11                            System
                  REFRES0                  I/O            V6                  SerDes Reference Resistors
                  REFRES1                  I/O            U6
                  REFRES2                  I/O            K1
                  REFRES3                  I/O            K2
                  SSMBCLK                  I/O            B9                            SMBus
                  SSMBDAT                  I/O            C9
                  SWMODE_0                   I           D10                            System
                  SWMODE_1                   I           B11
                  SWMODE_2                   I           C11
                  VDDCORE, VDDI/O,                 See Table 21 for a listing of power pins.
                  VDDPEA, VDDPEHA,
                  VDDPETA
                  VSS                              See Table 22 for a listing of ground pins.
                               Table 23 89PES16T4AG2 Alphabetical Signal List (Part 3 of 3)
                                                    25 of 32                                             June 2, 2015


 IDT 89HPES16T4AG2 Data Sheet
PES16T4AG2 Package Trace Length
                                                  Conductor Length
                              Signal Name
                                                        (microns)
                              PE0RN00                     6476.76
                              PE0RP00                     6852.44
                              PE0RN01                     5193.18
                              PE0RP01                     5556.44
                              PE0RN02                     4122.07
                              PE0RP02                     4488.70
                              PE0RN03                     4026.18
                              PE0RP03                     4426.98
                              PE0TN00                     9779.14
                              PE0TP00                     9830.77
                              PE0TN01                     8725.88
                              PE0TP01                     8836.41
                              PE0TN02                     7608.89
                              PE0TP02                     7657.42
                              PE0TN03                     7295.70
                              PE0TP03                     7361.98
                              PE1RN00                     3844.19
                              PE1RP00                     4219.88
                              PE1RN01                     4261.05
                              PE1RP01                     4636.74
                              PE1RN02                     5263.73
                              PE1RP02                     5639.42
                              PE1RN03                     6331.07
                              PE1RP03                     6726.84
                              PE1TN00                     7518.88
                              PE1TP00                     7605.87
                              PE1TN01                     7393.75
                              PE1TP01                     7528.38
                              PE1TN02                     8469.86
                              PE1TP02                     8583.77
                              PE1TN03                     8516.01
                              PE1TP03                     8650.63
                              PE2RN00                     2227.99
                                Table 24 Signal Trace Length (Part 1 of 2)
                                              26 of 32                     June 2, 2015


IDT 89HPES16T4AG2 Data Sheet
                                                 Conductor Length
                             Signal Name
                                                       (microns)
                             PE2RP00                      2600.58
                             PE2RN01                      1881.27
                             PE2RP01                      2256.96
                             PE2RN02                      2105.60
                             PE2RP02                      2470.94
                             PE2RN03                      2835.27
                             PE2RP03                      3207.86
                             PE2TN00                      5462.64
                             PE2TP00                      5576.55
                             PE2TN01                      5163.54
                             PE2TP01                      5273.30
                             PE2TN02                      5389.58
                             PE2TP02                      5512.25
                             PE2TN03                      5310.88
                             PE2TP03                      5451.71
                             PE3RN00                      9181.06
                             PE3RP00                      9541.52
                             PE3RN01                      8602.32
                             PE3RP01                      8994.21
                             PE3RN02                      8220.08
                             PE3RP02                      8604.05
                             PE3RN03                      8906.71
                             PE3RP03                      9193.82
                             PE3TN00                     10606.88
                             PE3TP00                     10747.72
                             PE3TN01                     10972.20
                             PE3TP01                     11117.18
                             PE3TN02                     11862.08
                             PE3TP02                     11978.06
                             PE3TN03                     11822.86
                             PE3TP03                     11870.23
                             PE0REFCLKN                  12558.62
                             PE0REFCLKP                  12641.05
                               Table 24 Signal Trace Length (Part 2 of 2)
                                             27 of 32                     June 2, 2015


 IDT 89HPES16T4AG2 Data Sheet
PES16T4AG2 Pinout — Top View
              1     2     3   4 5  6    7    8    9    10 11   12   13  14 15  16    17  18
           A                                                                                A
           B                                                                                B
           C                                                                                C
           D                                                                                D
           E                                                                                E
           F                                                                                F
           G                                                                                G
           H                                                                                H
           J                                                                                J
           K                       X    X                       X   X                       K
           L                       X    X              X            X                       L
           M                       X    X              X                                    M
           N                                           X                                    N
           P                                                                                P
           R                                                                                R
           T                                                                                T
           U                                                                                U
           V                                                                                V
              1     2     3   4 5  6    7    8    9    10 11   12   13  14 15  16    17  18
                VDDCore (Power)
               VDDI/O (Power)
                                 x   VDDPETA (Power)       Vss (Ground)       Signals
                                     VDDPEA (Power)                           No Connect
                                     VDDPEHA (Power)
                                                 28 of 32                                     June 2, 2015


 IDT 89HPES16T4AG2 Data Sheet
PES16T4AG2 Package Drawing — 324-Pin AL324/AR324
                              29 of 32           June 2, 2015


 IDT 89HPES16T4AG2 Data Sheet
PES16T4AG2 Package Drawing — Page Two
                                      30 of 32 June 2, 2015


 IDT 89HPES16T4AG2 Data Sheet
Revision History
  January 15, 2009: Publication of final data sheet.
  February 11, 2009: Revised AC Timing Characteristics table and DC Electrical Characteristics table to correct typos.
  March 6, 2009: Added industrial temperature.
  April 7, 2009: In Valid Combinations, changed ZB to ZC silicon for commercial temperature.
  April 17, 2009: In Table 15, Power Dissipation value was changed to 2.87.
  February 2, 2010: Added new section Absolute Maximum Voltage Rating with table.
  September 13, 2010: In Table 7, changed Buffer type for PCI Express from CML to PCIe differential and changed reference clocks to HCSL.
  January 20, 2011: Added new Table 24, Signal Trace Length.
  March 30, 2011: In Table 12, added VddPETA to footnote #1.
  February 13, 2013: In Table 7, changed P01MERGEN and P23MERGEN pins from pull-down to pull-up.
  April 30, 2013: In Table 4, changed description for PxxMERGEN pins to pull-up via 92K ohm resistor.
  May 23, 2013: In the Features section, added reference to SECDED ECC under Reliability, Availability, Serviceability bullet.
  June 2, 2015: Updated the Device Revision information in Ordering Information, and revised the Industrial part numbers in Valid Combinations.
                                                                   31 of 32                                                       June 2, 2015


 IDT 89HPES16T4AG2 Data Sheet
Ordering Information
   NN          A        AAA     NNANA         AN           AA          AA             A                            Legend
                                                                                                                 A = Alpha Character
                                                                                                                 N = Numeric Character
 Product   Operating  Device   Product     Generation Device         Package Temp Range
 Family     Voltage   Family    Detail      Series     Revision
                                                                                           Blank    Commercial Temperature
                                                                                                    (0°C to +70°C Ambient)
                                                                                           I         Industrial Temperature
                                                                                                     (-40° C to +85° C Ambient)
                                                                                           AL        324-ball FCBGA
                                                                                           ALG       324-ball FCBGA, Green
                                                                                            ZC       ZC Revision
                                                                                            Blank    ZC Revision
                                                                                            G2        PCIe Gen 2
                                                                                           16T4A     16-lane, 4-port
                                                                                           PES       PCI Express Switch
                                                                                           H        1.0V +/- 0.1V Core Voltage
                                                                                           89       Serial Switching Product
Valid Combinations
    89HPES16T4AG2ZCAL     324-ball FCBGA package, Commercial Temperature
    89HPES16T4AG2ZCALG    324-ball Green FCBGA package, Commercial Temperature
    89HPES16T4AG2ALI      324-ball FCBGA package, Industrial Temperature
    89HPES16T4AG2ALGI     324-ball Green FCBGA package, Industrial Temperature
                            CORPORATE HEADQUARTERS                     for SALES:                         for Tech Support:
                            6024 Silver Creek Valley Road              800-345-7015 or 408-284-8200       email: ssdhelp@idt.com
                       ®
                            San Jose, CA 95138                         fax: 408-284-2775                  phone: 408-284-8208
                                                                       www.idt.com
                                                               32 of 32                                                  June 2, 2015


 IMPORTANT NOTICE AND DISCLAIMER
 RENESAS ELECTRONICS CORPORATION AND ITS SUBSIDIARIES (“RENESAS”) PROVIDES TECHNICAL
 SPECIFICATIONS AND RELIABILITY DATA (INCLUDING DATASHEETS), DESIGN RESOURCES (INCLUDING
 REFERENCE DESIGNS), APPLICATION OR OTHER DESIGN ADVICE, WEB TOOLS, SAFETY INFORMATION, AND
 OTHER RESOURCES “AS IS” AND WITH ALL FAULTS, AND DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED,
 INCLUDING, WITHOUT LIMITATION, ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 PARTICULAR PURPOSE, OR NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY RIGHTS.
 These resources are intended for developers skilled in the art designing with Renesas products. You are solely responsible
 for (1) selecting the appropriate products for your application, (2) designing, validating, and testing your application, and (3)
 ensuring your application meets applicable standards, and any other safety, security, or other requirements. These
 resources are subject to change without notice. Renesas grants you permission to use these resources only for
 development of an application that uses Renesas products. Other reproduction or use of these resources is strictly
 prohibited. No license is granted to any other Renesas intellectual property or to any third party intellectual property.
 Renesas disclaims responsibility for, and you will fully indemnify Renesas and its representatives against, any claims,
 damages, costs, losses, or liabilities arising out of your use of these resources. Renesas' products are provided only subject
 to Renesas' Terms and Conditions of Sale or other applicable terms agreed to in writing. No use of any Renesas resources
 expands or otherwise alters any applicable warranties or warranty disclaimers for these products.
                                                                                                               (Rev.1.0 Mar 2020)
Corporate Headquarters                                                  Contact Information
TOYOSU FORESIA, 3-2-24 Toyosu,                                          For further information on a product, technology, the most
Koto-ku, Tokyo 135-0061, Japan                                          up-to-date version of a document, or your nearest sales
www.renesas.com                                                         office, please visit:
                                                                        www.renesas.com/contact/
Trademarks
Renesas and the Renesas logo are trademarks of Renesas
Electronics Corporation. All trademarks and registered
trademarks are the property of their respective owners.
                                                                      © 2020 Renesas Electronics Corporation. All rights reserved.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Renesas Electronics:
 89HPES16T4AG2ZBALG 89HPES16T4AG2ZCAL8 89HPES16T4AG2ALGI8 89HPES16T4AG2ALGI
89HPES16T4AG2ZCALI 89HPES16T4AG2ZCALG 89HPES16T4AG2ZBAL 89HPES16T4AG2ZCAL
89HPES16T4AG2ZBAL8
