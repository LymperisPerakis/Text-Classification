     Sept 13, 2010
                    W65C22
   (W65C22N and W65C22S)
Versatile Interface Adapter (VIA)
                   Datasheet


WDC reserves the right to make changes at any time without notice in order to improve design and supply
the best possible product. Information contained herein is provided gratuitously and without liability, to any
user. Reasonable efforts have been made to verify the accuracy of the information but no guarantee
whatsoever is given as to the accuracy or as to its applicability to particular uses. In every instance, it must
be the responsibility of the user to determine the suitability of the products for each application. WDC
products are not authorized for use as critical components in life support devices or systems. Nothing
contained herein shall be construed as a recommendation to use any product in violation of existing patents
or other rights of third parties. The sale of any WDC product is subject to all WDC Terms and Conditions of
Sales and Sales Policies, copies of which are available upon request.
Copyright ©1981-2010 by The Western Design Center, Inc.              All rights reserved, including the right of
reproduction, in whole or in part, in any form.
                                                                                                                2


                                         TABLE OF CONTENTS
1.    INTRODUCTION...................................................................................................... 7
2.    W65C22 FUNCTION DESCRIPTION ...................................................................... 8
   2.1     Peripheral Data Ports ................................................................................................................ 8
   2.2     Data Transfer - Handshake Control ....................................................................................... 10
   2.3     Read Handshake Control. ....................................................................................................... 11
   2.4     Write Handshake Control. ....................................................................................................... 12
   2.5     Timer 1 Operation .................................................................................................................... 14
   2.6     Timer 1 One-Shot Mode .......................................................................................................... 17
   2.7     Timer 1 Free-Run Mode ........................................................................................................... 18
   2.8     Timer 2 Operation .................................................................................................................... 19
   2.9     Timer 2 One-Shot Mode .......................................................................................................... 19
   2.10    Timer 2 Pulse Counting Mode ................................................................................................ 20
   2.11    Shift Register Operation ......................................................................................................... 20
   2.12    Shift Register Input Modes ..................................................................................................... 21
      2.12.1     Shift Register Disabled (000) ............................................................................................ 21
      2.12.2     Shift In - Counter T2 Control (001).................................................................................... 22
      2.12.3     Shift In - PHI2 Clock Control (010).................................................................................... 22
      2.12.4     Shift In - External CB1 Clock Control (011) ...................................................................... 23
   2.13    Shift Register Output Modes .................................................................................................. 23
      2.13.1     Shift Out - Free Running at T2 Rate (100) ........................................................................ 23
      2.13.2     Shift Out - T2 Control (101) ............................................................................................... 24
      2.13.3     Shift Out - PHI2 Clock Control (110) ................................................................................ 24
      2.13.4     Shift Out - External CB1 Clock Control (111) .................................................................. 25
   2.14    Interrupt Operation .................................................................................................................. 25
3.    PIN FUNCTION DESCRIPTION ............................................................................ 28
   3.1     Peripheral Data Port A Control Lines (CA1, CA2) ................................................................ 30
   3.2     Peripheral Data Port B Control Lines (CB1, CB2) ................................................................ 30
   3.3     Chip Select (CS1, CS2B) ......................................................................................................... 30
   3.4     Data Bus (D0-D7) ..................................................................................................................... 31
   3.5     Interrupt Request (IRQB) ........................................................................................................ 31
   3.6     Peripheral Data Port A (PA0-PA7) .......................................................................................... 32
   3.7     Peripheral Data Port B (PB0-PB7) .......................................................................................... 34
   3.8     Phase 2 Internal Clock (PHI2) ................................................................................................. 36
   3.9     Reset (RESB) ............................................................................................................................ 36
   3.10    Register Select (RS0-RS3) ...................................................................................................... 36
   3.11    RWB (Read/Write) .................................................................................................................... 36
   3.12    VDD and VSS ............................................................................................................................ 36
                                                                                                                                                      3


4.    TIMING, AC AND DC CHARACTERISTICS ......................................................... 37
   4.1    W65C22 Absolute Maximum Ratings .................................................................................... 37
   4.2    DC Characteristics TA= -40°C to +85C° ................................................................................. 38
   4.3    AC Characteristic TA=-40°C to +85°C .................................................................................... 42
   4.4    Timing Diagrams...................................................................................................................... 46
5.    CAVEATS .............................................................................................................. 50
   5.1    Older Versions ......................................................................................................................... 50
   5.2    Shift Clock ................................................................................................................................ 50
   5.3    Bus Holding Pins ..................................................................................................................... 50
   5.4    Current Limiting ....................................................................................................................... 50
6.    HARD CORE MODEL ........................................................................................... 51
   6.1    W65C22C vs. W65C22S ........................................................................................................... 51
   6.2    Chip Select ............................................................................................................................... 51
   6.3    W65C22C and W65C22S Timing ............................................................................................ 51
7.    ORDERING INFORMATION.................................................................................. 52
                                                                                                                                                        4


                                           Table of Figures
FIGURE 1-1 W65C22 INTERNAL ARCHITECTURE BLOCK DIAGRAM ................................................... 7
FIGURE 2-1 READ HANDSHAKE OPERATION (PA ONLY) ................................................................... 11
FIGURE 2-2 WRITE HANDSHAKE (PA AND PB)..................................................................................... 12
FIGURE 3-1 W65C22 40 PIN PDIP PINOUT ............................................................................................ 28
FIGURE 3-2 W65C22 44 PIN PLCC PINOUT ........................................................................................... 28
FIGURE 3-2 W65C22 44 PIN QFP PINOUT ............................................................................................. 29
FIGURE 3-3 W65C22N AND GTE - G65SC22 CMOS PORT A BUFFER (PA0-PA7, CA2) .................... 32
FIGURE 4-1 READ TIMING ....................................................................................................................... 46
FIGURE 4-2 WRITE TIMING ...................................................................................................................... 46
FIGURE 4-3 READ HANDSHAKE, PULSE MODE (CA2) .......................................................................... 47
FIGURE 4-4 READ HANDSHAKE, HANDSHAKE MODE TIMING (CA2) ................................................ 47
FIGURE 4-5 WRITE HANDSHAKE, PULSE MODE TIMING (CA2, CB2) ................................................ 47
FIGURE 4-6 WRITE HANDSHAKE, HANDSHAKE MODE TIMING (CA2, CB2)...................................... 48
FIGURE 4-7 PERIPHERAL DATA, INPUT LATCHING TIMING ................................................................. 48
FIGURE 4-8 DATA SHIFT OUT, INTERNAL OR EXTERNAL SHIFT CLOCK TIMING............................ 48
FIGURE 4-9 DATA SHIFT IN, INTERNAL OR EXTERNAL SHIFT CLOCK TIMING................................ 49
FIGURE 4-10 EXTERNAL SHIFT CLOCK TIMING ................................................................................... 49
FIGURE 4-11 PULSE COUNT INPUT TIMING ......................................................................................... 49
FIGURE 4-12 TEST LOAD (ALL DYNAMIC PARAMETERS) ................................................................... 49
FIGURE 5-1 HIGH RESISTANCE BUS HOLDING DEVICE ON THE W65C22S..................................... 50
                                                                                                                                                5


                                     Table of Tables
TABLE 2-1 W65C22 MEMORY MAP OF INTERNAL REGISTERS............................................................ 8
TABLE 2-2 ORB, IRB OPERATION FOR REGISTER 0 ($00) .................................................................... 9
TABLE 2-3 ORA, IRA OPERATION FOR REGISTER 1 ($01) .................................................................... 10
TABLE 2-4 DDRB, DDRA OPERATION ($02,$03) ..................................................................................... 10
TABLE 2-5 CA1, CA2, CB1, CB2 CONTROL1 ($0C) ................................................................................ 12
TABLE 2-6 T1 COUNTER FORMAT AND OPERATION1 ($04,$05) ........................................................ 14
TABLE 2-7 T1 LATCH FORMAT AND OPERATION1 ($06,$07) .............................................................. 15
TABLE 2-8 AUXILIARY CONTROL REGISTER FORMAT AND OPERATION ($0B) .............................. 16
TABLE 2-9 T2 COUNTER FORMAT AND OPERATION1 ($08,$09) ........................................................ 19
TABLE 2-10 SHIFT REGISTER AND AUXILIARY CONTROL REGISTER CONTROL ($0A) ................. 21
TABLE 2-11 INTERRUPT FLAG REGISTER ($0D) .................................................................................. 26
TABLE 2-12 INTERRUPT ENABLE REGISTER ($0E) ............................................................................. 27
TABLE 3-1 PIN FUNCTION TABLE .......................................................................................................... 29
TABLE 4-1 ABSOLUTE MAXIMUM RATINGS .......................................................................................... 37
TABLE 4-2A W65C22N DC CHARACTERISTICS ...................................................................................... 38
                                                                                                                                         6


1. INTRODUCTION
The W65C22 (W65C22N and W65C22S) Versatile Interface Adapter (VIA) is a flexible I/O device for use with
the 65xx series microprocessor family. The W65C22 includes functions for programmed control of two
peripheral ports (Ports A and B). Two program controlled 8-bit bidirectional peripheral I/O ports allow direct
interfacing between the microprocessor and selected peripheral units. Each port has input data latching
capability. Two programmable Data Direction Registers (A and B) allow selection of data direction (input or
output) on an individual line basis. Also provided are two programmable 16-bit Interval Timer/Counters with
latches. Timer 1 may be operated in a One-Shot Interrupt Mode with interrupts on each count to zero, or in a
Free-Run Mode with a continuous series of evenly spaced interrupts. Timer 2 functions as both an interval
and pulse counter. Serial Data transfers are provided by a serial to parallel/parallel to serial shift register.
Application versatility is further increased by various control registers, including an Interrupt Flag Register, an
Interrupt Enable Register and two Function Control Registers.
KEY FEATURES OF THE W65C22
• Advanced CMOS process technology for low                    •    Programmable Data Direction Registers
    power consumption                                         •    Latched Input/Output Registers on both I/O
• Compatible with various versions of the                          Ports
    NMOS 6522 devices                                         •    TTL compatible output peripheral lines
• Low power consumption                                       •    Single 1.8V to 5V power supply
• Two 8-bit, bi-directional peripheral I/O Ports              •    Bus and functionally compatible with high-
• Two        16-bit       programmable        Interval             speed 8/16-bit 65xx as well other
    Timer/Counters                                                 microprocessor families.
• Serial bi-directional peripheral I/O Port                   •    Register and Chip Selects specified for
• Enhanced "handshake" features                                    multiplexed operation
                             Figure 1-1 W65C22 Internal Architecture Block Diagram
                                                                                                                  7


2. W65C22 FUNCTION DESCRIPTION
                             Table 2-1 W65C22 Memory Map of Internal Registers
  Register                   RS Coding                Register                        Description
  Number                                             Designation
                RS3       RS2        RS1     RS0                        Write                         Read
      0          0          0         0        0      ORB/IRB    Output Register "B"            Input Register "B"
      1          0          0         0        1      ORA/IRA    Output Register "A"            Input Register "A"
      2          0          0         1        0       DDRB                  Data Direction Register "B"
      3          0          0         1        1       DDRA                  Data Direction Register "A"
      4          0          1         0        0       T1C-L       T1 Low-Order              T1 Low-Order Counter
                                                                      Latches
      5          0          1         0        1       T1C-H                   T1 High-Order Counter
      6          0          1         1        0       T1L-L                    T1 Low-Order Latches
      7          0          1         1        1       T1L-H                   T1 High-Order Latches
      8          1          0         0        0       T2C-L       T2 Low-Order              T2 Low-Order Counter
                                                                      Latches
      9          1          0         0        1       T2C-H                   T2 High-Order Counter
      A          1          0         1        0          SR                         Shift Register
      B          1          0         1        1        ACR                   Auxiliary Control Register
      C          1          1         0        0        PCR                  Peripheral Control Register
      D          1          1         0        1         IFR                    Interrupt Flag Register
      E          1          1         1        0         IER                  Interrupt Enable Register
      F          1          1         1        1      ORA/IRA         Same as Reg 1 except no "Handshake"
 2.1    Peripheral Data Ports
Both PA and PB operate in conjunction with a Data Direction Register (DDRA or DDRB). Under program
control, the DDRA and DDRB specify which pins within the port bus are to be designated as inputs or
outputs. Logic 0 in any bit position of the register will cause the corresponding pin to serve as an input;
while a logic 1 will cause the pin to serve as an output.
When a line is programmed as an output, it is controlled by a corresponding bit in the Output Register (ORA
& ORB). A Logic 1 in the ORA or ORB will cause the corresponding output line to go high, while logic 0 will
cause the pin to go low. Under program control, data is written into the ORA or ORB bit positions
corresponding to the output pins which have been programmed as outputs. Should data be written into bit
positions corresponding to pins which have been programmed as input, the output pins will be unaffected.
                                                                                                                   8


When reading the Peripheral Port (PA or PB), the contents of the corresponding Input Register (IRA or IRB)
is transferred onto the Data Bus. When the input latching feature is disabled, IRA will reflect the logic levels
present on the PA bus pins. However, with input latching enabled and the selected active transition on
Peripheral A Control 1 (CA1) having occurred, IRA will contain the data present on the PA bus lines at the
time of the transition. In this case, once IRA has been read, it will appear transparent, reflecting the current
state of the PA bus pins until the next CA1 latching transition.
With respect to IRB, it operates similar to IRA except that for those PB bus pins that have been programmed
as outputs, there is a difference. When reading IRA, the logic level on the pins determines whether logic 1
or 0 is read. However, when reading IRB, the logic level stored in ORB is the logic level read. For this
reason, those outputs which have large loading effects may cause the reading of IRA to result in the reading
of a logic 0 when a 1 was actually programmed, and reading logic 1 when a 0 was programmed. However,
when reading IRB, the logic level read will be correct, regardless of loading on the particular pin.
For information on formats and operation of the PA and PB registers, see Tables 2-2, 2-3 & 2-4. Note that
the input latching modes are controlled by the Auxiliary Control Register (See Table 1-8).
                              Table 2-2 ORB, IRB Operation for Register 0 ($00)
        7             6           5           4           3        2          1          0         ORB,IRB
      PB7           PB6          PB5        PB4         PB3      PB2       PB1         PB0
      Pin Data Direction
           Selection                       WRITE                                     READ
     DDRB="1" (Output)            MPU writes Output Level         MPU reads output register bit in ORB. Pin
                                            (ORB)                             level has no effect.
      DDRB="0" (Input)         MPU writes onto ORB, but no                 MPU reads input level
        (Input latching        effect on pin level, until DDRB                     on PB pin.
           disabled)                      changed.
      DDRB="0" (Input)                                           MPU reads IRB bit, which is the level of the
        (Input latching                                            PB pin at the time of the last CB1 active
           enabled)                                                                transition.
                                                                                                               9


                             Table 2-3 ORA, IRA Operation for Register 1 ($01)
            7          6         5          4          3         2          1         0       ORA,IRA
           PA7        PA6       PA5       PA4         PA3       PA2       PA1        PA0
         Pin Data Direction
              Selection                       WRITE                                  READ
  DDRA="1" (Output)               MPU writes Output Level              MPU reads level on PA pin.
  (Input latching disabled)       (ORA)
  DDRA="1" (Output)                                                    MPU reads IRA bit which is the
  (Input latching enabled)                                             level of the PA pin at the time of
                                                                       the last CA1 active transition.
  DDRA="0" (Input)                MPU writes into ORA, but no          MPU read level on PA pin.
  (Input latching disabled)       effect on pin level, until DDRA
                                  changed.
  DDRA="0 (Input)                                                      MPU reads IRA bit which is the
  (Input latching enabled)                                             level of the PA pin at the time of
                                                                       the last CA1 active transition.
                                Table 2-4 DDRB, DDRA Operation ($02,$03)
      7          6           5          4           3          2          1           0       DDRB,DDRA
    PB7/        PB6 /     PB5 /       PB4 /       PB3 /     PB2 /        PB1 /      PB0 /
    PA7         PA6         PA5       PA4         PA3        PA2         PA1        PA0
           "0” Associated PB/PA pin is an input (high impedance)
           "1” Associated PB/PA pin is an output, whose level is determined by ORB/ORA Bit.
 2.2    Data Transfer - Handshake Control
A powerful feature of the W65C22 is its ability to provide absolute control over data transfers between the
microprocessor and peripheral devices. This control is accomplished by way of "handshake" lines. PA lines
Peripheral A Control 1, 2 (CA1, CA2) handshake data transfers on both Read and Write operations, while
PB lines Peripheral B Control 1,2 (CB1, CB2) handshake data on Write operations only.
                                                                                                         10


 2.3    Read Handshake Control.
Read Handshaking provides effective control of data transfers from a peripheral device to the
microprocessor. To accomplish the Read Handshake, the peripheral device generates a Data Ready signal
to the W65C22N that indicates valid data is present on PA or PB. In most cases, this Data Ready signal will
interrupt the microprocessor, which will then read the data and generate a Data Taken signal. Once the
peripheral senses the Data Taken signal, new data will be placed on the bus. This process continues until
the data transfer is complete.
Automatic Read Handshaking applies to PA only. The Data Ready signal is transmitted by the peripheral
device over the CA1 interrupt line, while the Data Taken signal is generated and transmitted to the
peripheral device over the CA2 line. When the Data Ready signal is received, it sets an internal flag in the
Interrupt Flag Register (IFR). This flag may interrupt the microprocessor or it may be polled under program
control. As an option, the Data Taken signal may be either a pulse or a level. In either case, it is set to a
Logic 0 by the microprocessor and is set by the next Data Ready signal, see Figure 2-1.
                             Figure 2-1 Read Handshake Operation (PA Only)
                                                                                                           11


 2.4    Write Handshake Control.
The Write Handshake operation is similar to Read Handshaking. For Write Handshaking, however, the
W65C22 generates the Data Ready signal and the peripheral device must generate the Data Taken return
signal. Note that Write Handshaking may occur on both PA and PB. For a Write Handshake, CA2 or CB2
serve as the Data Ready output and can operate in either the Handshake Mode or the Pulse Mode. The
Data Taken signal is received the CA1 or CB1. The Data Taken signal sets a flag in the Interrupt Flag
Register and clears the Data Ready output signal, see Figure 2-2.
Note that the selection of Read or Write Handshake operating modes for CA1, CA2, CB1 and CB2 is
accomplished by the Peripheral Control Register (PCR). See Table 2-5.
                                Figure 2-2 Write Handshake (PA and PB)
                              Table 2-5 CA1, CA2, CB1, CB2 Control ($0C)
         7           6          5          4           3          2      1          0           PCR
               CB2 Control                CB1                CA2 Control           CA1
                                         Control                                  Control
                                                                                                   12


                                           CB2 Control
                   7     6       5     Operation
                   0     0       0     Input-negative active edge
                   0     0       1     Independent interrupt input-negative edge*
                   0     1       0     Input-positive active edge
                   0     1       1     Independent interrupt input-positive edge*
                   1     0       0     Handshake output
                   1     0       1     Pulse output
                   1     1       0     Low output
                   1     1       1     High output
                                     CB1 Interrupt Control
                                   0 = Negative Active Edge
                                   1 = Positive Active Edge
                                           CA2 Control
                     3     2      1     Operation
                     0     0      0     Input-negative active edge
                     0     0      1     Independent      interrupt   input-negative
                                        edge*
                     0     1      0     Input-positive active edge
                     0     1      1     Independent       interrupt   input-positive
                                        edge*
                     1     0      0     Handshake output
                     1     0      1     Pulse output
                     1     1      0     Low output
                     1     1      1     High output
                                     CA1 Interrupt Control
                                   0 = Negative Active Edge
                                   1 = Positive Active Edge
* If the CA2/CB2 control in the PCR is selected as "independent" interrupt input, then reading or writing
  the output register ORA/ORB will not clear the flag bit. Instead, the bit must be cleared by writing into
  the IFR, as described previously.
                                                                                                        13


 2.5    Timer 1 Operation
Interval Timer 1 (T1) consists of two 8-bit latches and a 16-bit counter. The latches serve to store data
which is to be loaded into the counter. Once the counter is loaded under program control, it decrements at
Phase 2 clock rate. Upon reaching zero, bit 6 of the Interrupt Flag Register (IFR) is set, causing Interrupt
Request ([) to go to Logic 0 if the corresponding bit in the Interrupt Enable Register (IER) is set. Once the
Timer reaches a count of zero, it will either disable any further interrupts (provided it has been programmed
to do so), or it will automatically transfer the contents of the latches into the counter and proceed to
decrement again. The counter may also be programmed to invert the output signal on PB7 each time it
reaches a count of zero. Each of these counter modes is presented below. The T1 counter format and
operation is shown in Table 2-6, with corresponding latch format and operation in Table 2-7. Additional
control bits are provided in the Auxiliary Control Register (ACR) bits 6 and 7 to allow selection of T1
operating modes. The four available modes are shown in Table 2-8.
                          Table 2-6 T1 Counter Format and Operation1 ($04,$05)
             7         6          5          4         3         2          1         0       T1L
            128        64         32         16        8         4          2         1
         WRITE -        8 bits loaded into T1 low order latches. Latch contents are transferred into low
                        order counter at the time the high order counter is loaded.
         READ -         8 bits from T1 low order counter transferred to MPU. T1 interrupt flag IFR6 is reset.
             7         6          5          4         3         2          1         0      T1H
          32,768    16,384      8,192      4,096     2,048     1,024       512       256
         WRITE -        8 bits loaded into T1 high order latches. Also, both high and low order latches
                        are transferred into T1 counter and this initiates countdown. T1 interrupt flag
                        IFR6 is reset.
         READ -         8 bits from T1 high order counter transferred to MPU.
                                                                                                           14


               Table 2-7 T1 Latch Format and Operation1 ($06,$07)
   7      6           5         4         3         2         1          0     T1L
  128     64          32       16         8         4         2          1
WRITE -     8 bits loaded into T1 low order latches. This operation is no different than a write
            into theT1 Low Order Register.
READ -      8 bits from T1 low order latches transferred to MPU. Unlike reading the T1 Low
            Order Register, this does not cause reset of T1 interrupt flag IFR6.
   7       6          5         4         3         2         1          0     T1H
 32,768 16,384      8,192    4,096     2,048      1,024      512        256
WRITE -      8 bits loaded into T1 high order latches. Unlike writing to the T1 Low Order
             Register, no latch to counter transfers takes place. T1 interrupt flag IFR6 is
             reset.
READ -       8 bits from T1 high order counter transferred to MPU.
                                                                                                15


        Table 2-8 Auxiliary Control Register Format and Operation ($0B)
 7           6           5           4            3            2           1   0  ACR
T1 Timer Control    T2 Timer            Shift Register Control            PB  PA
                     Control
                                T1 Timer Control
            7        6      Operation                      PB7
            0        0      Timed interrupt each time
                            T1 is loaded                   Disabled
            0        1      Continuous interrupts
            1        0      Timed interrupt each time      One shot output
                            T1 is loaded
            1        1      Continuous interrupts          Square wave output
                                T2 Timer Control
                              5       Operation
                              0       Timed interrupt
                              1       Count down with pulses on
                                      PB6
                              Shift Register Control
            4       3       2     Operation
            0       0       0     Disabled
            0       0       1     Shift in under control of T2
            0       1       0     Shift in under control of PHI2
            0       1       1     Shift in under control of external clock
            1       0       0     Shift out free running at T2 rate
            1       0       1     Shift out under control of T2
            1       1       0     Shift out under control of PHI2
            1       1       1     Shift out under control of external clock
                              Latch Enable/Disable
                            1        0       Operation
                            0        0       Disable
                            1        1       Enable latching
                                                                                 16


It should be noted that the microprocessor does not write directly into the T1 low order counter. Instead, this
half of the counter is loaded automatically from the low order register when the microprocessor writes into
the high order register and counter. In fact, it may not be necessary to write to the low order register in
some applications since the timing operation is triggered by writing to the high order register and counter.
  2.6 Timer 1 One-Shot Mode
Interval Timer T1 may operate in the One-Shot Mode that allows the generation of a single Interrupt Flag
each time the Timer is loaded. The Timer can also be programmed to produce a single negative pulse on
Data Port line PB7.
To generate a single interrupt, it is required that bits 6 and 7 of the ACR be a Logic 0. The low order T1
counter or the low order T1 latch must then be loaded with the low order count value. Note that a load to a
low order T1 counter is effectively a load to a low order T1 latch. Next, the high order count value must be
loaded into the high order T1 counter, at which time the value is simultaneously loaded into the high order
T1 latch. During this load sequence, the contents of low order T1 latch is transferred to low order T1
counter. The counter will start counting down on the next PHI2 clock following the load sequence into high
order T1 counter, and will decrement at the PHI2 clock rate. Once the T1 counter reaches a zero count, the
Interrupt Flag is set. To generate a negative pulse on PB7, the sequence is identical to the above except
ACR7 must be a Logic 1. PB7 will then go to a Logic 0 following the load to high order T1 counter, and will
go to a Logic 1 again when the counter reaches a zero count. Once set, IFR6 the T1 Interrupt Flag is reset
by either writing high order T1 latch, or by reading low order T1 counter, see Figure 2-3.
                              Figure 2-3 One-Shot Mode (Timer 1 and Timer 2)
                                                                                                             17


 2.7    Timer 1 Free-Run Mode
An important advantage within the W65C22 is the ability of the latches associated with the T1 counter to
provide a continuous series of evenly spaced interrupts or a square wave on PB7. It should also be noted
that the continuous series of interrupts and square waves are not affected by variations in the
microprocessor interrupt response time. These advantages are all produced in the Free-Run Mode. When
operating in the Free-Run Mode, the Interrupt Flag is set and the signal on PB7 is inverted each time the
counter reaches a count of zero. In the Free-Run Mode, however, the counter does not continue to
decrement after reaching a zero count. Instead, the counter automatically transfers to contents of the latch
into the counter (16 bits) and then decrements from the new count value. As can be seen, it is not
necessary to reload the timer in order to set the Interrupt Flag on the next count of zero. When the Interrupt
Flag bit is set it can be cleared by either reading low order T1 counter or by writing directly into the IFR as
will be discussed later or by writing into high order T1 latch.
Since the interval timers are all re-triggerable, reloading the counter will always reinitialize the time out
period. Should the microprocessor continue to reload the counter before it reaches zero, counter time out
can be prevented. T1 is able to operate in this manner provided the microprocessor writes into the high
order counter. By loading the latches only, the microprocessor can access the timer during each countdown
operation without affecting the time out in progress. In this way, data loaded into the latches will determine
the length of the next subsequent time out period. This capability is of value in the Free-Run Mode with the
output enabled. In the Free-Run Mode, the signal on PB7 is inverted and IFR6 is set with each counter time
out. When the microprocessor responds to the interrupts with new data for the latches, it can determine the
period of the next half cycle during each half cycle of the output signal on PB7. In this way, complex
waveforms can be generated. See Figure 2-4.
                                      Figure 2-4 Free-Run Mode (Timer 1)
                                                                                                             18


 2.8     Timer 2 Operation
Timer 2 (T2) operates in the One-Shot Mode only (as an interval timer), or as a pulse counter for counting
negative pulses on PB6. A single control bit within ACR5 is used to select between these two modes. T2 is
made up of a write only low order T2 latch, a read only low order T2 counter, and a read/write high order T2
counter. This 16-bit counter decrements at a PHI2 clock rate. See Table 2-9.
                             Table 2-9 T2 Counter Format and Operation1 ($08,$09)
            7           6          5          4           3         2        1          0       T2L
          128          64          32         16          8         4        2          1
WRITE -            8 bits loaded into T2 low order latches.
READ -             8 bits from T2 low order counter transferred to MPU. IFR5 is reset.
           7            6          5          4           3         2        1          0       T2H
         32,768      16,384      8,192      4,096       2,048     1,024     512        256
WRITE -       8 bits loaded into T2 high order counter. Also, low order latches are transferred to low order
              counter. IFR5 is reset.
READ -        8 bits from T2 high order counter transferred to MPU.
 2.9     Timer 2 One-Shot Mode
Operation of T2 in the One-Shot Mode is similar to T1. That is, for each load high order T2 counter
operation, Timer 2 sets IFR5 for each countdown to zero. However, after a time out, the T2 counters roll
over to all 1's ($FFFF) and continues to decrement. This two's complement decrement allows the user to
determine how long IFR5 has been set. Since the Interrupt Flag logic is disabled after the initial interrupt set
(zero count), further interrupts cannot be set by a subsequent count to zero. To enable the Interrupt Flag
logic, the microprocessor must reload high order T2 counter. The Interrupt Flag is cleared by either reading
low order T2 counter or by loading high order T2 counter. See Figure 2-3.
                                                                                                             19


 2.10 Timer 2 Pulse Counting Mode
In the Pulse Counting Mode, T2 counts a predetermined number of negative going pulses on PB6. To
accomplish this, a count number is loaded into high order T2 counter, which clears IFR5 logic and starts the
counter to decrement each time a negative pulse is applied to PB6. When the T2 counter reaches a count
of zero, IFR5 is set and the counter continues to decrement with each pulse on PB6. To enable IFR5 for
subsequent countdowns, it is necessary to reload high order T2 counter. The decrement pulse on line PB6
must be Logic 0 during the leading edge of the PHI2 clock. See Figure 2-5.
                                 Figure 2-5 Pulse Counting Mode (Timer 2)
 2.11 Shift Register Operation
The Shift Register (SR) performs bidirectional serial data transfers on line CB2. These transfers are
controlled by an internal modulo-8 counter. Shift pulses can be applied to the CB1 line from an external
source, or (with proper mode selection) shift pulses may be generated internally which will appear on the
CB1 line for controlling external devices. Each SR operating mode is controlled by control bits within the
ACR. See Table 2-10 for control bit information. See also Figures 2-6 through 2-12.
                                                                                                          20


                Table 2-10 Shift Register and Auxiliary Control Register Control ($0A)
        7         6           5            4            3          2           1           0     SR
      SR7        SR6        SR5          SR4          SR3         SR2         SR1        SR0
                                   7      6      5    4      3    2      1    0   ACR
                                                      Shift Register
                                                      Mode Control
                                             Shift Register Control
                  4      3       2      Operation
                  0      0       0      Disabled
                  0      0       1      Shift in under control of T2
                  0      1       0      Shift in under control of PHI2
                  0      1       1      Shift in under control of external clock (CB1)
                  1      0       0      Shift out free running at T2 rate
                  1      0       1      Shift out under control of T2
                  1      1       0      Shift out under control of PHI2
                  1      1       1      Shift out under control of external clock (CB1)
Notes: 1.      When shifting out, bit 7 is the first bit out and simultaneously is rotated back into bit 0.
       2.      When shifting in, bits initially enter bit 0 and are shifted towards bit 7.
 2.12 Shift Register Input Modes
       2.12.1 Shift Register Disabled (000)
       In the 000 mode, the SR is disabled from all operation. The microprocessor can read or write the
       SR, but shifting is disabled and both CB1 and CB2 are controlled by bits in the PCR. The Shift
       Register Interrupt Flag (IFR2) is held low (disabled).
                                                                                                            21


2.12.2 Shift In - Counter T2 Control (001)
In this mode, the shifting rate is controlled by the low order eight bits of counter T2. Shift pulses are
generated on the CB1 line to control shifting in external devices. The time between transitions of
the CB1 output clock is determined by the PHI2 clock period and the contents of the low order T2
latch (N). Shifting occurs by writing or reading the SR. Data is shifted into the low order bit first,
and is then shifted into the next higher order bit on the negative going edge of each clock pulse.
Input data should change before the positive going edge of the CB1 clock pulse. This data is then
shifted into the SR during the PHI2 clock cycle following the positive going edge of the CB1 clock
pulse. After eight CB1 clock pulses, IFR2 will set and IRQB will go to a Logic 0. See Figure 2-6.
                             Figure 2-6 Shift In - Counter T2 Control
2.12.3 Shift In - PHI2 Clock Control (010)
In this mode, the shift rate is controlled by the PHI2 clock frequency. Shift pulses are generated on
the CB1 line to control shifting in external devices. Timer 2 operates as an independent interval
time and has no influence on the SR. Shifting occurs by reading or writing the SR. Data is shifted
into the low order bit first, and is then shifted into the next higher order bit on the trailing edge of the
PHI2 clock pulse. After eight clock pulses, IFR2 will be set, and output clock pulses on the CB1 line
will stop. See Figure 2-7.
                             Figure 2-7 Shift In - PHI2 Clock Control
                                                                                                          22


      2.12.4 Shift In - External CB1 Clock Control (011)
      In this mode, CB1 serves as an input to the SR. In this way, an external device can load the SR at
       its own pace. The SR counter will interrupt the microprocessor after each eight bits have been
       shifted in. The SR counter does not stop the shifting operation. Its function is simply that of a pulse
       counter. Reading or writing the SR resets IFR2 and initializes the counter to count another eight
       pulses. Note that data is shifted during the first PHI2 clock cycle following the positive going edge
       of the CB1 shift pulse. For this reason, data must be held stable during the first full cycle following
       CB1 going high. See Figure 2-8.
                         Figure 2-8 Shift In - External CB1 Clock Control Timing
2.13 Shift Register Output Modes
      2.13.1 Shift Out - Free Running at T2 Rate (100)
      This mode is similar to mode 101 in which the shifting rate is determined by T2. However, in mode
      100 the SR Counter does not stop the shifting operation. Since SR7 is re circulated back into SR0,
      the eight bits loaded into the SR will be clocked onto the CB2 line repetitively. In this mode, the SR
      Counter is disabled and IRQB is never set. See Figure 2-9.
                           Figure 2-9 Shift Out - Free Running T2 Rate Timing
                                                                                                            23


2.13.2 Shift Out - T2 Control (101)
In this mode, the shift rate is controlled by T2 (as in mode 100). However, with each read or write
of the SR Counter is reset and eight bits are shifted onto the CB2 line. At the same time, eight shift
pulses are placed on the CB1 line to control shifting in external devices. After the eight shift pulses,
the shifting is disabled, IFR2 is set, and CB2 will remain at the last data level. See Figure 2-10.
                           Figure 2-10 Shift Out - T2 Control Timing
2.13.3             Shift Out - PHI2 Clock Control (110)
In this mode, the shift rate is controlled by the system PHI2 clock. See Figure 2-11.
                          Figure 2-11 Shift Out - PHI2 Control Timing
                                                                                                     24


          2.13.4            Shift Out - External CB1 Clock Control (111)
          In the mode, shifting is controlled by external pulses applied to the CB1 line. The SR Counter sets
          IFR2 for each eight pulse count, but does not disable the shifting function. Each time the
          microprocessor reads or writes the SR, IFR2 is reset and the counter is initialized to begin counting
          the next eight pulses on the CB1 line. After eight shift pulses, IFR2 is set. The microprocessor can
          then load the SR with the next eight bits of data. See Figure 2-12.
                           Figure 2-12 Shift Out - External CB1 Clock Control Timing
 2.14    Interrupt Operation
There are three basic interrupt operations, including: setting the interrupt flag within IFR, enabling the
interrupt by way of a corresponding bit in the IER, and signaling the microprocessor using IRQB. An
Interrupt Flag can be set by conditions internal to the chip or by inputs to the chip from external sources.
Normally, an Interrupt Flag will remain set until the interrupt is serviced. To determine the source of an
interrupt, the microprocessor must examine each flag in order, from highest to lowest priority. This is
accomplished by reading the contents of the IFR into the microprocessor accumulator, shifting the contents
either left or right and then using conditional branch instructions to detect an active interrupt. Each Interrupt
Flag has a corresponding Interrupt Enable bit in the IER. The enable bits are controlled by the
microprocessor (set or reset). If an Interrupt Flag is a Logic 1, and the corresponding Interrupt Enable bit is
a Logic 1, the IRQB will go to a Logic 0. IRQB on the W65C22S is a full output driver that allows both Logic
1 and Logic 0 levels. The W65C22N and older NMOS and CMOS IRQB output is/was open drain pull down
only. The W65C22S IRQB should be logically ORed to reduce power and increase speed or wired ORed
with other devices using a diode that is forward biased when IRQB is low.
All Interrupt Flags are contained within a single IFR. Bit 7 of this register will be Logic 1 whenever an
Interrupt Flag is set, thus allowing convenient polling of several devices within a system to determine the
source of the interrupt.
The IFR and IER format and operation is shown in Tables 2-11 and 2-12. The IFR may be read directly by
the microprocessor, and individual flag bits may be cleared by writing a Logic 1 into the appropriate bit of the
IFR. Bit 7 of the IFR indicates the status of the IRQB output. Bit 7 corresponds to the following logic
function:
IRQ = IFR6 ∧ IER6 ∨ IFR5 ∧ IER5 ∨ IFR4 ∧ IER4 ∨ IFR3 ∧ IER3 ∨ IFR2 ∧ IER2 ∨ IFR1 ∧ IER1 ∨ IFR0 ∧
IER0.
Note: ∧ = Logical AND, ∨ = Logical OR.
                                                                                                              25


IFR7 is not a flag. Therefore, IFR7 is not directly cleared by writing a Logic 1 into its bit position. It can be
cleared, however, by clearing all the flags within the register, or by disabling all active interrupts as
presented in the next section.
Each Interrupt Flag within the IFR has a corresponding enable bit in IER. The microprocessor can set or
clear selected bits within the IER. This allows the control of individual interrupts without affecting others. To
set or clear a particular Interrupt Enable bit, the microprocessor must write to the IER address. During this
write operation, if IER7 is Logic 0, each Logic 1 in IER6 thru IER0 will clear the corresponding bit in the IER.
For each Logic 0 in IER6 thru IER0, the corresponding bit in the IER will be unaffected.
Setting selected bits in the IER is accomplished by writing to the same address with IER7 set to a Logic 1.
In this case, each Logic 1 in IER6 through IER0 will set the corresponding bit to a Logic 1. For each Logic 0
the corresponding bit will be unaffected. This method of controlling the bits in the IER allows convenient
user control of interrupts during system operation. The microprocessor can also read the contents of the
IER by placing the proper address on the Register Select and Chip Select inputs with the RWB line high.
IER7 will be read as a Logic 1.
                                    Table 2-11 Interrupt Flag Register ($0D)
            7          6          5          4           3            2          1          0        IFR
          IRQ       Timer1     Timer2      CB1         CB2          Shift       CA1       CA2
                                                                  Register
                     BIT         SET BY                CLEARED BY
                      0    CA2 active edge           Read or write ORA*
                      1    CA1 active edge           Read or write ORA
                      2    Complete 8 shifts         Read or write Shift Reg.
                      3    CB2 active edge           Read or write ORB*
                      4    CB1 active edge           Read or write ORB
                      5    Time out of T2            Read T2 low or write T2 high
                      6    Time out of T1            Read T1C-L low or write T1L-H high
                      7    Any enabled interrupt     Clear all interrupts
*      If the CA2/CB2 control in the PCR is selected as "independent" interrupt input, then reading or writing
       the output register ORA/ORB will not clear the flag bit. Instead, the bit must be cleared by writing into
       the IFR, as described previously.
                                                                                                               26


                              Table 2-12 Interrupt Enable Register ($0E)
     7             6           5          4           3           2            1            0        IER
  Set/Clear    Timer1       Timer2      CB1          CB2        Shift        CA1          CA2        0=Interrupt
                                                              Register                               Disabled
                                                                                                     1=Interrupt
                                                                                                     Enabled
Notes:
1. If bit 7 is a "0", then each Logic 1 in bits 0-6 disables the corresponding interrupt.
2. If bit 7 is a "1", then each Logic 1 in bits 0-6 enables the corresponding interrupt.
3. If a read of this register is done, bit 7 will be Logic 1 and all other bits will reflect their enable/disable
state.
                                                                                                               27


3. PIN FUNCTION DESCRIPTION
                  Figure 3-1 W65C22 40 Pin PDIP Pinout
                  Figure 3-2 W65C22 44 Pin PLCC Pinout
                                                       28


Figure 3-3 W65C22 44 Pin QFP Pinout
                                    29


                                        Table 3-1 Pin Function Table
                                          Pin                   Description
                                   CA1, CA2           Peripheral A Control Lines
                                   CB1, CB2           Peripheral B Control Lines
                                   CS1, CS2B          Chip Select
                                   D0-D7              Data Bus
                                   IRQB               Interrupt Request
                                   PA0-PA7            Peripheral I/O Port A
                                   PB0-PB7            Peripheral I/O Port B
                                   PHI2               Phase 2 Internal Clock
                                   RESB               Reset
                                   RS0-RS3            Register Select
                                   R/WB               Read/Write
                                   VDD                Positive Power Supply
                                   VSS                Internal Logic Ground
 3.1    Peripheral Data Port A Control Lines (CA1, CA2)
CA1 and CA2 serve as interrupt inputs or handshake outputs for PA. Each line controls an internal Interrupt
Flag with a corresponding Interrupt Enable bit. CA1 also controls the latching of Input Data on PA. CA1
and CA2 are high impedance CMOS inputs with a bus holding device. In the output mode, CA2 will drive
two standard TTL loads.
 3.2    Peripheral Data Port B Control Lines (CB1, CB2)
CB1 and CB2 serve as interrupt inputs or handshake outputs for PB. Like PA, these two control lines
control an internal Interrupt Flag with a corresponding Interrupt Enable bit. These lines also serve as a
serial data port under control of the SR. Each control line represents a CMOS input with a bus holding
device in the input mode and can drive two standard TTL loads in the output mode.
 3.3    Chip Select (CS1, CS2B)
Normally, CS1 and CS2B are connected to the microprocessor address lines. This connection may be
direct or through decoding. To access a selected W65C22 register, CS1 must be logic 1 and CS2B must
be logic 0. These pins have a bus holding devices on the W65C22S.
                                                                                                        30


  3.4    Data Bus (D0-D7)
The eight bidirectional lines D0-D7 are used to transfer data between the W65C22 and the microprocessor.
During a Read operation, the contents of the selected W65C22 internal register are transferred to the
microprocessor via D0-D7. During a Write operation, D0-D7 serve as high impedance inputs over which
data is transferred from the microprocessor to a selected W65C22 register. D0-D7 are in the high
impedance state when the W65C22 is unselected. The W65C22S has a bus holding device, in case the bus
tries to float, the data bus will be held in its previous state.
  3.5    Interrupt Request (IRQB)
The IRQB output signal is logic 0 whenever an internal Interrupt Flag bit is set to logic 1 and the
corresponding Interrupt Enable bit is logic 1. The IRQB output is a full output driver that outputs both logic 1
and logic 0 levels. The W65C22N and older NMOS and CMOS IRQB output is/was an open drain pull
down only, thus allowing the IRQB signal to be wire ORed with an external resistor for a common
microprocessor IRQB input line. The W65C22S IRQB can be wire ORed with a pull down diode that is
forward biased when IRQB is low. See Figure 3.4 IRQB for the IRQB buffer schematics for both the
W65C22N and W65C22S.
The IRQB pin on the W65C22S is a standard totem pole output. The W65C22S IRQB signal was meant for
logically ORing rather than wire ORing the IRQ’s of a system. This change was made to improve the low
power, high speed characteristics of the part. For systems that have wire ORed IRQB outputs a solution is to
place a low voltage diode (<0.5V) in series with the W65C22S totem pole IRQB output.
                               Figure 3-4 IRQB Buffer - W65C22N and W65C22S
                                                                                                             31


 3.6    Peripheral Data Port A (PA0-PA7)
PA is an 8 line, bidirectional bus used for the transfer of data, control and status information between the
W65C22 and a peripheral device. Each PA bus line may be individually programmed as either an input or
output under control of DDRA. Data flow direction may be selected on a line by line basis with intermixed
input and output lines within the same port. When logic 0 is written to any bit position of DDRA, the
corresponding line will be programmed as an input. Likewise, when logic 1 is written into any bit position of
the register, the corresponding data pin will serve as an output. The data read is determined by ORA when
input data is latched into the IRA under control of the CA1 line. All modes are program controlled by way of
the W65C22's internal control registers. Each PA line represents a CMOS capacitive load in the input mode
and will drive two standard TTL loads in the output mode.
The PA data port of the W65C22S has improved high impedance CMOS inputs, bus holding devices and
high speed CMOS output drive for logic 1 level. This allows for higher speed operation no longer dependent
on the RC time constant of older NMOS and CMOS designs. See Figures 3-5 through 3-8 for buffer
schematic comparisons with W65C22N, W65C22S and legacy obsolete versions.
                             Figure 3-5 W65C22S Port A Buffer (PA0-PA7, CA2)
              Figure 3-4 W65C22N and GTE - G65SC22 CMOS Port A Buffer (PA0-PA7, CA2)
                                                                                                          32


Figure 3-7 Rockwell – R65NC22 CMOS Port A Buffer (PA0-PA7, CA2)
 Figure 3-8 Rockwell – R6522 NMOS Port A Buffer (PA0-PA7, CA2)
                                                                33


 3.7   Peripheral Data Port B (PB0-PB7)
PB is an 8 line, bidirectional bus which is controlled by an ORA, IRB, and DDRB in a manner much the
same as PA. With respect to PB, the output signal on line PB7 may be controlled by Timer 1 while Timer 2
may be programmed to count pulses on the PB6 line. The W65C22S PB lines represent one CMOS high
impedance load with bus holding device in the input mode and will drive two TTL loads in the output mode.
PB lines are also capable of sourcing 3.0 mA at 1.5 V in the output mode. This allows the output to directly
drive Darlington transistor circuits. Note that the W65C22S does not have current limiting resistors;
however, the W65C22N does have current limiting resistors. See Figures 3-9 through 3-12 for PB schematic
comparisons of W65C22N, W65C22S and legacy obsolete versions of the 6522.
                       Figure 3-9 W65C22S Port B Buffer (PB0-PB7, CB1, and CB2)
       Figure 3-10 W65C22N and GTE - G65SC22 CMOS Port B Buffer (PB0-PB7, CB1, and CB2)
                                                                                                         34


         Figure 3-11 Rockwell - R65NC22 (CMOS), R6522 (NMOS) Port B Buffers (PB0-PB7)
* Note: The Rockwell Data Book / Data Sheet has these inverters; however the buffers are really like the
G65SC22 buffers we think this is a schematic mistake.
           Figure 3-12 Rockwell – R65NC22 (CMOS), R6522 NMOS - CB1, and CB2 Buffer
                                                                                                      35


  3.8   Phase 2 Internal Clock (PHI2)
The system PHI2 Input Clock controls all data transfers between the W65C22 and the microprocessor.
  3.9   Reset (RESB)
Reset clears all internal registers (except T1 and T2 counters and latches, and the SR. In the RESB
condition, all pins are placed in the input state and bus holding devices maintain initial level if not driven.
The initial level can be Logic 1 or Logic 0 and are not initialized by on chip circuitry. Also, T1 and T2, SR
and the interrupt logic are disabled from operation. All inputs have NOR gates with reset overriding the
input pin value. Schmitt trigger NOR gates are on CA1, CA2, DB1, CB2, and PH2. Reset has a Schmitt
trigger inverter input. The W65C22S RESB input has a bus holding device.
  3.10 Register Select (RS0-RS3)
The RS0-RS3 inputs allow the microprocessor to select one of 16 internal registers within the W65C22.
Refer to Table 1 for Register Select coding and a functional description. The W65C22S RS0-RS3 pins
have bus holding devices.
  3.11 RWB (Read/Write)
The RWB signal is generated by the microprocessor and is used to control the transfer of data between the
W65C22 and the microprocessor. When RWB is at a Logic 1 and the chip is selected, data is transferred
from the W65C22 to the microprocessor (Read operation). Conversely, when RWB is at logic 0, data is
transferred from the processor to the selected W65C22 register (Write operation). RWB must always be
preceded by a proper level on CS1, CS2B. The W65C22S RWB pin has a bus holding device.
  3.12 VDD and VSS
VDD is the positive supply voltage and VSS is system logic ground.
                                                                                                             36


4. TIMING, AC AND DC CHARACTERISTICS
 4.1    W65C22 Absolute Maximum Ratings
                                     Table 4-1 Absolute Maximum Ratings
                                     Rating              Symbol                Value
                           Supply Voltage                 VDD              -0.3 to +7.0V
                           Input Voltage                  VIN           -0.3 to VDD +0.3V
                           Storage Temperature             TS            -55°C to +150°C
This device contains input protection against damage due to high static voltages or electric fields; however,
precautions should be taken to avoid application of voltages higher than the maximum rating.
Note: Exceeding these ratings may result in permanent damage. Functional operation under these
conditions is not implied.
                                                                                                           37


  4.2    DC Characteristics TA= -40°C to +85C°
                                                       Table 4-2a W65C22N DC Characteristics
                                                                                                                  5.0 +/-5%
                      Symbol                                         Parameter                                                             Units
                                                                                                            Min              Max
                        VDD             Supply Voltage                                                      4.75              5.25           V
                         Vih            Input High Voltage, All inputs (VDD=MAX)                              2.0          VDD+0.3           V
                          Vil           Input Low Voltage, All inputs (VDD=MIN)                              -0.3              0.8           V
                          Iin           Input Leakage Current, Vin = 0.4V to 2.4V (VDD=MAX)                   -20              20           nA
                                        Input High Current Vin = 2.4V (VDD=MIN)
                          Iih           PA0-PA7, PB0-PB7, CA2, CB1, CB2
                                                                                                            -200                            uA
                                        Input Low Current Vin = 0.4V (VDD=MAX)
                           Iil          PA0-PA7, PB0-PB7, CA2, CB1, CB2
                                                                                                                               1.6          mA
                                        Output Low Voltage (VDD=MIN) (Iol=3.2mA)
                         Vol            All outputs PA0-PA7, PB0-PB7, CA2, CB1, CB2, DB0-DB7, IRQB
                                                                                                                               0.4           V
                                        Output High Voltage (VDD=MIN) (Ioh=-200uA)
                        Voh             (VDD=MN) All outputs
                                                                                                              2.4               -            V
                                        Output High Current (Sourcing) (Voh=1.5V) (VDD=MIN)
                         Ioh            PB0-PB7
                                                                                                             -3.0                           mA
                                        Supply Current (With tester loading) (1)                               -               0.5         mA/
                         Idd            Supply Current (CORE) (1)                                              -               0.2
                                                                                                                                           MHz
                        Cin*            Input Capacitance, f = 1 MHz                                           -               5.0          pF
                       Cout*            Output Capacitance, f = 1 MHz                                          -               5.0          pF
                                                        Table 4-2b W65C22S DC Characteristics
                                                                5.0 +/-10%             3.3+/-10%             3.0+/-5%                   2.5+/-5%               1.8+/-5%
Symbol                   Parameter                                                                                                                                             Units
                                                              Min         Max        Min       Max       Min           Max          Min         Max      Min          Max
  VDD     Supply Voltage                                        4.5         5.5      2.97       3.63     2.85            3.15       2.37          2.63    1.71          1.89     V
   Vih    Input High Voltage - All inputs                   VDDx0.8      VDD+0.3    VDDx0.7   VDD+0.3   VDDx0.7       VDD+0.3      VDDx0.7     VDD+0.3   VDDx0.7     VDD+0.3     V
    Vil   Input Low Voltage - All inputs                     VSS-0.3     VDDx0.2    VSS-0.3   VSSx0.3   VSS-0.3       VDDx0.3      VSS-0.3     VDDx0.3   VSS-0.3     VDDx0.3     V
          Input     Leakage     Current,       Vin   =
    Iin   VDD(MAX)x0.2 to VDD(MAX)x0.8                         -100         100       -20        20       -20             20         -20           20      -20           20     nA
          For PHI2
          Input Bus Holding Current
   Iinh   Vin = VDD(MIN)x0.8                                    -3           -9        -4        -7        -4             -6          -1           -3      -1.5          -2     uA
          All pins except PHI2,IRQB,VDD,VSS
          Input Bus Holding Current
    Iinl  Vin = VDD(MAX)x0.2                                     8           20         6         9         4              7          3.5           5        .5         1.5     uA
          All pins except PHI2,IRQB,VDD,VSS
          Output Low Current (Vol = 0.4v)(VDD=MIN)
    Iol   All outputs
                                                                3.2           -       1.6         -        1.6             -          1.0           -       0.5           -    mA
          Output High Current (Voh=VDD-0.4v)
   Ioh    (VDD=MIN) All outputs
                                                             -3.2mA           -      .350         -      .300              -        .200            -     .100            -    mA
          Output High Current (Sourcing) Voh=1.5V
   Ioh    Direct Transistor Drive - All outputs
                                                               -3.0      -100.0 (2)   -3.0    -10.0 (3)   -2.0         -7.0 (3)      -1.5       -5.0 (3)   -1.0       -4.0 (3) mA
          Supply Current (With tester loading) (1)               -          0.5         -        0.4        -            0.35          -          0.3         -         0.25   mA/
   Idd    Supply Current (CORE) (1)                              -          0.2         -       0.15        -           0.125          -          0.10        -         0.08
                                                                                                                                                                               MHz
  Cin*    Input Capacitance, f = 1 MHz                           -          5.0         -        5.0        -             5.0          -           5.0        -          5.0    pF
  Cout*   Output Capacitance, f = 1 MHz                          -          5.0         -        5.0        -             5.0          -           5.0        -          5.0    pF
Notes: 20100527 DC Characteristics updated for HiLevel Production Testing
* These are estimated characteristics. –
(1) These are estimated power characteristics.
(2) PAx and PBx are high drive. Use external current limiting resistors for W65C22S. W65C22N has built in current
limiting resistors.
(3) These are estimated characteristics. Special testing available upon request for a fee.
                                                                                                                                                                         38


 Figure 4-1a W65C22N IDD vs. VDD
Figure 4-2a W65C22N F Max vs. VDD
                                  39


40

 Figure 4-1b W65C22S IDD vs. VDD
Figure 4-2b W65C22S F Max vs. VDD
                                  41


4.3 AC Characteristic TA=-40°C to +85°C
                            Table 4-3a W65C22N AC Characteristics
                                   Processor Interface Timing
                                                      5.0+/-5%
                      Symbol        Parameter       Min     Max  Units
                                                        14 MHz
                       tCYC    Cycle Time            70        - nS
                      tPWH     Phase 2        Pulse              nS
                                                     35        -
                               Width High
                       tPWL    Phase 2        Pulse              nS
                                                     35        -
                               Width Low
                        tR,F   Phase 2 Transition     -       5  nS
                               CSx, RSx, RWB
                      tACR                           10        - nS
                               Setup - READ
                               CSx, RSx, RWB
                      tCAR     Hold (PHI2 rising     10        - nS
                               edge) - READ
                      tCDR     Data Bus Delay         -       20 nS
                               Data Bus       Hold
                        tHR                          10        - nS
                               Time
                               Peripheral     Data
                      tPCR                           10        - nS
                               Setup
                               CSx, RSx, RWB
                      tACW                           10        - nS
                               Setup - WRITE
                               CSx, RSx, RWB
                      tCAW     Hold (PHI2 rising     10        - nS
                               edge) - WRITE
                        tDC    Data Bus Setup        10        - nS
                         W
                        tHW    Data Bus Hold         10        - nS
                               Peripheral     Data
                      tCPW                            -      250 nS
                               Delay
                                                                       42


                                 Table 4-3b W65C22S AC Characteristics
                                        Processor Interface Timing
                              5.0+/-5%       3.3 +/-10%         3.0+/-5%       2.5+/-5%     1.8+/-5%
 Symbol      Parameter       Min    Max     Min       Max   Min        Max Min        Max Min      Max  Units
                                14 MHz          10 MHz           8 MHz          4 MHz         2MHz
 tCYC   Cycle Time           70       -     100        -    125          - 250          - 500       -    nS
 tPWH   Phase 2        Pulse                                                                             nS
                             35       -     50         -     62          - 125          - 250       -
        Width High
 tPWL   Phase 2        Pulse                                                                             nS
                             35       -     50         -     63          - 125          - 250       -
        Width Low
  tR,F  Phase 2 Transition    -      5        -        5      -          5   -          5   -       5    nS
        CSx, RSx, RWB
 tACR                        10       -      10        -     10          -  20          -  40       -    nS
        Setup - READ
        CSx, RSx, RWB
 tCAR   Hold (PHI2 rising    10       -      10        -     10          -  10          -  10       -    nS
        edge) - READ
tCDR    Data Bus Delay        -      20       -       25      -         35   -         80   -      180   nS
        Data Bus       Hold
  tHR                        10       -      10        -     10          -  10          -  10       -    nS
        Time
        Peripheral     Data
 tPCR                        10       -      10        -     30          -  60          - 120       -    nS
        Setup
        CSx, RSx, RWB
tACW                         10       -      10        -     10          -  20          -  90       -    nS
        Setup - READ
        CSx, RSx, RWB
tCAW    Hold (PHI2 rising    10       -      10        -     10          -  10          -  10       -    nS
        edge) - READ
tDCW    Data Bus Setup       10       -      10        -     10          -  20          -  40       -    nS
  tHW   Data Bus Hold        10       -      10        -     10          -  10          -  10       -    nS
        Peripheral     Data
tCPW                          -      30       -       50      -         60   -        120   -      240   nS
        Delay
                                                                                                       43


                                           Table 4-4a W65C22N AC
                                          Peripheral Interface Timing
                                                                    5.0+/-5%
                   Symbol   Parameter                           Min        Max Units Figure
                                                                     14 MHz
                            Rise & Fall Time for CA1, CB1,
                    tR, tF                                        -         70  nS      -
                            CA2 and CB2 Input Signals
                            Delay Time, Clock Negative
                     tCA2                                         -         75  nS     4-3
                            Transition to CA2 Negative
                                                                                       4-4
                            Transition (Read Handshake or
                            Pulse Mode
                            Delay Time, Clock Negative
                     tRS1                                         -         75  uS     4-3
                            Transition to CA2 Positive
                            Transition (Pulse Mode)
                            Delay     Time,     CA1     Active
                     tRS2                                         -        100  nS     4-4
                            Transition to CA2 Positive
                            Transition (Read Handshake
                            Mode)
                            Delay Time, Clock Positive
                    tWHS                                          -         75  nS     4-5
                            Transition to CA2 or CB2                                   4-6
                            Negative      Transition    (Write
                            Handshake)
                            Delay Time, Peripheral Data
                      tDS                                         -        100  nS     4-5
                            Valid to CB2 Negative Transition                           4-6
                            Delay Time, Clock Positive
                     tRS3                                         -        150  nS     4-5
                            Transition to CA2 or CB2 Positive
                            Transition (Write Pulse Mode)
                            Delay Time, CA1 or CB1 Active
                     tRS4                                         -         88  ns     4-6
                            Transition to CA2 or CB2 Positive
                            Transition (Handshake Mode)
                            Delay Time Required from CA2
                       t21                                        -         88  nS     4-6
                            Output to CA1 Active Transition
                            (Write Handshake Mode)
                            Set-up Time, Peripheral Data
                        tIL                                     62           -  nS     4-7
                            Valid to CA1 or CB1 Active
                            Transition (Input Latching)
                            Shift-Out Delay Time - Time from
                     tSR1                                         -         35  nS     4-8
                            PHI2 Falling Edge to CB2 Data
                            Out
                            Shift-In Set-up Time - Time from
                     tSR2                                       105          -  nS     4-9
                            CB2 Data in to PHI2 Rising Edge
                            External Shift Clock (CB1) Set-up
                     tSR3                                        0        tCYC  nS     4-9
                            Time Relative to PHI2 Trailing
                            Edge
                            Pulse Width - PB6 Input Pulse        2x          -
                     tIPW                                                       nS    4-11
                                                               tCYC
                            Pulse Width - CB1 Input Clock        2x          -
                     tICW                                                       nS    4-10
                                                               tCYC
                            Pulse Spacing - PB6 Input Pulse      2x          -
                      tIPS                                                      nS    4-11
                                                               tCYC
                            Pulse Spacing - CB1 Input Pulse      2x          -
                      tICS                                                      nS    4-10
                                                               tCYC
                            CA1, CB1 Set Up Prior to
                       tAL                                      88           -  nS     4-7
                            Transition to Arm Latch
                            Peripheral Data Hold after CA1,
                    tPDH                                        10           -  nS     4-7
                            CB1 Transition
Note: See Figure 4-12 for test load
                                                                                            44


                                                               Table 4-4b W65C22S AC
                                                              Peripheral Interface Timing
                                                     5.0+/-5%          3.3 +/-10%        3.0+/-5%        2.5+/-5%         1.8+/-5%
Symbol       Parameter                           Min        Max      Min        Max  Min        Max  Min         Max  Min        Max  Units    Figure
                                                      14 MHz             10 MHz           8 MHz           4 MHz            2 MHz
             Rise & Fall Time for CA1, CB1,
 tR, tF                                            -         70        -        100    -        125    -         250    -         500  nS         -
             CA2 and CB2 Input Signals
             Delay Time, Clock Negative
  tCA2                                             -         75        -        105    -        130    -         255    -         505  nS        4-3
             Transition to CA2 Negative                                                                                                          4-4
             Transition (Read Handshake or
             Pulse Mode
             Delay Time, Clock Negative
  tRS1                                             -         75        -        105    -        130    -         255    -         505  uS        4-3
             Transition to CA2 Positive
             Transition (Pulse Mode)
             Delay     Time,     CA1     Active
  tRS2                                             -        100        -        135    -        160    -         285    -         535  nS        4-4
             Transition to CA2 Positive
             Transition (Read Handshake
             Mode)
             Delay Time, Clock Positive
 tWHS                                              -         75        -        105    -        130    -         255    -         505  nS        4-5
             Transition to CA2 or CB2                                                                                                            4-6
             Negative      Transition    (Write
             Handshake)
             Delay Time, Peripheral Data
   tDS                                             -        100        -        135    -        160    -         285    -         535  nS        4-5
             Valid to CB2 Negative Transition                                                                                                    4-6
             Delay Time, Clock Positive
  tRS3                                             -        150        -        220    -        270    -         520    -        1020  nS        4-5
             Transition to CA2 or CB2 Positive
             Transition (Write Pulse Mode)
             Delay Time, CA1 or CB1 Active
  tRS4                                             -         88        -        125    -        160    -         285    -        535   ns        4-6
             Transition to CA2 or CB2 Positive
             Transition (Handshake Mode)
             Delay Time Required from CA2
    t21                                            -         88        -        125    -        160    -         285    -        535   nS        4-6
             Output to CA1 Active Transition
             (Write Handshake Mode)
             Set-up Time, Peripheral Data
     tIL                                         62           -      92           -  115          -  240          -   490          -   nS        4-7
             Valid to CA1 or CB1 Active
             Transition (Input Latching)
             Shift-Out Delay Time - Time from
  tSR1                                             -         35        -         43    -         70    -         130    -         260  nS        4-8
             PHI2 Falling Edge to CB2 Data
             Out
             Shift-In Set-up Time - Time from
  tSR2                                           105          -      155          -  195          -  380          -   780          -   nS        4-9
             CB2 Data in to PHI2 Rising Edge
             External Shift Clock (CB1) Set-up
  tSR3                                            0        tCYC       0        tCYC   0        tCYC   0         tCYC   0        tCYC   nS        4-9
             Time Relative to PHI2 Trailing
             Edge
             Pulse Width - PB6 Input Pulse        2x          -       2x          -   2x          -   2x          -    2x          -
  tIPW                                                                                                                                 nS       4-11
                                                tCYC                tCYC            tCYC            tCYC             tCYC
             Pulse Width - CB1 Input Clock        2x          -       2x          -   2x          -   2x          -    2x          -
  tICW                                                                                                                                 nS       4-10
                                                tCYC                tCYC            tCYC            tCYC             tCYC
             Pulse Spacing - PB6 Input Pulse      2x          -       2x          -   2x          -   2x          -    2x          -
   tIPS                                                                                                                                nS       4-11
                                                tCYC                tCYC            tCYC            tCYC             tCYC
             Pulse Spacing - CB1 Input Pulse      2x          -       2x          -   2x          -   2x          -    2x          -
   tICS                                                                                                                                nS       4-10
                                                tCYC                tCYC            tCYC            tCYC             tCYC
             CA1, CB1 Set Up Prior to
    tAL                                          88           -      125          -  150          -  300          -   600          -   nS        4-7
             Transition to Arm Latch
             Peripheral Data Hold after CA1,
 tPDH                                            10           -      20           -  20           -  20           -   20           -   nS        4-7
             CB1 Transition
         Note:     See Figure 4-12 for test load
                                                                                                                                            45


 4.4 Timing Diagrams
Note: Measurement points are at 50% of VDD unless otherwise specified.
                                    Figure 4-1 Read Timing
                                    Figure 4-2 Write Timing
                                                                       46


       Figure 4-3 Read Handshake, Pulse Mode (CA2)
Figure 4-4 Read Handshake, Handshake Mode Timing (CA2)
Figure 4-5 Write Handshake, Pulse Mode Timing (CA2, CB2)
                                                         47


                  Figure 4-6 Write Handshake, Handshake Mode Timing (CA2, CB2)
PA, PB PERIPHERAL
INPUT DATA
                                                         tIL           tPDH
CA1, CB1 INPUT
LATCHING CONTROL
                                                     tAL
                                                                    ACTIVE
                                                                    TRANSITION
                           Figure 4-7 Peripheral Data, Input Latching Timing
                   Figure 4-8 Data Shift Out, Internal or External Shift Clock Timing
                                                                                      48


Figure 4-9 Data Shift In, Internal or External Shift Clock Timing
           Figure 4-10 External Shift Clock Timing
            Figure 4-11 Pulse Count Input Timing
       Figure 4-12 Test Load (All Dynamic Parameters)
                                                                  49


5. CAVEATS
 5.1   Older Versions
On older versions of the 6522 and 65C22, which are not internally chip selected, random register are read
due to register select values. The W65C22 selects only register 15 ($F) internally. This feature has been
added for systems which have indeterminate register select values.
 5.2   Shift Clock
When outputting the Shift Clock, the CB1 pin may be overdriven without affecting the shifting function.
However, this is not recommended as it will result in high currents and possible damage to the part.
Because some systems have been arbitrating the clock after data has been transferred, this feature was
added.
 5.3   Bus Holding Pins
All W65C22S pins except PHI2 have bus holding devices.           The original NMOS 6522, W65C22N,
G65SC22, and R65NC22 did not have bus holding devices.
                    Figure 5-1 High Resistance Bus Holding Device on the W65C22S
 5.4   Current Limiting
The W65C22S output pins do not have current limiting and can over drive circuitry connected to these
pins. The original NMOS 6522 and W65C22N have current limiting resistors in series with PB and PA
outputs.
                                                                                                         50


6. HARD CORE MODEL
  6.1   W65C22C vs. W65C22S
The W65C22C is functionally equivalent to the W65C22S except it does not have the output drive
transistors and does not have ESD protection.
  6.2   Chip Select
If Chip Select, CS1 is not used, it should be held in the high state. If Chip Select, CS2B, is not used it
should be held in the low state.
  6.3   W65C22C and W65C22S Timing
The timing of the W65C22C is the same as the W65C22S in that the input buffers are the same and the
output transistor drivers are the same as the W65C22S. When applying the W65C22S core, the output
delays should be analyzed after adding the output drive transistors and the output load capacitance.
                                                                                                         51


  7. ORDERING INFORMATION
                                         Example: W65C22N6TPLG-14
              Description                                                                 W65C
              W65C = standard product
              Product Identification Number                                                22N
              22N = NMOS Compatible
              22S = Standard CMOS
              Foundry Process                                                               6T
              6T = 0.6u TSMC Process
              Package                                                                       PL
              P = Plastic Dual-In-Line, 40 pins
              PL = Plastic Leaded Chip Carrier, 44 pins
              RoHS/Green Compliance                                                          G
              G = RoHS/Green Compliant (Wafer and Packaging)
              Temperature/Processing
              Blank = -40ºC to + 85ºC
              Speed Designator                                                              -14
              -14 = 14MHz
____________________________________________________________________________________
  To receive general sales or technical support on standard product or information about our module
  library licenses, contact us at:
                                        The Western Design Center, Inc.
                                             2166 East Brown Road
                                           Mesa, Arizona 85213 USA
                                   Phone: 480-962-4545 Fax: 480-835-6442
                                        Info@WesternDesignCenter.com
                                        www.WesternDesignCenter.com
_______________________________________________________________________________________
  WARNING: MOS CIRCUITS ARE SUBJECT TO DAMAGE FROM STATIC ELECTRICAL CHARGE
  BUILDUPS. Industry established recommendations for handling MOS circuits include:
  1.     Ship and store product in conductive shipping tubes or conductive foam plastic. Never ship or store
         product in non-conductive plastic containers or non-conductive plastic foam material.
  2.     Handle MOS parts only at conductive work stations.
  3.     Ground all assembly and repair tools.
                                                                                                            52


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Western Design Center (WDC):
 W65C22N6TPG-14 W65C22N6TPLG-14 W65C22S6TPG-14 W65C22S6TPLG-14 W65C22S6TQG-14
