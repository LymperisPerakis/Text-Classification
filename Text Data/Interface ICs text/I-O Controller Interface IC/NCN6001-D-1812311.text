NCN6001
Compact Smart Card
Interface IC
  The NCN6001 is an integrated circuit dedicated to the smart card
interface applications. The device handles any type of smart card
through a simple and flexible microcontroller interface. On top of that,
thanks to the built−in chip select pin, several couplers can be                            www.onsemi.com
connected in parallel.
  The device is particularly suited for low cost, low power
applications, with high extended battery life coming from extremely
low quiescent current.
                                                                                                      1
Features
                                                                                                 TSSOP−20
•  100% Compatible with ISO 7816−3, EMV and GIE−CB Standards                                    DTB SUFFIX
•  Fully GSM Compliant                                                                          CASE 948E
•  Wide Battery Supply Voltage Range: 2.7 < VCC < 5.5 V
•  Programmable CRD_VCC Supply Handles 1.8 V, 3.0 V or 5.0 V                              PIN CONNECTIONS
   Card Operation
•  Programmable Rise and Fall Card Clock Slopes                                      I/O 1                        20 CRD_IO
•  Programmable Card Clock Divider                                                  INT 2                         19 CRD_RST
•  Built−in Chip Select Logic Allows Parallel Coupling Operation               CLK_IN 3                           18 CRD_DET
•  ESD Protection on Card Pins (8.0 kV, Human Body Model)                         MOSI 4                          17 CRD_CLK
•  Supports up to 40 MHz Input Clock                                         CLK_SPI 5                            16 GND
•  Built−in Programmable CRD_CLK Stop Function Handles Run or                EN_RPU 6                             15 C4/S0
   Low State                                                                      MISO 7                          14 C8/S1
•  Programmable CRD_CLK Slopes to Cope with Wide Operating                           CS 8                         13 CRD_VCC
   Frequency Range                                                                  VCC 9                         12 Lout_H
•  Fast CRD_VCC Turn−on and Turn−off Sequence                                   Lout_L 10                         11 PWR_GND
•  These are Pb−Free Devices
                                                                                                 (Top View)
Typical Applications
•  E−Commerce Interface                                                                  MARKING DIAGRAM
•  Automatic Teller Machine (ATM) Smart Card
•  Point of Sales (POS) System                                                            20
•  Pay TV System                                                                                     NCN
                                                                                                     6001
                                                                                                   ALYWG
                                                                                                       G
                                                                                           1
                                                                                        A    = Assembly Location
                                                                                        L    = Wafer Lot
                                                                                        Y    = Year
                                                                                        W    = Work Week
                                                                                        G    = Pb−Free Package
                                                                              (Note: Microdot may be in either location)
                                                                                    ORDERING INFORMATION
                                                                         See detailed ordering and shipping information in the package
                                                                         dimensions section on page 32 of this data sheet.
 © Semiconductor Components Industries, LLC, 2014             1                                        Publication Order Number:
 October, 2014 − Rev. 6                                                                                                  NCN6001/D


                                                                                                         NCN6001
                                                            VCC
                                                                                                                                                                                               J1
               C1       10 F                                                                                                                           17
                                                                                      U1                                                         GND                        Swa
                                                                      9                                            18                                   18
                 GND                                                       VCC                           CRD_DET                                                            Swb
                                                                      1                                            20                                           7
                                                                           I/O                            CRD_IO                                                            I/O
                                                                      2                                            19                                           2
                                                                           INT                           CRD_RST                                                            RST
                                                                                                                                                                                                    ISO7816
                                                                      3                                            17                                           3
                         MICROCONTROLLER
                                                                           CLK_IN                        CRD_CLK                                                            CLK
                                                                      4                                            13                                           5
                                                                           MOSI                          CRD_VCC                                                            GND
                                                                      5                                            15                            GND
                                                                           CLK_SPI                         C4/S0                                                1
                                                                      7                                            14                                                       VCC
                                                                           MISO                            C8/S1                                                 4
                                                                                                                                                                            C4
                                                                      8                                            16                                           8
                                                                           CS                               GND                                                             C8
                                                                      6                                               11                       C2
                                                                           EN_RPU                PWR_GND                                       10 F                   SMARTCARD_C
                                                               R1     10                                           12
                                                               47 k        Lout_L          Lout_H
                                                                                    NCN6001
                                                            VCC                         L1
                        GND                                                                                                               GND
                                                                                     22 H
                                                                              Figure 1. Typical Application
               VCC
                                                                                                                      PROGRAMMABLE
                 50 k                                                                                                                                                                                           18 CRD_DET
                                                                                                                      CARD DETECTION
    INT   2                                 INTERRUPT BLOCK
                                                                                                                                                                                                      500 k
                                                                                                                                                                                                              VCC
    CS    8                                                  b7
                                                                                                                                                                                                                9   VCC
                                                             b6
                                                                                                                                                                             DC/DC CONVERTER
                                                                                      ADDRESS DECODING
                                                                                                                           b0
  MISO
                                             DUAL 8−BIT
                3 States                                     b5
          7                                                                                                                b1                                                                                   10 Lout_L
                                                             b4
                                                             b3
                                                                                                                                                                                                                12 Lout_H
  MOSI                                                       b2
                                           SHIFT REGISTER
          4                                                  b1                                                                                                                                                 13 CRD_VCC
                                                             b0
CLK_SPI
          5                                                                                                                                                                                                     11 PWR_GND
                                                                                                                                                                                                    GND
                                                                                                            b7   b6             b5        b4
                                                                  LOGIC CONTROL
                                                                                                                      ISO7816 SEQUENCER
                                                     b3        b2                                                                                                                                               15 C4/S0
                                                                                                                                                         CARD PINS DRIVER
                                                            CLOCK                                                                                                                                               14 C8/S1
 CLK_IN   3
                                                            DIVIDER
                                                                                                                                                                                                                19 CRD_RST
EN_RPU    6
                                                                                                                                                                                                                17 CRD_CLK
                                                                       20 k                                                                                                                                     20 CRD_IO
    I/O   1
                                                                                                                                                                                                20 k
GROUND    16
                     GND                                                                                                                               CRD_VCC
                                                                                 Figure 2. Block Diagram
                                                                                    http://onsemi.com
                                                                                                            2


                                                     NCN6001
PIN FUNCTIONS AND DESCRIPTION
TSSOP    Name         Type                                                 Description
  1        I/O    Input/Output This pin is connected to an external microcontroller interface. A bidirectional level translator
                     Pullup    adapts the serial I/O signal between the smart card and the microcontroller. The level
                               translator is enabled when CS = L, the sub address has been selected and the system
                               operates in the Asynchronous mode. When a Synchronous card is in use, this pin is
                               disconnected and the data and the transaction take place with the MISO b3 register.
                               The internal pullup resistor connected on the C side is activated and visible by the selected
                               chip only.
  2       INT       OUTPUT     This pin is activated LOW when a card has been inserted and detected by CRD_DET pin.
                     Pullup    Similarly, an interrupt is generated when the CRD_VCC output is overloaded, or when the card
                               has been extracted whatever be the transaction status (running or standby).
                               The INT signal is reset to High according to Table 7 and Figure 10. On the other hand, the pin
                               is forced to a logic High when the input voltage VCC drops below 2.0 V.
  3     CLK_IN       CLOCK     The built−in Schmitt trigger receiver makes this pin suitable for a large type of clock signal
                     INPUT     (Figure 29). This pin can be connected to either the microcontroller master clock, or to a
                      High     crystal signal, to drive the external smart cards. The signal is fed to the internal clock selector
                   impedance   circuit and translated to the CRD_CLK pin at either the same frequency, or divided by 2 or 4,
                               depending upon the programming mode.
                               Note: The chip guarantees the EMV 50% Duty Cycle when the clock divider ratio is 1/2 or 1/4,
                               even when the CLK_IN signal is out of the 45% to 55% range specified by ISO and EMV
                               specifications.
                               Care must be observed, at PCB level, to minimize the pick−up noise coming from the CLK_IN
                               line.
  4      MOSI        INPUT     Master Out Slave In: SPI Data Input from the external microcontroller. This byte contents the
                               address of the selected chip among the four possible, together with the programming code for
                               a given interface.
  5     CLK_SPI      INPUT     Clock Signal to synchronize the SPI data transfer. The built−in Schmitt trigger receiver makes
                               this pin compatible with a wide range of input clock signal (Figure 29). This clock is fully
                               independent from the CLK_IN signal and does not play any role with the data transaction.
  6     EN_RPU   INPUT, Logic  This pin is used to activate the I/O internal pullup resistor according to the here below true
                               table:
                                          EN_RPU = Low → I/O Pullup resistor disconnected
                                          EN_RPU = High → I/O Pullup resistor connected
                               When two or more NCN6001 chips shares the same I/O bus, one chip only shall have the
                               internal pullup resistor enabled to avoid any overload of the I/O line.
                               Moreover, when Asynchronous and Synchronous cards are handled by the interfaces, the
                               activated I/O pullup resistor must preferably be the one associated with the Asynchronous
                               circuit.
                               On the other hand, since no internal pullup bias resistor is built in the chip, pin 6 must be
                               connected to the right voltage level to make sure the logic function is satisfied.
  7      MISO       OUTPUT     Master In Slave Out: SPI Data Output from the NCN6001. This byte carries the state of the
                               interface, the serial transfer being achieved according to the programmed mode (Table 2),
                               using the same CLK_SPI signal and during the same MOSI time frame. The three high bits
                               [b7:b5] have no meaning and shall be discarded by the microcontroller. An external 4.7 k Pull
                               down resistor might be necessary to avoid misunderstanding of the pin 7 voltage during the
                               High Z state.
  8       CS         INPUT     This pin synchronizes the SPI communication and provides the chip address and selected
                               functions.
                               All the NCN6001 functions, both programming and card transaction, are disabled when
                               CS = H.
  9       VCC       POWER      This pin is connected to the NCN6001 supply voltage and must be bypassed to ground by
                               a 10 F/6.0 V capacitor.
                               Since tantalum capacitors have relative high ESR, using low ESR ceramic type (MURATA
                               X5R, Resr < 100 m) is highly recommended.
  10     Lout_L     POWER      The Low Side of the external inductor is connected between this pin and pin 12 to provide the
                               DC/DC function. The current flowing into this inductor is internally sensed and no external
                               shunt resistor is used. Typically, Lout = 22 H, with DSR < 2.0 , yields a good efficiency
                               performance for a maximum 65 mA DC output load.
                               Note: The inductor shall be sized to handle the 450 mA peak current flowing during the DC/DC
                               operation (see CoilCraft manufacturer data sheet).
                                                http://onsemi.com
                                                           3


                                                   NCN6001
PIN FUNCTIONS AND DESCRIPTION (continued)
TSSOP    Name       Type                                                  Description
  11   PWR_GND     POWER    This pin is the Power Ground associated with the built−in DC/DC converter and must be
                            connected to the system ground together with GROUND pin 16. Using good quality ground
                            plane is recommended to avoid spikes on the logic signal lines.
  12     Lout_H    POWER    The High Side of the external inductor is connected between this pin and pin 10 to activate the
                            DC/DC function. The built−in NMOS and PMOS devices provide the switching function
                            together with the CRD_VCC voltage rectification (Figure 16).
  13    CRD_VCC    POWER    This pin provides the power to the external card. It is the logic level “1” for CRD_IO,
                            CRD_RST, CRD_C4, CRD_C8 and CRD_CLK signals.
                            The energy stored by the DC/DC external inductor Lout must be smoothed by a 10 F/Low
                            ESR capacitor, connected across CRD_VCC and GND. Using ceramic type of capacitor
                            (MURATA X5R, ESR < 50 m) is strongly recommended. In the event of a CRD_VCC UVLOW
                            voltage, the NCN6001 detects the situation and feedback the information in the STATUS bit.
                            The device does not take any further action, particularly the DC/DC converter is neither
                            stopped nor re programmed by the NCN6001. It is up to the external MPU to handle the
                            situation.
                            However, when the CRD_VCC is overloaded, the NCN6001 shuts off the DC/DC converter,
                            runs a Power Down ISO sequence and reports the fault in the STATUS register.
                            Since high transient current flows from this pin to the load, care must be observed, at PCB
                            level, to minimize the series ESR and ESL parasitic values. The NCN6001 demo board
                            provides an example of a preferred PCB layout.
  14     C8/S1       I/O    Auxiliary mixed analog/digital line to handle either a synchronous card, or as Chip Select
                            Identification (MISO, Bit 0): see Figure 8. The pin is driven by an open drain stage, the pullup
                            resistor being connected to the CRD_VCC supply. When the pin is used as a logic input
                            (asynchronous cards), the positive logic condition applies:
                                        Connected to GND → Logic = Zero
                                        Connected to VCC or left Open → Logic = One
                            A built−in accelerator circuit makes sure the output positive going rise time is fully within the
                            ISO/EMV specifications.
                            NOTE:      The pin is capable of reading the logic level when the chip operates an asynchronous
                                       interface, but is not intended to read the data from the external card when operated in
                                       the synchronous mode. It merely returns the logic state forced during a write
                                       instruction to the card.
  15     C4/S0       I/O    Auxiliary mixed analog/digital line to handle either a synchronous card, or as Chip Select
                            Identification (MISO, Bit 1): see Figure 8. The pin is driven by an open drain stage, the pullup
                            resistor being connected to the CRD_VCC supply. When the pin is used as a logic input
                            (asynchronous cards), the positive logic condition applies:
                                        Connected to GND → Logic = Zero
                                        Connected to VCC or left Open → Logic = One
                            A built−in accelerator circuit makes sure the output positive going rise time is fully within the
                            ISO/EMV specifications.
                            NOTE:      The pin is capable of reading the logic level when the chip operates an asynchronous
                                       interface, but is not intended to read the data from the external card when operated in
                                       the synchronous mode. It merely returns the logic state forced during a write
                                       instruction to the card.
  16      GND      SIGNAL   The logic and low level analog signals shall be connected to this ground pin. This pin must be
                            externally connected to the PWR_GND pin 12. The designer must make sure no high current
                            transients are shared with the low signal currents flowing into this pin.
  17    CRD_CLK    OUTPUT   This pin is connected to the CLK pin of the card connector. The CRD_CLK signal comes from
                            the clock selector circuit output. An internal active pull down NMOS device forces this pin to
                            Ground during either the CRD_VCC startup sequence, or when CRD_VCC = 0 V.
                            The rise and fall slopes, either FAST or SLOW, of this signal can be programmed by the MOSI
                            message (Table 2).
                            Care must be observed, at PCB level, to minimize the pick−up noise coming from the
                            CRD_CLK line.
                                              http://onsemi.com
                                                         4


                                                 NCN6001
PIN FUNCTIONS AND DESCRIPTION (continued)
TSSOP     Name       Type                                              Description
  18    CRD_DET     INPUT   The signal coming from the external card connector is used to detect the presence of the card.
                            A built−in pullup low current source biases this pin High, making it active LOW, assuming one
                            side of the external switch is connected to ground. A built−in digital filter protect the system
                            against voltage spikes present on this pin.
                            The polarity of the signal is programmable by the MOSI message, according to the logic state
                            depicted Table 2. On the other hand, the meaning of the feedback message contained in the
                            MISO register bit b4, depends upon the SPI mode of operation as defined here below:
                            SPI Normal Mode: The MISO bit b4 is High when a card is inserted, whatever be the polarity
                            of the card detect switch.
                            SPI Special Mode: The MISO bit b4 copies the logic state of the Card detect switch as
                            depicted here below, whatever be the polarity of the switch used to handle the detection:
                                       CRD_DET = Low → MISO/b4 = Low
                                       CRD_DET = High → MISO/b4 = High
                            In both cases, the chip must be programmed to control the right logic state (Table 2).
                            Since the bias current supplied by the chip is very low, typically 5.0 A, care must be observed
                            to avoid low impedance or cross coupling when this pin is in the Open state.
  19    CRD_RST    OUTPUT   This pin is connected to the RESET pin of the card connector. A level translator adapts the
                            RESET signal from the microcontroller to the external card. The output current is internally
                            limited to 15 mA.
                            The CRD_RST is validated when CS = Low and hard wired to Ground when the card is
                            deactivated, by and internal active pull down circuit.
                            Care must be observed, at PCB design level, to avoid cross coupling between this signal and
                            the CRD_CLK clock.
  20     CRD_IO       I/O   This pin handles the connection to the serial I/O pin of the card connector. A bidirectional level
                    Pullup  translator adapts the serial I/O signal between the card and the microcontroller. An internal
                            active pull down MOS device forces this pin to Ground during either the CRD_VCC startup
                            sequence, or when CRD_VCC = 0 V. The CRD_IO pin current is internally limited to 15 mA.
                            Care must be observed, at PCB design level, to avoid cross coupling between this signal and
                            the CRD_CLK clock.
                                            http://onsemi.com
                                                       5


                                                              NCN6001
 MAXIMUM RATINGS (TA = +25°C unless otherwise noted)
                             Rating                                Symbol                              Value                         Unit
 Power Supply Voltage                                                 VCC                                6.0                           V
 Power Supply Current                                                  Ibat                             500                          mA
 Note: This current represents the maximum peak current the
 pin can sustain, not the NCN6001 average consumption.
 Power Supply Current                                                  ICC                   150 (Internally Limited)                mA
 Digital Input Pins                                                    Vin           −0.5 V < Vin < VCC +0.5 V, but < 6.0 V            V
 Digital Input Pins                                                     Iin                             ±5.0                         mA
 Digital Output Pins                                                  Vout           −0.5 V < Vin < VCC +0.5 V, but < 6.0 V            V
 Digital Output Pins                                                   Iout                             ±10                          mA
 Card Interface Pins                                                 Vcard             −0.5 V < Vcard < CRD_VCC +0.5 V                 V
 Card Interface Pins, excepted CRD_CLK                                Icard                   15 (Internally Limited)                mA
 Inductor Current                                                     ILout                  500 (Internally Limited)                mA
 ESD Capability (Note 1)                                             VESD
    Standard Pins                                                                                        2.0                          kV
    Card Interface Pins                                                                                  8.0                          kV
    CRD_DET                                                                                              4.0                          kV
 Power Dissipation @ Tamb = +85°C                                     PDS                               320                          mW
 Thermal Resistance, Junction−to−Air (RJA)                          RJA                               125                         °C/W
 Operating Ambient Temperature Range                                    TA                          −25 to +85                        °C
 Operating Junction Temperature Range                                   TJ                         −25 to +125                        °C
 Maximum Junction Temperature (Note 2)                               TJmax                             +150                           °C
 Storage Temperature Range                                            Tstg                         −65 to +150                        °C
Stresses exceeding those listed in the Maximum Ratings table may damage the device. If any of these limits are exceeded, device functionality
should not be assumed, damage may occur and reliability may be affected.
1. Human Body Model, R = 1500 , C = 100 pF.
2. Absolute Maximum Rating beyond which damage to the device may occur.
                                                          http://onsemi.com
                                                                   6


                                                                  NCN6001
DIGITAL PARAMETERS @ 2.7 V < VCC < 5.5 V (−25°C to +85°C ambient temperature, unless otherwise noted).
Note: Digital inputs undershoot < − 0.3 V to ground, Digital inputs overshoot < 0.3 V to VCC.
                            Rating                                     Pin       Symbol           Min           Typ         Max       Unit
 Input Asynchronous Clock Duty Cycle = 50%                              3          FCLKIN                                             MHz
    @ VCC = 3.0 V Over the Temperature Range                                                        −            −           30
    @ VCC = 5.0 V Over the Temperature Range                                                        −            −           40
 Input Clock Rise Time                                                  3             Ftr          2.5           −           −         ns
 Input Clock Fall Time                                                                Ftf          2.5           −           −         ns
 Input SPI Clock                                                        5         FCLKSPI           −            −           15       MHz
 Input CLK_SPI Rise/Fall Time @ Cout = 30 pF                            5        trspi, tfspi       −            −           12        ns
 Input MOSI Rise/Fall Time @ Cout = 30 pF                               4          trmosi,          −            −           12        ns
                                                                                    tfmosi
 Output MISO Rise/Fall Time @ Cout = 30 pF                              7          trmiso,          −            −           12        ns
                                                                                    tfmiso
 Input CS Rise/Fall Time                                                8         trstr, tfstr      −            −           12        ns
 I/O Data Transfer Switching Time, both directions                    1, 20
    (I/O and CRD_IO), @ Cout = 30 pF
 I/O Rise Time * (Note 4)                                                            tRIO           −            −          0.8        s
 I/O Fall Time                                                                       tFIO           −            −          0.8        s
 INT Pullup Resistance                                                  2            RITA          20            50          80        k
 Positive Going Input High Voltage Threshold                        2, 3, 4, 5,       VIA                                               V
 (CLK_IN, MOSI, CLK_SPI, EN_RPU, CS)                                   6, 8                    0.70 * VCC        −          VCC
 Negative Going Input High Voltage Threshold                        2, 3, 4, 5,     VILLA                                               V
 (CLK_IN, MOSI, CLK_SPI, EN_RPU, CS)                                   6, 8                         0            −       0.3 * VCC
 Output High Voltage                                                   2, 7          VOH                                                V
 INT, MISO @ OH = −10 A                                                                       VCC −1.0 V        −          VCC
 Output Low Voltage                                                    2, 7          VOL                                                V
 INT, MISO @ OH = 200 A                                                                            −            −          0.4
 Delay Between Two Consecutive CLK_SPI Sequence                         5            tdclk         33            −           −         ns
Product parametric performance is indicated in the Electrical Characteristics for the listed test conditions, unless otherwise noted. Product
performance may not be indicated by the Electrical Characteristics if operated under different conditions.
3. Since a 20 k (typical) pullup resistor is provided by the NCN6001, the external MPU can use an Open Drain connection. On the other hand,
   NMOS smart cards can be used straightforward.
                                                              http://onsemi.com
                                                                         7


                                                               NCN6001
POWER SUPPLY @ 2.7 V < VCC < 5.5 V (−25°C to +85°C ambient temperature, unless otherwise noted).
                              Rating                                 Pin            Symbol           Min         Typ         Max         Unit
 Input Power Supply                                                   9                VCC           2.70         −         5.50V          V
 Standby Supply Current Conditions:                                   9              ICCsb                                                
   INT = CLK_IN = CLK_SPI = CS = H
   I/O = MOSI = EN_RPU = H, No Card Inserted
      VCC = 3.0 V                                                                                     −           25          50
      VCC = 5.0 V                                                                                     −           35          60
 DC Operating Current                                                 9              ICCop                                               mA
   CLK_IN = Low, All Card Pins Unloaded
      @ VCC = 3.3 V, CRD_VCC = 5.0 V                                                                  −           −           0.5
      @ VCC = 5.5 V, CRD_VCC = 5.0 V                                                                  −           −           1.5
 VCC Under Voltage DetectionHigh                                      9              VCCLH           2.20         −          2.70          V
 VCC Under Voltage DetectionLow                                                      VCCLL           2.00         −          2.60
 VCC Under Voltage (Note 6)                                                         VCCPOR           1.50         −          2.20
 Output Card Supply Voltage                                           13                                                                   V
   @ 2.7 V < VCC < 5.5 V                                                                                          −
      CRD_VCC = 1.8 V @ Iload = 35 mA                                                 VC2H           1.65       1.80         1.95
      CRD_VCC = 3.0 V @ Iload = 60 mA                                                 VC3H           2.75       3.00         3.25
      CRD_VCC = 5.0 V @ Iload = 65 mA                                                 VC5H           4.75       5.00         5.25
 Maximum Continuous Output Current                                    13               ICC                                               mA
   @ CRD_VCC = 1.8 V                                                                                  35          −            −
   @ CRD_VCC = 3.0 V                                                                                  60          −            −
   @ CRD_VCC = 5.0 V                                                                                  65          −            −
 Output Over Current Limit                                            13              Iccov                                              mA
   VCC = 3.3 V, CRD_VCC = 1.8 V, 3.0 V or 5.0 V                                                       −          100           −
   VCC = 5.0 V, CRD_VCC = 1.8 V, 3.0 V or 5.0 V                                                       −          150           −
 Output Dynamic Peak Current                                          13               Iccd                                              mA
   @ CRD_VCC = 1.8 V, 3.0 V or 5.0 V, Cout = 10 F                                                   100          −            −
   (Notes 4 and 5)
 Output Card Supply Voltage Ripple                                    13                 −                                               mV
   @ VCC = 3.6 V, Lout = 22 H, Cout1 = Cout2 = 4.7 F
   Ceramic X7R, Iout = 55 mA
      CRD_VCC = 5.0 V                                                                                 −           35           −
      CRD_VCC = 3.0 V (Note 4)                                                                        −           35           −
      CRD_VCC = 1.8 V                                                                                 −           35           −
 Output Card Supply Turn On Time @                                    13            VCCTON                                                s
 Lout = 22 F, Cout1 = 10 F Ceramic                                                                  −           −          500
 VCC = 2.7 V, CRD_VCC = 5.0 V
 Output Card Supply Shut Off Time @                                   13            VCCTOFF                                               s
 Cout1 = 10 F, Ceramic                                                                               −          100         250
 VCC = 2.7 V, CRD_VCC = 5.0 V, VCCOFF < 0.4 V
4. Ceramic X7R, SMD type capacitors are mandatory to achieve the CRD_VCC specifications. When an electrolytic capacitor is used, the
   external filter must include a 220 nF, max 50 m ESR capacitor in parallel, to reduce both the high frequency noise and ripple to a minimum.
   Depending upon the PCB layout, it might be necessary to use two 4.7 F/6.0 V/ceramic/X5R/SMD 0805 in parallel, yielding an improved
   CRD_VCC ripple over the temperature range.
5. Pulsed current, according to ISO7816−3, paragraph 4.3.2.
6. No function externally available during the VCC POR sequence.
                                                          http://onsemi.com
                                                                      8


                                                                 NCN6001
SMART CARD INTERFACE @ 2.7 V < VCC < 5.5 V (−25°C to +85°C ambient temperature, unless otherwise noted).
Note: Digital inputs undershoot < −0.3 V to ground, Digital inputs overshoot < 0.3 V to VCC.
                              Rating                                 Pin      Symbol            Min        Typ       Max        Unit
 CRD_RST @ CRD_VCC = 1.8 V, 3.0 V, 5.0 V                             19
   Output RESET VOH @ Irst = −200 A                                            VOH       CRD_VCC − 0.5     −     CRD_VCC         V
   Output RESET VOL @ Irst = 200 A                                             VOL               0         −         0.4         V
   Output RESET Rise Time @ Cout = 30 pF                                          tR              −         −        100         ns
   Output RESET Fall Time @Cout = 30 pF                                           tF              −         −        100         ns
 CRD_CLK as a function of CRD_VCC                                    17
 CRD_VCC = +5.0 V or 3.0 V or 1.8V
   Output Frequency                                                          FCRDCLK              −                   20        MHz
   Output VOH @ Icrd_clk = −200 A                                              VOH       CRD_VCC – 0.5           CRD_VCC         V
   Output VOL @ Icrd_clk = 200 A                                               VOL               0                  +0.4         V
 CRD_CLK Output Duty Cycle
   CRD_VCC = 5.0 V                                                            FCRDDC             45                   55         %
   CRD_VCC = 3.0 V                                                                               40                   60         %
   CRD_VCC = 1.8 V (Note 7)                                                                      40                   60         %
 Rise & Fall time @ CRD_VCC = 1.80 V to 5.0 V
   Fast Mode
   Output CRD_CLK Rise time @ Cout = 30 pF                                      tress             −        2.1         4         ns
   Output CRD_CLK Fall time @ Cout = 30 pF                                       tfcs             −        1.9         4         ns
 Rise & Fall time @ CRD_VCC = 1.80 V to 5.0 V
   Slow Mode
   Output CRD_CLK Rise time @ Cout = 30 pF                                       trills           −        11.5       16         ns
   Output CRD_CLK Fall time @ Cout = 30 pF                                      tulsa             −        10.8       16         ns
 CRD_IO @ CRD_VCC = 1.8 V 3.0 V, 5.0 V                               20
 CRD_IO Data Transfer Frequency                                                  FIO              −        400         −        kHz
 CRD_IO Rise time @ Cout = 30 pF                                                tRIO              −         −         0.8        s
 CRD_IO Fall time @ Cout = 30 pF                                                tFIO              −         −         0.8        s
   Output VOH @ Icrd_clk = −20 A                                               VOH       CRD_VCC    − 0.5  −     CRD_VCC         V
   Output VOL @ Icrd_clk = 500 A, VIL = 0 V                                    VOL               0         −         0.4         V
 CRD_IO Pullup Resistor                                              20       RCRDPU             14         20        26         k
 CRD_C8 Output Rise and Fall Time @ Cout = 30 pF                     14      tRC8, tFC8           −         −        100         ns
 CRD_C4 Output Rise and Fall Time @ Cout = 30 pF                     15      tRC4, tFC4           −         −        100         ns
 CRD_C4 and CRD_C8 Data Transfer Frequency                         14, 15       FC48              −        400         −        kHz
 CRD_C8, CRD_C4 Output Voltages                                    14, 15    VOH, VOL
   High Level @ Irst = −200 A                                                            CRD_VCC – 0.5     −          −          V
   Low Level @ Irst = +200 A                                                                     0         −         0.4         V
 C8/S0 and C4/S0 Address Bias Current (Note 8)                     14, 15      Ibc4c8             −        1.0         −         A
 Card Detection Digital Filter Delay:                                18
   Card Insertion                                                             TCRDIN             25         50       150         s
   Card Extraction                                                           TCRDOFF             25         50       150         s
 Card Insertion or Extraction Positive Going Input High Voltage      18        VIHDET        0.70 * VCC     −        VCC          V
 Card Insertion or Extraction Negative Going Input Low Voltage       18        VILDET             0         −     0.30 * VCC      V
 Card Detection Bias Pullup Current @ VCC = 5.0 V                    18         IDET              −         10         −         A
 Output Peak Max Current Under Card Static Operation                1, 20    Icrd_iorst           −         −         15        mA
 Mode @ CRD_VCC = 3.0 V or = 5.0 V
 CRD_RST, CRD_IO, CRD_C4, CRD_C8
 Output Peak Max Current Under Card Static Operation                 17       Icrd_clk            −         −         70        mA
 Mode @ CRD_VCC = 3.0 V or = 5.0 V
 CRD_CLK
7. Parameter guaranteed by design, function 100% production tested.
8. Depending upon the environment, using and external pullup resistor might be necessary to cope with PCB surface leakage current.
                                                             http://onsemi.com
                                                                        9


                                                                   NCN6001
PROGRAMMING
Write Register        "     WRT_REG                                           The CRD_RST pin reflects the content of the MOSI
  The WRT_REG register handles three command bits                          WRT_REG[b4] during the chip programming sequence.
[b5:b7] and five data bits [b0:b4] as depicted in Table 1.                 Since this bit shall be Low to address the internal register of
These bits are concatenated into a single byte to accelerate               the chip, care must be observed as this signal will be
the programming sequence. The register can be updated                      immediately transferred to the CRD_RST pin.
when CS is low only.
 Table 1. WRT_REG BITS DEFINITIONS
  b0,        If (b7 + b6 + b5) <> 110 and (b7 + b6 + b5) <> 101 and (b7 + b6 + b5) <> 111 then
  b1              Case 00
                    CRD_VCC = 0 V
                  Case 01
                    CRD_VCC = 1.8 V
                  Case 10
                    CRD_VCC = 3.0 V
                  Case 11
                    CRD_VCC = 5.0 V
                 Else if (b7 + b6 + b5) = 110 then
                  b1 drives C4
                  b0 drives C8
                 Else if (b7 + b6 + b5) = 101 then
                  Case (b4 + b3 + b2 + b1 + b0) = 0000
                    CRD_DET = NO
                  Case (b4 + b3 + b2 + b1 + b0) = 0001
                    CRD_DET = NC
                  Case (b4 + b3 + b2 + b1 + b0) = 0010
                    SPI_MODE = Special
                  Case (b4 + b3 + b2 + b1 + b0) = 0011
                    SPI_MODE = Normal
                 End if
  b2,        If (b7 + b6 + b5) <> 110 and (b7 + b6 + b5) <> 101 and (b7 + b6 + b5) <> 111 then
  b3              Case 00
                    CRD_CLK = L
                  Case 01
                    CRD_CLK = CLK_IN
                  Case 10
                    CRD_CLK = CLK_IN/2
                  Case 11
                    CRD_CLK = CLK_IN/4
                 Else if (b7 + b6 + b5) = 110 then
                  b3 drives CRD_CLK
                  b2 drives CRD_IO
                 Else if (b7 + b6 + b5) = 101 then
                  Case (b4 + b3 + b2 + b1 + b0) = 0000
                    CRD_DET = NO
                  Case (b4 + b3 + b2 + b1 + b0) = 0001
                    CRD_DET = NC
                  Case (b4 + b3 + b2 + b1 + b0) = 0010
                    SPI_MODE = Special
                  Case (b4 + b3 + b2 + b1 + b0) = 0011
                    SPI_MODE = Normal
                 End if
  b4         Drives CRD_RST pin (Note 10)
  b5,        000          Select Asynchronous Card #0 (Note 9), four chips bank CS signal
  b6,        001          Select Asynchronous Card #1 (Note 9), four chips bank CS signal
  b7         010          Select Asynchronous Card #2 (Note 9), four chips bank CS signal
             011          Select Asynchronous Card #3 (Note 9), four chips bank CS signal
             100          Select External Asynchronous Card, dedicated CS signal
             110          Select External Synchronous Card, dedicated CS signal
             101          Set Card Detection Switch polarity, Set SPI_MODE normal or special. Set CRD_CLK slopes Fast or Slow.
             111          Reserved for future use
9. When operating in Asynchronous mode, [b5:b7] are compared with the external voltage levels present pins C4/S0 and C8/S1 (respectively
    pins 15 and 14).
10. The CRD_RST pin reflects the content of the MOSI WRT_REG[b4] during the chip programming sequence. Since this bit shall be Low to
    address the internal register of the chip, care must be observed as this signal will be immediately transferred to the CRD_RST pin.
                                                              http://onsemi.com
                                                                       10


                                                                NCN6001
 Table 2. WRT_REG BITS DEFINITIONS AND FUNCTIONS
            ADDRESS                            PARAMETERS
     CHIP                                                                         MOSI bits        MOSI bits          MOSI bits
    BANK                                                                            [b3:b2]         [b1:b0]            [b7:b0]
      1         b7      b6     b5        b4      b3       b2     b1     b0        CRD_CLK          CRD_VCC           CRD_DET
      1          0      X       X       RST      0        0       0      0            Low              0                  −
      1          0      X       X       RST      0        1       0      1            1/1            1.8 V                −
      1          0      X       X       RST      1        0       1      0            1/2            3.0 V                −
      1          0      X       X       RST      1        1       1      1            1/4            5.0 V                −
      1          1      0       1        0       0        0       0      0             −               −                 NO
      1          1      0       1        0       0        0       0      1             −               −                 NC
      1          1      0       1        0       0        0       1      0             −               −               Special
      1          1      0       1        0       0        0       1      1             −               −               Normal
      1          1      0       1        0       0        1       0      0             −               −              SLO_SLP
      1          1      0       1        0       0        1       0      1             −               −              FST_SLP
      1          1      1       1        −       −        −       −      −             −               −                RFU
      2          1      0       0       RST      0        0       0      0            Low              0                  −
      2          1      0       0       RST      0        1       0      1            1/1            1.8 V                −
      2          1      0       0       RST      1        0       1      0            1/2            3.0 V                −
      2          1      0       0       RST      1        1       1      1            1/4            5.0 V                −
      2          1      1       0       RST     CLK      I/O     C4     C8             −               −         Data to Sync. Card
      2          1      0       1        0       0        0       0      0             −               −                 NO
      2          1      0       1        0       0        0       0      1             −               −                 NC
      2          1      0       1        0       0        0       1      0             −               −               Special
      2          1      0       1        0       0        0       1      1             −               −               Normal
      2          1      0       1        0       0        1       0      0             −               −              SLO_SLP
      2          1      0       1        0       0        1       0      1             −               −              FST_SLP
      2          1      1       1        −       −        −       −      −             −               −                RFU
11. Chip Bank 1 = Asynchronous cards, four slots addresses 1 to 4.
    Chip Bank 2 = Asynchronous or synchronous card, single slot.
12. Address 101 and bits [b0 : b4] not documented in the table are reserved for future use.
    Address 111 is reserved for future use.
  Although using the %111XXXXX code is harmless from                      likely to happen if the system uses a common Chip Select
a NCN6001 silicon standpoint, care must be observed to                    line. It is strongly recommended to run a dedicated CS bit to
avoid uncontrolled operation of the interface sharing the                 any external circuit intended to use the $111xxxxx code.
same digital bus. When this code is presented on the digital                 On the other hand, the CRD_RST signal will be forced to
bus, the CRD_RST signal of any interface sharing the CS                   Low when the internal register of the chip is programmed to
signal, immediately reflects the digital content of the MOSI              accommodate different hardware conditions (NO/NC,
bit b4 register. Similarly, the MISO register of the shared               Special/Normal, SLO_SLP/FST_SLP). Generally speaking,
interface is presented on the SPI port. Consequently, data                such a configuration shall take place during the Power On
collision, at MISO level, and uncontrolled card operation are             Reset to avoid CRD_RST activation.
                                                           http://onsemi.com
                                                                     11


                                                            NCN6001
Read Register      "    READ_REG                                     either on the Positive going (SPI_MODE = Special) or upon
   The READ_REG register contains the data read from the             the Negative going slope (SPI_MODE = Normal) of the
interface and from the external card. The selected register is       CLK_SPI signal. The external microcontroller shall discard
transferred to the MISO pin during the MOSI sequence                 the three high bytes since they carry no valid data.
(CS = Low). Table 3 gives the bits definition.
   Depending upon the programmed SPI_MODE, the
content of READ_REG is transferred on the MISO line
 Table 3. MOSI AND MISO BITS IDENTIFICATIONS AND FUNCTIONS
   MOSI     b7    b6   b5         b4            b3      b2        b1            b0                    Operating Mode
             0     0    0        RST           CLK     CLK       VCC           VCC              Asynchronous, Program Chip
             0     0    1        RST           CLK     CLK       VCC           VCC              Asynchronous, Program Chip
             0     1    0        RST           CLK     CLK       VCC           VCC              Asynchronous, Program Chip
             0     1    1        RST           CLK     CLK       VCC           VCC              Asynchronous, Program Chip
             1     0    0        RST           CLK     CLK       VCC           VCC              Asynchronous, Program Chip
             1     1    0        RST           CLK      I/O      C4             C8              Synchronous, Sets Card Bits
   MISO      z     z    z     Card Detect      I/O      C4       C8        PWR Monitor                Read Back Data
ASYNCHRONOUS MODE                                                    CRD_VCC output voltage shall be done by sending
   In this mode, the CRD_C4 and CRD_C8 pins are used to              a previous MOSI message according to Table 1 and Table 2.
define the physical addresses of the interfaces when a bank             The CRD_RST pin reflects the content of the MOSI
of up to four NCN6001 share the same digital bus.                    WRT_REG[b4] during the chip programming sequence.
                                                                     Since this bit shall be Low to address the internal register of
SYNCHRONOUS MODE                                                     the chip, care must be observed as this signal will be
   In this mode, CRD_C4 and CRD_C8 are connected to the              immediately transferred to the CRD_RST pin.
smart card and it is no longer possible to share the CS signal          Since no physical address can exist when the chip operates
with other device. Consequently, a dedicated Chip Select             in this mode, the MOSI register must use the format
signal must be provided when the interfaces operate in               %100XXXXX to program the chip (%100 prefix, XXXXX
a multiple operation mode (Figure 33).                               data).
   On the other hand, since bits [b4 – b0] of the MOSI
register contain the smart card data, programming the
Example:
                LDAA      #%10010111                      ;set RST = H, CLK = 1/1, VCC = 5.0 V
                STAA      MOSI
                LDAA      #%11010011                      ;SYNC. Card: set RST = H, CLK = L, IO = L, C4 = H, C8= H
                STAA      MOSI
                LDAA      #%00111110                      ;ASYNC. Card: set RST = H, CLK = ¼, VCC = 3.0 V
                STAA      MOSI
                                                       http://onsemi.com
                                                                12


                                                           NCN6001
STARTUP DEFAULT CONDITIONS                                         CRD_VCC OPERATION
  At startup, when the VCC power supply is turned on,                 The built−in DC/DC converter provides the CRD_VCC
the internal POR circuit sets the chip in the default              voltage and can be programmed to run one of the three
conditions as defined in Table 4.                                  possible values, 1.8V, 3.0V or 5.0V, assuming the input
                                                                   voltage VCC is within the 2.7V to 5.5V range. In any case,
 Table 4. STARTUP DEFAULT CONDITIONS                               CRD_VCC is voltage regulated, together with a current
     CRD_DET         Normally Open                                 overload detection. On the other hand, the power conversion
     CRD_VCC         Off                                           is automatically switched to handle either a boost or a buck
                                                                   mode of operation, depending upon the difference between
     CRD_CLK         tr and tf = SLOW
                                                                   the input voltage VCC and the output supply CRD_VCC.
     CRD_CLK         Low                                              The CRD_VCC output current is a function of the VCC
      Protocol       Special Mode                                  input value as depicted in Table 5.
                                                                    Table 5. CRD_VCC OUTPUT VOLTAGE RANGE
CARD DETECTION
  The card is detected by the external switch connected pin            CRD_VCC                       Comments
18. The internal circuit provides a positive bias of this pin            1.80 V        Maximum Output DC Current = 35 mA
and the polarity of the insertion/extraction is programmable             3.0 V         Maximum Output DC Current = 60 mA
by the MOSI protocol as depicted in Table 2.
                                                                         5.0 V         Maximum Output DC Current = 65 mA
  The bias current is 1.0A typical and care must be
observed to avoid leakage to ground from this pin to
                                                                      Whatever the CRD_VCC output voltage may be,
maintain the logic function. In particular, using a low
                                                                   a built−in comparator makes sure the voltage is within the
impedance probe (< 1.0M) may lead to uncontrolled
                                                                   ISO7816−3/ EMV specifications. If the voltage is no longer
operation during the debug.
                                                                   within the minimum/maximum values, the DC/DC is
  Depending upon the programmed condition, the card can
                                                                   switched Off, the Power Down sequence takes place and an
be detected either by a Normally Open (default condition) or
                                                                   interrupt is presented at the INT pin 2.
a Normally Close switch (Table 2). On the other hand, the
meaning of the feedback message contained in the MISO              POWERUP SEQUENCE
register bit b4, depends upon the SPI mode of operation as            The Powerup Sequence makes sure all the card related
defined here below:                                                signals are Low during the CRD_VCC positive going slope.
SPI Normal Mode: the MISO bit b4 is High when a card is            These lines are validated when CRD_VCC is above the
inserted, whatever be the polarity of the card detect switch.      minimum specified voltage (depending upon the
SPI Special Mode: the MISO bit b4 copies the logic state of        programmed CRD_VCC value).
the Card detect switch as depicted here below, whatever be
the polarity of the switch used to handle the detection:
  CRD_DET = Low → MISO/b4 = Low
  CRD_DET = High → MISO/b4 = High
                                       Figure 3. Typical Startup CRD_VCC Sequence
                                                       http://onsemi.com
                                                                13


                                                        NCN6001
  At powerup, the CRD_VCC voltage rise time depends             current absorbed by the internal NMOS transistor built
upon the current capability of the DC/DC converter              across CRD_VCC and GROUND. These behaviors are
associated with the external inductor L1 and the reservoir      depicted in Figure 4.
capacitor connected across CRD_VCC and GROUND.                    Since these parameters have finite values, depending
During this sequence, the average input current is 300 mA       upon the external constraints, the designer must take care of
typical (Figure 3), assuming the system is fully loaded         these limits if the tON or the tOFF provided by the data sheets
during the startup. Finally, the application software is        does not meet his requirements.
responsible for the smart card signal sequence.
  On the other hand, at turn off, the CRD_VCC fall time
depends upon the external reservoir capacitor and the peak
                                      Figure 4. CRD_VCC Typical Rise and Fall Time
                                          Figure 5. Startup Sequence with ATR
                                                    http://onsemi.com
                                                             14


                                                           NCN6001
POWER DOWN SEQUENCE                                                  Since the internal digital filter is activated for any card
  The NCN6001 provides an automatic Power Down                     insertion or extraction, the physical power sequence will be
sequence, according to the ISO7816−3 specifications, and           activated 50 s (typical) after the card has been extracted. Of
the communication session terminates immediately. The              course, such a delay does not exist when the MPU
sequence is launched when the card is extracted, or when the       intentionally launches the power down. Figure 6 shows the
CRD_VCC voltage is overloaded as described by the                  oscillogram captured in the NCN6001 demo board.
ISO/CEI 7816−3 sequence depicted hereafter:                          The internal active pull down NMOS connected across
ISO7816−3 sequence:                                                CRD_VCC and GND discharges the external reservoir
  "Force RST to Low                                                capacitor in 100 s (typical), assuming Cout = 10 F.
   "Force CLK to Low, unless it is already in this state
    "Force C4 & C8 to Low
      "Force CRD_IO to Low
       "Shut Off the CRD_VCC supply
                                           Typical delay between each signal is 500 ns
                                        Figure 6. Typical Power Down Sequence
  The internal active pull down NMOS connected across CRD_VCC and GND discharges the external reservoir capacitor in
100s (typical), assuming Cout = 10F.
                                                      http://onsemi.com
                                                               15


                                                                     NCN6001
DATA I/O LEVEL SHIFTER                                                        positive going transient according to the ISO7816−3
  The level shifter accommodates the voltage difference                       specifications. The basic I/O level shifter is depicted in
that might exist between the microcontroller and the smart                    Figure 7.
card. A pulsed accelerator built−in circuit provides the fast
                                                 VCC
                   VCC
                         9
                             6        U1
                                                   PMOS
     EN_RPU
                                                                     200 ns                         200 ns                            CRD_VCC
                                                                                                                               13
                                                          Q1                                                     Q2
                                                                                                                       R2      18 k
                                           R1   18 k
                      I/O                                                                                                             CRD_IO
                             1                                                                                                 20
                                                                                 Q3       Q4
                                                 CARD ENABLE                                                              Q5
     SYNC
                                                               POR               LOGIC AND
                                                                                LEVEL SHIFT
                                                           SEQ 1
                                                                                                                      GND
                                                                                                   CRD_VCC
     MOSI/b2                     Q5
                                                                                                   VCC
    From MOSI
    decoding
                         GND
     MOSI/b3
                                                 Figure 7. Basic I/O Internal Circuit
   The transaction is valid when the Chip Select pin is Low,
the I/O signal being Open Drain or Totem Pole on either
sides.
   Since the device can operate either in a single or a multiple
card system, provisions have been made to avoid CRD_IO
current overload. Depending upon the selected mode of
operation (ASYNC. or Sync), the card I/O line is
respectively connected to either I/O pin 1, or to the MOSI
register byte bit 2. On the other hand, the logic level present
at the card I/O is feedback to the C via the MISO register
bit 3. The logic level present at pin 6 controls the connection
of the internal pullup as depicted in Table 6.
 Table 6. I/O PULLUP RESISTOR TRUE TABLE
                                                    Device
 EN_RPU              I/O Pullup Resistor           Operation                  NOTE: Both sides of the interface run with open drain load
    Low          Open, 18 k disconnected         Parallel Mode                     (worst case condition).
    High         Internal 18 k pullup active     Single Device                       Figure 8. Typical I/O Rise and Fall Time
NOTE:      18 k typical value
                                                               http://onsemi.com
                                                                         16


                                                             NCN6001
GENERAL PURPOSE CRD_C4 AND CRD_C8                                    these pins can be directly connected to the VCC power
   These two pins can be used as a logic input to define the         supply, both output stages are built with switched
address of a given interface (in the range $00 to $11), or as        NMOS/PMOS totem pole as depicted in Figure 9.
a standard C4/C8 access to the smart card’s channels. Since
              VCC                           Vmax                                                                 CRD_VCC
                                                                U1                        Q2
          WRT_C4                           LEVEL
                                          SHIFTER                                               SWITCHED
                                                                           U3
                                                                                                   BIAS
                                                                                                          R1
                                                                                                                 C4
                        ADDRESS                                        1                                500 R
        CONTROL                                                                   3
                                                                       2    U4                 Q1
                                            1
                                  3
                                       U8   2
                                                                       VCC
                                                                                            GND
                                                                                I=1A
       READ_C4           U5                                            CRD_VCC
                                                   U2                                                   Q3
                                            1
                                  3                                    U6
                                       U7   2
                                                                                                  ESD
                                                                     U9
                                                                                                          GND
                                 Figure 9. Typical CRD_C4 Output Drive and Logic Control
   The C4 and C8 pins are biased by an internal current                 The switched Totem Pole structure provides the fast
source to provide a logic one when the pin is left open. In this     positive going transient when the related pin is forced to the
case, care must be observed to avoid relative low impedance          High state during a data transfer. In the event of a low
to ground to make sure the pin is at a High logic level.             impedance connected across C4 or C8 to ground, the current
However, it is possible to connect the pin to VCC (battery           flow is limited to 15 mA, according to the ISO7816−3
supply) to force the logic input to a High level, regardless of      specification.
the input bias. Thanks to the CONTROL internal signal, the              The two general purpose pins can transfer data from the
system automatically adapts the mode of operation (chip              external microcontroller to the card and read back the logic
address or data communication) and, except the leakage, no           state, but none of these pins can read the data coming from
extra current is drawn from the battery to bias these pins           the external smart card. On the other hand, both C4 and C8
when the logic level is High.                                        can read input logic, hence the physical address of a given
   When any of these pins is connected to GND, a continuous          chip.
1 A typical sink current will be absorbed from the battery             In order to sustain the 8 kV ESD specified for these pins,
supply.                                                              an extra protection structure Q3 has been implemented to
                                                                     protect the MOS gates of the input circuit.
                                                        http://onsemi.com
                                                                  17


                                                                   NCN6001
INTERRUPT                                                                  is neither combined with the CS signal, nor with the chip
   When the system is powered up, the INT pin is set to High               address. Consequently, an interrupt is placed on the C input
upon POR signal. The interrupt pin 2 is forced LOW when                    as soon as one of the condition is met.
either a card is inserted/extracted, or when a fault is                       The INT signal is clear to High upon one of the condition
developed across the CRD_VCC output voltage. This signal                   given in Table 7.
Table 7. INTERRUPT RESET LOGIC
   Interrupt Source           CS            CRD_VCC                                         Chip Address
Card Insertion                 L                >0            Selected Chip MOSI[b7 : B5] = 0xx or MOSI[b7 : B5] = 101
Card Insertion                 L                =0            Selected Chip MOSI[b7 :B5] = 0xx or MOSI[b7 : B5] = 101
Over Load                      L                =0            Selected Chip MOSI[b7 : B5] = 0xx or MOSI[b7 : B5] = 101
   When several interfaces share the same digital C bus, it is up to the software to pool the chips, using the MISO register to
identify the source of the interrupt.
                           T0          T1          T2           T3         T4      T5      T6       T8 T9      T10               T11
                 CS
                INT
        CRD_DET
    MOSI_b0
    MOSI_b1
                    1
                            3
                    2
                                                                                             T7
  CRD_VCC > 0 V
  CRD_VCC = 0 V
      OVER LOAD
        CRD_VCC
                                                   Figure 10. Basic Interrupt Function
Table 8. INTERRUPT RESET LOGIC OPERATION
     T0       A card has been inserted into the reader and detected by the CRD_DET signal. The NCN6001 pulls down the interrupt line.
     T1       The C sets the CS signal to Low, the chip is now active, assuming the right address has been placed by the MOSI register.
     T2       The C acknowledges the interrupt and resets the INT to High by the MOSI [B1 : B0 ] logic state: CRD_VCC is programmed
              higher than zero volt.
     T3       The card has been extracted from the reader, CRD_DET goes Low and an interrupt is set (INT = L). On the other hand, the
              PWR_DOWN sequence is activated by the NCN6001.
     T4       The interrupt pin is clear by the zero volt programmed to the interface.
     T5       Same as T0
     T6       The C start the DC/DC converter, the interrupt is cleared (same as T2)
     T7       An overload has been detected by the chip : the CRD_VCC voltage is zero, the INT goes Low.
     T8       The card is extracted from the reader, CRD_DET goes Low and an interrupt is set (INT = L).
     T9       The card is re−inserted before the interrupt is acknowledged by the C: the INT pin stays Low.
    T10       The C acknowledges the interrupt and reset the INT to High by the MOSI [B1 : B0 ] logic state: CRD_VCC is programmed
              higher than zero volt.
    T11       The Chip Select signal goes High, all the related NCN6001 interface(s) are deactivated and no further programming or
              transaction can take place.
                                                              http://onsemi.com
                                                                       18


                                                         NCN6001
SPI PORT                                                          lines to synchronize the bits carried out by the data byte.
  The product communicates to the external                        The basic timings are given in Figure 11 and Figure 12.
microcontroller by means of a serial link using                   The system runs with two internal registers associated with
a Synchronous Port Interface protocol, the CLK_SPI being          the MOSI and MISO data:
Low or High during the idle state. The NCN6001 is not             WRT_REG is a write only register dedicated to the MOSI
intended to operate as a Master controller, but execute           data.
commands coming from the MPU.
                                                                  READ_REG is a read only register dedicated to the MISO
  The CLK_SPI, the CS and the MOSI signals are under the
                                                                  data.
microcontroller’s responsibility. The MISO signal is
generated by the NCN6001, using the CLK_SPI and CS
                CS             MPU Asserts Chip Select
                           MPU Enables
           SPI_CLK                 Clock
                      MPU Sends Bit                NCN6001 Reads Bit
              MOSI
    RST_COUNTER                                                                                    tclr
                NCN6001 Sends Bit
                                                   MPU Reads Bit
                   from READ_REG
              MISO
                                         Figure 11. Basic SPI Timings and Protocol
  When the CS line is High, no data can be written or read           To accommodate the simultaneous MISO transmit, an
on the SPI port. The two data lines becomes active when           internal logic identifies the chip address on the fly (reading
CS = Low, the internal shift register is cleared and the          and decoding the three first bits) and validates the right data
communication is synchronized by the negative going edge          present on the line. Consequently, the data format is MSB
of the CS signal. The data present on the MOSI line is            first to read the first three signal as bits B5, B6 and B7. The
considered valid on the negative going edge of the CLK_SPI        chip address is decoded from this logic value and validates
clock and is transferred to the shift register on the next        the chip according to the C4 and C8 conditions (Figure 12).
positive edge of the same CLK_SPI clock.
               CS             MPU Asserts Chip Set
                                          B7     B6     B5     B4       B3       B2      B1       B0
                      MPU Enables Clock
          SPI_CLK
                                                  CHIP
                                               ADDRESS           COMMAND AND CONTROL
             MOSI                         MSB                                                     LSB
         ADDRESS
          DECODE
                                                                The Chip Address is decoded on the third clock pulse.
             MISO              MISO Line = High Impedance
                                                                    The MISO signal is activated and data transferred
                           Figure 12. Chip Address Decoding Protocol and MISO Sequence
                                                     http://onsemi.com
                                                              19


                                                           NCN6001
   When the eight bits transfer is completed, the content of         edge of the CS signal and the NCN6001 related functions are
the internal shift register is latched on the positive going         updated accordingly.
                                                      Select Chip from SYNCHRONOUS Bank
                                             Chip Nx                       tdclk                    Chip Ny
           CS
               MPU Enables B7 B6        B5   B4   B3   B2    B1    B0              B7 B6     B5    B4    B3   B2    B1    B0
      SPI_CLK      Clock
                                 CHIP             COMMAND
                               ADDRESS          AND CONTROL
         MOSI                MSB                                     LSB           MSB                                    LSB
     SET_RST
     SET_CLK
    SET_VCC
    ADDRESS
     DECODE
         MISO         MISO Line = High Impedance
 Special Mode         MISO Line = High Impedance
         MISO
 Normal Mode                                                                                            Special Mode: MISO
                                              Normal Mode: MISO is synchronized with                    is synchronized with
                                              the SPI_CLK Negative going slope                          the SPI_CLK Positive
                                                                                                        going slope
                                         Figure 13. Basic Multi Command SPI Bytes
   Since the four chips present in the Asynchronous Bank                When two SPI bytes are sequentially transferred on the
have an individual physical address, the system can control          MOSI line, the CLK_SPI sequence must be separated by at
several of these chips by sending the data content within the        least one half positive period of this clock (see tdclk
same CS frame as depicted in Figure 13. The bits are                 parameter).
decoded on the fly and the related sub blocks are updated               The oscillograms shown in Figure 14 and Figure 15
accordingly. According to the SPI general specification, no          illustrate the SPI communication protocol (source:
code or activity will be transferred to any chip when the CS         NCN6001 demo board).
is High.
                                  Figure 14. Programming Sequence, Chip Address = $03
                                                      http://onsemi.com
                                                                20


                                                                                NCN6001
               Protocol: Special Mode                                                                 Protocol: Standard SPI
                                                                Figure 15. MISO Read Out Sequences
DC/DC OPERATION
  The power conversion is based on a full bridge structure                              output voltage programming, does not need any further
capable to handle either step up or step down power supply                              adjustments.
(Figure 16). The operation is fully automatic and, beside the
                                                                          VCC                         CRD_VCC
                                                                          6                                13
                            10 F                                       Q1                                                      C2   10 F
                                                        C1                                                                 Q7
                                                                                                                     Q2
                                                        GND
                                                                                         L1                                      GND
                                                                              10                      12
            CMD_1.8V                                    G_Q1
                                                                                        22 H
                             MIXED LOGIC/ANALOG BLOCK
            CMD_3.0V                                                 Q3            Q5           Q6              Q4        GND
            CMD_5.0V                                    G_Q3
            CMD_STOP
                                                        G_HIZ                             11    PWR_GND
                                                                                                GND
                                                        G_Q4
                                                        G_Q2
                                                        G_Q7
                                                                 Figure 16. Basic DC/DC Converter
  In order to achieve the 250 s max time to discharge                                  external CRD_VCC reservoir capacitor. This timing is
CRD_VCC to 400 mV called by the EMV specifications, an                                  guaranteed for a 10 F maximum load reservoir capacitor
active pull down NMOS is provided (Q7) to discharge the                                 value (Figure 4).
                                                                          http://onsemi.com
                                                                                   21


                                                              NCN6001
The system operates with a two cycles concept (all comments are referenced to Figure 16 and Figure 17):
 1 − Cycle 1      Q1 and Q4 are switched ON and the inductor L1 is charged by the energy supplied by the external battery.
                  During this phase, the pair Q2/Q3 and the pair Q5/Q6 are switched OFF.
                  The current flowing the two MOSFET Q1 and Q4 is internally monitored and will be switched OFF when
                  the Ipeak value (depending upon the programmed output voltage value) is reached. At this point, Cycle 1 is
                  completed and Cycle 2 takes place. The ON time is a function of the battery voltage and the value of the induct-
                  or network (L and Zr) connected across pins 10/11.
                  A 4 s timeout structure ensures the system does run in a continuous Cycle 1 loop
 2 − Cycle 2      Q2 and Q3 are switched ON and the energy stored into the inductor L1 is dumped into the external load
                  through Q2. During this phase, the pair Q1/Q4 and the pair Q5/Q6 are switched OFF.
                  The current flow period is constant (900 ns typical) and Cycle 1 repeats after this time if the CRD_VCC
                  voltage is below the specified value.
                  When the output voltage reaches the specified value (1.8 V, 3.0 V or 5.0 V), Q2 and Q3 are switched OFF
                  immediately to avoid over voltage on the output load. In the meantime, the two extra NMOS Q5 and Q6 are
                  switched ON to fully discharge any current stored into the inductor, avoiding ringing and voltage spikes over
                  the system. Figure 17 illustrates the theoretical waveforms present in the DC/DC converter.
                               Charge CRD_VCC             CRD_VCC Charged             Next CRD_VCC Charge
                       ton  toff                          (Time is Not to Scale)
         Q1/Q4
         Q2/Q3
         Q5/Q6
                                                                          Ipeak
              IL
                        CRD_VCC Voltage Regulated
                                                                                     Vripple
     CRD_VCC
                                     Figure 17. Theoretical DC/DC Operating Waveforms
  When the CRD_VCC is programmed to zero volt, or when                  the temperature range and the combination of standard parts
the card is extracted from the socket, the active pull down Q7          provide an acceptable –20% to +20% tolerance, together
rapidly discharges the output reservoir capacitor, making               with a low cost. Table 9 gives a quick comparison between
sure the output voltage is below 0.4 V when the card slides             the most common type of capacitors. Obviously, the
across the ISO contacts.                                                capacitor must be SMD type to achieve the extremely low
  Based on the experiments carried out during the                       ESR and ESL necessary for this application. Figure 18
NCN6001 characterization, the best comprise, at time of                 illustrates the CRD_VCC ripple observed in the NCN6001
printing this document, is to use two 4.7 F/10 V/                      demo board depending upon the type of capacitor used to
ceramic/X7R capacitors in parallel to achieve the                       filter the output voltage.
CRD_VCC filtering. The ESR will not extend 50 m over
                                                         http://onsemi.com
                                                                   22


                                                                           NCN6001
   Table 9. CERAMIC/ELECTROLYTIC CAPACITORS COMPARISON
         Manufacturers                     Type/Series                  Format           Max Value          Tolerance         Typ. Z @ 500 kHz
              MURATA                 CERAMIC/GRM225                      0805           10 F/6.3 V        −20%/+20%                30 m
              MURATA                 CERAMIC/GRM225                      0805           4.7 F/6.3 V       −20%/+20%                30 m
              VISHAY                 Tantalum/594C/593C                    −            10 F/16 V              −                  450 m
              VISHAY                     Electrolytic/94SV                 −            10 F/10 V         −20%/+20%               400 m
                    −                Electrolytic Low Cost                 −            10 F/10 V         −35%/+50%                2.0 
  The DC/DC converter is capable to start with a full load                              In this example, the converter is fully loaded when the
connected to the CRD_VCC output as depicted in Figure 19.                             system starts from zero.
   Test Conditions: Cout = 2x 4.7 F/6 V/ceramic X7R,
                    Temp = +25°C
                    Iout = Maximum Specification
                                                                                         Figure 19. Output Voltage Startup Under Full Load
              Figure 18. Typical CRD_VCC Ripple Voltage                                                     Conditions
         74                                                                             The curves illustrate the typical behavior under full output
         72
                    Vout = 3.0 V                                                      current load (35 mA, 60 mA and 65 mA), according to EMV
                                                                                      specifications.
         70                                              Vout = 5.0 V
         68
Eff(%)   66                                  Vout = 1.8 V
         64
         62
         60
         58
              2.5        3.0       3.5       4.0       4.5        5.0      5.5
                                           Vbat (V)
                               Lout = 22 H/ESR = 2 
     Figure 20. CRD_VCC Efficiency as a Function of the
                   Input Supply Voltage
                                                                        http://onsemi.com
                                                                                 23


                                                             NCN6001
  During the operation, the inductor is subject to high peak                 Moreover, since the DC/DC efficiency depends upon the
current as depicted Figure 21 and the magnetic core must                     losses developed into the active and passive components,
sustain this level of current without damage. In particular,                 selecting a low ESR inductor is preferred to reduce these
the ferrite material shall not be saturated to avoid                         losses to a minimum.
uncontrolled current spike during the charge up cycle.
                                       Test Conditions: Input VCC voltage = 5.0 V
                                                        Current = 200 mA/div
                                                        Tamb = +20°C
                                              Figure 21. Typical Inductor Current
  According to the ISO7816−3 and EMV specifications, the                       On the other hand, the circuit is designed to make sure no
interface shall limits the CRD_VCC output current to                         over current exist over the full temperature range. As
200 mA maximum, under short circuit conditions.                              a matter of fact, the output current limit is reduced when the
The NCN6001 supports such a parameter, the limit being                       temperature increases: see Figure 23.
depending upon the input and output voltages as depicted in
Figure 22.
       180                                                                       160
       160                           Vo = 5.0 V                                                         Vo = 5.0 V
                                                                                 150
       140              Vo = 3.0 V
       120                                                                       140
                                                                     Iout (mA)
       100                                                                                              Vo = 3.0 V
Iout                                                                             130
       80
                                         Vo = 1.8 V
       60                                                                        120                    Vo = 1.8 V
       40
                                                                                 110
       20
         0                                                                       100
             2      3            4                5             6                   −25      −5    15      35        55   75   95      115
                                Vbat                                                                    TEMPERATURE (°C)
                           Iomax = F (Vbat)
                 Figure 22. Output Current Limits                                      Figure 23. Output Current Limit as a Function of
                                                                                                      the Temperature
                                                        http://onsemi.com
                                                                    24


                                                           NCN6001
SMART CARD CLOCK DIVIDER                                           last flip flop, thus yielding a constant 50% duty cycle,
   The main purpose of the built−in clock generator is             whatever be the divider ratio (Figure 24). Consequently, the
threefold:                                                         output CRD_CLK frequency division can be delayed by
      1. Adapts the voltage level shifter to cope with the         four CLK_IN pulses and the microcontroller software must
         different voltages that might exist between the           take this delay into account prior to launch a new data
         MPU and the Smart Card.                                   transaction. On the other hand, the output signal Duty Cycle
      2. Provides a frequency division to adapt the Smart          cannot be guaranteed 50% if the division ratio is 1 and if the
         Card operating frequency from the external clock          input Duty Cycle signal is not within the 46–56% range.
         source.                                                      The input signals CLK_IN and MOSI/b3 are
      3. Controls the clock state according to the smart           automatically routed to the level shifter and control block
         card specification.                                       according to the mode of operation.
   In addition, the NCN6001 adjusts the signal coming from
the microprocessor to get the Duty Cycle window as defined          CLOCK_IN
by the ISO7816−3 specification.
   The byte content of the SPI port, B2 & B3, fulfills the           CLOCK : 1
programming functions when CS is Low as depicted in
Figure 25 and Figure 24. The clock input stage (CLK_IN)              CLOCK : 2                                          Internal
can handle a 20 MHz frequency maximum signal, the                                                                       CLOCK
                                                                                                                        Divider
divider being capable to provide a 1:4 ratio. Of course, the
                                                                     CLOCK : 4
ratio must be defined by the engineer to cope with the Smart
Card considered in a given application and, in any case, the                B2
                                                                                                               These bits program
output clock [CRD_CLK] shall be limited to 20 MHz                                                              CLOCK = 1:1 ratio
                                                                            B3
maximum. In order to minimize the dI/dt and dV/dV                                                          Clock is updated upon
developed in the CRD_CLK line, the output stage includes                                                   CLOCK: 4 rising edge
a special function to adapt the slope of the clock signal for
different applications. This function is programmed by the           CRD_CLK
MOSI register (Table 2: WRT_REG Bits Definitions and
                                                                                             CLOCK programming is activated
Functions) whatever be the clock division.                                                   by the B2 + B3 logic state
   In order to avoid any duty cycle out of the smart card
ISO7816−3 specification, the divider is synchronized by the            Figure 24. Typical Clock Divider Synchronization
       VCC                                                                                                           CRD_VCC
       CLK_IN
                                                                     U1
                                                               DIGITAL_MUX
       B2                                       ASYNC
                                                          B
        B3              Programming
                         CRD_CLK                                OUT                     LEVEL SHIFTER               CRD_CLK
                          Division                                                       AND CONTROL
                                                SYNC          SEL
                                                          A
       SYNC
       B0                                      Programming
                                              CRD_CLK Slope
       B1
                                                                   NOTE: Bits [B0...B3] come from SPI data
                                      Figure 25. Basic Clock Divider and Level Shifter
                                                      http://onsemi.com
                                                               25


                                                            NCN6001
  The input clock can be divided by 1/1, ½ or ¼, depending           (Table 10). The slope of the output clock can be
upon the specific application, prior to be applied to the smart      programmed on the fly, independently of either the
card driver. On the other hand, the positive and negative            CRD_VCC voltage or the operating frequency, but care
going slopes of the output clock (CRD_CLK) can be                    must be observed as the CRD_RST will reflect the logic
programmed to optimize the operation of the chip                     state present at MOSI/b4 register.
 Table 10. OUTPUT CLOCK RISE AND FALL TIME SELECTION
                              CRD_CLK                           CRD_CLK                                 CRD_CLK
    B0         B1           Division Ratio                      SLO_SLP                                  FST_SLP
     0          0                  −                        Output Clock = Low                      Output Clock = Low
     0          1                  1                            10 ns (typ.)                             2 ns (typ.)
     1          0                 1/2                           10 ns (typ.)                             2 ns (typ.)
     1          1                 1/4                           10 ns (typ.)                             2 ns (typ.)
              Figure 26. Force CRD_CLK to Low                                Figure 27. Force CRD_CLK to Active Mode
                                                                         Note: Waveforms recorded without external compensation
             Figure 28. CRD_CLK Programming
                                                                                network.
                                                                    Figure 29. CRD_CLK Operating Low Speed (Top Trace),
                                                                                      Full Speed (Bottom Trace)
                                                        http://onsemi.com
                                                                 26


                                                             NCN6001
INPUT SCHMITT TRIGGERS                                               or under voltage situation, updates the READ_REG register
   All the Logic Input pins have built−in Schmitt trigger            accordingly and forces INT pin to Low. This register can be
circuits to protect the NCN6001 against uncontrolled                 read out by the MPU.
operation. The typical dynamic characteristics of the related           Battery Voltage: Both the over and under voltage are
pins are depicted in Figure 30.                                      detected by the NCN6001, the READ_REG register being
   The output signal is guaranteed to go High when the input         updated accordingly. The external MPU can read the register
voltage is above 0.70* VCC, and will go Low when the input           through the MISO pin to take whatever is appropriate to
voltage is below 0.30* VCC.                                          cope with the situation.
  OUTPUT                                                             ESD PROTECTION
                                                                        The NCN6001 includes silicon devices to protect the pins
                                                                     against the ESD spikes voltages. To cope with the different
 Vbat                                                                ESD voltages developed across these pins, the built−in
                                                                     structures have been designed to handle either 2.0 kV, when
  ON                                                                 related to the microcontroller side, or 8.0 kV when
                                                                     connected with the external contacts. Practically, the
                                                                     CRD_RST, CRD_CLK, CRD_IO, CRD_C4, and CRD_C8
 OFF                                                                 pins can sustain 8.0 kV, the maximum short circuit current
                                                                     being limited to 15 mA. The CRD_VCC pin has the same
                                                       INPUT         ESD protection, but can source up to 65 mA continuously,
                  0.3 Vbat       0.7 Vbat        Vbat                the absolute maximum current being internally limited to
                                                                     150 mA.
    Figure 30. Typical Schmitt Trigger Characteristic
                                                                     PRINTED CIRCUIT BOARD LAYOUT
                                                                        Since the NCN6001 carries high speed currents together
SECURITY FEATURES                                                    with high frequency clock, the printed circuit board must be
   In order to protect both the interface and the external smart     carefully designed to avoid the risk of uncontrolled
card, the NCN6001 provides security features to prevent              operation of the interface.
catastrophic failures as depicted hereafter.                            A typical single sided PCB layout is provided in Figure 32
   Pin Current Limitation: In the case of a short circuit to         highlighting the ground technique. Dual face printed circuit
ground, the current forced by the device is limited to 15 mA         board may be necessary to solve ringing and cross talk with
for any pins, except CRD_CLK pin. No feedback is                     the rest of the system.
provided to the external MPU.
   DC/DC Operation: The internal circuit continuously
senses the CRD_VCC voltage and, in the case of either over
                                                         http://onsemi.com
                                                                  27


                                                                                       J1
                                                                                                                    VCC                                    CLK_IN I/O                                                MISO      MOSI                               CRD_DET          RST    CLK   C4 VCC
                                                                                            1                              R1     D1                        TP1   TP3                                                TP5       TP7                                  TP8           TP10    TP11 TP12 TP14
                                                                                            2
                                                                                            3                             2.2 k       VCC        GND
                                                                                            4    10 F                   C1                                    INT                                    CS                CLK_SP                                             CRD_IO                 C8
                                                                                            5                                                                  TP2                                    TP4                TP6                                                                     TP13
                                                                                            6                                                                                                                                                                               TP9
                                                                                                                                                                                                                                                                                     See
                                                                                            7                                                                                                                                                                                        Note
                                                                                            8                                                                                                                                      VCC
                                                                                            9                       GND                                                                                                                                                                  C3
                                                                                            10                                                                                                                                                                                      22 pF
                                                                                            11     CS
                                                                                            12   CLK_SP1                                                                                                                                 C2      10 F
                                                                                            13    MOSI                                                                                                                                                                                                                 J4
                                                                                            14    MISO                                                                                                                                                                                                           SMARTCARD_D
                                                                                            15                                                                                                                                                GND      U2                                GND            GND     11
                                                                                                                                                                                                                                                                                                                   Swa
                                                                                            16                                                                                                                                            9        CRD_DET 18                                                   10 Swb
                                                                                                                                                                                                                                            VCC
                                                                                            17           I/O                                                                                                                              1                 20                                                   7
                                                                                            18                                                                                                                                            2 I/O     CRD_IO                                                         I/O
                                                                                                         INT                                                                                                                                                19                                                   2
                                                                                                                                                                                                                                            INT                                                                    RST
                                                                                            19                                                                                                                                            3        CRD_RST 17
                                                                                                                                                                                                                                                                                                                 3
                                                                                                                                                                                                                                            CLK_IN CRD_CLK                                                         CLK
                                                                                            20                                                                                                                                            7                                R8     47 R See                       4
                                                                                                                                                                                                                                            MISO                                                                   C4
                                                                                            21                                              R5     4.7 k                                                                                  8                                            Note                      8
                                                                                            22                                                                                                                                            5 CS     CRD_VCC 13                                                    1 C8         ISO7816
                                                                                                                                  GND                                                                                                       CLK_SP                                                                 VCC
                                                                                            23                                                                                                                                            4                 15
                                                                                            24                                                                                                                                              MOSI      C4/S0 14
                                                                                            25                                                                                                                          VCC                           C8/S1 16                                                      5
                                                                                                                                                                                                                                                  PWR_GND 11                                                            GND
                                                                                            26                                                    P1                                                                             R6       6            GND
                                                                                            27                                                  EX_CLK                                                                                      EN_RPU
28                                                                                                                                                                                                                                                                                                            GND
                                                                                                  CONTROL AND I/O
                                                                                            28                                                                                                                                 47 k
                                                                                            29                                                                                                                                           10                                 GND
                                                                                                                                                                                                                                              LoutL           LoutH
                                                                                            30                                                                                                                                                                        12
                                                                                                                                                                                                                                                                                                                                                                       NCN6001
                                                                                            31
     http://onsemi.com
                                                                                            32                                                                                                                                                                                                 C8          C7
                                                                                                                                                 GND                                                                                                   L1
                                                                                            33                      J5    3 2 1                                                                     NOTE:                                                                                      4.7 F      4.7 F
                                                                                            34                                                                                                                                                        22 H
                                                                                            35                           CLK_SEL
                                                                                            36                           VCC
                                                                                            37
                                                                                                                                                                                                                                                                                                                                        TEST BOARD SCHEMATIC DIAGRAM
                                                                                            38            R9                                                                                                                                                                                            GND
                                                                                                                                                                                                                        VCC
                                                                                            39           1k
                                                                                                                                                                Capacitor C2 and Resistor R8 are adjusted at final
                                                                                            40
                                                                                            41                                                                                                                                R4          D4
                                                                                                 Identify NCN6001
                                                                                            42
                                                                                                 Demo Board
                         Figure 31. NCN6001 Engineering Test Board Schematic Diagram
                                                                                            43                                                                                                                                2.2 K CRD_VCC
                                                                                            44
                                                                                            45                                                                                                                                                        Q1
                                                                                            46                      TP15          J9
                                                                                                                    GND         GROUND                                                                                                                           R7
                                                                                            47
                                                                                                                                                                checkout. Depending upon the PCB layout, these
                                                                                                                                                                                                                                      2N2222
                                                                                            48                                                                                                                                                                  47 k
                                                                                            49
                                                                                            50
                                                                                                                     1            1         2
                                                                                                                                                 GND
                                                                                                                                                                                                                                                 GND
                                                                                                                                                                two components may or may not be necessary.


                              NCN6001
Component Side (Top)                                  Copper Side (Bottom)
                                Top side
      Figure 32. NCN6001 Demo Board Printed Circuit Board Layout
                          http://onsemi.com
                                   29


                                                                NCN6001
 Table 11. DEMO BOARD BILL OF MATERIAL
  Desig.            Part Type             Footprint               Description                Supplier                 Part Number
    C1                10 F                  1206                   Capacitor                MURATA               GRM40−X5R−106K6.3
    C2                10 F                  1206                   Capacitor                MURATA               GRM40−X5R−106K6.3
    C3                22 pF                  805                    Capacitor                MURATA
    C7                4.7 F                 1206                   Capacitor                MURATA             GRM40−034X5R−475K6.3
    C8                4.7 F                 1206                   Capacitor                MURATA             GRM40−034X5R−475K6.3
    D1                 VCC                   SIP2                  LED Diode               Radio Spares                 180−8467
    D4             CRD_VCC                   SIP2                  LED Diode               Radio Spares                 180−8495
     J1         CONTROL & I/O               IDC50                                             Fujitsu             FCN−704Q050−AU/M
     J4          SMARTCARD           SMARTCARD_ISO            Smart Card Connector              FCI                 7434−L01−35S01
     J5             CLK_SEL                  SIP3                   Connector
     J9             GROUND               GND_TEST                   Connector
     L1               22 H                  1008                    Inductor                CoilCraft               1008PS−223−M
    P1              EX_CLK                   SMB                SMB Connector              Radio Spares                 112−2993
    Q1               2N2222                TO−18                       NPN              ON Semiconductor
    R1                2.2 k                 805                 Radio Spares
    R4                2.2 k                 805                 Radio Spares
    R5                4.7 k                 805                 Radio Spares
    R6                47 k                  805                 Radio Spares
    R7                47 k                  805                 Radio Spares
    R8                 47 R                  805                 Radio Spares
    R9                1.0 k                 805                 Radio Spares
    TP1              CLK_IN             TEST_POINT               TEST_POINT                Radio Spares                 203−4910
  TP10                 RST              TEST_POINT               TEST_POINT                Radio Spares                 203−4910
  TP11                 CLK              TEST_POINT               TEST_POINT                Radio Spares                 203−4910
  TP12                  C4              TEST_POINT               TEST_POINT                Radio Spares                 203−4910
  TP13                  C8              TEST_POINT               TEST_POINT                Radio Spares                 203−4910
  TP14                 VCC              TEST_POINT               TEST_POINT                Radio Spares                 203−4910
  TP15                 GND              TEST_POINT               TEST_POINT                Radio Spares                 203−4910
    TP2                INT              TEST_POINT               TEST_POINT                Radio Spares                 203−4910
    TP3                 I/O             TEST_POINT               TEST_POINT                Radio Spares                 203−4910
    TP4                 CS              TEST_POINT               TEST_POINT                Radio Spares                 203−4910
    TP5               MISO              TEST_POINT               TEST_POINT                Radio Spares                 203−4910
    TP6             CLK_SPI             TEST_POINT               TEST_POINT                Radio Spares                 203−4910
    TP7               MOSI              TEST_POINT               TEST_POINT                Radio Spares                 203−4910
    TP8                DET              TEST_POINT               TEST_POINT                Radio Spares                 203−4910
    TP9              CRD_IO             TEST_POINT               TEST_POINT                Radio Spares                 203−4910
    U1              NCN6001          ON Semiconductor
13. All resistors are ±5%, ¼ W , unless otherwise noted. All capacitors are ceramic, ±10%, 6.3 V, unless otherwise noted.
                                                            http://onsemi.com
                                                                      30


                                                                                            NCN6001
                                                                           MULTIPLE SMART CARD READER                                               17
                                                     VCC                                                                U1                               Swa
                                                                                                            9                          18   GND     18
                                                                                                                VCC      CRD_DET                         Swb
                                                                                                                                                                          ASYNCHRONOUS
                                     C1    10 F                                                            1                          20            7
                                                                                                                I/O        CRD_IO                        I/O
                                                                                                            2                          19            2
                                                                                                                                                                ISO7816
                                                                                                                INT      CRD_RST                         RST
                                                      MICROCONTROLLER
                                        GND                                                                 3                          17            3
                                                                                                                CLK_IN   CRD_CLK                         CLK
                                                                                                            4                          13            5
                                                                                                                MOSI     CRD_VCC                         GND
                                                                                                            5                          15
                                                                                                                CLK_SPI     C4/S0                    1
                                                                                                            7                          14              V
                                                                                                                MISO        C8/S1                    4 CC
                                                                          STROBE_ASYNC                      8                          16            8 C4
                                                                                                                CS           GND                       C8
                                                                          STROBE_SYNC                       6                          11
                                                                                                                EN_RPU PWR_GND                         SMARTCARD
                                                                                                                                                 C2
                                                                                                           10                          12
                                                                                                                Lout_L        Lout_H             10 F
                                                                                                                   L1       22 H            GND    ADDRESS = $00
                                                    GND                                                              NCN6001
                                                                                                                                               17
                                                                                                                        U2                         Swa
                                                                                                            9                        18  GND 18
                                                                                                                VCC      CRD_DET                   Swb
                                                                                                                                                                          ASYNCHRONOUS
                                                                                                            1                        20         7
                                                                                                                I/O        CRD_IO                  I/O
                                                                                                            2                        19         2
                                                                                                                                                                ISO7816
                                                                                                                INT      CRD_RST                   RST
                                                                                                            3                        17         3
                                                                                                                CLK_IN   CRD_CLK                   CLK
                                                                                                            4                        13         5
                                                                                                                MOSI     CRD_VCC                   GND
                                                                                                            5                        15
                                                                                                                CLK_SPI     C4/S0       VCC     1
                                                                                                            7                        14            V
                                                                                                                MISO        C8/S1               4 CC
                                                                                                            8                        16         8 C4
                                                                                                                CS           GND                   C8
                                                                                                            6                        11
                                                                                                                EN_RPU PWR_GND                    SMARTCARD
                                                                                                                                            C2
                                                                                                           10                        12
                                                                                                                Lout_L        Lout_H        10 F
                                                                                                                   L2       22 H            GND    ADDRESS = $01
                                                                                                                     NCN6001
                                                                                                                                                    17
                                                                                                                        U3                       Swa
                                                                                                            9                      18  GND 18
                                                                                                                VCC      CRD_DET                 Swb
                                                                                                                                                                          ASYNCHRONOUS
                                                                                                            1                      20         7
                                                                                                                I/O        CRD_IO                I/O
                                                                                                            2                      19         2
                                                                                                                                                                ISO7816
                                                                                                                INT      CRD_RST                 RST
                                                                                                            3                      17         3
                                                                                                                CLK_IN   CRD_CLK                 CLK
                                                                                                            4                      13         5
                                                                                                                MOSI     CRD_VCC                 GND
                                                                                                            5                      15
                                                                                                                CLK_SPI     C4/S0             1
                                                                                                            7                      14            V
                                                                                                                MISO        C8/S1     VCC     4 CC
                                                                                                            8                      16         8 C4
                                                                                                                CS           GND                 C8
                                                                                                            6                      11
                                                                                                                EN_RPU PWR_GND            C2    SMARTCARD
                                                                                                           10                      12     10 F
                                                                                                                Lout_L      Lout_H
                                                                                                                                        GND
                                                                                                                    L3       22 H            ADDRESS = $02
                         J5                                                                                           NCN6001
                                17                                                                                                           17
                          Swa                             U4                                                            U5                       Swa
                               18    GND      18                                       9                    9                      18  GND 18
ASYNCHRONOUS                                                                                                                                                              ASYNCHRONOUS
                          Swb                      CRD_DET       VCC                                            VCC      CRD_DET                 Swb
                               7              20                                       1                    1                      20         7
                           I/O                     CRD_IO         I/O                                           I/O        CRD_IO                I/O
                               2              19                                       2                    2                      19         2
               ISO7816                                                                                                                                          ISO7816
                          RST                      CRD_RST       INT                                            INT      CRD_RST                 RST
                               3              17                                       3                    3                      17         3
                          CLK                      CRD_CLK    CLK_IN                                            CLK_IN   CRD_CLK                 CLK
                               5              13                                       4                    4                      13         5
                          GND                      CRD_VCC     MOSI                                             MOSI     CRD_VCC                 GND
                                              15                                       5                    5                      15
                               1                   C4/S0     CLK_SPI                                            CLK_SPI      C4/S0            1
                          VCC                 14                                       7                    7                      14            V
                               4                   C8/S1       MISO                                             MISO         C8/S1    VCC     4 CC
                           C4 8                                                                                                               8  C4
                                              16                                       8                    8                      16
                           C8                      GND            CS                                            CS            GND                C8
                                   C6         11                                       6                    6                      11
  SMARTCARD                                        PWR_GND EN_RPU                           VCC                 EN_RPU PWR_GND            C2 SMARTCARD
                                10 F         12
                                                   Lout_H                     Lout_L
                                                                                       10                  10
                                                                                                                Lout_L      Lout_H
                                                                                                                                   12     10 F
                                     GND                                                                                                GND
                                                   22 H       L5                                                   L4       22 H            ADDRESS = $03
                                                        NCN6001                                                       NCN6001
                                                                        Figure 33. Typical Multiple Parallel Interfaces
   The five interfaces share a common microcontroller bus,                                             synchronous or asynchronous transactions with a unique CS
a bank of four NCN6001 supporting asynchronous card with                                               line. On the other hand, the only activated I/O pullup resistor
a dedicated CS line, the fifth one being used by to the                                                shall be one of the Asynchronous bank.
                                                                                       http://onsemi.com
                                                                                                  31


                                                               NCN6001
 ABBREVIATIONS
  Lout_L and Lout_H     DC/DC External Inductor
         Cout           Output Capacitor
        Class A         5V Smart Card
        Class B         3V Smart Card
       CRD_C4           Interface IC Card Digital Control
       CRD_C8           Interface IC Card Digital Control
      CRD_CLK           Interface IC Card Clock Input
      CRD_DET           Card Insertion/Extraction Detection
       CRD_IO           Interface IC Card Data Link
      CRD_RST           Interface IC Card RESET Input
      CRD_VCC           Interface IC Card Power Supply Line
      CRD_VCC           Card Power Supply Input
           Cs           Parasitic Stray Capacitance
           CS           Chip Select
         EMV            Europay Master Card Visa
       FST_SLP          CRD_CLK Fast Slope (tr and tf)
        GIE−CB          Groupement Inter Economique − Carte Bancaire
          ICC           Current at Card VCC Pin
          INT           Interrupt
          ISO           International Standards Organization
           C           Microcontroller
         MISO           Master In Slave Out: Data from the Interface
         MOSI           Master Out Slave In: Data from the External Microcontroller
           NC           Normally Close
          NO            Normally Open
         POR            Power On Reset
         RFU            Reserved Future Use
          SPI           Serial Port Interface
           T0           Smart Card Data Transfer Procedure by Bytes
           T1           Smart Card Data Transfer Procedure by Strings
       SLO_SLP          CRD_CLK Slow Slope (tr and tf)
         VCC            MPU Power Supply Voltage
 ORDERING INFORMATION
                   Device                                        Package                                      Shipping†
 NCN6001DTBR2G                                                 TSSOP−20                                   2,500 / Tape & Reel
                                                                (Pb−Free)
†For information on tape and reel specifications, including part orientation and tape sizes, please refer to our Tape and Reel Packaging
 Specifications Brochure, BRD8011/D.
                                                          http://onsemi.com
                                                                     32


                                                                                            NCN6001
                                                                              PACKAGE DIMENSIONS
                                                                                           TSSOP−20
                                                                                         CASE 948E−02
                                                                                             ISSUE C                                      NOTES:
                                                           K REF
                                                                                                            ÍÍÍÍ
                                                      20X                                                                                   1. DIMENSIONING AND TOLERANCING PER
                                                                                                                        K
                                                                                                                                               ANSI Y14.5M, 1982.
      0.15 (0.006) T U        S                           0.10 (0.004)     M   T U     S   V  S                        K1                   2. CONTROLLING DIMENSION: MILLIMETER.
                                                                                                            ÍÍÍÍ
                                                                                                                                            3. DIMENSION A DOES NOT INCLUDE MOLD
                                                                                                                                               FLASH, PROTRUSIONS OR GATE BURRS.
                                                                                                            ÍÍÍÍ
                                                                                                                                               MOLD FLASH OR GATE BURRS SHALL NOT
                                       20                                     11                      J J1                                     EXCEED 0.15 (0.006) PER SIDE.
                       2X   L/2                                                                                                             4. DIMENSION B DOES NOT INCLUDE
                                                                                                                                               INTERLEAD FLASH OR PROTRUSION.
                                                                                                                                               INTERLEAD FLASH OR PROTRUSION
                                                                                        B                     SECTION N−N                      SHALL NOT EXCEED 0.25 (0.010) PER SIDE.
                  L                                                                   −U−                                                   5. DIMENSION K DOES NOT INCLUDE
                          PIN 1                                                                                                                DAMBAR PROTRUSION. ALLOWABLE
                          IDENT                                                                                                                DAMBAR PROTRUSION SHALL BE 0.08
                                                                                                       N             0.25 (0.010)
                                                                                                                                               (0.003) TOTAL IN EXCESS OF THE K
                                        1                                     10                                                               DIMENSION AT MAXIMUM MATERIAL
                                                                                                                                               CONDITION.
                                                                                                                                            6. TERMINAL NUMBERS ARE SHOWN FOR
                                                                                                                           M                   REFERENCE ONLY.
      0.15 (0.006) T U        S                                                                                                             7. DIMENSION A AND B ARE TO BE
                                                                                                                                               DETERMINED AT DATUM PLANE −W−.
                                                           A                                        N                                                  MILLIMETERS         INCHES
                                                          −V−                                                                                    DIM    MIN      MAX     MIN     MAX
                                                                                                               F                                  A     6.40     6.60  0.252     0.260
                                                                                                                                                  B     4.30     4.50  0.169     0.177
                                                                                                              DETAIL E                            C      ---     1.20    ---     0.047
                                                                                                                                                  D     0.05     0.15  0.002     0.006
                                                                                                                                      −W−         F     0.50     0.75  0.020     0.030
                              C                                                                                                                   G       0.65 BSC        0.026 BSC
                                                                                                                                                  H     0.27     0.37  0.011     0.015
                                                                                                                                                  J     0.09     0.20  0.004     0.008
                                        D                      G                                                                                 J1     0.09     0.16  0.004     0.006
                                                                        H                                                                         K     0.19     0.30  0.007     0.012
                                                                                                          DETAIL E
                              0.100 (0.004)                                                                                                      K1     0.19     0.25  0.007     0.010
                                                                                                                                                  L       6.40 BSC        0.252 BSC
                         −T− SEATING                                           SOLDERING FOOTPRINT                                                M      0_       8_      0_       8_
                                PLANE
                                                                                              7.06
                                                                               1
                                                                                                                                          0.65
                                                                                                                                          PITCH
                                                   16X                            16X
                                                  0.36
                                                                                 1.26                                 DIMENSIONS: MILLIMETERS
  ON Semiconductor and the            are registered trademarks of Semiconductor Components Industries, LLC (SCILLC) or its subsidiaries in the United States and/or other countries.
  SCILLC owns the rights to a number of patents, trademarks, copyrights, trade secrets, and other intellectual property. A listing of SCILLC’s product/patent coverage may be accessed
  at www.onsemi.com/site/pdf/Patent−Marking.pdf. SCILLC reserves the right to make changes without further notice to any products herein. SCILLC makes no warranty, representation
  or guarantee regarding the suitability of its products for any particular purpose, nor does SCILLC assume any liability arising out of the application or use of any product or circuit, and
  specifically disclaims any and all liability, including without limitation special, consequential or incidental damages. “Typical” parameters which may be provided in SCILLC data sheets
  and/or specifications can and do vary in different applications and actual performance may vary over time. All operating parameters, including “Typicals” must be validated for each
  customer application by customer’s technical experts. SCILLC does not convey any license under its patent rights nor the rights of others. SCILLC products are not designed, intended,
  or authorized for use as components in systems intended for surgical implant into the body, or other applications intended to support or sustain life, or for any other application in which
  the failure of the SCILLC product could create a situation where personal injury or death may occur. Should Buyer purchase or use SCILLC products for any such unintended or
  unauthorized application, Buyer shall indemnify and hold SCILLC and its officers, employees, subsidiaries, affiliates, and distributors harmless against all claims, costs, damages, and
  expenses, and reasonable attorney fees arising out of, directly or indirectly, any claim of personal injury or death associated with such unintended or unauthorized use, even if such claim
  alleges that SCILLC was negligent regarding the design or manufacture of the part. SCILLC is an Equal Opportunity/Affirmative Action Employer. This literature is subject to all applicable
  copyright laws and is not for resale in any manner.
PUBLICATION ORDERING INFORMATION
LITERATURE FULFILLMENT:                                                       N. American Technical Support: 800−282−9855 Toll Free          ON Semiconductor Website: www.onsemi.com
 Literature Distribution Center for ON Semiconductor                           USA/Canada
 P.O. Box 5163, Denver, Colorado 80217 USA                                    Europe, Middle East and Africa Technical Support:              Order Literature: http://www.onsemi.com/orderlit
 Phone: 303−675−2175 or 800−344−3860 Toll Free USA/Canada                      Phone: 421 33 790 2910
 Fax: 303−675−2176 or 800−344−3867 Toll Free USA/Canada                       Japan Customer Focus Center                                    For additional information, please contact your local
 Email: orderlit@onsemi.com                                                    Phone: 81−3−5817−1050                                         Sales Representative
                                                                                      http://onsemi.com                                                                        NCN6001/D
                                                                                                  33


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
ON Semiconductor:
 NCN6001DTBR2 NCN6001DTBR2G NCN6001MUTWG
