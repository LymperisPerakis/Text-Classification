                                                                                                                    CP2104
S INGLE - C HIP USB- T O -UART B RIDGE
For newer designs, the CP2102N devices offer compatible footprints and are recommended for use instead
of the CP2104. See the Silicon Labs website (www.silabs.com/usbxpress) for more information.
Single-Chip USB to UART Data Transfer                                         Virtual COM Port Device Drivers
    Integrated  USB transceiver; no external resistors                           Works   with Existing COM Port PC Applications
      required                                                                     Royalty-Free   Distribution License
    Integrated clock; no external crystal required
                                                                                   Windows    7®/Vista®/XP®/Server 2003®/2000®
    Integrated 1024-Byte One-Time Programmable ROM                                      ®
                                                                                   Mac    OS-X
      for customizable product information
                                                                                           ®
    On-chip power-on reset circuit                                               Linux
    On-chip voltage regulator: 3.45 V output                                USBXpress™ Direct Driver Support
USB Function Controller                                                            Royalty-Free   Distribution License
    USB   Specification 2.0 compliant; full-speed (12 Mbps)                      Windows    7/Vista/XP/Server 2003/2000
    USB   Suspend states supported via SUSPEND and                               Windows    CE® 6.0, 5.0, and 4.2
      SUSPEND pins
                                                                              Example Applications
Asynchronous Serial Data BUS (UART)                                                Upgrade   of RS-232 legacy devices to USB
    All handshaking and modem interface signals                                  Upgrade   of RS-485 legacy devices to USB
    Data formats supported:                                                      Cellular phone USB interface cable
      - Data bits: 5, 6, 7, and 8                                                  PDA USB interface cable
      - Stop bits: 1, 1.5, and 2                                                   USB to RS-232 serial adapter
      - Parity: odd, even, mark, space, no parity
    Baud rates: 300 bps to 2 Mbits
                                                                              Supply Voltage
    576 byte receive buffer; 576 byte transmit buffer
                                                                                   Self-powered:   3.0 to 3.6 V
    Hardware or X-On/X-Off handshaking supported
                                                                                   USB   bus powered: 4.0 to 5.25 V
    Four GPIO signals for status and control
                                                                                   I/O voltage: 1.8 V to VDD
    Configurable I/O (1.8 V to VDD) using VIO pin
    Configurable     I/O (VDD to 5 V) using external pull-up                Package
                                                                                   RoHS-compliant     24-pin QFN (4x4 mm)
    RS-485   mode with bus transceiver control
                                                                              Ordering Part Number
                                                                                   CP2104-F03-GM
                                                                              Temperature Range: –40 to +85 °C
                   External
                voltage supply
                                                                       CP2104                              GPIO.0
                   or direct           VIO
                                                                                                                     (to external circuitry
                                                                                                           GPIO.1
                  connection                                                                                         for status and
                    to VDD                                                                                 GPIO.2    control)
                                                                                      4
                                                                                                           GPIO.3
                                     REGIN      IN
                                                    Voltage
                                                   Regulator
                                                     OUT                                                    RST
                                                                                                                      (to external circuitry
                                                                                                          SUSPEND     for USB suspend
                                                                                                                      states)
                                      VDD
                                                                                                          SUSPEND
                                      GND                 48 MHz
                                                                                                             RI
                                                        Oscillator
                    USB
                                                                                                            DCD
               CONNECTOR              VBUS
                                                                                                            DTR
                      VBUS              D-
                                                                                                                     External RS-232
                          D-                      USB            USB Function                               DSR         transceiver or
                         D+            D+     Transceiver          Controller               UART                       UART circuitry
                                                                                                            TXD
                       GND
                                                                      576B 576B
                                                             1024B                                          RXD
                                                                       TX     RX
                                                             PROM
                                                                     Buffer Buffer                          RTS
                                       VPP
                                                                                                            CTS
                                            Figure 1. Example System Diagram
Rev. 1.2 1/17                                Copyright © 2017 by Silicon Laboratories                                                        CP2104


CP2104
2      Rev. 1.2


                                                                                                                      CP2104
TABLE O F C ONTENTS
Section                                                                                                                           Page
1. System Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .4
2. Electrical Characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .5
3. Pinout and Package Definitions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .8
4. QFN-24 Package Specifications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
5. USB Function Controller and Transceiver . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
6. Asynchronous Serial Data Bus (UART) Interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
     6.1. Baud Rate Generation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
7. GPIO Pins . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
     7.1. GPIO.0-1—Transmit and Receive Toggle . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14
     7.2. GPIO.2—RS-485 Transceiver Bus Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14
     7.3. Hardware Flow Control (RTS and CTS) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
8. One-Time Programmable ROM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
9. Voltage Regulator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .17
10. CP2104 Device Drivers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
     10.1. Virtual COM Port Drivers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
     10.2. USBXpress Drivers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .19
     10.3. Driver Customization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
     10.4. Driver Certification . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
11. Relevant Application Notes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
Document Change List . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
                                                            Rev. 1.2                                                                      3


CP2104
1. System Overview
The CP2104 is a highly-integrated USB-to-UART Bridge Controller providing a simple solution for updating
RS-232/RS-485 designs to USB using a minimum of components and PCB space. The CP2104 includes a USB
2.0 full-speed function controller, USB transceiver, oscillator, one-time programmable ROM, and asynchronous
serial data bus (UART) with full modem control signals in a compact 4 x 4 mm QFN-24 package (sometimes called
“MLF” or “MLP”). No other external USB components are required.
The on-chip one-time programmable ROM may be used to customize the USB Vendor ID, Product ID, Product
Description String, Power Descriptor, Device Release Number, Device Serial Number, and GPIO configuration as
desired for OEM applications.
Royalty-free Virtual COM Port (VCP) device drivers provided by Silicon Labs allow a CP2104-based product to
appear as a COM port to PC applications. The CP2104 UART interface implements all RS-232/RS-485 signals,
including control and handshaking signals, so existing system firmware does not need to be modified. The device
also features up to four GPIO signals that can be user-defined for status and control information. Support for I/O
interface voltages down to 1.8 V is provided via a VIO pin. In many existing RS-232 designs, all that is required to
update the design from RS-232 to USB is to replace the RS-232 level-translator with the CP2104. Direct access
driver support is available through the Silicon Labs USBXpress driver set. See www.siliconlabs.com for the latest
application notes and product support information for the CP2104.
An evaluation kit for the CP2104 (Part Number: CP2104EK) is available. It includes a CP2104-based USB-to-
UART/RS-232 evaluation board, a complete set of VCP device drivers, USB and RS-232 cables, and full
documentation. Contact a Silicon Labs sales representatives or go to www.siliconlabs.com to order the CP2104
Evaluation Kit.
4                                                     Rev. 1.2


                                                                                                                  CP2104
2. Electrical Characteristics
Table 1. Absolute Maximum Ratings
                         Parameter                                Conditions            Min          Typ          Max        Units
 Ambient Temperature Under Bias                                                          –55          —           125          °C
 Storage Temperature                                                                     –65          —           150          °C
 Voltage on RST, GPIO or UART Pin with respect to                 VIO > 2.2 V           –0.3          —            5.8          V
 GND                                                              VIO < 2.2 V           –0.3          —          VIO +
                                                                                                                   3.6
 Voltage on VBUS with respect to GND                              VDD > 3.0 V           –0.3          —            5.8          V
                                                              VDD not powered           –0.3          —          VDD +
                                                                                                                   3.6
 Voltage on VDD or VIO with respect to GND                                              –0.3          —            4.2          V
 Maximum Total Current through VDD, VIO, and GND                                          —           —           500         mA
 Maximum Output Current Sunk by RST or any I/O                                            —           —           100         mA
 pin
 Note: Stresses above those listed may cause permanent damage to the device. This is a stress rating only, and functional
        operation of the devices at or exceeding the conditions in the operation listings of this specification is not implied.
        Exposure to maximum rating conditions for extended periods may affect device reliability.
Table 2. Global DC Electrical Characteristics
VDD = 3.0 to 3.6 V, –40 to +85 °C unless otherwise specified.
                       Parameter                               Conditions               Min         Typ          Max         Units
 Digital Supply Voltage (VDD)                                                           3.0           —           3.6           V
 Digital Port I/O Supply Voltage (VIO)                                                  1.8           —           VDD           V
 Voltage on VPP with respect to GND during a                   VIO > 3.3 V              5.75          —          VIO +          V
 ROM programming operation                                                                                        3.6
 Capacitor on VPP for ROM programming                                                    —           4.7           —          µF
 Supply Current1                                           Normal Operation;             —          17.0         18.5         mA
                                                             VREG Enabled
 Supply Current1                                               Suspended;                —           100          200         µA
                                                             VREG Enabled
 Supply Current—USB Pull-up2                                                             —           200          228         µA
 Specified Operating Temperature Range                                                  –40           —           +85         °C
 Notes:
     1. If the device is connected to the USB bus, the USB Pull-up Current should be added to the supply current for total
        supply current.
     2. The USB Pull-up supply current values are calculated values based on USB specifications.
                                                            Rev. 1.2                                                               5


CP2104
Table 3. UART and Suspend I/O DC Electrical Characteristics
VDD = 3.0 to 3.6 V, VIO = 1.8 V to VDD, –40 to +85 °C unless otherwise specified.
          Parameters                             Conditions                    Min        Typ         Max       UNITS
 Output High Voltage (VOH)                      IOH = –10 µA               VIO – 0.1       —            —
                                                 IOH = –3 mA               VIO – 0.2       —            —          V
                                               IOH = –10 mA                     —       VIO – 0.4       —
 Output Low Voltage (VOL)                         IOL = 10 µA                   —          —           0.1
                                                IOL = 8.5 mA                    —          —           0.4         V
                                                 IOL = 25 mA                    —          0.6          —
 Input High Voltage (VIH)                                                   0.7 x VIO      —            —         V
 Input Low Voltage (VIL)                                                        —          —           0.6        V
 Input Leakage Current                       Weak Pull-Up Off                   —          —            1         µA
                                       Weak Pull-Up On, VIN = 0 V               —          25           50
 Maximum Input Voltage                   Open drain, logic high (1)             —          —           5.8        V
Table 4. Reset Electrical Characteristics
–40 to +85 °C unless otherwise specified.
           Parameter                               Conditions                    Min        Typ        Max       Units
RST Input High Voltage                                                       0.75 x VIO      —          —          V
RST Input Low Voltage                                                             —          —          0.6        V
Minimum RST Low Time to                                                           15         —          —          µs
Generate a System Reset
VDD Ramp Time for                                                                 —          —           1        ms
Power On
Table 5. Voltage Regulator Electrical Specifications
–40 to +85 °C unless otherwise specified.
                  Parameter                                   Conditions                   Min    Typ      Max   Units
 Input Voltage Range                                                                       3.0     —       5.25     V
 Output Voltage                                       Output Current = 1 to 100 mA*        3.3    3.45      3.6     V
 VBUS Detection Input Threshold                                                            2.5     —         —      V
 Bias Current                                                                               —      —        120    µA
 *Note: The maximum regulator supply current is 100 mA. This includes the supply current of the CP2104.
6                                                           Rev. 1.2


                                                                        CP2104
Table 6. GPIO Output Specifications
–40 to +85 °C unless otherwise specified
             Parameter                          Conditions    Min Typ Max  Units
RS-485 Active Time After Stop Bit                             —     1  —  bit time*
TX Toggle Rate                                                —    10  —     Hz
RX Toggle Rate                                                —    10  —     Hz
*Note: Bit-time is calculated as 1 / baud rate.
                                                     Rev. 1.2                       7


CP2104
3. Pinout and Package Definitions
                                         Table 7. CP2104 Pin Definitions
    Name             Pin #          Type                                    Description
     VDD                6         Power In    Power Supply Voltage Input.
                                 Power Out Voltage Regulator Output. See Section 9.
      VIO               5         Power In     I/O Supply Voltage Input.
     GND                2                     Ground. Must be tied to ground.
     RST                9           D I/O     Device Reset. Open-drain output of internal POR or VDD monitor. An
                                              external source can initiate a system reset by driving this pin low for
                                              the time specified in Table 4.
    REGIN               7         Power In    5 V Regulator Input. This pin is the input to the on-chip voltage regu-
                                              lator.
    VBUS                8            D In     VBUS Sense Input. This pin should be connected to the VBUS signal
                                              of a USB network.
      VPP              16*         Special    Connect a 4.7 µF capacitor between this pin and ground to support
                                              ROM programming via USB interface.
      D+                3           D I/O     USB D+
      D–                4           D I/O     USB D–
     TXD                21          D Out     Asynchronous data output (UART Transmit)
     RXD                20           D In     Asynchronous data input (UART Receive)
     CTS               18*           D In     Clear to Send control input (active low)
     RTS               19*          D Out     Ready to Send control output (active low)
     DSR               22*           D In     Data Set Ready control input (active low)
     DTR               23*          D Out     Data Terminal Ready control output (active low)
     DCD               24*           D In     Data Carrier Detect control input (active low)
       RI               1*           D In     Ring Indicator control input (active low)
  SUSPEND              17*          D Out     This pin is logic high when the CP2104 is in the USB Suspend state.
  SUSPEND              15*          D Out     This pin is logic low when the CP2104 is in the USB Suspend state.
    GPIO.3             11*          D I/O     User-configurable input or output.
    GPIO.2             12*          D I/O     User-configurable input or output.
    GPIO.1             13*          D I/O     User-configurable input or output.
    GPIO.0             14*          D I/O     User-configurable input or output.
      NC               10*                    This pin should be left unconnected or tied to VIO.
*Note: Pins can be left unconnected when not used.
8                                                      Rev. 1.2


                                                                             CP2104
            DCD     DTR      DSR   TXD      RXD      RTS
            24      23       22    21       20       19
 RI   1                                                       18   CTS
GND   2                                                       17   SUSPEND
 D+   3                                                       16   VPP
                     CP2104-GM
 D-   4               Top View                                15   SUSPEND
VIO   5                                                       14   GPIO.0
                           GND (Optional)
VDD   6                                                       13   GPIO.1
            7       8        9     10       11       12
            REGIN
                             RST   NC
                    VBUS                    GPIO.3   GPIO.2
          Figure 2. QFN-24 Pinout Diagram (Top View)
                                   Rev. 1.2                                       9


CP2104
4. QFN-24 Package Specifications
                                  Figure 3. QFN-24 Package Drawing
                                Table 8. QFN-24 Package Dimensions
      Dimension        Min         Typ         Max           Dimension       Min         Typ    Max
           A          0.70        0.75         0.80                L         0.30        0.40   0.50
           A1         0.00        0.02         0.05               L1         0.00         —     0.15
           b          0.18        0.25         0.30              aaa          —           —     0.15
           D                   4.00 BSC.                         bbb          —           —     0.10
          D2          2.55        2.70         2.80              ddd          —           —     0.05
           e                   0.50 BSC.                         eee          —           —     0.08
           E                   4.00 BSC.                          Z           —          0.24     —
           E2         2.55        2.70         2.80               Y           —          0.18     —
      Notes:
         1. All dimensions shown are in millimeters (mm) unless otherwise noted.
         2. Dimensioning and Tolerancing per ANSI Y14.5M-1994.
         3. This drawing conforms to JEDEC Solid State Outline MO-220, variation WGGD except for
             custom features D2, E2, Z, Y, and L which are toleranced per supplier designation.
         4. Recommended card reflow profile is per the JEDEC/IPC J-STD-020 specification for Small Body
             Components.
10                                                   Rev. 1.2


                                                                                                 CP2104
                  Figure 4. QFN-24 Recommended PCB Land Pattern
                    Table 9. QFN-24 PCB Land Pattern Dimensions
Dimension            Min              Max              Dimension             Min             Max
     C1              3.90             4.00                  X2               2.70            2.80
     C2              3.90             4.00                  Y1               0.65            0.75
      E                    0.50 BSC                         Y2               2.70            2.80
     X1              0.20             0.30
Notes:
General
   1. All dimensions shown are in millimeters (mm) unless otherwise noted.
   2. This Land Pattern Design is based on the IPC-7351 guidelines.
Solder Mask Design
   3. All metal pads are to be non-solder mask defined (NSMD). Clearance between the solder
        mask and the metal pad is to be 60 m minimum, all the way around the pad.
Stencil Design
   4. A stainless steel, laser-cut and electro-polished stencil with trapezoidal walls should be used
        to assure good solder paste release.
   5. The stencil thickness should be 0.125 mm (5 mils).
   6. The ratio of stencil aperture to land pad size should be 1:1 for all perimeter pads.
   7. A 2x2 array of 1.10 mm x 1.10 mm openings on a 1.30 mm pitch should be used for the center
        pad.
Card Assembly
   8. A No-Clean, Type-3 solder paste is recommended.
   9. The recommended card reflow profile is per the JEDEC/IPC J-STD-020 specification for Small
        Body Components.
                                               Rev. 1.2                                               11


CP2104
5. USB Function Controller and Transceiver
The Universal Serial Bus (USB) function controller in the CP2104 is a USB 2.0 compliant full-speed device with
integrated transceiver and on-chip matching and pullup resistors. The USB function controller manages all data
transfers between the USB and the UART as well as command requests generated by the USB host controller and
commands for controlling the function of the UART and GPIO pins.
The USB Suspend and Resume signals are supported for power management of both the CP2104 device as well
as external circuitry. The CP2104 will enter Suspend mode when Suspend signaling is detected on the bus. On
entering Suspend mode, the CP2104 asserts the SUSPEND and SUSPEND signals. SUSPEND and SUSPEND
are also asserted after a CP2104 reset until device configuration during USB Enumeration is complete.
The CP2104 exits the Suspend mode when any of the following occur: Resume signaling is detected or generated,
a USB Reset signal is detected, or a device reset occurs. On exit of Suspend mode, the SUSPEND and SUSPEND
signals are de-asserted.
Both SUSPEND and SUSPEND temporarily float high during a CP2104 reset. If this behavior is undesirable, a
strong pulldown (10 k) can be used to ensure SUSPEND remains low during reset.
The logic level and output mode (push-pull or open-drain) of various pins during USB Suspend is configurable in
the PROM. See Section 8 for more information.
6. Asynchronous Serial Data Bus (UART) Interface
The CP2104 UART interface consists of the TX (transmit) and RX (receive) data signals as well as the RTS, CTS,
DSR, DTR, DCD, and RI control signals. The UART supports RTS/CTS, DSR/DTR, and X-On/X-Off handshaking.
The UART is programmable to support a variety of data formats and baud rates. If the Virtual COM Port drivers are
used, the data format and baud rate are set during COM port configuration on the PC. If the USBXpress drivers are
used, the CP2104 is configured through the USBXpress API. The data formats and baud rates available are listed
in Table 10.
                                   Table 10. Data Formats and Baud Rates
                            Data Bits1     5, 6, 7, and 8
                            Stop Bits      1, 1.52, and 2
                           Parity Type     None, Even, Odd, Mark, Space
                           Baud Rates      300 bps to 2.0 Mbps
                          Notes:
                             1. Data sizes of 5 and 6 bits are not supported at baud rates above
                                 921600 bps.
                             2. 1.5 stop bits only available when using 5 data bits.
12                                                       Rev. 1.2


                                                                                                                                                                     CP2104
6.1. Baud Rate Generation
The baud rate generator is very flexible, allowing the user to request any baud rate in the range from 300 bps to
2 Mbps. If the baud rate cannot be directly generated from the 48 MHz oscillator, the device will choose the closest
possible option. The actual baud rate is dictated by Equation 1 and Equation 2.
                                                                 48 MHz                                                          Prescale = 4 if Requested Baud Rate  365 bps
         Clock Divider = ----------------------------------------------------------------------------------------------------
                          2  Prescale  Requested Baud Rate                                                                     Prescale = 1 if Requested Baud Rate  365 bps
                                                                   Equation 1. Clock Divider Calculation
                                                                       48 MHz                                                  Prescale = 4 if Requested Baud Rate  365 bps
           Actual Baud Rate = -----------------------------------------------------------------------------
                                           2  Prescale  Clock Divider                                                        Prescale = 1 if Requested Baud Rate  365 bps
                                                                        Equation 2. Baud Rate Calculation
Most baud rates can be generated with an error of less than 1.0%. A general rule of thumb for the majority of UART
applications is to limit the baud rate error on both the transmitter and the receiver to no more than ±2%. The clock
divider value obtained in Equation 1 is rounded to the nearest integer, which may produce an error source. Another
error source will be the 48 MHz oscillator, which is accurate to ±0.25%. Knowing the actual and requested baud
rates, the total baud rate error can be found using Equation 3.
                                                                                                                                Actual Baud Rate
                                     Baud Rate Error (%) = 100   1 – -----------------------------------------------------------  0.25%
                                                                                                                             Requested Baud Rate
                                                               Equation 3. Baud Rate Error Calculation
7. GPIO Pins
The CP2104 supports four user-configurable GPIO pins for status and control information. Each of these GPIO
pins are usable as inputs, open-drain outputs, or push-pull outputs. Three of these GPIO pins also have alternate
functions which are listed in Table 11.
                                                           Table 11. GPIO Pin Alternate Functions
                                                                     GPIO Pin                                            Alternate Function
                                                                        GPIO.0                                                  TX Toggle
                                                                        GPIO.1                                                 RX Toggle
                                                                        GPIO.2                               RS-485 Transceiver Control
By default, all of the GPIO pins are configured as a GPIO input. The configuration of the pins is one-time
programmable for each device. The difference between an open-drain output and a push-pull output is when the
GPIO output is driven to logic high. A logic high, open-drain output pulls the pin to the VIO rail through an internal,
pull-up resistor. A logic high, push-pull output directly connects the pin to the VIO voltage. Open-drain outputs are
typically used when interfacing to logic at a higher voltage than the VIO pin. These pins can be safely pulled to the
higher, external voltage through an external pull-up resistor. The maximum external pull-up voltage is 5 V.
The speed of reading and writing the GPIO pins is subject to the timing of the USB bus. GPIO pins configured as
inputs or outputs are not recommended for real-time signaling.
More information regarding the configuration and usage of these pins can be found in “AN721: CP21xx Device
Customization Guide” and “AN223: Runtime GPIO Control for CP210x” available on the Silicon Labs website.
                                                                                                                   Rev. 1.2                                                    13


CP2104
7.1. GPIO.0-1—Transmit and Receive Toggle
GPIO.0 and GPIO.1 are configurable as Transmit Toggle and Receive Toggle pins. These pins are logic high when
a device is not transmitting or receiving data, and they toggle at a fixed rate as specified in Table 6 when data
transfer is in progress. Typically, these pins are connected to two LEDs to indicate data transfer.
                                                                          VIO
                                           CP2104
                                       GPIO.0 – TX Toggle
                                       GPIO.1 – RX Toggle
                   Figure 5. Transmit and Receive Toggle Typical Connection Diagram
7.2. GPIO.2—RS-485 Transceiver Bus Control
GPIO.2 is configurable as an RS-485 bus transceiver control pin which is connected to the DE and RE inputs of the
transceiver. When configured for RS-485 mode, the pin is asserted during UART data transmission as well as line
break transmission. The RS-485 mode of GPIO.2 is active-high by default, and is also configurable for active-low
mode.
                       CP2104                                                       RS-485
                                                                                Transceiver
                                         TX                              R
                                        RX                               D
                     GPIO.2 – RS485                                      RE
                                                                         DE
                         Figure 6. RS-485 Transceiver Typical Connection Diagram
14                                                      Rev. 1.2


                                                                                                 CP2104
7.3. Hardware Flow Control (RTS and CTS)
To utilize the functionality of the RTS and CTS pins of the CP2104, the device must be configured to use hardware
flow control.
RTS, or Ready To Send, is an active-low output from the CP2104 and indicates to the external UART device that
the CP2104’s UART RX FIFO has not reached the watermark level of 383 bytes and is ready to accept more data.
When the amount of data in the RX FIFO reaches the watermark, the CP2104 pulls RTS high to indicate to the
external UART device to stop sending data.
CTS, or Clear To Send, is an active-low input to the CP2104 and is used by the external UART device to indicate to
the CP2104 when the external UART device’s RX FIFO is getting full. The CP2104 will not send more than two
bytes of data once CTS is pulled high.
                       CP2104                                                     RS232
                                                                                 System
                                        TX                               TX
                                        RX                               RX
                                      RTS                                RTS
                                      CTS                                CTS
                       Figure 7. Hardware Flow Control Typical Connection Diagram
                                                       Rev. 1.2                                                15


CP2104
8. One-Time Programmable ROM
The CP2104 includes an internal one-time programmable ROM that may be used to customize the USB Vendor ID
(VID), Product ID (PID), Product Description String, Power Descriptor, Device Release Number, Device Serial
Number, GPIO configuration, Suspend pins, and modes as desired for OEM applications. If the programmable
ROM has not been customized, the default configuration data shown in Table 12 and Table 13 is used.
                                  Table 12. Default USB Configuration Data
                    Name                                                 Value
      Vendor ID                           10C4h
      Product ID                          EA60h
      Power Descriptor (Attributes)       80h (Bus-powered)
      Power Descriptor (Max. Power) 32h (100 mA)
      Release Number                      0100h (Release Version 01.00)
      Serial Number                       Unique 8 character ASCII string (63 characters maximum)
      Product Description String          “CP2104 USB to UART Bridge Controller” (126 characters maximum)
                     Table 13. Default GPIO, UART, and Suspend Configuration Data
                    Name                                                 Value
      GPIO.0                              GPIO Input
      GPIO.1                              GPIO Input
      GPIO.2                              GPIO Input
      GPIO.3                              GPIO Input
      Flush_Buffers                       Flush TX and RX FIFO on open
      SUSPEND                             Push-pull
      SUSPEND                             Push-pull
      RS-485 Level                        Active-High
While customization of the USB configuration data is optional, customizing the VID/PID combination is
recommended. A unique VID/PID combination will prevent the driver from conflicting with any other USB driver. A
vendor ID can be obtained from www.usb.org or Silicon Labs can provide a free PID for the OEM product that can
be used with the Silicon Labs VID. Customizing the serial number is also recommended if the OEM application is
one in which it is possible for multiple CP210x-based devices to be connected to the same PC.
The configuration data ROM can be programmed by Silicon Labs prior to shipment with the desired configuration
information. It can also be programmed in-system over the USB interface by adding a capacitor to the PCB. If
configuration ROM is to be programmed in-system, a 4.7 µF capacitor must be added between the VPP pin and
ground. No other circuitry should be connected to VPP during a programming operation, and VDD must remain at
3.3 V or higher to successfully write to the configuration ROM.
16                                                      Rev. 1.2


                                                                                                    CP2104
9. Voltage Regulator
The CP2104 includes an on-chip 5.0 to 3.45 V voltage regulator. This allows the CP2104 to be configured as either
a USB bus-powered device or a USB self-powered device. A typical connection diagram of the device in a bus-
powered application using the regulator is shown in Figure 8. When enabled, the voltage regulator output appears
on the VDD pin and can be used to power external devices. See Table 5 for the voltage regulator electrical
characteristics.
If the regulator is used to provide VDD in a self-powered application, use the same connections from Figure 8, but
connect REGIN to an onboard 5 V supply, and disconnect it from the VBUS pin. In addition, if REGIN may be
unpowered while VBUS is 5 V, a resistor divider shown in Note 5 of Figure 9 is required to meet the absolute
maximum voltage on VBUS specification in Table 1.
                                                                                         VIO  Note 2
                                                                                               4.7 k
                              Note 3         VIO
                                                           CP2104                RST
           3.45 V Power
                                             VDD                            SUSPEND          To external circuitry for
                   1-5 F       0.1 F                                                        USB suspend states
                                                                            SUSPEND
                                             REGIN
                                  1 F                                         GPIO.0
                                                                               GPIO.1        To external circuitry for
                                             GND
                                                                               GPIO.2           status and control
     USB
 Connector                                                                     GPIO.3
      VBUS                                   VBUS
         D+                                  D+
                                                                                   RI
         D-                                  D-
                                                                                 DCD
       GND
                                                                                 DTR
                                                                                 DSR        Standard
                                                                                              UART
                           Note 1                                                TXD         Signals
                                                                                 RXD
                                             VPP
                                4.7 F                                           RTS
                                                                                 CTS
                                     Note 4
     Note 1 : Avalanche transient voltage suppression diodes compatible with Full-speed USB should be
              added at the connector for ESD protection. Use Littelfuse p/n SP0503BAHT or equivalent.
     Note 2 : An external pull-up is not required, but can be added for noise immunity.
     Note 3 : VIO can be connected directly to VDD or to a supply as low as 1.8 V to set the I/O interface
              voltage.
     Note 4 : If configuration ROM is to be programmed via USB, a 4.7 F capacitor must be added
              between VPP and ground. During a programming operation, the pin should not be
              connected to other circuitry, and VDD must be at least 3.3 V.
                             Figure 8. Typical Bus-Powered Connection Diagram
                                                        Rev. 1.2                                                       17


CP2104
Alternatively, if 3.0 to 3.6 V power is supplied to the VDD pin, the CP2104 can function as a USB self-powered
device with the voltage regulator bypassed. For this configuration, tie the REGIN input to VDD to bypass the voltage
regulator. A typical connection diagram showing the device in a self-powered application with the regulator
bypassed is shown in Figure 9.
The USB max power and power attributes descriptor must match the device power usage and configuration. See
application note “AN721: CP210x/CP211x Device Customization Guide” for information on how to customize USB
descriptors for the CP2104.
                                                                                                  VIO Note 2
                                                                                                     4.7 k
                                  Note 3          VIO
                                                                CP2104                  RST
                                                  VDD                               SUSPEND          To external circuitry for
                                                                                                      USB suspend states
                                                                                    SUSPEND
        3.3 V
                                                  REGIN
       Power
                                                                                      GPIO.0
                       1-5 F        0.1 F
                                                                                      GPIO.1         To external circuitry for
                                                                                      GPIO.2            status and control
                                                  GND
                                                                                      GPIO.3
                     Note 5
                     (Optional)       24 k
                                                                                          RI
        USB                                       VBUS
                                                                                        DCD
     Connector                        47 k
                                                                                        DTR
         VBUS                                                                                        Standard
                                                                                        DSR
            D+                                    D+                                                  UART
                                                                                        TXD           Signals
            D-                                    D-
                                                                                        RXD
          GND
                                                                                        RTS
                                                                                        CTS
                            Note 1
                                                  VPP
                                     4.7 F
                                               Note 4
        Note 1 : Avalanche transient voltage suppression diodes compatible with Full-speed USB should be
                  added at the connector for ESD protection. Use Littelfuse p/n SP0503BAHT or equivalent.
        Note 2 : An external pull-up is not required, but can be added for noise immunity.
        Note 3 : VIO can be connected directly to VDD or to a supply as low as 1.8 V to set the I/O interface
                  voltage.
        Note 4 : If configuration ROM is to be programmed via USB, a 4.7 F capacitor must be added
                  between VPP and ground. During a programming operation, the pin should not be
                  connected to other circuitry, and VDD must be at least 3.3 V.
        Note 5 : For self-powered systems where VDD and VIO may be unpowered when VBUS is connected
                  to 5 V, a resistor divider (or functionally-equivalent circuit) on VBUS is required to meet the
                  absolute maximum voltage on VBUS specification in the Electrical Characteristics section.
                 Figure 9. Typical Self-Powered Connection Diagram (Regulator Bypass)
18                                                           Rev. 1.2


                                                                                                    CP2104
10. CP2104 Device Drivers
There are two sets of device drivers available for CP2104 devices: the Virtual COM Port (VCP) drivers and the
USBXpress Direct Access drivers. Only one set of drivers is necessary to interface with the device.
The latest drivers are available at http://www.siliconlabs.com/products/mcu/Pages/SoftwareDownloads.aspx.
10.1. Virtual COM Port Drivers
The CP2104 Virtual COM Port (VCP) device drivers allow a CP2104-based device to appear to the PC's
application software as a COM port. Application software running on the PC accesses the CP2104-based device
as it would access a standard hardware COM port. However, actual data transfer between the PC and the CP2104
device is performed over the USB interface. Therefore, existing COM port applications may be used to transfer
data via the USB to the CP2104-based device without modifying the application. See application note “AN197:
Serial Communications Guide for the CP210x” for Example Code for Interfacing to a CP2104 using the Virtual
COM drivers.
10.2. USBXpress Drivers
The Silicon Labs USBXpress drivers provide an alternate solution for interfacing with CP2104 devices. No serial
port protocol expertise is required. Instead, a simple, high-level application program interface (API) is used to
provide simpler CP210x connectivity and functionality. The USBXpress for CP210x Development Kit includes
Windows device drivers, Windows device driver installer and uninstallers, and a host interface function library (host
API) provided in the form of a Windows dynamic link library (DLL). The USBXpress driver set is recommended for
new products that also include new PC software. The USBXpress interface is described in application note
“AN169: USBXpress Programmer's Guide.”
10.3. Driver Customization
In addition to customizing the device as described in "6. Asynchronous Serial Data Bus (UART) Interface" on page
12, the drivers and the drivers installation package can be also be customized. See application note “AN220: USB
Driver Customization” for more information on generating customized VCP and USBXpress drivers.
Important Note: The VID/PID in the drivers must match the VID/PID in the device for the drivers to load properly
then the device is connected to the PC.
10.4. Driver Certification
The default drivers that are shipped with the CP2104 are Microsoft Windows Hardware Quality Labs (WHQL)
certified. The certification means that the drivers have been tested by Microsoft and their latest operating systems
will allow the drivers to be installed without any warnings or errors.
The customized drivers that are generated using the “AN220: USB Driver Customization” software are not
automatically certified. To become certified, they must go first through the Microsoft Driver Reseller Submission
process. Contact Silicon Labs support for assistance with this process.
                                                        Rev. 1.2                                                   19


CP2104
11. Relevant Application Notes
The following Application Notes are applicable to the CP2104. The latest versions of these application notes and
their accompanying software are available at
http://www.siliconlabs.com/products/mcu/Pages/ApplicationNotes.aspx.
   AN721: CP21xx Device Customization Guide—This application note describes how to use the AN721 software
    CP21xxCustomizationUtility to configure the USB parameters on the CP21xx devices.
   AN169: USBXpress Programmer's Guide—This application note describes the USBXpress API interface and
    includes example code.
   AN197: Serial Communications Guide for the CP210x—This application note describes how to use the
    standard Windows COM port function to communicate with the CP210x and includes example code.
   AN220: USB Driver Customization—This application note describes how to use the AN220 software to
    customize the VCP or USBXpress drivers with OEM information.
   AN223: Runtime GPIO Control for CP210x—This application note describes how to use the CP210xRuntime
    DLL to control the CP210x GPIO.
20                                                   Rev. 1.2


CP2104
DOCUMENT CHANGE LIST                                        Revision 1.1 to Revision 1.2
                                                            January 20, 2017
Revision 0.2 to Revision 0.3
                                                               Added note on front page.
  Updated Figure 1, “Example System Diagram,” on
   page 1.
  Added Figure , “,” on page 11.
  Added Figure 8, “Typical Bus-Powered Connection
   Diagram,” on page 17.
  Added Figure 9, “Typical Self-Powered Connection
   Diagram (Regulator Bypass),” on page 18.
  Added "6.1. Baud Rate Generation" on page 13.
  Moved Table 5 to "2. Electrical Characteristics" on
   page 5.
Revision 0.3 to Revision 0.4
  Updated ordering part number on page 1.
  Updated self-powered supply voltage on page 1.
  Updated USB pull-up supply current in table 2.
  Updated output voltage in Table 5.
  Updated Table 7 pin descriptions.
  Updated Table 10 baud rates.
  Updated Figure 9.
Revision 0.4 to Revision 1.0
  Updated ordering part number on page 1.
  Updated electrical specifications throughout Section
   2.
  Added Table 6
  Updated Section 7.
  Updated Section 8.
  Added Table 11 and Table 13
  Updated descriptions of figures in Section 9.
Revision 1.0 to Revision 1.1
  Added a row for VBUS in Table 1, “Absolute
   Maximum Ratings,” on page 5.
  Added VDD Ramp Time for Power On specification
   to Table 4, “Reset Electrical Characteristics,” on
   page 6.
  Added VPP Voltage and Capacitor specifications to
   Table 2, “Global DC Electrical Characteristics,” on
   page 5.
  Updated AN144 references to AN721.
  Updated "9. Voltage Regulator" on page 17 to add
   absolute maximum voltage on VBUS requirements
   in self-powered systems.
21                                                     Rev. 1.2


      Simplicity Studio
      One-click access to MCU and
      wireless tools, documentation,
      software, source code libraries &
      more. Available for Windows,
      Mac and Linux!
                 IoT Portfolio                                       SW/HW                                          Quality                               Support and Community
             www.silabs.com/IoT                              www.silabs.com/simplicity                      www.silabs.com/quality                           community.silabs.com
Disclaimer
Silicon Labs intends to provide customers with the latest, accurate, and in-depth documentation of all peripherals and modules available for system and software implementers using or
intending to use the Silicon Labs products. Characterization data, available modules and peripherals, memory sizes and memory addresses refer to each specific device, and "Typical"
parameters provided can and do vary in different applications. Application examples described herein are for illustrative purposes only. Silicon Labs reserves the right to make changes
without further notice and limitation to product information, specifications, and descriptions herein, and does not give warranties as to the accuracy or completeness of the included
information. Silicon Labs shall have no liability for the consequences of use of the information supplied herein. This document does not imply or express copyright licenses granted
hereunder to design or fabricate any integrated circuits. The products are not designed or authorized to be used within any Life Support System without the specific written consent of
Silicon Labs. A "Life Support System" is any product or system intended to support or sustain life and/or health, which, if it fails, can be reasonably expected to result in significant personal
injury or death. Silicon Labs products are not designed or authorized for military applications. Silicon Labs products shall under no circumstances be used in weapons of mass
destruction including (but not limited to) nuclear, biological or chemical weapons, or missiles capable of delivering such weapons.
Trademark Information
Silicon Laboratories Inc.® , Silicon Laboratories®, Silicon Labs®, SiLabs® and the Silicon Labs logo®, Bluegiga®, Bluegiga Logo®, Clockbuilder®, CMEMS®, DSPLL®, EFM®, EFM32®,
EFR, Ember®, Energy Micro, Energy Micro logo and combinations thereof, "the world’s most energy friendly microcontrollers", Ember®, EZLink®, EZRadio®, EZRadioPRO®,
Gecko®, ISOmodem®, Precision32®, ProSLIC®, Simplicity Studio®, SiPHY®, Telegesis, the Telegesis Logo®, USBXpress® and others are trademarks or registered trademarks of Silicon
Labs. ARM, CORTEX, Cortex-M3 and THUMB are trademarks or registered trademarks of ARM Holdings. Keil is a registered trademark of ARM Limited. All other products or brand
names mentioned herein are trademarks of their respective holders.
                                                        Silicon Laboratories Inc.
                                                        400 West Cesar Chavez
                                                        Austin, TX 78701
                                                        USA
                                                        http://www.silabs.com


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Silicon Laboratories:
 CP2104-F03-GM CP2104-F03-GMR CP2104-MINIEK
