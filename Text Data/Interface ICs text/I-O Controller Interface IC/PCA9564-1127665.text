                          INTEGRATED CIRCUITS
     PCA9564
     Parallel bus to I2C-bus controller
 Product data sheet                           2006 Sep 01
 Supersedes data of 2004 Jun 25
Philips
Semiconductors


Philips Semiconductors                                                                                                         Product data sheet
Parallel bus to I2C-bus controller                                                                                                PCA9564
                                                                            DESCRIPTION
                                                                            The PCA9564 is an integrated circuit designed in CMOS technology
                                                                            that serves as an interface between most standard parallel-bus
                                                                            microcontrollers/microprocessors and the serial I2C-bus and allows
                                                                            the parallel bus system to communicate bi-directionally with the
                                                                            I2C-bus. The PCA9564 can operate as a master or a slave and can
                                                                            be a transmitter or receiver. Communication with the I2C-bus is
                                                                            carried out on a byte-wise basis using interrupt or polled handshake.
                                                                            The PCA9564 controls all the I2C-bus specific sequences, protocol,
                                                                            arbitration and timing with no external timing element required.
FEATURES                                                                    The PCA9564 is similar to the PCF8584 but operates at lower
• Parallel-bus to I2C-bus protocol converter and interface                  voltages and higher I@C frequencies. Other enhancements
• Both master and slave functions                                           requested by design engineers have also been incorporated.
• Multi-master capability                                                     Characteristic      PCA9564      PCF8584           Comments
• Internal oscillator reduces external components                            Voltage range        2.3–3.6 V    4.5–5.5 V   PCA9564 is 5 V
                                                                                                                           tolerant
• Operating supply voltage 2.3 V to 3.6 V                                    Maximum               360 kHz      90 kHz     Faster I2C interface
• 5 V tolerant I/Os                                                          master mode
                                                                             I2C frequency
• Standard and fast mode I2C capable and compatible with SMBus               Maximum slave         400 kHz      100 kHz    Faster I2C interface
• ESD protection exceeds 2000 V HEM per JESD22-A114,                         mode I2C
  200 V MM per JESD22-A115, and 1000 V CDM per                               frequency
  JESD22-C101                                                                Clock source          Internal     External   Less expensive and
• Latch-up testing is done to JEDEC Standard JESD78 which                                                                  more flexible with
                                                                                                                           internal oscillator
  exceed 100 mA.
                                                                             Parallel                Fast        Slow      Compatible with
• Packages offered: DIP20, SO20, TSSOP20, HVQFN20                            interface             50 MHz                  faster processors
APPLICATIONS                                                                While the PCF8584 supported most parallel-bus microcontrollers/
• Add I2C-bus port to controllers/processors that do not have one           microprocessors including the Intel 8049/8051, Motorola
• Add additional I2C-bus ports to controllers/processors that need          6800/68000 and the Zilog Z80, the PCA9564 has been designed to
                                                                            be very similar to the Philips standard 80C51 microcontroller I2C
  multiple I2C-bus ports                                                    hardware so the devices are not code compatible. Additionally, the
• Higher frequency, lower voltage migration path for the PCF8584            PCA9564 does not support the bus monitor “Snoop” mode nor the
                                                                            long distance mode and is not footprint compatible with the
• Converts 8 bits of parallel data to serial data stream to prevent         PCF8584.
  having to run a large number of traces across the entire PC board
ORDERING INFORMATION
        PACKAGES               TEMPERATURE RANGE                  ORDER CODE                  TOPSIDE MARK               DRAWING NUMBER
     20-Pin Plastic DIP             –40 °C to +85 °C                 PCA9564N                    PCA9564N                     SOT146-1
      20-Pin Plastic SO             –40 °C to +85 °C                 PCA9564D                    PCA9564D                     SOT163-1
   20-Pin Plastic TSSOP             –40 °C to +85 °C                PCA9564PW                     PCA9564                     SOT360-1
   20-Pin Plastic HVQFN             –40 °C to +85 °C                PCA9564BS                       9564                      SOT662-1
        whole wafer                 –40 °C to +85 °C                 PCA9564U                        n/a                          n/a
Standard packing quantities and other packaging data are available at www.standardics.philips.com/packaging.
2006 Sep 01                                                              2


Philips Semiconductors                                                                                                                                   Product data sheet
  Parallel bus to I2C-bus controller                                                                                                                    PCA9564
PIN CONFIGURATION — DIP, SO, TSSOP                                              PIN CONFIGURATION — HVQFN
                                                                                                                                           16 SDA
                                                                                                                                  17 VDD
                                                                                                          20 D2   19 D1   18 D0
                    D0   1                   20 VDD
                    D1   2                   19 SDA
                    D2   3                   18 SCL                                              D3   1                                             15 SCL
                    D3   4                   17 RESET                                            D4   2                                             14 RESET
                    D4   5                   16 INT
                                                                                                 D5   3           TOP VIEW                          13 INT
                    D5   6                   15 A1
                                                                                                 D6   4                                             12 A1
                    D6   7                   14 A0
                                                                                                 D7   5                                             11 A0
                    D7   8                   13 CE
                                                                                                                                           CE 10
                                                                                                          6       7       8       9
                  DNU    9                   12 RD
                                                                                                          DNU     VSS     WR       RD
                   VSS 10                    11 WR
                                     SW02260                                                                                                        SW02261
PIN DESCRIPTION
          PIN NUMBER
                                                       PIN
 DIP, SO, TSSOP          HVQFN         SYMBOL         TYPE                                  NAME AND FUNCTION
    1, 2, 3, 4,     1, 2, 3, 4, 5,     D0–D7          I/O    Data Bus: Bi-directional 3-State data bus used to transfer commands, data and
    5, 6, 7, 8       18, 19, 20                              status between the controller and the CPU. D0 is the least significant bit.
         9                   6         DNU                   Do not use: must be left floating (pulled LOW internally)
        10                   71        VSS            Pwr    Ground
        11                   8         WR             I      Write Strobe: When LOW and CE is also LOW, the contents of the data bus is
                                                             loaded into the addressed register. The transfer occurs on the rising edge of the
                                                             signal.
        12                   9         RD             I      Read Strobe: When LOW and CE is also LOW, causes the contents of the
                                                             addressed register to be presented on the data bus. The read cycle begins on the
                                                             falling edge of RD.
        13                   10        CE             I      Chip Enable: Active-LOW input signal. When LOW, data transfers between the CPU
                                                             and the controller are enabled on D0–D7 as controlled by the WR, RD and A0–A1
                                                             inputs. When HIGH, places the D0–D7 lines in the 3-State condition.
      14, 15             11, 12        A0, A1         I      Address Inputs: Selects the controller internal registers and ports for read/write
                                                             operations.
        16                   13        INT            O      Interrupt Request: Active-LOW, open-drain, output. This pin requires a pull-up
                                                             device.
        17                   14        RESET          I      Reset: A LOW level clears internal registers resets the I2C state machine.
        18                   15        SCL            I/O    I2C-bus serial clock input/output (open-drain).
        19                   16        SDA            I/O    I2C-bus serial data input/output (open-drain).
        20                   17        VDD            Pwr    Power Supply: 2.3 to 3.6 V
NOTES:
1. HVQFN package die supply ground is connected to both VSS pin and exposed center pad. VSS pin must be connected to supply ground for
   proper device operation. For enhanced thermal, electrical, and board level performance, the exposed pad needs to be soldered to the board
   using a corresponding thermal pad on the board and for proper heat conduction through the board, thermal vias need to be incorporated in
   the PCB in the thermal pad region.
2006 Sep 01                                                                 3


Philips Semiconductors                                                                                               Product data sheet
  Parallel bus to I2C-bus controller                                                                                PCA9564
                                                                               DATA
                                                  D7       D6      D5      D4       D3   D2     D1     D0
            PCA9564
                                                                          BUS BUFFER
  SDA                                 FILTER
                                                                                                                A1   A0
                          SDA CONTROL            SD7     SD6      SD5     SD4      SD3  SD2    SD1    SD0
                                                                                                                 0    1
                                                             I2CDAT – DATA REGISTER – READ/WRITE
                                                  TE      TO6     TO5     TO4      TO3  TO2    TO1    TO0
                                                                                                                 0    0
                    AA ENSIO STA STO SI
                                                           I2CTO – TIMEOUT REGISTER – WRITE ONLY
  SCL                            FILTER
                                                 BIT7    BIT6     BIT5    BIT4     BIT3 BIT2   BIT1  BIT0
                                                                                                                 1    0
                     SCL CONTROL                             I2CADR – OWN ADDRESS – READ/WRITE
                                                 ST7      ST6     ST5     ST4      ST3  ST2     ST1   ST0
                                                                                                                 0    0
                                                            I2CSTA – STATUS REGISTER – READ ONLY
                   ENSIO STA STO SI
                                                  AA    ENSIO     STA     STO       SI  CR2    CR1    CR0
                                                                                                                 1    1
                                                         I2CCON – CONTROL REGISTER – READ/WRITE
                                             CR0                                                  CONTROL BLOCK
                   CLOCK SELECTOR            CR1
                                                                      INTERRUPT CONTROL                            POWER–ON
                                             CR2                                                                     RESET
                      OSCILLATOR
                                             CE       WR          RD           INT          RESET    A1     A0          VDD
                                                                        CONTROL SIGNALS
                                                                                                                            SW02262
                                                       Figure 1. Block diagram
2006 Sep 01                                                            4


Philips Semiconductors                                                                                                            Product data sheet
    Parallel bus to I2C-bus controller                                                                                           PCA9564
FUNCTIONAL DESCRIPTION                                                    The Address Register, I2CADR: I2CADR is not affected by the
                                                                          SIO hardware. The contents of this register are irrelevant when SIO
General                                                                   is in a master mode. In the slave modes, the seven most significant
The PCA9564 acts as an interface device between standard                  bits must be loaded with the microcontroller’s own slave address.
high-speed parallel buses and the serial I2C-bus. On the I2C-bus, it                       7      6      5         4       3     2      1       0
can act either as master or slave. Bidirectional data transfer between
                                                                              I2CADR      BIT7  BIT6    BIT5     BIT4    BIT3   BIT2   BIT1  0
the I2C-bus and the parallel-bus microcontroller is carried out on a
byte-wise basis, using either an interrupt or polled handshake.                                             own slave address
Internal Oscillator                                                       The most significant bit corresponds to the first bit received from the
The PCA9564 contains an internal 9 MHz oscillator which is used           I2C-bus after a start condition. A logic 1 in I2CADR corresponds to a
for all I2C timing. The oscillator requires up to 500 µs to start-up      HIGH level on the I2C-bus, and a logic 0 corresponds to a LOW
after ENSIO bit is set to “1”.                                            level on the bus. The least significant bit is not used but should be
                                                                          programmed with a ‘0’.
Registers
                                                                          The Data Register, I2CDAT: I2CDAT contains a byte of serial data
The PCA9564 contains four registers which are used to configure
                                                                          to be transmitted or a byte which has just been received. In master
the operation of the device as well as to send and receive serial data.
                                                                          mode, this includes the slave address that the master wants to send
The registers are selected by setting pins A0 and A1 to the               out on the I2C-bus, with the most significant bit of the slave address
appropriate logic levels before a read or write operation is executed.    in the SD7 bit position and the Read/Write bit in the SD0 bit position.
                                                                          The CPU can read from and write to this 8-bit register while it is not
CAUTION: Do not write to I2C registers while the I2C-bus is busy
and the SIO is in master or addressed slave mode.                         in the process of shifting a byte. This occurs when SIO is in a
                                                                          defined state and the serial interrupt flag is set. Data in I2CDAT
 REGISTER          REGISTER                        READ/                  remains stable as long as SI is set. Whenever the SIO generates an
                                   A1     A0                DEFAULT       interrupt, the I2CDAT registers contain the data byte that was just
      NAME        FUNCTION                        WRITE
                                                                          transferred on the I2C-bus.
     I2CSTA          Status         0      0           R       F8h
      I2CTO         Time-out        0      0          W        FFh        NOTE: The I2CDAT register will capture the serial address as data
                                                                          when addressed via the serial bus. Also, the data register will
     I2CDAT           Data          0      1         R/W       00h
                                                                          continue to capture data from the serial bus during 38H so the
    I2CADR        Own address       1      0         R/W       00h        I2CDAT register will need to be reloaded when the bus becomes
    I2CCON           Control        1      1         R/W       00h        free.
                                                                                            7       6     5        4       3      2      1      0
The Time-out Register, I2CTO: The time-out register is used to                I2CDAT      SD7    SD6    SD5      SD4      SD3   SD2    SD1    SD0
determine the maximum time that SCL is allowed to be LOW before
the I2C state machine is reset.
                                                                          • SD7 - SD0:
When the I2C interface is operating, I2CTO is loaded in the time-out
                                                                          Eight bits to be transmitted or just received. A logic 1 in I2CDAT
counter at every SCL transition.
                                                                          corresponds to a HIGH level on the I2C-bus, and a logic 0
                7     6       5       4       3        2    1      0      corresponds to a LOW level on the bus.
   I2CTO       TE   TO6      TO5     TO4    TO3       TO2  TO1    TO0
                                                                          The Control Register, I2CCON: The microcontroller can read from
                                        Time-out value                    and write to this 8-bit register. Two bits are affected by the SIO
                                                                          hardware: the SI bit is set when a serial interrupt is requested, and
The most significant bit of I2CTO (TE) is used as a time-out              the STO bit is cleared when a STOP condition is present on the
enable/disable. A “1” will enable the time-out function. The time-out     I2C-bus. A write to the I2CCON register clears the SI bit and causes
period = (I2CTO[6:0] + 1) × 113.7 µs. The time-out value may vary         the Serial Interrupt line to be de–asserted and the next clock pulse
some and is an approximate value.                                         on the SCL line to be generated. Since none of the registers should
                                                                          be written to via the parallel interface once the Serial Interrupt line
The time-out register can be used in the following cases:
                                                                          has been de-asserted, all the other registers that need to be
1. When the SIO, in the master mode, wants to send a START                modified should be written to before the content of the I2CCON
   condition and the SCL line is held LOW by some other device.           register is modified.
   The SIO waits a time period equivalent to the time-out value for                        7         6       5        4       3   2     1       0
   the SCL to be released. In case it is not released, the SIO
                                                                              I2CCON       AA     ENSIO    STA       STO     SI  CR2   CR1     CR0
   concludes that there is a bus error, loads 90H in the I2CSTA
   register, generates an interrupt signal and releases the SCL and       • ENSIO, THE SIO ENABLE BIT
   SDA lines. After the microcontroller reads the status register, it
   needs to send an external reset in order to reset the SIO.             ENSIO = “0”: When ENSIO is “0”, the SDA and SCL outputs are in a
                                                                          high impedance state. SDA and SCL input signals are ignored, SIO
2. In the master mode, the time-out feature starts every time the SCL     is in the “not addressed” slave state.
   goes LOW. If SCL stays LOW for a time period equal to or greater
                                                                          ENSIO = “1”: When ENSIO is “1”, SIO is enabled.
   than the time-out value, the SIO concludes there is a bus error
   and behaves in the manner described above.                             After the ENSIO bit is set, it takes 500 µs for the internal oscillator to
                                                                          start up, therefore, the PCA9564 will enter either the master or the
3. In case of a forced access to the I2C-bus. (See more details on
                                                                          slave mode after this time. ENSIO should not be used to temporarily
   page 15.)
2006 Sep 01                                                             5


Philips Semiconductors                                                                                                              Product data sheet
    Parallel bus to I2C-bus controller                                                                                             PCA9564
release the PCA9564 from the I2C-bus since, when ENSIO is reset,             – A data byte has been received while SIO is in the addressed
the I2C-bus status is lost. The AA flag should be used instead (see             slave receiver mode
description of the AA flag in the following text).                           – “Own slave address” has been received
In the following text, it is assumed that ENSIO = “1”.                       When SIO is in the addressed slave transmitter mode, state C8H
• STA, THE START FLAG                                                        will be entered after the last serial is transmitted (see Figure 5).
STA = “1”: When the STA bit is set to enter a master mode, the SIO           When SI is cleared, enters the not addressed slave receiver mode,
hardware checks the status of the I2C-bus and generates a START              and the SDA line remains at a HIGH level. In state C8H, the AA flag
condition if the bus is free. If the bus is not free, then SIO waits for a   can be set again for future address recognition.
STOP condition (which will free the bus) and generates a START               When SIO is in the not addressed slave mode, its own slave
condition after the minimum buffer time (tBUF) has elapsed.                  address is ignored. Consequently, no acknowledge is returned, and
If STA is set while SIO is already in a master mode and one or more          a serial interrupt is not requested. Thus, SIO can be temporarily
bytes are transmitted or received, SIO transmits a repeated START            released from the I2C-bus while the bus status is monitored. While
condition. STA may be set at any time. STA may also be set when              SIO is released from the bus, START and STOP conditions are
SIO is an addressed slave.                                                   detected, and serial data is shifted in. Address recognition can be
                                                                             resumed at any time by setting the AA flag.
STA = “0”: When the STA bit is reset, no START condition or
repeated START condition will be generated.                                  • THE CLOCK RATE BITS, CR2, CR1, AND CR0
• STO, THE STOP FLAG                                                         Three bits determine the serial clock frequency when SIO is in
                                                                             master mode. The various serial rates are shown in Table 1.
STO = “1”: When the STO bit is set while SIO is in a master mode, a
STOP condition is transmitted to the I2C-bus. When the STOP                  The clock frequencies only take the HIGH and LOW times into
condition is detected on the bus, the SIO hardware clears the STO            consideration. The rise and fall time will cause the actual measured
flag.                                                                        frequency to be lower than expected.
If the STA and STO bits are both set, then a STOP condition is               The frequencies shown in Table 1 are unimportant when SIO is in a
transmitted to the I2C-bus if SIO is in a master mode. SIO then              slave mode. In the slave modes, SIO will automatically synchronize
transmits a START condition.                                                 with any clock frequency up to 400 kHz.
STO = “0”: When the STO bit is reset, no STOP condition will be              Table 1. Serial Clock Rates
generated.
• SI, THE SERIAL INTERRUPT FLAG                                                 CR2         CR1        CR0
                                                                                                                  SERIAL CLOCK FREQUENCY
                                                                                                                                (kHz)
SI = “1”: When the SI flag is set, then, if the ENSIO bit is also set, a
                                                                                   0          0          0                       330
serial interrupt is requested. SI is set by hardware when one of 24 of
the 25 possible SIO states is entered. The only state that does not                0          0          1                       288
cause SI to be set is state F8H, which indicates that no relevant                  0          1          0                       217
state information is available.                                                    0          1          1                       146
                                                                                   1          0          0                       881
While SI is set, the LOW period of the serial clock on the SCL line is             1          0          1                        59
stretched, and the serial transfer is suspended. A HIGH level on the               1          1          0                        44
SCL line is unaffected by the serial interrupt flag. SI must be reset
                                                                                   1          1          1                        36
by writing “0” to the SI bit. The SI bit cannot be set by the user.
                                                                             NOTE:
SI = “0”: When the SI flag is reset, no serial interrupt is requested,       1. The clock frequency values are approximate and may vary
and there is no stretching of the serial clock on the SCL line.                  with temperature, supply voltage, process, and SCL output
• AA, THE ASSERT ACKNOWLEDGE FLAG                                                loading. If normal mode I2C parameters must be strictly followed
                                                                                 (SCL < 100kHz), it is recommended not to use
AA = “1”: If the AA flag is set, an acknowledge (LOW level to SDA)               CR[2:0] = 100 (SCL = 88kHz) since the clock frequency might be
will be returned during the acknowledge clock pulse on the SCL line              slightly higher than 100 kHz under certain temperature, voltage,
when:                                                                            and process conditions and use CR[2:0] = 101 (SCL = 59 kHz)
– The “own slave address” has been received                                      instead.
– A data byte has been received while SIO is in the master receiver          The Status Register, I2CSTA: I2CSTA is an 8-bit read-only register.
    mode                                                                     The three least significant bits are always zero. The five most
– A data byte has been received while SIO is in the addressed                significant bits contain the status code. There are 25 possible status
    slave receiver mode                                                      codes. When I2CSTA contains F8H, no relevant state information is
                                                                             available and no serial interrupt is requested. All other I2CSTA
AA = “0”: if the AA flag is reset, a not acknowledge (HIGH level to          values correspond to defined SIO states. When each of these states
SDA) will be returned during the acknowledge clock pulse on SCL              is entered, a serial interrupt is requested (SI = “1”).
when:
– A data byte has been received while SIO is in the master receiver
    mode
2006 Sep 01                                                                6


Philips Semiconductors                                                                                                              Product data sheet
   Parallel bus to I2C-bus controller                                                                                              PCA9564
More Information on SIO Operating Modes                                     Master Receiver Mode: In the master receiver mode, a number of
The four operating modes are:                                               data bytes are received from a slave transmitter (see Figure 3). The
– Master Transmitter                                                        transfer is initialized as in the master transmitter mode. When the
– Master Receiver                                                           start condition has been transmitted, the interrupt service routine
– Slave Receiver                                                            must load I2CDAT with the 7-bit slave address and the data
– Slave Transmitter                                                         direction bit (SLA+R). The SI bit in I2CCON must then be cleared
                                                                            before the serial transfer can continue.
Data transfers in each mode of operation are shown in Figures 2–5.
These figures contain the following abbreviations:                          When the slave address and the data direction bit have been
                                                                            transmitted and an acknowledgment bit has been received, the
Abbreviation              Explanation                                       serial interrupt flag (SI) is set again, and a number of status codes in
S                         Start condition                                   I2CSTA are possible. These are 40H, 48H, or 38H for the master
SLA                       7-bit slave address
                                                                            mode and also 68H, or B0H if the slave mode was enabled (AA =
R                         Read bit (HIGH level at SDA)
W                         Write bit (LOW level at SDA)                      logic 1). The appropriate action to be taken for each of these status
A                         Acknowledge bit (LOW level at SDA)                codes is detailed in Table 3. ENSIO is not affected by the serial
A                         Not acknowledge bit (HIGH level at SDA)           transfer and are not referred to in Table 3. After a repeated start
Data                      8-bit data byte                                   condition (state 10H), SIO may switch to the master transmitter
P                         Stop condition                                    mode by loading I2CDAT with SLA+W.
In Figures 2-5, circles are used to indicate when the serial interrupt      Note that a master should not transmit its own slave address.
flag is set. A serial interrupt is not generated when I2CSTA = F8H.
                                                                            Slave Receiver Mode: In the slave receiver mode, a number of
This happens on a stop condition. The numbers in the circles show
                                                                            data bytes are received from a master transmitter (see Figure 4). To
the status code held in the I2CSTA register. At these points, a service
routine must be executed to continue or complete the serial transfer.       initiate the slave receiver mode, I2CADR and I2CCON must be
These service routines are not critical since the serial transfer is        loaded as follows:
suspended until the serial interrupt flag is cleared by software.                             7      6      5        4        3      2      1      0
When a serial interrupt routine is entered, the status code in I2CSTA            I2CADR     BIT7   BIT6    BIT5     BIT4    BIT3   BIT2   BIT1  0
is used to branch to the appropriate service routine. For each status
                                                                                                              own slave address
code, the required software action and details of the following serial
transfer are given in Tables 2-6.
                                                                            The upper 7 bits are the address to which SIO will respond when
Master Transmitter Mode: In the master transmitter mode, a                  addressed by a master.
number of data bytes are transmitted to a slave receiver (see
Figure 2). Before the master transmitter mode can be entered,                                 7        6        5       4        3   2     1      0
I2CCON must be initialized as follows:                                          I2CCON      AA      ENSIO     STA     STO       SI CR2   CR1     CR0
                 7        6         5      4     3     2        1      0
                                                                                              1        1        0       0       0    X     X      X
   I2CCON        AA      ENSIO     STA    STO    SI   CR2     CR1     CR0
                 X        1         0      0     0           bit rate       ENSIO must be set to logic 1 to enable SIO. The AA bit must be set
                                                                            to enable SIO to acknowledge its own slave address, STA, STO,
ENSIO must be set to logic 1 to enable SIO. If the AA bit is reset,
                                                                            and SI must be reset.
SIO will not acknowledge its own slave address in the event of
another device becoming master of the bus. In other words, if AA is         When I2CADR and I2CCON have been initialized, SIO waits until it
reset, SIO cannot enter a slave mode. STA, STO, and SI must be              is addressed by its own slave address followed by the data direction
reset.                                                                      bit which must be “0” (W) for SIO to operate in the slave receiver
                                                                            mode. After its own slave address and the W bit have been
The master transmitter mode may now be entered by setting the
                                                                            received, the serial interrupt flag (I) is set and a valid status code
STA bit. The SIO logic will now test the I2C-bus and generate a start
                                                                            can be read from I2CSTA. This status code is used to vector to an
condition as soon as the bus becomes free. When a START
                                                                            interrupt service routine, and the appropriate action to be taken for
condition is transmitted, the serial interrupt flag (SI) is set, and the
                                                                            each of these status codes is detailed in Table 4. The slave receiver
status code in the status register (I2CSTA) will be 08H. This status
                                                                            mode may also be entered if arbitration is lost while SIO is in the
code must be used to vector to an interrupt service routine that
                                                                            master mode (see status 68H).
loads I2CDAT with the slave address and the data direction bit
(SLA+W). The SI bit in I2CCON must then be reset before the serial          If the AA bit is reset during a transfer, SIO will return a not
transfer can continue.                                                      acknowledge (logic 1) to SDA after the next received data byte.
When the slave address and the direction bit have been transmitted          While AA is reset, SIO does not respond to its own slave address.
and an acknowledgment bit has been received, the serial interrupt           However, the I2C-bus is still monitored and address recognition may
flag (SI) is set again, and a number of status codes in I2CSTA are          be resumed at any time by setting AA. This means that the AA bit
possible. There are 18H, 20H, or 38H for the master mode and also           may be used to temporarily isolate SIO from the I2C-bus.
68H, or B0H if the slave mode was enabled (AA = logic 1). The
appropriate action to be taken for each of these status codes is
detailed in Table 2. After a repeated start condition (state 10H). SIO
may switch to the master receiver mode by loading I2CDAT with
SLA+R).
Note that a master should never transmit its own slave
address.
2006 Sep 01                                                               7


Philips Semiconductors                                                                                                        Product data sheet
  Parallel bus to I2C-bus controller                                                                                         PCA9564
                                                                        MT
                                          ÇÇÇÇÇÇÇÇ ÇÇÇ                                   ÇÇÇ ÇÇÇ
                                          ÇÇÇÇÇÇÇÇ ÇÇÇ                                   ÇÇÇ ÇÇÇ
              SUCCESSFUL TRANSMISSION            S         SLA      W        A         DATA              A        P
              TO A SLAVE RECEIVER
                                                08H                         18H                         28H        F8
                                                                                                              ÇÇÇÇÇÇÇ
                                                                                                              ÇÇÇÇÇÇÇ
                                                                                                              ÇÇÇÇÇÇÇ
              NEXT TRANSFER STARTED WITH A REPEATED START CONDITION
                                                                                                                S        SLA        W
                                                                                  ÇÇÇ                           10H
                                                                                                                              ÇÇÇ
                                                                                  ÇÇÇ                                         ÇÇÇ
              NOT ACKNOWLEDGE RECEIVED AFTER THE SLAVE ADDRESS
                                                                             A       P                                               R
                                                                            20H     F8H
                                                                                                              ÇÇÇ
                                                                                                              ÇÇÇ            TO MST/REC MODE
                                                                                                              ÇÇÇ
              NOT ACKNOWLEDGE RECEIVED AFTER A DATA BYTE                                                                     ENTRY = MR
                                                                                                         A       P
                                                                                                        30H       F8H
              ARBITRATION LOST IN SLAVE ADDRESS OR DATA BYTE                        OTHER MST                    OTHER MST
                                                                           A or A   CONTINUES          A or A    CONTINUES
                                                                            38H                         38H
              ARBITRATION LOST AND ADDRESSED AS SLAVE                        A      OTHER MST
                                                                                    CONTINUES
           ÇÇÇÇ
                                                                                            TO CORRESPONDING STATES IN
                                                                            68H             SLAVE RECEIVER MODE
           ÇÇÇÇ
           ÇÇÇÇ
                               FROM MASTER TO SLAVE                         B0H
                                                                                            TO CORRESPONDING STATES IN
                                                                                            SLAVE TRANSMITTER MODE
           ÇÇÇ
           ÇÇÇÇ     ÇÇ
                               FROM SLAVE TO MASTER
           ÇÇÇ      ÇÇ
           ÇÇÇ      ÇÇ
                  Data      A       ANY NUMBER OF DATA BYTES AND THEIR ASSOCIATED ACKNOWLEDGE BITS
                    n     THIS NUMBER (CONTAINED IN I2CSTA) CORRESPONDS TO A DEFINED STATE OF THE I2C BUS. SEE TABLE 2.
              NOTE: THE MASTER SHOULD NEVER TRANSMIT ITS OWN SLAVE ADDRESS                                                        SW00816
                                        Figure 2. Format and states in the master transmitter mode
2006 Sep 01                                                            8


Philips Semiconductors                                                                                                    Product data sheet
  Parallel bus to I2C-bus controller                                                                                     PCA9564
                                                       MR
                         ÇÇÇÇÇÇÇÇ                                                 ÇÇÇ      ÇÇÇÇ           ÇÇÇ   ÇÇÇ
                         ÇÇÇÇÇÇÇÇ                                                 ÇÇÇ      ÇÇÇÇ           ÇÇÇ   ÇÇÇ
  SUCCESSFUL RECEPTION          S         SLA       R       A          DATA            A         DATA       A     P
  FROM A SLAVE TRANSMITTER
                               08H                         40H                        50H                   58H   F8H
                                                                                                                ÇÇÇÇÇÇÇ
                                                                                                                ÇÇÇÇÇÇÇ
                                                                                                                ÇÇÇÇÇÇÇ
  NEXT TRANSFER STARTED WITH A
  REPEATED START CONDITION                                                                                       S       SLA         R
                                                             ÇÇÇ                                                 10H
                                                                                                                               ÇÇÇ
                                                             ÇÇÇ                                                               ÇÇÇ
  NOT ACKNOWLEDGE RECEIVED
  AFTER THE SLAVE ADDRESS                                   A      P                                                                  W
                                                           48H     F8H
                                                                                                                           TO MST/TRX MODE
                                                                                                          ÇÇÇ
                                                                                                                           ENTRY = MT
  ARBITRATION LOST IN SLAVE ADDRESS
  OR ACKNOWLEDGE BIT                                      A or A
                                                                   OTHER MST
                                                                   CONTINUES
                                                                                                          ÇÇÇ
                                                                                                          ÇÇÇA   OTHER MST
                                                                                                                 CONTINUES
                                                           38H                                              38H
  ARBITRATION LOST AND ADDRESSED AS SLAVE                    A     OTHER MST
                                                                   CONTINUES
                                                                          TO CORRESPONDING STATES IN
                                                            68H           SLAVE RECEIVER MODE
                                                                          TO CORRESPONDING STATES IN
                                                           B0H
ÇÇÇÇ
                                                                          SLAVE TRANSMITTER MODE
ÇÇÇÇ
                   FROM MASTER TO SLAVE
ÇÇÇÇ       ÇÇ
                   FROM SLAVE TO MASTER
ÇÇÇÇ  DATA
           ÇÇ   A       ANY NUMBER OF DATA BYTES AND THEIR ASSOCIATED ACKNOWLEDGE BITS
         n    THIS NUMBER (CONTAINED IN I2CSTA) CORRESPONDS TO A DEFINED STATE OF THE I2C BUS. SEE TABLE 3.
                                                                                                                                SW00817
                                           Figure 3. Format and states in the master receiver mode
2006 Sep 01                                                             9


Philips Semiconductors                                                                                                                   Product data sheet
  Parallel bus to I2C-bus controller                                                                                                   PCA9564
    RECEPTION OF THE OWN SLAVE ADDRESS
    AND ONE OR MORE DATA BYTES
    ALL ARE ACKNOWLEDGED.
                                             ÇÇÇÇÇÇÇ
                                             ÇÇÇÇÇÇÇ ÇÇÇ
                                                   S        SLA       W        A
                                                                                ÇÇÇ       ÇÇÇÇ
                                                                                          ÇÇÇÇ ÇÇÇ ÇÇÇ
                                                                                            DATA            A
                                                                                                                 ÇÇÇ  DATA
                                                                                                                      SLA             A
                                                                                                                                        ÇÇÇ   P or S
                                                                                                                                        ÇÇÇ
                                                                              60H                          80H                       80H        A0H
                                                                                                                                        ÇÇÇ
                                                                                                                                        ÇÇÇ
    LAST DATA BYTE RECEIVED IS                                                                                                                P or S
    NOT ACKNOWLEDGED                                                                                                                  A
                                                                                                                                     88H       F8H
    ARBITRATION LOST AS MST AND                                                                                                             ON STOP
    ADDRESSED AS SLAVE                                                         A
ÇÇÇÇ                                                                            ÇÇÇ
                                                                                ÇÇÇ
                                                                             68H
ÇÇÇÇ                                                                            ÇÇÇ
                                                                                      P or S
                     FROM MASTER TO SLAVE
ÇÇÇÇ
ÇÇÇ
ÇÇÇÇ     ÇÇ
                     FROM SLAVE TO MASTER
                                                                                         F8    ON STOP
ÇÇÇ      ÇÇ
       Data       A        ANY NUMBER OF DATA BYTES AND THEIR ASSOCIATED ACKNOWLEDGE BITS
       n      THIS NUMBER (CONTAINED IN I2CSTA) CORRESPONDS TO A DEFINED STATE OF THE I2C BUS. SEE TABLE 4.
                                                                                                                                           SW00814
                                             Figure 4. Format and states in the slave receiver mode
                          ÇÇÇÇÇÇÇÇ                                                  ÇÇÇ        ÇÇÇÇ         ÇÇÇ       ÇÇÇ
                          ÇÇÇÇÇÇÇÇ                                                  ÇÇÇ        ÇÇÇÇ         ÇÇÇ       ÇÇÇ
      RECEPTION OF THE
                          ÇÇÇÇÇÇÇÇ                                                  ÇÇÇ        ÇÇÇÇ         ÇÇÇ       ÇÇÇ
      OWN SLAVE ADDRESS
      AND TRANSMISSION            S        SLA         R      A          DATA             A          DATA        A       P or S
      OF ONE OR MORE
      DATA BYTES
                                                             A8H                          B8H                    C0H       F8H
                                                                                                                        ON STOP
       ARBITRATION LOST AS MST
  ÇÇÇÇ
       AND ADDRESSED AS SLAVE                                 A
  ÇÇÇÇ                                                                                                      ÇÇÇ                             ÇÇÇ
  ÇÇÇÇ                                                                                                      ÇÇÇ                             ÇÇÇ
                       FROM MASTER TO SLAVE                  B0H          LAST DATA BYTE TRANSMITTED.
  ÇÇÇÇ                                                                                                      ÇÇÇ                             ÇÇÇ
                                                                          SWITCHED TO NOT ADDRESSED               A             All “1”s         P or S
                                                                          SLAVE (AA BIT IN I2CCON = “0”)
  ÇÇÇÇ            ÇÇ
                       FROM SLAVE TO MASTER
                  ÇÇ
                                                                                                                  C8H                              F8H
                  ÇÇ
          DATA       A      ANY NUMBER OF DATA BYTES AND THEIR ASSOCIATED ACKNOWLEDGE BITS                                                      ON STOP
            n      THIS NUMBER (CONTAINED IN I2CSTA) CORRESPONDS TO A DEFINED STATE OF THE I2C BUS. SEE TABLE 5.
                                                                                                                                             SW00815
                                           Figure 5. Format and states of the slave transmitter mode
2006 Sep 01                                                              10


Philips Semiconductors                                                                                      Product data sheet
   Parallel bus to I2C-bus controller                                                                      PCA9564
Table 2.       Master Transmitter Mode
                                          APPLICATION SOFTWARE RESPONSE
 STATUS         STATUS OF THE
   CODE           I2C BUS AND                                 TO I2CCON      NEXT ACTION TAKEN BY SIO HARDWARE
 (I2CSTA)       SIO HARDWARE           TO/FROM I2CDAT
                                                          STA  STO   SI AA
    08H     A START condition has     Load SLA+W           X    X    0   X SLA+W will be transmitted;
            been transmitted                                               ACK bit will be received
    10H     A repeated START          Load SLA+W or        X    X    0   X As above
            condition
                diti has
                       h been
                           b          Load SLA+R           X    X    0   X SLA+R will be transmitted;
            transmitted                                                    SIO will be switched to MST/REC mode
    18H     SLA+W has been            Load data byte or    0    0    0   X Data byte will be transmitted;
            transmitted; ACK has                                           ACK bit will be received
            b
            been   received
                       i d            no I2CDAT action or  1    0    0   X Repeated START will be transmitted;
                                      no I2CDAT action or  0    1    0   X STOP condition will be transmitted;
                                                                           STO flag will be reset
                                      no I2CDAT action     1    1    0   X STOP condition followed by a
                                                                           START condition will be transmitted;
                                                                           STO flag will be reset
    20H     SLA+W has been            Load data byte or    0    0    0   X Data byte will be transmitted;
            transmitted; NOT ACK                                           ACK bit will be received
            h been
            has  b          i d
                       received       no I2CDAT action or  1    0    0   X Repeated START will be transmitted;
                                      no I2CDAT action or  0    1    0   X STOP condition will be transmitted;
                                                                           STO flag will be reset
                                      no I2CDAT action     1    1    0   X STOP condition followed by a
                                                                           START condition will be transmitted;
                                                                           STO flag will be reset
    28H     Data byte in I2CDAT       Load data byte or    0    0    0   X Data byte will be transmitted;
            has been transmitted;                                          ACK bit will be received
                  h been
            ACK has    b         i d
                             received no I2CDAT action or  1    0    0   X Repeated START will be transmitted;
                                      no I2CDAT action or  0    1    0   X STOP condition will be transmitted;
                                                                           STO flag will be reset
                                      no I2CDAT action     1    1    0   X STOP condition followed by a
                                                                           START condition will be transmitted;
                                                                           STO flag will be reset
    30H     Data byte in I2CDAT       Load data byte or    0    0    0   X Data byte will be transmitted;
            has been transmitted;                                          ACK bit will be received
            NOT ACK has h been
                             b        no I2CDAT action or  1    0    0   X Repeated START will be transmitted;
            received                  no I2CDAT action or  0    1    0   X STOP condition will be transmitted;
                                                                           STO flag will be reset
                                      no I2CDAT action     1    1    0   X STOP condition followed by a
                                                                           START condition will be transmitted;
                                                                           STO flag will be reset
    38H     Arbitration lost in       No I2CDAT action or  0    0    0   X I2C-bus will be released;
            SLA+W or                                                       not addressed slave will be entered
            D
            Data  b
                  bytes               No I2CDAT action     1    0    0   X A START condition will be transmitted when the
                                                                           bus becomes free (STOP or SCL and SDA high)
2006 Sep 01                                                   11


Philips Semiconductors                                                                                    Product data sheet
   Parallel bus to I2C-bus controller                                                                    PCA9564
Table 3.       Master Receiver Mode
                                           APPLICATION SOFTWARE RESPONSE
 STATUS          STATUS OF THE
   CODE            I2C BUS AND                                 TO I2CCON     NEXT ACTION TAKEN BY SIO HARDWARE
 (I2CSTA)        SIO HARDWARE          TO/FROM I2CDAT
                                                          STA  STO    SI AA
     08H     A START condition has    Load SLA+R           X     X    0   X SLA+R will be transmitted;
             been transmitted                                               ACK bit will be received
     10H     A repeated START         Load SLA+R or        X     X    0   X As above
             condition
                 diti h  has b
                             been     Load SLA+W           X     X    0   X SLA+W will be transmitted;
             transmitted                                                    SIO will be switched to MST/TRX mode
     38H     Arbitration lost in      No I2CDAT action or  0     0    0   X I2C-bus will be released;
             NOT ACK bit                                                    SIO will enter a slave mode
                                      No I2CDAT action     1     0    0   X A START condition will be transmitted when the
                                                                            bus becomes free
     40H     SLA+R has been           No I2CDAT action or  0     0    0   0 Data byte will be received;
             transmitted; ACK has                                           NOT ACK bit will be returned
             b           i d
             been received            no I2CDAT action     0     0    0   1 Data byte will be received;
                                                                            ACK bit will be returned
     48H     SLA+R has been           No I2CDAT action or  1     0    0   X Repeated START condition will be transmitted
             t
             transmitted;
                     itt d NOT ACK    no I2CDAT action or  0     1    0   X STOP condition will be transmitted;
             has been received                                              STO flag will be reset
                                      no I2CDAT action     1     1    0   X STOP condition followed by a
                                                                            START condition will be transmitted;
                                                                            STO flag will be reset
     50H     Data byte has been       Read data byte or    0     0    0   0 Data byte will be received;
             received; ACK has been                                         NOT ACK bit will be returned
             returned d               read data byte       0     0    0   1 Data byte will be received;
                                                                            ACK bit will be returned
     58H     Data byte has been       Read data byte or    1     0    0   X Repeated START condition will be transmitted
             received;
                  i d NOT ACK h   has read data byte or    0     1    0   X STOP condition will be transmitted;
             been returned                                                  STO flag will be reset
                                      read data byte       1     1    0   X STOP condition followed by a
                                                                            START condition will be transmitted;
                                                                            STO flag will be reset
     38H     Arbitration lost in      No I2CDAT action or  0     0    0   X I2C-bus will be released;
             SLA+R                                                          not addressed slave will be entered
                                      No I2CDAT action     1     0    0   X A START condition will be transmitted when the
                                                                            bus becomes free
2006 Sep 01                                                   12


Philips Semiconductors                                                                                   Product data sheet
   Parallel bus to I2C-bus controller                                                                   PCA9564
Table 4.       Slave Receiver Mode
                                      APPLICATION SOFTWARE RESPONSE
 STATUS       STATUS OF THE
   CODE         I2C BUS AND                             TO I2CCON         NEXT ACTION TAKEN BY SIO HARDWARE
 (I2CSTA)     SIO HARDWARE         TO/FROM I2CDAT
                                                    STA  STO   SI  AA
    60H     Own SLA+W has         No I2CDAT action   X    X    0    0 Data byte will be received and NOT ACK will be
            been received; ACK    or                                  returned
            h been
            has b      returned d
                                  no I2CDAT action   X    X    0    1 Data byte will be received and ACK will be returned
    68H     Arbitration lost in   No I2CDAT action   X    X    0    0 Data byte will be received and NOT ACK will be
            SLA+R/W as master;    or                                  returned
            Own SLA+W has
            been received, ACK    no I2CDAT action   X    X    0    1 Data byte will be received and ACK will be returned
            returned
    80H     Previously addressed  Read data byte or  X    X    0    0 Data byte will be received and NOT ACK will be
            with own SLV                                              returned
            address; DATA has
            been received; ACK    read data byte     X    X    0    1 Data byte will be received and ACK will be returned
            has been returned
    88H     Previously addressed  Read data byte or  0    X    0    0 Switched to not addressed SLV mode; no recognition
            with own SLA; DATA                                        of own SLA
            b
            byte h been
                 has  b
            received; NOT ACK     read data byte or  0    X    0    1 Switched to not addressed SLV mode; Own SLA will
            has been returned                                         be recognized
                                  read data byte or  1    X    0    0 Switched to not addressed SLV mode; no recognition
                                                                      of own SLA. A START condition will be transmitted
                                                                      when the bus becomes free
                                  read data byte     1    X    0    1 Switched to not addressed SLV mode; Own SLA will
                                                                      be recognized. A START condition will be transmitted
                                                                      when the bus becomes free.
    A0H     A STOP condition or   No I2CDAT action   0    X    0    0 Switched to not addressed SLV mode; no recognition
            repeated START        or                                  of own SLA
            condition
                di i has
                      h been
                           b
            received while still  No I2CDAT action   0    X    0    1 Switched to not addressed SLV mode; Own SLA will
            addressed as          or                                  be recognized
            SLV/REC               No I2CDAT action   1    X    0    0 Switched to not addressed SLV mode; no recognition
                                  or                                  of own SLA. A START condition will be transmitted
                                                                      when the bus becomes free
                                  No I2CDAT action   1    X    0    1 Switched to not addressed SLV mode; Own SLA will
                                                                      be recognized. A START condition will be transmitted
                                                                      when the bus becomes free.
2006 Sep 01                                                13


Philips Semiconductors                                                                                        Product data sheet
   Parallel bus to I2C-bus controller                                                                        PCA9564
Table 5.       Slave Transmitter Mode
                                        APPLICATION SOFTWARE RESPONSE
 STATUS        STATUS OF THE
   CODE         I2C BUS AND                                 TO I2CCON        NEXT ACTION TAKEN BY SIO HARDWARE
 (I2CSTA)      SIO HARDWARE          TO/FROM I2CDAT
                                                        STA  STO   SI AA
    A8H     Own SLA+R has           Load data byte or    X    X    0   0 Last data byte will be transmitted and ACK bit will be
            been received; ACK                                           received
            h been
            has  b     returned d   load data byte       X    X    0   1 Data byte will be transmitted; ACK will be received
    B0H     Arbitration lost in     Load data byte or    X    X    0   0 Last data byte will be transmitted and ACK bit will be
            SLA+R/W as master;                                           received
            Own SLA+R has
            been received, ACK      load data byte       X    X    0   1 Data byte will be transmitted; ACK bit will be
            has been returned                                            received
    B8H     Data byte in I2CDAT     Load data byte or    X    X    0   0 Last data byte will be transmitted and ACK bit will be
            has been transmitted;                                        received
                  h been
            ACK has   b             load data byte       X    X    0   1 Data byte will be transmitted; ACK bit will be
            received                                                     received
    C0H     Data byte in I2CDAT     No I2CDAT action     0    X    0   0 Switched to not addressed SLV mode; no recognition
            has been transmitted;   or                                   of own SLA
            NOT ACK has h been
                             b      no I2CDAT action or  0    X    0   1 Switched to not addressed SLV mode; Own SLA will
            received                                                     be recognized
                                    no I2CDAT action or  1    X    0   0 Switched to not addressed SLV mode; no recognition
                                                                         of own SLA. A START condition will be transmitted
                                                                         when the bus becomes free
                                    no I2CDAT action     1    X    0   1 Switched to not addressed SLV mode; Own SLA will
                                                                         be recognized. A START condition will be transmitted
                                                                         when the bus becomes free.
    C8H     Last data byte in       No I2CDAT action     0    X    0   0 Switched to not addressed SLV mode; no recognition
            I2CDAT has been         or                                   of own SLA
                   i d (AA = 0);
            transmitted          0) no I2CDAT action or  0    X    0   1 Switched to not addressed SLV mode; Own SLA will
            ACK has been                                                 be recognized
            received                no I2CDAT action or  1    X    0   0 Switched to not addressed SLV mode; no recognition
                                                                         of own SLA. A START condition will be transmitted
                                                                         when the bus becomes free
                                    no I2CDAT action     1    X    0   1 Switched to not addressed SLV mode; Own SLA will
                                                                         be recognized. A START condition will be transmitted
                                                                         when the bus becomes free.
Table 6.       Miscellaneous States
                                        APPLICATION SOFTWARE RESPONSE
 STATUS        STATUS OF THE
   CODE         I2C BUS AND                                 TO I2CCON        NEXT ACTION TAKEN BY SIO HARDWARE
 (I2CSTA)      SIO HARDWARE          TO/FROM I2CDAT
                                                        STA  STO   SI AA
    F8H     On reset or STOP        No I2CDAT action     1    X    0   X Go into master mode; send START
                                    No I2CDAT action     0    X    0   0 No recognition of own SLA
                                    No I2CDAT action     0    X    0   1 Will recognize own SLA
    70H     Bus error                                                    Reset SIO (Requires reset to return to state F8H)
            SDA stuck LOW
    90H     Bus error                                                    Reset SIO (Requires reset to return to state F8H)
            SCL stuck LOW
    00H     Bus error during                                             Reset SIO (Requires reset to return to state F8H)
            master or slave
            mode, due to illegal
            START or STOP
            condition
2006 Sep 01                                                    14


Philips Semiconductors                                                                                                                 Product data sheet
    Parallel bus to I2C-bus controller                                                                                               PCA9564
Slave Transmitter Mode: In the slave transmitter mode, a number                  I2CSTA = 90H:
of data bytes are transmitted to a master receiver (see Figure 5).               This status code indicates that the SCL line is stuck LOW.
Data transfer is initialized as in the slave receiver mode. When
                                                                                 Some Special Cases: The SIO hardware has facilities to handle the
I2CADR and I2CCON have been initialized, SIO waits until it is
                                                                                 following special cases that may occur during a serial transfer:
addressed by its own slave address followed by the data direction
bit which must be “1” (R) for SIO to operate in the slave transmitter            • SIMULTANEOUS REPEATED START CONDITIONS FROM TWO MASTERS
mode. After its own slave address and the R bit have been received,              A repeated START condition may be generated in the master
the serial interrupt flag (SI) is set and a valid status code can be             transmitter or master receiver modes. A special case occurs if
read from I2CSTA. This status code is used to vector to an interrupt             another master simultaneously generates a repeated START
service routine, and the appropriate action to be taken for each of              condition (see Figure 6). Until this occurs, arbitration is not lost by
these status codes is detailed in Table 5. The slave transmitter mode            either master since they were both transmitting the same data.
may also be entered if arbitration is lost while SIO is in the master
mode (see state B0H).                                                            If the SIO hardware detects a repeated START condition on the
                                                                                 I2C-bus before generating a repeated START condition itself, it will
If the AA bit is reset during a transfer, SIO will transmit the last byte        use the repeated START as its own and continue with the sending of
of the transfer and enter state C8H. SIO is switched to the not                  the slave address.
addressed slave mode and will ignore the master receiver if it
continues the transfer. Thus the master receiver receives all 1s as
                                                                                 • DATA TRANSFER AFTER LOSS OF ARBITRATION
serial data. While AA is reset, SIO does not respond to its own slave            Arbitration may be lost in the master transmitter and master receiver
address. However, the I2C-bus is still monitored, and address                    modes. Loss of arbitration is indicated by the following states in
recognition may be resumed at any time by setting AA. This means                 I2CSTA; 38H, 68H, and B0H (see Figures 2 and 3).
that the AA bit may be used to temporarily isolate SIO from the                  NOTE: In order to exit state 38H, a Timeout, Reset, or external
I2C-bus.                                                                         Stop are required.
Miscellaneous States: There are four I2CSTA codes that do not                    If the STA flag in I2CCON is set by the routines which service these
correspond to a defined SIO hardware state (see Table 6). These                  states, then, if the bus is free again, a START condition (state 08H)
are discussed below.                                                             is transmitted without intervention by the CPU, and a retry of the
I2CSTA = F8H:                                                                    total serial transfer can commence.
This status code indicates that no relevant information is available             • FORCED ACCESS TO THE I2C BUS
because the serial interrupt flag, SI, is not yet set. This occurs on a          In some applications, it may be possible for an uncontrolled source
STOP condition and when SIO is not involved in a serial transfer.                to cause a bus hang-up. In such situations, the problem may be
I2CSTA = 00H:                                                                    caused by interference, temporary interruption of the bus or a
This status code indicates that a bus error has occurred during an               temporary short-circuit between SDA and SCL.
SIO serial transfer. A bus error is caused when a START or STOP                  If an uncontrolled source generates a superfluous START or masks
condition occurs at an illegal position in the format frame. Examples            a STOP condition, then the I2C-bus stays busy indefinitely. If the
of such illegal positions are during the serial transfer of an address           STA flag is set and bus access is not obtained within a reasonable
byte, a data byte, or an acknowledge bit. A bus error may also be                amount of time, then a forced access to the I2C-bus is possible. If
caused when external interference disturbs the internal SIO signals.             the I2C-bus stays idle for a time period equal to the time out period,
When a bus error occurs, SI is set. To recover from a bus error, the             then the ’64 concludes that no other master is using the bus and
microcontroller must send an external reset signal to reset the SIO.             sends a START condition.
I2CSTA = 70H:
This status code indicates that the SDA line is stuck LOW when the
SIO, in master mode, is trying to send a START condition.
                                                                                        BOTH MASTERS CONTINUE
                S        SLA        W      A           DATA           A      S
                                                                                         WITH SLA TRANSMISSION
               08H                        18H                       28H
                                                             OTHER MASTER SENDS REPEATED
                                                                 START CONDITION EARLIER
                                                                                                                                   SU00975
                                        Figure 6. Simultaneous repeated START conditions from 2 masters
2006 Sep 01                                                                 15


Philips Semiconductors                                                                                                           Product data sheet
    Parallel bus to I2C-bus controller                                                                                          PCA9564
                                               TIME OUT
                   STA FLAG
                   SDA LINE
                   SCL LINE
                                                                                   START CONDITION
                                                                                                                                SU00976
                                                     Figure 7. Forced access to a busy I2C-bus
• I2C BUS OBSTRUCTED BY A LOW LEVEL ON SCL OR SDA                           microcontroller reads the status register, it needs to send an
                                                                            external reset signal in order to reset the SIO.
An   I2C-bus  hang-up occurs if SDA or SCL is pulled LOW by an
uncontrolled source. If the SCL line is obstructed (pulled LOW) by a        If a forced bus access occurs or a repeated START condition is
device on the bus, no further serial transfer is possible, and the SIO      transmitted while SDA is obstructed (pulled LOW), the SIO
hardware cannot resolve this type of problem. When this occurs, the         hardware performs the same action as described above. In each
problem must be resolved by the device that is pulling the SCL bus          case, state 08H is entered after a successful START condition is
line LOW.                                                                   transmitted and normal serial transfer continues. Note that the CPU
                                                                            is not involved in solving these bus hang-up problems.
When the SCL line stays LOW for a period equal to the time-out
value, the ’64 concludes that this is a bus error and behaves in a          • BUS ERROR
manner described on page 5 under “Time-out Register”.                       A bus error occurs when a START or STOP condition is present at
                                                                            an illegal position in the format frame. Examples of illegal positions
If the SDA line is obstructed by another device on the bus (e.g., a
                                                                            are during the serial transfer of an address byte, a data or an
slave device out of bit synchronization), the problem can be solved
                                                                            acknowledge bit.
by transmitting additional clock pulses on the SCL line (see
Figure 8). The SIO hardware sends out nine clock pulses followed            The SIO hardware only reacts to a bus error when it is involved in a
by the STOP condition. If the SDA line is released by the slave             serial transfer either as a master or an addressed slave. When a
pulling it LOW, a normal START condition is transmitted by the SIO,         bus error is detected, SIO releases the SDA and SCL lines, sets the
state 08H is entered and the serial transfer continues. If the SDA          interrupt flag, and loads the status register with 00H. This status
line is not released by the slave pulling it LOW, then the SIO              code may be used to vector to a service routine which either
concludes that there is a bus error, loads 70H in I2CSTA, generates         attempts the aborted serial transfer again or simply recovers from
an interrupt signal, and releases the SCL and SDA lines. After the          the error condition as shown in Table 6. The microcontroller must
                                                                            send an external reset signal to reset the SIO.
                STA FLAG
                SDA LINE
                                            1      2       3       4     5       6       7       8        9
                 SCL LINE
                                                                                                                 STOP             START
                                                                                                               CONDITION        CONDITION
                                                                                                                                        su01663
                                 Figure 8. Recovering from a bus obstruction caused by a LOW level on SDA
2006 Sep 01                                                             16


Philips Semiconductors                                                                                                                  Product data sheet
  Parallel bus to I2C-bus controller                                                                                                   PCA9564
I2C-BUS TIMING DIAGRAMS
The diagrams (Figures 9 to 12) illustrate typical timing diagrams for the PCA9564 in master/slave functions.
  SCL
  SDA
  INT
                        7-bit address                 interrupt     first-byte            interrupt           nbyte        interrupt
                                        R/W = 0
         START                                  ACK                                   ACK                            ACK              STOP
        condition                                                                                                                    condition
             from slave receiver
    Master PCA9564 writes data to slave transmitter.
                                                                                                                                                  su01490
                                                     Figure 9. Bus timing diagram; master transmitter mode
  SCL
  SDA
  INT
                          7-bit address               interrupt         first-byte        interrupt           nbyte
                                        R/W = 1
         START                                  ACK                                   ACK                           no ACK                   STOP
        condition                                                                                                                           condition
                                                                                                   from master
                     from slave
                                                                                                     receiver
     Master PCA9564 reads data from slave transmitter.                                                                                   su01491
                                                       Figure 10. Bus timing diagram; master receiver mode
2006 Sep 01                                                                        17


Philips Semiconductors                                                                                                                           Product data sheet
  Parallel bus to I2C-bus controller                                                                                                            PCA9564
  SCL
  SDA
  INT
                           7-bit address               interrupt        first-byte             interrupt           nbyte          interrupt
                                         R/W = 1
          START                                  ACK                                      ACK                              no ACK              STOP
         condition                                                                                                                            condition
                                                                                                         from master
             from slave PCA9564                                                                            receiver
    External master receiver reads data from PCA9564.                                                                                                     su01492
                                                       Figure 11. Bus timing diagram; slave transmitter mode
     SCL
     SDA
     INT
                                                                                                                                                           interrupt
                             7-bit address                interrupt         first-byte            interrupt          nbyte          interrupt
                                                                                                                                                        (after STOP)
                                           R/W = 0
            START                                  ACK                                      ACK                               ACK                STOP
           condition                                                                                                                            condition
                from slave PCA9564
      Slave PCA9564 is written to by external master transmitter.                                                                                          su01493
                                                         Figure 12. Bus timing diagram; slave receiver mode
2006 Sep 01                                                                            18


Philips Semiconductors                                                                       Product data sheet
  Parallel bus to I2C-bus controller                                                        PCA9564
               VDD
                         ADDRESS BUS
                                                                                                 VDD
                                                         VDD
                                                 A0
                                                 A1
                          DECODER                   PCA9564                 SLAVE
                                                                                INT       RESET
                     ALE                         CE
                                                             SCL
             80C51
                                        8
                                                 D[0:7]
                                                  RD
                                                  WR         SDA
                                       VDD
                                                  INT
                                                                       VDD
                                                  RESET
                                                         VSS
               VSS
                                                                                    SD00705
                             Figure 13. Application diagram using the 80C51
2006 Sep 01                                           19


Philips Semiconductors                                                                                                           Product data sheet
    Parallel bus to I2C-bus controller                                                                                          PCA9564
SPECIFIC APPLICATIONS                                                     PCA8584 MIGRATION PATH
The PCA9564 is a parallel bus to I2C bus controller that is designed      The PCA9564 does the same type of parallel to serial conversion as
to allow “smart” devices to interface with I2C or SMBus components,       the PCF8584. Although not footprint or code compatible, the
where the “smart” device does not have an integrated I2C port and         PCA9564 provides improvements such as:
the designer does not want to “bit-bang” the I2C port. The PCA9564        1. Operating at 3.3 V and 2.5 V voltage nodes with 5 V tolerant I/Os
can also be used to add more I2C ports to “smart” devices, provide a
higher frequency, lower voltage migration path for the PCF8584 and        2. Allows interface with I2C or SMBus components at speeds up to
convert 8 bits of parallel data to a serial bus to avoid running             400 kHz.
multiple traces across the PC board.
                                                                          3. Built-in oscillator provides a cost effective solution since the
                                                                             external clock input is no longer required.
ADD I2C-BUS PORT                                                          4. Parallel data can be exchanged at speeds up to 50 MHz allowing
As shown in Figure 14, the PCA9564 converts 8-bits of parallel data          the use of faster processors.
into a multiple master capable I2C port for microcontrollers,
microprocessors, custom ASICs, DSPs, etc., that need to interface
with I2C or SMBus components.
                                                                                                                                               SDA
                                                                               SUPPLY VOLTAGE        FREQUENCY             PCA9564
                                                                                                                                               SCL
                                                                                    2.3 – 3.6 V       < 400 kHz
                                                                                                                          OSCILLATOR
                         CONTROL SIGNALS
    MICROCONTROLLER,                                               SDA
     MICROPROCESSOR,                           PCA9564                              4.5 – 5.5 V       < 100 kHz
          OR ASIC                                                  SCL
                                                                                                                                               SDA
                               8-BITS                                                                                      PCF8584
                                                                                                                                               SCL
                                                               SW02108
             Figure 14. Adding     I2C-bus  Port Application                                                               CLOCK INPUT
                                                                                                                                          SW02110
                                                                                               Figure 16. PCF8584 Migration Path
ADD ADDITIONAL              I2C-BUS     PORTS
The PCA9564 can be used to convert 8-bit parallel data into
additional multiple master capable I2C port as shown in Figure 15. It
is used if the microcontroller, microprocessor, custom ASIC, DSP,         CONVERT 8 BITS OF PARALLEL DATA INTO
etc., already have an I2C port but need one or more additional I2C        I2C-BUS SERIAL DATA STREAM
ports to interface with more I2C or SMBus components or                   Functioning as a slave transmitter, the PCA9564 can convert 8-bit
components that cannot be located on the same bus (e.g., 100 kHz          parallel data into a two-wire I2C data stream as is shown in
and 400 kHz slaves on different buses so that each bus can operate        Figure 17. This would prevent having to run 8 traces across the
at its maximum potential).                                                entire width of the PC board.
                                   SDA
                                                                                                       CONTROL
                                   SCL                                                                 SIGNALS                 SDA
                                                                              MICROCONTROLLER,
                                                                              MICROPROCESSOR,                     PCA9564               MASTER
                                                                                     OR ASIC
    MICROCONTROLLER,                                                                                                            SCL
     MICROPROCESSOR,                                                                                     8-BITS
          OR ASIC        CONTROL SIGNALS
                                                                   SDA
                                                PCA9564
                                                                   SCL                                                                     SW02111
                               8-BITS
                                                                               Figure 17. Converting Parallel to Serial Data Application
                                                             SW02109
      Figure 15. Adding Additional      I2C-bus  Ports Application
2006 Sep 01                                                            20


Philips Semiconductors                                                                                                            Product data sheet
   Parallel bus to I2C-bus controller                                                                                            PCA9564
ABSOLUTE MAXIMUM RATINGS
In accordance with the Absolute Maximum Rating System (IEC 134)
   SYMBOL                          PARAMETER                                    CONDITIONS                   MIN             MAX          UNIT
       VDD       Supply voltage                                                                             –0.3              4.6            V
        VI       Voltage range (any input)                                                                  –0.8             6.01            V
         II      DC input current (any input)                                                                –10              10           mA
        IO       DC output current (any output)                                                              –10              10           mA
       Ptot      Total power dissipation                                                                      —              300           mW
       PO        Power dissipation per output                                                                 —               50           mW
      Tamb       Operating ambient temperature                                                               –40             +85            °C
       Tstg      Storage temperature                                                                         –65             +150           °C
NOTE:
1. 5.5 V steady state voltage tolerance on inputs and outputs is valid only when the supply voltage is present. 4.6 V steady state voltage
    tolerance on inputs and outputs when no supply voltage is present.
HANDLING
Inputs and outputs are protected against electrostatic discharge in normal handling. However, to be totally safe, it is desirable to take
precautions appropriate to handling MOS devices. Advice can be found in Data Handbook IC24 under ”Handling MOS devices”.
DC CHARACTERISTICS
VDD = 2.3 V to 3.6 V; Tamb = –40 to +85 °C; unless otherwise specified.
  SYMBOL                        PARAMETER                                   CONDITIONS                  MIN         TYP           MAX       UNIT
 Supplies
     VDD       Supply voltage                                                                           2.3           —            3.6         V
                                                                  standby                               —             0.1          3.0        µA
      IDD      Supply
               Su    ly current
                                                                  operating – no load                   —             —            6.0       mA
     VPOR      Power-on Reset voltage                                                                   —             1.8          2.2         V
 Inputs WR, RD, A0, A1, CE, RESET
      VIL      LOW-level input voltage                                                                   0            —            0.8         V
      VIH      HIGH-level input voltage                                                                 2.0           —           5.51         V
       IL      Leakage current                                    Input; VI = 0 V or 5.5 V              –1            —             1         µA
       CI      Input capacitance                                  VI = VSS or VDD                       —             1.7           3         pF
 Inputs/outputs D0 to D7
      VIL      LOW-level input voltage                                                                   0            —            0.8         V
      VIH      HIGH-level input voltage                                                                 2.0           —           5.51         V
      IOH      HIGH-level output current                          VOH = VDD – 0.4 V                    –4.0         –7.0           —         mA
      IOL      LOW-level output current                           VOL = 0.4 V                           4.0           8.0          —         mA
       IL      Leakage current                                    Input; VI = 0 V or 5.5 V              –1            —             1         µA
      CIO      Input/output capacitance                           VI = VSS or VDD                       —             2.4           4         pF
 SDA and SCL
      VIL      LOW-level input voltage                                                                   0            —         0.3 VDD        V
      VIH      HIGH-level input voltage                                                              0.7 VDD          —           5.51         V
                                                                  Input/output; VI = 0 V or 3.6 V       –1            —             1
       IL      Leakage current                                                                                                                µA
                                                                  Input/output; VI = 5.5 V              –1            —            10
      IOL      LOW-level output current                           VOL = 0.4 V                           5.0           8.5          —         mA
      CIO      Input/output capacitance                           VI = VSS or VDD                       —             2.5           4         pF
 Outputs INT
      IOL      LOW-level output current                           VOL = 0.4 V                           3.0           —            —         mA
       IL      Leakage current                                    VO = 0 or 3.6 V                       –1            —             1         µA
      CO       Output capacitance                                 VI = VSS or VDD                       —             2.1           4         pF
NOTE:
1. 5.5 V steady state voltage tolerance on inputs and outputs is valid only when the supply voltage is present. 4.6 V steady state voltage
    tolerance on inputs and outputs when no supply voltage is present.
2006 Sep 01                                                              21


Philips Semiconductors                                                                                                              Product data sheet
   Parallel bus to I2C-bus controller                                                                                               PCA9564
             SDA
                                     tLOW                     tF
                    tF                      tR       tSU;DAT                          tHD;STA                       tR       tBUF
                                                                                                         tSP
              SCL
                                   tHD;STA                          tSU;STA                                 tSU;STO
                        S                      tHD;DAT tHIGH                 SR                                        P          S
                                                                                                                                         SU01755
                                                             Figure 18. Definition of timing
I2C-BUS TIMING SPECIFICATIONS
All the timing limits are valid within the operating supply voltage and ambient temperature range; VDD = 2.5 V ± 0.2 V and 3.3 V ± 0.3 V,
Tamb = –40 to +85 °C; and refer to VIL and VIH with an input voltage of VSS to VDD.
                                                                                             STANDARD-MODE                FAST-MODE
  SYMBOL                                       PARAMETER                                           I2C-BUS                   I2C-BUS          UNITS
                                                                                              MIN          MAX           MIN        MAX
      fSCL        Operating frequency                                                           0          100            0         400        kHz
      tBUF        Bus free time between STOP and START conditions                              4.7           —           1.3         —          µs
    tHD;STA       Hold time after (repeated) START condition                                   4.0           —           0.6         —          µs
    tSU;STA       Repeated START condition setup time                                          4.7           —           0.6         —          µs
    tSU;STO       Setup time for STOP condition                                                4.0           —           0.6         —          µs
    tHD;DAT       Data in hold time                                                             0            —            0          —          ns
    tVD;ACK       Valid time for ACK condition                                                 —            0.6           —          0.6        µs
  tVD;DAT(L)      Data out valid time LOW                                                      —            0.6           —          0.6        µs
  tVD;DAT(H)      Data out valid time HIGH                                                     —            0.6           —          0.6        µs
    tSU;DAT       Data setup time                                                             250            —           100         —          ns
      tLOW        Clock LOW period                                                             4.7           —           1.3         —          µs
     tHIGH        Clock HIGH period                                                            4.0           —           0.6         —          µs
        tF        Clock/Data fall time                                                         —            0.3           —          0.3        µs
        tR        Clock/Data rise time                                                         —             1            —          0.3        µs
       tSP        Pulse width of spikes that must be suppressed by the input filters           —             50           —          50         ns
2006 Sep 01                                                                 22


Philips Semiconductors                                                                                                   Product data sheet
  Parallel bus to I2C-bus controller                                                                                    PCA9564
                              START                                                          ACK OR READ CYCLE
     SCL
      SDA
                                 30%
                                                                                                  tRES
      RESET
                50%                                                                      50%          50%
                        tREC
                                                                                              tWRES
                                                                                                  tRES
        Dn                                                                                                  50%
                                                                                                                LED OFF
                                                                                                                          SW02107
                                                       Figure 19. Reset timing
                       A0–A1
                                         tAS
                                             tAH
                           CE
                                         tCS                            tCH
                                                    tRW                           tRWD
                           RD
                                               tDD                        tDF
                       D0–D7                     NOT
                                     FLOAT      VALID             VALID                FLOAT
                      (READ)
                                                                                  tRWD
                          WR
                                                           tDS
                                                                              tDH
                       D0–D7                                  VALID
                     (WRITE)
                                                                                                                    SD00711
                                                        Figure 20. Bus timing
2006 Sep 01                                                         23


Philips Semiconductors                                                                                                        Product data sheet
   Parallel bus to I2C-bus controller                                                                                        PCA9564
AC CHARACTERISTICS (3.3 VOLT) 1, 2, 3
ÁÁÁÁ           ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
VCC = 3.3 V ± 0.3 V, Tamb = –40 °C to +85 °C, unless otherwise specified. (See page 25 for 2.5 V.)
ÁÁÁÁ           ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                ÁÁÁÁÁÁÁÁ
                                                                                                    ÁÁÁÁÁ
                                                                                                    ÁÁÁÁÁÁÁÁ         ÁÁÁÁ
                                                                                                                  LIMITS          ÁÁÁÁ
                                                                                                                                  ÁÁÁÁ
ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
ÁÁÁÁ
   SYMBOL
ÁÁÁÁ           ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
               ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
                                                      PARAMETER
                                                                                                    ÁÁÁÁÁ
                                                                                                    ÁÁÁÁÁ
                                                                                                            Min
                                                                                                                     ÁÁÁÁ
                                                                                                                     ÁÁÁÁ
                                                                                                                          Max
                                                                                                                                  ÁÁÁÁ
                                                                                                                                  ÁÁÁÁ
                                                                                                                                       UNIT
ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
 Reset Timing (See Figure 19)
ÁÁÁÁ
      tWRES
               ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
                Reset pulse width
                                                                                                    ÁÁÁÁÁ
                                                                                                             10
                                                                                                                     ÁÁÁÁ
                                                                                                                           —
                                                                                                                                  ÁÁÁÁ
                                                                                                                                        ns
ÁÁÁÁ
ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
               ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
     tRES  4,5  Time to reset                                                                               250            —            ns
ÁÁÁÁ           ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                  ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
       tREC     Reset recovery time                                                                           0            —            ns
ÁÁÁÁ           ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
 Bus Timing (See Figure 20, 21)
        tAS     A0–A1 setup time to RD, WR LOW                                                                0            —            ns
ÁÁÁÁ
ÁÁÁÁ
        tAH
        tCS    ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
                A0–A1 hold time from RD, WR LOW
               ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
                CE setup time to RD, WR LOW                                                         ÁÁÁÁÁ
                                                                                                    ÁÁÁÁÁ
                                                                                                              7
                                                                                                              0      ÁÁÁÁ
                                                                                                                     ÁÁÁÁ
                                                                                                                           —
                                                                                                                           —      ÁÁÁÁ
                                                                                                                                  ÁÁÁÁ
                                                                                                                                        ns
                                                                                                                                        ns
ÁÁÁÁ
ÁÁÁÁ
        tCH
        tRW    ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
                CE Hold time from RD, WR LOW
               ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
                WR, RD pulse width (Low time)                                                       ÁÁÁÁÁ
                                                                                                    ÁÁÁÁÁ
                                                                                                              0
                                                                                                              7      ÁÁÁÁ
                                                                                                                     ÁÁÁÁ
                                                                                                                           —
                                                                                                                           —      ÁÁÁÁ
                                                                                                                                  ÁÁÁÁ
                                                                                                                                        ns
                                                                                                                                        ns
ÁÁÁÁ           ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
        tDD     Data valid after RD and CE LOW                                                               —             17           ns
ÁÁÁÁ           ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
        tDF     Data bus floating after RD or CE HIGH                                                        —             17           ns
ÁÁÁÁ           ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
        tDS     Data bus setup time before WR or CE HIGH (write cycle)                                        7            —            ns
ÁÁÁÁ           ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
        tDH     Data hold time after WR HIGH                                                                  0            —            ns
       tRWD     High time between read and/or write cycles                                                   12            —            ns
NOTES:
1. Parameters are valid over specified temperature and voltage range.
2. All voltage measurements are referenced to ground (GND). For testing, all inputs swing between 0 V and 3.0 V with a transition time of 5 ns
   maximum. All time measurements are referenced at input voltages of 1.5 V and output voltages shown in Figures 20–21.
3. Test conditions for outputs: CL = 50 pF, RL = 500 Ω, except open drain outputs. Test conditions for open drain outputs: CL = 50 pF, RL = 1 kΩ
   pullup to VDD.
4. Resetting the device while actively communicating on the bus may cause glitches or an errant STOP condition.
5. Upon reset, the full delay will be the sum of tRES and the RC time constant of the SDA and SCL bus.
2006 Sep 01                                                             24


Philips Semiconductors                                                                                                        Product data sheet
   Parallel bus to I2C-bus controller                                                                                        PCA9564
AC CHARACTERISTICS (2.5 VOLT) 1, 2, 3
ÁÁÁÁ         ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
VCC = 2.5 V ± 0.2 V, Tamb = –40 to +85 °C, unless otherwise specified. (See page 24 for 3.3 V.)
ÁÁÁÁ         ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                  ÁÁÁÁÁÁÁÁ
                                                                                                    ÁÁÁÁÁ
                                                                                                    ÁÁÁÁÁÁÁÁ         ÁÁÁÁ
                                                                                                                  LIMITS          ÁÁÁÁ
                                                                                                                                  ÁÁÁÁ
ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
ÁÁÁÁ
  SYMBOL
ÁÁÁÁ         ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
             ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
                                                     PARAMETER
                                                                                                    ÁÁÁÁÁ
                                                                                                    ÁÁÁÁÁ
                                                                                                            Min
                                                                                                                     ÁÁÁÁ
                                                                                                                     ÁÁÁÁ
                                                                                                                          Max
                                                                                                                                  ÁÁÁÁ
                                                                                                                                  ÁÁÁÁ
                                                                                                                                       UNIT
ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
 Reset Timing (See Figure 19)
ÁÁÁÁ
     tWRES
             ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
                Reset pulse width
                                                                                                    ÁÁÁÁÁ
                                                                                                             10
                                                                                                                     ÁÁÁÁ
                                                                                                                           —
                                                                                                                                  ÁÁÁÁ
                                                                                                                                        ns
ÁÁÁÁ
ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
             ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                  ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
    tRES 4,5    Time to reset                                                                               250            —            ns
ÁÁÁÁ         ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                  ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
      tREC      Reset recovery time                                                                           0            —            ns
ÁÁÁÁ         ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                  ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
 Bus Timing (See Figure 20, 21)
       tAS      A0–A1 setup time to RD, WR LOW                                                                0            —            ns
ÁÁÁÁ
ÁÁÁÁ
       tAH
       tCS   ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
                A0–A hold time from RD, WR LOW
             ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
                CE setup time to RD, WR LOW                                                         ÁÁÁÁÁ
                                                                                                    ÁÁÁÁÁ
                                                                                                              9
                                                                                                              0      ÁÁÁÁ
                                                                                                                     ÁÁÁÁ
                                                                                                                           —
                                                                                                                           —      ÁÁÁÁ
                                                                                                                                  ÁÁÁÁ
                                                                                                                                        ns
                                                                                                                                        ns
ÁÁÁÁ
ÁÁÁÁ
       tCH
       tRW   ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
                CE Hold time from RD, WR LOW
             ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ
                WR, RD pulse width (low time)                                                       ÁÁÁÁÁ
                                                                                                    ÁÁÁÁÁ
                                                                                                              0
                                                                                                              9      ÁÁÁÁ
                                                                                                                     ÁÁÁÁ
                                                                                                                           —
                                                                                                                           —      ÁÁÁÁ
                                                                                                                                  ÁÁÁÁ
                                                                                                                                        ns
                                                                                                                                        ns
ÁÁÁÁ         ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                  ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
       tDD      Data valid after RD and CE LOW                                                               —             22           ns
ÁÁÁÁ         ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                  ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
       tDF      Data bus floating after RD or CE HIGH                                                        —             17           ns
ÁÁÁÁ         ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                  ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
       tDS      Data bus setup time before WR or CE HIGH (write cycle)                                        8            —            ns
ÁÁÁÁ         ÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁÁ                                                                  ÁÁÁÁÁ            ÁÁÁÁ         ÁÁÁÁ
       tDH      Data hold time after WR HIGH                                                                  0            —            ns
      tRWD      High time between read and/or write cycles                                                   12            —            ns
NOTES:
1. Parameters are valid over specified temperature and voltage range.
2. All voltage measurements are referenced to ground (GND). For testing, all inputs swing between 0 V and 3.0 V with a transition time of 5 ns
   maximum. All time measurements are referenced at input voltages of 1.5 V and output voltages shown in Figures 20–21.
3. Test conditions for outputs: CL = 50 pF, RL = 500 Ω, except open drain outputs. Test conditions for open drain outputs: CL = 50 pF, RL = 1 kΩ
   pullup to VDD.
4. Resetting the device while actively communicating on the bus may cause glitches or an errant STOP condition.
5. Upon reset, the full delay will be the sum of tRES and the RC time constant of the SDA and SCL bus.
2006 Sep 01                                                             25


Philips Semiconductors                                                                                                              Product data sheet
  Parallel bus to I2C-bus controller                                                                                                PCA9564
                                                     VI
                                     RD, CE INPUT
                                                                  VM                              VM
                                                   GND
                                                                   tDF(LZ)
                                                                                                   tDD(ZL)
                                                   VCC
                                      Dn OUTPUT
                                   LOW-TO-FLOAT
                                                                                                                VM
                                   FLOAT-TO-LOW
                                                    VOL                           VX
                                                                     tDF(HZ)                        tDD(ZH)
                                                   VOH
                                      Dn OUTPUT                                    VY
                                   HIGH-TO-FLOAT
                                                                                                                  VM
                                   FLOAT-TO-HIGH
                                                   GND
                                                                                          OUTPUTS
                                                        OUTPUTS ENABLED                                             OUTPUTS ENABLED
                                                                                          FLOATING
                    VM = 1.5 V
                    VX = VOL + 0.3 V
                    VY = VOH – 0.3 V
                    VOL AND VOH ARE TYPICAL OUTPUT VOLTAGE DROPS THAT OCCUR WITH THE OUTPUT LOAD.
                                                                                                                                     SW02113
                                                             Figure 21. tDD and tDF times
                                                                             VCC
                                                                                                                6.0 V
                                                                                                                Open
                                                            VI                        VO            RL = 500 Ω
                                              PULSE
                                                                           D.U.T.
                                          GENERATOR
                                                                RT
                                                                                        CL           RL = 500 Ω
                                                                                        50 pF
               TEST           S1                               DEFINITIONS
             tPLZ/tPZL        6V                               RL = Load resistor.
             tPLH/tPHL      Open                               CL = Load capacitance includes jig and probe capacitance
                                                               RT = Termination resistance should be equal to the output
                                                                        impedance ZO of the pulse generators.
                                                                                                                                       SW02114
                                                     Figure 22. Test circuitry for switching times
2006 Sep 01                                                                    26


Philips Semiconductors                                   Product data sheet
  Parallel bus to I2C-bus controller                     PCA9564
 DIP20: plastic dual in-line package; 20 leads (300 mil)    SOT146-1
2006 Sep 01                                          27


Philips Semiconductors                                            Product data sheet
  Parallel bus to I2C-bus controller                              PCA9564
 SO20: plastic small outline package; 20 leads; body width 7.5 mm    SOT163-1
2006 Sep 01                                        28


Philips Semiconductors                                                           Product data sheet
  Parallel bus to I2C-bus controller                                             PCA9564
 TSSOP20: plastic thin shrink small outline package; 20 leads; body width 4.4 mm    SOT360-1
2006 Sep 01                                       29


Philips Semiconductors                                                                  Product data sheet
  Parallel bus to I2C-bus controller                                                    PCA9564
 HVQFN20: plastic thermal enhanced very thin quad flat package; no leads; 20 terminals;
 body 5 x 5 x 0.85 mm                                                                      SOT662-1
2006 Sep 01                                     30


Philips Semiconductors                                                                                               Product data sheet
  Parallel bus to I2C-bus controller                                                                                 PCA9564
REVISION HISTORY
 Rev        Date       Description
 _4         20060901   Product data sheet. Supersedes data of 2004 Jun 25 (9397 750 13272).
                       • Ordering information table on page 2: added whole wafer package option (PCA9564U).
                       • Pin description table on page 3: added table note 1 and its reference at HVQFN pin 7 (VSS).
                       • Section “The Control Register, I2CCON” on page 5: 3rd sentence re-written.
 _3         20040625   Product data sheet (9397 750 13272). Supersedes data of 2003 Apr 02 (9397 750 11353).
 _2         20030402   Product data (9397 750 11353). ECN 853-2419 29715 Dated 24 March 2003.
                       Supersedes Objective data of 2003 Feb 26 (9397 750 11153).
 _1         20030226   Objective data (9397 750 11153).
2006 Sep 01                                                     31


Philips Semiconductors                                                                                                                                               Product data sheet
    Parallel bus to I2C-bus controller                                                                                                                             PCA9564
 Legal Information
Data sheet status
 Document status [1][2]                   Product status [3]              Definition
 Objective [short] data sheet             Development                     This document contains data from the objective specification for product development.
 Preliminary [short] data sheet           Qualification                   This document contains data from the preliminary specification.
 Product [short] data sheet               Production                      This document contains the product specification.
 [1] Please consult the most recently issued document before initiating or completing a design.
 [2] The term ‘short data sheet’ is explained in section “Definitions”.
 [3] The product status of device(s) described in this document may have changed since this data sheet was published and may differ in case of multiple devices. The latest product status
      information is available on the Internet at URL http://www.semiconductors.philips.com.
 Definitions                                                                                     inclusion and/or use of Philips Semiconductors products in such equipment
 Draft — The document is a draft version only. The content is still under                        or applications and therefore such inclusion and/or use is at the customer’s
 internal review and subject to formal approval, which may result in                             own risk.
 modifications or additions. Philips Semiconductors does not give any                            Applications — Applications that are described herein for any of these
 representations or warranties as to the accuracy or completeness of                             products are for illustrative purposes only. Philips Semiconductors makes no
 information included herein and shall have no liability for the consequences                    representation or warranty that such applications will be suitable for the
 of use of such information.                                                                     specified use without further testing or modification.
 Short data sheet — A short data sheet is an extract from a full data sheet                      Limiting values — Stress above one or more limiting values (as defined in
 with the same product type number(s) and title. A short data sheet is                           the Absolute Maximum Ratings System of IEC 60134) may cause
 intended for quick reference only and should not be relied upon to contain                      permanent damage to the device. Limiting values are stress ratings only and
 detailed and full information. For detailed and full information see the                        operation of the device at these or any other conditions above those given in
 relevant full data sheet, which is available on request via the local Philips                   the Characteristics sections of this document is not implied. Exposure to
 Semiconductors sales office. In case of any inconsistency or conflict with the                  limiting values for extended periods may affect device reliability.
 short data sheet, the full data sheet shall prevail.
                                                                                                 Terms and conditions of sale — Philips Semiconductors products are
 Disclaimers                                                                                     sold subject to the general terms and conditions of commercial sale, as
                                                                                                 published at http://www.semiconductors.philips.com/profile/terms,
 General — Information in this document is believed to be accurate and
                                                                                                 including those pertaining to warranty, intellectual property rights
 reliable. However, Philips Semiconductors does not give any representations
                                                                                                 infringement and limitation of liability, unless explicitly otherwise agreed to in
 or warranties, expressed or implied, as to the accuracy or completeness of
                                                                                                 writing by Philips Semiconductors. In case of any inconsistency or conflict
 such information and shall have no liability for the consequences of use of
                                                                                                 between information in this document and such terms and conditions, the
 such information.
                                                                                                 latter will prevail.
 Right to make changes — Philips Semiconductors reserves the right to
                                                                                                 No offer to sell or license — Nothing in this document may be interpreted
 make changes to information published in this document, including without
                                                                                                 or construed as an offer to sell products that is open for acceptance or the
 limitation specifications and product descriptions, at any time and without
                                                                                                 grant, conveyance or implication of any license under any copyrights,
 notice. This document supersedes and replaces all information supplied prior
                                                                                                 patents or other industrial or intellectual property rights.
 to the publication hereof.
 Suitability for use — Philips Semiconductors products are not designed,                         Trademarks
 authorized or warranted to be suitable for use in medical, military, aircraft,                  Notice: All referenced brands, product names, service names and
 space or life support equipment, nor in applications where failure or                           trademarks are the property of their respective owners.
 malfunction of a Philips Semiconductors product can reasonably be
 expected to result in personal injury, death or severe property or                              I2C-bus — logo is a trademark of Koninklijke Philips Electronics N.V.
 environmental damage. Philips Semiconductors accepts no liability for
 Contact information
 For additional information please visit: http://www.semiconductors.philips.com
 For sales office addresses, send an e-mail to: sales.addresses@www.semiconductors.philips.com.
                                                                                                   Please be aware that important notices concerning this document and the product(s)
                                                                                                   described herein, have been included in section ‘Legal information’.
                                                                                                    Koninklijke Philips Electronics N.V. 2006.                 All rights reserved.
                                                                                                   For more information, please visit http://www.semiconductors.philips.com.
                                                                                                   For sales office addresses, email to: sales.addresses@www.semiconductors.philips.com.
                                                                                                                                                                  Date of release: 20060901
                                                                                                                                                           Document identifier: PCA9564_4
yyyy mmm dd                                                                                  32


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
NXP:
 PCA9564BS,118 PCA9564D,112 PCA9564D,118 PCA9564N,112 PCA9564PW,112 PCA9564PW,118
