M                                                                         MCP2140
                IrDA® Standard Protocol Stack Controller
                With Fixed 9600 Baud Communication Rate
Features                                                    Package Types
                       ®
• Implements the IrDA standard, including:                    PDIP, SOIC
  - IrLAP                                                           RXPDREF           1              18        RXPD
  - IrLMP                                                               TXIR          2              17        CD
  - IAS                                                               PHACT           3              16        OSC1/CLKI
                                                                                           MCP2140
                                                                      RESET           4              15        OSC2
  - TinyTP                                                                            5              14
                                                                         VSS                                   VDD
  - IrCOMM (9-wire “cooked” service class)                               NC           6              13        RTS
• Provides IrDA standard physical signal layer                            TX          7              12        CTS
  support including:                                                      RX          8              11        DTR
                                                                           RI         9              10        DSR
  - Bidirectional communication
  - CRC implementation                                        SSOP
  - Fixed Data communication rate of 9600 baud                      RXPDREF           1              20         RXPD
                                                                        TXIR          2              19         CD
• Includes UART-to-IrDA standard encoder/                             PHACT           3              18         OSC1/CLKI
  decoder functionality:                                              RESET           4              17         OSC2
                                                                                           MCP2140
  - Easily interfaces with industry standard                             VSS          5              16         VDD
     UARTs and infrared transceivers                                     VSS          6              15         VDD
• UART interface for connecting to Data                                  NC           7              14         RTS
                                                                          TX          8              13         CTS
  Communications Equipment (DCE) or Data
                                                                          RX          9              12         DTR
  Terminal Equipment (DTE) systems
                                                                           RI         10             11         DSR
• Transmit/Receive formats (bit width) supported:
  - 1.63 µs
• Hardware UART Support:                                    Block Diagram
  - 9.6 kbaud baud rate
  - 29 Byte Data Buffer Size
                                                                                   MCP2140
• Infrared Supported:
                                                                                  Encode and
  - 9.6 kbaud baud rate                                       TX                                                     TXIR
                                                                                Protocol Handler
  - 64 Byte Data Packet Size
• Operates as Secondary Device                                             Logic
• Automatic Low Power mode                                   PHACT                     Baud
                                                                                        Rate
  - < 60 µA when no IR activity present
                                                                                      Generator
     (PHACT = L)
                                                                                                                  RXPD
CMOS Technology                                               RX
                                                                            Protocol                      +
•   Low power, high-speed CMOS technology                                    Handler                      -
                                                                           and Decode                             RXPDREF
•   Fully static design
•   Low voltage operation                                    RTS                                                     OSC1
•   Industrial temperature range                             CTS                                                     OSC2
                                                                                 UART
•   Low power consumption                                    DSR                Control
                                                             DTR
    - < 1 mA @ 3.0V, 7.3728 MHz (typical)
                                                              CD
                                                               RI
 2003 Microchip Technology Inc.                    Preliminary                                               DS21790A-page 1


MCP2140
MCP2140 System Block Diagram
         PICmicro®                                   MCP2140
       Microcontroller
                                              TX                               IR LED
                                                                 TXIR
                                SO                   Decode
                         UART                       Baud Rate
                                                    Generator
                                                                                                   IR Photo
                                              RX                 +       RXPD    IR Receive        diode
                                 SI                Encode                          Detect
                                                                 -
                                      RTS                                RXPDREF Circuitry
                                I/O
                  UART Flow
                                I/O   CTS          UART
                                I/O   DSR          Control
                  Control (1)
                                I/O   DTR
                                I/O   CD
                                I/O   RI
                  MCP2140       I/O
                                      PHACT
                                                   Logic
                  Status (1)
          Note 1: Not all microcontroller I/O pins are required to be connected to the MCP2140.
DS21790A-page 2                                    Preliminary                       2003 Microchip Technology Inc.


                                                                                              MCP2140
1.0       DEVICE OVERVIEW                                      1.1       Applications
The MCP2140 is a cost-effective, low pin count (18-pin),       The MCP2140 Infrared Communications Controller,
easy-to-use device for implementing IrDA standard              supporting the IrDA standard, provides embedded sys-
wireless connectivity. The MCP2140 provides support            tem designers the easiest way to implement IrDA stan-
for the IrDA standard protocol “stack”, bit encoding/          dard wireless connectivity. Figure 1-1 shows a typical
decoding and low cost, discrete IR receiver circuitry.         application block diagram, while Table 1-2 shows the
                                                               pin definitions.
The serial and IR interface baud rates are fixed at
9600 baud. The serial interface and IR interface baud
rates are dependent on the device frequency, but IrDA          TABLE 1-1:          OVERVIEW OF FEATURES
standard operation requires a device frequency of                        Features                   MCP2140
7.3728 MHz.
                                                                Serial Communications       UART, IR
The MCP2140 will specify to the Primary Device the IR
                                                                Baud Rate Selection         Fixed
baud rate during the Discover phase.
                                                                Low Power Mode              Yes
The MCP2140 can operate in Data Communication
Equipment (DCE) and Data Terminal Equipment (DTE)               Resets (and Delays)         RESET, POR
applications, and sits between a UART and an infrared                                       (PWRT and OST)
optical transceiver.                                            Packages                    18-pin DIP, SOIC,
                                                                                            20-pin SSOP
The MCP2140 encodes an asynchronous serial data
stream, converting each data bit to the corresponding          Infrared communication is a wireless, two-way data
infrared (IR) formatted pulse. IR pulses received are          connection using infrared light generated by low-cost
decoded and then handled by the protocol handler               transceiver signaling technology. This provides reliable
state machine. The protocol handler sends the appro-           communication between two devices.
priate data bytes to the Host Controller in UART-              Infrared technology offers:
formatted serial data.
                                                               • Universal standard for connecting portable
The MCP2140 supports “point-to-point” applications,               computing devices
that is, one Primary device and one Secondary device.
                                                               • Easy, effortless implementation
The MCP2140 operates as a Secondary device and
does not support “multi-point” applications.                   • Economical alternative to other connectivity
                                                                  solutions
Sending data using IR light requires some hardware
                                                               • Reliable, high-speed connections
and the use of specialized communication protocols.
These protocol and hardware requirements are                   • Safe to use in any environment (can even be
described, in detail, by the IrDA standard specifications.        used during air travel)
The encoding/decoding functionality of the MCP2140 is          • Eliminates the hassle of cables
designed to be compatible with the physical layer com-         • Allows PCs and other electronic devices (such as
ponent of the IrDA standard. This part of the standard is         PDAs, cell phones, etc.) to communicate with
often referred to as “IrPHY”.                                     each other
The complete IrDA standard specification is available          • Enhances mobility by allowing users to easily
for download from the IrDA website at www.IrDA.org.               connect
                                                               The MCP2140 allows the easy addition of IrDA stan-
                                                               dard wireless connectivity to any embedded applica-
                                                               tion that uses serial data. Figure 1-1 shows typical
                                                               implementation of the MCP2140 in an embedded
                                                               system.
                                                               The IrDA protocol for printer support is not included in
                                                               the IrCOMM 9-wire “cooked” service class.
 2003 Microchip Technology Inc.                      Preliminary                                     DS21790A-page 3


MCP2140
FIGURE 1-1:                     SYSTEM BLOCK DIAGRAM
         PICmicro®                                   MCP2140
       Microcontroller
                                              TX                               IR LED
                                                                 TXIR
                                SO                   Decode
                         UART                       Baud Rate
                                                    Generator
                                                                                                   IR Photo
                                              RX                 +       RXPD    IR Receive        diode
                                 SI                Encode                          Detect
                                                                 -
                                      RTS                                RXPDREF Circuitry
                                I/O
                  UART Flow
                                I/O   CTS          UART
                                I/O   DSR          Control
                  Control (1)
                                I/O   DTR
                                I/O   CD
                                I/O   RI
                  MCP2140       I/O
                                      PHACT
                                                   Logic
                  Status (1)
          Note 1: Not all microcontroller I/O pins are required to be connected to the MCP2140.
DS21790A-page 4                                    Preliminary                       2003 Microchip Technology Inc.


                                                                                                MCP2140
TABLE 1-2:         MCP2140 PIN DESCRIPTION NORMAL OPERATION (DCE)
                     Pin Number          Pin   Buffer
  Pin Name
                 PDIP   SOIC     SSOP   Type    Type                                Description
RXPDREF            1       1        1     I        A     IR Receive Photo Detect Diode reference voltage. This
                                                         voltage will typically be in the range of VDD/2.
TXIR               2       2       2      O       —      Asynchronous transmit to IrDA transceiver.
PHACT              3       3        3    OC       —      Protocol Handler Active. Indicates the state of the MCP2140
                                                         Protocol Handler. This output is an open collector, so an
                                                         external pull-up resistor may be required.
                                                         1 = Protocol Handler is in the Discovery or NRM state
                                                         0 = Protocol Handler is in NDM state or the MCP2140 is
                                                              in Low Power mode
RESET              4       4       4      I       ST     Resets the Device
VSS                5       5      5, 6   —        P      Ground reference for logic and I/O pins
NC                 6       6       7      I       —      No connect
TX                 7       7       8      I      TTL     Asynchronous receive; from Host Controller UART
RX                 8       8       9      O       —      Asynchronous transmit; to Host Controller UART
RI                 9       9      10      I      TTL     Ring Indicator. The state of this bit is communicated to the
                                                         IrDA Primary Device.
                                                         1 = No Ring Indicate Present
                                                         0 = Ring Indicate Present
DSR               10      10       11     O       —      Data Set Ready. Indicates that the MCP2140 has estab-
                                                         lished a valid IrDA link with a Primary Device(1). This signal
                                                         is locally emulated and not related to the DTR bit of the IrDA
                                                         Primary Device.
                                                         1 = An IR link has not been established
                                                              (No IR Link)
                                                         0 = An IR link has been established (IR Link)
DTR               11      11      12      I      TTL     Data Terminal Ready. Indicates that the Embedded device
                                                         connected to the MCP2140 is ready for IR data. The state of
                                                         this bit is communicated to the IrDA Primary Device via the
                                                         IrDA DSR bit carried by IrCOMM.
                                                         1 = Embedded device not ready
                                                         0 = Embedded device ready
CTS               12      12      13      O       —      Clear to Send. Indicates that the MCP2140 is ready to
                                                         receive data from the Host Controller. This signal is locally
                                                         emulated and not related to the CTS/RTS bit of the IrDA
                                                         Primary Device.
                                                         1 = Host Controller should not send data
                                                         0 = Host Controller may send data
Legend:    TTL = TTL compatible input            ST = Schmitt Trigger input with CMOS levels
           A = Analog                            P = Power
           CMOS = CMOS compatible input         OC = Open collector output
           I = Input                             O = Output
         1: The state of the DTR output pin does not reflect the state of the DTR bit of the IrDA Primary Device.
 2003 Microchip Technology Inc.                  Preliminary                                          DS21790A-page 5


MCP2140
TABLE 1-2:        MCP2140 PIN DESCRIPTION NORMAL OPERATION (DCE) (CONTINUED)
                    Pin Number          Pin   Buffer
 Pin Name
                PDIP   SOIC   SSOP     Type    Type                               Description
RTS              13      13    14        I      TTL     Request to Send. Indicates that a Host Controller is ready to
                                                        receive data from the MCP2140. This signal is locally emu-
                                                        lated and not related to the CTS/RTS bit of the IrDA Primary
                                                        device.
                                                        1 = Host Controller not ready to receive data
                                                        0 = Host Controller ready to receive data
VDD              14      14   15, 16    —        P      Positive supply for logic and I/O pins.
OSC2             15      15    17        O       —      Oscillator crystal output.
OSC1/CLKIN       16      16    18        I    CMOS Oscillator crystal input/external clock source input.
CD               17      17    19        I       ST     Carrier Detect. The state of this bit is communicated to the
                                                        IrDA Primary device via the IrDA CD bit.
                                                        1 = No Carrier Present
                                                        0 = Carrier Present
RXPD             18      18    20        I       A      IR RX Photo Detect Diode input. This input signal is required
                                                        to be a pulse to indicate an IR bit. When the amplitude of the
                                                        signal crosses the amplitude threshold set by the RXPDREF
                                                        pin, the IR bit is detected. The pulse has minimum and max-
                                                        imum requirements as specified in Parameter IR131A.
Legend:   TTL = TTL compatible input            ST = Schmitt Trigger input with CMOS levels
          A = Analog                            P = Power
          CMOS = CMOS compatible input         OC = Open collector output
          I = Input                             O = Output
        1: The state of the DTR output pin does not reflect the state of the DTR bit of the IrDA Primary Device.
DS21790A-page 6                                 Preliminary                              2003 Microchip Technology Inc.


                                                                                                MCP2140
2.0       DEVICE OPERATION                                     2.3.1.1        Crystal Oscillator / Ceramic
                                                                              Resonators
The MCP2140 serial interface and IR baud rates are
fixed at 9600 baud, given a 7.3728 MHz device clock.           A crystal or ceramic resonator can be connected to the
                                                               OSC1 and OSC2 pins to establish oscillation
2.1       Power-Up                                             (Figure 2-1). The MCP2140 oscillator design requires
                                                               the use of a parallel-cut crystal. Use of a series of cut
Any time the device is powered up (Parameter D003),            crystals may give a frequency outside of the crystal
the Power-Up Timer delay (Parameter 33) occurs, fol-           manufacturers specifications.
lowed by an Oscillator Start-up Timer (OST) delay
(Parameter 32). Once these delays complete, commu-             FIGURE 2-1:              CRYSTAL OPERATION
nication with the device may be initiated. This commu-
                                                                                        (CERAMIC RESONATOR)
nication is from both the infrared transceiver’s side and
                                                                                    OSC1                     To internal
the controller’s UART interface.
                                                                        C1                                   logic
2.2       Device Reset
                                                                                 XTAL
The MCP2140 is forced into the reset state when the                                            RF
                                                                                    OSC2
RESET pin is in the low state. Once the RESET pin is
                                                                                RS
brought to a high state, the Device Reset sequence
                                                                        C2     (Note)                 MCP2140
occurs. Once the sequence completes, functional
operation begins.                                                See Table 2-1 and Table 2-2 for recommended
                                                                 values of C1 and C2.
2.3       Device Clocks                                             Note:     A series resistor may be required for
                                                                              AT strip cut crystals.
The MCP2140 requires a clock source to operate. This
clock source is used to establish the device timing,
including the device “Bit Clock”.                              TABLE 2-1:          CAPACITOR SELECTION FOR
                                                                                   CERAMIC RESONATORS
2.3.1         CLOCK SOURCE
                                                                        Freq              OSC1 (C1)         OSC2 (C2)
The clock source can be supplied by one of the
following:                                                          7.3728 MHz             10 - 22 pF       10 - 22 pF
• Crystal                                                        Note:     Higher capacitance increases the stability
                                                                           of the oscillator, but also increases the
• Resonator
                                                                           start-up time. These values are for design
• External clock                                                           guidance only. Since each resonator has its
The frequency of this clock source must be                                 own characteristics, the user should consult
7.3728 MHz (electrical specification Parameter 1A) for                     the resonator manufacturer for appropriate
device communication at 9600 baud.                                         values of external components.
                                                               TABLE 2-2:          CAPACITOR SELECTION FOR
                                                                                   CRYSTAL OSCILLATOR
                                                                      Freq            OSC1 (C1)            OSC2 (C2)
                                                                  7.3728 MHz           15 - 30 pF          15 - 30 pF
                                                                 Note:     Higher capacitance increases the stability
                                                                           of the oscillator but also increases the start-
                                                                           up time. These values are for design guid-
                                                                           ance only. RS may be required to avoid
                                                                           overdriving crystals with low drive level
                                                                           specification. Since each crystal has its
                                                                           own characteristics, the user should con-
                                                                           sult    the    crystal    manufacturer        for
                                                                           appropriate values of external components.
 2003 Microchip Technology Inc.                      Preliminary                                        DS21790A-page 7


MCP2140
2.3.1.2         External Clock
For applications where a clock is already available
elsewhere, users may directly drive the MCP2140 pro-
vided that this external clock source meets the AC/DC
timing requirements listed in Section 4.3, “Timing Dia-
grams and Specifications”. Figure 2-2 shows how an
external clock circuit should be configured.
FIGURE 2-2:             EXTERNAL CLOCK
       Clock From
       external                OSC1   MCP2140
       system
          Open                 OSC2
2.3.2        BIT CLOCK
The device crystal is used to derive the communication
bit clock (BITCLK). There are 16 BITCLKs for each bit
time. The BITCLKs are used for the generation of the
start bit and the eight data bits. The stop bit uses the
BITCLK when the data is transmitted (not for
reception).
This clock is a fixed-frequency and has minimal
variation in frequency (specified by the crystal
manufacturer).
DS21790A-page 8                                     Preliminary  2003 Microchip Technology Inc.


                                                                                                  MCP2140
2.4        Host UART Interface                                    2.4.4         HARDWARE HANDSHAKING
The Host UART interface communicates with the Host                There are three Host UART signals used to control the
Controller. This interface has eight signals associated           handshaking operation between the Host Controller
with it: TX, RX, RTS, CTS, DSR, DTR, CD and RI. Sev-              and the MCP2140. They are:
eral of these signals are locally generated (not passed           • DSR
over the IR interface). The Host UART is a half-duplex
                                                                  • RTS
interface, meaning that the system is either transmitting
or receiving, but not both simultaneously.                        • CTS
    Note 1: The MCP2140 generates several non-                    2.4.4.1         DSR
               data signals locally.                              The DSR signal is used to indicate that a link has been
           2: The MCP2140 emulates a 3-wire serial                established between the MCP2140 and the Primary
               connection (TXD, RXD and GND). The                 Device. Please refer to Section 2.13, “How Devices
               transceiver’s Transmit Data (TXD),                 Connect”, for information on how devices connect.
               Receive Data (RXD) signals, and the
               state of the CD. RI and DTR input pins             2.4.4.2         RTS
               are carried back and forth to the Primary          The RTS signal indicates to the MCP2140 that the Host
               device.                                            Controller is ready to receive serial data. Once an IR
           3: The RTS and CTS signals are local                   data packet has been received, the RTS signal will be
               emulations.                                        low for the received data to be transferred to the Host
                                                                  Controller. If the RTS signal remains high, an IR link
2.4.1         BAUD RATE                                           timeout will occur and the MCP2140 will disconnect
                                                                  from the Primary Device.
The baud rate for the MCP2140 serial port (the TX and
RX pins) is fixed at 9600 baud when the device                    2.4.4.3         CTS
frequency is 7.3728 MHz.
                                                                  The MCP2140 generates the CTS signal locally due to
                                                                  buffer limitations.
2.4.2         TRANSMITTING
                                                                  The MCP2140 uses a 64-byte buffer for incoming data
When the controller sends serial data to the MCP2140,             from the IR Host. Another 29-byte buffer is provided to
the controller’s baud rate is required to match the baud          buffer data from the UART serial port. The MCP2140
rate of the MCP2140’s serial port.                                can handle IR data and Host UART serial port data
                                                                  simultaneously. A hardware handshaking pin (CTS) is
2.4.3         RECEIVING
                                                                  provided to inhibit the Host Controller from sending
When the controller receives serial data from the                 serial data when the Host UART buffer is not available
MCP2140, the controller’s baud rate is required to                (Figure 2-3). Figure 2-4 shows a flow chart for Host
match the baud rate of the MCP2140’s serial port.                 UART flow control using the CTS signal.
                                                                     Note:     When the CTS output signal goes high, the
                                                                               UART FIFO will store up to 6 bytes. This is
                                                                               to allow devices that have a slow response
                                                                               time to a change on the CTS signal time to
                                                                               stop sending additional data (such as a
                                                                               modem).
FIGURE 2-3:               HOST UART CTS SIGNAL AND THE RECEIVE BUFFER
   CTS
                                                           Receive Buffer
                                                           Full (29 Bytes)                IR Data Packet Transmitted
                     Receive Buffer Empty                                                 Receive Buffer Empty
                     MCP2140 Can Receive Data Receive Buffer Has 22 Bytes,                MCP2140 Can Receive Data
                                                    CTS Pin Driven High              IR Data Packet Starts Transmission
 2003 Microchip Technology Inc.                     Preliminary                                          DS21790A-page 9


MCP2140
FIGURE 2-4:      HOST UART CTS FLOW CONTROL FLOWCHART
                       IR Flow Start
                         CTS Low?    N
                              Y
                       Transmit Byte
                                     N
                         CTS Low?
                                                 CNTR = 6
                              Y
                                                             N
                                                 DTR Low?
                                                      Y          Lost IR Link
                                               Transmit Byte
                                                             N
                                                 CTS Low?
                                                               CNTR = CNTR - 1
                                                      Y
                                                                                 N
                                                                  CNTR = 0?
                                                                         Y
DS21790A-page 10                       Preliminary              2003 Microchip Technology Inc.


                                                                                                 MCP2140
2.5       Encoder/Decoder                                       Each bit time is comprised of 16-bit clocks. If the value
                                                                to be transmitted (as determined by the TX pin) is a
The encoder converts the UART format data into the              logic-low, the TXIR pin will output a low level for 7-bit
IrDA Standard format data and the decoder converts              clock cycles, a logic high level for 3-bit clock cycles or
IrDA Standard format data into UART format data.                a minimum of 1.6 µsec (see Parameter IR121). The
                                                                remaining 6-bit clock cycles will be low. If the value to
2.5.1        ENCODER (MODULATION)                               transmit is a logic-high, the TXIR pin will output a low
The data that the MCP2140 UART received (on the TX              level for the entire 16-bit clock cycles.
pin) that needs to be transmitted (on the TXIR pin) will
need to be modulated. This modulated signal drives the
IR transceiver module. Figure 2-5 shows the encoding
of the modulated signal.
   Note:    The signal on the TXIR pin does not actu-
            ally line up in time with the bit value that
            was transmitted on the TX pin, as shown in
            Figure 2-5. The TX bit value is shown to
            represent the value to be transmitted on
            the TXIR pin.
FIGURE 2-5:             ENCODING
                       Start Bit      Data bit 0     Data bit 1  Data bit 2     Data bit ...
                        16 CLK
      BITCLK
        TX Bit
        Value
                                 7 CLK
        TXIR
                                  24 Tosc
                            0             1              0            0               1             0
 2003 Microchip Technology Inc.                     Preliminary                                        DS21790A-page 11


MCP2140
2.5.2         DECODER (DEMODULATION)                            2.6       IR Port Baud Rate
The modulated signal (data) from the IR transceiver             The baud rate for the MCP2140 IR port (the TXIR and
module (on RXIR pin) needs to be demodulated to                 RXIR pins) is fixed at the default rate of 9600 baud. The
form the received data (on RX pin). Once demodula-              Primary device will be informed of this parameter dur-
tion of the data byte occurs, the data that is received is      ing NDM. The Host UART baud rate and the IR port
transmitted by the MCP2140 UART (on the RX pin).                baud rate are the same.
Figure 2-6 shows the decoding of the modulated
signal.
   Note:     The signal on the RX pin does not actually
             line up in time with the bit value that was
             received on the RXIR pin, as shown in
             Figure 2-6. The RXIR bit value is shown to
             represent the value to be transmitted on
             the RX pin.
Each bit time is comprised of 16-bit clocks. If the value
to be received is a logic-low, the RXIR pin will be a low
level for the first 3-bit clock cycles, or a minimum of
1.6 µs. The remaining 13-bit clock cycles (or difference
up to the 16-bit clock time) will be high. If the value to
be received is a logic-high, the RXIR pin will be a high
level for the entire 16-bit clock cycles. The level on the
RX pin will be in the appropriate state for the entire 16
clock cycles.
FIGURE 2-6:               DECODING
                       Start Bit       Data bit 0    Data bit 1 Data bit 2     Data bit ...
                        16 CLK
     BITCLK
     (CLK)
   RXIR Bit Value
                                          ≥ 13 CLK
       RXPD
    RXPDREF
                            ≥ 1.6 µs (up to 3 CLK)
                         16 CLK         16 CLK        16 CLK     16 CLK         16 CLK         16 CLK
        RX
                             0              1            0          0               1               0
DS21790A-page 12                                      Preliminary                          2003 Microchip Technology Inc.


                                                                                                MCP2140
2.7       IrDA DATA PROTOCOLS                                    2.7.1        IRCOMM
          SUPPORTED BY MCP2140                                   IrCOMM provides the method to support serial and par-
The MCP2140 supports these required IrDA standard                allel port emulation. This is useful for legacy COM
protocols:                                                       applications, such as printers and modem devices.
• Physical Signaling Layer (PHY)                                 The IrCOMM standard is a syntax that allows the Pri-
                                                                 mary device to consider the Secondary device a serial
• Link Access Protocol (IrLAP)
                                                                 device. IrCOMM allows for emulation of serial or paral-
• Link Management Protocol/Information Access                    lel (printer) connections of various capabilities. The
  Service (IrLMP/IAS)                                            MCP2140 supports the 9-wire “cooked” service class of
The MCP2140 also supports some of the optional pro-              IrCOMM. Other service classes supported by IrCOMM
tocols for IrDA standard data. The optional protocols            are shown in Figure 2-8.
implemented by the MCP2140 are:                                  The IrDA protocol for printer support is not included in
• Tiny TP                                                        the IrCOMM 9-wire “cooked” service class.
• IrCOMM
Figure 2-7 shows the IrDA data protocol stack and
those components implemented by the MCP2140.
FIGURE 2-7:              IrDA DATA - PROTOCOL
                         STACKS
    IrTran-P     IrObex IrLan IrComm (1)         IrMC
    LM-IAS        Tiny Transport Protocol (Tiny TP)
           IR Link Management - Mux (IrLMP)
             IR Link Access Protocol (IrLAP)
     Asynchronous         Synchronous Synchronous
      Serial IR (2, 3)      Serial IR        4 PPM
   (9600 -115200 b/s) (1.152 Mb/s)         (4 Mb/s)
        Supported by              Optional IrDA data
        the MCP2140               protocols not
                                  supported by
                                  the MCP2140
  Note 1: The MCP2140 implements the 9-wire
              “cooked” service class serial replicator.
          2: The MCP2140 is fixed at 9600 baud
          3: An optical transceiver is required.
FIGURE 2-8:              IRCOMM SERVICE CLASSES
                                                   IrCOMM Services
                  Uncooked Services                                              Cooked Services
      Parallel                            Serial                  Parallel                                Serial
       IrLPT                           3-wire Raw               Centronics                          3-wire Cooked
                                                                IEEE 1284                           9-wire Cooked
                Supported by MCP2140
 2003 Microchip Technology Inc.                      Preliminary                                     DS21790A-page 13


MCP2140
2.8       Minimizing Power                                     2.8.1         AUTOMATIC LOW POWER MODE
During IR communication between a Primary Device               The Automatic Low Power mode allows the system to
and the MCP2140, the MCP2140 is in an operational              achieve the lowest possible operating current.
mode. In this mode, the MCP2140 consumes the                   When the IR link has been “closed”, the protocol han-
operational current (Parameter D010).                          dler state machine returns to the Normal Disconnect
For many applications, the time that IR communication          Mode (NDM). During NDM, if no IR activity occurs for
is occurring is a small percentage of the applications         about 10 seconds, the device is disabled and enters
operational time. The ability for the IR controller to be      into Low Power mode. In this mode, the device oscilla-
in a low power mode during this time will save on the          tor is shut down and the PHACT pin will be low
applications power consumption. The MCP2140 will               (Parameter D010A).
automatically enter a low power mode once IR activity          Table 2-3 shows the MCP2140 current. These are
has stopped and will return to operational mode once           specified in Parameter D010 and Parameter D010A.
IR activity is detected on the RXPD and RXPDREF
pins.
                                                               TABLE 2-3:          DEVICE MAXIMUM
Another way to minimize system power is to use an I/O                              OPERATING CURRENT
pin of the Host Controller to enable power to the IR
                                                                    Mode       Current             Comment
circuity
                                                                PHACT = H       2.2 mA   IR communications is
                                                                                         occurring.
                                                                PHACT = L        60 µA   No IR communications.
                                                                  Note:     Additional system current is from the
                                                                            Receiver/Transmitter circuitry.
                                                               2.8.2         RETURNING TO DEVICE
                                                                             OPERATION
                                                               The device will exit the Low Power mode when the
                                                               RXPD pin voltage crosses the REPDREF pin reference
                                                               voltage.
                                                               A device reset will also cause the MCP2140 to exit Low
                                                               Power mode. After device initialization, if no IR activity
                                                               occurs for about 10 seconds, the device is disabled and
                                                               returns into the Low Power mode.
                                                                  Note:     For proper operation, the device oscillator
                                                                            must be within oscillator specification in
                                                                            the     time     frame      specified      in
                                                                            Parameter IR140.
                                                               2.9       PHACT Signal
                                                               The PHACT signal indicates that the MCP2140 Proto-
                                                               col Handler is active. This output pin is an open collec-
                                                               tor, so when interfacing to the Host Controller, a pull-up
                                                               resistor is required.
DS21790A-page 14                                      Preliminary                         2003 Microchip Technology Inc.


                                                                                               MCP2140
2.10       Buffers and Throughput                               TABLE 2-4:         THROUGHPUT
The IR data rate of the MCP2140 is fixed at 9.6 kbaud.               Bytes
                                                                                     Bytes/                  Effective
The actual throughput will be less due to several fac-            Transferred
                                                                       (3)         CTS Low       Time (S)   Baud Rate
tors. The most significant factors are under the control
of the developer. One factor beyond the control of the                240         23 (max) (1)  0.810133      2962 (1)
designer is the overhead associated with the IrDA
                                                                      240              29         0.6500      3692 (2)
standard. A throughput example is shown in Table 2-4.
                                                                 Note 1: Measured from Figure 2-10.
Figure 2-9 shows the CTS waveform, what the state of                    2: Interpolated from Figure 2-10.
the buffers can be and the operation of the Host UART                   3: 10 bits transferred for each byte.
and IR interfaces.
Figure 2-10 shows the screen-capture of a Host Con-               Note:     IrDA throughput is based on many factors
troller transmitting 240 bytes. Data is not transmitted                     associated with characteristics of the Pri-
after CTS goes high (so only a maximum of 23 bytes of                       mary and Secondary devices. These char-
the 29 byte buffer are utilized). Between data packets,                     acteristics may cause your throughput to
the CTS time can vary, depending on the Primary                             be more or less than is shown in Table 2-4.
Device (see blue circled CTS pulse in Figure 2-10).
FIGURE 2-9:             HOST UART RECEIVE BUFFER AND CTS WAVEFORM
   CTS
                                                         Receive Buffer
                                                         Full (29 Bytes)                IR Data Packet Transmitted
                    Receive Buffer Empty                                                Receive Buffer Empty
                    MCP2140 Can Receive Data Receive Buffer Has 22 Bytes,               MCP2140 Can Receive Data
                                                  CTS Pin Driven High            IR Data Packet Starts Transmission
FIGURE 2-10:            HOST CONTROLLER TRANSMISSION OF A 240 BYTE PACKET
 2003 Microchip Technology Inc.                    Preliminary                                       DS21790A-page 15


MCP2140
2.10.1        IMPROVING THROUGHPUT                               2.10.1.1       From the Primary Device
Actual maximum throughput is dependent on several                The MCP2140 uses a fixed IR Receiver data block size
factors, including:                                              of 64 bytes.
• Characteristics of the Primary device                          The minimum size frame the Primary device can
• Characteristics of the MCP2140                                 respond with is 6 bytes.
• IrDA standard protocol overhead                                2.10.1.2       From the MCP2140
The IrDA standard specifies how the data is passed               The MCP2140 uses a fixed Host UART Receiver data
between the Primary device and Secondary device. In              block size of 29 bytes.
IrCOMM, an additional 8 bytes are used by the protocol
for each packet transfer.                                        2.11      Turnaround Latency
The most significant factor in data throughput is how
                                                                 An IR link can be compared to a one-wire data connec-
well the data frames are filled. If only 1 byte is sent at a
                                                                 tion. The IR transceiver can transmit or receive, but not
time, the throughput overhead of the IrCOMM protocol
                                                                 both at the same time. A delay of one bit time is recom-
is 89% (see Table 2-5). The best way to maximize
                                                                 mended between the time a byte is received and
throughput is to align the amounts of data with the
                                                                 another byte is transmitted.
receive buffer (IR and Host UART) packet size of the
MCP2140.                                                         2.12      Device ID
Then there is the delay between when data packets
are sent and received. See Figure 2-10 for an example            The MCP2140 has a fixed Device ID. This Device ID is
of this delay (look at CTS signal falling edges). In this        “MCP2140 xx”, with the xx indicating the silicon
screen capture, a Palm™ m105 is receiving a 240-                 revision of the device.
byte string of data from the MCP2140. When the CTS
signal goes high, the Host Controller stops sending
data (23 bytes per CTS low-time). The CTS falling
edge to CTS falling edge is approximately 90 ms (typ-
ical). This CTS high-time affects the total data through-
put. The CTS high-time will be dependant on the
characteristics of the Primary device.
TABLE 2-5:          IRCOMM OVERHEAD %
                Data
              Packet IrCOMM IrCOMM
                Size Overhead Overhead
 MCP2140 (Bytes) (Bytes)              % (1)     Comment
     IR          64        8          11 %      Note 2
  Receive        1         8          89 %
    Host         29        8          22 %      Note 3
   UART          23        8          26 %      Note 4
  Receive
                 1         8          89 %
   Note 1: Overhead % =
                     Overhead/(Overhead + Data).
           2: The maximum number of bytes of the IR
               Receive buffer.
           3: The maximum number of bytes of the
               Host UART Receive buffer.
           4: The CTS signal is driven high at 23 byte.
DS21790A-page 16                                        Preliminary                        2003 Microchip Technology Inc.


                                                                                               MCP2140
2.13      Optical Interface                                    2.13.2       INTEGRATED TRANSCEIVER
The MCP2140 requires an infrared transceiver for the           The MCP2140 was designed to use a discrete imple-
optical interface. This transceiver can be a single-chip       mentation that allows the lowest system power con-
solution (integrated) or be implemented with discrete          sumption and a low cost implementation (see
devices.                                                       Section 2.12.1, “Discrete Transceiver Solution”). It is
                                                               possible to use an integrated optical transceiver solu-
2.13.1       DISCRETE TRANSCEIVER                              tion, with the addition of four components. Two com-
             SOLUTION                                          ponents are required to condition the input signal to
                                                               ensure that the RXIR pulse width is not greater than
The MCP2140 was designed to use a discrete imple-              1.5 µs (see Parameter IR131A). The other two com-
mentation that allows the lowest system power                  ponents are required to set the RXIR signal trip point
consumption as well as a low cost implementation.              (typically VDD/2). Figure 2-12 shows an example
Figure 2-12 shows         a   typical   discrete   optical     MCP2140 optical transceiver circuit, using a Vishay®/
transceiver circuit.                                           Temic TFDS4500.
FIGURE 2-11:             CIRCUIT FOR A                         FIGURE 2-12:             CIRCUIT FOR AN
                         DISCRETE OPTICAL                                               INTEGRATED OPTICAL
                         TRANSCEIVER                                                    TRANSCEIVER
 This figure will be available in Revision B of the              +5 V
 MCP2140 data sheet. Please conact the Microchip                                         +5 V          RXPDREF
                                                                    R14 (2)                       (To MCP2140 Pin 1)
 factory via email (tech.support@microchip.com)                     10 kΩ
 for additional information.                                                                Q1 (1)
                                                                                 C19 (1)    MUN211T1
                                                                    R15 (2)                               RXPD
Care must be taken in the design and layout of the                  10 kΩ       68 pF
photo-detect circuit, due to the small signals that are                                          (To MCP2140 Pin 18)
being detected and their sensitivity to noise.                                                      +5 V
                                                                        +5 V
                                                                                                R11
                                                                                    U6
                                                                    R13                         22Ω
                                                                    47Ω           1
                                                                                          8
                                                                                  2
                                                                                          7
                                                                                  3                        TXIR
                                                                                          6
                                                                                  4                (To MCP2140 Pin 2)
                                                                    C18                   5
                                                                    .1 µF
                                                                                  TFDS4500
                                                                  Note 1: These components are used to control
                                                                             the width of the TFDS4500 RXD output
                                                                             signal. Q1 is a digital transistor, which
                                                                             includes the bias resistors.
                                                                         2: These components are used to set the
                                                                             reference voltage that the RXPD signal
                                                                             needs to cross to “detect” a bit.
                                                               Table 2-6 shows a list of common manufacturers of
                                                               integrated optical transceivers.
 2003 Microchip Technology Inc.                      Preliminary                                     DS21790A-page 17


MCP2140
2.14      How The MCP2140 Connects                             ports. If you used such a cell phone with a Personal
                                                               Digital Assistant (PDA), the PDA that supports the IrDA
When two devices, implementing the IrDA standard               standard feature would be the Primary device and the
feature, establish a connection using the IrCOMM pro-          cell phone would be the Secondary device.
tocol, the process is analogous to connecting two
devices with serial ports using a cable. This is referred      When a Primary device polls for another device, a
to as a “point-to-point” connection. This connection is        nearby Secondary device may respond. When a Sec-
limited to half-duplex operation because the IR trans-         ondary device responds, the two devices are defined to
ceiver cannot transmit and receive at the same time.           be in the Normal Disconnect Mode (NDM) state. NDM
The purpose of the IrDA standard protocol is to allow          is established by the Primary device broadcasting a
this half-duplex link to emulate, as much as possible, a       packet and waiting for a response. These broadcast
full-duplex connection. In general, this is done by divid-     packets are numbered. Usually, 6 or 8 packets are
ing the data into “packets”, or groups of data. These          sent. The first packet is number 0, while the last packet
packets can be sent back and forth, when needed,               is usually numbered 5 or 7. Once all the packets are
without risk of collision. The rules of how and when           sent, the Primary device sends an ID packet, which is
these packets are sent constitute the IrDA standard            not numbered.
protocol. The MCP2140 supports elements of this IrDA           The Secondary device waits for these packets and then
standard protocol to communicate with other IrDA stan-         responds to one of the packets. The packet responds
dard compatible devices.                                       to determine the “timeslot” to be used by the Secondary
When a wired connection is used, the assumption is             device. For example, if the Secondary device responds
made that both sides have the same communications              after packet number 2, the Secondary device will use
parameters and features. A wired connection has no             timeslot 2. If the Secondary device responds after
need to identify the other connector because it is             packet number 0, the Secondary device will use
assumed that the connectors are properly connected.            timeslot 0. This mechanism allows the Primary device
According to the IrDA standard, a connection process           to recognize as many nearby devices as there are
has been defined to identify other IrDA standard com-          timeslots. The Primary device will continue to generate
patible devices and establish a communication link.            timeslots and the Secondary device should continue to
There are three steps that these two devices go                respond, even if there’s nothing to do.
through to make this connection. They are:
                                                                   Note 1: The MCP2140 can only be used to
• Normal Disconnect Mode (NDM)                                               implement a Secondary device.
• Discovery Mode                                                          2: The MCP2140 supports a system with
• Normal Connect Mode (NCM)                                                  only one Secondary device having
Figure 2-13 shows the connection sequence.                                   exclusive use of the IrDA standard infra-
                                                                             red link (known as “point-to-point”
2.14.1       NORMAL DISCONNECT MODE                                          communication).
             (NDM)                                                        3: The MCP2140 always responds to packet
                                                                             number 0. This means that the MCP2140
When two IrDA standard compatible devices come into
                                                                             will always use timeslot 0.
range, they must first recognize each other. The basis
of this process is that one device has some task to                       4: If another Secondary device is nearby,
accomplish and the other device has a resource                               the Primary device may fail to recognize
needed to accomplish this task. One device is referred                       the MCP2140, or the Primary device may
to as a Primary device while the other is referred to as                     not recognize either of the devices.
a Secondary device. The distinction between Primary            During NDM, the MCP2140 handles all responses to
device and Secondary device is important because it is         the Primary device (Figure 2-13) without any communi-
the responsibility of the Primary device to provide the        cation with the Host Controller. The Host Controller is
mechanism to recognize other devices. So the Primary           inhibited by the CTS signal of the MCP2140 from
device must first poll for nearby IrDA standard compat-        sending data to the MCP2140.
ible devices and, during this polling, the default baud
rate of 9600 baud is used by both devices.
For example, if you want to print from an IrDA-equipped
laptop to an IrDA-equipped printer, utilizing the IrDA
standard feature, you would first bring your laptop in
range of the printer. In this case, the laptop is the one
that has something to do and the printer has the
resource to do it. Thus, the laptop is called the Primary
device and the printer is the Secondary device. Some
data-capable cellphones have IrDA standard infrared
DS21790A-page 18                                      Preliminary                         2003 Microchip Technology Inc.


                                                                                                     MCP2140
2.14.2       DISCOVERY MODE                                         2.14.3        NORMAL CONNECT MODE (NCM)
Discovery mode allows the Primary device to deter-                  Once discovery has been completed, the Primary
mine the capabilities of the MCP2140 (Secondary                     device and MCP2140 (Secondary device) can freely
device). Discovery mode is entered once the MCP2140                 exchange data.
(Secondary device) has sent a XID response to the Pri-              The MCP2140 uses a hardware handshake to stop the
mary device and the Primary device has completed                    local serial port from sending data when the MCP2140
sending the XIDs and a Broadcast ID. If this sequence               Host UART Receiving buffer is full..
is not completed, a Primary and Secondary device can
stay in NDM indefinitely.                                               Note:    Data loss will result if this hardware
                                                                                 handshake is not observed.
When the Primary device has something to do, it
initiates Discovery, which has two parts. They are:                 Both the Primary device and the MCP2140 (Secondary
                                                                    device) check to make sure that data packets are
• Link initialization
                                                                    received by the other without errors. Even when data is
• Resource determination                                            not required to be sent, the Primary and Secondary
The first step is for the Primary and Secondary devices             devices will still exchange packets to ensure that the
to determine, and then adjust to, each other’s hardware             connection hasn’t, unexpectedly, been dropped. When
capabilities. These capabilities are parameters like:               the Primary device has finished, it transmits the “close
•  Data rate                                                        link” command to the MCP2140 (Secondary device).
                                                                    The MCP2140 will confirm the “close link” command
•  Turnaround time
                                                                    and both the Primary device and the MCP2140 (Sec-
•  Number of packets without a response                             ondary device) will revert to the NDM state.
•  How long to wait before disconnecting
                                                                        Note:    If the NCM mode is unexpectedly termi-
Both the Primary and Secondary devices begin com-                                nated for any reason (including the Primary
munications at 9600 baud, the default baud rate. The                             device not issuing a close link command),
Primary device sends its parameters and the Second-                              the MCP2140 will revert to the NDM state
ary device responds with its parameters. For example,                            approximately 10 seconds after the last
if the Primary device supports all data rates up to                              frame has been received.
115.2 kbaud and the Secondary device only supports
9.6 kbaud, the link will be established at 9.6 kbaud.               It is the responsibility of the Host Controller program to
                                                                    understand the meaning of the data received and how
   Note:     The MCP2140 is limited to a data rate of               the program should respond to it. It’s just as if the data
             9.6 kbaud.                                             were being received by the Host Controller from a
Once the hardware parameters are established, the                   UART.
Primary device must determine if the Secondary device
                                                                    2.14.3.1        Primary Device Notification
has the resources it requires. If the Primary device has
a job to print, it must know if it’s talking to a printer, and      The MCP2140 identifies itself to the Primary device as
not a modem or other device. This determination is                  a modem.
made using the Information Access Service (IAS). The
                                                                        Note:    The MCP2140 identifies itself as a modem
job of the Secondary device is to respond to IAS que-
                                                                                 to ensure that it is identified as a serial
ries made by the Primary device. The Primary device
                                                                                 device with a limited amount of memory.
must ask a series of questions like:
                                                                    However, the MCP2140 is not a modem, and the non-
• What is the name of your service?
                                                                    data circuits are not handled in a modem fashion.
• What is the address of this service?
• What are the capabilities of this device?
When all the Primary device’s questions are answered,
the Primary device can access the service provided by
the Secondary device.
During Discovery mode, the MCP2140 handles all
responses to the Primary device (see Figure 2-13)
without any communication with the Host Controller.
The Host Controller is inhibited by the CTS signal of the
MCP2140 from sending data to the MCP2140.
 2003 Microchip Technology Inc.                           Preliminary                                     DS21790A-page 19


MCP2140
FIGURE 2-13:          HIGH LEVEL MCP2140 CONNECTION SEQUENCE
               Primary Device                                     MCP2140
                                                           (Secondary Device)
 Normal Disconnect Mode (NDM)
                      No IR Activity                          PHACT pin driven Low
                      (for 10 seconds)
                 Send XID Commands
                 (timeslots n, n+1, ...)
            (approximately 70 ms                             PHACT pin driven High
             between XID commands)                            No Response
                                                              XID Response in timeslot y,
                                                              claiming this timeslot, (MCP214X
                 Finish sending XIDs                          always claims timeslot 0)
             (max timeslots - y frames)
                 Broadcast ID                                 No Response to these XIDs
                                                             No Response to Broadcast ID
 Discovery       Send SNRM Command
                 (w/ parameters and
                 connection address)                          UA response with parameters
                                                              using connect address
          Open channel for IAS Queries
                                                             Confirm channel open for IAS
                      Send IAS Queries
                                                             Provide IAS responses
                  Open channel for data
                                                             Confirm channel open for data
 Normal Response Mode (NRM)                                  (MCP2140 DSR pin driven low)
                    Send Data or Status
                                                             Send Data or Status
                    Send Data or Status
                                                             Send Data or Status
                          Shutdown link
                                                             Confirm shutdown
                                                             (back to NDM state)
                      No IR Activity                          PHACT pin driven Low
                      (for 10 seconds)
DS21790A-page 20                         Preliminary               2003 Microchip Technology Inc.


                                                             MCP2140
2.15       References
The IrDA Standards download page can be found at:
      http://www.irda.org/standards/specifications
Some common manufacturers of optical transceivers
are shown in Table 2-6.
TABLE 2-6:         COMMON OPTICAL
                   TRANSCEIVER
                   MANUFACTURERS
     Company          Company Web Site Address
        ®
 Sharp             www.sharpsma.com
 Infineon®         www.infineon.com
         ®
 Agilent           www.agilent.com
 Vishay®/Temic     www.vishay.com
 Rohm              www.rohm.com
 2003 Microchip Technology Inc.                 Preliminary   DS21790A-page 21


MCP2140
NOTES:
DS21790A-page 22 Preliminary  2003 Microchip Technology Inc.


                                                              MCP2140
3.0        DEVELOPMENT TOOLS
An MCP2140 Demo/Development board is planned.
Please check with the Microchip Technology Inc. web
site (www.microchip.com) or your local Microchip sales
office for product availability.
 2003 Microchip Technology Inc.                  Preliminary   DS21790A-page 23


MCP2140
NOTES:
DS21790A-page 24 Preliminary  2003 Microchip Technology Inc.


                                                                                                                                      MCP2140
4.0       ELECTRICAL CHARACTERISTICS
Absolute Maximum Ratings†
Ambient Temperature under bias ........................................................................................................... –40°C to +125°C
Storage Temperature ............................................................................................................................. –65°C to +150°C
Voltage on VDD with respect to VSS ........................................................................................................... -0.3V to +7.5V
Voltage on RESET with respect to VSS ...................................................................................................... -0.3V to +14V
Voltage on all other pins with respect to VSS ................................................................................. –0.3V to (VDD + 0.3V)
Total Power Dissipation (1) ........................................................................................................................................... 1W
Max. Current out of VSS pin .................................................................................................................................. 300 mA
Max. Current into VDD pin ..................................................................................................................................... 250 mA
Input Clamp Current, IIK (VI < 0 or VI > VDD) ................................................................................................................... ±20 mA
Output Clamp Current, IOK (V0 < 0 or V0 > VDD)............................................................................................................. ±20 mA
Max. Output Current sunk by any Output pin.......................................................................................................... 25 mA
Max. Output Current sourced by any Output pin..................................................................................................... 25 mA
   Note 1: Power Dissipation is calculated as follows: P DIS = VDD x {IDD - ∑ IOH} + ∑ {(VDD-VOH) x IOH} + ∑(VOL x IOL)
 †NOTICE:    Stresses above those listed under “Maximum ratings” may cause permanent damage to the device. This
 is a stress rating only and functional operation of the device at those or any other conditions above those indicated in
 the operational listings of this specification is not implied. Exposure to maximum rating conditions for extended periods
 may affect device reliability.
 2003 Microchip Technology Inc.                                  Preliminary                                                                   DS21790A-page 25


MCP2140
FIGURE 4-1:      VOLTAGE-FREQUENCY GRAPH, -40°C ≤ TA ≤ +85°C
           6.0
           5.5
           5.0
           4.5
    VDD
   (Volts)
           4.0
           3.5
           3.0
           2.5
               0        4           8      10     12         16                 20
                                7.3728
                                     Frequency (MHz)
DS21790A-page 26                   Preliminary                 2003 Microchip Technology Inc.


                                                                                                MCP2140
4.1     DC Characteristics
                                               Electrical Characteristics:
DC Specifications                              Standard Operating Conditions (unless otherwise specified)
                                               Operating Temperature: -40°C ≤ TA ≤ +85°C (industrial)
Param.
            Sym           Characteristic         Min     Typ(1)    Max      Units                Conditions
  No.
 D001       VDD      Supply Voltage               3.0      —        5.5        V      See Figure 4-1
 D002       VDR      RAM Data Retention           2.0      —        —          V      Device Oscillator/Clock stopped
                     Voltage (2)
 D003       VPOR     VDD Start Voltage to         —       VSS       —          V
                     ensure Power-on Reset
 D004       SVDD     VDD Rise Rate to            0.05      —        —       V/ms
                     ensure Power-on Reset
 D010        IDD     Supply Current (3, 4)        —        —        2.2      mA       VDD = 3.0V, PHACT = H
 D010A                                            —        25       60       µA       VDD = 3.0V, PHACT = L
   Note 1: Data in the Typical (“Typ”) column is based on characterization results at 25°C. This data is for design
            guidance only and is not tested.
         2: This is the limit to which VDD can be lowered without losing RAM data.
         3: When the device is in IR communication (PHACT pin is high), supply current is mainly a function of the
            operating voltage and frequency. Pin loading, pin rate and temperature have an impact on the current con-
            sumption.The test conditions for all IDD measurements are made when device is:
            OSC1 = external square wave, from rail-to-rail; all input pins pulled to VSS, RXIR = VDD, RESET = VDD;
         4: When the device is in low power mode (PHACT pin is low), current is measured with all input pins tied to
            VDD or VSS and the output pins driving a high or low level into infinite impedance.
 2003 Microchip Technology Inc.                     Preliminary                                        DS21790A-page 27


MCP2140
4.1    DC Characteristics (Continued)
                                                Electrical Characteristics:
                                                Standard Operating Conditions (unless otherwise specified)
DC Specifications
                                                Operating temperature: -40°C ≤ TA ≤ +85°C (industrial)
                                                Operating voltage VDD range as described in DC spec Section 4.1.
 Param
          Sym              Characteristic            Min        Typ     Max     Units          Conditions
   No.
                  Input Low Voltage
           VIL    Input pins
  D030               with TTL buffer                 VSS         —      0.8V      V    4.5V ≤ V DD ≤ 5.5V
 D030A               (TX, RI, DTR, RTS, and CD)      VSS         —   0.15 VDD     V    otherwise
  D032            RESET                              VSS         —    0.2 VDD     V
  D033            OSC1                               VSS         —    0.3 VDD     V
                  Input High Voltage
          VIH     Input pins                                     —
  D040               with TTL buffer                  2.0        —      VDD       V    4.5V ≤ V DD ≤ 5.5V
 D040A               (TX, RI, DTR, RTS, and CD)   0.25 VDD       —      VDD       V    otherwise
                                                     + 0.8
  D042            RESET                            0.8 VDD       —      VDD       V
  D043            OSC1                             0.7 VDD       —      VDD       V
                  Input Leakage Current
                  (Notes 1, 2)
  D060      IIL   Input pins                          —          —       ±1      µA    VSS ≤ VPIN ≤ VDD, pin at
                                                                                       high-impedance.
  D061            RESET                               —          —       ±5      µA    VSS ≤ VPIN ≤ VDD
  D063            OSC1                                —          —       ±5      µA    VSS ≤ VPIN ≤ VDD
                  Output Low Voltage
  D080    VOL     TXIR, RX, DSR, and CTS pins         —          —       0.6      V    IOL = 8.5 mA, VDD = 4.5V
  D083            OSC2                                —          —       0.6      V    IOL = 1.6 mA, VDD = 4.5V
                  Output High Voltage (Note 2)
  D090    VOH     TXIR, RX, DSR, and CTS pins     VDD - 0.7      —       —        V    IOH = -3.0 mA, VDD = 4.5V
  D092            OSC2                            VDD - 0.7      —       —        V    IOH = -1.3 mA, VDD = 4.5V
                  Capacitive Loading Specs on
                  Output Pins
  D100   COSC2 OSC2 pin                               —          —       15      pF    When external clock is
                                                                                       used to drive OSC1.
  D101    CIO     All Input or Output pins            —          —       50      pF
  Note 1: The leakage current on the RESET pin is strongly dependent on the applied voltage level. The specified
           levels represent normal operating conditions. Higher leakage current may be measured at different input
           voltages.
       2: Negative current is defined as coming out of the pin.
DS21790A-page 28                                Preliminary                          2003 Microchip Technology Inc.


                                                                                                MCP2140
4.2        Timing Parameter Symbology and Load Conditions
The timing parameter symbols have been created following one of the following formats:
4.2.1        TIMING CONDITIONS
The temperature and voltages specified in Table 4-2 apply to all timing specifications, unless otherwise noted.
Figure 4-2 specifies the load conditions for the timing specifications.
TABLE 4-1:          SYMBOLOGY
 1. TppS2ppS                                                   2. TppS
 T
    F          Frequency                                          T          Time
    E          Error
    Lowercase letters (pp) and their meanings:
 pp
    io         Input or Output pin                                osc        Oscillator
    rx         Receive                                            tx         Transmit
    bitclk     RX/TX BITCLK                                       RST        Reset
    drt        Device Reset Timer
    Uppercase letters and their meanings:
 S
    F          Fall                                               P          Period
    H          High                                               R          Rise
    I          Invalid (high-impedance)                           V          Valid
    L          Low                                                Z          High-impedance
TABLE 4-2:          AC TEMPERATURE AND VOLTAGE SPECIFICATIONS
                                  Electrical Characteristics:
                                  Standard Operating Conditions (unless otherwise stated):
 AC Specifications
                                  Operating temperature: -40°C ≤ TA ≤ +85°C (industrial)
                                  Operating voltage VDD range as described in DC spec Section 4.1.
FIGURE 4-2:             LOAD CONDITIONS FOR DEVICE TIMING SPECIFICATIONS
             Pin                  CL         CL = 50 pF for all pins except OSC2
                                                   15 pF for OSC2 when external clock is used to drive OSC1
                              VSS
 2003 Microchip Technology Inc.                      Preliminary                                      DS21790A-page 29


MCP2140
4.3     Timing Diagrams and Specifications
FIGURE 4-3:           EXTERNAL CLOCK TIMING
                       Q4               Q1            Q2            Q3             Q4               Q1
      OSC1
                                         1                                     4                 4
                                                                 3       3
                                                             2
TABLE 4-3:       EXTERNAL CLOCK TIMING REQUIREMENTS
                                               Electrical Characteristics:
                                               Standard Operating Conditions (unless otherwise specified):
 AC Specifications
                                               Operating Temperature: -40°C ≤ TA ≤ +85°C (industrial)
                                               Operating Voltage VDD range is described in Section 4.1
 Param.
          Sym            Characteristic            Min       Typ(1)     Max      Units            Conditions
  No.
    1     TOSC    External CLKIN Period (2, 3)   90.422        —      90.422      ns     Device Operation
                                                 90.422        —         —        ns     Low Power mode
                                                                                         (PHACT drive Low)
                  Oscillator Period (2)          90.422        —      90.422      ns
   1A     FOSC External CLKIN                    7.3728      7.3728   7.3728     MHz
                  Frequency (2, 3)
                  Oscillator Frequency (2)       7.3728        —      7.3728     MHz
   1B     FERR    Error in Frequency               —           —       ± 0.01     %
   1C     ECLK    External Clock Error             —           —       ± 0.01     %
    4    TosR, Clock in (OSC1)                     —           —         15       ns
          TosF Rise or Fall Time
  Note 1: Data in the Typical (“Typ”) column is at 5V, 25°C unless otherwise stated. These parameters are for design
           guidance only and are not tested.
        2: All specified values are based on oscillator characterization data under standard operating conditions.
           Exceeding these specified limits may result in unstable oscillator operation and/or higher than expected
           current consumption. When an external clock input is used, the “max” cycle time limit is “DC” (no clock) for
           all devices.
        3: A duty cycle of no more than 60% (High time/Low time or Low time/High time) is recommended for external
           clock inputs.
DS21790A-page 30                                  Preliminary                          2003 Microchip Technology Inc.


                                                                                            MCP2140
FIGURE 4-4:            OUTPUT WAVEFORM
                             Q4                       Q1                     Q2                       Q3
       OSC1
   Output Pin          Old Value                                                                   New Value
                                                  20, 21
         Note:     Refer to Figure 4-2 for load conditions.
TABLE 4-4:        OUTPUT TIMING REQUIREMENTS
                                                    Electrical Characteristics:
                                                    Standard Operating Conditions (unless otherwise specified):
 AC Specifications
                                                    Operating Temperature: -40°C ≤ TA ≤ +85°C (industrial)
                                                    Operating Voltage VDD range is described in Section 4.1
 Param.
            Sym              Characteristic             Min      Typ(1)   Max      Units          Conditions
   No.
   20        ToR     RX and TXIR pin rise time (2)       —         10       40      ns
   21        ToF     RX and TXIR pin fall time (2)       —         10       40      ns
   Note 1: Data in the Typical (“Typ”) column is at 5V, 25°C unless otherwise stated.
         2: See Figure 4-2 for loading conditions.
 2003 Microchip Technology Inc.                    Preliminary                                    DS21790A-page 31


MCP2140
FIGURE 4-5:          RESET AND DEVICE RESET TIMING
          VDD
      RESET
                                                                    30
        Reset
    Detected
                           33
       PWRT
     Timeout                          32
         OSC
      Timeout
      Internal
      RESET
                                                        34                                34
   Output Pin
TABLE 4-5:       RESET AND DEVICE RESET REQUIREMENTS
                                                  Electrical Characteristics:
                                                  Standard Operating Conditions (unless otherwise specified):
 AC Specifications
                                                  Operating Temperature: -40°C ≤ TA ≤ +85°C (industrial)
                                                  Operating Voltage VDD range is described in Section 4.1
 Param.
           Sym            Characteristic             Min     Typ(1)    Max    Units           Conditions
  No.
   30     TRSTL RESET Pulse Width (low)             2000       —        —      ns    VDD = 5.0V
   32      TOST  Oscillator Start-up Timer Period   1024       —      1024    TOSC
   33     TPWRT Power up Timer Period                28       72       132     ms    VDD = 5.0V
   34      TIOZ  Output High-impedance from          —         —        2      µs
                 RESET Low or device Reset
  Note 1: Data in the Typical (“Typ”) column is at 5V, 25°C unless otherwise stated.
DS21790A-page 32                                  Preliminary                         2003 Microchip Technology Inc.


                                                                                              MCP2140
FIGURE 4-6:            UART ASYNCHRONOUS TRANSMISSION WAVEFORM
                                        Start Bit           Data Bit            Data Bit         Data Bit
                                         IR100               IR100              IR100             IR100
       TX pin
                                                                IR103
                                            IR103
        Note:     Refer to Figure 4-2 for load conditions.
TABLE 4-6:         UART ASYNCHRONOUS TRANSMISSION REQUIREMENTS
                                                    Electrical Characteristics:
                                                    Standard Operating Conditions (unless otherwise specified):
AC Specifications
                                                    Operating Temperature: -40°C ≤ TA ≤ +85°C (industrial)
                                                    Operating Voltage VDD range is described in Section 4.1
Param.
           Sym              Characteristic              Min        Typ      Max      Units         Conditions
  No.
 IR100    TTXBIT Transmit Baud rate                     768         —       768      TOSC   BAUD2:BAUD0 = 00
 IR101    ETXBIT Transmit (TX pin) Baud rate             —          —        ±2       %
                   Error (into MCP2140)
 IR102 ETXIRBIT Transmit (TXIR pin) Baud rate            —          —        ±1       %
                   Error (out of MCP2140) (1)
 IR103    TTXRF TX pin rise time and fall time           —          —        25       ns
   Note 1: This error is not additive to IR101 parameter.
 2003 Microchip Technology Inc.                    Preliminary                                     DS21790A-page 33


MCP2140
FIGURE 4-7:          UART ASYNCHRONOUS RECEIVE TIMING
                                       Start Bit            Data Bit           Data Bit            Data Bit
                                         IR110               IR110              IR110               IR110
       RX pin
                                                               IR113
                                           IR113
        Note:  Refer to Figure 4-2 for load conditions.
TABLE 4-7:       UART ASYNCHRONOUS RECEIVE REQUIREMENTS
                                                   Electrical Characteristics:
                                                   Standard Operating Conditions (unless otherwise specified):
AC Specifications
                                                   Operating Temperature: -40°C ≤ TA ≤ +85×C (industrial)
                                                   Operating Voltage VDD range is described in Section 4.1
Param.
          Sym                   Characteristic                   Min   Typ     Max Units            Conditions
  No.
 IR110   TRXBIT Receive Baud Rate                                768    —      768    TOSC BAUD2:BAUD0 = 00
 IR111   ERXBIT Receive (RXPD and RXPDREF pin                     —     —       ±1      %
                 detection) Baud rate Error (into MCP2140)
 IR112   ERXBIT Receive (RX pin) Baud rate Error (out of          —     —       ±1      %
                 MCP2140) (1)
 IR113   TTXRF RX pin rise time and fall time                     —     —       25      ns
  Note 1: This error is not additive to the IR111 parameter.
DS21790A-page 34                                   Preliminary                           2003 Microchip Technology Inc.


                                                                                           MCP2140
FIGURE 4-8:            TXIR WAVEFORMS
                      Start Bit      Data bit 7  Data bit 6   Data bit 5     Data bit ...
                      IR100A
     BITCLK
                              IR122        IR122       IR122         IR122         IR122        IR122
       TXIR
                                 IR121
                          0              1          0              0             1            0
TABLE 4-8:        TXIR REQUIREMENTS
                                                 Electrical Characteristics:
                                                 Standard Operating Conditions (unless otherwise specified):
AC Specifications
                                                 Operating Temperature: -40°C ≤ TA ≤ +85°C (industrial)
                                                 Operating Voltage VDD range is described in Section 4.1
 Param.
             Sym              Characteristic        Min        Typ       Max       Units         Conditions
   No.
 IR100A     TTXIRBIT   Transmit Baud Rate           768         —        768       TOSC   BAUD = 9600
  IR121    TTXIRPW     TXIR pulse width              24         —         24       TOSC
  IR122     TTXIRP     TXIR bit period (1)           —          16        —       TBITCLK
   Note 1: TBITCLK = TTXBIT/16.
 2003 Microchip Technology Inc.                 Preliminary                                     DS21790A-page 35


MCP2140
FIGURE 4-9:          RXPD/RXPDREF WAVEFORMS
                  Start Bit      Data bit 7    Data bit 6    Data bit 5    Data bit ...
                   IR110A
    BITCLK
      RXPD
  RXPDREF
                      IR131A
                   IR131B        IR131B         IR131B        IR131B        IR131B          IR131B
                       0             1              0             0             1               0
                   Start Bit      Data bit 7     Data bit 6   Data bit 5    Data bit ...
        RXPD                                                     RXPD
    RXPDREF                                                  RXPDREF
                 IRD160                                                                      IRD161
                                                                           IRD160
                                IRD161
TABLE 4-9:       RXPD/RXPDREF REQUIREMENTS
                                                  Electrical Characteristics:
                                                  Standard Operating Conditions (unless otherwise specified):
AC Specifications
                                                  Operating Temperature: -40°C ≤ TA ≤ +85°C (industrial)
                                                  Operating Voltage VDD range is described in Section 4.1
 Param.
           Sym            Characteristic              Min       Typ       Max       Units           Conditions
   No.
 IR110A TRXPDBIT Receive Baud Rate                    768        —        768       TOSC     BAUD = 9600
 IR131A TRXPDPW RXPD pulse width                      0.01       —        1.5          µs
  IR132  TRXPDP RXPD/RXPDREF bit period (1)            —         16        —      TBITCLK
IRD060 VRXPDD∆ Quiescent Delta Voltage                 20        —         —          mV
                  between RXPD and
                  RXPDREF
IRD061 VRXPDE IR Pulse Detect Delta Voltage            30        —         —          mV     RXPD signal must cross
                  (RXPD to RXPDREF)                                                          RXPDREF signal level
  IR133   TRESP   Response Time (2)                    —         —       400 *         ns
* These parameters characterized but not tested.
   Note 1: TBITCLK = TRXBIT/16.
        2: Response time measured with RXPDREF at (VDD - 1.5V)/2, while RXPD transitions from VSS to VDD.
DS21790A-page 36                                 Preliminary                             2003 Microchip Technology Inc.


                                                                                         MCP2140
FIGURE 4-10:           LOW POWER WAVEFORM
   OSC1
     RXPD
 RXPDREF
                                                              IR140
TABLE 4-10:       LOW POWER REQUIREMENTS
                                                 Electrical Characteristics:
                                                 Standard Operating Conditions (unless otherwise specified):
AC Specifications
                                                 Operating Temperature: -40°C ≤ TA ≤ +85°C (industrial)
                                                 Operating Voltage VDD range is described in Section 4.1
 Param.
             Sym              Characteristic         Min        Typ       Max    Units         Conditions
  No.
 IR140    TRXPD2OSC RXPD pulse edge to valid          —          —         4      ms
                       device oscillator (1)
   Note 1: At 9600 Baud, 4 ms is 4 bytes (of the 11 byte repeated SOF character). This allows the MCP2140 to
            recognize a SOF character and properly receive the IR packet.
 2003 Microchip Technology Inc.                Preliminary                                     DS21790A-page 37


MCP2140
NOTES:
DS21790A-page 38 Preliminary  2003 Microchip Technology Inc.


                                                     MCP2140
5.0      DC AND AC CHARACTERISTICS GRAPHS AND TABLES
Not available at this time.
 2003 Microchip Technology Inc. Preliminary           DS21790A-page 39


MCP2140
NOTES:
DS21790A-page 40 Preliminary  2003 Microchip Technology Inc.


                                                                                                 MCP2140
6.0     PACKAGING INFORMATION
6.1     Package Marking Information
                 18-Lead PDIP (300 mil)                                     Example:
                     XXXXXXXXXXXXXXXXX                                                MCP2140-I/P
                     XXXXXXXXXXXXXXXXX                                         XXXXXXXXXXXXXXXXX
                     XXXXXYYWWNNN                                              XXXXX0352987
                 18-Lead SOIC (300 mil)                                     Example:
                     XXXXXXXXXXXXXXXXX                                              MCP2140-I/SO
                     XXXXXXXXXXXXXXXXX                                         XXXXXXXXXXXXXXXXX
                     XXXXXXXXXXXXXXXXX                                         XXXXXXXXXXXXXXXXX
                     XXXXXYYWWNNN                                              XXXXX0352987
                 20-Lead SSOP (209 mil, 5.30 mm)                            Example:
                      XXXXXXXXXXX                                              MCP2140
                      XXXXXXXXXXX                                              I/SS
                        XXXYYWWNNN                                               XXX0352987
                Legend:      XX...X  Customer specific information*
                            YY       Year code (last 2 digits of calendar year)
                            WW       Week code (week of January 1 is week ‘01’)
                            NNN      Alphanumeric traceability code
                Note:    In the event the full Microchip part number cannot be marked on one line, it will
                         be carried over to the next line thus limiting the number of available characters
                         for customer specific information.
    *    Standard device marking consists of Microchip part number, year code, week code and traceability code.
 2003 Microchip Technology Inc.                     Preliminary                                        DS21790A-page 41


MCP2140
18-Lead Plastic Dual In-line (P) – 300 mil (PDIP)
                           E1
                                            D
                                        2
                n                       1                                                                         α
                            E                                                                                           A2
                                                         A
                                            c                                                                           L
                                                         A1
                                                                             B1
                       β
                                                                            B                                 p
                            eB
                                              Units               INCHES*                              MILLIMETERS
                                   Dimension Limits    MIN          NOM           MAX           MIN          NOM       MAX
           Number of Pins                       n                          18                                      18
           Pitch                                p                        .100                                    2.54
           Top to Seating Plane                 A          .140          .155         .170         3.56          3.94     4.32
           Molded Package Thickness            A2          .115          .130         .145         2.92          3.30     3.68
           Base to Seating Plane               A1          .015                                    0.38
           Shoulder to Shoulder Width          E           .300          .313         .325         7.62          7.94     8.26
           Molded Package Width                E1          .240          .250         .260         6.10          6.35     6.60
           Overall Length                      D           .890          .898         .905        22.61         22.80    22.99
           Tip to Seating Plane                 L          .125          .130         .135         3.18          3.30     3.43
           Lead Thickness                       c          .008          .012         .015         0.20          0.29     0.38
           Upper Lead Width                    B1          .045          .058         .070         1.14          1.46     1.78
           Lower Lead Width                    B           .014          .018         .022         0.36          0.46     0.56
           Overall Row Spacing            §    eB          .310          .370         .430         7.87          9.40    10.92
           Mold Draft Angle Top                 α             5            10           15            5            10       15
           Mold Draft Angle Bottom              β             5            10           15            5            10       15
           * Controlling Parameter
           § Significant Characteristic
           Notes:
           Dimensions D and E1 do not include mold flash or protrusions. Mold flash or protrusions shall not exceed
           .010” (0.254mm) per side.
           JEDEC Equivalent: MS-001
           Drawing No. C04-007
DS21790A-page 42                                         Preliminary                                        2003 Microchip Technology Inc.


                                                                                                                    MCP2140
18-Lead Plastic Small Outline (SO) – Wide, 300 mil (SOIC)
                                         E
                     p
                                         E1
                                                             D
                                                        2
             B         n                                1
                                            h
                                                                                                                       α
                          45°
              c
                                                                            A                                               A2
                                                                  φ
                              β                             L                 A1
                                                Units               INCHES*                              MILLIMETERS
                                     Dimension Limits    MIN          NOM          MAX           MIN          NOM        MAX
            Number of Pins                       n                           18                                     18
            Pitch                                p                        .050                                    1.27
            Overall Height                       A          .093          .099         .104          2.36         2.50      2.64
            Molded Package Thickness             A2         .088           .091        .094          2.24         2.31      2.39
            Standoff §                           A1         .004          .008         .012          0.10         0.20      0.30
            Overall Width                        E          .394          .407         .420        10.01         10.34     10.67
            Molded Package Width                 E1          .291         .295         .299          7.39         7.49      7.59
            Overall Length                       D          .446          .454         .462        11.33         11.53     11.73
            Chamfer Distance                     h          .010          .020         .029          0.25         0.50      0.74
            Foot Length                          L          .016          .033         .050          0.41         0.84      1.27
            Foot Angle                            φ             0             4            8            0            4         8
            Lead Thickness                        c         .009           .011        .012          0.23         0.27      0.30
            Lead Width                           B          .014          .017         .020          0.36         0.42      0.51
            Mold Draft Angle Top                 α              0            12          15             0           12        15
            Mold Draft Angle Bottom               β             0            12          15             0           12        15
            * Controlling Parameter
            § Significant Characteristic
            Notes:
            Dimensions D and E1 do not include mold flash or protrusions. Mold flash or protrusions shall not exceed
            .010” (0.254mm) per side.
            JEDEC Equivalent: MS-013
            Drawing No. C04-051
 2003 Microchip Technology Inc.                           Preliminary                                                    DS21790A-page 43


MCP2140
20-Lead Plastic Shrink Small Outline (SS) – 209 mil, 5.30 mm (SSOP)
                                         E
                                         E1
                     p
                                                                   D
                B                                           2
                     n                                      1
                                                                                                                            α
                 c
                                                                             A                                             A2
                                                                   φ
                                                                   L         A1
                        β
                                                Units                INCHES*                             MILLIMETERS
                                     Dimension Limits    MIN           NOM         MAX           MIN           NOM     MAX
             Number of Pins                       n                         20                                      20
             Pitch                                p                       .026                                    0.65
             Overall Height                      A           .068         .073          .078         1.73         1.85     1.98
             Molded Package Thickness            A2          .064         .068          .072         1.63         1.73     1.83
             Standoff §                          A1          .002         .006          .010         0.05         0.15     0.25
             Overall Width                       E           .299         .309          .322         7.59         7.85     8.18
             Molded Package Width                E1           .201        .207          .212         5.11         5.25     5.38
             Overall Length                      D           .278         .284          .289         7.06         7.20     7.34
             Foot Length                          L          .022         .030          .037         0.56         0.75     0.94
             Lead Thickness                       c          .004         .007          .010         0.10         0.18     0.25
             Foot Angle                           φ              0           4             8         0.00       101.60  203.20
             Lead Width                          B           .010         .013          .015         0.25         0.32     0.38
             Mold Draft Angle Top                 α              0           5            10            0            5       10
             Mold Draft Angle Bottom              β              0           5            10            0            5       10
            * Controlling Parameter
            § Significant Characteristic
            Notes:
            Dimensions D and E1 do not include mold flash or protrusions. Mold flash or protrusions shall not exceed
            .010” (0.254mm) per side.
            JEDEC Equivalent: MO-150
            Drawing No. C04-072
DS21790A-page 44                                         Preliminary                                       2003 Microchip Technology Inc.


                                                                                      MCP2140
APPENDIX A:             REVISION HISTORY                APPENDIX B:            NETWORK
                                                                               LAYERING
Revision A
                                                                               REFERENCE MODEL
• This is a new data sheet
                                                        Figure B-1 shows the ISO Network Layering Reference
                                                        Model. The shaded areas are implemented by the
                                                        MCP2140, while the cross-hatched area is imple-
                                                        mented by an infrared transceiver. The unshaded
                                                        areas should be implemented by the Host Controller.
FIGURE B-1:        ISO REFERENCE LAYER MODEL
                OSI REFERENCE LAYERS
                                                                    Has to be implemented in Host
                          Application                               Controller firmware
                                                                    (such as a PICmicro®
                         Presentation
                                                                    microcontroller)
                            Session
                          Transport                                  Regions implemented
                                                                     by the MCP2140
                            Network
                       Data Link Layer                               Regions implemented
                                                                     by the Optical Transceiver logic
           LLC (Logical Link Control)
           Acceptance Filtering                                            Supervisor
           Overload Notification
           Recovery Management
           MAC (Medium Access Control)
           Data Encapsulation/Decapsulation
           Frame Coding (stuffing, destuffing)
                                                                          Fault
           Medium Access Management
                                                                          confinement
           Error Detection
                                                                          (MAC-LME)
           Error Signalling
           Acknowledgment
           Serialization/Deserialization
                        Physical Layer
           PLS (Physical Signalling)
           Bit Encoding/Decoding
                                                                          Bus Failure
           Bit Timing
                                                                          management
           Synchronization
                                                                          (PLS-LME)
           PMA (Physical Medium Attachment)
           Driver/Receiver Characteristics
           MDI (Medium Dependent Interface)
           Connectors
 2003 Microchip Technology Inc.               Preliminary                                  DS21790A-page 45


MCP2140
The IrDA Standard specifies the following protocols:           B.1        IrDA STANDARD DATA
• Physical Signaling Layer (PHY)                                          PROTOCOLS SUPPORTED BY
• Link Access Protocol (IrLAP)                                            MCP2140
• Link Management Protocol/Information Access                  The MCP2140 supports these required IrDA standard
  Service (IrLMP/IAS)                                          protocols:
The IrDA data lists optional protocols. They are:              • Physical Signaling Layer (PHY)
• Tiny TP                                                      • Link Access Protocol (IrLAP)
• IrTran-P                                                     • Link Management Protocol/Information Access
• IrOBEX                                                         Service (IrLMP/IAS)
• IrLAN                                                        The MCP2140 also supports some of the optional pro-
• IrCOMM                                                       tocols for IrDA data. The optional protocols that the
• IrMC                                                         MCP2140 implements are:
• IrDA Lite                                                    • Tiny TP
Figure B-2 shows the IrDA data protocol stack and              • IrCOMM
which components are implemented by the MCP2140.
                                                               B.1.1         PHYSICAL SIGNAL LAYER (PHY)
FIGURE B-2:          IRDA DATA - PROTOCOL                      The MCP2140 provides the following Physical Signal
                     STACKS                                    Layer specification support:
                                                               • Bidirectional communication
    IrTran-P     IrObex IrLan IrComm      (1)    IrMC          • Data Packets are protected by a CRC
                                                                 - 16-bit CRC for speeds up to 115.2 kbaud
    LM-IAS         Tiny Transport Protocol (Tiny TP)             Note: MCP2140 supports 9600 Baud only.
                                                               • Data Communication Rate
           IR Link Management - Mux (IrLMP)                      - 9600 baud minimum data rate (with primary
                                                                    speed/cost steps of 115.2 kbaud
             IR Link Access Protocol (IrLAP)                     Note:      MCP2140 supports 9600 Baud only.
                                                               The following Physical Layer Specification is depen-
      Asynchronous        Synchronous Synchronous              dant on the optical transceiver logic used in the
      Serial IR (2, 3)      Serial IR        4 PPM             application. The specification states:
   (9600 -115200 b/s) (1.152 Mb/s)          (4 Mb/s)
                                                               • Communication Range, which sets the end user
                                                                 expectation for discovery, recognition and
                                                                 performance.
                                                                 - Continuous operation from contact to at least
     Supported by               Optional IrDA data                  1 meter (typically 2 meters can be reached)
     the MCP2140                protocols not
                                supported by                     - A low power specification reduces the objec-
                                the MCP2140                         tive for operation from contact to at least
                                                                    20 cm (low power and low power) or 30 cm
  Note 1: The MCP2140 implements the 9-wire                         (low power and standard power)
              “cooked” service class serial replicator.
          2: The MCP2140 is fixed at 9600 Baud.
          3: An optical transceiver is required.
DS21790A-page 46                                      Preliminary                         2003 Microchip Technology Inc.


                                                                                                 MCP2140
B.1.2        IrLAP                                              Figure B-4 shows how the IrLAP frame is organized.
                                                                The frame is preceded by some number of Beginning
The IrLAP protocol provides:                                    of Frame characters (BOFs). The value of the BOF is
• Management of communication processes on the                  generally 0xC0, but 0xFF may be used if the last BOF
   link between devices                                         character is a 0xC0. The purpose of multiple BOFs is to
• A device-to-device connection for the reliable,               give the other station some warning that a frame is
   ordered transfer of data                                     coming.
• Device discover procedures                                    The IrLAP frame begins with an address byte (“A”
• Hidden node handling. 115.2 kbaud                             field), then a control byte (“C” field). The control byte is
                                                                used to differentiate between different types of frames
   Note:    Not supported by MCP2140.
                                                                and is also used to count frames. Frames can carry sta-
Figure B-3 identifies the key parts and hierarchy of the        tus, data or commands. The IrLAP protocol has a com-
IrDA protocols. The bottom layer is the Physical layer,         mand syntax of it’s own. These commands are part of
IrPHY. This is the part that converts the serial data to        the control byte. Lastly, IrLAP frames carry data. This
and from pulses of IR light. IR transceivers can’t trans-       data is the information (or “I”) field. The integrity of the
mit and receive at the same time. The receiver has to           frame is ensured with a 16-bit CRC, referred to as the
wait for the transmitter to finish sending. This is some-       Frame Check Sequence (FCS). The 16-bit CRC value
times referred to as a “Half-Duplex” connection. The IR         is transmitted LSB first. The end of the frame is marked
Link Access Protocol (IrLAP) provides the structure for         with an EOF character, which is always a 0xC1. The
packets (or “frames”) of data to emulate data that would        frame structure described here is used for all versions
normally be free to stream back and forth.                      of IrDA protocols used for serial wire replacement for
                                                                speeds up to 115.2 kbaud.
FIGURE B-3:         IrDA STANDARD PROTOCOL
                                                                    Note 1: The         MCP2140          only    supports
                    LAYERS                                                    communication baud rate of 9600 baud.
          Host O.S. or Application                                         2: Another IrDA standard that is entering
                                                                              into general usage is IR Object Exchange
                  IrCOMM                                                      (IrOBEX). This standard is not used for
                                           Protocols                          serial connection emulation.
               IrLMP   –   IAS             resident in
                                           MCP2140                         3: IrDA communication standards faster
                    IrLAP                                                     than 115.2 kbaud use a different CRC
                                                                              method and physical layer.
                                          IR pulses             FIGURE B-4:         IrLAP FRAME
                    IrPHY                 transmitted
                                          and
                                          received                         X BOFs BOF A C I FCS EOF
                                                                                                       2
                                                                           (1+N) of C0h payload bytes C1h
                                                                In addition to defining the frame structure, IrLAP pro-
                                                                vides the “housekeeping” functions of opening, closing
                                                                and maintaining connections. The critical parameters
                                                                that determine the performance of the link are part of
                                                                this function. These parameters control how many
                                                                BOFs are used, identify the speed of the link, how fast
                                                                either party may change from receiving to transmitting,
                                                                etc. IrLAP has the responsibility of negotiating these
                                                                parameters to the highest common set so that both
                                                                sides can communicate as quickly and reliably as
                                                                possible.
 2003 Microchip Technology Inc.                       Preliminary                                       DS21790A-page 47


MCP2140
B.1.3        IrLMP                                             B.1.4         LINK MANAGEMENT -
                                                                             INFORMATION ACCESS SERVICE
The IrLMP protocol provides:
                                                                             (LM-IAS)
• Multiplexing of the IrLAP layer. This allows
   multiple channels above an IrLAP connection.                Each LM-IAS entity maintains an information database
• Protocol and service discovery. This is                      to provide:
   accomplished via the Information Access Service             • Information on services for other devices that
   (IAS).                                                         contain the IrDA standard feature (Discovery)
When two devices that contain the IrDA standard fea-           • Information on services for the device itself
ture are connected, there is generally one device that         • Remote accessing of another device’s information
has something to do and the other device that has the             base
resource to do it. For example, a laptop may have a job        This is required so that clients on a remote device can
to print and an IrDA standard compatible printer has the       find configuration information needed to access a
resources to print it. In IrDA standard terminology, the       service.
laptop is a Primary device and the printer is the Sec-
ondary device. When these two devices connect, the             B.1.5         TINY TP
Primary device must determine the capabilities of the
Secondary device to determine if the Secondary device          Tiny TP provides the flow control on IrLMP connec-
is capable of doing the job. This determination is made        tions. An optional service of Segmentation and
by the Primary device asking the Secondary device a            Reassembly can be handled.
series of questions. Depending on the answers to
these questions, the Primary device may or may not             B.1.6         IRCOMM
elect to connect to the Secondary device.                      IrCOMM provides the method to support serial and par-
The queries from the Primary device are carried to the         allel port emulation. This is useful for legacy COM
Secondary device using IrLMP. The responses to these           applications, such as printers and modem devices.
queries can be found in the Information Access Service         The IrCOMM standard is a syntax that allows the Pri-
(IAS) of the Secondary device. The IAS is a list of the        mary device to consider the Secondary device a serial
resources of the Secondary device. The Primary                 device. IrCOMM allows for emulation of serial or
device compares the IAS responses with its require-            parallel (printer) connections of various capabilities.
ments and then makes the decision if a connection
should be made.                                                   Note:     The MCP2140 supports the 9-wire
                                                                            “cooked” service class of IrCOMM. Other
                                                                            service classes supported by IrCOMM are
                                                                            shown in Figure B-5.
FIGURE B-5:         IRCOMM SERVICE CLASSES
                                                 IrCOMM Services
                  Uncooked Services                                             Cooked Services
      Parallel                           Serial                 Parallel                                 Serial
       IrLPT                          3-wire Raw              Centronics                             3-wire Cooked
                                                              IEEE 1284                              9-wire Cooked
               Supported by MCP2140
DS21790A-page 48                                    Preliminary                           2003 Microchip Technology Inc.


                                                                 MCP2140
B.1.7        OTHER OPTIONAL IrDA DATA
             PROTOCOLS
Other IrDA data protocols have been developed to spe-
cific application requirements. These IrDA data proto-
cols are briefly described in the following subsections.
For additional information, please refer to the IrDA web
site (www.IrDA.org).
B.1.7.1        IrTran-P
IrTran-P provides the protocol to exchange images with
digital image capture devices/cameras.
   Note:     Not supported by MCP2140.
B.1.7.2        IrOBEX
IrOBEX provides OBject EXchange services. This is
similar to HTTP.
   Note:     Not supported by MCP2140.
B.1.7.3        IrLAN
IrLAN describes a protocol to support IR wireless
access to a Local Area Network (LAN).
   Note:     Not supported by MCP2140.
B.1.7.4        IrMC
IrMC describes how mobile telephony and communica-
tion devices can exchange information. This informa-
tion includes phone book, calender and message data.
Also how call control and real-time voice are handled
(RTCON).
   Note:     Not supported by MCP2140.
B.1.7.5        IrDA Lite
IrDA Lite describes how to reduce the application code
requirements, while maintaining compatibility with the
full implementation.
   Note:     Not supported by MCP2140.
 2003 Microchip Technology Inc.                     Preliminary   DS21790A-page 49


MCP2140
APPENDIX C:              HOW DEVICES                            tant (PDA), the PDA that supports the IrDA standard
                                                                feature would be the Primary device and the cell phone
                         CONNECT                                would be the Secondary device.
When two devices implementing the IrDA standard fea-            When a Primary device polls for another device, a
ture establish a connection using the IrCOMM protocol,          nearby Secondary device may respond. When a Sec-
the process is analogous to connecting two devices              ondary device responds, the two devices are defined to
with serial ports using a cable. This is referred to as a       be in the Normal Disconnect Mode (NDM) state. NDM
“point-to-point” connection. This connection is limited         is established by the Primary device broadcasting a
to half-duplex operation because the IR transceiver             packet and waiting for a response. These broadcast
cannot transmit and receive at the same time. The pur-          packets are numbered. Usually 6 or 8 packets are sent.
pose of the IrDA protocols is to allow this half-duplex         The first packet is number 0, the last packet is usually
link to emulate, as much as possible, a full-duplex con-        number 5 or 7. Once all the packets are sent, the Pri-
nection. In general, this is done by dividing the data into     mary device sends an ID packet, which is not num-
“packets”, or groups of data. These packets can then            bered.
be sent back and forth, when needed, without risk of
collision. The rules of how and when these packets are          The Secondary device waits for these packets and then
sent constitute the IrDA protocols.                             responds to one of the packets. The packet responds
                                                                to determines the “timeslot” to be used by the Second-
When a wired connection is used, the assumption is              ary device. For example, if the Secondary device
made that both sides have the same communications               responds after packet number 2, then the Secondary
parameters and features. A wired connection has no              device will use timeslot 2. If the Secondary device
need to identify the other connector because it is              responds after packet number 0, then the Secondary
assumed that the connectors are properly connected.             device will use timeslot 0. This mechanism allows the
In the IrDA standard, a connection process has been             Primary device to recognize as many nearby devices
defined to identify other IrDA compatible devices and           as there are timeslots. The Primary device will continue
establish a communication link. There are three steps           to generate timeslots and the Secondary device should
that these two devices go through to make this                  continue to respond, even if there’s nothing to do.
connection. They are:
• Normal Disconnect Mode (NDM)                                     Note 1: The MCP2140 can only be used to
                                                                             implement a Secondary device.
• Discovery Mode
• Normal Connect Mode (NCM)                                               2: The MCP2140 supports a system with
                                                                              only one Secondary device having exclu-
Figure C-1 shows the connection sequence.                                     sive use of the IrDA standard infrared link
                                                                              (known as “point-to-point” communica-
C.1        Normal Disconnect Mode (NDM)                                       tion).
When two IrDA standard compatible devices come into                       3: The MCP2140 always responds to packet
range they must first recognize each other. The basis                         number 2. This means that the MCP2140
of this process is that one device has some task to                           will always use timeslot 2.
accomplish and the other device has a resource
                                                                          4: If another Secondary device is nearby,
needed to accomplish this task. One device is referred
                                                                              the Primary device may fail to recognize
to as a Primary device and the other is referred to as a
                                                                              the MCP2140, or the Primary device may
Secondary device. This distinction between Primary
                                                                              not recognize either of the devices.
device and Secondary device is important. It is the
responsibility of the Primary device to provide the
mechanism to recognize other devices. So the Primary
device must first poll for nearby IrDA standard compat-
ible devices. During this polling, the default baud rate of
9600 baud is used by both devices.
For example, if you want to print from an IrDA equipped
laptop to an IrDA printer, utilizing the IrDA standard fea-
ture, you would first bring your laptop in range of the
printer. In this case, the laptop is the one that has
something to do and the printer has the resource to do
it. The laptop is called the Primary device and the
printer is the Secondary device. Some data-capable
cell phones have IrDA standard infrared ports. If you
used such a cell phone with a Personal Digital Assis-
DS21790A-page 50                                       Preliminary                         2003 Microchip Technology Inc.


                                                                                                   MCP2140
C.2       Discovery Mode                                            C.3       Normal Connect Mode (NCM)
Discovery mode allows the Primary device to deter-                  Once discovery has been completed, the Primary
mine the capabilities of the MCP2140 (Secondary                     device and Secondary device can freely exchange
device). Discovery mode is entered once the MCP2140                 data.
(Secondary device) has sent an XID response to the                  Both the Primary device and the Secondary device
Primary device and the Primary device has completed                 check to make sure that data packets are received by
sending the XIDs and then sends a Broadcast ID. If this             the other without errors. Even when data is required to
sequence is not completed, then a Primary and                       be sent, the Primary and Secondary devices will still
Secondary device can stay in NDM indefinitely.                      exchange packets to ensure that the connection hasn’t,
When the Primary device has something to do, it                     unexpectedly, been dropped. When the Primary device
initiates Discovery. Discovery has two parts. They are:             has finished, it then transmits the close link command
• Link initialization                                               to the Secondary device. The Secondary device will
                                                                    confirm the close link command and both the Primary
• Resource determination
                                                                    device and the Secondary device will revert to the NDM
The first step is for the Primary and Secondary devices             state.
to determine, and then adjust to, each other’s hardware
                                                                      Note:    If the NCM mode is unexpectedly termi-
capabilities. These capabilities are parameters like:
                                                                               nated for any reason (including the Primary
•  Data rate                                                                   device not issuing a close link command),
•  Turn around time                                                            the Secondary device will revert to the
•  Number of packets without a response                                        NDM state after a time delay (after the last
•  How long to wait before disconnecting                                       frame has been received).
Both the Primary and Secondary device begin commu-
nications at 9600 baud, which is the default baud rate.
The Primary device sends its parameters, then the
Secondary device responds with its parameters. For
example, if the Primary supports all data rates up to
115.2 kbaud and the Secondary device only supports
9.6 kbaud, the link will be established at 9.6 kbaud.
   Note:     The MCP2140 is limited to a data rate of
             9.6 kbaud.
Once the hardware parameters are established, the
Primary device must determine if the Secondary device
has the resources it requires. If the Primary device has
a job to print, then it must know if it’s talking to a printer,
not a modem or other device. This determination is
made using the Information Access Service (IAS). The
job of the Secondary device is to respond to IAS que-
ries made by the Primary device. The Primary device
must ask a series of questions like:
• What is the name of your service?
• What is the address of this service?
• What are the capabilities of this device?
When all the Primary device’s questions are answered,
the Primary device can access the service provided by
the Secondary device.
 2003 Microchip Technology Inc.                           Preliminary                                    DS21790A-page 51


MCP2140
FIGURE C-1:      HIGH LEVEL IRCOMM CONNECTION SEQUENCE
               Primary Device                          Secondary Device
                                                            (MCP2140)
 Normal Disconnect Mode (NDM)
                 Send XID Commands
                 (timeslots n, n+1, ...)
             (approximately 70ms
             between XID commands)                       No Response
                                                         XID Response in timeslot y,
                                                         claiming this timeslot, (MCP2140
                 Finish sending XIDs                     always claims timeslot 0)
             (max timeslots - y frames)
                 Broadcast ID                            No Response to these XIDs
                                                        No Response to Broadcast ID
 Discovery       Send SNRM Command
                 (w/ parameters and
                 connection address)                     UA response with parameters
                                                         using connect address
          Open channel for IAS Queries
                                                        Confirm channel open for IAS
                      Send IAS Queries
                                                        Provide IAS responses
                  Open channel for data
                                                        Confirm channel open for data
 Normal Response Mode (NRM)                             (MCP2140 DSR pin driven low)
                    Send Data or Status
                                                        Send Data or Status
                    Send Data or Status
                                                        Send Data or Status
                         Shutdown link
                                                        Confirm shutdown
                                                        (back to NDM state)
DS21790A-page 52                         Preliminary          2003 Microchip Technology Inc.


                                                                                           MCP2140
APPENDIX D:            DB-9 PIN                                APPENDIX E:           KNOW PRIMARY
                       INFORMATION                                                   DEVICE
Table D-1 shows the DB-9 pin information and the                                     COMPATIBILITY
direction of the MCP2140 signals. The MCP2140 is                                     ISSUES
designed for use in Data Communications Equipment
                                                               Table E-1 show the known issues of Primary Devices
(DCE) applications.
                                                               interfacing to the MCP2140.
TABLE D-1:        DB-9 SIGNAL INFORMATION
   DB-9
           Signal       Direction          Comment
 Pin No.
    1      CD       HC → MCP2140        Carrier Detect
    2      RX       MCP2140 → HC        Received Data
    3      TX       HC → MCP2140        Transmit Data
    4      DTR      HC → MCP2140        Data Terminal
                                        Ready
    5      GND               —          Ground
    6      DSR      MCP2140 → HC        Data Set
                                        Ready
    7      RTS      HC → MCP2140        Request to
                                        Send
    8      CTS      MCP2140 → HC        Clear to Send
    9      RI       HC → MCP2140        Ring Indicator
 Legend: HC = Host Controller
TABLE E-1:        PRIMARY DEVICE ISSUES
 Primary Device         Operating System                Issue                            Result
 HP Jornada 720         HPC Pro/Windows CE™ 3.0 Jornada 720 transmits 0xFF (not MCP2140 will not connect
                        (Pocket PC)                     0xC0) for extra SOF (Start-of- to the Jornada 720.
                                                        Frame) characters during NDM.
 Personal Computers Windows® 2000 (do not have The operating system will reset if MCP2140 will not connect
                        list of which versions)         an IR device ID of “null” is to the PC
                                                        received.
 2003 Microchip Technology Inc.                     Preliminary                                 DS21790A-page 53


MCP2140
NOTES:
DS21790A-page 54 Preliminary  2003 Microchip Technology Inc.


                                                                                                                  MCP2140
PRODUCT IDENTIFICATION SYSTEM
To order or obtain information, e.g., on pricing or delivery, refer to the factory or the listed sales office.
       PART NO.            X                /XX
                                                                                        Examples:
         Device       Temperature        Package                                        a)     MCP2140-I/P = Industrial Temp.,
                         Range                                                                 PDIP packaging
                                                                                        b)     MCP2140-I/SO = Industrial Temp.,
                                                                                               SOIC package
  Device                MCP2140: Infrared Communications Controller
                                                                                        c)     MCP2140T-I/SS = Tape and Reel,
                        MCP2140T: Infrared Communications Controller
                                      (Tape and Reel)                                          Industrial Temp., SSOP package
  Temperature Range     I     =       -40°C to +85°C
  Package               P      =       Plastic DIP (300 mil, Body), 18-lead
                        SO     =       Plastic SOIC (300 mil, Body), 18-lead
                        SS     =       Plastic SSOP (209 mil, Body), 20-lead
Sales and Support
 Data Sheets
 Products supported by a preliminary Data Sheet may have an errata sheet describing minor operational differences and recom-
 mended workarounds. To determine if an errata sheet exists for a particular device, please contact one of the following:
 1.   Your local Microchip sales office
 2.   The Microchip Corporate Literature Center U.S. FAX: (480) 792-7277
 3.   The Microchip Worldwide Site (www.microchip.com)
 Please specify which device, revision of silicon and Data Sheet (include Literature #) you are using.
 Customer Notification System
 Register on our web site (www.microchip.com/cn) to receive the most current information on our products.
 2003 Microchip Technology Inc.                               Preliminary                                               DS21790A-page 55


MCP2140
NOTES:
DS21790A-page 56 Preliminary  2003 Microchip Technology Inc.


Note the following details of the code protection feature on Microchip devices:
•     Microchip products meet the specification contained in their particular Microchip Data Sheet.
•     Microchip believes that its family of products is one of the most secure families of its kind on the market today, when used in the
      intended manner and under normal conditions.
•     There are dishonest and possibly illegal methods used to breach the code protection feature. All of these methods, to our
      knowledge, require using the Microchip products in a manner outside the operating specifications contained in Microchip's Data
      Sheets. Most likely, the person doing so is engaged in theft of intellectual property.
•     Microchip is willing to work with the customer who is concerned about the integrity of their code.
•     Neither Microchip nor any other semiconductor manufacturer can guarantee the security of their code. Code protection does not
      mean that we are guaranteeing the product as “unbreakable.”
Code protection is constantly evolving. We at Microchip are committed to continuously improving the code protection features of our
products. Attempts to break microchip’s code protection feature may be a violation of the Digital Millennium Copyright Act. If such
acts allow unauthorized access to your software or other copyrighted work, you may have a right to sue for relief under that Act.
Information contained in this publication regarding device                Trademarks
applications and the like is intended through suggestion only
and may be superseded by updates. It is your responsibility to            The Microchip name and logo, the Microchip logo, KEELOQ,
ensure that your application meets with your specifications. No           MPLAB, PIC, PICmicro, PICSTART, PRO MATE and
representation or warranty is given and no liability is assumed           PowerSmart are registered trademarks of Microchip Technology
by Microchip Technology Incorporated with respect to the                  Incorporated in the U.S.A. and other countries.
accuracy or use of such information, or infringement of patents
or other intellectual property rights arising from such use or            FilterLab, microID, MXDEV, MXLAB, PICMASTER, SEEVAL
                                                                          and The Embedded Control Solutions Company are registered
otherwise. Use of Microchip’s products as critical components in
                                                                          trademarks of Microchip Technology Incorporated in the U.S.A.
life support systems is not authorized except with express
written approval by Microchip. No licenses are conveyed,
                                                                          Accuron, Application Maestro, dsPIC, dsPICDEM,
implicitly or otherwise, under any intellectual property rights.
                                                                          dsPICDEM.net, ECONOMONITOR, FanSense, FlexROM,
                                                                          fuzzyLAB, In-Circuit Serial Programming, ICSP, ICEPIC,
                                                                          microPort, Migratable Memory, MPASM, MPLIB, MPLINK,
                                                                          MPSIM, PICC, PICkit, PICDEM, PICDEM.net, PowerCal,
                                                                          PowerInfo, PowerMate, PowerTool, rfLAB, rfPIC, Select Mode,
                                                                          SmartSensor, SmartShunt, SmartTel and Total Endurance are
                                                                          trademarks of Microchip Technology Incorporated in the U.S.A.
                                                                          and other countries.
                                                                          Serialized Quick Turn Programming (SQTP) is a service mark of
                                                                          Microchip Technology Incorporated in the U.S.A.
                                                                          All other trademarks mentioned herein are property of their
                                                                          respective companies.
                                                                          © 2003, Microchip Technology Incorporated, Printed in the
                                                                          U.S.A., All Rights Reserved.
                                                                                Printed on recycled paper.
                                                                           Microchip received QS-9000 quality system
                                                                           certification for its worldwide headquarters,
                                                                           design and wafer fabrication facilities in
                                                                           Chandler and Tempe, Arizona in July 1999
                                                                           and Mountain View, California in March 2002.
                                                                           The Company’s quality system processes and
                                                                           procedures are QS-9000 compliant for its
                                                                           PICmicro ® 8-bit MCUs, KEELOQ® code hopping
                                                                           devices, Serial EEPROMs, microperipherals,
                                                                           non-volatile memory and analog products. In
                                                                           addition, Microchip’s quality system for the
                                                                           design and manufacture of development
                                                                           systems is ISO 9001 certified.
 2003 Microchip Technology Inc.                             Preliminary                                                 DS21790A - page 57


M
                                   WORLDWIDE SALES AND SERVICE
AMERICAS                                ASIA/PACIFIC                               Japan
                                                                                   Microchip Technology Japan K.K.
Corporate Office                        Australia
                                                                                   Benex S-1 6F
2355 West Chandler Blvd.                Microchip Technology Australia Pty Ltd
                                                                                   3-18-20, Shinyokohama
Chandler, AZ 85224-6199                 Marketing Support Division
                                                                                   Kohoku-Ku, Yokohama-shi
Tel: 480-792-7200 Fax: 480-792-7277     Suite 22, 41 Rawson Street
                                                                                   Kanagawa, 222-0033, Japan
Technical Support: 480-792-7627         Epping 2121, NSW
                                                                                   Tel: 81-45-471- 6166 Fax: 81-45-471-6122
Web Address: http://www.microchip.com   Australia
                                        Tel: 61-2-9868-6733 Fax: 61-2-9868-6755    Korea
Atlanta                                                                            Microchip Technology Korea
3780 Mansell Road, Suite 130            China - Beijing
                                                                                   168-1, Youngbo Bldg. 3 Floor
Alpharetta, GA 30022                    Microchip Technology Consulting (Shanghai)
                                                                                   Samsung-Dong, Kangnam-Ku
Tel: 770-640-0034 Fax: 770-640-0307     Co., Ltd., Beijing Liaison Office
                                                                                   Seoul, Korea 135-882
                                        Unit 915
Boston                                                                             Tel: 82-2-554-7200 Fax: 82-2-558-5934
                                        Bei Hai Wan Tai Bldg.
2 Lan Drive, Suite 120                  No. 6 Chaoyangmen Beidajie                 Singapore
Westford, MA 01886                      Beijing, 100027, No. China                 Microchip Technology Singapore Pte Ltd.
Tel: 978-692-3848 Fax: 978-692-3821     Tel: 86-10-85282100 Fax: 86-10-85282104    200 Middle Road
                                                                                   #07-02 Prime Centre
Chicago                                 China - Chengdu
                                                                                   Singapore, 188980
333 Pierce Road, Suite 180              Microchip Technology Consulting (Shanghai) Tel: 65-6334-8870 Fax: 65-6334-8850
Itasca, IL 60143                        Co., Ltd., Chengdu Liaison Office
Tel: 630-285-0071 Fax: 630-285-0075     Rm. 2401-2402, 24th Floor,                 Taiwan
                                        Ming Xing Financial Tower                  Microchip Technology (Barbados) Inc.,
Dallas                                                                             Taiwan Branch
4570 Westgrove Drive, Suite 160         No. 88 TIDU Street
                                        Chengdu 610016, China                      11F-3, No. 207
Addison, TX 75001                                                                  Tung Hua North Road
Tel: 972-818-7423 Fax: 972-818-2924     Tel: 86-28-86766200 Fax: 86-28-86766599
                                                                                   Taipei, 105, Taiwan
                                        China - Fuzhou                             Tel: 886-2-2717-7175 Fax: 886-2-2545-0139
Detroit
                                        Microchip Technology Consulting (Shanghai)
Tri-Atria Office Building
32255 Northwestern Highway, Suite 190
                                        Co., Ltd., Fuzhou Liaison Office           EUROPE
                                        Unit 28F, World Trade Plaza
Farmington Hills, MI 48334                                                         Austria
                                        No. 71 Wusi Road
Tel: 248-538-2250 Fax: 248-538-2260                                                Microchip Technology Austria GmbH
                                        Fuzhou 350001, China
Kokomo                                  Tel: 86-591-7503506 Fax: 86-591-7503521    Durisolstrasse 2
2767 S. Albright Road                                                              A-4600 Wels
                                        China - Hong Kong SAR                      Austria
Kokomo, Indiana 46902                   Microchip Technology Hongkong Ltd.
Tel: 765-864-8360 Fax: 765-864-8387                                                Tel: 43-7242-2244-399
                                        Unit 901-6, Tower 2, Metroplaza            Fax: 43-7242-2244-393
Los Angeles                             223 Hing Fong Road                         Denmark
18201 Von Karman, Suite 1090            Kwai Fong, N.T., Hong Kong                 Microchip Technology Nordic ApS
Irvine, CA 92612                        Tel: 852-2401-1200 Fax: 852-2401-3431      Regus Business Centre
Tel: 949-263-1888 Fax: 949-263-1338     China - Shanghai                           Lautrup hoj 1-3
                                        Microchip Technology Consulting (Shanghai) Ballerup DK-2750 Denmark
Phoenix
                                        Co., Ltd.                                  Tel: 45 4420 9895 Fax: 45 4420 9910
2355 West Chandler Blvd.
                                        Room 701, Bldg. B                          France
Chandler, AZ 85224-6199
                                        Far East International Plaza               Microchip Technology SARL
Tel: 480-792-7966 Fax: 480-792-4338
                                        No. 317 Xian Xia Road                      Parc d’Activite du Moulin de Massy
San Jose                                Shanghai, 200051                           43 Rue du Saule Trapu
Microchip Technology Inc.               Tel: 86-21-6275-5700 Fax: 86-21-6275-5060  Batiment A - ler Etage
2107 North First Street, Suite 590      China - Shenzhen                           91300 Massy, France
San Jose, CA 95131                      Microchip Technology Consulting (Shanghai) Tel: 33-1-69-53-63-20 Fax: 33-1-69-30-90-79
Tel: 408-436-7950 Fax: 408-436-7955     Co., Ltd., Shenzhen Liaison Office         Germany
Toronto                                 Rm. 1812, 18/F, Building A, United Plaza   Microchip Technology GmbH
6285 Northam Drive, Suite 108           No. 5022 Binhe Road, Futian District       Steinheilstrasse 10
Mississauga, Ontario L4V 1X5, Canada    Shenzhen 518033, China                     D-85737 Ismaning, Germany
Tel: 905-673-0699 Fax: 905-673-6509     Tel: 86-755-82901380 Fax: 86-755-82966626  Tel: 49-89-627-144-0
                                        China - Qingdao                            Fax: 49-89-627-144-44
                                        Rm. B505A, Fullhope Plaza,                 Italy
                                        No. 12 Hong Kong Central Rd.               Microchip Technology SRL
                                        Qingdao 266071, China                      Via Quasimodo, 12
                                        Tel: 86-532-5027355 Fax: 86-532-5027205    20025 Legnano (MI)
                                        India                                      Milan, Italy
                                        Microchip Technology Inc.                  Tel: 39-0331-742611 Fax: 39-0331-466781
                                        India Liaison Office                       United Kingdom
                                        Marketing Support Division                 Microchip Ltd.
                                        Divyasree Chambers                         505 Eskdale Road
                                        1 Floor, Wing A (A3/A4)                    Winnersh Triangle
                                        No. 11, O’Shaugnessey Road                 Wokingham
                                        Bangalore, 560 025, India                  Berkshire, England RG41 5TU
                                        Tel: 91-80-2290061 Fax: 91-80-2290062      Tel: 44 118 921 5869 Fax: 44-118 921-5820
                                                                                                                         03/25/03
DS21790A-page 58                                      Preliminary                           2003 Microchip Technology Inc.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Microchip:
 MCP2140T-I/SS MCP2140T-I/SO MCP2140-I/P MCP2140-I/SS MCP2140-I/SO MCP2140A-I/P MCP2140A-I/SO
MCP2140A-I/SS MCP2140AT-I/SO MCP2140AT-I/SS
