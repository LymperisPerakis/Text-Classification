MLX90320
Automotive Sensor Interface
1. Features and Benefits                                                                                                                                                   2. Application Examples
          Suited cost optimized sensors: gain and                                                                                                                                Pressure transducers, strain gauges,
           offset                                     correction                                              by                       programmable                                accelerometers, position sensors, etc.
           coefficients                                                                                                                                                           Steering systems (e.g. torque sensors)
          Higher order temperature compensation                                                                                                                                  Safety restraints systems (e.g. seat
           provided for both gain and offset                                                                                                                                       occupant detection)
          External or internal temperature sensor                                                                                                                                Braking systems (e.g. ABS, force)
           for compensation of temperature errors                                                                                                                                 Comfort systems (e.g. air conditioning)
          Over-voltage protection                                                                                                                                                Engine management (e.g. injection)
          Fault detection and clamping levels                                                                                                                                    Any bridge type sensor
          Ratio-metric output: 0 to 5V
          Single Pin Digital Programming
          Fully analog signal path
          RoHS compliant
3. Ordering information
          Product Code                                                                            Temperature                                                    Package Code       Option Code         Packing Form
                                                                                                                 Code                                                                                        Code
        MLX90320                                                                      L                                                                      FR                   BBA-000             RE
        MLX90320                                                                      L                                                                      FR                   BBA-000             TU
Legend:
Temperature Code:                                                                                            L for Temperature Range -40°C to 150°C
Package Code:                                                                                                FR for SSOP 209 mil
Packing Form:                                                                                                RE for Reel, TU for Tube
Ordering example:                                                                                            MLX90320LFR-BBA-000-RE
4. Functional Diagram                                                                                                                                                     Wheatstone bridge on a sensing element, to
                                                                                                                                                                          large output voltage variations.
                                         VDD
                                7bits
                                                                                                      Optional clamping         Over- & Reverse
                        CSOF              DAC
                                                                                                       levels and fault
                                                                                                           detections           POR
                                                                                                                                     Voltage Protection
                                                                                                                                Ratiometric
                                                                                                                                                                          The signal conditioning includes gain
                                                                                                                                                                          adjustment, offset control and second order
                     Chopping                       Chopping
                                                                                                                                  Oscillator: 4 MHz (+/-
 INM                                  +                                                                                             15%) -> 250kHz dig
                                      Gdido                   Gdts
  INP
                        IINV
                                       -
                                       VDD
                                                                                                  Gcs
                                                                                                                                                                          temperature compensation in order to
                                                                                                                                                          FLT
          VDD
                            10bits
                                       DAC
                                                                     1         2
                                                                                                                                                                          accommodate variations of the different
               TMP
              Select
                                   Fine Offset =
                            Oo + O1.(T-T1) + O2.(T-T1)²
                                                                                 Fine Gain =
                                                                          Go + G1.(T-T1) + G2.(T-T1)²
                                                                                                      10bits
                                                                                                                    DAC           X2.117        X(-1.667)
                                                                                                                                                           Application
                                                                                                                                                          mode Output
                                                                                                                                                                          resistive sensing elements. Compensation
                                                                                                                                                          Programming
TMP
                                                         VDD
                                                                Fine Offset
                                                                            T
                                                                                            Fine Gain
                                                                                                      Go,G1,G2
                                                                                                      Oo,O1,O2
                                                                                                                        EEPROM
                                                                                                                                                            mode I/O
                                                                                                                                                                          values are stored in EEPROM and can be
                                 TMP                     ADC                            ALU
                                                                                                                                                                          reprogrammed with an interface circuit and
                                 Gain                                                                   T1        Go,G1,G2,Oo,O1,O2,T1, Gcs,
                     TMP                                     10bits
                                                                                                                 Gdido, Gdts, IINV, TMP_Select,
                     Offset                                                                                         TMP_Offset, TMP_Gain,
                                                                                                                 CSOF, CLKAdj, Clamp_settings
                                                                                                                                                                          provided software. The MLX90320 is
                                                                                                                                                                          programmed with a single wire serial interface
5. General Description                                                                                                                                                    through the output pin.
The MLX90320 covers the most typical resistive                                                                                                                            The user can specify on chip clamping levels
type of Wheatstone bridge applications for use                                                                                                                            thus creating fault detection bands. By
in an automotive environment. It is a monolithic                                                                                                                          intercepting various fault modes the MLX90320
silicon analog sensor interface that converts                                                                                                                             is able to inform about the reliability of its
small changes in resistors, configured in a full                                                                                                                          analog output signal.
    REVISION 008 – DECEMBER 2016                                                                                                                                                                                   Page 1 of 34
    3901090320


MLX90320
Automotive Sensor Interface
Contents
1. Features and Benefits ............................................................................................................................ 1
2. Application Examples............................................................................................................................. 1
3. Ordering information............................................................................................................................. 1
4. Functional Diagram ............................................................................................................................... 1
5. General Description ............................................................................................................................... 1
6. Maximum ratings................................................................................................................................... 4
7. Pad definitions and descriptions ............................................................................................................ 4
8. MLX90320 General Specifications ......................................................................................................... 6
9. Detailed Description ............................................................................................................................ 11
   9.1. EEPROM............................................................................................................................................. 12
   9.2. The programmable clock. ................................................................................................................. 12
   9.3. The temperature chain. .................................................................................................................... 13
   9.4. The sensor signal chain..................................................................................................................... 14
     9.4.1. The Gain calibration of the sensor signal chain. ....................................................................... 15
     9.4.2. The Offset calibration of the sensor signal chain. ..................................................................... 16
     9.4.3. The output clamping levels ........................................................................................................ 18
     9.4.4. The Faults detection ................................................................................................................... 18
   9.5. Programming the MLX90320 through the output pin .................................................................... 20
     9.5.1. Overview ..................................................................................................................................... 20
     9.5.2. Communication Initialization Request....................................................................................... 20
     9.5.3. Communication Request ............................................................................................................ 21
     9.5.4. Bit format .................................................................................................................................... 21
     9.5.5. Commands .................................................................................................................................. 22
10. Unique Features ................................................................................................................................ 24
11. Typical applications circuits ............................................................................................................... 25
   11.1. Ratio-metric mode with use of external temperature sensor. .................................................... 25
   11.2. Ratio-metric mode without use of external temperature sensor. ............................................... 26
   11.3. Non Ratio-metric mode with use of external temperature sensor. ............................................ 26
   11.4. Non Ratio-metric mode without use of external temperature sensor. ....................................... 27
12. EEPROM Contents ............................................................................................................................. 27
  REVISION 008 – DECEMBER 2016                                                                                                                     Page 2 of 34
  3901090320


MLX90320
Automotive Sensor Interface
13. Standard information regarding manufacturability of Melexis products with different soldering
   processes............................................................................................................................................ 31
14. Package Information.......................................................................................................................... 32
15. Contact .............................................................................................................................................. 34
16. Disclaimer .......................................................................................................................................... 34
 REVISION 008 – DECEMBER 2016                                                                                                                      Page 3 of 34
 3901090320


MLX90320
Automotive Sensor Interface
6. Maximum ratings
 Parameter                                    Min             Max  Units    Comments
  Supply Voltage, VDD                         -14.5           16   V          No latch-up or damage.
                                                                              Rise time(10 to 90%)
                                                                              tr  1µs.
  Supply Voltage, VDD- VSS                    4.5             5.5  V          Operating within
                                                                              specifications
  Output current limit                        -50             -9   mA         Short to V DD
                                                9             50   mA         Short to Gnd
  Operating       Temperature    Range,       -40             150  ºC
  Tenvironment
  Storage Temperature Range                   -50             150  C
  Programming Temperature Range               -40             125  C
  Package Thermal Resistance                                  130  C/W
  ESD Sensitivity                               2                  kV         HBM.
                                                                              CDF - AEC - Q100-002
  Latch-up withstand                                                          CDF - AEC - Q100-004;
                                                                              VDD= 5.5V
    Table 1: Absolute maximum ratings
Exceeding the absolute maximum ratings may cause permanent damage. Exposure to absolute-maximum-rated
conditions for extended periods may affect device reliability.
7. Pad definitions and descriptions
  REVISION 008 – DECEMBER 2016                                                                 Page 4 of 34
  3901090320


MLX90320
Automotive Sensor Interface
              Package
                 Pin        Short    Dir      Type                Function / Description
                  Nr        Name
             1           INM      IN       Analog      Bridge Sensor Negative
             2           ANAGND   gnd                  Analog Ground
             3           INP      IN       Analog      Bridge Sensor Positive
             4           SUB      gnd                  Substrate Ground
             5           TMP      IN       Temp        External Temperature Sensor (Resistor to
                                                       supply)
             6           DIGGND   gnd                  Digital Ground
             7           Test     NC                   On module to ground.
             8           TESTOUT  OUT      Test        Test Output.
                                                       On module to ground
             9           TESTIN1  IN       Test        Test Input 1: CLKEXT, TEST (3 level)
             10          TESTIN2  IN       Test        Test Input 2: DATAIN, SCAN (3 level)
             11          FLT      OUT      Analog      Filter pin
             12          OUT      BI       Analog      Analog output and communication pin
             13          Test     NC                   On module to ground
             14          VDD      power Supply         Supply
                                         Table 2: Pin description MLX90320
 REVISION 008 – DECEMBER 2016                                                                   Page 5 of 34
 3901090320


MLX90320
Automotive Sensor Interface
8. MLX90320 General Specifications
DC Operating Parameters TA = -40oC to 150oC (guaranteed through automotive qualification standards), VDD = 5V
(unless otherwise specified), packaged parts are fully tested during production between -40oC and 135oC,
dies are fully tested during production between 25oC and 135oC.
                                        General Electrical Specifications
    Parameter         Symbol      Comments            Min              Typ         Max           Units
 Supply                 VDD                           4.5                           5.5            V
 Voltage
 Supply                 IDD        No output            4                            9            mA
 Current                              load,
                                 VDD=5V±10%
 Output                          10 < RSERIES          0                           100           nF
 capacitive                         < 10 k
 load
 Output                             To reach          2.8                      See remark 2       kΩ
 resistive load                    5%VDD to      See remark 1
                                    95%VDD
 Output                                              ± 1.7                                        mA
 current
 capability
 Output short                    VDD=5V±10%                                         ±50           mA
 circuit current
 Digital output                                        ±2                            ±5           mA
 current
 VDD line                                               0                            22           µH
 inductance
                                        Clamping Levels Specifications
    Parameter         Symbol      Comments            Min              Typ         Max           Units
 Clamping            Clamp low         See              2               4            6           %VDD
 output low 0           min        paragraph                     See remark 3
                                    6.4.3 for
                                    detailed
                                  explanation
 Clamping                         7 other low                      Clamp low                     %VDD
 output low 1                      clamping                           min +
                                     levels                         1.3%VDD
                                 with a clamp
                                      level
                                  variation of
                                  1.3%VDD for
                                      each
  REVISION 008 – DECEMBER 2016                                                                         Page 6 of 34
  3901090320


MLX90320
Automotive Sensor Interface
 Clamping                       n = [0..7]                     Clamp low            %VDD
 output low n                                                     min +
                                                               n*1.3%VDD
 Clamping          Clamp high       See            94              96          98   %VDD
 output high 0         max     paragraph                      See remark 3
                                6.4.3 for
                                detailed
                              explanation
 Clamping                     7 other high                     Clamp high           %VDD
 output high1                   clamping                          max –
                                  levels                        1.3%VDD
                              with a clamp
                                   level
                              variation of
                              1.3%VDD for
                                   each
 Clamping                       n = [0..7]                     Clamp high           %VDD
 output high n                                                    max –
                                                               n*1.3%VDD
                                     Diagnostic Limits Specifications
   Parameter         Symbol    Comments            Min             Typ         Max  Units
 Low                                                                            4   %VDD
 diagnostic
 output
 High                                              96                               %VDD
 diagnostic
 output
                                    Signal path general Specifications
    Parameter         Symbol      Comments           Min             Typ       Max  Units
 Overall typical                  See table 3        12.7                       442  V/V
 gain                            below for an
                                   overview
 Coarse gain            Gdido         1bit                                           V/V
                               programmable                   3.25 (Gdido = 0)
                                                               13 (Gdido = 1)
                         Gdts         1bit                                           V/V
                               programmable                   1.994 (Gdts = 0)
                                                               4.96 (Gdts = 1)
 REVISION 008 – DECEMBER 2016                                                             Page 7 of 34
 3901090320


MLX90320
Automotive Sensor Interface
                         Gcs          1bit                                   V/V
                               programmable           1.238 (Gcs = 0)
                                                      1.934 (Gcs =1)
 Typical fine           Fgain       10 bit      0.446                 0.99   V/V
 gain                          programmable
 Typical sensor                Without an        1.8                   63  mV/Vsupply
 output span                   optimal
 that can be                   compensation
 accommodated                  of the
 to achieve 4V                 sensitivity
 output span                   temperature
                               drift (i.e. with
                               the fine gain
                               equal to one
                               of the
                               extreme range
                               values)
 Typical sensor                With an           2.5                   40  mV/Vsupply
 output span                   optimal
 that can be                   compensation
 accommodated                  of the
 to achieve 4V                 sensitivity
 output span                   temperature
                               drift (i.e. with
                               the fine gain
                               equal to the
                               middle range
                               value)
 Typical sensor                Depends on                             97.2 mV/Vsupply
 offset that can               gain
 be                            settings and
 compensated                   desired
                               output offset
                               voltage. See
                               Table 3 below
                               for an
                               overview.
 Output Offset                                   10                    90   %VDD
 programmable
 Output Offset                                                         0.1  %VDD
 resolution
 Overall non                    Best fit value                        ±0.1  %VDD
 linearity
  REVISION 008 – DECEMBER 2016                                                    Page 8 of 34
  3901090320


MLX90320
Automotive Sensor Interface
  Wake-up time                   MLX90320                0                           10            ms
  at power up                    operational, in
                                 spec.
  Output noise                   47nF FLT                                            5            mVrms
                                 capacitance
                                 with
                                 maximum gain
  Response time                  Set by an                                          0.1            ms
                                 external
                                 capacitor
Remark 1: For a reduced temperature range of -40oC to 135oC, the MLX90320 is able to cover the output voltage
range from 5%Vdd till 95%Vdd for all loads higher than 2kOhm.
Remark 2: When using a pull up load, during a fault condition, a leakage current of 20µA maximum will flow in
the load. The voltage drop due to this leakage current will limit the achievable high voltage. To be sure that the
high fault band is always achieved during a fault condition a load smaller than 4%Vdd/ 20µA = 10kOhm has to be
used.
Remark 3: Each clamping level itself has an inaccuracy of +/-2%Vdd maximum. But the 1.3%Vdd step between
each level is very accurate. By selecting the clamping level closest to the desired level an accuracy of +/-
0.65%Vdd can be reached. To be sure that there is never an overlap between the fault bad and the normal band
it is better to keep at least a 1%Vdd gap between the clamping level and the fault band (i.e. the maximum
clamping level should be ≤ 95%Vdd and the minimum should be ≥ 5%Vdd).
  REVISION 008 – DECEMBER 2016                                                                         Page 9 of 34
  3901090320


                                                                                                                                                               Gdido   Gdts   GCS   Fine    Typical    Sensor span in     Typical total sensor offset     ypical total sensor offset
3901090320                                                                                                                                                                          Gain     Total    order to achieve   that can be compensated to     that can be compensated to
                                                                                                                                                                                    V/V      Gain     4V output span      achieve 0.5V as MLX90320       achieve 4.5V as MLX90320
                                                                                                                                                                                              V/V      (mV) Remark 4          output offset (mV)             output offset (mV)
                                                                                                                                                                0       0     0     0.446    12.7                           -306.7          171.1           8.0            485.9
             REVISION 008 – DECEMBER 2016
                                                                                                                                                                                                                                                                                                 Automotive Sensor Interface   MLX90320
                                                                                                                                                                0       0     0     0.99     28.4          196.1            -328.3          149.6          -187.3          290.6
                                            Remark 4: For the best compensation of the sensor sensitivity drift with temperature, the typical sensor output
                                                                                                                                                                0       0     1     0.446    19.9                           -320.8          157.1          -119.3          358.6
                                                                                                                                                                0       0     1     0.99     44.3          125.2            -334.6          143.3          -244.3          233.6
                                                                                                                                                                0       1     0     0.446    31.8                           -329.0          147.9          -204.1          273.9
                                                                                                                                                                0       1     0     0.99     70.9          78.3             -338.6          139.3          -282.2          195.7
                                                                                                                                                                0       1     1     0.446    49.6                           -335.6          142.3          -255.0          222.9
                                                                                                                                                                                                                                                                                       Table 3
                                                                                                                                                                0       1     1     0.99    110.8          50.2             -341.1          136.8          -305.0          172.9
                                                                                                                                                                1       0     0     0.446    50.7                           -76.9           42.9            2.0            121.9
                                            span needed to reach the 4V output span must be calculated for a fine gain in the middle of its range (i.e. 0.72
                                                                                                                                                                1       0     0     0.99    113.2          49.1             -82.3           37.5           -47.0           72.9
                                                                                                                                                                1       0     1     0.446    79.2                           -80.4           39.4           -29.9           90.0
                                                                                                                                                                1       0     1     0.99    176.8          31.5             -83.9           36.0           -61.3           58.6
                                                                                                                                                                1       1     0     0.446   126.7                           -82.7           37.1           -51.2           68.7
                                                                                                                                                                1       1     0     0.99    282.9          19.7             -84.9           34.9           -70.8           49.1
                                                                                                                                                                1       1     1     0.446   197.9                           -84.2           35.7           -63.9           55.9
                                                                                                                                                                1       1     1     0.99    441.8          12.6             -85.5           34.3           -76.5           43.4
                                            V/V)
             Page 10 of 34


MLX90320
Automotive Sensor Interface
9. Detailed Description
                                 Figure 1: General block diagram of the MLX90320
The MLX90320 can be used with almost any type of resistive bridge sensor without the need of any additional
signal conditioning.
The differential input signal is offset compensated and amplified to achieve the desired output voltage. With a
coarse gain calibration the MLX90320 can easily accommodate sensor output spans in the 1.8mV/V to 63mV/V
range to achieve 4 V output span. Sensor output offsets until 97.2mV/V (depending on the sensor output span
and on the desired output offset, see table 3 for the details) can be compensated with the coarse offset
calibration to achieve an output offset in the 0.5V to 4.5V range. Figure 2 shows two typical output characteristics
that can be obtained with the MLX90320. The option of swapping the inputs by setting one bit in EEPROM and
the wide variation of the output offset with the coarse offset calibration allows calibrating a decreasing output
characteristic as shown in figure 2. All output characteristics between those described in figure 2 can be achieved
for a wide range of sensor output spans and offsets.
  REVISION 008 – DECEMBER 2016                                                                           Page 11 of 34
  3901090320


MLX90320
Automotive Sensor Interface
                 Figure 2: Two typical MLX90320 output characteristics obtained after calibration
Besides the coarse gain and offset adjustment, the MLX90320 can accurately adjust the output span and offset to
the desired values by calibrating a fine gain and a fine offset 10 bits DAC. This fine calibration allows also
compensating second order temperature drifts of the sensor sensitivity and offset. An accurate temperature
chain gives the information needed to compensate this temperature drift. The user has the possibility of selecting
between an internal and an external temperature sensor by setting one bit in EEPROM.
What follows is the description of the different features of the MLX90320. For each feature the different
calibration parameters associated will be explained and their address in the EEPROM will be given. Only typical
values are used in this section.
9.1. EEPROM
The EEPROM is a 64 x 5 bits memory. A detailed description of the EEPROM memory address map is given in the
paragraph 9. So each EEPROM address contains 4 calibration bits and one parity bit. The sum of the '1''s of the
five bits must be '1'. That means that when data is '0000' the parity must be '1' (other examples:'0100' parity is
'0'; '1100' parity is '1'; '1111' parity is '1').
9.2. The programmable clock.
The CLKADJ[3:0] bits are stored in address 3 of the EEPROM. These bits are used to program the oscillator. If
CLKADJ[3:0] = 1111, the oscillator runs at the highest frequency. If CLKADJ[3:0] = 0000, the oscillator runs at the
slowest frequency. This calibration is required to calibrate the 4 MHz oscillator within +/-15% accuracy. A bad
oscillator calibration may cause malfunction of the communication protocol thus it is only factory set.
  REVISION 008 – DECEMBER 2016                                                                           Page 12 of 34
  3901090320


MLX90320
Automotive Sensor Interface
9.3. The temperature chain.
                                           Figure 3: The temperature chain
The temperature chain is composed of the temperature sensor, an amplifier with programmable gain and offset
and a SAR ADC.
The user can choose between an internal or an external temperature sensor. By setting the bit TMP_Select to 1
(EEPROM address 23) the internal temperature sensor is chosen and the TMP pin has to be left floating in
application mode. If TMP_Select is 0 the external temperature sensor is chosen and an external resistor has to be
connected between the supply voltage and the TMP pin. The MLX90320 should be used with an external
temperature sensor in applications where the temperature surrounding the customer sensor is different from the
temperature surrounding the MLX90320. An example of external resistor that could be used in those specific
applications is given in paragraph 8.
As the sensitivity and the offset of the temperature sensor can vary a lot from part to part, the temperature chain
must be calibrated. For that reason the amplifier gain is three bits programmable (TMP_GAIN bits stored in
EEPROM address 31). These three bits are used to calibrate the sensitivity of the temperature chain. The
amplifier offset is five bits programmable (TMP_OFFSET bits stored in EEPROM address 23 and 27) and
compensates the offset of the temperature sensor. After calibration the output of the temperature chain
amplifier must be within the input range of the SAR ADC for the entire application temperature range.
When the calibration of the temperature chain is over, the 10 bits room temperature T1 can be stored in the
EEPROM (address 0 to 3 for the T1 value used to calculate the fine gain and address 16 to 18 for T1 value used to
calculate the fine offset) and it will be used for the sensor signal chain offset and sensitivity temperature drift
compensation.
Remark: Refer to the document AN_MLX90320.pdf for detailed information on how to calibrate the temperature
chain and the sensor signal chain.
  REVISION 008 – DECEMBER 2016                                                                           Page 13 of 34
  3901090320


MLX90320
Automotive Sensor Interface
9.4. The sensor signal chain.
                                         Figure 4: The sensor signal chain
The input of the sensor signal chain is a differential voltage INP-INM. The differential inputs can be inverted by
setting the IINV bit (EEPROM address 7). This is done by a 180° phase shift of the chopping signal. This allows
calibrating a decreasing output characteristic instead of an increasing one as shows Figure 2.
A dual input dual output 1 bit gain programmable amplifier (Gdido) is the first amplifier stage of the sensor signal
chain. The use of noise and offset reduction techniques like chopping and sample and hold makes the
contribution of the on-chip noise, offset and offset drift negligible compared to the same imperfections from the
external sensor. A dual input single output 1 bit programmable gain amplifier (Gdts) and a 1 bit programmable
gain charge summing amplifier (Gcs) completes the programmable coarse gain of the sensor signal chain. Thanks
to the wide programmable coarse gain range, the MLX90320 can accommodate wide sensor output spans.
A coarse and fine sensor offset compensation is done at the inputs of the dual to single amplifier (Gdts). A fine
gain DAC allows calibrating accurately the output span. A wide range of sensor offsets can be compensated with
the coarse offset calibration while the desired output offset can be achieved accurately with the fine offset
calibration. The fine gain and offset calibration allows compensating a second order temperature drift of the
sensor sensitivity and offset. An external capacitor connected to the FLT pin sets the bandwidth of the
MLX90320.
The global equations of the sensor signal chain are given below:
                        G       INP  INM , if _ IINV  0
 POSOUT  NEGOUT   DIDO
                         GDIDO  INM  INP , if _ IINV  1
 AGND  0.699  VDD
 DtsOUT  GDTS  POSOUT  NEGOUT                FN OFF  CS OFF   AGND
                                             GDTS
                                               3
CSOUT  GCS  DtsOUT       AGND  AGND
GnIN  FN GAIN  CSOUT  AGND  AGND
GnOUT  2.11 GnIN  AGND  AGND
  REVISION 008 – DECEMBER 2016                                                                           Page 14 of 34
  3901090320


MLX90320
Automotive Sensor Interface
OUT  1.668  GnOUT  1.16725  VDD
Explanation of the parameters used in the global equations:
          INP-INM is the differential output from the sensor
          IINV is the bit that swaps the MLX90320 inputs INP and INM
          POSout, NEGout, Dtsout, CSout, Gnin and Gnout are MLX90320 internal nodes represented in the schematic
           of the sensor signal chain (fig 5)
          AGND is an analog ground dependent of the supply voltage VDD.
          GDIDO, GDTS, GCS form the sensor signal chain coarse gain programmable.
          FNOFF and CSOFF are respectively the sensor signal chain fine and coarse offset programmable.
          FNGAIN is the sensor signal chain fine gain programmable.
          OUT is the application mode output of the MLX90320.
The different sensor chain calibration parameters with their range will be described in the following paragraphs.
9.4.1. The Gain calibration of the sensor signal chain.
Three programmable coarse gain stages allow calibrating a wide range of sensor output spans (1.8mV/V to
63mV/V range) to the desired MLX90320 output span. Amplifier DIDO is a differential input – differential output
amplifier, while amplifier DTS and CS are dual-to-single-ended amplifiers giving a single ended output voltage
referred to the ground.
Each one of these three amplifiers is one bit programmable:
          The DIDO gain is 3.25 or 13 depending on the value of the corresponding bit stored on the address 7 of
           the EEPROM.
          The DTS gain is 1.994 or 4.96 depending on the value of the corresponding bit stored on the address 7
           of the EEPROM.
          The CS gain is 1.238 or 1.934 depending on the value of the corresponding bit stored on the address 7
           of the EEPROM.
Besides the three programmable coarse gain stages, there is also a 10 bits programmable fine gain stage within
the range 44.6% to 99%. The fine gain calibration allows an accurate adjustment of the output span. The fine
gain can be calculated by the formula:
 FN GAIN  0.446  FNGain real  0.99  0.446
                                                        Equation 1
Explanation of parameters used in equation 1:
          FNGAIN is the fine gain used in the signal sensor chain.
          FNGainreal is the value of the fine gain in the [0..1] range with 10 bits resolution.
The fine gain calibration allows also a second order compensation of the drift with temperature of the sensor
sensitivity. The value of the fine gain is given by the formula:
 FNGainreal  G0  G1  T  T1   G2  T  T1 
                                                    2
                                                        Equation 2
  REVISION 008 – DECEMBER 2016                                                                            Page 15 of 34
  3901090320


MLX90320
Automotive Sensor Interface
Explanation of parameters used in equation 2:
          T1 is the output of the temperature chain corresponding to the room temperature. The ADC of the
           temperature chain outputs 10bits but 12 bits are stored (address 0 to 2 of the EEPROM). The MSB must
           always be 0 and the other 11 bits are obtained from an average of the previous temperature readings.
           This gives more accuracy to the output of the temperature chain. The T1 value used in equation 2 is in
           the [0..1] range with an 11 bit resolution.
          G0 is the zero order fine gain coefficient (independent from the temperature) used to adjust accurately
           the output span at room temperature. 12 bits are stored (address 12 to 14 of the EEPROM) but only
           the 10 first are used. The two MSB must be 0. The G0 value used in equation 2 is in the [0..1] range with
           a 10 bit resolution.
          G1 is the first order fine gain coefficient used to compensate the sensor sensitivity drift with
           temperature. 12 bits are stored (address 8 to 10 of the EEPROM). The MSB is the sign bit (two’s
           complement): If G1[11] = 1 then G1 is negative, if G1[11] = 0 then G1 is positive. The G1 value used in
           equation 2 is in the [-2..2] range with an 11 bit resolution.
          G2 is the second order fine gain coefficient used to compensate the sensor sensitivity drift with
           temperature. 12 bits are stored (address 4 to 6 of the EEPROM). The MSB is the sign bit (two’s
           complement): If G2[11] = 1 then G2 is negative, if G2[11] = 0 then G2 is positive. The G2 value used in
           equation 2 is in the [-2..2] range with an 11 bit resolution.
The ALU computes equation 2 with 12 bits but the result is truncated to 10 bits because the Gain DAC is a 10 bit
DAC. When the MLX90320 is not able to compensate for the sensor sensitivity drift with temperature, the fine
gain calibration parameters stored in EEPROM will lead to a FNGainreal value out of the [0..1] range. In this case
the MLX90320 will indicate an overflow in the digital calculations by putting the output voltage in a fault band.
When this occurs, a reset of the chip is required to go back into the normal mode of operation. Typical total gains
with the corresponding sensor offset ranges that can be compensated can be found in table 3.
9.4.2. The Offset calibration of the sensor signal chain.
The purpose of the 7-bit offset DAC is to be able to adjust the MLX90320 output offset anywhere in the 0.5V to
4.5V range. The voltage at the output of the coarse offset DAC can be calculated by the formula:
                                 CSOff digital                                V
CSOff analog   0.905  VDD                   0.905  VDD  0.06  VDD   DD
                                     127                                      5
                                                       Equation 3
Explanation of parameters used in equation 1:
        CSOffanalog is the voltage at the output of the coarse offset DAC.
        CSOffdigital is the digital decimal value of the coarse offset (7 bits stored in address 11 and 15 of the
           EEPROM).
The voltage span at the output of the coarse offset DAC is large enough to allow the user to calibrate a
decreasing output characteristic with for example 4.5V as output offset and 0.5V as output full scale. This output
characteristic is only possible by inverting the inputs (setting the IINV bit).
  REVISION 008 – DECEMBER 2016                                                                            Page 16 of 34
  3901090320


MLX90320
Automotive Sensor Interface
Besides the programmable coarse offset, there is also a 10-bits programmable fine offset stage which allows
adjusting the MLX90320 output offset with a high resolution (at least a resolution of 0.1% of the supply voltage).
The voltage at the output of the fine offset DAC can be calculated by the formula:
                                                                                   VDD
FNOff analog  0.2272  VDD  FNOff real  0.318  VDD  0.2272  VDD  
                                                                                      5
                                                       Equation 4
Explanation of parameters used in equation 4:
        FNOffanalog is the voltage at the output of the fine offset DAC.
        FNOffreal is the value of the fine offset in the [0..1] range with a 10 bit resolution.
     VDD
The        term of equation 3 and 4 is due to the ratio-metric behaviour of the fine and coarse offset DACs.
       5
The fine offset calibration allows also a second order compensation of the temperature drift of the sensor offset.
The value of the fine offset is given by the formula:
FNOff real  O0  O1  T  T1   O2  T  T1 
                                                     2
                                                       Equation 5
Explanation of parameters used in equation 5:
          T1 is the output of the temperature chain corresponding to the room temperature. The ADC of the
           temperature chain outputs 10 bits but 12 bits are stored (address 0 to 2 of the EEPROM). The MSB
           must always be 0 and the other 11 bits are obtained from an averaging from the previous temperature
           readings. This gives more accuracy to the output of the temperature chain. The T1 value used in
           equation 5 is in the [0..1] range with an 11 bit resolution.
          O0 is the zero order fine offset coefficient (independent from the temperature) used to compensate
           accurately the sensor offset at room temperature. 12 bits are stored (address 28 to 30 of the EEPROM)
           but only the 10 first are used. The two MSB must be 0. The O0 value used in equation 5 is in the [0..1]
           range with a 10 bit resolution.
          O1 is the first order fine offset coefficient used to compensate the sensor offset drift with temperature.
           12 bits are stored (address 24 to 26 of the EEPROM). The MSB is the sign bit (two’s complement): If
           O1[11] = 1 then O1 is negative, if O1[11] = 0 then O1 is positive. The O1 value used in equation 5 is in
           the [-2..2] range with an 11 bit resolution.
          O2 is the second order fine offset coefficient used to compensate the sensor offset drift with
           temperature. 12 bits are stored (address 20 to 22 of the EEPROM). The MSB is the sign bit (two’s
           complement): If O2[11] = 1 then O2 is negative, if O2[11] = 0 then O2 is positive. The O2 value used in
           equation 5 is in the [-2..2] range with an 11 bit resolution.
The ALU computes the equation 5 with 12 bits but the result is truncated to 10 bits because the Offset DAC is a
10 bit DAC. When the MLX90320 is not able to compensate for the sensor offset drift with temperature, the fine
offset calibration parameters stored in EEPROM will lead to a FNOffreal value out of the [0..1] range. In this case
  REVISION 008 – DECEMBER 2016                                                                             Page 17 of 34
  3901090320


MLX90320
Automotive Sensor Interface
the MLX90320 will indicate an overflow in the digital calculations by putting the output voltage in a fault band.
When this occurs, a reset of the chip is required to go back into the normal mode of operation.
The MLX90320 also offers the possibility to set clamping levels to the output voltage. This allows creating fault
bands necessary to detect external and internal faults.
9.4.3. The output clamping levels
The output voltage is in application mode limited by a 3-bit programmable low and 3-bit programmable high
clamping-level. In order to set the clamping level in a high impedance node, the clamping is done at the FLT pin.
The FLT pin voltage is compared with the DA-converted value of CLAMPLOWdig and CLAMPHIGHdig. If the FLT pin
voltage is greater than the DA-converted value of CLAMPHIGHdig, then this last voltage is used as input of the
output stage. If the FLT pin voltage is smaller than the DA-converted value of CLAMPLOWdig, then this last voltage
is used as input of the output stage. The transition from in range mode to clamping mode and vice versa takes
place without overshoot.
The output pin low clamping level can be calculated by the formula :
Vout lowclamp  Lowclamp  Clamplowdig  0.013 VDD
                                                      Equation 6
Explanation of parameters used in equation 6:
          Voutlowclamp is the output pin low clamping voltage.
          Lowclamp is the lowest clamp level and has a typical value of 4%Vdd.
          Clamplowdig is the decimal value (range of 0 to 7) of the low clamp level stored in EEPROM at the
           address 19.
The output pin high clamp level can be calculated by the formula:
Vout highclamp  Highclamp  Clamphighdig  7 0.013VDD
                                                      Equation 7
Explanation of parameters used in equation 7:
          Vouthighclamp is the output pin high clamping voltage.
          Highclamp is the highest clamp level and has a typical value of 96%Vdd.
          Clamphighdig is the decimal value (range of 0 to 7) of the high clamp level stored in EEPROM at the
           address 19 and 23.
9.4.4. The Faults detection
As mentioned before, a reliable memory is obtained by storing each bit three times in the EEPROM and by using
parity check to detect data corruption and majority voting when accessing the data. Thanks to the setting of
output clamping levels, the MLX90320 output voltage goes to the fault bands to point out that a fault occurred
and that the output signal is unreliable. The MLX90320 contains circuitry which detects and diagnoses the
following faults with the loads as described and specified in and under the conditions of paragraph 5:
  REVISION 008 – DECEMBER 2016                                                                            Page 18 of 34
  3901090320


MLX90320
Automotive Sensor Interface
Internal faults
The MLX90320 will detect a Fault condition when INP and/or INM have a level outside of the 1.5 to 3.5 Volt range
(with 5 Volt supply).The MLX90320 will also detect the following faults:
    INP and/or INM open
    Sensing element supply open
    Short-circuit of INP and/or INM with VDD
    Short-circuit of INP and/or INM with GND
    Short-circuit of FLT with VDD or GND
    EEPROM parity error
When a short-circuit of FLT with VDD or GND occurs the output goes to the fault band. For all other internal faults
the output goes to the low fault band.
External faults
Short-circuit
 Output with VDD
 Output with GND
 Output with Vbat
Open circuit
 VDD open
 GND open
In all of these above mentioned fault cases, the IC will generate an output within either of the diagnostic bands.
If the ground broken wire detection is required the load has to be a pull up resistor with a typical value of
2,8kOhm that can be placed at the 90320 side or at the ECU side.
The MLX90320 goes also to fault mode when there is an overflow in the digital calculation of the fine offset or
fine gain compensation.
The MLX90320 must survive the following reversed contacts but the output does not go to the fault bands.
 Reverse polarity
 Reverse battery polarity
 Output reversed with GND
 Output reversed with VDD
  REVISION 008 – DECEMBER 2016                                                                            Page 19 of 34
  3901090320


MLX90320
Automotive Sensor Interface
9.5. Programming the MLX90320 through the output pin
Communicating with the MLX90320 only requires a limited amount of interface circuitry, software and a
computer. Melexis provides a communication equipment and belonging software such that the customer is able
to start communicating with the chip in a matter of minutes.
The output pin acts as analog output pin and as communication pin.
The drive stage of a class AB amplifier is connected to that pin to output analog signal.
For the communication the output will be sink/source current source.
Through a short circuit detection, the ASSP knows that the user requests the pin for communication.
9.5.1. Overview
When the user wants to communicate with the MLX90320, communication must be requested.
This can be achieved by short-circuiting the output pin to ground and supply level.
The ASSP detects this short and after a delay time, the same output pin turns into a half-duplex digital
communication channel.
9.5.2. Communication Initialization Request
When a new chip is supplied with 5V, before sending a first command to this chip, a power reset of 1.5ms +/-
30% is required. For the further commands with the same chip the power reset is not needed anymore.
After a communication initialization request, a delay of at least 10msec has to be taken before sending a
communication request.
  REVISION 008 – DECEMBER 2016                                                                      Page 20 of 34
  3901090320


MLX90320
Automotive Sensor Interface
9.5.3. Communication Request
 1) Pattern to enter the communication mode
                                                                                                         Short-circuit to
                                              Short-circuit to
                                                                                                             VDD                                                                  Digital Signal
                                                  VDD
                       analog signal
         COM pin :                                                                                                             Short-circuit to the GROUND
                                                     Short-circuit to the GROUND
                                         1.5ms +-                1.5ms +-                                     1.5ms +-                                    1.5ms +-
                                                                               <1ms                                                                                                                     < 90ms
                                           30%                     30%                                          30%                                         30%
 2) First case : the analog level is quite high :
                                                                                                                                                                                              HIGH Level has
      COM pin :
                                                                                                                                                                                              been detected
                                                                                                                                    A SC and a LOW level should
               IRQ :
                                                            Has to stay LOW                                                                                       Has to stay   A HIGH level should be
                                                                                     A LOW level should
                                                             at min 1.0 ms                                                                                         LOW at        detected within 3 ms            Waiting for the first bit = 90 ms
                                                                                     be seen within 3 ms
                                                             at max 2.0 ms                                                                                        min 1.0 ms
                                                                                                                                                                  at max 2.0
                                                                                                                                        be seen within 3 ms
                                                                                                                                                                      ms
 3) Second case : the analog level is quite low :
          COM pin :                                                                                                                                                                           HIGH Level has
                                                                                                                                                                                               been detected
                                                                                       A SC and a HIGH level should
               IRQ :
                                                                                                                      Has to stay
                                       Has to stay HIGH                                                                                     A HIGH level should be
                                                            A HIGH level should be                                     HIGH at
                                        at min 1.0 ms                                                                                        detected within 3 ms
                                                               seen within 3 ms                                       min 1.0ms
                                        at max 2.0 ms                                                                                                                                                             Waiting for the first bit = 90 ms
                                                                                                                       at max
                                                                                                                        2.0ms
                                                                                           be seen within 3 ms
The default mode is the receive mode. The user has to send a valid command to the interface chip.
9.5.4. Bit format
The bit is coded into a pulse width modulated format (PWM).
PWM format has no need for message frame synchronization. This has the advantage that the receive speed can
differ from the transmit speed. There is no configuration needed, the receiver can work with various bit rates.
     1                                    5 Volts
                                          0 Volt
                                          5 Volts
     0
                                          0 Volt
A valid bit always starts with a falling edge. This means that after making a communication request by shorting to
ground, the user must reset the output line to high status.
 REVISION 008 – DECEMBER 2016                                                                                                                                                                                                                         Page 21 of 34
 3901090320


 MLX90320
 Automotive Sensor Interface
 Duty cycle:               30 / 70% (min = 20 / 80%, max = 40 / 60%)
 Period: (Over total clock frequency range)
          Data sent by the MLX90320                                            Data received by the MLX90320
                 Period Length (µs)                                                              Period Length (µs)
 Minimum                 Typical                 Maximum                     Minimum                        Typical           Maximum
          1                 510                           695                    1250                          1700              2250
 9.5.5. Commands
 All delays mentioned below are calculated for a typical clock-frequency of 4 MHz.
 The clock frequency can differ +/- 15% on each chip. The delays will vary proportionally.
 Stop communication mode
        COMIN                                                                                                                            STOP bit
                                                                                                                                                                                           Normal Mode
                          1          0                      0             0            0                  0              0      0         ( =0 )
                                                                                                                                                           50 us
 Stop the communication, ASSP goes back into normal mode.
 A new communication request is needed to get back into communication mode.
 Reply A5
    COMIN                                                                                  STOP bit
                 0      1      0      0              0           0      0      0            ( =0 )                                                                                          Next command
                                                                                                                                                                             min. = 150 us
                                                                                             100 us                                                                          MAX. = 5 ms
    COMO
                                                                                                            1         0    1     0   0      1               0          1 STOP bit
                                                                                                                                                                          ( =0 )
 Command to see whether or not the ASSP is still in communication mode.
 If so, the ASSP shall respond $A5.
 Write to EEPROM
COMIN                                            STOP bit                                        STOP bit                                        STOP bit
        0    0   1   0    0   0   0     0         ( =0 )                                           ( =0 )                                           ( =0 )
                                                         min. = 150 us       Address                         min. = 4,8 ms          Data                                      Next command
                                                                                                                                                           min. = 18 ms
                                                         MAX. = 5 ms                                        MAX. = 10 ms
 Write to a specific address. The address in the EEPROM is coded with 8 bits. As the EEPROM has 64 addresses the
 two first address bits should be 0. The data to store in one EEPROM address is coded with 8 bits. As each
 EEPROM address stores 4 calibration data bits and one parity bit, the 3 first data bits from the data byte should
 be 0.
 Read from EEPROM
COMIN                                   STOP bit                                   STOP bit                                                                min. = 120 us
      0    0   0   1   0    0   0  0      ( =0 )  min. = 120 us                     ( =0 )
                                                                       Address                                                                             MAX. = 5 ms        Next command
                                                   MAX. = 5 ms
                                                                                               70 us
                                                                                                                                             STOP bit
COMO                                                                                                                                          ( =0 )
                                                                                                                           Data
 Read a specific address. The address in the EEPROM is coded with 8 bits. As the EEPROM has 64 addresses the
 two first address bits should be 0. A data byte is returned when reading the data from one EEPROM address but
 actually it contains four calibration data bits and one parity bit. So the 3 first bits read from an EEPROM address
 should be 0.
    REVISION 008 – DECEMBER 2016                                                                                                                                                                  Page 22 of 34
    3901090320


 MLX90320
 Automotive Sensor Interface
 Read ADC value of the temperature.
COMIN                        STOP bit                                                             min. = 130 us
      0 0   0 0   0 0  0   1  ( =0 )  min. = 200 us                                               MAX. = 5 ms      Next command
                                      MAX. = 5 ms
                                                                                         STOP bit
COMO                                                                                      ( =0 )
                                                                      Data
 Read the digital temperature value.
 The ASSP is sending back the first byte, followed a few μs later by the second byte.
 One must readout 10bits data from these two byte.
 The first byte are the 8 MSB bits of the ADC. The two highest bits of the second byte are the LSB bits of the ADC.
 Lock EEPROM
 To avoid unwanted rewriting of the EEPROM content in the field, it is strongly recommended to lock the
 EEPROM after calibration has been finished. For that purpose the ‘Lock EEPROM’ command can be
 used. The customer cannot undo the ‘Lock EEPROM’ command. This can only be done by Melexis using
 a special setup.
 INM or INP connected to output
 Test INP
      COMIN                                                            STOP bit
                                                                                                         Test Mode
                0        0          0             0  1   0   0   0       ( =0 )
                                                                                   50 us
 Connect INP input pin to the output. This mode can be left only by resetting the chip.
 Test INM
      COMIN                                                          STOP bit
                                                                                                    Test Mode
                0      0         0              0   0  1   0   0      ( =0 )
                                                                                50 us
 Connection INM input pin to the output. This mode can be left only by resetting the chip.
 With communication one can select a mode where the INM or the INP signal is connected to the output. The chip
 stays in that mode until a reset is given. This can be used for failure analysis.
    REVISION 008 – DECEMBER 2016                                                                                                Page 23 of 34
    3901090320


MLX90320
Automotive Sensor Interface
10. Unique Features
Offset canceling
The offset of amplifier DIDO is cancelled by using a chopping mechanism. Also the amplifier DTS and all sample-
and-hold circuits make use of an offset canceling mechanism. This means that the contribution of the on-chip
offsets and offset drifts is negligible compared to the external sensor offset and offset drift.
Coarse and fine second order calibration of the sensitivity and offset.
The MLX90320 can be calibrated to achieve 4V output span for a sensor output span in the 1.8mV/V to 63mV/V
and can compensate 0.4mV/V to 97.2mV/V input offset depending on the sensor output span and on the desired
MLX90320 output offset voltage. A wide range of sensor sensitivity and offset temperature drift can be
compensated with the second order fine gain and offset calibration.
Clamping levels and fault detection on signal
The user can program a low and a high output voltage clamping level and thus create fault bands. Thanks to the
fault bands creation, internal or external faults can be detected because they force the output voltage to go into
a fault band. See paragraph 6 for more detailed explanations.
EEPROM
All the calibration data is stored three times in the EEPROM and a majority voting is used when accessing data.
Parity check is used to diagnose data corruption. After all calibrations parameters were successfully written to
EEPROM, the EEPROM can be locked by sending a ‘Lock EEPROM’ command (see paragraph 6). This is strongly
recommended to avoid in application mode data corruption.
  REVISION 008 – DECEMBER 2016                                                                         Page 24 of 34
  3901090320


MLX90320
Automotive Sensor Interface
11. Typical applications circuits
11.1. Ratio-metric mode with use of external temperature sensor.
The external temperature sensor is needed for applications where the temperature surrounding the customer
sensor is different from the temperature surrounding the MLX90320. In the ratio-metric application mode, to
keep the accuracy, the same supply should be used for the customer sensor, the MLX90320 and an ADC that
makes the digital conversion of the analog output signal.
The capacitor C1 on the output is typical 47nF. Range: 0 – 100nF.
The capacitor C2 on the FLT pin is optional. Typical value = 10nF. Range: 0 – 100nF. It is used to decrease the
noise and set the bandwidth of the system.
An estimation of the MLX90320 bandwidth versus the capacitor at the FLT pin is given by the formula:
                     1
 BW3dB 
            2  2k  CFLT
The decoupling capacitors C3 between the supply and the ground and C4 between output and supply have a
typical value of 47nF.
The external resistor R1 is placed between the TMP pin and the supply. It is used as an external temperature
sensor. The external temperature sensor could be of type Panasonic, ERAS15J103V (R1 = 10k +/- 5%, TCR =
1500ppm/degC +/- 200ppm/degC) for the -40ºC to 140ºC temperature range. If the ground broken wire
detection is required the load has to be a pull up resistor R2 with a typical value of 2.8kOhm that can be placed at
the
90320 side or at the ECU side.
  REVISION 008 – DECEMBER 2016                                                                           Page 25 of 34
  3901090320


MLX90320
Automotive Sensor Interface
11.2. Ratio-metric mode without use of external temperature sensor.
C1, C2, C3, C4 and R2 have the same values as for the ratio-metric application with use of external temperature
sensor.
The internal temperature sensor can be used when the temperature surrounding the customer sensor and the
MLX90320 is the same.
11.3. Non Ratio-metric mode with use of external temperature sensor.
With the use of an external voltage regulator to supply the sensor, the MLX90320 as well as the ADC used to
convert the analog output signal, the MLX90320 can be used in a non ratio-metric mode. An example of standard
voltage regulator is the LM7805. C1, C2, R1 and R2 are the same as in the ratio-metric application mode. C4 has a
typical value of 330nF and C3 of 100nF in this application mode.
  REVISION 008 – DECEMBER 2016                                                                        Page 26 of 34
  3901090320


MLX90320
Automotive Sensor Interface
11.4. Non Ratio-metric mode without use of external temperature sensor.
In this application mode the LM7805 generates the supply for the sensor, for the MLX90320 and for the ADC used
to convert the analog output signal in a digital value. C1, C2, C3, C4 and R2 are the same as in the non ratio-
metric application mode with external temperature sensor.
12. EEPROM Contents
Address              Bits      EEPROM content               Comments
Decimal
0 to 2               0 to 3     T1 for Gain DAC             Contains the value of T1 used to calculate the fine gain
                                                            in order to operate the second order compensation of
                                                            the sensor span drift with temperature.
3                    0 to 3    CLKADJ[3..0]                 These bits are used to program the oscillator. If
                                                            CLKADJ[3:0] = 1111, the oscillator runs at the highest
                                                            frequency. If CLKADJ[3:0] = 0000, the oscillator runs at
                                                            the slowest frequency. This calibration is required to
                                                            calibrate the oscillator within +/-15% accuracy. A bad
                                                            oscillator calibration may cause malfunction of the
                                                            communication protocol thus it is only factory set.
4 to 6               0 to 3    G2 for Gain DAC              Contains the second order fine gain coefficient used to
                                                            compensate the sensor sensitivity drift with
                                                            temperature.
                                                            The MSB is the sign bit (two’s complement): If G2[11] =
                                                            1 then G2 is negative, if G2[11] = 0 then G2 is positive.
7                    0         IINV                         Bit used to invert the inputs
7                    1 to 3    CG[2..0]                     3 bits used to operate the coarse gain calibration.
                                                            CG[2:0] = 111 means maximum gain (13*5*1.9375) and
                                                            CG[2:0] = 000 means minimum gain (3.25*2*1.24).
  REVISION 008 – DECEMBER 2016                                                                           Page 27 of 34
  3901090320


MLX90320
Automotive Sensor Interface
8 to 10              0 to 3    G1 for Gain DAC   Contains the first order fine gain coefficient used to
                                                 compensate the sensor sensitivity drift with
                                                 temperature.
                                                 The MSB is the sign bit (two’s complement): If G1[11] =
                                                 1 then G1 is negative, if G1[11] = 0 then G1 is positive.
11                   0 to 3    CSOF[6..0]        7 bits used to operate the coarse offset calibration.
15                   1 to 3
12 to 14             0 to 3    G0 for Gain DAC   Contains the zero order fine gain coefficient
                                                 (independent from the temperature) used to adjust
                                                 accurately the output span at room temperature. 12
                                                 bits are stored but only the 10 first are used. The two
                                                 MSB must be 0.
15                   0         ClampSet          Bit used to enable(when ClampSet =1) or disable(when
                                                 Clampset=0) the clamping
16 to 18             0 to 3    T1 for Offset DAC Contains the value of T1 used to calculate the fine
                                                 offset in order to operate the second order
                                                 compensation of the offset drift with temperature.
19                   0 to 3    CLAMP[5..0]       6 bits used for calibrating the clamping levels.
23                   2 and 3                     CLAMP[2:0] are used for the low clamp levels (000
                                                 gives 4% at output and 111 gives 14% at output) and
                                                 CLAMP[5:3] are used for the high clamp levels (000
                                                 gives 86% at output and 111 gives 96% at output).
20 to 22             0 to 3    O2 for Offset DAC Contains the second order fine offset coefficient used
                                                 to compensate the offset drift with temperature.
                                                 The MSB is the sign bit (two’s complement): If O2[11] =
                                                 1 then O2 is negative, if O2[11] = 0 then O2 is positive.
23                   0         TMP_OFFSET[4:0]   These 5 bits are used to calibrate the offset of the
27                   0 to 3                      external temperature sensor. If TMP_OFFSET[4:0] =
                                                 11111 then the TMP pin has the lowest voltage. If
                                                 TMP_OFFSET[4:0] = 00000 then the TMP pin has the
                                                 highest voltage. Goal is to calibrate in the
                                                 neighbourhood of 2.5V. The internal temperature
                                                 sensor offset calibration is only factory set.
23                   1         TMP_SELECT        Bit used to choose between an internal or an external
                                                 temperature sensor. If TMP_SELECT=1 then the internal
                                                 temperature sensor is chosen else an external
                                                 temperature sensor is needed.
24 to 26             0 to 3    O1 for Offset DAC Contains the first order fine offset coefficient used to
                                                 compensate the offset drift with temperature.
                                                 The MSB is the sign bit (two’s complement): If O1[11] =
                                                 1 then O1 is negative, if O1[11] = 0 then O1 is positive.
28 to 30             0 to 3    O0 for Offset DAC Contains the zero order fine offset coefficient
                                                 (independent from the temperature) used to
                                                 compensate accurately the sensor offset at room
                                                 temperature. 12 bits are stored but only the 10 first are
                                                 used. The two MSB must be 0.
31                   0         NOT USED
31                   1 to 3    TMP_GAIN[2:0]     These 3 bits are used to calibrate the gain of the
                                                 external temperature sensor. If TMP_GAIN[2:0] = 111,
                                                 the gain is the highest. If TMP_GAIN[2:0] = 000, the
  REVISION 008 – DECEMBER 2016                                                                  Page 28 of 34
  3901090320


MLX90320
Automotive Sensor Interface
                                                           gain is the lowest. The gain is calibrated in that way
                                                           that the temperature sensor output is within the ADC
                                                           range. The internal temperature sensor gain calibration
                                                           is only factory set.
32 to 54            0 to 4      Customer                   EEPROM space for the customer use. Can be used for
                                                           example to store an ID number and the date.
55 to 63            0 to 4      Melexis                    EEPROM space for Melexis use only.
                                      Table 4 EEPPROM contents description.
        Address\bits          0            1           2            3           4
              0            T1[0]         T1[1]       T1[2]        T1[3]       Parity
              1            T1[4]         T1[5]       T1[6]        T1[7]       Parity
              2            T1[8]         T1[9]      T1[10]     T1[11]         Parity
              3          CLKADJ3        CLKADJ2    CLKADJ1      CLKADJ0       Parity
              4            G2[0]         G2[1]      G2[2]         G2[3]       Parity
              5            G2[4]         G2[5]      G2[6]         G2[7]       Parity
              6            G2[8]         G2[9]      G2[10]       G2[11]       Parity
              7             IINV          CG2        CG1           CG0        Parity
              8            G1[0]         G1[1]      G1[2]         G1[3]       Parity
              9            G1[4]         G1[5]      G1[6]         G1[7]       Parity
             10            G1[8]         G1[9]      G1[10]       G1[11]       Parity
             11            CSOF3         CSOF2      CSOF1        CSOF0        Parity
             12            G0[0]         G0[1]      G0[2]         G0[3]       Parity
             13            G0[4]         G0[5]      G0[6]         G0[7]       Parity
             14            G0[8]         G0[9]      G0[10]       G0[11]       Parity
             15          ClampSet        CSOF6      CSOF5        CSOF4        Parity
             16            T1[0]         T1[1]       T1[2]        T1[3]       Parity
             17            T1[4]         T1[5]       T1[6]        T1[7]       Parity
             18            T1[8]         T1[9]      T1[10]       T1[11]       Parity
             19           Clamp3        Clamp2     Clamp1        Clamp0       Parity
             20            O2[0]         O2[1]      O2[2]         O2[3]       Parity
             21            O2[4]         O2[5]      O2[6]         O2[7]       Parity
             22            O2[8]         O2[9]      O2[10]       O2[11]       Parity
             23         TMP_offse      TMP_sele    Clamp5        Clamp4       Parity
                              t0           ct
             24            O1[0]         O1[1]      O1[2]         O1[3]       Parity
             25            O1[4]         O1[5]      O1[6]         O1[7]       Parity
             26            O1[8]         O1[9]      O1[10]       O1[11]       Parity
             27         TMP_offse      TMP_offs   TMP_offse    TMP_offse      Parity
                              t4          et3         t2            t1
             28            O0[0]         O0[1]      O0[2]         O0[3]       Parity
             29            O0[4]         O0[5]      O0[6]         O0[7]       Parity
             30            O0[8]         O0[9]      O0[10]       O0[11]       Parity
             31          Not used     TMP_gain    TMP_gain     TMP_gain       Parity
                                           2           1            0
                                     Table 5 EEPROM calibration data contents
 REVISION 008 – DECEMBER 2016                                                                         Page 29 of 34
 3901090320


MLX90320
Automotive Sensor Interface
            32           Cust     Cust      Cust      Cust      Cust
            33           Cust     Cust      Cust      Cust      Cust
            34           Cust     Cust      Cust      Cust      Cust
            35           Cust     Cust      Cust      Cust      Cust
            36           Cust     Cust      Cust      Cust      Cust
            37           Cust     Cust      Cust      Cust      Cust
            38           Cust     Cust      Cust      Cust      Cust
            39           Cust     Cust      Cust      Cust      Cust
            40           Cust     Cust      Cust      Cust      Cust
            41           Cust     Cust      Cust      Cust      Cust
            42           Cust     Cust      Cust      Cust      Cust
            43           Cust     Cust      Cust      Cust      Cust
            44           Cust     Cust      Cust      Cust      Cust
            45           Cust     Cust      Cust      Cust      Cust
            46           Cust     Cust      Cust      Cust      Cust
            47           Cust     Cust      Cust      Cust      Cust
            48           Cust     Cust      Cust      Cust      Cust
            49           Cust     Cust      Cust      Cust      Cust
            50           Cust     Cust      Cust      Cust      Cust
            51           Cust     Cust      Cust      Cust      Cust
            52           Cust     Cust      Cust      Cust      Cust
            53           Cust     Cust      Cust      Cust      Cust
            54           Cust     Cust      Cust      Cust      Cust
            55           Mlx      Mlx        Mlx       Mlx       Mlx
            56           Mlx      Mlx        Mlx       Mlx       Mlx
            57           Mlx      Mlx        Mlx       Mlx       Mlx
            58           Mlx      Mlx        Mlx       Mlx       Mlx
            59           Mlx      Mlx        Mlx       Mlx       Mlx
            60           Mlx      Mlx        Mlx       Mlx       Mlx
            61           Mlx      Mlx        Mlx       Mlx       Mlx
            62           Mlx      Mlx        Mlx       Mlx       Mlx
            63           Mlx      Mlx        Mlx       Mlx       Mlx
                    Table 6 EEPROM contents of Customer and Melexis general purpose data
 REVISION 008 – DECEMBER 2016                                                            Page 30 of 34
 3901090320


MLX90320
Automotive Sensor Interface
13. Standard information regarding manufacturability of Melexis products
with different soldering processes
Our products are classified and qualified regarding soldering technology, solderability and moisture sensitivity
level according to following test methods:
Reflow Soldering SMD’s (Surface Mount Devices)
   IPC/JEDEC J-STD-020
    Moisture/Reflow Sensitivity Classification for Nonhermetic Solid State Surface Mount Devices
    (classification reflow profiles according to table 5-2)
   EIA/JEDEC JESD22-A113
    Preconditioning of Nonhermetic Surface Mount Devices Prior to Reliability Testing
    (reflow profiles according to table 2)
Wave Soldering SMD’s (Surface Mount Devices) and THD’s (Through Hole Devices)
   EN60749-20
    Resistance of plastic- encapsulated SMD’s to combined effect of moisture and soldering heat
   EIA/JEDEC JESD22-B106 and EN60749-15
    Resistance to soldering temperature for through-hole mounted devices
Iron Soldering THD’s (Through Hole Devices)
   EN60749-15
    Resistance to soldering temperature for through-hole mounted devices
Solderability SMD’s (Surface Mount Devices) and THD’s (Through Hole Devices)
   EIA/JEDEC JESD22-B102 and EN60749-21
    Solderability
For all soldering technologies deviating from above mentioned standard conditions (regarding peak temperature,
temperature gradient, temperature profile etc) additional classification and qualification tests have to be agreed
upon with Melexis.
The application of Wave Soldering for SMD’s is allowed only after consulting Melexis regarding assurance of
adhesive strength between device and board.
Melexis is contributing to global environmental conservation by promoting lead free solutions. For more
information on qualifications of RoHS compliant products (RoHS = European directive on the Restriction Of the
use of certain Hazardous Substances) please visit the quality page on our website:
http://www.melexis.com/quality.aspx
  REVISION 008 – DECEMBER 2016                                                                          Page 31 of 34
  3901090320


MLX90320
Automotive Sensor Interface
14. Package Information
 REVISION 008 – DECEMBER 2016 Page 32 of 34
 3901090320


MLX90320
Automotive Sensor Interface
 REVISION 008 – DECEMBER 2016 Page 33 of 34
 3901090320


MLX90320
Automotive Sensor Interface
15. Contact
For the latest version of this document, go to our website at www.melexis.com.
For additional information, please contact our Direct Sales team and get help for your specific
needs:
Europe, Africa                  Telephone: +32 13 67 04 95
                                Email : sales_europe@melexis.com
Americas                        Telephone: +1 603 223 2362
                                Email : sales_usa@melexis.com
Asia                            Email : sales_asia@melexis.com
16. Disclaimer
The information furnished by Melexis herein (“Information”) is believed to be correct and accurate. Melexis disclaims (i) any and all liability in connection
with or arising out of the furnishing, performance or use of the technical data or use of the product(s) as described herein (“Product”) (ii) any and all liability,
including without limitation, special, consequential or incidental damages, and (iii) any and all warranties, express, statutory, implied, or by description,
including warranties of fitness for particular purpose, non-infringement and merchantability. No obligation or liability shall arise or flow out of Melexis’
rendering of technical or other services.
The Information is provided "as is” and Melexis reserves the right to change the Information at any time and without notice. Therefore, before placing orders
and/or prior to designing the Product into a system, users or any third party should obtain the latest version of the relevant information to verify that the
information being relied upon is current.
Users or any third party must further determine the suitability of the Product for its application, including the level of reliability required and determine
whether it is fit for a particular purpose.
The Information is proprietary and/or confidential information of Melexis and the use thereof or anything described by the Information does not grant,
explicitly or implicitly, to any party any patent rights, licenses, or any other intellectual property rights.
This document as well as the Product(s) may be subject to export control regulations. Please be aware that export might require a prior authorization from
competent authorities.
The Product(s) are intended for use in normal commercial applications. Unless otherwise agreed upon in writing, the Product(s) are not designed, authorized
or warranted to be suitable in applications requiring extended temperature range and/or unusual environmental requirements. High reliability applications,
such as medical life-support or life-sustaining equipment are specifically not recommended by Melexis.
The Product(s) may not be used for the following applications subject to export control regulations: the development, production, processing, operation,
maintenance, storage, recognition or proliferation of 1) chemical, biological or nuclear weapons, or for the development, production, maintenance or
storage of missiles for such weapons: 2) civil firearms, including spare parts or ammunition for such arms; 3) defense related products, or other material for
military use or for law enforcement; 4) any applications that, alone or in combination with other goods, substances or organisms could cause serious harm to
persons or goods and that can be used as a means of violence in an armed conflict or any similar violent situation.
The Products sold by Melexis are subject to the terms and conditions as specified in the Terms of Sale, which can be found
at https://www.melexis.com/en/legal/terms-and-conditions.
This document supersedes and replaces all prior information regarding the Product(s) and/or previous versions of this document.
Melexis NV © - No part of this document may be reproduced without the prior written consent of Melexis. (2016)
ISO/TS 16949 and ISO14001 Certified
   REVISION 008 – DECEMBER 2016                                                                                                                    Page 34 of 34
   3901090320


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Melexis:
 MLX90320LFR-BBA-000-SP MLX90320LFR-BBA-000-RE MLX90320LFR-BBA-000-TU
