Freescale Semiconductor                                                                         Document Number: MC33793
Technical Data                                                                                                     Rev 15.0, 2/2014
Distributed System Interface (DSI)
Sensor Interface                                                                                    33793/A
The 33793 is a slave Distributed System Interface (DSI) device that is
optimized as a sensor interface. The device contains circuits to power
sensors such as accelerometers and to digitize the analog level from the              DISTRIBUTED SYSTEM INTERFACE
sensor. The device is controlled by commands over the DSI bus and
returns measured data over the bus. This device is powered using
SMARTMOS technology.
Features
   •  Conforms to DSI specification version 1
   •  4-channel, 8-Bit analog-to-digital converter (ADC)
                                                                                                         SCALE 2:1
   •  4 pins configurable as analog or logic inputs or as logic outputs
   •  Provides regulated +5.0 V output for sensor power from bus                                 EF SUFFIX (Pb-FREE)
                                                                                                    98ASB42566B
   •  Additional high-drive logic output                                                             16-PIN SOICN
   •  Undervoltage fault detection and signaling
   •  On-board clock (no external elements required)                          Applications
   •  Field-programmable address                                              • Simple bus-controlled part for remote control and
                                                                                 sensing
   •  Default and field-programmable as a DSI daisy chain device
                                                                              • Automotive, aircraft, marine and industrial control
   •  Recognizes reverse initialization for open bus fault tolerance             and safety systems
   •  Detects short to battery on bus switch and prevents its closure         • Heating and air-conditioning
                                        33790
                                           GND
                                           DSIO
                                       X-Y                      33793
                                  Accelerometer                                        Multiple
                                                          BUSIN     BUSRTN            DSI Slaves
                                           Error          I/O0
                                           Test           I/O1
                                              X           I/O2                        33793
                                              Y           I/O3      BUSOUT      BusIN
                                                          H_Cap
                                            VCC           REGOUT
                                      GND                 LOGOUT
                                                                AGND
                                             Figure 1. 33793 Simplified Application Diagram
© Freescale Semiconductor, Inc., 2006-2014. All rights reserved.


ORDERABLE PARTS
                                              ORDERABLE PARTS
Table 1. Orderable Part Variations
Part Number                     Temperature (TA)   Package    Other Significant Device Variations
 MCZ33793EF/R2                                                Existing capacity
                                -40 to 150 °C      16 SOICN
 MCZ33793AEF/R2                                               Capacity expansion
33793
                                                                  Analog Integrated Circuit Device Data
2                                                                               Freescale Semiconductor


                                                                                                                       INTERNAL BLOCK DIAGRAM
                                                    INTERNAL BLOCK DIAGRAM
                                                                                                                                         HCAP
                                                                                           Rectifiers
 BUSIN
                                                                      Bus Switch                                                         BUSOUT
                                                               0 – 35 V Bi-Directional
                  Forward Receiver                                                                         Reverse Receiver
                                       Data                                                           Data
                                                                                Response
                                                                                Current
                                      Frame                                     0 –11 mA             Frame
                                                                                7.0 mA/S
                                                                                                                                         BUSRTN
                                                      Received
                Bandgap                               Message                                                        Bandgap
                                                      from MCU              Bus Return
                Reference                                                                                            Reference
                                         Oscillator                        Logic
                                          4.0 MHz                   Command Decode
                                                                       State Machine
                                     DataOut <3:0>                                                                                       LOGOUT
                                                                 Response Generation
                                                                                                                            Logic Out
                  I/O Buffers                                                                                               High Current
                                                                                              4
                              DataOut <0>                                                                    Power          Buffer
                                                                                    Address A<3:0>       Management
    IO0                                                                               4 Bits NVM        5.0 V Regulator
                              DataOut <1>                                                                BG Reference
                                                                                                         Bias Currents
    IO1                       DataOut <2>
                                                                                                                                         GND
                                                                               SEL
                                                                                                       Supply Comparators
    IO2                                                           I/O0
                              DataOut <3>                                                                     POR
                                                                  I/O1
                                                                           4:1         ADC
    IO3                                                           I/O2    MUX         8 Bits          Undervoltage
                               I/O<3:0>                           I/O3                                   Detector
                                                                                                                          BG
                                            Figure 2. 33793 Simplified Internal Block Diagram
                                                                                                                                              33793
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                                          3


PIN CONNECTIONS
                                                   PIN CONNECTIONS
                                              BUSRTN       1          16      BUSOUT
                                                   I/O0    2          15      NC
                                                  AGND     3          14      BUSIN
                                                   I/O1    4          13      NC
                                                  AGND     5          12      H_CAP
                                                   I/O3    6          11      REGOUT
                                                     NC    7          10      NC
                                                   I/O2    8           9      LOGOUT
                                                Figure 3. 33793 Pin Connections
Table 2. 33793 Pin Definitions
A functional description of each pin can be found in the Functional Pin Description section beginning on page 10.
 Pin Number      Pin Name   Pin Function    Formal Name                                         Definition
 1             BUSRTN       Power        Bus Return           This pin provides the common return for power and signalling.
 2             I/O0         Input/Output Logic I/O            This pin can be used to provide a logic level output, a logic input, or an
                                                              analog-to-digital (A/D) input.
 3, 5          AGND         Ground       Analog Ground        This pin is the low reference level and power return for the analog-to-digital
                                                              converter (ADC).
 4             I/O1         Input/Output Logic I/O            This pin can be used to provide a logic level output, a logic input, or an
                                                              A/D input.
 6             I/O3         Input/Output Logic I/O            This pin can be used to provide a logic level output, a logic input, or an
                                                              A/D input.
 7, 10, 13, 15 NC           No Connect   No Connect           These pins have no internal connections.
 8             I/O2         Input/Output Logic I/O            This pin can be used to provide a logic level output, a logic input, or an
                                                              A/D input.
 9             LOGOUT       Output       Logic Out            This is a logic output with higher pull-up drive capability than the standard
                                                              logic I/O.
 11            REGOUT       Output       Regulator Output     This pin provides a regulated 5.0 V output. The power is derived from the
                                                              bus.
 12            H_CAP        Output       Holding Capacitor    A capacitor attached to this pin is charged by the bus during bus idle and
                                                              supplies current to run the device and for external devices via the
                                                              REGOUT pin during non-idle periods.
 14            BUSIN        Input        DSI Bus Input        This pin attaches to the bus and responds to initialization commands.
 16            BUSOUT       Output       DSI Bus Output       This pin attaches to the bus and responds to reverse initialization
                                                              commands.
33793
                                                                                               Analog Integrated Circuit Device Data
4                                                                                                             Freescale Semiconductor


                                                                                                           ELECTRICAL CHARACTERISTICS
                                                                                                                       MAXIMUM RATINGS
                                              ELECTRICAL CHARACTERISTICS
                                                              MAXIMUM RATINGS
Table 3. Maximum Ratings
All voltages are with respect to ground unless otherwise noted. Exceeding these ratings may cause a malfunction or permanent
damage to the device.
                                     Ratings                                            Symbol                  Value               Unit
ELECTRICAL RATINGS
 I/O Pin Voltage                                                                    VIO              -0.3 to VREGOUT + 0.5    V
 I/O Pin Current                                                                    IIO              5.0                      mA
 BUSIN, BUSOUT, BUSRTN, and H_CAP Voltage                                           VIN              -0.3 to 40               V
 BUSIN, BUSOUT, BUSRTN, and H_CAP Current (Continuous)                              IIN              250                      mA
 ESD Protection  (1)                                                                                                         V
     Human Body Model                                                               VESD1            2000
     Machine Model                                                                  VESD2            200
THERMAL RATINGS
 Storage Temperature                                                                TSTG             -55 to 150               C
 Operating Junction Temperature                                                     TJ               -40 to 150               C
 Peak Package Reflow Temperature During Reflow        (2) (3)
                                                         ,                          TPPRT             Note 3.                        °C
 Thermal Resistance Junction to Case                                                RJC             150                      C/W
Notes
    1. ESD1 performed in accordance with the Human Body Model (CZAP = 100 pF, RZAP = 1500 ), ESD2 performed in accordance with the
        Machine Model (CZAP = 200 pF, RZAP = 0 ).
    2.  Pin soldering temperature limit is for 10 seconds maximum duration. Not designed for immersion soldering. Exceeding these limits may
        cause malfunction or permanent damage to the device.
    3.  Freescale’s Package Reflow capability meets Pb-free requirements for JEDEC standard J-STD-020C. For Peak Package Reflow
        Temperature and Moisture Sensitivity Levels (MSL), Go to www.freescale.com, search by part number [e.g. remove prefixes/suffixes
        and enter the core ID to view all orderable parts. (i.e. MC33xxxD enter 33xxx), and review parametrics.
                                                                                                                                         33793
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                                     5


ELECTRICAL CHARACTERISTICS
STATIC ELECTRICAL CHARACTERISTICS
                                           STATIC ELECTRICAL CHARACTERISTICS
Table 4. Static Electrical Characteristics
    Characteristics noted under conditions -0.3 V  VBUSIN or VBUSOUT  30 V, 5.5 V < VH_CAP < 30 V, -40C < TA < 85C unless
otherwise noted. Typical values noted reflect the approximate parameter means at TA = 25°C under nominal conditions unless
otherwise noted.
                              Characteristic                           Symbol          Min         Typ        Max        Unit
 Internal Quiescent Current Drain                                  IQ                                                 mA
     VH_CAP = 25 V, Logout = 0, I/O = Input                                        –           –          3.0
 BUSIN or BUSOUT to H_CAP Rectifier Voltage Drop                   VRECT                                              V
     IBUSIN or IBUSOUT = 15 mA                                                     –           0.75       1.0
     IBUSIN or IBUSOUT = 100 mA                                                    –           0.9        1.2
 BUSIN + BUSOUT Bias Current                                       IBIAS                                              A
     VBUSIN or VBUSOUT = 8.0 V, VH_CAP = 9.0 V                                     -100        –          100
     VBUSIN or VBUSOUT = 0.5 V, VH_CAP = 25 V                                      –           –          20
 Rectifier Leakage Current                                         IRLKG                                              A
     VBUSIN or VBUSOUT = 5.0 V, VH_CAP = 25 V                                      -20         –          100
 Reg0ut                                                            VREG                                               V
     5.5 V > VH_CAP > 25 V, IRO = 12 mA                                            4.75        5.0        5.25
 RegOut Line Regulation                                            VRLINE                                             mV
     IRO = 12 mA, 5.5 V > VH_CAP > 25 V                                            –           71         180
 RegOut Load Regulation                                            VRLD                                               mV
     IRO = 0 to 12 mA, 5.5 V > VH_CAP > 25 V                                       –           2.3        100
 Undervoltage Lockout                                              VUVL                                               VRO
     Proportional to unloaded VREGOUT                                              0.93        0.95       0.97
 Bus Switch Resistance                                             RSW                                                
     VBI = 8.0 V, IBO = -80 mA (Bus Switch Active)                                 –           4.0        8.0
 I/O0 and I/O3 Pull-down Current                                   IPD                                                A
     0 < VBUSIN or VBUSOUT < 1.0 V                                                 7.0         11         13
 I/O1 and I/O2 Pull-up Current                                     IPU                                                A
     VRO < VBUSIN or VBUSOUT < VRO - 1.0 V                                         -7.0        -11        -13
 BUSIN and BUSOUT Logic Thresholds                                                                                    V
     Low                                                           VTHL            2.8         3.0        3.2
     High                                                          VTHH            5.5         6.0        6.5
 Logic Duty Cycle (assured by design)                                                                                 %
     Logic 0                                                       DCL             10          33         40
     Logic 1                                                       DCH             60          67         90
 BUSIN + BUSOUT Response Current, VBUSIN and/or VBUSOUT = 4.0 V    IRSP                                               mA
     MCZ339793EF                                                                   9.9         11         12.1
     MCZ33793AEF                                                                   9.0         11         12.5
 ADC Code Conversion Error (INL)                                   ADCINL          –           –          < 1.0       LSB
 ADC Full-scale Error                                              ADCFS           –           –          3           counts
 I/O Logic Input Thresholds                                                                                           VRO
     Logic High                                                    VIH             0.7         0.54       –
     Logic Low                                                     VIL             –           0.51       0.3
33793
                                                                                           Analog Integrated Circuit Device Data
6                                                                                                      Freescale Semiconductor


                                                                                                ELECTRICAL CHARACTERISTICS
                                                                                        STATIC ELECTRICAL CHARACTERISTICS
Table 4. Static Electrical Characteristics (continued)
    Characteristics noted under conditions -0.3 V  VBUSIN or VBUSOUT  30 V, 5.5 V < VH_CAP < 30 V, -40C < TA < 85C unless
otherwise noted. Typical values noted reflect the approximate parameter means at TA = 25°C under nominal conditions unless
otherwise noted.
                             Characteristic                           Symbol           Min        Typ        Max       Unit
 I/O Logic Output Levels
     Output Low (IL = 1.0 mA)                                      VOL             0          0.08       0.5        V
     Output High (IL = -500 A)                                    VOH             0.8        0.985      1.0        VRO
 LOGOUT Output Levels                                                                                               V
     Output Low (IL = 500 A)                                      VLOL            0          0.2        0.5
     Output High (IL = -10 mA, 6.2 V < VH_CAP < 25 V)              VLOH1           4.7        5.0        5.3
     Output High (IL = -100 A, 6.2 V < VH_CAP < 25 V)             VLOH2           –          –          VRO+0.5
 Programming Time                                                  TPROG                                            ms
     From Positive Edge of BUSIN or BUSOUT > VTHH on Program                                           
     Command to Following Command Negative Transition < VTHH                       100        200        1000
 NVM BUSIN or BUSOUT Programming Voltage                           NVMVP           22.25      –          30         V
                                                                                                                         33793
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                     7


ELECTRICAL CHARACTERISTICS
DYNAMIC ELECTRICAL CHARACTERISTICS
                                           DYNAMIC ELECTRICAL CHARACTERISTICS
Table 5. Dynamic Electrical Characteristics
    Characteristics noted under conditions -0.3 V  VBUSIN or VBUSOUT  30 V, 5.5 V  VH_CAP  30 V, -40C  TA  85C unless
otherwise noted. Typical values noted reflect the approximate parameter means at TA = 25°C under nominal conditions unless
otherwise noted.
                                  Characteristic                              Symbol     Min        Typ        Max       Unit
Initialization to Bus Switch Closing                                       tBS       100        150        200        s
Loss of Signal Reset Time                                                  tTO                                        ms
     Maximum Time Below Frame Threshold                                              –          –          100
ADC Code Conversion Time (Go, No-Go Test)                                  tADC      –          –          27         s
BUSIN and BUSOUT Response Current Transition Time                          tITR                                       mA/s
     1.0 to 9.0 mA Transition, 9.0 to 1.0 mA                                         –          7.0        10
BUSIN or BUSIN Timing to Response Current                                                                             s
     BUSIN or BUSOUT Negative Voltage Transition = 3.0 V to IRSPH = 7.0 mA tRSPH    –          –          3.3
     BUSIN or BUSOUT Negative Voltage Transition = 3.0 V to IRSPL = 5.0 mA tRSPL     –          –          3.3
33793
                                                                                           Analog Integrated Circuit Device Data
8                                                                                                      Freescale Semiconductor


                                                                                            ELECTRICAL CHARACTERISTICS
                                                                                                          TIMING DIAGRAMS
                                                        TIMING DIAGRAMS
                                    Frame                                         Frame 
                                Threshold                                         Threshold
              BUSIN/BUSOUT
                                                   tBS                                 tTO
                         End of Initialization
                                  Command
                         Closed
                  BUS Switch
                          Open
                Internal Reset                                                                   Reset
                                               Figure 4. Bus Switch and Reset Timing
                                     9.0 mA                                                    9.0 mA
                                  7.0 mA
                                                                                                  5.0 mA
                               1.0 mA                                                               1.0 mA
             RESPONSE
              CURRENT                tITR                                                            tITR
                                  tRSPH                                                            tRSPL
             BUSIN/BUSOUT
                                   3.0 V                                            3.0 V
                                                 Figure 5. Response Current Timing
                                                                                                                      33793
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                  9


 FUNCTIONAL DESCRIPTION
 INTRODUCTION
                                               FUNCTIONAL DESCRIPTION
                                                          INTRODUCTION
The 33793 is designed to be used with a sensor at a location      energy to power the device during low excursions of BUSIN
that is remote from a centralized MCU. This device provides       and BUSOUT.
power, measurement, and communications between the                The Regulator supplies an on-board regulated voltage for
remote sensor and the centralized MCU over a DSI bus.             internal use, and the Power on Reset (POR) circuit provides
Sensors such as accelerometers can be powered from the            a reset signal during low-voltage conditions and during power
regulated output of the device, and the resulting analog value    up/down. Some current is available for low-power sensors.
from the sensor can be converted from an analog level to a
                                                                  Data from the Central Control Unit (CCU) is applied to the
digital value for transmission over the DSI bus in response to
                                                                  BUSIN and/or BUSOUT pins as voltage levels that are
a query from the MCU. Four I/O lines can be configured by
                                                                  sensed by the Level Detection circuitry. The Serial Decoder
the central MCU over the DSI bus as analog inputs, digital
                                                                  detects these transitions and decodes the incoming data.
inputs, or digital outputs. This allows more than one sensor to
                                                                  The Control Logic provides overall control of the 33793. It
be remotely controlled and measured by a single 33793.
                                                                  controls diagnostic testing and formats responses to
Additionally, a high drive logic output is provided that can be
                                                                  commands with the message encoder. Responses are
used to power other low-power sensors.
                                                                  formed via a switched current source that is slew-rate
Power is passed from BUSIN or BUSOUT through on-board             controlled.
rectifiers to a storage capacitor (referred to as the H_CAP).
                                                                  The one-time programmable (OTP) memory array provides
The H_CAP stores energy during the highest voltage
                                                                  the nonvolatile storage for the pre-programmed address. It is
excursions of the BUSIN or BUSOUT pin (idle) and supplies
                                                                  accessed via the Read/Write NVM command. It has a built-in
                                                                  hardware lock that only allows one write.
                                                FUNCTIONAL PIN DESCRIPTION
BUS RETURN (BUSRTN)                                               REGULATOR OUTPUT (REGOUT)
This pin provides the common return for power and                 This pin provides a regulated 5.0 V output. The power is
signalling.                                                       derived from the bus.
INPUT/OUTPUT (I/O0, I/O1, I/O2, I/O3)                             HOLDING CAPACITOR (H_CAP)
This pin can be used to provide a logic level output, a logic     A capacitor attached to this pin is charged by the bus during
input, or an analog-to-digital (A/D) input.                       bus idle and supplies current to run the device and for
                                                                  external devices via the REGOUT pin during non-idle
ANALOG GROUND (AGND)                                              periods.
This pin is the low reference level and power return for the
analog-to-digital converter (ADC).                                DSI BUS INPUT (BUSIN)
                                                                  This pin attaches to the bus and responds to initialization
LOGIC OUT (LOGOUT)                                                commands.
This is a logic output with higher pull-up drive capability than
the standard logic I/O.                                           DSI BUS OUTPUT (BUSOUT)
                                                                  This pin attaches to the bus and responds to reverse
                                                                  initialization commands.
                                      FUNCTIONAL INTERNAL BLOCK DESCRIPTION
Refer to Figure 2, 33793 Internal Block Diagram, page 3, for      voltage at H_CAP will not drop below the frame threshold
a simplified representation of the 33793’s components.            during signaling.
RECTIFIER                                                         POR
This rectifier or switch peak detects the bus signal into an      The 33793 leaves the reset state when the voltage on
external capacitor attached to H_CAP. The capacitor               H_CAP rises above the Power-ON Reset threshold.
supplies power during signaling while the input voltage is at a
lower level.                                                      TIMEOUT
 The voltage waveform at BUSIN and/or BUSOUT and the              A timeout timer keeps track of the length of the time when the
size of the filter capacitor at H_CAP must be such that the       input is not in idle mode. If this time exceeds a limit, the part
33793
                                                                                          Analog Integrated Circuit Device Data
10                                                                                                       Freescale Semiconductor


                                                                                                         FUNCTIONAL DESCRIPTION
                                                                                     FUNCTIONAL INTERNAL BLOCK DESCRIPTION
is reset. The purpose of this is to allow the part to reset itself circuit limits the rise and fall time of current loading the bus by
if the connection to the master is lost or if power is removed     controlling the current sinking element.
from the system.
                                                                   SWITCHED CURRENT SOURCE
5.0 V REGULATOR                                                    A "1" data return bit will be signaled by turning on a fixed
The 5.0 V regulator supplies internal power for the device and     current source. During signaling time, the 33793 will be using
also provides approximately 6.0 mA through the REGOUT              power from H_CAP and not loading the bus for power. The
pin to power an external sensor.                                   current will be drawn from either BUSIN or BUSOUT or split
                                                                   between them. The split can be in any proportion as long as
UNDERVOLTAGE DETECTOR                                              the total is correct.
The undervoltage detector monitors the output voltage of the       The current source is turned off whenever the bus is at Idle
5.0 V regulator. If the REGOUT voltage drops too low for           level.
accurate A/D operation, a signal is sent to the control logic.
The control logic will interpret this signal and, in response to   LEVEL DETECTOR
a command, report a status indicating an undervoltage              The level detector contains comparators to determine if the
condition to have existed. When received, the command will         BUSIN or BUSOUT is at idle, logic high, or logic low. The
clear the signal after having read the status. If the voltage is   inputs from BUSIN and BUSOUT are sensed by the device
too low when the A/D conversion was completed, the                 so that if either side is driven by the signaling waveform while
returned value will be zero (binary 00000000).                     the other is not, the signaling will be detected. This circuit also
                                                                   provides a signal to indicate if the signal is being received on
IO PINS 0 TO 3                                                     the BUSOUT pin. If a "reverse initialization" command is
The IO pins can serve as logic inputs, logic outputs, or analog    received, it can only be acted upon if the device is not already
inputs. At power-up or after a clear, the pins are all logic       initialized and if the signal is present on BUSOUT.
inputs and can be used to measure an analog level value for
an analog value request command. The pins can be                   SERIAL DECODER
individually configured as logic inputs or outputs by the IO       The Serial Decoder monitors transitions on the BUSIN or
Control command. If the pin is configured as a logic output,       BUSOUT. When the 33793 is Idle and supplying power to
reading the analog value will return the analog level the          itself and the external device(s) (via REGOUT), the input to
output is being driven to.                                         BUSIN will be in the Idle state. A transition from this level to
                                                                   Signal Low (through Signal High) will start the process of
ANALOG-TO-DIGITAL CONVERTER                                        decoding a word of data. BUSIN is driven from Signal Low to
The ADC is an 8-bit successive approximation type using on-        Signal High for each bit and back to Signal Low to start the
board capacitive division. It uses the Clk signal from the on-     next bit. The determination of whether the bit was a one or a
board oscillator for sequencing.                                   zero is made by determining whether it spent more time low
The ADC uses REGOUT as a full-scale reference voltage              (a zero) or high (a one). The end of the word is signaled by a
and ground AGND for a zero-level reference.                        transition at the end of the last bit from Signal High to Idle.
                                                                   The advantage of this method is that it will accept data over
The ADC signals when it has made a valid conversion by             a wide range of rates and is not dependent on an accurate
asserting a signal to the controller. If this signal is not        clock.
asserted when a value is being captured by the controller, the
                                                                   The controller will typically indicate a logic zero by spending
controller will signal that an invalid A/D value was obtained.
                                                                   2/3 of the bit period at Signal Low and 1/3 at Signal High. A
The value of “0" (binary 00000000) is reserved by the control      logic one would be 1/3 of the bit period at Signal Low and 2/
logic to signal an error. A value of “0” from the ADC will be      3 at Signal High.
reported as “1” (binary 00000001) by the control logic.
                                                                   CONTROL LOGIC
SERIAL ENCODER
                                                                   The control logic performs the digital operations carried out
The Serial Encoder accepts the digitized value from the ADC        by this device. Its principle functions include:
and formatting/data from the Control Logic. A logic transition
                                                                       • Decoding input instructions.
from Idle to Signal High and then to Signal Low at BUSIN will
cause the first bit to be presented to the current switch              • Control the general purpose I/O and LOGICOUT in
(Response Loading). A transition to Signal High and back to                response to BUSIN or BUSOUT commands.
Signal Low will cause the next bit to be presented to the              • Control A/D conversions.
current switch. This will continue until a transition back to Idle     • Form response word.
turns off the current switch.                                          • Capture and store address.
                                                                       • Control BUSSW.
SLEW                                                                   • Reset device on power-up.
The slew circuit serves to reduce EMI produced as a result of          • Control the general purpose I/O logic configuration.
switching the bus loading current sink element. The slew
                                                                                                                                  33793
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                            11


 FUNCTIONAL DESCRIPTION
 FUNCTIONAL INTERNAL BLOCK DESCRIPTION
   • Read the general purpose I/O logic values and respond       ADDRESSING
      to request for these values.                               The 33793 IC supports both runtime programmable and pre-
   • Generating a cycle redundancy check (CRC) for the           programmed addressing as defined in the DSI Specification.
      received data and transmitted data in conformance with     Runtime programmable addressing uses the daisy chain bus
      the DSI Bus Standard.                                      connection. Pre-programmed devices may either be
Additionally, the control logic performs error checking on the   connected in daisy chain or in parallel on the bus wires.
received data. If errors are found, no action is taken and no    Programmable address devices all power up with a device
response is made. Errors include:                                address of $0 in their address register and their bus switches
   • CRC received doesn’t match CRC of received data.            open. In the daisy chain, if the first device receives the
   • Number of received bits is not 12 or 20.                    initialization command device on BUSIN, it will accept the
                                                                 address in the command and close its switch at the end of the
CLOCK                                                            command. The next device in the chain will now be able to
                                                                 receive the initialization command on its BUSIN and will
The clock is a low-stability type with the capacitor integrated
                                                                 accept the next address. This proceeds down the chain until
onto the die. The signaling system and all internal operations
                                                                 the last device is addressed. The devices can also be
are such that no external precision timing device is needed in
                                                                 initialized by the reverse initialization command if the signal is
the normal operation of this device.
                                                                 applied to BUSOUT.
                                                                 Pre-programmed devices power up with their pre-
BUS SWITCH (BUSSW)
                                                                 programmed address in its address register. It will ignore all
The bus switch passes signaling and power to all subsequent      Initialization commands unless the address in the command
devices on the bus. It can block a voltage of either polarity up matches its pre-programmed address. In this event the
to the highest idle state level between BUSIN and BUSOUT.        device stores the other information contained in the
                                                                 Initialization command.
LOGICOUT
LOGICOUT is a logic level output with enhanced high-side
drive capability.
33793
                                                                                          Analog Integrated Circuit Device Data
12                                                                                                       Freescale Semiconductor


                                                                                                     FUNCTIONAL DEVICE OPERATION
                                                                                                                 OPERATIONAL MODES
                                              FUNCTIONAL DEVICE OPERATION
                                                           OPERATIONAL MODES
A device may be permanently programmed one time with an                MESSAGES
address using a two-command sequence. The first step is                The messages follow the format defined in the Distributed
satisfied on the reception of an Initialization command with           Systems Interface Specification rev. 1.0 unless otherwise
address set to zero, the PA[3:0] set to the address to be              noted.
programmed, and the NV bit set. This will cause the address
contained in the PA[3:0] bits to be stored in the address
                                                                       DSI BUS COMMANDS
register and the bus switch closed. The second step is taken
when a Read/Write NVM command is received with the                     This device can recognize and respond to both long-word
PA[3:0] bits matching the A[3:0] bits and also matching the            and short-word commands. A command word summary is
bits stored in the 33793 address register. This will cause the         shown in Table 6. SW in the “Size” column of the table
33793 to permanently store this address into an internal NVM           indicates short-word commands and LW indicates long-word
area.                                                                  commands. Short-word commands may also be sent in the
                                                                       long-word format. However, when these commands are sent
                                                                       in the long-word format, it is recommended that the data byte
                                                                       be sent as $00 to maintain future compatibility. All commands
                                                                       marked reserved should not be sent to 33793 slaves.
Table 6. DSI Bus Commands
         Command                                                                                    Data
                                  Size               Description
  C3      C2      C1     C0                                          D7       D6      D5     D4       D3        D2       D1           D0
0       0       0      0      LW           Initialization          NV      BS       G1     G0      PA3       PA2       PA1        PA0
0       0       0      1      SW           Request Status          –       –        –      –       –         –         –          –
0       0       1      0      SW           Request Value 0         –       –        –      –       –         –         –          –
0       0       1      1      LW           I/O Control             L3      L2       L1     L0      DR3       DR2       DR1        DR0
0       1       0      0      SW           Request ID Information  –       –        –      –       –         –         –          –
0       1       0      1      SW           Request Value 1         –       –        –      –       –         –         –          –
0       1       1      0      SW           Request Value 2         –       –        –      –       –         –         –          –
0       1       1      1      SW           Clear                   –       –        –      –       –         –         –          –
1       0       0      0      SW           Request Value 3         –       –        –      –       –         –         –          –
1       0       0      1      LW           Read/Write NVM          1       1        1      1       PA3       PA2       PA1        PA0
1       0       1      0                   Reserved
1       0       1      1                   Reserved
1       1       0      0      SW           Clear Logic Out         –       –        –      –       –         –         –          –
1       1       0      1      SW           Set Logic Out           –       –        –      –       –         –         –          –
1       1       1      0                   Reserved
1       1       1      1      LW           Reverse Initialization  NV      BS       G1     G0      PA3       PA2       PA1        PA0
Legend
BS = Controls closing of the Bus Switch (1 = close).                       LO = Logic Out level.
DR[3:0] = Direction of I/O. 1 = Output.                                    PA[3:0] = Bus Address to set the device to.
G[1:0] = Group assignment (the 33793 does not use these bits).             NV = Allows nonvolatile address programming if set to "1".
L[3:0] = Level to output on I/O if configured as outputs.
                                                                                                                                      33793
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                                  13


FUNCTIONAL DEVICE OPERATION
OPERATIONAL MODES
LONG- AND SHORT-WORD RESPONSES
The device responds to Long-word commands with long-word responses and short-word commands with short-word responses.
Responses are sent during the next message following the command. A long-word response summary is found in Table 7 and
a short-word response summary is found in Table 8, page 15.
Table 7. Long-Word Response Summary
  CMD            Command
                                                                           Response
  hex           Description
0        Initialization            A3    A2   A1  A0    0      0 0      BF    NV      BS    G1       G0    PA3     PA2     PA1 PA0
1        Request Status            A3    A2   A1  A0    0      0 0      0     NV      U     LO       BS    IO3     IO2     IO1 IO0
2        Request Value 0           A3    A2   A1  A0    0      0 0      0     B7      B6    B5       B4    B3      B2      B1  B0
3        I/O Control               A3    A2   A1  A0    0      0 0      0     L3      L2    L1       L0    DR3     DR2     DR1 DR0
4        Request ID                A3    A2   A1  A0    0      0 0      0     V2      V1    V0       0     0       0       1   1
5        Request Value 1           A3    A2   A1  A0    0      0 0      0     B7      B6    B5       B4    B3      B2      B1  B0
6        Request Value 2           A3    A2   A1  A0    0      0 0      0     B7      B6    B5       B4    B3      B2      B1  B0
7        Clear                     No Response
8        Request Value 3           A3    A2   A1  A0    0      0 0      0     B7      B6    B5       B4    B3      B2      B1  B0
9        Read/Write NVM            A3    A2   A1  A0    0      0 0      0     1       1     1        1     PA3     PA2     PA1 PA0
A        Reserved
B        Reserved
C        Clear Logic Out           A3    A2   A1  A0    0      0 0      0     NV      U     LO       BS    IO3     IO2     IO1 IO0
D        Set Logic Out             A3    A2   A1  A0    0      0 0      0     NV      U     LO       BS    IO3     IO2     IO1 IO0
E        Reserved
F        Reverse Initialization    A3    A2   A1  A0    0      0 0      BF    NV      BS    G1       G0    PA3     PA2     PA1 PA0
Legend
A[3:0] = Address bits. The slave address.                        L[3:0] = Level to output on I/O if configured as outputs.
B[7:0] = 8-bit A/D value.                                        LO = Logic Out level at the Logic Out pin.
BF = Bus Fault                                                   NV = Allows nonvolatile address programming if set to “1”.
BS = Status of the Bus Switch (1 = close).                       PA[3:0] = Bus Address to set the device to.
DR[3:0] = I/O direction bits (1 = Output).                       U = Undervoltage Flag.
G[1:0] = Group assignment (the 33793 does not use these bits).   V[2:0] = Version number.
IO[3:0] = Logic level of I/O.
33793
                                                                                             Analog Integrated Circuit Device Data
14                                                                                                          Freescale Semiconductor


                                                                                                       FUNCTIONAL DEVICE OPERATION
                                                                                                      DSI COMMANDS AND RESPONSES
Table 8. Short-word Response Summary
                                     Command
      Command                                                                               Response
                                     Description
 0000                   Initialization                Not Valid
 0001                   Request Status                NV         U          LO        BS          IO3       IO2      IO1       IO0
 0010                   Request Value 0               B7         B6         B5        B4          B3        B2       B1        B0
 0011                   I/O Control                   Not Valid
 0100                   Request ID Information        V2         V1         V0        0           0         0        1         1
 0101                   Request Value 1               B7         B6         B5        B4          B3        B2       B1        B0
 0110                   Request Value 2               B7         B6         B5        B4          B3        B2       B1        B0
 0111                   Clear                         No Response
 1000                   Request Value 3               B7         B6         B5        B4          B3        B2       B1        B0
 1001                   Read/Write NVM                Not Valid
 1010                   Reserved
 1011                   Reserved
 1100                   Clear Logic Out               NV         U          LO        BS          IO3       IO2      IO1       IO0
 1101                   Set Logic Out                 NV         U          LO        BS          IO3       IO2      IO1       IO0
 1110                   Reserved
 1111                   Reverse Initialization        Not Valid
 Legend
 B[7:0] = 8-bit A/D value.                            NV = Allows nonvolatile address programming if set to “1”.
 BS = Status of the Bus Switch (1 = close).           PA[3:0] = Bus Address to set the device to.
 LO = Logic Out level at the Logic Out pin.           U = Undervoltage Flag.
 IO[3:0] = Logic level of I/O.                        V[2:0] = Version number.
                                                 DSI COMMANDS AND RESPONSES
INITIALIZATION COMMAND                                                   Reception of the command will assign the device address
The Initialization command must be sent to the 33793 before              and group number. A Read/Write NVM command then may
it may commence communications over the bus. The                         be sent to complete the setting of a pre-programmed
command may be used three ways. The first is to initialize a             address.
programmable address device. The second is the first step in             A pre-programmed device must be initialized by putting its
assigning a pre-programmed address. The third is to initialize           address in both PA3:PA0 and A3:A0 fields.
a pre-programmed device.                                                 Once a device has received an initialization command, it will
For the first case this command is sent to address zero with             ignore further initialization commands unless it has received
the NV bit set to zero. The command will be received by the              a Clear command or undergone a power-up reset.
next daisy chain device with its bus switch open. Reception              If BS = 1 and no faults are detected, initialization will cause
of this command will assign the device address and group                 the bus switch to close.
number.                                                                  The command format is found in Table 9.
For the second case the Initialization command is sent the
same as the first except that the NV bit is set to one.
                                                                                                                                     33793
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                               15


 FUNCTIONAL DEVICE OPERATION
 DSI COMMANDS AND RESPONSES
Table 9. Initialization Command Format
                             Data                                   Address                   Command                      CRC
NV      BS     G1      G0     PA3     PA2     PA1    PA0    A3    A2     A1      A0    0     0      0     0       X3   X2      X1     X0
Legend
A[3:0] = Address bits. The slave address.                         NV = Nonvolatile Memory Write. The value of the NV bit in the slave.
BS = Bus Switch Position (1 = closed).                            PA[3:0] = Bus Address to set the device to.
G[1:0] = Group bits (unused).                                     X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
                                                                  master.
INITIALIZATION RESPONSE                                                  device. The response is shown in Table 10. Because this is a
This response message is sent during the next message                    long-word only command, the short-word response is invalid.
following a valid Initialization command to the addressed
Table 10. Initialization Response Format
                       High Byte                                               Low Byte                                    CRC
A3      A2     A1     A0      0     0       0      BF   NV     BS     G1      G0     PA3   PA2    PA1    PA0      X3  X2      X1      X0
Legend
A[3:0] = Address bits. The slave address.                             NV = Nonvolatile Memory Write. The value of the NV bit in the slave.
BF = Bus Fault. Bus out short to battery detected.                    PA[3:0] = Bus Address to set the device to.
BS = Bus Switch Position (1 = closed).                                X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by
G[1:0] = Group bits (unused).                                         the slave.
REQUEST STATUS COMMAND                                                   O and LOGICOUT. The command format is found in
This command will cause the addressed device to return the               Table 11.
status of the NV, U, and BS bits and the logic levels of the I/
Table 11. Request Status Command Format
                             Data                                  Address                   Command                       CRC
–       –      –      –       –      –        –      –      A3    A2     A1     A0     0    0       0     1       X3   X2     X1      X0
Legend
A[3:0] = Address bits. The address of the selected device. An     X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
address value of "0000" is ignored by all devices.                master.
REQUEST STATUS RESPONSE                                                  device. The response format is found in Table 12. The high
This response message is sent during the next message                    byte is omitted during the short-word response. No response
following a valid Request Status command to the addressed                is generated if the command address field was $0.
Table 12. Request Status Response Format
                     High Byte                                               Low Byte                                      CRC
A3     A2     A1     A0     0     0    0       0    NV      U      LO       BS       IO3   IO2    IO1    IO0     X3   X2      X1      X0
Legend
A[3:0] = Address bits. The slave address.                          NV = Nonvolatile Memory Write. The value of the NV bit in the slave.
BS = Bus Switch Position (1 = closed).                             U = Undervoltage indicated true by a “1”.
LO = Logic out driven level.                                       X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
IO[3:0] = Values at logic I/Os.                                    slave.
33793
                                                                                                  Analog Integrated Circuit Device Data
16                                                                                                              Freescale Semiconductor


                                                                                                              FUNCTIONAL DEVICE OPERATION
                                                                                                             DSI COMMANDS AND RESPONSES
REQUEST VALUE n COMMAND                                                       command. The command format is found in Table 13. The
This command will cause the analog level at one of the four                   analog input measured is defined in Table 14.
I/O lines to be measured and returned on the following
Table 13. Request Value n Command Format
                             Data                                       Address                     Command                          CRC
–       –      –       –       –       –        –       –        A3   A2     A1      A0    C3      C2      C1     C0    X3      X2      X1     X0
Legend
A[3:0] = Address bits. The address of the selected device.            C[3:0] = Command number.
An address value of "0000" is ignored by all devices.                 X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
                                                                      master.
                                                                              REQUEST VALUES RESPONSE
             Table 14. Analog Input Selection                                 This response is an 8-bit value representing the value
                 Command                 A/D Input                            measured by the ADC. The selection of “n” is a function of the
                                                                              command. This is shown in Table 15.
             0010                  I/O0
                                                                              The read will be completed during the idle period and will
             0101                  I/O1                                       represent the voltage at the end of the command. If an
             0110                  I/O2                                       undervoltage condition exists at any time during the
             1000                  I/O3
                                                                              command or the measurement has not completed properly, a
                                                                              value of “00000000” will be returned. This is a reserved value
                                                                              to indicate a problem with the measurement. The minimum
                                                                              valid level reported will be “00000001”. No response is
                                                                              generated if the command address field was $0.
Table 15. Request Values Response Format
                       High Byte                                                   Low Byte                                         CRC
A3      A2    A1       A0      0     0     0       0      D7       D6  D5     D4      D3      D2      D1       D0      X3      X2       X1     X0
Legend
A[3:0] = Address bits. The address of the selected device.             D[7:0] = Measured value (MSB = D7).
An address value of "0000" is ignored by all devices.                  X[3:0] = Cyclic Redundancy Check (CRC).
I/O CONTROL COMMAND                                                           settings control the level of the corresponding I/O if it is
This register controls the I/O ports. When the “DR” bits are                  enabled as an output. The format of this command is shown
set, the corresponding I/O is enabled as an output. The “L” bit               in Table 16.
Table 16. I/O Control Command Format
                             Data                                       Address                     Command                          CRC
L3     L2     L1      L0     DR3      DR2      DR1      DR0       A3  A2     A1      A0     0      0       1      1     X3      X2      X1      X0
Legend
A[3:0] = Address bits.                                                L[3:0] = Level to output on I/O if configured as output. All bits are set to “0”
DR[3:0] = I/O direction bits. 1 = Output. All bits are set to “0” by  by reset/clear
reset/clear.                                                          X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
                                                                      master.
I/O CONTROL RESPONSE                                                          The values returned will be the values programmed. The
The response indicates which I/O has been configured as                       values at the pins will not be the ones that were programmed
outputs and their current values.                                             if the pin has been forced to the opposite state. The response
                                                                              format is shown in Table 17. No response is generated if the
                                                                              command address field was $0.
                                                                                                                                                 33793
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                                            17


 FUNCTIONAL DEVICE OPERATION
 DSI COMMANDS AND RESPONSES
Table 17. I/O Control Response Format
                      High Byte                                                  Low Byte                                     CRC
A3      A2     A1     A0      0     0      0     0     L3     L2      L1      L0    DR3     DR2   DR1     DR0     X3      X2    X1    X0
Legend
A[3:0] = Address bits.                                                L[3:0] = Programmed values.
DR[3:0] = I/O enabled as outputs (1 = enabled as output).             X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
                                                                      slave.
REQUEST ID COMMAND                                                           response to the next message. The command format is found
This command will cause the device ID information to be read                 in Table 18.
from internal storage and returned to the master during the
Table 18. Request ID Command Format
                             Data                                      Address                   Command                       CRC
–      –      –      –       –       –       –       –       A3      A2      A1    A0     0     1     0      0      X3     X2    X1    X0
Legend
A[3:0] = Address bits. The address of the selected device. An        X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
address value of “0000” is ignored by all devices.                   master.
REQUEST ID RESPONSE                                                          addressed device. The response format is found in Table 19.
This response message is sent during the next message                        The high byte is omitted during the short-word response. No
following a valid long-word Request ID command to the                        response is generated if the command address field was $0.
Table 19. Request ID Response Format
         Address                     Status                                       Data                                        CRC
A3     A2     A1     A0     0     0     0      0     V2      V1       V0        0       0     0      1      1      X3      X2   X1     X0
Legend
A[3:0] = Address bits. The slave address.                             X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
V[2:0] = Device version number. The silicon version number of the slave.
device. For this device the device type is 00011 as indicated by the
lowest bits.
CLEAR COMMAND
This command will open the bus switch and reset all registers
to the reset state. The command format is found in Table 20.
No response is generated for the Clear command.
Table 20. Clear Command Format
                             Data                                      Address                   Command                       CRC
–      –      –      –       –       –       –       –       A3      A2      A1    A0     0     1     1      1      X3     X2    X1    X0
Legend
A[3:0] = Address bits. The address of the selected device. An        X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
address value of “0000” clears all devices.                          master.
READ/WRITE NVM COMMAND                                                       device address register on the next and all subsequent
If the NV bit has been set by a previous Initialization                      power-ups. If the device is not blank, this command will return
command and the NVM has not been programmed                                  the programmed value during the next message time.
previously, this command will permanently program the                        Programming the NVM address to $0 is allowed. This
device’s one-time programmable address and return the                        ensures that the device always acts as a dynamically
programmed value during the next message time. Once                          addressable device and would be immune to any inadvertent
programmed, this nonvolatile address is used to set the                      future NVM programming sequences.
33793
                                                                                                    Analog Integrated Circuit Device Data
18                                                                                                                Freescale Semiconductor


                                                                                                            FUNCTIONAL DEVICE OPERATION
                                                                                                            DSI COMMANDS AND RESPONSES
Reads and writes are long-word commands only. The
command format is found in Table 21.
Table 21. Read/Write NVM Command Format
                              Data                                        Address                    Command                     CRC
 1      1      1       1       PA3      PA2     PA1    PA0       A3    A2      A1     A0     1      0     0     1     X3     X2      X1     X0
 Legend
 A[3:0] = Address bits. These bits are the address of the device       PA[3:0] = Program Address bits. These bits are the address that is to be
 previously sent with the Initialization command. They must match      programmed into the slave.
 the address in the PA[3:0] field and the address stored in the device X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
 address register.                                                     master.
READ/WRITE NVM RESPONSE                                                         device. The response format is found in Table 22. The high
This response message is sent during the next message                           byte is omitted during the short-word response. No response
following a valid Read/Write NVM command to the addressed                       is generated if the command address field was $0.
Table 22. Read/Write NVM Response Format
                        High Byte                                                   Low Byte                                     CRC
 A3      A2     A1      A0      0      0     0     0     1       1     1      1      PA3     PA2      PA1    PA0     X3     X2      X1      X0
 Legend
 A[3:0] = Address bits. The slave address.                             X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
 PA[3:0] = Programmed Address bits. The address that was               slave.
 programmed into the NVM address bits of the slave.
CLEAR LOGIC OUT COMMAND                                                         Out. The Logic Out is also cleared at power-up or following a
The Clear Logic Out command sets the Logic Out pin to a                         Clear command. The format of the Clear Logic Out command
logic low. The compliment to this command is the Set Logic                      is shown in Table 23.
Table 23. Clear Logic Out Command Format
                             Data                                      Address                     Command                       CRC
 –      –       –      –        –      –      –      –-       A3     A2     A1       A0    1      1     0      0     X3     X2      X1      X0
 Legend
 A[3:0] = Address bits. The address of the selected device.          X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
                                                                     master.
CLEAR LOGIC OUT RESPONSE                                                        device. The response is shown in Table 24. No response is
This response message is sent during the next message                           generated if the command address field was $0.
following a valid Clear Logic Out command to the addressed
Table 24. Clear Logic Out Response Format
                      High Byte                                                    Low Byte                                      CRC
 A3     A2     A1     A0     0       0     0     0     NV       U        LO        BS     IO3     IO2   IO1    IO0   X3     X2      X1      X0
 Legend
 A[3:0] = Address bits. The slave address.                               NV = Nonvolatile Memory Write. The value of the NV bit in the slave.
 BS = Bus Switch Position (1=closed).                                    U = Undervoltage indicated true by a “1”.
 LO = Logic out driven level.                                            X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
 IO[3:0] = Values at logic I/Os.                                         slave.
                                                                                                                                             33793
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                                        19


 FUNCTIONAL DEVICE OPERATION
 DSI COMMANDS AND RESPONSES
SET LOGIC OUT COMMAND                                                   The Logic Out is cleared at power-up or following a Clear
The Set Logic Out command sets the Logic Out pin to a logic             command. The format of the Clear Logic Out command is
high. The compliment to this command is the Clear Logic Out.            shown in Table 25.
Table 25. Set Logic Out Command Format
                            Data                                Address                      Command                       CRC
-       -      -      -       -     -      -      -       A3  A2     A1       A0     1      1     0      1       X3    X2    X1     X0
Legend
A[3:0] = Address bits. The address of the selected device.    X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
                                                              master.
SET LOGIC OUT RESPONSE                                                  device. The response is shown in Table 26. No response is
This response message is sent during the next message                   generated if the command address field was $0.
following a valid Set Logic Out command to the addressed
Table 26. Set Logic Out Response Format
                     High Byte                                              Low Byte                                       CRC
A3       A2    A1     A0     0    0     0     0     NV      U     LO        BS       IO3    IO2   IO1    IO0     X3     X2   X1     X0
Legend
A[3:0] - Address bits. The slave address.                         NV = Nonvolatile Memory Write. The value of the NV bit in the slave.
BS = Bus Switch Position (1=closed)                               U = Undervoltage indicated true by a “1”.
IO[3:0] = Values at logic I/Os.                                   X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
LO = Logic out driven level.                                      slave.
REVERSE INITIALIZATION                                                  For the second case the Initialization command is sent the
The Reverse Initialization is similar to the Initialization             same as the first except that the NV bit is set to one.
command and will only work under the condition that it has              Reception of the command will assign the device address
not already been initialized. The command may be used                   and the group number and cause the bus switch to close if BS
three ways. The first is to initialize a programmable address           = 1 and there are no faults. A Read/Write NVM command
device. The second is the first step in assigning a pre-                then may be sent to complete the setting of a pre-
programmed address. The third is to initialize a pre-                   programmed address.
programmed device.                                                      A pre-programmed device must be initialized by putting its
For the first case this command is sent to address zero with            address in both PA3:PA0 and A3:A0 fields.
the NV bit set to zero. The command will be received by the             Once a device has received a reverse initialization command,
next daisy chain device with its bus switch open. Reception             it will ignore further reverse initialization commands or
of this command will assign the device address and the group            initialization commands unless it has received a Clear
number. Reception of this command will also cause the bus               command or undergone a power-up reset.
switch to close if BS = 1 and no fault is detected.                     The command format is found in Table 27.
33793
                                                                                                  Analog Integrated Circuit Device Data
20                                                                                                              Freescale Semiconductor


                                                                                                             FUNCTIONAL DEVICE OPERATION
                                                                                                            DSI COMMANDS AND RESPONSES
Table 27. Reverse Initialization Command Format
                             Data                                        Address                    Command                        CRC
NV      BS     G1      G0      PA3     PA2     PA1     PA0       A3    A2     A1      A0    1      1      1     1        X3    X2     X1     X0
Legend
A[3:0] = Address bits. These bits are the slave address. For           NV = Nonvolatile Memory Write. When set to a one, this bit allows a
programmable devices these bits are all set to zero. For pre-          subsequent NVM command to store a nonvolatile address. When set to a
programmed devices these bits contain the pre-programmed               zero, NVM programming is disallowed. Once a permanent address has
address and must match the PA[3:0] bits.                               been stored in the device, setting the NV bit to a one has no effect.
G[1:0] = Group bits. These bits are the group number for the slave.    X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
These bits are not used by this device and should be set to “0”.       master.
PA[3:0] = Program Address bits. These bits are the address that is
to be stored into the slave’s address register.
REVERSE INITIALIZATION RESPONSE                                               this is a long-word only command, the short-word response is
This response message is sent during the next message                         invalid. No response is generated if the command address
following a valid Reverse Initialization command to the                       field was $0.
addressed device. The response is shown in Table 28. Since
Table 28. Reverse Initialization Response Format
                        High Byte                                                    Low Byte                                      CRC
A3     A2      A1      A0     0      0      0       BF      NV      BS      G1      G0      PA3    PA2    PA1   PA0     X3     X2    X1      X0
Legend
A[3:0] = Address bits.The slave address.                            NV = Nonvolatile Memory Write. The value of the NV bit in the slave.
BF = Bus Fault. BUSIN short to battery detected.                    PA[3:0] = Bus Address to set the device to.
BS = Controls closing of the Bus Switch (1=close).                  X[3:0] = Cyclic Redundancy Check (CRC). The CRC as calculated by the
G[1:0] = Group bits. Not used on this part, will be set to “0”. The slave.
group number programmed into the slave.
                                                                                                                                              33793
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                                        21


 TYPICAL APPLICATIONS
                                                      TYPICAL APPLICATIONS
                                                                                                                                           H_CAP
                                                                                                                                                 1.0 F
                                                                                                                                                 Typical
                                                                                            Rectifiers
   BUSIN
                                                                       Bus Switch                                                          BUSOUT
                                                                0 – 35 V Bi-Directional
                    Forward Receiver                                                                         Reverse Receiver
                                         Data                                                           Data
                                                                                 Response
                                                                                 Current
                                        Frame                                    0 –11 mA              Frame
                                                                                 7.0 mA/S
                                                                                                                                           BUSRTN
                                                       Received
                  Bandgap                              Message                                                         Bandgap
                                                       from MCU              Bus Return
                  Reference                                                                                            Reference
                                           Oscillator                       Logic
                                            4.0 MHz                   Command Decode
                                                                        State Machine
                                       DataOut <3:0>                                                                                       LOGOUT
                                                                  Response Generation
                                                                                                                              Logic Out
                    I/O Buffers                                                                                               High Current
                                                                                               4
                                DataOut <0>                                                                    Power          Buffer
                                                                                     Address A<3:0>        Management                      REGOUT
       IO0                                                                             4 Bits NVM         5.0 V Regulator
                                DataOut <1>                                                                BG Reference                    4.7 F
                                                                                                           Bias Currents
       IO1                      DataOut <2>
                                                                                                                                           GND
                                                                                SEL
                                                                                                         Supply Comparators
       IO2                                                         I/O0
                                DataOut <3>                                                                     POR
                                                                    I/O1
                                                                            4:1         ADC
       IO3                                                         I/O2    MUX         8 Bits           Undervoltage
                                 I/O<3:0>                           I/O3                                   Detector
                                                                                                                            BG
COMMUNICATION FORMAT                                                              time to decode the command, retrieve the information and
DSI messages are composed of individual words separated                           prepare to send it to the master. A bus traffic example is
by a frame delay. Transfers are full duplex. Command                              shown in Figure 6.
messages from the master occur at the same time as                                The example shows three commands separated by the
responses from the slaves. Slave responses to commands                            minimum frame delay followed by a command after a longer
occur during the next command message. This allows slaves                         delay.
   Master
  Slave
                                                         Figure 6. Bus Traffic Example
33793
                                                                                                          Analog Integrated Circuit Device Data
22                                                                                                                        Freescale Semiconductor


                                                                                                               TYPICAL APPLICATIONS
If there is a bus error (due to induced noise or a bus fault),        response just prior to the bus fault condition (in this case,
both the master and slave devices will read bad data. The             Command N).
slave reacts to bad data by not sending a response during the         Failure to take corrective action will result in unintended
next frame. The master will detect a CRC error once it                errors as shown in Figure 7. In this case, the master will miss
receives the corrupted data sent by the slave, and once again         Responses N+1 and N+2 and will mistake them for N+3 and
when the slave fails to respond. This is illustrated in Figure 7.     N+4. The master should send another N+1 command after
When this error occurs, the system software needs to                  the error is acknowledged to re-synchronize the command-
acknowledge this condition and resend a command (any                  response sequence.
command of same size) so that it can receive the previous
                                                         CRC              CRC
                       Bus Error                         Error             Error             Data misinterpreted by Master
  Master
                Command N            Command N+1            Command N+2          Command N+3              Command N+4
   Slave
                 Response N-1          Response N            No Response         Response N               Response N+3
                                                       CRC
                                                       Error
                             Figure 7. Bus Traffic With Receive Errors (Master Reads Incorrect Data)
POWER UP RESET                                                        device is Reverse Initialized, the BUSIN is defined as the
When power is first applied to the DSI bus, the system must           inactive side.
allow enough time for the internal 5.0 volt regulator of each         The test for a bus fault is only performed once during Forward
device to come up to a proper level. This implies that H_CAP          or Reverse Initialization (when BS bit is set) by applying an
must charge up to VRECT + 5.0 V, or approximately 6.0 volts.          11 mA pull-down current to the inactive side of the Bus
The time this takes is a function of the size of H_CAP, and the       Switch and monitoring the voltage. The fault test takes
current drive of the Master. The following equation can be            approximately 200 S. If no fault is detected, the bus switch
used to estimate the minimum time to wait before sending an           will be closed, and if a fault is detected, the bus switch will not
Initialization Command:                                               close. The fault test applies to both programmed and
tMIN (H_CAP x 6V) / ICHARGE                                         unprogrammed devices.
where ICHARGE is the charging current provided by the DSI             Exception: In the case of a daisy-chain bus topology where
Master.                                                               the last device BUSOUT line connects to BUSIN of the first
                                                                      device (loop-back), then the fault test will NOT be executed
The above assumes a daisy-chain type of bus topology, and
                                                                      since both BUSIN and BUSOUT are connected to active
enough time must be allowed for all down-stream devices in
                                                                      busses. It is up to the system software to run the appropriate
the chain to charge up. For example, if device #1 has it’s
                                                                      diagnostic tests to resolve this special case. (One alternative
switch closed after its Initialization Command, then the
                                                                      is to use a separate DSI Master to handle the loop-back
system must wait for device #2 to power up before sending
                                                                      signal path. This second DSI Master is only activated in the
its Initialization Command, and so on down the line.
                                                                      case of a bus fault so that the last device can be accessed by
If the devices are attached in a parallel or point-to-point bus       means of a reverse initialization.)
configuration, then the total capacitor value is the sum of all
H_CAPS.                                                               GLOBAL ADDRESS 0
In addition to the charge up time, enough time must be                Any time an Initialization or Reverse Initialization command is
allocated for the bus fault test (see next section).                  sent to the 33793 with an address of 0x0 (global address), the
                                                                      device behaves as follows:
BUS FAULTS
                                                                          • Device initializes to address 0.
A bus fault is defined as an external voltage on the “Inactive            • Bus switch remains open. This implies that in a daisy-
Side” of the Bus Switch that is greater than 3V (typical).                   chain bus topology, all devices past the first device will
Inactive refers to the side of the bus that is not yet connected             remain off.
to the bus. Just before a device is Forward Initialized, the              • NV and BS bits are not stored and have no effect.
inactive side is defined as BUSOUT. Similarly, just before a
                                                                                                                                   33793
 Analog Integrated Circuit Device Data
 Freescale Semiconductor                                                                                                               23


TYPICAL APPLICATIONS
   • Device will respond to further commands at address 0        the devices are connected in a daisy chain, then only
     (such as setting and clearing the I/O bits and LOGOUT)      the fist device will respond.
     but there is no response (Master will read all zeros). If • Subsequent writes to re-initialize the device will not be
                                                                 possible until the device is cleared.
33793
                                                                                    Analog Integrated Circuit Device Data
24                                                                                               Freescale Semiconductor


                                                                                                              PACKAGING
                                                                                                  PACKAGE DIMENSIONS
                                                     PACKAGING
                                                 PACKAGE DIMENSIONS
  For the most current package revision, visit www.freescale.com and perform a keyword search using the “98A” listed below.
                                                         EF SUFFIX
                                                         (PB-FREE)
                                                           16-PIN
                                                       98ASB42566B
                                                          ISSUE M
                                                                                                                      33793
Analog Integrated Circuit Device Data
Freescale Semiconductor                                                                                                  25


REVISION HISTORY
                                        REVISION HISTORY
  Revision       Date                                  Description of Changes
                       • Implemented Revision History page
                       • Converted to Freescale format
                       • Added PC33793EF
                       • Added Feature bullets
    12.0        8/2006
                       • Rewrote and enhanced Device Operation - No electrical changes
                       • Updated to the prevailing Freescale form and style
                       • Removed PC33793EF and replaced with MCZ33793EF/R2 in the Ordering Information
                         block
                       • Added MCZ33793AEF/R2 to the Ordering Information
                       • Added Orderable Parts
    13.0       11/2006 • Removed Peak Package Reflow Temperature During Reflow (solder reflow) parameter
                         from Maximum Ratings on page 5. Added note with instructions to obtain this information
                         from www.freescale.com.
                       • Removed MC33973D references from the document
                       • Changed the max limit on the MCZ33793AEF from 12.1 to 12.5 mA on BUSIN +
    14.0        5/2010
                         BUSOUT Response Current
                       • Minor format corrections.
                       • No technical changes. Revised back page. Updated document properties. Added
    15.0        2/2014
                         SMARTMOS sentence to last paragraph.
33793
                                                                              Analog Integrated Circuit Device Data
26                                                                                         Freescale Semiconductor


How to Reach Us:      Information in this document is provided solely to enable system and software implementers to use Freescale products.
                      There are no express or implied copyright licenses granted hereunder to design or fabricate any integrated circuits based
Home Page:
freescale.com         on the information in this document.
Web Support:          Freescale reserves the right to make changes without further notice to any products herein. Freescale makes no
freescale.com/support warranty, representation, or guarantee regarding the suitability of its products for any particular purpose, nor does
                      Freescale assume any liability arising out of the application or use of any product or circuit, and specifically disclaims any
                      and all liability, including without limitation consequential or incidental damages. “Typical” parameters that may be
                      provided in Freescale data sheets and/or specifications can and do vary in different applications, and actual performance
                      may vary over time. All operating parameters, including “typicals,” must be validated for each customer application by
                      customer’s technical experts. Freescale does not convey any license under its patent rights nor the rights of others.
                      Freescale sells products pursuant to standard terms and conditions of sale, which can be found at the following address:
                      freescale.com/SalesTermsandConditions.
                      Freescale and the Freescale logo are trademarks of Freescale Semiconductor, Inc., Reg. U.S. Pat. & Tm. Off.
                      SMARTMOS is a trademark of Freescale Semiconductor, Inc. All other product or service names are the property of their
                      respective owners.
                      © 2014 Freescale Semiconductor, Inc.
                                                                                                           Document Number: MC33793
                                                                                                                                         Rev 15.0
                                                                                                                                            2/2014


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
NXP:
 MCZ33793AEF MCZ33793AEFR2 MCZ33793EF MCZ33793EFR2
