                               High-End 18-Bit Sensor Signal                                                                    ZSSC3218
                               Conditioner                                                                                       Datasheet
Brief Description                                                       Benefits
The ZSSC3218 is a sensor signal conditioner (SSC)             •         Integrated 26-bit calibration math digital signal
integrated circuit for high-accuracy amplification and                  processor (DSP)
analog-to-digital conversion of a differential or             •         Fully corrected signal at digital output
pseudo-differential input signal. Designed for high-          •         Layout customized for die-die bonding with
resolution sensor module applications, the                              sensor for high-density chip-on-board assembly
                                             st      nd
ZSSC3218 can perform offset, span, and 1 and 2                •         One-pass calibration minimizes calibration costs
order temperature compensation of the measured                •         No external trimming, filter, or buffering com-
signal. Developed for correction of resistive bridge or                 ponents required
absolute voltage sensors, it can also provide a
                                                              •         Highly integrated CMOS design
corrected temperature output measured with an
internal sensor.                                              •         Integrated reprogrammable non-volatile memory
                                                              •         Excellent for low-voltage and low-power battery
The measured and corrected sensor values are
                                                                        applications
provided at the digital output pins, which can be
                 2
configured as I C™* (≤ 3.4MHz) or SPI (≤ 20MHz).              •         Optimized for operation in calibrated resistive
Digital compensation of signal offset, sensitivity,                     (e.g., pressure) sensor or calibrated absolute
temperature, and non-linearity is accomplished via a                    voltage (e.g., thermopile) sensor modules
26-bit internal digital signal processor (DSP) running
a correction algorithm. Calibration coefficients are          Physical Characteristics
stored on-chip in a highly reliable, non-volatile,            •         Supply voltage range: 1.68V to 3.6V
multiple-time programmable (MTP) memory. Pro-                 •         Current consumption: 1.0mA (operating mode)
gramming the ZSSC3218 is simple via the serial
                                                              •         Sleep State current: 20nA (typical)
interface. The interface is used for the PC-controlled
                                                              •         Temperature resolution: <0.003K/LSB
calibration procedure, which programs the set of
calibration coefficients in memory. The ZSSC3218              •         Best-in-class energy-efficiency:
provides accelerated signal processing, increased                            with 16-bit resolution: <140pJ/step
resolution, and improved noise immunity in order to                          with 18-bit resolution: <50pJ/step
support high-speed control, safety, and real-time             •         Operation temperature: –40°C to +85°C
sensing applications with the highest requirements            •         Small die size
for energy efficiency.                                        •         Delivery options: die for wafer bonding
Features                                                      * I2C™ is a trademark of NXP.
•     Flexible, programmable analog front-end design;         ** FSO = Full Scale Output.
      up to 18-bit analog-to-digital converter (ADC)
•     Fully programmable gain amplifier for optimizing        ZSSC3218 Application Example
      sensor signals: gain range 6.6 to 216 (linear)                                                                      VSS
                                                                                                                          VDD           ry
•
                                                                                                                                   Batte
      Internal auto-compensated temperature sensor                        VDD
•
                                                                                       Stacked-Die Sensor Module
      Digital compensation of individual sensor offset;                         VDD
        st      nd                                                                            ZSSC3218                    SS
      1 and 2 order digital compensation of sensor                 VSS
                                                                                VSS
                        st     nd
      gain as well as 1 and 2 order temperature gain                            RES
                                                                                         VDDB          INP(+)       SS
                                                                                                                          MOSI
                                                                                                                          SDA
                                                                  RES
      and offset drift
                                                                                                                                                    Signal Output /
                                                                                VDDB        sensor element          INP   SCLK
                                                                                                                          SCL
•     Programmable interrupt operation                                                                             VSSB
                                                                                                                                  Microcontroller
                                                                                                                                                    Post-processing
                                                                                INN
                                                                  EOC
•
                                                                                EOC
      High-speed sensing: e.g. 16-bit conditioned                 MISO          MISO
                                                                                         INN(-)        VSSB
                                                                                                                   MOSI
                                                                                                                    SDA
                                                -1                                                                 SCLK
      sensor signal measurement rate >500s                                                                          SCL
•     Typical sensor elements can achieve an accu-
      racy of better than ±0.10% FSO** at -40 to 85°C
    © 2016 Integrated Device Technology, Inc.             1                                                                      April 20, 2016


                                  High-End 18-Bit Sensor Signal                                                                                     ZSSC3218
                                  Conditioner                                                                                                            Datasheet
                                                  VDDB                                                          Vreg int
ZSSC3218                                                                                                                                                      VDD
                                                        VTP   Temperature
Block Diagram                                                 Reference          AGND / CM           Bias Current                       Voltage
                                                                                 Generator           Generator                          Regulator
                                                        VTN   Sensor                                                       Power Ctr.                         VSS
                                                                                                                                    ZSSC3218
                                                                   Multiplexer
                                                                                                                      A                 DSP Core
                                                  INP                                                                                   (Calculations,        EOC
                                 Sensor                                                              Pre-
                                                                                                                           D            Communication)
                                 Bridge           INN                                             Amplifier                18 Bit
                                                  VSSB
                                                                                                                                                              SCLK/SCL
                                                                                                                                                              SS
                                                                                                                                                    SPI       MOSI/SDA
                                                                                     Clock                             System                                 MISO
                                                              Power-ON                                                 Control          MTP         I²CTM
                                                                                     Generator                                                                RES
                                                              Reset                                                     Unit
                                                                                                 Oscillator
Applications
 Barometric altitude measurement for
  portable navigation or emergency call
  systems
 Altitude measurement for car navigation
 Weather forecast
 Fan control
 Industrial, pneumatic, and liquid pressure
 High-resolution temperature measurements
 Object-temperature radiation (via thermopile)
Sales Code                  Description                                                                                     Package
ZSSC3218BI1B                Die—temperature range: –40°C to +85 °C; thickness 304µm                                         Unsawn wafer
ZSSC3218BI2B                Die—temperature range: –40°C to +85 °C; thickness 725µm                                         Unsawn wafer
                            (w/o backlapping)
ZSSC3218BI3R ES             PQFN24—temperature range: –40°C to +85 °C; engineering                                          Packaged die
                            samples
© 2016 Integrated Device Technology, Inc.                                        2                                                                        April 20, 2016


                                                                                                                                             ZSSC3218 Datasheet
Table of Contents
1    IC Characteristics .......................................................................................................................................... 6
   1.1. Absolute Maximum Ratings .................................................................................................................... 6
   1.2. Operating Conditions .............................................................................................................................. 6
   1.3. Electrical Parameters ............................................................................................................................. 7
   1.4. Power Supply Rejection Ratio (PSRR) vs. Frequency ........................................................................... 9
2 Circuit Description ....................................................................................................................................... 10
   2.1. Brief Description ................................................................................................................................... 10
   2.2. Signal Flow and Block Diagram............................................................................................................ 10
   2.3. Analog Front End .................................................................................................................................. 11
     2.3.1. Amplifier ......................................................................................................................................... 11
     2.3.2. Analog-to-Digital Converter ............................................................................................................ 13
     2.3.3. Selection of Gain and Offset – Sensor System Dimensioning ...................................................... 15
     2.3.4. Temperature Measurement ........................................................................................................... 16
     2.3.5. External Sensor Supply: Bridge Sensors ....................................................................................... 16
     2.3.6. External Sensor: Absolute Voltage Source Sensors ..................................................................... 16
   2.4. Digital Section ....................................................................................................................................... 17
     2.4.1. Digital Signal Processor (DSP) Core ............................................................................................. 17
     2.4.2. MTP Memory.................................................................................................................................. 17
     2.4.3. Clock Generator ............................................................................................................................. 17
     2.4.4. Power Supervision ......................................................................................................................... 17
     2.4.5. Interface ......................................................................................................................................... 17
3 Functional Description ................................................................................................................................. 18
   3.1. Power Up .............................................................................................................................................. 18
   3.2. Measurements ...................................................................................................................................... 18
   3.3. Interrupt (EOC Pin) ............................................................................................................................... 19
   3.4. Operational Modes ............................................................................................................................... 21
                    2
     3.4.1. SPI/I C™ Commands .................................................................................................................... 24
   3.5. Communication Interface ...................................................................................................................... 27
     3.5.1. Common Functionality ................................................................................................................... 27
     3.5.2. SPI.................................................................................................................................................. 28
               2
     3.5.3. I C™ ............................................................................................................................................... 30
   3.6. Multiple Time Programmable (MTP) Memory ...................................................................................... 32
     3.6.1. Programming Memory.................................................................................................................... 32
     3.6.2. Memory Contents ........................................................................................................................... 33
   3.7. Calibration Sequence ........................................................................................................................... 41
     3.7.1. Calibration Step 1 – Assigning Unique Identification ..................................................................... 41
     3.7.2. Calibration Step 2 – Data Collection .............................................................................................. 42
  © 2016 Integrated Device Technology, Inc.                                     3                                                                     April 20, 2016


                                                                                                                                                ZSSC3218 Datasheet
     3.7.3. Calibration Step 3a) – Coefficient Calculations ............................................................................. 43
     3.7.4. Calibration Step 3b) – Post-Calibration Offset Correction ............................................................. 43
     3.7.5. SSC Measurements ....................................................................................................................... 43
   3.8. The Calibration Math ............................................................................................................................ 44
     3.8.1. Bridge Signal Compensation ......................................................................................................... 44
     3.8.2. Temperature Signal Compensation ............................................................................................... 47
     3.8.3. Measurement Output Data Format ................................................................................................ 48
4    Package Information and Pad Assignments ............................................................................................... 49
5    Quality and Reliability .................................................................................................................................. 53
6    Ordering Sales Codes ................................................................................................................................. 53
7    Related Documents ..................................................................................................................................... 53
8    Glossary ...................................................................................................................................................... 54
9    Document Revision History ......................................................................................................................... 55
Table of Figures
Figure 2.1     ZSSC3218 Functional Block Diagram, Resistive-Bridge Sensor .................................................. 10
Figure 2.2     ZSSC3218 Functional Block Diagram, Voltage-Source Sensor .................................................... 11
Figure 2.3     Gain and Offset Setup ................................................................................................................... 16
Figure 3.1     Interrupt Functionality .................................................................................................................... 20
Figure 3.2     Operational Flow Chart: Power Up ................................................................................................ 22
Figure 3.3     Operational Flow Chart: Command Mode and Normal Mode (Sleep and Cyclic) ......................... 23
Figure 3.4     SPI Configuration CPHA=0............................................................................................................ 28
Figure 3.5     SPI Configuration CPHA=1............................................................................................................ 29
Figure 3.6     SPI Command Request ................................................................................................................. 29
Figure 3.7     SPI Read Status ............................................................................................................................ 30
Figure 3.8     SPI Read Data ............................................................................................................................... 30
Figure 3.9     I2C™ Command Request .............................................................................................................. 31
                2
Figure 3.10    I C™ Read Status .......................................................................................................................... 31
                2
Figure 3.11    I C™ Read Data ............................................................................................................................ 31
Figure 4.1     ZSSC3218 Pad Placement ............................................................................................................ 49
Figure 4.2     General PQFN24 Package Dimensions ........................................................................................ 51
List of Tables
Table 1.1      Maximum Ratings ............................................................................................................................ 6
Table 1.2      Operating Conditions ....................................................................................................................... 6
Table 1.3      Requirements for VDD Power-on Reset .......................................................................................... 7
  © 2016 Integrated Device Technology, Inc.                                        4                                                                     April 20, 2016


                                                                                                                                          ZSSC3218 Datasheet
Table 1.4     Electrical Parameters ....................................................................................................................... 7
Table 2.1     Amplifier Gain: Stage 1 .................................................................................................................. 12
Table 2.2     Amplifier Gain: Stage 2 .................................................................................................................. 12
Table 2.3     Gain Polarity .................................................................................................................................. 12
Table 2.4     ADC Conversion Times for a Single Analog-to-Digital Conversion ............................................... 13
Table 2.5     ADC Offset Shift............................................................................................................................. 14
Table 2.6     Typical Conversion Times vs. Noise Performance with Full Sensor Signal Conditioning for AZSM,
              SM, AZTM, and TM (Bridge-Type Sensor) .................................................................................... 14
                    2
Table 3.1     SPI/I C™ Commands .................................................................................................................... 24
Table 3.2     Get_Raw Commands .................................................................................................................... 26
Table 3.3     General Status Byte ....................................................................................................................... 27
Table 3.4     Mode Status ................................................................................................................................... 28
Table 3.5     MTP Memory Content Assignments .............................................................................................. 33
Table 3.6     Measurement Results of ADC Raw Measurement Request (two’s complement) ......................... 48
Table 3.7     Calibration Coefficients (Factors and Summands) in Memory (sign-magnitude) .......................... 48
Table 3.8     Output Results from SSC-Correction Math or DSP—Sensor and Temperature ........................... 48
Table 3.9     Interrupt Thresholds TRSH1 and TRSH2—Format as for SSC-Correction Math Output ............. 48
Table 4.1     Pad Assignments ........................................................................................................................... 50
Table 4.2     Die Connection and Bond Parameter ............................................................................................ 50
Table 4.3     Physical Package Dimensions ....................................................................................................... 51
Table 4.4     Pin Assignments PQFN24 ............................................................................................................. 52
 © 2016 Integrated Device Technology, Inc.                                   5                                                                     April 20, 2016


                                                                                                                                    ZSSC3218 Datasheet
1       IC Characteristics
1.1.     Absolute Maximum Ratings
Note: The absolute maximum ratings are stress ratings only. The ZSSC3218 might not function or be operable
above the recommended operating conditions. Stresses exceeding the absolute maximum ratings might also
damage the device. In addition, extended exposure to stresses above the recommended operating conditions
might affect device reliability. IDT does not recommend designing to the “Absolute Maximum Ratings.”
Table 1.1       Maximum Ratings
                                  PARAMETER                                               SYMBOL             Min      TYP            MAX            UNITS
Voltage Reference                                                                             VSS             0                        0               V
Analog Supply Voltage                                                                         VDD            -0.4                    3.63              V
Voltage at all Analog and Digital IO Pins                                                VA_IO, VD_IO        -0.5                 VDD+0.5              V
                                                       1), 2)
Input Current into any Pin except RES, SS                                                      IIN          -100                      100             mA
                                                                                   3)
Electrostatic Discharge Tolerance – Human Body Model (HBM1)                                  VHBM1         ±4000                        -              V
Storage Temperature                                                                          TSTOR           -50                      125             °C
    1)   Latch-up current limit for RES, ZMDI-test and SS: ±70mA.
    2)   Latch-up resistance; reference for pin is 0V.
    3)   HBM1: C = 100pF charged to VHBM1 with resistor R = 1.5kΩ in series based on MIL 883, Method 3015.7. ESD protection
         referenced to the Human Body Model is tested with devices in ceramic dual in-line packages (CDIP) during product qualification.
1.2.     Operating Conditions
The reference for all voltages is Vss.
Table 1.2       Operating Conditions
                                  PARAMETER                                                 SYMBOL              MIN       TYP            MAX         UNIT
 Supply Voltage                                                                                 VDD             1.68        -             3.6          V
 VDD Rise Time                                                                                  tVDD                                      200         μs
                   1)
                                                                                                                                          1.8
 Bridge Current                                                                               IVDDB                                                   mA
                                                                                                                                         16.5
 Operation Temperature Range                                                                  TAMB               -40        -             85          °C
 External (Parasitic) Capacitance between VDDB and VSS                                           CL             0.01                      50          nF
     1)   Power supply rejection is reduced if a current in the range of 16.5mA > IVDDB > 1.8mA is drawn out of VDDB.
 © 2016 Integrated Device Technology, Inc.                                      6                                                            April 20, 2016


                                                                                                  ZSSC3218 Datasheet
A dynamic power-on-reset circuit is implemented in order to achieve minimum current consumption in idle mode.
The VDD low level and the subsequent rise time and VDD rising slope must meet the requirements in Table 1.1
to guarantee an overall IC reset; lower VDD low levels allow slower rising of the subsequent on-ramp of VDD.
Other combinations might also be possible. For example, the reset trigger can be influenced by increasing the
power-down time and lowering the VDD rising slope requirement. Alternatively, the RES pin can be connected
and used to control safe resetting of the ZSSC3218. RES is active-low; a VDD-VSS-VDD transition at the RES
pin leads to a complete IC reset.
Table 1.3     Requirements for VDD Power-on Reset
                           PARAMETER                                 SYMBOL       MIN      TYP      MAX         UNIT
 Power Down Time (duration of VDD Low Level)                           tSPIKE      3         -         -          µs
 VDD Low Level                                                        VDDlow       0         -        0.2          V
 VDD Rising Slope                                                     SRVDD        10        -         -        V/ms
1.3.    Electrical Parameters
All parameter values are valid only under the specified operating conditions. All voltages are referenced to Vss.
Table 1.4     Electrical Parameters
Note: See important table notes at the end of the table.
             Parameter                Symbol       Conditions/Comments             Min      Typ      Max         Unit
 Supply
 External Sensor Supply Voltage,
                                     VDDB     Internally generated                1.60     1.68      1.75          V
 ADC Reference Voltage
                                              Active State, average                        1050      1500         µA
 Current Consumption                 IVDD
                                              Sleep State, idle current, ≤ 85°C              20      250          nA
 Power Supply Rejection                       VDD = 1.8V                           17        60       88          dB
 20·log10(VDD/VDDB)                  PSRVDD
 (see section 1.4)                            VDD = 2V                             32        65       91          dB
 Analog-to-Digital Converter (ADC, A2D)
 Resolution                          rADC                                          12                 18          Bit
 ADC Clock Frequency                 fADC    Internal ADC clock                    0.9       1        1.1        MHz
                                             Conversions per second for single
                                             18-bit external sensor A2D                               1.1        kHz
                                             conversion (w/o AZ)
 Conversion Rate                     fS,raw
                                             Conversions per second for single
                                             16-bit temperature sensor A2D                            2.3        kHz
                                             conversion (w/o AZ)
  © 2016 Integrated Device Technology, Inc.                 7                                            April 20, 2016


                                                                                                                                   ZSSC3218 Datasheet
             Parameter                        Symbol               Conditions/Comments                         Min        Typ           Max             Unit
 Amplifier
 Gain                                        Gamp            64 steps                                          6.6                      216
 Gain Error                                  Gerr            Referenced to nominal gain                        -2.5           -         2.5              %
 Sensor Signal Conditioning Performance
                                                            Accuracy error for sensor that is
                      1)
 IC Accuracy Error                           ErrA,IC        ideally linear (in temperature and                                          0.01          %FSO
                                                            measurand)
                                                            Conversion per second for fully
 Conversion Rate, 18-Bit SSC                 fS, SSC                                                                      270           300              Hz
                                                            corrected 18-bit measurement
 Input
Input Voltage Range                        VINP, VINN       Input voltage range at INP and INN                0.65                      1.05              V
                                                            Full power supply disturbance
                                                                                                                1           10           50              kΩ
External Sensor Bridge                                      rejection (PSRR) capabilities
                                           RBR
Resistance                                                  Reduced PSRR, but full
                                                                                                               100                      999               Ω
                                                            functionality
 Power-Up
                                                            VDD ramp up to interface
                                             tSTA1                                                                                        1             ms
                                                            communication (see section 3.1)
 Start-up Time
                                             tSTA2          VDD ramp up to analog operation                                              2.5            ms
                                                            Sleep to Active State interface
                                             tWUP1                                                                                       0.5            ms
                                                            communication
 Wake-up Time
                                                            Sleep to Active State analog
                                             tWUP2                                                                                        2             ms
                                                            operation
 Oscillator
Internal Oscillator Frequency              fCLK                                                                3.6           4           4.4           MHz
 Internal Temperature Sensor
Temperature Resolution                                      -40°C to +85°C                                               0.003                      K/LSB
 Interface and Memory
                                                            Maximum capacitance at MISO
SPI Clock Frequency                        fC,SPI                                                                            1           20         MHz
                                                            line: 40pF at VDD=1.8V
I²C™ Clock Frequency                       fC,I2C                                                                                        3.4        MHz
                                                            MTP programming time per 16-bit
Program Time                               tprog                                                                             5           16         ms
                                                            register
Endurance                                  nMTP             Number of reprogramming cycles                    1000       10000                      numeric
Data Retention                             tRET_MTP         1000h at 125°C                                      10                                  a
     1)   Percentage referred to maximum full-scale output (FSO); e.g. for 18-bit measurements: ErrA,IC [%FSO] = 100 · MAX{ | ADCmeas – ADCideal | } / 218.
  © 2016 Integrated Device Technology, Inc.                                   8                                                             April 20, 2016


                                                         ZSSC3218 Datasheet
1.4.   Power Supply Rejection Ratio (PSRR) vs. Frequency
 © 2016 Integrated Device Technology, Inc.     9             April 20, 2016


                                                                                                                         ZSSC3218 Datasheet
2 Circuit Description
2.1.    Brief Description
The ZSSC3218 provides a highly accurate amplification of bridge sensor signals. The compensation of sensor
offset, sensitivity, temperature drift, and non-linearity is accomplished via a 26-bit DSP core running a correction
algorithm with calibration coefficients stored in a non-volatile memory. The ZSSC3218 can be configured for a
wide range of resistive bridge sensor types and for absolute voltage source sensors. A digital interface (SPI or
 2
I C™) enables communication. The ZSSC3218 supports two operational modes: Normal Mode and Command
Mode. Normal Mode is the standard operating mode. Typically in Normal Mode, the ZSSC3218 wakes up from a
Sleep State (low power), runs a measurement in Active State, and automatically returns to the Sleep State. (See
section 3.4 for details on operational modes.)
2.2.    Signal Flow and Block Diagram
See Figure 2.1 and Figure 2.2 for the ZSSC3218 block diagram for different input sensors. The sensor bridge
supply VDDB and the power supply for analog circuitry are provided by a voltage regulator, which is optimized for
power supply disturbance rejection (PSRR). See section 1.4 for a graph of PSRR versus frequency. To improve
noise suppression, the digital blocks are powered by a separate voltage regulator. A power supervision circuit
monitors all supply voltages and generates appropriate reset signals for initializing the digital blocks.
The System Control Unit controls the analog circuitry to perform the three measurement types: external sensor,
temperature, and offset measurement. The multiplexer selects the signal input to the amplifier, which can be the
external signals from the input pins INP and INN or the internal temperature reference sensor signals. A full
measurement request will trigger an automatic sequence of all measurement types and all input signals.
Figure 2.1 ZSSC3218 Functional Block Diagram, Resistive-Bridge Sensor
                       VDDB                                                         Vreg int
                              VTP   Temperature                                                                                   VDD
                                                       AGND / CM         Bias Current                       Voltage
                                    Reference
                                                       Generator         Generator                          Regulator
                              VTN   Sensor                                                     Power Ctr.                         VSS
                                                                                                        ZSSC3218
                                         Multiplexer
                                                                                          A                 DSP Core
                        INP                                                                                 (Calculations,         EOC
       Sensor                                                           Pre-
                                                                                               D            Communication)
       Bridge          INN                                           Amplifier                 18 Bit
                        VSSB
                                                                                                                                  SCLK/SCL
                                                                                                                                  SS
                                                                                                                        SPI       MOSI/SDA
                                                        Clock                              System                                 MISO
                                    Power-ON                                               Control          MTP         I²CTM
                                                        Generator                                                                 RES
                                    Reset                                                   Unit
                                                                    Oscillator
 © 2016 Integrated Device Technology, Inc.                          10                                                          April 20, 2016


                                                                                                                            ZSSC3218 Datasheet
Figure 2.2 ZSSC3218 Functional Block Diagram, Voltage-Source Sensor
                   VDDB                                                               Vreg int
                         VTP   Temperature                                                                                          VDD
                                                      AGND / CM            Bias Current                       Voltage
                               Reference
                                                      Generator            Generator                          Regulator
                         VTN   Sensor                                                            Power Ctr.                         VSS
                                                                                                          ZSSC3218
                                    Multiplexer
                                                                                            A                 DSP Core
                                                                                                                                    EOC
        V source
                   INP                                                                                        (Calculations,
                                                                           Pre-
                                                                                                 D            Communication)
                   INN                                                  Amplifier                18-Bit
                   VSSB
                                                                                                                                   SCLK/SCL
                                                                                                                                   SS
                                                                                                                          SPI      MOSI/SDA
                                                       Clock                                 System                                MISO
                               Power-On                                                      Control          MTP         I²CTM
                                                       Generator                                                                   RES
                               Reset (POR)                                                    Unit
                                                                       Oscillator
The amplifier consists of two stages with programmable gain values.
The ZSSC3218 employs a programmable analog-to-digital converter (ADC) optimized for conversion speed and
noise suppression. The programmable resolution from 12 to 18 bits provides flexibility for adapting the
conversion characteristics. To improve power supply noise suppression, the ADC uses the bridge supply VDDB as
its reference voltage leading to a ratiometric measurement topology if the external sensor is a bridge-type
element.
The remaining IC-internal offset and the sensor element offset, i.e., the overall system offset for the amplifier and
ADC, can be canceled by means of an offset and auto-zero measurement, respectively.
                                                                  st           nd
The DSP accomplishes the auto-zero, span, and 1 and 2 order temperature compensation of the measured
external sensor signal. The correction coefficients are stored in the MTP memory.
                                                  2
The ZSSC3218 supports SPI and I C™ interface communication for controlling the ZSSC3218, configuration,
and measurement result output.
2.3.   Analog Front End
2.3.1. Amplifier
The amplifier has a fully differential architecture and consists of two stages. The amplification of each stage and
the external sensor gain polarity are programmable via settings in the Measurement Configuration Register
SM_config1 and SM_config2 (addresses 12HEX and 16HEX; see section 3.6.2) in the MTP memory (for details, see
section 2.4.2).
 © 2016 Integrated Device Technology, Inc.                                11                                                      April 20, 2016


                                                                                                                     ZSSC3218 Datasheet
                                    *
The first 6 bits of SM_config are the programmable gain settings Gain_stage1 and Gain_stage2. The options for
the programmable gain settings are listed in Table 2.1 and Table 2.2.
Table 2.1         Amplifier Gain: Stage 1
                                             Gain_stage1
    SM_config Bit G2            SM_config Bit G1           SM_config Bit G0            Gainamp1
               0                           0                          0                     6
               0                           0                          1                    12
               0                           1                          0                    20
               0                           1                          1                    30
               1                           0                          0                    40
               1                           0                          1                    60
               1                           1                          0                    80
               1                           1                          1                  120
Table 2.2         Amplifier Gain: Stage 2
                                              Gain_stage2
    SM_config Bit G5           SM_config Bit G4           SM_config Bit G3             Gainamp2
               0                          0                          0                     1.1
               0                          0                          1                     1.2
               0                          1                          0                     1.3
               0                          1                          1                     1.4
               1                          0                          0                     1.5
               1                          0                          1                     1.6
               1                          1                          0                     1.7
               1                          1                          1                     1.8
If needed, the polarity of the sensor bridge gain can be reversed by setting the Gain_polarity bit, which is bit 6 in
the SM_config register (see section 3.6.2). Changing the gain polarity is achieved by inverting the chopper clock.
Table 2.3 gives the settings for the Gain_polarity bit. This feature enables applying a sensor to the ZSSC3218
with swapped input signals at INN and INP; e.g., to avoid crossing wires for the final sensor module’s assembly.
Table 2.3         Gain Polarity
     Gain_polarity (SM_config Bit 6)             Gain             Setting Description
                       0                           +1           No polarity change.
                       1                           -1           Gain polarity is inverted.
*
  The register name SM_config is used for general register content and effect explanations for both SM_config1 and SM_config2 as the
  registers’ bit assignments are exactly the same for both registers.
  © 2016 Integrated Device Technology, Inc.                             12                                                 April 20, 2016


                                                                                                     ZSSC3218 Datasheet
2.3.2. Analog-to-Digital Converter
An analog-to-digital converter (ADC) is used to digitize the amplifier signal. To allow optimizing the trade-off
between conversion time and resolution, the resolution can be programmed from 12-bit to 18-bit (Adc_bits,
SM_config register; section 3.6.2). The ADC processes differential input signals.
Table 2.4     ADC Conversion Times for a Single Analog-to-Digital Conversion
      Resolution (Bits)         Conversion Time in µs (typical)
             12                                140
             13                                185
             14                                250
             15                                335
             16                                470
             17                                640
             18                                890
The ADC can perform an offset shift in order to adapt input signals with offsets to the ADC input range. The shift
feature is enabled by setting SM_config register’s bit [15] = 1 (Shift_method = 1). The respective analog offset
shift can be set up with bits [14:12], Offset in SM_config. The offset shift causes the ADC to perform an additional
amplification of the ADC’s input signal by factor 2. This must be considered for a correct analog sensor setup by
means of the pre-amplifier’s gain, the ADC offset shift, and the potential ADC gain.
The overall analog amplification 𝐺𝐺𝐺𝐺𝑡𝑡𝑡𝑡𝑡 = 𝐺𝐺𝐺𝐺𝑎𝑎𝑎1 ∙ 𝐺𝐺𝐺𝐺𝑎𝑎𝑎2 ∙ 𝐺𝐺𝐺𝐺𝐴𝐴𝐴 can be determined for the following
potential use cases:
     •   If no offset shift is selected, i.e., Shift_method = 0 and Offset = 000 in SM_config,
                  𝐺𝐺𝐺𝐺𝑡𝑡𝑡𝑡𝑡 = 𝐺𝐺𝑖𝑛𝑎𝑎𝑎1 ∙ 𝐺𝐺𝐺𝐺𝑎𝑎𝑎2 ∙ 1
     •   If ADC offset shift is selected, i.e., Shift_method = 1 (Offset is arbitrary) in SM_config,
                  𝐺𝐺𝐺𝐺𝑡𝑡𝑡𝑡𝑡 = 𝐺𝐺𝐺𝐺𝑎𝑎𝑎1 ∙ 𝐺𝐺𝐺𝐺𝑎𝑎𝑎2 ∙ 2
  © 2016 Integrated Device Technology, Inc.                   13                                         April 20, 2016


                                                                                                                       ZSSC3218 Datasheet
Table 2.5      ADC Offset Shift
                                                           Offset Shift in ADC
     SM_config                 Offset:               Offset:                 Offset:
                                                                                                        Compensation of Percentage
        Bit 15              SM_config              SM_config               SM_config        GainADC
                                                                                                             Offset in Input Signal
  (Shift_method)                Bit 14                Bit 13                  Bit 12
           0                       0                      0                     0               1                        0%
           1                       0                      0                     0               2                        0%
           1                       0                      0                     1               2                      6.75%
           1                       0                      1                     0               2                      12.50%
           1                       0                      1                     1               2                      19.25%
           1                       1                      0                     0               2                      25.00%
           1                       1                      0                     1               2                      31.75%
           1                       1                      1                     0               2                      38.50%
           1                       1                      1                     1               2                      43.25%
Note: If no offset shift will be performed and the ADC will not apply the additional gain of factor 2 (leading to
GainADC = 1), then Shift_method = 0 and Offset = 000 in SM_config must be selected. Any other setup with
Shift_method = 0 and Offset ≠ 000 leads to erroneous analog setups.
Table 2.6      Typical Conversion Times vs. Noise Performance with Full Sensor Signal Conditioning for
                AZSM, SM, AZTM, and TM (Bridge-Type Sensor)
                                                                                                  1)
                                                              Typical Measurement Duration , Typical 3-Sigma Noise for SSC-
     ADC Resolution:                ADC Resolution:                                                                                2)
                                                                      MEASURE, (AAHEX)                       Corrected Output
  Temperature Sensor                External Sensor
                                                                               (ms)                                  (counts)
             16                             12                                  2.2                                     2.4
             16                             13                                  2.3                                     2.5
             16                             14                                  2.4                                     3.0
             16                             15                                  2.6                                     4.4
             16                             16                                  2.8                                     5.7
             16                             17                                  3.2                                    10.5
             16                             18                                  3.7                                    18.0
  1)   Measurement duration is defined as the time from the high/low transition at the EOC pin at the beginning of the measurement until
       the low/high back-transition of the EOC signal at the end of a single measurement in Sleep Mode.
  2)   Reference noise values normalized to the respective external sensor’s ADC resolution, obtained with the following setup:
       20kΩ sensor bridge, 25°C, Gain=52, Offset=25%, VDD=1.8V.
 © 2016 Integrated Device Technology, Inc.                             14                                                    April 20, 2016


                                                                                                            ZSSC3218 Datasheet
2.3.3.    Selection of Gain and Offset – Sensor System Dimensioning
The optimal gain (and offset) setup for a specific sensor element can be determined by the following steps:
    1) Collect sensor element’s characteristic, statistical data (over temperature, ambient sensor parameter,
        and over production tolerances):
             a. Minimum differential output voltage:            Vmin
             b. Maximum differential output voltage:            Vmax
        Note: The best possible setup can only be determined if the absolute value of Vmax is bigger than the
        absolute value of Vmin. If this is not the case, the gain polarity should be reversed by means of the
        Gain_polarity bit in the MTP’s SM_config register.
    2) Calculate:
             a. Common mode level, i.e. differential offset of the sensor output: 𝑉𝐶𝐶 = 0.5 ∙ (𝑉𝑚𝑚𝑚 + 𝑉𝑚𝑚𝑚 )
                                                                                                    𝑉𝐶𝐶
             b. Relative or percentage offset of the sensor output: 𝑂𝑓𝑓𝑠𝑠𝑠𝑠𝑠𝑠𝑠𝑠𝑠 [%] =                       ∙ 100%
                                                                                                 𝑉𝑚𝑚𝑚 – 𝑉𝑚𝑚𝑚
    3) Determine which of the two following cases is valid.
             a. If Offsetsensor[%] > 43% then select Offset = 111 (i.e., 43.25%)
             b. If 0% < Offsetsensor[%] ≤ 43% then select Offset ≤ Offsetsensor[%] (Offset setup value;
                 see Table 2.5)
    4) The totally required, optimum gain can be determined as
                                       1.4𝑉
              𝐺𝐺𝐺𝐺𝑡𝑡𝑡𝑡𝑡,𝑜𝑜𝑜 =          𝑂𝑂𝑂𝑂𝑂𝑂𝑠𝑠𝑠𝑠𝑠𝑠   then select nearest gain to Gaintotal,opt, where Gaintotal ≤ Gaintotal,opt
                              𝑉𝑚𝑚𝑚 ∙�1−             �
                                            100
    5) The gain setup can be separated into the three factors Gainamp1, Gainamp2 (for the 2-stage amplifier) and
        GainADC (1 for no-shift or 2 for shift operation) according to: Gaintotal = Gainamp1 ∙ Gainamp2 ∙ GainADC .
             a. If no offset shift is performed (Shift_method = 0 and Offset = 000), the amplifier gain is Gaintotal
             b. If an offset shift is performed (Shift_method = 1), the amplifier gain is 0.5·Gaintotal
 © 2016 Integrated Device Technology, Inc.                     15                                                 April 20, 2016


                                                                                                                                                    ZSSC3218 Datasheet
Figure 2.3 Gain and Offset Setup
                                          VDDB
                                          INP                                                      A                                       DSP
                                                                                                                                                    SPI
                                                       Gainamp1         Gainamp2                    GainADC
        Sensor                            INN                                Pre-                                                                  I²C™
        Bridge                                                            Amplifier
                                                                                                                            D
                                          VSSB
            Offset
                            Vdifferential, IN              VAMP1, OUT        VAMP2, OUT                          VADC, IN                  Digital ADC Out, 18bit
                                                                                                          1.4V                              131k
      0V
                                                Gainamp1            Gainamp2              GainADC , -Offset                     digitize
                        0V
                     zoom
                                                                                                         -1.4V                              -131k
2.3.4. Temperature Measurement
The ZSSC3218 provides an internal temperature sensor measurement to allow compensation for temperature
effects. See section 1.3 for the temperature sensor resolution. The temperature output signal is a differential
voltage that is adapted by the amplifier for the ADC input.
For temperature measurements, the respective settings are defined and programmed in the MTP by IDT.
2.3.5. External Sensor Supply: Bridge Sensors
The ZSSC3218 provides dedicated supply pins VDDB and VSSB for resistive bridge-type sensors (bit [11]=0 in
SM_config, MTP registers 12HEX or 16HEX). The ADC reference voltages for the sensor bridge measurement are
derived from these internal voltages such that bridge supply disturbances are suppressed. The current drive
ability of VDDB is limited (see IVDDB in section 1.2).
2.3.6. External Sensor: Absolute Voltage Source Sensors
The ZSSC3218 can alternatively process signals from an absolute-voltage source sensor, e.g. a thermopile
element. The respective input-type selection can be done with bit[11]=1 in SM_config, MTP registers 12HEX or
16HEX. The respective sensor element must be connected between the pins INP and INN, whereas INN is
internally connected to the ZSSC3218’s analog ground (not! being VSSB). VDDB and VSSB should not be
connected if an absolute-voltage source sensor is applied. The offset shift should be set to maximum in this case,
Shift_method = 1 and Offset = 111 in SM_config. The required gain can be determined according to the
procedure described in section 2.3.3.
 © 2016 Integrated Device Technology, Inc.                                                16                                                              April 20, 2016


                                                                                                          ZSSC3218 Datasheet
2.4.     Digital Section
2.4.1.     Digital Signal Processor (DSP) Core
The “DSP Core” block performs the algorithm for correcting the sensor signal. The required coefficients are
stored in the MTP memory.
When the measurement results are available, the “end of conversion” signal is set at the EOC pin if no interrupt-
threshold has been set up (bits[8:7]=00 in memory register 02HEX). The internal EOC information is valid only if
both the measurement and calculation have been completed. Alternatively, the EOC pin can indicate exceeding
or underrunning of a certain threshold or leaving of valid-result range as described in section 3.3.
2.4.2.     MTP Memory
The ZSSC3218’s memory is designed with a real MTP structure. The memory is organized in 16-bit registers that
can be re-written multiple (at least 1000) times. The user has access to a 57 x 16-bit storage area for values such
as calibration coefficients. The required programming voltage is generated internally in the ZSSC3218. A
checksum (generation with command 90HEX) is evaluated be for integrity-check purposes of the entire memory.
2.4.3.     Clock Generator
The clock generator provides approximately 4MHz, and 1MHz clock signals as the time base for IC-internal
signal processing. The frequency is trimmed during production test.
2.4.4.     Power Supervision
The power supervision block as a part of the voltage regulator combined with the digital section monitors all
power supplies to ensure a defined reset of all digital blocks during power-up or power supply interruptions.
“Brown-out” cases at the supply that do not meet the power-on reset (POR) requirements (see Table 1.3), must
be resolved with a reset pulse at the RES pin.
2.4.5.     Interface
                                                                                                           2               †
The ZSSC3218 can communicate with the user’s communication master or PC via an SPI or I C™ interface .
The interface type is selectable with the very first activity at the interface after power-up or reset, with the first
activity being
                                             2 TM
       a. If the first command is an I C command and SS pin has been inactive until receiving this command,
                                         2 TM
           the ZSSC3218 enters I C mode.
       b. If the first interface action is the SS pin being set to active (HIGH-active or LOW-active depending on
           SS_polarity bit[9] in memory interface register 02HEX), then the ZSSC3218 enters SPI mode.
During the initiation sequence (after power-up or reset), any potential transition on SS is ignored. Switching to the
SPI mode is only possible after the power-up sequence. If SS is not connected, the SS pin internal pull-up keeps
                       2 TM
the ZSSC3218 in I C mode.
To also provide interface accessibility in Sleep State (all features inactive except for the digital interface logic),
the interface circuitry is directly supplied by VDD.
† Functional I2C™ interface properties correspond to the NXP I²C™ bus specification Rev. 0.3 (June 2009).
  © 2016 Integrated Device Technology, Inc.                         17                                        April 20, 2016


                                                                                                ZSSC3218 Datasheet
3      Functional Description
3.1.     Power Up
Specifications for this section are given in sections 1.2 and 1.3. On power-up, the ZSSC3218 communication
interface is able to receive the first command after a time tSTA1 from when the VDD supply is within operating
specifications. The ZSSC3218 can begin the first measurement after a time of tSTA2, from when the VDD supply is
operational. Alternatively, instead of a power-on-reset, a reset and new power-up-sequence respectively can be
triggered by an IC-reset signal (high low) at RES pin.
The wake up time from Sleep State to Active State (see section 3.4) after receiving the activating command is
defined as tWUP1 and tWUP2. In Command Mode, subsequent commands can be sent after tWUP1. The first
measurement starts after tWUP2 if a measurement request was sent.
3.2.     Measurements
Available measurement procedures are
    • AZSM: auto-zero (external) sensor measurement
    • SM: (external) sensor measurement
    • AZTM: auto-zero temperature measurement
    • TM: temperature measurement
AZSM: The configuration is loaded for measuring the external sensor; i.e., a resistive bridge or an absolute
voltage source. The “Multiplexer” block connects the amplifier input to the AGND analog ground reference. An
analog-to-digital (A2D) conversion is performed so that the inherent system offset for the respective configuration
is converted by the ADC to a digital word with a resolution according to the respective MTP configuration.
SM: The configuration is loaded for measuring the external sensor; i.e. a resistive bridge or an absolute voltage
source. The “Multiplexer” block connects the amplifier input to the INP and INN pins. An A2D conversion is
performed. The result is a digital word with a resolution according to the MTP configuration.
AZTM: The configuration for temperature measurements is loaded. The “Multiplexer” block connects the amplifier
input to AGND. An analog-to-digital conversion is performed so that the inherent system offset for the
temperature configuration is converted by the ADC with a resolution according to the respective MTP con-
figuration.
TM: The configuration for temperature measurements is loaded. The “Multiplexer” block connects the amplifier
input to the internal temperature sensor. An A2D conversion is performed. The result is a digital word with a
resolution according to the MTP configuration.
The typical application’s measurement cycle is a complete SSC measurement (using the commands AAHEX to
AFHEX; see section 3.4.1) with AZSM, SM, AZTM, and TM followed by a signal correction calculation.
  © 2016 Integrated Device Technology, Inc.                18                                         April 20, 2016


                                                                                                      ZSSC3218 Datasheet
3.3.     Interrupt (EOC Pin)
The EOC pin can be programmed to operate either as a pure “measurement busy” and end-of-conversion
indicator or as a configurable interrupt indicator. The respective basic operation must be programmed to the
INT_setup bits [8:7] in register 02HEX (see Table 3.5).
In addition, one or two 24-bit-quantized thresholds can be programmed (TRSH1 and TRSH2 in memory registers
13HEX, 14HEX, and 15HEX).
The respective thresholds are programmed left-aligned in the memory; i.e., they must be programmed with the
threshold’s MSB in the memory register’s MSB, etc. The number of LSB threshold bits that are used is equal to
the number of bits for the selected ADC resolution (determined by the Adc_bits field in registers 12HEX and
16HEX); unused LSB bits are ignored.
The interrupt functionality is only available for digital values from the SSC-calculation unit (i.e., after sensor signal
conditioning); raw values cannot be monitored by the interrupt feature. Figure 3.1 shows the different setup
options and the respective response at the EOC pin. The use of the interrupt functionality is recommended for
cyclic operation (command ABHEX with the respective power-down setup in the Interface Configuration memory
register 02HEX). The EOC level continuously represents the respective SSC-measurement results only during
cyclic operation. For single or oversample measurement requests without cyclic operation, the EOC output signal
is reset to logical zero at the beginning of each new measurement, even though the interrupt thresholds are
considered correctly at the end of each measurement (setting EOC to logical one or zero is dependent on the
interrupt setup).
  © 2016 Integrated Device Technology, Inc.                   19                                             April 20, 2016


                                                                                                                      ZSSC3218 Datasheet
Figure 3.1 Interrupt Functionality
                                           INT_setup=01:                                     INT_setup=10:
                                      Measurement < threshold1                          Measurement > threshold1
                          Measurement                                       Measurement
                               Result                                            Result
                           max.                                              max.
                     threshold 1
                                                                       threshold 1
                               0                                                 0
                                                                Time                                             Time
                            EOC / INT                                         EOC / INT
                               1                                                 1
                               0                                                 0
                                                                Time                                             Time
                                                               INT_setup=11
                                       Case A:                                           Case B:
                          Measurement                                       Measurement
                                       threshold1 > threshold2                           threshold1 < threshold2
                               Result                                            Result
                           max.                                              max.
                     threshold 1                                       threshold 2
                     threshold 2                                       threshold 1
                               0                                                 0
                                                                Time                                             Time
                            EOC / INT                                         EOC / INT
                               1                                                 1
                               0                                                 0
                                                                Time                                             Time
 © 2016 Integrated Device Technology, Inc.                           20                                                   April 20, 2016


                                                                                                    ZSSC3218 Datasheet
3.4.     Operational Modes
Figure 3.2 illustrates the ZSSC3218 power-up sequence and subsequent operation depending on the selected
                                    2
interface communication mode (I C™ or SPI) as determined by interface-related first activities after power-up or
reset. If the first command after power-up is a valid I²C™ command, the interface will function as an I²C™
interface until the next power-on-reset. If there is no valid I²C™ command, but an active signal at the SS pin is
detected as the first valid activity, then the interface will respond as an SPI slave. With either interface, after the
voltage regulators are switched on, the ZSSC3218’s low-voltage section (LV) is active while the related interface
configuration information is read from memory. Then the LV section is switched off, the ZSSC3218 goes into
Sleep State, and the interface is ready to receive commands. The interface is always powered by VDD, so it is
referred to as the high voltage section (HV).
See Table 3.1 for definitions of the commands.
Figure 3.3 shows the ZSSC3218 operation in Normal Mode (with two operation principles: “Sleep” and “Cyclic”)
and Command Mode, including when the LV and HV sections are active as indicated by the color legend. The
Normal Mode automatically returns to Sleep State after executing the requested measurements, or periodically
wakes up and conducts another measurement according to the setting for the sleep duration configured by
CYC_period (bits[14:12] in memory register 02HEX). In Command Mode, the ZSSC3218 remains active if a
dedicated command (Start_NOM) is sent, which is helpful during calibration. Command Mode can only be
entered if Start_CM is the first command received after POR.
  © 2016 Integrated Device Technology, Inc.                  21                                           April 20, 2016


                                                                                                                                                                                            ZSSC3218 Datasheet
Figure 3.2 Operational Flow Chart: Power Up
                                                                                                                            IC Power On                           I2CTM slave address is loaded,
                          Color Legend:                                                                                                                           and SS_polarity determines if
                                                                                                                                                                  SS pin is active high or low
                                          LV Operation
                                                                                                           Command:= load I/O setup
                                         HV Operation
                                                                                                                    IO_mode = I2C™
                                                                                                                                                no
                                                                                                I2C™ Address /
                                                                                                                                  no                 SS Pin Active?
                                                                                                  CMD Valid?
                                                                                yes                                                                       yes
                                                  I2C™ Interface                                                                                                                                    SPI Interface
                                                                                                                                                     IO_mode:=SPI
                                                                                 Power up LV
           From this point until next POR,
                                                                                                                                                        Power up LV
                                                                                 LV Operation
                                                                                                              Data/Status                               LV Operation
                                                                                                                                                                                      Data/Status
                                                                          Save: IC ID / Data / Status          from LV
                                                                                                                                                                                       from LV
           the interface selection is fixed
                                                                                                                                                     Save: Setup / Data /
                                                                                                                                                           Status
                                                                               CommandMode
                                                                              ==active || Test==1
                                                                                                                                                      CommandMode
                                                                        yes           no                                                             ==active || Test==1
                                                                                                         no
                                                                                Power Down (switch                                                                               no
                                                                                                                                               yes           no
                                                                                 off LV and wait for
                                                                                      command)
                                                                                                                                                       Power Down (switch
                                                                                                                                                        off LV and wait for
                                                                                                                                                             command)
                                                                   no         Receive: Command
                                                                                                                                          no
                                                                               Received CMD ID                                                          RST(SS)==1
                                                                                   == IC-ID
                                                                                      yes                                                                    yes
                                                                                                                                                     Receive: Command
                                                                                 Read_bit == 1
                                                                                  (Data Fetch)
                                                                                      yes                                                                   NOP
                                                                              Execute: Data Fetch
                                                                                                                                                             yes
                                                                                                                                                     Execute: Data Fetch
 © 2016 Integrated Device Technology, Inc.                                                                           22                                                                               April 20, 2016


                                                                                                                                                              ZSSC3218 Datasheet
Figure 3.3 Operational Flow Chart: Command Mode and Normal Mode (Sleep and Cyclic)
                                                                         Start LV
   Color Legend:
     LV Operation
                                                                  Get Command from HV
     HV Operation
                                                                      CYCLIC_ACTIVE?
                          yes
                                                                            no
                                                                      CMD==Start_CM                                                yes
                                                                            no
                                      SETUP_LV:= New
                                      Command’s Setup
                                New command                                                                                                                          CM active
                                                                      Case (Command)      INVALID_CMD
                    New Measurement
                                                                        REGULAR_CMD
                      Command or                                                                               Power up all LV
                     STOP_CYCLE?                                                                                                                        Receive: Command
   STOP_CYCLE                                                                                                                            INVALID_CMD
                                                                                                                                                                            Start_NOM
                           no                                                                             Count Waiting Period
                                                                           Do: SETUP_LV
                                                                                                                                                         Case (Command)
                                                        Data/Status
                      Keep Existing                                                                           Power Down all LV
                       SETUP_LV                                                                                Except Oscillator
                                                                         Execute: Command                                                                             CM inactive
                                                         from LV
                                                                                                          Safe Command and                                 REGULAR_CMD
                                                                                                              SETUP_LV
     Reset LV                                                            Cyclic Measurement?            yes
                                                                                                                                          Data/Status
                                                                                                                                                            Execute: Command
                                                                                                                                           from LV
                                                                                    no                        CYCLIC_ACTIVE!
                                                                                                                   to HV
                                                                                 End LV
                                                                                                                                                               Command Mode
                                                                          Sleep Mode                          Cyclic Mode
 © 2016 Integrated Device Technology, Inc.                                                     23                                                                     April 20, 2016


                                                                                                          ZSSC3218 Datasheet
                2
3.4.1.     SPI/I C™ Commands
           2
The SPI/I C™ commands supported by the ZSSC3218 are listed in Table 3.1. The command to read an address
in the user memory is the same as its address. The command to write to an address in user memory is the
address plus 40HEX.
There is a IDT-reserved section of memory that can be read but not over-written by the user.
                    2
Table 3.1      SPI/I C™ Commands
Note: Every return starts with a status byte followed by the data word as described in section 3.5.1.
      Command                                                                                         Normal   Command
                                 Return                                Description
        (Byte)                                                                                         Mode      Mode
  00HEX to 39HEX      16-bit user data                Read data in the user memory address              Yes        Yes
                                                      (00HEX to 39HEX) matching the command
                                                      (might not be using all addresses).
  3AHEX to 3FHEX      16-bit IDT-reserved memory      Read data in IDT-reserved memory at               Yes        Yes
                      data                            address (3AHEX to 3FHEX).
  40HEX to 79HEX      —                               Write data to user memory at address              Yes        Yes
  followed by data                                    specified by command minus 40HEX
  (0000HEX to                                         (addresses 00HEX to 39HEX respectively; might
  FFFFHEX)                                            not be using all addresses).
  90HEX               —                               Calculate and write memory checksum               Yes        Yes
                                                      (CRC).
  A0HEX to A7HEX      24-bit formatted raw data       Get_Raw This command can be used to               Yes        Yes
  followed by                                         perform a measurement and write the raw
  XXXXHEX                                             ADC data into the output register. The LSB of
  (see Table 3.2)                                     the command determines how the AFE
                                                      configuration register is loaded for the
                                                      Get_Raw measurement (see Table 3.2).
  A8HEX               —                               Start_NOM Exit Command Mode and                   No         Yes
                                                      transition to Normal Mode (Sleep or Cyclic).
  A9HEX               —                               Start_CM Exit Normal Mode and transition          Yes         No
                                                      to Command Mode (as very first command
                                                      after power-up).
  AAHEX                24-bit formatted fully         Measure Trigger full measurement cycle            Yes        Yes
                       corrected sensor meas-         (AZSM, SM, AZTM, and TM, as described in
                       urement data + 24-bit          section 3.2) and calculation and storage of
                       corrected temperature          data in the output buffer using the
                       data                           configuration from MTP.
  © 2016 Integrated Device Technology, Inc.                       24                                          April 20, 2016


                                                                                             ZSSC3218 Datasheet
   Command                                                                               Normal   Command
                              Return                         Description
     (Byte)                                                                               Mode      Mode
ABHEX               24-bit formatted fully Measure Cyclic This command triggers a          Yes        Yes
                    corrected sensor meas- continuous full measurement cycle (AZSM,
                    urement data + 24-bit  SM, AZTM, and TM; see section 3.2) and
                    corrected temperature  calculation and storage of data in the output
                    data                   buffer using the configuration from MTP
                                           followed by a pause determined by
                                           CYC_period (bits[14:12] in memory register
                                           02HEX).
ACHEX               24-bit formatted fully Oversample-2 Measure Mean value gen-            Yes        Yes
                    corrected sensor meas- eration: 2 full measurements are conducted
                    urement data + 24-bit  (as in command AAHEX), the measurements’
                    corrected temperature  mean value is calculated, and data is stored
                    data                   in the output buffer using the configuration
                                           from MTP; no power down or pause between
                                           the 2 measurements.
ADHEX               24-bit formatted fully Oversample-4 Measure Mean value                 Yes        Yes
                    corrected sensor meas- generation: 4 full measurements (as in
                    urement data + 24-bit  command AAHEX) are conducted, the
                    corrected temperature  measurements’ mean value is calculated,
                    data                   and data is stored in the output buffer using
                                           the configuration from MTP; no power down
                                           or pause between the 4 measurements.
AEHEX               24-bit formatted fully Oversample-8 Measure Mean value gen-            Yes        Yes
                    corrected sensor meas- eration: 8 full measurements (as in command
                    urement data + 24-bit  AAHEX) are conducted, the measurements’
                    corrected temperature  mean value is calculated, and data is stored
                    data                   in the output buffer using the configuration
                                           from MTP; no power down or pause between
                                           the 8 measurements.
AFHEX               24-bit formatted fully Oversample-16 Measure Mean value                Yes        Yes
                    corrected sensor meas- generation: 16 full measurements (as in
                    urement data + 24-bit  command AAHEX) are conducted, the
                    corrected temperature  measurements’ mean value is calculated,
                    data                   and data is stored in the output buffer using
                                           the configuration from MTP; no power down
                                           or pause between the 16 measurements.
B0HEX              —                       Select SM_config1 register (12HEX in            Yes        Yes
                                           memory) For any measurement using the
                                           memory contents for the analog front-end
                                           and sensor setup, the respective setup is
                                           loaded from the SM_config1 register; status
                                           bit[1]==0 (default).
© 2016 Integrated Device Technology, Inc.              25                                        April 20, 2016


                                                                                                                                  ZSSC3218 Datasheet
    Command                                                                                                                 Normal        Command
                                        Return                                      Description
       (Byte)                                                                                                                Mode            Mode
  B1HEX                   —                                    Select SM_config2 register (16HEX in                           Yes             Yes
                                                               memory) For any measurement using the
                                                               memory contents for the analog front-end
                                                               and sensor setup, the respective setup is
                                                               loaded from the SM_config2 register, status
                                                               bit[1]==1
  BFHEX                   —                                    STOP_CYC This command causes a power-                          Yes             Yes
                                                               down halting the update / cyclic measure-
                                                               ment operation and causing a transition to
                                                               Normal-Sleep operation.
  FXHEX                   Status followed by last              NOP Only valid for SPI (see sections 3.5.1                     Yes             Yes
                          24-bit data                          and 3.5.2).
Table 3.2      Get_Raw Commands
         Command                                 Measurement                                          AFE Configuration Register
 A0HEX followed by 0000HEX             SM – Sensor Measurement                       SM_config1 register or SM_config2 register.
 A1HEX followed by ssssHEX             SM – Sensor Measurement                       ssss is the user’s configuration setting for the measure-
                                                                                     ment provided via the interface. The format and pur-
                                                                                     pose of configuration bits must be according to the
                                                                                     definitions for SM_config (see Table 3.5).
 A2HEX followed by 0000HEX             SM-AZSM – Auto-Zero Corrected                 SM_config
                                                                 1)
                                       Sensor Measurement
 A3HEX followed by ssssHEX             SM-AZSM – Auto-Zero Corrected                 ssss is the user’s configuration setting for the measure-
                                                                 2)
                                       Sensor Measurement                            ment provided via the interface. The format and pur-
                                                                                     pose of configuration bits must be according to the
                                                                                     definitions for SM_config.
 A4HEX followed by 0000HEX             TM – Temperature Measurement                  IDT-defined register
 A5HEX followed by ssssHEX             TM – Temperature Measurement                  ssss is the user’s configuration setting for the measure-
                                                                                     ment provided via the interface. The format and pur-
                                                                                     pose of configuration bits must be according to the
                                                                                     definitions for SM_config and valid for temperature
                                                                                     measurement in this case (bits [15:12] will be ignored).
 A6HEX followed by 0000HEX             TM-AZTM – Auto-Zero Corrected                 IDT-defined register
                                                                        1)
                                       Temperature Measurement
 A7HEX followed by ssssHEX             TM-AZTM – Auto-Zero Corrected                 ssss is the user’s configuration setting for the measure-
                                                                        2)
                                       Temperature Measurement                       ment provided via the interface. The format and pur-
                                                                                     pose of these configuration bits must be according to
                                                                                     the definitions for SM_config and valid for temperature
                                                                                     measurement in this case (bits [15:12] will be ignored).
     1)   Recommended for raw data collection during calibration coefficient determination using the measurement setups pre-programmed in MTP.
     2)   Recommended for raw data collection during calibration coefficient determination using un-programmed (not in MTP), external measurement
          setups; e.g., for evaluation purposes.
 © 2016 Integrated Device Technology, Inc.                                   26                                                          April 20, 2016


                                                                                                       ZSSC3218 Datasheet
3.5.     Communication Interface
3.5.1.       Common Functionality
Commands are handled by the command interpreter in the LV section. Commands that need additional data are
not treated differently than other commands because the HV interface is able to buffer the command and all the
data that belongs to the command and the command interpreter is activated as soon as a command byte is
received.
Every response starts with a status byte followed by the data word. The data word depends on the previous
                                                                                                         2
command. It is possible to read the same data more than once if the read request is repeated (I C™) or a NOP
command is sent (SPI). If the next command is not a read request (I²C™) or a NOP (SPI), it invalidates any
previous data.
The ZSSC3218 supports the parallel setup of two amplifier-ADC-configurations using SM_config1 and
SM_config2. Switching between the two setups can be done with the commands B0HEX and B1HEX. Note that the
respective activation command must always be sent prior to the measurement request.
The status byte contains the following bits in the sequence shown in Table 3.3:
    •  Power indication (bit 6): 1 if the device is powered (VDDB on); 0 if not powered. This is needed for the SPI
       Mode where the master reads all zeroes if the device is not powered or in power-on reset (POR).
    •  Busy indication (bit 5): 1 if the device is busy, which indicates that the data for the last command is not
       available yet. No new commands are processed if the device is busy.
       Note: The device is always busy if cyclic measurement operation has been set up and started.
    •  Currently active ZSSC3218 mode (bits [4:3]): 00 = Normal Mode; 01 = Command Mode; 1X = IDT
       reserved.
    •  Memory integrity/error flag (bit 2): 0 if integrity test passed; 1 if test failed. This bit indicates whether the
       checksum-based integrity check passed or failed. The memory error status bit is calculated only during the
       power-up sequence, so a newly written CRC will only be used for memory verification and status update
       after a subsequent ZSSC3218 power-on reset (POR) or reset by means of the RES pin.
    •  Config Setup (bit 1): This bit indicates which SM_config register is being used for the active configuration:
       SM_config1 (12HEX) or SM_config2 (16HEX). The two alternate configuration setups allow for two different
       configurations of the external sensor channel in order to support up to two application scenarios with the
       use of only one sensor-ZSSC3218 pair. This bit is 0 if SM_config1 was selected (default). This bit is 1 if
       SM_config2 was selected.
    •  ALU saturation (bit 0): If the last command was a measurement request, this bit is 0 if any intermediate
       value and the final SSC result are in a valid range and no SSC-calculation internal saturation occurred in
       the arithmetic logic unit (ALU). If the last command was a measurement request, this bit is 1 if an SSC-
       calculation internal saturation occurred. This bit is also 0 for any non-measurement command.
Table 3.3     General Status Byte
  Bit            7          6              5       4     3           2                    1                    0
  Meaning        0      Powered?        Busy?       Mode      Memory error?          Config Setup        ALU Saturation
  © 2016 Integrated Device Technology, Inc.                  27                                             April 20, 2016


                                                                                                ZSSC3218 Datasheet
Table 3.4     Mode Status
   Status[4:3]                          Mode
       00            Normal Mode (sleep and cyclic operations)
       01                         Command Mode
       10                           IDT reserved
       11                           IDT reserved
Further status information can be provided by the EOC pin. The EOC pin is set high when a measurement and
calculation have been completed (if no interrupt threshold is used, i.e. INT_setup==00BIN; see section 3.3).
3.5.2.      SPI
The SPI Mode is available if the very first interface activity after ZSSC3218 power-up is an active signal at the
SS pin. The polarity and phase of the SPI clock are programmable via the CKP_CKE setting in bits [11:10] in
address 02HEX as described in Table 3.5. CKP_CKE is two bits: CPHA (bit 10), which selects which edge of
SCLK latches data, and CPOL (bit 11), which indicates whether SCLK is high or low when it is idle. The polarity
of the SS signal and pin are programmable via the SS_polarity setting (bit 9). The different combinations of
polarity and phase are illustrated in the figures below.
Figure 3.4 SPI Configuration CPHA=0
         CPHA=0
          SCLK (CPOL=0)
          SCLK (CPOL=1)
          MOSI                    MSB       Bit6    Bit5    Bit4     Bit3    Bit2   Bit1     LSB
          MISO                    MSB       Bit6    Bit5    Bit4     Bit3    Bit2   Bit1     LSB
          /SS
          SAMPLE
 © 2016 Integrated Device Technology, Inc.                 28                                         April 20, 2016


                                                                                                                   ZSSC3218 Datasheet
Figure 3.5 SPI Configuration CPHA=1
         CPHA=1
           SCLK (CPOL=0)
           SCLK (CPOL=1)
           MOSI                     MSB        Bit6      Bit5         Bit4    Bit3        Bit2       Bit1      LSB
           MISO                     MSB        Bit6      Bit5         Bit4    Bit3        Bit2       Bit1      LSB
           /SS
           SAMPLE
In SPI mode, each command except NOP is started as shown in Figure 3.6. After the execution of a command
(busy = 0), the expected data can be read as illustrated in Figure 3.7 or if no data are returned by the command,
the next command can be sent. The status can be read at any time with the NOP command (see Figure 3.8).
Figure 3.6 SPI Command Request
       Command Request
                     Command
                                CmdDat      CmdDat
          MOSI       other than
                        NOP      <15:8>      <7:0>
          MISO        Status      Data        Data
           Note: A command request always consists of 3 bytes. If the command is shorter, then it must be completed with 0s.
                 The data on MISO depend on the preceding command.
  © 2016 Integrated Device Technology, Inc.                         29                                                    April 20, 2016


                                                                                                ZSSC3218 Datasheet
Figure 3.7 SPI Read Status
                                          Read Status
                                                   Command
                                            MOSI
                                                    = NOP
                                            MISO    Status
Figure 3.8 SPI Read Data
            2
3.5.3.     I C™
 2                                                                                             2
I C™ Mode will be selected if the very first interface activity after ZSSC3218 power-up is an I C™ command. In
 2
I C™ Mode, each command is started as shown in Figure 3.8. Only the number of bytes that are needed for the
command must be sent. An exception is the HS-mode where 3 bytes must always be sent as in SPI Mode. After
the execution of a command (busy = 0), the expected data can be read as illustrated in Figure 3.11 or if no data
are returned by the command, the next command can be sent. The status can be read at any time as described
in Figure 3.10.
  © 2016 Integrated Device Technology, Inc.                30                                       April 20, 2016


                                                                                                             ZSSC3218 Datasheet
Figure 3.9 I2C™ Command Request
    Command Request (I2C™ Write)
                                                                          from master to slave           S   START condition
       S SlaveAddr     0 A Command     A P
                                                                          from slave to master           P   STOP condition
                     write
                                                                                                         A   acknowledge
                                           CmdDat         CmdDat
       S SlaveAddr     0 A Command     A             A               A P
                                            <15:8>         <7:0>
                                                                                                         N   not acknowledge
                     write
              2
Figure 3.10 I C™ Read Status
                                          Read Status (I2C™ Read)
                                             S SlaveAddr   1 A     Status     N P
                                                         read
              2
Figure 3.11 I C™ Read Data
      Read Data (I2C™ Read)
       (a) Example: after the completion of a Memory Read command
                                        MemDat       MemDat
         S SlaveAddr   1 A  Status  A             A            N P
                                         <15:8>       <7:0>
                     read
       (b) Example: after the completion of a Full Measurement command (AAHEX)
                                       SensorDat    SensorDat    SensorDat      TempDat        TempDat     TempDat
         S SlaveAddr   1 A  Status  A             A            A             A             A           A             N P
                                        <23:16>      <15:8>        <7:0>         <23:16>        <15:8>      <7:0>
                     read
 © 2016 Integrated Device Technology, Inc.                     31                                                   April 20, 2016


                                                                                                   ZSSC3218 Datasheet
All mandatory I²C™-bus protocol features are implemented. Optional features such as clock stretching, 10-bit
slave address, etc., are not supported by the ZSSC3218’s interface.
In I²C-High-Speed Mode, a command consists of a fixed length of three bytes.
3.6.      Multiple Time Programmable (MTP) Memory
In the ZSSC3218, the memory is organized in 16-bit wide registers and can be programmed multiple times
(ca. 1000). There are 57 x 16-bit registers available for customer use. Each register can be re-programmed.
Basically, there are two MTP content sectors:
   •   Customer Use:      accessible by means of regular write operations: 40HEX to 79HEX. It contains the customer
                          ID, interface setup data, measurement setup information, calibration coefficients, etc.
   •   IDT Use:           only accessible for write operations by IDT. The IDT sector contains specific trim
                          information and is programmed during manufacturing test by IDT.
3.6.1.      Programming Memory
Programming memory is possible with any specified supply voltage level at VDD. The MTP programming voltage
itself is generated by means of an integrated charge pump, generating an internal memory programming voltage;
no additional, external voltage, other than VDD (as specified) is needed. A single 16-bit register write will be
completed within 16ms after the respective programming command has been sent. After the memory is
programmed, it must be read again to verify the validity of the memory contents.
  © 2016 Integrated Device Technology, Inc.                 32                                           April 20, 2016


                                                                                                   ZSSC3218 Datasheet
3.6.2.       Memory Contents
Table 3.5     MTP Memory Content Assignments
      MTP          Word / Bit      Default
                                                  Description                  Notes / Explanations
    Address          Range         Setting
                                                              Customer ID byte 0 (combines with memory word
 00HEX            15:0           0000HEX      Cust_ID0
                                                              01HEX to form customer ID).
                                                              Customer ID byte 1 (combines with memory word
 01HEX            15:0           0000HEX      Cust_ID1
                                                              00HEX to form customer ID).
 Interface Configuration
                                                              I²C™ slave address; valid range: 00HEX to 7FHEX
                                                              (default: 00HEX). Note: address codes 04HEX to 07HEX
                  6:0            000 0000BIN  Slave_Addr                                       2
                                                              are reserved for entering the I C™ High Speed
                                                              Mode.
                                                              Interrupt configuration, EOC pin functionality:
                                                                 00    End-of-conversion signal
                                                                 01    0-1 transition if threshold1 (TRSH1) is
                                                                       exceeded and 1-0 transition if threshold1
                                                                       is underrun again
                                                                 10    0-1 transition if threshold1 is underrun and
                                                                       1-0 transition if threshold1 is exceeded
                                                                       again
                  8:7            00BIN       INT_setup           11    EOC is determined by threshold settings
 02HEX                                                                 (see section 3.3):
                                                                       If (TRSH1 > TRSH2) then EOC/INT (interrupt
                                                                       level) = 0 if (TRSH1 > MEAS ≥ TRSH2)
                                                                       where MEAS is the conditioned measure-
                                                                       ment result. Otherwise EOC/INT=1.
                                                                       If (TRSH1 ≤ TRSH2) then EOC = 1 if
                                                                       (TRSH1 ≤ MEAS < TRSH2). Otherwise
                                                                       EOC = 0.
                                                              Determines the polarity of the Slave Select pin (SS)
                                                              for SPI operation:
                  9              0BIN         SS_polarity        0  Slave Select is active low (SPI and
                                                                       ZSSC3218 are active if SS==0)
                                                                 1  Slave Select is active high (SPI and
                                                                       ZSSC3218 are active if SS==1)
  © 2016 Integrated Device Technology, Inc.                33                                            April 20, 2016


                                                                                            ZSSC3218 Datasheet
    MTP          Word / Bit      Default
                                             Description                  Notes / Explanations
  Address          Range         Setting
                                                         Clock polarity and clock-edge select—determines
                                                         polarity and phase of SPI interface clock with the
                                                         following modes:
                                                          00  SCLK is low in idle state, data latch with
                                                                  rising edge and data output with falling
                                                                  edge
                                                          01  SCLK is low in idle state, data latch with
                11:10          00BIN      CKP_CKE                 falling edge and data output with rising
                                                                  edge
                                                          10  SCLK is high in idle state, data latch with
                                                                  falling edge and data output with rising
                                                                  edge
                                                          11  SCLK is high in idle state, data latch with
                                                                  rising edge and data output with falling
                                                                  edge
                                                         Update period (ZSSC3218 sleep time, except
                                                         oscillator) in cyclic operation:
                                                          000  not assigned
                                                          001  125ms
                                                          010  250ms
                14:12          000BIN     CYC_period
                                                          011  500ms
                                                          100  1000ms
                                                          101  2000ms
                                                          110  4000ms
                                                          111  not assigned
                                                         Type/shape of second-order curve correction for the
                                                         sensor signal.
                15             0BIN       SOT_curve
                                                          0  parabolic curve
                                                          1  s-shaped curve
© 2016 Integrated Device Technology, Inc.             34                                          April 20, 2016


                                                                                                ZSSC3218 Datasheet
    MTP          Word / Bit      Default
                                               Description                    Notes / Explanations
  Address          Range         Setting
Signal Conditioning Parameters
                                                            Bits [15:0] of the 24-bit-wide sensor offset correction
                                                            coefficient Offset_S. (The MSBs of this coefficient
03HEX           15:0           0000HEX    Offset_S[15:0]
                                                            including sign are Offset_S[23:16], which is bits
                                                            [15:8] in 0DHEX.)
                                                            Bits [15:0] of the 24-bit-wide value of the sensor gain
                                                            coefficient Gain_S. (The MSBs of this coefficient
04HEX           15:0           0000HEX    Gain_S[15:0]
                                                            including sign are Gain_S[23:16], which is bits [7:0]
                                                            in 0DHEX.)
                                                            Bits [15:0] of the 24-bit-wide coefficient Tcg for the
                                                            temperature correction of the sensor gain. (The
05HEX           15:0           0000HEX    Tcg[15:0]
                                                            MSBs of this coefficient including sign are
                                                            Tcg[23:16], which is bits [15:8] in 0EHEX.)
                                                            Bits [15:0] of the 24-bit-wide coefficient Tco for
                                                            temperature correction of the sensor offset. (The
06HEX           15:0           0000HEX    Tco[15:0]
                                                            MSBs of this coefficient including sign are
                                                            Tco[23:16], which is bits [7:0] in 0EHEX.)
                                                                                             nd
                                                            Bits [15:0] of the 24-bit-wide 2 order term SOT_tco
07HEX           15:0           0000HEX    SOT_tco[15:0]     applied to Tco. (The MSBs of this term including sign
                                                            are SOT_tco[23:16], which is bits[15:8] in 0FHEX.)
                                                                                             nd
                                                            Bits [15:0] of the 24-bit-wide 2 order term SOT_tcg
08HEX           15:0           0000HEX    SOT_tcg[15:0]     applied to Tcg. (The MSBs of this term including sign
                                                            are SOT_tcg[23:16], which is bits[7:0] in 0FHEX.)
                                                                                             nd
                                                            Bits [15:0] of the 24-bit-wide 2 order term
                                                            SOT_sens applied to the sensor readout.
09HEX           15:0           0000HEX    SOT_sens[15:0]
                                                            (The MSBs of this term including sign are
                                                            SOT_sens[23:16], which is bits[15:8] in 10HEX.)
                                                            Bits [15:0] of the 24-bit-wide temperature offset
                                                            correction coefficient Offset_T. (The MSBs of this
0AHEX           15:0           0000HEX    Offset_T[15:0]
                                                            coefficient including sign are Offset_T[23:16], which
                                                            is bits[7:0] in 10HEX.)
                                                            Bits [15:0] of the 24-bit-wide absolute value of the
                                                            temperature gain coefficient Gain_T.
0BHEX           15:0           0000HEX    Gain_T[15:0]
                                                            (The MSBs of this coefficient including sign are
                                                            Gain_T[23:16], which is bits[15:8] in 11HEX.)
                                                                                             nd
                                                            Bits [15:0] of the 24-bit-wide 2 -order term SOT_T
                                                            applied to the temperature reading.
0CHEX           15:0           0000HEX    SOT_T[15:0]
                                                            (The MSBs of this coefficient including sign are
                                                            SOT_T[23:16], which is bit[7:0] in 11HEX.)
© 2016 Integrated Device Technology, Inc.                35                                            April 20, 2016


                                                                                                ZSSC3218 Datasheet
    MTP          Word / Bit      Default
                                               Description                   Notes / Explanations
  Address           Range        Setting
                                                            Bits [23:16] including sign for the 24-bit-wide sensor
                7:0            00HEX      Gain_S[23:16]     gain correction coefficient Gain_S. (The LSBs of this
                                                            coefficient are Gain_S[15:0] in register 04HEX.)
0DHEX
                                                            Bits [23:16] including sign for the 24-bit-wide sensor
                15:8           00HEX      Offset_S[23:16]   offset correction coefficient Offset_S. (The LSBs are
                                                            Offset_S[15:0] in register 03HEX.)
                                                            Bits [23:16] including sign for the 24-bit-wide
                                                            coefficient Tco for temperature correction for the
                7:0            00HEX      Tco[23:16]
                                                            sensor offset. (The LSBs are Tco[15:0] in register
                                                            06HEX.)
0EHEX
                                                            Bits [23:16] including sign for the 24-bit-wide
                                                            coefficient Tcg for the temperature correction of the
                15:8           00HEX      Tcg[23:16]
                                                            sensor gain. (The LSBs are Tcg[15:0] in register
                                                            05HEX.)
                                                                                                              nd
                                                            Bits [23:16] including sign for the 24-bit-wide 2
                7:0            00HEX      SOT_tcg[23:16]    order term SOT_tcg applied to Tcg. (The LSBs are
                                                            SOT_tcg[15:0] in register 08HEX.)
0FHEX                                                                                                         nd
                                                            Bits [23:16] including sign for the 24-bit-wide 2
                15:8           00HEX      SOT_tco[23:16]    order term SOT_tco applied to Tco. (The LSBs are
                                                            SOT_tco[15:0] in register 07HEX.)
                                                            Bits [23:16] including sign for the 24-bit-wide
                7:0            00HEX      Offset_T[23:16]   temperature offset correction coefficient Offset_T.
                                                            (The LSBs are Offset_T[15:0] in register 0AHEX.)
10HEX                                                                                                         nd
                                                            Bits [23:16] including sign for the 24-bit-wide 2
                15:8           00HEX      SOT_sens[23:16]   order term SOT_sens applied to the sensor readout.
                                                            (The LSBs are SOT_sens[15:0] in register 09HEX.)
                                                            Bits [23:16] including sign for the 24-bit-wide
                                                              nd
                                                            2 -order term SOT_T applied to the temperature
                7:0            00HEX      SOT_T[23:16]
                                                            reading. (The LSBs are SOT_T[15:0] in register
                                                            0CHEX.)
11HEX
                                                            Bits [23:16] including sign for the 24-bit-wide
                                                            absolute value of the temperature gain coefficient
                15:8           00HEX      Gain_T[23:16]
                                                            Gain_T. (The LSBs are Gain_T[15:0] in register
                                                            0BHEX.)
© 2016 Integrated Device Technology, Inc.                36                                            April 20, 2016


                                                                                              ZSSC3218 Datasheet
    MTP          Word / Bit      Default
                                              Description                   Notes / Explanations
  Address          Range         Setting
Measurement Configuration Register 1 (SM_config1)
                                                                                  st
                                                           Gain setting for the 1 PREAMP stage with
                                                           Gain_stage1  Gainamp1:
                                                              000  6
                                                              001  12
                                                              010  20
                2:0            000BIN     Gain_stage1         011  30
                                                              100  40
                                                              101  60
                                                              110  80
                                                              111  120 (Might affect noise and accuracy
                                                                      specifications depending on sensor setup)
                                                                                  nd
                                                           Gain setting for the 2 PREAMP stage with
                                                           Gain_stage2  Gainamp2:
                                                              000  1.1
                                                              001  1.2
                                                              010  1.3
                5:3            000BIN     Gain_stage2
                                                              011  1.4
                                                              100  1.5
                                                              101  1.6
                                                              110  1.7
12HEX                                                         111  1.8
                                                           Set up the polarity of the sensor bridge’s gain
                                                           (inverting of the chopper) with
                6              0BIN       Gain_polarity
                                                              0  positive (no polarity change)
                                                              1  negative (180° polarity change)
                                                           Absolute number of bits for the ADC conversion
                                                           ADC_bits:
                                                              0000  12-bit
                                                              0001  13-bit
                                                              0010  14-bit
                10:7           0000BIN    Adc_bits
                                                              0011  15-bit
                                                              0100  16-bit
                                                              0101  17-bit
                                                              0110  18-bit
                                                              0111 to 1111  not assigned
                                                           Enable bit for thermopile input selection (INN
                                                           connected to AGND, INP connected to absolute
                                                           voltage source) with AbsV_enable:
                11             0BIN       AbsV_enable
                                                              0  absolute voltage input disabled (default)
                                                              1  absolute voltage input enabled (e.g. for a
                                                                    thermopile)
© 2016 Integrated Device Technology, Inc.               37                                          April 20, 2016


                                                                                                   ZSSC3218 Datasheet
    MTP           Word / Bit     Default
                                                Description                  Notes / Explanations
  Address           Range        Setting
                                                            Differential signal’s offset shift in the ADC;
                                                            compensation of signal offset by x% of input signal:
                                                               000  no offset compensation
                                                               001  6.75% offset
                                                               010  12.5% offset
                                                               011  19.25% offset
                 14:12         000BIN      Offset
                                                               100  25% offset
                                                               101  31.75% offset
                                                               110  38.5% offset
                                                               111  43.25% offset
                                                            Note: Bit 15 below must be set to 1 to enable the
                                                            offset shift.
                                                            Offset shift method switch:
                 15            0BIN        Shift_method         0  No offset shift. Offset (bits [14:12] in 12HEX)
                                                                     must be set to 000BIN; GainADC = 1
                                                                1 Offset shift ADC; GainADC = 2
                                                            Bits [15:0] of the 24-bit-wide interrupt threshold1,
13HEX           15:0           0000HEX    TRSH1[15:0]       TRSH1. (The MSB bits for this threshold are
                                                            TRSH1[23:16], which is bits [7:0] of register 15HEX.)
                                                            Bits [15:0] of the 24-bit-wide interrupt threshold2,
14HEX           15:0           0000HEX    TRSH2[15:0]       TRSH2. (The MSB bits for this threshold are
                                                            TRSH2[23:16], which is bits[15:8] of register 15HEX.)
                                                            Bits [23:16] of the 24-bit-wide interrupt threshold1,
                7:0            00HEX      TRSH1[23:16]      TRSH1. (The LSB bits for this threshold are
                                                            TRSH1[15:0], which is bits[15:0] of register 13HEX.)
15HEX
                                                            Bits [23:16] of the 24-bit-wide interrupt threshold2,
                15:8           00HEX      TRSH2[23:16]      TRSH2. (The LSB bits for this threshold are
                                                            TRSH2[15:0], which is bits[15:0] of register 14HEX.)
Measurement Configuration Register 2 (SM_config2)
                                                                                   st
                                                            Gain setting for the 1 PREAMP stage with
                                                            Gain_stage1  Gainamp1:
                                                               000  6
                                                               001  12
                                                               010  20
16HEX            2:0           000BIN      Gain_stage1         011  30
                                                               100  40
                                                               101  60
                                                               110  80
                                                               111  120 (Might affect noise and accuracy
                                                                     specifications depending on sensor setup)
© 2016 Integrated Device Technology, Inc.                38                                             April 20, 2016


                                                                                                  ZSSC3218 Datasheet
    MTP          Word / Bit      Default
                                              Description                   Notes / Explanations
  Address          Range         Setting
                                                                                  nd
                                                           Gain setting for the 2 PREAMP stage with
                                                           Gain_stage2  Gainamp2:
                                                              000  1.1
                                                              001  1.2
                                                              010  1.3
                5:3            000BIN     Gain_stage2
                                                              011  1.4
                                                              100  1.5
                                                              101  1.6
                                                              110  1.7
                                                              111  1.8
                                                           Set up the polarity of the sensor bridge’s gain
                                                           (inverting of the chopper) with
                6              0BIN       Gain_polarity
                                                              0  positive (no polarity change)
                                                              1  negative (180° polarity change)
                                                           Absolute number of bits for the ADC conversion
                                                           ADC_bits:
                                                              0000  12-bit
                                                              0001  13-bit
                                                              0010  14-bit
                10:7           0000BIN    Adc_bits
                                                              0011  15-bit
                                                              0100  16-bit
                                                              0101  17-bit
                                                              0110  18-bit
                                                              0111 to 1111  not assigned
                                                           Enable bit for thermopile input selection (INN
                                                           connected to AGND, INP connected to absolute
                                                           voltage source) with AbsV_enable:
                11             0BIN       AbsV_enable
                                                              0  absolute voltage input disabled (default)
                                                              1  absolute voltage input enabled (e.g. for a
                                                                    thermopile)
                                                           Differential signal’s offset shift in the ADC;
                                                           compensation of signal offset by x% of input signal:
                                                              000  no offset compensation
                                                              001  6.75% offset
                                                              010  12.5% offset
                                                              011  19.25% offset
                14:12          000BIN     Offset
                                                              100  25% offset
                                                              101  31.75% offset
                                                              110  38.5% offset
                                                              111  43.25% offset
                                                           Note: Bit 15 below must be set to 1 to enable the
                                                           offset shift.
© 2016 Integrated Device Technology, Inc.               39                                             April 20, 2016


                                                                                                             ZSSC3218 Datasheet
      MTP           Word / Bit     Default
                                                    Description                          Notes / Explanations
     Address          Range        Setting
                                                                        Offset shift method switch:
                   15            0BIN          Shift_method                0  No offset shift. Offset (bits[14:12] in 16HEX)
                                                                                 must be set to 000BIN; GainADC = 1
                                                                           1  Offset Shift ADC, GainADC = 2
  Post-Calibration Offset Correction Coefficients
                                                                        Bits [15:0] of the post-calibration sensor offset shift
  17HEX            15:0          0000HEX      SENS_Shift[15:0]          coefficient SENS_Shift. (The MSB bits of
                                                                        SENS_Shift are bits [7:0] of register 19HEX.)
                                                                        Bits [15:0] of the post-calibration temperature offset
  18HEX            15:0          0000HEX      T_Shift[15:0]             shift coefficient T_Shift. (The MSB bits of T_Shift are
                                                                        bits [15:8] of register 19HEX.)
                                                                        Bits [23:16] of the post-calibration sensor offset shift
                   7:0           00HEX        SENS_Shift[23:16]         coefficient SENS_Shift. (The LSB bits of SENS_Shift
                                                                        are in register 17HEX.)
  19HEX
                                                                        Bits [23:16] of the post-calibration temperature offset
                   15:8          00HEX        T_Shift[23:16]            shift coefficient T_Shift. (The LSB bits of T_Shift are
                                                                        in register 18HEX.)
  Free Memory – Arbitrary Use
                                                                        Not assigned (e.g., can be used for Cust_IDx
  20HEX            15:0          0000HEX
                                                                        customer identification number)
                                                                        Not assigned (e.g., can be used for Cust_IDx
  21HEX            15:0          0000HEX
                                                                        customer identification number)
                                                                        Not assigned (e.g., can be used for Cust_IDx
  …
                                                                        customer identification number)
                                                                        Not assigned (e.g., can be used for Cust_IDx
  37HEX            15:0          0000HEX
                                                                        customer identification number)
                                                                        Not assigned (e.g., can be used for Cust_IDx
  38HEX            15:0          0000HEX
                                                                        customer identification number)
                                                                        Generated (checksum) for the entire memory
                                                                        through a linear feedback shift register (LFSR); sig-
  39HEX            15:0          -             Checksum
                                                                        nature is checked on power-up to ensure memory
                                                                        content integrity
The memory integrity checksum (referred to as CRC) is generated through a linear feedback shift register with
the following polynomial:
                  16    15   2
         g(x) = x + x + x + 1               with the initialization value: FFFFHEX.
If the CRC is valid, then the “Memory Error” status bit is set to 0.
  © 2016 Integrated Device Technology, Inc.                   40                                                  April 20, 2016


                                                                                                  ZSSC3218 Datasheet
3.7.     Calibration Sequence
Calibration essentially involves collecting raw signal and temperature data from the sensor-ZSSC3218 system for
different known sensor-element values (i.e., for a resistive bridge or an absolute voltage source) and tempera-
tures. This raw data can then be processed by the calibration master (assumed to be the user’s computer), and
the calculated calibration coefficients can then be written to on-chip memory.
Here is a brief overview of the three main steps involved in calibrating the ZSSC3218.
      1. Assigning a unique identification to the ZSSC3218. This identification is written to shadow RAM and
         programmed in MTP memory. This unique identification can be stored in the two 16-bit registers
         dedicated to the customer ID. It can be used as an index into a database stored on the calibration PC.
         This database will contain all the raw values of the connected sensor-element readings and temperature
         readings for that part, as well as the known sensor-element measurand conditions and temperature to
         which the sensor-element was exposed.
      2. Data collection. Data collection involves getting uncorrected (raw) data from the external sensor at
         different known measurand values and temperatures. Then this data is stored on the calibration master
         using the unique identification of the device as the index to the database.
      3. Coefficient calculation and storage in MTP memory. After enough data points have been collected to
         calculate all the desired coefficients, the coefficients can be calculated by the calibration master. Then
         the coefficients can be programmed to the MTP memory.
Result. The sensor signal and the characteristic temperature effect on output will be linearized according to the
setup-dependent maximum output range.
It is essential to perform the calibration with a fixed programming setup during the data collection phase. In order
to prevent any accidental misprocessing, it is further recommended to keep the MTP memory setup stable during
the entire calibration process as well as in the subsequent operation. A ZSSC3218 calibration only fits the setup
used during its calibration. Changes of functional parameters after a successful calibration can decrease the
precision and accuracy performance of the ZSSC3218 as well as of the entire application.
The ZSSC3218 supports operation with different sensor setups by means of the SM_config1 and SM_config2
registers. However, only one calibration coefficient set is supported. Therefore, either an alternative ZSSC3218-
external signal calibration using the alternate SM_config settings must be performed to ensure that the pro-
grammed SSC coefficients are valid for both setups, or a full reprogramming of the SSC coefficients must be
performed each time the sensor setup is changed. The selection of the external sensor setup (i.e., the AFE
configuration) can be done with the interface commands B0HEX and B1HEX.
3.7.1.     Calibration Step 1 – Assigning Unique Identification
Assign a unique identification number to the ZSSC3218 by using the memory write command (40HEX + data and
41HEX + data; see Table 3.1 and Table 3.5) to write the identification number to Cust_ID0 at memory address
00HEX and Cust_ID1 at address 01HEX as described in section 3.6.1. These two 16-bit registers allow for more
than 4 billion unique devices.
  © 2016 Integrated Device Technology, Inc.                 41                                          April 20, 2016


                                                                                                     ZSSC3218 Datasheet
3.7.2.     Calibration Step 2 – Data Collection
The number of unique points (measurand and/or temperature) at which calibration must be performed generally
depends on the requirements of the application and the behavior of the sensor in use. The minimum number of
points required is equal to the number of correction coefficients to be corrected with a minimum of three different
temperatures at three different sensor values. For a full calibration resulting in values for all 7 possible (external)
sensor coefficients and 3 possible temperature coefficients, a minimum of 7 pairs of sensor with temperature
measurements must be collected.
Within this minimum field of 3 measurand measurements x 3 temperature measurements, data must be collected
for the specific value pairs (at known conditions) and then processed to calculate the coefficients. In order to
obtain the potentially best and most robust coefficients, it is recommended that measurement pairs (temperature
vs. measurand) be collected at the outer corners of the intended operation range or at least at points that are
located far from each other. It is also essential to provide highly precise reference values as nominal, expected
values. The measurement precision of the external calibration-measurement equipment should be ten times
more accurate than the expected ZSSC3218 output accuracy after calibration in order to avoid accuracy losses
caused by the nominal reference values (e.g., measurand signal and temperature deviations).
Note: The coefficients SENS_shift and T_shift must not be determined during this calibration step. These coeffi-
cients can be pre-determined as zero until after initial calibration.
Note: An appropriate selection of measurement pairs can significantly improve the overall system performance.
The determination of the measurand-related coefficients will use all of the measurement pairs. For the
temperature-related correction coefficients, 3 (at three different temperatures) of the measurement pairs will be
used.
Note: There is an inherent redundancy in the 7 sensor-related and 3 temperature-related coefficients. Since the
temperature is a necessary output (which also needs correction), the temperature-related information is
mathematically separated, which supports faster and more efficient DSP calculations during the normal usage of
the sensor-ZSSC3218 system. The recommended approach for data collection is to make use of the raw-
measurement commands described in Table 3.2.
     For external sensor values, either of the following commands can be used depending on the user’s require-
     ments:
         •   A2HEX + 0000HEX     single sensor measurement for which the configuration register will be loaded from
                                 the SM_Config1 register (12HEX in MTP); preprogramming the measurement setup
                                 in the MTP is required.
         •   A3HEX + ssssHEX     single sensor measurement for which the SM_config configuration register (Gain,
                                 ADC, Offset, etc.) will be loaded as the user’s configuration ssssHEX, which must
                                 be provided externally via the interface as the data part of this command.
     For temperature values, either of the following commands can be used depending on the user’s require-
     ments:
         •   A6HEX + 0000HEX     single temperature measurement for which the configuration register will be loaded
                                 from an internal temperature configuration register (preprogrammed by IDT in the
                                 MTP); preprogramming of the respective configuration is done by IDT prior to
                                 ZSSC3218 delivery. This is the recommended approach for temperature data
                                 collection.
  © 2016 Integrated Device Technology, Inc.                  42                                           April 20, 2016


                                                                                                       ZSSC3218 Datasheet
          •  A7HEX + ssssHEX     single temperature measurement for which the configuration register (Gain, ADC,
                                 Offset, etc.) will be loaded as the user’s configuration ssssHEX, which must be
                                 provided externally via the interface as the data part of this command. The format
                                 and purpose of these configuration bits must be according to the definitions for
                                 SM_config and valid for temperature measurement in this case (bits [15:12] will be
                                 ignored).
3.7.3.      Calibration Step 3a) – Coefficient Calculations
The math to perform the coefficient calculation is complicated and will not be discussed in detail. There is a brief
overview in the next section. IDT provides software (DLLs) to perform the coefficient calculation (external to the
sensor-ZSSC3218 system) based on auto-zero corrected values. After the coefficients are calculated, the final
step is to write them to the MTP memory of the ZSSC3218.
3.7.4.      Calibration Step 3b) – Post-Calibration Offset Correction
There are two special SSC coefficients, SENS_shift and T_shift. Normally, these coefficients must be predeter-
mined as zero during the initial sensor calibration. The primary purpose of these two coefficients is to cancel
additional offset shifts that could occur during or after final sensor assembly; e.g. if a respective sensor is finally
placed and soldered on an application board.
If the final sensor assembly induced any kind of offset (on either the temperature or external sensor signal), the
respective influence can be directly compensated by means of the SENS_shift and T_shift coefficients without
the need to change the original SSC coefficient set. However, this post-calibration offset correction must be done
under known ambient conditions (i.e., sensor measurand and/or temperature).
3.7.5.      SSC Measurements
After the completion of the calibration procedure, linearized external sensor and temperature readings can be
obtained using the commands AAHEX to AFHEX as described in Table 3.1.
Typically, only one external sensor is used in a single analog configuration using the setup in the SM_config1
MTP register (12HEX). However, the ZSSC3218 can support a second analog configuration that is set up in the
SM_config2 MTP register (16HEX). This might be useful in cases where only one sensor-ZSSC3218 pair must
support the measurand ranges for two different external sensors that have different precisions, required
amplification, and sensor offset.
If a respective switching between setups is to be performed, the SSC coefficients for the alternate external
sensor must be handled with one of the following methods:
    •   The programmed SSC coefficients are not used for the alternate external sensor. The ZSSC3218 performs
        only a factor-one transfer, i.e. no effective digital SSC correction – only a transfer of the auto-zero
        corrected raw ADC readings to the ZSSC3218 output without any scaling, etc.
    •   The coefficients are re-programmed each time the analog setup is changed.
SM_config1 is selected as the analog setup register by default, so no specific activation is needed if only
SM_config1 is used. If SM_config2 will also be used, the activation command B1HEX must be sent once prior to
the measurement request. To switch to using SM_config1, the activation command B0HEX must be sent prior to
use. This respective activation must be refreshed after any power-on-reset or RES pin reset.
  © 2016 Integrated Device Technology, Inc.                    43                                           April 20, 2016


                                                                                                  ZSSC3218 Datasheet
3.8.     The Calibration Math
3.8.1.       Bridge Signal Compensation
The saturation check in the ZSSC3218 detects saturation effects of the internal calculation steps, allowing the
final correction output to be determined despite the saturation. It is possible to get potentially useful signal
conditioning results that have had an intermediate saturation during the calculations. These cases are detectable
by observing the status bit[0] for each measurement result. Details about the saturation limits and the valid
ranges for values are provided in the following equations.
The calibration math description assumes a calculation with integer numbers. The description is numerically
correct concerning values, dynamic range, and resolution.
SOT_curve selects whether second-order equations compensate for sensor nonlinearity with a parabolic or
S-shaped curve. The parabolic compensation is recommended for most sensor types.
For the following equations, the terms are as follows:
                                                               2
     S               =   Corrected sensor reading output via I C™ or SPI; range [0HEX to FFFFFFHEX]
     S_Raw           =   Raw sensor reading from ADC after AZ correction; range [-0x7FFFF, 0x7FFFF]
     Gain_S          =   Sensor gain term; range [-0x7FFFF, 0x7FFFF]
     Offset_S        =   Sensor offset term; range [-0x7FFFF, 0x7FFFF]
     Tcg             =   Temperature coefficient gain term; range [-0x7FFFF, 0x7FFFF]
     Tco             =   Temperature coefficient offset term; range [-0x7FFFF, 0x7FFFF]
     T_Raw           =   Raw temperature reading after AZ correction; range [-0x7FFFF, 0x7FFFF]
     SOT_tcg         =   Second-order term for Tcg non-linearity; range [-0x7FFFF, 0x7FFFF]
     SOT_tco         =   Second-order term for Tco non-linearity; range [-0x7FFFF, 0x7FFFF]
     SOT_sens        =   Second-order term for sensor non-linearity; range [-0x7FFFF, 0x7FFFF]
     SENS_shift      =   post-calibration, post-assembly sensor offset shift; range [-0x7FFFF, 0x7FFFF]
                    =   absolute value
     []ulll         =   bound/saturation number range from ll to ul, over/under-flow is reported as saturation in
                         the status byte
  © 2016 Integrated Device Technology, Inc.                44                                          April 20, 2016


                                                                                                        ZSSC3218 Datasheet
The correction formula for the differential signal reading is represented as a two-step process depending on the
SOT_curve setting.
Equations for the parabolic SOT_curve setting (SOT_curve = 0):
Simplified:
                 T _ Raw  4 ⋅ SOT _ tcg                             
    K1 = 2 23 +               ⋅                 ⋅ T _ Raw + 4 ⋅ Tcg 
                     2 23
                                    2  23
                                                                                                                   (1)
                                           T _ Raw  4 ⋅ SOT _ tco                         
    K 2 = 4 ⋅ Offset_ S + S _ Raw +                    ⋅              ⋅ T _ Raw + 4 ⋅ Tco 
                                               2 23
                                                             2 23
                                                                                                                   (2)
            4 ⋅ Gain _ S K 1
    Z SP =                   ⋅ 23 ⋅ K 2 + 2 23                     (delimited to positive number range)
                 2 23          2                                                                                    (3)
          Z BP  4 ⋅ SOT _ sens                
    S =        ⋅
            23 
                                  ⋅ Z SP + 223  + SENS _ shift    (delimited to positive number range)             (4)
          2            2 23
                                               
 © 2016 Integrated Device Technology, Inc.                                45                                April 20, 2016


                                                                                                                                                                                             ZSSC3218 Datasheet
Complete:
                                                                                                                                           2 25 −1
                                                                                                                                2 −1 
                                                                                                                                  25
                                                                                                                      2 25 −1 
              23  T _ Raw   SOT _ tcg                                                  
                                                                                              2 25 −1              
                                                                                                                                        
    K 1 = 2 +                           ⋅                            ⋅ T _ Raw                      + 4Tcg                                                                                         (5)
                            2               2                                           −2 25                  −2 25 
                                 23                      21
                                                                                                                                      
                                                                                                                             −2 25  25
                                                                                                                                           −2
                                                                                                                                                                                     2 25 −1
                                                                                                                                                                            2 −1 
                                                                                                                                                                              25
                                                                                                                                                                  2 25 −1 
                                                                                                                                                        2 25 −1 
                                                                                                                                                                                  
                                                                    T _ Raw   SOT _ tco                                                              
                                                                                                                                           −
                                                                                                                                                                          
                                                                                                                                        25
                                                                                                                                      2      1
                                                                                                                                                                               
    K 2 = 4 ⋅ Offset_ S +  S _ Raw +                                                  ⋅                      ⋅ T _ Raw                       + 4Tco                                                (6)
                                                                 2 23                   
                                                                                                        21
                                                                                                                                                                                
                                                                                                                                                       − 225  25 
                                                                                                     2
                                                                                                                                     −   25
                                                                 
                                                                                                                                        2
                                      
                                                                                                                                                                  −2       − 225  25
                                                                                                                                                                           
                                                                                                                                                                                   −2
                                                                                         225 −1
                                                                 2 −1                
                                                                     25
                                   K              
                                                     225 −1    
         =                                                                      23 
                   Gain _ S
    Z SP                         ⋅  231 ⋅ K 2                           +2                                                                                                                            (7)
                2 21             2               −225                             
                                                             −225                 0
                                                                                                                    2 24 −1
                        SOT _ sens                    2 25 −1            
                                                                               2 25 −1                           
                                                       
    B =  23                                                                            + SENS _ shift 
                Z SP
                     ⋅                     ⋅ Z BP                 + 2 23                                                                                                                             (8)
           2            2
                                  21
                                                        −225                −225                              
                                                                                                                0
Equations for the S-shaped SOT_curve setting (SOT_curve = 1):
Simplified:
                4 ⋅ Gain _ S K1
    Z SS =                        ⋅ 23 ⋅ K 2
                     2 23           2                                                                                                                                                                    (9)
            Z SS  4 ⋅ SOT _ sens                                       
    S =             ⋅                         ⋅ Z SS + 2 23  + 2 23 + SENS _ shift                                   (delimited to positive number range)
            2 23              2 23                                                                                                                                                                   (10)
Complete:
                                                                  2 25 −1
                Gain _ S         K              
                                                    2 25 −1  
    Z SS =                     ⋅  231 ⋅ K 2                                                                                                                                                        (11)
                                  2               −225
                         21
                2                                           −225
                                                                                                                                               2 24 −1
                                                                                   2 25 −1 
                                                                                                2 25 −1                                     
           Z               SOT _ sens                        2 −1                                                                       
                                                                  25
                                                                                            
    S =   23SS        ⋅                     ⋅ Z          25          + 2 23
                                                                                                        + 2 23 + SENS _ shift 
                           2
                                    21                SS
                                                             −2                    25                                                                                                              (12)
           2                                                                                                                              
           
                                                                                     −2       − 2 25                                       0
 © 2016 Integrated Device Technology, Inc.                                                                         46                                                                            April 20, 2016


                                                                                                                       ZSSC3218 Datasheet
3.8.2.      Temperature Signal Compensation
Temperature is measured internally. Temperature correction contains both linear gain and offset terms as well as
a second-order term to correct for any nonlinearities. For temperature, second-order compensation for
nonlinearity is always parabolic.
The correction formula is best represented as a two-step process as follows:
Simplified:
             4 ⋅ Gain _ T
     ZT =                    ⋅ (T _ Raw + 4 ⋅ Offset _ T ) + 2 23 (delimited to positive number range)
                  2 23                                                                                                           (13)
           Z T  4 ⋅ SOT _ T                      
    T =          ⋅               ⋅ Z T + 2 23  + T _ Shift                      (delimited to positive number range)
           2  2
              23         23
                                                                                                                                (14)
Complete:
                                                                                                2 25 −1
              Gain _ T                                                    2 −1             
                                                                             25
                                                                  2 25 −1 
     Z T =                ⋅ [T _  Raw     +   4Offset    _   T ]−2  25
                                                                           25   +    2  23
                                                                                                                                (15)
              2
                      21
                                                                            −2                0
                                                                                   2 24 −1
                                                        2 −1                   
                                                          25
              Z T   SOT _ T          
                                         2 25 −1       
          
    T = 23 ⋅   21 ⋅ Z T                       +2 
                                                    23
                                                                 + T _ Shift 
           2  2                                                                                                            (16)
                                      −2             − 2 25                  0
                                             25
Where
                                                                                                           2
    T                    =      Corrected temperature sensor reading output via I C™ or SPI; range [0HEX to FFFFFFHEX]
    Gain_T               =      Gain coefficient for temperature; range [-7FFFFFHEX to 7FFFFFHEX]
    T_Raw                =      Raw temperature reading after AZ correction; range [-7FFFFFHEX to 7FFFFFHEX]
    Offset_T             =      Offset coefficient for temperature; range [-7FFFFFHEX to 7FFFFFHEX]
    SOT_T                =      Second-order term for temperature source non-linearity; range [-7FFFFFHEX to 7FFFFFHEX]
    T_Shift              =      Shift for post-calibration/post-assembly offset compensation; range [-7FFFFFHEX to
                                7FFFFFHEX]
 © 2016 Integrated Device Technology, Inc.                                                     47                          April 20, 2016


                                                                                                ZSSC3218 Datasheet
3.8.3.    Measurement Output Data Format
The data format and bit assignment of the raw measurement and SSC-corrected outputs of the ZSSC3218 are
defined in the following tables. Any ADC measurement and SSC calculation output is formatted as a 24-bit wide
data word, regardless of the effective ADC resolution used. The values are either in two’s complement or sign-
absolute format.
Table 3.6    Measurement Results of ADC Raw Measurement Request (two’s complement)
       Bit                 23              22        21          20           …             1              0
    Meaning,                  0              -1       -2           -3                        -22            -23
                           -2              2        2            2            …            2              2
    Weighting
Table 3.7    Calibration Coefficients (Factors and Summands) in Memory (sign-magnitude)
       Bit                 23              22        21          20           …             1              0
    Meaning,           0=positive            1         0           -1                        -20            -21
                                           2         2           2            …            2              2
    weighting         1=negative
Table 3.8    Output Results from SSC-Correction Math or DSP—Sensor and Temperature
       Bit                 23              22        21          20           …             1              0
    Meaning,                 0               -1       -2           -3                        -22            -23
                           2               2        2            2            …            2              2
    weighting
Table 3.9    Interrupt Thresholds TRSH1 and TRSH2—Format as for SSC-Correction Math Output
       Bit                 23              22        21          20           …             1              0
    Meaning,                 0               -1       -2           -3                        -22            -23
                           2               2        2            2            …            2              2
    weighting
 © 2016 Integrated Device Technology, Inc.               48                                         April 20, 2016


                                                                                                    ZSSC3218 Datasheet
4 Package Information and Pad Assignments
The ZSSC3218 is available in die form or as engineering samples in the PQFN24 package. See Figure 4.1 for
additional die dimensions.
In Figure 4.1, the outer dimensions shown are (minimum) estimations for a die after sawing without remaining
scribe-line silicon around the core die. Therefore, the effective outer dimensions might differ slightly.
Figure 4.1 ZSSC3218 Pad Placement
                                                                                                   Seal Ring
                                                                                                   IC Core
          VDD                                                                                   ZMDI-test
          VSS                                                                                   ZMDI-test
     ZMDI-test                                                                                 SS
           RES
                                                                                               ZMDI-test
         VDDB                                                                                  INP
           INN                                                                                  VSSB
         EOC
                                                                                                MOSI/SDA
         MISO
     ZMDI-test                                                                                  SCLK/SCL
  © 2016 Integrated Device Technology, Inc.                49                                             April 20, 2016


                                                                                                        ZSSC3218 Datasheet
Table 4.1     Pad Assignments
      Name           Direction               Type                                     Description
       VDD               IN                 Supply         IC positive supply voltage for the IC.
       VSS               IN                 Supply         Ground reference voltage signal.
       RES               IN                 Digital        IC reset (low active, internal pull-up).
      VDDB              OUT                 Analog         Positive external bridge-sensor supply.
                                                           Negative sensor signal (or sensor-ground for absolute voltage-
        INN              IN                 Analog
                                                           sources sensors).
       EOC              OUT                 Digital        End of conversion or interrupt output.
       MISO             OUT                 Digital        Data output for SPI.
         SS              IN                 Digital        Slave select for SPI.
        INP              IN                 Analog         Positive sensor signal.
      VSSB              OUT                 Analog         Negative external bridge-sensor supply (sensor ground).
    MOSI/SDA           IN/Out               Digital        Data input for SPI; data in/out for I²C™.
    SCLK/SCL             IN                 Digital        Clock input for I²C™/SPI.
    ZMDI-test             -                    -           Do not connect to these pads.
Table 4.2     Die Connection and Bond Parameter
 Parameter                          TYP              MAX                           Description / Notes
 Au Bond, Pull-Force                 -                8g     Soft bonding recommended.
 Cu Bond, Pull-Force                    not specified        Strongly not recommended.
 Contact Push-Force to Pad       0.05g/µm          0.1g/µm   Applied force during wafer sort and/or bond-wire connection.
 Probing Overdrive                   -              55µm     Up to 4 touch downs at 85°C maximum; cantilever probe.
Generally, it is strongly recommended that bond and connection experiments be conducted in order to determine
a proper assembly setup (golden wire, time, power, bonding force, etc. by means of wire-pull test, ball-shear test,
and others) that does not lead to any IC and/or pad damages. Higher bond pull-forces maybe possible depending
directly on the bond tool and temperature.
  © 2016 Integrated Device Technology, Inc.                 50                                                April 20, 2016


                                                                    ZSSC3218 Datasheet
Figure 4.2 General PQFN24 Package Dimensions
Table 4.3    Physical Package Dimensions
   Parameter / Dimension                   Min (mm)        Max (mm)
                A                            0.80            0.90
               A1                            0.00            0.05
                b                            0.18            0.30
                e                                   0.5nom
               HD                            3.90            4.10
               HE                            3.90            4.10
                L                            0.35            0.45
 © 2016 Integrated Device Technology, Inc.            51                April 20, 2016


                                                                                                                      ZSSC3218 Datasheet
Table 4.4       Pin Assignments PQFN24
                                1)
  Pin No.               Name                  Direction                Type                            Description
     1                 ZMDI-test                   -                     -       Do not connect.
     2                    RES                     IN                   Digital   IC reset (low active, internal pull-up).
     3                   VDDB                   OUT                   Analog     Positive external bridge-sensor supply.
                                                                                 Negative sensor signal (or sensor ground for absolute
     4                     INN                    IN                  Analog
                                                                                 voltage-source sensors).
     5                    EOC                   OUT                    Digital   End of conversion or interrupt output.
     6                    MISO                  OUT                    Digital   Data output for SPI.
     7                 ZMDI-test                   -                     -       Do not connect.
     8                     n.c.                    -                     -       -
     9                     n.c.                    -                     -       -
    10                     n.c.                    -                     -       -
    11                     n.c.                    -                     -       -
    12                SCLK/SCL                    IN                   Digital   Clock input for I²C™/SPI.
    13                MOSI/SDA                 IN/Out                  Digital   Data input for SPI; data in/out for I²C™.
                                                                                 Negative external bridge-sensor supply (sensor
    14                   VSSB                   OUT                   Analog
                                                                                 ground).
    15                     INP                    IN                  Analog     Positive sensor signal.
    16                 ZMDI-test                   -                     -       Do not connect.
    17                      SS                    IN                   Digital   Slave select for SPI
    18                 ZMDI-test                   -                     -       Do not connect.
    19                 ZMDI-test                   -                     -       Do not connect.
    20                     n.c.                    -                     -       -
    21                     n.c.                    -                     -       -
    22                    VDD                     IN                  Supply     IC positive supply voltage for the ZSSC3218.
    23                     n.c.                    -                     -       -
    24                    VSS                     IN                  Supply     Ground reference voltage signal.
    25              Exposed Pad                    -                     -       Do not connect electrically.
    1)   n.c. stands for not connected / no connection required / not bonded.
 © 2016 Integrated Device Technology, Inc.                                    52                                           April 20, 2016


                                                                                              ZSSC3218 Datasheet
5 Quality and Reliability
The ZSSC3218 is available as a qualified IC for consumer-market applications. All data specified parameters are
guaranteed if not stated otherwise.
6      Ordering Sales Codes
 Sales Code             Description                                             Package
 ZSSC3218BI1B           Die—temperature range: –40°C to +85 °C, thickness 304µm Unsawn wafer
 ZSSC3218BI2B           Die—temperature range: –40°C to +85 °C, thickness 725µm Unsawn wafer
                        (w/o backlapping)
 ZSSC3218BI3R ES        PQFN24—temperature range: –40°C to +85 °C, engineering  Packaged die
                        samples
Contact IDT Sales for additional information.
7      Related Documents
 Document
 ZSSC3218 Feature Sheet
Visit the ZSSC3218 product page www.IDT.com/ZSSC3218 or contact your nearest sales office for ordering
information or the latest version of these documents.
  © 2016 Integrated Device Technology, Inc.                53                                       April 20, 2016


                                                                                                         ZSSC3218 Datasheet
8     Glossary
Term               Description
A2D                Analog-to-Digital
ACK                Acknowledge (interface’s protocol indicator for successful data/command transfer)
ADC                Analog-to-Digital Converter or Conversion
ALU                Arithmetic Logic Unit
AZ                 Auto-Zero (unspecific)
AZSM               Auto-Zero Measurement for (external) Sensor Path
AZTM               Auto-Zero Measurement for Temperature Path
Au                 Gold
CLK                Clock
Cu                 Copper
DAC                Digital-to-Analog Conversion or Converter
DF                 Data Fetch (command type)
DSP                Digital Signal Processor
EOC                End of Conversion
FSO                Full Scale Output (value in percent relative to the ADC maximum output code; resolution dependent)
LSB                Least Significant Bit
LFSR               Linear Feedback Shift Register
MR                 Measurement Request (command type)
MSB                Most Significant Bit
MTP                Multiple-Time Programmable Memory
NACK               Not Acknowledge (interface’s protocol indicator for unsuccessful data/command transfer)
POR                Power-on Reset
PreAmp             Preamplifier
PSRR               Power Supply Disturbance Rejection Ratio
SM                 Signal Measurement
SOT                Second-Order Term
TC                 Temperature Coefficient (of a resistor or the equivalent bridge resistance)
TM                 Temperature Measurement
 © 2016 Integrated Device Technology, Inc.                      54                                            April 20, 2016


                                                                                                                                                                                     ZSSC3218 Datasheet
9           Document Revision History
   Revision            Date                                     Description
       1.00            August 21, 2014                          First release.
       1.01            September 11, 2014                       Update for Sleep State current on page 2.
                                                                Minor edits.
       1.02            October 2, 2014                          Update of SSC-noise values in Table 2.6.
       1.03            November 17, 2014                        Corrections in Table 3.5 for settings for CYC_period, Gain_stage1, Gain_stage2,
                                                                Adc_bits and Offset.
                                                                Correction for Figure 2.3.
                       April 20, 2016                           Changed to IDT branding.
                                             Corporate Headquarters                                             Sales                                                          Tech Support
                                             6024 Silver Creek Valley Road                                      1-800-345-7015 or 408-284-8200                                 www.IDT.com/go/support
                                             San Jose, CA 95138                                                 Fax: 408-284-2775
                                             www.IDT.com                                                        www.IDT.com/go/sales
DISCLAIMER Integrated Device Technology, Inc. (IDT) reserves the right to modify the products and/or specifications described herein at any time, without notice, at IDT's sole discretion. Performance
specifications and operating parameters of the described products are determined in an independent state and are not guaranteed to perform the same way when installed in customer products. The
information contained herein is provided without representation or warranty of any kind, whether express or implied, including, but not limited to, the suitability of IDT's products for any particular purpose,
an implied warranty of merchantability, or non-infringement of the intellectual property rights of others. This document is presented only as a guide and does not convey any license under intellectual
property rights of IDT or any third parties.
IDT's products are not intended for use in applications involving extreme environmental conditions or in life support systems or similar devices where the failure or malfunction of an IDT product can be
reasonably expected to significantly affect the health or safety of users. Anyone using an IDT product in such a manner does so at their own risk, absent an express, written agreement by IDT.
Integrated Device Technology, IDT and the IDT logo are trademarks or registered trademarks of IDT and its subsidiaries in the United States and other countries. Other trademarks used herein are the
property of IDT or their respective third party owners. For datasheet type definitions and a glossary of common terms, visit www.idt.com/go/glossary. All contents of this document are copyright of
Integrated Device Technology, Inc. All rights reserved.
   © 2016 Integrated Device Technology, Inc.                                                                55                                                                                  April 20, 2016


 IMPORTANT NOTICE AND DISCLAIMER
 RENESAS ELECTRONICS CORPORATION AND ITS SUBSIDIARIES (“RENESAS”) PROVIDES TECHNICAL
 SPECIFICATIONS AND RELIABILITY DATA (INCLUDING DATASHEETS), DESIGN RESOURCES (INCLUDING
 REFERENCE DESIGNS), APPLICATION OR OTHER DESIGN ADVICE, WEB TOOLS, SAFETY INFORMATION, AND
 OTHER RESOURCES “AS IS” AND WITH ALL FAULTS, AND DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED,
 INCLUDING, WITHOUT LIMITATION, ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 PARTICULAR PURPOSE, OR NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY RIGHTS.
 These resources are intended for developers skilled in the art designing with Renesas products. You are solely responsible
 for (1) selecting the appropriate products for your application, (2) designing, validating, and testing your application, and (3)
 ensuring your application meets applicable standards, and any other safety, security, or other requirements. These
 resources are subject to change without notice. Renesas grants you permission to use these resources only for
 development of an application that uses Renesas products. Other reproduction or use of these resources is strictly
 prohibited. No license is granted to any other Renesas intellectual property or to any third party intellectual property.
 Renesas disclaims responsibility for, and you will fully indemnify Renesas and its representatives against, any claims,
 damages, costs, losses, or liabilities arising out of your use of these resources. Renesas' products are provided only subject
 to Renesas' Terms and Conditions of Sale or other applicable terms agreed to in writing. No use of any Renesas resources
 expands or otherwise alters any applicable warranties or warranty disclaimers for these products.
                                                                                                               (Rev.1.0 Mar 2020)
Corporate Headquarters                                                  Contact Information
TOYOSU FORESIA, 3-2-24 Toyosu,                                          For further information on a product, technology, the most
Koto-ku, Tokyo 135-0061, Japan                                          up-to-date version of a document, or your nearest sales
www.renesas.com                                                         office, please visit:
                                                                        www.renesas.com/contact/
Trademarks
Renesas and the Renesas logo are trademarks of Renesas
Electronics Corporation. All trademarks and registered
trademarks are the property of their respective owners.
                                                                      © 2020 Renesas Electronics Corporation. All rights reserved.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Renesas Electronics:
 ZSSC3218BI3R
