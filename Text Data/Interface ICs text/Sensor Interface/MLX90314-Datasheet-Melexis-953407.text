MLX90314
Programmable Sensor Interface
1. Features and Benefits                                   2. Application Examples
       Microprocessor-controlled signal                        Pressure transducers
        conditioning for bridge-type sensors                    Accelerometers
       Suited for low-cost sensors: reduction of               Temperature sensor assemblies
        non-linearity by programmable
        coefficients                                            Linear position sensors
       External or internal temperature sensor
        for compensating temperature errors
       Versatile output signal ranges: 4, 5, 10, or
        11VDC; 4 to 20 mA loop
       Mass calibration easy with 2400 or 9600
        baud UART
       Power supply from 6 to 35VDC
3. Ordering information
       Product Code           Temperature         Package Code      Option Code        Packing Form
                                  Code                                                     Code
      MLX90314              L                   DF               BBA-000             TU
      MLX90314              L                   DF               BBA-000             RE
Legend:
Temperature Code:        L for Temperature Range -40°C to 150°C
Package Code:            DF for SOIC300Mil
Packing Form:            RE for Reel, TU for Tube
Ordering example:        MLX90314LDF-BAA-000-TU
REVISION 009 – DECEMBER 2016                                                                    Page 1 of 33
39010903214


MLX90314
Programmable Sensor Interface
4. Functional Diagram
5. General Description
The MLX90314 is a dedicated microcontroller which performs signal conditioning for sensors wired in bridge or
differential configurations. Sensors that can be used include thermistors, strain gauges, load cells, pressure
sensors, accelerometers, etc. The signal conditioning includes gain adjustment, offset control, high order
temperature and linearity compensation. Compensation values are stored in EEPROM and are re- programmable.
Programming is accomplished by using a PC, with an interface circuit (level shifting and glue logic), and provided
software.
The application circuits can provide an output of an absolute voltage, relative voltage, or current. The output can
be range limited with defined outputs when the signal is beyond the programmed limits. Other features include
alarm outputs and level steering. The robust electrical design allows the MLX90314 to be used where most signal
conditioning and sensor interface circuits cannot be used. Voltage regulation control is provided for absolute
voltage and current modes (external FET required).
The standard package is a plastic SO16W. The device is static-sensitive and requires ESD precautions.
 REVISION 009 – DECEMBER 2016                                                                           Page 2 of 33
 39010903214


MLX90314
Programmable Sensor Interface
Contents
1. Features and Benefits.............................................................................................................................1
2. Application Examples .............................................................................................................................1
3. Ordering information .............................................................................................................................1
4. Functional Diagram ................................................................................................................................2
5. General Description................................................................................................................................2
6. Electrical Specifications .............................................................................................................................4
7. Unique Features .....................................................................................................................................8
   7.1. Customization..................................................................................................................................... 8
   7.2. Special Information ............................................................................................................................ 8
   7.3. Programming and Setup .................................................................................................................... 8
   7.4. Cross Reference.................................................................................................................................. 8
   7.5. ESD Precautions ................................................................................................................................. 8
8. Pin Description .....................................................................................................................................10
9. Analog Features....................................................................................................................................11
10. Digital Features...................................................................................................................................12
11. Different Modes .................................................................................................................................13
12. Communications ................................................................................................................................17
13. Typical 90314 Applications ...................................................................................................................26
14. Standard information regarding manufacturability of Melexis products with different
   soldering processes .............................................................................................................................32
15. Contact ...............................................................................................................................................33
16. Disclaimer...........................................................................................................................................33
REVISION 009 – DECEMBER 2016                                                                                                        Page 3 of 33
39010903214


MLX90314
Programmable Sensor Interface
6. Electrical Specifications
  DC operating parameters: TA = -40 to 140oC, VDD1 = 6 to 35VDC (unless otherwise specified).
  Parameter                   Symbol Test Conditions                  Min     Typ      Max     Units
    Regulator & Consumption
  Input voltage range         VIN     VDD1 (Regulator connected)       6              35   V
  Supply current              IDD     @ TA = 100ºC Current Mode               2.1          mA
  Supply current              IDD     @ TA = 100ºC Voltage Mode                       5.0  mA
  Regulated supply voltage    VREG                                    4.5    4.75     5.2  V
  Regulated voltage                                                          -600          uV / ºC
  temperature
  coefficient
  Supply rejection ratio      PSRR    VDD1 > 6V                        90                  dB
  Instrumentation Amplifier
  Differential input range    VBP-VBN IINV = 0                       -2.88           8.38 mV/V(Vdd)
  Differential input range    VBP-VBN IINV = 1                       -8.38           2.88 mV/V(Vdd)
  Common mode input range             1/2(VBP+VBN)                    38.0           65.0 %VDD
  Pin leakage current                 Pins VBP & VBN to GND, VDD =                    8.0   nA
  Common mode rejection Ratio CMRR                                     60                   dB
  Hardware gain                                                        69             84    V/V
  Coarse offset control Range         CSOF[1:0] = 00                 -4.37          -3.97 mV/V
                                      CSOF[1:0] = 01                 -1.46          -1.09 mV/V
                                      CSOF[1:0] = 10                  1.09           1.46 mV/V
                                      CSOF[1:0] = 11                  3.97           4.37 mV/V
  Fixed offset control range          High                            1.71            2.29 mV/V
                                      Low                            -2.00           -1.43 mV/V
   IA chopper frequency                                                       300           kHz
  Gain Stage
   Course gain                         CSGN = 000                      3.0             3.3  V/V
   (Fixed Gain = 1023)                 CSGN = 001                      4.9             5.4  V/V
  * CSGN = 100 to 111:                 CSGN = 010                      8.0             8.8  V/V
  voltage mode only, not
                                       CSGN = 011                     12.8            14.1 V/V
  applicable to current mode.
  Output > 6.5V; MSB = 1               CSGN = 100*                     7.9             8.7 V/V
  Output < 6.5V; MSB = 0               CSGN = 101*                    12.7            14.0 V/V
REVISION 009 – DECEMBER 2016                                                                  Page 4 of 33
39010903214


MLX90314
Programmable Sensor Interface
  DC operating parameters: TA = -40 to 140oC, VDD1 = 6 to 35VDC (unless otherwise specified).
  Parameter                                   Test Conditions                Min     Typ       Max Units
  Coarse gain                                 CSGN = 110*                  20.4             23.0 V/V
                                               CSGN = 111*                 33.1              36.6  V/V
   Fixed gain control range                                                0.480             0.970 V/V
  Digital Mode & Current Mode Coarse Gain Stage
                                               CSGN = 00                   1.05              1.17  V/V
                                               CSGN = 01                   1.71              1.89  V/V
   Course Gain
                                               CSGN = 10                   2.77              3.06  V/V
                                               CSGN = 11                   4.48              4.95  V/V
  Voltage Mode Output Stage ( See Voltage Mode)
   Output voltage span                        CSGN[2:2] = 0                4.5               6.5   V
                                               Gain                        2.74              3.04  V/V
                                               CSGN[2:2] = 1               6.5               11    V
                                               Gain                        7.24              7.86  V/V
   Minimum output voltage                                                                    -0.2  V
   Output source current                                                   2.0                     mA
   Output sink current                        @ 0V output voltage          20                      uA
   Output resistance                          Over complete output range                     25    Ohms
                                               CSGN[2:2] = 0               6.5                     V
   Digital mode output span
                                               CSGN[2:2] = 1               11.0                    V
                                               VDD = 5V, CSGN[2:2]=0                6.5            mV
   Digital mode step size
                                               VDD = 5V, CSGN[2:2]=1                11.0           mV
   Capacitive load VMO pin                                                          10             nF
  Current Mode Output Stage
   Fixed gain                                 RSENSE = 24 ohm              8.4               9.3   mA/V
   Output current CMO pin                     Current mode                          27             mA
   Current sense resistor                                                           24             Ohms
   Digital mode current output span           VDD = 5V                     23                      mA
   Digital mode current step Size             VDD = 5V,RSENSE=24Ω                   30             uA
  Signal Path ( General)
                                              Voltage mode                 98                2100  V/V
  Overall gain
                                              Current mode = 24Ω           284               2625  mA/V
  Overall non-linearity                                                    -0.25             0.25  %
  Ratiometry Error (4.75V – 5.25V)            Overall Gain < 250V/V        -1.75             1.75  %
                                              Overall Gain > 250V/V        -4.6              +4.6  %
REVISION 009 – DECEMBER 2016                                                                             Page 5 of 33
39010903214


MLX90314
Programmable Sensor Interface
  DC operating parameters: TA = -40 to 140oC, VDD1 = 6 to 35VDC (unless otherwise specified).
  Parameter                                       Test conditions                Min     Typ     Max    Units
  Bandwidth (-3dB)                                39 nF connected from FLT to GND 2.8    3.5      4.2   KHz
  Noise, VDD = 5V, CFLT=39nF, CL=10nF, RL =5KΩ, Analog Mode (Max. gain)                           17    mVRMS
  Temperature Sensor & - Amplifier
  Temperature sensor sensitivity                                                         390            uV/ºC
  Temperature sensor output voltage                                                70             380 mV
  Temperature Sensor & Amplifier (continued).
  Input voltage range TMP pin                     GNTP[1,0] = 00                   207            517 mV
  @ VDD = 5.0V                                    GNTP[1,0] = 01                   145            367 mV
                                                  GNTP[1,0] = 10                   101            263 mV
                                                  GNTP[1,0] = 11                    71             186 mV
  DAC
  Resolution                                                                               10           Bit
  Monotonicity                                                                   Guaranteed By Design
  Ratiometric output range (DAC output)                                             1              75   % VDD
  Offset Error                                                                              10          LSB
  Differential non-linearly                                                                         1   LSB
  Integral non-linearity                                                                            2   LSB
  ADC
  Resolution                                                                                10          Bit
  Monotonicity                                                                    Guaranteed by design
  Ratiometric input range                                                            1              75  % VDD
  Offset error                                                                              10          LSB
  Differential non-linearly                                                                          1  LSB
  Integral non-linearity                                                                             2  LSB
  On-Chip RC Oscillator and Clock
  Untrimmed RC                                                                      40             250 kHz
  oscillator frequency
  Trimmed RC oscillator frequency                                                  86.9    87.8    88.7 kHz
  (Measured at TMP pin with TSTB pin pulled low after power up)
  Frequency temperature coefficiency                                                        26          Hz/ºC
  Clock Stability with temperature compensation over full temperature               -3              +3   %
  range
  Ratio of f (microcontroller main                 TURBO = 0                                 7
  clock and (RC oscillator)                        TURBO = 1                                28
REVISION 009 – DECEMBER 2016                                                                             Page 6 of 33
39010903214


MLX90314
Programmable Sensor Interface
DC operating parameters: TA = -40 to 140oC, VDD1 = 6 to 35VDC (unless otherwise specified).
  Parameter                             Test Conditions                    Min     Typ      Max     Units
  Input & Output Pins (I01 & I02)
  Digital input levels                  Low                                  0.5                    V
                                        High                                                VDD-0.5
  Output Levels                         @ output current = 5mA low         VDD-0.4            0.4   V
                                        @ Output current = 5mA high                   VDD
  STB Pin
  Input levels                          Low                                  0.5                    V
                                        High                                                VDD-0.5
  Pull-up Resistor                                                                     66           kOhms
  FLT Pin
  Output resistance                                                                1.24             kOhms
  Output voltage range                  VDD = 5V                           0.05             3.6     V
  OFC Pin
  Output voltage range                  VDD = 5V                           0.05             3.75    V
  Load capacitor                                                                            20      Pf
  UART & COMS Pin
  UART baud rate                        TURBO = 0                                  2400             baud
                                        TURBO = 1                                  9600             baud
  COMS pin input levels                 Low                                0.3*VDD                   V
                                        High                                                0.7*VDD V
  COMS Pin Output Resistance             Low                                        100              Ohms
                                         High                                       100              kOhms
REVISION 009 – DECEMBER 2016                                                                          Page 7 of 33
39010903214


MLX90314
Programmable Sensor Interface
7. Unique Features
7.1. Customization
Melexis can customize the MLX90314 in both hardware and firmware for unique requirements.
The hardware design provides 64 bytes of RAM, 3 kbytes of ROM, and 48 bytes of EEPROM for use by
the firmware.
7.2. Special Information
The output of the sensor bridge is amplified via offset and gain amplifiers and then converted to the
correct output signal form in one of the output stages.
The sensitivity and offset of the analog signal chain are defined by numbers passed to the DAC
interfaces from the microcontroller core (GN[9:0] and OF[9:0]). The wide range of bridge offset and
gain is accommodated by means of a 2-bit coarse adjustment DAC in the offset adjustment (CSOF[1:0]),
and a similar one in the gain adjustment (CSGN[2:0]). The signal path can be directed through the
processor for digital pro cessing . Two I /O p i n s are av ai la b le for analog inputs or digital outputs.
These pins can be used for alarms on various points on the analog signal path and built-in or external
temperature values.
7.3. Programming and Setup
The MLX90314 needs to have the compensation coefficients programmed for a particular bridge sensor
to create the sensor system. Programming the EEPROM involves some minimal communications
interface circuitry, Melexis’ setup software, and a PC. The communications interface circuitry is
available in a development b oar d. This circuitry communicates with the PC via a standard RS-
232 serial communications port.
7.4. Cross Reference
There are no known devices which the MLX90314 can replace.
7.5. ESD Precautions
Observe standard ESD control procedures for CMOS semiconductors.
 REVISION 009 – DECEMBER 2016                                                                   Page 8 of 33
 39010903214


MLX90314
Programmable Sensor Interface
Table 2. Absolute Maximum Ratings
Supply voltage (ratiometric) VDD
Max
Supply voltage (ratiometric) VDD      4.5V
Min
Supply voltage (operating), VDD1      35V
Max
Reverse voltage protection           -0.7V
Supply current, Current Mode, IDD    3.5mA
Supply current, Voltage Mode, IDD    4.5mA
Output current, IVMO                  8mA
Output current (short to VDD),      100mA
IOutput
   SCVMOcurrent (short to VSS),       8mA
 IOutput
   SCVMOvoltage, VVMO                 +11V
  Power dissipation, PD              71mW
  Operating temperature range, TA  -40 to +140°
  Storage temperature range, TS    -55 to +150°
  Maximum junction temperature, TJ   150°C
  REVISION 009 – DECEMBER 2016                  Page 9 of 33
  39010903214


MLX90314
Programmable Sensor Interface
8. Pin Description
Table 3 Pin Description
   Pin   Signal         Description
         Name
   1,2   I/O1, 2        Bi-directional I/O. Can also be used as input to A/D converter. I/O can be
                        controlled by serial communications or by firmware as alarm inputs or
                        level out. (unconnected when not used)
   3     TSTB           Test pin for Melexis production testing. (in normal application connected to
                        VDD)
   4     FLT            Filter pin; allows for connection of a capacitor to the internal analog path.
   5     OFC            Offset control output. Provides access to the internal programmed offset
                        control voltage for use with external circuitry. (unconnected when not
                        used)
   6,7   VBN,VBP        Bridge inputs, negative and positive.
   8     TMP            Temperature sensor input. An external temperature sensor can be used in
                        conjunction with the internal one. The external sensor can provide a
                        temperature reading at the location of the bridge sensor.
   9     VDD            Regulated supply voltage. Used for internal analog circuitry to ensure accurate
                        and stable signal manipulation.
   10    FET            Regulator FET gate control. For generating a stable supply for the bridge
                        sensor and internal analog circuitry (generates regulated voltage for VDD).
   11    VDD1           Unregulated supply voltage. Used for digital circuitry and to generate FET
                        output.
   12    VMO            Voltage mode output. Compensated sensor output voltage.
   13    CMO            Current mode output. Compensated sensor output for current mode
                        operation.
   14    CMN            Current mode negative rail. Current mode return path.
   15    GND            Power supply return.
   16    COMS           Serial communications pin. Bi-directional serial communication signal for
                        reading and writing to the EEPROM.
  Figure 2. Pinout (SO16W (LW) Package)
REVISION 009 – DECEMBER 2016                                                                    Page 10 of 33
39010903214


MLX90314
Programmable Sensor Interface
9. Analog Features
Supply Regulator                                      Power-On Reset
A bandgap-stabilized supply-regulator is on-chip      The Power-On Reset (POR) initializes the state of
while the pass-transistor is external. The bridge-    the digital part after power up. The reset circuitry
type sensor is typically powered by the regulated     is completely internal. The chip is completely
supply (typically                                     reset and fully operational 3.5 ms from the time
4.75V). For ratiometric operation, the supply-        the supply crosses
regulator can be disabled by connecting together      3.5 volts. The POR circuitry will issue another
the unregulated and regulated supply pins.            POR if the supply voltage goes below this threshold
                                                      for 1.0 us.
Oscillator
The MLX90314 contains a programmable on-chip          Test Mode
RC oscillator. No external components are needed      For 100% testability, a "TEST" pin is provided. If the
to set the frequency (87.8 kHz +/-1%). The MCU-       pin is pulled low, then the monitor program is
clock is generated by a PLL (phase locked loop        entered and the chip changes its functionality. In
tuned for 614 kHz or 2.46 Mhz) which locks on the     all other applications, this pin should be pulled
basic oscillator.                                     high or left floating (internal pull-up).
The frequency of the internal clock is stabilized
over the full temperature range, which is divided     Temperature Sense
into three regions, each region having a separate     The temperature measurement, TPO, is generated
digital clock setting. All of the clock frequency     from the external or internal temperature sensor.
programming is done by Melexis during final test      This is converted to a 10-bit number for use in
of the component. The device uses the internal        calculating the signal compensation factors. A 2-bit
temperature sensor to determine which                 coarse adjustment GNTP[1:0] is used for the
temperature range setting to use.                     temperature signal gain & offset adjustment.
A/D and D/A
Conversions using only one DAC
For saving chip area, the "Offset DAC" is
multiplexed in various ways. Both "fine offset" and
"digital mode" signals are stored on a capacitor. An
ADC-loop is available by using a comparator and
SAR.
D/A
Before changing to another capacitor, the DAC
output should be settled to the new value. For
example, MODSEL moves the analog multiplexer to
the so- called "open state 0." At the same time, the
10 bit mux selects OF[9:0] for the offset-DAC. After
the DAC settling time, the analog multiplexer is
moved to its final state and the DAC-output
is stored on a capacitor.
A/D
The S/W-Signal MODSEL connects the SAR-output
to the DAC and the DAC-output to the comparator.
The SARegister is initialized by a rising edge of STC
(S/W signal). At the end of the A/D conversion, the
EOC flag is set to 1 and the controller can read
the ADC values.
 REVISION 009 – DECEMBER 2016                                                                 Page 11 of 33
 39010903214


MLX90314
Programmable Sensor Interface
10. Digital Features                                       Timer
                                                           The clock of the timers TMI and TPI is taken directly
Microprocessor, LX11 Core, Interrupt                       from the main oscillator. The timers are never
                                                           reloaded, so the next interrupt will take place 2x
Controller, Memories                                       oscillator pulses after the first interrupt.
The LX11 microcontroller core is described in its own
datasheet. As an overview, this implementation of the
LX11 RISC core has following resources:                    Watch Dog
                                                           An internal watch dog will reset the whole circuit in
Two accumulators, one index and two interrupt              case of a software crash. If the watch dog counter is
accumulators.                                              not reset at least once every 26 milliseconds (@ 2.46
15 - 8 bit I/O ports to internal resources.                MHz main clock), the microcontroller and all the
64 byte RAM.                                               peripherals will be reset.
4 kbytes ROM : 3 kbytes is available for the
customer's application firmware. 1k is
reserved for test.                                         Firmware
48 x 8 bit EEPROM.                                         The MLX90314 firmware performs the signal
Four interrupt sources, two UART interrupts                conditioning by either of two means: analog or
and two timers.                                            digital. The analog signal conditioning allows separate
                                                           offset and gain temperature coefficients for up to
UART                                                       four temperature ranges. Digital mode allows for all
                                                           of the analog capabilities plus up to five different
The serial link is a potentially full-duplex UART. It is gain values based on the input signal level. Also
receive-buffered, in that it can receive a second byte available in both modes is the capability of range
before a previously received byte has been read from limiting and level steering.
the receiving register. However, if the first byte is not
read by the time the reception of the second byte is
completed, the first byte will be lost. The UART's baud
rate depends on the RC-oscillator's frequency and the Temperature Processing
"TURBO"-bit (see output port). Transmitted and In both analog and digital modes, the temperature
received data has the following structure: start bit = 0, reading controls the temperature compensation.
8 bits of data, stop bit = 1.                              This temperature reading is filtered as designated by
                                                           the user. The filter adjusts the temperature reading
Sending Data                                               by factoring in a portion of the previous value. This
                                                           helps to minimize the effect of noise when using an
Writing a byte to port 1 automatically starts a external temperature sensor. The filter equation is:
transmission sequence. The TX Interrupt is set when
the STOP-bit of the byte is latched on the serial line.    If measured_temp > Temp_f(n)
                                                           then
Receiving Data                                             Temp_f(n+1) = Temp_f(n) + [measured_temp -
                                                           Temp_f(n)] / [2 n_factor].
Reception is initialized by a 1 to 0 transition on the
serial line (i.e., a START-bit). The baud rate period If measured_temp < Temp_f(n),
(i.e., the duration of one bit) is divided into 16 phases.
The first six and last seven phases of a bit are not then
used. The decision on the bit-value is then the result of Temp_f(n+1) =n_factor
                                                                             Temp_f(n) - [measured_temp -
a majority vote of phase 7, 8 and 9 (i.e., the center of Temp_f(n)] [2             ].
the bit).                                                  Temp_f(n+1) = new filtered temperature value.
                                                           Temp_f(n) = previous filtered temperature value.
Spike synchronization is avoided by de-bouncing on Measured_temp = Value from temperature A to
the incoming data and a verification of the START-bit
value. The RX Interrupt is set when the stop bit is D. N_factor = Filter value set by the user (four
latched in the UART.                                       LSB’s of byte 25 of EEPROM), range 0-6.
                                                           The filtered temperature value, Temp_f, is stored in
                                                           RAM bytes 58 and 59. The data is a 10 bit value, left
                                                           justified in a 16 bit field.
 REVISION 009 – DECEMBER 2016                                                                           Page 12 of 33
 39010903214


MLX90314
Programmable Sensor Interface
11. Different Modes                                 OFFSET
                                                    DAC_OFFSET (new value) ~ OF[9:0]+[OFTCi* dT]
Analog Mode
The parameters OF and GN represent, respectively,   OF[9:0] = Fixed Gain, bytes 4 and 17 in EEPROM.
offset correction and span control, while OFTCi and OFTCi = Offset for a given temperature segment I.
GNTCi represent their temperature coefficients
(thermal zero shift and thermal span shift). After  OFTCiL and OFTCiH in EEPROM table.
reset, the firmware continuously calculates the     dT = Temp. change within the appropriate gap.
offset and gain DAC settings as follows: The EEPROM
holds parameters GN, OF, OFTCi and GNTCi, where     Calculation of the offset for a given temperature seg-
“i” is the gap number and can be 1 < i < 4. The     ment is performed the same way as for the gain.
transfer function is described below.
                                                                                                             [m
Vout     = FG * DAC_GAIN               *  CSGN[2:0]
         *
{Vin+DAC_OFFSET+CSOF}
Iout = FG * DAC_GAIN * CSGN[1:0] *
{Vin+DAC_OFFSET+CSOF} * 8.85mA/V
FG = Hardware Gain (~72V/V). Part of the hardware
design, and not changeable.
                                                    Digital Mode
CSGN = Course Gain, part of byte 2 in EEPROM.       The MLX90314 firmware provides the capability of
                                                    digitally processing the sensor signal in addition to the
CSOF = Coarse Offset, part of byte 2 in EEPROM.     analog processing. This capability allows for signal
                                                    correction.
GAIN
DAC_GAIN (new value) ~ GN[9:0] + [GNTCi * dT]       Signal Correction
                                                    While in digital mode the firmware can perform signal
GN[9:0] = Fixed Gain, bytes 3 and 17 in EEPROM.     correction. This is an adjustment to the output level
GNTCi = Gain TC for a given temperature segment I.  based on the input signal level.                Adjustment
GNTCiL and GNTCiH in EEPROM table.                  coefficients can be set for five different signal ranges.
                                                    The output is obtained by the following formula:
dT = Temp. change within the appropriate gap. How
                                                    Output = (Signal – Pi) * Pci + Poff where
to calculate gain in the first temp. gap?: DAC_GAIN Signal = input signal measurement; Poff = Pressure
                                                    ordinate
= GN[9:0] - GNTC1 * (T1 – Temp_f1) How to           Pi = Pressure signal point (I = 2,3,4,5) Pci =
                                                    programmed coefficient.
calculate gain in the other temp. gaps?:
                                                    The PCi coefficients are coded on 12 bits: one bit for
                                                    the sign, one for the unity, and the rest for the
2nd gap: DAC_GAIN = GN[9:0] + GNTC2 * (Temp_f2      decimals. The Pi are coded on 10 bits (0-3FFh) in
– T1)                                               high-low order.
3th gap: DAC_GAIN = DAC_GAIN2 + GNTC3 *
(Temp_f3 – T2)                                      PNB_TNB: contains t h e number of signal points,
4th gap: DAC_GAIN = DAC_GAIN3 + GNTC4 *             coded on the four MSB’s. The four LSB’s are reserved
(Temp_f4 – T3)                                      for the number of temperature points. See Table 4 and
Where:                                              Table 5.
Temp_f = Filtered temp. (previously described).
If GNTC1 > 2047 => DAC_GAIN
If GNTC2,3,4 > 2047 => DAC_GAIN
 REVISION 009 – DECEMBER 2016                                                                     Page 13 of 33
 39010903214


MLX90314
Programmable Sensor Interface
Compensation Trade-Offs
A compromise must be made between temperature compensation and pressure correction. The EEPROM space
where the signal coefficients are stored is shared with the temperature coefficients, with the result that an
EEPROM byte can be used either for a temperature coefficient or for a signal coefficient, but not both. Table 6
presents the possibilities among the maximum number of temperature gaps and the maximum number of signal
gaps
        Table 4. PNB_TNB Bit Definition;                             Table 6. Temperature
                     Pressure Gaps                                   & Signal Limitations
  # of Pressure Gaps       4MSB of PNB_TNB Value             temperature
          Fixed                   15 (F hex)
                                                                        and
             1                    14 (E hex)                                                 5
             2                    12 (C hex)                     2                           3
             3                    10 (A hex)
             4                        8                          3                           2
             5                        6                          4
        Table 5. PNB_TNB Bit Definition;
                 Temperature Gaps
   # of Temperature Gaps       4 LSB of PNB_TNB
           Fixed (1)                     0
            2 Gaps                       5
            3 Gaps                       8
            4 Gaps                  11 (B hex)
 REVISION 009 – DECEMBER 2016                                                                     Page 14 of 33
 39010903214


MLX90314
Programmable Sensor Interface
                                                            4. Signal
                                                        Figure Linearity
                                                           Correction
                                                 Output
                                                                                              MLX90314
                                                                                              PC5
                                                                                   PC4
                                                                        PC3
                                Output (units)
                                                             PC2
                                                  PC1
                                                        P2         P3         P4         P5
REVISION 009 – DECEMBER 2016                                                                        Page 15 of 33
39010903214


MLX90314
Programmable Sensor Interface
REVISION 009 – DECEMBER 2016  Page 16 of 33
39010903214


MLX90314
Programmable Sensor Interface
  Level Steering                                            12. Communications
  The level steering option allows configuration of the
  IO pins as outputs to indicate the relative level of a    The MLX90314 firmware transfers a complete byte
  selected signal. See Figure 7. The levels at which the    of
  two outputs change state are programmed by                data into and from the memory based on a simple
  the user. The programmed levels are set as eight bit      command structure. The commands allow data to be
  numbers and compared to the upper eight bits of the       read and written to and from the EEPROM and read
  digitized signal. This function utilizes the same         from the RAM. RAM data that can be read
  resources as the alarm function. The two functions        includes the current digitized temperature and
  (level steering and alarm) cannot be used                 digitized GNO. The commands are described below.
  simultaneously. Four bytes in the EEPROM command          Melexis provides setup software for programming the
  this option. The first byte is used to select the         MLX90314.
  input, while the last three comprise the transition
  levels. The control byte for the level steering is the
  same as for the alarm. The four MSB’s hold the code       Table 8. Level Steering Bit Definitions
  for the selected input. The control byte has several
  possibilities as designated by the MUX settings (See                                       MUX Value
  Table 8)
   Table 9. Mode Byte Bit Definition
    Bit     Function                                   Remarks
   7      1= EEPROM Checksum test active             EEPROM Checksum test. Checksum test failure will
          0= EEPROM Checksum test inactive           force the output to the value programmed in bytes 40
                                                     and 41 of the EEPROM (See Table 10).
   6      0 = Analog Mode                            Digital mode must be activated when VMO and CMO
          1 = Digital Mode                           both active.
   5      0 = Alarm function inactive                Alarm functions are like “limiting functions”:
          1 = Alarm function active                   If defined ADC INPUT is below low alarm trigger,
                                                         then DIGMOD becomes active with alarm low
                                                         output).
                                                      If defined ADC INPUT is above high alarm trigger,
                                                         then DIGMOD becomes active with alarm high
                                                         output.
                                                     Note: Deactivated if the level steering mode is active
   4      0 = IO1/IO2 are not active outputs         Depending on the sampled input, IO1/IO2 will be a
          1 = level steering: IO1/IO2 are active     two bit digital output. If IO1/IO2 are not active outputs,
          outputs                                    then they will be analog inputs.
   3      0 = Turbo inactive
          1 = Turbo active
   2      0 = VMO inactive
          1 = VMO active
   1      0 = Internal temperature sensor active
          1 = External temperature sensor
          active
   0      0 = CMO inactive                           CMO has fixed digital value (EEPROM byte - see
          1 = CMO active                             below) if both VMO and CMO are active. To activate
                                                     this value, the digital mode must be activated.
REVISION 009 – DECEMBER 2016                                                                         Page 17 of 33
39010903214


MLX90314
Programmable Sensor Interface
  UART Commands                                              Clock Temperature Stabilization
  The commands can be divided into three parts: (1)          To provide a stable clock frequency from the internal
  downloading of data from the ASIC, (2) uploading of        clock over the entire operating temperature range,
  data to the ASIC and (3) the reset command.                three separate clock adjust values are used. Shifts in
  All the commands have the same identification bits.        operating frequency over temperature do not effect
  The two MSB’s of the sent byte indicate the                the performance but do, however, cause the
  command while the last six MSB’s designate                 communications baud rate to change.
  the desired address. The commands are coded as
  followed:                                                  The firmware monitors the internal temperature
   11 to read a RAM byte.                                    sensor to determine which of three temperature
   10 to read an EEPROM byte.                                ranges the device currently is in. Each temperature
   01 to write in the EEPROM.                                range has a factory set clock adjust value, ClkTC1,
   00 to write in the                                        ClkTC2, and ClkTC3. The temperature ranges are also
   RAM.                                                      factory set. The Ctemp1 and Ctemp2 values
  The addresses can include 0-63 for the RAM, 0-47 for       differentiate the three ranges. In order for the
  the EEPROM, and 63 for the EEPROM, RESET                   temperature A to D value to be scaled consistently
  Command (read).                                            with what was used during factory programming, the
                                                             CLKgntp (temperature amplifier gain) valued is
                                                             stored. The Cadj value stored in byte 1 of the
  Downloading Command                                        EEPROM is used to control the internal clock
  With one byte, data can be downloaded from                 frequency while the chip boots.
  the ASIC. The ASIC will automatically send the value
  of the desired byte.
                                                             Unused Bytes
                                                             There are eight unused bytes in the EEPROM address
  Uploading Command                                          map. These bytes can be used by the user to store
  Writing to the RAM or EEPROM involves a simple             information such as a serial number, assembly date
  handshaking protocol in which each byte                    code, production line, etc. Melexis doesn’t
  transmitted is acknowledged by the firmware. The           guarantee that these bytes will be available to the
  first byte transmitted to the firmware includes both       user in future revisions of the firmware.
  command and address. The firmware acknowledges
  receipt of the command and address byte by echoing
  the same information back to the transmitter. This         EEPROM Checksum
  “echo” also indicates that the firmware is ready to        A checksum test is used to ensure the contents of the
  receive the byte of data to be stored in RAM or            EEPROM. The eight bit sum of all of the EEPROM
  EEPROM. Next, the byte of value to be stored is            addresses should have a remainder of 0FFh when the
  transmitted and, if successfully received and stored       checksum test is enabled (mode byte). Byte 47 is
  by the firmware, is acknowledged by a “data                used to make the sum remainder totals 0FFh. If
  received signal,” which is two bytes of value BCh. If      the checksum test fails, the output will be driven to a
  the “data received signal” is not observed, it may be      user defined value, Faultval. When the checksum test
  assumed that no value has been stored in RAM or            is enabled, the checksum is verified at initialization of
  EEPROM.                                                    RAM after a reset.
  Reset Command                                              RAM Data
  Reading the address 63 of the EEPROM resets the            All the coefficients (pressure, temperature) are
  ASIC and generates a received receipt indication.          compacted in a manner similar to that used for the
  Immediately before reset, the ASIC sends a value of        EEPROM. They are stored on 12 bits (instead of
  BCh to the UART, indicating that the reset has been        keeping 16 bits for each coefficient). All the
  received.                                                  measurements are stored on 16 bits. The user must
                                                             have access to the RAM and the EEPROM, while
                                                             interrupt reading of the serial port. Therefore, bytes
  EEPROM Data                                                must be kept available for the return address, the A-
  All user-settable variables are stored in the EEPROM       accu and the B-accu, when an interrupt occurs. The
  within the MLX90314. The EEPROM is always re-              RAM keeps the same structure in the both modes.
  programmable. Changes to data in the EEPROM do
  not take effect until the device is reset via a soft reset
  or power cycle. 12 bit variables are stored on 1.5
  bytes. The 4 MSB’s are stored in a separate byte and
  shared with the four MSB’s of another 12-bit variable.
REVISION 009 – DECEMBER 2016                                                                            Page 18 of 33
39010903214


MLX90314
Programmable Sensor Interface
  Table 10. Examples of Fixed Point                   Data Range
                                                      Various data are arranged as follows:
  Signed Numbers
                                                       Temperature points: 10 bits, 0-03FF in high-
                                                      low order.
  0            0000h          +0.00                    Pressure points: 10 bits, 0-03FF in high-low
                                                      order.
  1023         3FFh           +0.9990234
                                                       GN1: 10 bits, 0-03FF in high-low order.
  1024         400h           +1.000                   OF1: 10 bits, 0-03FF in high-low order.
  2047         7FFh           +1.9990234               GNTCi: signed 12 bits (with MSB for the sign),
                                                      [-1.9990234, +1.9990234].
  2048         800h
  3071                                                 OFTCi: signed 12 bits (with MSB for the sign),
                                                      [-1.9990234, +1.9990234].
  3072         0C00h
                                                       Pci: signed 12 bits (with MSB for the sign),
  4095         0FFFh
                                                      [-1.9990234, +1.9990234]
                                                      DIGMO: 10 bits, 0-03FF in high-low order
                                                      (See Table 13 for examples of fixed point
                                                      signed numbers.)
  Table 11. EEPROM Byte Definitions
  Byte        Designation            Note
  0           MODE byte              Contents described in Table 9.
  1           Cadj                   Controls system clock during boot.
  2           Coarse Control         Contents described in Table 12.
  3           GN1L                   The eight LSB's of the Fixed Gain, GN[7:0].
  4           OF1L                   The eight LSB's of Fixed Offset OF[7:0].
  5           GNTC1L                 The eight LSB's of the first gain TC GNTC1[7:0].
  6           OFTC1L                 The eight LSB's of the first offset TC OFTC1[7:0].
  7           TR1L                   The eight LSB's of the first temperature point, T1[7:0]. The
              PC5L                   eight LSB's of Pressure Coefficient 5 PC5[7:0].
  8           GNTC2L                 The eight LSB's of the second gain TC GNTC2[7:0]. The
              P5L                    eight LSB's of Pressure Point 5 P5[7:0].
  9           OFTC2L                 The eight LSB's of the second offset TC OFTC2[7:0]. The
              PC4L                   eight LSB's of Pressure Coefficient 4 PC4[7:0].
  10          TR2L                   The eight LSB's of the second temperature point T2[7:0]. The
              P4L                    eight LSB's of Pressure Point 4 (or Signature) P4[7:0].
  11          GNTC3L                 The eight LSB's of the third gain TC GNTC3[7:0].
              PC3L                   The eight LSB's of Pressure Coefficient 3 (or Signature) PC3 [8:0].
REVISION 009 – DECEMBER 2016                                                                     Page 19 of 33
39010903214


MLX90314
Programmable Sensor Interface
  Table 11. EEPROM Byte Definitions (continued)
  Byte     Designation                  Note
  12       OFTC3L or                    The eight LSB's of the third offset TC OFTC3[7:0].
           P3L                          The eight LSB's of Pressure Point 2 (or Signature) P2[7:0].
  13       TR3L or                      The eight LSB's of the third temperature point T3[7:0]. The
           PC2L                         eight LSB's of Pressure Coefficient 2 PC2[7:0].
  14       GNTC4L or                    The eight LSB's of the fourth gain TC GNTC4[7:0]. The
           P2L                          eight LSB's of Pressure Point 2 P2[7:0].
  15       OFTC4L or                    The eight LSB's of the fourth offset TC OFTC4. The
           PC1L                         eight LSB's of Pressure Coefficient 1 PC1
  16       PoffL                        The eight LSB's of Pressure (output signal) Ordinate Poff[7:0].
           Upper         Lower          Upper four bits.                    Lower four bits
           Four          Four
           Bits          Bits
  17       GN1[9:8]       OF1[9:8]      Two MSB's of fixed gain              Two MSB's of fixed offset
                                        GN[9:8].                             OF[9:8]
  18       GNTC1[11:8]    OFTC1[11:8]   Four MSB's of first gain TC          Four MSB's of the first offset
                                        GNTC1[11:8].                          TC OFTC1[11:8].
  19       TR1[9:8]       GNTC2[11:8]   Two MSB's, first temperature          Four MSB's, second gain
                                        point T1[9:8] or                      TC GNTC2[11:8] or
           PC5[11:8]      P5[9:8]       Four MSB's, Pressure                 TC GNTC2[11:8] or
                                        Coefficient 5 PC5[11:8].             Two MSB's Pressure Point 5
                                                                              P5[9:8].
  20       OFTC2[11:8]    TR2[9:8]      Four MSB's second offset             Two MSB's second
                                        TC OFTC2[11:8] or                     temperature point T2[9:8] or
           PC4[11:8]      P4[9:8]       Four MSB's Pressure                   Two MSB's Pressure Point 4
                                        Coefficient 4 PC4[11:8].              P4[9:8].
  21       GNTC3[11:8]    OFTC3[11:8]   Four MSB's third gain TC              Four MSB's third offset
                                        GNTC3[11:8] or                        TC OFTC3[11:8] or
           PC3[11:8]       P3[9:8]      Four MSB's Pressure                   Two MSB's Pressure Point 3
                                        Coefficient 3 PC3[11:8]).              P3[9:8].
  22       TR3[9:8]         GNTC4[11:8] Two MSB's third                       Four MSB's fourth gain TC
                                        temperature point t3[9:8] or           GNTC4[11:8] or
           PC2[9:8]         P2[9:8]     Four MSB's Pressure                   Two MSB's Pressure
                                        Coefficient 2 PC2[11:8].               Point 2 P2[9:8].
  23       OFTC4[11:8]      Poff[9:8]   Four MSB's fourth offset TC            Two MSB's Pressure
                                        ordinate
                                        OFTC4[11:8] or                         Poff[9:8].
           PC1[11:8]                    Four MSB's Pressure
                                        Coefficient 1 PC1[11:8].
REVISION 009 – DECEMBER 2016                                                                        Page 20 of 33
39010903214


MLX90314
Programmable Sensor Interface
  Table 11. EEPROM Byte Definitions (continued)
  Byte       Designation           Note
  24         PNB_TNB               Number of temperature and pressure gaps. See Tables 4, 5, and 6,
                                   and Figures 3 and 4.
  25         n_factor              Temperature filter coefficient, four LSB's. Four MSB's must all be
                                   zero.
  26         Not used              This byte is not used.
  27         ALARM low trigger     Value below which ALARM will go on.
             Level1 IO2/IO1        Value of first level ([IO2, IO1]= 00-01). See Figures 5 & 7.
  28         ALARM low output      Value of DIGMO during “ALARM low” condition.
             Level2 IO2/IO1        Value of second level ([IO2,IO1] = 01-10). See Figures 5 and
                                   7
  29         ALARM high trigger    Value above which ALARM will go on.
             Level3 IO2/IO1        Value of third level ([IO2,IO1]=10-11). See Figures 5 and 7.
  30         ALARM high out level  Value of DIGMO during “ALARM high” condition. See
                                   Figures 5 and 7.
  31         ALARM control byte    Three bits needed for choice of input for ALARM detection
                                   (TPO, IAO, GNO, VMO, IO1 or IO2).
             IO1/IO2 control byte  Two bits needed for choice of input for LEVEL-steering
                                   (TPO, IAO, GNO or VMO).
             Four LSB's are unused The above bits are multiplexed according to the mode. If both
                                   CMO and VMO are active, then alarm is not active.
  32         ClkTC1                Value of Cadj at low temperature (Don’t change; factory set).
  33         ClkTC2                Value of Cadj at mid temperature (Don’t change; factory set).
  34         ClkTC3                Value of Cadj at high temperature Don’t change; factory set).
  35         Ctemp1                First Cadj temperature point, eight MSB’s of the 10 bit internal
                                   temperature value (set at factory; do not change).
  36         Ctemp2                Second Cadj temperature point, eight MSB’s of the 10 bit
                                   internal temperature value (set at factory; do not change).
  37-38      Not used              These bytes are not used by the firmware and are available to
                                   the user.
  39         CLKgntp               Setting for temperature amplifier for clock temperature
                                   adjustment temperature reading (set at factory; do not
                                   change).
  40-41      Faultval              Value sent to output if checksum test fails is a 10 bit value.
  42-46      Not Used              These bytes are not used by the firmware and are available to
                                   the user.
  47         Checksum              EEPROM checksum; value needed to make all bytes add to
                                   0FFh. Must be set by user if checksum test is active.
REVISION 009 – DECEMBER 2016                                                                   Page 21 of 33
39010903214


MLX90314
Programmable Sensor Interface
  Notes For Table 11                                          Table 12. Bit Definitions;
  1. Not all the temperature and pressure coefficients        Coarse Control , Byte 2
  must be used. When a coefficient is unused, the
  eight LSB’s and the four MSB’s are replaced by 0.            Bit Symbol Function
  2. The level steering and the alarm mode cannot                    IINV    Invert signal sign.
  be active simultaneously because the levels bytes are
  shared with the two modes.                                        GNTP1 Gain & offset of temperature
                                                                             amplifier.
  3. If the alarm mode and the level steering are
  both active, the level steering mode is dominant. The             GNTP0 GNTP = 0 to 3.
  firmware will run with the level steering mode, by
  default.                                                          CSOF 1 Coarse offset of signal amplifier.
                                                                    CSOF 0 CSOF = 0 to 3.
  4. If the DIGMO mode (VMO and CMO both active) is
  active, the alarm will be automatically disabled by               CSGN2 Coarse gain of signal amplifier.
  the firmware.                                                              CSGN = 0 to 7. If CSGN > 3,
                                                                    CSGN1 output range = 0 to 10V. If
  5. At PNB_TNB address, the four MSB's correspond
  to the address of the last pressure point and the four            CSGN0 CSGN <= 3, output range = 0 to
  LSB’s to the address of the last temperature point.                        5V.
  6. In the alarm_control variable, the selected
  input is stored on the three MSB’s.
  7. Pi and OFi are 10 bit values, right justified in 12 bits
  fields.
  Table 13. RAM Byte Definitions
   Byte       Functions                     Remarks
   0          MODE byte                     See Table 9.
   1          GN1L                          Fixed gain number (8LSB).
   2          OF1L                          Fixed offset number (8LSB).
   3          GNTC1L                        First gain TC (8LSB).
   4          OFTC1L                        First offset TC (8LSB).
   5          TR1L                          First temperature point.
              PC5L                          Pressure Coefficient 5 (8LSB).
   6          GNTC2L                        Second gain TC. Pressure
              P5L                           point 5 (8LSB).
   7          OFTC2L                        Second offset TC.
              PC4L                          Pressure coefficient 4 (8LSB).
   8          TR2L                          Second temperature point.
              P4L                           Pressure Point 4 (or Signature) (8LSB).
   9          GNTC3L                        Third gain TC.
              PC3L                          Pressure Coefficient 3 (or Signature) (8LSB).
   10         OFTC3L                        Third offset TC.
              P3L                           Pressure Point 2 (or Signature) (8LSB).
REVISION 009 – DECEMBER 2016                                                                       Page 22 of 33
39010903214


MLX90314
Programmable Sensor Interface
   Byte      Functions                 Remarks
     11      TR3L                      Third temperature point.
             PC2L                      Pressure Coefficient 2 (8LSB).
     12      GNTC4L                    Fourth gain TC.
             P2L                       Pressure Point 1 (8LSB).
     13      OFTC4L                    Fourth offset TC.
             PC1L                      Pressure Coefficient 1 (8LSB).
     14      DIGMOP1L                  Fixed pressure (8LSB).
     15      GN1[9:8]      OF1[9:8]    Two MSB's of fixed gain           Two MSB's of fixed offset
                                       GN[9:8].                          OF[9:8].
     16      GNTC1          OFTC1      Four MSB's of first gain TC       Four MSB's of the first
             [11:8]          [11:8]    GNTC1[11:8].                      offset TC OFTC1[11:8]
     17      TR1[9:8]       GNTC2      Two MSB's, first temperature      Four MSB's, second gain
                            [11:8]     point T1[9:8] or                  TC GNTC2[11:8] or
             PC5[11:8]     P5[9:8]     Four MSB's Pressure               Two MSB's, Pressure
                                       Coefficient 5 PC5[11:8].          Point 5 P5[9:8]
     18      OFTC2[11:8]     TR2[9:8]  Four MSB's, second offset TC      Two MSB's, second temp.
                                       OFTC2[11:8] or                    point T2[9:8] or
             PC4[11:8]        P4[9:8]
                                       Four MSB's, Pressure              Two MSB's, Pressure
                                       Coefficient 4 PC4[11:8].          Point 4 P4[9:8].
     19      GNTC3[11:8]   OFTC3       Four MSB's, Third Gain TC         Four MSB's Third Offset
             [11:8]                    GNTC3[11:8] or                    TC OFTC3[11:8] or
                                       Four MSB's, Pressure              Two MSB's Pressure
             PC3[11:8]         P3[9:8] Coefficient 3 PC3[11:8]).         Point 3 P3[9:8]
     20      TR3[9:8]      GNTC4       Two MSB's, third temperature       Four MSB's, Fourth Gain
             [11:8]                    point t3[9:8] or                   TC GNTC4[11:8] or
                                       Four MSB's, Pressure               Two MSB's, Pressure
             PC2[9:8]       P2[9:8]    Coefficient 2 PC2[11:8].           Point 2 P2[9:8].
     21      OFTC4[11:8]   P1[9:8]     Four MSB's Fourth Offset TC        Two MSB's Pressure
                                       OFTC4[11:8] or                     Point 1 P1[9:8].
             PC1[11:8]                 Four MSB's Pressure
                                       Coefficient 1 PC1[11:8].
     22      PNB_TNB                   Same as EEPROM.
     23      N_Factor                  Temperature filter coefficient — 4 LSB’s, 4 MSB = 0
     24      Not Used
   25-26     GN                        Offset Ordinate of the current gap.
   27-28     OF                        Gain Ordinate of the current gap.
     29      Taddress                  4 bits for the max. temperature address of the current gap; 4
                                       bits for the min. temperature address of the current gap.
 REVISION 009 – DECEMBER 2016                                                              Page 23 of 33
 39010903214


MLX90314
Programmable Sensor Interface
    Byte      Functions                    Remarks
      30      ALARM control byte           Three bits needed for choice of input for ALARM
              IO1/IO2 control byte         detection (TPO, IAO, GNO, VMO, IO1 or IO2). Two bits
                                           needed for choice of input for LEVEL-steering (TPO, IAO,
                                           GNO or
                                           VMO). These bits are multiplexed according the mode. Note:
                                           if both CMO and VMO are active, then alarm is not active.
      31      ALARM low trigger level      Value below which ALARM will go on.
              IO1/IO2 level 1              Value of first level ([IO2,IO1]=00-01).
      32      ALARM low output level       Value of DIGMO during “ALARM low” condition.
              IO1/IO2 level 2              Value of second level ([IO2,IO1]=01-10).
      33      ALARM high trigger           Value above which ALARM will go on.
              level
                                           Value of third level ([IO2,IO1] = 10-11).
              IO1/IO2 level 3
      34      ALARM high output            Value of DIGMO during “ALARM high” condition.
              level
    35-36     A_16                         16 bits A Register.
    37-38     B_16                         16 bits B Register.
    39-42     RESULT_32                    32 bits result (for 16 bit multiplication).
    43-44     Tempo1                       Measured temperature, internal or external, and
                                           temporary variable 1.
      45      Tempo2                       Temporary variable 2.
    46-47     Signal_In                    Digitized signal value, analog and digital mode
      48     Coms_backup                   Address saved when command is send.
      49      P3_copy                      Port 3 setting copy.
      50      Adsav1                       Address saved at interrupt.
    51-52     Aaccsav                      A-Accumulators saved at interrupt.
      53      Baccsav                      B-Accumulators saved at interrupt.
    54-55     DAC_gain                     DAC gain (GN).
    56-57     DAC_offset                   DAC offset (OF).
    58-59     Temp_f                       Filtered temperature. This is a 10 bit number that is left
                                           justified in a 16 bit field.
    60-61     Signal_Out                   Digitized linearity corrected signal value. Digital mode only.
    62-63     Adsav2                       Address saved when call.
  Note: Because of space considerations, the measured temperature can’t be kept in the RAM at all times. If
  the measured temperature is to be available, the temperature filter variable, N_Factor, must be set to 6.
 REVISION 009 – DECEMBER 2016                                                                        Page 24 of 33
 39010903214


MLX90314
Programmable Sensor Interface
  Prototyping
  Melexis offers an MLX90314 evaluation kit which
  contains an evaluation circuit board, serial interface
  cable, and software diskette. The circuit board
  provides the necessary circuitry for all three
  applications circuits shown on the next page. Also
  included in the circuit board is level shifting and glue
  logic necessary for RS-232 communications.
  The board has a socket with a single MLX90314
  installed, and direct access to the pins of the IC. The
  user can easily attach bridge sensor to the board
  for in-system evaluation. The serial interface cable
  connects the evaluation board directly to a PC’s serial
  port for in-system calibration.
  The software runs in the familiar Windows
  platform and allows for programming and evaluation
  of all compensation parameters within the EEPROM.
    Figure 8. MLX90314 Evaluation Kit with MLX Software
REVISION 009 – DECEMBER 2016                               Page 25 of 33
39010903214


MLX90314
Programmable Sensor Interface
13. Typical 90314 Applications
  Figure 9a. Absolute Voltage Mode
                                                                               Supply
                             5K
                                                         Automotiv     100 nF
                                 VDD FET  VDD1             e apps
                                 COMS
     100 nF
                                 VBP      VMO                                 Output
                                  VBN      FLT 39 nF 100 nF 10 nF
                                                                   10K
                                      GND
                                                                               Ground
  Figure 9b. Ratiometric Voltage Mode
                                                                              Supply
                              5K
                                  VDD     VDD1
                                 COMS
     100 nF
                                  VBP
                                          VMO                                 Output
                                  VBN
                                           FLT 39 nF        10 nF
                                                                   10K
                                  TMP GND
                                                                              Ground
REVISION 009 – DECEMBER 2016                                                          Page 26 of 33
39010903214


MLX90314
Programmable Sensor Interface
  Figure 9c. Current Mode
                                                                             Supply
                             5K
                                VDD  FET VDD1
                                                            100 nF 100 nF
                                COMS
                                         CMO
     100 nF
                                VBP                                Depends on
                                                    75 Ohms          stability of
                                                                    the current
                                VBN       FLT 39 nF                     loop
                                     GND CMN        24 Ohms
                                TMP
REVISION 009 – DECEMBER 2016                                                        Page 27 of 33
39010903214


MLX90314
Programmable Sensor Interface
Figure 10. Application Example
                            Figure 10a. Programmable Oil Pressure Gauge
                                                                     Communications
                                                                           Signal Out
                                                                                 GND
                                                                                   V+
                                                      Programmable Oil Pressure Gauge
                                                  This application example illustrates a fundamental
                                                application of the MLX90314 and a bridge type
                                                pressure sensor element. In this application, the
                                                 MLX90314 uses an external FET as a pass transistor to
                                              regulate the voltage to the sensor and the analog portion
                                                                                                       of
                                           the IC. This is known as Absolute Voltage Mode, where
                                                  voltage to the sensor and analog circuit is regulated
                                                                                           independent
                                 of the supply voltage. The MLX90314 can be operated in Ratiometric
                             Voltage Mode, in which the output (VMO) is tied to an A/D converter
                           sharing the same supply and ground reference. A third wiring option is
                  Current Mode, which allows the user a 4 to 20 milliampere current range to use as a
                   2-wire analog sensor.
               Figure 10b. Programmable Oil Pressure Gauge Electrical Connections
REVISION 009 – DECEMBER 2016                                                                 Page 28 of 33
39010903214


MLX90314
Programmable Sensor Interface
 Figure 11. Error Compensation
 Figure 11a. Raw Sensor Output
 (measured between VPB and
 VBN)
                170
  Voltage (in                                    140oC
                                                  25oC
                                                 -40oC
                0
                      0%                        100%
                           Pressure
 Figure 11b. Conditioned Sensor
 Output
                4
  Voltage
                                                  140oC
                                                   25oC
                                                  -40oC
                1
                      0%                      100%
                           Pressure
 Figures 11a and 11b above illustrate the performance
 of an unconditioned sensor output and a
 conditioned sensor output versus stimulus (pressure)
 and temperature. It can be seen that Figure 11a has a
 range of only 170 mV (maximum range with a 5V
 supply) and has a non-linear response over a 0-100
 psi range. The sensitivity of the unconditioned output
 will also drift over temperature, as illustrated by the
 three slopes. The MLX90314 corrects these errors
 and amplifies the output to a more usable voltage
 range as shown in Figure 11b.
REVISION 009 – DECEMBER 2016                               Page 29 of 33
39010903214


MLX90314
Programmable Sensor Interface
                                                 RS-232 industry std. serial communications protocol
Table 14. Glossary of Terms                      RX receive
                                                 SAR successive approximation register
A/D analog to digital conversion                 STC start A/D
ADC analog to digital converter                  conversion Tdiff
ASCII American Standard Code for Information     temperature difference
    Interchange                                  Text temperature,
ASIC application specific integrated circuit     external TMI timer
CM current mode                                  Interrupt
CMN current mode negative (supply                TMP temperature
connection) CMO current mode output              signal TPI temperature
COMS communication, serial                       interrupt Tref
CR         carriage                              temperature reference
return        CSGN                               TSTB test mode pin
coarse gain CSOF                                 TX transmit
coarse offset                                    UART universal asynchronous receiver / transmitter
CV current / voltage mode                        VBN bridge, positive,
select bit DAC digital to analog                 input VBP bridge,
converter DACFnew filtered                       negative, input VDD
DAC value, new DACFold                           supply voltage
filtered DAC value, old DARDIS                   VM voltage mode
DAC resistor disable                             VMGN voltage mode
dB decibel                                       gain VMO voltage
DOGMO digital mode                               mode output WCB
EEPROM electrically erasable programmable        warn / cold boot WDC
  read only memory                               watch dog counter
EOC end of conversion flag
bit ESD electrostatic
discharge ETMI timer
interrupt enable
ETPI enable temperature interrupt
FET field effect transistor
FG fixed gain
FLT filter pin
GNO gain and offset adjusted digitized signal
GNOF gain, offset
GNTP temperature gain / offset coarse adjustment
HS hardware / software limit
I/O input / output
IFIX fixed current output value
IINV input signal invert command bit
ILIM current limit
kHz kilohertz, 1000 Hz
LSB least significant bit
mA milliamperes, 0.001 amps
MODSEL mode select
ms millisecond, 0.001 second
MSB most significant bit
MUX multiplexer
mV millivolts, 0.001 Volts
nF nanofarads, 1 X 10-9 farads
OFC offset control
PC personal computer, IBM
clone pF picofarad, 1 X 10-12
farads
PLL phase locked loop
POR power on reset
RAM random access memory
RISC reduced instruction set computer
ROM read only memory
 REVISION 009 – DECEMBER 2016                                                                Page 30 of 33
 39010903214


MLX90314
Programmable Sensor Interface
 Figure 12. MLX90314 Physical Characteristics, DF Package
                                                                                    0.32
                                                                                    0.23
                                                7.60           10.65
                                                7.40           10.00
                                                                                           1.27
                                                                                           0.40
               0.51
               0.33                     1.27                             0o to
                                                 Notes:                   8o
                                                 1. All dimensions in millimeters.
                                10.50            2. Body dimensions do not include mold flash
                                10.10               or protrusion, which are not to exceed
                                                    0.15mm.
                                                            2.65
                                                            2.35
                                               0.010
                                               min.
REVISION 009 – DECEMBER 2016                                                                      Page 31 of 33
39010903214


MLX90314
Programmable Sensor Interface
14. Standard information regarding manufacturability of Melexis products
with different soldering processes
Our products are classified and qualified regarding soldering technology, solderability and moisture sensitivity
level according to following test methods:
Reflow Soldering SMD’s (Surface Mount Devices)
    IPC/JEDEC J-STD-020
     Moisture/Reflow Sensitivity Classification for Nonhermetic Solid State Surface Mount Devices
     (classification reflow profiles according to table 5-2)
    EIA/JEDEC JESD22-A113
     Preconditioning of Nonhermetic Surface Mount Devices Prior to Reliability Testing
     (reflow profiles according to table 2)
Wave Soldering SMD’s (Surface Mount Devices) and THD’s (Through Hole Devices)
    EN60749-20
     Resistance of plastic- encapsulated SMD’s to combined effect of moisture and soldering heat
    EIA/JEDEC JESD22-B106 and EN60749-15
     Resistance to soldering temperature for through-hole mounted devices
Iron Soldering THD’s (Through Hole Devices)
    EN60749-15
     Resistance to soldering temperature for through-hole mounted devices
Solderability SMD’s (Surface Mount Devices) and THD’s (Through Hole Devices)
    EIA/JEDEC JESD22-B102 and EN60749-21
     Solderability
For all soldering technologies deviating from above mentioned standard conditions (regarding peak temperature,
temperature gradient, temperature profile etc) additional classification and qualification tests have to be agreed
upon with Melexis.
The application of Wave Soldering for SMD’s is allowed only after consulting Melexis regarding assurance of
adhesive strength between device and board.
Melexis is contributing to global environmental conservation by promoting lead free solutions. For more
information on qualifications of RoHS compliant products (RoHS = European directive on the Restriction Of the
use of certain Hazardous Substances) please visit the quality page on our website:
http://www.melexis.com/quality.aspx
 REVISION 009 – DECEMBER 2016
 39010903214                                                                                            Page 32 of 33


MLX90314
Programmable Sensor Interface
15. Contact
For the latest version of this document, go to our website at www.melexis.com.
For additional information, please contact our Direct Sales team and get help for your specific
needs:
Europe, Africa                  Telephone: +32 13 67 04 95
                                Email : sales_europe@melexis.com
Americas                        Telephone: +1 603 223 2362
                                Email : sales_usa@melexis.com
Asia                            Email : sales_asia@melexis.com
16. Disclaimer
The information furnished by Melexis herein (“Information”) is believed to be correct and accurate. Melexis disclaims (i) any and all liability in connection
with or arising out of the furnishing, performance or use of the technical data or use of the product(s) as described herein (“Product”) (ii) any and all liability,
including without limitation, special, consequential or incidental damages, and (iii) any and all warranties, express, statutory, implied, or by description,
including warranties of fitness for particular purpose, non-infringement and merchantability. No obligation or liability shall arise or flow out of Melexis’
rendering of technical or other services.
The Information is provided "as is” and Melexis reserves the right to change the Information at any time and without notice. Therefore, before placing orders
and/or prior to designing the Product into a system, users or any third party should obtain the latest version of the relevant information to verify that the
information being relied upon is current.
Users or any third party must further determine the suitability of the Product for its application, including the level of reliability required and determine
whether it is fit for a particular purpose.
The Information is proprietary and/or confidential information of Melexis and the use thereof or anything described by the Information does not grant,
explicitly or implicitly, to any party any patent rights, licenses, or any other intellectual property rights.
This document as well as the Product(s) may be subject to export control regulations. Please be aware that export might require a prior authorization from
competent authorities.
The Product(s) are intended for use in normal commercial applications. Unless otherwise agreed upon in writing, the Product(s) are not designed, authorized
or warranted to be suitable in applications requiring extended temperature range and/or unusual environmental requirements. High reliability applications,
such as medical life-support or life-sustaining equipment are specifically not recommended by Melexis.
The Product(s) may not be used for the following applications subject to export control regulations: the development, production, processing, operation,
maintenance, storage, recognition or proliferation of 1) chemical, biological or nuclear weapons, or for the development, production, maintenance or
storage of missiles for such weapons: 2) civil firearms, including spare parts or ammunition for such arms; 3) defense related products, or other material for
military use or for law enforcement; 4) any applications that, alone or in combination with other goods, substances or organisms could cause serious harm to
persons or goods and that can be used as a means of violence in an armed conflict or any similar violent situation.
The Products sold by Melexis are subject to the terms and conditions as specified in the Terms of Sale, which can be found
at https://www.melexis.com/en/legal/terms-and-conditions.
This document supersedes and replaces all prior information regarding the Product(s) and/or previous versions of this document.
Melexis NV © - No part of this document may be reproduced without the prior written consent of Melexis. (2016)
ISO/TS 16949 and ISO14001 Certified
 REVISION 009 – DECEMBER 2016
 39010903214                                                                                                                                    Page 33 of 33


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Melexis:
 MLX90314LDF-BAA-000-TU MLX90314LDF-BAA-000-RE MLX90314LDF-BAA-000-SP
