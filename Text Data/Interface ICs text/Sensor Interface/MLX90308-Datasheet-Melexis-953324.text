MLX90308
Programmable Sensor Interface
1. Features and Benefits                                    2. Application Examples
        Microprocessor-controlled signal                        Pressure transducers
         conditioning for bridge-type sensors                    Accelerometers
        Suited for low-cost sensors: reduction of               Temperature sensor assemblies
         non-linearity by programmable
         coefficients                                            Linear position sensors
        External or internal temperature sensor
         for compensating temperature errors
        Versatile output signal ranges: 4, 5, 10, or
         11VDC; 4 to 20 mA loop
        Mass calibration easy with 2400 or 9600
         baud UART
        Power supply from 6 to 35VDC
3. Ordering information
        Product Code           Temperature         Package Code      Option Code        Packing Form
                                  Code                                                      Code
      MLX90308              L                    DF               DAA-000             RE
      MLX90308              L                    DF               DAA-000             TU
Legend:
Temperature Code:        L for Temperature Range -40°C to 150°C
Package Code:            DF for SOIC300Mil
Packing Form:            RE for Reel, TU for Tube
Ordering example:        MLX90308LDF-DAA-000-RE
  REVISION 008 – DECEMBER 2016                                                                   Page 1 of 34
  3901090308


MLX90308
Programmable Sensor Interface
4. Functional Diagram
  REVISION 008 – DECEMBER 2016 Page 2 of 34
  3901090308


MLX90308
Programmable Sensor Interface
5. General Description
The MLX90308 is a dedicated microcontroller which performs signal conditioning for sensors wired in bridge or
differential configurations. Sensors that can be used include thermistors, strain gauges, load cells, pressure
sensors, accelerometers, etc. The signal conditioning includes gain adjustment, offset control, high order
temperature and linearity compensation. Compensation values are stored in EEPROM and are re-
programmable. Programming is accomplished by using a PC, with an interface circuit (level shifting and glue
logic), and provided software.
The application circuits can provide an output of an absolute voltage, relative voltage, or current. The output can
be range limited with defined outputs when the signal is beyond the programmed limits. Other features include
alarm outputs and level steering. The robust electrical design allows the MLX90308 to be used where most
signal conditioning and sensor interface circuits cannot be used. Voltage regulation control is provided for
absolute voltage and current modes (external FET required).
The standard package is a plastic SO16W. The device is static-sensitive and requires ESD precautions.
  REVISION 008 – DECEMBER 2016                                                                         Page 3 of 34
  3901090308


MLX90308
Programmable Sensor Interface
Contents
1. Features and Benefits.............................................................................................................................1
2. Application Examples .............................................................................................................................1
3. Ordering information .............................................................................................................................1
4. Functional Diagram ................................................................................................................................2
5. General Description................................................................................................................................3
6. Electrical Specifications .............................................................................................................................5
7. Unique Features .....................................................................................................................................9
8. Digital Features.....................................................................................................................................12
9. Different Modes ...................................................................................................................................13
10. Communications ................................................................................................................................18
11. Prototyping ........................................................................................................................................26
12. Typical 90308 Applications ...................................................................................................................27
13. Standard information regarding manufacturability of Melexis products with different
   soldering processes .............................................................................................................................33
14. Contact ...............................................................................................................................................34
15. Disclaimer...........................................................................................................................................34
  REVISION 008 – DECEMBER 2016                                                                                                    Page 4 of 34
  3901090308


MLX90308
Programmable Sensor Interface
6. Electrical Specifications
  DC operating parameters: TA = -40 to 140oC, VDD1 = 6 to 35VDC (unless otherwise specified).
  Parameter                   Symbol Test Conditions                Min     Typ     Max Units
  Regulator & Consumption
  Input voltage range         VIN     VDD1 (Regulator connected)        6             35 V
  Supply current              IDD     @ TA = 100ºC Current Mode               2.1          mA
  Supply current              IDD     @ TA = 100ºC Voltage Mode                      5.0   mA
  Regulated supply voltage VREG                                        4.5   4.75    5.2   V
  Regulated voltage                                                          -600          uV / ºC
  temperature
  coefficient
  Supply rejection ratio      PSRR    VDD1 > 6V                        90                  dB
  Instrumentation Amplifier
  Differential input range    VBP-VBN IINV = 0                       -11.0           32.0 mV/V(Vdd)
  Differential input range    VBP-VBN IINV = 1                       -32.0           11.0 mV/V(Vdd)
  Common mode input range             1/2(VBP+VBN)                    38.0           65.0 %VDD
  Pin leakage current                 Pins VBP & VBN to GND, VDD =                   8.0   nA
  Common mode rejection Ratio CMRR                                     60                  dB
  Hardware gain                                                        18             22   V/V
  Coarse offset control range           CSOF[1:0] = 00               -15.3          -13.9 mV/V
                                        CSOF[1:0] = 01                -5.1           -3.8 mV/V
                                        CSOF[1:0] = 10                 3.8           5.1   mV/V
                                        CSOF[1:0] = 11                13.9           15.3 mV/V
  Fixed offset control range            High                           6.0           8.0 mV/V
                                        Low                           -7.0           -5.0  mV/V
  IA chopper frequency                                                       300           kHz
  Gain Stage
  Course gain                         CSGN = 000                       3.0           3.3   V/V
  (Fixed Gain = 1023)                 CSGN = 001                       4.9           5.4   V/V
  * CSGN = 100 to 111:                CSGN = 010                       8.0           8.8   V/V
  voltage mode only, not
  applicable to current mode          CSGN = 011                      12.8           14.1 V/V
   Output > 6.5V; MSB = 1
  Output < 6.5V; MSB = 0              CSGN = 100*                     7.9            8.7   V/V
                                      CSGN = 101*                     12.7           14.0 V/V
  REVISION 008 – DECEMBER 2016                                                             Page 5 of 34
  3901090308


MLX90308
Programmable Sensor Interface
  Parameter                                  Test Conditions            Min   Typ  Max   Units
  Coarse gain                                CSGN = 110*                20.4       23.0  V/V
                                             CSGN = 111*                33.1       36.6  V/V
  Fixed gain control range                                              0.480      0.970 V/V
  Digital Mode & Current Mode Coarse Gain Stage
  Course Gain                                CSGN = 00                  1.05       1.17  V/V
                                             CSGN = 01                  1.71       1.89  V/V
                                             CSGN = 10                  2.77       3.06  V/V
                                             CSGN = 11                  4.48       4.95  V/V
  Voltage Mode Output Stage ( See Voltage Mode)
  Output voltage span                        CSGN[2:2] = 0              4.5        6.5   V
                                             Gain                       2.74       3.04  V/V
                                             CSGN[2:2] = 1              6.5        11    V
                                             Gain                       7.24       7.86  V/V
  Minimum output voltage                                                           -0.2  V
  Output source current                                                 2.0              mA
  Output sink current                        @ 0V output voltage        20               uA
  Output resistance                          Over complete output range            25    Ohms
  Digital mode output span                   CSGN[2:2] = 0              6.5              V
                                             CSGN[2:2] = 1              11.0             V
  Digital mode step size                     VDD = 5V, CSGN[2:2]=0            6.5        mV
                                             VDD = 5V, CSGN[2:2]=1            11.0       mV
  Capacitive load VMO pin                                                     10         nF
  Current Mode Output Stage
  Fixed gain                                 RSENSE = 24 ohm            8.4        9.3   mA/V
  Output current CMO pin                     Current mode                     27         mA
  Current sense resistor                                                      24         Ohms
  Digital mode current output span           VDD = 5V                   23               mA
  Digital mode current step Size             VDD = 5V,RSENSE=24Ω              30         uA
  Signal Path ( General)
  Overall gain                               Voltage mode               28         600   V/V
                                             Current mode = 24Ω         81         750   mA/V
  Overall non-linearity                                                 -0.25      0.25  %
  Ratiometry Error (4.75V – 5.25V)           Overall Gain < 250V/V      -0.5       0.5   %
                                             Overall Gain > 250V/V      -1.3       +1.3  %
  REVISION 008 – DECEMBER 2016                                                                 Page 6 of 34
  3901090308


MLX90308
Programmable Sensor Interface
  Parameter                                Test Conditions                 Min     Min    Max    Units
  Bandwidth (-3dB)                         39 nF connected from FLT to GND 2.8     3.5    4.2    KHz
  Noise, VDD = 5V, CFLT=39nF, CL=10nF, RL =5KΩ, Analog Mode                               7.1    mVRMS
  Temperature Sensor & - Amplifier
  Temperature sensor sensitivity                                                   390           uV/ºC
  Temperature sensor output voltage                                        70             380    mV
 Temperature Sensor & Amplifier (continued).
  Input voltage range TMP pin              GNTP[1,0] = 00                    207            517 mV
  @ VDD = 5.0V                             GNTP[1,0] = 01                    145            367 mV
                                           GNTP[1,0] = 10                    101            263 mV
                                           GNTP[1,0] = 11                    71             186 mV
 DAC
  Resolution                                                                         10          Bit
  Monotonicity                                                             Guaranteed By Design
  Ratiometric output range (DAC output)                                        1             75  % VDD
  Offset Error                                                                       10          LSB
  Differential non-linearly                                                                   1  LSB
  Integral non-linearity                                                                      2  LSB
 ADC
  Resolution                                                                         10          Bit
  Monotonicity                                                             Guaranteed by design
  Ratiometric input range                                                      1             75  % VDD
  Offset error                                                                       10          LSB
  Differential non-linearly                                                                   1  LSB
  Integral non-linearity                                                                      2  LSB
 On-Chip RC Oscillator and Clock
  Untrimmed RC                                                               40             250 kHz
  oscillator frequency
  Trimmed RC oscillator frequency                                           86.9    87.8    88.7 kHz
  (Measured at TMP pin with TSTB pin pulled low after power up)
  Frequency temperature coefficiency                                                 26          Hz/ºC
  Clock Stability with temperature compensation over full temperature         -3             +3  %
  range
  Ratio of f (microcontroller main         TURBO = 0                                  7
  clock and (RC oscillator)
                                           TURBO = 1                                 28
  REVISION 008 – DECEMBER 2016                                                                   Page 7 of 34
  3901090308


MLX90308
Programmable Sensor Interface
  Parameter                   Symbol   Test Conditions           Min     Typ    Max     Units
 Input & Output Pins (I01 & I02)
  Digital input levels               Low                           0.5                  V
                                     High                                       VDD-0.5
  Output Levels                      @ output current = 5mA low  VDD-0.4          0.4 V
                                     @ output current = 5mA high            VDD
 TSTB Pin
  Input levels                       Low                           0.5                  V
                                     High                                       VDD-0.5
  Pull-up Resistor                                                          66          kOhms
 FLT Pin
  Output resistance                                                       1.24          kOhms
  Output voltage range               VDD = 5V                    0.05           3.6     V
 OFC Pin
   Output voltage range              VDD = 5V                    0.05           3.75    V
   Load capacitor                                                               20      Pf
  UART & COMS Pin
  UART baud rate                     TURBO = 0                            2400          baud
                                     TURBO = 1                           9600           baud
  COMS pin input levels              Low                         0.3*VDD                 V
                                     High                                       0.7*VDD V
  COMS Pin Output Resistance         Low                                  100            Ohms
                                     High                                 100            kOhms
  REVISION 008 – DECEMBER 2016                                                          Page 8 of 34
  3901090308


MLX90308
Programmable Sensor Interface
7. Unique Features
                                                          Table 2. Absolute Maximum Ratings
  Customization
                                                           Supply voltage (ratiometric) VDD Max
  Melexis can customize the MLX90308 in both
  hardware and firmware for unique requirements.           Supply voltage (ratiometric) VDD Min
  The hardware design provides 64 bytes of RAM, 3                                                      4.5V
  kbytes of ROM, and 48 bytes of EEPROM for use by         Supply voltage (operating), VDD1 Max
  the firmware.
                                                           Reverse voltage protection                 -0.7V
  Special Information                                      Supply current, Current Mode, IDD         3.5mA
  The output of the sensor bridge is amplified via offset  Supply current, Voltage Mode, IDD         4.5mA
  and gain amplifiers and then converted to the correct
  output signal form in one of the output stages.          Output current, IVMO                        8mA
  The sensitivity and offset of the analog signal chain    Output current (short to VDD), ISCVMO     100mA
  are defined by numbers passed to the DAC interfaces
  from the microcontroller core (GN[9:0] and OF[9:0]).     Output current (short to VSS), ISCVMO       8mA
  The wide range of bridge offset and gain is              Output voltage, VVMO                       +11V
  accommodated by means of a 2-bit coarse
  adjustment DAC in the offset adjustment                  Power dissipation, PD                     71mW
  (CSOF[1:0]), and a similar one in the gain
  adjustment (CSGN[2:0]). The signal path can be           Operating temperature range, TA         -40 to +140°
  directed through the processor for digital processing.                                           -55 to +150°
  Two I/O pins are available for analog inputs or          Storage temperature range, TS
  digital outputs. These pins can be used for alarms on    Maximum junction temperature, TJ          150°C
  various points on the analog signal path and built-in
  or external temperature values.
  Programming and Setup
  The MLX90308 needs to have the compensation
  coefficients programmed for a particular bridge
  sensor to create the sensor system.
  Programming the EEPROM involves some
  minimal communications interface circuitry,
  Melexis’ setup software, and a PC. The
  communications interface circuitry is available
  in a development board. This circuitry
  communicates with the PC via a standard RS-
  232 serial communications port.
  Cross Reference
  There are no known devices which the MLX 90308
  can replace.
  ESD Precautions
  Observe standard ESD control procedures for CMOS
  semiconductors.
  REVISION 008 – DECEMBER 2016                                                                   Page 9 of 34
  3901090308


MLX90308
Programmable Sensor Interface
   Table 3. Pin Description
   Pin   Signal         Description
         Name
   1,2   I/O1, 2        Bi-directional I/O. Can also be used as input to A/D converter. I/O can be
                        controlled by serial communications or by firmware as alarm inputs or
                        level out. (unconnected when not used)
   3     TSTB           Test pin for Melexis production testing. (in normal application connected to
                        VDD)
   4     FLT            Filter pin; allows for connection of a capacitor to the internal analog path.
   5     OFC            Offset control output. Provides access to the internal programmed offset
                        control voltage for use with external circuitry. (unconnected when not used)
   6,7   VBN,VBP        Bridge inputs, negative and positive.
   8     TMP            Temperature sensor input. An external temperature sensor can be used in
                        conjunction with the internal one. The external sensor can provide
                        a temperature reading at the location of the bridge sensor.
   9     VDD            Regulated supply voltage. Used for internal analog circuitry to ensure accurate
                        and stable signal manipulation.
   10    FET            Regulator FET gate control. For generating a stable supply for the bridge
                        sensor and internal analog circuitry (generates regulated voltage for VDD).
   11    VDD1           Unregulated supply voltage. Used for digital circuitry and to generate FET
                        output.
   12    VMO            Voltage mode output. Compensated sensor output voltage.
   13    CMO            Current mode output. Compensated sensor output for current mode
                        operation.
   14    CMN            Current mode negative rail. Current mode return path.
   15    GND            Power supply return.
   16    COMS           Serial communications pin. Bi-directional serial communication signal for
                        reading and writing to the EEPROM.
  Figure 2. Pinout (SO16W (LW) Package)
  REVISION 008 – DECEMBER 2016                                                                Page 10 of 34
  3901090308


MLX90308
Programmable Sensor Interface
  Analog Features                                        Power-On Reset
                                                         The Power-On Reset (POR) initializes the state of
  Supply Regulator                                       the digital part after power up. The reset circuitry is
                                                         completely internal. The chip is completely reset
  A bandgap-stabilized supply-regulator is on-chip       and fully operational 3.5 ms from the time the
  while the pass-transistor is external. The bridge-type supply crosses
  sensor is typically powered by the regulated supply    3.5 volts. The POR circuitry will issue another POR
  (typically                                             if the supply voltage goes below this threshold for
  4.75V). For ratiometric operation, the supply-         1.0 us.
  regulator can be disabled by connecting together the
  unregulated and regulated supply pins.
                                                         Test Mode
  Oscillator                                             For 100% testability, a "TEST" pin is provided. If the
                                                         pin is pulled low, then the monitor program is
  The MLX90308 contains a programmable on-chip RC        entered and the chip changes its functionality. In all
  oscillator. No external components are needed to set   other applications, this pin should be pulled
  the frequency (87.8 kHz +/-1%). The MCU-clock is       high or left floating (internal pull-up).
  generated by a PLL (phase locked loop tuned for 614
  kHz or 2.46 Mhz) which locks on the basic oscillator.
                                                         Temperature Sense
  The frequency of the internal clock is stabilized      The temperature measurement, TPO, is generated
  over the full temperature range, which is divided into from the external or internal temperature sensor.
  three regions, each region having a separate digital   This is converted to a 10-bit number for use in
  clock setting. All of the clock frequency              calculating the signal compensation factors. A 2-bit
  programming is done by Melexis during final test       coarse adjustment GNTP[1:0] is used for the
  of the component. The device uses the internal         temperature signal gain & offset adjustment.
  temperature sensor to determine which temperature
  range setting to use.
  A/D and D/A
  Conversions using only one DAC
  For saving chip area, the "Offset DAC" is multiplexed
  in various ways. Both "fine offset" and "digital mode"
  signals are stored on a capacitor. An ADC-loop is
  available by using a comparator and SAR.
  D/A
  Before changing to another capacitor, the DAC
  output should be settled to the new value. For
  example, MODSEL moves the analog multiplexer to
  the so- called "open state 0." At the same time, the
  10 bit mux selects OF[9:0] for the offset-DAC. After
  the DAC settling time, the analog multiplexer is
  moved to its final state and the DAC-output is
  stored on a capacitor.
  A/D
  The S/W-Signal MODSEL connects the SAR-output to
  the DAC and the DAC-output to the comparator. The
  SARegister is initialized by a rising edge of STC (S/W
  signal). At the end of the A/D conversion, the
  EOC flag is set to 1 and the controller can read the
  ADC values.
  REVISION 008 – DECEMBER 2016                                                                     Page 11 of 34
  3901090308


MLX90308
Programmable Sensor Interface
                                                          Timer
8. Digital Features                                       The clock of the timers TMI and TPI is taken directly
                                                          from the main oscillator. The timers are
                                                          never reloaded, so the next interrupt will take
 Microprocessor, LX11 Core, Interrupt                     place 2x oscillator pulses after the first interrupt.
 Controller,
                                                          Watch Dog
 Memories                                                 An internal watch dog will reset the whole circuit in
 The LX11 microcontroller core is described in its own    case of a software crash. If the watch dog counter
 datasheet. As an overview, this implementation of        is not reset at least once every 26 milliseconds (@
 the LX11 RISC core has following resources:              2.46
                                                          MHz main clock), the microcontroller and all the
 Two accumulators, one index and two                      peripherals will be reset.
 interrupt accumulators.
   15 - 8 bit I/O ports to internal resources.
   64 byte RAM.                                           Firmware
   4 kbytes ROM : 3 kbytes is available for the           The MLX90308 firmware performs the signal
 customer's application firmware. 1k is                   conditioning by either of two means: analog or
 reserved for test.                                       digital. The analog signal conditioning allows
   48 x 8 bit EEPROM.                                     separate offset and gain temperature coefficients
 Four interrupt sources, two UART                         for up to four temperature ranges. Digital mode
 interrupts and two timers.                               allows for all of the analog capabilities plus up to
                                                          five different gain values based on the input signal
                                                          level. Also available in both modes is the
 UART                                                     capability of range limiting and level s te e rin g .
 The serial link is a potentially full-duplex UART. It is
 receive-buffered, in that it can receive a second
 byte before a previously received byte has been read
                                                          Temperature Processing
 from the receiving register. However, if the first byte  In both analog and digital modes, the temperature
 is not read by the time the reception of the second      reading controls the temperature compensation.
 byte is completed, the first byte will be lost. The      This temperature reading is filtered as designated
 UART's baud rate depends on the RC-oscillator's          by the user. The filter adjusts the temperature
 frequency and the "TURBO"-bit (see output port).         reading by factoring in a portion of the previous
 Transmitted and received data has the following          value. This helps to minimize the effect of noise
 structure: start bit = 0,                                when using an external temperature sensor. The
 8 bits of data, stop bit = 1.                            filter equation is:
                                                          If measured_temp > Temp_f(n)
 Sending Data                                             then
 Writing a byte to port 1 automatically starts a          Temp_f(n+1) = Temp_f(n) +
 transmission sequence. The TX Interrupt is set when
 the STOP-bit of the byte is latched on the serial line.  [measured_temp - Temp_f(n)] / [2 n_factor].
                                                          If measured_temp < Temp_f(n),
 Receiving Data                                           then
 Reception is initialized by a 1 to 0 transition on the   Temp_f(n+1) = Temp_f(n) -
 serial line (i.e., a START-bit). The baud rate period
 (i.e., the duration of one bit) is divided into 16       [measured_temp - Temp_f(n)] [2 n_factor].
 phases. The first six and last seven phases of a bit     Temp_f(n+1) = new filtered temperature value.
 are not used. The decision on the bit-value is then the  Temp_f(n) = previous filtered temperature
 result of a majority vote of phase 7, 8 and 9 (i.e., the value. Measured_temp = Value from
 center of the bit).
                                                          temperature A to D. N_factor = Filter value set
 Spike synchronization is avoided by de-bouncing on       by the user (four
 the incoming data and a verification of the START-bit    LSB’s of byte 25 of EEPROM), range 0-6.
 value. The RX Interrupt is set when the stop bit is
 latched in the UART.                                     The filtered temperature value, Temp_f, is stored
                                                          in RAM bytes 58 and 59. The data is a 10 bit value,
                                                          left justified in a 16 bit field.
  REVISION 008 – DECEMBER 2016                                                                       Page 12 of 34
  3901090308


MLX90308
Programmable Sensor Interface
                                                     OFFSET
                                                     DAC_OFFSET (new value) ~ OF[9:0]+[OFTCi* dT]
9. Different Modes
                                                     OF[9:0] = Fixed Gain, bytes 4 and 17 in EEPROM.
                                                     OFTCi = Offset for a given
 Analog Mode                                             temperature segment I. OFTCiL
 The parameters OF and GN represent, respectively,       and OFTCiH in EEPROM table.
 offset correction and span control, while OFTCi and dT = Temp. change within the appropriate gap.
 GNTCi represent their temperature coefficients
 (thermal zero shift and thermal span shift). After  Calculation of the offset for a given temperature
 reset, the firmware continuously calculates the     seg- ment is performed the same way as for the
 offset and gain DAC settings as follows: The EEPROM gain.
 holds parameters GN, OF, OFTCi and GNTCi, where
 “i” is the gap number and can be 1 < i < 4. The
 transfer
 function is described below.
 Vout = FG * DAC_GAIN                 *  CSGN[2:0] *
 {Vin+DAC_OFFSET+CSOF}
                                                     [V/V]
 Iout = FG * DAC_GAIN * CSGN[1:0] *
 {Vin+DAC_OFFSET+CSOF} * 8.85mA/V
 FG = Hardware Gain (~20V/V). Part of the hardware
     design, and not changeable.
 CSGN = Course Gain, part of byte 2 in EEPROM.
 CSOF = Coarse Offset, part of byte 2 in EEPROM.
 GAIN
 DAC_GAIN (new value) ~ GN[9:0] + [GNTCi * dT]
 GN[9:0] = Fixed Gain, bytes 3 and 17 in EEPROM.
 GNTCi = Gain TC for a given temperature
     segment I. GNTCiL and GNTCiH in
     EEPROM table.
 dT = Temp. change within the appropriate gap.
 How to calculate gain in the first temp. gap?:
 DAC_GAIN = GN[9:0] - GNTC1 * (T1 – Temp_f1)
 How to calculate gain in the other temp. gaps?:
 2nd gap: DAC_GAIN = GN[9:0] + GNTC2 *
  (Temp_f2 – T1)
 3th gap: DAC_GAIN = DAC_GAIN2 + GNTC3 *
  (Temp_f3 – T2)
 4th gap: DAC_GAIN = DAC_GAIN3 + GNTC4 *
  (Temp_f4 – T3)
 Where:
 Temp_f = Filtered temp. (previously described).
 If GNTC1 > 2047 => DAC_GAIN
 If GNTC2,3,4 > 2047 => DAC_GAIN
  REVISION 008 – DECEMBER 2016                                                               Page 13 of 34
  3901090308


MLX90308
Programmable Sensor Interface
Digital Mode                                          P1
The MLX90308 firmware provides the capability of      PC1 = programmed coefficient first gap.
digitally processing the sensor signal in addition to
the analog processing. This capability allows for     Following gaps:
signal correction.
                                                      Gap i: Output = (Signal – Pi) * PCi + Poff_i
Signal                                                Where
Correction                                            Signal = input signal measurement;
                                                      Poff_i = Pressure ordinate (i = 2,3,4,5)
While in digital mode the firmware can perform        Pi = Pressure signal point (i = 2,3,4,5)
signal correction. This is an adjustment to the       PCi = programmed coefficient first gap (i = 2,3,4,5).
output level based on the input signal level.
Adjustment coefficients can be set for five           The PCi coefficients are coded on 12 bits: one bit for
different signal ranges. The output is obtained by    the sign, one for the unity, and the rest for the
the following formula:                                decimals. The Pi are coded on 10 bits (0-3FFh) in
                                                      high-low order.
1st gap: Output = (Signal ) * PC1 +
Poff                                                  PNB_TNB: contains the number of signal points,
                                                      coded on the four MSB’s. The four LSB’s are reserved
Whe                                                   for the number of temperature points. See Table 4
re:                                                   and Table 5.
Signal      =     input     signal
measurement;
Poff = Pressure ordinate =
  REVISION 008 – DECEMBER 2016                                                                   Page 14 of 34
  3901090308


MLX90308
Programmable Sensor Interface
 Compensation Trade-Offs                                     Table 5. PNB_TNB Bit Definition;
 A compromise must be made between temperature                       Temperature Gaps
 compensation and pressure correction. The EEPROM
 space where the signal coefficients are stored is        # of Temperature Gaps   4 LSB of PNB_TNB
 shared with the temperature coefficients, with the
 result that an EEPROM byte can be used either for a             Fixed (1)
 temperature coefficient or for a signal coefficient, but
 not both. Table 6 presents the possibilities among the           2
 maximum number of temperature gaps and the
 maximum number of signal gaps.                                   3
                                                                  4                   11 (B hex)
        Table 4. PNB_TNB Bit Definition;                              Table 6. Temperature
                   Pressure Gaps                                      & Signal Limitations
  # of Pressure Gaps     4MSB of PNB_TNB Value                temperature
          Fixed                   15 (F hex)                             and
                                                                                        5
            1                     14 (E hex)
            2                     12 (C hex)                      2                     3
            3                     10 (A hex)
                                                                  3                     2
            4                         8
            5                         6                           4
  REVISION 008 – DECEMBER 2016                                                              Page 15 of 34
  3901090308


MLX90308
Programmable Sensor Interface
                                                           Figure 4. Signal
                                                               Linearity
                                                              Correction
                                                 Output
                                                                                                 MLX90308
                                                                                                 PC5
                                                                                      PC4
                                                                           PC3
                                Output (units)
                                                                PC2
                                                     PC1
                                                 0         P2         P3         P4         P5
 REVISION 008 – DECEMBER 2016                                                                          Page 16 of 34
 3901090308


MLX90308
Programmable Sensor Interface
  REVISION 008 – DECEMBER 2016 Page 17 of 34
  3901090308


MLX90308
Programmable Sensor Interface
  Level Steering                                           10. Communications
  The level steering option allows configuration of the
  IO pins as outputs to indicate the relative level of a   The MLX90308 firmware transfers a complete byte
  selected signal. See Figure 7. The levels at which the   of
  two outputs change state are programmed by               data into and from the memory based on a simple
  the user. The programmed levels are set as eight bit     command structure. The commands allow data to be
  numbers and compared to the upper eight bits of the      read and written to and from the EEPROM and read
  digitized signal. This function utilizes the same        from the RAM. RAM data that can be read
  resources as the alarm function. The two functions       includes the current digitized temperature and
  (level steering and alarm) cannot be used                digitized GNO. The commands are described below.
  simultaneously. Four bytes in the EEPROM command         Melexis provides setup software for programming the
  this option. The first byte is used to select the        MLX90308.
  input, while the last three comprise the transition
  levels. The control byte for the level steering is the   Table 8. Level Steering Bit Definitions
  same as for the alarm. The four MSB’s hold the code
  for the selected input. The control byte has several
  possibilities as designated by the MUX settings (See
  Table 8)                                                                                   MUX Value
   Table 9. Mode Byte Bit Definition
    Bit     Function                                   Remarks
   7      1= EEPROM Checksum test active             EEPROM Checksum test. Checksum test failure will
          0= EEPROM Checksum test inactive           force the output to the value programmed in bytes
                                                     40 and 41 of the EEPROM (See Table 10).
   6      0 = Analog Mode                            Digital mode must be activated when VMO and CMO
          1 = Digital Mode                           both active.
   5      0 = Alarm function inactive                Alarm functions are like “limiting functions”:
          1 = Alarm function active                   If defined ADC INPUT is below low alarm trigger,
                                                         then DIGMOD becomes active with alarm low
                                                         output).
                                                      If defined ADC INPUT is above high alarm trigger,
                                                         then DIGMOD becomes active with alarm high
                                                         output.
   4      0 = IO1/IO2 are not active outputs         Note:  Deactivated
                                                     Depending           if the level
                                                                  on the sampled      steering
                                                                                   input,      mode
                                                                                          IO1/IO2 willis be
                                                                                                         active
                                                                                                            a
          1 = level steering: IO1/IO2 are active     two bit digital output. If IO1/IO2 are not active
          outputs                                    outputs, then they will be analog inputs.
   3      0 = Turbo inactive
          1 = Turbo active
   2      0 = VMO inactive
          1 = VMO active
   1      0 = Internal temperature sensor active
          1 = External temperature sensor
          active
   0      0 = CMO inactive                           CMO has fixed digital value (EEPROM byte - see
          1 = CMO active                             below) if both VMO and CMO are active. To activate
                                                     this value, the digital mode must be activated.
  REVISION 008 – DECEMBER 2016                                                                    Page 18 of 34
  3901090308


MLX90308
Programmable Sensor Interface
  UART Commands
  The commands can be divided into three parts: (1)
                                                             Clock Temperature Stabilization
  downloading of data from the ASIC, (2) uploading of        To provide a stable clock frequency from the internal
  data to the ASIC and (3) the reset command.                clock over the entire operating temperature range,
  All the commands have the same identification bits.        three separate clock adjust values are used. Shifts in
  The two MSB’s of the sent byte indicate the                operating frequency over temperature do not effect
  command while the last six MSB’s designate                 the performance but do, however, cause the
  the desired address. The commands are coded as             communications baud rate to change.
  followed:
   11 to read a RAM byte.                                    The firmware monitors the internal temperature
   10 to read an EEPROM byte.                                sensor to determine which of three temperature
   01 to write in the EEPROM.                                ranges the device currently is in. Each temperature
   00 to write in the                                        range has a factory set clock adjust value, ClkTC1,
   RAM.                                                      ClkTC2, and ClkTC3. The temperature ranges are also
  The addresses can include 0-63 for the RAM, 0-47 for       factory set. The Ctemp1 and Ctemp2 values
  the EEPROM, and 63 for the EEPROM, RESET                   differentiate the three ranges. In order for the
  Command (read).                                            temperature A to D value to be scaled consistently
                                                             with what was used during factory programming,
                                                             the CLKgntp (temperature amplifier gain) valued is
  Downloading Command                                        stored. The Cadj value stored in byte 1 of the
  With one byte, data can be downloaded from                 EEPROM is used to control the internal clock
  the ASIC. The ASIC will automatically send the value       frequency while the chip boots.
  of the desired byte.
                                                             Unused Bytes
  Uploading Command                                          There are eight unused bytes in the EEPROM address
  Writing to the RAM or EEPROM involves a simple             map. These bytes can be used by the user to store
  handshaking protocol in which each byte                    information such as a serial number, assembly date
  transmitted is acknowledged by the firmware. The           code, production line, etc. Melexis doesn’t
  first byte transmitted to the firmware includes            guarantee that these bytes will be available to the
  both command and address. The firmware                     user in future revisions of the firmware.
  acknowledges receipt of the command and address
  byte by echoing the same information back to the           EEPROM Checksum
  transmitter. This “echo” also indicates that the
  firmware is ready to receive the byte of data to be        A checksum test is used to ensure the contents of the
  stored in RAM or EEPROM. Next, the byte of value           EEPROM. The eight bit sum of all of the EEPROM
  to be stored is transmitted and, if successfully           addresses should have a remainder of 0FFh when the
  received and stored by the firmware, is                    checksum test is enabled (mode byte). Byte 47 is
  acknowledged by a “data received signal,” which is         used to make the sum remainder totals 0FFh. If
  two bytes of value BCh. If the “data received signal”      the checksum test fails, the output will be driven to a
  is not observed, it may be assumed that no value           user defined value, Faultval. When the checksum test
  has been stored in RAM or EEPROM.                          is enabled, the checksum is verified at initialization of
                                                             RAM after a reset.
  Reset Command
  Reading the address 63 of the EEPROM resets the
                                                             RAM Data
  ASIC and generates a received receipt indication.          All the coefficients (pressure, temperature) are
  Immediately before reset, the ASIC sends a value of        compacted in a manner similar to that used for the
  BCh to the UART, indicating that the reset has been        EEPROM. They are stored on 12 bits (instead of
  received.                                                  keeping 16 bits for each coefficient). All the
                                                             measurements are stored on 16 bits. The user must
                                                             have access to the RAM and the EEPROM, while
  EEPROM Data                                                interrupt reading of the serial port. Therefore, bytes
  All user-settable variables are stored in the EEPROM       must be kept available for the return address, the A-
  within the MLX90308. The EEPROM is always re-              accu and the B-accu, when an interrupt occurs. The
  programmable. Changes to data in the EEPROM do             RAM keeps the same structure in the both modes.
  not take effect until the device is reset via a soft reset
  or power cycle. 12 bit variables are stored on 1.5
  bytes. The 4 MSB’s are stored in a separate byte and
  shared with the four MSB’s of another 12-bit variable.
  REVISION 008 – DECEMBER 2016                                                                         Page 19 of 34
  3901090308


MLX90308
Programmable Sensor Interface
  Table 10. Examples of Fixed Point                 Data Range
  Signed Numbers                                    Various data are arranged as follows:
                                                      Temperature points: 10 bits, 0-03FF in high-
                                                     low order.
  0            0000h           +0.00                  Pressure points: 10 bits, 0-03FF in high-low
                                                     order.
  1023         3FFh            +0.9990234
                                                      GN1: 10 bits, 0-03FF in high-low order.
  1024         400h            +1.000
  2047         7FFh            +1.9990234             OF1: 10 bits, 0-03FF in high-low order.
  2048         800h
                                                      GNTCi: signed 12 bits (with MSB for the sign),
  3071                                               [-1.9990234, +1.9990234].
  3072         0C00h                                  OFTCi: signed 12 bits (with MSB for the sign),
                                                     [-1.9990234, +1.9990234].
  4095         0FFFh
                                                      Pci: signed 12 bits (with MSB for the sign),
                                                     [-1.9990234, +1.9990234]
                                                    DIGMO: 10 bits, 0-03FF in high-low order
                                                     (See Table 13 for examples of fixed point
                                                     signed numbers.)
  Table 11. EEPROM Byte Definitions
  Byte        Designation             Note
  0           MODE byte               Contents described in Table 9.
  1           Cadj                    Controls system clock during boot.
  2           Coarse Control          Contents described in Table 12.
  3           GN1L                    The eight LSB's of the Fixed Gain, GN[7:0].
  4           OF1L                    The eight LSB's of Fixed Offset OF[7:0].
  5           GNTC1L                  The eight LSB's of the first gain TC GNTC1[7:0].
  6           OFTC1L                  The eight LSB's of the first offset TC OFTC1[7:0].
  7           TR1L                    The eight LSB's of the first temperature point,
              PC5L                    T1[7:0]. The eight LSB's of Pressure Coefficient 5
  8           GNTC2L                  PC5[7:0].
                                      The eight LSB's of the second gain TC GNTC2[7:0].
              P5L                     The eight LSB's of Pressure Point 5 P5[7:0].
  9           OFTC2L                  The eight LSB's of the second offset TC OFTC2[7:0].
              PC4L                    The eight LSB's of Pressure Coefficient 4 PC4[7:0].
  10          TR2L                    The eight LSB's of the second temperature point T2[7:0].
              P4L                     The eight LSB's of Pressure Point 4 (or Signature) P4[7:0].
  11          GNTC3L                  The eight LSB's of the third gain TC GNTC3[7:0].
              PC3L                    The eight LSB's of Pressure Coefficient 3 (or Signature) PC3
                                      [8:0].
  REVISION 008 – DECEMBER 2016                                                                 Page 20 of 34
  3901090308


MLX90308
Programmable Sensor Interface
  Table 11. EEPROM Byte Definitions (continued)
  Byte      Designation                 Note
  12        OFTC3L or                   The eight LSB's of the third offset TC OFTC3[7:0].
            P3L                         The eight LSB's of Pressure Point 2 (or Signature) P2[7:0].
  13        TR3L or                     The eight LSB's of the third temperature point
            PC2L                        T3[7:0]. The eight LSB's of Pressure Coefficient 2
                                        PC2[7:0].
  14        GNTC4L or                   The eight LSB's of the fourth gain TC GNTC4[7:0].
            P2L                         The eight LSB's of Pressure Point 2 P2[7:0].
  15        OFTC4L or                   The eight LSB's of the fourth offset TC OFTC4.
            PC1L                        The eight LSB's of Pressure Coefficient 1 PC1
  16        PoffL                       The eight LSB's of Pressure (output signal) Ordinate Poff[7:0].
            Upper        Lower          Upper four bits.                 Lower four bits
            Four         Four
            Bits         Bits
  17        GN1[9:8]      OF1[9:8]      Two MSB's of fixed gain          Two MSB's of fixed offset
                                        GN[9:8].                         OF[9:8]
  18        GNTC1[11:8]   OFTC1[11:8]   Four MSB's of first gain TC       Four MSB's of the first offset
                                        GNTC1[11:8].                      TC OFTC1[11:8].
  19        TR1[9:8]      GNTC2[11:8]   Two MSB's, first temperature      Four MSB's, second gain
                                        point T1[9:8] or                  TC GNTC2[11:8] or
            PC5[11:8]     P5[9:8]       Four MSB's, Pressure              TC GNTC2[11:8] or
                                        Coefficient 5 PC5[11:8].          Two MSB's Pressure Point 5
                                                                          P5[9:8].
  20        OFTC2[11:8]   TR2[9:8]      Four MSB's second offset          Two MSB's second
                                        TC OFTC2[11:8] or                 temperature point T2[9:8] or
            PC4[11:8]     P4[9:8]       Four MSB's Pressure                Two MSB's Pressure Point 4
                                        Coefficient 4 PC4[11:8].           P4[9:8].
  21        GNTC3[11:8]   OFTC3[11:8]   Four MSB's third gain TC          Four MSB's third offset
                                        GNTC3[11:8] or                    TC OFTC3[11:8] or
            PC3[11:8]      P3[9:8]      Four MSB's Pressure                Two MSB's Pressure Point 3
                                        Coefficient 3 PC3[11:8]).          P3[9:8].
  22        TR3[9:8]        GNTC4[11:8] Two MSB's third                    Four MSB's fourth gain TC
                                        temperature point t3[9:8] or       GNTC4[11:8] or
            PC2[9:8]        P2[9:8]     Four MSB's Pressure                Two MSB's Pressure
                                        Coefficient 2 PC2[11:8].            Point 2 P2[9:8].
  23        OFTC4[11:8]     Poff[9:8]   Four MSB's fourth offset TC        Two MSB's Pressure
                                        ordinate
                                        OFTC4[11:8] or                      Poff[9:8].
            PC1[11:8]                   Four MSB's Pressure
                                        Coefficient 1 PC1[11:8].
  REVISION 008 – DECEMBER 2016                                                                Page 21 of 34
  3901090308


MLX90308
Programmable Sensor Interface
  Byte        Designation           Note
  24          PNB_TNB               Number of temperature and pressure gaps. See Tables 4, 5,
                                    and 6, and Figures 3 and 4.
  25          n_factor              Temperature filter coefficient, four LSB's. Four MSB's must
                                    all be zero.
  26          Not used              This byte is not used.
  27          ALARM low trigger     Value below which ALARM will go on.
              Level1 IO2/IO1        Value of first level ([IO2, IO1]= 00-01). See Figures 5 & 7.
  28          ALARM low output      Value of DIGMO during “ALARM low” condition.
              Level2 IO2/IO1        Value of second level ([IO2,IO1] = 01-10). See Figures 5 and
                                    7
  29          ALARM high trigger    Value above which ALARM will go on.
              Level3 IO2/IO1        Value of third level ([IO2,IO1]=10-11). See Figures 5 and 7.
  30          ALARM high out level  Value of DIGMO during “ALARM high” condition. See
                                    Figures 5 and 7.
  31          ALARM control byte    Three bits needed for choice of input for ALARM detection
                                    (TPO, IAO, GNO, VMO, IO1 or IO2).
              IO1/IO2 control byte  Two bits needed for choice of input for LEVEL-steering
                                    (TPO, IAO, GNO or VMO).
              Four LSB's are unused The above bits are multiplexed according to the mode. If
                                    both CMO and VMO are active, then alarm is not active.
  32          ClkTC1                Value of Cadj at low temperature (Don’t change; factory set).
  33          ClkTC2                Value of Cadj at mid temperature (Don’t change; factory set).
  34          ClkTC3                Value of Cadj at high temperature Don’t change; factory set).
  35          Ctemp1                First Cadj temperature point, eight MSB’s of the 10 bit
                                    internal temperature value (set at factory; do not
                                    change).
  36          Ctemp2                Second Cadj temperature point, eight MSB’s of the 10 bit
                                    internal temperature value (set at factory; do not
                                    change).
  37-38       Not used              These bytes are not used by the firmware and are available
                                    to the user.
  39          CLKgntp               Setting for temperature amplifier for clock
                                    temperature adjustment temperature reading (set at
                                    factory; do not change).
  40-41       Faultval              Value sent to output if checksum test fails is a 10 bit value.
  42-46       Not Used              These bytes are not used by the firmware and are available
                                    to the user.
  47          Checksum              EEPROM checksum; value needed to make all bytes add to
                                    0FFh. Must be set by user if checksum test is active.
  REVISION 008 – DECEMBER 2016                                                           Page 22 of 34
  3901090308


MLX90308
Programmable Sensor Interface
                                                              Table 12. Bit Definitions;
  Notes For Table 11                                          Coarse Control , Byte 2
  1. Not all the temperature and pressure coefficients
  must be used. When a coefficient is unused, the              Bit Symbol Function
  eight LSB’s and the four MSB’s are replaced by 0.
                                                                     IINV    Invert signal sign.
  2. The level steering and the alarm mode cannot be
  active simultaneously because the levels bytes are                GNTP1 Gain & offset of temperature
  shared with the two modes.                                                 amplifier.
  3. If the alarm mode and the level steering are                   GNTP0 GNTP = 0 to 3.
  both active, the level steering mode is dominant. The
  firmware will run with the level steering mode, by                CSOF 1 Coarse offset of signal amplifier.
  default.                                                          CSOF 0 CSOF = 0 to 3.
  4. If the DIGMO mode (VMO and CMO both active) is                 CSGN2 Coarse gain of signal amplifier.
  active, the alarm will be automatically disabled by                        CSGN = 0 to 7. If CSGN > 3,
  the firmware.                                                     CSGN1 output range = 0 to 10V. If
  5. At PNB_TNB address, the four MSB's correspond                  CSGN0 CSGN <= 3, output range = 0 to
  to the address of the last pressure point and the four                     5V.
  LSB’s to the address of the last temperature point.
  6. In the alarm_control variable, the selected
  input is stored on the three MSB’s.
  7. Pi and OFi are 10 bit values, right justified in 12
  bits fields.
  Table 13. RAM Byte Definitions
   Byte        Functions                    Remarks
   0           MODE byte                    See Table 9.
   1           GN1L                         Fixed gain number (8LSB).
   2           OF1L                         Fixed offset number (8LSB).
   3           GNTC1L                       First gain TC (8LSB).
   4           OFTC1L                       First offset TC (8LSB).
   5           TR1L                         First temperature point.
               PC5L                         Pressure Coefficient 5 (8LSB).
   6           GNTC2L                       Second gain TC. Pressure
               P5L                          point 5 (8LSB).
   7           OFTC2L                       Second offset TC.
               PC4L                         Pressure coefficient 4 (8LSB).
   8           TR2L                         Second temperature point.
               P4L                          Pressure Point 4 (or Signature) (8LSB).
   9           GNTC3L                       Third gain TC.
               PC3L                         Pressure Coefficient 3 (or Signature) (8LSB).
   10          OFTC3L                       Third offset TC.
               P3L                          Pressure Point 2 (or Signature) (8LSB).
  REVISION 008 – DECEMBER 2016                                                                   Page 23 of 34
  3901090308


MLX90308
Programmable Sensor Interface
 Table 13. RAM Byte                    (continued)
   Byte      Functions                   Remarks
     11      TR3L                        Third temperature point.
             PC2L                        Pressure Coefficient 2 (8LSB).
     12      GNTC4L                      Fourth gain TC.
             P2L                         Pressure Point 1 (8LSB).
     13      OFTC4L                      Fourth offset TC.
             PC1L                        Pressure Coefficient 1 (8LSB).
     14      DIGMOP1L                    Fixed pressure (8LSB).
     15      GN1[9:8]       OF1[9:8]     Two MSB's of fixed gain           Two MSB's of fixed offset
                                         GN[9:8].                          OF[9:8].
     16      GNTC1          OFTC1        Four MSB's of first gain TC       Four MSB's of the first
             [11:8]          [11:8]      GNTC1[11:8].                      offset TC OFTC1[11:8]
     17      TR1[9:8]       GNTC2        Two MSB's, first temperature      Four MSB's, second gain
                            [11:8]       point T1[9:8] or                  TC GNTC2[11:8] or
             PC5[11:8]     P5[9:8]       Four MSB's Pressure               Two MSB's, Pressure
                                         Coefficient 5 PC5[11:8].          Point 5 P5[9:8]
     18      OFTC2[11:8]     TR2[9:8]    Four MSB's, second offset TC      Two MSB's, second temp.
                                         OFTC2[11:8] or                    point T2[9:8] or
             PC4[11:8]        P4[9:8]
                                         Four MSB's, Pressure              Two MSB's, Pressure
                                         Coefficient 4 PC4[11:8].          Point 4 P4[9:8].
     19      GNTC3[11:8]   OFTC3         Four MSB's, Third Gain TC         Four MSB's Third Offset
             [11:8]                      GNTC3[11:8] or                    TC OFTC3[11:8] or
                                         Four MSB's, Pressure              Two MSB's Pressure
             PC3[11:8]         P3[9:8]   Coefficient 3 PC3[11:8]).         Point 3 P3[9:8]
     20      TR3[9:8]      GNTC4         Two MSB's, third temperature       Four MSB's, Fourth Gain
             [11:8]                      point t3[9:8] or                   TC GNTC4[11:8] or
                                         Four MSB's, Pressure               Two MSB's, Pressure
             PC2[9:8]       P2[9:8]      Coefficient 2 PC2[11:8].           Point 2 P2[9:8].
     21      OFTC4[11:8]   P1[9:8]       Four MSB's Fourth Offset TC        Two MSB's Pressure
                                         OFTC4[11:8] or                     Point 1 P1[9:8].
             PC1[11:8]                   Four MSB's Pressure
                                         Coefficient 1 PC1[11:8].
     22      PNB_TNB                     Same as EEPROM.
     23      N_Factor                    Temperature filter coefficient — 4 LSB’s, 4 MSB = 0
     24      Not Used
   25-26     GN                          Offset Ordinate of the current gap.
   27-28     OF                          Gain Ordinate of the current gap.
     29      Taddress                    4 bits for the max. temperature address of the current gap; 4
                                         bits for the min. temperature address of the current gap.
  REVISION 008 – DECEMBER 2016                                                               Page 24 of 34
  3901090308


MLX90308
Programmable Sensor Interface
    Byte      Functions                   Remarks
     30       ALARM control byte          Three bits needed for choice of input for ALARM detection
              IO1/IO2 control byte        (TPO, IAO, GNO, VMO, IO1 or IO2). Two bits needed for
                                          choice of input for LEVEL-steering (TPO, IAO, GNO or
                                          VMO). These bits are multiplexed according the mode. Note:
                                          if both CMO and VMO are active, then alarm is not active.
     31       ALARM low trigger level     Value below which ALARM will go on.
              IO1/IO2 level 1             Value of first level ([IO2,IO1]=00-01).
     32       ALARM low output level      Value of DIGMO during “ALARM low” condition.
              IO1/IO2 level 2             Value of second level ([IO2,IO1]=01-10).
     33       ALARM high trigger          Value above which ALARM will go on.
              level
                                          Value of third level ([IO2,IO1] = 10-11).
              IO1/IO2 level 3
     34       ALARM high output           Value of DIGMO during “ALARM high” condition.
              level
    35-36     A_16                        16 bits A Register.
    37-38     B_16                        16 bits B Register.
    39-42     RESULT_32                   32 bits result (for 16 bit multiplication).
    43-44     Tempo1                      Measured temperature, internal or external, and temporary
                                          variable 1.
     45       Tempo2                      Temporary variable 2.
    46-47     Signal_In                   Digitized signal value, analog and digital mode
     48       Coms_backup                 Address saved when command is send.
     49       P3_copy                     Port 3 setting copy.
     50       Adsav1                      Address saved at interrupt.
    51-52     Aaccsav                     A-Accumulators saved at interrupt.
     53       Baccsav                     B-Accumulators saved at interrupt.
    54-55     DAC_gain                    DAC gain (GN).
    56-57     DAC_offset                  DAC offset (OF).
    58-59     Temp_f                      Filtered temperature. This is a 10 bit number that is left
                                          justified in a 16 bit field.
    60-61     Signal_Out                  Digitized linearity corrected signal value. Digital mode only.
    62-63     Adsav2                      Address saved when call.
 Note: Because of space considerations, the measured temperature can’t be kept in the RAM at all times. If
 the measured temperature is to be available, the temperature filter variable, N_Factor, must be set to 6.
  REVISION 008 – DECEMBER 2016                                                                    Page 25 of 34
  3901090308


MLX90308
Programmable Sensor Interface
11. Prototyping
  Melexis offers an MLX90308 evaluation kit which
  contains an evaluation circuit board, serial interface
  cable, and software diskette. The circuit board
  provides the necessary circuitry for all three
  applications circuits shown on the next page. Also
  included in the circuit board is level shifting and glue
  logic necessary for RS-232 communications.
  The board has a socket with a single MLX90308
  installed, and direct access to the pins of the IC. The
  user can easily attach bridge sensor to the board
  for in-system evaluation. The serial interface cable
  connects the evaluation board directly to a PC’s serial
  port for in-system calibration.
  The software runs in the familiar Windows
  platform and allows for programming and evaluation
  of all compensation parameters within the EEPROM.
    Figure 8. MLX90308 Evaluation Kit with MLX Software
  REVISION 008 – DECEMBER 2016                             Page 26 of 34
  3901090308


MLX90308
Programmable Sensor Interface
12. Typical 90308 Applications
  Figure 9a. Absolute Voltage Mode
                                                                                Supply
                               5K
                                                          Automotiv     100 nF
                                  VDD FET  VDD1             e apps
                                  COMS
     100 nF
                                  VBP      VMO                                 Output
                                   VBN      FLT 39 nF 100 nF 10 nF
                                                                    10K
                                       GND
                                                                                Ground
  Figure 9b. Ratiometric Voltage Mode
                                                                               Supply
                               5K
                                   VDD     VDD1
                                  COMS
     100 nF
                                   VBP
                                           VMO                                 Output
                                   VBN
                                            FLT 39 nF        10 nF
                                                                    10K
                                   TMP GND
                                                                               Ground
  REVISION 008 – DECEMBER 2016                                                         Page 27 of 34
  3901090308


MLX90308
Programmable Sensor Interface
  Figure 9c. Current Mode
                                                                               Supply
                               5K
                                  VDD  FET VDD1
                                                              100 nF 100 nF
                                  COMS
                                           CMO
     100 nF
                                  VBP                                Depends on
                                                      75 Ohms          stability of
                                                                      the current
                                  VBN       FLT 39 nF                     loop
                                       GND CMN        24 Ohms
                                  TMP
                                                                               Ground
  REVISION 008 – DECEMBER 2016                                                        Page 28 of 34
  3901090308


MLX90308
Programmable Sensor Interface
  Figure 10. Application Example
                            Figure 10a. Programmable Oil Pressure Gauge
                                                                    Communications
                                                                          Signal Out
                                                                               GND
                                                                                  V+
                                                      Programmable Oil Pressure Gauge
                                                  This application example illustrates a fundamental
                                                application of the MLX90308 and a bridge type
                                                pressure sensor element. In this application, the
                                                 MLX90308 uses an external FET as a pass transistor to
                                              regulate the voltage to the sensor and the analog portion
                                                                                                        of
                                           the IC. This is known as Absolute Voltage Mode, where
                                                  voltage to the sensor and analog circuit is regulated
                                                                                           independent
                                 of the supply voltage. The MLX90308 can be operated in Ratiometric
                             Voltage Mode, in which the output (VMO) is tied to an A/D converter
                           sharing the same supply and ground reference. A third wiring option is
                   Current Mode, which allows the user a 4 to 20 milliampere current range to use as a
                   2-wire analog sensor.
               Figure 10b. Programmable Oil Pressure Gauge Electrical Connections
  REVISION 008 – DECEMBER 2016                                                              Page 29 of 34
  3901090308


MLX90308
Programmable Sensor Interface
 Figure 11. Error Compensation
 Figure 11a. Raw Sensor Output
 (measured between VPB and
 VBN)
                170
  Voltage (in                                    140oC
                                                  25oC
                                                 -40oC
                0
                      0%                        100%
                           Pressure
 Figure 11b. Conditioned Sensor
 Output
                4
  Voltage
                                                  140oC
                                                   25oC
                                                  -40oC
                1
                      0%                      100%
                           Pressure
 Figures 11a and 11b above illustrate the performance
 of an unconditioned sensor output and a conditioned
 sensor output versus stimulus (pressure) and
 temperature. It can be seen that Figure 11a has a
 range of only 170 mV (maximum range with a 5V
 supply) and has a non-linear response over a 0-100
 psi range. The sensitivity of the unconditioned output
 will also drift over temperature, as illustrated by the
 three slopes. The MLX90308 corrects these errors
 and amplifies the output to a more usable voltage
 range as shown in Figure 11b.
 REVISION 008 – DECEMBER 2016                              Page 30 of 34
 3901090308


MLX90308
Programmable Sensor Interface
   Table 14. Glossary of Terms                   RS-232 industry std. serial communications protocol
                                                 RX receive
A/D analog to digital conversion                 SAR successive approximation register
ADC analog to digital converter                  STC start A/D
ASCII American Standard Code for Information     conversion Tdiff
    Interchange                                  temperature difference
ASIC application specific integrated circuit     Text temperature,
CM current mode                                  external TMI timer
CMN current mode negative (supply                Interrupt
connection) CMO current mode output              TMP temperature
COMS communication, serial                       signal TPI temperature
CR          carriage                             interrupt Tref
return        CSGN                               temperature reference
coarse gain CSOF                                 TSTB test mode pin
coarse offset                                    TX transmit
CV current / voltage mode                        UART universal asynchronous receiver / transmitter
select bit DAC digital to analog                 VBN bridge, positive,
converter DACFnew filtered                       input VBP bridge,
DAC value, new DACFold                           negative, input VDD
filtered DAC value, old DARDIS                   supply voltage
DAC resistor disable                             VM voltage mode
                                                 VMGN voltage mode
dB decibel
                                                 gain VMO voltage
DOGMO digital mode
                                                 mode output WCB
EEPROM electrically erasable programmable
                                                 warn / cold boot WDC
  read only memory
                                                 watch dog counter
EOC end of conversion flag
bit ESD electrostatic
discharge ETMI timer
interrupt enable
ETPI enable temperature interrupt
FET field effect transistor
FG fixed gain
FLT filter pin
GNO gain and offset adjusted digitized signal
GNOF gain, offset
GNTP temperature gain / offset coarse adjustment
HS hardware / software limit
I/O input / output
IFIX fixed current output value
IINV input signal invert command bit
ILIM current limit
kHz kilohertz, 1000 Hz
LSB least significant bit
mA milliamperes, 0.001 amps
MODSEL mode select
ms millisecond, 0.001 second
MSB most significant bit
MUX multiplexer
mV millivolts, 0.001 Volts
nF nanofarads, 1 X 10-9 farads
OFC offset control
PC personal computer, IBM
clone pF picofarad, 1 X 10-12
farads
PLL phase locked loop
POR power on reset
RAM random access memory
RISC reduced instruction set computer
ROM read only memory
   REVISION 008 – DECEMBER 2016                                                             Page 31 of 34
   3901090308


MLX90308
Programmable Sensor Interface
 Figure 12. MLX90308 Physical Characteristics, DF Package
                                                                                    0.32
                                                                                    0.23
                                                7.60           10.65
                                                7.40           10.00
                                                                                           1.27
                                                                                           0.40
               0.51
               0.33                     1.27                             0o to
                                                 Notes:                   8o
                                                 1. All dimensions in millimeters.
                                10.50            2. Body dimensions do not include mold flash
                                10.10               or protrusion, which are not to exceed
                                                    0.15mm.
                                                            2.65
                                                            2.35
                                               0.010
                                                min.
 REVISION 008 – DECEMBER 2016                                                                     Page 32 of 34
 3901090308


MLX90308
Automotive Sensor Interface
13. Standard information regarding manufacturability of Melexis products
with different soldering processes
Our products are classified and qualified regarding soldering technology, solderability and moisture sensitivity
level according to following test methods:
Reflow Soldering SMD’s (Surface Mount Devices)
   IPC/JEDEC J-STD-020
    Moisture/Reflow Sensitivity Classification for Nonhermetic Solid State Surface Mount Devices
    (classification reflow profiles according to table 5-2)
   EIA/JEDEC JESD22-A113
    Preconditioning of Nonhermetic Surface Mount Devices Prior to Reliability Testing
    (reflow profiles according to table 2)
Wave Soldering SMD’s (Surface Mount Devices) and THD’s (Through Hole Devices)
   EN60749-20
    Resistance of plastic- encapsulated SMD’s to combined effect of moisture and soldering heat
   EIA/JEDEC JESD22-B106 and EN60749-15
    Resistance to soldering temperature for through-hole mounted devices
Iron Soldering THD’s (Through Hole Devices)
   EN60749-15
    Resistance to soldering temperature for through-hole mounted devices
Solderability SMD’s (Surface Mount Devices) and THD’s (Through Hole Devices)
   EIA/JEDEC JESD22-B102 and EN60749-21
    Solderability
For all soldering technologies deviating from above mentioned standard conditions (regarding peak temperature,
temperature gradient, temperature profile etc) additional classification and qualification tests have to be agreed
upon with Melexis.
The application of Wave Soldering for SMD’s is allowed only after consulting Melexis regarding assurance of
adhesive strength between device and board.
Melexis is contributing to global environmental conservation by promoting lead free solutions. For more
information on qualifications of RoHS compliant products (RoHS = European directive on the Restriction Of the
use of certain Hazardous Substances) please visit the quality page on our website:
http://www.melexis.com/quality.aspx
  REVISION 008 – DECEMBER 2016                                                                            Page 33 of 34
  3901090308


MLX90308
Automotive Sensor Interface
14. Contact
For the latest version of this document, go to our website at www.melexis.com.
For additional information, please contact our Direct Sales team and get help for your specific
needs:
Europe, Africa                  Telephone: +32 13 67 04 95
                                Email : sales_europe@melexis.com
Americas                        Telephone: +1 603 223 2362
                                Email : sales_usa@melexis.com
Asia                            Email : sales_asia@melexis.com
15. Disclaimer
The information furnished by Melexis herein (“Information”) is believed to be correct and accurate. Melexis disclaims (i) any and all liability in connection
with or arising out of the furnishing, performance or use of the technical data or use of the product(s) as described herein (“Product”) (ii) any and all liability,
including without limitation, special, consequential or incidental damages, and (iii) any and all warranties, express, statutory, implied, or by description,
including warranties of fitness for particular purpose, non-infringement and merchantability. No obligation or liability shall arise or flow out of Melexis’
rendering of technical or other services.
The Information is provided "as is” and Melexis reserves the right to change the Information at any time and without notice. Therefore, before placing orders
and/or prior to designing the Product into a system, users or any third party should obtain the latest version of the relevant information to verify that the
information being relied upon is current.
Users or any third party must further determine the suitability of the Product for its application, including the level of reliability required and determine
whether it is fit for a particular purpose.
The Information is proprietary and/or confidential information of Melexis and the use thereof or anything described by the Information does not grant,
explicitly or implicitly, to any party any patent rights, licenses, or any other intellectual property rights.
This document as well as the Product(s) may be subject to export control regulations. Please be aware that export might require a prior authorization from
competent authorities.
The Product(s) are intended for use in normal commercial applications. Unless otherwise agreed upon in writing, the Product(s) are not designed, authorized
or warranted to be suitable in applications requiring extended temperature range and/or unusual environmental requirements. High reliability applications,
such as medical life-support or life-sustaining equipment are specifically not recommended by Melexis.
The Product(s) may not be used for the following applications subject to export control regulations: the development, production, processing, operation,
maintenance, storage, recognition or proliferation of 1) chemical, biological or nuclear weapons, or for the development, production, maintenance or
storage of missiles for such weapons: 2) civil firearms, including spare parts or ammunition for such arms; 3) defense related products, or other material for
military use or for law enforcement; 4) any applications that, alone or in combination with other goods, substances or organisms could cause serious harm to
persons or goods and that can be used as a means of violence in an armed conflict or any similar violent situation.
The Products sold by Melexis are subject to the terms and conditions as specified in the Terms of Sale, which can be found
at https://www.melexis.com/en/legal/terms-and-conditions.
This document supersedes and replaces all prior information regarding the Product(s) and/or previous versions of this document.
Melexis NV © - No part of this document may be reproduced without the prior written consent of Melexis. (2016)
ISO/TS 16949 and ISO14001 Certified
   REVISION 008 – DECEMBER 2016                                                                                                                    Page 34 of 34
   3901090308


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Melexis:
 MLX90308LDF-DAA-000-SP MLX90308LDF-DAA-000-RE MLX90308LDF-DAA-000-TU
