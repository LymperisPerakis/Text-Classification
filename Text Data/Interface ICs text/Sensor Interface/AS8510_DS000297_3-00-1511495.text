AS8510
D a t a A cq u is i t io n D ev ic e f o r B a t t e r y S e n s o r s
1 General Description                                                                   Option for multiplexing either one differential input, or two single
                                                                                              ended inputs or the internal temperature sensor on one channel
The AS8510 is a virtually offset free, low noise, two channel                           Programmable current source for external temperature sensor
measurement device. It is tailored to accurately measure battery                              connectable to any of the inputs
current from mA range up to kA range in conjunction with a 100 µΩ
                                                                                        High precision and high stability 1.2V reference voltage source
shunt resistor in series with the battery rail. Through the second
measurement channel it enables capture of, either battery voltage                       Digital signal processing with filter options for both channels
synchronous with the current measurement, or, measure the analog
                                                                                        Four operating modes providing
output of an internal or external temperature sensor. Both channels
are matched and can either measure small signals up to ±160 mV                               - Continuous data acquisition (or)
versus ground, through programmable gain amplifier or larger                                 - Periodic single-shot acquisition, (or)
signals in the 0 to 1V range without the amplifier.                                          - Continuous acquisition on threshold crossing of programmed
                                                                                                current levels (or)
After analog to digital conversion and digital filtering, the resulting
16-bit digital words are accessible through 4-wire standard serial                           - A combination of the above
interface.The device includes a number of additional features                           On chip high-precision 4MHz RC oscillator or option for external
explained in the next section.                                                                clock
                                                                                        -40ºC to +125ºC ambient operation
2 Key Features                                                                          AEC - Q100 automotive qualified
 3.3V supply voltage                                                                  Internal chip ID for full traceability
 Two High resolution 16 bit Σ−Δ      A/D converters                                   SSOP-20 pin package
 Programmable sampling to enable data throughputs from less
      than 1Hz to 8kHz                                                                 3 Applications
 Zero Offset for both channels
                                                                                       The AS8510 is ideal for shunt based batteries sensor. For high-side
 Independent control of data rate on both channels                                   current sensing, the input signal may be conditioned using ams
 Precision, low noise, programmable gain amplifiers for both
                                                                                       device AS8525 before applying to this device.
      channels with gains 5, 25, 40, 100 to support wide dynamic
      ranges.
 Figure 1. AS8510 Block Diagram
                                              AVDD                                 REF                          DVDD
                                        Internal Temperature Sensor          Bandgap Reference                  Oscillators
                                                                Prog-Cur
                              ETR                                Source
                               ETS
                                             MUX and
                                                              PGA        16-bit Sigma-Delta ADC
                          VBAT_IN             Chopper                                                                        MEN
                       VBAT_GND
                                                                                                                             CHOP_CLK
                                                                    AS8510                                      FIR / MA
                                                                                                                             INT
                                                                                                                             CLK
                            RSHH
                                              Chopper         PGA        16-bit Sigma-Delta ADC
                             RSHL
                                                    Analog Common Mode                         Serial Interface
                                       AVSS                 VCM                    SCLK CS         SDI         SDO      DVSS
www.ams.com/AS8510                                                             Revision 3.8                                                              1 - 48


AS8510
Datasheet - C o n t e n t s
Contents
1 General Description ...................................................................................................................................................................... 1
2 Key Features................................................................................................................................................................................. 1
3 Applications................................................................................................................................................................................... 1
4 Pin Assignments ........................................................................................................................................................................... 4
     4.1 Pin Descriptions........................................................................................................................................................................................ 4
5 Absolute Maximum Ratings .......................................................................................................................................................... 6
6 Electrical Characteristics............................................................................................................................................................... 7
     6.1 Operating Conditions................................................................................................................................................................................ 7
     6.2 DC/AC Characteristics for Digital Inputs and Outputs .............................................................................................................................. 7
     6.3 Detailed System and Block Specifications ............................................................................................................................................... 9
            6.3.1 Electrical System Specifications .................................................................................................................................................. 9
     6.4 Current Measurement Ranges (across 100µOhm shunt resistor) ........................................................................................................... 9
            6.4.1 Differential Input Amplifier for Current Channel .......................................................................................................................... 10
            6.4.2 Differential Input Amplifier for Voltage Channel.......................................................................................................................... 11
            6.4.3 Sigma Delta Analog to Digital Converter .................................................................................................................................... 12
            6.4.4 Bandgap Reference Voltage....................................................................................................................................................... 12
            6.4.5 Internal (Programmable) Current Source for External Temperature Measurement ................................................................... 13
            6.4.6 CMREF Circuit (VCM) ................................................................................................................................................................ 14
            6.4.7 Internal AVDD Power-on Reset .................................................................................................................................................. 14
            6.4.8 Internal DVDD Power-on Reset.................................................................................................................................................. 14
            6.4.9 Low Speed Oscillator.................................................................................................................................................................. 14
            6.4.10 High Speed Oscillator ............................................................................................................................................................... 15
            6.4.11 External Clock........................................................................................................................................................................... 15
            6.4.12 Internal Temperature Sensor.................................................................................................................................................... 15
     6.5 System Specifications ............................................................................................................................................................................ 15
7 Detailed Description.................................................................................................................................................................... 18
     7.1 Current Measurement Channel .............................................................................................................................................................. 18
     7.2 Voltage/Temperature Measurement Channel ......................................................................................................................................... 18
     7.3 Digital Implementation of Measurement Path......................................................................................................................................... 19
     7.4 Modes of Operation ................................................................................................................................................................................ 19
            7.4.1     Normal Mode 1 (NOM1) ............................................................................................................................................................. 21
            7.4.2     Normal Mode 2 (NOM2) ............................................................................................................................................................. 21
            7.4.3     Standby Mode1 (SBM1) ............................................................................................................................................................. 22
            7.4.4     Standby Mode2 (SBM2) ............................................................................................................................................................. 23
     7.5 Reference-Voltage.................................................................................................................................................................................. 23
     7.6 Oscillators............................................................................................................................................................................................... 23
     7.7 Power-On Reset ..................................................................................................................................................................................... 23
     7.8 4-Wire Serial Port Interface .................................................................................................................................................................... 24
            7.8.1     SPI Frame................................................................................................................................................................................... 24
            7.8.2     Write Command.......................................................................................................................................................................... 25
            7.8.3     Read Command.......................................................................................................................................................................... 26
            7.8.4     Timing ......................................................................................................................................................................................... 27
            7.8.5     SPI Interface Timing ................................................................................................................................................................... 28
www.ams.com/AS8510                                                                                 Revision 3.8                                                                                                   2 - 48


AS8510
Datasheet - C o n t e n t s
     7.9 Control Register...................................................................................................................................................................................... 29
            7.9.1     Standby Mode - Power Consumption ......................................................................................................................................... 40
            7.9.2     Initialization Sequence at Power ON .......................................................................................................................................... 40
            7.9.3     Soft-reset of Device Using Bit D[7] of Reset Register 0x09........................................................................................................ 41
            7.9.4     Soft-reset of the Measurement Path Using Bit D[7] of Reset Register 0x09 .............................................................................. 42
            7.9.5      Reconfiguring Gain Setting of PGA ........................................................................................................................................... 42
            7.9.6     Configuring the Device During Normal Mode ............................................................................................................................. 43
     7.10 Low Side Current Measurement Application ........................................................................................................................................ 43
8 Package Drawings and Markings ............................................................................................................................................... 44
     8.1 Recommended PCB Footprint................................................................................................................................................................ 45
9 Ordering Information................................................................................................................................................................... 47
www.ams.com/AS8510                                                                          Revision 3.8                                                                                                   3 - 48


AS8510
Datasheet - P i n A s s i g n m e n t s
4 Pin Assignments
Figure 2. Pin Assignments (Top View)
                                                   RSHH    1                                    20      INT
                                                   RSHL    2                                    19      CLK
                                                    REF    3                                    18      SDI
                                                    VCM    4                                    17      MEN
                                                   AVDD    5
                                                                           AS8510               16      CHOP_CLK
                                                   AVSS    6                                    15      DVDD
                                                    ETR    7                                    14      DVSS
                                                    ETS    8                                    13      SDO
                                                 VBAT_IN   9                                    12      SCLK
                                               VBAT_GND    10                                   11      CS
4.1 Pin Descriptions
Table 1. Pin Descriptions
     Pin Number                          Pin Name                 Pin Type                                        Description
            1                              RSHH                                      Positive Differential input for current channel
                                                               Analog input
            2                              RSHL                                      Negative differential input for current channel
                                                                                     Internal reference voltage to sigma-delta ADC; connect 100nF to
            3                               REF
                                                                                     AVSS from this pin.
                                                              Analog output
                                                                                     Common Mode voltage to the internal measurement path;
            4                              VCM
                                                                                     connect 100nF to AVSS from this pin.
            5                              AVDD                                      +3.3V Analog Power-supply
                                                                Supply pad
            6                              AVSS                                      0V Power-supply analog
            7                               ETR
                                                                                     Voltage channel single ended input
            8                               ETS
                                                               Analog input
            9                            VBAT_IN                                     Battery voltage (high) input
          10                            VBAT_GND                                     Battery voltage (low) input
           11                               CS           Digital input with pull-up Chip select with an internal pull-up resistor (SPI Interface)
          12                               SCLK                 Digital input        Clock signal (SPI Interface)
          13                               SDO                 Digital output        Serial Data Input (SPI Interface)
www.ams.com/AS8510                                                          Revision 3.8                                                          4 - 48


AS8510
Datasheet - P i n A s s i g n m e n t s
Table 1. Pin Descriptions
     Pin Number                          Pin Name   Pin Type                                        Description
          14                               DVSS                        0V Digital Ground
                                                   Supply pad
          15                               DVDD                        +3.3V Digital Supply
                                                                       Chop Clock used in High side measurements to synchronize
                                                                       external chopper.
          16                            CHOP_CLK                       (As an example, when AS8525 is used to condition the input
                                                                       signal to the input range of AS8510, the chop clock is used by
                                                                       AS8525.)
                                                  Digital output
                                                                       Digital output issued during the Standby Mode (SBM) to signal
                                                                       the short duration of data sampling. This signal is useful in the
          17                               MEN                         case of a High Side Measurement application.
                                                                       (For example: This signal is used by AS8525 device to wake-up
                                                                       and enable the measurement path.)
          18                                SDI   Digital input        Data signal (SPI Interface)
                                                                       By default this pin is the internal clock output which can be used
                                                   Digital I/O         by a Microcontroller. The internal clock may also be disabled as
          19                                CLK
                                                                       an output by programming Register 08. To use an external Clock,
                                                                       Register 08 has to be programmed.
          20                                INT   Digital output       Active High Interrupt to indicate data is ready
www.ams.com/AS8510                                            Revision 3.8                                                             5 - 48


AS8510
Datasheet - A b s o l u t e M a x i m u m R a t i n g s
5 Absolute Maximum Ratings
Stresses beyond those listed in Table 2 may cause permanent damage to the device. These are stress ratings only. Functional operation of the
device at these or any other conditions beyond those indicated in Electrical Characteristics on page 7 is not implied. Exposure to absolute
maximum rating conditions for extended periods may affect device reliability.
Table 2. Absolute Maximum Ratings
                         Parameter                      Min          Max             Units                             Notes
 Electrical Parameters
     DC supply voltage (AVDD and DVDD)                  -0.3           5                V
                                                                  AVDD + 0.3
                 Input voltage (VIN)                    -0.3                            V
                                                                 DVDD + 0.3
        Input current (latchup immunity)
                                                        -100          100              mA                       AEC - Q100 - 004
                            (ISCR)
 Electrostatic Discharge
     Electrostatic discharge (ESD) all pins                           ±2               kV                       AEC - Q100 - 002
 Continuous Power Dissipation
              Total power dissipation                                                                SSOP20 in still air, soldered on JEDEC
                                                                      50              mW             standard board @ 125º ambient, static
          (all supplies and outputs) (Pt)                                                                   operation with no time limit
 Temperature Ranges and Storage Conditions
          Storage temperature (TSTRG)                    -50          125              ºC
            Junction temperature (TJ)                                 130              ºC
           Thermal resistance (RthJC)                                 80              K/W           JEDEC standard test board, 0 air velocity
      Package body temperature (TBODY)                                260              ºC                                                1
                                                                                                          Norm: IPC/JEDEC J-STD-020
         Moisture Sensitive level (MSL)                        3
            Humidity non-condensing                       5           85               %
1. The reflow peak soldering temperature (body temperature) is specified according IPC/JEDEC J-STD-020 “Moisture/Reflow Sensitivity
   Classification for Non-hermetic Solid State Surface Mount Devices”.
www.ams.com/AS8510                                                   Revision 3.8                                                           6 - 48


AS8510
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
6 Electrical Characteristics
6.1 Operating Conditions
Table 3. Operating Conditions
    Symbol                                       Parameter                  Conditions                  Min      Max     Units
     AVDD                       Positive analog supply voltage                                           3.0      3.6      V
     AVSS                                         0V Ground                                               0        0       V
      A-D              Difference in analog and digital supplies                                                  0.1      V
     DVDD                              Positive digital supply                                          2.97     3.63      V
     DVSS                                 0V Digital Ground                                               0        0       V
      TAMB                              Ambient temperature                                             -40       125     ºC
      ISUPP                                   Supply current                                                      5.5     mA
       fCLK                                                    1                                                 4.096   MHz
                                    System clock frequency
1. Nominal clock frequency from external or internal oscillator.
6.2 DC/AC Characteristics for Digital Inputs and Outputs
All pull-up and pull-down have been implemented with active devices. SDO has been measured with 10pF load.
Table 4. INT
     Symbol                                     Parameter               Conditions                Min        Typ    Max   Units
       ILEAK                       Tri-state leakage current                                       -1                +1    µA
        VOH                        High level output voltage                                       2.5                      V
        VOL                         Low level output voltage                                                         0.4    V
         IO                                 Output Current                                                            4    mA
Table 5. CS Input
     Symbol                                     Parameter               Conditions                Min        Typ    Max   Units
        VIH                         High level input voltage                                       2.0                      V
        VIL                          Low level input voltage                                                         0.8    V
       ILEAK                          Input leakage current                                        -1                +1    µA
        Ipu                                  Pull up current     CS pulled to DVDD = 3.3V         -150               -15   µA
Table 6. SDI
     Symbol                                     Parameter               Conditions                Min        Typ    Max   Units
        VIH                         High level input voltage                                       2.0                      V
        VIL                          Low level input voltage                                                         0.8    V
       ILEAK                          Input leakage current                                        -1                +1    µA
www.ams.com/AS8510                                                  Revision 3.8                                            7 - 48


AS8510
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
Table 7. SDO Output
    Symbol                                      Parameter         Conditions     Min Typ Max  Units
       VOH                         High level output voltage    Isource = 8mA    2.5            V
       VOL                          Low level output voltage      Isink = 8mA             0.4   V
        Io                                  Output Current                                 8   mA
Table 8. CHOP_CLK Output
    Symbol                                      Parameter         Conditions     Min Typ Max  Units
       VOH                         High level output voltage                     2.5            V
       VOL                          Low level output voltage                             0.4    V
        Io                                  Output Current                                 4   mA
Table 9. CLK I/O with Input Schmitt Trigger and Output Buffer
    Symbol                                      Parameter         Conditions     Min Typ Max  Units
       VIH                          High level input voltage     DVDD = 3.3V     2.4            V
       VIL                           Low level input voltage     DVDD = 3.3V             1.0    V
      ILEAK                           Input leakage current                       -1     +1    µA
       IPD                                Pull down current   CLK pulled to DVSS 10      100   µA
        Io                                  Output Current                                 4   mA
       VOH                         High level output voltage                     2.5            V
       VOL                          Low level output voltage                             0.4    V
Table 10. SCLK with Input Schmitt Trigger
    Symbol                                      Parameter         Conditions     Min Typ Max  Units
       VIH                          High level input voltage     DVDD = 3.3V     2.4            V
       VIL                           Low level input voltage     DVDD = 3.3V             1.0    V
      ILEAK                           Input leakage current                       -1     +1    µA
Table 11. MEN Output
    Symbol                                      Parameter         Conditions     Min Typ Max  Units
       VOH                         High level output voltage                     2.5            V
       VOL                          Low level output voltage                             0.4    V
        IO                                  Output Current                                 2   mA
www.ams.com/AS8510                                             Revision 3.8                     8 - 48


AS8510
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
6.3 Detailed System and Block Specifications
6.3.1     Electrical System Specifications
Table 12. Electrical System Specifications
       Symbol                                        Parameter     Min       Typ       Max       Units                   Notes
       IDDNOM                  Current consumption normal mode                 3        5.5       mA
                                                                                                           Average of NORMAL Mode Power
       IDDSBM                 Current consumption standby mode                40                  µA      consumption over a period of 10sec
                                                                                                        when the device is in STANDBY Mode
6.4 Current Measurement Ranges (across 100µOhm shunt resistor)
Table 13. Current Measurement Ranges
                                                                  Imax            Vsh        PGA       Data Rate               1          2
    Symbol                                   Parameter                                                                  VINADC       PSR
                                                                                             Gain         (fOUT)
                                                                   [A]           [mV]       Nominal                       [mV]        [dB]
       I70               Input current range of 70A in NOM        ±77            ±8.1         100       @ 1 kHz            890         60
      I200             Input current range of 200A in NOM         ±235           ±24.7         40       @ 1 kHz           1088         60
      I400             Input current range of 400A in NOM         ±400            ±42          25       @ 1 kHz           1137         60
     I1500           Input current range of 1500A in NOM       +2076/-1523    +218/-160        5        @ 1 kHz           1204         60
1. VINADC = Vsh * Gain, gain deviations to be considered according to Table 15 and Table 16.
2. AVDD, DVDD of 3.3V with ±5% variation.
The maximum current range can be calculated by the equation:
Imax = (VREFmin – VOSDRIFT*Gn*e)/(Gn *e*RSHUNT)
Where
VREFmin is minimum ADC reference voltage for the anticipated temperature range e.g.1220mV
VOSDRIFT is the maximum input referred PGA offset (e.g. 3 mV)
Gn is the nominal gain as selected (G1 to G4)
e is maximum gain tolerance (1,1)
RSHUNT is the maximum shunt resistance
Exceeding this maximum current range will lead first to non-linearity and finally to clamping.
Note: The Data Rate at the output can be calculated according to the formula:
           fsout=2*fchop /R2 (R2 is down sampling ratio taking values 1, 2, 4 up to 32768 as powers of 2)
Table 14. Valid Combinations of the Chopper Clock, Oversampling Clock and Decimation Ratios
           Over Sampling Frequency                                 Chopper Frequency                            Decimation Ratio
                           1.024MHz                                        2kHz                                        64
                           2.048MHz                                        2kHz                                        64
                           2.048MHz                                        2kHz                                        128
                           2.048MHz                                        4kHz                                        64
www.ams.com/AS8510                                                        Revision 3.8                                                    9 - 48


AS8510
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
6.4.1     Differential Input Amplifier for Current Channel
Table 15. Differential Input Amplifier for Current Channel
    Symbol                                         Parameter                                     Conditions             Min    Typ   Max      Units
   VIN_AMP                                Input voltage range                                RSHH and RSHL             -160          +160      mV
    IIN_AMP                                                         1, 11             RSHH and RSHL@ +160mV input
                                            Input current                                                               -50      2     50      nA
                                                                                        voltage at 125ºC with PGA
                                                                                   2                                           -160
       ICM                       Absolute input voltage range                                                                                  mV
                                                                                                                               +300
                                                              3, 4, 9
     G = G1                                        Gain1                                               I10                      100
                                                              3, 4, 9
     G = G2                                        Gain2                                              I200                      40
                                                              3, 4, 9
     G = G3                                        Gain3                                              I400                      25
                                                              3, 4, 9
     G = G4                                        Gain4                                             I1500                       5
         e                                     Gain deviation                                    i = 1, 2, 3, 4       0.9 * Gi      1.1 * Gi
    fP_AMP                                                             4, 5
                                           Pole frequency                                                               15                     kHz
                                                                                               -20ºC to +65ºC
                                                                                 6
       εT1                        Gain drift with temperature                          Gain 5, 25, referenced to room                ±0.3       %
                                                                                                 temperature
     VOSDRIFT                                                                   7, 10
                                Offset drift with temperature                                       @65ºC                      350   2700      µV
        Vos                                                                                  After trim at -20ºC                      420      µV
                                                                          7, 10
                                      Input referred offset
      Vos_ch                                                                                 Chopping enabled                    0            LSB
      VNdin                                                           4, 8
                                            Noise density                                                                       25           nV/√Hz
       THD                           Total harmonic distortion                            For 150 Hz input signal               70             dB
Notes:
       1. Leakage test accuracy is limited by tester resource accuracy and tester hardware.
       2. For gain 100 PGA input common mode is 0V and the minimum supply is 3.15V.
       3. The measurement ranges are referred only by the gain of input amplifier, while other parameters such as bandwidth etc. are pro-
           grammed independently.
       4. This parameter is not measured directly in production. It is measured indirectly via gain measurements of the whole path. It is guaran-
           teed by design.
       5. Pole frequency of input amplifier changes with GAIN. The number is valid for the gain at G1, while the bandwidth will be higher for other
           ranges. This parameter is not measured in production.
       6. Based on device evaluation. Not tested.
       7. These offsets are cancelled if chopping enabled (default).
       8. Noise density calculated by taking system bandwidth as 150Hz.
       9. Refer to Measurement Ranges shown in Table 13.
       10. No impact on the measurement path. If the chopping is enabled, both the offset and offset drift will be eliminated.
       11. For negative input voltages up to -160mV below ground, Input leakage is typically -20nA @ 65ºC due to forward conductance of
           protection diode.
www.ams.com/AS8510                                                                         Revision 3.8                                        10 - 48


AS8510
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
6.4.2     Differential Input Amplifier for Voltage Channel
Table 16. Differential Input Amplifier for Voltage Channel
    Symbol                                      Parameter                                       Conditions             Min    Typ   Max      Units
    VIN_AMP                                                              1, 10
                                    Input voltage range                                                               -160          +160      mV
     IIN_AMP                                                       2, 10           VBAT_IN, ETR, ETS @ +160mV input
                                          Input current                                                                -50      2     50      nA
                                                                                       voltage at 125ºC with PGA
                                                                                 3                                            -160
       ICM                      Absolute input voltage range                                                                                  mV
                                                                                                                              +300
                                                              4, 5
     G = G1                                       Gain1                                                                        100
                                                              4, 5
     G = G2                                       Gain2                                                                        40
                                                              4, 5
     G = G3                                       Gain3                                                                        25
                                                              4, 5
     G = G4                                       Gain4                                                                         5
         e                                   Gain deviation                                     i = 1, 2, 3, 4       0.9 * Gi      1.1 * Gi
     fP_AMP                                                           5, 6
                                         Pole frequency                                                                15                     kHz
      VNDIN                                                         5, 7
                                          Noise density                                                                        25           nV/√Hz
       THD                         Total harmonic distortion                             For 150Hz input signal                70             dB
                                                                                              -20ºC to +65ºC
                                                                               8
        εT1                      Gain drift with temperature                          Gain 5, 25, referenced to room                ±0.3       %
                                                                                                temperature
        VOS                                                                                 After trim at -20ºC                      420      µV
                                                                           9
                                      Input referred offset
     Vos_ch                                                                                 Chopping enabled                    0            LSB
    VOSDRIFT                                                                    9
                                Offset drift with temperature                                      @65ºC                      350   2700      µV
Notes:
       1. Input for the voltage channel can be as high as 1220mV, in this high input case PGA will be bypassed.
       2. Leakage test accuracy is limited by tester resource accuracy and tester hardware, especially at low temperatures due to condensing
           moisture.
       3. For gain 100 PGA input common mode is 0V and the minimum supply is 3.15V.
       4. The measurement ranges are referred only by the gain of input amplifier, while other parameters such as bandwidth etc. are pro-
           grammed independently.
       5. This parameter is not measured directly in production. It is measured indirectly via gain measurements of the whole path. It is guaran-
           teed by design.
       6. Pole frequency of input amplifier changes with changing the GAIN. The number is valid for the gain at G1, while the bandwidth will be
           higher for other ranges. This parameter is not measured in production.
       7. Noise density calculated by taking system bandwidth as 150Hz.
       8. Based on device evaluation. Not tested.
       9. No impact on the measurement path. If the chopping is enabled, both the offset and offset drift will be eliminated.
       10. For negative input voltages up to -160mV below ground, Input leakage is typically -20nA @ 65ºC due to forward conductance of
           protection diode.
www.ams.com/AS8510                                                                          Revision 3.8                                      11 - 48


AS8510
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
6.4.3    Sigma Delta Analog to Digital Converter
Table 17. Sigma Delta Analog to Digital Converter
    Symbol                                         Parameter                           Conditions         Min    Typ    Max   Units
                                                                  6
     VREF                                Reference voltage                                                      1.225           V
     VINADC                                                    1                     At Vref = 1.22V
                                                Input range                                                0           ±1.22    V
                                                                            2
       R1                 Oversampling ratio/Decimation Ratio                                             64     128    128
       fovs                                                          3                                          1024/
                                    Oversampling frequency                                                                     kHz
                                                                                                                2048
      RES                                      Number of bits                                                            16    bits
                                                              4
      BW                                         Bandwidth                                                 1            500     Hz
                                                                   5
      S/N                               Signal to noise ratio                                                     90           dB
Notes:
      1.  Production test at ±800mV. Maximum VIN can be 1.22V with VREF=1.225V.
      2.  Programmable. It is defined with respect to the first decimator in the ΣΔ ADC.
      3.  Programmable: Internal clock is 1024/2048 kHz; external clock max is 8192 kHz.
      4.  Dependent on fovs, R1 and R2. The bandwidth is calculated according to the formula:
           BW=fovs/(2*R1*R2); the sampling frequency at the output of the A/D converter is 2*BW.
      5. Defined at maximum input signal, BW=500 Hz (1Hz to 500 Hz), fovs=1024 kHz, R1=64, fchop=2 kHz and R2=2.
      6. Reference voltage might be forced from external.
6.4.4    Bandgap Reference Voltage
Table 18. Bandgap Reference Voltage
   Symbol                                               Parameter                            Conditions    Min   Typ    Max   Units
                                                                       1, 2
  VREFTRIM                         Reference Voltage after trim                             Trim at 65ºC        1.225           V
   VREFACC                                                                  1, 2
                               Reference Voltage Initial Accuracy                              At 65ºC                  ±3.5   mV
                                                                                        Temperature range
                                                                                                                        ±0.4    %
                                                                                             -20 to 65 ºC
  VREFDRIFT                     Reference Voltage Temperature drift
                                                                                        Temperature range        +0.4/
                                                                                                                                %
                                                                                            -40 to 125 ºC        -0.6
  PSRRREF                                               PSR @ dc                                                  80            dB
  SUTAVDD                                                                  3
                                  Start Up Time with supply ramp                                                   5            ms
    SUTPD                                                                   3
                                 Start Up Time from power down                                                            1     ms
   RNDVREF                          Output resistance of band gap                                                500    1000    Ω
   VNDVREF                                                                       3
                          Bandgap reference thermal noise density                                                        300 nV/√Hz
   CLVREF                                                                                                         100           nF
                                      Output Capacitor (Ceramic)
  ESRVREF                                                                                                  0.02           1     Ω
Notes:
      1. Accuracy at 65ºC.
      2. No DC current is allowed from this pin.
      3. This is a design parameter and not production tested.
www.ams.com/AS8510                                                                 Revision 3.8                                12 - 48


AS8510
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
6.4.5     Internal (Programmable) Current Source for External Temperature Measurement
Table 19. External Temperature Measurement
    Symbol                                          Parameter                       Conditions            Min  Typ        Max        Units
      ICURON                                                      1
                                  5-bit current source enabled          5-bit programmable current source  0   270        320         µA
     ICUROFF                       5-bit current source disabled                 Limited by leakage             10                     nA
                                                                      2                                                              ppm
      TK_CS            Temperature coefficient of current source                                              1000
                                                                                                                                      / ºK
    VMAXETR                                                     3
                                          Voltage on pin ETR                                                            1000/G        mV
                            Max voltage on pin ETR when PGA is
  VMAXETRMOD                                                  4                                                           1.22          V
                                                    bypassed
    VMAXETS                                                         3
                           Voltage on pin ETS for resistor sensor                                                       1000/G          V
                            Max. Voltage on pin ETS when PGA is
  VMAXETSMOD                                                  5                                                           1.22          V
                                                    bypassed
Notes:
       1. Current value can be programmed in steps of 8μA from 0 to 256μA with a process error of 30%.
       2. Temperature coefficient is not important since external temperature measurement is a 2 step measurement. The value specified is
           guaranteed by design and will not be tested in production.
       3. Maximum voltage on pin ETR (reference) can be calculated by given formula, where G is the gain of PGA (G=100).
       4. Maximum voltage on pin ETR, if PGA is bypassed.
       5. Maximum voltage on pin ETS, if PGA is bypassed.
www.ams.com/AS8510                                                             Revision 3.8                                            13 - 48


AS8510
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
6.4.6     CMREF Circuit (VCM)
Table 20. CMREF Circuit
       Symbol                                                 Parameter            Min       Typ      Max    Units
          VVCM                                              Output voltage          1.6      1.7      1.8      V
           CL                                            Load capacitance                    100              nF
6.4.7     Internal AVDD Power-on Reset
Table 21. Internal AVDD Power-on Reset
      Symbol                                                Parameter              Min       Typ      Max    Units
                                          Power On Reset Threshold
      VPORHIA                                                                       2.2       2.4      2.6     V
                             POR time - The duration from Power ON till
       tPORA                    the time, internal Power On Reset signal             1                        µs
                                                                      1
                                                           goes HIGH
       IPORA                                                                  2               1.5             µA
                                   Current consumption in POR block
1. POR pulse is always longer than tPORA whatever the slope of the supply.
2. IPORA can not be switched off.
6.4.8     Internal DVDD Power-on Reset
Table 22. Internal DVDD Power-on Reset
        Symbol                                                   Parameter               Min      Typ    Max  Units
                                                     Power On Reset Threshold
         VPORHID                                                                         2.2      2.4    2.7    V
          VHYST                                                             1            0.2     0.25    0.4    V
                                                                 Hysteresis
                                  POR time - The duration from Power ON till the
          tPORD                       time, internal Power On Reset signal goes           1                    µs
                                                                         2
                                                                   HIGH
          IPORD                                                           3                       1.5          µA
                                                                  Current
1. VPORLO = VPORHI - VHYST where VPORLO is the lower threshold of POR.
2. VPORLO = VPORHI - VHYST where VPORLO is the lower threshold of POR.
3. IPORD can not be switched off.
6.4.9     Low Speed Oscillator
Table 23. Low Speed Oscillator
       Symbol                                                  Parameter               Min     Typ     Max   Units
           fLS                                                 Frequency                     262.144          kHz
        fLS_ACC                                                 Accuracy                       ±7              %
           ILS                                                Supply current                     5            µA
www.ams.com/AS8510                                                              Revision 3.8                       14 - 48


AS8510
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
6.4.10 High Speed Oscillator
Table 24. High Speed Oscillator
      Symbol                                                    Parameter                              Min            Typ          Max            Units
          fHS                                                   Frequency                                            4.096                        MHz
                                                                        1, 2
        fHSACC                                                 Accuracy                                                ±4                          %
          IHS                                                 Supply current                                          300                          µA
Notes:
      1. Accuracy after trimming.
      2. Accuracy for limited temperature range of -20 to 65 ºC.
6.4.11 External Clock
Table 25. External Clock
    Symbol                                         Parameter                                      Conditions                Min   Typ        Max     Units
                                                                                                                                 2048/
     fCLKEXT                                  Clock frequency                                                                    4096/                kHz
                                                                                                                                  8192
                                                                                       to be programmed in Register 08
   DIVCLKEXT                              Clock division factor                                                                   2/4/8
                                                                                    CLK_REG through the serial bus SPI.
    DCCLKEXT                       Duty Cycle of external clock                                                             40                60       %
6.4.12 Internal Temperature Sensor
Table 26. Internal Temperature Sensor
    Symbol                                         Parameter                                      Conditions                Min   Typ        Max     Units
     TINTRNG                        Temperature sensor range                                                                -40              125       ºC
      ΔTIN                  Temperature measurement accuracy                                                                        3                  ºC
                                                                                    Guaranteed by design; at PGA gain 5
     TINTSLP                        Temperature sensor slope                         which is the recommended Gain for             27               Digits/C
                                                                                     internal temperature measurement.
   TINT65G5                 Temperature sensor output at gain 5                                                            40660 41807      43012    Digits
6.5 System Specifications
Table 27. System Specifications
    Symbol                                                          Parameter                                 Min           Typ        Max         Units
        IS                                                                              1
                                                          Channel to channel isolation                                                  -90         dB
                                                                                                    1, 2
        At                      Difference in channel to channel attenuation @600Hz                                                      3          dB
                                                                                                         1, 2
        Ph                Difference in phase shift between the two channels @600Hz                                                      5          Deg
System Measurement Error Budget for Voltage and Current Channel.
www.ams.com/AS8510                                                                           Revision 3.8                                              15 - 48


AS8510
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
Temperature Range: -20ºC to +65ºC; Output data rate is 1kHz, VCC = 3.3V, chopping enabled.
Table 28. System Measurement Error Budget for Gains 5 and 25
 Symbol                                         Parameter                       Conditions              Min       Typ         Max     Units
                                                              3, 4
                                System measurement error                                                          ±0.5        ±0.8
    Err                                                                                                                                %
                                                                   5
             Voltage channel signal path measurement error                                                                    ±0.5
                     Measurement error due to PGA gain drift              From device evaluation                              ±0.3     %
                          Measurement error due to VREF drift                                                                 ±0.4     %
               Measurement error due to non-linearity of PGA         Tested by distortion measurements                      ±0.025     %
Notes:
      1. These specifications are defined by taking one channel as reference and measured on the other channel.
      2. Guaranteed by design.
      3. System measurement error due to noise, individual block parameter drifts and non linearity. Based on evaluation, not tested.
      4. System error due to offset is neglected because of chopper architecture.
      5. PGA is by-passed.
www.ams.com/AS8510                                                       Revision 3.8                                                 16 - 48


AS8510
Datasheet - E l e c t r i c a l C h a r a c t e r i s t i c s
System Error Compensation Function: For battery voltage measurement it is recommended to by-pass the PGA. This eliminates PGA
gain drift as an error source, thus error for the VBAT/VBAT_GND differential signal path is determined by VREF drift with temperature. The
typical characteristic of VREF versus temperature extracted from 3 production lots is shown in Figure 3. This function could be used to improve
accuracy by an error correction method utilizing the internal temperature sensor. In this case ADC raw data readings need to be corrected with a
temperature dependent factor by the software in the external micro controller. This factor is given by a generic compensation function and can be
applied to all IC’s because VREF is production trimmed to minimize linear coefficient of VREF over temperature.
Figure 3. Reference Error Compensation Function
                                                              1.0001
                                                                                                                                       Polynom Fit
                                                                                                                                       Measured points
                                                                  1
                                                              0.9999
                                                              0.9998
                                        Compensation factor
                                                              0.9997
                                                              0.9996
                                                              0.9995          FComp = −3.9658e−007 T2 + 2.0407e−005 T + 0.99974
                                                              0.9994
                                                              0.9993
                                                              0.9992
                                                              0.9991
                                                                  −20   −10       0       10        20       30       40          50        60       70
                                                                                                 Temperature [°C]
Generic compensation factor the ADC output need to be multiplied with:
Fcomp = (A*T^2 + B*T + C)
Where:
Fcomp is the compensation factor for VREF drift over temperature normalized to 1 at 25°C
T is Temperature reading from calibrated internal temperature sensor in [°C]
A: -4E-7
B: 2E-5
C: 0,9997
The compensated ADC value = raw ADC value * Fcomp
If PGA is by-passed and an external precision reference is applied, the signal path measurement error is basically determined by the drift due to
temperature and ageing of the external reference.
Current channel error contributions for a single temperature end of line calibrated system are shunt resistance, PGA gain and VREF changes
                                                                                                                                                          nd
with temperature. The drift of a shunt resistor made from Manganin alloy and VREF drift with temperature are non-linear and show 2 order
curvature in same direction and similar relative magnitude. Thus shunt error is already reduced by the generic VREF(T) curvature (see Figure 3)
if thermally coupled to the AS8510. Over all error can be further reduced by an error correction method in external micro controller by matching
typical VREF(T) curvature to Rshunt (T) curvature with the help of the internal temperature sensor.
Total final current channel system error calculated from quadratic summing of error contributions from Isabellenhuette shunt PPAP data and
AS8510 safe launch data over 21000 units is ±0.5%.
Temperature sensor system considerations: Internal temperature sensor can be used to measure the ambient temperature because there is
just 13 mW of AS8510 power dissipation in normal mode. This results in internal self-heating of less than 1°C.
www.ams.com/AS8510                                                                                  Revision 3.8                                               17 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
7 Detailed Description
The AS8510 consists of two independent high resolution 16-bit SD analog to digital conversion channels. The measurement path of these two
channels integrates a programmable gain amplifier, chopper and de-chopper, sigma-delta modulator, decimator and a digital filter for
simultaneous measurement of Current and Voltage/Temperature.
The two measurement channels, namely the Current and Voltage/Temperature measurement channels have identical data path.
The input signal is amplified in the Programmable Gain Amplifier (PGA) with any of the selected gains of 1, 5, 25, 40 and 100 facilitating
measurement of a wide range of Current, voltage and temperature levels. Gain Settings for different input ranges and any associated restrictions
are explained in the Table 13.
Offset in the measurement path is minimized with the use of a chopper and a de-chopper at appropriate stages in the data path. By default the
chopper/de-chopper is ON in the measurement path. It may be disabled by programming the appropriate register.
The amplified input signal is converted into a single-bit pulse-density modulated stream by the Σ-Δ Modulator. A decimator acting as a low-pass
filter filters out the quantization noise and generates 16-bit data corresponding to the input signal. The decimation ratios of 64, 128 may be
selected in the first filter stage. For reducing data rate further, the second stage decimation can be used.
An optional FIR Filter is provided to offer matched low pass filter response typically required in lead acid battery sensor systems.
7.1 Current Measurement Channel
The voltage across a Shunt Resistor, connected in series with the Battery negative terminal, forms the input signal to the Current Measurement
channel. RSHH and RSHL are the Current measurement input pins. Offset in the input signal is nullified with the use of a chopper and a de-
chopper at appropriate stages in the data path. The programmable gain amplifier in the data path with programmable settings of 1, 5, 25, 40 and
100 enables measurement of current ranges from ±1A to ±1500A. The sampled input signal is converted into a single-bit pulse-density
modulated stream by the Σ-Δ Modulator. A decimator acting as a low-pass filter filters out the quantization noise and generates 16-bit data
equivalent to the input current signal. The programmable input sampling rate and the decimation ratio determine the output data rates. The data
path can be programmed to provide 1Hz to 2 kHz rates in the various modes available. An optional FIR filter is provided to offer matched low
pass filter response typically required in lead acid battery sensor systems.
After enabling the current measurement channel, the delay for the availability of the first sample is two conversion cycles.
7.2 Voltage/Temperature Measurement Channel
The other two parameters of the Battery for measurement are Voltage and its Temperature. The second channel accepts signals from four
independent sources through a Multiplexer as listed below:
  An attenuated battery voltage obtained through appropriate external resistor divider, (or)
  A signal from the external temperature sensor, (or)
  A signal from external reference, (or)
  A signal from the internal temperature sensor.
Apart from this difference in the multiplexing of four input signals, the rest of the data path is identical to the Current measurement channel.
RSHH and RSHL are the Current measurement input pins
The Battery Voltage which can go up to 18V is attenuated through a Resistor Divider externally and is applied to the Voltage Channel. For
Automotive Battery measurement, the Gain of the PGA should be restricted to 5 and 25. The latency for the first result from the voltage
measurement channel is two conversion cycles.
A second option on this measurement channel is to measure Temperature. Internally generated constant current is pumped through the
Temperature Sensor with positive temperature coefficient, and, a high- precision resistor. The voltages across the sensor and the resistor form
the inputs to the measurement channel one at a time. The difference between the two voltages which is independent of the magnitude of the
current is used to determine the temperature accurately. The Voltage across the sensor is applied between the ETS and VSS pins and, the
voltage across the high-precision resistor is applied between ETR and VSS. External Temperature measurement involves the acquisition of two
signals one after the other using the same constant current source. The latency for the first result from the temperature measurement channel is
two conversion cycles.
A third option on the measurement channel is to measure the internal temperature. Hence, one of the three options for measurement of Battery
Voltage, External Temperature and, internal temperature may be carried out by selection of appropriate inputs through the internal multiplexer
selection.
www.ams.com/AS8510                                                         Revision 3.8                                                      18 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
7.3 Digital Implementation of Measurement Path
Figure 4. Block Diagram of Digital Implementation
                                                                                             R2                FIR_MA_SEL
                                                  R1
                                                                               fchop * 2        fchop * 2 / R2                fchop * 2 / R2
               MOD_IN                                    fmod / R1
                                               CIC1               Dechopper                CIC2                   FIR/MA                   DATAOUT
                                            64 / 128
                            fmod
           MOD_CLK                                                               R1
                                                                     fchop                         R1 = First decimation ratio (64 or 128)
                                                                                                   R2 = Second decimation ratio (1 to 32768)
                                                     CHP_CLK
                                                                           CLK DIVISION
                                                                             BLOCK
                                                        MOD_CLK
Figure 4 shows the digital implementation of the decimator and filter to process the 1-bit output of the Modulator. This block receives a 1-bit pulse
density modulated output (MOD_IN) from the second order sigma delta modulator along with the oversampling frequency clock (MOD_CLK).
The MOD_CLK directly goes to a clock division block, which generates chopper clock (CHOP_CLK). The CHOP_CLK can be one of 2kHz or
4kHz selected by Register CLK_REG in Table 33. The MOD_CLK can be either 1MHz or 2MHz. The Decimation is a two phase process. In the
first phase, the R1 down sampling rate can be obtained by selecting either 64 or 128 in Registers DECREG_R1_I, DECREG_R1_V in Table 33.
The 16-bit CIC1 output is dechopped with respect to CHOP_CLK. The output of Dechopper is passed through the CIC2 filter with a decimation
ratio of 1to 32768 in steps of power of 2. This output is then processed through a FIR or Moving Average (MA) filter. FIR Filter is provided to offer
matched low pass filter response typically required in lead acid battery sensor systems. MA filter is used to provide averaged output and the
number of samples for averaging can be any integer value from 1, 3, 7 or 15.
7.4 Modes of Operation
The device operates in four different modes, namely,
  Normal Mode 1 (NOM1),
  Normal Mode 2 (NOM2),
  Standby Mode 1 (SBY1), and,
  Standby Mode 2 (SBY2).
The Normal Modes are full-power modes with the exception that in Normal Mode 2, sampling is normally at a programmed lower frequency and
is increased to a higher rate only when a measured input signal level crosses the programmed threshold in the current measurement channel.
The Standby Modes are lower power modes. Sampling is normally at a very low frequency interval. In Standby Mode 2, data sampling can be
carried out only when the internal comparator detects the input current to be greater than the programmed threshold and it generates interrupt on
the INT pin.
The device enters into the “Stop” state on Power On. This is a state where in the data path is inactive and can be entered into from any of the
four Modes. The State transition Diagram involving the state of Stop and the four Modes is illustrated in the Figure 5.
www.ams.com/AS8510                                                                 Revision 3.8                                                    19 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Figure 5. State Transition Diagram
                                                                                                                                        !por_dvdd
                                                                                                                     RESET
                                                                                          !por_avdd                        por_avdd
                                                                                                                                        Wait for otp_load
                                                                                                                 OTP_INT              Completes in 32 cycles
                                                                                                                                            of lp_clk
                                                                                                                        otp_load
                                                                      sto p                                          STOP
                                                                                     rt
                                                                              s ta
                                                                                                                           stop
                                                                          1.5msec &
                  Analog Stablization                                       NORM
                        period                        A_STB                                                          NORM
                   Wait for 1.5msec                                                                                                                 NORM
                                                                                                                                                      or
                                                                                                                                                     stop
                                                    1.5msec &                                                                SBM
                                                       SBM
                                                                 p
                                                                sto                                             ut
                                                                                                              eo
                                                                        NO                                 tim
                                                                                                         1_
                                                                           RM                         TT
                                     Wait for x
                                     number of         SBM_ON                        SBM                             SBM_OFF            Wait for TT1
                                    conversions                                                                                          timeout
www.ams.com/AS8510                                                              Revision 3.8                                                                   20 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Note:
     1. Device soft reset can be written in any of the following states STOP, A_STB, SBM_ON, SBM_OFF by writing “0” into D[7] of the RESET
      _REG (Address 0X09).
     2. Measurement path of soft reset should be written in any the states, STOP, SBM_OFF by writing “0” into D[6] of the RESET _REG (Address
      0X09).
     3. When soft reset is used for the measurement path or for the device, external clock needs to be disabled if the system clock is external
      clock in the application.
7.4.1      Normal Mode 1 (NOM1)
On Power-on-reset of the device, AS8510 goes into STOP State.
Transition to Normal mode1 (NOM1) occurs when the “START BIT” D0 of Mode Control Register MOD_CTL_REG in Table 33 is set to “1”
through the serial port SPI. Data Rate of voltage and current channels can be independently programmed and both the channels generate
interrupts for every output available from ADC. The interrupt signal is generated on the INT pin. The width of the interrupt pulse is eight cycles of
lp_clk. The data is stable up to the next interrupt. If the data rate is different for the two channels, the interrupt rate would follow the higher rate
among the two channels. Data update can be known by reading the status register. The functionality is explained in the waveform shown in
Figure 6. When the device is configured to NORMAL Mode1 from any mode the configuration should be through the STOP state only.
Figure 6. Normal Mode 1
                                                                                                                                                I
                    IDATA
                                      Sampling with f1
                                                                                                                                                       t
                                                                                                                                                  V,T
                V,TDATA
                                      Sampling with f2
                                                                                                                                                       t
                                         STOP                        START
         Current Channel
         DATA Register
        Voltage Channel
         DATA Register
       INT at f1 rate from
        current channel                     Interrupt from the current channel is at f1 rate which is integer multiple of f2 rate from voltage channel
                                                                                                                                                       TINT
7.4.2      Normal Mode 2 (NOM2)
NOM2 differs from NOM1 in such a way that it allows for a relaxed data rate at a period of TMC by programming the corresponding register as
long as the amplitude of current is less than a programmed threshold ITHC. However, when, the measured input signal exceeds the programmed
threshold, the data rate is changed to the rate of NOM1 mode.
Transition to NOM2 occurs when the “START BIT” D0 of Mode Control register MOD_CTL_REG in Table 33 is set to 1 and mode control bits to
01 through SPI. In this mode the data rate should be programmed with the time of TMC. An interrupt signal is generated on INT at the rate of TMC
secs with a pulse width of eight cycles of lp_clk. The data is stable up to the next interrupt. The data sample is compared against the programmed
threshold and when it is exceeded, the data sampling rate is changed to provide data at the data rate of NOM1 mode. However, as soon as the
data sample amplitude falls below the programmed threshold, the sampling rate is restored to provide data at the rate of TMC. The functionality is
illustrated in the waveform Figure 7.
www.ams.com/AS8510                                                                                   Revision 3.8                                        21 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Figure 7. Normal Mode 2
                                                                                           I
                                                                                                                        I < I THS
                                                V,I,T                 V,I,T                                    V,I,T              V,I,T               V,I,T
     I DD                   TMC                              TMC
     ITHS
            Sampling with f                                                                                                                                 t
                                                                                                     I > I THS
       INT
                                                       T INT
7.4.3       Standby Mode1 (SBM1)
The low-power Standby Mode can be entered only through the STOP state. Transition to SBM1 mode occurs when the “START BIT” D0 of Mode
Control register MOD_CTL_REG in Table 33 is set to “1” and Mode Control Bits to “10” through SPI. In this mode the date rate is programmable
with the time of Ta. An interrupt signal is generated on INT at the rate of Ta secs., and with a pulse width of eight cycles of lp_clk. The data is
stable up to the next interrupt. The functionality is illustrated in Figure. During the period of Ta, only one data sample is made available and,
during the rest of the period, the device is maintained in STOP state to reduce power consumption. The microcontroller which receives the data
on the Interrupt, is also expected to be processing the data for a short time as shown clearly in the Figure 8 to ensure the overall low-power
consumption of the data acquisition and processing system.
Figure 8. Standby Mode 1
               I DD                                                  MCU                                 MCU                                  MCU
                                                                                             V, I, T                                V, I, T
                                                                 ADC
                                                                                                                                                      t
                                                  Ta  sec.                       Ta   sec.                           Ta    sec.
                Start SBM1                                         Tconv                              Tconv                                 Tconv
        Channel
                                            DATA – A0                            DATA – A1                           DATA – A2                    DATA – A3
    DATA Register
           INT
                                                                            TINT
www.ams.com/AS8510                                                                Revision 3.8                                                              22 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
7.4.4     Standby Mode2 (SBM2)
Standby Mode 2 is an extension of the Standby Mode1 to achieve even a lower power in the data acquisition system by providing interrupt to the
microcontroller only when the data sample exceeds the set current threshold. The Standby Mode can be entered only through the STOP state.
Transition to SBM2 mode occurs when the “START BIT” D0 of Mode Control register MOD_CTL_REG in Table 33 is set to “1” and Mode Control
Bits D7,D6 to “1,1” through SPI. In this mode the date rate is programmable with the time of Ta in the Ta control registers B, C. The data sample
is made available and an interrupt signal is generated on INT pin only when the input signal exceeds the threshold set in Current Threshold
Registers D,E. It should be noted here that the data is stable for Ta secs. The functionality is illustrated in Figure 9.
Figure 9. Standby Mode 2
             I DD                                                                                                          MCU
                                                                                                        |I| > I Threshold I
                                                                             I
                                                       ADC
                                                                                                                                            t
                                              Ta sec.           Ta sec.                             Ta sec.
                Start SBM2                              Tconv                    Tconv                                   Tconv
      Channel
                                             DATA – A0        DATA – A1                         DATA – A2                      DATA – A3
    DATA Register
        INT
                                                                                                                                 TINT
7.5 Reference-Voltage
Band gap-reference voltage is used for the ADC as a reference and for the generation of the current for external temperature measurement.
7.6 Oscillators
A High-speed oscillator (HS) generates the oversampling clock. For internal state machine and Interrupt generation, a low-speed Oscillator (LS)
is also available.
7.7 Power-On Reset
The AS8510 has PORs, APOR and DPOR on analog and digital power supplies respectively. On PORs of both supplies, initialization sequence
happens and the system status is shown in state diagram (see Figure 5).
As shown in the state diagram, the system is in RESET state until DPOR output goes to logic HIGH and subsequently until APOR output goes to
logic HIGH. Once analog power supply is available, the system goes into OTP_INT state and loads the default values into the control and data
registers and goes into STOP state. If analog POR, APOR goes low at any time, the system goes into RESET state. In the STOP state, the
AS8510 can be programmed and by giving start command it starts working following the state machine.
www.ams.com/AS8510                                                      Revision 3.8                                                        23 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
7.8 4-Wire Serial Port Interface
The SPI interface is used as interface between the AS8510 and an external micro-controller to configure the device and access the status
information. The micro-controller begins communication with the SPI which is configured as a slave. The SPI protocol is simple and the length of
each frame is an integer multiple of bytes except when a transmission is started. Each frame has 1 command bit, 7 address/configuration bits,
and one or more data bytes. The edge of CS and the level of SCLK during the start of a SPI transaction, determine the edge on which the data is
transferred from the SPI and the edge on which the data is sampled by the slave. Table 29 describes the setting of the transfer and sampling
edges of SCLK. Figure 10 shows the falling edge and rising edge for data transfer and data sampling respectively, when SCLK is HIGH on the
falling edge of CS.
Table 29. CS and SCLK
             CS                                     SCLK                                                     Description
            FALL                                    LOW             Serial data transferred on rising edge of SPI clock. Sampled at falling edge of SPI clock.
            FALL                                    HIGH            Serial data transferred on falling edge of SPI clock. Sampled at rising edge of SPI clock.
            ANY                                     ANY             Serial data transfer edge is unchanged.
Figure 10. Protocol for Serial Data Write with Length = 1
         CS
      SCLK
        SDI                                  0     A6   A5      A4   A3     A2     A1     A0    D7      D6    D5    D4     D3  D2      D1     D0
       SDO
                                                                                                                                        Data D7 – D0 is moved
                                                      Transfer edge         Sampling edge                                               to Address A4..A0 here
7.8.1     SPI Frame
A frame is formed by a first byte for command and address/configuration and a following bit stream that can be formed by an integer number of
bytes. Command is coded on the 1 first bit, while address is given on LSB 7 bits (see Table 30).
Table 30. Command Bits
     Command Bits                                                        Register Address or Transmission Configuration
            C0                                  A6               A5               A4                 A3              A2               A1                A0
Table 31. Command Bits
         C0                    Command                     <A6:A0>                                              Description
          0                       WRITE                   ADDRESS                            Writes data byte on the given starting address.
          1                        READ                   ADDRESS                            Read data byte from the given starting address.
www.ams.com/AS8510                                                                   Revision 3.8                                                          24 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
If the command is read or write, one or more bytes follow. When the micro-controller sends more bytes (keeping CS LOW and SCLK toggling),
the SPI interface increments the address of the previous data byte and writes/reads data to/from consecutive addresses.
7.8.2    Write Command
For write command, C0=0. After the command code C0 is transferred, the address of register to be written is provided from MSB to LSB.
Subsequently one or more data bytes can be transferred from MSB to LSB. For each data byte following the first one, used address is the
incremented value of the previously written address. Each bit of the frame has to be driven by the SPI master on the SPI clock transfer edge. The
SPI slave samples it on the next clock edge. These edges are determined by the level of SCLK as shown in Table 29. Figure 11 and Figure 12
are examples of write command without and with address self-increment.
Figure 11. Protocol for Serial Data Write with Length = 1
       CS
    SCLK
       SDI                              0         A6 A5   A4    A3      A2  A1      A0   D7  D6     D5     D4  D3     D2     D1    D0
     SDO
                                                                                                                            Data D7 – D0 is moved
                                                                                                                            to Address A4..A0 here
Figure 12. Protocol for Serial Data Write with Length = 4
      CS
    SCLK
                    AA A A A A A DD D D D D D D DD D D D D D D DD D D D D D D DD D D D D D D DD D D D D D D
     SDI       0
                    65 4 3 2 1 0 7 6 5 4 3 2 1 0 7 6 5 4 3 2 1 0 7 6 5 4 3 2 1 0 7 6 5 4 3 2 1 0 7 6 5 4 3 2 1 0
     SDO
                                                          Data D7-D0 is     Data D7-D0 is     Data D7-D0 is     Data D7-D0 is       Data D7-D0 is
                                                        moved to Address   moved to Address moved to Address  moved to Address   moved to Address
                                                           A4-A0 here       A4-A0 +1 here    A4-A0 +2 here     A4-A0 +3 here       A4-A0 +4 here
www.ams.com/AS8510                                                             Revision 3.8                                                     25 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
7.8.3    Read Command
For Read command C0=1. After the command code C0, the address of register to be read is provided from MSB to LSB. Then one or more data
bytes can be transferred from the SPI slave to the master, always from MSB to LSB. To transfer more bytes from consecutive addresses, SPI
master keeps CS signal LOW and SPI clock active as long as it desires to read data from the slave. Each bit of the command and address of the
frame is to be driven by the SPI master on the SPI clock transfer edge where SPI slave samples it on the next SPI clock edge.
Each bit of the data section of the frame is driven by the SPI slave on the SPI clock transfer edge and SPI master samples it on the next SPI
clock edge. These edges are determined as per Table 29 and examples of read command without and with address self-increment.
Figure 13. Protocol for Serial Data Read with Length = 1
      CS
   SCLK
     SDI                                1          A6     A5   A4     A3     A2 A1      A0
    SDO                                                                                       D7   D6      D5     D4 D3     D2     D1 D0
                                                                                              Data D7 – D0 at
                                                                                             Address A4..A0 is
                                                                                                 read here
Figure 14. Protocol for Serial Data Read with Length = 4
         CS
       SCLK
                            A A A A A A A
        SDI              1
                            6 5 4 3 2 1 0
                                                       D D D D D D D D D D D D D D D D D D D D D D D D D D D DD D D D D D D D D D D D
       SDO                                             7 6 5 4 3 2 1 0 7 6 5 4 3 2 1 0 7 6 5 4 3 2 1 0 7 6 5 43 2 1 0 7 6 5 4 3 2 1 0
                                               Data D7-D0 at     Data D7-D0 at    Data D7-D0 at     Data D7-D0 at    Data D7-D0 at
                                             Address A4-A0 Address A4-A0 +1 Address A4-A0 +2 Address A4-A0 +3 Address A4-A0 +4
                                                is read here      is read here     is read here      is read here     is read here
www.ams.com/AS8510                                                               Revision 3.8                                             26 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
7.8.4     Timing
In the following timing waveforms and parameters are exposed.
Figure 15. Write Timing for Writing
      CS
                                                                                                            ...
                                  tCPS t CPHD       tSCLKH           tSCLKL
                                                                                                                     tCSH
     SCLK                                     CLK                                                           ...
                                           polarity
                                                          tDIS     tDIH
     SDI                                                       DATAI                        DATAI           ...   DATAI
     SDO                                                                                                    ...
Figure 16. Read Timing for Reading
          CS
                                                      tSCLKH           tSCLKL
       SCLK
         SDI                    DATAI                          DATAI
                                                                                                       tDOD                 t DOHZ
         SDO                                                                               DATAO (D7 )          DATAO (D0 )
www.ams.com/AS8510                                                            Revision 3.8                                         27 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
7.8.5     SPI Interface Timing
Table 32. SPI Interface Timing
    Symbol                                        Parameter                Conditions               Min Typ Max Units
 General
     BRSPI                                         Bit rate                                                   1 Mbps
    TSCLKH                                    Clock high time                                       400          ns
     TSCLKL                                    Clock low time                                       400          ns
 Write timing
       tDIS                               Data in setup time                                         20          ns
       tDIH                                 Data in hold time                                        20          ns
      TCSH                                      CS hold time                                         20          ns
 Read timing
      tDOD                                     Data out delay                                               80   ns
     tDOHZ                  Data out to high impedance delay   Time for the SPI to release the SDO           80  ns
                                                                                 bus
 Timing parameters when entering 4-Wire SPI mode (for determination of CLK polarity)
                                            Clock setup time  Setup time of SCLK with respect to CS
      tCPS                                                                                           20          ns
                                               (CLK polarity)               falling edge
                                              Clock hold time Hold time of SCLK with respect to CS
     tCPHD                                                                                           20          ns
                                               (CLK polarity)               falling edge
www.ams.com/AS8510                                                     Revision 3.8                              28 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
7.9 Control Register
This section describes the control registers used in AS8510. Registers can be broadly classified into the following categories.
 Data access registers
 Status Registers
 Digital signal path control registers
 Digital Control registers
 Analog Control Registers
Table 33. Control Registers
   Addr in                        Register Name       POR Value     R/W                         8-bit Control / Status Data
    HEX
 Data Access Registers
                                        DREG_I1
      00                                              0000_0000       R      D[7:0]      Denotes the Current ADC MSB Byte (ADC_I[15:8])
                     (ADC Data Register for Current)
                                        DREG_I2
      01                                              0000_0000       R      D[7:0]       Denotes the Current ADC LSB Byte (ADC_I[7:0])
                     (ADC Data Register for Current)
                                        DREG_V1
      02                                              0000_0000       R      D[7:0]      Denotes the Voltage ADC MSB Byte (ADC_V[15:8])
                     (ADC Data Register for Voltage)
                                        DREG_V2
      03                                              0000_0000       R      D[7:0]       Denotes the Voltage ADC LSB Byte (ADC_V[7:0])
                     (ADC Data Register for Voltage)
 Status Registers
                                                                              D[7]                      NOM1/NOM2 Data Ready
                                                                              D[6]                     NOM2 Threshold Crossover
                                                                              D[5]                          SBM1 Data Ready
                                                                              D[4]                     SBM2 Threshold Crossover
      04                           STATUS_REG         0000_0000       R
                                                                              D[3]                             APOR status
                                                                              D[2]                 Data from current channel updated
                                                                              D[1]                 Data from voltage channel updated
                                                                              D[0]                               Reserved
www.ams.com/AS8510                                                  Revision 3.8                                                     29 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Table 33. Control Registers
   Addr in                        Register Name   POR Value  R/W                   8-bit Control / Status Data
    HEX
 Digital Signal Path Control Registers for Current Channel
                                                                              This bit selects decimation rate is used for current
                                                                              channel. Default is 0 (Down Sampling Rate is 64)
                                                                       D[7]
                                                                                0               Down Sampling Rate is 64
                                                                                1               Down Sampling Rate is 128
                                                                             These two bits select division ratio of oversampling
                                                                             frequency clock MOD_CLK to be used as chopper
                                                                                              clock, CHOP_CLK.
                                                                                         Default is “10” (divide by 512)
                                                                      D[6:5]   00               Chopper Clock Always High
                                                                               01                       Divide by 256
                                                                               10                       Divide by 512
                                                                               11                      Divide by 1024
                                                                             These four bits select the decimation ratio of second
                                                                                   CIC stage. Default is “0010” (equal to 4)
                                                                             0000                               1
                                                                             0001                               2
                                                                             0010                               4
                                                                              0011                              8
      05                         DEC_REG_R1_I     0100_ 0101 R/W
                                                                             0100                              16
                                                                             0101                              32
                                                                              0110                             64
                                                                      D[4:1]  0111                            128
                                                                             1000                             256
                                                                             1001                             512
                                                                             1010                            1024
                                                                              1011                           2048
                                                                              1100                           4096
                                                                              1101                           8192
                                                                              1110                          16384
                                                                              1111                          32768
                                                                                   CIC1 Saturation Interrupt Mask Control.
                                                                                                   Default is 1
                                                                       D[0]
                                                                                0                          Unmask
                                                                                1                            Mask
www.ams.com/AS8510                                           Revision 3.8                                                     30 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Table 33. Control Registers
   Addr in                        Register Name   POR Value R/W                     8-bit Control / Status Data
    HEX
                                                                      D[7]            I-Channel Enable, Default 1=enable
                                                                      D[6]            V-Channel Enable, Default 1=enable
                                                                                                Interrupt polarity
                                                                      D[5]      0                        Active high
                                                                                1                        Active low
                                                                              . Interrupt Mask Control for Current Channel Data
                                                                                    Ready Interrupt on INT pin (Default is 0)
                                                                      D[4]      0                        Unmasked
                                                                                1                          Masked
                                                                            These two bits select the source of output 16-bit data in
     06                          DEC_REG_R2_I     1100_0101 R/W               Normal mode from Current channel. Default is 01
                                                                               00                     FIR / MA Output
                                                                     D[3:2]    01                       CIC2 Output
                                                                               10                  Dechop/Demod Output
                                                                               11                       CIC1 Output
                                                                            These two bits select the source of output 16-bit data in
                                                                                SBM mode from Current channel. Default is 01
                                                                               00                     FIR / MA Output
                                                                     D[1:0]    01                       CIC2 Output
                                                                               10                  Dechop/Demod Output
                                                                               11                       CIC1 Output
www.ams.com/AS8510                                          Revision 3.8                                                       31 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Table 33. Control Registers
   Addr in                        Register Name   POR Value R/W                   8-bit Control / Status Data
    HEX
                                                                            This bit selects FIR / MA Filter in Current channel.
                                                                                              Default is 0 (FIR)
                                                                      D[7]    0                             FIR
                                                                              1                          MA Filter
                                                                             These bits select the number of data samples for
                                                                                averaging in MA filter in Current channel.
                                                                                          Default is 0000 (bypass)
                                                                            0000                          bypass
                                                                     D[6:3] 0001                             1
                                                                            0011                             3
     07                          FIR CTL_REG_I    0000_0100 R/W             0111                             7
                                                                            1111                            15
                                                                               These two bits select the Measurement Path
                                                                            architecture in both Current and Voltage channels.
                                                                                    Default is 10 (Dechopper after CIC)
                                                                             00                  Demodulator after CIC1
                                                                     D[2:1]  01                 Demodulator before CIC1
                                                                                                  Dechopper after CIC1
                                                                             10
                                                                                               (preferred and suggested)
                                                                             11          Demodulator before CIC1 with settled
                                                                                                          sample
                                                                      D[0]          Reserved. Default 0. Do not change
www.ams.com/AS8510                                          Revision 3.8                                                    32 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Table 33. Control Registers
   Addr in                        Register Name      POR Value R/W                       8-bit Control / Status Data
    HEX
 Digital Control Registers
                                                                                Oversampling frequency clock selection. Default is 00
                                                                                             (high speed (HS) internal Clock)
                                                                        D[7:6]      00          Internal HS Clock with No Clock Output
                                                                                    01            Internal HS Clock with Clock Output
                                                                                    10                        External Clock
                                                                                  These two bits select the division ratio for HS clock/
                                                                                       external clock. Default is 10 (division by 4)
                                                                                    00                           No division
                                                                        D[5:4]      01                           Divide by 2
                                                                                    10                           Divide by 4
                                        CLK_REG                                     11                           Divide by 8
      08                                             0010_0000 R/W
                            (Clock Control Register)                            These two bits select the division ratio of HS clock, by
                                                                                 which it should be divided before providing it on CLK
                                                                                              pin. Default is 00 (No Division)
                                                                                    00                           No Division
                                                                        D[3:2]
                                                                                    01                           Divide by 2
                                                                                    10                           Divide by 4
                                                                                    11                           Divide by 8
                                                                                       This bit selects the division ratio of LS clock
                                                                         D[1]        0           LS _CLK undivided (Low Speed clock)
                                                                                     1                      LS _CLK divide by 2
                                                                         D[0]                              Reserved
                                                                                 Entire device can be soft reset by writing “0” into this
                                                                         D[7]  register bit. This bit will take a default 1 value on coming
                                                                                                        out of Reset
                                    RESET_REG
      09                                             1100_0000 R/W              Measurement Path can be soft reset by writing “0” into
                            (Reset Control Register)                     D[6]   this register bit. This bit will take a default 1 value after
                                                                                                Measurement Path is reset.
                                                                        D[5:0]                             Reserved
www.ams.com/AS8510                                             Revision 3.8                                                            33 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Table 33. Control Registers
   Addr in                        Register Name       POR Value R/W                       8-bit Control / Status Data
    HEX
                                                                                These two bits select the operating mode of the Device.
                                                                                               Default is 00 (Normal Mode 1)
                                                                                    00                        Normal Mode 1
                                                                         D[7:6]     01                        Normal Mode 2
                                                                                    10                       Standby Mode 1
                                                                                     11                      Standby Mode 2
                                                                                   These three bits select the number of cycles to be
                                                                                  ignored before comparison with the set threshold in
                                                                                      Standy Mode. Default is 000 (3 cycles of data)
                                                                                   000                       3 cycles of data
                                                                                   001                       4 cycles of data
                                                                                   010                       5 cycles of data
                                                                         D[5:3]
                                                                                    011                       6cycles of data
                                                                                   100                       7 cycles of data
                                                                                   101                       8 cycles of data
                                 MOD_CTL_REG
     0A                                               0000_0000 R/W                 110                      9 cycles of data
                           (Mode Control Registers)
                                                                                    111                      10 cycles of data
                                                                                      This bit controls the CHOP_CLK availability on
                                                                                                      CHOP_CLK pin.
                                                                                                         Default is 0
                                                                          D[2]
                                                                                      0                          Disabled
                                                                                      1                           Enabled
                                                                                     Enabling the MEN pin to indicate transition from
                                                                                                 Standby to Normal Mode.
                                                                          D[1]        0                          Disabled
                                                                                      1                           Enabled
                                                                                 This bit is used to take the device from STOP state to
                                                                                   any of the Modes based on D[7:6] selection of this
                                                                                                           register.
                                                                          D[0]        0                   Retain in STOP state
                                                                                      1         Enables transition to Normal or Standby
                                                                                                                  Modes.
                                                                                          Unit of Ta in SBM1/SBM2. Default is 1
                                 MOD_Ta_REG1                              D[7]        0                   Unit is in milliseconds
     0B                                               1000_0000
                             (Ta Control Register)                                    1                     Unit is in seconds
                                                                         D[6:0]                       MSB value of Ta
                                 MOD_Ta_REG2                                                     Unit of Ta in SBM1/SBM2
     0C                                               0000_0000 R/W      D[7:0]
                             (Ta Control Register)                                                    LSB value of Ta
                                 MOD_ITH_REG1
     0D                                               0000_0000 R/W      D[7:0]         MSB bits of 16 bits SBM2 threshold register
                         (Current Threshold Register)
                                 MOD_ITH_REG2
     0E                                               0000_0000 R/W      D[7:0]         LSB bits of 16 bits SBM2 threshold register
                         (Current Threshold Register)
www.ams.com/AS8510                                              Revision 3.8                                                        34 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Table 33. Control Registers
   Addr in                        Register Name      POR Value R/W                      8-bit Control / Status Data
    HEX
                                MOD_TMC_REG1                                    MSB value of number of data samples to be dropped
     0F                                              0000_0000 R/W      D[7:0]      from ADC before sending Interrupt in NOM2
                             (TMC Control Registers)
                                MOD_TMC_REG2                                    LSB value of number of data samples to be dropped
     10                                              0000_0000 R/W      D[7:0]       from ADC before sending Interrupt in NOM2
                              (TMC Control Register)
     11                          NOM_ITH_REG1        0000_0000 R/W      D[7:0]   Eight MSB bits of NOM2 current threshold register
     12                          NOM_ITH_REG2        0000_0000 R/W      D[7:0]   Eight LSB bits of NOM2 current threshold register
 Analog Control Registers
                                                                                Setting of Gain G of Current Channel PGA. Default is
                                                                                                      01 (G = 25)
                                                                                   00                             5
                                                                        D[7:6]     01                            25
                                                                                   10                            40
                                                                                   11                           100
                                 PGA_CTL_REG
     13                                              0101_0000 R/W             Setting of Gain G in Voltage channel. Default is 01 (G =
                            (PGA Control Registers)                                                       25)
                                                                                   00                             5
                                                                        D[5:4]     01                            25
                                                                                   10                            40
                                                                                   11                           100
                                                                        D[3:0]                          Reserved
                                                                                    0        Disable Chopper clock to Current channel
                                                                         D[7]
                                                                                    1        Enable Chopper clock to Current channel
                                                                                    0        Disable Chopper clock to Voltage channel
                                                                         D[6]
                                                                                    1        Enable Chopper clock to Voltage channel
                                                                         D[5]                          Reserved
                                                                         D[4]                          Reserved
                                PD_CTL_REG_1
     14                                              1100_1111 R/W                  0              Disable Current channel PGA
                      (Power Down Control Register)                      D[3]
                                                                                    1              Enable Current channel PGA
                                                                                    0         Disable Current channel ΣΔ Modulator
                                                                         D[2]
                                                                                    1          Enable Current channel ΣΔ Modulator
                                                                                    0              Disable Voltage channel PGA
                                                                         D[1]
                                                                                    1              Enable Voltage channel PGA
                                                                                    0         Disable Voltage channel ΣΔ Modulator
                                                                         D[0]
                                                                                    1          Enable Voltage channel ΣΔ Modulator
www.ams.com/AS8510                                             Revision 3.8                                                       35 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Table 33. Control Registers
   Addr in                        Register Name     POR Value R/W              8-bit Control / Status Data
    HEX
                                                                             0            Disable CIC1 of both channels
                                                                        D[7]
                                                                             1            Enable CIC1 of both channels
                                                                             0            Disable CIC2 of both channels
                                                                        D[6]
                                                                             1            Enable CIC2 of both channels
                                                                             0        Disable Dechopper in both channels
                                                                        D[5]
                                                                             1         Enable Dechopper in both channels
                                                                             0             Disable FIR in both channels
                                                                        D[4]
                                                                             1             Enable FIR in both channels
                                PD_CTL_REG_2                                         Do not bypass PGA in Current Channel
     15                                             1111_0011 R/W            0
                      (Power Down Control Register)                                                  Default 0
                                                                        D[3]
                                                                             1           Bypass PGA in Current Channel
                                                                                     Do not bypass PGA in Voltage Channel
                                                                             0
                                                                        D[2]                         Default 0
                                                                             1           Bypass PGA in Voltage Channel
                                                                             0          Disable Current Channel Chopper
                                                                        D[1]
                                                                             1          Enable Current Channel Chopper
                                                                             0          Disable Voltage Channel Chopper
                                                                        D[0]
                                                                             1          Enable Voltage Channel Chopper
                                                                             0         Disable Common Mode Reference
                                                                        D[7]
                                                                             1          Enable Common Mode Reference
                                                                             0           Disable Internal Current Source
                                                                        D[6]
                                                                             1           Enable Internal Current Source
                                                                             0         Disable Internal temperature sensor
                                                                        D[5]
                                                                             1         Enable Internal temperature sensor
                                PD_CTL_REG_3
     16                                             1111_1000           D[4]    Reserved. (Default 1) Do not change
                      (Power Down Control Register)
                                                                        D[3]    Reserved. (Default 1) Do not change
                                                                             0       Data Output in binary numbering system
                                                                        D[2]       Data Output in 2’s complement numbering
                                                                             1                        system
                                                                        D[1]    Reserved. (Default 0) Do not change
                                                                        D[0]                  Reserved
www.ams.com/AS8510                                            Revision 3.8                                              36 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Table 33. Control Registers
   Addr in                        Register Name      POR Value R/W                     8-bit Control / Status Data
    HEX
                                                                               These bits specify the selection of voltage/temperature
                                                                                                   in Voltage Channel
                                                                                            Default is 00 (Voltage Channel)
                                                                                   00                      Voltage Channel
                                                                        D[7:6]
                                                                                   01           External Temperature Channel ETR
                                                                                   10           External Temperature Channel ETS
                                                                                   11               Internal Temperature Channel
                                                                         D[5]           Reserved. (Default 0) Do not change
                                                                                  Internal current source switch enable. Default is 0
                                                                               Note: D4 bit is used for Enabling current source to
                                                                                         the channel selected by bits D[7,6] of this
                                 ACH_CTL_REG                             D[4]
     17                   (Analog Channel Selection  0000_0000 R/W                       register.
                                         Register)                                  0                          Disabled
                                                                                    1                          Enabled
                                                                               Enable/disable Internal current source to RSHH pin of
                                                                                                     Current channel
                                                                         D[3]       0                          Disabled
                                                                                    1                          Enabled
                                                                                Enable/disable current source switch to RSHL pin of
                                                                                                     Current channel
                                                                         D[2]       0                          Disabled
                                                                                    1                          Enabled
                                                                        D[1:0]                           Reserved
                                                                                These three bits specify the selection of magnitude of
                                                                                 current from the Internal current source. Default is
                                                                                                       00000 (0µA).
                                                                                00000                             0µA
                                                                                00001                            8.5µA
                                  ISC_CTL_REG                           D[7:3]  00010                            17µA
     18                                              0000_0000 R/W
                   (Current Source Setting Register)                            00100                           34.5µA
                                                                                01000                            68µA
                                                                                10000                           135µA
                                                                                 11111                          270µA
                                                                        D[2:0]                           Reserved
                                                                         D[7]       1          Reserved (default = 1) Do not change
     19                           OTP_EN_REG         0000_0000 R/W
                                                                        D[6:0]                           Reserved
                                                                         D[7]    Status indicating data saturation in Current channel
     44                         STATUS_REG_2         0000_0000  R        D[6]    Status indicating data saturation in Voltage channel
                                                                        D[5:0]                           Reserved
www.ams.com/AS8510                                             Revision 3.8                                                        37 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Table 33. Control Registers
   Addr in                        Register Name    POR Value  R/W                    8-bit Control / Status Data
    HEX
 Digital Signal path control registers for Voltage Channel
                                                                              Selection of Decimation ratio for Voltage/Temperature
                                                                                                     channel.
                                                                        D[7]         Default is 0 (Down Sampling Rate is 64)
                                                                                 0                 Down Sampling Rate is 64
                                                                                 1                Down Sampling Rate is 128
                                                                                Division of oversampling clock, which is used as
                                                                                  Chopper Clock. Default is 10 (divide by 512)
                                                                                00                Chopper Clock Always High
                                                                       D[6:5]   01                      Divide by 256
                                                                                10                      Divide by 512
                                                                                11                     Divide by 1024
                                                                                  Decimation ratio of CIC2. Default is 0010 (4)
                                                                               0000                              1
                                                                               0001                              2
                                                                               0010                              4
                                                                               0011                              8
      45                        DEC_REG_R1_V       0100_ 0101 R/W              0100                             16
                                                                               0101                             32
                                                                               0110                             64
                                                                       D[4:1]  0111                            128
                                                                               1000                           256
                                                                               1001                           512
                                                                               1010                           1024
                                                                               1011                           2048
                                                                               1100                           4096
                                                                               1101                           8192
                                                                               1110                          16384
                                                                               1111                          32768
                                                                                     CIC1 Saturation Interrupt Mask Control.
                                                                                                    Default is 1
                                                                        D[0]
                                                                                 0                        Unmasked
                                                                                 1                          Masked
www.ams.com/AS8510                                            Revision 3.8                                                    38 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Table 33. Control Registers
   Addr in                        Register Name       POR Value       R/W                            8-bit Control / Status Data
    HEX
                                                                                 D[7:5]                              Reserved
                                                                                            Interrupt Mask Control for Voltage channel data Ready
                                                                                                         Interrupt on INT pin (Default is 0)
                                                                                  D[4]           0                          Unmasked
                                                                                                 1                           Masked
                                                                                            These two bits select the source of output 16-bit data in
     46                         DEC_REG_R2_V          0000_0100       R/W                      Normal mode from Voltage channel. Default is 01
                                                                                                00                       FIR / MA Output
                                                                                 D[3:2]         01                         CIC2 Output
                                                                                                10                  Dechop/Demod Output
                                                                                                11                         CIC Output
                                                                                 D[1:0]                              Reserved
                                                                                               This bit selects FIR / MA Filter in Voltage channel.
                                                                                                                 Default is 0 (FIR)
                                                                                  D[7]           0                             FIR
                                                                                                 1                           MA Filter
                                                                                                These bits select the number of data samples for
                                                                                                    averaging in MA filter in Voltage channel.
                                                                                                              Default is 0000 (bypass)
     47                         FIR CTL_REG_V         0000_0000       R/W
                                                                                              0000                           bypass
                                                                                 D[6:3]       0001                               1
                                                                                               0011                              3
                                                                                               0111                              7
                                                                                               1111                             15
                                                                                 D[2:0]                              Reserved
Note: All the registers from address 0x19 to 0x2C are read-only.
There is an OTP test lock bit set by factory which locks the write access to all the test registers from 0x1A to 0x2C.
www.ams.com/AS8510                                                    Revision 3.8                                                             39 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
7.9.1      Standby Mode - Power Consumption
In Standby Mode 1 there is a timer based accurate measurement every Ta seconds. The device itself stays in idle-mode as long as it does not
get a different command from the SPI interface. Internal oscillator frequency is typically foscint=262 kHz to reduce power consumption as long as
the timer runs. After every time out of Ta secs, it performs accurate measurement of current, voltage/ temperature. Data ready is signaled to
microcontroller through an interrupt signal on INT and goes into STOP state.
In the SBM the following equations hold:
  Tsbm1 = Ta= 10s (default value is 10secs); the power consumption is valid for this setting. This is the period of the repetition rate     in SBM 1
       and SBM2.
  Tsett ≈ 2ms (depending on external capacitors). This is the time required by the analog part to settle when the new measuring period is
       started. Any measurements performed during Tsett produce invalid results.
  T1 = 3ms (by default setting, every third measurement is sent to microcontroller in the SBM mode 1) is the time needed to perform the first
       measurement.
  Tmeas =Tsett +T1 is the total active time needed to get a valid result.
  DRSBM        = Tmeas/Tsbm ≈ 5ms/10s. This is the ratio of repetition time versus the active time (Device in NOM mode).
Power consumption = (DRSBM*NOM mode power consumption) + ((10s-5ms)/10s)*Stop mode power consumption)
7.9.2      Initialization Sequence at Power ON
Figure 17. AS8510 Device Initialization Sequence at Power ON
             VPORHID/VPORHIA
           DVDD/AVDD
           POR_N                                      Start
                                                      ADC   1.5mS    TADC
              INT
                                       500µS                      D1  D2    D3   D4        D1        D2         D3 D4         D1     D2   D3 D4
                                                  Configure
                                                   Device
        CHOP_CLK
         Channel Data                                                0x0000                         DATA1                           DATA2
           Register
                                                                                    TDATA_STATUS_RD                   TDATA_INVALID
                                                                                                     TDATA_VALID
Device initialization starts if the DVDD and AVDD supplies are switched ON and DVDD > VPORHID. The duration period of Initialization is 500μsec
and during this period, INT pin toggles at the rate of internal low power oscillator. Toggling on INT during the period of initialization should be
ignored in the system. Device configuration and activation should be carried out only after the initialization period.
On ADC start, device enters into analog stabilization state and takes 1.5msec for oscillator and Reference to settle. After this 1.5msec period, the
first interrupt will occur after a time period of TADC.
TDATA_STATUS_RD is the time period during which the micro-controller should complete reading of data and status from the device. If reading is
carried out beyond this time period, then, ADC performance will degrade for next sample generation. Status register gets cleared automatically
only when micro-controller reads this register. Data in the channel registers is changed after TDATA_VALID duration. Ensure that data channel
registers and status registers are not read during the TDATA_INVALID duration.
www.ams.com/AS8510                                                             Revision 3.8                                                       40 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Example:
Configuration registers are set as follows:
     CLK_REG = 8’b0010_0000
     DEC_REG_R1_I = 0100_0101
     DEC_REG_R2_I = 1100_0101
     FIR_CTL_REG_I = 0000_0100
ADC is configured to a data rate of 1KHz, CHOP_CLK to 2KHz, and Modulator clock to 1MHz, Decimation ratio of CIC1 = 64, and Decimation
ratio of CIC2 = 4. With these settings the various time periods as shown in the Figure 17 are as follows:
     TDATA_STATUS_RD = 100 μsec
     (TDATA_STATUS_RD = (1/mod_clk) * R1 * [((mod_clk/(2*chop_clk))*(1/R1)) - 2.5)
     TDATA_INVALID = 8 μsec
     TADC = 1msec
     TDATA_VALID = TADC - TDATA_INVALID = 1msec - 8 μsec
     CHOP_CLK and POR_N are internal signals of the device.
Table 34 provides valid combinations of Modulator clock, Chopper clock and Decimation R1 and the corresponding values of TDATA_STATUS_RD and
TADC.
Table 34. Valid Combinations of Modulator Clock, Chopper Clock and Decimation Ratio R1
                                                                                                                                          TADC
                                   Chopper Frequency
     Modulator Clock                                   Decimation Ratio R1                      TDATA_STATUS_RD                   R2/(2*CHOP_CLK)
                                             CHOP_CLK
                                                                                                                                       for R2=4
         1.024MHz                                 2KHz           64                     1usec * 64 * [4 - 2.5] = 96usec                 1mSec
                                                                                      0.5usec * 64 * [8 - 2.5] = 176usec
         2.048MHz                                 2KHz           64                                                                     1mSec
                                                                                      0.5usec * 128 * [4 - 2.5] = 96usec
         2.048MHz                                 2KHz          128                                                                     1mSec
                                                                                       0.5usec * 64 * [4 - 2.5] = 48usec
         2.048MHz                                 4KHz           64                                                                    0.5mSec
7.9.3      Soft-reset of Device Using Bit D[7] of Reset Register 0x09
It is possible to soft-reset the device by writing “0” into D[7] bit of Reset Register at 0x09. On applying soft-reset, the device enters into
initialization state and D[6] bit changes back to “1”. The duration period of Initialization is 500μsec, and, during this period, INT pin toggles at the
rate of internal low power oscillator. Toggling on INT during the period of initialization should be ignored in the system. Device configuration and
activation should be carried out only after the initialization period. See Figure 18 for the timing details of the sequence of device initialization on
soft-reset.
www.ams.com/AS8510                                                         Revision 3.8                                                           41 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
Figure 18. AS8510 Device Initialization Sequence at Soft-reset
                                                                                      Start
                                                                                      ADC 1.5mS
            INT
                                                                            500µS
                 D4         D1          D2        D3  D4       D1 Soft Reset      Re-Configure
                                                                                                        D1          D2           D     D4      D1      D2        D3      D4      D1        D2    D3  D4
                                                                    Using D7        Device                                       3
     CHOP_CLK
   Channel Data                      DATA-N              DATA-N+1                              0x0000                                                 DATA1                               DATA2
      Register         TDATA_STATUS_RD                                                                                                    TDATA_STATUS_RD
                                                          TDATA_INVALID                                                                                                     TDATA_INVALID
                                 TDATA_VALID                                                                                                        TDATA_VALID
7.9.4      Soft-reset of the Measurement Path Using Bit D[7] of Reset Register 0x09
Measurement path also can be reset by using D[6] bit of Reset Register at 0x09. On applying soft-reset only signal measurement path registers
will be reset. For applying this reset, device should be in STOP state. If the device is working with external clock, at the time of soft-reset the
clock needs to be disabled.
7.9.5      Reconfiguring Gain Setting of PGA
Only PGA gain settings can be changed dynamically while ADC conversions are in progress. When PGA gain settings are changed, the first
sample from the ADC is invalid. Ignore the first interrupt after the gain re-configuration. Valid data starts from the second interrupt onwards.
Figure 19. AS8510 - Re-configuration of Gain Setting of PGA
                                                                                                  Gain Re-Configuration can be
                                                                Read Channel                     carried out in this slot, skip next
                                                                data in this slot                  interrupt and Channel Data.
                                                                                                                                                             VALID
                                                                                                                                                             DATA
                                                                               TDATA_STATUS_RD
          INT
                  D4          D1              D2     D3        D4            D1             D2       D3             D4            D1      D2         D3         D4         D1        D2       D3    D4
   CHOP_CLK
  Channel Data
                                          DATA-N                      DATA-N+1                                                           DATA1                                      DATA2
     Register            TDATA_STATUS_RD                                                                                  TDATA_STATUS_RD
                                                      TDATA_INVALID                                                                                                TDATA_INVALID
                                         TDATA_VALID                                                                                    TDATA_VALID
www.ams.com/AS8510                                                                                     Revision 3.8                                                                                   42 - 48


AS8510
Datasheet - D e t a i l e d D e s c r i p t i o n
7.9.6     Configuring the Device During Normal Mode
Following registers can be programmed dynamically when the device is in operational mode (Normal mode).
 ACH_CTL_REG address is 0x17 for channel selection on the voltage measurement path
 PGA_CTL_REG address is 0x13 for gain setting
 PD_CTL_REG2 address is 0x15 for PGA Bypass
 ISC_CTL_REG address is 0x18 for current source programmability
During the operation (Normal mode) of the device, if any of the registers need to be programmed or changed other than the above mentioned
registers, then it is required to STOP the device by writing into MOD_CTL_REG “STOP” bit and configure the device as per the requirements and
start the device.
7.10 Low Side Current Measurement Application
Figure 20. Application Diagram
                                                       RSHH                                           INT
                                                       RSHL                                           CLK
                                                       REF                                            SDI
         100nF
                                                       VCM                                           MEN
                100nF                            3.3V
                                                                        AS8510
                                                       AVDD                                    CHOP_CLK
                                                                            20 pin
                                                  1µF                     (SSOP20)
                                                                                                              3.3V
                                                       AVSS                                         DVDD                       1µF
             +12V
                          481 R
                                                       ETR                                          DVSS
                         R                             ETS                                           SDO
                                                       VBAT_IN                                      SCLK
                                                       VBAT_GND                                        CS
                                    100 µohm
           +                   -                          Load                                                         µC
                 12V
              Battery                                  Note: On ETR connect constant resistor (temp co = 0)
                                                      On ETS connect Temperature sensor (use sensor resistor more than 10K)
www.ams.com/AS8510                                                            Revision 3.8                                             43 - 48


AS8510
Datasheet - P a c k a g e D r a w i n g s a n d M a r k i n g s
8 Package Drawings and Markings
The product is available in a 20-pin SSOP package.
Figure 21. Drawings and Dimensions
                                                                                  Symbol Min    Nom    Max
                                                                                    A      -       -   2.00
                                                                                    A1   0.05      -     -
                                                                                    A2   1.65    1.75  1.85
                                                                                     b   0.22      -   0.38
                                                                                     c   0.09      -   0.25
                                                                                    D    6.90    7.20  7.50
                                                                                    E    7.40    7.80  8.20
                                                                                    E1   5.00    5.30  5.60
                                AS8510 @
                                                                                     e     -  0.65 BSC   -
                                YYWWMZZ                                              L   0.55    0.75  0.95
                                         18320                                      L1     -  1.25 REF   -
                                                                                    L2     -  0.25 BSC   -
                                                                                    R    0.09      -     -
                                                                                    θ     0º      4º    8º
                                                                                    N             20
                                                                                RoHS            Green
Notes:
      1. Dimensions & tolerancing conform to ASME Y14.5M-1994.
      2. All dimensions are in millimeters. Angles are in degrees.
www.ams.com/AS8510                                                 Revision 3.8                             44 - 48


AS8510
Datasheet - P a c k a g e D r a w i n g s a n d M a r k i n g s
Marking: @YYWWMZZ.
         @                                       YY                    WW                      M                             ZZ
  Sublot Identifier       Last two digits of the current year   Manufacturing Week   Assembly Plant Identifier     Letters of free choice
8.1 Recommended PCB Footprint
Figure 22. PCB Footprint
                                                                                       Recommended Footprint Data
                                                                                       Symbol                  mm
                                                                                          A                    9.02
                                                                                          B                    6.16
                                                                                         C                     0.46
                                                                                         D                     0.65
                                                                                          E                    6.31
www.ams.com/AS8510                                                      Revision 3.8                                                45 - 48


AS8510
Datasheet - R e v i s i o n H i s t o r y
Revision History
       Revision                                Date                                              Description
            1.1                            Jun 22, 2009                                         Initial version
                                          Dec 02, 2009  Updated the datasheet according to 1.8 specification
                                                        Following modifications carried out in Table 27:
            1.2                                         1) Deleted Max value for parameter ‘Temperature upper limit’
                                          Dec 08, 2009
                                                        2) Added Footnote 2
                                                        3) Added new parameter ‘Temperature Sensor Output (without gain calibration)
                                                        Updated Table 15 with PGA information
                                                        Updated Voltage Measurement
            1.3                           Feb 19, 2010
                                                        Updated VREFand VIN values in Table 17 and VREF in Table 18
                                                        Inserted new Table 28 - System Measurement Error Budget
                                                        Changed the pin name AGND to VCM
                                                        Current source added in the block diagram
                                                        Added application diagram
            2.0                           June 01, 2010
                                                        Updated Electrical Characteristics on page 7
                                                        Updated Detailed System and Block Specifications on page 9
                                                        Updated Standby Mode - Power Consumption on page 40
            3.0                            Oct 29, 2010 Updates carried out across the datasheet
            3.1                           Nov 02, 2010  Updated Ref Voltage Offset in Table 18
            3.2                           Nov 14, 2010  Added sections 7.9.2, 7.9.3, 7.9.5
                                          Nov 26, 2010  Formatted figures 17, 18 in portrait mode. Index modified from page 39
            3.3
                                          Dec 03, 2010  Added Configuring the Device During Normal Mode on page 43
                                                        Updated General Description, Key Features, Applications, Pin Descriptions, Current
                                                        Measurement Ranges, Differential Input Amplifier for Current Channel, Differential Input
            3.4                            Mar 01, 2011 Amplifier for Voltage Channel, Sigma Delta Analog to Digital Converter, Bandgap
                                                        Reference Voltage, System Measurement Error Budget for Gains 5 and 25, Package
                                                        Drawings and Markings. Deleted Voltage Measurement.
                                                        Updated Table 14, Figure 5, Table 19, Table 18, Section 7.9.6, Figure 20. Added Section
                                          Aug 05, 2011
            3.5                                         7.9.4
                                          Dec 31, 2012  Updated ordering table
            3.6                           Feb 07, 2013  Additional information added to System Specifications section.
                                                        Updated Table 13, Table 15, description of Figure 4, note of Table 33, Figure 21, Figure 3
            3.7                           Feb 27, 2014
                                                        and its description.
Note: Typos may not be explicitly mentioned under revision history.
www.ams.com/AS8510                                                        Revision 3.8                                                        46 - 48


AS8510
Datasheet - O r d e r i n g I n f o r m a t i o n
9 Ordering Information
The devices are available as the standard products shown in Table 35.
Table 35. Ordering Information
       Ordering Code                                              Description                           Delivery Form         Package
       AS8510-ASSP                                Data Acquisition Device for Battery Sensors      Tape and Reel (2000 pcs) 20-pin SSOP
       AS8510-ASSM                                Data Acquisition Device for Battery Sensors       Tape and Reel (500 pcs) 20-pin SSOP
Note: All products are RoHS compliant and ams green.
          Buy our products or get free samples online at www.ams.com/ICdirect
          Technical Support is available at www.ams.com/Technical-Support
          For further information and requests, e-mail us at ams_sales@ams.com
          For sales offices, distributors and representatives, please visit www.ams.com/contact
www.ams.com/AS8510                                                                    Revision 3.8                                      47 - 48


AS8510
Datasheet - C o p y r i g h t s & D i s c l a i m e r
Copyrights & Disclaimer
Copyright ams AG, Tobelbader Strasse 30, 8141 Unterpremstaetten, Austria-Europe. Trademarks Registered. All rights reserved. The material
herein may not be reproduced, adapted, merged, translated, stored, or used without the prior written consent of the copyright owner.
Devices sold by ams AG are covered by the warranty and patent indemnification provisions appearing in its Term of Sale. ams AG makes no
warranty, express, statutory, implied, or by description regarding the information set forth herein. ams AG reserves the right to change
specifications and prices at any time and without notice. Therefore, prior to designing this product into a system, it is necessary to check with
ams AG for current information. This product is intended for use in commercial applications. Applications requiring extended temperature range,
unusual environmental requirements, or high reliability applications, such as military, medical life-support or life-sustaining equipment are
specifically not recommended without additional processing by ams AG for each application. This product is provided by ams AG “AS IS” and
any express or implied warranties, including, but not limited to the implied warranties of merchantability and fitness for a particular purpose are
disclaimed.
ams AG shall not be liable to recipient or any third party for any damages, including but not limited to personal injury, property damage, loss of
profits, loss of use, interruption of business or indirect, special, incidental or consequential damages, of any kind, in connection with or arising out
of the furnishing, performance or use of the technical data herein. No obligation or liability to recipient or any third party shall arise or flow out of
ams AG rendering of technical or other services.
Contact Information:
Headquarters
ams AG
Tobelbaderstrasse 30
8141 Unterpremstaetten
Austria, Europe
Tel: +43 (0) 3136 500 0
Website: www.ams.com
www.ams.com/AS8510                                                         Revision 3.8                                                           48 - 48


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
ams:
 AS8510-ASSM AS8510-ASSP AS8510-ASST-500
