                                                                                                            Audio Codec for Recordable DVD
                                                                                                                                  ADAV801
FEATURES                                                                                                                        FUNCTIONAL BLOCK DIAGRAM
                                                                                                                                                               SYSCLK1    SYSCLK2     SYSCLK3                                                               CLATCH
Stereo analog-to-digital converter (ADC)
                                                                                                                        XIN   XOUT   MCLKI   MCLKO                                                                                     COUT   CIN   CCLK
  Supports 48 kHz/96 kHz sample rates
  102 dB dynamic range
  Single-ended input                                                                                                                                                     PLL                                                                 CONTROL
                                                                                                                                                                                                                                            REGISTERS
  Automatic level control
                                                                                                                VINL                                                                                                                                                 OLRCLK
                                                                                                                        ANALOG-TO-DIGITAL                                                                                                           RECORD
Stereo digital-to-analog converter (DAC)                                                                        VINR       CONVERTER                                                                                                                 DATA            OBCLK
                                                                                                                                                                                                                                                    OUTPUT           OSDATA
  Supports 32 kHz/44.1 kHz/48 kHz/96 kHz/192 kHz                                                               VREF     REFERENCE                    SRC                                  DIGITAL
                                                                                                                                                                                      INPUT/OUTPUT                                                                   OAUXLRCLK
     sample rates                                                                                                                                                                   SWITCHING MATRIX                                                AUX DATA
                                                                                                                                                                                                                                                                     OAUXBCLK
                                                                                                                                                                                        (DATAPATH)                                                   OUTPUT
  101 dB dynamic range                                                                                        VOUTL
                                                                                                                        DIGITAL-TO-ANALOG
                                                                                                                                                                                                                                                                     OAUXSDATA
                                                                                                              VOUTR         CONVERTER
  Single-ended output                                                                                                                                                                                                                                      DIT       DITOUT
Asynchronous operation of ADC and DAC                                                                          FILTD
Stereo sample rate converter (SRC)                                                                                                                   PLAYBACK                                   AUX DATA
                                                                                                                                                                                                                                    DIR
                                                                                                                                                                                                                                                                     ZEROL/INT
                                                                                                                                                     DATA INPUT                                  INPUT                                                               ZEROR
  Input/output range: 8 kHz to 192 kHz                                                                                 ADAV801
  140 dB dynamic range
                                                                                                                                                                             ISDATA
                                                                                                                                                                                                                        IAUXSDATA
                                                                                                                                                      ILRCLK
                                                                                                                                                                  IBCLK                                                             DIRIN
                                                                                                                                                                                                 IAUXLRCLK   IAUXBCLK
Digital interfaces
                                                                                                                                                                                                                                                                                 04577-001
  Record
  Playback
                                                                                                                                                                                                Figure 1.
  Auxiliary record
  Auxiliary playback                                                                                          APPLICATIONS
S/PDIF (IEC 60958) input and output                                                                           DVD-recordable
  Digital interface receiver (DIR)                                                                            All formats
  Digital interface transmitter (DIT)                                                                         CD-R/W
PLL-based audio MCLK generators
Generates required DVDR system MCLKs
Device control via SPI-compatible serial port
64-lead LQFP package
GENERAL DESCRIPTION
The ADAV801 is a stereo audio codec intended for applications                                                 The sample rate converter (SRC) provides high performance
such as DVD or CD recorders that require high performance                                                     sample rate conversion to allow inputs and outputs that require
and flexible, cost-effective playback and record functionality.                                               different sample rates to be matched. The SRC input can be
The ADAV801 features Analog Devices, Inc. proprietary, high                                                   selected from playback, auxiliary, DIR, or ADC (record). The
performance converter cores to provide record (ADC), playback                                                 SRC output can be applied to the playback DAC, both main and
(DAC), and format conversion (SRC) on a single chip. The                                                      auxiliary record channels, and a DIT.
ADAV801 record channel features variable input gain to allow                                                  Operation of the ADAV801 is controlled via an SPI-compatible
for adjustment of recorded input levels and automatic level                                                   serial interface, which allows the programming of individual
control, followed by a high performance stereo ADC whose                                                      control register settings. The ADAV801 operates from a single
digital output is sent to the record interface. The record channel                                            analog 3.3 V power supply and a digital power supply of 3.3 V
also features level detectors that can be used in feedback loops                                              with an optional digital interface range of 3.0 V to 3.6 V.
to adjust input levels for optimum recording. The playback
channel features a high performance stereo DAC with                                                           The part is housed in a 64-lead LQFP package and is character-
independent digital volume control.                                                                           ized for operation over the commercial temperature range of
                                                                                                              −40°C to +85°C.
Rev. A
Information furnished by Analog Devices is believed to be accurate and reliable. However, no
responsibility is assumed by Analog Devices for its use, nor for any infringements of patents or other
rights of third parties that may result from its use. Specifications subject to change without notice. No     One Technology Way, P.O. Box 9106, Norwood, MA 02062-9106, U.S.A.
license is granted by implication or otherwise under any patent or patent rights of Analog Devices.           Tel: 781.329.4700                                 www.analog.com
Trademarks and registered trademarks are the property of their respective owners.                             Fax: 781.461.3113 ©2004–2007 Analog Devices, Inc. All rights reserved.


ADAV801
TABLE OF CONTENTS
Features .............................................................................................. 1               DAC Section................................................................................ 18
Functional Block Diagram .............................................................. 1                               Sample Rate Converter (SRC) Functional Overview ............ 19
Applications....................................................................................... 1                   PLL Section ................................................................................. 22
General Description ......................................................................... 1                         S/PDIF Transmitter and Receiver ............................................ 23
Revision History ............................................................................... 2                      Serial Data Ports ......................................................................... 27
Specifications..................................................................................... 3                Interface Control ............................................................................ 30
  Test Conditions............................................................................. 3                        SPI Interface ................................................................................ 30
  ADAV801 Specifications ............................................................. 3                                Block Reads and Writes ............................................................. 30
  Timing Specifications .................................................................. 7                         Register Descriptions ..................................................................... 31
  Temperature Range ...................................................................... 7                         Layout Considerations................................................................... 58
Absolute Maximum Ratings............................................................ 8                                  ADC ............................................................................................. 58
  ESD Caution.................................................................................. 8                       DAC.............................................................................................. 58
Pin Configuration and Function Descriptions............................. 9                                              PLL ............................................................................................... 58
Typical Performance Characteristics ........................................... 11                                      Reset and Power-Down Considerations ................................. 58
Functional Description .................................................................. 15                         Outline Dimensions ....................................................................... 59
  ADC Section ............................................................................... 15                        Ordering Guide .......................................................................... 59
REVISION HISTORY
7/07—Rev. 0 to Rev. A
Changes to Table 1............................................................................ 3
Changes to ADC Section............................................................... 15
Changes to Figure 25...................................................................... 15
Changes to Figure 33...................................................................... 21
Changes to SRC Architecture Section ......................................... 21
Changes to Table 7.......................................................................... 22
Changes to Figure 36...................................................................... 22
Changes to Figure 39 and Figure 42............................................. 23
Changes to Transmitter Operation Section ................................ 27
Changes to Interrupts Section ...................................................... 27
Changes to Figure 50...................................................................... 28
Changes to Table 97........................................................................ 46
Changes to Table 101...................................................................... 47
Changes to Table 136 and Table 137 ............................................ 55
Updated Outline Dimensions ....................................................... 59
Changes to Ordering Guide .......................................................... 59
7/04—Revision 0: Initial Version
                                                                                                    Rev. A | Page 2 of 60


                                                                                                   ADAV801
SPECIFICATIONS
TEST CONDITIONS
Test conditions, unless otherwise noted.
Table 1.
Test Parameter                           Condition
Supply Voltage
  Analog                                 3.3 V
  Digital                                3.3 V
Ambient Temperature                      25°C
Master Clock (MCLKI)                     12.288 MHz
Measurement Bandwidth                    20 Hz to 20 kHz
Word Width (All Converters)              24 bits
Load Capacitance on Digital Outputs      100 pF
ADC Input Frequency                      1007.8125 Hz at −1 dBFS
DAC Output Frequency                     960.9673 Hz at 0 dBFS
Digital Input                            Slave mode, I2S justified format
Digital Output                           Slave mode, I2S justified format
ADAV801 SPECIFICATIONS
Table 2.
Parameter                                Min          Typ            Max  Unit   Comments
PGA SECTION
  Input Impedance                                     4                   kΩ
  Minimum Gain                                        0                   dB
  Maximum Gain                                        24                  dB
  Gain Step                                           0.5                 dB
REFERENCE SECTION
  Absolute Voltage, VREF                              1.5                 V
  VREF Temperature Coefficient                        80                  ppm/°C
ADC SECTION
  Number of Channels                                  2
  Resolution                                          24                  Bits
  Dynamic Range                                                                  −60 dB input
     Unweighted                                       99                  dB     fS = 48 kHz
                                                      98                  dB     fS = 96 kHz
     A-Weighted                          98           102                 dB     fS = 48 kHz
                                                      101                 dB     fS = 96 kHz
  Total Harmonic Distortion + Noise                                              Input = −1.0 dBFS
                                                      −88                 dB     fS = 48 kHz
                                                      −87                 dB     fS = 96 kHz
  Analog Input
     Input Range (± Full Scale)                       1.0                 V rms
  DC Accuracy
     Gain Error                          −1.5         −0.8                dB
     Interchannel Gain Mismatch                       0.05                dB
     Gain Drift                                       1                   mdB/°C
     Offset                                           −10                 mV
                                                 Rev. A | Page 3 of 60


ADAV801
Parameter                                    Min          Typ            Max    Unit       Comments
  Crosstalk (EIAJ Method)                                 −110                  dB
  Volume Control Step Size (256 Steps)                    0.39                  % per step
  Maximum Volume Attenuation                              −48                   dB
  Mute Attenuation                                        ∞                     dB         ADC outputs all zero codes
  Group Delay
     fS = 48 kHz                                          910                   μs
     fS = 96 kHz                                          460                   μs
ADC LOW-PASS DIGITAL DECIMATION FILTER
CHARACTERISTICS1
  Pass-Band Frequency                                     22                    kHz        fS = 48 kHz
                                                          44                    kHz        fS = 96 kHz
  Stop-Band Frequency                                     26                    kHz        fS = 48 kHz
                                                          52                    kHz        fS = 96 kHz
  Stop-Band Attenuation                                   120                   dB         fS = 48 kHz
                                                          120                   dB         fS = 96 kHz
  Pass-Band Ripple                                        ±0.01                 dB         fS = 48 kHz
                                                          ±0.01                 dB         fS = 96 kHz
ADC HIGH-PASS DIGITAL FILTER CHARACTERISTICS
  Cutoff Frequency                                        0.9                   Hz         fS = 48 kHz
SRC SECTION
  Resolution                                              24                    Bits
  Sample Rate                                8                           192    kHz        XIN = 27 MHz
  SRC MCLK                                   138 × fS-                   33     MHz        fS-MAX is the greater of the input or
                                             MAX                                           output sample rate
  Maximum Sample Rate Ratios
     Upsampling                                                          1:8
     Downsampling                                                        7.75:1
  Dynamic Range                                           140                              20 Hz to fS/2, 1 kHz, −60 dBFS input,
                                                                                           fIN = 44.1 kHz, fOUT = 48 kHz
  Total Harmonic Distortion + Noise                       120                   dB         20 Hz to fS/2, 1 kHz, 0 dBFS input,
                                                                                           fIN = 44.1 kHz, fOUT = 48 kHz
DAC SECTION
  Number of Channels                                      2
  Resolution                                              24                    Bits
  Dynamic Range                                                                            20 Hz to 20 kHz, −60 dB input
     Unweighted                                           99                    dB         fS = 48 kHz
                                                          98                    dB         fS = 96 kHz
     A-Weighted                              97           101                   dB         fS = 48 kHz
                                                          100                   dB         fS = 96 kHz
  Total Harmonic Distortion + Noise                                                        Referenced to 1 V rms
                                                          −91                   dB         fS = 48 kHz
                                                          −90                   dB         fS = 96 kHz
  Analog Outputs
     Output Range (± Full Scale)                          1.0                   V rms
     Output Resistance                                    60                    Ω
     Common-Mode Output Voltage                           1.5                   V
  DC Accuracy
     Gain Error                              −2           −0.8                  dB
     Interchannel Gain Mismatch                           0.05                  dB
     Gain Drift                                           1                     mdB/°C
     DC Offset                               −30                         +30    mV
                                                     Rev. A | Page 4 of 60


                                                                                                       ADAV801
Parameter                                 Min       Typ            Max  Unit    Comments
  Crosstalk (EIAJ Method)                           −110                dB
  Phase Deviation                                   0.05                Degrees
  Mute Attenuation                                  −95.625             dB
  Volume Control Step Size (256 Steps)              0.375               dB
  Group Delay
     48 kHz                                         630                 μs
     96 kHz                                         155                 μs
     192 kHz                                        66                  μs
DAC LOW-PASS DIGITAL INTERPOLATION FILTER
CHARACTERISTICS
  Pass-Band Frequency                               20                  kHz     fS = 44.1 kHz
                                                    22                  kHz     fS = 48 kHz
                                                    42                  kHz     fS = 96 kHz
  Stop-Band Frequency                               24                  kHz     fS = 44.1 kHz
                                                    26                  kHz     fS = 48 kHz
                                                    60                  kHz     fS = 96 kHz
  Stop-Band Attenuation                             70                  dB      fS = 44.1 kHz
                                                    70                  dB      fS = 48 kHz
                                                    70                  dB      fS = 96 kHz
  Pass-Band Ripple                                  ±0.002              dB      fS = 44.1 kHz
                                                    ±0.002              dB      fS = 48 kHz
                                                    ±0.005              dB      fS = 96 kHz
PLL SECTION
  Master Clock Input Frequency                      27/54               MHz
  Generated System Clocks
     MCLKO                                          27/54               MHz
     SYSCLK1                              256                      768  × fS    256/384/512/768 × 32 kHz/
                                                                                44.1 kHz/48 kHz
     SYSCLK2                              256                      768  × fS    256/384/512/768 × 32 kHz/
                                                                                44.1 kHz/48 kHz
     SYSCLK3                              256       512                 × fS    256/512 × 32 kHz/44.1 kHz/
                                                                                48 kHz
  Jitter
     SYSCLK1                                        65                  ps rms
     SYSCLK2                                        75                  ps rms
     SYSCLK3                                        75                  ps rms
DIR SECTION
  Input Sample Frequency                  27.2                     200  kHz
  Differential Input Voltage              200                           mV
DIT SECTION
  Output Sample Frequency                 27.2                     200  kHz
DIGITAL I/O
  Input Voltage High, VIH                 2.0                      DVDD V
  Input Voltage Low, VIL                                           0.8  V
  Input Leakage, IIH @ VIH = 3.3 V                                 10   μA
  Input Leakage, IIL @ VIL = 0 V                                   10   μA
  Output Voltage High, VOH @ IOH = 0.4 mA 2.4                           V
  Output Voltage Low, VOL @ IOL = −2 mA                            0.4  V
  Input Capacitance                                                15   pF
                                               Rev. A | Page 5 of 60


ADAV801
Parameter                          Min      Typ            Max Unit Comments
POWER
   Supplies
      Voltage, AVDD                3.0      3.3            3.6 V
      Voltage, DVDD                3.0      3.3            3.6 V
      Voltage, ODVDD               3.0      3.3            3.6 V
   Operating Current                                                All supplies at 3.3 V
      Analog Current                                       60  mA
      Digital Current                                      38  mA
      Digital Interface Current                            13  mA
      DIRIN/DIROUT Current                  5                  mA
      PLL Current                                          18  mA
   Power-Down Current                                               RESET low, no MCLK
      Analog Current                        18                 mA
      Digital Current                       2.5                mA
      Digital Interface Current             700                μA
      DIRIN/DIROUT Current                  3.5                mA
      PLL Current                           900                μA
   Power Supply Rejection
      Signal at Analog Supply Pins          −70                dB   1 kHz, 300 mV p-p
                                            −70                dB   20 kHz, 300 mV p-p
1
  Guaranteed by design.
                                       Rev. A | Page 6 of 60


                                                                                                                                      ADAV801
TIMING SPECIFICATIONS
Timing specifications are guaranteed over the full temperature and supply range.
Table 3.
Parameter                                              Symbol           Min            Typ          Max     Unit Comments
MASTER CLOCK AND RESET
   MCLKI Frequency                                     fMCLK                           12.288       54      MHz
   XIN Frequency                                       fXIN                            27.0         54      MHz
   RESET Low                                           tRESET           20                                  ns
SPI PORT
   CCLK High                                           tCCH             40                                  ns
   CCLK Low                                            tCCL             40                                  ns
   CIN Setup                                           tCIS             10                                  ns   To CCLK rising edge
   CIN Hold                                            tCIH             10                                  ns   From CCLK rising edge
   CLATCH Setup                                        tCLS             10                                  ns   To CCLK rising edge
   CLATCH Hold                                         tCLH             10                                  ns   From CCLK rising edge
   COUT Enable                                         tCOE                                         15      ns   From CLATCH falling edge
   COUT Delay                                          tCOD                                         20      ns   From CCLK falling edge
   COUT Three-State                                    tCOTS                                        25      ns   From CLATCH rising edge
SERIAL PORTS 1
   Slave Mode
      xBCLK High                                       tSBH             40                                  ns
      xBCLK Low                                        tSBL             40                                  ns
      xBCLK Frequency                                  fSBF             64 × fS
      xLRCLK Setup                                     tSLS             10                                  ns   To xBCLK rising edge
      xLRCLK Hold                                      tSLH             10                                  ns   From xBCLK rising edge
      xSDATA Setup                                     tSDS             10                                  ns   To xBCLK rising edge
      xSDATA Hold                                      tSDH             10                                  ns   From xBCLK rising edge
      xSDATA Delay                                     tSDD             10                                  ns   From xBCLK falling edge
   Master Mode
      xLRCLK Delay                                     tMLD                                         5       ns   From xBCLK falling edge
      xSDATA Delay                                     tMDD                                         10      ns   From xBCLK falling edge
      xSDATA Setup                                     tMDS             10                                  ns   From xBCLK rising edge
      xSDATA Hold                                      tMDH             10                                  ns   From xBCLK rising edge
1
  The prefix x refers to I-, O-, IAUX-, or OAUX- for the full pin name.
TEMPERATURE RANGE
Table 4.
Heading                                                                         Min             Typ     Max        Unit
Specifications Guaranteed                                                                       25                 °C
Functionality Guaranteed                                                        −40                     +85        °C
Storage                                                                         −65                     +150       °C
                                                                             Rev. A | Page 7 of 60


ADAV801
ABSOLUTE MAXIMUM RATINGS
Table 5.                                                                Stresses above those listed under Absolute Maximum Ratings
Parameter                 Rating                                        may cause permanent damage to the device. This is a stress
DVDD to DGND and ODVDD to 0 V to 4.6 V                                  rating only; functional operation of the device at these or any
  DGND                                                                  other conditions above those indicated in the operational
AVDD to AGND              0 V to 4.6 V                                  section of this specification is not implied. Exposure to absolute
Digital Inputs            DGND − 0.3 V to DVDD + 0.3 V                  maximum rating conditions for extended periods may affect
Analog Inputs             AGND − 0.3 V to AVDD + 0.3 V                  device reliability.
AGND to DGND              −0.3 V to +0.3 V
Reference Voltage         Indefinite short circuit to ground
Soldering (10 sec)        300°C                                         ESD CAUTION
                                                       Rev. A | Page 8 of 60


                                                                                                                                                                                                                                      ADAV801
PIN CONFIGURATION AND FUNCTION DESCRIPTIONS
                                                  CAPLN    CAPLP   AGND     CAPRP    CAPRN   AVDD     AGND    VREF    AGND    FILTD    AGND        AVDD       NC          VOUTL       NC         VOUTR
                                                  64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49
                                        VINR 1                                                                                                                                                               48 ADVDD
                                                       PIN 1
                                        VINL 2         INDICATOR                                                                                                                                             47 ADGND
                                       AGND 3                                                                                                                                                                46 PLL_LF2
                                       AVDD 4                                                                                                                                                                45 PLL_LF1
                                      DIR_LF 5                                                                                                                                                               44 PLL_GND
                                     DIR_GND 6                                                                                                                                                               43 PLL_VDD
                                     DIR_VDD 7                                                                                                                                                               42 DGND
                                      RESET 8                                                         ADAV801                                                                                                41 SYSCLK1
                                                                                                    TOP VIEW
                                     CLATCH 9                                                                                                                                                                40 SYSCLK2
                                                                                                  (Not to Scale)
                                         CIN 10                                                                                                                                                              39 SYSCLK3
                                       CCLK 11                                                                                                                                                               38 XIN
                                       COUT 12                                                                                                                                                               37 XOUT
                                 ZEROL/INT 13                                                                                                                                                                36 MCLKO
                                      ZEROR 14                                                                                                                                                               35 MCLKI
                                       DVDD 15                                                                                                                                                               34 DVDD
                                       DGND 16                                                                                                                                                               33 DGND
                                                  17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32
                                                                   ISDATA                    OSDATA
                                                                                                                                                              OAUXSDATA                          IAUXSDATA
                                                  ILRCLK   IBCLK
                                                                            OLRCLK   OBCLK
                                                                                                      DIRIN
                                                                                                              ODVDD   ODGND   DITOUT
                                                                                                                                       OAUXLRCLK   OAUXBCLK               IAUXLRCLK   IAUXBCLK
                                                                                                                                                                                                                          04577-002
                                 NC = NO CONNECT
                                                                   Figure 2. ADAV801 Pin Configuration
Table 6. Pin Function Descriptions
Pin No.      Mnemonic      I/O          Description
1            VINR          I            Analog Audio Input, Right Channel.
2            VINL          I            Analog Audio Input, Left Channel.
3            AGND                       Analog Ground.
4            AVDD                       Analog Voltage Supply.
5            DIR_LF                     DIR Phase-Locked Loop (PLL) Filter Pin.
6            DIR_GND                    Supply Ground for DIR Analog Section. This pin should be connected to AGND.
7            DIR_VDD                    Supply for DIR Analog Section. This pin should be connected to AVDD.
8            RESET         I            Asynchronous Reset Input (Active Low).
9            CLATCH        I            Chip Select (Control Latch) Pin of SPI-Compatible Control Interface.
10           CIN           I            Data Input of SPI-Compatible Control Interface.
11           CCLK          I            Clock Input of SPI-Compatible Control Interface.
12           COUT          O            Data Output of SPI-Compatible Control Interface.
13           ZEROL/INT     O            Left Channel (Output) Zero Flag or Interrupt (Output) Flag. The function of this pin is determined
                                        by the INTRPT bit in DAC Control Register 4.
14           ZEROR         O            Right Channel (Output) Zero Flag.
15           DVDD                       Digital Voltage Supply.
16           DGND                       Digital Ground.
17           ILRCLK        I/O          Sampling Clock (LRCLK) of Playback Digital Input Port.
18           IBCLK         I/O          Serial Clock (BCLK) of Playback Digital Input Port.
19           ISDATA        I            Data Input of Playback Digital Input Port.
20           OLRCLK        I/O          Sampling Clock (LRCLK) of Record Digital Output Port.
21           OBCLK         I/O          Serial Clock (BCLK) of Record Digital Output Port.
22           OSDATA        O            Data Output of Record Digital Output Port.
23           DIRIN         I            Input to Digital Input Receiver (S/PDIF).
24           ODVDD                      Interface Digital Voltage Supply.
25           ODGND                      Interface Digital Ground.
26           DITOUT        O            S/PDIF Output from DIT.
                                                                                             Rev. A | Page 9 of 60


ADAV801
Pin No. Mnemonic  I/O Description
27      OAUXLRCLK I/O Sampling Clock (LRCLK) of Auxiliary Digital Output Port.
28      OAUXBCLK  I/O Serial Clock (BCLK) of Auxiliary Digital Output Port.
29      OAUXSDATA O   Data Output of Auxiliary Digital Output Port.
30      IAUXLRCLK I/O Sampling Clock (LRCLK) of Auxiliary Digital Input Port.
31      IAUXBCLK  I/O Serial Clock (BCLK) of Auxiliary Digital Input Port.
32      IAUXSDATA I   Data Input of Auxiliary Digital Input Port.
33      DGND          Digital Ground.
34      DVDD          Digital Supply Voltage.
35      MCLKI     I   External MCLK Input.
36      MCLKO     O   Oscillator Output.
37      XOUT      I   Crystal Input.
38      XIN       I   Crystal or External MCLK Input.
39      SYSCLK3   O   System Clock 3 (from PLL2).
40      SYSCLK2   O   System Clock 2 (from PLL2).
41      SYSCLK1   O   System Clock 1 (from PLL1).
42      DGND          Digital Ground.
43      PLL_VDD       Supply for PLL Analog Section. This pin should be connected to AVDD.
44      PLL_GND       Ground for PLL Analog Section. This pin should be connected to AGND.
45      PLL_LF1       Loop Filter for PLL1.
46      PLL_LF2       Loop Filter for PLL2.
47      ADGND         Analog Ground (Mixed Signal). This pin should be connected to AGND.
48      ADVDD         Analog Voltage Supply (Mixed Signal). This pin should be connected to AVDD.
49      VOUTR     O   Right Channel Analog Output.
50      NC            No Connect.
51      VOUTL     O   Left Channel Analog Output.
52      NC            No Connect.
53      AVDD          Analog Voltage Supply.
54      AGND          Analog Ground.
55      FILTD         Output DAC Reference Decoupling.
56      AGND          Analog Ground.
57      VREF          Voltage Reference Voltage.
58      AGND          Analog Ground.
59      AVDD          Analog Voltage Supply.
60      CAPRN         ADC Modulator Input Filter Capacitor (Right Channel, Negative).
61      CAPRP         ADC Modulator Input Filter Capacitor (Right Channel, Positive).
62      AGND          Analog Ground.
63      CAPLP         ADC Modulator Input Filter Capacitor (Left Channel, Positive).
64      CAPLN         ADC Modulator Input Filter Capacitor (Left Channel, Negative).
                                          Rev. A | Page 10 of 60


                                                                                                                                                                                          ADAV801
TYPICAL PERFORMANCE CHARACTERISTICS
                     0
                                                                                                                                  0
 MAGNITUDE (dB)                                                                                               MAGNITUDE (dB)
                   –50
                                                                                                                                –50
                  –100                                                                                                         –100
                                                                                  04577-037                                                                                                    04577-040
                  –150                                                                                                         –150
                         0            0.5          1.0            1.5           2.0                                                    0               96            192            288      384
                                        FREQUENCY (Normalized to fS)                                                                                            FREQUENCY (kHz)
                              Figure 3. ADC Composite Filter Response                                                                      Figure 6. DAC Composite Filter Response, 48 kHz
                     5
                                                                                                                                   0
                     0
                    –5
                                                                                                              MAGNITUDE (dB)
 MAGNITUDE (dB)
                                                                                                                                –50
                   –10
                   –15
                                                                                                                               –100
                   –20
                   –25
                                                                                                                                                                                               04577-041
                                                                                  04577-038                                    –150
                   –30                                                                                                                 0               12             24            36       48
                         0             5           10              15           20
                                                                                                                                                                FREQUENCY (kHz)
                                              FREQUENCY (Hz)
                         Figure 4. ADC High-Pass Filter Response, fS = 48 kHz                                                              Figure 7. DAC Pass-Band Filter Response, 48 kHz
                     5                                                                                                          0.06
                     0
                                                                                                                                0.04
                    –5
                                                                                                                                0.02
 MAGNITUDE (dB)                                                                                               MAGNITUDE (dB)
                   –10
                                                                                                                                  0
                   –15
                                                                                                                               –0.02
                   –20
                                                                                                                               –0.04
                   –25
                                                                                  04577-039                                                                                                    04577-042
                   –30                                                                                                         –0.06
                         0             5           10              15           20                                                     0                    8                  16            24
                                              FREQUENCY (Hz)                                                                                                    FREQUENCY (kHz)
                         Figure 5. ADC High-Pass Filter Response, fS = 96 kHz                                                                     Figure 8. DAC Filter Ripple, 48 kHz
                                                                                         Rev. A | Page 11 of 60


ADAV801
                     0                                                                                                              0
                                                                                                                                  –50
 MAGNITUDE (dB)                                                                                                 MAGNITUDE (dB)
                   –50
                                                                                                                                 –100
                  –100
                                                                                                                                 –150
                                                                                   04577-043                                                                                                       04577-046
                  –150                                                                                                           –200
                          0              192         384              576        768                                                     0           384             768             1152        1536
                                                FREQUENCY (kHz)                                                                                                 FREQUENCY (kHz)
                              Figure 9. DAC Composite Filter Response, 96 kHz                                                            Figure 12. DAC Composite Filter Response, 192 kHz
                     0
                                                                                                                                    0
                                                                                                                                   –2
 MAGNITUDE (dB)                                                                                                 MAGNITUDE (dB)
                   –50
                                                                                                                                   –4
                                                                                                                                   –6
                  –100
                                                                                                                                   –8
                                                                                   04577-044                                                                                                       04577-047
                  –150                                                                                                            –10
                          0               24          48               72        96                                                  48                    64                  80                96
                                                FREQUENCY (kHz)                                                                                                 FREQUENCY (kHz)
                              Figure 10. DAC Pass-Band Filter Response, 96 kHz                                                           Figure 13. DAC Pass-Band Filter Response, 192 kHz
                   0.10                                                                                                           0.50
                                                                                                                                  0.40
                                                                                                                                  0.30
                   0.05
                                                                                                                                  0.20
 MAGNITUDE (dB)                                                                                                 MAGNITUDE (dB)
                                                                                                                                  0.10
                     0                                                                                                            0.00
                                                                                                                                 –0.10
                                                                                                                                 –0.20
                  –0.05
                                                                                                                                 –0.30
                                                                                                                                                                                                   04577-048
                                                                                                                                 –0.40
                                                                                   04577-045
                  –0.10                                                                                                          –0.50
                          0               24          48               72        96                                                      0          8              16           32          64
                                                FREQUENCY (kHz)                                                                                                 FREQUENCY (kHz)
                                    Figure 11. DAC Filter Ripple, 96 kHz                                                                       Figure 14. DAC Filter Ripple, 192 kHz
                                                                                           Rev. A | Page 12 of 60


                                                                                                                                                                                                           ADAV801
                      0                                                                                                                            0
                                                                         DNR = 102dB                                                                                                                    THD+N = 95dB
                                                                        (A-WEIGHTED)
                    –20                                                                                                                          –20
                    –40                                                                                                                          –40
  MAGNITUDE (dB)                                                                                                               MAGNITUDE (dB)
                    –60                                                                                                                          –60
                    –80                                                                                                                          –80
                   –100                                                                                                                         –100
                   –120                                                                                                                         –120
                                                                                               04577-0-049
                   –140                                                                                                                         –140
                                                                                                                                                                                                                         04577-052
                   –160                                                                                                                         –160
                          0    2      4    6       8   10   12   14      16        18      20                                                          0    5      10       15     20  25    30    35      40    45 48
                                                 FREQUENCY (kHz)                                                                                                                 FREQUENCY (kHz)
                              Figure 15. DAC Dynamic Range, fS = 48 kHz                                                                                         Figure 18. DAC THD + N, fS = 96 kHz
                      0                                                                                                                            0
                                                                                                                                                                                                         DNR = 102dB
                                                                                                                                                                                                         (A-Weighted)
                    –20                                        THD+N = 96dB                                                                      –20
                    –40                                                                                                                          –40
MAGNITUDE (dB)                                                                                                                 MAGNITUDE (dB)
                    –60                                                                                                                          –60
                    –80                                                                                                                          –80
                   –100                                                                                                                         –100
                   –120                                                                                                                         –120
                                                                                            04577-0-050
                   –140                                                                                                                         –140
                                                                                                                                                                                                                         04577-053
                   –160                                                                                                                         –160
                          0   2      4     6       8   10   12   14      16        18     20                                                           0                5              10           15                  20
                                                 FREQUENCY (kHz)                                                                                                                 FREQUENCY (kHz)
                                   Figure 16. DAC THD + N, fS = 48 kHz                                                                                     Figure 19. ADC Dynamic Range, fS = 48 kHz
                      0                                                                                                                            0
                                                                         DNR = 102dB                                                                                                                    THD+N = 92dB
                                                                        (A-WEIGHTED)                                                                                                                     (VIN = –3dB)
                    –20                                                                                                                          –20
                    –40                                                                                                                          –40
  MAGNITUDE (dB)                                                                                                               MAGNITUDE (dB)
                    –60                                                                                                                          –60
                    –80                                                                                                                          –80
                   –100                                                                                                                         –100
                   –120                                                                                                                         –120
                   –140                                                                                                                         –140
                                                                                               04577-051                                                                                                                 04577-054
                   –160                                                                                                                         –160
                          0    5      10    15     20  25    30    35         40        45 48                                                          0                5              10           15                  20
                                                 FREQUENCY (kHz)                                                                                                                 FREQUENCY (kHz)
                              Figure 17. DAC Dynamic Range, fS = 96 kHz                                                                                         Figure 20. DAC THD + N, fS = 48 kHz
                                                                                                          Rev. A | Page 13 of 60


ADAV801
                     0                                                                                                            0
                                                                    DNR = 102dB                                                                                              THD+N = 92dB
                                                                   (A-WEIGHTED)                                                                                               (VIN = –3dB)
                   –20                                                                                                          –20
                   –40                                                                                                          –40
 MAGNITUDE (dB)                                                                                               MAGNITUDE (dB)
                   –60                                                                                                          –60
                   –80                                                                                                          –80
                  –100                                                                                                         –100
                  –120                                                                                                         –120
                  –140                                                                                                         –140
                                                                                  04577-055                                                                                                   04577-056
                  –160                                                                                                         –160
                         0       8        16         24       32     40       48                                                      0    8        16         24       32      40           48
                                               FREQUENCY (kHz)                                                                                           FREQUENCY (kHz)
                             Figure 21. ADC Dynamic Range, fS = 96 kHz                                                                    Figure 22. ADC THD + N, fS = 96 kHz
                                                                                         Rev. A | Page 14 of 60


                                                                                                                                                                                                                                          ADAV801
FUNCTIONAL DESCRIPTION
ADC SECTION                                                                                                                                                       Programmable Gain Amplifier (PGA)
The ADAV801’s ADC section is implemented using a second-                                                                                                          The input of the record channel features a PGA that converts
order multibit (5 bits) Σ-Δ modulator. The modulator is                                                                                                           the single-ended signal to a differential signal, which is applied
sampled at either half of the ADC MCLK rate (modulator clock                                                                                                      to the analog Σ-Δ modulator of the ADC. The PGA can be
= 128 × fS) or one-quarter of the ADC MCLK rate (modulator                                                                                                        programmed to amplify a signal by up to 24 dB in 0.5 dB
clock = 64 × fS). The digital decimator consists of a Sinc^5 filter                                                                                               increments. Figure 24 shows the structure of the PGA circuit.
followed by a cascade of three half-band FIR filters. The Sinc                                                                                                                     4kΩ TO 64kΩ
decimates by a factor of 16 at 48 kHz and by a factor of 8 at                                                                                                                                    EXTERNAL
                                                                                                                                                                             4kΩ                 CAPACITOR
96 kHz. Each of the half-band filters decimates by a factor of 2.                                                                                                                                 (1nF NPO)
                                                                                                                                                                                                              CAPxN
Figure 23 shows the details of the ADC section. By default, the                                                                                                       VREF                       125Ω
                                                                                                                                                                                                                 EXTERNAL
                                                                                                                                                                                                                                 TO
ADC assumes that the MCLK rate is 256 times the sample rate.                                                                                                                                                     CAPACITOR
                                                                                                                                                                                                                              MODULATOR
                                                                                                                                                                                                                  (1nF NPO)
The ADC can be clocked by a number of different clock sources                                                                                                                                    125Ω
                                                                                                                                                                             8kΩ                              CAPxP
to control the sample rate. MCLK selection for the ADC is set                                                                                                                                    EXTERNAL
                                                                                                                                                                                                                                               04577-004
                                                                                                                                                                                                 CAPACITOR
                                                                                                                                                                                       8kΩ
by Internal Clocking Control Register 1 (Address 0x76). The                                                                                                                                       (1nF NPO)
ADC provides an output word of up to 24 bits in resolution in                                                                                                                             Figure 24. PGA Block Diagram
twos complement format. The output word can be routed to
                                                                                                                                                                  Analog Σ-Δ Modulator
either the output ports, the sample rate converter, or the S/PDIF
digital transmitter.                                                                                                                                              The ADC features a second-order, multibit, Σ-Δ modulator. The
                                                                                                                                                                  input features two integrators in cascade followed by a flash
                     DIR PLL (256 × fS)   DIR PLL (512 × fS)
                                                               PLL2 INTERNAL   PLL1 INTERNAL
                                                                                                                                                                  converter. This multibit output is directed to a scrambler,
                                                                                                                                                                  followed by a DAC for loop feedback. The flash ADC output is
                                                                                                                                                                  also converted from thermometer coding to binary coding for
                                                                                               MCLKI   XIN                                                        input as a 5-bit word to the decimator. Figure 25 shows the
                                                                                                        REG 0x76                                                  ADC block diagram.
                                                                                                        BITS[4:2]
                                                                                                                                                                  The ADC also features independent digital volume control for
                                                                                                                                                                  the left and right channels. The volume control consists of
                                          ADC MCLK                                              REG 0x6F
                                           DIVIDER                                              BITS[1:0]                                                         256 linear steps, with each step reducing the digital output
                                                                                                                                                                  codes by 0.39%. Each channel also has a peak detector that
                                                        ADC                                                                                                       records the peak level of the input signal. The peak detector
                                                        MCLK                                                                                                      register is cleared by reading it.
                                                               ADC
                                                                                                                    04577-003
               Figure 23. Clock Path Control on the ADC
                                                                                                                                                                                                         PEAK
                                                                                                                                                                                    HPF
                                                                                                                                                                                                        DETECT
                                                                                                        MULTIBIT
                                                                                                          Σ-Δ                                                    VOLUME
                                                                                                                                         DECIMATOR
                                                                                                       MODULATOR                                                 CONTROL
                                                                           ÷2                                                            384kHz
               ADC MCLK                                                                                                                               HALF-BAND 192kHz           SINC      96kHz        HALF-BAND     48kHz
                                                                                                                                SINC^5
                                                                           ÷4                       MODULATOR                            768kHz         FILTER  384kHz       COMPENSATION 192kHz          FILTER      96kHz
                                                                                                        CLOCK
                                                                                                   (6.144MHz MAX)
                    AMC
                                                                                                                                                                                                                              04577-005
               (REG 0x6E
                   BIT 7)
                                                                                                                                           Figure 25. ADC Block Diagram
                                                                                                                                                  Rev. A | Page 15 of 60


ADAV801
Automatic Level Control (ALC)                                                     No Recovery Mode
The ADC record channel features a programmable automatic                          By default, there is no gain recovery. Once the gain has been
level control block. This block monitors the level of the ADC                     reduced, it is not recovered until the ALC is reset, either by
output signal and automatically reduces the gain, if the signal at                toggling the ALCEN bit in ALC Control Register 1 or by
the input pins causes the ADC output to exceed a preset limit.                    writing any value to ALC Control Register 3. The latter option
This function can be useful to maximize the signal dynamic                        is more efficient because it requires only one write operation to
range when the input level is not well defined. The PGA can be                    reset the ALC function. No recovery mode prevents volume
used to amplify the unknown signal, and the ALC reduces the                       modulation of the signal caused by adjusting the gain, which
gain until the ADC output is within the preset limits. This                       can create undesirable artifacts in the signal. The gain can be
results in maximum front end gain.                                                reduced but not recovered. Therefore, care should be taken that
Because the ALC block monitors the output of the ADC, the                         spurious signals do not interfere with the input signal because
volume control function should not be used. The ADC volume                        these might trigger a gain reduction unnecessarily.
control scales the results from the ADC, and any distortion                       Normal Recovery Mode
caused by the input signal exceeding the input range of the                       Normal recovery mode allows for the PGA gain to be recovered,
ADC is still present at the output of the ADC, but scaled by a                    provided that the input signal meets certain criteria. First, the
value determined by the volume control register.                                  ALC must not be in attack mode, that is, the PGA gain has been
The ALC block has two functions, attack mode and recovery                         reduced sufficiently such that the input signal is below the level
mode. Recovery mode consists of three settings: no recovery,                      set by the attack threshold bits. Second, the output result from
normal recovery, and limited recovery. These modes are                            the ADC must be below the level set by the recovery threshold
discussed in the following sections. Figure 26 is a flow diagram                  bits in the ALC control register. If both of these criteria are met,
of the ALC block. When the ALC has been enabled, any                              the gain is recovered by one step (0.5 dB). The gain is incremen-
changes made to the PGA or ALC settings are ignored. To                           tally restored to its original value, assuming that the ADC
change the functionality of the ALC, it must first be disabled.                   output level is below the recovery threshold at intervals
The settings can then be changed and the ALC re-enabled.                          determined by the recovery time bits.
Attack Mode                                                                       If the ADC output level exceeds the recovery threshold while
When the absolute value of the ADC output exceeds the level                       the PGA gain is being restored, the PGA gain value is held and
set by the attack threshold bits in ALC Control Register 2, attack                does not continue restoration until the ADC output level is
mode is initiated. The PGA gain for both channels is reduced by                   again below the recovery threshold. Once the PGA gain is
one step (0.5 dB). The ALC then waits for a time determined by                    restored to its original value, it is not changed again unless the
the attack timer bits before sampling the ADC output value                        ADC output value exceeds the attack threshold and the ALC
again. If the ADC output is still above the threshold, the PGA                    then enters attack mode. Care should be taken when using this
gain is reduced by a further step. This procedure continues until                 mode to choose values for the attack and recovery thresholds
the ADC output is below the limit set by the attack threshold                     that prevent excessive volume modulation caused by continuous
bits. The initial gains of the PGAs are defined by the ADC left                   gain adjustments.
PGA gain register and the ADC right PGA gain register, and                        Limited Recovery Mode
they can have different values. The ALC subtracts a common                        Limited recovery mode offers a compromise between no recov-
gain offset to these values. The ALC preserves any gain differ-                   ery and normal recovery modes. If the output level of the ADC
ence in dB as defined by these registers. At no time do the PGA                   exceeds the attack threshold, attack mode is initiated. When
gains exceed their initial values. The initial gain setting,                      attack mode has reduced the PGA gain to suitable levels, the
therefore, also serves as a maximum value.                                        ALC attempts to recover the gain to its original level. If the
The limit detection mode bit in ALC Control Register 1 deter-                     ADC output level exceeds the level set by the recovery threshold
mines how the ALC responds to an ADC output that exceeds                          bits, a counter is incremented (GAINCNTR). This counter is
the set limits. If this bit is a 1, both channels must exceed the                 incremented at intervals equal to the recovery time selection, if
threshold before the gain is reduced. This mode can be used to                    the ADC has any excursion above the recovery threshold. If the
prevent unnecessary gain reduction due to spurious noise on a                     counter reaches its maximum value, determined by the
single channel. If the limit detection mode bit is a 0, the gain is               GAINCNTR bits in ALC Control Register 1, the PGA gain is
reduced when either channel exceeds the threshold.                                deemed suitable and no further gain recovery is attempted.
                                                                                  Whenever the ADC output level exceeds the attack threshold,
                                                                                  attack mode is reinitiated and the counter is reset.
                                                                 Rev. A | Page 16 of 60


                                                                                                                                                     ADAV801
Selecting a Sample Rate                                                                  selecting the lower modulator rate reduces the amount of digital
The output sample rate of the ADC is always ADC MCLK/256,                                noise, improving THD + N, but also reduces the oversampling
as shown in Figure 23. By default, the ADC modulator runs at                             ratio, therefore reducing the dynamic range by a corresponding
ADC MCLK/2. When the ADC MCLK exceeds 12.288 MHz,                                        amount.
the ADC modulator should be set to run at ADC MCLK/4. This                               For best performance of the ADC, avoid using similar frequency
is achieved by setting the AMC (ADC Modulator Clock) bit in                              clocks from separate sources in the ADAV801. For example,
the ADC Control Register 1. To compensate for the reduced                                running the ADC from a 12.288 MHz clock connected to
modulator clock speed, a different set of filters are used in the                        MCLKI and using the PLL to generate a separate 12.288 MHz
decimator section, ensuring that the sample rate remains                                 clock for the DAC can reduce the performance of the ADC.
the same.                                                                                This is due to the interaction of the clocks, which generate beat
The AMC bit can also be used to boost the THD + N perform-                               frequencies that can affect the charge on the switch capacitors of
ance of the ADC at the expense of dynamic range. The                                     the analog inputs.
improvement is typically 0.5 dB to 1.0 dB and works because
                                                                              ATTACK MODE
                                                                                     WAIT FOR SAMPLE
                                                               NO
                                                        IS A RECOVERY       NO          IS SAMPLE
                                                       MODE ENABLED?               GREATER THAN ATTACK
                                                                                       THRESHOLD?
                                                               YES                                YES
                                                                                 DECREASE GAIN BY 0.5dB
                                                                                  AND WAIT ATTACK TIME
                                      LIMITED RECOVERY                                                       NORMAL RECOVERY
                                       WAIT FOR SAMPLE                                              WAIT FOR SAMPLE
                                          IS SAMPLE                                                       IS SAMPLE
                                        ABOVE ATTACK                                                    ABOVE ATTACK
                                         THRESHOLD?                                                      THRESHOLD?
                                            NO                                                             NO
                                        HAS RECOVERY           NO                                       HAS RECOVERY       NO
                                          TIME BEEN                                                       TIME BEEN
                                          REACHED?                                                        REACHED?
                                          YES                                                             YES
                                          ARE ALL                                                          ARE ALL
                                       SAMPLES BELOW           NO                                       SAMPLES BELOW      NO
                                         RECOVERY                                                         RECOVERY
                                        THRESHOLD?                                                       THRESHOLD?
                              YES
                                                                                                          YES
                        INCREASE GAIN BY 0.5dB
                                                             INCREMENT                            INCREASE GAIN BY 0.5dB
                                                              GAINCNTR                              WAIT RECOVERY TIME
                           HAS GAIN BEEN
                          FULLY RESTORED?
                   NO
                                                                                                     HAS GAIN BEEN
                                                                                                    FULLY RESTORED?
                              YES                                                           NO                             YES
                                                            IS GAINCNTR
                                                            AT MAXIMUM?
                                                 YES                          NO
                                                                                                                                         04577-006
                                                                     Figure 26. ALC Flow Diagram
                                                                         Rev. A | Page 17 of 60


ADAV801
DAC SECTION                                                                   Selecting a Sample Rate
The ADAV801 has two DAC channels arranged as a stereo pair                    Correct operation of the DAC is dependent upon the data rate
with single-ended analog outputs. Each channel has its own                    provided to the DAC, the master clock applied to the DAC, and
independently programmable attenuator, adjustable in 128 steps                the selected interpolation rate. By default, the DAC assumes
of 0.375 dB per step. The DAC can receive data from the                       that the MCLK rate is 256 times the sample rate, which requires
playback or auxiliary input ports, the SRC, the ADC, or the                   an 8× oversampling rate. This combination is suitable for
DIR. Each analog output pin sits at a dc level of VREF, and                   sample rates of up to 48 kHz.
swings 1.0 V rms for a 0 dB digital input signal. A single op amp             For a 96 kHz data rate that has a 24.576 MHz MCLK (256 × fS)
third-order external low-pass filter is recommended to remove                 associated with it, the DAC MCLK divider should be set to
high frequency noise present on the output pins. Note that the                divide the MCLK by 2. This prevents the DAC engine from
use of op amps with low slew rate or low bandwidth can cause                  running too fast. To compensate for the reduced MCLK rate,
high frequency noise and tones to fold down into the audio                    the interpolator should be selected to operate in 4 × (DAC
band. Care should be taken in selecting these components.                     MCLK = 128 × fS). Similar combinations can be selected for
The FILTD and VREF pins should be bypassed by external                        different sample rates.
capacitors to AGND. The FILTD pin is used to reduce the noise
                                                                                             DIR PLL (256 × fS)   DIR PLL (512 × fS)
                                                                                                                                       PLL2 INTERNAL   PLL1 INTERNAL
of the internal DAC bias circuitry, thereby reducing the DAC
output noise. The voltage at the VREF pin can be used to bias
                                                                                                                                                                       MCLKI
external op amps used to filter the output signals. For
                                                                                                                                                                               XIN
applications in which the VREF is required to drive external
op amps, which might draw more than 50 μA or have dynamic                                                                                                                        REG 0x76
                                                                                                                                                                                 BITS[7:5]
load changes, extra buffering should be used to preserve the
quality of the ADAV801 reference.
                                                                                                                           MCLK                                           REG 0x65
                                                                                                                          DIVIDER                                         BITS[3:2]
The digital input data source for the DAC can be selected from
a number of available sources by programming the appropriate
bits in the datapath control register. Figure 27 shows how the                                                                    DAC
                                                                                                                                                                                                         AUXILIARY IN
                                                                                                                                  MCLK
digital data source and the MCLK source for the DAC are                                                                                                              DAC                                 PLAYBACK
                                                                                                                                       DAC
selected. Each DAC has an independent volume register giving                                                                                                       INPUT                                 DIR
256 steps of control, with each step giving approximately                                                                                                                                                ADC
0.375 dB of attenuation. Note that the DACs are muted by                                                                                                                                                                04577-007
                                                                                                                                                                                     REG 0x63
                                                                                                                                                                                     BITS[5:3]
default to prevent unwanted pops, clicks, and other noises
                                                                                            Figure 27. Clock and Datapath Control on the DAC
from appearing on the outputs while the ADAV801 is being
configured. Each DAC also has a peak-level register that records
the peak value of the digital audio data. Reading the register
clears the peak.
                                                                  TO CONTROL              PEAK
                                                                   REGISTERS            DETECTOR
                                   DAC
                                               MULTIBIT                                                                                                                  FROM DAC
                         ANALOG                                                        VOLUME/MUTE
                                                 Σ-Δ           INTERPOLATOR                                                                                              DATAPATH
                         OUTPUT                                                          CONTROL
                                              MODULATOR                                                                                                                  MULTIPLEXER
                                   DAC
                                                                                                                                                                                             04577-008
                                                            TO ZERO FLAG PINS          ZERO DETECT
                                                          Figure 28. DAC Block Diagram
                                                              Rev. A | Page 18 of 60


                                                                                                                                                                    ADAV801
SAMPLE RATE CONVERTER (SRC) FUNCTIONAL                                                          IN
                                                                                                                  INTERPOLATE     LOW-PASS       ZERO-ORDER
                                                                                                                                                                              OUT
                                                                                                                      BY N         FILTER           HOLD
OVERVIEW
                                                                                                        fS_IN                                                        fS_OUT
During asynchronous sample rate conversion, data can be
converted at the same sample rate or at different sample rates.
The simplest approach to an asynchronous sample rate
conversion is to use a zero-order hold between the two                                                            TIME DOMAIN OF fS_IN SAMPLES
samplers, as shown in Figure 29. In an asynchronous system, T2
is never equal to T1, nor is the ratio between T2 and T1
rational. As a result, samples at fS_OUT are repeated or dropped,
                                                                                                                  TIME DOMAIN OUTPUT OF THE LOW-PASS FILTER
producing an error in the resampling process.
The frequency domain shows the wide side lobes that result
from this error when the sampling of fS_OUT is convolved with
the attenuated images from the sin(x)/x nature of the zero-order                                                  TIME DOMAIN OF fS_OUT RESAMPLING
hold. The images at fS_IN (dc signal images) of the zero-order
hold are infinitely attenuated. Because the ratio of T2 to T1 is an
                                                                                                                                                                                 04577-010
irrational number, the error resulting from the resampling at
                                                                                                                  TIME DOMAIN OF THE ZERO-ORDER HOLD OUTPUT
fS_OUT can never be eliminated. The error can be significantly
reduced, however, through interpolation of the input data at                                                             Figure 30. SRC Time Domain
fS_IN. Therefore, the sample rate converter in the ADAV801 is                                 In the frequency domain shown in Figure 31, the interpolation
conceptually interpolated by a factor of 220.                                                 expands the frequency axis of the zero-order hold. The images
    IN                         ZERO-ORDER
                                                                                              from the interpolation can be sufficiently attenuated by a good
                                                                 OUT
                                  HOLD                                                        low-pass filter. The images from the zero-order hold are now
         fS_IN = 1/T1                            fS_OUT = 1/T2                                pushed by a factor of 220 closer to the infinite attenuation point
                              ORIGINAL SIGNAL                                                 of the zero-order hold, which is fS_IN × 220. The images at the
                                                                                              zero-order hold are the determining factor for the fidelity of the
                                                                                              output at fS_OUT.
                              SAMPLED AT fS_IN
                                                                                                                  INTERPOLATE     LOW-PASS       ZERO-ORDER
                                                                                                IN                                                                            OUT
                                                                                                                      BY N         FILTER           HOLD
                        SIN(X)/X OF ZERO-ORDER HOLD
                                                                                                        fS_IN                                                        fS_OUT
               SPECTRUM OF ZERO-ORDER HOLD OUTPUT
                                                                                                           FREQUENCY DOMAIN OF SAMPLES AT fS_IN
                        SPECTRUM OF fS_OUT SAMPLING                                                                                                         fS_IN
                               fS_OUT                            2 × fS_OUT
                                                                              04577-009
  FREQUENCY RESPONSE OF fS_OUT CONVOLVED                                                                   FREQUENCY DOMAIN OF THE INTERPOLATION
  WITH ZERO-ORDER HOLD SPECTRUM                                                                                                                         220 × fS_IN
   Figure 29. Zero-Order Hold Used by fS_ OUT to Resample Data from fS_IN
Conceptual High Interpolation Model
                                                                                                                SIN(X)/X OF ZERO-ORDER HOLD
Interpolation of the input data by a factor of 220 involves placing
                                                                                                           FREQUENCY DOMAIN OF fS_OUT RESAMPLING
(220 − 1) samples between each fS_IN sample. Figure 30 shows                                                                                           220 × fS_IN
both the time domain and the frequency domain of interpolation
by a factor of 220. Conceptually, interpolation by 220 involves the
steps of zero-stuffing (220 − 1) number of samples between each
                                                                                                                                                                                04577-011
fS_IN sample and convolving this interpolated signal with a                                                FREQUENCY DOMAIN
                                                                                                                                              220 × fS_IN
                                                                                                           AFTER RESAMPLING
digital low-pass filter to suppress the images. In the time                                            Figure 31. Frequency Domain of the Interpolation and Resampling
domain, it can be seen that fS_OUT selects the closest fS_IN × 220
sample from the zero-order hold, as opposed to the nearest fS_IN
sample in the case of no interpolation. This significantly
reduces the resampling error.
                                                                              Rev. A | Page 19 of 60


ADAV801
The worst-case images can be computed from the zero-order                     This technique is supported by the Fourier transform property
hold frequency response:                                                      that, if f(t) is F(ω), then f(k × t) is F(ω/k). Thus, the range of
                                                                              decimation is limited by the size of the RAM.
     Maximum Image = sin(π × F/fS_INTERP)/(π × F/fS_INTERP)
where:
                                                                              SRC Architecture
F is the frequency of the worst-case image that would be                      The architecture of the sample rate converter is shown in
220 × fS_IN ± fS_IN/2.                                                        Figure 32. The sample rate converter’s FIFO block adjusts the
fS_INTERP = fS_IN × 220.                                                      left and right input samples and stores them for the FIR filter’s
                                                                              convolution cycle. The fS_IN counter provides the write address
The following worst-case images would appear for fS_IN equal to
                                                                              to the FIFO block and the ramp input to the digital servo loop.
192 kHz:
                                                                              The ROM stores the coefficients for the FIR filter convolution
     Image at fS_INTERP − 96 kHz = −125.1 dB                                  and performs a high order interpolation between the stored
     Image at fS_INTERP + 96 kHz = −125.1 dB                                  coefficients. The sample rate ratio block measures the sample
                                                                              rate for dynamically altering the ROM coefficients and scaling
Hardware Model
                                                                              of the FIR filter length as well as the input data. The digital
The output rate of the low-pass filter in Figure 30 is the                    servo loop automatically tracks the fS_IN and fS_OUT sample rates
interpolation rate:                                                           and provides the RAM and ROM start addresses for the start of
     220 × 192,000 kHz = 201.3 GHz                                            the FIR filter convolution.
Sampling at a rate of 201.3 GHz is clearly impractical, in                             RIGHT DATA IN                             ROM A
                                                                                        LEFT DATA IN            FIFO
addition to the number of taps required to calculate each                                                                        ROM B         HIGH
                                                                                                                                              ORDER
interpolated sample. However, because interpolation by 220                                                                       ROM C        INTERP
involves zero-stuffing 220 − 1 samples between each fS_IN sample,
                                                                                                                                 ROM D
most of the multiplies in the low-pass FIR filter are by zero. A
                                                                                          fS_IN               DIGITAL
further reduction can be realized because only one interpolated                         COUNTER             SERVO LOOP
sample is taken at the output at the fS_OUT rate, so only one                                                                    FIR FILTER
convolution needs to be performed per fS_OUT period instead of                                          SAMPLE RATE RATIO
                                                                                                                                         L/R DATA OUT
220 convolutions. A 64-tap FIR filter for each fS_OUT sample is
sufficient to suppress the images caused by the interpolation.                                  fS_IN         SAMPLE
                                                                                                                                                        04577-012
                                                                                              fS_OUT         RATE RATIO
One difficulty with the preceding approach is that the correct                                                              EXTERNAL
                                                                                                                              RATIO
interpolated sample must be selected upon the arrival of fS_OUT.
                                                                                             Figure 32. Architecture of the Sample Rate Converter
Because there are 220 possible convolutions per fS_OUT period, the
arrival of the fS_OUT clock must be measured with an accuracy of              The FIFO receives the left and right input data and adjusts the
1/201.3 GHz = 4.96 ps. Measuring the fS_OUT period with a clock               amplitude of the data for both the soft muting of the sample rate
of 201.3 GHz frequency is clearly impossible; instead, several                converter and the scaling of the input data by the sample rate
coarse measurements of the fS_OUT clock period are made and                   ratio before storing the samples in the RAM. The input data is
averaged over time.                                                           scaled by the sample rate ratio because, as the FIR filter length
                                                                              of the convolution increases, so does the amplitude of the
Another difficulty with the preceding approach is the number
                                                                              convolution output. To keep the output of the FIR filter from
of coefficients required. Because there are 220 possible convolu-
                                                                              saturating, the input data is scaled down by multiplying it by
tions with a 64-tap FIR filter, there must be 220 polyphase
                                                                              (fS_OUT/fS_IN) when fS_OUT < fS_IN. The FIFO also scales the input
coefficients for each tap, which requires a total of 226 coeffi-
                                                                              data for muting and unmuting of the SRC.
cients. To reduce the number of coefficients in ROM, the SRC
stores a small subset of coefficients and performs a high order               The RAM in the FIFO is 512 words deep for both left and right
interpolation between the stored coefficients.                                channels. An offset to the write address provided by the fS_IN
                                                                              counter is added to prevent the RAM read pointer from
The preceding approach works when fS_OUT > fS_IN. However,
                                                                              overlapping the write address. The minimum offset on the SRC
when the output sample rate, fS_OUT, is less than the input sample
                                                                              is 16 samples. However, the group delay and mute-in register
rate, fS_IN, the ROM starting address, input data, and length of
                                                                              can be used to increase this offset.
the convolution must be scaled. As the input sample rate rises
over the output sample rate, the antialiasing filter’s cutoff                 The number of input samples added to the write pointer of the
frequency must be lowered because the Nyquist frequency of                    FIFO on the SRC is 16 plus Bit 6 to Bit 0 of the group delay
the output samples is less than the Nyquist frequency of the                  register. This feature is useful in varispeed applications to
input samples. To move the cutoff frequency of the antialiasing               prevent the read pointer to the FIFO from running ahead of the
filter, the coefficients are dynamically altered and the length of            write pointer. When set, Bit 7 of the group delay and mute-in
the convolution is increased by a factor of (fS_IN/fS_OUT).                   register soft-mutes the sample rate. Increasing the offset of the
                                                              Rev. A | Page 20 of 60


                                                                                                                                                                                                                                                     ADAV801
write address pointer is useful for applications in which small                                                                                                      Delay and Mute register until the SRC has changed to slow
changes in the sample rate ratio between fS_IN and fS_OUT are                                                                                                        mode. The MUTE_IND bit can be set to generate an interrupt
expected. The maximum decimation rate can be calculated                                                                                                              when the SRC changes to slow mode, indicating that the data is
from the RAM word depth and the group delay as                                                                                                                       being sample rate converted accurately.
     (512 − 16)/64 taps = 7.75                                                                                                                                       The frequency responses of the digital servo loop for fast mode
for short group delay and                                                                                                                                            and slow mode are shown in Figure 34. The FIR filter is a 64-tap
                                                                                                                                                                     filter when fS_OUT ≥ fS_IN and is (fS_IN/fS_OUT) × 64 taps when fS_IN >
     (512 − 64)/64 taps = 7                                                                                                                                          fS_OUT. The FIR filter performs its convolution by loading in the
for long group delay.                                                                                                                                                starting address of the RAM address pointer and the ROM
The digital servo loop is essentially a ramp filter that provides                                                                                                    address pointer from the digital servo loop at the start of the
the initial pointer to the address in RAM and ROM for the start                                                                                                      fS_OUT period. The FIR filter then steps through the RAM by
of the FIR convolution. The RAM pointer is the integer output                                                                                                        decrementing its address by 1 for each tap, and the ROM
of the ramp filter, and the ROM is the fractional part. The                                                                                                          pointer increments its address by the (fS_OUT/fS_IN) × 220 ratio for
digital servo loop must provide excellent rejection of jitter on                                                                                                     fS_IN > fS_OUT or 220 for fS_OUT ≥ fS_IN. Once the ROM address rolls
the fS_IN and fS_OUT clocks, as well as measure the arrival of the                                                                                                   over, the convolution is completed.
fS_OUT clock within 4.97 ps. The digital servo loop also divides                                                                                                                            0
the fractional part of the ramp output by the ratio of fS_IN/fS_OUT                                                                                                                       –20                                               FAST MODE
to dynamically alter the ROM coefficients when fS_IN > fS_OUT.                                                                                                                            –40
                                                                                                                                                                                                                  SLOW MODE
        PLLINT1   PLLINT2                                                              PLLINT1    PLLINT2
                                                                                                                                                                                          –60
                                  MCLKI                                                                           MCLKI
                                                                                                                                                                        MAGNITUDE (dB)
                                                                                                                                                                                          –80
                            XIN                                                                             XIN
                                                                                                                                                                                         –100
                                                                                                                                                                                         –120
                                                                                                                                                                                         –140
        REG 0x76                                                                                   REG 0x77
         BIT[1:0]                                                                                  BIT[4:3]                                                                              –160
                                     DIR PLL (512 × fS)   DIR PLL (256 × fS)
                                                                                                                                                                                         –180
                                                                                                                                                                                         –200
                                                                               ICLK2      ICLK1                                                                                                                                                                    04577-014
                                                                                                                                                                                         –220
                                                                                                                                                                                            0.01        0.1      1      10    100          1k      10k      100k
                                                                                                                                                                                                                      FREQUENCY (Hz)
                                                                                                   REG 0x00                                                                                     Figure 34. Frequency Response of the Digital Servo Loop;
                                                                                                   BITS[1:0]
                                                                                                                                                                                                fS_IN is the X-Axis, fS_OUT = 192 kHz, Master Clock is 30 MHz
                                                     SRC
                                                                                                                                                                     The convolution is performed for both the left and right
                                                                                                                          AUXILIARY IN
                                                     MCLK                                                                                                            channels, and the multiply accumulate circuit used for the
                                                                                     SRC                                  PLAYBACK
                                                          SRC
                                                                                   INPUT                                  DIR
                                                                                                                                                                     convolution is shared between the channels. The fS_IN/fS_OUT
                                               SRC                                                                        ADC
                                                                                                                                                                     sample rate ratio circuit is used to dynamically alter the
                                              OUTPUT
                                                                                                                                                                     coefficients in the ROM when fS_IN > fS_OUT. The ratio is
                                                                                                                                         04577-013
                                                                                                              REG 0x62
                                                                                                              BITS[7:6]                                              calculated by comparing the output of an fS_OUT counter to the
                  Figure 33. Clock and Datapath Control on the SRC                                                                                                   output of an fS_IN counter. If fS_OUT > fS_IN, the ratio is held at one.
                                                                                                                                                                     If fS_IN > fS_OUT, the sample rate ratio is updated, if it is different
The digital servo loop is implemented with a multirate filter. To
                                                                                                                                                                     by more than two fS_OUT periods from the previous fS_OUT to fS_IN
settle the digital servo loop filter more quickly upon startup or a
                                                                                                                                                                     comparison. This is done to provide some hysteresis to prevent
change in the sample rate, a fast mode has been added to the
                                                                                                                                                                     the filter length from oscillating and causing distortion.
filter. When the digital servo loop starts up or the sample rate is
changed, the digital servo loop enters fast mode to adjust and                                                                                                       Figure 33 shows the detail of the SRC section. The SRC master
settle on the new sample rate. Upon sensing that the digital                                                                                                         clock is expected to be equal to 256 times the output sample
servo loop is settling down to a reasonable value, the digital                                                                                                       rate. This master clock can be provided by four different clock
servo loop returns to normal (or slow) mode.                                                                                                                         sources. The selection is set by the SRC and Clock Control
                                                                                                                                                                     register (Address 0x00), and the selected clock source can be
During fast mode, the MUTE_IND bit in the Sample Rate
                                                                                                                                                                     divided using the same register.
Converter Error register is asserted to let the user know that
clicks or pops might be present in the digital audio data. The
output of the SRC can be muted by asserting Bit 7 of the Group
                                                                                                                                                     Rev. A | Page 21 of 60


ADAV801
PLL SECTION                                                                                        Table 7. PLL Frequency Selection Options
The ADAV801 features a dual PLL configuration to generate                                                   Sample Rate, fS                        MCLK Selection
independent system clocks for asynchronous operation.                                              PLL      (kHz)                          Normal fS        Double fS
Figure 37 shows the block diagram of the PLL section. The PLL                                      1        32/44.1/48                     256/384 × fS     512/768 × fS
generates the internal and system clocks from a 27 MHz clock.                                               64/88.2/96                                      256/384 × fS
This clock is generated either by a crystal connected between                                      2A       32/44.1/48                     256/384 × fS     512/768 × fS
XIN and XOUT, as shown in Figure 35, or from an external                                                    64/88.2/96                                      256/384 × fS
clock source connected directly to XIN. A 54 MHz clock can                                         2B       Same as fS selected            256/512 × fS
also be used, if the internal clock divider is used.                                                        for PLL2A
                       C         XTAL          C                                                   The PLLs require some external components to operate
                                                                                                   correctly. These components, shown in Figure 36, form a loop
                                                                                                   filter that integrates the current pulses from a charge pump and
                           XIN
                                                                                                   produces a voltage that is used to tune the VCO. Good quality
                                        XOUT                                                       capacitors, such as PPS film, are recommended. Figure 37
                                                        04577-015                                  shows a block diagram of the PLL section, including the master
                   Figure 35. Crystal Connection                                                   clock selection. Figure 38 shows how the clock frequencies at
                                                                                                   the clock output pins, SYSCLK1 to SYSCLK3, and the internal
Both PLLs (PLL1 and PLL2) can be programmed independently
                                                                                                   PLL clock values, PLL1 and PLL2, are selected.
and can accommodate a range of sampling rates (32 kHz/
44.1 kHz/48 kHz) with selectable system clock oversampling                                         The clock nodes, PLL1 and PLL2, can be used as master clocks
rates of 256 and 384. Higher oversampling rates can also be                                        for the other blocks in the ADAV801, such as the DAC or ADC.
selected by enabling the doubling of the sampling rate to give                                     The PLL has separate supply and ground pins, which should be
512 or 768 × fS ratios. Note that this option also allows                                          as clean as possible to prevent electrical noise from being
oversampling ratios of 256 or 384 at double sample rates of                                        converted into clock jitter by coupling onto the loop filter pins.
64 kHz/88.2 kHz/96 kHz.                                                                                                  AVDD
The PLL outputs can be routed internally to act as clock sources
for the other component blocks such as the ADC and DAC. The                                                                        732Ω         PLL BLOCK
outputs of the PLLs are also available on the three SYSCLK pins.                                                      10nF         1.2µF
                                                                                                                                                                  04577-016
Figure 38 shows how the PLLs can be configured to provide the                                                                               PLL_LFx
sampling clocks.
                                                                                                                                Figure 36. PLL Loop Filter
                                                                                                      PLL_LF1
                                                                                 REG 0x78
                            XIN                                                              PHASE
                                                                                   BIT 6                                      OUTPUT
                                                                                            DETECTOR            VCO                        SYSCLK1
                                                                                            AND LOOP                         SCALER N1
                                                                       ÷2                    FILTER                               PLL1
                           XOUT                                     REG 0x74
                                                                      BIT 4                                  ÷N
                                               REG 0x74
                       MCLKO                     BIT 5
                                                                                             PHASE
                                                   ÷2                                       DETECTOR                          OUTPUT
                                                                                                                VCO                        SYSCLK2
                                                                                            AND LOOP                         SCALER N2
                        MCLKI
                                                                                 REG 0x78
                                                                                             FILTER                               PLL2
                                                                                   BIT 7
                                                                                                                              OUTPUT
                                                                                                             ÷N                            SYSCLK3
                                                                                                                             SCALER N3
                                                                                                                                                      04577-017
                                                                                                      PLL_LF2
                                                                            Figure 37. PLL Section Block Diagram
                                                                                   Rev. A | Page 22 of 60


                                                                                                                                                                                  ADAV801
                                                         PLL1 MCLK
                                                         PLL2 MCLK
                                                                                                                          PLL1
                                                          REG 0x75                REG 0x75
                                           48kHz          BITS[3:2]                 BIT 0
                                           32kHz
                                                                                     ×2            FS1
                                         44.1kHz                                                                                      SYSCLK1
                                                                                                   REG 0x77
                                                          REG 0x75
                                                                                                     BIT 0
                                                          BIT 1
                                             256                                                         ÷2
                                             384                                                                       PLLINT1
                                                                                                                          PLL2
                                                          REG 0x75                REG 0x75
                                                          BIT 5                     BIT 4
                                             256
                                             384                                     ×2            FS2
                                                                                                                                      SYSCLK2
                                                                                                   REG 0x77
                                                          REG 0x75
                                                                                                   BITS[2:1]
                                           48kHz          BITS[7:6]
                                           32kHz                                                         ÷2
                                         44.1kHz
                                                          REG 0x74                                                     PLLINT2
                                                                                                         ÷2
                                                          BIT 0                              FS3
                                             256
                                             512
                                                                                                                                                  04577-018
                                                                                                                                      SYSCLK3
                                                                      Figure 38. PLL Clocking Scheme
S/PDIF TRANSMITTER AND RECEIVER                                                                               CHANNEL STATUS
                                                                                                                AND USER BITS
The ADAV801 contains an integrated S/PDIF transmitter and                                                               ADC
                                                                                                                         DIR                                   DIT
receiver. The transmitter consists of a single output pin,                                                                                     DIT
                                                                                                                  PLAYBACK                                                            DITOUT
DITOUT, on which the biphase encoded data appears. The                                                                                         INPUT
                                                                                                                AUXILIARY IN
S/PDIF transmitter source can be selected from the different
                                                                                                                        SRC
blocks making up the ADAV801. Additionally, the clock source
                                                                                                                                                                                                        04577-020
for the S/PDIF transmitter can be selected from the various                                                                    REG 0x63
                                                                                                                               BITS[2:0]
clock sources available in the ADAV801.
                                                                                                                   Figure 40. Digital Output Transmitter Block Diagram
The receiver uses two pins, DIRIN and DIR_LF. DIRIN accepts
the S/PDIF input data stream. The DIRIN pin can be configured
to accept a digital input level, as defined in the Specifications
section, or an input signal with a peak-to-peak level of 200 mV                                                                                               AUDIO
                                                                                                                               DIRIN
minimum, as defined by the IEC 60958-3 specification. DIR_LF                                                                                                  DATA
is a loop filter pin, required by the internal PLL, which is used                                                                                             RECOVERED
                                                                                                                                DIR                           CLOCK
to recover the clock from the S/PDIF data stream.
                                                                                                                                                                                            04577-021
                                                                                                                                                              CHANNEL STATUS/
                                                                                                                                                              USER BITS
The components shown in Figure 42 form a loop filter, which
integrates the current pulses from a charge pump and produces                                                        Figure 41. Digital Input Receiver Block Diagram
a voltage that is used to tune the VCO of the clock recovery
PLL. The recovered audio data and audio clock can be routed to                                                            AVDD
the different blocks of the ADAV801, as required. Figure 39
shows a conceptual diagram of the DIRIN block.                                                                                         3.3kΩ
                                                                                                                                                              DIR BLOCK
                             REG 0x7A                                                                                                  100nF
                             BIT 4                                                                                    6.8nF
                     DIRIN                                                                                                                       DIR_LF                         04577-022
                C*
       S/PDIF                                           SPDIF
                                                      RECEIVER
                                                                                                                         Figure 42. DIR Loop Filter Components
                        DC        COMPARATOR
                       LEVEL
                                                                      04577-019
                     *EXTERNAL CAPACITOR IS REQUIRED ONLY
                      FOR VARIABLE LEVEL SPDIF INPUTS.
                             Figure 39. DIRIN Block
                                                                                   Rev. A | Page 23 of 60


ADAV801
Serial Digital Audio Transmission Standards                                                                                           1       1   1   0   0   0   1   0
The ADAV801 can receive and transmit S/PDIF, AES/EBU, and
                                                                                                                    PREAMBLE X
IEC-958 serial streams. S/PDIF is a consumer audio standard,
and AES/EBU is a professional audio standard. IEC-958 has                                                                             1       1   1   0   0   1   0   0
both consumer and professional definitions. This data sheet is
not intended to fully define or to provide a tutorial for these                                                     PREAMBLE Y
standards. Contact the international standards-setting bodies
for the full specifications.                                                                                                          1       1   1   0   1   0   0   0
All these digital audio communication schemes encode audio
                                                                                                                    PREAMBLE Z
data and audio control information using the biphase-mark
                                                                                                                                                                            04577-025
method. This encoding method minimizes the dc content of the
transmitted signal. As can be seen from Figure 43, 1s in the                                                                          Figure 45. Preambles
original data end up with midcell transitions in the biphase-                                          The serial digital audio communication scheme is organized
mark encoded data, while 0s in the original data do not. Note                                          using a frame and subframe construction. There are two
that the biphase-mark encoded data always has a transition                                             subframes per frame (ordinarily the left and right channel).
between bit boundaries.                                                                                Each subframe includes the appropriate 4-bit preamble, up to
               CLOCK
    (2 TIMES BIT RATE)                                                                                 24 bits of audio data, a validity (V) bit, a user (U) bit, a channel
                              0         1       1       1      0        0
                                                                                                       status (C) bit, and an even parity (P) bit. The channel status bits
                 DATA
                                                                                                       and the user bits accumulate over many frames to convey
                                                                                                       control information. The channel status bits accumulate over a
                                                                                                       192 frame period (called a channel status block). The user bits
       BIPHASE-MARK                                                                                    accumulate over 1176 frames when the interconnect is imple-
                DATA
                                                                               04577-023
                                                                                                       menting the so-called subcode scheme (EIAJ CP-2401). The
                                                                                                       organization of the channel status block, frames, and subframes
                         Figure 43. Biphase-Mark Encoding
                                                                                                       is shown in Table 9 and Table 10. Note that the ADAV801
Digital audio-communication schemes use preambles to                                                   supports the professional audio standard from a software
distinguish among channels (called subframes) and among                                                point of view only. The digital interface supports only
longer-term control information blocks (called frames). Pream-                                         consumer mode.
bles are particular biphase-mark patterns, which contain encoding
violations that allow the receiver to uniquely recognize them.                                         Table 9. Consumer Audio Standard
These patterns and their relationship to frames and subframes                                                                                     Data Bits
are shown in Table 8 and Figure 44.                                                                    Address 1         7      6         5     4     3    2              1             0
                                                                                                       N                  Channel             Emphasis     Copy-          Non-          Pro/
Table 8. Biphase-Mark Encode Preamble                                                                                      Status                          right          Audio         Con
        Biphase Patterns                            Channel                                                                                                                             =0
X       11100010 or 00011101                        Left                                               N+1                               Category Code
Y       11100100 or 00011011                        Right                                              N+2                  Channel Number           Source Number
Z       11101000 or 00010111                        Left and CS block start                            N+3               Reserved     Clock        Sampling Frequency
                                                                                                                                     Accuracy
                                                                                                       N+4                     Reserved               Word Length
                                  PREAMBLES
                                                                                                       N + 5 to                             Reserved
                                                                                                       (N + 23)
    X LEFT CH Y RIGHT CH Z LEFT CH Y RIGHT CH X LEFT CH Y RIGHT CH                                     1
                                                                                                           N = 0x20 for receiver channel status buffer.
                             SUBFRAME       SUBFRAME                                                       N = 0x38 for transmitter channel status buffer.
                                                                                           04577-024
          FRAME 191                FRAME 0                    FRAME 1
                  Figure 44. Preambles, Frames, and Subframes
The biphase-mark encoding violations are shown in Figure 45.
Note that all three preambles include encoding violations.
Ordinarily, the biphase-mark encoding method results in a
polarity transition between bit boundaries.
                                                                              Rev. A | Page 24 of 60


                                                                                                                                                          ADAV801
                                                                                       bits are available as a memory buffer, taking up 24 consecutive
Table 10. Professional Audio Standard                                                  register locations. The user bits are read using an indirect
                                               Data Bits                               memory addressing scheme, where the receiver user bit
Address1         7           6    5        4     3 2           1         0             indirect-address register is programmed with an offset to the
N                   Sample        Lock          Emphasis       Non-      Pro/Con       user bit buffer, and the receiver user bit data register can be read
                  Frequency                                    Audio = 1
                                                                                       to determine the user bits at that location. Reading the receiver
N+1                User Bit Management                  Channel Mode
                                                                                       user bit data register automatically updates the indirect address
N+2               Alignment       Source Word          Use of Auxiliary Mode
                     Level           Length                 Sample Bits                register to the next location in the buffer. Typically, the receiver
N+3                                    Channel Identification                          user bit indirect-address register is programmed to zero (the
N+4              fS                Sample         Reserved Digital Audio               start of the buffer), and the receiver user bit data register is read
                 Scaling       Frequency (fS)                   Reference              repeatedly until all the buffer’s data has been read. Figure 46
                                                                Signal                 and Figure 47 show how receiving the channel status bits and
N+5                                          Reserved                                  user bits is implemented.
N+6                   Alphanumeric Channel Origin Data—First Character
                                                                                                                            CHANNEL          SECOND BUFFER
N+7                            Alphanumeric Channel Origin Data                                            DIRIN             STATUS A
                                                                                                                           (24 × 8 BITS)         RECEIVE
N+8                            Alphanumeric Channel Origin Data                                                                                 CS BUFFER
                                                                                                           S/PDIF           CHANNEL           (0x20 TO 0x37)
N+9                   Alphanumeric Channel Origin Data—Last Character                                     RECEIVE           STATUS B
                                                                                                                                                               04577-026
N + 10             Alphanumeric Channel Destination Data—First Character                                  BUFFER           (24 × 8 BITS)       RxCSSWITCH
                                                                                                   FIRST BUFFER
N + 11                      Alphanumeric Channel Destination Data
N + 12                      Alphanumeric Channel Destination Data                                                  Figure 46. Channel Status Buffer
N + 13             Alphanumeric Channel Destination Data—Last Character
N + 14                          Local Sample Address Code—LSW                                   S/PDIF
N + 15                              Local Sample Address Code
N + 16                              Local Sample Address Code
                                                                                                 0...7                  0...7
N + 17                         Local Sample Address Code—MSW
                                                                                                 8...15                 8...15
N + 18                               Time of Day Code—LSW                                                                              ADDRESS = 0x50
                                                                                                16...23                16...23
N + 19                                   Time of Day Code                                                                                  RECEIVER USER BIT
N + 20                                   Time of Day Code                                                                                  INDIRECT ADDRESS
                                                                                                                                                REGISTER
N + 21                               Time of Day Code—MSW
N + 22                Reliability Flags                    Reserved                              FIRST                USER-BIT         ADDRESS = 0x51
                                                                                                BUFFER                BUFFER
N + 23                     Cyclic Redundancy Check Character (CRCC)
                                                                                                                                           RECEIVER USER BIT
1
                                                                                                                                             DATA REGISTER
    N = 0x20 for receiver channel status buffer.
                                                                                                                                                                           04577-027
    N = 0x38 for transmitter channel status buffer.
The standards allow the channel status bits in each subframe to                                                    Figure 47. Receiver User Bit Buffer
be independent, but ordinarily the channel status bits in the two                      The S/PDIF receive buffer is updated continuously by the
subframes of each frame are the same. The channel status bits                          incoming S/PDIF stream. Once all the channel status bits for
are defined differently for the consumer audio standards and                           the block (192 for Channel A and 192 for Channel B) are
the professional audio standards. The 192 channel status bits are                      received, the bits are copied into the receiver channel status
organized into 24 bytes and have the interpretations shown in                          buffer. This buffer stores all 384 bits of channel status
Table 9 and Table 10.                                                                  information, and the RxCSSWITCH bit in the channel status
The S/PDIF transmitter and receiver have a comprehensive                               switch buffer register determines whether the Channel A or the
register set. The registers give the user full access to the                           Channel B status bits are required to be read. The receive
functions of the S/PDIF block, such as detecting nonaudio and                          channel status bit buffer is 24 bytes long and spans the address
validity bits, Q subcodes, and preambles. The channel status bits                      range from 0x20 to 0x37.
as defined by the IEC60958 and AES3 specifications are stored                          Because the channel status bits of an S/PDIF stream rarely
in register buffers for ease of use. An autobuffering function                         change, a software interrupt/flag bit, RxCSBINT, is provided to
allows channel status bits and user bits read by the receiver to be                    notify the host control either that a new block of channel status
copied directly to the transmitter block, removing the need for                        bits is available or that the first five bytes of channel status
user intervention.                                                                     information have changed from a previous block. The function
Receiver Section                                                                       of the RxCSBINT is controlled by the RxBCONF3 bit in the
The ADAV801 uses a double-buffering scheme to handle read-                             Receiver Buffer Configuration register.
ing channel status and user bit information. The channel status
                                                                       Rev. A | Page 25 of 60


ADAV801
The size of the user bit buffer can be set by programming the                    the CRC check of the Q subcode, the QCRCERROR bit is set.
RxBCONF0 bit in the receiver buffer configuration register, as                   This is a sticky bit that remains high until the register is read.
shown in Table 11.                                                               Transmitter Operation
Table 11. RxBCONF3 Functionality                                                 The S/PDIF transmitter has a similar buffer structure to the
RxBCONF0        Receiver User Bit Buffer Size                                    receive section. The transmitter channel status buffer occupies
0               384 bits with Preamble Z as the start of the block.              24 bytes of the register map. This buffer is long enough to store
1               768 bits with Preamble Z as the start of the block.              the 192 bits required for one channel of channel status informa-
                                                                                 tion. Setting the TxCSSWITCH bit determines if the data
The updating of the user bit buffer is controlled by Bits
                                                                                 loaded to the transmitter channel status buffer is intended for
RxBCONF[2:1] and Bit 7 to Bit 4 of the channel status register,
                                                                                 Channel A or Channel B. In most cases, the channel status bits
as shown in Table 12 and Table 13.
                                                                                 for Channel A and Channel B are the same, in which case
Table 12. RxBCONF[2:1] Functionality                                             setting the Tx_A/B_Same bit reads the data from the trans-
   RxBCONF                                                                       mitter channel status buffer and transmits it on both channels.
Bit 2   Bit 1       Receiver User Bit Buffer Configuration                       Because the channel status information is rarely changed during
0       0           User bits are ignored.                                       transmission, the information contained in the buffer is trans-
0       1           Update second buffer when first buffer is full.              mitted repeatedly. The Disable_Tx_Copy bit can be used to
1       0           Format according to Byte 1, Bit 4 to Bit 7, if               prevent the channel status bits from being copied from the
                    PRO bit is set. Format according to IEC60958-3,              transmitter CS buffer into the S/PDIF transmitter buffer until
                    if PRO bit is clear.                                         the user has finished loading the buffers. This feature is
                                                                                 typically used, if the Channel A data and Channel B data are
Table 13. Automatic User Bit Configuration
                                                                                 different. Setting the bit prevents the data from being copied.
     Bits           Automatic Receiver User Bit Buffer
                                                                                 Clearing the bit allows the data to be copied and then
7   6 5       4     Configuration
                                                                                 transmitted. Figure 48 shows how the buffers are organized.
0   0 0       0     User bits are ignored.
                                                                                                                                   DITOUT
0   1 0       0     AES-18 format: the user bit buffer is treated in
                    the same way as when RxBCONF[2:1] = 0b01.
1   0    0    0     User bit buffer is updated in the same way as                                                  CHANNEL
                    when RxBCONF[2:1] = 0b01 and RxBCONF0 =                                                         STATUS A
                                                                                                TRANSMIT          (24 × 8 BITS)     S/PDIF
                    0b00.                                                                       CS BUFFER                         TRANSMIT
                                                                                              (0x38 TO 0x4F)       CHANNEL         BUFFER
1   1    0    0     User-defined format: the user bit buffer is                                                    STATUS B
                                                                                                                                               04577-028
                    treated in the same way as when                                                               (24 × 8 BITS)
                                                                                               TxCSSWITCH
                    RxBCONF[2:1] = 0b01.
                                                                                                Figure 48. Transmitter Channel Status Buffer
When the user bit buffer has been filled, the RxUBINT                            As with the receiver section, the transmitted user bits are also
interrupt bit in the interrupt status register is set, provided that             double-buffered. This is required because, unlike the channel
the RxUBINT mask bit is set, to indicate that the buffer has new                 status bits, the user bits do not necessarily repeat themselves.
information and can be read.                                                     The user bits can be buffered in various configurations, as listed
For the special case when the user data is formatted according                   in Table 14. Transmission of the user bits is determined by the
to the IEC 60958-3 standard into messages made of information                    state of the BCONF3 bit. If the bit is 0, the user bits begin
units, called IUs, the zeros stuffed between each IU and each                    transmitting right away without alignment to the Z preamble. If
message are removed and only the IUs are stored. Once the end                    this bit is 1, the user bits do not start transmitting until a
of the message is sensed by more that eight zeros between IUs,                   Z preamble occurs when the TxBCONF[2:1] bits are 01.
the user bit buffer is updated with the complete message and                     Table 14. Transmitter User Bit Buffer Configurations
the first buffer begins looking for the start of the next message.
                                                                                 TxBCONF[2:1]
Each IU is stored as a byte consisting of 1, Q, R, S, T, U, V, and               Bit 2 Bit 1          Transmitter User Bit Buffer Configuration
W bits (see the IEC 60958-3 specification for more information).                 0     0              Zeros are transmitted for the user bits.
When 96 IUs are received, the Q subcode of the IUs is stored in                  0     1              Host writes user bits to the buffer until it is full.
the Q subcode buffer, consisting of 10 bytes. The Q subcode is                   1     0              Writes the user bits to the buffer in IUs
the Q bits taken from each of the 96 IUs. The first 10 bytes                                          specified by IEC60958-3 and transmits them
(80 bits) of the Q subcode contain information sent by CD, MD,                                        according to the standard.
and DAT systems. The last 16 bits of the Q subcode are used to                   1        1           First 10 bytes of the user-bit buffer are
perform a CRC check of the Q subcode. If an error occurs in                                           configured to store a Q subcode.
                                                                 Rev. A | Page 26 of 60


                                                                                                                                                     ADAV801
Table 15. Transmitter User Bit Buffer Size                                                       When the user bits are transmitted according to the IEC 60958-3
TxBCONF0      Buffer Size                                                                        format, the messages contained in the user bits can still be sent
0             384 bits with Preamble Z as the start of the block.                                without dropping or repeating messages. Because zero-stuffing
1             768 bits with Preamble Z as the start of the block.                                is allowed between IUs and messages, zeros can be added or
                                                                                                 subtracted to preserve the messages. When the transmitter
By using sticky bits and interrupts, the transmit buffers can                                    sample rate is greater than the receiver sample rate, extra zeros
notify the host or microcontroller about their status. The sticky                                are stuffed between the messages. When the sample rate of the
bit, TxUBINT, is set when the transmit user bit buffer has been                                  transmitter is less than the sample rate of the receiver, the zeros
updated and the second transmit user bit buffer is empty and                                     stuffed between the messages are subtracted. If there are not
ready to accept new user bits. This bit is located in the interrupt                              enough zeros between the messages to be subtracted, the zeros
status register. When the host reads the interrupt status register,                              between IUs are subtracted as well. The Zero_Stuff_IU bit in
this bit is cleared. Interrupts for the TxUBINT sticky bit can be                                the Autobuffer register enables the adding or subtracting of
enabled by setting the TxUBINT Mask bit in the interrupt                                         zeros between messages.
status mask register                                                                             Interrupts
                                                          S/PDIF 0                               The ADAV801 provides interrupt bits to indicate the presence
                                                                                                 of certain conditions that require attention. Reading the
                                        0...7               0...7                                interrupt status register (Register 0x1C) allows the user to
                                       8...15              8...15                                determine if any of the interrupts have been asserted. The bits
    ADDRESS = 0x52                     16...23            16...23                                of the Interrupt Status register remain high, if set, until the
      TRANSMITTER USER BIT                                                                       register is read. Two bits, SRCError and RxError, indicate
        INDIRECT ADDRESS
             REGISTER                                                                            interrupt conditions in the sample rate converter and an S/PDIF
                                                                                                 receiver error, respectively. Both these conditions require a read
                                     USER-BIT             SECOND
    ADDRESS = 0x53                                                                               of the appropriate error register (Register 0x1A and Register
                                     BUFFER               BUFFER
      TRANSMITTER USER BIT                                                                       0x18, respectively) to determine the exact cause of the interrupt.
         DATA REGISTER
                                                                                                 Each interrupt in the interrupt status register has an associated
                                                                     04577-029                   mask bit in the interrupt status mask register. The interrupt
                 Figure 49. Transmitter User Bit Buffer                                          mask bit must be set for the corresponding interrupt to be
                                                                                                 generated. This feature allows the user to determine which
Autobuffering
                                                                                                 functions should be responded to.
The ADAV801 S/PDIF receiver and transmitter sections have
                                                                                                 The dual function pin ZEROL/INT can be set to indicate the
an autobuffering mode allowing the channel status and user bits
                                                                                                 presence of no audio data on the left channel or the presence of
to be copied automatically from the receiver to the transmitter
                                                                                                 an interrupt set in the interrupt status register. As shown in
without user intervention. The channel status and user bits
                                                                                                 Table 16, the function of this pin is selected by the INTRPT bit
can be independently selected for autobuffering using the
                                                                                                 in DAC Control Register 4.
Auto_CSBits and Auto_UBits bits, respectively, in the Auto-
buffer register. When the receiver and transmitter are running                                   Table 16. ZEROL/INT Pin Functionality
at the same sample rate, the transmitted channel status and user                                 INTRPT        Pin Functionality
bits are the same as the received channel-status and user bits.                                  0             Pin functions as a ZEROL flag pin.
In many systems, however, it is likely that the receiver and                                     1             Pin functions as an interrupt pin.
transmitter are not running at the same frequency. When the
transmitter sample rate is higher than receiver sample rate, the                                 SERIAL DATA PORTS
channel status and user bit blocks are sometimes repeated.                                       The ADAV801 contains four flexible serial ports (SPORTs) to
When the transmitter sample rate is lower than the receiver
                                                                                                 allow data transfer to and from the codec. All four SPORTs are
sample rate, the channel status and user bit blocks might be
                                                                                                 independent and can be configured as master or slave ports. In
dropped. Because the first five bytes of the channel status are
                                                                                                 slave mode, the xLRCLK and xBCLK signals are inputs to the
typically constant, they can be repeated or dropped with no                                      serial ports. In master mode, the serial port generates the
information loss. However, if the PRO bit in the channel status                                  xLRCLK and xBCLK signals. The master clock for the SPORT
is set and the local sample address code and time-of-day code                                    can be selected from a number of sources, as shown in
bytes contain information, these bytes might be repeated or                                      Figure 50.
dropped, in which case information can be lost. It is up to the
user to determine how to handle this case.
                                                                                 Rev. A | Page 27 of 60


ADAV801
                 REG 0x76                                                                             Care should be taken to ensure that the clock rate is appropriate
                 BITS[4:2]      ADC                               OLRCLK
                                              OUTPUT                                                  for whatever block is connected to the serial port. For example,
                                                                  OBCLK
 DIR PLL (512 × fS)             MCLK           PORT
                                                                  OSDATA
 DIR PLL (256 × fS)                                                                                   if the ADC is running from the MCLKI input at 256 × fS, then
          PLLINT1
          PLLINT2
                                                                                                      the master clock for the SPORT should also run from the
                                    ICLK1
            MCLKI                   ICLK2                                                             MCLKI input to ensure that the ADC and serial port are
               XIN             PLL CLOCK        REG 0x06
                                                BITS[5:4]                                             synchronized.
                 REG 0x76                                                                             The SPORTs can be set to transmit or receive data in I2S, left-
                 BITS[7:5]      DAC                               ILRCLK
                                               INPUT
                                                                  IBCLK                               justified or right-justified formats with different word lengths
 DIR PLL (512 × fS)             MCLK           PORT
                                                                  ISDATA                              by programming the appropriate bits in the playback register,
 DIR PLL (256 × fS)
          PLLINT1                                                                                     auxiliary input port register, record register, and auxiliary
          PLLINT2                   ICLK1
            MCLKI                   ICLK2                                                             output port-control register. Figure 51 is a timing diagram of
               XIN             PLL CLOCK        REG 0x04
                                                BITS[4:3]                                             the serial data port formats.
                                                                                                      Clocking Scheme
                REG 0x77
                BITS[4:3]
                                     REG 0x00    SRC
                                                                                                      The ADAV801 provides a flexible choice of on-chip and off-
                          REG 0x00
           MCLKI                     BITS[1:0]                                                        chip clocking sources. The on-chip oscillator with dual PLLs is
                          BITS[3:2]
              XIN                    ICLK1      MCLK
          PLLINT1
                            DIVIDER                                                                   intended to offer complete system clocking requirements for
          PLLINT2       DIR PLL (512 × fS)
                                               DIVIDER                                                use with available MPEG encoders, decoders, or a combination
                        DIR PLL (256 × fS)
                                               REG 0x00                                               of codecs. The oscillator function is designed for generation of a
           MCLKI
                                               BITS[7:6]
              XIN
          PLLINT1
                            DIVIDER
                                      ICLK2                                                           27 MHz video clock from a 27 MHz crystal connected between
          PLLINT2          REG 0x00
                                                                                                      the XIN and XOUT pins. Capacitors must also be connected
                                                                  04577-0-031
                           BITS[4:5]
                REG 0x76
                BITS[1:0]
                                                                                                      between these pins and DGND, as shown in Figure 35. The
                                                                                                      capacitor values should be specified by the crystal manufacturer.
                      Figure 50. SPORT Clocking Scheme
                                                                                                      A square wave version of the crystal clock is output on the
                                                                                                      MCLKO pin. If the system has a 27 MHz clock available, this
                                                                                                      clock can be connected directly to the XIN pin.
    LRCLK                                   LEFT CHANNEL                                                               RIGHT CHANNEL
     BCLK
    SDATA             MSB                                   LSB                                    MSB                             LSB
                                                       LEFT-JUSTIFIED MODE — 16 BITS TO 24 BITS PER CHANNEL
    LRCLK                                   LEFT CHANNEL                                                               RIGHT CHANNEL
     BCLK
    SDATA                     MSB                                               LSB                            MSB                        LSB
                                                              I2S MODE — 16 BITS TO 24 BITS PER CHANNEL
    LRCLK                                   LEFT CHANNEL                                                               RIGHT CHANNEL
     BCLK
    SDATA                              MSB                                                LSB                        MSB                          LSB
                                                                                                                                                                 04577-030
                                                 RIGHT-JUSTIFIED MODE — SELECT NUMBER OF BITS PER CHANNEL
                                                                                 Figure 51. Serial Data Modes
                                                                                      Rev. A | Page 28 of 60


                                                                                                                                         ADAV801
Datapath                                                                                   PLL          OSCILLATOR                       RECORD
The ADAV801 features a digital input/output switching/                                                                                    DATA
                                                                                                                                         OUTPUT
multiplexing matrix that gives flexibility to the range of possible
input and output connections. Digital input ports include                                ADC
playback and auxiliary input (both 3-wire digital), and S/PDIF                                                                            AUX
                                                                                                                                          DATA
(single-wire to the on-chip receiver). Output ports include the                                                                          OUTPUT
record and auxiliary output ports (both 3-wire digital) and the
                                                                                        REFERENCE
S/PDIF port (single-wire from the on-chip transmitter).
                                                                                                             SRC                          DIT
Internally, the DIR and DIT are interfaced via 3-wire interfaces.
The datapath for each input and output port is selected by                               DAC
programming Datapath Control Register 1 and Datapath
Control Register 2. Figure 52 shows the internal datapath
structure of the ADAV801.                                                                         CONTROL    PLAYBACK     AUX      DIR
                                                                                                                                                  04577-032
                                                                                                 REGISTERS      DATA      DATA
                                                                                                               INPUT     INPUT
                                                                                                             Figure 52. Datapath
                                                               Rev. A | Page 29 of 60


ADAV801
INTERFACE CONTROL
The ADAV801 has a dedicated control port to allow access to                                        BLOCK READS AND WRITES
the internal registers of the ADAV801. Each of the internal                                        The ADAV801 provides the user with the ability to write to or
registers is eight bits wide. Where bits are described as reserved                                 read from a block of registers in one continuous operation. In
(RES), these bits should be programmed as zero.                                                    SPI mode, the CLATCH line should be held low for longer than
SPI INTERFACE                                                                                      the 16 CCLK periods to use the block read/write mode. For a
Control of the ADAV801 is via an SPI-compatible serial port.                                       write operation, once the LSB has been clocked into the
The SPI control port is a 4-wire serial control port with one                                      ADAV801 on the 16th CCLK, the register address as specified
cycle of data transfer consisting of 16 bits. Figure 53 shows the                                  by the first seven bits of the write operation is incremented and
format of an SPI write/read of the ADAV801. The transfer of                                        the next eight bits are clocked into the next register address.
data is initiated on the falling edge of CLATCH. The data                                          The read operation is similar. Once the LSB of a read register
presented on the first seven CCLKs represents the register                                         operation has been clocked out, the register address is
address read/write bit. If this bit is low, the following eight bits                               incremented and the data from the next register is clocked out
of data are loaded to the register address provided. If this bit is                                on the following eight CCLKs. Figure 55 and Figure 56 show the
high, a read operation is indicated. The contents of the register                                  timing diagrams for the block write and read operations.
address are clocked out on the COUT pin on the following eight
CCLKs. For a read operation, the data bits after the read/write
bits are ignored.
          CLATCH
            CCLK
              CIN         D15         D14                       D9            D8                                                                   D0
            COUT                                                D9            D8                                                                   D0                           04577-033
                                                                     Figure 53. SPI Serial Port Timing Diagram
                                                                                                                                                  04577-036
                                                 ADDRESS [6:0]                         R/W                       DATA [7:0]
                                 15         14    13     12     11      10         9    8     7     6        5       4    3   2      1      0
                                                                       Figure 54. SPI Control Word Format
                    CLATCH
                        CIN     REGISTER             R/W = 0          REGISTER DATA                REGISTER + 1 DATA          REGISTER + 2 DATA
                                                                                                                                                                    04577-034
                                            8 BITS                           8 BITS                         8 BITS                    8 BITS
                                                                       Figure 55. SPI Block Write Operation
                     CLATCH
                         CIN    REGISTER              R/W = 1                                        DON’T CARE
                       COUT                                            REGISTER DATA                REGISTER + 1 DATA             REGISTER + 2 DATA
                                                                                                                                                              04577-035
                                             8 BITS                          8 BITS                         8 BITS                       8 BITS
                                                                       Figure 56. SPI Block Read Operation
                                                                                   Rev. A | Page 30 of 60


                                                                                                      ADAV801
REGISTER DESCRIPTIONS
SRC and Clock Control—Address 0000000 (0x00)
Table 17. SRC and Clock Control Register Bit Map
7               6                 5                  4                    3         2        1        0
SRCDIV1         SRCDIV0           CLK2DIV1           CLK2DIV0             CLK1DIV1  CLK1DIV0 MCLKSEL1 MCLKSEL0
Table 18. SRC and Clock Control Register Bit Descriptions
Bit Name             Description
SRCDIV[1:0]          Divides the SRC master clock.
                       00 = SRC master clock is not divided.
                       01 = SRC master clock is divided by 1.5.
                       10 = SRC master clock is divided by 2.
                       11 = SRC master clock is divided by 3.
CLK2DIV[1:0]         Clock divider for Internal Clock 2 (ICLK2).
                       00 = Divide by 1.
                       01 = Divide by 1.5.
                       10 = Divide by 2.
                       11 = Divide by 3.
CLK1DIV[1:0]         Clock divider for Internal Clock 1 (ICLK1).
                       00 = Divide by 1.
                       01 = Divide by 1.5.
                       10 = Divide by 2.
                       11 = Divide by 3.
MCLKSEL[1:0]         Clock selection for the SRC master clock.
                       00 = Internal Clock 1.
                       01 = Internal Clock 2.
                       10 = PLL recovered clock (512 × fS).
                       11 = PLL recovered clock (256 × fS).
S/PDIF Loopback Control—Address 0000011 (0x03)
Table 19. S/PDIF Loopback Control Register Bit Map
7               6                 5                  4                    3         2        1        0
Reserved        Reserved          Reserved           Reserved             Reserved  Reserved Reserved TxMUX
Table 20. S/PDIF Loopback Control Register Bit Descriptions
Bit Name             Description
TxMUX                Selects the source for S/PDIF output (DITOUT).
                       0 = S/PDIF transmitter, normal mode.
                       1 = DIRIN, loopback mode.
                                                             Rev. A | Page 31 of 60


ADAV801
Playback Port Control—Address 0000100 (0x04)
Table 21. Playback Port Control Register Bit Map
7                6                 5                   4                    3         2       1       0
Reserved         Reserved          Reserved            CLKSRC1              CLKSRC0   SPMODE2 SPMODE1 SPMODE0
Table 22. Playback Port Control Register Bit Descriptions
Bit Name              Description
CLKSRC[1:0]           Selects the clock source for generating the ILRCLK and IBCLK.
                        00 = Input port is a slave.
                        01 = Recovered PLL clock.
                        10 = Internal Clock 1.
                        11 = Internal Clock 2.
SPMODE[2:0]           Selects the serial format of the playback port.
                        000 = Left-justified.
                        001 = I2S.
                        100 = 24-bit, right-justified.
                        101 = 20-bit, right-justified.
                        110 = 18-bit, right-justified.
                        111 = 16-bit, right-justified.
Auxiliary Input Port—Address 0000101 (0x05)
Table 23. Auxiliary Input Port Register Bit Map
7                6                 5                   4                    3         2       1       0
Reserved         Reserved          Reserved            CLKSRC1              CLKSRC0   SPMODE2 SPMODE1 SPMODE0
Table 24. Auxiliary Input Port Register Bit Descriptions
Bit Name              Description
CLKSRC[1:0]           Selects the clock source for generating the IAUXLRCLK and IAUXBCLK.
                        00 = Input port is a slave.
                        01 = Recovered PLL cock.
                        10 = Internal Clock 1.
                        11 = Internal Clock 2.
SPMODE[2:0]           Selects the serial format of auxiliary input port.
                        000 = Left-justified.
                        001 = I2S.
                        100 = 24-bit, right-justified.
                        101 = 20-bit, right-justified.
                        110 = 18-bit, right-justified.
                        111 = 16-bit, right-justified.
                                                               Rev. A | Page 32 of 60


                                                                                                    ADAV801
Record Port Control—Address 0000110 (0x06)
Table 25. Record Port Control Register Bit Map
7                6                 5                  4                     3         2     1       0
Reserved         Reserved          CLKSRC1            CLKSRC0               WLEN1     WLEN0 SPMODE1 SPMODE0
Table 26. Record Port Control Register Bit Descriptions
Bit Name              Description
CLKSRC[1:0]           Selects the clock source for generating the OLRCLK and OBCLK.
                        00 = Record port is a slave.
                        01 = Recovered PLL clock.
                        10 = Internal Clock 1.
                        11 = Internal Clock 2.
WLEN[1:0]             Selects the serial output word length.
                        00 = 24 bits.
                        01 = 20 bits.
                        10 = 18 bits.
                        11 = 16 bits.
SPMODE[1:0]           Selects the serial format of the record port.
                        00 = Left-justified.
                        01 = I2S.
                        10 = Reserved.
                        11 = Right-justified.
Auxiliary Output Port—Address 0000111 (0x07)
Table 27. Auxiliary Output Port Register Bit Map
7                6                 5                  4                     3         2     1       0
Reserved         Reserved          CLKSRC1            CLKSRC0               WLEN1     WLEN0 SPMODE1 SPMODE0
Table 28. Auxiliary Output Port Register Bit Descriptions
Bit Name              Description
CLKSRC[1:0]           Selects the clock source for generating the OAUXLRCLK and OAUXBCLK.
                        00 = Auxiliary record port is a slave.
                        01 = Recovered PLL clock.
                        10 = Internal Clock 1.
                        11 = Internal Clock 2.
WLEN[1:0]             Selects the serial output word length.
                        00 = 24 bits.
                        01 = 20 bits.
                        10 = 18 bits.
                        11 = 16 bits.
SPMODE[1:0]           Selects the serial format of the auxiliary record port.
                        00 = Left-justified.
                        01 = I2S.
                        10 = Reserved.
                        11 = Right-justified.
                                                               Rev. A | Page 33 of 60


ADAV801
Group Delay and Mute—Address 0001000 (0x08)
Table 29. Group Delay and Mute Register Bit Map
7                6                5                  4                    3               2                 1         0
MUTE_SRC         GRPDLY6          GRPDLY5            GRPDLY4              GRPDLY3         GRPDLY2           GRPDLY1   GRPDLY0
Table 30. Group Delay and Mute Register Bit Descriptions
Bit Name                 Description
MUTE_SRC                 Soft-mutes the output of the sample rate converter.
                            0 = No mute.
                            1 = Soft mute.
GRPDLY[6:0]              Adds delay to the sample rate converter FIR filter by GRPDLY[6:0] input samples.
                            0000000 = No delay.
                            0000001 = 1 sample delay.
                            0000010 = 2 sample delay.
                            1111110 = 126 sample delay.
                            1111111 = 127 sample delay.
Receiver Configuration 1—Address 0001001 (0x09)
Table 31. Receiver Configuration 1 Register Bit Map
7               6                 5                  4                    3               2                 1         0
NOCLOCK         RxCLK1            RxCLK0             AUTO_DEEMPH          ERR1            ERR0              LOCK1     LOCK0
Table 32. Receiver Configuration 1 Register Bit Descriptions
Bit Name             Description
NOCLOCK              Selects the source of the receiver clock when the PLL is not locked.
                        0 = Recovered PLL clock is used.
                        1 = ICLK1 is used.
RxCLK[1:0]           Determines the oversampling ratio of the recovered receiver clock.
                        00 = RxCLK is a 128 × fS recovered clock.
                        01 = RxCLK is a 256 × fS recovered clock.
                        10 = RxCLK is a 512 × fS recovered clock.
                        11 = Reserved.
AUTO_DEEMPH          Automatically de-emphasizes the data from the receiver based on the channel status information.
                        0 = Automatic de-emphasis is disabled.
                        1 = Automatic de-emphasis is enabled.
ERR[1:0]             Defines what action the receiver should take, if the receiver detects a parity or biphase error.
                        00 = No action is taken.
                        01 = Last valid sample is held.
                        10 = Invalid sample is replaced with zeros.
                        11 = Reserved.
LOCK[1:0]            Defines what action the receiver should take, if the PLL loses lock.
                        00 = No action is taken.
                        01 = Last valid sample is held.
                        10 = Zeros are sent out after the last valid sample.
                        11 = Soft-mute of the last valid audio sample.
                                                             Rev. A | Page 34 of 60


                                                                                                                               ADAV801
Receiver Configuration 2—Address 0001010 (0x0A)
Table 33. Receiver Configuration 2 Register Bit Map
7            6            5                         4                       3           2            1                     0
RxMUTE       SP_PLL       SP_PLL_ SEL1              SP_PLL_ SEL0            Reserved    Reserved     NO NONAUDIO           NO_VALIDITY
Table 34. Receiver Configuration 2 Register Bit Descriptions
Bit Name             Description
RxMUTE               Hard-mutes the audio output for the AES3/S/PDIF receiver.
                        0 = AES3/S/PDIF receiver is not muted.
                        1 = AES3/S/PDIF receiver is muted.
SP_PLL               AES3/S/PDIF receiver PLL accepts a left/right clock from one of the four serial ports as the PLL reference clock.
                        0 = Left/right clock generated from the AES3/S/PDIF preambles is the reference clock to the PLL.
                        1 = Left/right clock from one of the serial ports is the reference clock to the PLL.
SP_PLL_SEL[1:0]      Selects one of the four serial ports as the reference clock to the PLL when SP_PLL is set.
                        00 = Playback port is selected.
                        01 = Auxiliary input port is selected.
                        10 = Record port is selected.
                        11 = Auxiliary output port is selected.
NO NONAUDIO          When the NO NONAUDIO bit is set, data from the AES3/S/PDIF receiver is not allowed into the sample rate converter
                     (SRC). If the NO NONAUDIO data is due to DTS, AAC, and so on, as defined by the IEC61937 standard, then the data
                     from the AES3/S/PDIF receiver is not allowed into the SRC regardless of the state of this bit.
                        0 = AES3/S/PDIF receiver data is sent to the SRC.
                        1 = Data from the AES3/S/PDIF receiver is not allowed into the SRC, if the NO NONAUDIO bit is set.
NO_VALIDITY          When the NO_VALIDITY bit is set, data from the AES3/S/PDIF receiver is not allowed into the SRC.
                        0 = AES3/S/PDIF receiver data is sent to the SRC.
                        1 = Data from the AES3/S/PDIF receiver is not allowed into the SRC, if the NO_VALIDITY bit is set.
                                                              Rev. A | Page 35 of 60


ADAV801
Receiver Buffer Configuration—Address 0001011 (0x0B)
Table 35. Receiver Buffer Configuration Register Bit Map
7                6                   5                  4                      3               2                 1                 0
Reserved         Reserved            RxBCONF5           RxBCONF4               RxBCONF3        RxBCONF2          RxBCONF1          RxBCONF0
Table 36. Receiver Buffer Configuration Register Bit Descriptions
Bit Name              Description
RxBCONF5              If the user bits are formatted according to the IEC60958-3 standard and the DAT category is detected, the user bit
                      interrupt is enabled only when there is a change in the start (ID) bit.
                          0 = User bit interrupt is enabled in normal mode.
                          1 = If the DAT category is detected, the user bit interrupt is enabled only if there is a change in the start (ID) bit.
RxBCONF4              This bit determines whether Channel A and Channel B user bits are stored in the buffer together or separated
                      between A and B.
                          0 = User bits are stored together.
                          1 = User bits are stored separately.
RxBCONF3              Defines the function of RxCSBINT.
                          0 = RxCSBINT are set when a new block of receiver channel status is read, which is 192 audio frames.
                          1 = RxCSBINT is set only if the first five bytes of the receiver channel status block changes from the previous
                          channel status block.
RxBCONF[2:1]          Defines the user bit buffer.
                          00 = User bits are ignored.
                          01 = Updates the second user bit buffer when the first user bit buffer is full.
                          10 = Formats the received user bits according to Byte 1, Bit 4 to Bit 7, of the channel status, if the PRO bit is set. If
                          the PRO bit is not set, formats the user bits according to the IEC60958-3 standard.
                          11 = Reserved.
RxBCONF0              Defines the user bit buffer size, if RxBCONF[2:1] = 01.
                          0 = 384 bits with Preamble Z as the start of the buffer.
                          1 = 768 bits with Preamble Z as the start of the buffer.
Transmitter Control—Address 0001100 (0x0C)
Table 37. Transmitter Control Register Bit Map
7                6                   5                  4                      3               2                 1                 0
Reserved         TxVALIDITY          TxRATIO2           TxRATIO1               TxRATIO0        TxCLKSEL1         TxCLKSEL0         TxENABLE
Table 38. Transmitter Control Register Bit Descriptions
Bit Name             Description
TxVALIDITY           This bit is used to set or clear the VALIDITY bit in the AES3/S/PDIF transmit stream.
                         0 = Audio is suitable for digital-to-analog conversion.
                         1 = Audio is not suitable for digital-to-analog conversion.
TxRATIO[2:0]         Determines the AES3/S/PDIF transmitter to AES3/S/PDIF receiver ratio.
                         000 = Transmitter to receiver ratio is 1:1.
                         001 = Transmitter to receiver ratio is 1:2.
                         010 = Transmitter to receiver ratio is 1:4.
                         101 = Transmitter to receiver ratio is 2:1.
                         110 = Transmitter to receiver ratio is 4:1.
TxCLKSEL[1:0]        Selects the clock source for the AES3/S/PDIF transmitter.
                         00 = Internal Clock 1 is the clock source for the transmitter.
                         01 = Internal Clock 2 is the clock source for the transmitter.
                         10 = Recovered PLL clock is the clock source for the transmitter.
                         11 = Reserved.
TxENABLE             Enables the AES3/S/PDIF transmitter.
                         0 = AES3/S/PDIF transmitter is disabled.
                         1 = AES3/S/PDIF transmitter is enabled.
                                                                  Rev. A | Page 36 of 60


                                                                                                                             ADAV801
Transmitter Buffer Configuration—Address 0001101 (0x0D)
Table 39. Transmitter Buffer Configuration Register Bit Map
7               6                  5                 4                    3                2                1               0
IU_Zeros3       IU_Zeros2          IU_Zeros1         IU_Zeros0            TxBCONF3         TxBCONF2         TxBCONF1        TxBCONF0
Table 40. Transmitter Buffer Configuration Register Bit Descriptions
Bit Name             Description
IU_Zeros[3:0]        Determines the number of zeros to be stuffed between IUs in a message up to a maximum of 8.
                        0000 = 0.
                        0001 = 1.
                        …
                        0111 = 7.
                        1000 = 8.
TxBCONF3             Transmitter user bits can be stored in separate buffers or stored together.
                        0 = User bits are stored together.
                        1 = User bits are stored separately.
TxBCONF[2:1]         Configures the transmitter user bit buffer.
                        00 = Zeros are transmitted for the user bits.
                        01 = Transmitter user bit buffer size is configured according to TxBCONF0.
                        10 = User bits are written to the transmit buffer in IUs specified by the IEC60958-3 standard.
                        11 = Reserved.
TxBCONF0             Determines the buffer size of the transmitter user bits when TxBCONF[2:1] is 01.
                        0 = 384 bits with Preamble Z as the start of the buffer.
                        1 = 768 bits with Preamble Z as the start of the buffer.
Channel Status Switch Buffer and Transmitter—Address 0001110 (0x0E)
Table 41. Channel Status Switch Buffer and Transmitter Register Bit Map
7               6                 5                 4                       3               2                1               0
Reserved        Reserved          Tx_A/B_Same       Disable_Tx_Copy         Reserved        Reserved         TxCSSWITCH      RxCSSWITCH
Table 42. Channel Status Switch Buffer and Transmitter Register Bit Description
Bit Name             Description
Tx_A/B_Same          Transmitter Channel Status A and B are the same. The transmitter reads only from the Channel Status A buffer and
                     places the data into the Channel Status B buffer.
                        0 = Channel status for A and B are separate.
                        1 = Channel status for A and B are the same.
Disable_Tx_Copy      Disables the copying of the channel status bits from the transmitter channel status buffer to the S/PDIF transmitter
                     buffer.
                        0 = Copying transmitter channel status is enabled.
                        1 = Copying transmitter channel status is disabled.
TxCSSWITCH           Toggle switch for the transmit channel status buffer.
                        0 = 24-byte Transmitter Channel Status A buffer can be accessed at address locations 0x38 through 0x4F.
                        1 = 24-byte Transmitter Channel Status B buffer can be accessed at address locations 0x38 through 0x4F.
RxCSSWITCH           Toggle switch for the receive channel status buffer.
                        0 = 24-byte Receiver Channel Status A buffer can be accessed at address locations 0x20 through 0x37.
                        1 = 24-byte Receiver Channel Status B buffer can be accessed at address locations 0x20 through 0x37.
                                                             Rev. A | Page 37 of 60


ADAV801
Transmitter Message Zeros Most Significant Byte—Address 0001111 (0x0F)
Table 43. Transmitter Message Zeros Most Significant Byte Register Bit Map
7               6                  5                 4                   3             2                1                   0
MSBZeros7       MSBZeros6          MSBZeros5         MSBZeros4           MSBZeros3     MSBZeros2        MSBZeros1           MSBZeros0
Table 44. Transmitter Message Zeros Most Significant Byte Register Bit Description
Bit Name             Description
MSBZeros[7:0]        Most significant byte of the number of zeros to be stuffed between IEC60958-3 messages (packets).
                     Default = 0x00.
Transmitter Message Zeros Least Significant Byte—Address 0010000 (0x10)
Table 45. Transmitter Message Zeros Least Significant Byte Register Bit Map
7               6                  5                 4                   3             2                1                   0
LSBZeros7       LSBZeros6          LSBZeros5         LSBZeros4           LSBZeros3     LSBZeros2        LSBZeros1           LSBZeros0
Table 46. Transmitter Message Zeros Least Significant Byte Register Bit Descriptions
Bit Name             Description
LSBZeros[7:0]        Least significant byte of the number of zeros to be stuffed between IEC60958-3 messages (packets). Default = 0x09.
Autobuffer—Address 0010001 (0x11)
Table 47. Autobuffer Register Bit Map
7               6                  5                 4                   3             2                1                   0
Reserved        Zero_Stuff_IU      Auto_UBits        Auto_CSBits         IU_Zeros3     IU_Zeros2        IU_Zeros1           IU_Zeros0
Table 48. Autobuffer Register Bit Descriptions
Bit Name             Description
Zero_Stuff_IU        Enables the addition or subtraction of zeros between IUs during autobuffering of the user bits in IEC60958-3 format.
                       0 = No zeros added or subtracted.
                       1 = Zeros can be added or subtracted between IUs.
Auto_UBits           Enables the user bits to be autobuffered between the AES3/S/PDIF receiver and transmitter.
                       0 = User bits are not autobuffered.
                       1 = User bits are autobuffered.
Auto_CSBits          Enables the channel status bits to be autobuffered between the AES3/S/PDIF receiver and transmitter.
                       0 = Channel status bits are not autobuffered.
                       1 = Channel status bits are autobuffered.
IU_Zeros[3:0]        Sets the maximum number of zero-stuffing to be added between IUs while autobuffering up to a maximum of 8.
                       0000 = 0.
                       0001 = 1.
                       …
                       0111 = 7.
                       1000 = 8.
Sample Rate Ratio MSB—Address 0010010 (0x12)
Table 49. Sample Rate Ratio MSB Register (Read-Only) Bit Map
7               6                  5                 4                   3             2                1                   0
Reserved        SRCRATIO14         SRCRATIO13        SRCRATIO12          SRCRATIO11    SRCRATIO10       SRCRATIO09          SRCRATIO08
Table 50. Sample Rate Ratio MSB Register (Read-Only) Bit Descriptions
Bit Name             Description
SRCRATIO[14:8]       Seven most significant bits of the15-bit sample rate ratio.
                                                            Rev. A | Page 38 of 60


                                                                                                                             ADAV801
Sample Rate Ratio LSB—Address 0010011 (0x13)
Table 51. Sample Rate Ratio LSB Register (Read-Only) Bit Map
7               6                  5                   4                    3           2                 1                 0
SRCRATIO07      SRCRATIO06         SRCRATIO05          SRCRATIO04           SRCRATIO03  SRCRATIO02        SRCRATIO01        SRCRATIO00
Table 52. Sample Rate Ratio LSB Register (Read-Only) Bit Descriptions
Bit Name           Description
SRCRATIO[7:0]      Eight least significant bits of the15-bit sample rate ratio.
Preamble-C MSB—Address 0010100 (0x14)
Table 53. Preamble-C MSB Register (Read-Only) Bit Map
7               6                  5                   4                    3           2                 1                 0
PRE_C15         PRE_C14            PRE_C13             PRE_C12              PRE_C11     PRE_C10           PRE_C9            PRE_C8
Table 54. Preamble-C MSB Register (Read-Only) Bit Descriptions
Bit Name             Description
PRE_C[15:8]          Eight most significant bits of the 16-bit Preamble-C, when nonaudio data is detected according to the IEC60937
                     standard; otherwise, bits show zeros.
Preamble-C LSB—Address 0010101 (0x15)
Table 55. Preamble-C LSB Register (Read-Only) Bit Map
7               6                  5                   4                    3           2                 1                 0
PRE_C07         PRE_C06            PRE_C05             PRE_C04              PRE_C03     PRE_C02           PRE_C01           PRE_C00
Table 56. Preamble-C LSB Register (Read-Only) Bit Descriptions
Bit Name             Description
PRE_C[7:0]           Eight least significant bits of the 16-bit Preamble-C, when nonaudio data is detected according to the IEC60937
                     standard; otherwise, bits show zeros.
Preamble-D MSB—Address 0010110 (0x16)
Table 57. Preamble-D MSB Register (Read-Only) Bit Map
7               6                  5                   4                    3           2                 1                 0
PRE_D15         PRE_D14            PRE_D13             PRE_D12              PRE_D11     PRE_D10           PRE_D9            PRE_D8
Table 58. Preamble-D MSB Register (Read-Only) Bit Descriptions
Bit Name             Description
PRE_D[15:8]          Eight most significant bits of the 16-bit Preamble-D, when nonaudio data is detected according to the IEC60937
                     standard; otherwise, bits show zeros. When subframe nonaudio is used, this becomes the eight most significant bits
                     of the 16-bit Preamble-C of Channel B.
Preamble-D LSB—Address 0010111 (0x17)
Table 59. Preamble-D LSB Register (Read-Only) Bit Map
7               6                  5                   4                    3           2                 1                 0
PRE_D07         PRE_D06            PRE_D05             PRE_D04              PRE_D03     PRE_D02           PRE_D01           PRE_D00
Table 60. Preamble-D LSB Register (Read-Only) Bit Descriptions
Bit Name             Description
PRE_D[7:0]           Eight least significant bits of the 16-bit Preamble-D, when nonaudio data is detected according to the IEC60937
                     standard; otherwise, bits show zeros. When subframe nonaudio is used, this becomes the eight most significant bits
                     of the 16-bit Preamble-C of Channel B.
                                                               Rev. A | Page 39 of 60


ADAV801
Receiver Error—Address 0011000 (0x18)
Table 61. Receiver Error Register (Read-Only) Bit Map
7               6                   5                      4                              3          2                  1                        0
RxValidity      Emphasis            NonAudio               NonAudio Preamble              CRCError   NoStream           BiPhase/Parity           Lock
Table 62. Receiver Error Register (Read-Only) Bit Descriptions
Bit Name           Description
RxValidity         This is the VALIDITY bit in the AES3 received stream.
Emphasis           This bit is set if the audio data is pre-emphasized. Once it has been read, it remains high and does not generate an
                   interrupt unless it changes state.
NonAudio           This bit is set when Channel Status Bit 1 (nonaudio) is set. Once it has been read, it does not generate another interrupt
                   unless the data becomes audio or the type of nonaudio data changes.
NonAudio           This bit is set if the audio data is nonaudio due to the detection of a preamble. The nonaudio preamble type register
Preamble           indicates what type of preamble was detected. Once read, it remains in its state and does not generate an interrupt
                   unless it changes state.
CRCError           This bit is the error flag for the channel status CRCError check. This bit does not clear until the receiver error register is read.
NoStream           This bit is set if there is no AES3/S/PDIF stream present at the AES3/S/PDIF receiver. Once read, it remains high and does
                   not generate an interrupt unless it changes state.
BiPhase/Parity     This bit is set if a biphase or parity error occurred in the AES3/S/PDIF stream. This bit is not cleared until the register is read.
Lock               This bit is set if the PLL has locked or cleared when the PLL loses lock. Once read, it remains in its state and does not
                   generate an interrupt unless it changes state.
Receiver Error Mask—Address 0011001 (0x19)
Table 63. Receiver Error Mask Register Bit Map
7                6                    5                  4                            3            2                  1                       0
RxValidity       Emphasis             NonAudio           NonAudio Preamble            CRCError     NoStream           BiPhase/Parity          Lock
Mask             Mask                 Mask               Mask                         Mask         Mask               Mask                    Mask
Table 64. Receiver Error Mask Register Bit Descriptions
Bit Name                           Description
RxValidity Mask                    Masks the RxValidity bit from generating an interrupt.
                                       0 = RxValidity bit does not generate an interrupt.
                                       1 = RxValidity bit generates an interrupt.
Emphasis Mask                      Masks the Emphasis bit from generating an interrupt.
                                       0 = Emphasis bit does not generate an interrupt.
                                       1 = Emphasis bit generates an interrupt.
NonAudio Mask                      Masks the NonAudio bit from generating an interrupt.
                                       0 = NonAudio bit does not generate an interrupt.
                                       1 = NonAudio bit generates an interrupt.
NonAudio Preamble Mask             Masks the NonAudio preamble bit from generating an interrupt.
                                       0 = NonAudio preamble bit does not generate an interrupt.
                                       1 = NonAudio preamble bit generates an interrupt.
CRCError Mask                      Masks the CRCError bit from generating an interrupt.
                                       0 = CRCError bit does not generate an interrupt.
                                       1 = CRCError bit generates an interrupt.
NoStream Mask                      Masks the NoStream bit from generating an interrupt.
                                       0 = NoStream bit does not generate an interrupt.
                                       1 = NoStream bit generates an interrupt.
BiPhase/Parity Mask                Masks the BiPhase/Parity bit from generating an interrupt.
                                       0 = BiPhase/Parity bit does not generate an interrupt.
                                       1 = BiPhase/Parity bit generates an interrupt.
Lock Mask                          Masks the Lock bit from generating an interrupt.
                                       0 = Lock bit does not generate an interrupt.
                                       1 = Lock bit generates an interrupt.
                                                                   Rev. A | Page 40 of 60


                                                                                                                                ADAV801
Sample Rate Converter Error—Address 0011010 (0x1A)
Table 65. Sample Rate Converter Error Register (Read-Only) Bit Map
7               6                   5                 4                     3                2                1                0
Reserved        Reserved            Reserved          Reserved              TOO_SLOW         OVRL             OVRR             MUTE_IND
Table 66. Sample Rate Converter Error Register (Read-Only) Bit Descriptions
Bit Name             Description
TOO_SLOW             This bit is set when the clock to the SRC is too slow, that is, there are not enough clock cycles to complete the
                     internal convolution.
OVRL                 This bit is set when the left output data of the sample rate converter has gone over the full-scale range and has been
                     clipped. This bit is not cleared until the register is read.
OVRR                 This bit is set when the right output data of the sample rate converter has gone over the full-scale range and has
                     been clipped. This bit is not cleared until the register is read.
MUTE_IND             Mute indicated. This bit is set when the SRC is in fast mode and clicks or pops can be heard in the SRC output data.
                     The output of the SRC can be muted, if required, until the SRC is in slow mode. Once read, this bit remains in its state
                     and does not generate an interrupt until it has changed state.
Sample Rate Converter Error Mask—Address 0011011 (0x1B)
Table 67. Sample Rate Converter Error Mask Register Bit Map
7               6                   5                 4                    3                2                1               0
Reserved        Reserved            Reserved          Reserved             Reserved         OVRL Mask        OVRR Mask       MUTE_IND MASK
Table 68. Sample Rate Converter Error Mask Register Bit Descriptions
Bit Name             Description
OVRL Mask            Masks the OVRL from generating an interrupt.
                        0 = OVRL bit does not generate an interrupt.
                        1 = OVRL bit generates an interrupt.
OVRR Mask            Masks the OVRR from generating an interrupt.
                        0 = OVRR bit does not generate an interrupt.
                        1 = OVRR bit generates an interrupt. Reserved.
MUTE_IND MASK        Masks the MUTE_IND from generating an interrupt.
                        0 = MUTE_IND bit does not generate an interrupt.
                        1 = MUTE_IND bit generates an interrupt.
                                                               Rev. A | Page 41 of 60


ADAV801
Interrupt Status—Address 0011100 (0x1C)
Table 69. Interrupt Status Register Bit Map
7                6                     5                  4                    3               2                 1                   0
SRCError         TxCSTINT              TxUBINT            TxCSBINT             RxCSDIFF        RxUBINT           RxCSBINT            RxERROR
Table 70. Interrupt Status Register Bit Descriptions
Bit Name         Description
SRCError         This bit is set if one of the sample rate converter interrupts is asserted, and the host should immediately read the sample
                 rate converter error register. This bit remains high until the interrupt status register is read.
TxCSTINT         This bit is set if a write to the transmitter channel status buffer was made while transmitter channel status bits were being
                 copied from the transmitter CS buffer to the S/PDIF transmit buffer.
TxUBINT          This bit is set if the S/PDIF transmit buffer is empty. This bit remains high until the interrupt status register is read.
TxCSBINT         This bit is set if the transmitter channel status bit buffer has transmitted its block of channel status. This bit remains high
                 until the interrupt status register is read.
RxCSDIFF         This bit is set if the receiver Channel Status A block is different from the receiver Channel Status B clock. This bit remains
                 high until read, but does not generate an interrupt.
RxUBINT          This bit is set if the receiver user bit buffer has a new block or message. This bit remains high until the interrupt status
                 register is read.
RxCSBINT         This bit is set if a new block of channel status is read when RxBCONF3 = 0, or if the channel status has changed when
                 RxBCONF3 = 1. This bit remains high until the interrupt status register is read.
RxERROR          This bit is set if one of the AES3/S/PDIF receiver interrupts is asserted, and the host should immediately read the receiver
                 error register. This bit remains high until the interrupt status register is read.
Interrupt Status Mask—Address 0011101 (0x1D)
Table 71. Interrupt Status Mask Register Bit Map
7                 6                      5                  4                      3          2                 1                     0
SRCError Mask     TxCSTINT Mask          TxUBINT Mask       TxCSBINT Mask          Reserved   RxUBINT Mask      RxCSBINT Mask         RxError Mask
Table 72. Interrupt Status Mask Register Bit Descriptions
Bit Name               Description
SRCError Mask          Masks the SRCError bit from generating an interrupt.
                          0 = SRCError bit does not generate an interrupt.
                          1 = SRCError bit generates an interrupt.
TxCSTINT Mask          Masks the TxCSTINT bit from generating an interrupt.
                          0 = TxCSTINT bit does not generate an interrupt.
                          1 = TxCSTINT bit generates an interrupt.
TxUBINT Mask           Masks the TxUBINT bit from generating an interrupt.
                          0 = TxUBINT bit does not generate an interrupt.
                          1 = TxUBINT bit generates an interrupt.
TxCSBINT Mask          Masks the TxCSBINT bit from generating an interrupt.
                          0 = TxCSBINT bit does not generate an interrupt.
                          1 = TxCSBINT bit generates an interrupt.
RxUBINT Mask           Masks the RxUBINT bit from generating an interrupt.
                          0 = RxUBINT bit does not generate an interrupt.
                          1 = RxUBINT bit generates an interrupt.
RxCSBINT Mask          Masks the RxCSBINT bit from generating an interrupt.
                          0 = RxCSBINT bit does not generate an interrupt.
                          1 = RxCSBINT bit generates an interrupt.
RxError Mask           Masks the RxError bit from generating an interrupt.
                          0 = RxError bit does not generate an interrupt.
                          1 = RxError bit generates an interrupt.
                                                                  Rev. A | Page 42 of 60


                                                                                                                                 ADAV801
Mute and De-Emphasis—Address 0011110 (0x1E)
Table 73. Mute and De-Emphasis Register Bit Map
7                6                  5                   4                    3             2                 1                  0
Reserved         Reserved           TxMUTE              Reserved             Reserved      SRC_DEEM1         SRC_DEEM0          Reserved
Table 74. Mute and De-Emphasis Register Bit Descriptions
Bit Name                 Description
TxMUTE                   Mutes the AES3/S/PDIF transmitter.
                             0 = Transmitter is not muted.
                             1 = Transmitter is muted.
SRC_DEEM[1:0]            Selects the de-emphasis filter for the input data to the sample rate converter.
                             00 = No de-emphasis.
                             01 = 32 kHz de-emphasis.
                             10 = 44.1 kHz de-emphasis.
                             11 = 48 kHz de-emphasis.
NonAudio Preamble Type—Address 0011111 (0x1F)
Table 75. NonAudio Preamble Type Register (Read-Only) Bit Map
7                6                  5                   4                    3             2                 1                  0
Reserved         Reserved           Reserved            Reserved             DTS-CD        NonAudio          NonAudio           NonAudio
                                                                             Preamble      Frame             Subframe_A         Subframe_B
Table 76. NonAudio Preamble Type Register (Read-Only) Bit Descriptions
Bit Name                 Description
DTS-CD Preamble          This bit is set if the DTS-CD preamble is detected.
NonAudio Frame           This bit is set if the data received through the AES3/S/PDIF receiver is nonaudio data according to the IEC61937
                         standard or nonaudio data according to SMPTE337M.
NonAudio Subframe_A      This bit is set if the data received through Channel A of the AES3/S/PDIF receiver is subframe nonaudio data
                         according to SMPTE337M.
NonAudio Subframe_B      This bit is set if the data received through Channel B of the AES3/S/PDIF receiver is subframe nonaudio data
                         according to SMPTE337M.
Receiver Channel Status Buffer—Address 0100000 to Address 0110111 (0x20 to 0x37)
Table 77. Receiver Channel Status Buffer Register Bit Map
7                6                  5                   4                    3             2                 1                  0
RCSB7            RCSB6              RCSB5               RCSB4                RCSB3         RCSB2             RCSB1              RCSB0
Table 78. Receiver Channel Status Buffer Register Bit Descriptions
Bit Name              Description
RCSB[7:0]             The 24-byte receiver channel status buffer. The PRO bit is stored at address location 0x20, Bit 0. This buffer is read-
                      only if the channel status is not autobuffered between the receiver and transmitter.
Transmitter Channel Status Buffer—Address 0111000 to Address 1001111 (0x38 to 0x4F)
Table 79. Transmitter Channel Status Buffer Register Bit Map
7                6                  5                   4                    3             2                 1                  0
TCSB7            TCSB6              TCSB5               TCSB4                TCSB3         TCSB2             TCSB1              TCSB0
Table 80. Transmitter Channel Status Buffer Register Bit Descriptions
Bit Name              Description
TCSB[7:0]             The 24-byte transmitter channel status buffer. The PRO bit is stored at address location 0x38, Bit 0. This buffer is
                      disabled when autobuffering between the receiver and transmitter is enabled.
                                                                Rev. A | Page 43 of 60


ADAV801
Receiver User Bit Buffer Indirect Address— Address 1010000 (0x50)
Table 81. Receiver User Bit Buffer Indirect Address Register Bit Map
7                6                   5                 4                     3               2                  1                0
RxUBADDR7        RxUBADDR6           RxUBADDR5         RxUBADDR4             RxUBADDR3       RxUBADDR2          RxUBADDR1        RxUBADDR0
Table 82. Receiver User Bit Buffer Indirect Address Register Bit Descriptions
Bit Name             Description
RxUBADDR[7:0]        Indirect address pointing to the address location in the receiver user bit buffer.
Receiver User Bit Buffer Data—Address 1010001 (0x51)
Table 83. Receiver User Bit Buffer Data Register Bit Map
7                6                   5                 4                     3               2                  1                0
RxUBDATA7        RxUBDATA6           RxUBDATA5         RxUBDATA4             RxUBDATA3       RxUBDATA2          RxUBDATA1        RxUBDATA0
Table 84. Receiver User Bit Buffer Data Register Bit Descriptions
Bit Name              Description
RxUBDATA[7:0]         A read from this register reads eight bits of user data from the receiver user bit buffer pointed to by RxUBADDR0[7:0].
                      This buffer can be written to when autobuffering of the user bits is enabled; otherwise, it is a read-only buffer.
Transmitter User Bit Buffer Indirect Address—Address 1010010 (0x52)
Table 85. Transmitter User Bit Buffer Indirect Address Register Bit Map
7                6                   5                 4                     3               2                  1                0
TxUBADDR7        TxUBADDR6           TxUBADDR5         TxUBADDR4             TxUBADDR3       TxUBADDR2          TxUBADDR1        TxUBADDR0
Table 86. Transmitter User Bit Buffer Indirect Address Register Bit Descriptions
Bit Name              Description
TxUBADDR[7:0]         Indirect address pointing to the address location in the transmitter user bit buffer.
Transmitter User Bit Buffer Data—Address 1010011 (0x53)
Table 87. Transmitter User Bit Buffer Data Register Bit Map
7                6                   5                 4                     3               2                  1                0
TxUBDATA7        TxUBDATA6           TxUBDATA5         TxUBDATA4             TxUBDATA3       TxUBDATA2          TxUBDATA1        TxUBDATA0
Table 88. Transmitter User Bit Buffer Data Register Bit Descriptions
Bit Name              Description
TxUBDATA[7:0]         A write to this register writes eight bits of user data to the transmit user bit buffer pointed to by TxUBADDR0[7:0].
                      When user bit autobuffering is enabled, this buffer is disabled.
Q Subcode CRCError Status—Address 1010100 (0x54)
Table 89. Q Subcode CRCError Status Register (Read-Only) Bit Map
7                6                   5                 4                     3               2                  1                0
Reserved         Reserved            Reserved          Reserved              Reserved        Reserved           QCRCERROR        QSUB
Table 90. Q Subcode CRCError Status Register (Read-Only) Bit Descriptions
Bit Name              Description
QCRCERROR             This bit is set if the CRC check of the Q subcode fails. This bit remains high, but does not generate an interrupt. This
                      bit is cleared once the register is read.
QSUB                  This bit is set if a Q subcode has been read into the Q subcode buffer (see Table 91).
                                                                Rev. A | Page 44 of 60


                                                                                                                ADAV801
Q Subcode Buffer—Address 0x55 to Address 0x5E
Table 91. Q Subcode Buffer Bit Map
Address    Bit 7          Bit 6             Bit 5           Bit 4               Bit 3      Bit 2      Bit 1    Bit 0
0x55       Address        Address           Address         Address             Control    Control    Control  Control
0x56       Track          Track             Track           Track               Track      Track      Track    Track
           number         number            number          number              number     number     number   number
0x57       Index          Index             Index           Index               Index      Index      Index    Index
0x58       Minute         Minute            Minute          Minute              Minute     Minute     Minute   Minute
0x59       Second         Second            Second          Second              Second     Second     Second   Second
0x5A       Frame          Frame             Frame           Frame               Frame      Frame      Frame    Frame
0x5B       Zero           Zero              Zero            Zero                Zero       Zero       Zero     Zero
0x5C       Absolute       Absolute          Absolute        Absolute            Absolute   Absolute   Absolute Absolute
           minute         minute            minute          minute              minute     minute     minute   minute
0x5D       Absolute       Absolute          Absolute        Absolute            Absolute   Absolute   Absolute Absolute
           second         second            second          second              second     second     second   second
0x5E       Absolute       Absolute          Absolute        Absolute            Absolute   Absolute   Absolute Absolute
           frame          frame             frame           frame               frame      frame      frame    frame
Datapath Control Register 1—Address 1100010 (0x62)
Table 92. Datapath Control Register 1 Bit Map
7                6                5                  4                    3              2          1          0
SRC1             SRC0             REC2               REC1                 REC0           AUXO2      AUXO1      AUXO0
Table 93. Datapath Control Register 1 Bit Descriptions
Bit Name              Description
SRC[1:0]              Datapath source select for sample rate converter (SRC).
                        00 = ADC.
                        01 = DIR.
                        10 = Playback.
                        11 = Auxiliary in.
REC[2:0]              Datapath source select for record output port.
                        000 = ADC.
                        001 = DIR.
                        010 = Playback.
                        011 = Auxiliary in.
                        100 = SRC.
AUXO[2:0]             Datapath source select for auxiliary output port.
                        000 = ADC.
                        001 = DIR.
                        010 = Playback.
                        011 = Auxiliary in.
                        100 = SRC.
                                                             Rev. A | Page 45 of 60


ADAV801
Datapath Control Register 2—Address 1100011 (0x63)
Table 94. Datapath Control Register 2 Bit Map
7               6                 5                  4                   3         2    1     0
Reserved        Reserved          DAC2               DAC1                DAC0      DIT2 DIT1  DIT0
Table 95. Datapath Control Register 2 Bit Descriptions
Bit Name             Description
DAC[2:0]             Datapath source select for DAC.
                       00 = ADC.
                       01 = DIR.
                       10 = Playback.
                       11 = Auxiliary in.
                       100 = SRC.
DIT[2:0]             Datapath source select for DIT.
                       000 = ADC.
                       001 = DIR.
                       010 = Playback.
                       011 = Auxiliary in.
                       100 = SRC.
DAC Control Register 1—Address 1100100 (0x64)
Table 96. DAC Control Register 1 Bit Map
7               6                 5                  4                   3         2    1     0
DR_ALL          DR_DIG            CHSEL1             CHSEL0              POL1      POL0 MUTER MUTEL
Table 97. DAC Control Register 1 Bit Descriptions
Bit Name             Description
DR_ALL               Hard reset and power-down.
                       0 = Normal, output pins go to VREF level.
                       1 = Hard reset and low power, output pins go to AGND.
DR_DIG               DAC digital reset.
                       0 = Normal.
                       1 = Reset all except registers.
CHSEL[1:0]           DAC channel select.
                       00 = Normal, left-right.
                       01 = Both right.
                       10 = Both left.
                       11 = Swapped, right-left.
POL[1:0]             DAC channel polarity.
                       00 = Both positive.
                       01 = Left negative.
                       10 = Right negative.
                       11 = Both negative.
MUTER                Mute right channel.
                       0 = Mute.
                       1 = Normal.
MUTEL                Mute left channel.
                       0 = Mute.
                       1 = Normal.
                                                            Rev. A | Page 46 of 60


                                                                                             ADAV801
DAC Control Register 2—Address 1100101 (0x65)
Table 98. DAC Control Register 2 Bit Map
7              6                 5                4                   3         2     1      0
Reserved       Reserved          DMCLK1           DMCLK0              DFS1      DFS0  DEEM1  DEEM0
Table 99. DAC Control Register 2 Bit Descriptions
Bit Name            Description
DMCLK[1:0]          DAC MCLK divider.
                      00 = MCLK.
                      01 = MCLK/1.5.
                      10 = MCLK/2.
                      11 = MCLK/3.
DFS[1:0]            DAC interpolator select.
                      00 = 8 × (MCLK = 256 × fS).
                      01 = 4 × (MCLK = 128 × fS).
                      10 = 2 × (MCLK = 64 × fS).
                      11 = Reserved.
DEEM[1:0]           DAC de-emphasis select.
                      00 = None.
                      01 = 44.1 kHz.
                      10 = 32 kHz.
                      11 = 48 kHz.
DAC Control Register 3—Address 1100110 (0x66)
Table 100. DAC Control Register 3 Bit Map
7              6                 5                4                   3         2     1      0
Reserved       Reserved          Reserved         Reserved            Reserved  ZFVOL ZFDATA ZFPOL
Table 101. DAC Control Register 3 Bit Descriptions
Bit Name         Description
ZFVOL            DAC zero flag on mute and zero volume.
                    0 = Enabled.
                    1 = Disabled.
ZFDATA           DAC zero flag on zero data disable.
                    0 = Enabled.
                    1 = Disabled.
ZFPOL            DAC zero flag polarity.
                    0 = Active low.
                    1 = Active high.
                                                         Rev. A | Page 47 of 60


ADAV801
DAC Control Register 4—Address 1100111 (0x67)
Table 102. DAC Control Register 4 Bit Map
7              6                  5                  4                    3              2             1                0
Reserved       INTRPT             ZEROSEL1           ZEROSEL0             Reserved       Reserved      Reserved         Reserved
Table 103. DAC Control Register 4 Bit Descriptions
Bit Name          Description
INTRPT            This bit selects the functionality of the ZEROL/INT pin.
                     0 = Pin functions as a ZEROL flag pin.
                     1 = Pin functions as an interrupt pin.
ZEROSEL[1:0]      These bits control the functionality of the ZEROR pin when the ZEROL/INT pin is used as an interrupt.
                     00 = Pin functions as a ZEROR flag pin.
                     01 = Pin functions as a ZEROL flag pin.
                     10 = Pin is asserted when either the left or right channel is zero.
                     11 = Pin is asserted when both the left and right channels are zero.
DAC Left Volume—Address 1101000 (0x68)
Table 104. DAC Left Volume Register Bit Map
7              6                  5                  4                    3              2             1                0
DVOLL7         DVOLL6             DVOLL5             DVOLL4               DVOLL3         DVOLL2        DVOLL1           DVOLL0
Table 105. DAC Left Volume Register Bit Descriptions
Bit Name             Description
DVOLL[7:0]           DAC left channel volume control.
                       1111111 = 0 dBFS.
                       1111110 = −0.375 dBFS.
                       0000000 = −95.625 dBFS.
DAC Right Volume—Address 1101001 (0x69)
Table 106. DAC Right Volume Register Bit Map
7              6                  5                  4                    3              2             1                0
DVOLR7         DVOLR6             DVOLR5             DVOLR4               DVOLR3         DVOLR2         DVOLR1          DVOLR0
Table 107. DAC Right Volume Register Bit Descriptions
Bit Name            Description
DVOLR[7:0]          DAC right channel volume control.
                       1111111 = 0 dBFS.
                       1111110 = −0.375 dBFS.
                       0000000 = −95.625 dBFS.
DAC Left Peak Volume—Address 1101010 (0x6A)
Table 108. DAC Left Peak Volume Register Bit Map
7              6                  5                  4                    3              2             1                0
Reserved       Reserved           DLP5               DLP4                 DLP3           DLP2           DLP1            DLP0
Table 109. DAC Left Peak Volume Register Bit Descriptions
Bit Name            Description
DLP[5:0]            DAC left channel peak volume detection.
                       000000 = 0 dBFS.
                       000001 = −1 dBFS.
                       111111 = −63 dBFS.
                                                             Rev. A | Page 48 of 60


                                                                                         ADAV801
DAC Right Peak Volume—Address 1101011 (0x6B)
Table 110. DAC Right Peak Volume Register Bit Map
7              6                 5                 4                 3         2    1    0
Reserved       Reserved          DRP5              DRP4              DRP3      DRP2 DRP1 DRP0
Table 111. DAC Right Peak Volume Register Bit Descriptions
Bit Name            Description
DRP[5:0]            DAC right channel peak volume detection.
                       000000 = 0 dBFS.
                       000001 = −1 dBFS.
                       111111 = −63 dBFS.
ADC Left Channel PGA Gain—Address 1101100 (0x6C)
Table 112. ADC Left Channel PGA Gain Register Bit Map
7              6                 5                 4                 3         2    1    0
Reserved       Reserved          AGL5              AGL4              AGL3      AGL2 AGL1 AGL0
Table 113. ADC Left Channel PGA Gain Register Bit Descriptions
Bit Name            Description
AGL[5:0]            PGA left channel gain control.
                       000000 = 0 dB.
                       000001 = 0.5 dB.
                       …
                       101111 = 23.5 dB.
                       110000 = 24 dB.
                       …
                       111111 = 24 dB.
ADC Right Channel PGA Gain—Address 1101101 (0x6D)
Table 114. ADC Right Channel PGA Gain Register Bit Map
7              6                 5                 4                 3         2    1    0
Reserved       Reserved          AGR5              AGR4              AGR3      AGR2 AGR1 AGR0
Table 115. ADC Right Channel PGA Gain Register Bit Descriptions
Bit Name             Description
AGR[5:0]            PGA right channel gain control.
                       000000 = 0 dB.
                       000001 = 0.5 dB.
                       …
                       101111 = 23.5 dB.
                       110000 = 24 dB.
                       …
                       111111 = 24 dB.
                                                        Rev. A | Page 49 of 60


ADAV801
ADC Control Register 1—Address 1101110 (0x6E)
Table 116. ADC Control Register 1 Bit Map
7              6                 5               4                   3         2        1    0
AMC            HPF               PWRDWN          ANA_PD              MUTER     MUTEL    PLPD PRPD
Table 117. ADC Control Register 1 Bit Descriptions
Bit Name            Description
AMC                 ADC modulator clock.
                      0 = ADC MCLK/2 (128 × fS).
                      1 = ADC MCLK/4 (64 × fS).
HPF                 High-pass filter enable.
                      0 = Normal.
                      1 = HPF enabled.
PWRDWN              ADC power-down.
                      0 = Normal.
                      1 = Power-down.
ANA_PD              ADC analog section power-down.
                      0 = Normal.
                      1 = Power-down.
MUTER               Mute ADC right channel.
                      0 = Normal.
                      1 = Muted.
MUTEL               Mute ADC left channel.
                      0 = Normal.
                      1 = Muted.
PLPD                PGA left power-down.
                      0 = Normal.
                      1 = Power-down.
PRPD                PGA right power-down.
                      0 = Normal.
                      1 = Power-down.
ADC Control Register 2—Address 1101111 (0x6F)
Table 118. ADC Control Register 2 Bit Map
7              6                 5               4                   3         2        1    0
Reserved       Reserved          Reserved        BUF_PD              Reserved  Reserved MCD1 MCD0
Table 119. ADC Control Register 2 Bit Descriptions
Bit Name            Description
BUF_PD              Reference buffer power-down control.
                      0 = Normal.
                      1 = Power-down.
MCD[1:0]            ADC master clock divider.
                      00 = Divide by 1.
                      01 = Divide by 2.
                      10 = Divide by 3.
                      11 = Divide by 1.
                                                        Rev. A | Page 50 of 60


                                                                                             ADAV801
ADC Left Volume—Address 1110000 (0x70)
Table 120. ADC Left Volume Register Bit Map
7              6                 5               4                   3         2      1      0
AVOLL7         AVOLL6            AVOLL5          AVOLL4              AVOLL3    AVOLL2 AVOLL1 AVOLL0
Table 121. ADC Left Volume Register Bit Descriptions
Bit Name            Description
AVOLL[7:0]          ADC left channel volume control.
                       1111111 = 1.0 (0 dBFS).
                       1111110 = 0.996 (−0.00348 dBFS).
                       1000000 = 0.5 (−6 dBFS).
                       0111111 = 0.496 (−6.09 dBFS).
                       0000000 = 0.0039 (−48.18 dBFS).
ADC Right Volume—Address 1110001 (0x71)
Table 122. ADC Right Volume Register Bit Map
7              6                 5               4                   3         2      1      0
AVOLR7         AVOLR6            AVOLR5          AVOLR4              AVOLR3    AVOLR2 AVOLR1 AVOLR0
Table 123. ADC Right Volume Register Bit Descriptions
Bit Name            Description
AVOLR[7:0]          ADC right channel volume control.
                       1111111 = 1.0 (0 dBFS).
                       1111110 = 0.996 (−0.00348 dBFS).
                       1000000 = 0.5 (−6 dBFS).
                       0111111 = 0.496 (−6.09 dBFS).
                       0000000 = 0.0039 (−48.18 dBFS).
ADC Left Peak Volume—Address 1110010 (0x72)
Table 124. ADC Left Peak Volume Register Bit Map
7              6                 5               4                   3         2      1      0
Reserved       Reserved          ALP5            ALP4                ALP3      ALP2   ALP1   ALP0
Table 125. ADC Left Peak Volume Register Bit Descriptions
Bit Name             Description
ALP[5:0]            ADC left channel peak volume detection.
                       000000 = 0 dBFS.
                       000001 = −1 dBFS.
                       111111 = −63 dBFS.
ADC Right Peak Volume—Address 1110011 (0x73)
Table 126. ADC Right Peak Volume Register Bit Map
7              6                 5               4                   3         2      1      0
Reserved       Reserved          ARP5            ARP4                ARP3      ARP2   ARP1   ARP0
Table 127. ADC Right Peak Volume Register Bit Descriptions
Bit Name             Description
ARP[5:0]             ADC right channel peak volume detection.
                       000000 = 0 dBFS.
                       000001 = −1 dBFS.
                       111111 = −63 dBFS.
                                                        Rev. A | Page 51 of 60


ADAV801
PLL Control Register 1—Address 1110100 (0x74)
Table 128. PLL Control Register 1 Bit Map
7               6                 5                 4                   3         2      1     0
DIRIN_CLK1      DIRIN_CLK0        MCLKODIV          PLLDIV              PLL2PD    PLL1PD XTLPD SYSCLK3
Table 129. PLL Control Register 1 Bit Descriptions
Bit Name             Description
DIRIN_CLK[1:0]       Recovered S/PDIF clock sent to SYSCLK3.
                       00 = SYSCLK3 comes from PLL block.
                       01 = Reserved.
                       10 = Reserved.
                       11 = SYSCLK3 is the recovered S/PDIF clock from DIRIN.
MCLKODIV             Divide input MCLK by 2 to generate MCLKO.
                       0 = Disabled.
                       1 = Enabled.
PLLDIV               Divide XIN by 2 to generate the PLL master clock.
                       0 = Disabled.
                       1 = Enabled.
PLL2PD               Power-down PLL2.
                       0 = Normal.
                       1 = Power-down.
PLL1PD               Power-down PLL1.
                       0 = Normal.
                       1 = Power-down.
XTLPD                Power-down XTAL oscillator.
                       0 = Normal.
                       1 = Power-down.
SYSCLK3              Clock output for SYSCLK3.
                       0 = 512 × fS.
                       1 = 256 × fS.
                                                           Rev. A | Page 52 of 60


                                                                                         ADAV801
PLL Control Register 2—Address 1110101 (0x75)
Table 130. PLL Control Register 2 Bit Map
7               6                5                 4                  3         2   1    0
FS2_1           FS2_0            SEL2              DOUB2              FS1       FS0 SEL1 DOUB1
Table 131. PLL Control Register 2 Bit Descriptions
Bit Name            Description
FS2_[1:0]           Sample rate select for PLL2.
                       00 = 48 kHz.
                       01 = Reserved.
                       10 = 32 kHz.
                       11 = 44.1 kHz.
SEL2                Oversample ratio select for PLL2.
                       0 = 256 × fS.
                       1 = 384 × fS.
DOUB2               Double-selected sample rate on PLL2.
                       0 = Disabled.
                       1 = Enabled.
FS[1:0]             Sample rate select for PLL1.
                       00 = 48 kHz.
                       01 = Reserved.
                       10 = 32 kHz.
                       11 = 44.1 kHz.
SEL1                Oversample ratio select for PLL1.
                       0 = 256 × fS.
                       1 = 384 × fS.
DOUB1               Double-selected sample rate on PLL1.
                       0 = Disabled.
                       1 = Enabled.
                                                         Rev. A | Page 53 of 60


ADAV801
Internal Clocking Control Register 1—Address 1110110 (0x76)
Table 132. Internal Clocking Control Register 1 Bit Map
7                6                 5                  4                    3         2        1        0
DCLK2            DCLK1             DCLK0              ACLK2                ACLK1     ACLK0    ICLK2_1  ICLK2_0
Table 133. Internal Clocking Control Register 1 Bit Descriptions
Bit Name              Description
DCLK[2:0]             DAC clock source select.
                        000 = XIN.
                        001 = MCLKI.
                        010 = PLLINT1.
                        011 = PLLINT2.
                        100 = DIR PLL (512 × fS).
                        101 = DIR PLL (256 × fS).
                        110 = XIN.
                        111 = XIN.
ACLK[2:0]             ADC clock source select.
                        000 = XIN.
                        001 = MCLKI.
                        010 = PLLINT1.
                        011 = PLLINT2.
                        100 = DIR PLL (512 × fS).
                        101 = DIR PLL (256 × fS).
                        110 = XIN.
                        111 = XIN.
ICLK2_[1:0]           Source selector for internal clock ICLK2.
                        00 = XIN.
                        01 = MCLKI.
                        10 = PLLINT1.
                        11 = PLLINT2.
Internal Clocking Control Register 2—Address 1110111 (0x77)
Table 134. Internal Clocking Control Register 2 Bit Map
7                6                 5                  4                    3         2        1        0
Reserved         Reserved          Reserved           ICLK1_1              ICLK1_0   PLL2INT1 PLL2INT0 PLL1INT
Table 135. Internal Clocking Control Register 2 Bit Descriptions
Bit Name              Description
ICLK1_[1:0]           Source selector for internal clock ICLK1.
                        00 = XIN.
                        01 = MCLKI.
                        10 = PLLINT1.
                        11 = PLLINT2.
PLL2INT[1:0]          PLL2 internal selector (see Figure 38).
                        00 = FS2.
                        01 = FS2/2.
                        10 = FS3.
                        11 = FS3/2.
PLL1INT               PLL1 internal selector.
                        0 = FS1.
                        1 = FS1/2.
                                                              Rev. A | Page 54 of 60


                                                                                                               ADAV801
PLL Clock Source Register—Address 1111000 (0x78)
Table 136. PLL Clock Source Register Bit Map
7               6                 5                 4                     3              2            1        0
PLL2_Source     PLL1_Source       Reserved          Reserved              Reserved       Reserved     Reserved Reserved
Table 137. PLL Clock Source Register Bit Descriptions
Bit Name             Description
PLL2_Source          Selects the clock source for PLL2.
                       0 = XIN.
                       1 = MCLKI.
PLL1_Source          Selects the clock source for PLL1.
                       0 = XIN.
                       1 = MCLKI
PLL Output Enable—Address 1111010 (0x7A)
Table 138. PLL Output Enable Register Bit Map
7               6                 5                 4                     3              2            1        0
Reserved        Reserved          DIRINPD           DIRIN_PIN             Reserved       SYSCLK1      SYSCLK2  SYSCLK3
Table 139. PLL Output Enable Register Bit Descriptions
Bit Name             Description
DIRINPD              This bit powers down the S/PDIF receiver.
                       0 = Normal.
                       1 = Power-down.
DIRIN_PIN            This bit determines the input levels of the DIRIN pin.
                       0 = DIRIN accepts input signals down to 200 mV according to AES3 requirements.
                       1 = DIRIN accepts input signals as defined in the Specifications section.
SYSCLK1              Enables the SYSCLK1 output.
                       0 = Enabled.
                       1 = Disabled.
SYSCLK2              Enables the SYSCLK2 output.
                       0 = Enabled.
                       1 = Disabled.
SYSCLK3              Enables the SYSCLK3 output.
                       0 = Enabled.
                       1 = Disabled.
                                                             Rev. A | Page 55 of 60


ADAV801
ALC Control Register 1—Address 1111011 (0x7B)
Table 140. ALC Control Register 1 Bit Map
7              6                 5                 4                    3              2         1      0
FSSEL1         FSSEL0            GAINCNTR1         GAINCNTR0            RECMODE1       RECMODE0  LIMDET ALCEN
Table 141. ALC Control Register 1 Bit Descriptions
Bit Name            Description
FSSEL[1:0]          These bits should equal the sample rate of the ADC.
                      00 = 96 kHz.
                      01 = 48 kHz.
                      10 = 32 kHz.
                      11 = Reserved.
GAINCNTR[1:0]       These bits determine the limit of the counter used in limited recovery mode.
                      00 = 3.
                      01 = 7.
                      10 = 15.
                      11 = 31.
RECMODE[1:0]        These bits determine which recovery mode is used by the ALC section.
                      00 = No recovery.
                      01 = Normal recovery.
                      10 = Limited recovery.
                      11 = Reserved.
LIMDET              These bits limit detect mode.
                      0 = ALC is used when either channel exceeds the set limit.
                      1 = ALC is used only when both channels exceed the set limit.
ALCEN               These bits enable ALC.
                      0 = Disable ALC.
                      1 = Enable ALC.
                                                           Rev. A | Page 56 of 60


                                                                                                                                  ADAV801
ALC Control Register 2— Address = 1111100 (0x7C)
Table 142. ALC Control Register 2 Bit Map
7              6                 5                    4                   3              2                    1                   0
Reserved       RECTH1            RECTH0               ATKTH1              ATKTH0         RECTIME1             RECTIME0            ATKTIME
Table 143. ALC Control Register 2 Bit Descriptions
Bit Name            Description
RECTH[1:0]          Recovery threshold.
                      00 = −2 dB.
                      01 = −3 dB.
                      10 = −4 dB.
                      11 = −6 dB.
ATKTH[1:0]          Attack threshold.
                      00 = 0 dB.
                      01 = −1 dB.
                      10 = −2 dB.
                      11 = −4 dB.
RECTIME[1:0]        Recovery time selection.
                      00 = 32 ms.
                      01 = 64 ms.
                      10 = 128 ms.
                      11 = 256 ms.
ATKTIME             Attack timer selection.
                      0 = 1 ms.
                      1 = 4 ms.
ALC Control Register 3—Address 1111101 (0x7D)
Table 144. ALC Control Register 3 Bit Map
7              6                 5                    4                   3              2                    1                   0
ALC RESET      ALC RESET         ALC RESET            ALC RESET           ALC RESET      ALC RESET            ALC RESET           ALC RESET
Table 145. ALC Control Register 3 Bit Description
Bit Name            Description
ALC RESET           A write to this register restarts the ALC operation. The value written to this register is irrelevant. A read from this
                    register gives the gain reduction factor.
                                                             Rev. A | Page 57 of 60


ADAV801
LAYOUT CONSIDERATIONS
Getting the best performance from the ADAV801 requires a                         The PLL has its own power supply pins. To get the best
careful layout of the printed circuit board (PCB). Using separate                performance from the PLL and from the rest of the ADAV801,
analog and digital ground planes is recommended, because                         it is recommended that a separate analog supply be used. Where
these give the currents a low resistance path back to the power                  this is not possible, the user must decide whether to connect the
supplies. The ground planes should be connected in only one                      PLL supply to the analog (AVDD) or digital (DVDD) supply.
place, usually under the ADAV801, to prevent ground loops.                       Connecting the PLL supply to AVDD gives the best jitter
The analog and digital supply pins should be decoupled to their                  performance, but can degrade the performance of the ADC and
respective ground pins with a 10 μF to 47 μF tantalum capacitor                  DAC sections slightly due to the increased digital noise created
and a 0.1 μF ceramic capacitor. These capacitors should be                       on the AVDD by the PLL. Connecting the PLL supply to DVDD
placed as close as possible to the supply pins.                                  keeps digital noise away from the analog supply, but the jitter
                                                                                 specifications might be reduced depending on the quality of the
ADC                                                                              digital supply. Using the layout recommendations described in
The ADC uses a switch capacitor input stage and is, therefore,                   this section helps to reduce these effects.
particularly sensitive to digital noise. Sources of noise, such as
                                                                                 RESET AND POWER-DOWN CONSIDERATIONS
PLLs or clocks, should not be routed close to the ADC section.
The CAPxN and CAPxP pins form a charge reservoir for the                         When the ADAV801 is held in reset by bringing the RESET
switched capacitor section of the ADC, so keeping these nodes                    pin low, a number of circuit blocks remain powered up. For
electrically quiet is a key factor in ensuring good performance.                 example, the crystal oscillator circuit based around the XIN
The capacitors connected to these pins should be of good                         and XOUT pins is still active, so that a stable clock source is
quality, either NPO or COG, and should be placed as close as                     available when the ADAV801 is taken out of reset. In addition,
possible to CAPxN and CAPxP.                                                     the VCO associated with the S/PDIF receiver is active so that
                                                                                 the receiver locks to the incoming S/PDIF stream in the shortest
DAC                                                                              possible time. Where power consumption is a concern, the
The DAC requires an analog filter to filter out-of-band noise                    individual blocks of the ADAV801 can be powered down via
from the analog output. A third-order Bessel filter is                           the control registers to gain significant power savings. Table 146
recommended, although the filter to use depends on the                           shows typical power savings when using the power-down bits
requirements of the application.                                                 in the control registers.
PLL                                                                              Table 146. Typical Power Requirements
The PLL can be used to generate digital clocks, either for use                   Operating           AVDD      DVDD     ODVDD     DIR_VDD    Power
internally or to clock external circuitry. Because every clock is a              Mode                (mA)      (mA)     (mA)      (mA)       (mW)
potential source of noise, care should be taken when using the                   Normal              50        25       5         5          280.5
PLL. The ADAV801’s PLL outputs can be enabled or disabled,                       Reset low           30        4        2.5       1          123.75
as required. If the PLL clocks are not required by external                      Power-down          12        0.1      1.3       0.7        46.53
circuitry, it is recommended that the outputs be disabled. To                    bits
reduce cross-coupling between clocks, a digital ground trace
can be routed on either side of the PLL clock signal, if required.
                                                                Rev. A | Page 58 of 60


                                                                                                                                                          ADAV801
OUTLINE DIMENSIONS
                                                                                                      12.20
                                                              0.75                                    12.00 SQ
                                                              0.60        1.60                        11.80
                                                              0.45        MAX
                                                                                       64                                 49
                                                                                   1                                           48
                                                                                             PIN 1
                                                                                                                                    10.20
                                                                                                     TOP VIEW                       10.00 SQ
                                                                                                     (PINS DOWN)
                                                                                                                                     9.80
                               1.45
                                                      0.20
                               1.40
                                                      0.09
                               1.35
                                                        7°
                                                       3.5°
                                  0.15                                            16                                           33
                                                        0°
                                  0.05   SEATING                                       17                                 32
                                         PLANE     0.08
                                                   COPLANARITY               VIEW A                                0.27
                                                                                               0.50
                                                                                               BSC                 0.22
                                      VIEW A                                                LEAD PITCH             0.17
                                ROTATED 90° CCW
                                                                                                                                               051706-A
                                                       COMPLIANT TO JEDEC STANDARDS MS-026-BCD
                                                    Figure 57. 64-Lead Low Profile Quad Flat Package [LQFP]
                                                                           (ST-64-2)
                                                                Dimensions shown in millimeters
ORDERING GUIDE
                               Temperature         Control                                                                                                Package
Model                          Range               Interface         DAC Outputs             Package Description                                          Option
ADAV801ASTZ 1                  −40°C to +85°C      SPI               Single-Ended            64-Lead Low Profile Quad Flat Package [LQFP]                 ST-64-2
ADAV801ASTZ-REEL1              −40°C to +85°C      SPI               Single-Ended            64-Lead Low Profile Quad Flat Package [LQFP]                 ST-64-2
EVAL-ADAV801EBZ1                                                                             Evaluation Board
1
    Z = RoHS Compliant Part.
                                                                       Rev. A | Page 59 of 60


ADAV801
NOTES
©2004–2007 Analog Devices, Inc. All rights reserved. Trademarks and
registered trademarks are the property of their respective owners.
                                                   D04577-0-7/07(A)
                                                                    Rev. A | Page 60 of 60


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Analog Devices Inc.:
 ADAV801ASTZ EVAL-ADAV801EBZ ADAV801ASTZ-REEL
