                                                                                                            Low Cost, Low Power
                                                                                                                  Mono Audio Codec
                                                                                                                                  AD74111
    FEATURES                                                                         GENERAL DESCRIPTION
    2.5 V Mono Audio Codec with 3.3 V Tolerant                                       The AD74111 is a front-end processor for general-purpose audio
       Digital Interface                                                             and voice applications. It features a multibit ⌺-⌬ A/D conversion
    Supports 8 kHz to 48 kHz Sample Rates                                            channel and a multibit ⌺-⌬ D/A conversion channel. The ADC
    Supports 16-/20-/24-Bit Word Lengths                                             channel provides >67 dB THD+N and the DAC channel pro-
    Multibit - Modulators with                                                     vides >88 dB THD+N, both over an audio signal bandwidth.
       “Perfect Differential Linearity Restoration” for                              The AD74111 is particularly suitable for a variety of applications
       Reduced Idle Tones and Noise Floor                                            where mono input and output channels are required, including
    Data Directed Scrambling DAC – Least Sensitive to Jitter                         audio sections of digital video camcorders, portable personal
    Performance (20 Hz to 20 kHz)                                                    audio devices, and telematic applications. Its high quality
       85 dB ADC Dynamic Range                                                       performance also makes it suitable for speech and telephony
       93 dB DAC Dynamic Range                                                       applications such as speech recognition and synthesis, and modern
    Programmable ADC Gain                                                            feature phones.
    On-Chip Volume Control for DAC Channel
    Software Controllable Clickless Mute                                             An on-chip reference voltage is included but can be powered
    Supports 256  f S, 512  fS, and 768  fS Master Mode                           down and bypassed by an external reference source if required.
       Clocks                                                                        The AD74111 offers sampling rates that, depending on MCLK
    Master Clock Prescaler for Use with DSP Master Clocks                            selection and MCLK divider ratio, range from 8 kHz in the
    On-Chip Reference                                                                voiceband range to 48 kHz in the audio range.
    16-Lead TSSOP Package
                                                                                     The AD74111 is available in a 16-lead TSSOP package option
    APPLICATIONS                                                                     and is specified for the automotive temperature range of –40°C
    Digital Video Camcorders (DVC)                                                   to +105°C.
    Portable Audio Devices (Walkman®, PDAs, and so on)
    Audio Processing
    Voice Processing
    Telematic Systems
    General-Purpose Analog I/O
                                                          FUNCTIONAL BLOCK DIAGRAM
                                         RESET        MCLK      DVDD1    DVDD2      AVDD
                                                                                            ADC
                                                                                                                        CAPP
                                                                           DIGITAL           -         GAIN
                                  DIN                                       FILTER      MODULATOR       STAGE           VIN
                                DOUT             SERIAL
                                                  DATA                                                                  CAPN
                                  DFS             PORT
                                DCLK
                                                                                        DAC CHANNEL
                                               REFERENCE                    DIGITAL      VOLUME        - DAC
                                                                            FILTER      CONTROL                         VOUT
                                                                                                     MODULATOR
                                          REFCAP                 DGND                           AGND
REV. 0
Information furnished by Analog Devices is believed to be accurate and
reliable. However, no responsibility is assumed by Analog Devices for its
use, nor for any infringements of patents or other rights of third parties that
may result from its use. No license is granted by implication or otherwise           One Technology Way, P.O. Box 9106, Norwood, MA 02062-9106, U.S.A.
under any patent or patent rights of Analog Devices. Trademarks and                  Tel: 781/329-4700                                  www.analog.com
registered trademarks are the property of their respective companies.                Fax: 781/326-8703     © 2003 Analog Devices, Inc. All rights reserved.


                                                  = 2.5 V ± 5%, DVDD2 = 2.5 V ± 5%, DVDD1 = 2.5 V ± 5%, f
AD74111–SPECIFICATIONS (AVDD                f = 48 kHz, T = T to T , unless otherwise noted.)
                                             S           A   MIN   MAX
                                                                                                         MCLK = 12.288 MHz,
Parameter                                Conditions                      Min          Typ         Max         Unit
ANALOG-TO-DIGITAL CONVERTERS
  ADC Resolution                                                                      24                      Bits
  Signal to Noise Ratio (SNR)            fS = 16 kHz                     70           77                      dB
  Dynamic Range
  (20 Hz to 20 kHz, –60 dB Input)
     No Filter                           fS = 48 kHz                                  85                      dB
                                         fS = 16 kHz                     78           85                      dB
     With A-Weighted Filter              fS = 48 kHz                                  87                      dB
Total Harmonic Distortion + Noise        fS = 48 kHz, PGA = 0 dB                      –67                     dB
                                         fS = 16 kHz                                  –75                     dB
Programmable Input Gain                                                               12                      dB
Gain Step Size                                                                        3                       dB
Offset Error                                                             –55          +30         +80         mV
Full-Scale Input Voltage                                                              0.5                     V rms
Input Resistance                                                                      4                       kΩ
Input Capacitance                                                                                 15          pF
Common-Mode Input Volts                                                               1.125                   V
Crosstalk                                ADC Input Signal = 1.0 kHz,                  100                     dB
                                         0 dB; DAC Output = DC
DIGITAL-TO-ANALOG CONVERTERS
DAC Resolution                                                                        24                      Bits
  Signal to Noise Ratio (SNR)            fS = 16 kHz                     80           89                      dB
  Dynamic Range
  (20 Hz to 20 kHz, –60 dB Input)
     No Filter                           fS = 48 kHz                                  93                      dB
                                         fS = 16 kHz                     84           93                      dB
     With A-Weighted Filter              fS = 48 kHz                                  95                      dB
  Total Harmonic Distortion + Noise      fS = 48 kHz                                  –88                     dB
                                         fS = 16 kHz                                  –88         –81         dB
                                                                                                              dB
  DC Accuracy
     Offset Error                                                        –75          –10         +50         mV
     Gain Error                                                          –0.9         +0.175      +0.8        dB
  Volume Control Step Size
       (1024 Linear Steps)                                                            0.098                   %
  Volume Control Range (Max Attenuation)                                              –60                     dB
  Mute Attenuation                                                                    –100                    dB
  De-emphasis Gain Error                                                              ± 0.1                   dB
  Full-Scale Output Voltage                                                           0.5                     V rms
  Output Resistance                                                                   145                     Ω
  Common Mode Output Volts                                                            1.125                   V
  Crosstalk                              Signal Input ADC = AGND;                     95                      dB
                                         DAC Output
                                         Level = 1.0 kHz, 0 dB
REFERENCE (Internal)
  Absolute Voltage, VREF                                                              1.125                   V
  VREF TC                                                                             50                      ppm/°C
                                                     –2–                                                           REV. 0


                                                                                                                            AD74111
Parameter                                                          Conditions                 Min          Typ      Max      Unit
ADC DECIMATION FILTER*                                             fS = 48 kHz
  Pass Band                                                                                                         21.5     kHz
  Pass-Band Ripple                                                                                                  0.2      mdB
  Transition Band                                                                                          5                 kHz
  Stop Band                                                                                   26.5                           kHz
  Stop-Band Attenuation                                                                       120                            dB
  Group Delay                                                                                              910               µs
  Low Group Delay Mode                                                                                     87                µs
DAC INTERPOLATION FILTER*                                          fS = 48 kHz
  Pass Band                                                                                                         21.5     kHz
  Pass-Band Ripple                                                                                                  10       mdB
  Transition Band                                                                                          5                 kHz
  Stop Band                                                                                   26.5                           kHz
  Stop-Band Attenuation                                                                       75                             dB
  Group Delay                                                                                              505               µs
  Low Group Delay Mode                                                                                     55                µs
LOGIC INPUT
  VINH, Input High Voltage                                                                    DVDD1 – 0.8           DVDD1    V
  VINL, Input Low Voltage                                                                     0                     0.8      V
  Input Current                                                                               –10                   +10      µA
  Input Capacitance                                                                                                 10       pF
LOGIC OUTPUT
  VOH, Output High Voltage                                                                    DVDD1 – 0.4           DVDD1 V
  VOL, Output Low Voltage                                                                     0                     0.4      V
  Three-State Leakage Current                                                                 –10                   +10      µA
POWER SUPPLIES
  AVDD                                                                                        2.375                 2.625    V
  DVDD2                                                                                       2.375                 2.625    V
  DVDD1                                                                                       2.375                 3.6      V
  Power Supply Rejection Ratio
  1 kHz, 300 mV p-p Signal at Analog
     Supply Pins                                                                                           72                dB
  50/60 Hz, 300 mV p-p Signal at Analog
     Supply Pins                                                                                           73                dB
*Guaranteed by design.
 Specifications subject to change without notice.
                                Table I. Current Summary (AVDD = 2.5 V, DVDD1 = 2.5 V, DVDD2 = 2.5 V) 1, 2, 3
                                                               AVDD              DVDD1          DVDD2          Total Current
                  Conditions                                   Current (mA)      Current (mA)   Current (mA) (Max)(mA)
                  ADC, Reference, Ref-Amp On                   6.11 (6.11)       0.15 (0.43)    0.72 (2.10)
                  DAC, Reference, Ref-Amp On                   3.80 (4.0)        0.15 (0.43)    0.85 (2.23)
                  Reference, Ref-Amp On                        0.60 (0.60)       0.15 (0.43)    0.27 (0.50)
                  All Sections On                              8.60              0.15 (0.43)    1.72 (4.80)    15.35
                  Power-Down Mode                              0.035             0.15 (0.43)    0.49 (0.49)    2.6
                  NOTES
                  1
                   All values are typical, unless otherwise noted.
                  2
                   Max values are quoted with DVDD1 = 3.6 V.
                  3
                   Sample rates quoted are for 16 kHz and (48 kHz).
REV. 0                                                                         –3–


AD74111
                                                (AVDD = 2.5 V ± 5%, DVDD2 = 2.5 V ± 5%, DVDD1 = 3.3 V ± 10%, fMCLK = 12.288 MHz, fS = 48 kHz,
TIMING CHARACTERISTICS                           TA = TMIN to TMAX, unless otherwise noted.)
Parameter                                                 Min            Max          Unit               Comments
MASTER CLOCK AND RESET
    tMH          MCLK High                                25                          ns
    tML          MCLK Low                                 25                          ns
    tRES         RESET Low                                10                          ns
    tRS          DIN Setup Time                           5                           MCLKS              To RESET Rising Edge1
    tRH          DIN Setup Time                           5                           MCLKS              To RESET Rising Edge1
SERIAL PORT
    tCH          DCLK High2                               20                          ns
    tCL          DCLK Low2                                20                          ns
    tFD          DFS Delay                                               5            ns                 From DCLK Rising Edge3
    tFS          DFS Setup Time                           5                           ns                 To DCLK Falling Edge
    tFH          DFS Hold Time                            15                          ns                 From DCLK Falling Edge
    tDD          DOUT Delay                                              30           ns                 From DCLK Rising Edge
    tDS          DIN Setup Time                           5                           ns                 To DCLK Falling Edge
    tDH          DIN Hold Time                            15                          ns                 From DCLK Falling Edge
    tDT          DOUT Three-State                                        40           ns                 From DCLK Rising Edge4
NOTES
1
  Determines Master/Slave mode operation.
2
  Applies in Slave mode only.
3
  Applies in Master mode only.
4
  Applies in Multiframe-Sync mode only.
                                          tMH
                      MCLK
                                                  tML
                     RESET
                                                                              tRES
                        DIN
                                                                                       tRS
                                                                                               tRH
                                                       Figure 1. MCLK and RESET Timing
                                                           tFS
                                  DFS
                                                               tFH
                                                                                   tCH
                                 DCLK
                                                       tFD                     tCL
                                  DIN                                     MSB         MSB–1          MSB–2
                                                                                                   tDS
                                                                                                          tDH
                                 DOUT                                       MSB          MSB–1         MSB–2
                                                                     tDD
                                                             Figure 2. Serial Port Timing
                                                                           100A    IOL
                                                       TO OUTPUT                              DVDD1
                                                               PIN     CL                        2
                                                                     50pF
                                                                           100A    IOH
                                        Figure 3. Load Circuit for Digital Output Timing Specifications
                                                                             –4–                                                      REV. 0


                                                                                                                                                AD74111
ABSOLUTE MAXIMUM RATINGS*                                                          16-Lead TSSOP, θJA Thermal Impedance . . . . . . . . 150.4°C/W
(TA = 25°C, unless otherwise noted.)                                               Lead Temperature, Soldering
AVDD, DVDD2 to AGND, DGND . . . . . . . –0.3 V to +3.0 V                              Vapor Phase (60 sec) . . . . . . . . . . . . . . . . . . . . . . . . . 215°C
DVDD1 to AGND, DGND . . . . . . . . . . . . . –0.3 V to +4.5 V                        Infrared (15 sec) . . . . . . . . . . . . . . . . . . . . . . . . . . . . 220°C
AGND to DGND . . . . . . . . . . . . . . . . . . . . . –0.3 V to +0.3 V            *Stresses above those listed under Absolute Maximum Ratings may cause perma-
Digital I/O Voltage to DGND . . . . . . –0.3 V to DVDD1 + 0.3 V                     nent damage to the device. This is a stress rating only; functional operation of the
Operating Temperature Range                                                         device at these or any other conditions above those listed in the operational
   Automotive (Y Version) . . . . . . . . . . . . . . –40°C to +105°C               sections of this specification is not implied. Exposure to absolute maximum rating
                                                                                    conditions for extended periods may affect device reliability.
Storage Temperature Range . . . . . . . . . . . . . –65°C to +150°C
Junction Temperature . . . . . . . . . . . . . . . . . . . . . . . . . . 150°C
                      TEMPERATURE RANGE                                                                          ORDERING GUIDE
Parameter                            Min               Max              Unit       Model                              Range                            Package
Specifications Guaranteed            –40               +105             ºC         AD74111YRU                         –40ºC to +105ºC                  RU-16
Storage                              –65               +150             ºC
CAUTION
ESD (electrostatic discharge) sensitive device. Electrostatic charges as high as 4000 V readily
accumulate on the human body and test equipment and can discharge without detection. Although the
AD74111 features proprietary ESD protection circuitry, permanent damage may occur on devices
subjected to high energy electrostatic discharges. Therefore, proper ESD precautions are recommended
to avoid performance degradation or loss of functionality.
REV. 0                                                                         –5–


AD74111
                                        PIN CONFIGURATION
                                     DCLK   1                16 MCLK
                                       DIN  2                15 DVDD1
                                       DFS 3                 14 DVDD2
                                                AD74111
                                      DOUT 4     TOP VIEW    13 DGND
                                              (NOT TO SCALE)
                                    RESET   5                12 AGND
                                      AVDD 6                 11 REFCAP
                                      CAPN 7                 10 CAPP
                                      VOUT 8                  9 VIN
                                  PIN FUNCTION DESCRIPTIONS
Pin No. Mnemonic I/O Description
 1      DCLK     I/O Serial Clock
 2      DIN      I   Serial Data Input. The state of DIN on the rising edge of RESET determines the operating mode
                     of the interface. See the Selecting Master or Slave Mode section for more information.
 3      DFS      I/O Frame Synchronization Signal
 4      DOUT     O   Serial Data Output
 5      RESET    I   Power-Down/Reset Input
 6      AVDD         Analog 2.5 V Power Supply Connection
 7      CAPN         ADC Filter Capacitor (Negative)
 8      VOUT     O   DAC Analog Output
 9      VIN      I   ADC Analog Input
10      CAPP         ADC Filter Capacitor (Positive)
11      REFCAP   I/O Internal Reference Decoupling Capacitor. Can also be used for connection of an external reference.
12      AGND         Analog Ground Connection
13      DGND         Digital Ground Connection
14      DVDD2        Digital 2.5 V Power Supply Connection (Core)
15      DVDD1        Digital Power Supply Connection (Interface)
16      MCLK     I   External Master Clock Input
                                                    –6–                                                         REV. 0


                                                                             Typical Performance Characteristics–AD74111
                            0                                                                                         0
     MAGNITUDE – dB
                          –50                                                                                       –40
                                                                                           MAGNITUDE – dB
                         –100                                                                                       –80
                         –150                                                                               –120
                                0       0.25            0.5         0.75       1.0                                        0           0.25         0.5         0.75   1.0
                                        FREQUENCY – NORMALIZED TO fS                                                                   FREQUENCY – NORMALIZED TO fs
                            TPC 1. ADC Composite Filter Response                                                         TPC 4. DAC Composite Filter Response
                           0                                                                                         0
    MAGNITUDE – dB
                          –50                                                                                       –40
                                                                                             MAGNITUDE – dB
                         –100                                                                                       –80
                         –150                                                                           –120
                                0       0.25            0.5         0.75       1.0                                        0       0.25            0.5         0.75    1.0
                                        FREQUENCY – NORMALIZED TO fS                                                                  FREQUENCY – NORMALIZED TO fs
                                TPC 2. ADC Composite Filter Response                                                     TPC 5. DAC Composite Filter Response
                                Low Group Delay Enabled                                                                  Low Group Delay Enabled
                          1.0                                                                                       10
                          0.5                                                                                        5
       MAGNITUDE – mdB                                                                            MAGNITUDE – mdB
                            0                                                                                        0
                         –0.5                                                                                       –5
                         –1.0                                                                                 –10
                                0     0.1         0.2         0.3      0.4     0.5                                        0     0.1         0.2       0.3       0.4   0.5
                                            FREQUENCY – NORMALIZED TO fs                                                               FREQUENCY – NORMALIZED TO fS
                                TPC 3. ADC Composite Filter Response                                                     TPC 6. DAC Composite Filter Response
                                (Pass-Band Section)                                                                      (Pass-Band Section)
REV. 0                                                                               –7–


AD74111
                   78                                                                                               90
                   74                                                                                               88
                   70                                                                                               86
      THD+N – dB                                                                                       THD+N – dB
                   66                                                                                               84
                   62                                                                                               82
                   58                                                                                               80
                   54                                                                                               78
                        84     16          24       32           40              48                                      8          16         24        32         40   48
                                         SAMPLE RATE – kHz                                                                                   SAMPLE RATE – kHz
                         TPC 7. ADC THD+N vs. Sample Rate                                                                    TPC 8. DAC THD+N vs. Sample Rate
FUNCTIONAL DESCRIPTION                                                                         ADC Section
General Description                                                                            The AD74111 contains a multibit sigma-delta ADC. The ADC
The AD74111 is a 2.5 V mono codec. It comprises an ADC and                                     has a single input pin with additional pins for decoupling/filter
DAC channel with single-ended input and output. The ADC                                        capacitors. The ADC channel has an independent input amplifier
has a programmable gain stage and the DAC has programmable                                     gain stage that can be programmed in steps of 3 dB, from 0 dB
volume control. Each of these sections is described in further                                 to 12 dB. The input amplifier gain settings are set by program-
detail below. The AD74111 is controlled by means of a flexible                                 ming the appropriate bits in Control Register E. The ADC can
serial port (SPORT) that can be programmed to accommodate                                      also be muted under software control. The AD74111 input
many industry standard DSPs and microcontrollers. The AD74111                                  channel employs a multibit sigma-delta conversion technique that
can be set to operate as a master or slave device. The AD74111                                 provides a high resolution output with system filtering imple-
can be set to operate with sample rates of 8 kHz to 48 kHz,                                    mented on-chip. Sigma-delta converters employ a technique
depending on the values of MCLK and the MCLK prescalers.                                       known as oversampling, where the sampling rate is many times
On-chip digital filtering is provided as part of the DAC and                                   the highest frequency of interest. In the case of the AD74111,
ADC channels with a low group delay option to reduce the delays                                the oversampling ratio is 64 and a decimation filter is used to
through the filters when operating at lower sample rates. Figure 4                             reduce the output to standard sample rates. The maximum sample
shows a block diagram of the DAC and ADC channel in the                                        rate is 48 kHz.
AD74111. Figures 5a and 5b show block diagrams of the filter
arrangements of the ADC and DAC filters.
                                       MCLK                                     ADC
                                                                               INPUT
                                    PRESCALERS                             - ADC              SINC FILTER                         DECIMATOR           ADC
                                                         /4
                                      (/1 to /12)                         MODULATOR                 (/8)                               (/8)             DATA
                                                                                                                                                      16-/20-/24-
                                                              ADC MODULATOR                                                                              BITS
                                                              CLOCK
                                                                          - DAC
                                                     DAC O/P                                    /2
                                                                         MODULATOR
                                                                                       DAC MODULATOR
                                                                                       CLOCK
                                                                      5 BITS
                                                                                                                                                    DAC
                                                                                        INTERPOLATOR                          INTERPOLATOR          DATA
                                                                                            ( 16)                                 ( 8)          16-/20-/24-
                                                                                                                                                     BITS
                                                                      Figure 4. ADC and DAC Engine
                                                                                         –8–                                                                             REV. 0


                                                                                                                                   AD74111
                    ADC                    8  fS                 4  fS                      2  fS                       fS
                              5th ORDER                                           COMB                                          ADC
           MODULATOR                                   HALF-BAND                                            HALF-BAND
                             COMB FILTER                                     COMPENSATION                                       RESULT
                 64  fS
                                                                                                                                LOW GROUP
                                                                                                                                DELAY OUTPUT
                                                          Figure 5a. ADC Filter Section
                     DAC                    8  fS                 4  fS    ZERO ORDER HOLD 2  fS                         fS
            MODULATOR          16  ZERO                HALF-BAND                                           HALF-BAND–           DAC
                              ORDER HOLD                                    SINC COMPENSATION                   FILTER           INPUT
                 128  fS                                 FILTER
                                                                                   FILTER
                                                                                                                                 LOW GROUP
                                                                                                                                 DELAY INPUT
                                                          Figure 5b. DAC Filter Section
ADC, CAPP, and CAPN Pins                                                     Output Signal Swing
The ADC channel requires two external capacitors to act as                   The DAC has an output range of 0.5 V rms/1.414 V p-p about
charge reservoirs for the switched capacitor inputs of the sigma-            a bias point equal to VREFCAP (see Figure 7).
delta modulator. These capacitors isolate the outputs of the PGA
stage from glitches generated by the sigma-delta modulator. The
                                                                                                                     VREFCAP
capacitor also forms a low-pass filter with the output impedance                            VOUT                                     1.414V p-p
of the PGA (approximately 124 Ω), which helps to isolate noise                                          820
                                                                                                                 2n2F
from the modulator engine. The capacitors should be of good                                                      NPO
quality, such as NPO or polypropylene film, with values from
100 pF to 1 nF and should be connected to AGND.
                                                                                              Figure 7. Typical Output Circuit
Peak Readback
The AD74111 can store the highest ADC value to facilitate level              Low Group Delay
adjustment of the input signal. Programming the Peak Enable                  It is possible to bypass much of the digital filtering by enabling
bit in Control Register E with a 1 will enable ADC Peak Level                the Low Group Delay function in Control Register C. By reduc-
Reading. The peak value is stored as a 6-bit number from 0 dB                ing the amount of filtering the AD74111 applies to input and
to –63 dB in 1 dB steps. Reading Control Register F will give the            output samples, the time delay between the sampling interval
highest ADC value since the bit was set. The ADC peak register               and when the sample is available is greatly reduced. This can be
is automatically cleared after reading.                                      of benefit in applications such as telematics, where minimal
                                                                             time delays are important. When the Low Group Delay function
Decimator Section
                                                                             is enabled, the sample rate becomes IMCLK/128.
The digital decimation filter has a pass-band ripple of 0.2 mdB
and a stop-band attenuation of 120 dB. The filter is an FIR type             Reference
with a linear phase response. The group delay at 48 kHz is                   The AD74111 features an on-chip reference whose nominal
910 µs. Output sample rates up to 48 kHz are supported.                      value is 1.125 V. A 100 nF ceramic and 10 µF tantalum capacitor
                                                                             applied at the REFCAP pin are necessary to stabilize the reference.
Input Signal Swing
                                                                             (See Figure 8.)
The ADC input has an input range of 0.5 V rms/1.414 V p-p
about a bias point equal to VREFCAP. Figure 6 shows a typical
input filter circuit for use with the AD74111.
                                                                                                                         REFCAP
                                                                                                     10F    0.1F
                           VAGND        51
         1.414V p-p                                VIN
                                    47F  10nF
                                          NPO
                                                                                              Figure 8. Reference Decoupling
                                                                             If required, an external reference can be used as the reference
                    Figure 6. Typical Input Circuit                          source of the ADC and DAC sections. This may be desirable in
                                                                             situations where multiple devices are required to use the same
DAC Section                                                                  value of reference or because of a better temperature coefficient
The AD74111 DAC channel has a single-ended, analog output.                   specification. The internal reference can be disabled via Control
The DAC has independent software controllable Mute and Volume                Register A and the external reference applied at the REFCAP
Control functions. Control Register G controls the attenuation               pin (see Figure 9). External references should be of a suitable
factor for the DAC. This register is 10 bits wide, giving 1024               value such that the voltage swing of the inputs or outputs is not
steps of attenuation. The AD74111 output channel employs a                   affected by being too close to the power supply rails and should
multibit sigma-delta conversion technique that provides a high               be adequately decoupled.
quality output with system filtering implemented on-chip.
REV. 0                                                                   –9–


AD74111
                                                                        Example 2: fSAMP = 44.1 kHz and 11.025 kHz Required
                                                                        MCLK = 44.1 kHz ⫻ 256 = 11.2896 MHz to provide 44.1 kHz fSAMP.
                           1.125V       REFCAP
                         EXTERNAL
                                                                        For fSAMP = 11.025 kHz, it is necessary to use the ⫼1 setting in
                        REFERENCE                                       Prescaler 1 and the ⫼4 setting in Prescaler 2, and pass through
                                                                        in Prescaler 3. This results in an IMCLK = 11.025 kHz ⫻ 256
                                                                        = 2.8224 MHz (= 11.2896 MHz/4).
                    Figure 9. External Reference
                                                                        Resetting the AD74111
Master Clocking Scheme
                                                                        The AD74111 can be reset by bringing the RESET pin low.
The update rate of the AD74111’s ADC and DAC channels
                                                                        Following a reset, the internal circuitry of the AD74111 ensures
requires an internal master clock (IMCLK) that is 256 times the
                                                                        that the internal registers are reset to their default settings and
sample update rate (IMCLK = 256 ⫻ fS). To provide some flex-
                                                                        the on-chip RAM is purged of previous data samples. The DIN
ibility in selecting sample rates, the device has a series of three
                                                                        pin is sampled to determine if the AD74111 is required to
master clock prescalers that are programmable and allow the
                                                                        operate in Master or Slave mode. The reset process takes 3072
user to choose a range of convenient sample rates from a single
                                                                        MCLK periods, and the user should not attempt to program the
external master clock. The master clock signal to the AD74111 is
                                                                        AD74111 during this time.
applied at the MCLK pin. The MCLK signal is passed through
a series of three programmable MCLK prescaler (divider) circuits        Power Supplies and Grounds
that can be selected to reduce the resulting Internal MCLK              The AD74111 features three separate supplies: AVDD, DVDD1,
(IMCLK) frequency if required. The first and second MCLK                and DVDD2.
prescalers provide divider ratios of ⫼1 (pass through), ⫼2, ⫼3;         AVDD is the supply to the analog section of the device and must
while the third prescaler provides divider ratios of ⫼1 (pass           be of sufficient quality to preserve the AD74111’s performance
through), ⫼2, ⫼4.                                                       characteristics. It is nominally a 2.5 V supply.
                       PROGRAMMABLE MCLK DIVIDER                        DVDD1 is the supply for the digital interface section of the device.
             PRESCALER 1        PRESCALER 2    PRESCALER 3              It is fed from the digital supply voltage of the DSP or controller
    MCLK          /1                 /1            /1        IMCLK
                                                                        to which the device is interfaced and allows the AD74111
                  /2                 /2            /2                   to interface with devices operating at supplies of between
                  /3                 /3            /4                   2.5 V – 5% to 3.3 V + 10%.
                                                                        DVDD2 is the supply for the digital core of the AD74111. It is
                                                                        nominally a 2.5 V supply.
                              CONTROL REGISTER
                                                                        Accessing the Internal Registers
                      Figure 10. MCLK Divider                           The AD74111 has seven registers that can be programmed to
                                                                        control the functions of the AD74111. Each register is 10 bits
The divider ratios allow a more convenient sample rate selection
                                                                        wide and is written to or read from using a 16-bit write or read
from a common MCLK, which may be required in many voice
                                                                        operation, with the exception of Control Register F, which is
related applications. Control Register B should be programmed
                                                                        read-only. Table V shows the format of the data transfer operation.
to achieve the desired divider ratios.
                                                                        The Control Word is made up of a Read/Write bit, the register
Selecting Sample Rates                                                  address, and the data to be written to the device. Note that in a
The sample rate at which the converter runs is always 256 times         read operation the data field is ignored by the device. Access to
the IMCLK rate. IMCLK is the Internal Master Clock and is the           the control registers is via the serial port through one of the
output from the Master Clock Prescaler. The default sample rate         operating modes described below.
is 48 kHz (based on an external MCLK of 12.288 MHz). In this
                                                                        Serial Port
mode, the ADC modulator is clocked at 3.072 MHz and the DAC
                                                                        The AD74111 contains a flexible serial interface port that is
modulator is clocked at 6.144 MHz. Sample rates that are lower
                                                                        used to program and read the control registers and to send and
than MCLK/256 can be achieved by using the MCLK prescaler.
                                                                        receive DAC and ADC audio data. The serial port is compatible
Example 1: fSAMP = 48 kHz and 8 kHz Required                            with many popular DSPs and can be programmed to operate in
MCLK = 48 kHz ⫻ 256 = 12.288 MHz to provide 48 kHz fSAMP.               a variety of modes, depending on which one best suits the DSP
For fSAMP = 8 kHz, it is necessary to use the ⫼3 setting in             being used. The serial port can be set to operate as a Master or
Prescaler 1, the ⫼2 setting in Prescaler 2, and pass through            Slave device, as discussed below. Figure 11 shows a timing
in Prescaler 3. This results in an IMCLK = 8 kHz ⫻ 256 =                diagram of the serial port.
2.048 MHz (= 12.288 MHz/6).
                                                                    –10–                                                              REV. 0


                                                                                                                           AD74111
                                                     tFS
                              DFS
                                                         tFH
                                                                             tCH
                             DCLK
                                                 tFD                 tCL
                              DIN                                MSB           MSB–1        MSB–2
                                                                                          tDS
                                                                                                 tDH
                             DOUT                                  MSB           MSB–1        MSB–2
                                                             tDD
                                                Figure 11. Serial Port (SPORT) Timing
Serial Port Operating Modes                                              Master Mode Operation
The serial port of the AD74111 can be programmed to operate              In Master mode, the DFS and DCLK pins are outputs from the
in a variety of modes depending on the requirements and flex-            AD74111. This is the easiest mode in which to use the AD74111
ibility of the DSP to which it is connected. The two principal           because the correct timing relationship between sample rate,
modes of operation are Mixed mode and Data mode.                         DCLK, and DFS is controlled by the AD74111.
Mixed Mode                                                               Slave Mode Operation
Mixed mode allows the control registers of the AD74111 to be             In Slave mode, the DFS and DCLK pins are inputs to the
programmed and read back. It also allows data to be sent to the          AD74111. Care needs to be exercised when designing a system
DACs and data to be read from the ADCs. In Mixed mode,                   to operate the AD74111 in this mode as the relationship between
there are separate data slots, each with its own frame synchroni-        the sample rate, DCLK, and DFS needs to be controlled by the
zation signal (DFS) for control and DAC or ADC information.              DSP or other controller and must be compatible with the inter-
The AD74111 powers up in Mixed mode by default to allow                  nal DAC/ADC engine of the AD74111. Figure 12 shows a block
the control registers to be programmed. Figure 13 shows the              diagram of the DAC engine and the AD74111’s serial port. The
default setting for Mixed mode.                                          sample rate for the DAC engine is determined by the MCLK
Data Mode                                                                and MCLK prescalers. The DAC engine will read data from the
Data mode can be used when programming or reading the                    DAC Data register at this rate. It is therefore important that the
control registers is no longer required. Data mode provides a            serial port is updated at the same rate, as any error between the
frame synchronization (DFS) pulse for each sample of data.               two will accumulate and eventually cause the DAC engine to have
Once the part has been programmed into Data mode, the only               to resynchronize with the serial port, which will cause erroneous
way to change the control registers is to perform a hardware reset       values on the DAC output pins.
to put the AD74111 back into Mixed mode. Figure 15 shows
the default setting for Data mode.
                                                                                           RESYNC*
                                                                                                       DAC ENGINE                   VOUT
Data-Word Length
                                                                                           LOAD DAT
The AD74111 can be programmed to send DAC audio data
and receive ADC audio data in different word length formats of
16, 20, or 24 bits. The default mode is 16 bits, but this can be
                                                                                                    DAC DATA REGISTER
changed by programming Control Register C for the appropriate
word length.
                                                                              DFS
Selecting Master or Slave Mode                                                DIN
                                                                                                      SERIAL PORT
The initial operating mode of the AD74111 is determined by                                *RESYNC IS ONLY USED WHEN THE DAC BECOMES
                                                                                           UNSYNCHRONIZED WITH THE SERIAL PORT
the state of the DIN pin following a reset. If the DIN pin is high
during this time, Slave mode is selected. In Slave mode, the                                   Figure 12. DAC Engine
DFS and DCLK pins are inputs and the control signals for
                                                                         In most cases, it is easy to keep a DSP in synchronization with
these pins must be provided by the DSP or other controller. If
                                                                         the AD74111 if they are both run from the same clock or the
the DIN pin is low immediately following a reset, the AD74111
                                                                         DSP clock is a multiple of the AD74111’s MCLK. In this case,
will operate in Master mode.
REV. 0                                                             –11–


AD74111
there will be a fixed relationship between the instruction cycle                                           Table II. Serial Mode Selection
time of the DSP program and the AD74111, so a timer could be
used to accurately control the DAC updates. If a timer is not                                          CRD:2 CRC:5, 4
available, the Multiframe-Sync (MFS) mode could be used to                                CRD:3        DSP         Word      Operating
generate a DFS pulse every 16 or 32 DCLKs, allowing the DSP                               DM/MM        Mode Width            Mode              Figure
to accurately control the number of DCLKs between updates                                 0            0           16        16-Bit Data Mode  15
using an autobuffering or DMA type technique. In all cases for                            0            1           16        32-Bit Data Mode  19
Slave mode operation, there should be 128 DCLKs (Normal                                   1            0           16        16-Bit Mixed Mode 13
mode) or 256 DCLKs (Fast mode) between DAC updates. The                                   1            1           16        32-Bit Mixed Mode 17
ADC operates in a similar manner; however, if the DSP does not                            0            0           >16       16-Bit Data Mode  16
read an ADC result, this will appear only as a missed sample and                          0            1           >16       32-Bit Data Mode  20
will not be audible. Slave mode is most suited to state-machine                           1            0           >16       16-Bit Mixed Mode 14
type applications where the number of DCLKs and their                                     1            1           >16       32-Bit Mixed Mode 18
relationships to the other interface signals can be controlled.
                                                                    1/fS
                                          CONTROL         DAC                               CONTROL        DAC
                                DIN       (16 BITS)     (16 BITS)                            (16 BITS)   (16 BITS)
                                           STATUS
                                            STATUS         ADC                                STATUS
                                                                                              STATUS        ADC
                               DOUT       (16 BITS)     (16 BITS)                            (16
                                                                                             (16 BITS)
                                                                                                 BITS)   (16 BITS)
                                DFS
                             (MM16)
                                                    128 DCLKs (NORMAL MODE)
                                                      256 DCLKs (FAST MODE)
                                              Figure 13. 16-Bit Mixed Mode, Word Length = 16 Bits
                                                                                     1/fS
                                   CONTROL                       DAC DATA                                                     CONTROL
                          DIN       (16 BITS)                     (24 BITS)                                                   (16 BITS)
                                     STATUS                      ADC DATA                                                      STATUS
                         DOUT       (16 BITS)                     (24 BITS)                                                   (16 BITS)
                          DFS
                       (MM16)
                                                             16 DCLKS
                                                                       128 DCLKs (NORMAL MODE)
                                                                         256 DCLKs (FAST MODE)
                                              Figure 14. 16-Bit Mixed Mode, Word Length = 24 Bits
                                                                    1/fS
                                             DAC                                                DAC
                                DIN        (16 BITS)                                         (16 BITS)
                                              ADC
                                            STATUS                                              ADC
                                                                                              STATUS
                               DOUT       (16 BITS)                                          (16 BITS)
                                                                                             (16 BITS)
                                DFS
                             (MM16)
                                                    128 DCLKs (NORMAL MODE)
                                                      256 DCLKs (FAST MODE)
                                               Figure 15. 16-Bit Data Mode, Word Length = 16 Bits
                                                                                  –12–                                                         REV. 0


                                                                                                     AD74111
                                                                    1/fS
                      DAC DATA                                                             DAC DATA
          DIN          (24 BITS)                                                           (24 BITS)
                      ADC DATA                                                             ADC DATA
         DOUT          (24 BITS)                                                           (24 BITS)
          DFS
       (MM16)
                   16 DCLKs
                                                     128 DCLKs (NORMAL MODE)
                                                       256 DCLKs (FAST MODE)
                                    Figure 16. 16-Bit Data Mode, Word Length = 24 Bits
                                                                   1/fS
                         CONTROL             DAC DATA                                  CONTROL
               DIN       (16 BITS)           (16 BITS)                                 (16 BITS)
                          STATUS             ADC DATA                                   STATUS
              DOUT       (16 BITS)           (16 BITS)                                 (16 BITS)
               DFS
                              32 DCLKs
                                                     128 DCLKs (NORMAL MODE)
                                                       256 DCLKs (FAST MODE)
                                   Figure 17. 32-Bit Mixed Mode, Word Length = 16 Bits
                                                                   1/fS
                         CONTROL               DAC DATA                                CONTROL
               DIN       (16 BITS)              (24 BITS)                              (16 BITS)
                          STATUS               ADC DATA                                 STATUS
              DOUT       (16 BITS)              (24 BITS)                              (16 BITS)
               DFS
                              32 DCLKS
                                                     128 DCLKs (NORMAL MODE)
                                                       256 DCLKs (FAST MODE)
                                   Figure 18. 32-Bit Mixed Mode, Word Length = 24 Bits
                                                                   1/fS
                   DAC DATA                                                               DAC DATA
         DIN       (16 BITS)                                                              (24 BITS)
                   ADC DATA                                                               ADC DATA
        DOUT       (16 BITS)                                                              (24 BITS)
         DFS
                                                    128 DCLKs (NORMAL MODE)
                                                      256 DCLKs (FAST MODE)
                                    Figure 19. 32-Bit Data Mode, Word Length = 16 Bits
REV. 0                                                           –13–


AD74111
                                                            1/fS
                   DAC DATA                                                            DAC DATA
          DIN      (24 BITS)                                                            (24 BITS)
                   ADC DATA                                                             ADC DATA
         DOUT      (24 BITS)                                                            (24 BITS)
          DFS
                                              128 DCLKs (NORMAL MODE)
                                                256 DCLKs (FAST MODE)
                              Figure 20. 32-Bit Data Mode, Word Length = 24 Bits
                                                     1/fS
                                     32 DCLKs
          DFS
                C          DAC                                                    C       DAC
          DIN
                S         ADC                                                     S       ADC
        DOUT
                                Figure 21. Multiframe Sync 32-Bit Mixed Mode
                                                     1/fS
                                     32 DCLKs
          DFS
               DAC                                                               DAC
          DIN
               ADC                                                               ADC
        DOUT
                                 Figure 22. Multiframe Sync 32-Bit Data Mode
                                                  1/fS
                                  16 DCLKS
           DFS
           DIN  C    DAC                                                          C  DAC
         DOUT   S    ADC                                                          S  ADC
                                Figure 23. Multiframe Sync 16-Bit Mixed Mode
                                                          –14–                                    REV. 0


                                                                                                                            AD74111
                                                                 1/fS
                                               16 DCLKs
                   DFS
                    DIN   DAC                                                                               DAC
                  DOUT    ADC                                                                               ADC
                                            Figure 24. Multiframe Sync 16-Bit Data Mode
                                                   Table III. Multiframe Sync Selection
                           CRD:9            CRD:3             CRC:2
                           MFS              DM/MM             DSP Mode        Operating Mode            Figure
                           1                0                 0               16-Bit Data Mode          24
                           1                0                 1               32-Bit Data Mode          22
                           1                1                 0               16-Bit Mixed Mode         23
                           1                1                 1               32-Bit Mixed Mode         21
                                                       Table IV. Control Register Map
                Address (Binary)            Name           Description             Type        Width       Reset Setting
                0000                        CRA            Control Register A      R/W         10          00h
                0001                        CRB            Control Register B      R/W         10          00h
                0010                        CRC            Control Register C      R/W         10          00h
                0011                        CRD            Control Register D      R/W         10          08h or 09h*
                0100                        CRE            Control Register E      R/W         10          00h
                0101                        CRF            Control Register F      R           10          00h
                0110                        CRG            Control Register G      R/W         10          00h
                *09h if DIN is low and 08h if DIN is high.
                                                    Table V. Control Word Descriptions
Bit    Field               Description
15     R/W                 When this bit is high, the contents of the data field will be written to the register specified by the Address
                           Field. When this bit is low, a read of the register specified by the Address Field will occur at the next
                           sample interval; the contents of the Data Field are ignored.
14–11 Register Address     This 4-bit field is used to select one of the seven control registers of the AD74111.
10     Reserved            This bit is reserved and should always be programmed with zero.
9–0    Data Field          This 10-bit field holds the data that is to be written to or read from the register specified in the Address Field.
REV. 0                                                                –15–


AD74111
                                                   Table VI. Control Register A
                                                                                  Function
                                                  ADC Input                                                 Reference
R/W     ADDRESS           RES     Reserved        Amplifier          ADC         DAC         Reference      Amplifier    Reserved
15      14, 13, 12, 11    10      9, 8, 7         6                  5           4           3              2            1, 0
1       0000              0       0               0 = Off            0 = Off     0 = Off     0 = Off        0 = Off      0
                                                  1 = On             1 = On      1 = On      1 = On         1 = On
                                                   Table VII. Control Register B
                                                                                 Function
                                                            Third MCLK              Second MCLK           First MCLK
       R/W       ADDRESS          RES       Reserved        Divider                 Divider               Divider
       15        14, 13, 12, 11   10        9, 8, 7, 6      5, 4                    3, 2                  1, 0
       1         0001             0         0               00 = Divide by 1        00 = Divide by 1      00 = Divide by 1
                                                            01 = Divide by 2        01 = Divide by 2      01 = Divide by 2
                                                            10 = Divide by 4        10 = Divide by 3      10 = Divide by 3
                                                            11 = Divide by 1        11 = Divide by 1      11 = Divide by 1
                                                  Table VIII. Control Register C
                                                                               Function
                                                      DAC and ADC            Low Group           DAC                ADC High-
   R/W     ADDRESS           RES     Reserved         Word Width             Delay               De-emphasis        Pass Filter
   15      14, 13, 12, 11    10      9, 8, 7, 6       5, 4                   3                   2, 1               0
   1       0010              0       0                00 = 16 Bits           0 = Disabled        00 = None          0 = Disabled
                                                      01 = 20 Bits           1 = Enabled         01 = 44.1 kHz      1 = Enabled
                                                      10 = 24 Bits                               10 = 32 kHz
                                                      11 = 24 Bits                               11 = 48 kHz
                                                   Table IX. Control Register D
                                                                                   Function
                                                                                                                        Master/
 R/W    ADDRESS          RES    Multiframe Sync          Reserved        DM/MM             DSP Mode       Fast DCLK     Slave
 15     14, 13, 12, 11   10     9                        8, 7, 6, 5, 4   3                 2              1             0
 1      0011             0      0 = Normal Mode          0               0 = Data Mode 0 = 16 Bits        0 = 128 ⫻ fS  0 = Slave
                                1 = MFS Mode                             1 = Mixed Mode 1 = 32 Bits       1 = 256 ⫻ fS  1 = Master
                                                                –16–                                                        REV. 0


                                                                                                        AD74111
                                             Table X. Control Register E
                                                                           Function
                                                     ADCL Peak                               ADC         DAC
   R/W ADDRESS            RES        Reserved        Enable                ADC Gain          Mute        Mute
   15  14, 13, 12, 11     10         9, 8, 7, 6      5                     4, 3, 2           1           0
   1   0100               0          0               0 = Disabled          000 = 0 dB        0 = Normal  0 = Normal
                                                     1 = Peak Enable       001 = 3 dB        1 = Mute    1 = Mute
                                                                           010 = 6 dB
                                                                           011 = 9 dB
                                                                           1XX = 12 dB
                                            Table XI. Control Register F
                                                                              Function
                   R/W      ADDRESS             RES        Reserved         ADC Input Peak Level
                   15       14, 13, 12, 11      10         9, 8, 7, 6       5, 4, 3, 2, 1, 0
                                                                            000000 = 0 dBFS
                                                                            000001 = –1 dBFS
                   0        0101                0          0                000010 = –2 dBFS
                                                                            111110 = –62 dBFS
                                                                            111111 = –63 dBFS
                                            Table XII. Control Register G
                                                                            Function
                      R/W      ADDRESS             RES        DAC Volume
                      15       14, 13, 12, 11      10         9, 8, 7, 6, 5, 4, 3, 2, 1, 0
                                                              0000000000 = 0 dBFS
                                                              0000000001 = (1023/1024) dBFS
                      1        0110                0          0000000010 = (1022/1024) dBFS
                                                              1111111110 = (2/1024) dBFS
                                                              1111111111 = Mute
REV. 0                                                  –17–


AD74111
                              OUTLINE DIMENSIONS
          16-Lead Thin Shrink Small Outline Package [TSSOP]
                                           (RU-16)
                              Dimensions shown in millimeters
                          5.10
                          5.00
                          4.90
                    16               9
           4.50
                                         6.40
           4.40                          BSC
           4.30
                     1               8
           PIN 1
                                      1.20
                                      MAX
        0.15                                   0.20
        0.05                                   0.09            0.75
                                0.30                    8     0.60
                0.65                                    0     0.45
                                0.19     SEATING
               BSC
                                          PLANE
                       COPLANARITY
                           0.10
                         COMPLIANT TO JEDEC STANDARDS MO-153AB
                                             –18–                   REV. 0


–19–

–20–
       PRINTED IN U.S.A.   C03069–0–2/03(0)


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Analog Devices Inc.:
 EVAL-AD74111EBZ AD74111YRUZ-REEL7 AD74111YRUZ AD74111YRUZ-REEL
