                                                                                                            Audio Codec for Recordable DVD
                                                                                                                                  ADAV803
FEATURES                                                                                                                       FUNCTIONAL BLOCK DIAGRAM
                                                                                                                                                               SYSCLK1    SYSCLK2     SYSCLK3
Stereo analog-to-digital converter (ADC)
                                                                                                                        XIN   XOUT   MCLKI   MCLKO                                                                                    SDA    SCL   AD0    AD1
  Supports 48 kHz/96 kHz sample rates
  102 dB dynamic range
  Single-ended input                                                                                                                                                     PLL                                                                CONTROL
                                                                                                                                                                                                                                           REGISTERS
  Automatic level control
                                                                                                                VINL                                                                                                                                            OLRCLK
                                                                                                                         ANALOG-TO-DIGITAL                                                                                                         RECORD
Stereo digital-to-analog converter (DAC)                                                                                    CONVERTER                                                                                                               DATA        OBCLK
                                                                                                                VINR
                                                                                                                                                                                                                                                   OUTPUT
  Supports 32 kHz/44.1 kHz/48 kHz/96 kHz/192 kHz                                                                                                                                                                                                                OSDATA
                                                                                                               VREF      REFERENCE                   SRC                                 DIGITAL
     sample rates                                                                                                                                                                     INPUT/OUTPUT
                                                                                                                                                                                                                                                   AUX DATA
                                                                                                                                                                                                                                                                OAUXLRCLK
                                                                                                                                                                                    SWITCHING MATRIX                                                            OAUXBCLK
                                                                                                                                                                                                                                                    OUTPUT
  101 dB dynamic range                                                                                        VOUTL
                                                                                                                                                                                       (DATA PATH)
                                                                                                                                                                                                                                                                OAUXSDATA
                                                                                                                         DIGITAL-TO-ANALOG
  Single-ended output                                                                                         VOUTR          CONVERTER
                                                                                                                                                                                                                                                         DIT    DITOUT
Asynchronous operation of ADC and DAC
                                                                                                               FILTD
Stereo sample rate converter (SRC)                                                                                                                                                                                                                              ZEROL/INT
                                                                                                                                                     PLAYBACK                                   AUX DATA
                                                                                                                                                                                                                                   DIR
  Input/output range: 8 kHz to 192 kHz                                                                                 ADAV803
                                                                                                                                                     DATA INPUT                                  INPUT                                                          ZEROR
  140 dB dynamic range
Digital interfaces
                                                                                                                                                                             ISDATA
                                                                                                                                                                                                                       IAUXSDATA
                                                                                                                                                      ILRCLK      IBCLK                                                            DIRIN
                                                                                                                                                                                                IAUXLRCLK   IAUXBCLK
  Record
                                                                                                                                                                                                                                                                            04756-001
  Playback
  Auxiliary record                                                                                                                                                                        Figure 1.
  Auxiliary playback
                                                                                                              APPLICATIONS
S/PDIF (IEC 60958) input and output
  Digital interface receiver (DIR)                                                                            DVD-recordable
  Digital interface transmitter (DIT)                                                                         All formats
PLL-based audio MCLK generators                                                                               CD-R/W
Generates required DVDR system MCLKs
Device control via I2C-compatible serial port
64-lead LQFP package
GENERAL DESCRIPTION
The ADAV803 is a stereo audio codec intended for applications                                                 The sample rate converter (SRC) provides high performance
such as DVD or CD recorders that require high performance                                                     sample rate conversion to allow inputs and outputs that require
and flexible, cost-effective playback and record functionality.                                               different sample rates to be matched. The SRC input can be
The ADAV803 features Analog Devices, Inc. proprietary, high                                                   selected from playback, auxiliary, DIR, or ADC (record). The
performance converter cores to provide record (ADC),                                                          SRC output can be applied to the playback DAC, both main and
playback (DAC), and format conversion (SRC) on a single chip.                                                 auxiliary record channels, and a DIT. Operation of the ADAV803
The ADAV803 record channel features variable input gain to                                                    is controlled via an I2C®-compatible serial interface, which
allow for adjustment of recorded input levels and automatic                                                   allows the programming of individual control register settings.
level control, followed by a high performance stereo ADC                                                      The ADAV803 operates from a single analog 3.3 V power
whose digital output is sent to the record interface. The record                                              supply and a digital power supply of 3.3 V with an optional
channel also features level detectors that can be used in                                                     digital interface range of 3.0 V to 3.6 V.
feedback loops to adjust input levels for optimum recording.                                                  The part is housed in a 64-lead LQFP package and is character-
The playback channel features a high performance stereo DAC                                                   ized for operation over the commercial temperature range of
with independent digital volume control.                                                                      −40°C to +85°C.
Rev. A
Information furnished by Analog Devices is believed to be accurate and reliable. However, no
responsibility is assumed by Analog Devices for its use, nor for any infringements of patents or other
rights of third parties that may result from its use. Specifications subject to change without notice. No     One Technology Way, P.O. Box 9106, Norwood, MA 02062-9106, U.S.A.
license is granted by implication or otherwise under any patent or patent rights of Analog Devices.           Tel: 781.329.4700                                 www.analog.com
Trademarks and registered trademarks are the property of their respective owners.                             Fax: 781.461.3113 ©2004–2007 Analog Devices, Inc. All rights reserved.


ADAV803
TABLE OF CONTENTS
Features .............................................................................................. 1               DAC Section................................................................................ 18
Functional Block Diagram .............................................................. 1                               Sample Rate Converter (SRC) Functional Overview ............ 19
Applications....................................................................................... 1                   PLL Section ................................................................................. 22
General Description ......................................................................... 1                         S/PDIF Transmitter and Receiver ............................................ 23
Revision History ............................................................................... 2                      Serial Data Ports ......................................................................... 27
Specifications..................................................................................... 3                Interface Control ............................................................................ 30
  Test Conditions............................................................................. 3                        I2C Interface ................................................................................ 30
  ADAV803 Specifications ............................................................. 3                                Block Reads and Writes ............................................................. 31
  Timing Specifications .................................................................. 7                         Register Descriptions ..................................................................... 32
  Temperature Range ...................................................................... 7                         Layout Considerations................................................................... 59
Absolute Maximum Ratings............................................................ 8                                  ADC ............................................................................................. 59
  ESD Caution.................................................................................. 8                       DAC.............................................................................................. 59
Pin Configuration and Function Descriptions............................. 9                                              PLL ............................................................................................... 59
Typical Performance Characteristics ........................................... 11                                      Reset and Power-Down Considerations ................................. 59
Functional Description .................................................................. 15                         Outline Dimensions ....................................................................... 60
  ADC Section ............................................................................... 15                        Ordering Guide .......................................................................... 60
REVISION HISTORY
7/07—Rev. 0 to Rev. A
Changes to Table 1............................................................................ 3
Changes to ADC Section............................................................... 15
Changes to Figure 25...................................................................... 15
Changes to Figure 33...................................................................... 21
Changes to SRC Architecture Section ......................................... 21
Changes to Table 7.......................................................................... 22
Changes to Figure 36...................................................................... 22
Changes to Figure 39, Figure 40, Figure 41, Figure 42 .............. 23
Changes to Transmitter Operation Section ................................ 27
Changes to Interrupts Section ...................................................... 27
Changes to Figure 50...................................................................... 28
Changes to Table 97........................................................................ 47
Changes to Table 101...................................................................... 48
Changes to Table 136 and Table 137 ............................................ 56
Updated Outline Dimensions ....................................................... 60
Changes to Ordering Guide .......................................................... 60
7/04—Revision 0: Initial Version
                                                                                                    Rev. A | Page 2 of 60


                                                                                                  ADAV803
SPECIFICATIONS
TEST CONDITIONS
Test conditions, unless otherwise noted.
Table 1.
Test Parameter                            Condition
Supply Voltage
Analog                                    3.3 V
Digital                                   3.3 V
Ambient Temperature                       25°C
Master Clock (MCLKI)                      12.288 MHz
Measurement Bandwidth                     20 Hz to 20 kHz
Word Width (All Converters)               24 bits
Load Capacitance on Digital Outputs       100 pF
ADC Input Frequency                       1007.8125 Hz at −1 dBFS
DAC Output Frequency                      960.9673 Hz at 0 dBFS
Digital Input                             Slave Mode, I2S Justified Format
Digital Output                            Slave Mode, I2S Justified Format
ADAV803 SPECIFICATIONS
Table 2.
Parameter                                Min           Typ           Max Unit   Comments
PGA SECTION
  Input Impedance                                      4                 kΩ
  Minimum Gain                                         0                 dB
  Maximum Gain                                         24                dB
  Gain Step                                            0.5               dB
REFERENCE SECTION
  Absolute Voltage, VREF                               1.5               V
  VREF Temperature Coefficient                         80                ppm/°C
ADC SECTION
  Number of Channels                                   2
  Resolution                                           24                Bits
  Dynamic Range                                                                 −60 dB input
     Unweighted                                        99                dB     fS = 48 kHz
                                                       98                dB     fS = 96 kHz
     A-Weighted                          98            102               dB     fS = 48 kHz
                                                       101               dB     fS = 96 kHz
  Total Harmonic Distortion + Noise                                             Input = −1.0 dBFS
                                                       −88               dB     fS = 48 kHz
                                                       −87               dB     fS = 96 kHz
  Analog Input
     Input Range (± Full Scale)                        1.0               V rms
  DC Accuracy
     Gain Error                          −1.5          −0.8              dB
     Interchannel Gain Mismatch                        0.05              dB
     Gain Drift                                        1                 mdB/°C
     Offset                                            −10               mV
                                                  Rev. A | Page 3 of 60


ADAV803
Parameter                                    Min           Typ           Max    Unit       Comments
  Crosstalk (EIAJ Method)                                  −110                 dB
  Volume Control Step Size (256 Steps)                     0.39                 % per step
  Maximum Volume Attenuation                               −48                  dB
  Mute Attenuation                                         ∞                    dB         ADC outputs all zero codes
  Group Delay
     fS = 48 kHz                                           910                  μs
     fS = 96 kHz                                           460                  μs
ADC LOW-PASS DIGITAL DECIMATION FILTER
CHARACTERISTICS 1
  Pass-Band Frequency                                      22                   kHz        fS = 48 kHz
                                                           44                   kHz        fS = 96 kHz
  Stop-Band Frequency                                      26                   kHz        fS = 48 kHz
                                                           52                   kHz        fS = 96 kHz
  Stop-Band Attenuation                                    120                  dB         fS = 48 kHz
                                                           120                  dB         fS = 96 kHz
  Pass-Band Ripple                                         ±0.01                dB         fS = 48 kHz
                                                           ±0.01                dB         fS = 96 kHz
ADC HIGH-PASS DIGITAL FILTER CHARACTERISTICS
  Cutoff Frequency                                         0.9                  Hz         fS = 48 kHz
SRC SECTION
  Resolution                                               24                   Bits
  Sample Rate                                8                           192    kHz        XIN = 27 MHz
  SRC MCLK                                   138 × fS-                   33     MHz        fS-MAX is the greater of the input or
                                             MAX                                           output sample rate
  Maximum Sample Rate Ratios
     Upsampling                                                          1:8
     Downsampling                                                        7.75:1
  Dynamic Range                                            140                             20 Hz to fS/2, 1 kHz, −60 dBFS input,
                                                                                           fIN = 44.1 kHz, fOUT = 48 kHz
  Total Harmonic Distortion + Noise                        120                  dB         20 Hz to fS/2, 1 kHz, 0 dBFS input,
                                                                                           fIN = 44.1 kHz, fOUT = 48 kHz
DAC SECTION
  Number of Channels                                       2
  Resolution                                               24                   Bits
  Dynamic Range                                                                            20 Hz to 20 kHz, −60 dB input
     Unweighted                                            99                   dB         fS = 48 kHz
                                                           98                   dB         fS = 96 kHz
     A-Weighted                              97            101                  dB         fS = 48 kHz
                                                           100                  dB         fS = 96 kHz
  Total Harmonic Distortion + Noise                                                        Referenced to 1V rms
                                                           −91                  dB         fS = 48 kHz
                                                           −90                  dB         fS = 96 kHz
  Analog Outputs
     Output Range (± Full Scale)                           1.0                  V rms
     Output Resistance                                     60                   Ω
     Common-Mode Output Voltage                            1.5                  V
  DC Accuracy
     Gain Error                              −2            −0.8                 dB
     Interchannel Gain Mismatch                            0.05                 dB
     Gain Drift                                            1                    mdB/°C
     DC Offset                               −30                         +30    mV
                                                      Rev. A | Page 4 of 60


                                                                                                       ADAV803
Parameter                                 Min       Typ           Max  Unit    Comments
  Crosstalk (EIAJ Method)                           −110               dB
  Phase Deviation                                   0.05               Degrees
  Mute Attenuation                                  −95.625            dB
  Volume Control Step Size (256 Steps)              0.375              dB
  Group Delay
     48 kHz                                         630                μs
     96 kHz                                         155                μs
     192 kHz                                        66                 μs
DAC LOW-PASS DIGITAL INTERPOLATION FILTER
CHARACTERISTICS
  Pass-Band Frequency                               20                 kHz     fS = 44.1 kHz
                                                    22                 kHz     fS = 48 kHz
                                                    42                 kHz     fS = 96 kHz
  Stop-Band Frequency                               24                 kHz     fS = 44.1 kHz
                                                    26                 kHz     fS = 48 kHz
                                                    60                 kHz     fS = 96 kHz
  Stop-Band Attenuation                             70                 dB      fS = 44.1 kHz
                                                    70                 dB      fS = 48 kHz
                                                    70                 dB      fS = 96 kHz
  Pass-Band Ripple                                  ±0.002             dB      fS = 44.1 kHz
                                                    ±0.002             dB      fS = 48 kHz
                                                    ±0.005             dB      fS = 96 kHz
PLL SECTION
  Master Clock Input Frequency                      27/54              MHz
  Generated System Clocks
     MCLKO                                          27/54              MHz
     SYSCLK1                              256                     768  × fS    256/384/512/768 ×
                                                                               32 kHz/44.1 kHz/48 kHz
     SYSCLK2                              256                     768  × fS    256/384/512/768 ×
                                                                               32 kHz/44.1 kHz/48 kHz
     SYSCLK3                              256       512                × fS    256/512 × 32 kHz/44.1 kHz/48 kHz
  Jitter
     SYSCLK1                                        65                 ps rms
     SYSCLK2                                        75                 ps rms
     SYSCLK3                                        75                 ps rms
DIR SECTION
  Input Sample Frequency                  27.2                    200  kHz
  Differential Input Voltage              200                          mV
DIT SECTION
  Output Sample Frequency                 27.2                    200  kHz
DIGITAL I/O
  Input Voltage High, VIH                 2.0                     DVDD V
  Input Voltage Low, VIL                                          0.8  V
  Input Leakage, IIH @ VIH = 3.3 V                                10   μA
  Input Leakage, IIL @ VIL = 0 V                                  10   μA
  Output Voltage High, VOH @ IOH = 0.4 mA 2.4                          V
  Output Voltage Low, VOL @ IOL = −2 mA                           0.4  V
  Input Capacitance                                               15   pF
                                               Rev. A | Page 5 of 60


ADAV803
Parameter                          Min      Typ           Max Unit Comments
POWER
   Supplies
      Voltage, AVDD                3.0      3.3           3.6 V
      Voltage, DVDD                3.0      3.3           3.6 V
      Voltage, ODVDD               3.0      3.3           3.6 V
   Operating Current                                               All supplies at 3.3 V
      Analog Current                                      60  mA
      Digital Current                                     38  mA
      Digital Interface Current                           13  mA
      DIRIN/DIROUT Current                  5                 mA
      PLL Current                                         18  mA
   Power-Down Current                                              RESET low, no MCLK
      Analog Current                        18                mA
      Digital Current                       2.5               mA
      Digital Interface Current             700               μA
      DIRIN/DIROUT Current                  3.5               mA
      PLL Current                           900               μA
   Power Supply Rejection
      Signal at Analog Supply Pins          −70               dB   1 kHz, 300 mV p-p
                                            −70               dB   20 kHz, 300 mV p-p
1
  Guaranteed by design.
                                       Rev. A | Page 6 of 60


                                                                                                                                                  ADAV803
TIMING SPECIFICATIONS
Timing specifications are guaranteed over the full temperature and supply range.
Table 3.
Parameter                                     Symbol             Min        Typ          Max        Unit Comments
MASTER CLOCK AND RESET
   MCLKI Frequency                            fMCLK                         12.288       54         MHz
   XIN Frequency                              fXIN                          27           54         MHz
   RESET Low                                  tRESET             20                                 ns
 2
I C PORT
   SCL Clock Frequency                        fSCL                                       400        kHz
   SCL High                                   tSCLH              0.6                                μs
   SCL Low                                    tSCLL              1.3                                μs
   Start Condition
   Setup Time                                 tSCS               0.6                                μs   Relevant for repeated start condition
      Hold Time                               tSCH               0.6                                μs   After this period, the first clock is generated
      Data Setup Time                         tDS                100                                ns
      SCL Rise Time                           tSCR                                       300        ns
      SCL Fall Time                           tSCF                                       300        ns
      SDA Rise Time                           tSDR                                       300        ns
      SDA Fall Time                           tSDF                                       300        ns
   Stop Condition
      Setup Time                              tSCS                          0.6                     μs
SERIAL PORTS 1
   Slave Mode
      xBCLK High                              tSBH               40                                 ns
      xBCLK Low                               tSBL               40                                 ns
      xBCLK Frequency                         fSBF               64 × fS
      xLRCLK Setup                            tSLS               10                                 ns   To xBCLK rising edge
      xLRCLK Hold                             tSLH               10                                 ns   From xBCLK rising edge
      xSDATA Setup                            tSDS               10                                 ns   To xBCLK rising edge
      xSDATA Hold                             tSDH               10                                 ns   From xBCLK rising edge
      xSDATA Delay                            tSDD               10                                 ns   From xBCLK falling edge
   Master Mode
      xLRCLK Delay                            tMLD                                       5          ns   From xBCLK falling edge
      xSDATA Delay                            tMDD                                       10         ns   From xBCLK falling edge
      xSDATA Setup                            tMDS               10                                 ns   From xBCLK rising edge
      xSDATA Hold                             tMDH               10                                 ns   From xBCLK rising edge
1
  The prefix x refers to I-, O-, IAUX-, or OAUX- for the full pin name.
TEMPERATURE RANGE
Table 4.
Parameter                                                               Min         Typ             Max    Unit
Specifications Guaranteed                                                           25                      °C
Functionality Guaranteed                                                −40                         +85     °C
Storage                                                                 −65                         +150    °C
                                                                              Rev. A | Page 7 of 60


ADAV803
ABSOLUTE MAXIMUM RATINGS
Table 5.                                                            Stresses above those listed under Absolute Maximum Ratings
Parameter              Rating                                       may cause permanent damage to the device. This is a stress
DVDD to DGND and ODVDD 0 V to 4.6 V                                 rating only; functional operation of the device at these or any
  to DGND                                                           other conditions above those indicated in the operational
AVDD to AGND           0 V to 4.6 V                                 section of this specification is not implied. Exposure to absolute
Digital Inputs         DGND − 0.3 V to DVDD + 0.3 V                 maximum rating conditions for extended periods may affect
Analog Inputs          AGND − 0.3 V to AVDD + 0.3 V                 device reliability.
AGND to DGND           −0.3 V to +0.3 V
Reference Voltage      Indefinite short circuit to
                       ground                                       ESD CAUTION
Soldering (10 sec)     300°C
                                                   Rev. A | Page 8 of 60


                                                                                                                                                                                                                                          ADAV803
PIN CONFIGURATION AND FUNCTION DESCRIPTIONS
                                                    CAPLN    CAPLP   AGND     CAPRP    CAPRN   AVDD     AGND    VREF    AGND    FILTD    AGND        AVDD       NC          VOUTL       NC         VOUTR
                                                    64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49
                                         VINR   1                                                                                                                                                              48   ADVDD
                                                         PIN 1
                                         VINL 2          INDICATOR                                                                                                                                             47   ADGND
                                        AGND 3                                                                                                                                                                 46   PLL_LF2
                                        AVDD 4                                                                                                                                                                 45   PLL_LF1
                                       DIR_LF 5                                                                                                                                                                44   PLL_GND
                                     DIR_GND 6                                                                                                                                                                 43   PLL_VDD
                                      DIR_VDD 7                                                                                                                                                                42   DGND
                                       RESET 8                                                          ADAV803                                                                                                41   SYSCLK1
                                                                                                      TOP VIEW
                                         AD0 9                                                                                                                                                                 40   SYSCLK2
                                                                                                    (Not to Scale)
                                         SDA 10                                                                                                                                                                39   SYSCLK3
                                         SCL 11                                                                                                                                                                38   XIN
                                         AD1 12                                                                                                                                                                37   XOUT
                                 ZEROL/INT 13                                                                                                                                                                  36   MCLKO
                                       ZEROR 14                                                                                                                                                                35   MCLKI
                                        DVDD 15                                                                                                                                                                34   DVDD
                                        DGND 16                                                                                                                                                                33   DGND
                                                    17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32
                                                                     ISDATA                    OSDATA
                                                                                                                                                                OAUXSDATA                          IAUXSDATA
                                                    ILRCLK                    OLRCLK                                            DITOUT
                                                             IBCLK                     OBCLK
                                                                                                        DIRIN
                                                                                                                ODVDD   ODGND
                                                                                                                                         OAUXLRCLK   OAUXBCLK               IAUXLRCLK   IAUXBCLK
                                                                                                                                                                                                                              04756-002
                                 NC = NO CONNECT
                                                                     Figure 2. ADAV803 Pin Configuration
Table 6. Pin Function Descriptions
Pin No.   Mnemonic        I/O        Description
1         VINR            I          Analog Audio Input, Right Channel.
2         VINL            I          Analog Audio Input, Left Channel.
3         AGND                       Analog Ground.
4         AVDD                       Analog Voltage Supply.
5         DIR_LF                     DIR Phase-Locked Loop (PLL) Filter Pin.
6         DIR_GND                    Supply Ground for DIR Analog Section. This pin should be connected to AGND.
7         DIR_VDD                    Supply for DIR Analog Section. This pin should be connected to AVDD.
8         RESET           I          Asynchronous Reset Input (Active Low).
9         AD0             I          I2C Address LSB.
10        SDA             I/O        Data Input/Output of I2C-Compatible Control Interface.
11        SCL             I          Clock Input of I2C Compatible Control Interface.
12        AD1             I          I2C Address MSB.
13        ZEROL/INT       O          Left Channel (Output) Zero Flag or Interrupt (Output) Flag. The function of this pin is determined by
                                     the INTRPT bit in DAC Control Register 4.
14        ZEROR           O          Right Channel (Output) Zero Flag.
15        DVDD                       Digital Voltage Supply.
16        DGND                       Digital Ground.
17        ILRCLK          I/O        Sampling Clock (LRCLK) of Playback Digital Input Port.
18        IBCLK           I/O        Serial Clock (BCLK) of Playback Digital Input Port.
19        ISDATA          I          Data Input of Playback Digital Input Port.
20        OLRCLK          I/O        Sampling Clock (LRCLK) of Record Digital Output Port.
21        OBCLK           I/O        Serial Clock (BCLK) of Record Digital Output Port.
22        OSDATA          O          Data Output of Record Digital Output Port.
23        DIRIN           I          Input to Digital Input Receiver (S/PDIF).
24        ODVDD                      Interface Digital Voltage Supply.
25        ODGND                      Interface Digital Ground.
26        DITOUT          O          S/PDIF Output from DIT.
                                                                                               Rev. A | Page 9 of 60


ADAV803
Pin No. Mnemonic  I/O Description
27      OAUXLRCLK I/O Sampling Clock (LRCLK) of Auxiliary Digital Output Port.
28      OAUXBCLK  I/O Serial Clock (BCLK) of Auxiliary Digital Output Port.
29      OAUXSDATA O   Data Output of Auxiliary Digital Output Port.
30      IAUXLRCLK I/O Sampling Clock (LRCLK) of Auxiliary Digital Input Port.
31      IAUXBCLK  I/O Serial Clock (BCLK) of Auxiliary Digital Input Port.
32      IAUXSDATA I   Data Input of Auxiliary Digital Input Port.
33      DGND          Digital Ground.
34      DVDD          Digital Supply Voltage.
35      MCLKI     I   External MCLK Input.
36      MCLKO     O   Oscillator Output.
37      XOUT      I   Crystal Input.
38      XIN       I   Crystal or External MCLK Input.
39      SYSCLK3   O   System Clock 3 (from PLL2).
40      SYSCLK2   O   System Clock 2 (from PLL2).
41      SYSCLK1   O   System Clock 1 (from PLL1).
42      DGND          Digital Ground.
43      PLL_VDD       Supply for PLL Analog Section. This pin should be connected to AVDD.
44      PLL_GND       Ground for PLL Analog Section. This pin should be connected to AGND.
45      PLL_LF1       Loop Filter for PLL1.
46      PLL_LF2       Loop Filter for PLL2.
47      ADGND         Analog Ground (Mixed Signal). This pin should be connected to AGND.
48      ADVDD         Analog Voltage Supply (Mixed Signal). This pin should be connected to AVDD.
49      VOUTR     O   Right Channel Analog Output.
50      NC            No Connect.
51      VOUTL     O   Left Channel Analog Output.
52      NC            No Connect.
53      AVDD          Analog Voltage Supply.
54      AGND          Analog Ground.
55      FILTD         Output DAC Reference Decoupling.
56      AGND          Analog Ground.
57      VREF          Voltage Reference Voltage.
58      AGND          Analog Ground.
59      AVDD          Analog Voltage Supply.
60      CAPRN         ADC Modulator Input Filter Capacitor (Right Channel, Negative).
61      CAPRP         ADC Modulator Input Filter Capacitor (Right Channel, Positive).
62      AGND          Analog Ground.
63      CAPLP         ADC Modulator Input Filter Capacitor (Left Channel, Positive).
64      CAPLN         ADC Modulator Input Filter Capacitor (Left Channel, Negative).
                                              Rev. A | Page 10 of 60


                                                                                                                                                                                          ADAV803
TYPICAL PERFORMANCE CHARACTERISTICS
                     0
                                                                                                                                  0
 MAGNITUDE (dB)                                                                                               MAGNITUDE (dB)
                   –50
                                                                                                                                –50
                  –100                                                                                                         –100
                                                                                  04756-003                                                                                                    04756-006
                  –150                                                                                                         –150
                         0            0.5          1.0            1.5           2.0                                                    0               96            192            288      384
                                        FREQUENCY (Normalized to fS)                                                                                            FREQUENCY (kHz)
                              Figure 3. ADC Composite Filter Response                                                                      Figure 6. DAC Composite Filter Response, 48 kHz
                     5
                                                                                                                                   0
                     0
                    –5
 MAGNITUDE (dB)                                                                                               MAGNITUDE (dB)
                                                                                                                                –50
                   –10
                   –15
                                                                                                                               –100
                   –20
                   –25
                                                                                                                                                                                               04756-007
                                                                                  04756-004
                   –30                                                                                                         –150
                         0             5           10              15           20                                                     0               12             24            36       48
                                              FREQUENCY (Hz)                                                                                                    FREQUENCY (kHz)
                         Figure 4. ADC High-Pass Filter Response, fS = 48 kHz                                                              Figure 7. DAC Pass-Band Filter Response, 48 kHz
                     5                                                                                                          0.06
                     0                                                                                                          0.04
                    –5
                                                                                                                                0.02
 MAGNITUDE (dB)
                                                                                                              MAGNITUDE (dB)
                   –10
                                                                                                                                  0
                   –15
                                                                                                                               –0.02
                   –20
                                                                                                                               –0.04
                   –25
                                                                                                                                                                                               04756-008
                                                                                  04756-005
                                                                                                                               –0.06
                   –30                                                                                                                 0                    8                  16            24
                         0             5           10              15           20
                                              FREQUENCY (Hz)                                                                                                    FREQUENCY (kHz)
                         Figure 5. ADC High-Pass Filter Response, fS = 96 kHz                                                                     Figure 8. DAC Filter Ripple, 48 kHz
                                                                                         Rev. A | Page 11 of 60


ADAV803
                     0                                                                                                              0
                                                                                                                                  –50
 MAGNITUDE (dB)                                                                                                 MAGNITUDE (dB)
                   –50
                                                                                                                                 –100
                  –100
                                                                                                                                 –150
                                                                                   04756-009                                                                                                       04756-012
                  –150                                                                                                           –200
                          0              192         384              576        768                                                     0           384             768             1152        1536
                                                FREQUENCY (kHz)                                                                                                 FREQUENCY (kHz)
                              Figure 9. DAC Composite Filter Response, 96 kHz                                                            Figure 12. DAC Composite Filter Response, 192 kHz
                     0
                                                                                                                                    0
                                                                                                                                   –2
 MAGNITUDE (dB)                                                                                                 MAGNITUDE (dB)
                   –50
                                                                                                                                   –4
                                                                                                                                   –6
                  –100
                                                                                                                                   –8
                                                                                   04756-010                                                                                                       04756-013
                  –150                                                                                                            –10
                          0               24          48               72        96                                                  48                    64                  80                96
                                                FREQUENCY (kHz)                                                                                                 FREQUENCY (kHz)
                              Figure 10. DAC Pass-Band Filter Response, 96 kHz                                                           Figure 13. DAC Pass-Band Filter Response, 192 kHz
                   0.10                                                                                                           0.50
                                                                                                                                  0.40
                                                                                                                                  0.30
                   0.05
                                                                                                                                  0.20
 MAGNITUDE (dB)                                                                                                 MAGNITUDE (dB)
                                                                                                                                  0.10
                     0                                                                                                              0
                                                                                                                                 –0.10
                                                                                                                                 –0.20
                  –0.05
                                                                                                                                 –0.30
                                                                                                                                                                                                   04756-014
                                                                                                                                 –0.40
                                                                                   04756-011
                  –0.10                                                                                                          –0.50
                          0               24          48               72        96                                                      0          8              16           32          64
                                                FREQUENCY (kHz)                                                                                                 FREQUENCY (kHz)
                                    Figure 11. DAC Filter Ripple, 96 kHz                                                                       Figure 14. DAC Filter Ripple, 192 kHz
                                                                                           Rev. A | Page 12 of 60


                                                                                                                                                                                               ADAV803
                    0                                                                                                                  0
                                                                     DNR = 102dB                                                                                                            THD+N = 95dB
                                                                    (A-WEIGHTED)
                  –20                                                                                                                –20
                  –40                                                                                                                –40
MAGNITUDE (dB)                                                                                                     MAGNITUDE (dB)
                  –60                                                                                                                –60
                  –80                                                                                                                –80
                 –100                                                                                                               –100
                 –120                                                                                                               –120
                 –140                                                                                                               –140
                                                                                       04756-015                                                                                                             04756-018
                 –160                                                                                                               –160
                        0    2      4    6       8   10   12   14      16     18      20                                                   0    5      10       15     20  25    30    35      40    45 48
                                               FREQUENCY (kHz)                                                                                                       FREQUENCY (kHz)
                            Figure 15. DAC Dynamic Range, fS = 48 kHz                                                                               Figure 18. DAC THD + N, fS = 96 kHz
                    0                                                                                                                  0
                                                                                                                                                                                             DNR = 102dB
                                                                    THD+N = 96dB
                                                                                                                                                                                            (A-WEIGHTED)
                  –20                                                                                                                –20
                  –40                                                                                                                –40
MAGNITUDE (dB)                                                                                                     MAGNITUDE (dB)
                  –60                                                                                                                –60
                  –80                                                                                                                –80
                 –100                                                                                                               –100
                 –120                                                                                                               –120
                 –140                                                                                                               –140
                                                                                       04756-016                                                                                                             04756-019
                 –160                                                                                                               –160
                        0    2      4    6       8   10   12   14      16     18      20                                                   0                5              10           15                  20
                                               FREQUENCY (kHz)                                                                                                       FREQUENCY (kHz)
                                 Figure 16. DAC THD + N, fS = 48 kHz                                                                           Figure 19. ADC Dynamic Range, fS = 48 kHz
                    0                                                                                                                  0
                                                                       DNR = 102dB                                                                                                          THD+N = 92dB
                                                                      (A-WEIGHTED)                                                                                                           (VIN = –3dB)
                  –20                                                                                                                –20
                  –40                                                                                                                –40
MAGNITUDE (dB)                                                                                                     MAGNITUDE (dB)
                  –60                                                                                                                –60
                  –80                                                                                                                –80
                 –100                                                                                                               –100
                 –120                                                                                                               –120
                 –140                                                                                                               –140
                                                                                       04756-017                                                                                                             04756-020
                 –160                                                                                                               –160
                        0    5      10    15     20  25    30    35      40        45 48                                                   0                5              10           15                  20
                                               FREQUENCY (kHz)                                                                                                       FREQUENCY (kHz)
                            Figure 17. DAC Dynamic Range, fS = 96 kHz                                                                               Figure 20. DAC THD + N, fS = 48 kHz
                                                                                              Rev. A | Page 13 of 60


ADAV803
                     0                                                                                                             0
                                                                    DNR = 102dB                                                                                                  THD+N = 92dB
                                                                   (A-WEIGHTED)                                                                                                   (VIN = –3dB)
                   –20                                                                                                           –20
                   –40                                                                                                           –40
 MAGNITUDE (dB)                                                                                                MAGNITUDE (dB)
                   –60                                                                                                           –60
                   –80                                                                                                           –80
                  –100                                                                                                          –100
                  –120                                                                                                          –120
                  –140                                                                                                          –140
                                                                                   04756-021                                                                                                     04756-022
                  –160                                                                                                          –160
                         0       8        16         24       32      40          48                                                   0    8        16         24       32         40       48
                                               FREQUENCY (kHz)                                                                                            FREQUENCY (kHz)
                             Figure 21. ADC Dynamic Range, fS = 96 kHz                                                                     Figure 22. ADC THD + N, fS = 96 kHz
                                                                                          Rev. A | Page 14 of 60


                                                                                                                                                                                                                                      ADAV803
FUNCTIONAL DESCRIPTION
ADC SECTION                                                                                                                                                      Programmable Gain Amplifier (PGA)
The ADAV803’s ADC section is implemented using a second-                                                                                                         The input of the record channel features a PGA that converts
order multibit (5 bits) Σ-Δ modulator. The modulator is                                                                                                          the single-ended signal to a differential signal, which is applied
sampled at either half of the ADC MCLK rate (modulator clock                                                                                                     to the analog Σ-Δ modulator of the ADC. The PGA can be
= 128 × fS) or one-quarter of the ADC MCLK rate (modulator                                                                                                       programmed to amplify a signal by up to 24 dB in 0.5 dB
clock = 64 × fS). The digital decimator consists of a Sinc^5 filter                                                                                              increments. Figure 24 shows the structure of the PGA circuit.
followed by a cascade of three half-band FIR filters. The Sinc                                                                                                                      4kΩ TO 64kΩ
decimates by a factor of 16 at 48 kHz and by a factor of 8 at                                                                                                                                     EXTERNAL
                                                                                                                                                                              4kΩ                 CAPACITOR
96 kHz. Each of the half-band filters decimates by a factor of 2.                                                                                                                                  (1nF NPO)    CAPxN
Figure 23 shows the details of the ADC section. By default, the                                                                                                       VREF                         125Ω
                                                                                                                                                                                                                 EXTERNAL
                                                                                                                                                                                                                                   TO
ADC assumes that the MCLK rate is 256 times the sample rate.                                                                                                                                                     CAPACITOR
                                                                                                                                                                                                                                MODULATOR
                                                                                                                                                                                                                  (1nF NPO)
The ADC can be clocked by a number of different clock sources                                                                                                                                      125Ω
                                                                                                                                                                              8kΩ                               CAPxP
to control the sample rate. MCLK selection for the ADC is set                                                                                                                                     EXTERNAL
                                                                                                                                                                                                                                            04756-024
                                                                                                                                                                                                  CAPACITOR
                                                                                                                                                                                          8kΩ
by Internal Clocking Control Register 1 (Address 0x76). The                                                                                                                                        (1nF NPO)
ADC provides an output word of up to 24 bits of resolution in                                                                                                                              Figure 24. PGA Block Diagram
twos complement format. The output word can be routed to the
                                                                                                                                                                 Analog Σ-Δ Modulator
output ports, the sample rate converter, or the S/PDIF digital
transmitter.                                                                                                                                                     The ADC features a second-order, multibit, Σ-Δ modulator. The
                                                                                                                                                                 input features two integrators in cascade followed by a flash
                     DIR PLL(256 × fS)   DIR PLL(512 × fS)
                                                             PLL2 INTERNAL   PLL1 INTERNAL
                                                                                                                                                                 converter. This multibit output is directed to a scrambler,
                                                                                                                                                                 followed by a DAC for loop feedback. The flash ADC output is
                                                                                             MCLKI
                                                                                                                                                                 also converted from thermometer coding to binary coding for
                                                                                                     XIN                                                         input as a 5-bit word to the decimator. Figure 25 shows the
                                                                                                       REG 0x76                                                  ADC block diagram.
                                                                                                       BITS[4:2]
                                                                                                                                                                 The ADC also features independent digital volume control for
                                         ADC MCLK                                               REG 0x6F
                                                                                                                                                                 the left and right channels. The volume control consists of
                                          DIVIDER                                               BITS[1:0]                                                        256 linear steps, with each step reducing the digital output
                                                                                                                                                                 codes by 0.39%. Each channel also has a peak detector that
                                                       ADC                                                                                                       records the peak level of the input signal. The peak detector
                                                       MCLK
                                                                                                                                                                 register is cleared by reading it.
                                                             ADC
                                                                                                                   04756-023
               Figure 23. Clock Path Control on the ADC
                                                                                                                                                                                                       PEAK
                                                                                                                                                                                    HPF
                                                                                                                                                                                                      DETECT
                                                                                                      MULTIBIT
                                                                                                        Σ-Δ                                                     VOLUME
                                                                                                                                        DECIMATOR
                                                                                                     MODULATOR                                                  CONTROL
                                                                      ÷2                                                                384kHz
              ADC MCLK                                                                                                                              HALF-BAND 192kHz             SINC      96kHz          HALF-BAND   48kHz
                                                                                                                               SINC^5
                                                                      ÷4                          MODULATOR                             768kHz        FILTER  384kHz         COMPENSATION 192kHz            FILTER    96kHz
                                                                                                      CLOCK
                                                                                                 (6.144MHz MAX)
                    AMC
                                                                                                                                                                                                                              04756-025
               (REG 0x6E
                   BIT 7)
                                                                                                                                          Figure 25. ADC Block Diagram
                                                                                                                                                 Rev. A | Page 15 of 60


ADAV803
Automatic Level Control (ALC)                                                   No Recovery Mode
The ADC record channel features a programmable automatic                        By default, there is no gain recovery. Once the gain has been
level control block. This block monitors the level of the ADC                   reduced, it is not recovered until the ALC is reset, either by
output signal and automatically reduces the gain, if the signal at              toggling the ALCEN bit in ALC Control Register 1 or by
the input pins causes the ADC output to exceed a preset limit.                  writing any value to ALC Control Register 3. The latter option
This function can be useful to maximize the signal dynamic                      is more efficient because it requires only one write operation to
range when the input level is not well defined. The PGA can be                  reset the ALC function. No recovery mode prevents volume
used to amplify the unknown signal, and the ALC reduces the                     modulation of the signal caused by adjusting the gain, which
gain until the ADC output is within the preset limits. This                     can create undesirable artifacts in the signal. The gain can be
results in maximum front end gain.                                              reduced but not recovered. Therefore, care should be taken that
Because the ALC block monitors the output of the ADC, the                       spurious signals do not interfere with the input signal because
volume control function should not be used. The ADC volume                      these might trigger a gain reduction unnecessarily.
control scales the results from the ADC, and any distortion                     Normal Recovery Mode
caused by the input signal exceeding the input range of the                     Normal recovery mode allows for the PGA gain to be recovered,
ADC is still present at the output of the ADC, but scaled by a                  provided that the input signal meets certain criteria. First, the
value determined by the volume control register.                                ALC must not be in attack mode, that is, the PGA gain has been
The ALC block has two functions, attack mode and recovery                       reduced sufficiently such that the input signal is below the level
mode. Recovery mode consists of three settings: no recovery,                    set by the attack threshold bits. Second, the output result from
normal recovery, and limited recovery. These modes are                          the ADC must be below the level set by the recovery threshold
discussed in the following sections. Figure 26 is a flow diagram                bits in the ALC control register. If both of these criteria are met,
of the ALC block. When the ALC has been enabled, any                            the gain is recovered by one step (0.5 dB). The gain is
changes made to the PGA or ALC settings are ignored. To                         incrementally restored to its original value, assuming that the
change the functionality of the ALC, it must first be disabled.                 ADC output level is below the recovery threshold at intervals
The settings can then be changed and the ALC re-enabled.                        determined by the recovery time bits.
Attack Mode                                                                     If the ADC output level exceeds the recovery threshold while
When the absolute value of the ADC output exceeds the level                     the PGA gain is being restored, the PGA gain value is held and
set by the attack threshold bits in ALC Control Register 2, attack              does not continue restoration until the ADC output level is
mode is initiated. The PGA gain for both channels is reduced by                 again below the recovery threshold. Once the PGA gain is
one step (0.5 dB). The ALC then waits for a time determined by                  restored to its original value, it is not changed again unless the
the attack timer bits before sampling the ADC output value                      ADC output value exceeds the attack threshold and the ALC
again. If the ADC output is still above the threshold, the PGA                  then enters attack mode. Care should be taken when using this
gain is reduced by a further step. This procedure continues until               mode to choose values for the attack and recovery thresholds
the ADC output is below the limit set by the attack threshold                   that prevent excessive volume modulation caused by continuous
bits. The initial gains of the PGAs are defined by the ADC left                 gain adjustments.
PGA gain register and the ADC right PGA gain register, and                      Limited Recovery Mode
they can have different values. The ALC subtracts a common                      Limited recovery mode offers a compromise between no recov-
gain offset to these values. The ALC preserves any gain                         ery and normal recovery modes. If the output level of the ADC
difference in dB as defined by these registers. At no time do the               exceeds the attack threshold, attack mode is initiated. When
PGA gains exceed their initial values. The initial gain setting,                attack mode has reduced the PGA gain to suitable levels, the
therefore, also serves as a maximum value.                                      ALC attempts to recover the gain to its original level. If the
The limit detection mode bit in ALC Control Register 1                          ADC output level exceeds the level set by the recovery threshold
determines how the ALC responds to an ADC output that                           bits, a counter is incremented (GAINCNTR). This counter is
exceeds the set limits. If this bit is a 1, both channels must                  incremented at intervals equal to the recovery time selection, if
exceed the threshold before the gain is reduced. This mode can                  the ADC has any excursion above the recovery threshold. If the
be used to prevent unnecessary gain reduction due to spurious                   counter reaches its maximum value, determined by the
noise on a single channel. If the limit detection mode bit is a 0,              GAINCNTR bits in ALC Control Register 1, the PGA gain is
the gain is reduced when either channel exceeds the threshold.                  deemed suitable and no further gain recovery is attempted.
                                                                                Whenever the ADC output level exceeds the attack threshold,
                                                                                attack mode is reinitiated and the counter is reset.
                                                               Rev. A | Page 16 of 60


                                                                                                                                                     ADAV803
Selecting a Sample Rate                                                                  selecting the lower modulator rate reduces the amount of digital
The output sample rate of the ADC is always ADC MCLK/256,                                noise, improving THD + N, but also reduces the oversampling
as shown in Figure 23. By default, the ADC modulator runs at                             ratio, therefore reducing the dynamic range by a corresponding
ADC MCLK/2. When the ADC MCLK exceeds 12.288 MHz,                                        amount.
the ADC modulator should be set to run at ADC MCLK/4.                                    For best performance of the ADC, avoid using similar frequency
This is achieved by setting the AMC (ADC Modulator Clock)                                clocks from separate sources in the ADAV803. For example,
bit in the ADC Control Register 1. To compensate for the                                 running the ADC from a 12.288 MHz clock connected to
reduced modulator clock speed, a different set of filters is used                        MCLKI and using the PLL to generate a separate 12.288 MHz
in the decimator section, ensuring that the sample rate remains                          clock for the DAC can reduce the performance of the ADC.
the same.                                                                                This is due to the interaction of the clocks, which generate beat
The AMC bit can also be used to boost the THD + N perform-                               frequencies that can affect the charge on the switch capacitors of
ance of the ADC at the expense of dynamic range. The                                     the analog inputs.
improvement is typically 0.5 dB to 1.0 dB and works because
                                                                              ATTACK MODE
                                                                                     WAIT FOR SAMPLE
                                                               NO
                                                        IS A RECOVERY       NO          IS SAMPLE
                                                       MODE ENABLED?               GREATER THAN ATTACK
                                                                                       THRESHOLD?
                                                               YES                                YES
                                                                                 DECREASE GAIN BY 0.5dB
                                                                                  AND WAIT ATTACK TIME
                                      LIMITED RECOVERY                                                       NORMAL RECOVERY
                                       WAIT FOR SAMPLE                                              WAIT FOR SAMPLE
                                          IS SAMPLE                                                       IS SAMPLE
                                        ABOVE ATTACK                                                    ABOVE ATTACK
                                         THRESHOLD?                                                      THRESHOLD?
                                            NO                                                             NO
                                        HAS RECOVERY           NO                                       HAS RECOVERY       NO
                                          TIME BEEN                                                       TIME BEEN
                                          REACHED?                                                        REACHED?
                                          YES                                                             YES
                                          ARE ALL                                                          ARE ALL
                                       SAMPLES BELOW           NO                                       SAMPLES BELOW      NO
                                         RECOVERY                                                         RECOVERY
                                        THRESHOLD?                                                       THRESHOLD?
                              YES
                                                                                                          YES
                        INCREASE GAIN BY 0.5dB
                                                                                                  INCREASE GAIN BY 0.5dB
                                                             INCREMENT
                                                                                                    WAIT RECOVERY TIME
                                                              GAINCNTR
                           HAS GAIN BEEN
                          FULLY RESTORED?
                   NO
                                                                                                     HAS GAIN BEEN
                                                                                                    FULLY RESTORED?
                              YES                                                           NO                             YES
                                                            IS GAINCNTR
                                                            AT MAXIMUM?
                                                 YES                          NO
                                                                                                                                         04756-026
                                                                     Figure 26. ALC Flow Diagram
                                                                         Rev. A | Page 17 of 60


ADAV803
DAC SECTION                                                                    Selecting a Sample Rate
The ADAV803 has two DAC channels arranged as a stereo pair                     Correct operation of the DAC is dependent upon the data rate
with single-ended analog outputs. Each channel has its own                     provided to the DAC, the master clock applied to the DAC, and
independently programmable attenuator, adjustable in 128 steps                 the selected interpolation rate. By default, the DAC assumes
of 0.375 dB per step. The DAC can receive data from the                        that the MCLK rate is 256 times the sample rate, which requires
playback or auxiliary input ports, the SRC, the ADC, or the                    an 8× oversampling rate. This combination is suitable for
DIR. Each analog output pin sits at a dc level of VREF, and                    sample rates of up to 48 kHz.
swings 1.0 V rms for a 0 dB digital input signal. A single op amp              For a 96 kHz data rate that has a 24.576 MHz MCLK (256 × fS)
third-order external low-pass filter is recommended to remove                  associated with it, the DAC MCLK divider should be set to
high frequency noise present on the output pins. Note that the                 divide the MCLK by 2. This prevents the DAC engine from
use of op amps with low slew rate or low bandwidth can cause                   running too fast. To compensate for the reduced MCLK rate,
high frequency noise and tones to fold down into the audio                     the interpolator should be selected to operate in 4 × (DAC
band. Care should be taken in selecting these components.                      MCLK = 128 × fS). Similar combinations can be selected for
The FILTD and VREF pins should be bypassed by external                         different sample rates.
capacitors to AGND. The FILTD pin is used to reduce the noise
                                                                                              DIR PLL(256 × fS)   DIR PLL(512 × fS)
                                                                                                                                      PLL2 INTERNAL   PLL1 INTERNAL
of the internal DAC bias circuitry, thereby reducing the DAC
output noise. The voltage at the VREF pin can be used to bias
                                                                                                                                                                      MCLKI
external op amps used to filter the output signals. For
                                                                                                                                                                              XIN
applications in which the VREF is required to drive external
                                                                                                                                                                                REG 0x76
op amps, which might draw more than 50 μA or have dynamic                                                                                                                       BITS[7:5]
load changes, extra buffering should be used to preserve the
quality of the ADAV803 reference.                                                                                         MCLK                                           REG 0x65
                                                                                                                         DIVIDER                                         BITS[3:2]
The digital input data source for the DAC can be selected from
a number of available sources by programming the appropriate
                                                                                                                                 DAC
bits in the datapath control register. Figure 27 shows how the                                                                   MCLK
                                                                                                                                                                                                        AUXILIARY IN
digital data source and the MCLK source for the DAC are                                                                               DAC
                                                                                                                                                                    DAC                                 PLAYBACK
                                                                                                                                                                  INPUT                                 DIR
selected. Each DAC has an independent volume register giving
256 steps of control, with each step giving approximately                                                                                                                                               ADC
                                                                                                                                                                                                                       04756-027
                                                                                                                                                                                    REG 0x63
0.375 dB of attenuation. Note that the DACs are muted by                                                                                                                            BITS[5:3]
default to prevent unwanted pops, clicks, and other noises from                              Figure 27. Clock and Datapath Control on the DAC
appearing on the outputs while the ADAV803 is being
configured. Each DAC also has a peak-level register that records
the peak value of the digital audio data. Reading the register
clears the peak.
                                                                   TO CONTROL              PEAK
                                                                    REGISTERS            DETECTOR
                                   DAC
                                               MULTI-BIT                                                                                                                FROM DAC
                         ANALOG                                                         VOLUME/MUTE
                                                 Σ-Δ            INTERPOLATOR                                                                                            DATA PATH
                         OUTPUT                                                           CONTROL
                                              MODULATOR                                                                                                                 MULTIPLEXER
                                   DAC
                                                                                                                                                                                            04756-028
                                                             TO ZERO FLAG PINS          ZERO DETECT
                                                           Figure 28. DAC Block Diagram
                                                               Rev. A | Page 18 of 60


                                                                                                                                                                   ADAV803
SAMPLE RATE CONVERTER (SRC) FUNCTIONAL                                                         IN
                                                                                                                 INTERPOLATE     LOW-PASS       ZERO-ORDER
                                                                                                                                                                             OUT
                                                                                                                     BY N         FILTER           HOLD
OVERVIEW
                                                                                                       fS_IN                                                        fS_OUT
During asynchronous sample rate conversion, data can be
converted at the same sample rate or at different sample rates.
The simplest approach to an asynchronous sample rate
conversion is to use a zero-order hold between the two                                                           TIME DOMAIN OF fS_IN SAMPLES
samplers, as shown in Figure 29. In an asynchronous system, T2
is never equal to T1, nor is the ratio between T2 and T1
rational. As a result, samples at fS_OUT are repeated or dropped,
                                                                                                                 TIME DOMAIN OUTPUT OF THE LOW-PASS FILTER
producing an error in the resampling process.
The frequency domain shows the wide side lobes that result
from this error when the sampling of fS_OUT is convolved with
the attenuated images from the sin(x)/x nature of the zero-order                                                 TIME DOMAIN OF fS_OUT RESAMPLING
hold. The images at fS_IN (dc signal images) of the zero-order
hold are infinitely attenuated. Because the ratio of T2 to T1 is an
                                                                                                                                                                               04756-030
irrational number, the error resulting from the resampling at
                                                                                                                 TIME DOMAIN OF THE ZERO-ORDER HOLD OUTPUT
fS_OUT can never be eliminated. The error can be significantly
reduced, however, through interpolation of the input data at                                                            Figure 30. SRC Time Domain
fS_IN. Therefore, the sample rate converter in the ADAV803 is                                In the frequency domain shown in Figure 31, the interpolation
conceptually interpolated by a factor of 220.                                                expands the frequency axis of the zero-order hold. The images
                              ZERO-ORDER
                                                                                             from the interpolation can be sufficiently attenuated by a good
    IN                                                          OUT
                                 HOLD                                                        low-pass filter. The images from the zero-order hold are now
         fS_IN =1/T1                            fS_OUT = 1/T2                                pushed by a factor of 220 closer to the infinite attenuation point
                             ORIGINAL SIGNAL
                                                                                             of the zero-order hold, which is fS_IN × 220. The images at the
                                                                                             zero-order hold are the determining factor for the fidelity of the
                                                                                             output at fS_OUT.
                             SAMPLED AT fS_IN
                                                                                                                 INTERPOLATE     LOW-PASS       ZERO-ORDER
                                                                                               IN                                                                            OUT
                                                                                                                     BY N         FILTER           HOLD
                       SIN(X)/X OF ZERO-ORDER HOLD
                                                                                                       fS_IN                                                        fS_OUT
              SPECTRUM OF ZERO-ORDER HOLD OUTPUT
                                                                                                          FREQUENCY DOMAIN OF SAMPLES AT fS_IN
                       SPECTRUM OF fS_OUT SAMPLING                                                                                                         fS_IN
                              fS_OUT                            2 × fS_OUT
                                                                             04756-029
  FREQUENCY RESPONSE OF fS_OUT CONVOLVED                                                                  FREQUENCY DOMAIN OF THE INTERPOLATION
  WITH ZERO-ORDER HOLD SPECTRUM                                                                                                                        220 × fS_IN
   Figure 29. Zero-Order Hold Used by fS_ OUT to Resample Data from fS_IN
Conceptual High Interpolation Model
                                                                                                               SIN(X)/X OF ZERO-ORDER HOLD
Interpolation of the input data by a factor of 220 involves placing
                                                                                                          FREQUENCY DOMAIN OF fS_OUT RESAMPLING
(220 − 1) samples between each fS_IN sample. Figure 30 shows                                                                                          220 × fS_IN
both the time domain and the frequency domain of interpolation
by a factor of 220. Conceptually, interpolation by 220 involves the
steps of zero-stuffing (220 − 1) number of samples between each
fS_IN sample and convolving this interpolated signal with a                                               FREQUENCY DOMAIN                   220 × fS_IN                       04756-031
                                                                                                          AFTER RESAMPLING
digital low-pass filter to suppress the images. In the time
                                                                                                      Figure 31. Frequency Domain of the Interpolation and Resampling
domain, it can be seen that fS_OUT selects the closest fS_IN × 220
sample from the zero-order hold, as opposed to the nearest fS_IN
sample in the case of no interpolation. This significantly
reduces the resampling error.
                                                                             Rev. A | Page 19 of 60


ADAV803
The worst-case images can be computed from the zero-order                     This technique is supported by the Fourier transform property
hold frequency response:                                                      that, if f(t) is F(ω), then f(k × t) is F(ω/k). Thus, the range of
                                                                              decimation is limited by the size of the RAM.
     Maximum Image = sin(π × F/fS_INTERP)/(π × F/fS_INTERP)
where:
                                                                              SRC Architecture
F is the frequency of the worst-case image that would be                      The architecture of the sample rate converter is shown in
220 × fS_IN ± fS_IN/2.                                                        Figure 32. The sample rate converter’s FIFO block adjusts the
fS_INTERP = fS_IN × 220.                                                      left and right input samples and stores them for the FIR filter’s
                                                                              convolution cycle. The fS_IN counter provides the write address
The following worst-case images would appear for fS_IN equal to
                                                                              to the FIFO block and the ramp input to the digital servo loop.
192 kHz:
                                                                              The ROM stores the coefficients for the FIR filter convolution
     Image at fS_INTERP − 96 kHz = −125.1 dB                                  and performs a high order interpolation between the stored
     Image at fS_INTERP + 96 kHz = −125.1 dB                                  coefficients. The sample rate ratio block measures the sample
                                                                              rate for dynamically altering the ROM coefficients and scaling
Hardware Model
                                                                              of the FIR filter length as well as the input data. The digital
The output rate of the low-pass filter in Figure 30 is the                    servo loop automatically tracks the fS_IN and fS_OUT sample rates
interpolation rate:                                                           and provides the RAM and ROM start addresses for the start of
     220 × 192,000 kHz = 201.3 GHz                                            the FIR filter convolution.
Sampling at a rate of 201.3 GHz is clearly impractical, in                             RIGHT DATA IN                             ROM A
                                                                                        LEFT DATA IN            FIFO
addition to the number of taps required to calculate each                                                                        ROM B         HIGH
                                                                                                                                              ORDER
interpolated sample. However, because interpolation by 220                                                                       ROM C        INTERP
involves zero-stuffing 220 − 1 samples between each fS_IN sample,
                                                                                                                                 ROM D
most of the multiplies in the low-pass FIR filter are by zero. A
                                                                                          fS_IN               DIGITAL
further reduction can be realized because only one interpolated                         COUNTER             SERVO LOOP
sample is taken at the output at the fS_OUT rate, so only one                                                                    FIR FILTER
convolution needs to be performed per fS_OUT period instead of                                          SAMPLE RATE RATIO
                                                                                                                                         L/R DATA OUT
220 convolutions. A 64-tap FIR filter for each fS_OUT sample is
sufficient to suppress the images caused by the interpolation.                                  fS_IN         SAMPLE
                                                                                                                                                        04756-032
                                                                                              fS_OUT         RATE RATIO
One difficulty with the preceding approach is that the correct                                                              EXTERNAL
                                                                                                                              RATIO
interpolated sample must be selected upon the arrival of fS_OUT.
                                                                                             Figure 32. Architecture of the Sample Rate Converter
Because there are 220 possible convolutions per fS_OUT period, the
arrival of the fS_OUT clock must be measured with an accuracy of              The FIFO receives the left and right input data and adjusts the
1/201.3 GHz = 4.96 ps. Measuring the fS_OUT period with a clock               amplitude of the data for both the soft muting of the sample rate
of 201.3 GHz frequency is clearly impossible; instead, several                converter and the scaling of the input data by the sample rate
coarse measurements of the fS_OUT clock period are made and                   ratio before storing the samples in the RAM. The input data is
averaged over time.                                                           scaled by the sample rate ratio because, as the FIR filter length
                                                                              of the convolution increases, so does the amplitude of the
Another difficulty with the preceding approach is the number
                                                                              convolution output. To keep the output of the FIR filter from
of coefficients required. Because there are 220 possible convolu-
                                                                              saturating, the input data is scaled down by multiplying it by
tions with a 64-tap FIR filter, there must be 220 polyphase
                                                                              (fS_OUT/fS_IN) when fS_OUT < fS_IN. The FIFO also scales the input
coefficients for each tap, which requires a total of 226 coeffi-
                                                                              data for muting and unmuting of the SRC.
cients. To reduce the number of coefficients in ROM, the SRC
stores a small subset of coefficients and performs a high order               The RAM in the FIFO is 512 words deep for both left and right
interpolation between the stored coefficients.                                channels. An offset to the write address provided by the fS_IN
                                                                              counter is added to prevent the RAM read pointer from
The preceding approach works when fS_OUT > fS_IN. However,
                                                                              overlapping the write address. The minimum offset on the SRC
when the output sample rate, fS_OUT, is less than the input sample
                                                                              is 16 samples. However, the group delay and mute-in register
rate, fS_IN, the ROM starting address, input data, and length of
                                                                              can be used to increase this offset.
the convolution must be scaled. As the input sample rate rises
over the output sample rate, the antialiasing filter’s cutoff                 The number of input samples added to the write pointer of the
frequency must be lowered because the Nyquist frequency of                    FIFO on the SRC is 16 plus Bit 6 to Bit 0 of the group delay
the output samples is less than the Nyquist frequency of the                  register. This feature is useful in varispeed applications to
input samples. To move the cutoff frequency of the antialiasing               prevent the read pointer to the FIFO from running ahead of the
filter, the coefficients are dynamically altered and the length of            write pointer. When set, Bit 7 of the group delay and mute-in
the convolution is increased by a factor of (fS_IN/fS_OUT).                   register soft-mutes the sample rate. Increasing the offset of the
                                                              Rev. A | Page 20 of 60


                                                                                                                                                                                                                                          ADAV803
write address pointer is useful for applications in which small                                                                                           output of the SRC can be muted by asserting Bit 7 of the Group
changes in the sample rate ratio between fS_IN and fS_OUT are                                                                                             Delay and Mute register until the SRC has changed to slow
expected. The maximum decimation rate can be calculated                                                                                                   mode. The MUTE_IND bit can be set to generate an interrupt
from the RAM word depth and the group delay as                                                                                                            when the SRC changes to slow mode, indicating that the data is
     (512 − 16)/64 taps = 7.75                                                                                                                            being sample rate converted accurately.
for short group delay and                                                                                                                                 The frequency responses of the digital servo loop for fast mode
                                                                                                                                                          and slow mode are shown in Figure 34. The FIR filter is a 64-tap
     (512 − 64)/64 taps = 7                                                                                                                               filter when fS_OUT ≥ fS_IN and is (fS_IN/fS_OUT) × 64 taps when fS_IN >
for long group delay.                                                                                                                                     fS_OUT. The FIR filter performs its convolution by loading in the
The digital servo loop is essentially a ramp filter that provides                                                                                         starting address of the RAM address pointer and the ROM
the initial pointer to the address in RAM and ROM for the start                                                                                           address pointer from the digital servo loop at the start of the
of the FIR convolution. The RAM pointer is the integer output                                                                                             fS_OUT period. The FIR filter then steps through the RAM by
of the ramp filter, and the ROM is the fractional part. The                                                                                               decrementing its address by 1 for each tap, and the ROM
digital servo loop must provide excellent rejection of jitter on                                                                                          pointer increments its address by the (fS_OUT/fS_IN) × 220 ratio for
the fS_IN and fS_OUT clocks, as well as measure the arrival of the                                                                                        fS_IN > fS_OUT or 220 for fS_OUT ≥ fS_IN. Once the ROM address rolls
fS_OUT clock within 4.97 ps. The digital servo loop also divides                                                                                          over, the convolution is completed.
the fractional part of the ramp output by the ratio of fS_IN/fS_OUT                                                                                                              0
to dynamically alter the ROM coefficients when fS_IN > fS_OUT.                                                                                                                 –20                                               FAST MODE
                                                                                                                                                                               –40
              PLLINT1   PLLINT2                                              PLLINT1   PLLINT2
                                                                                                                                                                                                       SLOW MODE
                                                           MCLKI                                       MCLKI
                                                                                                                                                                               –60
                                       XIN                                                       XIN
                                                                                                                                                             MAGNITUDE (dB)
                                                                                                                                                                               –80
                                                                                                                                                                              –100
                                                                                                                                                                              –120
         REG 0x76                                                                                  REG 0x77
          BIT[1:0]                                                                                 BIT[4:3]                                                                   –140
                             DIR PLL(512 × fS)   DIR PLL(256 × fS)
                                                                                                                                                                              –160
                                                                                                                                                                              –180
                                                                     ICLK2     ICLK1
                                                                                                                                                                              –200
                                                                                                                                                                                                                                                        04756-034
                                                                                                                                                                              –220
                                                                                                                                                                                 0.01        0.1      1      10    100          1k      10k      100k
                                                                                       REG 0x00                                                                                                            FREQUENCY (Hz)
                                                                                       BITS[1:0]
                                                                                                                                                                                     Figure 34. Frequency Response of the Digital Servo Loop;
                                                                                                                                                                                     fS_IN is the X-Axis, fS_OUT = 192 kHz, Master Clock is 30 MHz
                                            SRC                                                                AUXILIARY IN
                                            MCLK                                                                                                          The convolution is performed for both the left and right
                                                                           SRC                                 PLAYBACK
                                                 SRC
                                                                         INPUT
                                                                                                                                                          channels, and the multiply accumulate circuit used for the
                                                                                                               DIR
                                      SRC                                                                                                                 convolution is shared between the channels. The fS_IN/fS_OUT
                                                                                                               ADC
                                     OUTPUT                                                                                                               sample rate ratio circuit is used to dynamically alter the
                                                                                                                              04756-033
                                                                                                   REG 0x62
                                                                                                   BITS[7:6]                                              coefficients in the ROM when fS_IN > fS_OUT. The ratio is
            Figure 33. Clock and Datapath Control on the SRC                                                                                              calculated by comparing the output of an fS_OUT counter to the
                                                                                                                                                          output of an fS_IN counter. If fS_OUT > fS_IN, the ratio is held at one.
The digital servo loop is implemented with a multirate filter. To
                                                                                                                                                          If fS_IN > fS_OUT, the sample rate ratio is updated, if it is different
settle the digital servo loop filter more quickly upon startup or a
                                                                                                                                                          by more than two fS_OUT periods from the previous fS_OUT to fS_IN
change in the sample rate, a fast mode has been added to the
                                                                                                                                                          comparison. This is done to provide some hysteresis to prevent
filter. When the digital servo loop starts up or the sample rate is
                                                                                                                                                          the filter length from oscillating and causing distortion.
changed, the digital servo loop enters fast mode to adjust and
settle on the new sample rate. Upon sensing that the digital                                                                                              Figure 33 shows the detail of the SRC section. The SRC master
servo loop is settling down to a reasonable value, the digital                                                                                            clock is expected to be equal to 256 times the output sample
servo loop returns to normal (or slow) mode.                                                                                                              rate. This master clock can be provided by four different clock
                                                                                                                                                          sources. The selection is set by the SRC and Clock Control
During fast mode, the MUTE_IND bit in the s Sample Rate
                                                                                                                                                          register (Address 0x00), and the selected clock source can be
Converter Error register is asserted to let the user know that
                                                                                                                                                          divided using the same register.
clicks or pops might be present in the digital audio data. The
                                                                                                                                          Rev. A | Page 21 of 60


ADAV803
PLL SECTION                                                                                        Table 7. PLL Frequency Selection Options
The ADAV803 features a dual PLL configuration to generate                                                   Sample Rate, fS                        MCLK Selection
independent system clocks for asynchronous operation.                                              PLL      (kHz)                          Normal fS        Double fS
Figure 37 shows the block diagram of the PLL section. The PLL                                      1        32/44.1/48                     256/384 × fS     512/768 × fS
generates the internal and system clocks from a 27 MHz clock.                                               64/88.2/96                                      256/384 × fS
This clock is generated either by a crystal connected between                                      2A       32/44.1/48                     256/384 × fS     512/768 × fS
XIN and XOUT, as shown in Figure 35, or from an external                                                    64/88.2/96                                      256/384 × fS
clock source connected directly to XIN. A 54 MHz clock can                                         2B       Same as fS selected            256/512 × fS
also be used, if the internal clock divider is used.                                                        for PLL 2A
                       C         XTAL          C
                                                                                                   The PLLs require some external components to operate
                                                                                                   correctly. These components, shown in Figure 36, form a loop
                                                                                                   filter that integrates the current pulses from a charge pump and
                           XIN
                                        XOUT
                                                                                                   produces a voltage that is used to tune the VCO. Good quality
                                                        04756-035
                                                                                                   capacitors, such as PPS film, are recommended. Figure 37
                                                                                                   shows a block diagram of the PLL section, including the master
                   Figure 35. Crystal Connection
                                                                                                   clock selection. Figure 38 shows how the clock frequencies at
Both PLLs (PLL1 and PLL2) can be programmed independently                                          the clock output pins, SYSCLK1 to SYSCLK3, and the internal
and can accommodate a range of sampling rates (32 kHz                                              PLL clock values, PLL1 and PLL2, are selected.
/44.1 kHz/48 kHz) with selectable system clock oversampling                                        The clock nodes, PLL1 and PLL2, can be used as master clocks
rates of 256 and 384. Higher oversampling rates can also be                                        for the other blocks in the ADAV803, such as the DAC or ADC.
selected by enabling the doubling of the sampling rate to give                                     The PLL has separate supply and ground pins, which should be
512 or 768 × fS ratios. Note that this option also allows                                          as clean as possible to prevent electrical noise from being
oversampling ratios of 256 or 384 at double sample rates of                                        converted into clock jitter by coupling onto the loop filter pins.
64 kHz /88.2 kHz/96 kHz.                                                                                                 AVDD
The PLL outputs can be routed internally to act as clock sources
for the other component blocks such as the ADC and DAC. The
                                                                                                                                   732Ω        PLL BLOCK
outputs of the PLLs are also available on the three SYSCLK pins.
                                                                                                                      10nF         1.2µF
Figure 38 shows how the PLLs can be configured to provide the
                                                                                                                                           PLL_LFx                04756-036
sampling clocks.
                                                                                                                                Figure 36. PLL Loop Filter
                                                                                                      PLL_LF1
                                                                                 REG 0x78
                            XIN                                                              PHASE
                                                                                   BIT 6                                      OUTPUT
                                                                                            DETECTOR            VCO                        SYSCLK1
                                                                                            AND LOOP                         SCALER N1
                                                                       ÷2                    FILTER                               PLL1
                           XOUT                                     REG 0x74
                                                                                                             ÷N
                                               REG 0x74               BIT 4
                       MCLKO                     BIT 5
                                                                                             PHASE
                                                   ÷2                                       DETECTOR                          OUTPUT
                                                                                                                VCO                        SYSCLK2
                        MCLKI                                                               AND LOOP                         SCALER N2
                                                                                 REG 0x78
                                                                                             FILTER                               PLL2
                                                                                   BIT 7
                                                                                                                              OUTPUT
                                                                                                             ÷N                            SYSCLK3
                                                                                                                             SCALER N3
                                                                                                                                                      04756-037
                                                                                                      PLL_LF2
                                                                            Figure 37. PLL Section Block Diagram
                                                                                   Rev. A | Page 22 of 60


                                                                                                                                                                               ADAV803
                                                     PLL1 MCLK
                                                     PLL2 MCLK
                                                                                                                     PLL1
                                                       REG 0x75                REG 0x75
                                          48kHz        BITS[3:2]                 BIT 0
                                          32kHz
                                                                                  ×2            FS1
                                        44.1kHz                                                                                  SYSCLK1
                                                                                                REG 0x77
                                                       REG 0x75
                                                                                                  BIT 0
                                                       BIT 1
                                            256                                                       ÷2
                                            384                                                                    PLLINT1
                                                                                                                     PLL2
                                                       REG 0x75                REG 0x75
                                                       BIT 5                     BIT 4
                                            256
                                            384                                   ×2            FS2
                                                                                                                                 SYSCLK2
                                                                                                REG 0x77
                                                       REG 0x75
                                                                                                BITS[2:1]
                                          48kHz        BITS[7:6]
                                          32kHz                                                       ÷2
                                        44.1kHz
                                                       REG 0x74                                                    PLLINT2
                                                                                                      ÷2
                                                       BIT 0                              FS3
                                            256
                                            512
                                                                                                                                             04756-038
                                                                                                                                 SYSCLK3
                                                                     Figure 38. PLL Clocking Scheme
                                                                                                        CHANNEL STATUS
S/PDIF TRANSMITTER AND RECEIVER                                                                           AND USER BITS
                                                                                                                   ADC
The ADAV803 contains an integrated S/PDIF transmitter and
                                                                                                                     DIR
receiver. The transmitter consists of a single output pin,                                                                                 DIT
                                                                                                                                                           DIT                             DITOUT
                                                                                                              PLAYBACK                     INPUT
DITOUT, on which the biphase encoded data appears. The                                                      AUXILIARY IN
S/PDIF transmitter source can be selected from the different                                                        SRC
blocks making up the ADAV803. Additionally, the clock source
                                                                                                                                                                                                    04756-040
                                                                                                                           REG 0x63
for the S/PDIF transmitter can be selected from the various                                                                BITS[2:0]
clock sources available in the ADAV803.                                                                       Figure 40. Digital Output Transmitter Block Diagram
The receiver uses two pins, DIRIN and DIR_LF. DIRIN accepts
the S/PDIF input data stream. The DIRIN pin can be configured
to accept a digital input level, as defined in the Specifications
section, or an input signal with a peak-to-peak level of 200 mV                                                            DIRIN
                                                                                                                                                         AUDIO
                                                                                                                                                         DATA
minimum, as defined by the IEC 60958-3 specification. DIR_LF
                                                                                                                                                         RECOVERED
is a loop filter pin, required by the internal PLL, which is used                                                          DIR                           CLOCK
                                                                                                                                                                                       04756-041
to recover the clock from the S/PDIF data stream.                                                                                                        CHANNEL STATUS/
                                                                                                                                                         USER BITS
The components shown in Figure 42 form a loop filter, which                                                     Figure 41. Digital Input Receiver Block Diagram
integrates the current pulses from a charge pump and produces
a voltage that is used to tune the VCO of the clock recovery
                                                                                                                     AVDD
PLL. The recovered audio data and audio clock can be routed to
the different blocks of the ADAV803, as required. Figure 39
shows a conceptual diagram of the DIRIN block.                                                                                     3.3kΩ
                                                                                                                                                         DIR BLOCK
                                                                                                                                   100nF
                            REG 0x7A                                                                             6.8nF
                                                                                                                                                                           04756-042
                            BIT 4
                                                                                                                                            DIR_LF
               C*   DIRIN
       SPDIF                                        SPDIF                                                           Figure 42. DIR Loop Filter Components
                                                  RECEIVER
                       DC        COMPARATOR
                      LEVEL
                                                                   04756-039
                    *EXTERNAL CAPACITOR IS ONLY REQUIRED
                     FOR VARIABLE LEVEL SPDIF INPUTS.
                            Figure 39. DIRIN Block
                                                                               Rev. A | Page 23 of 60


ADAV803
Serial Digital Audio Transmission Standards                                                         Ordinarily, the biphase-mark encoding method results in a
The ADAV803 can receive and transmit S/PDIF, AES/EBU, and                                           polarity transition between bit boundaries.
IEC-958 serial streams. S/PDIF is a consumer audio standard,                                                                       1       1   1   0   0   0   1   0
and AES/EBU is a professional audio standard. IEC-958 has
both consumer and professional definitions. This data sheet is                                                   PREAMBLE X
not intended to fully define or to provide a tutorial for these
                                                                                                                                   1       1   1   0   0   1   0   0
standards. Contact the international standards-setting bodies
for the full specifications.
                                                                                                                 PREAMBLE Y
All these digital audio communication schemes encode audio
data and audio control information using the biphase-mark                                                                          1       1   1   0   1   0   0   0
method. This encoding method minimizes the dc content of the
transmitted signal. As can be seen from Figure 43, 1s in the                                                     PREAMBLE Z
original data end up with midcell transitions in the biphase-                                                                                                            04756-045
mark encoded data, while 0s in the original data do not. Note                                                                      Figure 45. Preambles
that the biphase-mark encoded data always has a transition
between bit boundaries.                                                                             The serial digital audio communication scheme is organized
               CLOCK
                                                                                                    using a frame and subframe construction. There are two
    (2 TIMES BIT RATE)                                                                              subframes per frame (ordinarily the left and right channel).
                              0      1       1       1      0      0                                Each subframe includes the appropriate 4-bit preamble, up to
                 DATA                                                                               24 bits of audio data, a validity (V) bit, a user (U) bit, a channel
                                                                                                    status (C) bit, and an even parity (P) bit. The channel status bits
                                                                                                    and the user bits accumulate over many frames to convey
       BIPHASE-MARK
                DATA                                                                                control information. The channel status bits accumulate over a
                                                                            04756-043
                                                                                                    192 frame period (called a channel status block). The user bits
                         Figure 43. Biphase-Mark Encoding
                                                                                                    accumulate over 1176 frames when the interconnect is imple-
                                                                                                    menting the so-called subcode scheme (EIAJ CP-2401). The
Digital audio-communication schemes use preambles to                                                organization of the channel status block, frames, and subframes
distinguish among channels (called subframes) and among                                             is shown in Table 9 and Table 10. Note that the ADAV803
longer-term control information blocks (called frames). Pream-                                      supports the professional audio standard from a software
bles are particular biphase-mark patterns, which contain encoding                                   point of view only. The digital interface supports only
violations that allow the receiver to uniquely recognize them.                                      consumer mode.
These patterns and their relationship to frames and subframes
are shown in Table 8 and Figure 44.                                                                 Table 9. Consumer Audio Standard
                                                                                                                                               Data Bits
Table 8. Biphase-Mark Encode Preamble                                                               Address 1         7      6         5     4     3    2              1             0
        Biphase Patterns                         Channel                                            N                  Channel             Emphasis     Copy-          Non-          Pro/
X       11100010 or 00011101                     Left                                                                   Status                          right          Audio         Con
Y       11100100 or 00011011                     Right                                                                                                                               =0
Z       11101000 or 00010111                     Left and CS block start                            N+1                               Category Code
                                                                                                    N+2                 Channel Number            Source Number
                                  PREAMBLES
                                                                                                    N+3               Reserved     Clock        Sampling Frequency
                                                                                                                                  Accuracy
                                                                                                    N+4                     Reserved               Word Length
    X LEFT CH Y RIGHT CH Z LEFT CH Y RIGHT CH X LEFT CH Y RIGHT CH                                  N + 5 to                             Reserved
                             SUBFRAME    SUBFRAME                                                   (N + 23)
                                                                                        04756-044   1
          FRAME 191                FRAME 0                  FRAME 1                                     N = 0x20 for receiver channel status buffer.
                                                                                                        N = 0x38 for transmitter channel status buffer.
                  Figure 44. Preambles, Frames, and Subframes
The biphase-mark encoding violations are shown in Figure 45.
Note that all three preambles include encoding violations.
                                                                           Rev. A | Page 24 of 60


                                                                                                                                                           ADAV803
Table 10. Professional Audio Standard                                                  bits are available as a memory buffer, taking up 24 consecutive
                                              Data Bits
                                                                                       register locations. The user bits are read using an indirect
Address1         7          6    5        4     3 2            1        0
                                                                                       memory addressing scheme, where the receiver user bit
N                   Sample       Lock          Emphasis        Non-     Pro/Con
                                                                                       indirect-address register is programmed with an offset to the
                  Frequency                                    Audio = 1               user bit buffer, and the receiver user bit data register can be read
N+1                User Bit Management                  Channel Mode                   to determine the user bits at that location. Reading the receiver
N+2               Alignment       Source Word          Use of Auxiliary Mode           user bit data register automatically updates the indirect address
                     Level            Length                Sample Bits                register to the next location in the buffer. Typically, the receiver
N+3                                    Channel Identification                          user bit indirect-address register is programmed to zero (the
N+4              fS                Sample          Reserved Digital Audio              start of the buffer), and the receiver user bit data register is read
                 Scaling       Frequency (fS)                    Reference             repeatedly until all the buffer’s data has been read. Figure 46
                                                                 Signal
                                                                                       and Figure 47 show how receiving the channel status bits and
N+5                                          Reserved
                                                                                       user bits is implemented.
N+6                   Alphanumeric Channel Origin Data—First Character
                                                                                                                             CHANNEL          SECOND BUFFER
N+7                            Alphanumeric Channel Origin Data                                             DIRIN             STATUS A
N+8                            Alphanumeric Channel Origin Data                                                             (24 × 8 BITS)          RECEIVE
                                                                                                                                                  CS BUFFER
N+9                   Alphanumeric Channel Origin Data—Last Character                                       S/PDIF           CHANNEL            (0x20 TO 0x37)
                                                                                                           RECEIVE           STATUS B
N + 10             Alphanumeric Channel Destination Data—First Character
                                                                                                                                                                 04756-046
                                                                                                           BUFFER           (24 × 8 BITS)       RxCSSWITCH
N + 11                      Alphanumeric Channel Destination Data                                  FIRST BUFFER
N + 12                      Alphanumeric Channel Destination Data                                                   Figure 46. Channel Status Buffer
N + 13             Alphanumeric Channel Destination Data—Last Character
N + 14                         Local Sample Address Code—LSW
                                                                                                S/PDIF
N + 15                             Local Sample Address Code
N + 16                             Local Sample Address Code
N + 17                         Local Sample Address Code—MSW                                     0.....7                 0.....7
N + 18                               Time of Day Code—LSW                                       8.....15                8.....15
                                                                                                16.....23               16.....23       ADDRESS = 0x50
N + 19                                   Time of Day Code
                                                                                                                                            RECEIVER USER BIT
N + 20                                   Time of Day Code                                                                                   INDIRECT ADDRESS
N + 21                               Time of Day Code—MSW                                                                                        REGISTER
N + 22                Reliability Flags                    Reserved
                                                                                                 FIRST                 USER-BIT         ADDRESS = 0x51
N + 23                    Cyclic Redundancy Check Character (CRCC)                              BUFFER                 BUFFER
                                                                                                                                            RECEIVER USER BIT
1
    N = 0x20 for receiver channel status buffer.                                                                                              DATA REGISTER
    N = 0x38 for transmitter channel status buffer
                                                                                                                                                                             04756-047
The standards allow the channel status bits in each subframe to                                                     Figure 47. Receiver User Bit Buffer
be independent, but ordinarily the channel status bits in the two
                                                                                       The S/PDIF receive buffer is updated continuously by the
subframes of each frame are the same. The channel status bits
                                                                                       incoming S/PDIF stream. Once all the channel status bits for
are defined differently for the consumer audio standards and
                                                                                       the block (192 for Channel A and 192 for Channel B) are
the professional audio standards. The 192 channel status bits are
                                                                                       received, the bits are copied into the receiver channel status
organized into 24 bytes and have the interpretations shown in
                                                                                       buffer. This buffer stores all 384 bits of channel status
Table 9 and Table 10.
                                                                                       information, and the RxCSSWITCH bit in the channel status
The S/PDIF transmitter and receiver have a comprehensive                               switch buffer register determines whether the Channel A or the
register set. The registers give the user full access to the                           Channel B status bits are required to be read. The receive
functions of the S/PDIF block, such as detecting nonaudio and                          channel status bit buffer is 24 bytes long and spans the address
validity bits, Q subcodes, and preambles. The channel status bits                      range from 0x20 to 0x37.
as defined by the IEC60958 and AES3 specifications are stored
                                                                                       Because the channel status bits of an S/PDIF stream rarely
in register buffers for ease of use. An autobuffering function
                                                                                       change, a software interrupt/flag bit, RxCSBINT, is provided to
allows channel status bits and user bits read by the receiver to be
                                                                                       notify the host control either that a new block of channel status
copied directly to the transmitter block, removing the need for
                                                                                       bits is available or that the first five bytes of channel status
user intervention.
                                                                                       information have changed from a previous block. The function
Receiver Section                                                                       of the RxCSBINT is controlled by the RxBCONF3 bit in the
The ADAV803 uses a double-buffering scheme to handle read-                             Receiver Buffer Configuration register.
ing channel status and user bit information. The channel status
                                                                       Rev. A | Page 25 of 60


ADAV803
The size of the user bit buffer can be set by programming the                    bit is set. This is a sticky bit that remains high until the register
RxBCONF0 bit in the receiver buffer configuration register, as                   is read.
shown in Table 11.                                                               Transmitter Operation
Table 11. RxBCONF3 Functionality                                                 The S/PDIF transmitter has a similar buffer structure to the
RxBCONF0        Receiver User Bit Buffer Size                                    receive section. The transmitter channel status buffer occupies
0               384 bits with Preamble Z as the start of the block.              24 bytes of the register map. This buffer is long enough to store
1               768 bits with Preamble Z as the start of the block.              the 192 bits required for one channel of channel status informa-
                                                                                 tion. Setting the TxCSSWITCH bit determines if the data
The updating of the user bit buffer is controlled by Bits                        loaded to the transmitter channel status buffer is intended for
RxBCONF[2:1] and Bit 7 to Bit 4 of the channel status register,                  Channel A or Channel B. In most cases, the channel status bits
as shown in Table 12 and Table 13.                                               for Channel A and Channel B are the same, in which case
                                                                                 setting the Tx_A/B_Same bit reads the data from the trans-
Table 12. RxBCONF[2:1] Functionality                                             mitter channel status buffer and transmits it on both channels.
   RxBCONF
                                                                                 Because the channel status information is rarely changed during
Bit 2   Bit 1       Receiver User Bit Buffer Configuration                       transmission, the information contained in the buffer is
0       0           User bits are ignored.                                       transmitted repeatedly. The Disable_Tx_Copy bit can be used
0       1           Update second buffer when first buffer is full.              to prevent the channel status bits from being copied from the
1       0           Format according to Byte 1, Bit 4 to Bit 7, if               transmitter CS buffer into the S/PDIF transmitter buffer until
                    PRO bit is set. Format according to IEC60958-3,
                    if PRO bit is clear.
                                                                                 the user has finished loading the buffers. This feature is
                                                                                 typically used, if the Channel A data and Channel B data are
Table 13. Automatic User Bit Configuration                                       different. Setting the bit prevents the data from being copied.
     Bits           Automatic Receiver User Bit Buffer                           Clearing the bit allows the data to be copied and then
7   6 5       4     Configuration                                                transmitted. Figure 48 shows how the buffers are organized.
0   0 0       0     User bits are ignored.                                                                                         DITOUT
0   1 0       0     AES-18 format: the user bit buffer is treated in
                    the same way as when RxBCONF[2:1] = 0b01.                                                      CHANNEL
1   0    0    0     User bit buffer is updated in the same way as                                                   STATUS A
                                                                                                TRANSMIT          (24 × 8 BITS)     S/PDIF
                    when RxBCONF[2:1] = 0b01 and RxBCONF0 =                                     CS BUFFER                         TRANSMIT
                    0b00.                                                                     (0x38 TO 0x4F)       CHANNEL         BUFFER
                                                                                                                   STATUS B
                                                                                                                                               04756-048
1   1    0    0     User-defined format: the user bit buffer is                                                   (24 × 8 BITS)
                    treated in the same way as when                                            TxCSSWITCH
                    RxBCONF[2:1] = 0b01.                                                        Figure 48. Transmitter Channel Status Buffer
                                                                                 As with the receiver section, the transmitted user bits are also
When the user bit buffer has been filled, the RxUBINT
                                                                                 double-buffered. This is required because, unlike the channel
interrupt bit in the interrupt status register is set, provided that
                                                                                 status bits, the user bits do not necessarily repeat themselves.
the RxUBINT mask bit is set, to indicate that the buffer has new
                                                                                 The user bits can be buffered in various configurations, as listed
information and can be read.
                                                                                 in Table 14. Transmission of the user bits is determined by the
For the special case when the user data is formatted according                   state of the BCONF3 bit. If the bit is 0, the user bits begin
to the IEC 60958-3 standard into messages made of information                    transmitting right away without alignment to the Z preamble. If
units, called IUs, the zeros stuffed between each IU and each                    this bit is 1, the user bits do not start transmitting until a
message are removed and only the IUs are stored. Once the end                    Z preamble occurs when the TxBCONF[2:1] bits are 01.
of the message is sensed by more that eight zeros between IUs,
the user bit buffer is updated with the complete message and                     Table 14. Transmitter User Bit Buffer Configurations
the first buffer begins looking for the start of the next message.                TxBCONF2-1
                                                                                 Bit 2  Bit 1         Transmitter User Bit Buffer Configuration
Each IU is stored as a byte consisting of 1, Q, R, S, T, U, V, and
                                                                                 0      0             Zeros are transmitted for the user bits.
W bits (see the IEC 60958-3 specification for more
                                                                                 0      1             Host writes user bits to the buffer until it is full.
information). When 96 IUs are received, the Q subcode of the
                                                                                 1      0             Writes the user bits to the buffer in IUs
IUs is stored in the Q subcode buffer, consisting of 10 bytes. The
                                                                                                      specified by IEC60958-3 and transmits them
Q subcode is the Q bits taken from each of the 96 IUs. The first                                      according to the standard.
10 bytes (80 bits) of the Q subcode contain information sent by                  1        1           First 10 bytes of the user-bit buffer are
CD, MD, and DAT systems. The last 16 bits of the Q subcode                                            configured to store a Q subcode.
are used to perform a CRC check of the Q subcode. If an error
occurs in the CRC check of the Q subcode, the QCRCERROR
                                                                 Rev. A | Page 26 of 60


                                                                                                                                                      ADAV803
                                                                                                  When the user bits are transmitted according to the IEC 60958-3
Table 15. Transmitter User Bit Buffer Size                                                        format, the messages contained in the user bits can still be sent
TxBCONF0      Buffer Size                                                                         without dropping or repeating messages. Because zero-stuffing
0             384 bits with Preamble Z as the start of the block.                                 is allowed between IUs and messages, zeros can be added or
1             768 bits with Preamble Z as the start of the block.                                 subtracted to preserve the messages. When the transmitter
                                                                                                  sample rate is greater than the receiver sample rate, extra zeros
By using sticky bits and interrupts, the transmit buffers can                                     are stuffed between the messages. When the sample rate of the
notify the host or microcontroller about their status. The sticky                                 transmitter is less than the sample rate of the receiver, the zeros
bit, TxUBINT, is set when the transmit user bit buffer has been                                   stuffed between the messages are subtracted. If there are not
updated and the second transmit user bit buffer is empty and                                      enough zeros between the messages to be subtracted, the zeros
ready to accept new user bits. This bit is located in the interrupt                               between IUs are subtracted as well. The Zero_Stuff_IU bit in
status register. When the host reads the interrupt status register,                               the Autobuffer register enables the adding or subtracting of
this bit is cleared. Interrupts for the TxUBINT sticky bit can be                                 zeros between messages.
enabled by setting the TxUBINT Mask bit in the interrupt
                                                                                                  Interrupts
status mask register
                                                                                                  The ADAV803 provides interrupt bits to indicate the presence
                                                          S/PDIF 0
                                                                                                  of certain conditions that require attention. Reading the
                                                                                                  interrupt status register (Register 0x1C) allows the user to
                                       0.....7             0.....7
                                                                                                  determine if any of the interrupts have been asserted. The bits
                                       8.....15           8.....15
                                                                                                  of the Interrupt Status register remain high, if set, until the
    ADDRESS = 0x52                    16.....23           16.....23
                                                                                                  register is read. Two bits, SRCError and RxError, indicate
      TRANSMITTER USER BIT
        INDIRECT ADDRESS                                                                          interrupt conditions in the sample rate converter and an S/PDIF
             REGISTER
                                                                                                  receiver error, respectively. Both these conditions require a read
                                     USER-BIT             SECOND                                  of the appropriate error register (Register 0x1A and Register
    ADDRESS = 0x53
                                     BUFFER               BUFFER
                                                                                                  0x18, respectively) to determine the exact cause of the interrupt.
      TRANSMITTER USER BIT
         DATA REGISTER                                                                            Each interrupt in the interrupt status register has an associated
                                                                      04756-049
                                                                                                  mask bit in the interrupt status mask register. The interrupt
                                                                                                  mask bit must be set for the corresponding interrupt to be
                 Figure 49. Transmitter User Bit Buffer                                           generated. This feature allows the user to determine which
Autobuffering                                                                                     functions should be responded to.
The ADAV803 S/PDIF receiver and transmitter sections have                                         The dual function pin ZEROL/INT can be set to indicate the
an autobuffering mode allowing the channel status and user bits                                   presence of no audio data on the left channel or the presence of
to be copied automatically from the receiver to the transmitter                                   an interrupt set in the interrupt status register. As shown in
without user intervention. The channel status and user bits                                       Table 16, the function of this pin is selected by the INTRPT bit
can be independently selected for autobuffering using the                                         in DAC Control Register 4.
Auto_CSBits and Auto_UBits bits, respectively, in the Auto-
                                                                                                  Table 16. ZEROL/INT Pin Functionality
buffer register. When the receiver and transmitter are running
                                                                                                  INTRPT        Pin Functionality
at the same sample rate, the transmitted channel status and user
bits are the same as the received channel-status and user bits.                                   0             Pin functions as a ZEROL flag pin.
                                                                                                  1             Pin functions as an interrupt pin.
In many systems, however, it is likely that the receiver and
transmitter are not running at the same frequency. When the
                                                                                                  SERIAL DATA PORTS
transmitter sample rate is higher than the receiver sample rate,
the channel status and user bit blocks are sometimes repeated.                                    The ADAV803 contains four flexible serial ports (SPORTs) to
When the transmitter sample rate is lower than the receiver                                       allow data transfer to and from the codec. All four SPORTs are
sample rate, the channel status and user bit blocks might be                                      independent and can be configured as master or slave ports. In
dropped. Because the first five bytes of the channel status are                                   slave mode, the xLRCLK and xBCLK signals are inputs to the
typically constant, they can be repeated or dropped with no                                       serial ports. In master mode, the serial port generates the
information loss. However, if the PRO bit in the channel status                                   xLRCLK and xBCLK signals. The master clock for the SPORT
is set and the local sample address code and time-of-day code                                     can be selected from a number of sources, as shown in
bytes contain information, these bytes might be repeated or                                       Figure 50.
dropped, in which case information can be lost. It is up to the
user to determine how to handle this case.
                                                                                  Rev. A | Page 27 of 60


ADAV803
                 REG 0x76                                                                    Care should be taken to ensure that the clock rate is appropriate
                 BITS[4:2]      ADC                               OLRCLK
                                              OUTPUT
                                                                  OBCLK
                                                                                             for whatever block is connected to the serial port. For example,
  DIR PLL(512 × fS)             MCLK           PORT
  DIR PLL(256 × fS)
                                                                  OSDATA                     if the ADC is running from the MCLKI input at 256 × fS, then
          PLLINT1                                                                            the master clock for the SPORT should also run from the
          PLLINT2                   ICLK1
            MCLKI                   ICLK2
                                                                                             MCLKI input to ensure that the ADC and serial port are
               XIN             PLL CLOCK        REG 0x06
                                                BITS[5:4]
                                                                                             synchronized.
                 REG 0x76
                 BITS[7:5]      DAC
                                               INPUT
                                                                  ILRCLK                     The SPORTs can be set to transmit or receive data in I2S, left-
                                                                  IBCLK
  DIR PLL(512 × fS)             MCLK           PORT
                                                                  ISDATA
                                                                                             justified or right-justified formats with different word lengths
  DIR PLL(256 × fS)
          PLLINT1                                                                            by programming the appropriate bits in the playback register,
          PLLINT2                   ICLK1                                                    auxiliary input port register, record register, and auxiliary
            MCLKI                   ICLK2
               XIN             PLL CLOCK      REG 0x04                                       output port-control register. Figure 51 is a timing diagram of
                                              BITS[4:3]
                REG 0x77                                                                     the serial data port formats.
                BITS[4:3]
                                     REG 0x00    SRC
                          REG 0x00 BITS[1:0]                                                 Clocking Scheme
           MCLKI          BITS[3:2]
                                     ICLK1    MCLK
              XIN                                                                            The ADAV803 provides a flexible choice of on-chip and off-
                            DIVIDER
          PLLINT1
          PLLINT2       DIR  PLL(512 × fS)                                                   chip clocking sources. The on-chip oscillator with dual PLLs is
                                               DIVIDER
                        DIR PLL(256 × fS)
                                              REG 0x00                                       intended to offer complete system clocking requirements for
           MCLKI
                                               BITS[7:6]
              XIN
          PLLINT1
                            DIVIDER
                                      ICLK2
                                                                                             use with available MPEG encoders, decoders, or a combination
          PLLINT2          REG 0x00                                                          of codecs. The oscillator function is designed for generation of a
                           BITS[4:5]
                                                                         04756-050
                REG 0x76                                                                     27 MHz video clock from a 27 MHz crystal connected between
                BITS[1:0]
                                                                                             the XIN and XOUT pins. Capacitors must also be connected
                      Figure 50. SPORT Clocking Scheme
                                                                                             between these pins and DGND, as shown in Figure 35. The
                                                                                             capacitor values should be specified by the crystal manufacturer.
                                                                                             A square wave version of the crystal clock is output on the
                                                                                             MCLKO pin. If the system has a 27 MHz clock available, this
                                                                                             clock can be connected directly to the XIN pin.
    LRCLK                                   LEFT CHANNEL                                                     RIGHT CHANNEL
      BCLK
     SDATA            MSB                                   LSB                            MSB                           LSB
                                                       LEFT-JUSTIFIED MODE — 16 BITS TO 24 BITS PER CHANNEL
    LRCLK                                   LEFT CHANNEL                                                     RIGHT CHANNEL
      BCLK
     SDATA                    MSB                                  LSB                            MSB                            LSB
                                                              I2S MODE — 16 BITS TO 24 BITS PER CHANNEL
    LRCLK                                   LEFT CHANNEL                                                     RIGHT CHANNEL
      BCLK
     SDATA                             MSB                                           LSB                  MSB                            LSB
                                                                                                                                                        04756-051
                                                  RIGHT-JUSTIFIED MODE — SELECT NUMBER OF BITS PER CHANNEL
                                                                    Figure 51. Serial Data Modes
                                                                         Rev. A | Page 28 of 60


                                                                                                                                         ADAV803
Datapath
                                                                                           PLL          OSCILLATOR                       RECORD
The ADAV803 features a digital input/output switching/                                                                                    DATA
                                                                                                                                         OUTPUT
multiplexing matrix that gives flexibility to the range of possible
input and output connections. Digital input ports include
                                                                                         ADC
playback and auxiliary input (both 3-wire digital), and S/PDIF                                                                            AUX
                                                                                                                                          DATA
(single-wire to the on-chip receiver). Output ports include the                                                                          OUTPUT
record and auxiliary output ports (both 3-wire digital) and the
S/PDIF port (single-wire from the on-chip transmitter).                                 REFERENCE
Internally, the DIR and DIT are interfaced via 3-wire interfaces.                                            SRC                          DIT
The datapath for each input and output port is selected by                               DAC
programming Datapath Control Register 1 and Datapath
Control Register 2. Figure 52 shows the internal datapath
structure of the ADAV803.                                                                         CONTROL    PLAYBACK     AUX      DIR
                                                                                                                                                  04756-052
                                                                                                 REGISTERS      DATA      DATA
                                                                                                               INPUT     INPUT
                                                                                                             Figure 52. Datapath
                                                               Rev. A | Page 29 of 60


ADAV803
INTERFACE CONTROL
The ADAV803 has a dedicated control port to allow the internal                       Initiating a write operation to the ADAV803 involves sending a
registers of the ADAV803 to be accessed. Each of the internal                        start condition and then sending the device address with the
registers is eight bits wide. Where bits are described as reserved                   R/W set low. The ADAV803 responds by issuing an ACK to
(RES), these bits should be programmed as zero.                                      indicate that it has been addressed. The user then sends a
                                                                                     second frame telling the ADAV803 which register is required to
I2C INTERFACE
                                                                                     be written to. The 7-bit register address is left-shifted to make
The I2C interface of the ADAV803 is a 2-wire interface                               the eight bits that the frame requires. Another ACK is issued by
consisting of a clock line, SCL, and a data line, SDA. SDA is                        the ADAV803. Finally, the user can send another frame with the
bidirectional; the ADAV803 drives SDA to either acknowledge                          eight data bits required to be written to the register. A third
the master, ACK, or send data during a read operation. The                           ACK is issued by the ADAV803, after which the user can send a
SDA pin for the I2C port is an open-drain collector that requires                    stop condition to complete the data transfer.
a 1 kΩ pull-up resistor. A write or read access occurs when the
SDA line is pulled low while the SCL line is high, indicated by                      A read operation requires that the user first write to the
START in the timing diagrams. SDA is allowed to change only                          ADAV803 to point to the correct register and then read the
when SCL is low, except when a start or stop condition occurs,                       data. This is achieved by sending a start condition followed by
as shown in Figure 53 and Figure 54. The I2C interface supports                      the device address frame, with R/W low, and then the register
both standard (100 kbps) and fast (400 kbps) modes as defined                        address frame. Following the ACK from the ADAV803, the user
by the I2C standards.                                                                must issue a repeated start condition. This is identical to a start
                                                                                     condition. The next frame is the device address with R/W set
The first eight bits of the access consist of the device address                     high. On the next frame, the ADAV803 outputs the register data
and the R/W bit. The device address consists of an internal                          on the SDA line. A stop condition completes the read operation.
built-in address (0b00100) and two address pins, AD1 and                             Figure 53 and Figure 54 show examples of writing to and read-
AD0. The two address pins allow up to four ADAV803s to be                            ing from the DAC left volume register (Address 0b1101000).
used in a system.
           SCK
           SDA          0     0    1       0    0     AD1   AD0    R/W           1         1   0       1     0    0     0      X
             START BY                                                     ACK. BY                                                      ACK. BY
              MASTER                                                      ADAV803                                                      ADAV803
                                             FRAME 1                                                   FRAME 2
                                       CHIP ADDRESS BYTE                                        REGISTER ADDRESS BYTE
                                                        SCK
                                                    (CONTINUED)
                                                        SDA
                                                                          D7     D6      D5    D4      D3    D2   D1   D0
                                                    (CONTINUED)
                                                                                                                            ACK. BY   STOP BY
                                                                                                                            ADAV803   MASTER
                                                                                                                                                 04756-053
                                                                                                     FRAME 3
                                                                                                   DATA BYTE TO
                                                                                                     ADAV803
                                                 Figure 53. Writing to the DAC Left Volume Register in I2C
                                                                  Rev. A | Page 30 of 60


                                                                                                                                     ADAV803
                    SCL
                    SDA         0   0   1    0    0    AD1   AD0    R/W           1     1    0      1     0    0    0    X
                     START BY                                              ACK. BY                                             ACK. BY
                      MASTER                                               ADAV803                                             ADAV803
                                              FRAME 1                                                FRAME 2
                                        CHIP ADDRESS BYTE                                     REGISTER ADDRESS BYTE
          SCL
      (CONTINUED)
          SDA
      (CONTINUED)               0   0   1   0     0    AD1   AD0   R/W           D7     D6   D5    D4     D3   D2   D1   D0
               REPEATED START                                              ACK. BY                                        ACK. BY   STOP BY
                 BY MASTER                                                 ADAV803                                        ADAV803   MASTER
                                                                                                                                              04756-054
                                              FRAME 3                                                 FRAME 4
                                        CHIP ADDRESS BYTE                                          REGISTER DATA
                                            Figure 54. Reading from the DAC Left Volume Register in I2C
BLOCK READS AND WRITES                                                         Care should be exercised when using the block read or block
The ADAV803 provides the user with the ability to write to or                  write modes. For most cases, block reading or writing to a
read from a block of registers in one continuous operation. To                 register automatically increments the register address to point
use this feature, the user has to continue providing data frames               to the next register. The exceptions to this case are the indirect
before the stop condition. For a write operation, the register                 memory address registers, transmitter user bit and receiver user
address is automatically incremented with each additional                      bit data buffers. Using a block read or write to access these
frame and the register data is written to that register address.               registers does not update the absolute register address, but
For a read operation, the register address is automatically                    instead updates the buffer address to provide the next value in
incremented with each additional frame, and the register data is               the buffer.
clocked out on that frame.
                                                               Rev. A | Page 31 of 60


ADAV803
REGISTER DESCRIPTIONS
SRC and Clock Control—Address 0000000 (0x00)
Table 17. SRC and Clock Control Register Bit Map
7               6                 5                  4                    3         2        1        0
SRCDIV1         SRCDIV0           CLK2DIV1           CLK2DIV0             CLK1DIV1  CLK1DIV0 MCLKSEL1 MCLKSEL0
Table 18. SRC and Clock Control Register Bit Descriptions
Bit Name             Description
SRCDIV[1:0]          Divides the SRC master clock.
                       00 = SRC master clock is not divided.
                       01 = SRC master clock is divided by 1.5.
                       10 = SRC master clock is divided by 2.
                       11 = SRC master clock is divided by 3.
CLK2DIV[1:0]         Clock divider for Internal Clock 2 (ICLK2).
                       00 = Divide by 1.
                       01 = Divide by 1.5.
                       10 = Divide by 2.
                       11 = Divide by 3.
CLK1DIV[1:0]         Clock divider for Internal Clock 1 (ICLK1).
                       00 = Divide by 1.
                       01 = Divide by 1.5.
                       10 = Divide by 2.
                       11 = Divide by 3.
MCLKSEL[1:0]         Clock selection for the SRC master clock.
                       00 = Internal Clock 1.
                       01 = Internal Clock 2.
                       10 = PLL recovered clock (512 × fS).
                       11 = PLL recovered clock (256 × fS).
S/PDIF Loopback Control—Address 0000011 (0x03)
Table 19. S/PDIF Loopback Control Register Bit Map
7               6                 5                  4                    3         2        1        0
Reserved        Reserved          Reserved           Reserved             Reserved  Reserved Reserved TxMUX
Table 20. S/PDIF Loopback Control Register Bit Descriptions
Bit Name             Description
TxMUX                Selects the source for S/PDIF output (DITOUT).
                       0 = S/PDIF transmitter, normal mode.
                       1 = DIRIN, loopback mode.
                                                             Rev. A | Page 32 of 60


                                                                                                      ADAV803
Playback Port Control—Address 0000100 (0x04)
Table 21. Playback Port Control Register Bit Map
7                6                 5                   4                    3         2       1       0
Reserved         Reserved          Reserved            CLKSRC1              CLKSRC0   SPMODE2 SPMODE1 SPMODE0
Table 22. Playback Port Control Register Bit Descriptions
Bit Name              Description
CLKSRC[1:0]           Selects the clock source for generating the ILRCLK and IBCLK.
                        00 = Input port is a slave.
                        01 = Recovered PLL clock.
                        10 = Internal Clock 1.
                        11 = Internal Clock 2.
SPMODE[2:0]           Selects the serial format of the playback port.
                        000 = Left-justified.
                        001 = I2S.
                        100 = 24-bit, right-justified.
                        101 = 20-bit, right-justified.
                        110 = 18-bit, right-justified.
                        111 = 16-bit, right-justified.
Auxiliary Input Port—Address 0000101 (0x05)
Table 23. Auxiliary Input Port Register Bit Map
7                6                 5                   4                    3         2       1       0
Reserved         Reserved          Reserved            CLKSRC1              CLKSRC0   SPMODE2 SPMODE1 SPMODE0
Table 24. Auxiliary Input Port Register Bit Descriptions
Bit Name              Description
CLKSRC[1:0]           Selects the clock source for generating the IAUXLRCLK and IAUXBCLK.
                        00 = Input port is a slave.
                        01 = Recovered PLL cock.
                        10 = Internal Clock 1.
                        11 = Internal Clock 2.
SPMODE[2:0]           Selects the serial format of auxiliary input port.
                        000 = Left-justified.
                        001 = I2S.
                        100 = 24-bit, right-justified.
                        101 = 20-bit, right-justified.
                        110 = 18-bit, right-justified.
                        111 = 16-bit, right-justified.
                                                               Rev. A | Page 33 of 60


ADAV803
Record Port Control—Address 0000110 (0x06)
Table 25. Record Port Control Register Bit Map
7                6                 5                  4                     3         2     1       0
Reserved         Reserved          CLKSRC1            CLKSRC0               WLEN1     WLEN0 SPMODE1 SPMODE0
Table 26. Record Port Control Register Bit Descriptions
Bit Name              Description
CLKSRC[1:0]           Selects the clock source for generating the OLRCLK and OBCLK.
                        00 = Record port is a slave.
                        01 = Recovered PLL clock.
                        10 = Internal Clock 1.
                        11 = Internal Clock 2.
WLEN[1:0]             Selects the serial output word length.
                        00 = 24 bits.
                        01 = 20 bits.
                        10 = 18 bits.
                        11 = 16 bits.
SPMODE[1:0]           Selects the serial format of the record port.
                        00 = Left-justified.
                        01 = I2S.
                        10 = Reserved.
                        11 = Right-justified.
Auxiliary Output Port—Address 0000111 (0x07)
Table 27. Auxiliary Output Port Register Bit Map
7                6                 5                  4                     3         2     1       0
Reserved         Reserved          CLKSRC1            CLKSRC0               WLEN1     WLEN0 SPMODE1 SPMODE0
Table 28. Auxiliary Output Port Register Bit Descriptions
Bit Name              Description
CLKSRC[1:0]           Selects the clock source for generating the OAUXLRCLK and OAUXBCLK.
                        00 = Auxiliary record port is a slave.
                        01 = Recovered PLL clock.
                        10 = Internal Clock 1.
                        11 = Internal Clock 2.
WLEN[1:0]             Selects the serial output word length.
                        00 = 24 bits.
                        01 = 20 bits.
                        10 = 18 bits.
                        11 = 16 bits.
SPMODE[1:0]           Selects the serial format of the auxiliary record port.
                        00 = Left-justified.
                        01 = I2S.
                        10 = Reserved.
                        11 = Right-justified.
                                                               Rev. A | Page 34 of 60


                                                                                                                      ADAV803
Group Delay and Mute—Address 0001000 (0x08)
Table 29. Group Delay and Mute Register Bit Map
7                6                5                  4                    3               2                 1         0
MUTE_SRC         GRPDLY6          GRPDLY5            GRPDLY4              GRPDLY3         GRPDLY2           GRPDLY1   GRPDLY0
Table 30. Group Delay and Mute Register Bit Descriptions
Bit Name                 Description
MUTE_SRC                 Soft-mutes the output of the sample rate converter.
                            0 = No mute.
                            1 = Soft mute.
GRPDLY[6:0]              Adds delay to the sample rate converter FIR filter by GRPDLY[6:0] input samples.
                            0000000 = No delay.
                            0000001 = 1 sample delay.
                            0000010 = 2 sample delay.
                            1111110 = 126 sample delay.
                            1111111 = 127 sample delay.
Receiver Configuration 1—Address 0001001 (0x09)
Table 31. Receiver Configuration 1 Register Bit Map
7               6                 5                  4                    3               2                 1         0
NOCLOCK         RxCLK1            RxCLK0             AUTO_DEEMPH          ERR1            ERR0              LOCK1     LOCK0
Table 32. Receiver Configuration 1 Register Bit Descriptions
Bit Name             Description
NOCLOCK              Selects the source of the receiver clock when the PLL is not locked.
                        0 = Recovered PLL clock is used.
                        1 = ICLK1 is used.
RxCLK[1:0]           Determines the oversampling ratio of the recovered receiver clock.
                        00 = RxCLK is a 128 × fS recovered clock.
                        01 = RxCLK is a 256 × fS recovered clock.
                        10 = RxCLK is a 512 × fS recovered clock.
                        11 = Reserved.
AUTO_DEEMPH          Automatically de-emphasizes the data from the receiver based on the channel status information.
                        0 = Automatic de-emphasis is disabled.
                        1 = Automatic de-emphasis is enabled.
ERR[1:0]             Defines what action the receiver should take, if the receiver detects a parity or biphase error.
                        00 = No action is taken.
                        01 = Last valid sample is held.
                        10 = Invalid sample is replaced with zeros.
                        11 = Reserved.
LOCK[1:0]            Defines what action the receiver should take, if the PLL loses lock.
                        00 = No action is taken.
                        01 = Last valid sample is held.
                        10 = Zeros are sent out after the last valid sample.
                        11 = Soft-mute of the last valid audio sample.
                                                             Rev. A | Page 35 of 60


ADAV803
Receiver Configuration 2—Address 0001010 (0x0A)
Table 33. Receiver Configuration 2 Register Bit Map
7            6            5                         4                       3           2            1                     0
RxMUTE       SP_PLL       SP_PLL_ SEL1              SP_PLL_ SEL0            Reserved    Reserved     NO NONAUDIO           NO_VALIDITY
Table 34. Receiver Configuration 2 Register Bit Descriptions
Bit Name             Description
RxMUTE               Hard-mutes the audio output for the AES3/S/PDIF receiver.
                        0 = AES3/S/PDIF receiver is not muted.
                        1 = AES3/S/PDIF receiver is muted.
SP_PLL               AES3/S/PDIF receiver PLL accepts a left/right clock from one of the four serial ports as the PLL reference clock.
                        0 = Left/right clock generated from the AES3/S/PDIF preambles is the reference clock to the PLL.
                        1 = Left/right clock from one of the serial ports is the reference clock to the PLL.
SP_PLL_SEL[1:0]      Selects one of the four serial ports as the reference clock to the PLL when SP_PLL is set.
                        00 = Playback port is selected.
                        01 = Auxiliary input port is selected.
                        10 = Record port is selected.
                        11 = Auxiliary output port is selected.
NO NONAUDIO          When the NO NONAUDIO bit is set, data from the AES3/S/PDIF receiver is not allowed into the sample rate converter
                     (SRC). If the NO NONAUDIO data is due to DTS, AAC, and so on, as defined by the IEC61937 standard, then the data
                     from the AES3/S/PDIF receiver is not allowed into the SRC regardless of the state of this bit.
                        0 = AES3/S/PDIF receiver data is sent to the SRC.
                        1 = Data from the AES3/S/PDIF receiver is not allowed into the SRC, if the NO NONAUDIO bit is set.
NO_VALIDITY          When the NO_VALIDITY bit is set, data from the AES3/S/PDIF receiver is not allowed into the SRC.
                        0 = AES3/S/PDIF receiver data is sent to the SRC.
                        1 = Data from the AES3/S/PDIF receiver is not allowed into the SRC, if the NO_VALIDITY bit is set.
                                                              Rev. A | Page 36 of 60


                                                                                                                                    ADAV803
Receiver Buffer Configuration—Address 0001011 (0x0B)
Table 35. Receiver Buffer Configuration Register Bit Map
7                6                   5                  4                      3               2                 1                 0
Reserved         Reserved            RxBCONF5           RxBCONF4               RxBCONF3        RxBCONF2          RxBCONF1          RxBCONF0
Table 36. Receiver Buffer Configuration Register Bit Descriptions
Bit Name              Description
RxBCONF5              If the user bits are formatted according to the IEC60958-3 standard and the DAT category is detected, the user bit
                      interrupt is enabled only when there is a change in the start (ID) bit.
                          0 = User bit interrupt is enabled in normal mode.
                          1 = If the DAT category is detected, the user bit interrupt is enabled only if there is a change in the start (ID) bit.
RxBCONF4              This bit determines whether Channel A and Channel B user bits are stored in the buffer together or separated
                      between A and B.
                          0 = User bits are stored together.
                          1 = User bits are stored separately.
RxBCONF3              Defines the function of RxCSBINT.
                          0 = RxCSBINT are set when a new block of receiver channel status is read, which is 192 audio frames.
                          1 = RxCSBINT is set only if the first five bytes of the receiver channel status block changes from the previous
                          channel status block.
RxBCONF[2:1]          Defines the user bit buffer.
                          00 = User bits are ignored.
                          01 = Updates the second user bit buffer when the first user bit buffer is full.
                          10 = Formats the received user bits according to Byte 1, Bit 4 to Bit 7, of the channel status, if the PRO bit is set. If
                          the PRO bit is not set, formats the user bits according to the IEC60958-3 standard.
                          11 = Reserved.
RxBCONF0              Defines the user bit buffer size, if RxBCONF[2:1] = 01.
                          0 = 384 bits with Preamble Z as the start of the buffer.
                          1 = 768 bits with Preamble Z as the start of the buffer.
Transmitter Control—Address 0001100 (0x0C)
Table 37. Transmitter Control Register Bit Map
7                6                   5                  4                      3               2                 1                 0
Reserved         TxVALIDITY          TxRATIO2           TxRATIO1               TxRATIO0        TxCLKSEL1         TxCLKSEL0         TxENABLE
Table 38. Transmitter Control Register Bit Descriptions
Bit Name             Description
TxVALIDITY           This bit is used to set or clear the VALIDITY bit in the AES3/S/PDIF transmit stream.
                         0 = Audio is suitable for digital-to-analog conversion.
                         1 = Audio is not suitable for digital-to-analog conversion.
TxRATIO[2:0]         Determines the AES3/S/PDIF transmitter to AES3/S/PDIF receiver ratio.
                         000 = Transmitter to receiver ratio is 1:1.
                         001 = Transmitter to receiver ratio is 1:2.
                         010 = Transmitter to receiver ratio is 1:4.
                         101 = Transmitter to receiver ratio is 2:1.
                         110 = Transmitter to receiver ratio is 4:1.
TxCLKSEL[1:0]        Selects the clock source for the AES3/S/PDIF transmitter.
                         00 = Internal Clock 1 is the clock source for the transmitter.
                         01 = Internal Clock 2 is the clock source for the transmitter.
                         10 = Recovered PLL clock is the clock source for the transmitter.
                         11 = Reserved.
TxENABLE             Enables the AES3/S/PDIF transmitter.
                         0 = AES3/S/PDIF transmitter is disabled.
                         1 = AES3/S/PDIF transmitter is enabled.
                                                                  Rev. A | Page 37 of 60


ADAV803
Transmitter Buffer Configuration—Address 0001101 (0x0D)
Table 39. Transmitter Buffer Configuration Register Bit Map
7               6                  5                 4                    3                2                1               0
IU_Zeros3       IU_Zeros2          IU_Zeros1         IU_Zeros0            TxBCONF3         TxBCONF2         TxBCONF1        TxBCONF0
Table 40. Transmitter Buffer Configuration Register Bit Descriptions
Bit Name             Description
IU_Zeros[3:0]        Determines the number of zeros to be stuffed between IUs in a message up to a maximum of 8.
                        0000 = 0.
                        0001 = 1.
                        …
                        0111 = 7.
                        1000 = 8.
TxBCONF3             Transmitter user bits can be stored in separate buffers or stored together.
                        0 = User bits are stored together.
                        1 = User bits are stored separately.
TxBCONF[2:1]         Configures the transmitter user bit buffer.
                        00 = Zeros are transmitted for the user bits.
                        01 = Transmitter user bit buffer size is configured according to TxBCONF0.
                        10 = User bits are written to the transmit buffer in IUs specified by the IEC60958-3 standard.
                        11 = Reserved.
TxBCONF0             Determines the buffer size of the transmitter user bits when TxBCONF[2:1] is 01.
                        0 = 384 bits with Preamble Z as the start of the buffer.
                        1 = 768 bits with Preamble Z as the start of the buffer.
Channel Status Switch Buffer and Transmitter—Address 0001110 (0x0E)
Table 41. Channel Status Switch Buffer and Transmitter Register Bit Map
7               6                 5                 4                       3               2                1               0
Reserved        Reserved          Tx_A/B_Same       Disable_Tx_Copy         Reserved        Reserved         TxCSSWITCH      RxCSSWITCH
Table 42. Channel Status Switch Buffer and Transmitter Register Bit Description
Bit Name             Description
Tx_A/B_Same          Transmitter Channel Status A and B are the same. The transmitter reads only from the Channel Status A buffer and
                     places the data into the Channel Status B buffer.
                        0 = Channel status for A and B are separate.
                        1 = Channel status for A and B are the same.
Disable_Tx_Copy      Disables the copying of the channel status bits from the transmitter channel status buffer to the S/PDIF transmitter
                     buffer.
                        0 = Copying transmitter channel status is enabled.
                        1 = Copying transmitter channel status is disabled.
TxCSSWITCH           Toggle switch for the transmit channel status buffer.
                        0 = 24-byte Transmitter Channel Status A buffer can be accessed at address locations 0x38 through 0x4F.
                        1 = 24-byte Transmitter Channel Status B buffer can be accessed at address locations 0x38 through 0x4F.
RxCSSWITCH           Toggle switch for the receive channel status buffer.
                        0 = 24-byte Receiver Channel Status A buffer can be accessed at address locations 0x20 through 0x37.
                        1 = 24-byte Receiver Channel Status B buffer can be accessed at address locations 0x20 through 0x37.
                                                             Rev. A | Page 38 of 60


                                                                                                                             ADAV803
Transmitter Message Zeros Most Significant Byte—Address 0001111 (0x0F)
Table 43. Transmitter Message Zeros Most Significant Byte Register Bit Map
7               6                  5                 4                   3             2                1                   0
MSBZeros7       MSBZeros6          MSBZeros5         MSBZeros4           MSBZeros3     MSBZeros2        MSBZeros1           MSBZeros0
Table 44. Transmitter Message Zeros Most Significant Byte Register Bit Description
Bit Name             Description
MSBZeros[7:0]        Most significant byte of the number of zeros to be stuffed between IEC60958-3 messages (packets).
                     Default = 0x00.
Transmitter Message Zeros Least Significant Byte—Address 0010000 (0x10)
Table 45. Transmitter Message Zeros Least Significant Byte Register Bit Map
7               6                  5                 4                   3             2                1                   0
LSBZeros7       LSBZeros6          LSBZeros5         LSBZeros4           LSBZeros3     LSBZeros2        LSBZeros1           LSBZeros0
Table 46. Transmitter Message Zeros Least Significant Byte Register Bit Descriptions
Bit Name             Description
LSBZeros[7:0]        Least significant byte of the number of zeros to be stuffed between IEC60958-3 messages (packets). Default = 0x09.
Autobuffer—Address 0010001 (0x11)
Table 47. Autobuffer Register Bit Map
7               6                  5                 4                   3             2                1                   0
Reserved        Zero_Stuff_IU      Auto_UBits        Auto_CSBits         IU_Zeros3     IU_Zeros2        IU_Zeros1           IU_Zeros0
Table 48. Autobuffer Register Bit Descriptions
Bit Name             Description
Zero_Stuff_IU        Enables the addition or subtraction of zeros between IUs during autobuffering of the user bits in IEC60958-3 format.
                       0 = No zeros added or subtracted.
                       1 = Zeros can be added or subtracted between IUs.
Auto_UBits           Enables the user bits to be autobuffered between the AES3/S/PDIF receiver and transmitter.
                       0 = User bits are not autobuffered.
                       1 = User bits are autobuffered.
Auto_CSBits          Enables the channel status bits to be autobuffered between the AES3/S/PDIF receiver and transmitter.
                       0 = Channel status bits are not autobuffered.
                       1 = Channel status bits are autobuffered.
IU_Zeros[3:0]        Sets the maximum number of zero-stuffing to be added between IUs while autobuffering up to a maximum of 8.
                       0000 = 0.
                       0001 = 1.
                       …
                       0111 = 7.
                       1000 = 8.
Sample Rate Ratio MSB—Address 0010010 (0x12)
Table 49. Sample Rate Ratio MSB Register (Read-Only) Bit Map
7               6                  5                 4                   3             2                1                   0
Reserved        SRCRATIO14         SRCRATIO13        SRCRATIO12          SRCRATIO11    SRCRATIO10       SRCRATIO09          SRCRATIO08
Table 50. Sample Rate Ratio MSB Register (Read-Only) Bit Descriptions
Bit Name             Description
SRCRATIO[14:8]       Seven most significant bits of the15-bit sample rate ratio.
                                                            Rev. A | Page 39 of 60


ADAV803
Sample Rate Ratio LSB—Address 0010011 (0x13)
Table 51. Sample Rate Ratio LSB Register (Read-Only) Bit Map
7               6                  5                   4                    3           2                 1                 0
SRCRATIO07      SRCRATIO06         SRCRATIO05          SRCRATIO04           SRCRATIO03  SRCRATIO02        SRCRATIO01        SRCRATIO00
Table 52. Sample Rate Ratio LSB Register (Read-Only) Bit Descriptions
Bit Name           Description
SRCRATIO[7:0]      Eight least significant bits of the15-bit sample rate ratio.
Preamble-C MSB—Address 0010100 (0x14)
Table 53. Preamble-C MSB Register (Read-Only) Bit Map
7               6                  5                   4                    3           2                 1                 0
PRE_C15         PRE_C14            PRE_C13             PRE_C12              PRE_C11     PRE_C10           PRE_C9            PRE_C8
Table 54. Preamble-C MSB Register (Read-Only) Bit Descriptions
Bit Name             Description
PRE_C[15:8]          Eight most significant bits of the 16-bit Preamble-C, when nonaudio data is detected according to the IEC60937
                     standard; otherwise, bits show zeros.
Preamble-C LSB—Address 0010101 (0x15)
Table 55. Preamble-C LSB Register (Read-Only) Bit Map
7               6                  5                   4                    3           2                 1                 0
PRE_C07         PRE_C06            PRE_C05             PRE_C04              PRE_C03     PRE_C02           PRE_C01           PRE_C00
Table 56. Preamble-C LSB Register (Read-Only) Bit Descriptions
Bit Name             Description
PRE_C[7:0]           Eight least significant bits of the 16-bit Preamble-C, when nonaudio data is detected according to the IEC60937
                     standard; otherwise, bits show zeros.
Preamble-D MSB—Address 0010110 (0x16)
Table 57. Preamble-D MSB Register (Read-Only) Bit Map
7               6                  5                   4                    3           2                 1                 0
PRE_D15         PRE_D14            PRE_D13             PRE_D12              PRE_D11     PRE_D10           PRE_D9            PRE_D8
Table 58. Preamble-D MSB Register (Read-Only) Bit Descriptions
Bit Name             Description
PRE_D[15:8]          Eight most significant bits of the 16-bit Preamble-D, when nonaudio data is detected according to the IEC60937
                     standard; otherwise, bits show zeros. When subframe nonaudio is used, this becomes the eight most significant bits
                     of the 16-bit Preamble-C of Channel B.
Preamble-D LSB—Address 0010111 (0x17)
Table 59. Preamble-D LSB Register (Read-Only) Bit Map
7               6                  5                   4                    3           2                 1                 0
PRE_D07         PRE_D06            PRE_D05             PRE_D04              PRE_D03     PRE_D02           PRE_D01           PRE_D00
Table 60. Preamble-D LSB Register (Read-Only) Bit Descriptions
Bit Name             Description
PRE_D[7:0]           Eight least significant bits of the 16-bit Preamble-D, when nonaudio data is detected according to the IEC60937
                     standard; otherwise, bits show zeros. When subframe nonaudio is used, this becomes the eight most significant bits
                     of the 16-bit Preamble-C of Channel B.
                                                               Rev. A | Page 40 of 60


                                                                                                                                        ADAV803
Receiver Error—Address 0011000 (0x18)
Table 61. Receiver Error Register (Read-Only) Bit Map
7               6                   5                      4                              3          2                  1                        0
RxValidity      Emphasis            NonAudio               NonAudio Preamble              CRCError   NoStream           BiPhase/Parity           Lock
Table 62. Receiver Error Register (Read-Only) Bit Descriptions
Bit Name           Description
RxValidity         This is the VALIDITY bit in the AES3 received stream.
Emphasis           This bit is set if the audio data is pre-emphasized. Once it has been read, it remains high and does not generate an
                   interrupt unless it changes state.
NonAudio           This bit is set when Channel Status Bit 1 (nonaudio) is set. Once it has been read, it does not generate another interrupt
                   unless the data becomes audio or the type of nonaudio data changes.
NonAudio           This bit is set if the audio data is nonaudio due to the detection of a preamble. The nonaudio preamble type register
Preamble           indicates what type of preamble was detected. Once read, it remains in its state and does not generate an interrupt
                   unless it changes state.
CRCError           This bit is the error flag for the channel status CRCError check. This bit does not clear until the receiver error register is read.
NoStream           This bit is set if there is no AES3/S/PDIF stream present at the AES3/S/PDIF receiver. Once read, it remains high and does
                   not generate an interrupt unless it changes state.
BiPhase/Parity     This bit is set if a biphase or parity error occurred in the AES3/S/PDIF stream. This bit is not cleared until the register is read.
Lock               This bit is set if the PLL has locked or cleared when the PLL loses lock. Once read, it remains in its state and does not
                   generate an interrupt unless it changes state.
Receiver Error Mask—Address 0011001 (0x19)
Table 63. Receiver Error Mask Register Bit Map
7                6                    5                  4                            3            2                  1                       0
RxValidity       Emphasis             NonAudio           NonAudio Preamble            CRCError     NoStream           BiPhase/Parity          Lock
Mask             Mask                 Mask               Mask                         Mask         Mask               Mask                    Mask
Table 64. Receiver Error Mask Register Bit Descriptions
Bit Name                           Description
RxValidity Mask                    Masks the RxValidity bit from generating an interrupt.
                                       0 = RxValidity bit does not generate an interrupt.
                                       1 = RxValidity bit generates an interrupt.
Emphasis Mask                      Masks the Emphasis bit from generating an interrupt.
                                       0 = Emphasis bit does not generate an interrupt.
                                       1 = Emphasis bit generates an interrupt.
NonAudio Mask                      Masks the NonAudio bit from generating an interrupt.
                                       0 = NonAudio bit does not generate an interrupt.
                                       1 = NonAudio bit generates an interrupt.
NonAudio Preamble Mask             Masks the NonAudio preamble bit from generating an interrupt.
                                       0 = NonAudio preamble bit does not generate an interrupt.
                                       1 = NonAudio preamble bit generates an interrupt.
CRCError Mask                      Masks the CRCError bit from generating an interrupt.
                                       0 = CRCError bit does not generate an interrupt.
                                       1 = CRCError bit generates an interrupt.
NoStream Mask                      Masks the NoStream bit from generating an interrupt.
                                       0 = NoStream bit does not generate an interrupt.
                                       1 = NoStream bit generates an interrupt.
BiPhase/Parity Mask                Masks the BiPhase/Parity bit from generating an interrupt.
                                       0 = BiPhase/Parity bit does not generate an interrupt.
                                       1 = BiPhase/Parity bit generates an interrupt.
Lock Mask                          Masks the Lock bit from generating an interrupt.
                                       0 = Lock bit does not generate an interrupt.
                                       1 = Lock bit generates an interrupt.
                                                                   Rev. A | Page 41 of 60


ADAV803
Sample Rate Converter Error—Address 0011010 (0x1A)
Table 65. Sample Rate Converter Error Register (Read-Only) Bit Map
7               6                   5                 4                     3                2                1                0
Reserved        Reserved            Reserved          Reserved              TOO_SLOW         OVRL             OVRR             MUTE_IND
Table 66. Sample Rate Converter Error Register (Read-Only) Bit Descriptions
Bit Name             Description
TOO_SLOW             This bit is set when the clock to the SRC is too slow, that is, there are not enough clock cycles to complete the
                     internal convolution.
OVRL                 This bit is set when the left output data of the sample rate converter has gone over the full-scale range and has been
                     clipped. This bit is not cleared until the register is read.
OVRR                 This bit is set when the right output data of the sample rate converter has gone over the full-scale range and has
                     been clipped. This bit is not cleared until the register is read.
MUTE_IND             Mute indicated. This bit is set when the SRC is in fast mode and clicks or pops can be heard in the SRC output data.
                     The output of the SRC can be muted, if required, until the SRC is in slow mode. Once read, this bit remains in its state
                     and does not generate an interrupt until it has changed state.
Sample Rate Converter Error Mask—Address 0011011 (0x1B)
Table 67. Sample Rate Converter Error Mask Register Bit Map
7               6                   5                 4                    3                2                1               0
Reserved        Reserved            Reserved          Reserved             Reserved         OVRL Mask        OVRR Mask       MUTE_IND MASK
Table 68. Sample Rate Converter Error Mask Register Bit Descriptions
Bit Name             Description
OVRL Mask            Masks the OVRL from generating an interrupt.
                        0 = OVRL bit does not generate an interrupt.
                        1 = OVRL bit generates an interrupt.
OVRR Mask            Masks the OVRR from generating an interrupt.
                        0 = OVRR bit does not generate an interrupt.
                        1 = OVRR bit generates an interrupt. Reserved.
MUTE_IND MASK        Masks the MUTE_IND from generating an interrupt.
                        0 = MUTE_IND bit does not generate an interrupt.
                        1 = MUTE_IND bit generates an interrupt.
                                                               Rev. A | Page 42 of 60


                                                                                                                                      ADAV803
Interrupt Status—Address 0011100 (0x1C)
Table 69. Interrupt Status Register Bit Map
7                6                     5                  4                    3               2                 1                   0
SRCError         TxCSTINT              TxUBINT            TxCSBINT             RxCSDIFF        RxUBINT           RxCSBINT            RxERROR
Table 70. Interrupt Status Register Bit Descriptions
Bit Name         Description
SRCError         This bit is set if one of the sample rate converter interrupts is asserted, and the host should immediately read the sample
                 rate converter error register. This bit remains high until the interrupt status register is read.
TxCSTINT         This bit is set if a write to the transmitter channel status buffer was made while transmitter channel status bits were being
                 copied from the transmitter CS buffer to the S/PDIF transmit buffer.
TxUBINT          This bit is set if the S/PDIF transmit buffer is empty. This bit remains high until the interrupt status register is read.
TxCSBINT         This bit is set if the transmitter channel status bit buffer has transmitted its block of channel status. This bit remains high
                 until the interrupt status register is read.
RxCSDIFF         This bit is set if the receiver Channel Status A block is different from the receiver Channel Status B clock. This bit remains
                 high until read, but does not generate an interrupt.
RxUBINT          This bit is set if the receiver user bit buffer has a new block or message. This bit remains high until the interrupt status
                 register is read.
RxCSBINT         This bit is set if a new block of channel status is read when RxBCONF3 = 0, or if the channel status has changed when
                 RxBCONF3 = 1. This bit remains high until the interrupt status register is read.
RxERROR          This bit is set if one of the AES3/S/PDIF receiver interrupts is asserted, and the host should immediately read the receiver
                 error register. This bit remains high until the interrupt status register is read.
Interrupt Status Mask—Address 0011101 (0x1D)
Table 71. Interrupt Status Mask Register Bit Map
7                 6                      5                  4                      3          2                 1                     0
SRCError Mask     TxCSTINT Mask          TxUBINT Mask       TxCSBINT Mask          Reserved   RxUBINT Mask      RxCSBINT Mask         RxError Mask
Table 72. Interrupt Status Mask Register Bit Descriptions
Bit Name               Description
SRCError Mask          Masks the SRCError bit from generating an interrupt.
                          0 = SRCError bit does not generate an interrupt.
                          1 = SRCError bit generates an interrupt.
TxCSTINT Mask          Masks the TxCSTINT bit from generating an interrupt.
                          0 = TxCSTINT bit does not generate an interrupt.
                          1 = TxCSTINT bit generates an interrupt.
TxUBINT Mask           Masks the TxUBINT bit from generating an interrupt.
                          0 = TxUBINT bit does not generate an interrupt.
                          1 = TxUBINT bit generates an interrupt.
TxCSBINT Mask          Masks the TxCSBINT bit from generating an interrupt.
                          0 = TxCSBINT bit does not generate an interrupt.
                          1 = TxCSBINT bit generates an interrupt.
RxUBINT Mask           Masks the RxUBINT bit from generating an interrupt.
                          0 = RxUBINT bit does not generate an interrupt.
                          1 = RxUBINT bit generates an interrupt.
RxCSBINT Mask          Masks the RxCSBINT bit from generating an interrupt.
                          0 = RxCSBINT bit does not generate an interrupt.
                          1 = RxCSBINT bit generates an interrupt.
RxError Mask           Masks the RxError bit from generating an interrupt.
                          0 = RxError bit does not generate an interrupt.
                          1 = RxError bit generates an interrupt.
                                                                  Rev. A | Page 43 of 60


ADAV803
Mute and De-Emphasis—Address 0011110 (0x1E)
Table 73. Mute and De-Emphasis Register Bit Map
7                6                  5                   4                    3             2                 1                  0
Reserved         Reserved           TxMUTE              Reserved             Reserved      SRC_DEEM1         SRC_DEEM0          Reserved
Table 74. Mute and De-Emphasis Register Bit Descriptions
Bit Name                 Description
TxMUTE                   Mutes the AES3/S/PDIF transmitter.
                             0 = Transmitter is not muted.
                             1 = Transmitter is muted.
SRC_DEEM[1:0]            Selects the de-emphasis filter for the input data to the sample rate converter.
                             00 = No de-emphasis.
                             01 = 32 kHz de-emphasis.
                             10 = 44.1 kHz de-emphasis.
                             11 = 48 kHz de-emphasis.
NonAudio Preamble Type—Address 0011111 (0x1F)
Table 75. NonAudio Preamble Type Register (Read-Only) Bit Map
7                6                  5                   4                    3             2                 1                  0
Reserved         Reserved           Reserved            Reserved             DTS-CD        NonAudio          NonAudio           NonAudio
                                                                             Preamble      Frame             Subframe_A         Subframe_B
Table 76. NonAudio Preamble Type Register (Read-Only) Bit Descriptions
Bit Name                 Description
DTS-CD Preamble          This bit is set if the DTS-CD preamble is detected.
NonAudio Frame           This bit is set if the data received through the AES3/S/PDIF receiver is nonaudio data according to the IEC61937
                         standard or nonaudio data according to SMPTE337M.
NonAudio Subframe_A      This bit is set if the data received through Channel A of the AES3/S/PDIF receiver is subframe nonaudio data
                         according to SMPTE337M.
NonAudio Subframe_B      This bit is set if the data received through Channel B of the AES3/S/PDIF receiver is subframe nonaudio data
                         according to SMPTE337M.
Receiver Channel Status Buffer—Address 0100000 to Address 0110111 (0x20 to 0x37)
Table 77. Receiver Channel Status Buffer Register Bit Map
7                6                  5                   4                    3             2                 1                  0
RCSB7            RCSB6              RCSB5               RCSB4                RCSB3         RCSB2             RCSB1              RCSB0
Table 78. Receiver Channel Status Buffer Register Bit Descriptions
Bit Name              Description
RCSB[7:0]             The 24-byte receiver channel status buffer. The PRO bit is stored at address location 0x20, Bit 0. This buffer is read-
                      only if the channel status is not autobuffered between the receiver and transmitter.
Transmitter Channel Status Buffer—Address 0111000 to Address 1001111 (0x38 to 0x4F)
Table 79. Transmitter Channel Status Buffer Register Bit Map
7                6                  5                   4                    3             2                 1                  0
TCSB7            TCSB6              TCSB5               TCSB4                TCSB3         TCSB2             TCSB1              TCSB0
Table 80. Transmitter Channel Status Buffer Register Bit Descriptions
Bit Name              Description
TCSB[7:0]             The 24-byte transmitter channel status buffer. The PRO bit is stored at address location 0x38, Bit 0. This buffer is
                      disabled when autobuffering between the receiver and transmitter is enabled.
                                                                Rev. A | Page 44 of 60


                                                                                                                                 ADAV803
Receiver User Bit Buffer Indirect Address— Address 1010000 (0x50)
Table 81. Receiver User Bit Buffer Indirect Address Register Bit Map
7                6                   5                 4                     3               2                  1                0
RxUBADDR7        RxUBADDR6           RxUBADDR5         RxUBADDR4             RxUBADDR3       RxUBADDR2          RxUBADDR1        RxUBADDR0
Table 82. Receiver User Bit Buffer Indirect Address Register Bit Descriptions
Bit Name             Description
RxUBADDR[7:0]        Indirect address pointing to the address location in the receiver user bit buffer.
Receiver User Bit Buffer Data—Address 1010001 (0x51)
Table 83. Receiver User Bit Buffer Data Register Bit Map
7                6                   5                 4                     3               2                  1                0
RxUBDATA7        RxUBDATA6           RxUBDATA5         RxUBDATA4             RxUBDATA3       RxUBDATA2          RxUBDATA1        RxUBDATA0
Table 84. Receiver User Bit Buffer Data Register Bit Descriptions
Bit Name              Description
RxUBDATA[7:0]         A read from this register reads eight bits of user data from the receiver user bit buffer pointed to by RxUBADDR0[7:0].
                      This buffer can be written to when autobuffering of the user bits is enabled; otherwise, it is a read-only buffer.
Transmitter User Bit Buffer Indirect Address—Address 1010010 (0x52)
Table 85. Transmitter User Bit Buffer Indirect Address Register Bit Map
7                6                   5                 4                     3               2                  1                0
TxUBADDR7        TxUBADDR6           TxUBADDR5         TxUBADDR4             TxUBADDR3       TxUBADDR2          TxUBADDR1        TxUBADDR0
Table 86. Transmitter User Bit Buffer Indirect Address Register Bit Descriptions
Bit Name              Description
TxUBADDR[7:0]         Indirect address pointing to the address location in the transmitter user bit buffer.
Transmitter User Bit Buffer Data—Address 1010011 (0x53)
Table 87. Transmitter User Bit Buffer Data Register Bit Map
7                6                   5                 4                     3               2                  1                0
TxUBDATA7        TxUBDATA6           TxUBDATA5         TxUBDATA4             TxUBDATA3       TxUBDATA2          TxUBDATA1        TxUBDATA0
Table 88. Transmitter User Bit Buffer Data Register Bit Descriptions
Bit Name              Description
TxUBDATA[7:0]         A write to this register writes eight bits of user data to the transmit user bit buffer pointed to by TxUBADDR0[7:0].
                      When user bit autobuffering is enabled, this buffer is disabled.
Q Subcode CRCError Status—Address 1010100 (0x54)
Table 89. Q Subcode CRCError Status Register (Read-Only) Bit Map
7                6                   5                 4                     3               2                  1                0
Reserved         Reserved            Reserved          Reserved              Reserved        Reserved           QCRCERROR        QSUB
Table 90. Q Subcode CRCError Status Register (Read-Only) Bit Descriptions
Bit Name              Description
QCRCERROR             This bit is set if the CRC check of the Q subcode fails. This bit remains high, but does not generate an interrupt. This
                      bit is cleared once the register is read.
QSUB                  This bit is set if a Q subcode has been read into the Q subcode buffer (see Table 91).
                                                                Rev. A | Page 45 of 60


ADAV803
Q Subcode Buffer—Address 0x55 to Address 0x5E
Table 91. Q Subcode Buffer Bit Map
Address    Bit 7          Bit 6             Bit 5           Bit 4               Bit 3      Bit 2      Bit 1    Bit 0
0x55       Address        Address           Address         Address             Control    Control    Control  Control
0x56       Track          Track             Track           Track               Track      Track      Track    Track
           number         number            number          number              number     number     number   number
0x57       Index          Index             Index           Index               Index      Index      Index    Index
0x58       Minute         Minute            Minute          Minute              Minute     Minute     Minute   Minute
0x59       Second         Second            Second          Second              Second     Second     Second   Second
0x5A       Frame          Frame             Frame           Frame               Frame      Frame      Frame    Frame
0x5B       Zero           Zero              Zero            Zero                Zero       Zero       Zero     Zero
0x5C       Absolute       Absolute          Absolute        Absolute            Absolute   Absolute   Absolute Absolute
           minute         minute            minute          minute              minute     minute     minute   minute
0x5D       Absolute       Absolute          Absolute        Absolute            Absolute   Absolute   Absolute Absolute
           second         second            second          second              second     second     second   second
0x5E       Absolute       Absolute          Absolute        Absolute            Absolute   Absolute   Absolute Absolute
           frame          frame             frame           frame               frame      frame      frame    frame
Datapath Control Register 1—Address 1100010 (0x62)
Table 92. Datapath Control Register 1 Bit Map
7                6                5                  4                    3              2          1          0
SRC1             SRC0             REC2               REC1                 REC0           AUXO2      AUXO1      AUXO0
Table 93. Datapath Control Register 1 Bit Descriptions
Bit Name              Description
SRC[1:0]              Datapath source select for sample rate converter (SRC).
                        00 = ADC.
                        01 = DIR.
                        10 = Playback.
                        11 = Auxiliary in.
REC[2:0]              Datapath source select for record output port.
                        000 = ADC.
                        001 = DIR.
                        010 = Playback.
                        011 = Auxiliary in.
                        100 = SRC.
AUXO[2:0]             Datapath source select for auxiliary output port.
                        000 = ADC.
                        001 = DIR.
                        010 = Playback.
                        011 = Auxiliary in.
                        100 = SRC.
                                                             Rev. A | Page 46 of 60


                                                                                              ADAV803
Datapath Control Register 2—Address 1100011 (0x63)
Table 94. Datapath Control Register 2 Bit Map
7               6                 5                  4                   3         2    1     0
Reserved        Reserved          DAC2               DAC1                DAC0      DIT2 DIT1  DIT0
Table 95. Datapath Control Register 2 Bit Descriptions
Bit Name             Description
DAC[2:0]             Datapath source select for DAC.
                       00 = ADC.
                       01 = DIR.
                       10 = Playback.
                       11 = Auxiliary in.
                       100 = SRC.
DIT[2:0]             Datapath source select for DIT.
                       000 = ADC.
                       001 = DIR.
                       010 = Playback.
                       011 = Auxiliary in.
                       100 = SRC.
DAC Control Register 1—Address 1100100 (0x64)
Table 96. DAC Control Register 1 Bit Map
7               6                 5                  4                   3         2    1     0
DR_ALL          DR_DIG            CHSEL1             CHSEL0              POL1      POL0 MUTER MUTEL
Table 97. DAC Control Register 1 Bit Descriptions
Bit Name             Description
DR_ALL               Hard reset and power-down.
                       0 = Normal, output pins go to VREF level.
                       1 = Hard reset and low power, output pins go to AGND.
DR_DIG               DAC digital reset.
                       0 = Normal.
                       1 = Reset all except registers.
CHSEL[1:0]           DAC channel select.
                       00 = Normal, left-right.
                       01 = Both right.
                       10 = Both left.
                       11 = Swapped, right-left.
POL[1:0]             DAC channel polarity.
                       00 = Both positive.
                       01 = Left negative.
                       10 = Right negative.
                       11 = Both negative.
MUTER                Mute right channel.
                       0 = Mute.
                       1 = Normal.
MUTEL                Mute left channel.
                       0 = Mute.
                       1 = Normal.
                                                            Rev. A | Page 47 of 60


ADAV803
DAC Control Register 2—Address 1100101 (0x65)
Table 98. DAC Control Register 2 Bit Map
7              6                 5                4                   3         2     1      0
Reserved       Reserved          DMCLK1           DMCLK0              DFS1      DFS0  DEEM1  DEEM0
Table 99. DAC Control Register 2 Bit Descriptions
Bit Name            Description
DMCLK[1:0]          DAC MCLK divider.
                      00 = MCLK.
                      01 = MCLK/1.5.
                      10 = MCLK/2.
                      11 = MCLK/3.
DFS[1:0]            DAC interpolator select.
                      00 = 8 × (MCLK = 256 × fS).
                      01 = 4 × (MCLK = 128 × fS).
                      10 = 2 × (MCLK = 64 × fS).
                      11 = Reserved.
DEEM[1:0]           DAC de-emphasis select.
                      00 = None.
                      01 = 44.1 kHz.
                      10 = 32 kHz.
                      11 = 48 kHz.
DAC Control Register 3—Address 1100110 (0x66)
Table 100. DAC Control Register 3 Bit Map
7              6                 5                4                   3         2     1      0
Reserved       Reserved          Reserved         Reserved            Reserved  ZFVOL ZFDATA ZFPOL
Table 101. DAC Control Register 3 Bit Descriptions
Bit Name         Description
ZFVOL            DAC zero flag on mute and zero volume.
                    0 = Enabled.
                    1 = Disabled.
ZFDATA           DAC zero flag on zero data disable.
                    0 = Enabled.
                    1 = Disabled.
ZFPOL            DAC zero flag polarity.
                    0 = Active low.
                    1 = Active high.
                                                         Rev. A | Page 48 of 60


                                                                                                                        ADAV803
DAC Control Register 4—Address 1100111 (0x67)
Table 102. DAC Control Register 4 Bit Map
7              6                  5                  4                    3              2             1                0
Reserved       INTRPT             ZEROSEL1           ZEROSEL0             Reserved       Reserved      Reserved         Reserved
Table 103. DAC Control Register 4 Bit Descriptions
Bit Name          Description
INTRPT            This bit selects the functionality of the ZEROL/INT pin.
                     0 = Pin functions as a ZEROL flag pin.
                     1 = Pin functions as an interrupt pin.
ZEROSEL[1:0]      These bits control the functionality of the ZEROR pin when the ZEROL/INT pin is used as an interrupt.
                     00 = Pin functions as a ZEROR flag pin.
                     01 = Pin functions as a ZEROL flag pin.
                     10 = Pin is asserted when either the left or right channel is zero.
                     11 = Pin is asserted when both the left and right channels are zero.
DAC Left Volume—Address 1101000 (0x68)
Table 104. DAC Left Volume Register Bit Map
7              6                  5                  4                    3              2             1                0
DVOLL7         DVOLL6             DVOLL5             DVOLL4               DVOLL3         DVOLL2        DVOLL1           DVOLL0
Table 105. DAC Left Volume Register Bit Descriptions
Bit Name             Description
DVOLL[7:0]           DAC left channel volume control.
                       1111111 = 0 dBFS.
                       1111110 = −0.375 dBFS.
                       0000000 = −95.625 dBFS.
DAC Right Volume—Address 1101001 (0x69)
Table 106. DAC Right Volume Register Bit Map
7              6                  5                  4                    3              2             1                0
DVOLR7         DVOLR6             DVOLR5             DVOLR4               DVOLR3         DVOLR2         DVOLR1          DVOLR0
Table 107. DAC Right Volume Register Bit Descriptions
Bit Name            Description
DVOLR[7:0]          DAC right channel volume control.
                       1111111 = 0 dBFS.
                       1111110 = −0.375 dBFS.
                       0000000 = −95.625 dBFS.
DAC Left Peak Volume—Address 1101010 (0x6A)
Table 108. DAC Left Peak Volume Register Bit Map
7              6                  5                  4                    3              2             1                0
Reserved       Reserved           DLP5               DLP4                 DLP3           DLP2           DLP1            DLP0
Table 109. DAC Left Peak Volume Register Bit Descriptions
Bit Name            Description
DLP[5:0]            DAC left channel peak volume detection.
                       000000 = 0 dBFS.
                       000001 = −1 dBFS.
                       111111 = −63 dBFS.
                                                             Rev. A | Page 49 of 60


ADAV803
DAC Right Peak Volume—Address 1101011 (0x6B)
Table 110. DAC Right Peak Volume Register Bit Map
7              6                 5                 4                 3         2    1    0
Reserved       Reserved          DRP5              DRP4              DRP3      DRP2 DRP1 DRP0
Table 111. DAC Right Peak Volume Register Bit Descriptions
Bit Name            Description
DRP[5:0]            DAC right channel peak volume detection.
                       000000 = 0 dBFS.
                       000001 = −1 dBFS.
                       111111 = −63 dBFS.
ADC Left Channel PGA Gain—Address 1101100 (0x6C)
Table 112. ADC Left Channel PGA Gain Register Bit Map
7              6                 5                 4                 3         2    1    0
Reserved       Reserved          AGL5              AGL4              AGL3      AGL2 AGL1 AGL0
Table 113. ADC Left Channel PGA Gain Register Bit Descriptions
Bit Name            Description
AGL[5:0]            PGA left channel gain control.
                       000000 = 0 dB.
                       000001 = 0.5 dB.
                       …
                       101111 = 23.5 dB.
                       110000 = 24 dB.
                       …
                       111111 = 24 dB.
ADC Right Channel PGA Gain—Address 1101101 (0x6D)
Table 114. ADC Right Channel PGA Gain Register Bit Map
7              6                 5                 4                 3         2    1    0
Reserved       Reserved          AGR5              AGR4              AGR3      AGR2 AGR1 AGR0
Table 115. ADC Right Channel PGA Gain Register Bit Descriptions
Bit Name             Description
AGR[5:0]            PGA right channel gain control.
                       000000 = 0 dB.
                       000001 = 0.5 dB.
                       …
                       101111 = 23.5 dB.
                       110000 = 24 dB.
                       …
                       111111 = 24 dB.
                                                        Rev. A | Page 50 of 60


                                                                                             ADAV803
ADC Control Register 1—Address 1101110 (0x6E)
Table 116. ADC Control Register 1 Bit Map
7              6                 5               4                   3         2        1    0
AMC            HPF               PWRDWN          ANA_PD              MUTER     MUTEL    PLPD PRPD
Table 117. ADC Control Register 1 Bit Descriptions
Bit Name            Description
AMC                 ADC modulator clock.
                      0 = ADC MCLK/2 (128 × fS).
                      1 = ADC MCLK/4 (64 × fS).
HPF                 High-pass filter enable.
                      0 = Normal.
                      1 = HPF enabled.
PWRDWN              ADC power-down.
                      0 = Normal.
                      1 = Power-down.
ANA_PD              ADC analog section power-down.
                      0 = Normal.
                      1 = Power-down.
MUTER               Mute ADC right channel.
                      0 = Normal.
                      1 = Muted.
MUTEL               Mute ADC left channel.
                      0 = Normal.
                      1 = Muted.
PLPD                PGA left power-down.
                      0 = Normal.
                      1 = Power-down.
PRPD                PGA right power-down.
                      0 = Normal.
                      1 = Power-down.
ADC Control Register 2—Address 1101111 (0x6F)
Table 118. ADC Control Register 2 Bit Map
7              6                 5               4                   3         2        1    0
Reserved       Reserved          Reserved        BUF_PD              Reserved  Reserved MCD1 MCD0
Table 119. ADC Control Register 2 Bit Descriptions
Bit Name            Description
BUF_PD              Reference buffer power-down control.
                      0 = Normal.
                      1 = Power-down.
MCD[1:0]            ADC master clock divider.
                      00 = Divide by 1.
                      01 = Divide by 2.
                      10 = Divide by 3.
                      11 = Divide by 1.
                                                        Rev. A | Page 51 of 60


ADAV803
ADC Left Volume—Address 1110000 (0x70)
Table 120. ADC Left Volume Register Bit Map
7              6                 5               4                   3         2      1      0
AVOLL7         AVOLL6            AVOLL5          AVOLL4              AVOLL3    AVOLL2 AVOLL1 AVOLL0
Table 121. ADC Left Volume Register Bit Descriptions
Bit Name            Description
AVOLL[7:0]          ADC left channel volume control.
                       1111111 = 1.0 (0 dBFS).
                       1111110 = 0.996 (−0.00348 dBFS).
                       1000000 = 0.5 (−6 dBFS).
                       0111111 = 0.496 (−6.09 dBFS).
                       0000000 = 0.0039 (−48.18 dBFS).
ADC Right Volume—Address 1110001 (0x71)
Table 122. ADC Right Volume Register Bit Map
7              6                 5               4                   3         2      1      0
AVOLR7         AVOLR6            AVOLR5          AVOLR4              AVOLR3    AVOLR2 AVOLR1 AVOLR0
Table 123. ADC Right Volume Register Bit Descriptions
Bit Name            Description
AVOLR[7:0]          ADC right channel volume control.
                       1111111 = 1.0 (0 dBFS).
                       1111110 = 0.996 (−0.00348 dBFS).
                       1000000 = 0.5 (−6 dBFS).
                       0111111 = 0.496 (−6.09 dBFS).
                       0000000 = 0.0039 (−48.18 dBFS).
ADC Left Peak Volume—Address 1110010 (0x72)
Table 124. ADC Left Peak Volume Register Bit Map
7              6                 5               4                   3         2      1      0
Reserved       Reserved          ALP5            ALP4                ALP3      ALP2   ALP1   ALP0
Table 125. ADC Left Peak Volume Register Bit Descriptions
Bit Name             Description
ALP[5:0]            ADC left channel peak volume detection.
                       000000 = 0 dBFS.
                       000001 = −1 dBFS.
                       111111 = −63 dBFS.
ADC Right Peak Volume—Address 1110011 (0x73)
Table 126. ADC Right Peak Volume Register Bit Map
7              6                 5               4                   3         2      1      0
Reserved       Reserved          ARP5            ARP4                ARP3      ARP2   ARP1   ARP0
Table 127. ADC Right Peak Volume Register Bit Descriptions
Bit Name             Description
ARP[5:0]             ADC right channel peak volume detection.
                       000000 = 0 dBFS.
                       000001 = −1 dBFS.
                       111111 = −63 dBFS.
                                                        Rev. A | Page 52 of 60


                                                                                               ADAV803
PLL Control Register 1—Address 1110100 (0x74)
Table 128. PLL Control Register 1 Bit Map
7               6                 5                 4                   3         2      1     0
DIRIN_CLK1      DIRIN_CLK0        MCLKODIV          PLLDIV              PLL2PD    PLL1PD XTLPD SYSCLK3
Table 129. PLL Control Register 1 Bit Descriptions
Bit Name             Description
DIRIN_CLK[1:0]       Recovered S/PDIF clock sent to SYSCLK3.
                       00 = SYSCLK3 comes from PLL block.
                       01 = Reserved.
                       10 = Reserved.
                       11 = SYSCLK3 is the recovered S/PDIF clock from DIRIN.
MCLKODIV             Divide input MCLK by 2 to generate MCLKO.
                       0 = Disabled.
                       1 = Enabled.
PLLDIV               Divide XIN by 2 to generate the PLL master clock.
                       0 = Disabled.
                       1 = Enabled.
PLL2PD               Power-down PLL2.
                       0 = Normal.
                       1 = Power-down.
PLL1PD               Power-down PLL1.
                       0 = Normal.
                       1 = Power-down.
XTLPD                Power-down XTAL oscillator.
                       0 = Normal.
                       1 = Power-down.
SYSCLK3              Clock output for SYSCLK3.
                       0 = 512 × fS.
                       1 = 256 × fS.
                                                           Rev. A | Page 53 of 60


ADAV803
PLL Control Register 2—Address 1110101 (0x75)
Table 130. PLL Control Register 2 Bit Map
7               6                5                 4                  3         2   1    0
FS2_1           FS2_0            SEL2              DOUB2              FS1       FS0 SEL1 DOUB1
Table 131. PLL Control Register 2 Bit Descriptions
Bit Name            Description
FS2_[1:0]           Sample rate select for PLL2.
                       00 = 48 kHz.
                       01 = Reserved.
                       10 = 32 kHz.
                       11 = 44.1 kHz.
SEL2                Oversample ratio select for PLL2.
                       0 = 256 × fS.
                       1 = 384 × fS.
DOUB2               Double-selected sample rate on PLL2.
                       0 = Disabled.
                       1 = Enabled.
FS[1:0]             Sample rate select for PLL1.
                       00 = 48 kHz.
                       01 = Reserved.
                       10 = 32 kHz.
                       11 = 44.1 kHz.
SEL1                Oversample ratio select for PLL1.
                       0 = 256 × fS.
                       1 = 384 × fS.
DOUB1               Double-selected sample rate on PLL1.
                       0 = Disabled.
                       1 = Enabled.
                                                         Rev. A | Page 54 of 60


                                                                                                        ADAV803
Internal Clocking Control Register 1—Address 1110110 (0x76)
Table 132. Internal Clocking Control Register 1 Bit Map
7                6                 5                  4                    3         2        1        0
DCLK2            DCLK1             DCLK0              ACLK2                ACLK1     ACLK0    ICLK2_1  ICLK2_0
Table 133. Internal Clocking Control Register 1 Bit Descriptions
Bit Name              Description
DCLK[2:0]             DAC clock source select.
                        000 = XIN.
                        001 = MCLKI.
                        010 = PLLINT1.
                        011 = PLLINT2.
                        100 = DIR PLL (512 × fS).
                        101 = DIR PLL (256 × fS).
                        110 = XIN.
                        111 = XIN.
ACLK[2:0]             ADC clock source select.
                        000 = XIN.
                        001 = MCLKI.
                        010 = PLLINT1.
                        011 = PLLINT2.
                        100 = DIR PLL (512 × fS).
                        101 = DIR PLL (256 × fS).
                        110 = XIN.
                        111 = XIN.
ICLK2_[1:0]           Source selector for internal clock ICLK2.
                        00 = XIN.
                        01 = MCLKI.
                        10 = PLLINT1.
                        11 = PLLINT2.
Internal Clocking Control Register 2—Address 1110111 (0x77)
Table 134. Internal Clocking Control Register 2 Bit Map
7                6                 5                  4                    3         2        1        0
Reserved         Reserved          Reserved           ICLK1_1              ICLK1_0   PLL2INT1 PLL2INT0 PLL1INT
Table 135. Internal Clocking Control Register 2 Bit Descriptions
Bit Name              Description
ICLK1_[1:0]           Source selector for internal clock ICLK1.
                        00 = XIN.
                        01 = MCLKI.
                        10 = PLLINT1.
                        11 = PLLINT2.
PLL2INT[1:0]          PLL2 internal selector (see Figure 38).
                        00 = FS2.
                        01 = FS2/2.
                        10 = FS3.
                        11 = FS3/2.
PLL1INT               PLL1 internal selector.
                        0 = FS1.
                        1 = FS1/2.
                                                              Rev. A | Page 55 of 60


ADAV803
PLL Clock Source Register—Address 1111000 (0x78)
Table 136. PLL Clock Source Register Bit Map
7               6                 5                 4                     3              2            1        0
PLL2_Source     PLL1_Source       Reserved          Reserved              Reserved       Reserved     Reserved Reserved
Table 137. PLL Clock Source Register Bit Descriptions
Bit Name             Description
PLL2_Source          Selects the clock source for PLL2.
                       0 = XIN.
                       1 = MCLKI.
PLL1_Source          Selects the clock source for PLL1.
                       0 = XIN.
                       1 = MCLKI
PLL Output Enable—Address 1111010 (0x7A)
Table 138. PLL Output Enable Register Bit Map
7               6                 5                 4                     3              2            1        0
Reserved        Reserved          DIRINPD           DIRIN_PIN             Reserved       SYSCLK1      SYSCLK2  SYSCLK3
Table 139. PLL Output Enable Register Bit Descriptions
Bit Name             Description
DIRINPD              This bit powers down the S/PDIF receiver.
                       0 = Normal.
                       1 = Power-down.
DIRIN_PIN            This bit determines the input levels of the DIRIN pin.
                       0 = DIRIN accepts input signals down to 200 mV according to AES3 requirements.
                       1 = DIRIN accepts input signals as defined in the Specifications section.
SYSCLK1              Enables the SYSCLK1 output.
                       0 = Enabled.
                       1 = Disabled.
SYSCLK2              Enables the SYSCLK2 output.
                       0 = Enabled.
                       1 = Disabled.
SYSCLK3              Enables the SYSCLK3 output.
                       0 = Enabled.
                       1 = Disabled.
                                                             Rev. A | Page 56 of 60


                                                                                                        ADAV803
ALC Control Register 1—Address 1111011 (0x7B)
Table 140. ALC Control Register 1 Bit Map
7              6                 5                 4                    3              2         1      0
FSSEL1         FSSEL0            GAINCNTR1         GAINCNTR0            RECMODE1       RECMODE0  LIMDET ALCEN
Table 141. ALC Control Register 1 Bit Descriptions
Bit Name            Description
FSSEL[1:0]          These bits should equal the sample rate of the ADC.
                      00 = 96 kHz.
                      01 = 48 kHz.
                      10 = 32 kHz.
                      11 = Reserved.
GAINCNTR[1:0]       These bits determine the limit of the counter used in limited recovery mode.
                      00 = 3.
                      01 = 7.
                      10 = 15.
                      11 = 31.
RECMODE[1:0]        These bits determine which recovery mode is used by the ALC section.
                      00 = No recovery.
                      01 = Normal recovery.
                      10 = Limited recovery.
                      11 = Reserved.
LIMDET              These bits limit detect mode.
                      0 = ALC is used when either channel exceeds the set limit.
                      1 = ALC is used only when both channels exceed the set limit.
ALCEN               These bits enable ALC.
                      0 = Disable ALC.
                      1 = Enable ALC.
                                                           Rev. A | Page 57 of 60


ADAV803
ALC Control Register 2— Address = 1111100 (0x7C)
Table 142. ALC Control Register 2 Bit Map
7              6                 5                    4                   3              2                    1                   0
Reserved       RECTH1            RECTH0               ATKTH1              ATKTH0         RECTIME1             RECTIME0            ATKTIME
Table 143. ALC Control Register 2 Bit Descriptions
Bit Name            Description
RECTH[1:0]          Recovery threshold.
                      00 = −2 dB.
                      01 = −3 dB.
                      10 = −4 dB.
                      11 = −6 dB.
ATKTH[1:0]          Attack threshold.
                      00 = 0 dB.
                      01 = −1 dB.
                      10 = −2 dB.
                      11 = −4 dB.
RECTIME[1:0]        Recovery time selection.
                      00 = 32 ms.
                      01 = 64 ms.
                      10 = 128 ms.
                      11 = 256 ms.
ATKTIME             Attack timer selection.
                      0 = 1 ms.
                      1 = 4 ms.
ALC Control Register 3—Address 1111101 (0x7D)
Table 144. ALC Control Register 3 Bit Map
7              6                 5                    4                   3              2                    1                   0
ALC RESET      ALC RESET         ALC RESET            ALC RESET           ALC RESET      ALC RESET            ALC RESET           ALC RESET
Table 145. ALC Control Register 3 Bit Description
Bit Name            Description
ALC RESET           A write to this register restarts the ALC operation. The value written to this register is irrelevant. A read from this
                    register gives the gain reduction factor.
                                                             Rev. A | Page 58 of 60


                                                                                                                                      ADAV803
LAYOUT CONSIDERATIONS
Getting the best performance from the ADAV803 requires a                         The PLL has its own power supply pins. To get the best
careful layout of the printed circuit board (PCB). Using separate                performance from the PLL and from the rest of the ADAV803,
analog and digital ground planes is recommended, because                         it is recommended that a separate analog supply be used. Where
these give the currents a low resistance path back to the power                  this is not possible, the user must decide whether to connect the
supplies. The ground planes should be connected in only one                      PLL supply to the analog (AVDD) or digital (DVDD) supply.
place, usually under the ADAV803, to prevent ground loops.                       Connecting the PLL supply to AVDD gives the best jitter
The analog and digital supply pins should be decoupled to their                  performance, but can degrade the performance of the ADC and
respective ground pins with a 10 μF to 47 μF tantalum capacitor                  DAC sections slightly due to the increased digital noise created
and a 0.1 μF ceramic capacitor. These capacitors should be                       on the AVDD by the PLL. Connecting the PLL supply to DVDD
placed as close as possible to the supply pins.                                  keeps digital noise away from the analog supply, but the jitter
                                                                                 specifications might be reduced depending on the quality of the
ADC                                                                              digital supply. Using the layout recommendations described in
The ADC uses a switch capacitor input stage and is, therefore,                   this section helps to reduce these effects.
particularly sensitive to digital noise. Sources of noise, such as
                                                                                 RESET AND POWER-DOWN CONSIDERATIONS
PLLs or clocks, should not be routed close to the ADC section.
The CAPxN and CAPxP pins form a charge reservoir for the                         When the ADAV803 is held in reset by bringing the RESET
switched capacitor section of the ADC, so keeping these nodes                    pin low, a number of circuit blocks remain powered up. For
electrically quiet is a key factor in ensuring good performance.                 example, the crystal oscillator circuit based around the XIN
The capacitors connected to these pins should be of good                         and XOUT pins is still active, so that a stable clock source
quality, either NPO or COG, and should be placed as close as                     is available when the ADAV803 is taken out of reset. In addi-
possible to CAPxN and CAPxP.                                                     tion, the VCO associated with the S/PDIF receiver is active so
                                                                                 that the receiver locks to the incoming S/PDIF stream in the
DAC                                                                              shortest possible time. Where power consumption is a concern,
The DAC requires an analog filter to filter out-of-band noise                    the individual blocks of the ADAV803 can be powered down via
from the analog output. A third-order Bessel filter is                           the control registers to gain significant power savings. Table 146
recommended, although the filter to use depends on the                           shows typical power savings when using the power-down bits
requirements of the application.                                                 in the control registers.
PLL                                                                              Table 146. Typical Power Requirements
The PLL can be used to generate digital clocks, either for use                   Operating       AVDD      DVDD     ODVDD      DIR_VDD      Power
internally or to clock external circuitry. Because every clock is a              Mode            (mA)      (mA)     (mA)       (mA)         (mW)
potential source of noise, care should be taken when using the                   Normal          50        25       5          5            280.5
PLL. The ADAV803’s PLL outputs can be enabled or disabled,                       Reset low       30        4        2.5        1            123.75
as required. If the PLL clocks are not required by external                      Power-          12        0.1      1.3        0.7          46.53
circuitry, it is recommended that the outputs be disabled. To                    down bits
reduce cross-coupling between clocks, a digital ground trace
can be routed on either side of the PLL clock signal, if required.
                                                                Rev. A | Page 59 of 60


ADAV803
OUTLINE DIMENSIONS
                                                                                                           12.20
                                                                   0.75                                    12.00 SQ
                                                                   0.60        1.60                        11.80
                                                                   0.45        MAX
                                                                                            64                                 49
                                                                                        1                                           48
                                                                                                  PIN 1
                                                                                                                                         10.20
                                                                                                          TOP VIEW                       10.00 SQ
                                                                                                          (PINS DOWN)
                                                                                                                                          9.80
                                  1.45
                                                           0.20
                                  1.40
                                                           0.09
                                  1.35
                                                             7°
                                                            3.5°
                                     0.15                                              16                                           33
                                                             0°
                                     0.05   SEATING                                         17                                 32
                                            PLANE      0.08
                                                       COPLANARITY                VIEW A                                0.27
                                                                                                    0.50
                                                                                                    BSC                 0.22
                                         VIEW A                                                  LEAD PITCH             0.17
                                   ROTATED 90° CCW
                                                                                                                                                    051706-A
                                                            COMPLIANT TO JEDEC STANDARDS MS-026-BCD
                                                         Figure 55. 64-Lead Low Profile Quad Flat Package [LQFP]
                                                                                (ST-64-2)
                                                                     Dimensions shown in millimeters
ORDERING GUIDE
                                 Temperature            Control                                                                                                Package
Model                            Range                  Interface         DAC Outputs             Package Description                                          Option
ADAV803ASTZ 1                    −40°C to +85°C         I2C               Single-Ended            64-Lead Low Profile Quad Flat Package [LQFP]                 ST-64-2
ADAV803ASTZ-REEL1                −40°C to +85°C         I2C               Single-Ended            64-Lead Low Profile Quad Flat Package [LQFP]                 ST-64-2
EVAL-ADAV803EBZ1                                                                                  Evaluation Board
1
    Z = RoHS Compliant Part.
    Purchase of licensed I²C components of Analog Devices or one of its sublicensed Associated Companies conveys a license for the purchaser under the Philips I²C
    Patent Rights to use these components in an I²C system, provided that the system conforms to the I²C Standard Specification as defined by Philips.
©2004–2007 Analog Devices, Inc. All rights reserved. Trademarks and
registered trademarks are the property of their respective owners.
                                                   D04756-0-7/07(A)
                                                                            Rev. A | Page 60 of 60


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Analog Devices Inc.:
 ADAV803ASTZ EVAL-ADAV803EBZ ADAV803ASTZ-REEL
