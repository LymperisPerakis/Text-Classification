19-1453; Rev 1; 9/10
SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                            General Description                                                                      Features
                                                                                                                                     MAX3140
The MAX3140 is a complete universal asynchronous                o Integrated UART and RS-485/RS-422 Transceiver
receiver-transmitter (UART) and a true fail-safe RS-              in a Single 28-Pin QSOP
485/RS-422 transceiver combined in a single 28-pin              o SPI/MICROWIRE-Compatible Interface Saves µC
QSOP package for space-, cost-, and power-con-                    I/O Pins
strained applications. The MAX3140 saves additional
board space as well as microcontroller (µC) I/O pins by         o True Fail-Safe Receiver Output Eliminates
featuring an SPI™/QSPI™/MICROWIRE™-compatible                     Complex Network Termination
serial interface. It is pin-programmable for configuration      o Pin-Programmable RS-485/RS-422 Features
in all RS-485/RS-422 networks.                                      Half/Full-Duplex Operation
The MAX3140 includes a single RS-485/RS-422 driver                  Slew-Rate Limiting for Reduced EMI
and receiver featuring true fail-safe circuitry, which              115kbps/500kbps/10Mbps Data Rates
guarantees a logic-high receiver output when the                    Receiver/Transmitter Phase for Twisted-Pair
receiver inputs are open or shorted. This feature pro-                 Polarity Reversal
vides immunity to faults without requiring complex ter-         o Full-Featured UART
mination. The MAX3140 provides software-selectable                  Programmable Up to 230k baud with a
control of half- or full-duplex operation, data rate, slew             3.6864MHz Crystal
rate, and transmitter and receiver phase. The RS-485                8-Word Receive FIFO Minimizes Processor
driver slew rate is programmable to minimize EMI and                   Overhead
results in maximum data rates of 115kbps, 500kbps,                  9-Bit Address-Recognition Interrupt
and 10Mbps. Independent transmitter/receiver phase              o Allows Up to 256 Transceivers on the Bus
control enables software correction of twisted-pair
polarity reversal. A 1/8-unit-load receiver input imped-        o Low 20µA Hardware Shutdown Mode
ance allows up to 256 transceivers on the bus.                  o Hardware/Software-Compatible with MAX3100
The MAX3140’s UART includes an oscillator circuit                 and MAX3089
derived from an external crystal, and a baud-rate gen-
erator with software-programmable divider ratios for all
                                                                                          Ordering Information
common baud rates from 300 baud to 230k baud. The                      PART            TEMP. RANGE            PIN-PACKAGE
UART features an 8-word-deep receive FIFO that mini-             MAX3140CEI+            0°C to +70°C          28 QSOP
mizes processor overhead and provides a flexible inter-
                                                                 MAX3140EEI+           -40°C to +85°C         28 QSOP
rupt with four maskable sources, including address
recognition on 9-bit networks. Two control lines are            +Denotes a lead(Pb)-free/RoHS-compliant package.
included for hardware handshaking—one input and
one output.                                                                     Typical Application Circuit
The MAX3140 operates from a single +5V supply and
typically consumes only 645µA with the receiver active.
Hardware-invoked shutdown reduces supply current to                                          MAX3140
only 20µA. The UART and RS-485/RS-422 functions can                     SPI/                CONTROL         RS-485
be used together or independently since the two func-                  MICRO-                LOGIC          RS-422
tions share only supply and ground connections (the                     WIRE
                                                                                                                            Rt
MAX3140 is hardware- and software-compatible with the                     CS
MAX3100 and MAX3089).                                                   SCLK
                                                                                UART
                                        Applications              µP     DIN
                                                                        DOUT
Industrial-Control                Transceivers for EMI-
Local Area Networks               Sensitive Applications
                                                                          IRQ
HVAC and Building Control         Embedded Systems
                                                                                                                            Rt
Point-of-Sale Devices             Intelligent Instrumentation
SPI/QSPI are trademarks of Motorola, Inc.
                                                                                                            HALF/FULL-DUPLEX
MICROWIRE is a trademark of National Semiconductor Corp.                                  H/F SRL TXP RXP
                                                                                                                RS-485/RS-422
Pin Configuration appears at end of data sheet.
                       ________________________________________________________________ Maxim Integrated Products                1
For pricing, delivery, and ordering information, please contact Maxim Direct at 1-888-629-4642,
or visit Maxim’s website at www.maxim-ic.com.


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
          ABSOLUTE MAXIMUM RATINGS
MAX3140
          VCC to GND ..........................................................................+6V       X2, DOUT, IRQ Short-Circuit Duration
          Input Voltage to GND (CS, SHDN, X1, CTS, RX, DIN, SCLK,                                          (to VCC or GND) ......................................................Continuous
            RE, DE, H/F, SRL, TXP, RXP, Dl) .............-0.3V to (VCC + 0.3V)                           Continuous Power Dissipation (TA = +70°C)
          Output Voltage to GND                                                                            28-pin QSOP (derate 10.8mW/°C above +70°C)..........860mW
            DOUT, RTS, TX, X2, RO...........................-0.3V to (VCC + 0.3V)                        Operating Temperature Ranges
            IRQ ........................................................................-0.3V to +6V       MAX3140CEI .......................................................0°C to +70°C
          Driver Output Voltage (Y, Z) ...............................................±13V                 MAX3140EEI ....................................................-40°C to +85°C
          Receiver Input Voltage, Half Duplex (Y, Z)......................... ±13V                       Storage Temperature Range .............................-65°C to +150°C
          Receiver Input Voltage, Full Duplex (A, B) .........................±25V                       Lead Temperature (soldering, 10sec) .............................+300°C
          TX, RTS Output Current ...................................................100mA                Soldering Temperature (reflow) .......................................+260°C
          Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional
          operation of the device at these or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to
          absolute maximum rating conditions for extended periods may affect device reliability.
          ELECTRICAL CHARACTERISTICS
          (VCC = +5V ±5%, DE = VCC, RE = GND, SHDN = VCC, fXTL = 1.8432MHz, TA = TMIN to TMAX, unless otherwise noted. Typical values
          are measured with VCC = +5V, UART configured for 9600 baud, TA = +25°C.) (Note 1)
                       PARAMETER                           SYMBOL                                  CONDITIONS                                MIN         TYP         MAX        UNITS
           POWER SUPPLY
            Supply Voltage                                     VCC                                                                           4.75                     5.25          V
                                                                                                                         DE = VCC                         0.7          1.9
                                                                             SHDN = VCC;               SRL = VCC
                                                                                                                         DE = GND                        0.64          1.6
            Supply Current                                      ICC          SHDNi bit = 0,                                                                                        mA
                                                                             no load                   SRL = GND         DE = VCC                        0.74           2
                                                                                                       or open           DE = GND                        0.69          1.8
            Supply Current with Only UART ICC SHDN
                                                                             SHDN = GND or SHDNi bit = 1                                                 0.47           1          mA
            Shut Down                       UART
            Supply Current with Both
                                                           ICC SHDN          SHDN = GND or SHDNi bit = 1;
            RS-485 Transceiver and UART                                                                                                                                20          µA
                                                             (FULL)          DE = GND; RE = VCC
            Shut Down
           UART OSCILLATOR INPUT (X1)
            Input High Voltage                                 VIH1                                                                        0.7VCC                                   V
            Input Low Voltage                                  VIL1                                                                                                 0.2VCC          V
                                                                                                            SHDNi bit = 0                                              25
            Input Current                                       IIN1         VX1 = 0 or VCC                                                                                        µA
                                                                                                            SHDNi bit = 1                                               2
            Input Capacitance                                  CIN1                                                                                        5                       pF
           UART LOGIC INPUTS (DIN, SCLK, CS, SHDN, CTS, RX)
            Input High Voltage                                 VIH2                                                                        0.7VCC                                   V
            Input Low Voltage                                  VIL2                                                                                                 0.3VCC          V
            Input Hysteresis                                 VHYST2                                                                                       250                      mV
            Input Leakage Current                             ILKG1                                                                                                    ±1          µA
            Input Capacitance                                  CIN2                                                                                        5                       pF
           UART OUTPUTS (DOUT, TX, RTS)
                                                                             ISOURCE = 5mA; DOUT, RTS                                      VCC - 0.5
            Output High Voltage                               VOH1                                                                                                                  V
                                                                             ISOURCE = 10mA; TX only                                       VCC - 0.5
                                                                             ISINK = 4mA; DOUT, RTS                                                                    0.4
            Output Low Voltage                                 VOL1                                                                                                                 V
                                                                             ISINK = 25mA; TX only                                                                     0.9
            Output Leakage                                    ILKG2          CS = VCC; DOUT only                                                                       ±1          µA
            Output Capacitance                               COUT1                                                                                         5                       pF
          2     _______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
ELECTRICAL CHARACTERISTICS (continued)
                                                                                                                                 MAX3140
(VCC = +5V ±5%, DE = VCC, RE = GND, SHDN = VCC, fXTL = 1.8432MHz, TA = TMIN to TMAX, unless otherwise noted. Typical values
are measured with VCC = +5V, UART configured for 9600 baud, TA = +25°C.) (Note 1)
         PARAMETER                SYMBOL                    CONDITIONS                    MIN       TYP      MAX       UNITS
UART IRQ OUTPUT (Open Drain)
 Output Low Voltage                 VOL2    ISINK = 4mA                                                       0.4       V
 Output Leakage                    ILKG3    V IRQ = VCC                                                        ±1       µA
 Output Capacitance                COUT2                                                             5                  pF
RS-485 DRIVER
                                    VOD1    No load, Figure 1                                                  5
 Differential Output Voltage                R = 50Ω (RS-422), Figure 1                    2.0                           V
                                    VOD2
                                            R = 27Ω (RS-422), Figure 1                    1.5
 Change in Magnitude of
                                   ΔVOD     R = 50Ω or R = 27Ω, Figure 1 (Note 2)                             0.2       V
 Differential Output Voltage
 Common-Mode Output
                                    VOC     R = 50Ω or R = 27Ω, Figure 1                                       3        V
 Voltage
 Change In Magnitude of
                                   ΔVOC     R = 50Ω or R = 27Ω, Figure 1 (Note 2)                             0.2       V
 Common-Mode Voltage
                                            DE, Dl, RE                                    2.0
 Input High Voltage                 VIH1                                                                                V
                                            H/F, TXP, RXP                                 2.4
 Input Low Voltage                  VIL1    DE, Dl, RE, H/F, TXP, RXP                                         0.8       V
 DI Input Hysteresis                VHYS    SRL = VCC or unconnected                                100                 mV
                                    IIN1    DE, DI, RE                                                         ±2
 Input Current                                                                                                          µA
                                    IIN2    H/F, TXP, RXP, internal pull-down              10                  40
 SRL Input High Voltage             VIH2                                                VCC - 0.8                       V
 SRL Input Middle Voltage           VIM2    (Note 3)                                    0.4 · VCC          0.6 · VCC    V
 SRL Input Low Voltage              VIL2                                                                      0.8       V
                                            SRL = VCC                                                          75
 SRL Input Current                  IIN3                                                                                µA
                                            SRL = GND (Note 3)                            -75
 Full-Duplex Input Current                  DE = GND                VIN = 12V                                 125
                                    IIN4                                                                                µA
 (A and B)                                  VCC = GND or 5.25V      VIN = -7V                                 -75
 Full-Duplex Output Leakage                 DE = GND                VIN = 12V                                 125
                                     IO                                                                                 µA
 (Y and Z)                                  VCC = GND or 5.25V      VIN = -7V             -100
                                                                    -7V ≤ VOUT ≤ VCC      -250
 Short-Circuit Output Current       IOSD    (Note 4)                0 ≤ VOUT ≤ 12V                            250       mA
                                                                    0 ≤ VOUT ≤ VCC        ±25
RS-485 RECEIVER
 Differential Threshold Voltage     VTH     -7V ≤ VCM ≤ +12V                              -200      -125      -50       mV
 Input Hysteresis                   ΔVTH                                                            25                  mV
 Output High Voltage                VOH     ISOURCE = 4mA, VID = -50mV                  VCC - 1.5                       V
 Output Low Voltage                 VOL     ISINK = 4mA, VID = -200mV                                         0.4       V
 Three-State Output Current         IOZR    0.4V ≤ VO ≤ 2.4V                                                   ±1       µA
 Input Resistance                   RIN     -7V ≤ VCM ≤ 12V                                96                           kΩ
 Output Short-Circuit Current       IOSR    0 ≤ VRO ≤ VCC                                 ±7                  ±95       mA
                       _______________________________________________________________________________________               3


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
          UART SWITCHING CHARACTERISTICS
MAX3140
          (VCC = +5V ±5%, fXTL = 1.8432MHz, TA = TMIN to TMAX, unless otherwise noted. Typical values are measured with VCC = +5V,
          UART configured for 9600 baud, TA = +25°C.) (Note 1)
                  PARAMETER              SYMBOL                     CONDITIONS                   MIN      TYP     MAX     UNITS
          UART AC TIMING (Figure 1)
           CS Low to DOUT Valid             tDV     CLOAD = 100pF                                                  100      ns
           CS High to DOUT Tri-State        tTR     CLOAD = 100pF, R CS = 10kΩ                                     100      ns
           CS to SCLK Setup Time           tCSS                                                   100                       ns
           CS to SCLK Hold Time            tCSH                                                    0                        ns
           SCLK Fall to DOUT Valid          tDO     CLOAD = 100pF                                                  100      ns
           DIN to SCLK Setup Time           tDS                                                   100                       ns
           DIN to SCLK Hold Time            tDH                                                    0                        ns
           SCLK Period                      tCP                                                   238                       ns
           SCLK High Time                   tCH                                                   100                       ns
           SCLK Low Time                    tCL                                                   100                       ns
           SCLK Rising Edge to CS
                                           tCS0                                                   100                       ns
           FaIling
           CS Rising Edge to SCLK
                                           tCS1                                                   200                       ns
           Rising
           CS High Pulse Width             tCSW                                                   200                       ns
           Output Rise Time                  tr     TX, RTS, DOUT; CLOAD = 100pF                           10               ns
           Output Fall Time                  tf     TX, RTS, DOUT, IRQ; CLOAD = 100pF                      10               ns
          4   _______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
SWITCHING CHARACTERISTICS—SRL = Unconnected
                                                                                                                                 MAX3140
(VCC = +5V ±5%, TA = TMIN to TMAX, unless otherwise noted. Typical values are at VCC = +5V and TA = +25°C.)
           PARAMETER               SYMBOL                      CONDITIONS                   MIN      TYP      MAX    UNITS
                                     tDPLH      Figures 3 and 5, RDIFF = 54Ω,                500     2030     2600
 Driver Input to Output                                                                                               ns
                                     tDPHL      CL1 = CL2 = 100pF                            500     2030     2600
 Driver Output Skew                             Figures 3 and 5, RDIFF = 54Ω,
                                    tDSKEW                                                             -3     ±200    ns
 | tDPLH - tDPHL |                              CL1 = CL2 = 100pF
                                                Figures 3 and 5, RDIFF = 54Ω,
 Driver Rise or Fall Time           tDR, tDF                                                 667     1320     2500    ns
                                                CL1 = CL2 = 100pF
 Maximum Data Rate                   fMAX                                                    115                     kbps
 Driver Enable to Output High        tDZH       Figures 4 and 6, CL = 100pF, S2 closed                        3500    ns
 Driver Enable to Output Low          tDZL      Figures 4 and 6, CL = 100pF, S1 closed                        3500    ns
 Driver Disable Time from Low         tDLZ      Figures 4 and 6, CL = 15pF, S1 closed                         100     ns
 Driver Disable Time from High       tDHZ       Figures 4 and 6, CL = 15pF, S2 closed                         100     ns
                                     tRPLH,     Figures 7 and 9, | VID | ≥ 2.0V,
 Receiver Input to Output                                                                             127     200     ns
                                     tRPHL      rise and fall time of VID ≤ 15ns
 | tRPLH - tRPHL | Differential                 Figures 7 and 9, | VID | ≥ 2.0V,
                                     tRSKD                                                             3      ±30     ns
 Receiver Skew                                  rise and fall time of VID ≤ 15ns
 Receiver Enable to Output Low        tRZL      Figures 2 and 8, CL = 100pF, S1 closed                20       50     ns
 Receiver Enable to Output High       tRZH      Figures 2 and 8, CL = 100pF, S2 closed                20       50     ns
 Receiver Disable Time from Low       tRLZ      Figures 2 and 8, CL = 100pF, S1 closed                20       50     ns
 Receiver Disable Time from
                                      tRHZ      Figures 2 and 8, CL = 100pF, S2 closed                20       50     ns
 High
 Time to Shutdown                    tSHDN      (Note 5)                                     50       200     600     ns
 Driver Enable from Shutdown to
                                   tDZH(SHDN)   Figures 4 and 6, CL = 15pF, S2 closed                         6000    ns
 Output High
 Driver Enable from Shutdown to
                                   tDZL(SHDN)   Figures 4 and 6, CL = 15pF, S1 closed                         6000    ns
 Output Low
 Receiver Enable from Shutdown
                                   tRZH(SHDN)   Figures 2 and 8, CL = 100pF, S2 closed                        3500    ns
 to Output High
 Receiver Enable from Shutdown
                                   tRZL(SHDN)   Figures 2 and 8, CL = 100pF, S1 closed                        3500    ns
 to Output Low
                       _______________________________________________________________________________________               5


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
          SWITCHING CHARACTERISTICS—SRL = VCC
MAX3140
          (VCC = +5V ±5%, TA = TMIN to TMAX, unless otherwise noted. Typical values are at VCC = +5V and TA = +25°C.)
                     PARAMETER               SYMBOL                     CONDITIONS                    MIN      TYP      MAX    UNITS
                                              tDPLH      Figures 3 and 5, RDIFF = 54Ω,                250      720      1000
           Driver Input to Output                                                                                               ns
                                              tDPHL      CL1 = CL2 = 100pF                            250      720      1000
           Driver Output Skew                            Figures 3 and 5, RDIFF = 54Ω,
                                              tDSKEW                                                            -3      ±100    ns
           | tDPLH - tDPHL |                             CL1 = CL2 = 100pF
                                                         Figures 3 and 5, RDIFF = 54Ω,
           Driver Rise or Fall Time           tDR, tDF                                                200      530      950     ns
                                                         CL1 = CL2 = 100pF
           Maximum Data Rate                   fMAX                                                   500                      kbps
           Driver Enable to Output High        tDZH      Figures 4 and 6, CL = 100pF, S2 closed                         2500    ns
           Driver Enable to Output Low         tDZL      Figures 4 and 6, CL = 100pF, S1 closed                         2500    ns
           Driver Disable Time from Low        tDLZ      Figures 4 and 6, CL = 15pF, S1 closed                          100     ns
           Driver Disable Time from High       tDHZ      Figures 4 and 6, CL = 15pF, S2 closed                          100     ns
                                              tRPLH,     Figures 7 and 9, | VID | ≥ 2.0V,
           Receiver Input to Output                                                                            127      200     ns
                                              tRPHL      rise and fall time of VID ≤ 15ns
           | tRPLH - tRPHL | Differential                Figures 7 and 9, | VID | ≥ 2.0V,
                                              tRSKD                                                              3      ±30     ns
           Receiver Skew                                 rise and fall time of VID ≤ 15ns
           Receiver Enable to Output Low       tRZL      Figures 2 and 8, CL = 100pF, S1 closed                 20       50     ns
           Receiver Enable to Output High      tRZH      Figures 2 and 8, CL = 100pF, S2 closed                 20       50     ns
           Receiver Disable Time from Low      tRLZ      Figures 2 and 8, CL = 100pF, S1 closed                 20       50     ns
           Receiver Disable Time from
                                               tRHZ      Figures 2 and 8, CL = 100pF, S2 closed                 20       50     ns
           High
           Time to Shutdown                   tSHDN      (Note 5)                                      50      200      600     ns
           Driver Enable from Shutdown to
                                            tDZH(SHDN)   Figures 4 and 6, CL = 15pF, S2 closed                          4500    ns
           Output High
           Driver Enable from Shutdown to
                                            tDZL(SHDN)   Figures 4 and 6, CL = 15pF, S1 closed                          4500    ns
           Output Low
           Receiver Enable from Shutdown
                                            tRZH(SHDN)   Figures 2 and 8, CL = 100pF, S2 closed                         3500    ns
           to Output High
           Receiver Enable from Shutdown
                                            tRZL(SHDN)   Figures 2 and 8, CL = 100pF, S1 closed                         3500    ns
           to Output Low
          6   _______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
SWITCHING CHARACTERISTICS—SRL = GND
                                                                                                                                           MAX3140
(VCC = +5V ±5%, TA = TMIN to TMAX, unless otherwise noted. Typical values are at VCC = +5V and TA = +25°C.)
          PARAMETER                  SYMBOL                       CONDITIONS                       MIN       TYP      MAX      UNITS
                                       tDPLH       Figures 3 and 5, RDIFF = 54Ω,                              34       60
 Driver Input to Output                                                                                                          ns
                                       tDPHL       CL1 = CL2 = 100pF                                          34       60
 Driver Output Skew                                Figures 3 and 5, RDIFF = 54Ω,
                                      tDSKEW                                                                 -2.5      ±10       ns
 | tDPLH - tDPHL |                                 CL1 = CL2 = 100pF
                                                   Figures 3 and 5, RDIFF = 54Ω,
 Driver Rise or Fall Time             tDR, tDF                                                                14       25        ns
                                                   CL1 = CL2 = 100pF
 Maximum Data Rate                      fMAX                                                        10                         Mbps
 Driver Enable to Output High           tDZH       Figures 4 and 6, CL = 100pF, S2 closed                              150       ns
 Driver Enable to Output Low            tDZL       Figures 4 and 6, CL = 100pF, S1 closed                              150       ns
 Driver Disable Time from Low           tDLZ       Figures 4 and 6, CL = 15pF, S1 closed                               100       ns
 Driver Disable Time from High          tDHZ       Figures 4 and 6, CL = 15pF, S2 closed                               100       ns
                                       tRPLH,      Figures 7 and 9, | VID | ≥ 2.0V,
 Receiver Input to Output                                                                                    106       150       ns
                                       tRPHL       rise and fall time of VID ≤ 15ns
 | tRPLH - tRPHL | Differential                    Figures 7 and 9, | VID | ≥ 2.0V,
                                       tRSKD                                                                  0        ±10       ns
 Receiver Skew                                     rise and fall time of VID ≤ 15ns
 Receiver Enable to Output Low          tRZL       Figures 2 and 8, CL = 100pF, S1 closed                     20       50        ns
 Receiver Enable to Output High         tRZH       Figures 2 and 8, CL = 100pF, S2 closed                     20       50        ns
 Receiver Disable Time from Low         tRLZ       Figures 2 and 8, CL = 100pF, S1 closed                     20       50        ns
 Receiver Disable Time from
                                        tRHZ       Figures 2 and 8, CL = 100pF, S2 closed                     20       50        ns
 High
 Time to Shutdown                      tSHDN       (Note 5)                                         50       200       600       ns
 Driver Enable from Shutdown to
                                    tDZH(SHDN)     Figures 4 and 6, CL = 15pF, S2 closed                               250       ns
 Output High
 Driver Enable from Shutdown to
                                     tDZL(SHDN)    Figures 4 and 6, CL = 15pF, S1 closed                               250       ns
 Output Low
 Receiver Enable from Shutdown
                                    tRZH(SHDN)     Figures 2 and 8, CL = 100pF, S2 closed                             3500       ns
 to Output High
 Receiver Enable from Shutdown
                                     tRZL(SHDN)    Figures 2 and 8, CL = 100pF, S1 closed                             3500       ns
 to Output Low
Note 1: All currents into the device are positive; all currents out of the device are negative. All voltages are referred to device
        ground unless otherwise noted.
Note 2: ΔVOD and ΔVOC are the changes in VOD and VOC, respectively, when the Dl input changes state.
Note 3: The SRL pin is internally biased to VCC/2 by a 100kΩ/100kΩ resistor-divider. It is guaranteed to be VCC/2 if left unconnected.
Note 4: Maximum current level applies to peak current just prior to foldback-current limiting; minimum current level applies during
        current limiting.
Note 5: The device is put into shutdown by bringing RE high and DE low. If the enable inputs are in this state for less than 50ns, the
        device is guaranteed not to enter shutdown. If the enable inputs are in this state for at least 600ns, the device is guaranteed
        to have entered shutdown.
                     _______________________________________________________________________________________                           7


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
                                                                                                                                                                                             Typical Operating Characteristics
MAX3140
          (VCC = +5V, TA = +25°C, unless otherwise noted.)
                                                        UART SUPPLY CURRENT                                                                                      UART SHUTDOWN CURRENT                                                                                               UART SUPPLY CURRENT
                                                          vs. TEMPERATURE                                                                                           vs. TEMPERATURE                                                                                                     vs. BAUD RATE
                                    1000                                                                                                            10                                                                                                             400
                                                                                                       MAX3140-01                                                                                                     MAX3140-02                                                                                             MAX3140-03
                                                1.8432MHz CRYSTAL                                                                                                                          1.8432MHz CRYSTAL                                                               1.8432 MHz
                                    900         TRANSMITTING AT 115.2 kbps                                                                           9                                                                                                                      CRYSTAL
                                                                                                                                                                                                                                                                   350                         TRANSMITTING
                                    800                                                                                                              8
          SUPPLY CURRENT (μA)                                                                                            SHUTDOWN CURRENT (μA)                                                                                     SUPPLY CURRENT (μA)
                                    700                                                                                                              7                                                                                                             300
                                    600                                                                                                              6                                                                                                                                                           STANDBY
                                                                                                                                                                                                                                                                   250
                                    500                                                                                                              5
                                    400                                                                                                              4                                                                                                             200
                                    300                                                                                                              3                                                                                                             150
                                    200                                                                                                              2
                                                                                                                                                                                                                                                                   100
                                    100                                                                                                              1
                                      0                                                                                                              0                                                                                                              50
                                           -40    -20        0       20   40       60           80   100                                                 -40   -20         0          20     40     60       80   100                                                    100          1000          10k         100k        1M
                                                                 TEMPERATURE (°C)                                                                                              TEMPERATURE (°C)                                                                                               BAUD RATE (bps)
                                                    UART SUPPLY CURRENT vs.                                                                                    TX, RTS, DOUT OUTPUT CURRENT                                                                                  RS-485 TRANSCEIVER NO-LOAD
                                                   EXTERNAL CLOCK FREQUENCY                                                                                       vs. OUTPUT LOW VOLTAGE                                                                                   SUPPLY CURRENT vs. TEMPERATURE
                                     700                                                                                                            90                                                                                                             525
                                                                                                          MAX3140-04                                                                                                  MAX3140-05                                                                                               MAX3140-06
                                                                                                                                                                                                                                                                               A: SRL = GND
                                     600                                                                                                            80                                                                                                             500
                                                                                                                                                                                                                                     NO-LOAD SUPPLY CURRENT (μA)
                                                                                                                                                                                                                                                                   475
                                                                                                                         OUTPUT SINK CURRENT (mA)
                                                                                                                                                    70                                             RTS                                                                                                           DE = VCC
            SUPPLY CURRENT (μA)
                                     500
                                                                                                                                                    60                                                                                                             450
                                                                                                                                                                                                         TX
                                                                                                                                                                                                                                                                                 A
                                     400                                                                                                            50                                                                                                             425
                                                                                                                                                                                                                                                                                                                 DE = GND
                                                                                                                                                                                                    DOUT                                                           400           B
                                     300                                                                                                            40
                                                                                                                                                                                                                                                                   375           A
                                                                                                                                                    30
                                     200
                                                                                                                                                    20                                                                                                             350
                                                                                                                                                                                                                                                                                 B
                                     100                                                                                                                                                                                                                           325
                                                                                                                                                    10
                                                                                                                                                                                                                                                                                                     B: SRL = OPEN OR VCC
                                       0                                                                                                             0                                                                                                             300
                                            0           1           2       3           4             5                                                  0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0                                                                       -60 -40 -20           0    20    40     60    80   100
                                                    EXTERNAL CLOCK FREQUENCY (MHz)                                                                                       OUTPUT LOW VOLTAGE (V)                                                                                              TEMPERATURE (°C)
                                                     RS-485 OUTPUT CURRENT                                                                                        RS-485 OUTPUT CURRENT                                                                                        RS-485 TRANSCEIVER SHUTDOWN
                                                vs. RECEIVER OUTPUT LOW VOLTAGE                                                                              vs. RECEIVER OUTPUT HIGH VOLTAGE                                                                                    CURRENT vs. TEMPERATURE
                                      60                                                                                                            30                                                                                                              20
                                                                                                            MAX3140-07                                                                                                MAX3140-08                                    18                                                         MAX3140-09
                                      50                                                                                                            25
                                                                                                                                                                                                                                                                    16
              OUTPUT CURRENT (mA)                                                                                        OUTPUT CURRENT (mA)                                                                                         SHUTDOWN CURRENT (nA)
                                                                                                                                                                                                                                                                    14
                                      40                                                                                                            20
                                                                                                                                                                                                                                                                    12
                                      30                                                                                                            15                                                                                                              10
                                                                                                                                                                                                                                                                     8
                                      20                                                                                                            10
                                                                                                                                                                                                                                                                     6
                                                                                                                                                                                                                                                                     4
                                      10                                                                                                            5
                                                                                                                                                                                                                                                                     2
                                       0                                                                                                            0                                                                                                                0
                                            0           1            2         3            4         5                                                  0           1            2            3         4        5                                                      -60 -40 -20           0    20    40     60    80   100
                                                            OUTPUT LOW VOLTAGE (V)                                                                                       OUTPUT HIGH VOLTAGE (V)                                                                                             TEMPERATURE (°C)
          8                          _______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                                                                                                                          Typical Operating Characteristics (continued)
                                                                                                                                                                                                                                                                                                  MAX3140
(VCC = +5V, TA = +25°C, unless otherwise noted.)
                                  RS-485 RECEIVER OUTPUT LOW VOLTAGE                                                             RS-485 RECEIVER OUTPUT HIGH VOLTAGE                                                          RS-485 RECEIVER PROPAGATION DELAY
                                            vs. TEMPERATURE                                                                                vs. TEMPERATURE                                                                      (500kbps MODE) vs. TEMPERATURE
                           0.50                                                                                            4.5                                                                                         140
                                                                                 MAX3140-10                                                                                      MAX3140-11                                                                                          MAX3140-12
                                      IRO = 8mA                                                                                      IRO = 8mA                                                                                     CLOAD = 100pF
                           0.45                                                                                            4.4
                                                                                                                                                                                                                       135
OUTPUT LOW VOLTAGE (V)                                                                          OUTPUT HIGH VOLTAGE (V)                                                                       PROPAGATION DELAY (ns)
                           0.40
                                                                                                                           4.3
                           0.35                                                                                                                                                                                        130
                                                                                                                           4.2
                           0.30
                                                                                                                           4.1
                           0.25                                                                                                                                                                                        125
                                                                                                                           4.0
                           0.20
                                                                                                                                                                                                                       120
                           0.15                                                                                            3.9
                           0.10                                                                                            3.8                                                                                         115
                                  -60 -40   -20     0    20   40     60   80   100                                               -60 -40   -20     0    20   40     60   80    100                                            -60 -40 -20       0       20   40   60       80   100
                                                  TEMPERATURE (°C)                                                                               TEMPERATURE (°C)                                                                             TEMPERATURE (°C)
                                  RS-485 RECEIVER PROPAGATION DELAY                                                               RS-485 DRIVER PROPAGATION DELAY                                                              RS-485 DRIVER PROPAGATION DELAY
                                    (10Mbps MODE) vs. TEMPERATURE                                                                  (115kbps MODE) vs. TEMPERATURE                                                               (500kbps MODE) vs. TEMPERATURE
                           112                                                                                            2.20                                                                                         920
                                                                                   MAX3140-13                                                                                    MAX3140-14                                                                                          MAX3140-15
                                     CLOAD = 100pF                                                                                                                                                                     880         Rt = 54Ω
                           110                                                                                                       Rt = 54Ω
                                                                                                                          2.15                                                                                         840
                           108
  PROPAGATION DELAY (ns)                                                                         PROPAGATION DELAY (μs)                                                                       PROPAGATION DELAY (ns)
                                                                                                                                                                                                                       800
                           106                                                                                            2.10
                                                                                                                                                                                                                       760
                           104
                                                                                                                          2.05                                                                                         720
                           102
                                                                                                                                                                                                                       680
                           100                                                                                            2.00                                                                                         640
                             98                                                                                                                                                                                        600
                                                                                                                          1.95
                             96                                                                                                                                                                                        560
                             94                                                                                           1.90                                                                                         520
                                  -60 -40 -20       0    20   40     60   80   100                                               -60 -40 -20       0    20   40     60   80    100                                            -60 -40 -20       0       20   40   60       80   100
                                                  TEMPERATURE (°C)                                                                               TEMPERATURE (°C)                                                                             TEMPERATURE (°C)
                                   RS-485 DRIVER PROPAGATION DELAY                                                                   RS-485 DRIVER DIFFERENTIAL                                                                    RS-485 DRIVER OUTPUT CURRENT
                                    (10Mbps MODE) vs. TEMPERATURE                                                                  OUTPUT VOLTAGE vs. TEMPERATURE                                                                 vs. DIFFERENTIAL OUTPUT VOLTAGE
                             60                                                                                           1.90                                                                                         100
                                                                                   MAX3140-16                                                                                    MAX3140-17                                                                                          MAX3140-18
                                      Rt = 54Ω                                                                                                                      Rt = 54Ω
                             55                                                                                           1.89
  PROPAGATION DELAY (ns)
                             50
                                                                                                                                                                                              OUTPUT CURRENT (mA)
                                                                                                                                                                                                                        10
                                                                                                 OUTPUT VOLTAGE (V)
                                                                                                                          1.88
                             45
                                                                                                                          1.87
                             40                                                                                                                                                                                          1
                                                                                                                          1.86
                             35
                                                                                                                          1.85
                             30                                                                                                                                                                                         0.1
                             25                                                                                           1.84
                             20                                                                                           1.83                                                                                         0.01
                                  -60 -40 -20       0    20   40     60   80   100                                               -60 -40 -20       0    20   40     60   80    100                                            0         1           2        3         4         5
                                                  TEMPERATURE (°C)                                                                               TEMPERATURE (°C)                                                                    DIFFERENTIAL OUTPUT VOLTAGE (V)
                                                     _______________________________________________________________________________________                                                                                                                                     9


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
                                                                                                                      Typical Operating Characteristics (continued)
MAX3140
          (VCC = +5V, TA = +25°C, unless otherwise noted.)
                                              OUTPUT CURRENT vs.                                                                     OUTPUT CURRENT vs.                                                   RS-485 RECEIVER PROPAGATION DELAY
                                      RS-485 DRIVER OUTPUT LOW VOLTAGE                                                       RS-485 DRIVER OUTPUT HIGH VOLTAGE                                                        (SRL = GND)
                                                                                                                                                                                                                                      MAX3140-21
                                140                                                                                   -100
                                                                                   MAX3140-19                          -90                                                   MAX3140-20
                                120
                                                                                                                       -80
          OUTPUT CURRENT (mA)                                                                   OUTPUT CURRENT (mA)
                                100                                                                                    -70                                                                      VA - VB
                                                                                                                       -60                                                                     (2V/div)
                                 80
                                                                                                                       -50
                                 60
                                                                                                                       -40
                                 40                                                                                    -30                                                                          RO
                                                                                                                                                                                               (5V/div)
                                                                                                                       -20
                                 20
                                                                                                                       -10
                                  0                                                                                     0
                                      0      2         4    6     8       10      12                                         -8   -6    -4    -2    0     2      4       6                                              50ns/div
                                                 OUTPUT LOW VOLTAGE (V)                                                                OUTPUT HIGH VOLTAGE (V)
                                                       RS-485 RECEIVER PROPAGATION DELAY                                                                                                  RS-485 DRIVER PROPAGATION DELAY
                                                               (SRL = OPEN OR VCC)                                                                                                                   (SRL = OPEN)
                                                                                                    MAX3140-22                                                                                                           MAX3140-23
                                                                                                                                                                         DI
                                                                                                                                                                   (5V/div)
                                             VA - VB
                                            (2V/div)
                                                                                                                                                                    V Y - VZ
                                                 RO                                                                                                              (2.5V/div)
                                            (5V/div)
                                                                       50ns/div                                                                                                                             2μs/div
                                                       RS-485 DRIVER PROPAGATION DELAY                                                                                                    RS-485 DRIVER PROPAGATION DELAY
                                                                  (SRL = VCC)                                                                                                                        (SRL = GND)
                                                                                                MAX3140-24                                                                                                               MAX3140-25
                                                DI                                                                                                                       DI
                                           (5V/div)                                                                                                                (5V/div)
                                             VY - VZ                                                                                                                V Y - VZ
                                          (2.5V/div)                                                                                                             (2.5V/div)
                                                                      500ns/div                                                                                                                             50ns/div
          10                     ______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                                                                                                     Pin Description
                                                                                                                                      MAX3140
       PIN
 FULL     HALF         NAME                                               FUNCTION
DUPLEX   DUPLEX
                                UART Crystal Connection. Leave X2 unconnected for external clock. See the Crystals,
  1          1          X2
                                Oscillators, and Ceramic Resonators section.
                                UART Crystal Connection. X1 also serves as an external clock input. See the Crystals,
  2          2          X1
                                Oscillators, and Ceramic Resonators section.
  3          3          CTS     UART Clear-to-Send Active-Low Input. Read via the CTS bit.
                                UART Request-to-Send Active-Low Output. Controlled by the RTS bit. Use to control the dri-
  4          4          RTS
                                ver enable in RS-485 networks.
                                UART Asynchronous Serial-Data (receiver) Input. The serial information received from the modem
  5          5          RX
                                or RS-232/RS-485 receiver. A transition on RX while in shutdown generates an interrupt (Table 1).
  6          6          TX      UART Asynchronous Serial-Data (transmitter) Output
                                RS-485 Half/Full-Duplex Selector Pin. Connect H/F to VCC for half-duplex mode; connect H/F
  7          7          H/F
                                to GND or leave it unconnected for full-duplex mode.
  8          8         GND      Ground
                                RS-485 Receiver Output. When RE is low and if A - B ≥ -50mV, RO will be high; if A - B ≤
  9          9          RO
                                -200mV, RO will be low.
                                RS-485 Receiver Output Enable. Drive RE low to enable RO; RO is high impedance when RE
  10         10         RE
                                is high. Drive RE high and DE low to enter low-power shutdown mode.
                                RS-485 Driver Output Enable. Drive DE high to enable driver outputs. These outputs are high
  11         11         DE
                                impedance when DE is low. Drive RE high and DE low to enter low-power shutdown mode.
                                RS-485 Driver Input. With DE high, a low on DI forces noninverting output low and inverting
  12         12          DI
                                output high. Similarly, a high on DI forces noninverting output high and inverting output low.
                                RS-485 Transceiver Slew-Rate-Limit Selector Pin. Connect SRL to GND for a 10Mbps com-
  13         13         SRL     munication rate, connect SRL to VCC for a 500kbps rate, or leave SRL unconnected for a
                                115kbps rate.
  14         14         N.C.    No Connection. Not internally connected.
                                RS-485 Transmitter Phase. Connect TXP to GND or leave it unconnected for normal transmit-
  15         15         TXP
                                ter phase/polarity. Connect TXP to VCC to invert the transmitter phase/polarity.
  16         —           Y      RS-485 Noninverting Driver Output
  —          16          Y      RS-485 Noninverting Receiver Input and RS-485 Noninverting Driver Output*
  17         17         N.C.    No Connection. Not internally connected.
  18         —           Z      RS-485 Inverting Driver Output
  —          18          Z      RS-485 Inverting Receiver Input and RS-485 Inverting Driver Output*
  19         —           B      RS-485 Inverting Receiver Input
  —          19          B      RS-485 Receiver Input Resistors*
  20         —           A      RS-485 Noninverting Receiver Input
  —          20          A      RS-485 Receiver Input Resistors*
                  ______________________________________________________________________________________                         11


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
                                                                                                       Pin Description (continued)
MAX3140
                     PIN
            FULL          HALF              NAME                                                 FUNCTION
           DUPLEX        DUPLEX
                                                        RS-485 Receiver Phase. Connect RXP to GND or leave it unconnected for normal receiver
                21             21           RXP
                                                        phase/polarity. Connect RXP to VCC to invert the receiver phase/polarity.
                22             22           VCC         Positive Supply (4.75V to 5.25V)
                23             23           DIN         UART SPI/MICROWIRE Serial-Data Input. Schmitt-trigger input.
                24             24           DOUT        UART SPI/MICROWIRE Serial-Data Output. High impedance when CS is high.
                25             25           SCLK        UART SPI/MICROWIRE Serial-Clock Input. Schmitt-trigger input.
                                                        UART Active-Low Chip-Select Input. DOUT goes high impedance when CS is high. IRQ, TX,
                26             26            CS
                                                        and RTS are always active. Schmitt-trigger input.
                27             27           IRQ         UART Active-Low Interrupt Output. Open-drain interrupt output to microprocessor.
                                                        UART Hardware Shutdown Input. When shut down (SHDN = 0), the UART oscillator turns off
                28             28           SHDN        immediately without waiting for the current transmission to end, reducing the supply current
                                                        to just leakage currents.
          *In half-duplex mode, the driver outputs serve as receiver inputs. The full-duplex receiver inputs ( A and B) still have a 1/8-unit load, but
          do not affect the receiver output.
                                                                                                  Transceiver Function Tables
                                    TRANSMITTING                                                                 RECEIVING
                               INPUTS                           OUTPUTS                                       INPUTS                         OUTPUTS
               TXP       RE         DE             DI          Z          Y                H/F   RXP     RE    DE        A-B        Y-Z         RO
                                                                                           0      0      0      X      ≥ -0.05V      X           1
                0          X            1          1           0          1
                                                                                           0      0      0      X      ≤ -0.2V       X           0
                0          X            1          0           1          0
                                                                                           0      1      0      X      ≥ -0.05V      X           0
                1          X            1          1           1          0
                                                                                           0      1      0      X      ≤ -0.2V       X           1
                1          X            1          0           0          1                1      0      0      X         X       ≥ -0.05V       1
               X           0            0          X        High-Z     High-Z              1      0      0      X         X       ≤ -0.2V        0
               X           1            0          X        Shutdown (High-Z)              1      1      0      X         X       ≥ -0.05V       0
                                                                                           1      1      0      X         X       ≤ -0.2V        1
                                                                                                                        Open/
                                                                                           0      0      0      X                    X           1
                                                                                                                       Shorted
                                                                                                                                   Open/
                                                                                           1      0      0      X         X                      1
                                                                                                                                  Shorted
                                                                                                                        Open/
                                                                                           0      1      0      X                    X           0
                                                                                                                       Shorted
                                                                                                                                   Open/
                                                                                           1      1      0      X         X                      0
                                                                                                                                  Shorted
                                                                                           X      X      1      1         X          X        High-Z
                                                                                                                                             Shutdown
                                                                                           X      X      1      0         X          X
                                                                                                                                              (High-Z)
          12    ______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                                                                                                                                                                                             MAX3140
                         Y
                                                          R                                                       TEST POINT                                         1k
                                                                                                       RECEIVER                                                                  VCC
                                                                                                        OUTPUT                                       S1
                                   VOD                                                                          CL
                                                                                                                                           1k
                                                                                                              15pF
                                                          R      VOC
                         Z                                                                                                                           S2
Figure 1. Driver DC Test Load                                                                   Figure 2. Receiver Enable/Disable Timing Test Load
                                   VCC
                                  DE                               CL1
                                                                                                                                                                            VCC
                                                                                                                                      500Ω                      S1
                                            Y
                             DI                                    RDIFF                                  OUTPUT
                                                    VID                                                UNDER TEST
                                               Z                                                                               CL
                                                                   CL2                                                                                          S2
Figure 3. Driver Timing Test Circuit                                                            Figure 4. Driver Enable/Disable Timing Test Load
         3V                                                                                           3V
   DI           1.5V                                                            1.5V             DE           1.5V                                                        1.5V
          0                                                                                           0
                                         tPLH                    tPHL
                                                                                                                                    tZL(SHDN), tZL        tLZ
          Z                                                                                        Y, Z
               VO                                                                                                              2.3V OUTPUT NORMALLY LOW                     VOL +0.5V
          Y                                                                                        VOL
                         1/2 VO
                                                                                       1/2 VO
                                           VDIFF = V (Y) - V (Z)                                                                      OUTPUT NORMALLY HIGH
          VO                                                                                      Y, Z
 VDIFF                                   90%                              90%                                                  2.3V                                         VOH -0.5V
           0         10%                                                               10%             0
         -VO
                    tR                                                   tF                                                         tZH(SHDN), tZH        tHZ
                                               tSKEW = | tPLH - tPHL |
Figure 5. Driver Propagation Delays                                                             Figure 6. Driver Enable and Disable Times
                                  ______________________________________________________________________________________                                                                13


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
MAX3140
                                                                                        3V
                                                                                   RE                 1.5V                                   1.5V
                                                                                         0
                 VOH
           RO
                 VOL             1.5V           OUTPUT          1.5V                                             tZL(SHDN), tZL      tLZ
                                                                                    VCC
                                    tPHL           tPLH
           1V     A                                                                RO                          1.5V OUTPUT NORMALLY LOW        VOL + 0.5V
           -1V    B                     INPUT
                                                                                                                      OUTPUT NORMALLY HIGH
                                                                                   RO                          1.5V                            VOH - 0.5V
                                                                                         0
                                                                                                                  tZH(SHDN), tZH     tHZ
          Figure 7. Receiver Propagation Delays                                  Figure 8. Receiver Enable and Disable Times
                                                                                             B
                                                                                                             RECEIVER
                                                          ATE           VID                      RR          OUTPUT
                                                                                             A
                                                Figure 9. Receiver Propagation Delay Test Circuit
          _______________Detailed Description                                    pair reversal. The slew rate of the RS-485/RS-422 trans-
                                                                                 ceiver is selectable, limiting the maximum data rate to
          The MAX3140 combines an SPI/QSPI/MICROWIRE-
                                                                                 115kbps, 500kbps, or 10Mbps. The RS-485/RS-422 dri-
          compatible UART (MAX3100) and an RS-485/RS-422
                                                                                 vers are output short-circuit current limited, and thermal
          transceiver (MAX3089) in one package. The UART sup-
                                                                                 shutdown circuitry protects the RS-485/RS-422 drivers
          ports data rates up to 230k baud for both standard
                                                                                 against excessive power dissipation.
          UART bit streams as well as IrDA, and includes an
          8-word receive FIFO. Also included is a parity-bit inter-              The UART and RS-485/RS422 functions can be used
          rupt useful in 9-bit address recognition.                              together or independently since the two functions only
                                                                                 share supply and ground connections. This part oper-
          The RS-485/RS-422 transceiver has a true fail-safe
                                                                                 ates from a single +5V supply.
          receiver and allows up to 256 transceivers on the bus.
          Other features include pin-selectable full/half-duplex
          operation and a phase control to correct for twisted-
          14     ______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                                                                                         UART                                                               SPI Interface
                                                                                                                                                                            MAX3140
The universal asynchronous receiver transmitter                                                               The MAX3140 is compatible with SPI, QSPI (CPOL = 0,
(UART) interfaces the SPI/MICROWIRE-compatible syn-                                                           CPHA = 0), and MICROWIRE serial-interface standards
chronous serial data from a microprocessor (µP) to                                                            (Figure 11). The MAX3140 has a unique full-duplex
asynchronous, serial-data communication ports (RS-                                                            architecture that expects a 16-bit word for DIN and
485, IrDA). Figure 10 shows the MAX3140 functional                                                            simultaneously produces a 16-bit word for DOUT
diagram. Included in the UART function is an                                                                  regardless of which read/write register used. The DIN
SPI/MICROWIRE interface, a baud-rate generator, and                                                           stream is monitored for its first two bits to tell the UART
an interrupt generator.                                                                                       the type of data transfer being executed (see the
                                                                                                              WRITE CONFIGURATION register, READ CONFIG-
                                                                                                              URATION register, WRITE DATA register, and READ
                                                                                                              DATA register sections). DIN (MOSI) is latched on
                                                                                                                                                                 A
                                                         RX BUFFER             Pr
                                                                                                                           MAX3140
                                                                     9
                                                                                                     RE
                                                            9                   9                    RO
                       INTERRUPT                       RX FIFO           Pr                                                                                      B
           IRQ
                         LOGIC
                                                                                                    RXP
                                        9                  9
                                                     RX SHIFT REGISTSER Pr                RX
          DOUT                                                                                      GND                                                          Y
                                                             BAUD-RATE                    X2
                         SPI                    4            GENERATOR                    X1
                      INTERFACE
          SCLK
                                                                                                    TXP
                                                     TX SHIFT REGISTSER Pt                TX
            CS
                                                                     9                               DI                                                          Z
           DIN                                           TX BUFFER             Pt                   SRL
                                            9
                                                                                                     DE
                                                                                          CTS
                                                                               I/O                  H/F
                                                                                          RTS
                      NOTE: SWITCH POSITIONS INDICATE H/F = GND
Figure 10. Functional Diagram
             DIN           MSB     14           13     12      11         10         9    8     7         6      5   4    3   2      1   LSB
            DOUT           MSB     14           13      12      11        10         9    8     7         6      5    4   3    2     1   LSB
                 CS
            SCLK                                                                                                                                COMPATIBLE
                      (CPOL = 0, CPHA = 0)                                                                                                      WITH MAX3140
            SCLK
                      (CPOL = 0, CPHA = 1)
            SCLK                                                                                                                                NOT COMPATIBLE
                      (CPOL = 1, CPHA = 0)                                                                                                      WITH MAX3140
            SCLK
                      (CPOL = 1, CPHA = 1)
Figure 11. Compatible CPOL and CPHA Modes
                         ______________________________________________________________________________________                                                       15


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
          SCLK’s rising edge. DOUT (MISO) is read into the µP                                                          clearing of internal registers, are executed only on CS’s
MAX3140
          on SCLK’s rising edge. The first bit (bit 15) of DOUT                                                        rising edge. Every time CS goes low, a new 16-bit
          transitions on CS’s falling edge, and bits 14–0 transition                                                   stream is expected. Figure 13 shows an example of
          on SCLK’s falling edge. Figure 12 shows the detailed                                                         using the WRITE CONFIGURATION register.
          serial timing specifications for the synchronous SPI                                                         Table 1 describes the bits located in the WRITE CON-
          port.                                                                                                        FIGURATION, READ CONFIGURATION, WRITE DATA,
          Only 16-bit words are expected. If CS goes high in the                                                       and READ DATA registers. This table also describes
          middle of a transmission (any time before the 16th bit),                                                     whether the bit is a read or write bit and what the
          the sequence is aborted (i.e., data does not get written                                                     power-on reset states (POR) of the bits are. Figure 14
          to individual registers). Most operations, such as the                                                       shows an example of parity and word length control.
                       CS                                                                                        •••
                                                 tCSS                                            tCH                                                                                    tCSH                  tCS1
                                 tCSO                                            tCL
                      SCLK                                                                                       •••
                                                      tDS
                                                            tDH
                       DIN                                                                                       •••
                                                tDV                                                                                                       tDO                                                tTR
                                                                                                                 •••
                     DOUT
          Figure 12. Detailed Serial Timing Specifications for the Synchronous Port
                                                                                                                                                                                                     DATA
                CS                                                                                                                                                                                  UPDATED
               SCLK              1          2         3           4         5          6         7          8          9        10        11         12             13          14           15         16
                DIN          1          1       FEN         SHDN       TM        RM         PM         RAM        IR        ST        PE         L              B3          B2          B1          B0
               DOUT          R          T        0           0         0         0          0           0         0         0         0          0              0           0            0          0
          Figure 13. SPI Interface (Write Configuration)
                                                              PE = 0, L = 0
                                     IDLE         START           D0        D1         D2        D3         D4         D5        D6        D7        STOP            STOP        IDLE
                                                              PE = 0, L = 1
                                     IDLE         START           D0        D1         D2        D3         D4         D5        D6       STOP       STOP            IDLE
                                                              PE = 1, L = 0
                                     IDLE         START           D0        D1         D2        D3         D4         D5        D6        D7         Pt            STOP        STOP         IDLE
                                                              PE = 1, L = 1
                                     IDLE         START           D0        D1         D2        D3         D4         D5        D6        Pt        STOP            STOP        IDLE
                                     TIME
                                                                                                                                           SECOND STOP BIT IS OMITTED IF ST = 0.
          Figure 14. Parity and Word Length Control
          16    ______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
Table 1. Bit Descriptions
                                                                                                                                            MAX3140
  BIT       BIT      POR
                                                                        DESCRIPTION
 NAME      TYPE     STATE
 B0–B3     write     0000      Baud-Rate Divisor Select Bits. Sets the baud clock’s value (Table 6).
 B0–B3     read      0000      Baud-Rate Divisor Select Bits. Reads the 4-bit baud clock value assigned to these registers.
                      No       Clear-to-Send-Input. Records the state of the CTS pin (CTS bit = 0 implies CTS pin = logic
  CTS      read
                    change     high).
                               Transmit-Buffer Register. Eight data bits written into the transmit-buffer register. D7t is ignored
 D0t–D7t   write   XXXXXXXX
                               when L = 1.
                               Eight data bits read from the receive FIFO or the receive-buffer register. When L = 1, D7r is
 D0r–D7r   read    00000000
                               always 0.
  FEN      write       0       FIFO Enable. Enables the receive FIFO when FEN = 0. When FEN = 1, FIFO is disabled.
  FEN      read        0       FIFO-Enable Readback. FEN’s state is read.
   IR      write       0       Enables the IrDA timing mode when IR = 1.
   IR      read        0       Reads the value of the IR bit.
                               Bit to set the word length of the transmitted or received data. L = 0 results in 8-bit words
   L       write       0
                               (9-bit words if PE = 1) (see Figure 5). L = 1 results in 7-bit words (8-bit words if PE = 1).
   L       read        0       Reads the value of the L bit.
                               Transmit-Parity Bit. This bit is treated as an extra bit that is transmitted if PE = 1. In 9-bit net-
   Pt      write       X       works, the MAX3140 does not calculate parity. If PE = 0, then this bit (Pt) is ignored in transmit
                               mode (see the 9-Bit Networks section).
                               Receive-Parity Bit. This bit is the extra bit received if PE = 1. Therefore, PE = 1 results in 9-bit
   Pr      read        X       transmissions (L = 0). If PE = 0, then Pr is set to 0. Pr is stored in the FIFO with the receive
                               data (see the 9-Bit Networks section).
                               Parity-Enable Bit. Appends the Pt bit to the transmitted data when PE = 1, and sends the Pt
                               bit as written. No parity bit is transmitted when PE = 0. With PE = 1, an extra bit is expected to
   PE      write       0
                               be received. This data is put into the Pr register. Pr = 0 when PE = 0. The MAX3140 does not
                               calculate parity.
   PE      read        0       Reads the value of the Parity-Enable bit.
   PM      write       0       Mask for Pr bit. IRQ is asserted if PM = 1 and Pr = 1 (Table 7).
   PM      read        0       Reads the value of the PM bit (Table 7).
                               Receive Bit or FIFO Not Empty Flag. R = 1 means new data is available to be read or is being
   R       read        0       read from the receive register or FIFO. If performing a READ DATA or WRITE DATA operation,
                               the R bit will clear on the falling edge of SCLK's 16th pulse if no new data is available.
   RM      write       0       Mask for R bit. IRQ is asserted if RM = 1 and R = 1 (Table 7).
   RM      read        0       Reads the value of the RM bit (Table 7).
  RAM      write       0       Mask for RA/FE bit. IRQ is asserted if RAM = 1 and RA/FE = 1 (Table 7).
  RAM      read        0       Reads the value of the RAM bit (Table 7).
                               Request-to-Send Bit. Controls the state of the RTS output. This bit is reset on power-up (RTS
  RTS      write       0
                               bit = 0 sets the RTS pin = logic high).
                   ______________________________________________________________________________________                              17


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
          Table 1. Bit Descriptions (continued)
MAX3140
             BIT       BIT       POR
                                                                                  DESCRIPTION
            NAME      TYPE      STATE
                                           Receiver-Activity/Framing-Error Bit. In shutdown mode, this is the RA bit. In normal operation,
                                           this is the FE bit. In shutdown mode, a transition on RX sets RA = 1. In normal mode, a fram-
                                           ing error sets FE = 1. A framing error occurs if a zero is received when the first stop bit is
                                           expected. FE is set when a framing error occurs, and cleared upon receipt of the next proper-
            RA/FE      read        0
                                           ly framed character independent of the FIFO being enabled. When the device wakes up, it is
                                           likely that a framing error will occur. This error is cleared with a WRITE CONFIGURATION. The
                                           FE bit is not cleared on a READ DATA operation. When an FE is encountered, the UART
                                           resets itself to the state where it is looking for a start bit.
                                           Software-Shutdown Bit. Enter software shutdown with a WRITE CONFIGURATION where
                                           SHDNi = 1. Software shutdown takes effect after CS goes high, and causes the oscillator to
                                           stop as soon as the transmitter becomes idle. Software shutdown also clears R, T, RA/FE,
            SHDNi      write       0       D0r–D7r, D0t–D7t, Pr, Pt, and all data in the receive FIFO. RTS and CTS can be read and
                                           updated while in shutdown. Exit software shutdown with a WRITE CONFIGURATION where
                                           SHDNi = 0. The oscillator restarts typically within 50ms of CS going high. RTS and CTS are
                                           unaffected. Refer to the Pin Description for hardware shutdown (SHDN input).
                                           Shutdown Read-Back Bit. The READ CONFIGURATION register outputs SHDNo = 1 when the
                                           UART is in shutdown. Note that this bit is not sent until the current byte in the transmitter is
           SHDNo       read        0
                                           sent (T = 1). This tells the processor when it may shut down the RS-485/RS-422 driver. This bit
                                           is also set immediately when the device is shut down through the SHDN pin.
                                           Transmit-Stop Bit. One stop bit will be transmitted when ST = 0. Two stop bits will be transmit-
               ST      write       0
                                           ted when ST = 1. The receiver only requires one stop bit.
               ST      read        0       Reads the value of the ST bit.
                                           Transmit-Buffer-Empty Flag. T = 1 means that the transmit buffer is empty and ready to
               T       read        1
                                           accept another data word.
                                           Transmit-Enable Bit. If TE = 1, then only the RTS pin is updated on CS’s rising edge. The con-
               TE      write       0
                                           tents of RTS, Pt, and D0t–D7t transmit on CS’s rising edge when TE = 0.
               TM      write       0       Mask for T Bit. IRQ is asserted if TM = 1 and T = 1 (Table 7).
               TM      read        0       Reads the value of the TM bit (Table 7).
                              Notice to High-Level Programmers              The proper way to implement these commands is to
          The MAX3140 follows the SPI convention of providing a             use driver code—usually in the form of an assembly
          bidirectional data path for writes and reads. Whenever            language interrupt service routine and a callable rou-
          the data is written, data is also read back. This speeds          tine used by high-level routines. This driver handles the
          operation over the SPI bus, as required, when operat-             interrupts and manages the receive and transmit
          ing at high baud rates. In most high-level languages,             buffers for the MAX3140. When a PUTCHAR executes,
          like C, there are commands for writing and reading                this driver is called and it safely buffers any characters
          stream I/O devices like the console or serial port. In C          received when the current character is transmitted.
          specifically, there is a “PUTCHAR” command that                   Likewise, when a GETCHAR executes, it checks its own
          transmits a character and a “GETCHAR” command that                receive buffer before getting data from the MAX3140.
          receives a character. Implementing direct write and               See the C-language outline of a MAX3140 software dri-
          read commands in C with no underlying driver code                 ver in Listing 1.
          causes an intended PUTCHAR command to become a
          PUTGETCHAR command. These C commands assume
          that they’ll receive some form of BIOS-level support.
          18   ______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                   WRITE CONFIGURATION Register                     Setting the WRITE CONFIGURATION register clears the
                                                                                                                                         MAX3140
                                       (D15, D14 = 1, 1)            receive FIFO and the R, T, RA/FE, D0r–D7r, D0t–D7t,
Configure the UART by writing a 16-bit word to the                  Pr, and Pt registers. Bits RTS and CTS remain
WRITE CONFIGURATION register, which programs the                    unchanged. The new configuration is valid on CS’s ris-
baud rate, data-word length, parity enable, and enable              ing edge if the transmit buffer is empty (T = 1) and
of the 8-word receive FIFO. Set bits 15 and 14 of the               transmission is over. If the latest transmission has not
DIN configuration word to 1 to enable the WRITE CON-                been completed (T = 0), the registers are updated
FIGURATION mode. Bits 13–0 of the DIN configuration                 when the transmission is over.
word set the configuration of the UART. Table 2 shows               The WRITE CONFIGURATION register bits (FEN,
the bit assignment for the WRITE CONFIGURATION                      SHDNi, IR, ST, PE, L, B3–B0) take effect after the cur-
register. The WRITE CONFIGURATION register allows                   rent transmission is over. The mask bits (TM, RM, PM,
selection between normal UART timing and IrDA timing,               RAM) take effect immediately after SCLK’s 16th rising
shutdown control, and contains four interrupt mask bits.            edge.
Table 2. WRITE CONFIGURATION Register Bit Assignment (D15, D14 = 1, 1)
   BIT        15    14       13       12       11      10    9      8       7      6        5         4    3      2         1   0
   DIN        1      1       FEN   SHDNi      TM       RM   PM     RAM      IR     ST      PE         L   B3     B2      B1     B0
 DOUT         R      T        0       0        0       0     0      0       0      0        0         0    0      0         0   0
Notes:                                                              bit 7: DIN
bit 15, 14: DIN                                                     IR = 1, IrDA mode is enabled.
1, 1 = Write Configuration                                          IR = 0, IrDA mode is disabled.
bit 13: DIN                                                         bit 6: DIN
FEN = 0, FIFO is enabled                                            ST = 1, Transmit two stop bits
FEN= 1, FIFO is disabled                                            ST = 0, Transmit one stop bit
bit 12: DIN                                                         bit 5: DIN
SHDNi = 1, Enter software shutdown                                  PE = 1, Parity is enabled for both transmit (state of Pt) and
                                                                    receive.
SHDNi = 0, Exit software shutdown
                                                                    PE = 0, Parity is disabled for both transmit and receive.
bit 11: DIN
                                                                    bit 4: DIN
TM = 1, Transmit-buffer-empty interrupt is enabled.
                                                                    L = 1, 7-bit words (8-bit words if PE = 1)
TM = 0, Transmit-buffer-empty interrupt is disabled.
                                                                    L = 0, 8-bit words (9-bit words if PE = 1)
bit 10: DIN
                                                                    bit 3–0: DIN
RM = 1, Data available in the receive register or FIFO interrupt
                                                                    B3–B0 = XXXX Baud-Rate Divisor select bits. See Table 6.
is enabled.
RM = 0, Data available in the receive register or FIFO interrupt    bit 15: DOUT
is disabled.                                                        R = 1, Data is available to be read from the receive.
bit 9: DIN                                                          register or FIFO.
PM = 1, Parity-bit-received interrupt is enabled.                   R = 0, Receive register and FIFO are empty.
PM = 0, Parity-bit-received interrupt is disabled.                  bit 14: DOUT
bit 8: DIN                                                          T = 1, Transmit buffer is empty.
RAM = 1, Receiver-activity (shutdown mode)/Framing-error            T = 0, Transmit buffer is full.
(normal operation) interrupt is enabled.
                                                                    bit 13–0: DOUT
RAM = 0, Receiver-activity (shutdown mode)/Framing-error
                                                                    Zeros
(normal operation) interrupt is disabled.
                      ______________________________________________________________________________________                        19


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
          Bits 15 and 14 of the DOUT WRITE CONFIGURATION                             READ CONFIGURATION Register (D15, D14 = 0, 1)
MAX3140
          word (R and T) are sent out of the MAX3140 along with                   Use the READ CONFIGURATION register to read back
          14 trailing zeros. The use of the R and T bits is optional,             the last configuration written to the UART. In this mode,
          but ignore the 14 trailing zeros.                                       bits 15 and 14 of the DIN configuration word are
          Warning! The UART requires stable crystal oscillator                    required to be 0 and 1, respectively, to enable the
          operation before configuration (typically ~25ms after                   READ CONFIGURATION mode. Clear bits 13–1 of the
          power-up). At power-up, compare the WRITE CONFIG-                       DIN word. Bit 0 is the test bit to put the UART in test
          URATION bits with the READ CONFIGURATION bits in                        mode (see the Test Mode section). Table 3 shows the
          a software loop until both match. This ensures that the                 bit assignment for the READ CONFIGURATION regis-
          oscillator is stable and the UART is configured correctly.              ter.
          Table 3. READ CONFIGURATION Register Bit Assignment (D15, D14 = 0, 1)
               BIT     15      14       13       12      11      10   9       8           7     6       5       4       3      2       1       0
               DIN      0       1           0     0      0       0    0       0           0     0       0       0       0      0       0      TEST
           DOUT         R       T      FEN      SHDNo   TM       RM   PM     RAM       IR       ST     PE       L      B3      B2     B1      B0
          Notes:                                                                  bit 8: DOUT
          bit 15: DOUT                                                            RAM = 1, Receiver-activity (shutdown mode)/Framing-error
                                                                                  (normal operation) interrupt is enabled.
          R = 1, Data is available to be read from the receive register or
          FIFO.                                                                   RAM = 0, Receiver-activity (shutdown mode)/Framing-error
                                                                                  (normal operation) interrupt is disabled.
          R = 0, Receive register and FIFO are empty.
                                                                                  bit 7: DOUT
          bit 14: DOUT
                                                                                  IR = 1, IrDA mode is enabled.
          T = 1, Transmit buffer is empty.
                                                                                  IR = 0, IrDA mode is disabled.
          T = 0, Transmit buffer is full.
                                                                                  bit 6: DOUT
          bit 13: DOUT
                                                                                  ST = 1, Transmit two stop bits.
          FEN = 0, FIFO is enabled
                                                                                  ST = 0, Transmit one stop bit.
          FEN = 1, FIFO is disabled
                                                                                  bit 5: DOUT
          bit 12: DOUT
                                                                                  PE = 1, Parity is enabled for both transmit (state of Pt) and
          SHDNo = 1, Software shutdown is enabled.                                receive.
          SHDNo = 0, Software shutdown is disabled.                               PE = 0, Parity is disabled for both transmit and receive.
          bit 11: DOUT                                                            bit 4: DOUT
          TM = 1, Transmit-buffer-empty interrupt is enabled.                     L = 1, 7-bit words (8-bit words if PE = 1)
          TM = 0, Transmit-buffer-empty interrupt is disabled.                    L = 0, 8-bit words (9-bit words if PE = 1)
          bit 10: DOUT                                                            bit 3–0: DOUT
          RM = 1, Data available in the receive register or FIFO interrupt        B3–B0 = XXXX Baud-Rate Divisor select bits. See Table 6.
          is enabled.
          RM = 0, Data available in the receive register or FIFO interrupt        bit 15, 14: DIN
          is disabled.                                                            0, 1 = Read Configuration
          bit 9: DOUT                                                             bit 13–1: DIN
          PM = 1, Parity-bit-received interrupt is enabled.                       Zeros
          PM = 0, Parity-bit-received interrupt is disabled.                      bit 0: DIN
                                                                                  If TEST = 1 and CS = 0, then RTS = 16xBaudCLK
                                                                                  TEST = 0, Disables TEST mode.
          20     ______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                                              Test Mode                        that is being received from the RX FIFO. Table 4 shows
                                                                                                                                                      MAX3140
The device enters a test mode if bit 0 of the DIN config-                      the bit assignment for the WRITE DATA register. To
uration word equals 1 when performing a READ CON-                              change the RTS pin’s output state without transmitting
FIGURATION. In this mode, if CS = 0, the RTS pin                               data, set the TE bit high. If performing a WRITE DATA
transmits a clock that is 16 times the baud rate. The TX                       operation, the R bit clears on the falling edge of SCLK’s
pin is low as long as CS remains low while in test mode.                       16th clock pulse if no new data is available.
Table 3 shows the bit assignment for the READ CON-
FIGURATION register.                                                                           READ DATA Register (D15, D14 = 0, 0)
                                                                               Use the READ DATA register for receiving data from
              WRITE DATA Register (D15, D14 = 1, 0)                            the RX FIFO. When using this register, bits 15 and 14 of
Use the WRITE DATA register for transmitting to the TX                         DIN must both be 0. Clear bits 13–0 of the DIN READ
buffer and receiving from the RX buffer (and RX FIFO                           DATA word. Table 5 shows the bit assignments for the
when enabled). When using this register, the DIN and                           READ DATA register. Reading all available data clears
DOUT WRITE DATA words are used simultaneously                                  the R bit and interrupt IRQ. If performing a READ DATA
and bits 13–11 for both the DIN and DOUT WRITE                                 operation, the R bit clears on the falling edge of SCLK’s
DATA words are meaningless zeros. The DIN WRITE                                16th clock pulse if no new data is available.
DATA word contains the data that is being transmitted,
and the DOUT WRITE DATA word contains the data
Table 4. WRITE DATA Register Bit Assignment (D15, D14 = 1, 0)
   BIT        15     14       13      12      11        10         9      8            7     6        5          4    3       2          1   0
   DIN         1      0       0        0       0        TE       RTS      Pt        D7t      D6t     D5t     D4t     D3t     D2t     D1t     D0t
 DOUT          R      T       0        0       0      RA/FE      CTS      Pr        D7r     D6r      D5r     D4r     D3r     D2r     D1r     D0r
Notes:                                                                         bit 15: DOUT
5, 14: DIN                                                                     R = 1, Data is available to be read from the receive register or
                                                                               FIFO.
1, 0 = Write Data
                                                                               R = 0, Receive register and FIFO are empty.
bit 13–11: DIN
                                                                               bit 14: DOUT
Zeros
                                                                               T = 1, Transmit buffer is empty.
bit 10: DIN
                                                                               T = 0, Transmit buffer is full.
TE = 1, Disables transmit, and only RTS will be updated.
                                                                               bit 13–11: DOUT
TE = 0, Enables transmit.
                                                                               Zeros
bit 9: DIN
                                                                               bit 10: DOUT
RTS = 1, Configures RTS = 0 (Logic Low).
                                                                               RA/FE = Receive-activity (UART shutdown)/Framing-error
RTS = 0, Configures RTS = 1 (Logic High).                                      (normal operation) bit.
bit 8: DIN                                                                     bit 9: DOUT
Pt = 1, Transmit parity bit is high. If PE = 1, a high parity bit will         CTS = CTS input state. If CTS = 0, then CTS = 1 and vice versa.
be transmitted. If PE = 0, then no parity bit will be transmitted.
                                                                               bit 8: DOUT
Pt = 0, Transmit parity bit is low. If PE = 1, a low parity bit will be
transmitted. If PE = 0, then no parity bit will be transmitted.                Pr = Received parity bit. This is only valid if PE = 1.
bit 7–0: DIN                                                                   bit 7–0: DOUT
D7t–D0t = Transmitting Data bits. D7t is ignored when L = 1.                   D7t–D0t = Received Data bits. D7r = 0 for L = 1.
                       ______________________________________________________________________________________                                    21


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
MAX3140
          Table 5. READ DATA Register Bit Assignment (D15, D14 = 0, 0)
               BIT     15      14       13   12     11       10       9      8            7       6           5          4    3           2    1           0
               DIN      0       0       0    0      0        0        0      0            0       0           0          0    0           0    0           0
           DOUT         R       T       0    0      0      RA/FE     CTS     Pr         D7r       D6r         D5r     D4r    D3r     D2r      D1r      D0r
          Notes:                                                                  bit 13–11: DOUT
          bit 15, 14: DIN                                                         Zeros
          0, 0 = Read Data                                                        bit 10: DOUT
          bit 13–0: DIN                                                           RA/FE = Receive-activity (UART shutdown)/Framing-error
                                                                                  (normal operation) bit
          Zeros
                                                                                  bit 9: DOUT
          bit 15: DOUT                                                            CTS = CTS input state. If CTS = 0, then CTS = 1 and vice versa.
          R = 1, Data is available to be read from the receive register or
                                                                                  bit 8: DOUT
          FIFO.
                                                                                  Pr = Received parity bit. This is only valid if PE = 1.
          R = 0, Receive register and FIFO are empty.
                                                                                  bit 7–0: DOUT
          bit 14: DOUT
                                                                                  D7t–D0t = Received Data bits. D7r = 0 for L = 1.
          T = 1, Transmit buffer is empty.
          T = 0, Transmit buffer is full.
                                             Baud-Rate Generator                  Table 6. Baud-Rate Selection Table*
          The baud-rate generator determines the rate at which
          the transmitter and receiver operate. Bits B3–B0 in the                                                               BAUD             BAUD
                                                                                          BAUD                    DIVISION      RATE             RATE
          WRITE CONFIGURATION register determine the baud-
                                                                                   B3     B2 B1 B0                 RATIO       (fOSC =          (fOSC =
          rate divisor (BRD), which divides the X1 oscillator
                                                                                                                             1.8432MHz)       3.6864MHz)
          frequency. The on-board oscillator operates with either
          a 1.8432MHz or a 3.6864MHz crystal, or is driven at X1                    0         0   0     0**          1        115.2k**         230.4k**
          with a 45% to 55% duty-cycle square wave. Table 6                         0         0   0     1            2            57.6k            115.2k
          shows baud-rate divisors for given input codes, as well
                                                                                    0         0   1     0            4            28.8k            57.6k
          as the baud rate for 1.8432MHz and 3.6864MHz crys-
          tals. The generator’s clock is 16 times the baud rate.                    0         0   1     1            8            14.4k            28.8k
                                                                                    0         1   0     0           16            7200             14.4k
                                    Interrupt Sources and Masks
                                                                                    0         1   0     1           32            3600             7200
          Using the READ DATA or WRITE DATA register clears
          the interrupt IRQ, assuming the conditions that initiated                 0         1   1     0           64            1800             3600
          the interrupt no longer exist. Table 7 gives the details                  0         1   1     1           128            900             1800
          for each interrupt source. Figure 15 shows the function-                  1         0   0     0            3            38.4k            76.8k
          al diagram for the interrupt sources and mask blocks.
                                                                                    1         0   0     1            6            19.2k            38.4k
          Two examples of setting up an IRQ for the MAX3140
          are shown below.                                                          1         0   1     0           12            9600             19.2k
          Example 1: Setting up only the transmit buffer-empty                      1         0   1     1           24            4800             9600
          interrupt.                                                                1         1   0     0           48            2400             4800
          Send the 16-bit word below into DIN of the MAX3140                        1         1   0     1           96            1200             2400
          using the WRITE CONFIGURATION register. This 16-bit                       1         1   1     0           192            600             1200
          word configures the MAX3140 for 9600bps, 8-bit words,                     1         1   1     1           384            300              600
          no parity, and one stop bit with a 1.8432MHz crystal.
                                                                                  *Standard baud rates shown in bold
          binary 1100100000001010                                                 **Default baud rate
          HEX C80A
          22     ______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                                                                                                                                            MAX3140
Table 7. Interrupt Sources and Masks—Bit Descriptions
  BIT      MASK               MEANING
                                                                                     DESCRIPTION
 NAME       BIT               WHEN SET
                                                   The Pr bit reflects the value in the word currently in the receive-buffer register
                                                   (oldest data available). The Pr bit is set when parity is enabled (PE = 1) and the
                                                   received parity bit is 1. The Pr bit is cleared either when parity is not enabled (PE
   Pr        PM          Received parity bit = 1
                                                   = 0), or when parity is enabled and the received bit is 0. An interrupt is issued
                                                   based on the oldest Pr value in the receiver FIFO. The oldest Pr value is the next
                                                   value read by a READ DATA operation.
                                                   The R bit is set when new data is available to be read or when data is being read
    R        RM          Data available            from the receive register/FIFO. FIFO is cleared when all data has been read. An
                                                   interrupt is asserted as long as R = 1 and RM = 1.
                                                   This is the RA (RX-transition) bit in shutdown, and the FE (framing-error) bit in
                                                   operating mode. RA is set if there has been a transition on RX since entering
                         Transition on RX when     shutdown. RA is cleared when the MAX3140 exits shutdown. IRQ is asserted
                         in shutdown; framing      when RA is set and RAM = 1.
 RA/FE      RAM
                         error when not in         FE is determined solely by the currently received data, and is not stored in FIFO.
                         shutdown                  The FE bit is set if a zero is received when the first stop bit is expected. FE is
                                                   cleared upon receipt of the next properly framed character. IRQ is asserted
                                                   when FE is set and RAM = 1.
                                                   The T bit is set when the transmit buffer is ready to accept data. IRQ is asserted
                                                   low if TM = 1 and the transmit buffer becomes empty. This source is cleared on
                         Transmit buffer is
    T        TM                                    the rising edge of SCLK‘s 16th pulse when using a READ DATA or WRITE DATA
                         empty
                                                   operation. Although the interrupt is cleared, poll T to determine transmit-buffer
                                                   status.
                                                                                         S      NEW DATA AVAILABLE
                                                                                     Q
                                                                                         R      DATA READ
                                                                                     RM MASK
                                                                                         S   TRANSMIT BUFFER EMPTY
                                                                                     Q
                                                                                         R   DATA READ
                                                                                     TM MASK
              IRQ
                                                                                         S      PE = 1 AND RECEIVED PARITY BIT = 1
                                                                                     Q
                    N                                                                    R      PE = 0 OR RECEIVED PARITY BIT = 0
                                                                                     PM MASK
                                                                                     TRANSITION ON RX
                                                                                                    SHUTDOWN
                                                                                     RAM MASK
                                                                                     FRAMING ERROR
                                                                                                     SHUTDOWN
                                                                                     RAM MASK
Figure 15. Functional Diagram for Interrupt Sources and Mask Blocks
                        ______________________________________________________________________________________                         23


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
          Example 2: Setting up only the data-available (or data-                           RS-485/RS-422 Transceiver
MAX3140
          being-read) interrupt.                                       The RS-485/RS-422 transceiver is equipped with
          Send the 16-bit word below into DIN of the MAX3140           numerous features allowing it to be configured for any
          using the WRITE CONFIGURATION register. This 16-bit          RS-485/RS-422 application. Figure 10 shows the
          word configures the MAX3140 for 9600bps, 8-bit               MAX3140 functional diagram. Included in the RS-
          words, no parity, and one stop bit with a 1.8432MHz          485/RS-422 transceiver function is full- and half-duplex
          crystal.                                                     selectability, true fail-safe circuitry, programmable
                                                                       slew-rate limiting, receiver input filtering, and phase
          binary 1100010000001010                                      control circuitry.
          HEX     C40A
                                                                                                    Full Duplex or Half Duplex
                                                  Receive FIFO         The MAX3140 operates in either full- or half-duplex
          The MAX3140 contains a receive FIFO for data received        mode. Drive the H/F pin low, leave it unconnected
          by the UART to minimize processor overhead. The              (internal pull-down), or connect it to GND for full-duplex
          receive FIFO is 8 words deep and clears automatically if     operation or drive it high for half-duplex operation. In
          it overflows. Shutting down the UART also clears the         half-duplex mode, the receiver inputs are switched to
          receive FIFO. Upon power-up, the receive FIFO is             the driver outputs, connecting outputs Y and Z to inputs
          enabled. To disable the receive FIFO, set the FEN bit        A and B, respectively. In half-duplex mode, the internal
          high when writing to the WRITE CONFIGURATION regis-          full-duplex receiver input resistors are still connected to
          ter. To check whether the FIFO is enabled or disabled,       inputs A and B.
          read back the FEN bit using the READ CONFIGURA-
          TION.                                                                                          True Fail-Safe Circuitry
                                                                       The MAX3140 guarantees a logic-high receiver output
                                                  UART Shutdown        when the receiver inputs are shorted or open, or when
          In shutdown, the oscillator turns off to reduce power        they are connected to a terminated transmission line
          consumption (ICCSHDN UART < 1mA). The UART enters            with all drivers disabled. This is done by setting the
          shutdown in one of two ways: by a software command           receiver threshold between -50mV and -200mV. If the
          (SHDNi bit = 1) or by a hardware command (SHDN =             differential receiver input voltage (A-B) is greater than
          logic low). The hardware shutdown immediately termi-         or equal to -50mV, RO is logic high. If A-B is less than
          nates any transmission in progress. The software shut-       or equal to -200mV, RO is logic low. In the case of a
          down, requested by setting SHDNi bit = 1, is entered         terminated bus with all transmitters disabled, the
          upon completing the transmission of the data in both         receiver’s differential input voltage is pulled to 0 by the
          the transmit-shift register and the transmit-buffer regis-   termination. With the receiver thresholds of the
          ter. The SHDNo bit is set when the UART enters shut-         MAX3140, this results in a logic high with a 50mV mini-
          down (either hardware or software). The microcontroller      mum noise margin. Unlike previous fail-safe devices,
          (µC) can monitor the SHDNo bit to determine when all         the -50mV to -200mV threshold complies with the
          data has been transmitted, then shut down RS-485             ±200mV EIA/TIA-485 standard.
          transceivers at that time.
                                                                                            Programmable Slew-Rate Limiting
          Shutdown clears the receive FIFO, R, RA/FE, D0r–D7r,         The MAX3140 has several programmable operating
          Pr, and Pt registers and sets the T bit high.                modes. Transmitter rise and fall times are programma-
          Configuration bits (RM, TM, PM, RAM, IR, ST, PE, L, B0-      ble at 2500ns, 750ns, or 25ns, resulting in maximum
          3, and RTS) can be modified when SHDNo = 1 and               data rates of 115kbps, 500kbps, or 10Mbps, respec-
          CTS can also be read. Even though RA is reset upon           tively. To select the desired data rate, drive SRL to one
          entering shutdown, it goes high when a transition is         of three possible states by using a three-state driver, by
          detected on the RX pin. This allows the UART to moni-        connecting it to VCC or GND, or by leaving it uncon-
          tor activity on the receiver when in shutdown.               nected. For 115kbps operation, set the three-state
          The command to power up (SHDNi = 0) turns on the             device in high-impedance mode or leave SRL uncon-
          oscillator when CS goes high if SHDN = logic high, with      nected. For 500kbps operation, drive SRL high or con-
          a start-up time of at least 25ms. This is done by writing    nect it to VCC. For 10Mbps operation, drive SRL low or
          to the WRITE CONFIGURATION register, which clears            connect it to GND. SRL can be changed during opera-
          all registers but RTS and CTS. Since the crystal oscilla-    tion without interrupting data communications.
          tor typically requires at least 25ms to start, the first
          received characters can be garbled and a framing
          error may occur.
          24    ______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                               Receiver Input Filtering     1% for reliable operation with other systems. This is
                                                                                                                          MAX3140
The receivers of the MAX3140, when operating in             accomplished easily with a crystal, and in most cases
115kbps or 500kbps mode, incorporate input filtering in     is achieved with ceramic resonators. Table 8 lists differ-
addition to input hysteresis. This filtering enhances       ent types of crystals and resonators and their suppliers.
noise immunity with differential signals that have very     The MAX3140’s oscillator supports parallel-resonant
slow rise and fall times. Receiver propagation delay        mode crystals and ceramic resonators, or can be driven
increases by 20% due to this filtering.                     from an external clock source. Internally, the oscillator
                                Phase Control Circuitry     consists of an inverting amplifier with its input (X1) tied
Occasionally, twisted-pair lines are connected back-        to its output (X2) by a bias network that self-biases the
ward from normal orientation. The MAX3140 has two           inverter at approximately VCC/2. The external feedback
pins that invert the phase of the driver and the receiver   circuit, usually a crystal from X2 to X1, provides 180° of
to correct for this problem. For normal operation, drive    phase shift, causing the circuit to oscillate. As shown in
TXP and RXP low, connect them to ground, or leave           the standard application circuit, the crystal or resonator
them unconnected (internal pull-down). To invert the        is connected between X1 and X2, with the load capaci-
driver phase, drive TXP high or connect it to VCC. To       tance for the crystal being the series combination of C1
invert the receiver phase, drive RXP high or connect it     and C2. For example, for a 1.8432MHz crystal with a
to V CC . Note that the receiver threshold is positive      specified load capacitance of 11pF, use 22pF capaci-
when RXP is high.                                           tors on either side of the crystal to ground. Series-res-
                                                            onant mode crystals have a slight frequency error,
                Applications Information                    typically oscillating 0.03% higher than specified series-
                                                            resonant frequency when operated in parallel mode.
                         Crystals, Oscillators, and
                                                            Note: It is very important to keep crystal, resonator,
                             Ceramic Resonators
                                                            and load-capacitor leads and traces as short and
The MAX3140 includes an oscillator circuit derived
                                                            direct as possible. Make the X1 and X2 trace lengths
from an external crystal for baud-rate generation. For
                                                            and ground tracks short, with no intervening traces.
standard baud rates, use a 1.8432MHz or 3.6864MHz
                                                            This helps minimize parasitic capacitance and noise
crystal. The 1.8432MHz crystal results in lower operat-
                                                            pickup in the oscillator, and reduces EMI. Minimize
ing current; however, the 3.6864MHz crystal may be
                                                            capacitive loading on X2 to minimize supply current.
more readily available in surface-mount packages.
                                                            The MAX3140’s X1 input can be driven directly by an
Ceramic resonators are low-cost alternatives to crystals    external CMOS clock source. The trip level is approxi-
and operate similarly, though the Q and accuracy are        mately equal to VCC/2. Make no connection to X2 in this
lower. Some ceramic resonators are available with inte-     mode. If a TTL or non-CMOS clock source is used, AC-
gral load capacitors, which can further reduce cost.        couple with a 10nF capacitor to X1. A 2V peak-to-peak
The trade-off between crystals and ceramic resonators       swing on the input is required for reliable operation.
is in initial frequency accuracy and temperature drift.
Keep the total error in the baud-rate generator below
Table 8. Component and Supplier List
                          FREQUENCY           TYPICAL                                    PART             PHONE
    DESCRIPTION                                                  SUPPLIER
                             (MHz)           C1, C2 (pF)                                NUMBER           NUMBER
  Through-Hole Crystal
                             1.8432              25         ECS International, Inc.   ECS-18-13-1      (913) 782-7787
  (HC-49/U)
  Through-Hole
                             1.8432              47         Murata North America      CSA1.84MG        (800) 831-9172
  Ceramic Resonator
  Through-Hole Crystal
                             3.6864              33         ECS International, Inc.   ECS-36-18-4      (913) 782-7787
  (HC-49/US)
  SMT Crystal                3.6864              39         ECS International, Inc.   ECS-36-20-5P     (913) 782-7787
  SMT Ceramic                                   None
                             3.6864                         AVX/Kyocera               PBRC-3.68B       (803) 448-9411
  Resonator                                   (integral)
                   ______________________________________________________________________________________           25


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
                                                                 9-Bit Networks                                                SIR IrDA Mode
MAX3140
          The MAX3140 supports a common multidrop communi-                            The MAX3140’s IrDA mode communicates with other
          cation technique referred to as 9-bit mode. In this                         IrDA SIR-compatible devices, or reduces power con-
          mode, the parity bit is set to indicate a message that                      sumption in opto-isolated applications.
          contains a header with a destination address. Set the                       In IrDA mode, a bit period is shortened to 3/16 of a
          MAX3140’s parity mask to generate interrupts for this                       baud period (1.61µs at 115,200 baud) (Figure 16). A
          condition. Operating a network in this mode reduces                         data zero is transmitted as a pulse of light (TX = logic
          the processing overhead of all nodes by enabling the                        low, RX = logic high).
          slave controllers to ignore most message traffic. This
          relieves the remote processor to handle more useful                         In receive mode, the RX signal’s sampling is done
          tasks.                                                                      halfway into the transmission of a high level. The sam-
                                                                                      pling is done once, instead of three times, as in normal
          In 9-bit mode, the MAX3140 is set up with eight bits                        mode. The MAX3140 ignores pulses shorter than
          plus parity. The parity bit in all normal messages is                       approximately 1/16 of the baud period. The IrDA device
          clear, but is set in an address-type message. The                           that is communicating with the MAX3140 must transmit
          MAX3140’s parity-interrupt mask generates an interrupt                      pulses at 3/16 of the baud period. For compatibility with
          on high parity when enabled. When the master sends                          other IrDA devices, set the format to 8-bit data, one
          an address message with the parity bit set, all                             stop, no parity.
          MAX3140 nodes issue an interrupt. All nodes then
          retrieve the received byte to compare to their assigned                               256 RS-485 Transceivers on the Bus
          address. Once addressed, the node continues to                              The standard RS-485 receiver input impedance is 12kΩ
          process each received byte. If the node was not                             (one unit load), and the standard driver can drive up to
          addressed, it ignores all message traffic until a new                       32 unit loads. The MAX3140 has a 1/8-unit-load receiver
          address is sent out by the master.                                          input impedance (96kΩ), allowing up to 256 trans-
          The parity/9th-bit interrupt is controlled only by the data                 ceivers to be connected in parallel on one communica-
          in the receive register and is not affected by data in the                  tion line. Any combination of these devices and/or other
          FIFO, so the most effective use of the parity/9th-bit                       RS-485 transceivers with a total of 32 unit loads or less
          interrupt is with FIFO disabled. With the FIFO disabled,                    can be connected to the line.
          received nonaddress words are ignored and not even                                   Reduced EMI and Reflections for the
          read from the UART.
                                                                                                            RS-485/RS-422 Driver
                                                                                      The MAX3140 with SRL = VCC or unconnected, is slew-
                                                                                      rate limited, minimizing EMI and reducing reflections
                                                                                      caused by improperly terminated cables. Figure 17
                                                                                      shows the driver output waveform and its Fourier analy-
                                                                               STOP
                                   START
                                                                                                                                          MAX3140 FIG17
                   NORMAL UART
                            TX             1   0   1     0   0     1   1   0    1
                          IrDA
                            TX
                          IrDA                                                             20dB/div
                            RX
                       NORMAL
                           RX       0      1   0   1     0   0     1   1   0    1
                                   START               DATA BITS
                                                                               STOP
                                                                                                      0           100kHz/div            1MHz
                                                   UART FRAME
          Figure 16. IrDA Timing                                                      Figure 17. Driver Output Waveform and FFT Plot of MAX3140
                                                                                      with SRL = GND, Transmitting at 20kHz
          26   ______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                                                                                                                                             MAX3140
                                                    MAX3140 FIG18                                                       MAX3140 FIG19
                                                         A                                                                    A
     20dB/div                                                            20dB/div
                O           100kHz/div            1MHz                              O           100kHz/div            1MHz
Figure 18. Driver Output Waveform and FFT Plot of MAX3140           Figure 19. Driver Output Waveform and FFT Plot of MAX3140
with SRL = VCC, Transmitting a 20kHz Signal                         with SRL = Unconnected, Transmitting a 20kHz Signal
sis of a 20kHz signal transmitted with SRL = GND. High-             Enable times t ZH and t ZL in the Switching Char-
frequency harmonic components with large amplitudes                 acteristics tables assume the device was not in a low-
are evident. Figure 18 shows the same signal for SRL =              power shutdown state. Enable times t ZH(SHDN) and
VCC, transmitting under the same conditions. Figure                 tZL(SHDN) assume the device was shut down. It takes
18’s high-frequency harmonic components are much                    drivers and receivers longer to become enabled from
lower in amplitude, compared with Figure 17’s, and the              low-power shutdown mode (tZH(SHDN), tZH(SHDN)) than
potential for EMI is significantly reduced. Figure 19               from driver/receiver-disable mode (tZH, tZL).
shows the same signal for SRL = unconnected, trans-
mitting under the same conditions. In general, a trans-                                      Driver Output Protection
mitter’s rise time relates directly to the length of an             Two mechanisms prevent excessive output current and
unterminated stub, which can be driven with only minor              power dissipation caused by faults or by bus con-
waveform reflections, The following equation expresses              tention. The first, a foldback current limit on the output
this relationship conservatively:                                   stage, provides immediate protection against short cir-
                                                                    cuits over the whole common-mode voltage range (see
           Length = tRISE / (10 · 1.5ns/ft)                         Typical Operating Characteristics). The second, a ther-
where tRISE is the transmitter’s rise time.                         mal shutdown circuit, forces the driver outputs into a
For example, consider a rise time of 1320ns. This                   high-impedance state if the die temperature becomes
results in excellent waveforms with a stub length up to             excessive.
90 feet. A system can work well with longer unterminat-                                    Line Length vs. Data Rate
ed stubs, even with severe reflections, if the waveform             The RS-485/RS-422 standard covers line lengths up to
settles out before the UART samples them.                           4000 feet. For line lengths greater than 4000 feet, use
                     RS-485/RS-422 Transceiver                      the repeater application shown in Figure 20.
                     Low-Power Shutdown Mode                        Figures 21, 22, and 23 show the system differential volt-
Low-power shutdown mode is initiated by bringing both               age for the parts driving 4000 feet of 26AWG twisted-
RE high and DE low. RE and DE may be driven simulta-                pair wire into 120Ω loads.
neously; the MAX3140 is guaranteed not to enter shut-
down if RE is high and DE is low for less than 50ns. If
the inputs are in this state for at least 600ns, the device
is guaranteed to enter shutdown.
                    ______________________________________________________________________________________                              27


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
                                           Typical Applications
MAX3140
                                                                             network is shown in Figure 25. A typical full-duplex cir-
          The MAX3140 is designed for bidirectional data com-                cuit for the MAX3140 is shown in Figure 26, and a corre-
          munications on multipoint bus transmission lines. The              sponding full-duplex network is shown in Figure 27.
          RS-485 transceiver can be used in any RS-485 applica-              Since the MAX3140’s internal UART has IrDA capability,
          tion due to its numerous features and its programmabili-           a standard IR transceiver (e.g., the MAX3120) can be
          ty. A typical half-duplex circuit for the MAX3140 is               used to provide IrDA communication (Figure 28).
          shown in Figure 24, and a corresponding half-duplex
                                                     MAX3140                         DI                                            5V/div
                                                  (FULL DUPLEX)
                                      A
                         RO       R        120Ω
                                      B                   DATA IN                VA - VB                                           1V/div
                         RE
                         DE
                                      Z
                         DI                120Ω                                      RO                                            5V/div
                              D       Y
                                                          DATA OUT
                                                                                                          5μs/div
          Figure 20. Line Repeater in Full-Duplex Mode                       Figure 21. System Differential Voltage at 50kHz Driving 4000
                                                                             Feet of Cable with SRL = Unconnected
                   DI                                               5V/div           DI                                            5V/div
               VA - VB                                              1V/div       VA - VB                                           1V/div
                   RO                                               5V/div           RO                                            5V/div
                                       2μs/div                                                            1μs/div
          Figure 22. System Differential Voltage at 100kHz Driving 4000      Figure 23. System Differential Voltage at 200kHz Driving 4000
          Feet of Cable with SRL = VCC                                       Feet of Cable with SRL = GND
          28    ______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                                                                                                                                                        MAX3140
                                                                                                 VCC
                                                                                                       10k
                                    +5V                  VCC
                                                                                       IRQ
                                                         H/F                           DIN                                   μP
                                                         SHDN                         DOUT
                                                         CTS                          SCLK
                                                                                        CS
                                                         RTS               UART
                                                         TX
                                                         RX
                                            VCC                                         X1
                                                                       MAX3140
                                                  100k
                                                                                        X2
                                                         RO
                                                                   R
                                                                                             Z    HALF-DUPLEX
                                                                                             Y    RS-485 I/O
                                                         DI
                                                               D
                                                         DE                            RXP
                                                         RE*                           TXP
                                                         SRL
            *NOTE: TO SHUT DOWN THE RS-485 TRANSCEIVER, DRIVE RE SEPARATELY.
Figure 24. Typical Half-Duplex Operating Circuit
                                            120Ω                                                                         120Ω
                                                                                                                                              DE
                                       Z                                                                                          B
       DI
                    D                                                                                                                     D
                                                                                                                                              DI
      DE                               Y                 B             A                           B            A                 A
      RO                 R                                                                                                            R       RO
      RE                                                                                                                                      RE
                                                                                  R                                      R
                                                               D                                            D
                     MAX3140
                                                         DI            DE     RO RE                    DI           DE   RO RE
Figure 25. Typical Half-Duplex RS-485 Network
                        ______________________________________________________________________________________                                     29


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
MAX3140
                                                                                                                  VCC
                                                                                                                        10k
                                                                             VCC                        IRQ
                                                                             SHDN                      DIN
                                                                                                      DOUT                             μP
                                                                             H/F                      SCLK
                                                                                                         CS
                                                                                             UART
                                                                             CTS
                                                                                                        X1
                                                                             RTS
                                                                             TX             MAX3140     X2
                                                                             RX
                                                                             RO                               A
                                                                                        R
                                                                                                              B
                                                                                                                      FULL-DUPLEX
                                                                                                                      RS-422 I/O
                                                                             DI                               Y
                                                                                    D
                                                                                                              Z
                                                                             DE                        RXP
                                                                             RE*
                                                                                                       TXP
                                                                             SRL
                          *NOTE: TO SHUT DOWN THE RS-485 TRANSCEIVER, DRIVE RE SEPARATELY WITH AN I/O OF A μP.
          Figure 26. Typical Full-Duplex Operating Circuit
                                       A                                                                                                    Y
                                           120Ω                                                                                     120Ω
                  RO           R                                                                                                                    D   DI
                  RE
                                       B                                                                                                    Z
                  DE
                                                                                                                                                        DE
                                       Z                                                                                                    B
                                                                                                                                                        RE
                                           120Ω                                                                                     120Ω
                   DI      D                                                                                                                    R       RO
                                       Y                                                                                                    A
                                                                 B           A                                    B           A
                                                                       R                                                R
                         MAX3140
                                                                     RE RO                                            RE RO
          Figure 27. Typical Full-Duplex RS-422 Network
          30   ______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                                                                                                                                                MAX3140
                                           VCC
                                                   10k   +5V                   VCC
                                                                               H/F                                        MAX3120
                                                                               IRQ            UART    TX
                                                                               DIN               IN
                                                                               DOUT                                                 IrDA
                                                                                               IrDA                                 I/O
                                                                               SCLK                   RX
                                                                                              MODE
                                                                               CS
                                              μP
                                                                                          MAX3140     X1
                                                                  VCC
                                                                        100k
                                                 SOFTWARE                                             X2
                                                  NON-IrDA                     RO
                                                   UART                                   R
                                                             RX                                             Z   HALF-DUPLEX
                                                                                                            Y   RS-485 I/O
                                                             TX                DI
                                                                                      D
                                                                               DE                     RXP
                                                         RTS
                                                                               RE*                    TXP
                                                             UNCONNECTED       SRL
            *NOTE: TO SHUT DOWN THE RS-485 TRANSCEIVER, DRIVE RE SEPARATELY.
Figure 28. Typical IR and RS-485 Operating Circuit
                     ______________________________________________________________________________________                                31


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
                                             Software Driver
MAX3140
                                                                     The user must supply code for managing the transmit
          Listing 1 is a C-language outline of an interrupt-driven   and receive queues, as well as the low-level hardware
          software driver that interfaces to a MAX3140, providing    interface itself. The interrupt control hardware must be
          an intermediate layer between the bit-manipulation sub-    initialized before this driver is called.
          routine and the familiar PutChar/GetChar subroutines.
          Listing 1. Outline for a MAX3140 Software Driver
          32   ______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                                                                                                           MAX3140
Listing 1. Outline for a MAX3140 Software Driver (continued)
             ______________________________________________________________________________________   33


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
MAX3140
          Listing 1. Outline for a MAX3140 Software Driver (continued)
          34   ______________________________________________________________________________________


SPI/MICROWIRE-Compatible UART with Integrated
       True Fail-Safe RS-485/RS-422 Transceivers
                            Pin Configuration                                  Package Information
                                                                                                                         MAX3140
                                                       For the latest package outline information and land patterns,
                                                       go to www.maxim-ic.com/packages. Note that a “+”, “#”, or
 TOP VIEW
                                                       “-” in the package code indicates RoHS status only. Package
                      +                                drawings may show a different suffix character, but the drawing
             X2 1                   28 SHDN
                                                       pertains to the package regardless of RoHS status.
             X1 2                   27 IRQ
                                                         PACKAGE          PACKAGE        OUTLINE         LAND
            CTS 3                   26 CS                  TYPE             CODE           NO.        PATTERN NO.
            RTS 4                   25 SCLK               28 QSOP          E28M+1         21-0055        90-0173
             RX 5                   24 DOUT
                          MAX3140
             TX 6                   23 DIN
            H/F 7                   22 VCC
            GND 8                   21 RXP
             RO 9                   20 A
             RE 10                  19 B
             DE 11                  18 Z
             DI 12                  17 N.C.
            SRL 13                  16 Y
            N.C. 14                 15 TXP
                          QSOP
                ______________________________________________________________________________________             35


          SPI/MICROWIRE-Compatible UART with Integrated
          True Fail-Safe RS-485/RS-422 Transceivers
                                                                                                                            Revision History
MAX3140
           REVISION       REVISION                                                                                                             PAGES
                                                                                DESCRIPTION
           NUMBER          DATE                                                                                                               CHANGED
                0            6/99       Initial release                                                                                            —
                                        Changed the maximum value of the “Driver Rise or Fall Time” parameter in the
                1            9/10                                                                                                                  6
                                        Switching Characteristics—SRL = VCC table
          Maxim cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim product. No circuit patent licenses are
          implied. Maxim reserves the right to change the circuitry and specifications without notice at any time.
          36 ____________________Maxim Integrated Products, 120 San Gabriel Drive, Sunnyvale, CA 94086 408-737-7600
          © 2010 Maxim Integrated Products                                        Maxim is a registered trademark of Maxim Integrated Products, Inc.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 MAX3140CEI+ MAX3140CEI+T MAX3140EEI+ MAX3140EEI+T
