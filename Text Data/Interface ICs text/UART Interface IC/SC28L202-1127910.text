                          INTEGRATED CIRCUITS
      SC28L202
      Dual universal asynchronous
      receiver/transmitter (DUART)
 Product data sheet                           2005 Nov 01
 Supersedes data of 2004 Apr 16
 
   


Philips Semiconductors                                                                                                                                                                                        Product data sheet
  Dual universal asynchronous receiver/transmitter
  (DUART)                                                                                                                                                                                                SC28L202
DESCRIPTION . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       1
FEATURES . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    1
ORDERING INFORMATION . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                    2
PIN CONFIGURATIONS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                2
PIN CONFIGURATION FOR 80XXX BUS INTERFACE (INTEL) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                     3
CONFIGURATION FOR 68XXX BUS INTERFACE (MOTOROLA) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                          4
OVERALL DESCRIPTION . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                   5
   BRIEF DESCRIPTION OF FUNCTIONAL BLOCKS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                             5
       Bus Interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .      5
       Timing Circuits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .      5
       I/O ports . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  5
       UARTs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  5
       Transmitters and Receivers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                 5
       Character and Address Recognition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                        6
       Flow Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     6
       Test Modes and Software . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                6
   DETAILED DESCRIPTIONS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                      6
       Bus Interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .      6
       Timing Circuit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     7
       I/O Ports . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  8
   UART Operation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .         8
       Receiver Operation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .           9
       Arbitrating Interrupt Structure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .             12
PROGRAMMING THE HOST INTERFACE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                   17
REGISTER DESCRIPTION AND PROGRAMMING NOTE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                  18
   Registers that control Global Properties of the 28L202 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                18
       GCCR – Global Configuration Control Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                18
       GCCR(7:6) DACKN Assertion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                     18
       GCCR(5:3): Reserved . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .             18
       GCCR(2:1): Interrupt vector configuration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         18
       GCCR(0): Interrupt Status Masking . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                       18
       SFSR A and B Special Feature & Status Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                  19
       SFSR(7:4) Reserved . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .            19
       SFSR(3) Status of loop back error check. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                          19
       SFSR(0) Reserved . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .            19
       TRR Test and Revision Register. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                     19
       TRR[7] Test 2 Enable . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .            19
       TRR[6:0] – Chip Revision Code . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                     19
       STCR – Scan Test Control Register. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                        19
       SES – System Enable Status Register, A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                  19
       EOS – Enhanced Operation Status Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                19
   UART Registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .      20
       These registers are generally concerned with formatting, transmitting and receiving data. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                           20
       MR0 – Mode Register 0, A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                      20
       MR0[7] Fixed length Watchdog Timer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                          20
       MR0[5:4] – Tx interrupt fill level. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .               20
       MR0[3] – FIFO Size . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .          20
       MR0[2:0] – Legacy Baud Rate Group Selection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                 20
       MR1 – Mode Register 1, A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                      21
       MR1[7] – Receiver Request to Send (hardware flow control) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                         21
       MR1[6] – Receiver interrupt control bit 1. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                      21
       MR1 [5] – Error Mode Select and sub modes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                               21
       MR1[4:3] – Parity Mode Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                   21
       MR1[2] – Parity Type Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .               21
       MR1[1:0] – Bits per Character Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                      21
       MR2 – Mode Register 2, A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                      22
       MR2[7:6] – Mode Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .              22
       MR2[7:6] = b’00 Normal Mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                   22
       MR2[7:6] = b’01 Automatic Echo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                    22
       MR2[7:6] = b’10 selects local loop back diagnostic mode. In this mode: . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                22
       MR2 [7:6] = b’11 Selects the Remote Loop back diagnostic mode. In this mode: . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                        22
       MR2[5] Transmitter Request to Send Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                              22
       MR2[4] – Clear to Send Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                    22
       MR2[3:0] – Stop Bit Length Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                     22
2005 Nov 01                                                                                                      i


Philips Semiconductors                                                                                                                                                                              Product data sheet
  Dual universal asynchronous receiver/transmitter
  (DUART)                                                                                                                                                                                      SC28L202
       MR3 – Mode Register 3, A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .            23
       MR3[7 & 6] Xon/Xoff Character Stripping . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                 23
       MR3[5:4] Reserved . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
       MR3[3:2] Xon/Xoff Processing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .        23
       MR3[1:0] Address Recognition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .          23
       RxCSR – Receiver Clock Select Register A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                          24
       TxCSR Transmitter Clock Select Register A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         24
       Rx and Tx Clock Select Table . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .        24
       CRx – Command Register Extension, A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                       25
       CR[7] – Lock Tx and Rx enables. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .           25
       CR[6] – Enable Transmitter . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .      25
       CR[5] – Enable Receiver . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     25
       CR[4:0] – Miscellaneous Commands (See Table below) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                              25
       COMMAND REGISTER EXTENSION TABLE A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                      26
       SR – Channel Status Register A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                27
       SR[7] – Received Break . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    27
       SR[6] – Framing Error (FE) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .      27
       SR[5] – Parity Error (PE) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   27
       SR[4] – Overrun Error (OE) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .      27
       SR [3] – Transmitter Idle (Tx Idle) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       27
       SR[2] – Transmitter Ready (TxRDY) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .               27
       SR[1] – RxFIFO Full (RxFULL) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .          27
       SR[0] – Receiver Ready (RxRDY) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .              27
       ISR – Interrupt Status Register A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .               28
       ISR[7] – Input Change of State. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       28
       ISR[6] Fixed Watchdog Time-out. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .           28
       ISR[5] – Address Recognition Status Change. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                     28
       ISR[4] – Xon/Xoff Status Change. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .          28
       ISR[3] – Counter Timer Status . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       28
       ISR[2] – Change in Channel Break Status. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                  28
       ISR[1] – RxINT. (Also Rx DMA hand shake at I/O pins) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                            28
       ISR[0] – TxINT. (Also Tx DMA hand shake at I/O pins) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                          28
       IMR – Interrupt Mask Register A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .               29
       IMR[7] COS enable . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
       IMR[6] Fixed Watchdog Enable . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .          29
       IMR[5] Address recognition enable . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .           29
       IMR[4] Xon/Xoff Enable . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    29
       IMR[3] Counter/Timer Enable . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .         29
       IMR[1] Receiver (Rx) Enable . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       29
       IMR[0] Transmitter (Tx) Enable . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .        29
       RxFIFO – Receiver FIFO, A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .             29
       TxFIFO – Transmitter FIFO, A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .              29
       RxFIL – Receiver FIFO Interrupt Level, A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                      29
       RxFL – Receiver FIFO Fill Level Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                29
       TxFIL – Transmitter FIFO Interrupt Level A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                      30
       TxEL – Transmitter FIFO Empty Level Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                      30
   Registers for Character Recognition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .         30
       XonCR – Xon/Xoff Character Register A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                       30
       XoffCR – Xoff Character Register A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                  30
       ARCR – Address Recognition Character Register A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                 30
       XISR – Xon–Xoff Interrupt Status Register A and B (Reading this register clears XISR(7:4)) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                      31
       XISR[7:6] Received X Character Status. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                31
       XISR[5:4] Automatic transmission Status. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                31
       XISR[3:2] TxD Condition of the automatic flow control status. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                             31
       XISR[1:0] TxD X character Status. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .           31
       WCXER Watch Dog, Character, Address and X Enable Register – A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                               31
   Programmable Counters, Timers and Baud Rate generators . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                32
       PBRGPU – Programmable BRG Timer Reload Registers, Upper 0 and 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                               32
       PBRGPL – Programmable BRG Timer Reload Registers, Lower 0 and 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                               32
       CTCS 0 and 1 – Counter Timer clock source . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                     32
       CTVU – Counter Timer Value Registers, Upper 0 and 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                             32
       CTVL – Counter timer Value Registers, Lower 0 and 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                           32
       PBRGCS – Programmable BRG Clock Source . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                            32
       CTPU Counter Timer Preset Upper 0 and 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                     33
       CTPL Counter –Timer Preset Low 0 and 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                    33
2005 Nov 01                                                                                           ii


Philips Semiconductors                                                                                                                                                                               Product data sheet
  Dual universal asynchronous receiver/transmitter
  (DUART)                                                                                                                                                                                       SC28L202
   Registers of the Arbitrating Interrupt System and Bidding control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                              34
       ICR – Interrupt Control Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .         34
       UCIR – Update CIR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  34
       CIR – Current Interrupt Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .         34
       IVR – Interrupt Vector Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .        35
       Modification of the IVR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  35
       GICR – Global Interrupting Channel Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                    35
       GIBCR – Global Interrupting Byte Count Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                        35
       GITR – Global Interrupting Type Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                 35
       GRxFIFO – Global RxFIFO Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                 35
       GTxFIFO – Global TxFIFO Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .               35
       BCRBRK – Bidding Control Register – Break Change, A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                      36
       BCRCOS – Bidding Control Register – Change of State, A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                       36
       BCRx – Bidding Control Register – Xon/Xoff, A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                            36
       BCRA – Bidding Control Register – Address, A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                             36
       BCR C/T – Bidding Control Register –C/T, 0 and 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         36
       BCRLBE – Bidding Control Register – Received Loop Back Error . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                       36
   Registers of the I/O ports . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36
       IPCRL – Input Port Change Register Lower Nibble, A and B (n = A for A, n = B for B) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                  36
       IPCRU – Input Port Change Register Upper Nibble, A and B (n = A for A, n = B for B) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                  36
       IPR – Input Port Register, A and B (n = A for A, n = B for B) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                            36
       IPCE – Input Change Detect Enable, A and B (n = A for A, n = B for B) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                        37
       I/OPCR 0 – I/O Port Configuration Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                   37
       I/OPCR 1 – I/O Port Configuration Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                   37
       I/OPCR 2 – I/O Port Configuration Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                   37
       I/OPCR 3 – I/O Port Configuration Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                   37
       SOPR A and SOPR B – Set the Output Port Bits (OPR A and OPR B) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                             38
       ROPR A and ROPR B – Reset ROPR Output Port Bits (OPR A and OPR B) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                    38
       OPR – Output Port Register, A and B (n = A for A, n = B for B) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                               38
THE REGISTERS FOR COMPATIBILITY WITH PREVIOUS DUARTS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                    39
       REGISTER DESCRIPTIONS Mode Registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                             41
       MR1 Mode Register 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    42
       MR1 A[7] – Channel A Receiver Request–to–Send Control (Flow Control) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                             42
       MR1[6] – Receiver interrupt control bit 1. See description under MR0[6]. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                       42
       MR1 A[5] – Channel A Error Mode Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                   42
       MR1 A[4:3| – Channel A Parity Mode Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                    42
       MR1 A[2] – Channel A Parity Type Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                  42
       MR1 A[1:0] – Channel A Bits Per Character Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         42
       MR2 Mode Register 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    42
       SR Status Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
       SR A[7] – Received Break . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       43
       SR A[6] – Channel A Framing Error . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .              43
       SR A[5] – Channel A Parity Error . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .           43
       SR A[4] – Channel A Overrun Error . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .              43
       SR A[3] – Channel A Transmitter Empty (TxEMT A) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                            43
       SR A[2] – Channel A Transmitter Ready (TxRDY A) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                            43
       SR A[1] – Channel A FIFO Full (FFULL A) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                    43
       SR A[0] – Channel A Receiver Ready (RxRDY A) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                           43
       SR B – Channel B Status Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .             43
       CSR A – Channel A Clock Select Register CSR A [7:4] – Channel A Receiver Clock Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                          44
       CSR Clock Select Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .        44
       CSR A [3:0] – Channel A EXTERNAL Transmitter Clock Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                      44
       CSR B [7:4] – Channel B Receiver Clock Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                        44
       CSR B [3:0] – Channel B Transmitter Clock Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         44
       Rx FIFO Register. For characters shorter than 8 bits the unused bits are set to zero . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                               44
       Tx FIFO register. For characters shorter than 8 bits the unused bits are set to zero . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                             44
       CR A and B Command Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .              45
       CR Command Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .      45
       COMMAND REGISTER TABLE A and B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         45
       IPCR Input Port Configuration Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .               46
       IPCR [7:4] I/03A, I/O2 A, I/O1 A, I/O0 A Change–of–State . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                             46
       IPCR [3:0] I/O3 A, I/O2 A, I/O1 A, I/O0 A logical level of I/O pin. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                            46
       ACR Auxiliary Control Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .         46
       ACR[7] – Baud Rate Generator Set Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                    46
       ACR[6:4] – Counter/Timer Mode And Clock Source Select . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                  46
       ACR[3:0] – I/O3 A, I/O2 A, I/O1 A, I/O0 A Change-of-State Interrupt Enable . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                           46
2005 Nov 01                                                                                            iii


Philips Semiconductors                                                                                                                                                                                  Product data sheet
  Dual universal asynchronous receiver/transmitter
  (DUART)                                                                                                                                                                                          SC28L202
       ISR – Interrupt Status Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .           47
       ISR[7] – Input Port Change Status . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .               47
       ISR[6] – Channel B Change In Break . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                  47
       ISR[5] – Rx B Interrupt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     47
       ISR[4] – Tx B Interrupt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     47
       ISR[3] – Counter Ready. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       47
       ISR[2] – Channel A Change in Break . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                  47
       ISR[1] – Rx A Interrupt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     47
       ISR[0] – Tx A Interrupt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     47
       IMR – Interrupt Mask Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .           48
       CTPU Counter Timer Preset Upper (Counter/Timer 0) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                 48
       CTPL Counter –Timer Preset Lower (Counter/Timer 0) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                  48
       CTVU Counter Timer Value Upper (Counter/Timer 0) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                48
       CTVL Counter –Timer Value Lower (Counter/Timer 0) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                 48
       IVR Interrupt Vector register in 68K mode and General purpose read write register in the x86 mode . . . . . . . . . . . . . . . . . . . . . . . . .                                                               48
       IPR Input Port Register I/O(6:0) A . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .            48
       OPCR Output Port Configuration Register. Controls [7:2] B . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                 49
       SOPR – Set Bits in the OPR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .            50
       ROPR – Reset Bits in the OPR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .              50
       OPR Output Port Register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .          50
REGISTER MAPS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  51
   REGISTER MAP DETAIL (based on 28L92) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                          51
REGISTER MAP . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52
REGISTER MAP . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53
REGISTER MAP . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
GENERAL TIMING CONSIDERATIONS FOR THE SC28L202 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                               55
ABSOLUTE MAXIMUM RATINGS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                     55
DC ELECTRICAL CHARACTERISTICS (NOMINAL 5 VOLTS) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                              55
AC CHARACTERISTICS (NOMINAL 5 VOLTS) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                               56
DC ELECTRICAL CHARACTERISTICS (NOMINAL 3.3 VOLTS) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                58
AC CHARACTERISTICS (NOMINAL 3.3 VOLTS) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                 59
TIMING DIAGRAMS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    60
2005 Nov 01                                                                                               iv


Philips Semiconductors                                                                                                                                                                                Product data sheet
   Dual universal asynchronous receiver/transmitter
   (DUART)                                                                                                                                                                                       SC28L202
LIST OF FIGURES
Figure 1.    80xxx TSSOP56 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .          2
Figure 2.    68xxx TSSOP56 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .          2
Figure 3.    Active area in 68K mode. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .            61
Figure 4.    Reset Timing (80XXX mode) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                 62
Figure 5.    Reset Timing (68XXX mode) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                 62
Figure 6.    Bus Timing (80XXX mode) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .               62
Figure 7.    Bus Timing (Read Cycle) (68XXX mode) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                          63
Figure 8.    Bus Timing (Write Cycle) (68XXX mode) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         63
Figure 9.    Interrupt Cycle Timing (68XXX mode) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                       64
Figure 10.   Port Timing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64
Figure 11.   Interrupt Timing (80xxx mode) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .               65
Figure 12.   Clock Timing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  65
Figure 13.   Transmitter External Clocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .             66
Figure 14.   Receiver External Clock . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .           66
Figure 15.   Transmitter Timing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .      66
Figure 16.   Receiver Timing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     67
Figure 17.   Wake-Up Mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .        67
Figure 18.   Test Conditions on Outputs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .              68
TSSOP56: plastic thin shrink small outline package; 56 leads; body width 6.1 mm (SOT364-1) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                             69
LIST OF TABLES
Table 1.     Interrupt Values . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    14
Table 2.     SC28L202 REGISTER BIT DESCRIPTIONS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                    19
Table 3.     Receiver FIFO Interrupt Fill Level MR0(3)=0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         21
Table 4.     Receiver FIFO Interrupt Fill Level MR0(3)=1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         21
Table 5.     Transmitter FIFO Interrupt Fill Level MR0(3)=0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                            21
Table 6.     Transmitter FIFO Interrupt Fill Level MR0(3)=0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                            21
Table 7.     SC28L92 Register Addressing READ (RDN = 0) WRITE (WRN = 0) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                    39
Table 8.     Baud Rate Generator Characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                     40
Table 9.     Receiver FIFO Interrupt Fill Level MR0(3)=0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         41
Table 10.    Receiver FIFO Interrupt Fill Level MR0(3)=1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         41
Table 11.    Transmitter FIFO Interrupt Fill Level MR0(3)=0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                            41
Table 12.    Transmitter FIFO Interrupt Fill Level MR0(3)=1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                            41
Table 13.    Baud Rate (Base on a 14.7456 MHz crystal clock) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                 44
Table 14.    ACR 6:4 Field Definition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .          46
Table 1.     Interrupt Values . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    14
Table 2.     SC28L202 REGISTER BIT DESCRIPTIONS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                    18
Table 3.     Receiver FIFO Interrupt Fill Level MR0(3)=0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         20
Table 4.     Receiver FIFO Interrupt Fill Level MR0(3)=1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         20
Table 5.     Transmitter FIFO Interrupt Fill Level MR0(3)=0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                            20
Table 6.     Transmitter FIFO Interrupt Fill Level MR0(3)=0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                            20
Table 7.     SC28L92 Register Addressing READ (RDN = 0) WRITE (WRN = 0) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                                    39
Table 8.     Baud Rate Generator Characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                     40
Table 9.     Receiver FIFO Interrupt Fill Level MR0[3] = 0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         41
Table 10.    Receiver FIFO Interrupt Fill Level MR0[3] = 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                         41
Table 11.    Transmitter FIFO Interrupt Fill Level MR0[3] = 0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                          41
Table 12.    Transmitter FIFO Interrupt Fill Level MR0[3] = 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                          41
Table 13.    Baud Rate (Base on a 14.7456 MHz crystal clock) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .                                 44
Table 14.    ACR 6:4 Field Definition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .          46
2005 Nov 01                                                                                             v


Philips Semiconductors                                                                                                       Product data sheet
    Dual UART                                                                                                              SC28L202
DESCRIPTION                                                               • Three character recognition system per channel, used as:
The 28L202 is a high performance dual UART. Its functional and
                                                                            – General purpose character recognition
programming features closely match but greatly extend those of
previous Philips dual channel UARTs. Its configuration on power up          – Xon/Xoff character recognition
is similar that of the SC26C92. Its differences from the SC26C92            – Address recognition Wake up (multi-drop or ‘9 bit’) mode
are: 256-character receiver, 256 character transmit FIFOs, 3 V and          – System provides 4 levels of automation on a recognition event
5 V compatibility, 8 I/O ports for each UART—16 total, arbitrating
interrupt system and overall faster bus and data speeds. It is            • Programmable data format
fabricated in an advanced 0.5 micron CMOS process.                          – 5 to 8 data bits plus parity and 9 bit mode
It is a member of the    IMPACT    line of Data Communications parts       – Odd, even, no parity or force parity
                                                                            – 9/16,1, 1.5 or 2 stop bits
Pin programming will allow the device to operate with either the
Motorola or Intel bus interface by changing the function of some pins     • 16-bit programmable Counter/Timer
(reset is inverted, DACKN, and IACKN enabled for example).
                                                                          • Programmable baud rate for each receiver and transmitter
The Philips Semiconductors 28L202 Dual Universal Asynchronous               selectable from:
Receiver/Transmitter (DUART) is a single-chip CMOS-LSI                      – 27 fixed rates: 50 to 2.0 Meg baud (includes MIDI rate)
communications device that provides two full-duplex asynchronous
                                                                            – Other baud rates via external clocks and C/T
receiver/transmitter channels in a single package. It interfaces
directly with microprocessors and may be used in a polled or                – Programmable user-defined rates derived from a programmable
interrupt driven system. The use of the Interrupt system provides             Counter/timer
intelligent interrupt vectors.                                              – External 1X or 16X clock
The operating mode and data format of each channel may be                 • Parity, framing, and overrun error detection
programmed independently. Additionally, each receiver and
transmitter can select its operating speed as one of twenty-seven
                                                                          • Line break detection and generation; false start bit detection
fixed baud rates; a 16X clock derived from one of two programmable        • Programmable channel mode
counter/timers, or an external 1X or 16X clock. The baud rate
                                                                            – Normal (full-duplex)
generator and counter/timer can operate directly from a crystal or
from external clock inputs. The ability to independently program the        – Automatic echo
operating speed of the receiver and transmitter make the DUART              – Local loop back
particularly attractive for dual-speed channel applications such as         – Remote loop back
clustered terminal systems and bridges.                                     – Multi-drop mode (also called ‘wake-up’ or ‘9-bit’)
Each receiver and transmitter is buffered by 256 character FIFOs to       • Multi-function 8 bit I/O input port per channel loosely assigned to
nearly eliminate the potential of receiver overrun, transmitter             each channel.
underrun and to reduce interrupt overhead in interrupt driven
                                                                            – Can serve as clock or control inputs
systems. In addition, a flow control capability (Xon/Xoff and
RTS/CTS) is provided to disable a remote transmitter when the               – Change of state detection on eight inputs
receiver buffer is full.                                                    – Inputs have typically >100 MΩ pull-up resistors
Also provided on the 28L202 is a multipurpose 8-bit I/O for each            – Modem and DMA interface
channel. These can be used as general-purpose I/O ports or can be         • Versatile arbitrating interrupt system
assigned specific functions (such as clock inputs or status and
                                                                            – Interrupt system totally supports ‘single query’ polling
interrupt outputs) under program control. Normally they will be used
for modem control and DMA interface. All ports have change of state         – Output port can be configured to provide a total of up to six
detectors and input sections are always active making output                  separate interrupt type outputs that may be wire-ORed
signals available to the internal circuits and the control processor.         (switched to open drain).
                                                                            – Each FIFO can be independently programmed for any of 256
The 28L202 is available in a 52–pin TSSOP package. For other                  interrupt levels
package options, contact Philips.
                                                                            – Watch dog timer for each receiver
                                                                          • Maximum data transfer rates: 1X – 3 Mb/sec, 16X – 2 Mb/sec
FEATURES                                                                  • Automatic wake-up mode for multi-drop applications
• Member of IMPACT family: 3.3 V to 5.0 V , –40°C to +85°C and
    80xx or 68k bus interface (I/M modes) for all devices.                • Start-end break interrupt/status
• Bit-by-bit real time transmission error check for high data integrity   • Detects break which originates in the middle of a character
    systems.                                                              • On-chip crystal oscillator
• Dual full-duplex independent asynchronous receiver/transmitters         • Power down mode at less than 10 µa
• 256 character FIFOs for each receiver and transmitter                   • Receiver time-out mode
• Powers up to 9600 baud, 1 stop bit, no parity, 1 stop bit, interrupt    • Single +3.3V or +5V power supply
    disabled, all I/O set to input.
• Pin programming to 68K or 80xxx bus interface
  2005 Nov 01                                                           1


Philips Semiconductors                                                                                                             Product data sheet
   Dual UART                                                                                                                   SC28L202
ORDERING INFORMATION
                           Package
 Type number
       n mber                                                                                                             Temperat re range
                                                                                                                          Temperature
                           Name        Description                                                            Version
 Industrial, VCC = +3.3 +5 V ± 10 %
 SC28L202A1DGG             TSSOP56     plastic thin shrink small outline package; 56 leads;                   SOT364-1    Tamb = –40 °C to +85 °C
                                       body width 6.1 mm
PIN CONFIGURATIONS
                  VCC 1                       56 X2                                              VCC 1                       56 X2
                  VSS    2                    55 X1/SCLK                                         VSS    2                    55 X1/SCLK
                    A6   3                    54 IRQN                                              A6   3                    54 IRQN
                    A5   4                    53 TXDA                                              A5   4                    53 TXDA
                    A4   5                    52 I/O0A                                             A4   5                    52 I/O0A
                    A3   6                    51 I/O1A                                             A3   6                    51 I/O1A
                RXDA     7                    50 I/O2A                                         RXDA     7                    50 I/O2A
              RESET      8                    49 I/O3A                                      RESETN      8                    49 I/O3A
                   D7    9                    48 I/O4A                                            D7    9                    48 I/O4A
                   D6 10                      47 I/O5A                                            D6 10                      47 I/O5A
                   D5 11                      46 I/O6A                                            D5 11                      46 I/O6A
                    D4 12                     45 I/O7A                                             D4 12                     45 I/O7A
                 VCC 13                       44 VSS                                            VCC 13                       44 VSS
                  n.c. 14                     43 VSS                                             n.c. 14                     43 VSS
                 VSS 15                       42 VCC                                            VSS 15                       42 VCC
                 VSS 16                       41 VCC                                            VSS 16                       41 VCC
                   D3 17                      40 I/O0B                                            D3 17                      40 I/O0B
                    D2 18                     39 I/O1B                                             D2 18                     39 I/O1B
                    D1 19                     38 I/O2B                                             D1 19                     38 I/O2B
                   D0 20                      37 I/O3B                                            D0 20                      37 I/O3B
                  I /M 21                     36 I/O4B                                           I /M 21                     36 I/O4B
                RXDB 22                       35 I/O5B                                         RXDB 22                       35 I/O5B
                    A2 23                     34 I/O6B                                             A2 23                     34 I/O6B
                    A1 24                     33 I/O7B                                             A1 24                     33 I/O7B
                    A0 25                     32 TXDN                                              A0 25                     32 TXDB
               IACKN 26                       31 RDN                                          IACKN 26                       31 DACKN
                 VCC 27                       30 WRN                                            VCC 27                       30 RWN
                 VSS 28                       29 CEN                                            VSS 28                       29 CEN
                                      SD00727                                                                        SD00728
                       Figure 1. 80xxx TSSOP56                                                        Figure 2. 68xxx TSSOP56
2005 Nov 01                                                               2


Philips Semiconductors                                                                                                       Product data sheet
   Dual UART                                                                                                               SC28L202
PIN CONFIGURATION FOR 80XXX BUS INTERFACE (INTEL) (see Figure 1)
                     Pin
Symbol      Pin no.        Name and Function
                     type
I/M         21       I     Bus Configuration: When HIGH, configures the bus interface to the Conditions shown in this table.
D0–D7       20–17,   I/O   Data Bus: Bi-directional 3-State data bus used to transfer commands, data and status between the DUART and
            12–9           the CPU. D0 is the least significant bit.
CEN         29       I     Chip Enable: Active-LOW input signal. When LOW, data transfers between the CPU and the DUART are
                           enabled on D0–D7 as controlled by the WRN, RDN and A6–A0 inputs. When HIGH, places the D0–D7 lines in
                           the 3-State condition.
WRN         30       I     Write Strobe: When LOW and CEN is also LOW, the contents of the data bus is loaded into the addressed
                           register. The transfer occurs on the rising edge of the signal.
RDN         31       I     Read Strobe: When LOW and CEN is also LOW, causes the contents of the addressed register to be presented
                           on the data bus. The read cycle begins on the falling edge of RDN.
A6–A0       3–6,     I     Address Inputs: Select the DUART internal registers and ports for read/write operations.
            23–25
RESET       8        I     Reset: A HIGH level clears internal registers (SR A, SR B, IMR, ISR, OPR, OPCR), places I/O[7:0] A and B at
                           high impedance input state, stops the counter/timer, and puts Channels A and B in the inactive state, with the
                           TxD A and TxD B outputs in the ‘mark’ (HIGH) state. Sets MR pointer to MR1 9600 baud, 1 start, no parity and 1
                           stop bit(s). (See Reset table)
IRQN        54       O     Interrupt Request: Active-LOW, open-drain, output which signals the CPU that one or more of the eighteen (18)
                           maskable interrupting conditions are true.
IACKN       26       I     Interrupt Acknowledge: Active-LOW input indicates an interrupt acknowledge cycle. Usually asserted by the
                           CPU in response to an interrupt request. When asserted places the interrupt vector on the bus.
X1/SCLK     55       I     Crystal 1: Crystal or external clock input. A crystal or clock of the specified limits must be supplied at all times.
                           When a crystal is used, a capacitor must be connected from this pin to ground (see Figure 12).
X2          56       O     Crystal 2: Connection for other side of the crystal. When a crystal is used, a capacitor must be connected from
                           this pin to ground (see Figure 12). If X1/Sclk is driven from an external source, this pin must be open or not
                           driving more that 2 CMOS or TTL loads.
RxD A       7        I     Channel A Receiver Serial Data Input: The least significant bit is received first. ‘Mark’ is HIGH; ‘space’ is LOW.
RxD B       22       I     Channel B Receiver Serial Data Input: The least significant bit is received first. ‘Mark’ is HIGH; ‘space’ is LOW.
TxD A       53       O     Channel A Transmitter Serial Data Output: The least significant bit is transmitted first. This output is held in
                           the ‘mark’ condition when the transmitter is disabled, idle or when operating in local loop back mode. ‘Mark’ is
                           HIGH; ‘space’ is LOW.
TxD B       32       O     Channel B Transmitter Serial Data Output: The least significant bit is transmitted first. This output is held in
                           the ‘mark’ condition when the transmitter is disabled, idle, or when operating in local loop back mode. ‘Mark’ is
                           HIGH; ‘space’ is LOW.
I/O[7:0]A   45–52    I/O   General-purpose input and output ports channel A: The character of these pins is controlled by I/OPCR.
                           They may be inputs or outputs and will present many internal clocks and interrupt signals: RTS, CTS, DTR, DSR
                           etc. All have change of state detectors and the input is always active. These pins are set to input only when
                           addressed from the low order 16 address space. When these pins are configured for interrupt type signals
                           (RxRDY, TxRDY, C/TRDY) They switch to open drain outputs. Each of these pins have a small pull-up ‘resistor’
                           that supplies approximately 5 µA of current.
I/O[7:0]B   33–40    I/O   General-purpose input and output ports channel B: The character of these pins is controlled by I/OPCR.
                           They may be inputs or outputs and will present many internal clocks and interrupt signals: RTS, CTS, DTR, DSR
                           etc. All have change of state detectors and the input is always active. These pins are set to output only when
                           addressed from the low order 16 address space. When these pins are configured for interrupt type signals
                           (RxRDY, TxRDY, C/TRDY) They switch to open drain outputs. Each of these pins have a small pull-up ‘resistor’
                           that supplies approximately 5 µA of current.
VCC         1, 13,   Power Power Supply (5 pins): +3.3 V or +5 V supply input ± 10%. Operation is assured from 2.97 V to 5.5 V.
            27, 41,        Timing parameters are specified with respect to the VCC being at 3.3 V ± 10% or 5.0 V ± 10%.
            42
VSS         2, 15,   Power Ground (6 pins)
            16, 28,
            43, 44
n.c.        14       –     not connected
2005 Nov 01                                                          3


Philips Semiconductors                                                                                                       Product data sheet
   Dual UART                                                                                                               SC28L202
CONFIGURATION FOR 68XXX BUS INTERFACE (MOTOROLA) (see Figure 2)
                     Pin
Symbol      Pin no.        Name and Function
                     type
I/M         21       I     Bus Configuration: When LOW configures the bus interface to the Conditions shown in this table.
D0–D7       20–17,   I/O   Data Bus: Bi-directional 3-State data bus used to transfer commands, data and status between the DUART and
            12–9           the CPU. D0 is the least significant bit.
CEN         29       I     Chip Enable: Active-LOW input signal. When LOW, data transfers between the CPU and the DUART are
                           enabled on D0–D7 as controlled by the R/WN and A0–A6 inputs. When HIGH, places the D0–D7 lines in the
                           3-State condition.
R/WN        30       I     Read/Write: Input Signal. When CEN is LOW R/WN HIGH input a read cycle, when LOW a write cycle.
IACKN       26       I     Interrupt Acknowledge: Active-LOW input indicates an interrupt acknowledge cycle. Usually asserted by the
                           CPU in response to an interrupt request. When asserted places the interrupt vector on the bus and asserts
                           DACKN.
DACKN       31       O     Data Transfer Acknowledge: An open-drain active-LOW output asserted in a write, read, or interrupt
                           acknowledge cycle to indicate proper transfer of data between the CPU and the DUART.
A6–A0       3–6,     I     Address Inputs: Select the DUART internal registers and ports for read/write operations.
            23–25
RESETN      8        I     Reset: A LOW level clears internal registers (SR A , SR B, IMR, ISR, OPR, OPCR), places I/O[7:0] A and B at
                           high impedance input state, stops the counter/timer, and puts Channels A and B in the inactive state, with the
                           TxD A and TxD B outputs in the mark (HIGH) state. Sets MR pointer to MR1, 9600 baud, 1 start, no parity and
                           1 stop bit(s). (See Reset Table)
IRQN        54       O     Interrupt Request: Active-LOW, open-drain, output which signals the CPU that one or more of the eighteen (18)
                           maskable interrupting conditions are true.
X1/SCLK     55       I     Crystal 1: Crystal or external clock input. A crystal or clock of the specified limits must be supplied at all times.
                           When a crystal is used, a capacitor must be connected from this pin to ground (see Figure 12).
X2          56       O     Crystal 2: Connection for other side of the crystal. When a crystal is used, a capacitor must be connected from
                           this pin to ground (see Figure 12). If Sclk is driven from an external source, this pin must be left open.
RxD A       7        I     Channel A Receiver Serial Data Input: The least significant bit is received first. ‘Mark’ is HIGH; ‘space’ is LOW.
RxD B       22       I     Channel B Receiver Serial Data Input: The least significant bit is received first. ‘Mark’ is HIGH; ‘space’ is LOW.
TxD A       53       O     Channel A Transmitter Serial Data Output: The least significant bit is transmitted first. This output is held in
                           the ‘mark’ condition when the transmitter is disabled, idle or when operating in local loop back mode.
                           ‘Mark’ is HIGH; ‘space’ is LOW.
TxD B       32       O     Channel B Transmitter Serial Data Output: The least significant bit is transmitted first. This output is held in
                           the ‘mark’ condition when the transmitter is disabled, idle, or when operating in local loop back mode. ‘Mark’ is
                           HIGH; ‘space’ is LOW.
I/O[7:0]A   45–52    I/O   General-purpose input and output ports channel A: The character of these pins is controlled by I/OPCR.
                           They may be inputs or outputs and will present many internal clocks and interrupt signals: RTS, CTS, DTR, DSR
                           etc. All have change of state detectors and the input is always active. These pins are set to input only when
                           addressed from the low order 16 address space. When these pins are configured for interrupt type signals
                           (RxRDY, TxRDY, C/TRDY) They switch to open drain outputs. Each of these pins have a small pull-up ‘resistor’
                           that supplies approximately 5 µA of current.
I/O[7:0]B   33–40    I/O   General-purpose input and output ports channel B: The character of these pins is controlled by I/OPCR.
                           They may be inputs or outputs and will present many internal clocks and interrupt signals: RTS, CTS, DTR, DSR
                           etc. All have change of state detectors and the input is always active. These pins are set to output only when
                           addressed from the low order 16 address space. When these pins are configured for interrupt type signals
                           (RxRDY, TxRDY, C/TRDY) They switch to open drain outputs. Each of these pins have a small pull-up ‘resistor’
                           that supplies approximately 5 µA of current.
Vcc         1, 13,   Power Power Supply (5 pins): +3.3 or +5V supply input ± 10% (4 Vcc Pins) ). Operation is assured from 2.97 V to
            27, 41,        5.5 V. Timing parameters are specified with respect to the Vcc being at 3.3 V ± 10% or 5.0 V ± 10%.
            42
Vss         2, 15,   Power Ground (6 Vss Pins)
            16, 28,
            43, 44
n.c.        14             not connected
2005 Nov 01                                                          4


Philips Semiconductors                                                                                                           Product data sheet
    Dual UART                                                                                                                SC28L202
OVERALL DESCRIPTION                                                     the receivers and transmitters and may be delivered to I/O ports. It
The SC28L202 is composed of several functional blocks. They are         has 8 programmable clock sources derived from internal and
listed in the approximate order of hierarchy as seen from the pins of   external signals.
the device.
                                                                        I/O ports
• Bus interface. 68K or x86 format                                      The SC28L202 is provided with 16 I/O ports. These ports are true
• Timing Circuits                                                       input and/or output structures and are equipped with a change of
                                                                        state detector. The input circuit of these pins is always active. Under
• I/O Ports                                                             program control the ports my display internal signals or static logic
• UARTs
                                                                        levels. The functions represented by the I/O ports include hardware
                                                                        flow control. Modem signals, signals for interrupt conditions or
• Transmitters and Receivers                                            various internal clocks and timing intervals. Noisy inputs to the I/O
                                                                        ports are filtered (de-bounced) by a 38.4 KHz clock. Change of state
• Transmitter real time error test                                      detectors are provided for each pin and are always available.
• FIFO Structures                                                       UARTs
• Arbitrating Interrupt Structure                                       The UARTs are fully independent, full duplex and provide all normal
                                                                        asynchronous functions: 5 to 8 data bits, parity odd or even,
• Character & Address Recognition                                       programmable stop bit length, false start bit detection. Also provided
• Flow Control                                                          are 256 byte FIFOs Xon/Xoff software flow. The BRG,
                                                                        Counter-timer, or external clocks provide the baud rates. The
• Test and Software compatibility with previous Philips (Signetics)     receivers and transmitters may operate in either the ‘1x’ or ‘16x’
    UARTs                                                               modes.
                                                                        The control section recognizes two address schemes. One is the
BRIEF DESCRIPTION OF FUNCTIONAL BLOCKS                                  subset of the other: a four (4) bit and an eight (7) bit address
                                                                        spaces. The purpose of this is to provide a large degree of software
Bus Interface
                                                                        compatibility with previous Philips/Signetics UARTs.
The Two basic modes of Bus Interface
The bus interface operates in ‘68K’ or ‘x86’ format as selected by      Transmitters and Receivers
the I/M pin. The signals used by this section are the Address, Data     The transmitters and receivers are independent devices capable of
bus, Chip select, read/write, Data acknowledge and Interrupt            full duplex operation. Baud rates, interrupt and status conditions are
acknowledge and Interrupt request. Assertion of DACKN requires          under separate control. Transmitters have automatic simplex
two edges of the Sclk after the assertion of CEN. The default mode      ‘turnaround’. Receivers have RTS and Xon/Xoff flow control and a
is the x86 mode. Pin or register programming may change it to the       three character recognition system.
68K mode.                                                               Transmitter Real Time Error Check
                                                                        This is a circuit used to verify that the correct data arrived at the
Timing Circuits
                                                                        destination. It is done real time with one or two bit times of
Crystal Oscillator
                                                                        programmable delay. The purpose is to relieve the processor of the
The crystal oscillator is the main timing element for the 28L202.
                                                                        burden of byte-by-byte checking and the delay in sending a block of
It is nominally set at 14.7456 MHz. Operation with a crystal as a
                                                                        data back for processor checking.
frequency standard is specified from 7 MHz to 16.2 MHz. The use of
an external clock allows all frequencies to 50 MHz. Clock prescalers    The function is that the receiver returns the data received back to
are provided to match various available system clocks to those          the transmitting station where it is compared to a delayed version of
needed for baud rate generation.                                        the data sent. If an error occurs, and interrupt may be generated for
                                                                        the particular bit that is in error. This is essentially a loop back
     NOTE: if an external clock is used X2 should not drive more
                                                                        condition where circuits internal to the UART delay and compare the
     than 2 CMOS or 2 TTL equivalents.
                                                                        data.
Fixed Rate BRG
The BRG is the baud rate generator, is driven by the X1/Sclk input      It is suggested that a very high priority be set in the interrupt
through a programmable prescale divider. It generates all of the 27     arbitration bid control register for this interrupt when in use.
‘fixed’ internal baud rates. This baud rate generator is designed to    FIFO Structures
generate the industry standard baud rates from a 14.7456 MHz            The FIFO structure is 256 bytes for each of the four FIFOs in the
crystal or clock frequency. X1/Sclk frequencies different from          DUART. They are organized as 11 bit words for the receiver and 8
14.7456 MHz will cause the ‘fixed’ baud rates to change by exactly      bye words for the transmitter. The interrupt level may be set at any
the ratio of 14.7456 to the different frequency.                        value from 0 to 255. The interrupt level is independently set for each
Counter-Timer                                                           FIFO.
The two counter-timers are programmable 16 bit ‘down’ counters. It      FIFO interrupt and DMA fill/empty levels are controlled by the RxFIL
provides miscellaneous baud rates, timing periods and acts as an        and TxFIL registers which may set any level of the from 0 to 255.
extra watchdog timer for the receivers. It has 8 programmable clock     The signals associated with the FIFO fill levels are available to the
sources derived from internal and external signals. It may also act     I/O pins (for interrupt or DMA) and to the arbitrating interrupt system
as a character counter for the receiver. Interrupts from the counter    for ‘fine tuning’ of the arbitration authority.
timer are generated as it passes through zero.                          Intelligent Interrupt Arbitration
Programmable BRG (PBRG)                                                 The interrupt system uses a highly programmable arbitrating
This is another 16 bit programmable counter to generate only baud       technique to establish when an interrupt should be presented to the
rates or miscellaneous clock frequencies. Its output is available to
2005 Nov 01                                                           5


Philips Semiconductors                                                                                                           Product data sheet
   Dual UART                                                                                                                  SC28L202
processor. The advantageous feature of this system is the                 data bus pins. Addressing of the various functions of the DUART is
presentation of the context of the interrupt. It is presented in both a   through the address bus A(6:0). Data is presented on the 8-bit data
current interrupt register and in the interrupt vector. The context of    bus.
the interrupt shows the interrupting channel, identifies which of the     DACKN Cycle
18 possible sources in requesting interrupt service and in the case       When operating in the ‘68K’ mode, bus cycle completion is indicated
of a receiver or transmitter gives the current fill level of the FIFO.    by the DACKN pin (an open-drain signal) going LOW. The timing of
                                                                          DACKN is controlled by GCCR[7:6] where three time delays area
The content of the current interrupt register also drives the Global
                                                                          available. The delay begins with the falling edge of CEN. DACKN is
Registers of the interrupt system. These registers are indirect
                                                                          presented after 1/2 to three periods of the X1/SCLK. The minimum
addresses (pointers) to the interrupt source requesting service.
                                                                          time will be two edges of the X1/SCLK and will be realized when the
Programming of Bid Control Registers allows the interrupt level of        bus cycle begins just before the transition of X1/SCLK. Usually in
any source to be varied at any time over a range of 256 levels.           this mode the address and data are set up with respect to the
                                                                          leading edge of the bus cycle. Timing diagrams for this mode are
Character and Address Recognition                                         drawn with DACKN in consideration. When CEN is withdrawn before
The character recognition system is designed as a general-purpose         DACKN occurs, the generation of the DACKN signal and bus cycle
system. There is one for each UART. Each recognition block stores         will be terminated. In this case, the bus timing will return to that of
up to three characters. The recognition is done on a byte boundary        Intel type timing for that particular cycle. This timing should not be
and sets status and interrupt when recognition events occur. Three        less than the minimum read or write pulse.
modes of automatic operation are provided for the in-band flow
control and three modes of automatic operation are provided for           The DACKN pin is an open-drain driver. At the termination of an
address recognition. Both in-band flow control and address                access to the L202 DACKN drives the pin to high impedance until
recognition may also be completely under the control of the host          the next DACKN cycle. This will occur at the termination of the CEN
processor.                                                                or IACKN cycle.
A subset of the recognition system is Xon/Xoff character recognition      NOTE: The faster X86 timing may be used in the 68K mode IF the
and the recognition of the multi-drop address character. If Xon/Xoff      bus cycles are faster than 1/2 period of the Sclk clock. Withdrawing
or multi-drop function is enabled the recognition system passes the       CEN before DACKN prevents the generation of DACKN. In this case
information about the recognition event to the appropriate receiver       bus timing is effectively that of the X86 mode.
or transmitter state machine for execution. In any case the               When operating in the ‘x86’ mode DACKN is not generated. Data is
information about a recognition event is available to the interrupt       written on the termination of CEN or WRN whichever one occurs
system and to the control processor.                                      first. Read data is presented from the leading edge of the read
Flow Control                                                              condition (CEN and RDN both low).
Flow control is implemented in either the traditional RTS/CTS             In the 68K mode data is written to the registers on the rise of CEN or
protocol or in the ‘inbound’ Xon/Xoff method. Both may be controlled      the fall of DACKN, whichever one occurs first. Data on a read cycle
by fully/partially automatic methods or by interrupt generation.          will become valid with respect to the fall of CEN. It will always be
                                                                          valid at the fall of DACKN.
Test Modes and Software
                                                                          IACKN Cycle, Update CIR
Four test modes are provided to verify UART function and processor
                                                                          When the host CPU responds to the interrupt, it will usually assert
interface integrity. The first three are Auto echo, Local Loop Back,
                                                                          the IACKN signal low. This will cause the intelligent interrupt system
and Remote Loop Back. Through local loop back the software
                                                                          of the DUART to generate an IACKN cycle in which the condition of
developer may verify all of the interrupt, flow control; the hardware
                                                                          the interrupting source is determined. When IACKN asserts, the last
designer verify all of the timing and pin connections. This information
                                                                          valid of the interrupt arbitration cycle is captured in the CIR. The
is obtained without any recourse to external test equipment, logic
                                                                          value captured presents all of the important details of the highest
analyzers or terminals.
                                                                          priority interrupt at the moment the IACKN (or the ‘Update CIR’
The fourth, Receiver Error Loop back verification, employs a method       command) was asserted. Due to system interrupt latency the
of automatic checking (accounting for transmission delays) of the         interrupt condition captured by the CIR may not be the condition that
transmitted data to as echoed back through the remote receiver.           caused the initial assertion of the interrupt.
Errors generate interrupt and status events.
                                                                          The Dual UART will respond to the IACKN cycle with an interrupt
                                                                          vector. The interrupt vector may be a fixed value, the content of the
DETAILED DESCRIPTIONS
                                                                          Interrupt Vector Register, or when ‘Interrupt Vector Modification’ is
    NOTE: For the convenience of the reader some paragraphs               enabled via ICR, it may contain codes for the interrupt type and/or
    of the following sections are repeated in descriptions of             interrupting channel. This allows the interrupt vector to steer the
    closely linked functions described in other sections.                 interrupt service directly to the proper service routine. The interrupt
                                                                          value captured in the CIR remains until another IACKN or ‘Update
Bus Interface
                                                                          CIR’ command is given to the DUART. The interrupting channel and
The bus interface operates in two modes selected by the I/M pin. If
                                                                          interrupt type fields of the CIR set the current ‘interrupt context’ of
this pin is HIGH the signals DACKN signal is not generated or used
                                                                          the DUART. The channel component of the interrupt context allows
and data flow to and from the chip is controlled by the state the
                                                                          the use of Global Interrupt Information registers that appear at fixed
CEN, RDN, WRN pin combination. If the I/M pin is tied low the data
                                                                          positions in the register address map. For example, a read of the
is written to the device when the DACKN pin is asserted low by the
                                                                          Global RxFIFO will read the channel B RxFIFO if the CIR interrupt
DUART. Read data is presented by a delay from CEN active.
                                                                          context is channel B receiver. At another time read of the GRxFIFO
The Host interface is comprised of the signal pins CEN, WRN RDN,          may read the channel A RxFIFO (CIR holds a channel A receiver
(or R/WN) IACKN, DACKN, IRQN, 6 address pins and 8 three-state            interrupt) and so on. Global registers exist to facilitate qualifying the
2005 Nov 01                                                             6


Philips Semiconductors                                                                                                          Product data sheet
    Dual UART                                                                                                               SC28L202
interrupt parameters and for writing to and reading from FIFOs           Whenever the these timers are selected via the receiver or
without explicitly addressing them.                                      transmitter Clock Select register their output will be configured as a
                                                                         16x clock for the respective receiver or transmitter. Therefore one
The CIR will load with 0x00 if IACKN or Update CIR is asserted
                                                                         needs to program the timers to generate a clock 16 times faster than
when the arbitration circuit is NOT asserting an interrupt. In this
                                                                         the data rate. The formula for calculating ’n’, the number loaded to
condition there is no arbitration value that exceeds the threshold
                                                                         the CTPU and CTPL registers, based on a particular input clock
value. When Interrupt vector modification is active in this situation
the interrupt vector bits associated with the CIR will all be zero. A    frequency is shown below.
zero type field indicates nothing with in the DUART is requiring         For the timer mode the formula is as follows:
processor service.
                                                                                   C/T clock input frequency
NOTE: IACKN is essentially a special read action where the value of      n+
                                                                                (2   16     (desired baud rate))
the interrupt vector is presented to the data bus.
                                                                         (If the pulse mode is selected, then ‘2’ in the divisor should be ‘1’.
Timing Circuit                                                           This doubles the C/T output speeds for any given input clock.)
Crystal Oscillator
The crystal oscillator operates directly from a crystal, tuned between   NOTE: ‘n’ may assume a value of 1. In previous Philips data
7.0 MHz and 16.2 MHz connected across the X1/Sclk and X2 inputs          communications controllers this value was not allowed. The
with a minimum of external components. BRG values listed for the         Counter/Timer Clock Select Register (CTCS) controls the
clock select registers correspond to a 14.7456 MHz crystal               Counter/Timer input frequency.
frequency. Use of different frequencies will change the ‘standard’
                                                                         The frequency generated from the above formula will be at a rate 16
baud rates by precisely the ratio of 14.7456 MHz to the different
                                                                         times faster than the desired baud rate. The transmitter and receiver
crystal frequency.
                                                                         state machines include divide by 16 circuits, which provide the final
An external clock up to 50 MHz frequency range may be connected          frequency and provide various timing edges used in the qualifying
to X1/Sclk pin. If an external clock is used instead of a crystal,       the serial data bit stream. Often this division will result in a
X1/Sclk must be driven and X2 left floating or driving a load of not     non-integer value: 26.3 for example. One may only program integer
more than 2 CMOS or TTL equivalents. The X1/Sclk clock serves as         numbers to a digital divider. There for 26 would be chosen. If 26.7
the basic timing reference for the baud rate generator (BRG) and is      were the result of the division then 27 would be chosen. This gives a
available to the programmable BRG (PBRG), counter-timers, control        baud rate error of 0.3/26.3 or 0.3/26.7 that yields a percentage error
logic and the UART receivers and transmitters.                           of 1.14% or 1.12% respectively, well within the ability of the
Baud Rate Generator BRG                                                  asynchronous mode of operation. Higher input frequency to the
The baud rate generator operates from the oscillator or external         counter reduces the error effect of the fractional division.
X1/Sclk clock input and generates 27 commonly used data
communications baud rates (including MIDI) ranging from 50 baud          One should be cautious about the assumed benign effects of small
to 921.6K baud. These common rates may be increased (up to               errors since the other receiver or transmitter with which one is
3000K baud) when faster clocks are used on the X1/Sclk clock             communicating may also have a small error in the precise baud rate.
input. (See Receiver and Transmitter Clock Select Register               In a ‘clean’ communications environment using one start bit, eight
descriptions.) All of these are available simultaneously for use by      data bits and one stop bit the total difference allowed between the
any receiver or transmitter. The clock outputs from the BRG are at       transmitter and receiver frequency is approximately 4.6%. Less than
16X the actual baud rate.                                                eight data bits will increase this percentage.
                                                                         Programmable Baud Rate Generators. PBRG
Please see counter timer description for a description of the
                                                                         Two PBRG Counters (Used only for random baud rate generation)
frequency error that the asynchronous protocol may tolerate.
                                                                         The two PBRG Timers are programmable 16 bit dividers that are
Depending on character length it varies from 4.1% to 6.7%.
                                                                         used for generating miscellaneous clocks. These clocks may be
Counter-Timer
                                                                         used by any or all of the receivers and transmitters in the SC28L202
The two Counter/Timers are programmable 16 bit dividers that are
used for generating miscellaneous clocks or generating timeout           or output to the general purpose I/O pins.
periods or counting characters received by the receivers. Interrupts     Each timer unit has eight different clock sources available to it as
may be generated any time the counter passes through 0x00. These         described in the PBRG clock source Register. Note that the timer
clocks may be used by any or all of the receivers and transmitters in    run and stop controls are also contained in this register. The PBRG
the DUART or may be directed to an I/O pin for miscellaneous use.        counters generate a symmetrical square wave whose half period is
Counter/Timer programming                                                equal in time to the division of the selected PBRG Timer clock
The counter timer is a 16-bit programmable divider that operates in      source by the number loaded to the PBRGPU and PBRGPL Preset
one of four modes: character count, counter, timer, and time out.        Registers. Thus, the output frequency will be the clock source
Character count counts characters. The timer mode generates a            frequency divided by twice the 16 bit value loaded to these registers.
square wave. In the counter mode it generates a time delay. In the       This is the result of counting down once for the high portion of the
time out mode it monitors the time between received characters.          output wave and once for the low portion.
The C/T uses the numbers loaded into the Counter/Timer Lower
Register (CTPL) and the Counter/Timer Upper Register (CTPU) as           Whenever the these timers are selected via the receiver or
its divisor. The counter timer is controlled with six commands:          transmitter Clock Select register their output will be configured as a
Start/Stop C/T, Read/Write Counter/Timer lower register and              16x clock for the respective receiver or transmitter. Therefore one
Read/Write Counter/Timer upper register. These commands have             needs to program the timers to generate a clock 16 times faster than
slight differences depending on the mode of operation. Please see        the data rate. The formula for calculating ’n’, the number loaded to
the detail of the commands under the CTPL/CTPU Register                  the PBRGPL and PBRGPU registers, is the same as shown above.
descriptions.
2005 Nov 01                                                            7


Philips Semiconductors                                                                                                         Product data sheet
   Dual UART                                                                                                                SC28L202
I/O Ports                                                                can not be active without TxRDY also being active. These two bits
Eight I/O ports are ‘loosely’ provided for each channel. They may be     will go active upon initial enabling of the transmitter.
programmed to be inputs or outputs. The input circuits are always
                                                                         The transmitter status bits are normally cleared by servicing the
active whether programmed as and input or an output. In general a
                                                                         interrupt condition they represent or by Tx reset or Tx disable
2-bit code in the I/OPCR (I/O Port Control Register) controls what
                                                                         commands.
function these pins will present. All I/O ports default to high
impedance input state on power up. All 16 I/O pins have a small          Transmission resumes and the Tx Idle bit is cleared when the CPU
pull-up ‘resistor’ that provides approximately 5 µA current.             loads at least one new character into the TxFIFO. The TxRDY will
                                                                         not extinguish until the TxFIFO is completely full. The TxRDY bit will
When calling software written for legacy two channel UARTs
                                                                         always be active when the transmitter is enabled and there is at
manufactured by Philips (Signetics), be sure I/O pins are set to
                                                                         lease one open position in the TxFIFO.
input where the legacy software expected an input. Declare I/O
pins as output where the legacy software expected an output.             The transmitter is disabled by a hardware reset, a transmitter reset
Input Characteristics of the I/O ports                                   in the command register or by the transmitter disable bit also in the
Eight I/O pins are provided for each channel. These pins are             command register (CR). The transmitter must be explicitly enabled
configured individually to be inputs or outputs. As inputs they may      via the CR before transmission can begin. Note that characters
be used to bring external data to the bus, as clocks for internal        cannot be loaded into the TxFIFO while the transmitter is disabled,
functions or external control signals. Each I/O pin has a ‘Change of     hence it is necessary to enable the transmitter and then load the
State’ detector. The change detectors are used to signal a change in     TxFIFO. It is not possible to load the TxFIFO and then enable the
the signal level at the pin (Either 0-to-1 or 1-to-0 transitions). The   transmission.
level change on these pins must be stable for 25 to 50 µs (two           Note the difference between transmitter disable and transmitter
edges of the internally generated 38.4 kHz baud rate clock) before       reset.
the detectors will signal a valid change. These are typically used for
interface signals from modems to the DUART and from there to the         Either hardware or software may cause the reset action. When reset
host.                                                                    the transmitter stops transmission immediately. The transmit data
Output Port of the I/O ports                                             output will be driven high, transmitter status bits set to zero and any
The OPR, I/OPCR, MR, and CR registers may control the I/O pins           data remaining in the TxFIFO is effectively discarded.
when configured as outputs. (For the control in the lower 16 position    The transmitter disable is controlled by the Tx Enable bit in the
address space the control register is the OPCR) Via appropriate          command register. Setting this bit to zero will not stop the transmitter
programming the pins of the output port may be configures as             immediately but will allow it to complete any tasks presently
another parallel port to external circuits, or they may represent        underway. It is only when the last character in the TxFIFO and its
internal conditions of the UART. When this 8-bit port is used as a       stop bit(s) have been transmitted that the transmitter will go to its
general-purpose output port, the output port pins drive inverse logic    disabled state. While the transmitter enable/disable bit in the
levels of the individual bits in the Output Port Register (OPR). The     command register is at zero the TxFIFO will not accept any more
OPR register is set and reset by writing to the SOPR and ROPR            characters and the Tx Idle and TxRDY bits of the status register set
addresses. (See the description of the SOPR and ROPR registers).         to zero.
The output pins will drive the same data polarity of the OPR             Transmission of ‘break’
registers. The I/OPCR (or the OPCR) register conditions these            Transmission of a break character is often needed as a
output pins to be controlled by the OPR or by other signals in the       synchronizing condition in a data stream. The ‘break’ is defined as a
chip. Output ports are driven high on hardware reset.                    start bit followed by all zero data bits by a zero parity bit (if parity is
                                                                         enabled) and a zero in the stop bit position. The forgoing is the
UART Operation                                                           minimum time to define a break. The transmitter can be forced to
Receiver and Transmitter                                                 send a break (continuous low condition) by issuing a start break
The Dual UART has two full duplex asynchronous                           command via the CR. Once the break starts, the TxD output
receiver/transmitters. The operating frequency for the receiver and      remains low until the host issues a command to ‘stop break’ via the
transmitter can be selected independently from the baud rate             CR or the transmitter is issued a software or hardware reset. In
generator, the counter, or from an external input. Registers that are    normal operation the break is usually much longer than one
central to basic full-duplex operation are the mode registers (MR0,      character time.
MR1 and MR2), the clock select registers (RxCSR and TxCSR), the          1x and 16x modes, Transmitter
command register (CR), the status register (SR), the transmit            The transmitter clocking has two modes: 16x and 1x. Data is always
holding register (TxFIFO), the receive holding register (RxFIFO),        sent at the 1x rate. However the logic of the transmitter may be
interrupt status register (ISR) and interrupt mask register (IMR).       operated with a clock that is 16 times faster than the data rate or at
MR3 controls the automatic activity or the Xon/Xoff flow control,        the same rate as the data i.e. 1x. All clocks selected internally for
Address recognition, multi-drop (‘9-bit’ mode) and general purpose       the transmitter (and the receiver) will be 16x clocks. Only when an
character recognition. Because MR3 does not exist in legacy              external clock is selected may the transmitter logic and state
UARTs, these features should be disabled before legacy code is           machine operate in the 1x mode. The 1x or 16x clocking makes little
loaded.                                                                  difference in transmitter operation. (This is not true in the receiver)
                                                                         In the 16X-clock mode the transmitter will recognize a byte in the
Transmitter Status Bits                                                  TxFIFO within 1/16 to 2/16-bit time and thus begin transmission of
The SR (Status Register, one per UART) contains two bits that show       the start bit. In the 1x mode this delay may be up to 2 bit times.
the condition of the transmitter FIFO. These bits are TxRDY and Tx       Transmitter FIFO
Idle. TxRDY means the TxFIFO has space available for one or more         The FIFO configuration of the as 28L202 is 256 8-bit words.
bytes; Tx Idle means The TxFIFO is completely empty and the last         Interrupt levels may be set to any level within the FIFO size and may
stop bit has been completed—the transmitter is underrun. Tx Idle         be set differently for each FIFO. Logic associated with the FIFO
2005 Nov 01                                                            8


Philips Semiconductors                                                                                                             Product data sheet
    Dual UART                                                                                                                   SC28L202
encodes the number of empty positions for presentation to the               RS-485 method) the meaning of the I/O0 B or I/O1 B signals is ‘all
interrupt arbitration system. The encoding value is the number of           bytes loaded to the transmitter’s FIFO have been transmitted
empty positions. Thus, an empty TxFIFO will bid with the value or           including the last stop bit(s). See the MR2(5) description for enabling
255; when full it will not bid at all; one position empty bids with the     this automatic function.
value 0. A Full TxFIFO will not bid since no character is available.
                                                                            Receiver Operation
Normally TxFIFO will present a bid to the arbitration system                Receiver
whenever it has one or more empty positions. The Bits of the                The receiver accepts serial data on the RxD pin, converts the serial
TxFIFO Interrupt Level in the MR0(5:4) allow the user to modify this        input to parallel format, checks for start bit, stop bit, parity bit (if any),
characteristic so that bidding will not start until one of four levels      framing error or break condition, and presents the assembled
(one or more filled, empty, 16 filled, 240 filled, full) have been          character and its status condition to the CPU via the RxFIFO. Three
reached. As will be shown later this feature may be used to make            status bits are FIFOed with each character received. The RxFIFO is
moderate improvements in the interrupt service efficiency. A similar        really 11 bits wide: eight data and 3 status. Unused FIFO bits for
system exists for the Receiver.                                             character lengths less than 8 bits are set to zero.
Transmitter
The 28L202 is conditioned to transmit data when the transmitter is          It is important to note that in the asynchronous protocol the receiver
enabled through the command register. The transmitter of the                logic considers the entire message to be contained within the start
28L202 indicates to the CPU that it is ready to accept a character by       bit to the stop bit. It is not aware that a message may contain many
setting the ISR TxRDY bit in the status register. This condition can        characters. The receiver returns to its idle mode at the end of each
be programmed to generate an interrupt request at I/O4 or IRQN.             stop bit! As described below it immediately begins to search for
When the transmitter is initially enabled the TxRDY and Tx Idle bits        another start bit, which is normally, of course, immediately
will be set in the status register. When a character is loaded to the       forthcoming.
transmit FIFO the Tx Idle bit will be reset. The Tx Idle bit will not set   1x and 16x mode, Receiver
until the transmit FIFO is empty and the transmit shift register has        The receiver operates in one of two modes: 1x and 16x. Of the two,
finished transmitting the stop bit of the last character written to the     the 16x is more robust and the preferred mode. Although the 1x
transmit FIFO.                                                              mode may allow a faster data rate is does not provide for the
                                                                            alignment of the receiver 1x data clock to that of the transmitter. This
The TxRDY bit is set whenever the transmitter is enabled and the            strongly implies that the 1x clock of the remote transmitter is
TxFIFO is not full. Data is transferred from the holding register to        available to the receiver; the two devices are physically close to
transmit shift register when it is idle or has completed transmission       each other.
of the previous character. Characters cannot be loaded into the
TxFIFO while the transmitter is disabled.                                   The 16x mode operates the receiver logic at a rate 16 times faster
                                                                            than the 1x data rate. This allows for validation of the start bit length,
The transmitter converts the parallel data from the CPU to a serial         the validation of level changes at the receiver serial data input
bit stream on the TxD output pin. It automatically sends a start bit        (RxD), and the validation of the stop bit length. Of most importance
followed by the programmed number of data bits, an optional parity          in the 16x mode is the ability of the receiver logic to align the phase
bit, and the programmed number of stop bits. The least significant          of the internally generated receiver 1x data clock to that of the
bit is sent first. Following the transmission of the stop bits, if a new    received start bit of the remote transmitter. This occurs with an
character is not available in the TxFIFO, the TxD output remains            accuracy of less than 1/16 bit time.
High and the Tx Idle bit in the Status Register (SR) will be set to 1.      Receiver
Transmission resumes and the Tx Idle bit is cleared when the CPU            The receiver of the 28L202 is conditioned to receive data when
loads a new character into the TxFIFO.                                      enabled through the command register. The receiver looks for a
If the transmitter is disabled, it continues operating until the            High-to-Low (mark-to-space) transition of the start bit on the RxD
character currently being transmitted is completely sent out. The           input pin. If a transition is detected, the state of the RxD pin is
transmitter can be forced to send a continuous Low condition by             sampled each 16X clock for 7-1/2 clock periods (16X clock mode) or
issuing a send break command. The transmitter can be reset                  at the next rising edge of the bit time clock (1X clock mode). If RxD
through a software command. If it is reset, operation ceases                is sampled high, (that is the start bit was low less than 7/16 to ½ bit
immediately and the transmitter must be enabled through the                 time) the start bit is judged invalid and the search for another valid
command register before resuming operation.                                 start bit begins immediately. If RxD is still low, a valid start bit is
                                                                            assumed and the receiver then continues to sample the input at
If CTS option of hardware flow control is enabled (MR2 [4] = 1), the        one-bit time intervals at the theoretical center of the bit. When the
CTS input at I/O0 or I/O1 must be Low in order for the character to         proper number of data bits and parity bit (if used) have been
be transmitted. The transmitter will check the state of the CTS input       assembled, and one half-stop bit has been detected the receiver
at the beginning of each character transmitted. If it is found to be        loads the byte to the FIFO. The least significant bit is received first.
High, the transmitter will delay the transmission of any following          The data is then transferred to the Receive FIFO and the ISR
characters until the CTS has returned to the low state. CTS going           RxRDY bit in the SR is set to a 1. This condition can be
high during the serialization of a character will not affect that           programmed to generate an interrupt at IRQN or I/O[4:5] for
character.                                                                  channels A or B respectively. If the character length is less than 8
It is an interesting point of the I/O system inputs being always active     bits, the most significant unused bits in the RxFIFO are set to zero.
that by enabling transmitter to be sensitive the I/O0 or I/O1 and then      After the stop bit is detected, the receiver will immediately look for
controlling the I/O pin as an out put that one is able to control the       the next start bit. However, if a non-zero character was received with
transmitter flow via software control of the I/O pin.                       the stop bit at a zero level (framing error) and RxD remains Low for
The transmitter can also control the RTSN outputs, I/O0 or I/O1 via         at least another one half bit time after the stop bit was sampled, then
MR2 [5]. When this mode of operation is set (often referred to as the
2005 Nov 01                                                               9


Philips Semiconductors                                                                                                           Product data sheet
    Dual UART                                                                                                                  SC28L202
the receiver operates as if a new start bit had been detected. It then     NOTE: Precaution must be taken when reading an overrun FIFO.
continues assembling the next character.                                   There will be 256th valid characters in the receiver FIFO. There will
                                                                           be one character in the receiver shift register. However it will NOT
The error conditions of parity error, framing error, and overrun error
                                                                           be known if more than one ‘over-running’ character has been
(if any) are written to the SR at the received character boundary.
                                                                           received since the overrun bit was set. The 257th character received
This is just before the RxRDY status bit is set.
                                                                           and read as valid but it will not be known how many characters were
A break condition is detected when RxD is Low for the entire               lost between the two characters of the 256th and 257th reads of the
character including the parity bit, if used, and stop bit. When a break    RxFIFO. In the 8-bit mode, the numbers 8 and 9 replace the
is found a character consisting of all zeros will be loaded into the       numbers 256 and 257 above.
RxFIFO, the received break bit in the SR and the ‘change of break’
                                                                           The ‘Change of break’ means that either a break has been detected
bit in the ISR are set to 1 and the receiver ready is set in the SR.
                                                                           or that the break condition has been cleared. This bit is available in
The RxD input must return to high for two (2) clock edges of the
                                                                           the ISR. The break change bit being set in the ISR and the received
RxC1x clock for the receiver to recognize the end of the break
                                                                           break bit being set in the SR will signal the beginning of a break. At
condition. At the end of the break condition the search for the next
                                                                           the termination of the break condition only the change of break in
start bit begins.
                                                                           the ISR will be set. After the break condition is detected the
Two edges of the RxC1x clock will usually require a high time of one       termination of the break will only be recognized when the RxD input
RxC1x clock period or 3 RxC1x edges since the clock of the                 has returned to the high state for two successive edges of the 1x
controller is usually not synchronous to nor in phase with the RxC1x       clock; 1/2 to 1 bit time. (see above)
clock.
                                                                           The receiver is disabled by reset or via CR commands. A disabled
Receiver Status Bits
                                                                           receiver will not interrupt the host CPU under any circumstance in
There are five (5) status bits that are evaluated with each byte (or
                                                                           the normal mode of operation. If the receiver is in the multi-drop or
character) received: received break, framing error, parity error,
                                                                           special mode, it will be partially enabled and thus may cause an
overrun error, and change of break. The first three are appended to
                                                                           interrupt. Refer to section on Wake-Up and the register description
each byte and stored in the RxFIFO. The last two are not
                                                                           for MR1 for more information.
necessarily related to the byte being received or a byte that is in the
                                                                           Receiver FIFO
RxFIFO. They are however developed by the receiver state
                                                                           The receiver buffer memory is a 256 byte FIFO with three status bits
machine.
                                                                           appended to each data byte. (The FIFO is then 256 11-bit ‘words’).
The receiver status bits are normally cleared by servicing the             The receiver state machine gathers the bits from the receiver shift
interrupt condition they represent or by Rx reset or Rx disable            register and the status bits from the receiver logic and writes the
commands or the several error reset commands in the Command                assembled byte and status bits to the RxFIFO shortly after the stop
Register (CR).                                                             bit has been sampled. Logic associated with the FIFO encodes the
                                                                           number of filled positions for presentation to the interrupt arbitration
The ‘received break’ will always be associated with a zero byte in         system. The encoding is always the number of filled positions. Thus,
the RxFIFO. It means that zero character was a break character and         a full RxFIFO will bid with the value of 255 and the Status Register
not a zero data byte. The reception of a break condition will always       RxFULL bit is set. When empty it will not bit at all. One position
set the ‘change of break’ (see below) status bit in the Interrupt          occupied bids with the value 1. An empty FIFO will not bid since no
Status Register (ISR).                                                     character is available.
The Change of break condition is reset by a reset error status             Normally RxFIFO will present a bid to the arbitration system
command in the command register                                            whenever it has one or more filled positions. The bits of the RxFIFO
A framing error occurs when a non-zero character was seen and              Interrupt Offset Level (RxFIL) or the bits of the MR2(3:2) allow the
that character has a zero in the stop bit position.                        user to modify this characteristic so that bidding will not start until
                                                                           one of four levels (one or more filled, 64 filled, 192 filled, full) have
The parity error indicates that the receiver-generated parity was not      been reached. As will be shown later this feature may be used to
the same as that sent by the transmitter.                                  make slight improvements in the interrupt service efficiency. A
The framing, parity and received break status bits are reset when          similar system exists in the transmitter.
the associated data byte is read from the RxFIFO since these ‘error’       RxFIFO Status Bits. Status reporting modes
conditions are attached to the byte that has the error                     This description applies to the upper three bits in the ‘Status
                                                                           Register’. These three bits are not ‘in the status register’; they are
The overrun error occurs when the RxFIFO is full, the receiver shift       part of the RxFIFO. The three status bits at the output of the RxFIFO
register is full, and another start bit is detected. At this moment the    are presented as the upper three bits of the status register included
receiver has 257 valid characters and the start bit of the 258th has       in each UART.
been seen. At this point the host has approximately 6/16 bit time to
read a byte from the RxFIFO or the overrun condition will be set.          The error status of a character, as reported by a read of the SR
The 258th character then overruns the 257th and the 258th the 259th        (status register upper three bits) can be provided in two ways, as
and so on until an open position in the RxFIFO is seen. (‘seen’            programmed by the error mode control bit in the mode register:
meaning at least one byte was read from the RxFIFO.)                       ‘Character mode’ or the ‘Block Mode’. The block mode may be
                                                                           further modified (via a CR command) to set the status bits as the
Overrun is cleared by a use of the ‘error reset’ command in the            characters enter the FIFO or as they are read from the FIFO.
command register.
                                                                           In the ‘character’ mode, status is provided on a character by
The fundamental meaning of the overrun is that data has been lost.         character basis as the characters are read from the RxFIFO: the
Data in the RxFIFO remains valid. The receiver will begin placing          ‘status’ applies only to the character at the output of the
characters in the RxFIFO as soon as a position becomes vacant.             RxFIFO—The next character to be read.
2005 Nov 01                                                             10


Philips Semiconductors                                                                                                              Product data sheet
    Dual UART                                                                                                                     SC28L202
In the ‘block’ mode (on entry) the status provided in the SR for these         enable itself to receive the following data stream. Upon receipt of an
three bits is the logical OR of the status for all characters coming to        address not its own it would then disable itself. As descried below
the input of the RxFIFO since the last reset error command was                 appropriate status bits are available to describe the operation.
issued. In this mode each of the status bits stored in the RxFIFO are          Again, for this mode an ‘address byte’ is a byte that has the bit in the
passed through a latch as they are sequentially written to the                 parity position set to logical 1.
receiver FIFO. If any of the characters has an error bit set that latch
                                                                               The use of the multi-drop mode usually implies a ‘master and slave’
will set and remain set until it is reset with a ‘receiver reset’ issued
                                                                               configuration of the several UART stations so programmed. The
from the command register or a chip reset is issued. The purpose of
                                                                               software control should allow time for the slave stations to respond
this mode is indicating an error in the data block as opposed to an
                                                                               to the receipt of an address bit. Often a reply from the addressed
error in a character. This mode improves receiver service efficiency.
                                                                               station is expected to confirm the receipt of the address. Please see
In modern systems with low error rates, it is more efficient to ask for
                                                                               control the automatic features of the address recognition in
retransmit of a block error data than to analyze it on a byte by byte
                                                                               MR3[1:0].
system.
                                                                               Enabling the Wake Up mode
The above paragraph describes the block mode activity as the data              (This mode is variously referred to as ‘9-bit’ or ‘Multi-drop’.)
is entered to the RxFIFO. Normally the status would be read only
                                                                               This mode is selected by programming bits MR1 [4:3] (the parity
once—at the beginning of the service to the receiver interrupt. If an
                                                                               bits) to ’11’. The wake up feature has four modes of operation: one
error is not set then the entire amount of data in the RxFIFO would
                                                                               strictly under processor control and three automatic. These modes
be read without any more reading if the receiver status. This
                                                                               are controlled by bits 6, 1, 0 in the MR3 register. Bit 6 controls the
effectively doubles the efficiency of reading the receiver RxFIFO.             loading of the address byte to the RxFIFO and MR3[1:0] determines
The use of the block mode on Exit passes the data and error                    the sub mode as shown in the following list.
conditions as the RxFIFO is read. Here the final read of the status            MR3[1:0] = 00 Normal Wake Up Mode (default) which is the same
register would be after the last byte was read from the RxFIFO. This           as previous DUARTs and is therefore controlled by the processor.
delays the knowledge of an error condition until after the data has            The Host controls operation via interrupts it receives and commands
been read.                                                                     it writes to the DUART command registers (CR).
The latch used in the block mode to indicate ‘problem data’ is                 Normal Wake up (The default configuration)
usually set as the characters are read out of the RxFIFO. Via a                The enabling of the wake-up mode executes a partial enabling of the
command in the CR the latch may be configured to set as error                  receiver state machine. Even though the receiver has been reset the
characters are loaded to the RxFIFO. This gives the advantage of               wake up mode will over ride the disable and reset condition.
indicating ‘problem data’ up to 256 (or the FIFO size) characters              In the default (mode ‘00’ above and the least efficient) configuration
earlier.                                                                       for this mode of operation, a ’master’ station transmits an address
                                                                               character followed by data characters for the addressed ’slave’
In either mode, reading the SR does not affect the RxFIFO. The
                                                                               station. The slave stations, whose receivers are normally disabled
RxFIFO address is advanced only when the RxFIFO is read.
                                                                               (not reset), examine the received data stream. Upon recognition of
Therefore, the SR should be read prior to reading the corresponding
                                                                               its address bit (this is the parity bit redefined to indicate the
data character.
                                                                               associated byte is an address bye – not the address itself)
If the RxFIFO is full when a new character is received, the character          interrupts the CPU (by setting RxRDY). The CPU (host) compares
is held in the receiver shift register until a position is available in the    the received address to its station address and enables the receiver
RxFIFO. At this time there are 257 valid characters in the RxFIFO. If          if it wishes to receive the subsequent data characters. Upon receipt
an additional character is received while this state exists, the               of another address character, the CPU may disable the receiver to
contents of the RxFIFO are not affected: the character previously in           initiate the process again.
the shift register is lost and the overrun error status bit, SR [4], will      A transmitted character consists of a start bit; the programmed
be set upon receipt of the start bit of the new (overrunning)                  number of data bits, an address/data (A/D) bit and the programmed
character.                                                                     number of stop bits. The CPU selects the polarity of the transmitted
Wake Up Mode (Also the ‘9-bit’, ‘multi-drop’, ‘party; line’ or Special         A/D bit by programming bit MR1 [2]. MR1 [2] = 0 transmits a zero in
mode)                                                                          the A/D bit position which identifies the corresponding data bits as
The SC28L202 provides four modes of this common asynchronous                   data. MR1 [2] = 1 transmits a one in the A/D bit position which
‘party line’ protocol where the parity bit is used to indicate that a byte     identifies the corresponding data bits as an address. The CPU
is address data or information data. Three automatic modes and the             should program the mode register prior to loading the corresponding
default Host operated mode are provided. The automatic mode has                data bytes into the TxFIFO.
several sub modes (see below). In the full automatic the internal
state machine devoted to this function will handle all operations              While in this mode, the receiver continuously looks at the received
associated with address recognition, data handling, receiver enables           data stream, whether it is enabled or disabled. If disabled, it sets the
and disables. In both modes the meaning of the parity bit is                   RxRDY status bit and loads the character into the RxFIFO if the
changed. It is often referred to as the A/D bit or the address/data            received A/D bit is a one, but discards the received character if the
bit—sometimes the ‘9th’ bit. It is used to indicate whether the byte           received A/D bit is a zero. If the receiver is enabled, all received
presently in the receiver shift register is an ‘address’ byte or a ‘data’      characters are transferred to the CPU via the RxFIFO. In either case
byte. A ‘1’ usually means address, a ‘0’ data.                                 when the address character is recognized the data bits are loaded
                                                                               into the data FIFO while the A/D bit is loaded into the status FIFO
Its purpose is to allow several receivers connected to the same data           position normally used for parity error (SR [5]). Framing error,
source to be individually addressed. Of course addressing could be             overrun error, and break detect operate normally whether or not the
by group also. Normally the ‘Master’ would send an address byte to             receiver is enabled. When the automatic modes are in operation the
all receivers ‘listening’. The remote receiver will be ‘looking’ at the        loading of the address character to the FIFO is controlled by the
data stream for its address. Upon recognition of its address it will           MR0 (6) bit.
2005 Nov 01                                                                 11


Philips Semiconductors                                                                                                               Product data sheet
    Dual UART                                                                                                                     SC28L202
The several automatic controls. These modes are concerned with              This mode can also be used to indicate when the serial line has
the recognition of the address character itself                             been marking for longer than the programmed time limit. In this
• MR3 [1:0] = 01 Auto wake. Enable receiver on address                      case, the CPU has read all of the characters from the FIFO, but the
                                                                            last character received has started the count. If there is no new data
   recognition for this station. Upon recognition of its assigned
                                                                            during the programmed time interval, the counter ready bit will get
   address the local receiver will be enabled by the character
                                                                            set, and an interrupt can be generated.
   recognition state machine and normal receiver communications
   with the host will be established.                                       Writing the appropriate command to the command register enables
• MR3 [1:0] = 10 Auto Doze. Disable receiver on address                     the time-out mode. Writing an ‘Ax’ to CR A or CR B will invoke the
                                                                            time-out mode for that channel. Writing a 0xCx to CR A or CR B will
   recognition, not for this station. Upon recognition of an address
                                                                            disable the time-out mode. CTPU and CTPL should be loaded with a
   character that is not its own, in the Auto Doze mode, the receiver
                                                                            count-down value that, with the selected clock, will generate a time
   will be disabled by the character recognition state machine and
                                                                            period greater than the normal receive character period. The
   the address just received either discarded or loaded to the
                                                                            time-out mode disables the regular START/STOP Counter
   RxFIFO depending on the programming of MR0 [6].
                                                                            commands and puts the C/T into counter mode under the control of
• MR3 [1:0] = 11 Auto wake and doze. Both modes described                   the received data stream. Each time a received character is
   above. The programming of MR3 [1:0] to 11 will enable both the           transferred from the shift register to the RxFIFO, the C/T is stopped
   auto wake and auto doze features.                                        after 1 C/T clock, reloaded with the value in CTPU and CTPL and
                                                                            then restarted on the next C/T clock. If the C/T is allowed to end the
The enabling of the wake-up mode executes a partial enabling of the         count before a new character has been received, the counter ready
receiver state machine. Even though the receiver has been reset the         bit, ISR [3], will be set. If IMR [3] is set, interrupt arbitration for the
wake up mode will over ride the disable and reset conditions.               C/T will begin. Invoking the ‘Set Time-out Mode On’ command, CRx
Receiver Reset and Disable                                                  = ‘Ax’, clears the counter ready bit and stop the counter until the
Receiver disable stops the receiver immediately – data being                next character is received.
assembled in the receiver shift register is lost. Data and status in the
FIFO is preserved and may be read. A re-enable of the receiver              Exiting the time mode will clear the counter ready bit.
after a disable will cause the receiver to begin assembling                 Arbitrating Interrupt Structure
characters at the next start bit detected.                                  (NOTE: The advantages and intelligence of this system may be
Receiver reset will discard the present shift register data, reset the      completely defeated by merely setting the arbitration value in the
receiver ready bit (RxRDY), clear the status of the byte at the top of      ICR to 0x00 and not using the CIR. One would then rely on
the FIFO and re-align the FIFO read/write pointers. This effectively        traditional interrupt service by searching and testing various status
‘clears’ the receiver FIFO although the FIFO data is not altered.           registers on the assertion of the IRQN.)
Receiver Watchdog Timer                                                     The interrupt system determines when an interrupt should be
A ‘watchdog timer’ is associated with each receiver. Its interrupt is       asserted thorough an arbitration (or bidding) system. This arbitration
enabled by the ‘watchdog’ bits of the ‘Watch Dog, Character                 is exercised over the several systems within the DUART that may
Address, and X enable’ register (WCXER). The purpose of this timer          generate an interrupt. These will be referred to as ‘interrupt sources’.
is to alert the control processor that characters are in the RxFIFO         There are 18 in all and may of those have several sub-levels. In
which have not been read and/or the data stream has stopped. This           general the arbitration is based on the fill level of the receiver FIFO
situation may occur at the end of a transmission when the last few          or the empty level of the transmitter FIFO. The FIFO levels are
characters received are not sufficient to cause an interrupt. This          encoded into an 8-bit number, which is concatenated to the channel
counter times out after 64 bit times. It is reset each time a read of       number and source identification code. All of this is compared (via
the RxFIFO is executed.                                                     the bidding or arbitration process) to a user defined ‘threshold’.
Receiver Time-out Mode                                                      Whenever a source exceeds the numerical value of the threshold
In addition to the watch dog timer described in the receiver section,       the interrupt will be generated.
the counter/timer may be used for a similar function. Its
programmability, of course, allows much greater precision of timeout        Interrupt sources that do not have a FIFO are each provided with a
intervals.                                                                  ‘programmable field’ that will determine their importance in the
                                                                            arbitration and type identification process. (See Table 1 below)
The time-out mode uses the received data stream to control the
counter. Each time a received character is transferred from the shift       At the time of interrupt acknowledge (IACKN) the source which has
register to the RxFIFO, the counter is restarted. If a new character is     the highest bid (not necessarily the source that caused the interrupt
not received before the counter reaches zero count, the counter             to be generated) will be captured in a ‘Current Interrupt Register’
ready bit is set, and an interrupt can be generated. This mode can          (CIR). This register will contain the complete definition of the
be used to indicate when data has been left in the RxFIFO for more          interrupting source: channel, types of interrupt (receiver, transmitter,
than the programmed time limit. Otherwise, if the receiver has been         change of state, etc.) and FIFO fill level. The value of the bits in the
programmed to interrupt the CPU when the receive FIFO is full, and          CIR are used to drive the interrupt vector and global registers such
the message ends before the FIFO is full, the CPU may not know              that controlling processor may be steered directly to the proper
there is data left in the FIFO. The CTPU and CTPL value would be            service routine. A single read operation to the CIR provides all the
programmed for just over one character time, so that the CPU would          information needed to qualify and quantify the most common
be interrupted as soon as it has stopped receiving continuous data.         interrupt sources.
2005 Nov 01                                                              12


Philips Semiconductors                                                                                                                 Product data sheet
    Dual UART                                                                                                                        SC28L202
The interrupt sources for each channel are listed below.                      full. This will prevent its relatively high priority from winning the
• Receiver without error                                                      arbitration process at low fill levels. A high threshold level could
                                                                              accomplish the same thing, but may also mask out low priority
• Receiver with error for each channel                                        interrupt sources that must be serviced. Note that for fast channels
• Receiver Watch Dog Time-out Event                                           and/or long interrupt latency times using this feature should be used
                                                                              with caution since it reduces the time the host CPU has to respond
• Transmitter                                                                 to the interrupt request before receiver overrun occurs.
• Change in break received status per channel                                 Setting interrupt priorities
                                                                              The bid or interrupt number presented to the interrupt arbiter is
• Rx loop back error                                                          composed of character counts, channel codes, fixed and
• Change of state on channel input pins                                       programmable bit fields. The interrupt values are generated for
                                                                              various interrupt sources as shown in Table 1. The value
• Xon/Xoff character recognition                                              represented by the bits 11 to 4 in Table 1 are compared against the
• Counter-Timer                                                               value represented by the ‘Threshold. The ‘Threshold’, bits 10 to 0 of
                                                                              the ICR (Interrupt Control Register), is aligned such that bit 0 of the
• Address character recognition                                               threshold is compared to bit 1 of the interrupt value generated by
                                                                              any of the sources. Whenever the value of the interrupt source is
• No interrupt active (very useful in polled service and as a test            greater than the threshold the interrupt will be generated.
   value to terminate interrupt service)
                                                                              The channel number arbitrates only against other channels. The
Transmit FIFO empty level and Receiver FIFO fill levels are unique            threshold is not used for the channel arbitration. This results in
for each channel and may be set at any level.                                 channel B having the highest arbitration number. The decreasing
                                                                              order is B to A. If all other parts of an arbitration cycle are equal then
Associated with the interrupt system are the interrupt mask register
                                                                              the channel number will determine which channel will dominate in
(IMR) and the interrupt status register (ISR) resident in each UART.
                                                                              the arbitration process.
Programming of the IMR selects which of the above sources may
enter the arbitration process. The IMR enables the interrupt. Only            Note several characteristics of Table 1 in bits 4:1. These bits contain
the bidders in the ISR whose associated bit in the IMR is set to one          the identification of the bidding source as indicated below:
(1) will be permitted to enter the arbitration process. The ISR can be        • x001 Receiver without error
read by the host CPU to determine all currently active interrupting
conditions. For convenience of reading the ISR the MR1 (6) bit,               • x101 Receiver with error (errors are: parity, framing and overrun.
when set, allows the reading of the ISR masked by the bits of the                Break is not considered an error.
IMR.
Enabling and Activating Interrupt sources
                                                                              • x100 Receiver Watch Dog
An interrupt source becomes enabled when writing a one to the                 • x010 Transmitter
proper Interrupt Mask Register bit (IMR) activates its interrupt
capability. An interrupt source can never generate an IRQN or have            • 1110 Change of Break
its ‘bid’ or interrupt number appear in the CIR unless the source has         • 1111 Rx Loop Back Error
been enabled by the appropriate bit in an IMR.
                                                                              • 0110 Change of State on I/O Ports
An interrupt source is active if it is presenting its bid to the interrupt
arbiter for evaluation. Most sources have simple activation                   • 0111 Xon/Xoff Event
requirements. The watch-dog timer, break received, Xon/Xoff or
Address Recognition and change of state interrupts become active
                                                                              • 1000 Counter timer
when the associated events occur and the arbitration value                    • 1011 Address Recognition
generated thereby exceeds the threshold value programmed in the
ICR (Interrupt Control Register).                                             • 0000 No interrupt source active
The transmitter and receiver functions have additional controls to            The codes form bits 4:1 drive part of the interrupt vector modification
modify the condition upon which the initiation of interrupt ‘bidding’         and the Global Interrupt Type Register. The codes are unique to
begins: the TxINT and RxINT fields of the MR0 and MR2 registers.              each source type and identify them completely. The channel
These fields can be used to start bidding or arbitration when the             numbering progresses from ‘A’ to ‘B’ as the binary numbers 0 to 1
RxFIFO is not empty, 50% full, 75% full or 100% full. For the                 and identify the interrupting channel uniquely. As the channels
transmitter it is not full, 50% empty, 75% empty and empty.                   arbitrate ‘B’ will have the highest bidding value and ‘A’ the lowest.
Example: To increase the probability of transferring the contents of a
nearly full RxFIFO, do not allow it to start bidding until 50% or 75%
2005 Nov 01                                                                13


Philips Semiconductors                                                                                                                  Product data sheet
    Dual UART                                                                                                                        SC28L202
Table 1. Interrupt Values
  Type                              Bit 11:4                                                      Bit 3      Bit 2        Bit 1     Bit 0
  Receiver w/o error                RxFIFO filled Byte Count                                      0          0            1         Channel No.
  Receiver w/ error                 RxFIFO filled Byte Count                                      1          0            1         Channel No.
  Receiver Watch-dog                RxFIFO filled Byte Count                                      1          0            0         Channel No.
  Transmitter                       TxFIFO empty Byte Count                                       0          1            0         Channel No.
  Change of Break                   Programmed Field                                 1            1          1            0         Channel No.
  Rx Loop Back Error                Programmed Field                                 1            1          1            1         Channel No.
  Change of State                   Programmed Field                                 0            1          1            0         Port 0 or 1
  Xon/Xoff                          Programmed Field                                 0            1          1            1         Channel No.
  Counter timer                     Programmed Field                                 1            0          0            0         Counter 0 or 1
  Address Recognition               Programmed Field                                 1            0          1            1         Channel No.
  No interrupt                      0                                                0            0          0            0
  Threshold                         Bits 7:0 of Interrupt Control Register (ICR)     0            0          0            0         0
Interrupt Arbitration and IRQN generation                                        weather report or stock market ‘ticker-tape’ report needs breaks in
Interrupt arbitration is the process used to determine that an                   the data so that a receiver knows where the data starts. Once start
interrupt request should be presented to the host. The arbitration is            of the break is detected it is important to reset the ‘change of break’
carried out between the ‘Interrupt Threshold’ and the ‘sources’                  interrupt so that this bit can signal the condition of the break ending.
whose interrupt bidding is enabled by the IMR. The interrupt                     This is signaled by the ‘L202 the setting another change of break
threshold is part of the ICR (Interrupt Control Register) and is a               event in the ISR. Since it is assumed the data will be starting very
value programmed by the user. The ‘sources’ present a value to the               soon after the end of break it is important to give the change of
interrupt arbiter. That value is derived from four fields: the channel           break condition a high priority. This may be accomplished by setting
number, type of interrupts source, FIFO fill level, and a                        the arbitration value for the ‘change of break’ to a high value. The
programmable value. The interrupt request (IRQN) will be asserted                value in the ‘change of break programmable field’ in Table 1 would
only when one or more of these values exceeds the threshold value                be 0x7F.
in the interrupt control register will.                                          IACKN Cycle, Update CIR
                                                                                 When the host CPU responds to the interrupt, it will usually assert
Following assertion of the IRQN the host will either assert IACKN
                                                                                 the IACKN signal low. This will cause the DUART to generate an
(Interrupt Acknowledge) or will use the command to ‘Update the
                                                                                 IACKN cycle in which the condition of the interrupting device is
CIR’. At the time either action is taken the CIR will capture the value
                                                                                 determined. When IACKN asserts, the last valid interrupt number is
of the source that is prevailing in the arbitration process. (Call this
                                                                                 captured in the CIR. The value captured presents most of the
value the winning bid).
                                                                                 important details of the highest priority interrupt at the moment the
The Sclk drives the arbitration process. It evaluates the 12 bits of             IACKN (or the ‘Update CIR’ command) was asserted.
the arbitration bus at ½ the Sclk rate developing a value for the CIR
                                                                                 The Dual UART will respond to the IACKN cycle with an interrupt
every two Sclk cycles. New arbitration values presented to the
                                                                                 vector. The interrupt vector may be a fixed value, the content of the
arbitration block during an arbitration cycle will be evaluated in the
                                                                                 Interrupt Vector Register, or when ‘Interrupt Vector Modification’ is
next arbitration cycle.
                                                                                 enabled via ICR, it may contain codes for the interrupt type and/or
For sources other than receiver and transmitters the user may set                interrupting channel. This allows the interrupt vector to steer the
the high order bits of an interrupt source’s bid value, thus tailoring           interrupt service directly to the proper service routine. The interrupt
the relative priority of the interrupt sources. The fill level of their          value captured in the CIR remains until another IACKN cycle occurs
respective FIFOs controls the priority of the receivers and                      or until an ‘Update CIR’ command is given to the DUART. The
transmitters. The more filled spaces in the RxFIFO the higher the bid            interrupting channel and interrupt type fields of the CIR set the
value; the more empty spaces in the TxFIFO the higher its priority.              current ‘interrupt context’ of the DUART. The channel component of
Channels whose programmable high order bits are set will be given                the interrupt context allows the use of Global Interrupt Information
interrupt priority higher than those with zeros in their high order bits,        registers that appear at fixed positions in the register address map.
thus allowing increased flexibility. The transmitter and receiver bid            For example, a read of the Global RxFIFO will read the channel B
values contain the character counts of the associated FIFOs as high              RxFIFO if the CIR interrupt context is channel B receiver. At another
order bits in the bid value. Thus, as a receiver’s RxFIFO fills, it bids         time read of the GRxFIFO may read the channel A RxFIFO (CIR
with a progressively higher priority for interrupt service. Similarly, as        holds a channel A receiver interrupt) and so on. Global registers
empty space in a transmitter’s TxFIFO increases, its interrupt                   exist to facilitate qualifying the interrupt parameters and for writing to
arbitration priority increases.                                                  and reading from FIFOs without explicitly addressing them.
The programmable fields allow the software to adjust the authority or            The CIR will load with x’00 if IACKN or Update CIR is asserted when
value of the bid for those devices not having a FIFO.                            the arbitration circuit is NOT asserting an interrupt. In this condition
                                                                                 there is no arbitration value that exceeds the threshold value. When
For example: The break condition is sometimes used to signal a
                                                                                 Interrupt vector modification is active in this situation the interrupt
starting point in a continuous stream of data. A Continuous running
                                                                                 vector bits associated with the CIR will all be zero.
2005 Nov 01                                                                  14


Philips Semiconductors                                                                                                             Product data sheet
   Dual UART                                                                                                                      SC28L202
Global Registers                                                             operations specific to ‘Multi-drop’ address recognition or in-band
The ‘Global Registers’, 10 in all, are driven by the interrupt system.       Xon/Xoff flow control.
They are defined by the content of the CIR (Current Interrupt
                                                                             Character recognition system continually examines the incoming
Register) as a result of an interrupt arbitration. In other words they
                                                                             data stream. Upon the recognition of a character bits appropriate for
are indirect registers pointed to by the content of the CIR. The list of
                                                                             the character recognized are set in the Xon/Xoff Interrupt Status
global register follows:
                                                                             Register (XISR) and in the Interrupt Status Register (ISR). The
• GIBCR         The byte count of the interrupting FIFO                      setting of these bit(s) will initiate any of the automatic sequences or
• GICR          Channel number of the interrupting channel                   and/or an interrupt that may have enabled via the MR3 register.
• GITR          Type identification of interrupting channel
                                                                             NOTE: Reading the XISR Clears the status bits associated with the
                                                                             recognition.
• GRxFIFO       Pointer to the interrupting receiver FIFO
                                                                             The characters of the recognition system are fully programmable.
• GTxFIFO       Pointer to the interrupting transmitter FIFO                 The Xon/Xoff characters will be set to the standard characters if the
                                                                             hardware or software reset is used.
A read of the GRxFIFO will give the content of the RxFIFO that
                                                                             The character recognition circuits are basically designed to provide
presently has the highest bid value. The purpose of this system is to
                                                                             general-purpose character recognition. Additional control logic has
enhance the efficiency of the interrupt system. The global registers
                                                                             been added to allow for Xon/Xoff flow control and for recognition of
and the CIR update procedure are further described in the Interrupt
                                                                             the address character in the multi-drop or ‘wake-up’ mode. This logic
Arbitration system
                                                                             also allows for the generation of interrupts in either the
Polling, (Normal and using the CIR)
                                                                             general-purpose recognition mode or the specific conditions
The ‘arbitrating interrupt system’ will reduce the polling overhead to
                                                                             mentioned above.
only two bus cycles. It only requires an update CIR command and a
CIR read to find if service is needed, and if needed to show what            The generality of the above provides a modicum of compatibility to
needs to be serviced.                                                        BOP (Bit Oriented Protocol) where the generation and detection of
                                                                             ‘flags’ is required. Parts of usually synchronous BOP protocols
Many users prefer polled to interrupt driven service where there are
                                                                             (HDLC in particular) are beginning to show up in asynchronous
not a large number of fast data channels and/or the host CPU’s
                                                                             formats.
other interrupt overhead is low. The Dual UART is functional in this
                                                                             Character Stripping
environment.
                                                                             The MR0[7:6] register provides for stripping the characters used for
The most efficient method of polling is the use of the ‘update CIR’          character recognition. Recall that the character recognition may be
command (with the interrupt threshold set to zero) followed by a             conditioned to control several aspects of the communication.
read of the CIR. This dummy write cycle will perform the same CIR            However this system is first a character recognition system. The
capture function that an IACKN falling edge would accomplish in an           status of the various states of this system is reported in the XISR
interrupt driven system. A subsequent read of the CIR, at the same           and ISR registers. The character stripping of this system allows for
address, will give information about an interrupt, if any. If the CIR        the removal of the specified control characters from the data stream:
type field contains 0s, no interrupt is awaiting service. If the value is    two for the Xon /Xoff and one for the wake up. Via control in the
non-zero, the fields of the CIR may be decoded for type; channel             MR0[7:6] register these characters may be discarded (stripped) from
and character count information. Optionally, the global interrupt            the data stream when the recognition system ‘sees’ them or they
registers may be read for particular information about the interrupt         may be sent on the RxFIFO. Whether they are stripped or not the
status or use of the global RxD and TxD registers for data transfer          recognition system will process them according to the action
as appropriate. The interrupt context will remain in the CIR until           requested; flow control, wake up, interrupt generation, etc. Care
another update CIR command or an IACKN cycle is initiated by the             should be exercised in programming the stripping option if noisy
host CPU occurs. The CIR loads with x’00 if Update CIR is asserted           environments are encountered. If a normal character were corrupted
when the arbitration circuit has NOT detected an arbitration value           to a Xoff character the transmitter would be stopped. If that
that exceeds the threshold value of the ICR. The global registers            character were now stripped from the FIFO stack, then that stripping
and CIR may be used as ‘vectors’ to the service type required.               action would make it difficult to determine the cause of transmitter
                                                                             stopping.
Traditional methods of polling status registers may also be used.
Their lower efficiency may be greatly offset by use of the UCIR              When character stripping is invoked and a recognition character is
command and the read of the CIR. They reduce the many reads and              received that has an error bit set that character is sent to the
tests of status registers to only one read and one write. This would         RxFIFO even though character stripping is active.
normally be accomplished by setting the interrupt threshold to zero.         Flow Control (Xon/Xoff)
Then the moment any system within the DUART needs service the                This section describes in-band flow control or Xon/Xoff signaling.
next poll of the CIR would return a non zero value and the type field        For the RTS/CTS hardware (out-of-band) control see MR1(7) and
will inform the processor which of the possible 18 systems needs             MR2(4) descriptions.
service. In the case of the FIFOs the number of bytes to be written
                                                                             The flow control is accomplished via the character recognition
or read is also available.
                                                                             system giving recognition information to the flow control processor.
Character and Address Recognition
                                                                             Xon and Xoff are special characters used by a receiver to start and
(Also used for Multi-drop, Xon/Xoff systems)
                                                                             stop the remote transmitter that is sending it data. As described
Character recognition is specific to each of the two UARTs. Three
                                                                             below several modes of manual and automatic flow control are
programmable characters are provided for the character recognition
                                                                             available by program control.
for each channel. The three are general purpose in nature and may
be set to only cause an interrupt or to initiate some rather complex
2005 Nov 01                                                               15


Philips Semiconductors                                                                                                                  Product data sheet
    Dual UART                                                                                                                        SC28L202
The modes of control are described in MR3[3:2]                                 NOTE: To be recognized as a Xon or Xoff character, the receiver
       00 = Host mode                                                          must have room in the RxFIFO to accommodate the character. An
                                                                               Xon/Xoff character that is received resulting in a receiver overrun
       01 = Auto transmit
                                                                               does not effect the transmitter nor is it loaded into the RxFIFO,
       10 = Auto Receive                                                       regardless of the state of the Xon/Xoff transparency bit, MR3[7].
       11 = Auto receive and transmit
Mode control                                                                   Receiver Mode
Xon/Xoff mode control is accomplished via the MR3[3:2].                        Since the receiving FIFO resources in the Dual UART are limited,
                                                                               some means of controlling a remote transmitter is desirable in order
       00   Xon/Xoff processing disabled. The host will control Rx, Tx.
                                                                               to lessen the probability of receiver overrun. The Dual UART
       01   Auto Tx control. Tx is stopped/started when Xoff/Xon is            provides two methods of controlling the data flow. There is a
            received.                                                          hardware-assisted means of accomplishing control, the so-called
       10   Auto Rx control. Receiver commands Tx to send Xoff at              out-of-band flow control, and an in-band flow control method.
            trigger level.
                                                                               The out-of-band flow control is implemented through the
       11   Auto Rx and Tx control. Receiver commands Tx to send               CTSN–RTSN signaling via the I/O ports. The operation of these
            Xoff as the receiver fills and commands the Tx to send             hardware handshake signals is described in the receiver and
            Xon when Rx FIFO fill level is lowered. This results in total      transmitter discussions.
            automatic control. No processor interrupt is required.
                                                                               In-band flow control is a protocol for controlling a remote transmitter
Note that MR3[7] controls the stripping of Xoff/Xon characters.                by embedding special characters within the message stream, itself.
       0    Xon/Xoff characters are sent to the Rx FIFO                        Two characters, Xon and Xoff, which do not represent normal
       1    Xon/Xoff characters are discarded.                                 printable character take on flow control definitions when the
                                                                               Xon/Xoff capability is enabled. Flow control characters received may
The MR3[7] functions regardless of the setting of MR3[3:2]. This               be used to gate the channel transmitter on and off. This activity is
allows for general purpose character recognition and processing.               referred to as Auto-transmitter mode. To protect the channel receiver
(See ‘Character Stripping’.)                                                   from overrun, fixed fill levels (hardware set at 240 characters) of the
Xon Xoff Characters                                                            RxFIFO may be employed to automatically insert Xon/Xoff
The programming of these characters is usually done individually.              characters in the transmitter’s data stream. This mode of operation
The standard Xon/Xoff characters are . Xon is 0x11, Xoff 0x13. Any             is referred to as auto-receiver mode. Commands issued by the host
enabling of the Xon/Xoff functions will use the contents of the Xon            CPU via the CR can simulate all these conditions.
and Xoff character registers as the basis on which recognition is
predicated.                                                                    Auto Receive and Transmit
Host mode                                                                      This is a combination of both modes.
When neither the auto-receiver or auto-transmitter modes are set,
                                                                               NOTE: Xon /Xoff characters
the Xon/Xoff logic is operating in the host mode. In host mode, all
                                                                               The Xon/Xoff character with errors will be accepted as valid. The
activity of the Xon/Xoff logic is initiated by commands to the CRx.
                                                                               user has the option sending or not sending these characters to the
The Xoff command forces the transmitter to disable exactly as
                                                                               FIFO. Error bits associated with Xon/Xoff will be stored normally to
though a Xoff character had been received by the RxFIFO. The
                                                                               the receiver FIFO.
transmitter will remain disabled until the chip is reset or the CR (7:3)
= 10110 (Xoff resume) command is given. In particular, reception of            The channel’s transmitter may be programmed to automatically
a Xon or disabling or re-enabling the transmitter will NOT cause               transmit a Xoff character without host CPU intervention when the
resumption of transmission. Redundant CRTXxx commands, i.e.                    RxFIFO fill level exceeds a fixed limit (240). In this mode it will
CRTXon, CRTXon, are harmless, although they waste time. A                      transmit a Xon character when the RxFIFO level drops below a
CRTXon may be used to cancel a CRTXoff (and vice versa) but both               second fixed limit (16). A character from the TxFIFO that has been
may be transmitted depending on the command timing with respect                loaded into the TxD shift register will continue to transmit.
to that of the transmitter state machine.                                      Character(s) in the TxFIFO that have not been loaded to the
Auto-transmitter mode                                                          transmitter shift register are unaffected by the Xon or Xoff
When a channel receiver loads a Xoff character into the RxFIFO, the            transmission. They will be transmitted after the Xon/Xoff activity
channel transmitter will finish transmission of the current character          concludes.
and then stop transmitting. A transmitter so idled can be restarted by
                                                                               If the fill level condition that initiates Xon activity negates before the
the receipt of a Xon character by the receiver or by a hardware or
                                                                               flow control character can begin transmission, the transmission of
software reset. The last option results in the loss of the
                                                                               the flow control character will not occur. That is, either of the
untransmitted contents of the TxFIFO. When operating in this mode
                                                                               following sequences may be transmitted depending on the timing of
the Command Register commands for the transmitter are not
                                                                               the FIFO level changes with respect to the normal character times:
effective.
                                                                               Fix This
While idle data may be written to the TxFIFO and it continue to
present its fill level to the interrupt arbiter and maintains the integrity    Character            Xoff                Xon              Character
of its status registers.
                                                                               Character            Character
Use of ’00’ as a Xon/Xoff character is complicated by the Receiver
                                                                               Hardware keeps track of Xoff characters sent that are not rescinded
break operation which loads a ’00’ character on the RxFIFO. The
                                                                               by a Xon. This logic is reset by writing MR3[3:2] to ‘00’. If the user
Xon/Xoff character detectors do not discriminate in this case from a
                                                                               drops out of Auto-receiver mode while the XISR shows Xoff as the
Xon/Xoff character received through the RxD pin.
2005 Nov 01                                                                 16


Philips Semiconductors                                                                                                           Product data sheet
   Dual UART                                                                                                                 SC28L202
last character sent the Xon/Xoff logic would not automatically send        NOTE: Care should be taken in the programming of the character
the negating Xon.                                                          recognition registers. Programming x’00, for example, may result in
                                                                           a break condition being recognized as a control character. This will
The kill CRTX command (of the command register) can be used to
                                                                           be further complicated when binary data is being processed.
cleanly terminate any pending CRTX commands.
NOTE: In no case will a Xon/Xoff character transmission be aborted.
Once the character is loaded into the TX Shift Register, transmission      PROGRAMMING THE HOST INTERFACE
continues until completion or a chip reset or transmitter reset is         The SC28L202 is designed for a very close compatibility with legacy
encountered. The kill CRTX command has no effect in either of the          software written for other Philips/Signetics 2 channel UARTs. The
Auto modes.                                                                part will initialize to the SC28L92 function. This function is controlled
Xon/Xoff Interrupts                                                        in the low 16 address positions.
The Xon/Xoff logic generates interrupts only in response to                A reset (both hardware and software) will return the part to this
recognizing either of the characters in the XonCR or XoffCR (Xon or        mode with the control registers set for 9600 baud, 8 bits, no parity
Xoff Character Registers). The transmitter activity initiated by the       and one stop bit. Interrupt will be set for Receiver Ready and
Xon/Xoff logic or any CR command does not generate an interrupt.           transmitter Empty. Transmitters and receivers will not be enabled.
The character comparators operate regardless of the value in               Basic operation should be obtained by a single write of 0xE0 to the
MR3[3:2]. Hence the comparators may be used as general-purpose             command register. That will enable the receiver and transmitter.
character detectors by setting MR3[3:2]= ‘00’ and enabling the
Xon/Xoff interrupt in the IMR.                                             Addressing outside of the lower 16 address spaces will enable all
                                                                           the advanced features. In general, before calling legacy code,
The Dual UART can present the Xon/Xoff recognition event to the            advanced features should be disabled (character stripping, for
interrupt arbiter for IRQN generation. The IRQN generation may be          example).
masked by setting bit 4 of the Interrupt Mask Register, IMR. The bid
level of a Xon/Xoff recognition event is controlled by the Bidding         Writing control words into the appropriate registers programs the
Control Register X, BCRx, of the channel. The interrupt status can         operation of the DUART. Operational feedback is provided via status
be examined in ISR[4]. If cleared, no Xon/Xoff recognition event is        registers that can be read by the CPU. The addressing of the
interrupting. If set, a Xon or Xoff recognition event has been             registers is described in the Register Map.
detected. The X Interrupt Status Register, XISR, can be read for           The contents of certain control registers are initialized to zero on
details of the interrupt and to examine other, non-interrupting, status    RESET. Care should be exercised if the contents of a register are
of the Xon/Xoff logic. Refer to the XISR in the Register Descriptions.     changed during operation, since certain changes may cause
The character recognition function and the associated interrupt            operational problems.
generation is disabled on hardware or software reset.                      For example, changing the number of bits per character while the
Multi-drop or Wake up or 9 bit mode                                        transmitter is active may cause the transmission of an incorrect
This mode is used to address a particular UART among a group               character. In general, the contents of the MR, the CSR, and the
connected to the same serial data source. Normally it is                   OPCR should only be changed while the receiver(s) and
accomplished by redefining the meaning of the parity bit such that it      transmitter(s) are not enabled, and certain changes to the ACR
indicates a character as address or data. While this method is fully       should only be made while the C/T is stopped.
supported in the SC28L202 it also supports recognition of the              Each channel has 3 mode registers (MR0, 1, 2) which control the
character itself. Upon recognition of its address the receiver will be     basic configuration of the channel. Mode, command, clock select,
enabled and data loaded onto the RxFIFO.                                   and status registers are duplicated for each channel to provide total
Further the Address recognition has the ability, if so programmed, to      independent operation and control. Refer to Table 2 for register bit
disable (not reset) the receiver when an address is seen that is not       descriptions.
recognized as its own. The particular features of ‘Auto Wake and
Auto Doze’ are described in the detail descriptions under ‘Receiver
Operation’ above.
2005 Nov 01                                                             17


Philips Semiconductors                                                                                                               Product data sheet
   Dual UART                                                                                                                       SC28L202
REGISTER DESCRIPTION AND PROGRAMMING                                            To facilitate this feature the complete register function and control of
NOTE                                                                            the SC26C92 is replicated in the SC28L202. That is code written for
Programmers may use either of two register sets or mix the features             the SCN2681, SCN68681, SCC2692, SCC68692 and SC26C92 will
of each. It is suggested that only the extended register set be used            operate with this device.
in new designs. However if a system needed to use a block of                    With the execution of code written for previous DUARTs and
communications code written for an older system then that code                  immediately after a hardware reset or a ‘Reset to C92’ command the
could merely be called. This is similar to calling a DOS program in            following configuration will exist:
a WINDOWS environment. Before calling legacy code it is                        1. The size of all FIFOs is set to 8 bytes (for legacy code).
recommended (but not required) to execute ‘Reset to C92’
command. Also consideration must be given to the I/O pins to avoid              2. FIFO interrupt levels are controlled by the bits of the MR
contention of drivers of the pins and an external driver.                            registers
Two control register descriptions and maps are implemented in the               3. All I/O ports are set to input.
SC28L92: one represents the previous 4-bit address and the other                4. Receiver FIFO set to interrupt on FIFO ready.
the new 7-bit address space representing the all the new features of
the new design.                                                                 5. Transmitter FIFO set to interrupt on FIFO empty.
The Design of the SC28L202 allows for high degree with former                   6. Baud selection follows previous 4 bit programming and baud rate
Philips two channel communications controllers—DUARTs.                               grouping controlled by the MR and ACR registers.
Table 2. SC28L202 REGISTER BIT DESCRIPTIONS
Registers that control Global Properties of the 28L202
GCCR – Global Configuration Control Register
THIS IS A VERY IMPORTANT REGISTER! IT SHOULD BE THE FIRST REGISTER ADDRESSED DURING INITIALIZATION.
 Hex         Bit [7:6]                 Bit [5:3]         Bit [2:1]                                                 BIT 0
 Addr        DACKN Assertion           Reserved          IVC Interrupt Vector Control                              ISR Read Mode
             00 = 2 – 3 Sclk                             00 = no interrupt vector                                  0 = ISR Unmasked
             01 = 1 – 2 Sclk           Set to 0          01 = IVR[7:0]                                             1 = ISR Read Masked by IMR
             10 = 1/2 – 1 Sclk                           10 = IVR[7:1] + channel code
             11 = Reserved                               11 = IVR[7:5] + interrupt type + channel code
GCCR(7:6) DACKN Assertion                                                       If IVC = 0x10, the channel code will replace the LSB of the IVR; if
Motorola bus cycle time can be controlled by selecting a DACKN                  IVC = b’11 then a modified interrupt type and channel code replace
assertion time based on X1/Sclk speed. The time programmed                      the 3 LSBs of the IVR. NOTE: The modified type field IVR[2:1] is:
should not be less than the minimum read or write pulse width.                  • 10 Receiver w/o error
See examples below.
                                                                                • 11 Receiver with error
 X1/SCLK                  #SCLK Cycles            Delay                         • 01 Transmitter
 3.6864 MHz               1/2–1                   136–272 ns                    • 00 All remaining sources
 7.3728 MHz               1/2–1                   68–136 ns
                                                                                GCCR(0): Interrupt Status Masking
 14.7456 MHz              1/2–1                   34–68 ns                      This bit controls the readout mode of the Interrupt Status Register,
 29.4912 MHz              1–2                     34–68 ns                      ISR. If set, the ISR reads the current status masked by the IMR, i.e.
 33.1776 MHz              2–3                     60–90 ns                      only interrupt sources enabled in the IMR can ever show a ‘1’ in the
                                                                                ISR. If cleared, the ISR shows the current status of the interrupt
 44.2368 MHz              2–3                     46–68 ns                      source without regard to the Interrupt Mask setting.
GCCR(5:3): Reserved
GCCR(2:1): Interrupt vector configuration
The IVC field controls if and how the assertion of IACKN (the
interrupt acknowledge pin) will form the interrupt vector for the
DUART. If b’00, no vector will be presented during an IACKN cycle.
The bus will be driven high (0xFF). If the field contains a b’01, the
contents of the IVR, Interrupt Vector Register, will be presented as
the interrupt vector without modification.
2005 Nov 01                                                                18


Philips Semiconductors                                                                                                                   Product data sheet
    Dual UART                                                                                                                         SC28L202
SFSR A and B Special Feature & Status Register
               Bit 7            Bit 6           Bit 5            BIT 4            BIT 3                  BIT 2:1                            BIT 0
               Reserved         Reserved        Reserved         Reserved         Loop Back Error        Remote Loop Error Check            Reserved
                                                                                  0 = No                 00 = Disabled
                                                                                  1 = Yes                01 = Enabled, RxC ← TxC
                                                                                  (read Only)            10 = Enabled, RxC ← TxCN
SFSR(7:4) Reserved                                                               to two characters in time . This mode will totally relieve the
                                                                                 processor of this task where certainty of transmission and reception
SFSR(3) Status of loop back error check.                                         is required. The transmitted data is looped back by the remote
A ‘1’ indicates a loop back error occurred, which will be entered for            station with a half-bit time delay. The local transmitted data is
interrupt arbitration.                                                           internally sent to the local receiver for comparison. An interrupt is
It can be cleared by the processor by a write to this register with              generated in the case of an error (data mismatch, parity or framing).
D(3) equal to ‘1’.                                                               00 = The checking is disabled
SFSR(2:1) Certification of returned data as Valid (This feature                  01 = Return data is clocked in on rise of TxC
implies the transmitted data is being returned by the remote
receiver. )                                                                      10 = Return data is clocked on of rise of TxCN
Sets automatic checking of returned data. This mode stores                       00 = Reserved
transmitted data and compares it to data returned from the remote
                                                                                 SFSR(0) Reserved
receiver. It is used where relative short delay times are available, up
TRR Test and Revision Register.
  TRR       Bit 7                Bit 6:0
            Test 2               Revision Code
TRR[7] Test 2 Enable                                                             TRR[6:0] – Chip Revision Code
Bypass divide by 16 counter in all TxC and RxC.                                  Indicates the revision of the chip. Initial code will be 0000000. The
                                                                                 revision code bits [6:0] are hard wired. The default setting of the test
                                                                                 bits is all zero.
STCR – Scan Test Control Register.
  Addr      BIT 7             BIT 6             BIT 5             BIT 4             BIT 3              BIT 2              BIT 1             BIT 0
  77                                                                                                   Memory Test        Scan Test         Iddq Test
STCR(0) Iddq Test – Turns off all pull-up devices on the I/O pins.
SES – System Enable Status Register, A and B
                   Bit 7            Bit 6           Bit 5               Bit 4          Bit 3                   Bit 2               Bit 1         Bit 0
                   Reserved         Reserved        Transmitter         Receiver       Watch Dog               Address             Xon           Xoff
                                                    Enabled             Enabled        Timer                   Recognition
                   Set to 0         Set to 0        0 = No              0 = No         0 = No                  0 = No              0 = No        0 = No
                                                    1 = Yes             1 = Yes        1 = Yes                 1 = Yes             1 = Yes       1 = Yes
This register reports the enabled status of the several sub systems in the DUART. These systems are sometimes controlled by the state
machines of the receiver FIFOs.
EOS – Enhanced Operation Status Register
           Bit 7        Bit 6             Bit 5            Bit 4              Bit 3                Bit 2              Bit 1              Bit 0
           Reserved     I/O Port          Reserved         Counter/Timer      Channel B            Channel A          Channel B          Channel A FIFO
                        Operation                          0 Clock Select     Rx/Tx                Rx/Tx              FIFO               Interrupt Level
                                                                              Clock                Clock              Interrupt Level    Control
                                                                              Selection            Selection          Control
                        0 = Default                        0 = Default        0 = Default          0 = Default        0 = Default        0 = Default
                        1 = Enhanced                       1 = Enhanced       1 = Enhanced         1 = Enhanced       1 = Enhanced       1 = Enhanced
This register reports the status of the Enhanced operation in several sub systems in the DUART.
2005 Nov 01                                                                 19


Philips Semiconductors                                                                                                                 Product data sheet
     Dual UART                                                                                                                     SC28L202
UART Registers                                                                   times, thus rendering later transmission or reception faulty or
                                                                                 impossible.
These registers are generally concerned with formatting,
transmitting and receiving data.                                                 An exception to this policy is switching from auto-echo or remote
The user must exercise caution when changing the mode of running                 loop back modes to normal mode. If the deselecting occurs just after
receivers, transmitters, PBRG or counter/timers. The selected mode               the receiver has sampled the stop bit (in most cases indicated by
will be activated immediately upon selection, even if this occurs                the assertion of the channel’s RxRDY bit) and the transmitter is
during the reception or transmission of a character. It is also                  enabled, the transmitter will remain in auto-echo mode until the end
possible to disrupt internal controllers by changing modes at critical           of the transmission of the stop bit.
MR0 – Mode Register 0, A and B
MR0 can be accessed directly at H’20’ and H’28’ in the Extended section of the address map, or by means of the ‘MR Pointers’ at the 0x00 and
0x08 address pointers used by legacy code.
                               Bit 7            BIT 6                BIT (5:4)         BIT 3           BIT 2              BIT 1          BIT 0
            MR0 A, MR0         Rx Watchdog      RxINT BIT 2          TxINT (1:0)       FIFO Size       BAUD RATE          Reserved       BAUD RATE
            B, and             *                See Tables in        See Table 13      0 = 8 bytes     EXTENDED II        Set to 0       EXTENDED 1
            MR0 B[3:0]         0 = Disable      MR0                                    1 = 256         0 = NormaL                        0 = Normal
            are reserved       1 = Enable       description                            bytes           1 = Extend II                     1 = Extend
*This bit control is duplicated at WCXER[7:6], the Watch Dog, Character, Address and X Enable Register.
MR0[7] Fixed length Watchdog Timer                                               MR0[5:4] – Tx interrupt fill level.
This bit controls the receiver watchdog timer. 0 = disable, 1 =
enable. When enabled, the watch dog timer will generate a receiver               Table 5. Transmitter FIFO Interrupt Fill Level
interrupt if the receiver FIFO has not been accessed within 64 bit                            MR0(3)=0
times of the receiver 1X clock. This is used to alert the control                  MR0[5:4]             Interrupt Condition
processor that data is in the RxFIFO that has not been read. This
                                                                                   00                   8 bytes empty (Tx EMPTY)
situation may occur when the byte count of the last part of a
                                                                                   01                   4 or more bytes empty
message is not large enough to generate an interrupt.
                                                                                   10                   6 or more bytes empty
MR0[6] – Bit 2 of receiver FIFO interrupt level. This bit along with Bit
                                                                                   11                   1 or more bytes empty (TxRDY)
6 of MR1 sets the fill level of the 8 byte FIFO that generates the
receiver interrupt.                                                              Table 6. Transmitter FIFO Interrupt Fill Level
MR0[6] and MR1[6] Note that this control is split between MR0 and                             MR0(3)=0
MR1. This is for backward compatibility to the SC2692 and                          MR0[5:4]              Interrupt Condition
SCN2681.                                                                           00                   256 bytes empty (Tx EMPTY)
Table 3. Receiver FIFO Interrupt Fill Level                                        01                   128 or more bytes empty
              MR0(3)=0                                                             10                   192 or more bytes empty
                                                                                   11                   1 or more bytes empty (TxRDY)
  MR0[6] MR1[6]          Interrupt Condition
  00                     1 or more bytes in FIFO (RxRDY)                         For the transmitter these bits control the number of FIFO positions
  01                     3 or more bytes in FIFO                                 empty when the receiver will attempt to interrupt. After the reset the
                                                                                 transmit FIFO has 8 bytes empty. It will then attempt to interrupt as
  10                     6 or more bytes in FIFO
                                                                                 soon as the transmitter is enabled. The default setting of the MR0
  11                     8 bytes in FIFO (Rx FULL)                               bits (00) condition the transmitter to attempt to interrupt only when it
                                                                                 is completely empty. As soon as one byte is loaded, it is no longer
Table 4. Receiver FIFO Interrupt Fill Level                                      empty and hence will withdraw its interrupt request.
              MR0(3)=1
                                                                                 MR0[3] – FIFO Size
  MR0[6] MR1[6]         Interrupt Condition                                      Selects between 8 or 256 byte FIFO structure
  00                    1 or more bytes in FIFO (RxRDY)
                                                                                 MR0[2:0] – Legacy Baud Rate Group Selection
  01                    128 or more bytes in FIFO
                                                                                 These bits are used to select one of the six-baud rate groups.
  10                    192 or more bytes in FIFO
  11                    256 bytes in FIFO (Rx FULL)                              See Table 13 for the group organization.
For the receiver these bits control the number of FIFO positions
                                                                                 • 000 Normal mode
filled when the receiver will attempt to interrupt. After the reset the          • 001 Extended mode I
receiver FIFO is empty. The default setting of these bits cause the
receiver to attempt to interrupt when it has one or more bytes in it.            • 100 Extended mode II
                                                                                 Other combinations of MR2[2:0] should not be used
                                                                                 NOTE: MR0[3:0] are not used in channel B and should be set to 0.
2005 Nov 01                                                                 20


Philips Semiconductors                                                                                                                    Product data sheet
    Dual UART                                                                                                                         SC28L202
MR1 – Mode Register 1, A and B
MR1 can be accessed directly at H’21’ and H’29’ in the Extended section of the address map, or by means of the ‘MR Pointers’ at the 0x00 and
0x08 address pointers used by legacy code.
              Bit 7               Bit 6                     Bit 5             Bit 4:3                                   Bit 2           Bit 1:0
              RxRTS Control       See Tables in MR0         Error Mode        Parity Mode                               Parity Type     Bits per
                                  description                                                                                           Character
              0 = off                                       0 = Character     00 = With Parity                          0 = Even        00 = 5
              1 = on                                        1 = Block         01 = Force parity                         1 = Odd         01 = 6
                                                            (entry or exit)   10 = No parity                                            10 = 7
                                                                              11 = Multi drop Special Mode                              11 = 8
MR1[7] – Receiver Request to Send (hardware flow control)                       MR1 [5] – Error Mode Select and sub modes
This bit controls the deactivation of the RTSN output (I/O2) by the             This bit selects the operating mode of the three FIFOed status bits
receiver. The I/O2 output is asserted and negated by commands                   (FE, PE, and received break). In the character mode, status is
applied via the command register or through the setting of the OPR              provided on a character by character basis; the status applies only
register bits. MR1[7] = 1 enables the receiver state machine to                 to the character at the output of the FIFO.
controls the sate of the I/O2 (where the RTSN function is assigned)
                                                                                In the block mode, the status provided in the SR for these bits is the
to be automatically negated (driven high) upon receipt of a valid start
                                                                                accumulation (logical OR) of the status for all characters coming to
bit if the receiver FIFO is 240 full or greater. (for 8-byte mode the
                                                                                the output of the FIFO, since the last reset error command was
FIFO full signal is used) RTSN is reasserted when the FIFO fill level
                                                                                issued.
falls below 240 filled FIFO positions. This constitutes a change from
previous members of Philips (Signets)’ UART families where the                  The Block Error mode has two-sub mode. These modes are
RTSN function triggered on FIFO full. This behavior caused                      controlled by the command register. The error is ‘accumulated’ (as
problems with PC UARTs that could not stop transmission at the                  described above) at either the entry of the data in to the FIFO or on
proper time.                                                                    the exit (read of the FIFO). Of the two the setting of the error on the
                                                                                entry of the data into the FIFO gives the earliest warning of error
NOTE: When the FIFO is set to an 8-byte depth the RTSN signaling
                                                                                data.
is triggered on position 8 of the FIFO
The RTSN feature can be used to prevent overrun in the receiver, by             MR1[4:3] – Parity Mode Select
using the RTSN output signal, to control the CTSN (see MR2(4)                   If ’with parity’ or ’force parity’ is selected, a parity bit is added to the
description) input of the transmitting device. It is not recommend to           transmitted character and the receiver performs a parity check on
use the hardware flow control and the ‘in-band’ (Xon/Xoff) flow                 incoming data. MR1[4:3] = 11 selects the channel to operate in the
control at the same time although the DUART hardware will allow it.             special wake up mode.
To use the RTSN function:                                                       MR1[2] – Parity Type Select
1. Set MR1(7) to 1                                                              This bit sets the parity type (odd or even) if the ’with parity’ mode is
                                                                                programmed by MR1[4:3], and the polarity of the forced parity bit if
2. Set I/O0 B or I/O1 B as appropriate to logical 0                             the ’force parity’ mode is programmed it has no effect if the ’no
3. Enable receiver                                                              parity’ mode is programmed. In the special ’wake up’ mode, it
                                                                                selects the polarity of the A/D bit. The parity bit is used to an
MR1[6] – Receiver interrupt control bit 1.                                      address or data byte in the ’wake up’ mode.
See description under MR0 [6]. (Writing to this register will reset the         MR1[1:0] – Bits per Character Select
RxFIFO interrupt to the bit configuration of MR0 and MR1. Reading               This field selects the number of data bits per character to be
has no effect.)                                                                 transmitted and received. This number does not include the start,
*** change in MR in legacy section – at MR0 also***                             parity, or stop bits.
2005 Nov 01                                                                 21


Philips Semiconductors                                                                                                                 Product data sheet
    Dual UART                                                                                                                       SC28L202
MR2 – Mode Register 2, A and B
MR2 can be accessed directly at 0x22 and 0x2A in the Extended section of the address map, or by means of the ‘MR Pointers’ at the 0x00 and
0x08 address pointers used by legacy code.
The MR2 register provides basic channel set-up control that may need more frequent updating.
             Bit 7      BIT 6            BIT 5                 BIT 4        BIT 3           BIT 2               BIT 1              BIT 0
 MR2 A       CHANNEL MODE                Tx CONTROLS           CTS          STOP BIT LENGTH
 MR2 B                                   RTS                   ENABLE Tx    NOTE: Add 0.5 to binary codes 0 – 7 for 5 bit character lengths.
              00 = Normal                0 = No                0 = No       0 = 0.563 4 = 0.813 8 = 1.563 C = 1.813
              01 = Auto-Echo             1 = Yes               1 = Yes      1 = 0.625 5 = 0.875 9 = 1.625 D = 1.875
              10 = Local loop                                               2 = 0.688 6 = 0.938 A = 1.688 E = 1.938
              11 = Remote loop                                              3 = 0.750 7 = 1.000 B = 1.750 F = 2.000
NOTE:
1. Add 0.5 to values shown for 0 – 7 if channel is programmed for 5 bits/char.
MR2[7:6] – Mode Select                                                       • A received break is echoed as received until the next valid start bit
The DUART can operate in one of four modes: Normal, Automatic                   is detected.
Echo, Local Loop Back and Remote Loop Back
                                                                             MR2[5] Transmitter Request to Send Control
MR2[7:6] = b’00 Normal Mode                                                  This bit controls the deactivation of the RTSN output (I/O2) by the
Normal and default mode The transmitter and receiver operating               transmitter. This output is manually asserted and negated by
independently.                                                               appropriate commands issued via the command register. MR2 [5] = 1
MR2[7:6] = b’01 Automatic Echo                                               negates (drives to logical 1) RTSN automatically one bit time after
Places the channel in the automatic echo mode, which automatically           the characters in the transmit shift register and in the TxFIFO (if any)
retransmits the received data. The following conditions are true             are completely transmitted (includes the programmed number of
while in automatic echo mode:                                                stop bits if the transmitter is not enabled). This feature can be used
• Received data is re-clocked and re-transmitted on the TxD output.          to automatically terminate the transmission of a message as follows:
• The receiver clock is used for the transmitted data.                       • Program auto reset mode: MR2[5]= 1.
• The receiver must be enabled, but the transmitter need not be              • Enable transmitter.
   enabled.                                                                  • Assert RTSN via command.
• The TxRDY and Tx Idle status bits are inactive.                            • Send message.
• The received parity is checked, but is not regenerated for                 • Verify the next to last character of the message is being sent by
   transmission, i.e., transmitted parity bit is as received.                   waiting until transmitter ready is asserted. Disable transmitter after
• Character framing is checked, but the stop bits are retransmitted             the last character is loaded into the TxFIFO.
   as received. Rx data is sent to RxFIFO                                    •  The last character will be transmitted and RTSN will be reset one
•  A received break is echoed as received until the next valid start bit        bit time after the last stop bit.
   is detected.                                                              NOTE: when the transmitter controls the RTSN pin the meaning of
•  CPU to receiver communication continues normally, but the CPU             the pin is COMPLETELY changed. It has nothing to do with the
   to transmitter link is disabled.                                          normal RTSN/CTSN ‘handshaking’. It is usually used to mean, ‘end
                                                                             of message’ and to ‘turn the line around’ in simplex communications.
MR2[7:6] = b’10 selects local loop back diagnostic mode. In this mode:       From a practical point of view the simultaneous use of Tx control of
• The transmitter output is internally connected to the receiver input.      RTSN and Rx control is mutually exclusive. However if this is
• The transmitter’s 1X clock is used for the receiver.                       programmed the DUART performs as required.
• The TxD output is held high.                                               MR2[4] – Clear to Send Control
• The RxD input is ignored.                                                  The state of this bit determines if the CTSN input (I/O0) controls the
• The transmitter must be enabled, but the receiver need not be              operation of the transmitter. If this bit is 0, CTSN has no effect on the
                                                                             transmitter. If this bit is a 1, the transmitter checks the state of CTSN
   enabled.
                                                                             each time it is ready to begin sending a character. If it is asserted
• CPU to transmitter and receiver communications continue                    (low), the character is transmitted. If it is negated (high), the TxD
   normally.                                                                 output remains in the marking state and the transmission is delayed
 MR2 [7:6] = b’11 Selects the Remote Loop back diagnostic mode.              until CTSN goes low. Changes in CTSN, while a character is being
In this mode:                                                                transmitted, do not affect the transmission of that character. This
• Received data is re-clocked and re-transmitted on the TxD output.          feature can be used to prevent overrun of a remote receiver.
• The receiver 1X clock is used for the transmitted data.                    MR2[3:0] – Stop Bit Length Select
• Received data is not sent to the local CPU, and the error status           This field programs the length of the stop bit appended to the
                                                                             transmitted character. Stop bit lengths of 9/16 through 2 bits can be
   conditions are inactive.
                                                                             programmed. In all cases, the receiver only checks for a mark
• The received parity is not checked and is not regenerated for              condition at the center of the first stop bit position (one bit time after
   transmission, i.e., the transmitted parity bit is as received.            the last data bit, or after the parity bit if parity is enabled). If an
• The receiver must be enabled, but the transmitter need not be              external 1X clock is used for the transmitter, MR2[1] = 0 selects one
   enabled.                                                                  stop bit and MR2[1] = 1 selects two stop bits to be transmitted.
• Character framing is not checked, and the stop bits are
   retransmitted as received.
2005 Nov 01                                                              22


Philips Semiconductors                                                                                                              Product data sheet
    Dual UART                                                                                                                    SC28L202
MR3 – Mode Register 3, A and B
  Bit 7                          Bit 6                             Bit 5:4                     Bit 3:2                             Bit 1:0
  Xon/Xoff 1                     Address Recognition 1             Reserved                    In-band flow control                Address
  transparency                   transparency                                                  mode                                Recognition
                                                                                                                                   control
  0 = flow control characters    0 = Address characters                                        00 = host mode, only the host       00 = Default
  received are loaded onto       received are loaded to                                        CPU may initiate flow control       01 = Auto wake
  the RxFIFO                     RxFIFO                                                        actions through the CR              10 = Auto doze
                                                                                               01 = Auto Transmitter flow          11 = Auto wake
  1 = flow control characters    1 = Address characters                                        control                             and auto doze
  received are not loaded        received are not loaded onto                                  10 = Auto Receiver flow control
  onto the RxFIFO                the RxFIFO                                                    11 = Auto Rx and Tx flow control
NOTE:
1. If these bits are not 0 the characters will be stripped regardless of bits (3:2) or (1:0)
MR3[7 & 6] Xon/Xoff Character Stripping                                         b’00 in this field precludes the use of the command register to
Control the handling of recognized Xon/Xoff or Address characters.              transmit Xon/Xoff characters.
If set, the character codes are placed on the RxFIFO along with their
                                                                                NOTE: Interrupt generation in Xon/Xoff processing is controlled by
status bits just as ordinary characters are. If the character is not
                                                                                the IMR (Interrupt Mask Register) of the individual channels. The
loaded onto the RxFIFO, its received status will be lost unless the
                                                                                interrupt may be cleared by a read of the XISR, the Xon/Xoff
receiver is operating in the block error mode, see MR1[5] and the
                                                                                Interrupt Status Register. Receipt of a flow control character will
general discussion on receiver error handling. Interrupt processing
                                                                                always generate an interrupt if the IMR is so programmed. The
is not effected by the setting of these bits. See Character recognition
                                                                                MR0[3:2] bits have effect on the automatic aspects of flow control
section.
                                                                                only, not the interrupt generation.
MR3[5:4] Reserved
                                                                                MR3[1:0] Address Recognition
MR3[3:2] Xon/Xoff Processing                                                    This field controls the operation of the Address recognition logic. If
Control the Xon/Xoff processing logic. Auto Transmitter flow control            the device is not operating in the special or ‘wake-up’ mode, this
allows the gating of Transmitter activity by Xon/Xoff characters                hardware may be used as a general-purpose character detector by
received by the Channel’s receiver. Auto Receiver flow control                  choosing any combination except b’00. Interrupt generation is
causes the Transmitter to emit an Xoff character when the RxFIFO                controlled by the channel IMR. The interrupt may be cleared by a
has loaded to a depth of 240 characters. Draining the RxFIFO to a               read of the XISR, the Xon/Xoff Interrupt Status Register. See further
level of 128 or less causes the Transmitter to emit a Xon character.            description in the section on the Wake Up mode.
All transmissions require no host involvement. A setting other than
2005 Nov 01                                                                23


Philips Semiconductors                                                                                                               Product data sheet
   Dual UART                                                                                                                     SC28L202
RxCSR – Receiver Clock Select Register A and B
TxCSR Transmitter Clock Select Register A and B
Both registers consist of single 6-bit field that selects the clock source for the receiver and transmitter respectively. During a read the unused
bits in this register read b’000. The ‘BRG’ baud rates (fixed BRG rates) shown in the table below are based on the Sclk crystal frequency of
14.7456 MHz. The baud rates shown below will vary as the Sclk crystal clock varies. For example, if the Sclk rate is changed to 7.3728 MHz all
the rates below will reduce by 1/2.
           Bit 7                    Bit 6                  Bits 5:0
           Reserved                 Reserved               Transmitter/Receiver Clock select code,
                                                           See Clock Multiplex Table below
Rx and Tx Clock Select Table
NOTE: Sclk maximum rate is 50 MHz. Data clock rates will follow exactly the ratio of the X1/Sclk to 14.7654 MHz
 Tx A Clock Select Code          Clock selection, Sclk = 14.7456 MHz          Tx A Clock Select Code          Clock selection, Sclk = 14.7456 MHz
 00 0000                         BRG – 50                                     01 0000                         BRG – 75
 00 0001                         BRG – 110                                    01 0001                         BRG – 150
 00 0010                         BRG – 134.5                                  01 0010                         BRG – 450
 00 0011                         BRG – 200                                    01 0011                         BRG – 1800
 00 0100                         BRG – 300                                    01 0100                         BRG – 2000
 00 0101                         BRG – 600                                    01 0101                         BRG – 14.4K
 00 0110                         BRG – 1200                                   01 0110                         BRG – 19.2K
 00 0111                         BRG – 1050                                   01 0111                         BRG – 28.8K
 00 1000                         BRG – 2400                                   01 1000                         BRG – 57.6K
 00 1001                         BRG – 4800                                   01 1001                         BRG – 115.2K
 00 1010                         BRG – 7200                                   01 1010                         BRG – 230.4K
 00 1011                         BRG – 9600                                   01 1011                         BRG – 460.8K
 00 1100                         BRG – 38.4K                                  01 1100                         BRG – 921.6K
 00 1101                         Timer 0                                      01 1101                         Timer 1
 00 1110                         I/O3 A transmitter – 16x External *          01 1110                         PBRG 0
 00 1111                         I/O3 A transmitter – 1x External *           01 1111                         Midi rate 31.25 KHz 1.66% error
 Tx A Clock Select Code          Clock selection, Sclk = 14.7456 MHz          Tx A Clock Select Code          Clock selection, Sclk = 14.7456 MHz
                                                                              11 0000 to 11 1101              Reserved
                                                                              11 1110                         PBRG 1
                                                                              11 1111                         Reserved
This field selects the baud rate clock for the Channel A transmitter.
* External clock Pin and external clock mode assignment.
 Tx/Rx CSR x [5:0]               RxC Channel A                                TxC Channel B                      RxC channel B
 001110                          I/O4 A 16x                                   I/O5 A 16x                         I/O6 A 16x
 001111                          I/O4 A 1X                                    I/O5 A 1X                          I/O6 A 1X
2005 Nov 01                                                                 24


Philips Semiconductors                                                                                                               Product data sheet
    Dual UART                                                                                                                     SC28L202
CRx – Command Register Extension, A and B
CR is used to write commands to the DUART.
  Bit 7                               Bit 6             Bit 5              Bit 4:0
  Lock Tx and Rx Enables              Enable Tx         Enable Rx          Command Register codes.
  0 = lock Rx & Tx state              0 = disable       0 = disable        (See Command Register Table)
  1 = Change Rx & Tx state            1 = enable        1 = enable
CR[7] – Lock Tx and Rx enables.                                                • 00101 Reset break change interrupt. Causes the break detect
‘0’ prevents changing transmitter and receiver enable bits while                  change bit in the interrupt status register (ISR[2]) to be cleared to
writing to the lower 5 bits of the command register. Bits CR[6:5] are             zero.
not changed.
                                                                               • 00110 Start break. Forces the TxD output low (spacing). If the
‘1’ allows the receiver and transmitter enable bits to be changed                 transmitter is empty, the start of the break condition will be
while issuing a command to the command register.                                  delayed up to two bit times. If the transmitter is active and the
NOTE: Receiver or transmitter disable is not the same as receiver                 TxFIFO is empty then the break begins when transmission of the
or transmitter reset.                                                             current character is completed. If there are characters in the
                                                                                  TxFIFO, the start of break is delayed until all characters presently
WRITES TO THE LOWER 5 BITS OF THE CR WOULD USUALLY
                                                                                  in the TxFIFO and any subsequent characters loaded have been
HAVE CR[7] AT ‘0’ in order to maintain the enable/disable condition               transmitted. (Tx Idle must be true before break begins).
of the receiver and transmitter. The bit provides a mechanism for
writing commands to a channel, via CR[4:0], without the necessity of           The transmitter must be enabled to start a break.
keeping track of or reading the current enable status of the receiver          • 00111 Stop break. The TxD line will go high (marking) within two
and transmitter.                                                                  bit times. TxD will remain high for one bit time before the next
CR[6] – Enable Transmitter                                                        character is transmitted.
A one written to this bit enables operation of the transmitter. The            • 01000 Assert RTSN. Causes the RTSN output to be asserted
TxRDY status bit will be asserted. When disabled by writing a zero                (low).
to this bit, the command terminates transmitter operation and resets
the TxRDY and Tx Idle status bits returning the transmitter to its idle
                                                                               • 01001 Negate RTSN. Causes the RTSN output to be negated
state . However, if a character is being transmitted or if characters             (high).
are loaded in the TxFIFO when the transmitter is disabled, the                      NOTE: The two commands above actually reset and set,
transmission of the all character(s) is completed before assuming                   respectively, the I/O0 B (Channel A) or I/O1 B (Channel B)
the inactive state.                                                                 pin associated with the OPR register. (See SOPR and
                                                                                    ROPR registers I/O pin control.
CR[5] – Enable Receiver                                                        • 01010 Set C/T Receiver time out mode on
A one written to this bit enables operation of the receiver. The
receiver immediately begins the search for and the verification the            • 01011 Set MR Pointer to 0
start bit. If a zero is written, this command terminates operation of          • 01100 Set C/T Receiver time out mode off
the receiver immediately—a character being received will be lost.
The command has no effect on the receiver status bits or any other             • 01101 Block error status accumulation on FIFO entry. Allows the
control registers. The data in the RxFIFO will be retained and may                ‘received break’, ‘framing error’ and ‘parity error’ bits to be set as
be read. If the receiver is re-enabled subsequent data will be                    the received character is loaded to the RxFIFO. (normally these
appended to that already in the RxFIFO. If the special wake-up                    bits are set on reading of the data from the RxFIFO) Setting this
mode is programmed, the receiver operates even if it is disabled                  mode can give information about error data up to 256 bytes earlier
(see Wake-up Mode).                                                               than the normal mode. However it clouds the ability to know
                                                                                  precisely which byte(s) are in error.
CR[4:0] – Miscellaneous Commands (See Table below)
The encoded value of this field can be used to specify a single
                                                                               • 01110 Power Down Mode On
command as follows:                                                            • 01111 Disable Power Down Mode
• 00000 No command.                                                            • 10000 Transmit an Xon Character
• 00001 Reserved                                                               • 10001 Transmit an Xoff Character
• 00010 Reset receiver. Immediately resets the receiver as if                  • 10010 C/T start sets the counter timer to the value of the
   hardware reset had been applied. The receiver is reset and the                 counter/timer preset register and starts the counter.
   FIFO pointer is reset to the first location effectively discarding all
   unread characters in the FIFO.
                                                                               • 10011 C/T stop Effectively stops the counter/timer, captures the
                                                                                  last count value and resets the counter ready status bit in the ISR
• 00011 Reset transmitter. Immediately resets the transmitter as if a          • 10100 Reserved
   hardware reset had been applied. The transmitter is reset and the
   FIFO pointer is reset to the first location effectively discarding all      • 10101 Reserved.
   untransmitted characters in the FIFO.
                                                                               • 10110 Transmitter resume command (This command is not active
• 00100 Reset error status. Clears the received break, parity error,              in ‘Auto-Transmit mode’). A command to cancel a previous Host
   framing error, and overrun error bits in the status register                   Xoff command. Upon receipt, the channel’s transmitter will
   (SR[7:4]). It is used in either character or block mode. In block              transfer a character, if any, from the TxFIFO and begin
   mode it would normally be used after the block is read.                        transmission.
2005 Nov 01                                                               25


Philips Semiconductors                                                                                                        Product data sheet
   Dual UART                                                                                                               SC28L202
• 10111 Host Xoff (or transmitter pause) command (CRTXoff). This            • 11001 Reserved
  command allows tight host CPU control of the flow control of the
  channel transmitter. When interrupted for receipt of a Xoff
                                                                            • 11010 Reserved
  character by the receiver, the host may stop transmission of              • 11011 Reset Address Recognition Status. This command clears
  further characters by the channel transmitter by issuing the Host           the interrupt status that was set when an address character was
  Xoff command. Any character that has been transferred to the                recognized by a disabled receiver operating in the special mode.
  TxD shift register will complete its transmission, including the stop
  bit before the transmitter pauses. Even though the transmitter is         • 11100 Reserved
  paused it is still able to send Xon/Xoff by the request of its            • 11101 Block error status accumulates on FIFO read (Default
  associated receiver.                                                        State)
• 11000 Cancel Host transmit flow control command. Issuing this             • 11110 Reset to ‘C92’ Register Set
  command will cancel a previous command to transmit a flow
  control character if the flow control character is not yet loaded into    • 11111 Reserved for channel B, for channel A: executes a chip
  the TxD Shift Register. If there is no character waiting for                wide reset. Executing this command in channel a is equivalent to
  transmission or if its transmission has already begun, then this            a hardware reset with the RESET(N) pin. Executing in channel B
  command has no effect and the character will be sent.                       has no effect.
COMMAND REGISTER EXTENSION TABLE A and B
Commands 0x0E, 0x0F, 0x1F (marked with • ) are global and exist only in channel A’s register space.
 Channel               Channel                                   Channel         Channel
 Command               Command                                   Command Code    Command
 Code
 CR[4:0]               Description                               CR[4:0]         Description
 0 0000                NOP                                       1 0000          Transmit Xon
 0 0001                Set MR pointer to 1                       1 0001          Transmit Xoff
 0 0010                Reset Receiver                            1 0010          Start C/T
 0 0011                Reset Transmitter                         1 0011          Stop C/T
 0 0100                Reset Error Status                        1 0100          Reserved
 0 0101                Reset Break Change Interrupt              1 0101          Reserved
 0 0110                Begin Transmit Break                      1 0110          Transmitter Resume Command (CRXoffRe)
 0 0111                End Transmit Break                        1 0111          Host Xoff Command (CRTXoff)
 0 1000                Assert RTSN (I/O0 B or I/O1 B)            1 1000          Cancel Transmit X Char Command (CRTX)
 0 1001                Negate RTSN (I/O0 B or I/O1 B)            1 1001          Reserved
 0 1010                Set C/T Receiver time-out mode on         1 1010          Reserved
 0 1011                Set MR pointer to 0                       1 1011          Reset Address Recognition Status
 0 1100                Set C/T Receiver time-out mode off        1 1100          Reserved
 0 1101                Block Error Status on RxFIFO load         1 1101          Block Error Status on RxFIFO Read
 0 1110                • Power Down Mode On                      1 1110          Reserved
 0 1111                • Disable Power Down Mode                 1 1111          • Reset Device as a Hardware reset. Reserved in channel B*
2005 Nov 01                                                              26


Philips Semiconductors                                                                                                                  Product data sheet
    Dual UART                                                                                                                        SC28L202
SR – Channel Status Register A and B
            Bit 7               Bit 6             Bit 5             Bit 4             Bit 3              Bit 2               Bit 1             Bit 0
            Received Break      Framing Error     Parity Error      Overrun Error     Tx Idle            TxRDY               RxFULL            RxRDY
            0 = No              0 = No            0 = No            0 = No            0 = No             0 = No              0 = No            0 = No
            1 = Yes             1 = Yes           1 = Yes           1 = Yes           1 = Yes            1 = Yes             1 = Yes           1 = Yes
SR[7] – Received Break                                                           of the last stop bit of a character, if no character is in the TxFIFO
This bit indicates that an all zero character (including parity, if used)        awaiting transmission. It is negated when the TxFIFO is loaded by
of the programmed length has been received with a stop bit at a                  the CPU, or when the transmitter is disabled or reset. This bit is
logical zero. A single FIFO position is loaded with 0x00 when a                  concerned with the transmitter transmitting data and it essentially
break is received; further entries to the FIFO are inhibited until the           shows ‘ transmitter underrun’. If, while it is underrun it is
RxD line returns to the marking state for at least one half bit time             commanded to send an X on/Xoff character it will remain at the zero
(two successive edges of the internal or external 1x clock). When                state. If it is underrun and while sending an Xon/Xoff character the
this bit is set, the change in break bit in the ISR (ISR [2]) is set.            TxFIFO is loaded then the bit will go low.
ISR[2] is also set when the end of the break condition, as defined
above, is detected. The break detect circuitry is capable of detecting           SR[2] – Transmitter Ready (TxRDY)
breaks that originate in the middle of a received character. However,            This bit, when set, indicates that the TxFIFO is ready to be loaded
if a break begins in the middle of a character, it must last until the           with at least one more character. This bit is cleared when the
end of the next character in order for it to be detected.                        TxFIFO is full or is above its interrupt threshold level set in the MR
                                                                                 registers or TxFIFO interrupt Fill Level register (TxFIL). Characters
SR[6] – Framing Error (FE)                                                       loaded in the TxFIFO while the transmitter is disabled will not be
This bit indicates that a stop bit was not detected when an otherwise            transmitted.
non-zeros data character (including parity, if enabled) was received.
The stop bit check is made in the middle of the first stop bit position.         SR[1] – RxFIFO Full (RxFULL)
                                                                                 This bit is set when a character is transferred from the receive shift
SR[5] – Parity Error (PE)                                                        register to the receive FIFO and the transfer causes the FIFO to
This bit is set when the ’with parity’ or ’force parity’ mode is                 become full, i.e., all 256 RxFIFO positions are occupied. It is reset
programmed and the corresponding character in the FIFO was                       when the CPU reads the RxFIFO and that read leaves one or more
received with incorrect parity. In the special ’wake up mode’, the               empty byte position(s). If a character is waiting in the receive shift
parity error bit stores the received A/D bit.                                    register because the RxFIFO is full, RxFULL is not reset until the
                                                                                 second read of the RxFIFO since the waiting character is
SR[4] – Overrun Error (OE)                                                       immediately loaded to the RxFIFO.
This bit, when set, indicates that one or more characters in the
received data stream have been lost. It is set upon receipt of the               SR[0] – Receiver Ready (RxRDY)
start bit of a new character when the RxFIFO is full and a character             This bit indicates that a character has been received and is waiting
is already in the receive shift register (257 valid characters in the            in the RxFIFO to be read by the CPU. It is set when the character is
receiver) waiting for an empty FIFO position. When this occurs, the              transferred from the receive shift register to the RxFIFO and reset
character in the receive shift register (and its break detect, parity            when the CPU reads the RxFIFO, and no more characters are in the
error and framing error status, if any) is lost. This bit is cleared by a        RxFIFO.
reset error status command.
SR [3] – Transmitter Idle (Tx Idle)
This bit is set when the transmitter underruns, i.e., both the TxFIFO
and the transmit shift register are empty. It is set after transmission
2005 Nov 01                                                                 27


Philips Semiconductors                                                                                                                  Product data sheet
    Dual UART                                                                                                                        SC28L202
ISR – Interrupt Status Register A and B
          Bit 7          Bit 6           Bit 5                 Bit 4     Bit 3       Bit 2            Bit 1                     Bit 0
          I/O Port       Receiver        Address               Xon/off   C/T         Break            RxINT                     TxINT
          Change         Watch-dog       recognition event     event     Ready       Change           Receiver entered the      Transmitter entered
          of             Time-out                                                    Of               arbitration process.      the arbitration process.
          state                                                                      state
This register provides the status of all potential interrupt sources for       ISR[1] – RxINT. (Also Rx DMA hand shake at I/O pins)
a UART channel. When generating an interrupt arbitration value, the            The general function of this bit is to indicate that the RxFIFO has
contents of this register are masked by the interrupt mask register            data available and that it has entered the arbitration process. The
(IMR). If a bit in the ISR is a ’1’ and the corresponding bit in the IMR       particular meaning of this bit is programmed by RxFIL register. If
is also a ‘1’; interrupt arbitration for this source will begin. If the        programmed as receiver ready (MR2[3:2] = 00), it indicates that at
corresponding bit in the IMR is a zero, the state of the bit in the ISR        least one character has been received and is waiting in the RxFIFO
can have no affect on the IRQN output. Note that the IMR may or                to be read by the host CPU. It is set when the character is
may not mask the reading of the ISR as determined by GCCR[06].                 transferred from the receive shift register to the RxFIFO and reset
If GCCR[0] is cleared, the reset and power on default, the ISR is              when the CPU reads the last character from the RxFIFO.
read without modification. If GCCR[0] is set, the read of the ISR
                                                                               If RxFIL is programmed as FIFO full, ISR[1] is set when a character
gives a value of the ISR ANDed with the IMR.
                                                                               is transferred from the receive holding register to the RxFIFO and
ISR[7] – Input Change of State.                                                the transfer causes the RxFIFO to become full, i.e. all 256 FIFO
This bit is set when a change of state occurs at the I/O1 or I/O0              positions are occupied. It is reset whenever RxFIFO is not full. If
input pins. It is reset when the CPU reads the Input Port Register,            there is a character waiting in the receive shift register because the
IPR.                                                                           FIFO is full, the bit is set again when the waiting character is
                                                                               transferred into the FIFO.
ISR[6] Fixed Watchdog Time-out.
This bit is set when the receiver’s watchdog timer has counted more            The other two conditions of these bits, 3/4 and half full operate in a
than 64 bit times since the last RxFIFO event. RxFIFO events are a             similar manner. The ISR[1] bit is set when the RxFIFO fill level
read of the RxFIFO or GRxFIFO, or the load of a received character             meets or exceeds the value; it is reset when the fill level is less. See
into the FIFO. The interrupt will be cleared automatically when the            the description of the MR2 register.
RxFIFO or GRxFIFO is read. The receiver watch-dog timer is                     NOTE: This bit must be at a one (1) for the receiver to enter the
included to allow detection of the very last characters of a received          arbitration process. It is the fact that this bit is zero (0) when the
message that may be waiting in the RxFIFO, but are too few in                  RxFIFO is empty that stops an empty FIFO from entering the
number to successfully initiate an interrupt. Refer to the watchdog            interrupt arbitration. Also note that the meaning if this bit is not quite
timer description for details of how the interrupt system works after a        the same as the similar bit in the status register (SR).
watchdog time-out.
                                                                               ISR[0] – TxINT. (Also Tx DMA hand shake at I/O pins)
ISR[5] – Address Recognition Status Change.                                    The general function of this bit is to indicate that the TxFIFO has an
This bit is set when a change in receiver state has occurred due to            at least one empty space for data. The particular meaning of the bit
an Address character being received from an external source and                is controlled by MR0 [5:4] indicates the TxFIFO may be loaded with
matches the reference address in ARCR. The bit and interrupt is                one or more characters. If MR0[5:4] = 00 (the default condition) this
negated by a write to the CR with command x11011, Reset Address                bit will not set until the TxFIFO is empty—256 bytes available. If the
Recognition Status.                                                            fill level of the TxFIFO is below the trigger level programmed by the
                                                                               TxINT field of the Mode Register 0, this bit will be set. A one in this
ISR[4] – Xon/Xoff Status Change.
                                                                               position indicates that at least one character can be sent to the
This bit is set when a Xon/Xoff character being received from an
                                                                               TxFIFO. It is turned off as the TxFIFO is filled above the level
external source. The bit is negated by a read of the channel
                                                                               programmed by MR0[5:4. This bit turns on as the FIFO empties.
Xon/Xoff Interrupt Status Register, XISR.
                                                                               (Note that the RxFIFO bit turns on as the FIFO fills.) This often a
ISR[3] – Counter Timer Status                                                  point of confusion in programming interrupt functions for the receiver
The C/T has timed out or the count passed through 0. This bit is               and transmitter FIFOs.
cleared by issuing the ‘stop C/T ’ command.                                    NOTE: This bit must be at a one (1) for the transmitter to enter the
                                                                               arbitration process. It is the fact that this bit is zero (0) when the
ISR[2] – Change in Channel Break Status.
                                                                               TxFIFO is full that stops a full TxFIFO from entering the interrupt
This bit, when set, indicates that the receiver has detected the
                                                                               arbitration. Also note that the meaning if this bit is not quite the same
beginning or the end of a received break. It is reset when the CPU
                                                                               as the similar bit in the status register (SR).
issues a reset break change interrupt command via the CR.
2005 Nov 01                                                               28


Philips Semiconductors                                                                                                                 Product data sheet
    Dual UART                                                                                                                       SC28L202
IMR – Interrupt Mask Register A and B
          Bit 7                            Bit 6              Bit 5              Bit 4        Bit 3         Bit 2               Bit 1        Bit 0
          I/O Port Change of state         Rx Watch-dog       Address            Xon/off      C/T           Break Change        RxRDY        TxRDY
                                           Time-out           recognition event  event        Ready         Of State            interrupt    interrupt
The programming of this register selects which bits in the ISR cause            IMR[4] Xon/Xoff Enable
an interrupt output. If a bit in the ISR is a ’1’ and the corresponding         Enables the generation of an interrupt in response to recognition of
bit in the IMR is a ’1’, the interrupt source is presented to the internal      an in-band flow control character.
interrupt arbitration circuits, eventually resulting in the IRQN output
being asserted (low). If the corresponding bit in the IMR is a zero,            IMR[3] Counter/Timer Enable
the state of the bit in the ISR has no affect on the IRQN output.               Enable the C/T interrupt when the C/T reaches 0 count.[2] Enables
                                                                                the generation of an interrupt when a Break condition has been
IMR[7] COS enable                                                               detected by the channel receiver.
Allows a change of state in the inputs equipped with input change
detectors to cause an interrupt.                                                IMR[1] Receiver (Rx) Enable
                                                                                Enables the generation of an interrupt when servicing for the
IMR[6] Fixed Watchdog Enable                                                    RxFIFO is desired.
Controls the generation of an interrupt watchdog timer event. If set,
a count of 64 idle bit times in the receiver will begin interrupt               IMR[0] Transmitter (Tx) Enable
arbitration.                                                                    Enables the generation of an interrupt when servicing for the
                                                                                TxFIFO is desired.
IMR[5] Address recognition enable
Enables the generation of an interrupt in response to changes in the
Address Recognition circuitry of the Special Mode (multi-drop or
wake-up mode).
RxFIFO – Receiver FIFO, A and B
           Bit[10]                     Bit[9]                 Bit[8]                 Bits [7:0]
          These bits are sent to the status register                                 This the data byte sent to the data bus on RxFIFO read
          Break                        Framing                Parity                 8 data bits
          Received Status              Error Status           Error Status           MSBs =0 for 7,6,5 bit data
The FIFO for the receiver is 11 bits wide and 256 ‘words’ deep. The             The foregoing applies to the ‘character error’ mode of status
status of each byte received is stored with that byte and is moved              reporting. See MR1[5] and ‘RxFIFO Status’ descriptions for ‘block
along with the byte as the characters are read from the FIFO. The               error’ status reporting. Briefly, ‘Block Error’ gives the accumulated
upper three bits are presented in the STATUS register and they                  error of all bytes received by the RxFIFO since the last ‘Reset Error’
change in the status register each time a data byte is read from the            command was issued. (CR = 0x04)
FIFO. Therefor the status register should be read BEFORE the byte
is read from the RxFIFO if one wishes to ascertain the quality of the
byte.
TxFIFO – Transmitter FIFO, A and B
  Bits 7:0
  8 data bits. MSBs are ignored to 0 for 7, 6, 5 bit data
The FIFO for the transmitter is 8 bits wide by 256 bytes deep. For character lengths less than 8 bits the upper bits will be ignored by the
transmitter state machine and thus are effectively discarded.
RxFIL – Receiver FIFO Interrupt Level, A and B
  Bits 7:0
  Any one of 256 FIFO fill positions
The position in the Rx FIFO that causes the receiver will enter the interrupt arbitration process. This register is used to offset the effect of the
arbitration threshold. It use may yield moderate improvements in the interrupt service. It will also ‘equalize’ interrupt latency and allow for larger
aggregate block transfers between fast and slow channels. Writing to this register removes the interrupt control established in MR0 and MR1.
RxFL – Receiver FIFO Fill Level Register
  Bits 7:0
  Channel byte count code ** (1) = implied ‘1’
  00000001 = 1
  00000010 = 2
  to
  11111111 = 255
  **(1)00000000 = 256 if RxRDY status bit is set.
The number of bytes filled in the receiver FIFO
2005 Nov 01                                                                  29


Philips Semiconductors                                                                                                               Product data sheet
    Dual UART                                                                                                                     SC28L202
TxFIL – Transmitter FIFO Interrupt Level A and B
  Bits 7:0
  Any one of 256 FIFO empty positions
The position in the Tx FIFO that caused the transmitter will enter the interrupt arbitration process. This register is used to offset the effect of the
arbitration threshold. It use may yield moderate improvements in the interrupt service. It will also ‘equalize’ interrupt latency and allow for larger
aggregate block transfers between fast and slow channels. Writing to this register removes the interrupt control established in MR0 and MR1.
TxEL – Transmitter FIFO Empty Level Register
  Bits 7:0
  Channel byte count code ** (1) = implied ‘1’
  00000001 = 1
  00000010 = 2
  to
  11111111 = 255
  **(1)00000000 = 256 if TxRDY status bit is set.
The number of empty bytes in the Transmitter FIFO.
Registers for Character Recognition
Please not that, although the names of the registers imply a particular function, there is not any hardware function directly attached to them.
They are just three characters that may be used for any function requiring recognition or simple character stripping.
It is only when other internal logic is enabled that the reception of a recognized character will trigger particular chip functions and/or interrupts.
XonCR – Xon/Xoff Character Register A and B
             Bits 7:0
             8 Bits of the Xon Character Recognition (Resets to 0x11)
An 8-bit character register that contains the compare value for a Xon character.
XoffCR – Xoff Character Register A and B
             Bits 7:0
             8 Bits of the Xoff Character Recognition (Resets to 0x13)
An 8-bit character register that contains the compare value for a Xoff character.
ARCR – Address Recognition Character Register A and B
             Bits 7:0
             8 Bits of the Multi-Drop Address Character Recognition (Resets to 0x00)
An 8 bit character register that contains the compare value for the wake-up address character.
2005 Nov 01                                                                30


Philips Semiconductors                                                                                                                   Product data sheet
   Dual UART                                                                                                                         SC28L202
XISR – Xon–Xoff Interrupt Status Register A and B (Reading this register clears XISR(7:4))
          Bits 7:6                             Bits 5:4                                         Bits 3:2                      Bits 1:0
          Received X Character Status          Automatic X Character transmission               TxD flow status               TxD character status
                                               status
          00 = none                            00 = none                                        00 = normal transmission      00 = normal TxD data
          01 = Xoff received                   01 = Xon transmitted                             01 = TxD halt pending         01 = Idle wait for FIFO
          10 = Xon received                    10 = Xoff transmitted                            10 = re-enabled               data
          11 = both received                   11 = Both transmitted                            11 = flow halted              10 = Xoff in pending
                                                                                                                              11 = Xon in pending
XISR[7:6] Received X Character Status.                                            • 10 – re–enabled. The transmitter had been halted and has been
This field can be read to determine if the receiver has encountered a
                                                                                     restarted. It is sending (or is prepared to send) data characters.
Xon or Xoff character in the incoming data stream. These bits are
maintained until a read of the XISR. The field is updated by X                     After a read of the XISR, it will return to ‘normal’ status.
character reception regardless of the state of MR3(7) and MR3(3:2)
or IMR(4). The field can therefore be used as a character detector
                                                                                  • 11 – The transmitter is stopped due to an Xoff character being
                                                                                     received from its associated receiver. The transmitter is ‘flow
for the bit patterns stored in the Xon and Xoff Character Registers.
                                                                                     controlled’.
XISR[5:4] Automatic transmission Status.
This field indicates the last flow control character sent in the Auto             XISR[1:0] TxD X character Status.
Receiver flow control mode. If Auto Receiver mode has not been                    This field allows determination of the type of character being
enabled, this field will always read b’00. It will likewise reset to b’00 if      transmitted. It will always be b’00 if none of the automatic X
MR0(3) is reset. If the Auto Receiver mode is exited while this field             character controls of MR3[3:2] is enabled.
reads b’10, it is the user’s responsibility to transmit a Xon, when               • 01 – The channel is waiting for a data character to transfer from
appropriate.                                                                         the TxFIFO. This condition will only occur for a bit time after a Xon
                                                                                     or Xoff character transmission unless the TxFIFO is empty.
XISR[3:2] TxD Condition of the automatic flow control status.
This field tracks the transmitter’s flow status as follows:                       • 10 – A command to send an Xoff character is pending.
• 00 – normal transmission. Transmitter is not affected by Xon or                 • 11 – A command to send an Xon character is pending.
  Xoff.
• 01 – TxD halt pending. After the current character finishes the                 Conditions b’10 and b’11 will not exist for more than a character
                                                                                  time.
  transmitter will stop. The status will then change to b’11.
WCXER Watch Dog, Character, Address and X Enable Register – A and B
             Bit 7               Bit 6              Bit 5              Bit 4            BIT 3             BIT 2            BIT 1             BIT 0
             Watch dog *                            Address recognition                 Xon recognition                    Xoff Recognition
             1 = disable Wd      1 = enable         1 = disable Ar     1 = enable Ar    1 = disable       1 = enable       1 = disable       1 = enable
             0 = no action       Wd                 0 = no action      0 = no action    Xon               Xon              Xoff              Xoff
                                 0 = no action                                          0 = no action     0 = no action    0 = no action     0 = no action
This register enables the UART’s Character Recognition, Address                   causing any Xon/Xoff or wakeup mode activities to occur. The
Recognition and Receiver watchdog timer. If both enable and                       recognition event is reported in the ISR register.
disable are active a disable results. This register is used to enable
                                                                                  * This bit control is duplicated at MR0[7].
the general–purpose character recognition feature WITHOUT
2005 Nov 01                                                                  31


Philips Semiconductors                                                                                                                 Product data sheet
   Dual UART                                                                                                                        SC28L202
Programmable Counters, Timers and Baud Rate generators
PBRGPU – Programmable BRG Timer Reload Registers, Upper 0 and 1
            Bits 7:0
            8 MSBs of the BRG Timer divisor.
This is the upper byte of the 16–bit value used by the BRG timer in generating a baud rate clock
PBRGPL – Programmable BRG Timer Reload Registers, Lower 0 and 1
            Bits 7:0
            8 LSB of the BRG Timer divisor.
This is the lower byte of the 16–bit value used by the BRG timer in generating a baud rate clock.
CTCS 0 and 1 – Counter Timer clock source
NOTE: Writing to this register removes the control established in the counter/timer portion of the ACR in the default register map
              Bit 7:6        Bit 5:4                                               Bit 3:0
              Reserved       Mode control                                          Clock selection
                             00 – Selects Counter Mode. Generates                  0000 External I/O2 A (for CT 0), I/O7 A (for CT 1)
                              a timing edge                                        0001 External I/O2 A/16 (for CT 0), I/O7 A/16 (for CT 1)
                                                                                   0010 Sclk
                             01 – Selects Timer Mode. Generates a                  0011 Sclk / 2
                              square wave                                          0100 Sclk / 16
                                                                                   0101 Sclk / 32
                             10 – Reserved                                         0110 Sclk / 64
                                                                                   0111 Sclk / 128
                             11 – Selects Timer Pulse Mode.                        TxC1X A
                              Generates periodic pulses twice the                  TxC1X B
                              frequency as in Timer Mode. Pulse width              1010, 1011 Reserved
                              is one cycle of the clock as it is delivered to      1100 Rx Character Count (Ch A) Clock is RxFIFO A load pulse
                              the C/T. (i.e. after any prescale)                   1101 Rx Character Count (Ch B) Clock is RxFIFO B load pulse
                                                                                   1110, 1111 Reserved
CTVU – Counter Timer Value Registers, Upper 0 and 1
            Bits 7:0
            8 MSBs of the Counter timer preset value
Reading this register gives the value of the upper 8 bits of the counter timer.
CTVL – Counter timer Value Registers, Lower 0 and 1
            Bits 7:0
            8 LSB of the Counter timer preset value
Reading this register gives the value of the upper 8 bits of the                 this could be made worse or completely eliminated. If the Stop
counter timer.                                                                   counter command is issued and following that the C/T is read there
                                                                                 will be no uncertainty go its value. If it is necessary to read the C/T
NOTE: The counter timer should be stopped before reading. Usually
                                                                                 ‘on the fly’ then reading it twice and comparing the values will
the clock of the counter timer is not synchronized with the read of
                                                                                 correct the problem. The double read will not be effective if the
the C/T. It is therefore possible to capture changing data during the
                                                                                 counter timer clock is faster than a read cycle.
read. Depending on the clock speed with respect to the read cycle
PBRGCS – Programmable BRG Clock Source
            Bit 7                                 Bit 6:4                         Bit 3                              Bit 2:0
            PBRG 1, Register control              PBRG 1, Clock selection         PBRG 0, Register control           PBRG 0, Clock selection
            0 = Resets PBRG 1 and                 000 = Sclk                      0 = Resets PBRG 0 and              000 = Sclk
            holds it stopped                      001 = Sclk / 2                  holds it stopped.                  001 = Sclk / 2
                                                  010 = Sclk/ 16                                                     010 = Sclk / 16
            1 = Allows PBRG 1 to run.             011 = Sclk / 32                 1 = Allows PBRG 0 to run.          011 = Sclk / 32
                                                  100 = Sclk / 64                                                    100 = Sclk / 64
                                                  101 = Sclk / 128                                                   101 = Sclk / 128
                                                  110 = I/O4 A                                                       110 = I/O3 A
                                                  111 = Reserved                                                     111 = Reserved
Start/Stop control and clock select register for the two BRG                     receiver(s) or transmitter(s) the receivers and transmitters will
counters. The clock selection is for the input to the counters. It is            consider it as a 16x clock and further device it by 16. In other words
that clock divided by the number represented by the PBRGPU and                   the receivers and transmitters will always be in the 16x ode of
PBRGPL the will be used as the 16x clock for the receivers and                   operation when the internal BRG timer is selected for their clock.
transmitters. When the BRG timer Clock is selected for the
2005 Nov 01                                                                   32


Philips Semiconductors                                                                                                                Product data sheet
    Dual UART                                                                                                                       SC28L202
CTPU Counter Timer Preset Upper 0 and 1
  CTPU            Bit 7              BIT 6           BIT 5           BIT 4            BIT 3             BIT 2            BIT 1            BIT 0
                  The lower eight (8) bits for the 16 bit counter timer preset register
CTPL Counter –Timer Preset Low 0 and 1
  CTPL            Bit 7              BIT 6           BIT 5           BIT 4            BIT 3             BIT 2            BIT 1            BIT 0
                  The Upper eight (8) bits for the 16 bit counter timer preset register
The CTPU and CTPL hold the eight MSBs and eight LSBs,                           the CPU. If I/O3 is programmed to be the output of the C/T, the
respectively, of the value to be used by the counter/timer in either            output remains high until terminal count is reached; at which time it
the counter or timer modes of operation. The minimum value that                 goes low. The output returns to the High State and ISR [3] is cleared
may be loaded into the CTPU/CTPL registers is H‘0000’. Note that                when the counter is stopped by a stop counter command. The CPU
these registers are write–only and cannot be read by the CPU.                   may change the values of CTPU and CTPL at any time, but the new
                                                                                count becomes effective only on the next start counter commands. If
In the timer mode, the C/T generates a square wave whose period is
                                                                                new values have not been loaded, the previous count values are
twice the value (in C/T clock periods) of the CTPU and CTPL. The
                                                                                preserved and used for the next count cycle
waveform so generated is often used for a data clock. The formula
for calculating the divisor n to load to the CTPU and CTPL for a                In the counter mode, the current value of the upper and lower 8 bits
particular 1X data clock is shown below.                                        of the counter (CTPU, CTPL) may be read by the CPU. It is
                                                                                recommended that the counter be stopped when reading to prevent
NOTE: The 2 in the denominator is for the Square wave generation.
                                                                                potential problems that may occur if a carry from the lower 8 bits to
For the Pulse mode change the 2 to a 1.
                                                                                the upper 8 bits occurs between the times that both halves of the
                                                                                counter are read. However, note that a subsequent start counter
          C/T clock input frequency                                             command will cause the counter to begin a new count cycle using
n+
       (2   16     (Baud rate desired))                                         the values in CTPU and CTPL. When the C/T clock divided by 16 is
                                                                                selected, the maximum divisor becomes 1,048,575.
                                                                                The CTS, RTS, CTS Enable Tx signals
(If the pulse mode is selected, then ‘2’ in the divisor should be ‘1’.
                                                                                CTS (Clear To Send) is usually meant to be a signal to the
This doubles the C/T output speeds for any given input clock.)
                                                                                transmitter meaning that it may transmit data to the receiver. The
Often this division will result in a non–integer number, 26.3 for               CTS input is on pin I/O0 A for Tx A and on I/O1 A for Tx B. The CTS
example. One can only program integer numbers in a digital divider.             signal is active low; thus; it is called CTSN A for Tx A and CTSN B
Therefore, 26 would be chosen. This gives a baud rate error of                  for Tx B. RTS is usually meant to be a signal from the receiver
0.3/26.3, which is 1.14% and well within the ability asynchronous               indicating that the receiver is ready to receive data. It is also active
mode of operation.                                                              low and is, thus, called RTSN A for Rx A and RTSN B for Rx B.
                                                                                RTSN A is on pin I/O0 B and RTSN B is on I/O1 B. A receiver’s
If the value in CTPU and CTPL is changed, the current half–period
                                                                                RTSN output will usually be connected to the CTS input of the
will not be affected, but subsequent half periods will be. The C/T will
                                                                                associated transmitter. Therefore, one could say that RTS and CTS
not be running until it receives an initial ‘Start Counter’ command
                                                                                are different ends of the same wire!
from the command register (or a read at address A6–A0 = 0001110
in the lower 16 position address space) . After this, while in timer            MR2 (4) is the bit that allows the transmitter to be controlled by the
mode, the C/T will run continuously. Receipt of a start counter                 CTS pin (I/O0 A or I/O1 A). When this bit is set to one AND the CTS
command causes the counter to terminate the current timing cycle                input is driven high, the transmitter will stop sending data at the end
and to begin a new cycle using the values in CTPU and CTPL.                     of the present character being serialized. It is usually the RTS output
                                                                                of the receiver that will be connected to the transmitter’s CTS input.
The counter ready status bit (ISR [3]) is set once each cycle of the
                                                                                The receiver will set RTS high when the receiver FIFO is full AND
square wave. The bit is reset by a stop counter command from the
                                                                                the start bit of the ninth character is sensed. Transmission then
command register (or a read with A6–A0 = 0x0F in the lower 16
                                                                                stops with nine valid characters in the receiver. When MR2 (4) is set
position address space). The command however, does not stop the
                                                                                to one, CTSN must be at zero for the transmitter to operate. If MR2
C/T. the generated square wave is output on I/O3 if it is programmed
                                                                                (4) is set to zero, the I/O pin will have no effect on the operation of
to be the C/T output. In the counter mode, the value C/T loaded into
                                                                                the transmitter. MR1 (7) is the bit that allows the receiver to control
CTPU and CTPL by the CPU is counted down to 0. Counting begins
                                                                                I/O0 B. When the receiver controls I/O0 B (or I/O1 B), the meaning
upon receipt of a start counter command. Upon reaching terminal
                                                                                of that pin will be the RTSN function.
count H‘0000’, the counter ready interrupt bit (ISR [3]) is set. The
counter continues counting past the terminal count until stopped by
2005 Nov 01                                                                33


Philips Semiconductors                                                                                                                   Product data sheet
    Dual UART                                                                                                                         SC28L202
Registers of the Arbitrating Interrupt System and Bidding control
ICR – Interrupt Control Register
                  Bits 7:0
                  Upper eight bits of the Arbitration Threshold
This register provides a single 8–bit field called the interrupt                 threshold value) to win interrupt arbitration without requiring the user
threshold for use by the interrupt arbiter. The field is interpreted as a        to explicitly lower the threshold level in the ICR. These bits are the
single unsigned integer. The interrupt arbiter will not generate an              upper seven (8) bits of the interrupt arbitration system. The lower
external interrupt request, by asserting IRQN, unless the value of               three (3) bits represent the channel number.
the highest priority interrupt exceeds the value of the interrupt
threshold. If the highest bidder in the interrupt arbitration is lower           UCIR – Update CIR
than the threshold level set by the ICR, the Current Interrupt                   A command based upon a decode of address 0x61. (UCIR is not a
Register, CIR, will contain 0x’00. Refer to the functional description           register!) A write (the write data is not important; a ‘don’t care’) to
of interrupt generation for details on how the various interrupt source          this ’register’ causes the Current Interrupt Register to be updated
bid values are calculated.                                                       with the value that is winning interrupt arbitration. The register would
                                                                                 be used in systems that polls the interrupt status registers rather
NOTE: While a watch–dog Timer interrupt is pending, the ICR is not               than wait for interrupts. Alternatively, the CIR is normally updated
used and only receiver codes are presented for interrupt arbitration.            during an Interrupt Acknowledge Bus cycle in interrupt driven
This allows receivers with very low count values (perhaps below the              systems.
CIR – Current Interrupt Register
                Bits 7:6                                          Bits 5:1                                        Bits 0
                Type                                              Current byte count/type                         Channel number or C/T number
                00 = Type other than transmit or Receiver         00000 = no interrupt                            0 = Channel A or C/T 0
                                                                  00001 = Change of State                         1 = Channel B or C/T 1
                                                                  00010 = Address Recognition
                                                                  00011 = Xon/Xoff status
                                                                  00100 = Receiver Watch dog
                                                                  00101 = Break change
                                                                  00110 = Counter Timer
                                                                  00111 = Rx Loop Back Error
                01 = Transmit                                     Current count code                              0=A
                11 = Receive w errors                             00000 => At least 1 character                   1=B
                10 = Receive w/o errors                           00001 => At least 16 characters
                                                                  00001 => At least 24 characters
                                                                  .
                                                                  .
                                                                  11101 => At least 240 characters
                                                                  11110 => At least 248 characters
                                                                  11111 => 256 (See also GIBCR)
The Current Interrupt Register is provided to speed up the                       the CIR is updated. For most interrupting sources, the data available
specification of the interrupting condition in the DUART. The CIR is             in the CIR alone will be sufficient to set up a service routine.
updated at the beginning of an interrupt acknowledge bus cycle or in
                                                                                 The CIR may be processed as follows:
response to an Update CIR command. (see immediately above)
Although interrupt arbitration continues in the background, the                      If CIR[7] = 1, then a receiver interrupt is pending and the count is
current interrupt information remains frozen in the CIR until another                CIR[5:1], channel is CIR[0]
IACKN cycle or Update CIR command occurs. The LSBs of the CIR
                                                                                     Else If CIR[6] = 1 then a transmitter interrupt is pending and the
provide part of the addressing for various Global Interrupt registers
                                                                                     count is CIR[5:1], channel is CIR[0]
including the GIBCR, GICR, GITR and the Global RxFIFO and
TxFIFO FIFO. The host CPU need not generate individual                               Else the interrupt is another type, specified in CIR[5:1]
addresses for this information since the interrupt context will remain
                                                                                 NOTE: The GIBCR, Global Interrupting Byte Count Register, may be
stable at the fixed addresses of the Global Interrupt registers until
                                                                                 read to determine an exact character count.
2005 Nov 01                                                                 34


Philips Semiconductors                                                                                                               Product data sheet
   Dual UART                                                                                                                       SC28L202
IVR – Interrupt Vector Register
             Bits 7:0
             8 data bits of the Interrupt Vector (IVR)
The IVR contains the byte that will be placed on the data bus during an IACKN cycle when the GCCR bits (2:1) are set to binary ‘01’. This is the
unmodified form of the interrupt vector.
Modification of the IVR
             Bits 7:3                                    Bits 2:1                                       Bit 0
             Always contains bits (7:3) of the IVR       Will be replaced with current interrupt        Replaced with interrupting channel
                                                         type if IVC field of GCCR = 3                   number if IVC field of GCCR > 1
The table above indicates how the IVR may be modified by the interrupting source. The modification of the IVR as it is presented to the data bus
during an IACK cycle is controlled by the setting of the bits (2:1) in the GCCR (Global Chip Configuration Register).
GICR – Global Interrupting Channel Register
             Bits 7:1                                               Bit 0
             Reserved                                               Channel code
                                                                    0=a
                                                                    1=b
A register associated with the interrupting channel as defined in the CIR. It contains the channel number for the interrupting channel.
GIBCR – Global Interrupting Byte Count Register
             Bits 7:0
             Channel byte count code
             00000001 = 1
             00000010 = 2
             .
             11111111 = 255
             00000000 = 256
A register associated with the interrupting channel as defined in the           ready for transfer to the transmitter or transfer from the receiver. It is
CIR. Its numerical value equals TxEL or RxFL at the time IACKN or               undefined for other types of interrupts
‘Update CIR’ command was issued . The true number of bytes
GITR – Global Interrupting Type Register
 Bit 7:6                       Bit 5                           Bit 4:3         Bit 2:0
 Receiver Interrupt            Transmitter Interrupt           Reserved        Other types
 0x = not receiver             0 = not transmitter             read 0x00       000 = not ‘other’ type                    100 = Rx Watchdog
 10 = with receive errors      1 = transmitter interrupt                       001 = Change of State                     101 = Break Change
 11 = w/o receive errors                                                       010 = Address Recognition Event           110 = Counter Timer
                                                                               011 = Xon/Xoff status                     111 = Rx Loop Back Error
A register associated with the interrupting channel as defined in the CIR. It contains the type of interrupt code for all interrupts.
GRxFIFO – Global RxFIFO Register
            Bits 7:0
            8 data bits of RxFIFO. MSBs set to 0 for 7, 6, 5 bit data
The RxFIFO of the channel indicated in the CIR channel field. Undefined when the CIR interrupt context is not a receiver interrupt. Global
TxFIFO Register
GTxFIFO – Global TxFIFO Register
            Bits 7:0
            8 data bits of TxFIFO. MSBs not used for 7, 6, 5 bit data
The TxFIFO of the channel indicated in the CIR channel field. Undefined when the CIR interrupt context is not a transmitter interrupt. Writing to
the GTxFIFO when the current interrupt is not a transmitter event may result in the characters being transmitted on a different channel than
intended.
2005 Nov 01                                                                 35


Philips Semiconductors                                                                                                                Product data sheet
   Dual UART                                                                                                                       SC28L202
BCRBRK – Bidding Control Register – Break Change, A and B
             Bits 7:0
             MSBs of break change interrupt bid
This register provides the 8 MSBs of the Interrupt Arbitration number for a break change interrupt.
BCRCOS – Bidding Control Register – Change of State, A and B
             Bits 7:0
             MSBs of Change of state detectors (COS) interrupt bid
This register provides the 8 MSBs of the Interrupt Arbitration number for a Change of State, COS, interrupt.
BCRx – Bidding Control Register – Xon/Xoff, A and B
             Bits 7:0
             MSBs of an Xon/Xoff interrupt bid
This register provides the 8 MSBs of the Interrupt Arbitration number for a Xon/Xoff interrupt.
BCRA – Bidding Control Register – Address, A and B
             Bits 7:0
             MSBs of an address recognition event interrupt bid
This register provides the 8 MSBs of the Interrupt Arbitration number for an address recognition event interrupt.
BCR C/T – Bidding Control Register –C/T, 0 and 1
             Bits 7:0
             MSBs of a counter/timer event interrupt bid
This register provides the 8 MSBs of the Interrupt Arbitration number for a counter/timer event interrupt.
BCRLBE – Bidding Control Register – Received Loop Back Error
             Bits 7:0
             MSBs of a received loop back error event interrupt bid
This register provides the 8 MSBs of the Interrupt Arbitration number for the received loop back error interrupt.
Registers of the I/O ports
IPCRL – Input Port Change Register Lower Nibble, A and B (n = A for A, n = B for B)
 Bit 7                 Bit 6               Bit 7                   Bit 6                Bit 3               Bit 2              Bit 1            Bit 0
 ∆I/O3 n               ∆I/O2 n             ∆I/O1 n                 ∆I/O0 n              I/O3 n state        I/O2 n state       I/O1 n state     I/O0 n
 change                change              change                  change                                                                       state
 0 = no change         0 = no change       0 = no change           0 = no change        Reads the actual logic level at the pin.
 1 = change            1 = change          1 = change              1 = change           1 = high level; 0 = low level
This register may be read to determine the current logical level of the I/O pins and examine the output of the change detectors assigned to each
pin. If the change detection is not enabled or if the pin is configured as an output, the associated change field will read b’0.
IPCRU – Input Port Change Register Upper Nibble, A and B (n = A for A, n = B for B)
 Bit 7                 Bit 6               Bit 7                   Bit 6                Bit 3            Bit 2           Bit 1            Bit 0
 ∆I/O7 n change        ∆I/O6 n change      ∆I/O5 n change          ∆I/O4 n change       I/O7 n state     I/0n6 state     I/O5 n state     I/O4 n state
 0 = no change         0 = no change       0 = no change           0 = no change        Reads the actual logic level at the pin.
 1 = change            1 = change          1 = change              1 = change           1 = high level; 0 = low level
This register may be read to determine the current logical level of the I/O pins and examine the output of the change detectors assigned to each
pin. If the change detection is not enabled or if the pin is configured as an output, the associated change field will read b’0.
IPR – Input Port Register, A and B (n = A for A, n = B for B)
 Bits 7:0
 Logical levels of I/O(7:0)n
2005 Nov 01                                                                36


Philips Semiconductors                                                                                                               Product data sheet
    Dual UART                                                                                                                     SC28L202
IPCE – Input Change Detect Enable, A and B (n = A for A, n = B for B)
  Bit 7               Bit 6              Bit 5             Bit 4             Bit 3              Bit 2                Bit 1            Bit 0
  ∆I/O7 n enable      ∆I/O6 n enable     ∆I/O5 n enable    ∆I/O4 n enable    ∆I/O3 n enable     ∆I/O2 n enable       ∆I/O1 n enable   ∆I/O0 n enable
  0 = disable         0 = disable        0 = disable       0 = disable       0 = disable        0 = disable          0 = disable      0 = disable
  1 = enable          1 = enable         1 = enable        1 = enable        1 = enable         1 = enable           1 = enable       1 = enable
IPCE[7:0] bits activate the input change of state detectors. If a pin is configured as an output, the change of state detectors, if enabled, continue
to be active and will show a change of state as the I/P port changes.
I/OPCR 0 – I/O Port Configuration Register
  Bits 7:6                          Bits 5:4                                     Bits 3:2                        Bits 1:0
  I/O3 A control                    I/O2 A control                               I/O1 A control                  I/O0 A control
  00 = GPI / TxC A                  00 = GPI / CT 0 Clock Input                  00 = GPI / CTSN B               00 = GPI / CTSN A
  01 = OPR[3] A                     01 = OPR[2] A / DTRN A                       01 = OPR[1] A                   01 = OPR[0] A
  10 = TxC A (16X) Output           10 = TxC A (1X) Output                       10 –                            10 –
  11 = Reserved                     11 = Reserved                                11 = Reserved                   11 = Reserved
I/OPCR 1 – I/O Port Configuration Register
  Bits 7:6                            Bits 5:4                                   Bits 3:2                        Bits 1:0
  I/O7 A control                      I/O6 A control                             I/O5 A control                  I/O4 A control
  00 = GPI / CT 1 Clock Input         00 = GPI / RxC B / PBRG 1 Clk Input        00 = GPI / TxC B                00 = GPI / RxC A / PBRG 0 Clk Input
  01 = OPR[7] A / DTRN B              01 = OPR[6] A                              01 = OPR[5] A                   01 = OPR[4] A
  10 = TxC B (1X) Output              10 = RxC B (16X) Output                    10 = TxC B (16X) Output         10 = RxC A (16X) Output
  11 = Reserved                       11 = Reserved                              11 = Reserved                   11 = Reserved
I/OPCR 2 – I/O Port Configuration Register
  Bits 7:6                           Bits 5:4                                   Bits 3:2                        Bits 1:0
  I/O3 B control                     I/O2 B control                             I/O1 B control                  I/O0 B control
  00 = GPI /DSRN B                   00 = GPI /DSRN A                           00 = GPI                        00 = GPI
  01 = OPR[3] B                      01 = OPR[2] B                              01 = OPR[1] B / RTSN B          01 = OPR[0] B / RTSN B
  10 = RxC B (1X) Output             10 = RxC A (1X) Output                     10 = Reserved                   10 = Reserved
  11 = C/T 0 Output (open            11 = C/T 1 Output (open drain)             11 = Reserved                   11 = Reserved
  drain)
I/OPCR 3 – I/O Port Configuration Register
  Bits 7:6                           Bits 5:4                                   Bits 3:2                        Bits 1:0
  I/O7 B control                     I/O6 B control                             I/O5 B control                  I/O4 B control
  00 = GPI /RIN B                    00 = GPI /RIN A                            00 = GPI /DCDN B                00 = GPI /DCDN A
  01 = OPR[7] B                      01 = OPR[6] B                              01 = OPR[5] B                   01 = OPR[4] B
  10 =TxINTN B (open drain)          10 =TxINTN A (open drain)                  10 = RxINTN B (open             10 = RxINTN A (open drain)
  11 =reserved                       11 = reserved                              drain)                          11 = reversed
                                                                                11 = reserved
NOTE: Both I/O Port A and B default to input upon a hardware reset to avoid hardware conflicts with I/O direction
The four registers above contain 4, 2 bit fields that set the direction and source for each of the I/O pins associated with the channel. The I/O0 B
or I/O1 B output may be RTSN if MR1[7] is set. It may also signal ‘end of transmission’ if MR2[5] is set. (Please see the descriptions of these
functions under the MR1 and MR2 register descriptions).
The binary settings of the binary 00 combination always configures the I/O pins as ‘inputs’. However the input circuit of the I/O pins are ALWAYS
active. In actuality the binary 00 condition only disable the output driver of the pin. Since the input circuit and the associated change of state
detector is always active the output signal may generate interrupts or drive counters.
This register resets to 0x00 on reset, effectively configuring all I/O pins as inputs. Inputs may be used as RxC, TxC inputs or CTSN and General
Purpose Inputs simultaneously. All inputs are equipped with change detectors that may be used to generate interrupts or can be polled, as
required.
2005 Nov 01                                                                37


Philips Semiconductors                                                                                                           Product data sheet
   Dual UART                                                                                                                   SC28L202
SOPR A and SOPR B – Set the Output Port Bits (OPR A and OPR B)
SOPR [7:0] – Ones in the byte written to this register will cause the corresponding bit positions in the OPR to set to 1. Zeros have no effect. This
allows software to set individual bits with our keeping a copy of the OPR bit configuration. One register for each channel.
                    Bit 7         BIT 6            BIT 5            BIT 4         BIT 3             BIT 2           BIT 1           BIT 0
 Set OPR Bits       OPR 7         OPR 6            OPR 5            OPR 4         OPR 3             OPR 2           OPR 1           OPR 0
                    1=set bit     1=set bit        1=set bit        1=set bit     1=set bit         1=set bit       1=set bit       1=set bit
                    0=no          0=no             0=no             0=no change   0=no change       0=no change     0=no change     0=no
                    change        change           change                                                                           change
ROPR A and ROPR B – Reset ROPR Output Port Bits (OPR A and OPR B)
ROPR [7:0] – Ones in the byte written to the ROPR will cause the corresponding bit positions in the OPR to set to 0. Zeros have no effect. This
allows software to reset individual bits with our keeping a copy of the OPR bit configuration. One register for each channel
                      Bit 7          BIT 6            BIT 5           BIT 4        BIT 3            BIT 2          BIT 1          BIT 0
 Reset OPR            OPR 7          OPR 6            OPR 5           OPR 4        OPR 3            OPR 2          OPR 1          OPR 0
 Bits
                      1=reset bit    1=reset bit      1=reset bit     1=reset bit  1=reset bit      1=reset bit    1=reset bit    1=reset bit
                      0=no change    0=no             0=no            0=no         0=no             0=no           0=no           0=no change
                                     change           change          change       change           change         change
OPR – Output Port Register, A and B (n = A for A, n = B for B)
The output pins (I/O pins) drive the data written to this register.
                  Bit 7           BIT 6             BIT 5              BIT 4         BIT 3             BIT 2           BIT 1          BIT 0
 OPR              I/O7 n          I/O6 n            I/O5 n             I/O4 n        I/O3 n            I/O2 n          I/O1 n         I/O0 n
                  0=Pin High      0=Pin High        0=Pin High         0=Pin High    0=Pin High        0=Pin High      0=Pin High     0=Pin High
                  1=Pin Low       1=Pin Low         1=Pin Low          1=Pin Low     1=Pin Low         1=Pin Low       1=Pin Low      1=Pin Low
This register is set by the SOPR and ROPR above.
2005 Nov 01                                                                38


Philips Semiconductors                                                                                                      Product data sheet
    Dual UART                                                                                                             SC28L202
THE REGISTERS FOR COMPATIBILITY WITH PREVIOUS DUARTS
The purpose of including previous functionality is to allow users to    to C92’ command be issued before calling code written for older
call communications code that may be used in former systems.            devices. This is just recommended. If one wishes to enhance
When the registers in this lower 16–position address space is used      previous code by using Xon/Xoff, for example, there is no restriction
it will revoke programming done in the upper address space where        against it. These registers provide the original functionality of
the addresses are duplicated. If functions have been called from        previous Philips DUARTs: SCN2681, SCN68681, SCC2691,
upper address space that DO NOT exist in the lower address space        SCC68692, SC26C92 and SC28L92.
they will remain active. It is therefore recommended that the ‘Reset
Table 7. SC28L92 Register Addressing READ (RDN = 0) WRITE (WRN = 0)
  Address            READ (RDN = 0)                                     WRITE (WRN = 0)
  0      0  0    0   Mode Register A (MR0 A, MR1 A, MR2 A)              Mode Register A (MR0 A, MR1 A, MR2 A)
  0      0  0    1   Status Register A (SR A)                           Clock Select Register A (CSR A )
  0      0  1    0   Reserved                                           Command Register A (CR A)
  0      0  1    1   Rx Holding Register A (RxFIFO A)                   Tx Holding Register A (TxFIFO A)
  0      1  0    0   Input Port Change Register (IPCR)                  Aux. Control Register (ACR)
  0      1  0    1   Interrupt Status Register (ISR)                    Interrupt Mask Register (IMR)
  0      1  1    0   Counter/Timer Upper (CTPU)                         C/T Upper Preset Register (CTPU)
  0      1  1    1   Counter/Timer Lower (CTPL)                         C/T Lower Preset Register (CTPL)
  1      0  0    0   Mode Register B (MR0 B, MR1 B, MR2 B)              Mode Register B (MR0 B, MR1 B, MR2 B)
  1      0  0    1   Status Register B (SR B)                           Clock Select Register B (CSR B )
  1      0  1    0   Reserved                                           Command Register B (CR B)
  1      0  1    1   Rx Holding Register B (RxFIFO B)                   Tx Holding Register B (TxFIFO B)
  1      1  0    0   IVR or general purpose register                    IVR or general purpose register
  1      1  0    1   Input Port (IPR) I/O(6:0) A                        Output Port Confide. Register (OPCR) I/O(7:2) B
  1      1  1    0   Start Counter Command (C/T 0)                      Set Output Port Bits Command (SOPR) I/O(7:0) B
  1      1  1    1   Stop Counter Command (C/T 0)                       Reset output Port Bits Command (ROPR) I/O(7:0) B
NOTE: The three MR Registers are accessed via the MR Pointer and Commands 0x1n and 0xBn (where n = represents receiver and
transmitter enable bits)
  The following registers are unique for each Channel                    These registers support functions for both Channels
  Mode Register        MRn A          MRn B          R/W                 Input Port Change Register            IPCR              R
  Status Register      SR A           SR B           R only              Auxiliary Control Register            ACR               W
  Clock                CSR A          CSR B          W only              Interrupt Status Register             ISR               R
  Select                                                                 Interrupt Mask Register               IMR               W
  Command              CR A           CR B           W only              Counter Timer Upper Value             CTPU              R
  Register
                                                                         Counter Timer Lower Value             CTPL              R
  Receiver             RxFIFO A       RxFIFO B       R only
  FIFO                                                                   Counter Timer Preset Upper            CTPU              W
  Transmitter          TxFIFO A       TxFIFO B       W only              Counter Timer Preset Lower            CTPL              W
  FIFO                                                                   Input Port Register                   IPR               R
                                                                         Output Configuration Register         OPCR              W
                                                                         Set Output Port                       Bits              W
                                                                         Reset Output Port                     Bits              W
2005 Nov 01                                                          39


Philips Semiconductors                                                             Product data sheet
   Dual UART                                                                     SC28L202
Table 8. Baud Rate Generator Characteristics
Crystal or Clock = 14.7456 MHz
 NORMAL RATE             ACTUAL 16X        ERROR (%)   NORMAL RATE ACTUAL 16X  ERROR (%)
 (BAUD)                  CLOCK (kHz)                   (BAUD)      CLOCK (kHz)
 50                      0.8               0           2400        38.4        0
 75                      1.2               0           4800        76.8        0
 110                     1.759             –0.069      7200        115.2       0
 134.5                   2.153             0.059       9600        153.6       0
 150                     2.4               0           19.2K       307.2       0
 200                     3.2               0           38.4K       614.4       0
 300                     4.8               0           14.4K       230.4       0
 600                     9.6               0           28.8K       460.8       0
 1050                    16.756            –0.260      31.25       500.0       1.6
 1200                    19.2              0           57.6k       921.6       0
 1800                    28.8              0           115.2K      1843.2      0
 2000                    32.056            0.175       230.4K      3686.4      0
 NOTE: Duty cycle of 16X clock is 50% ± 1%
2005 Nov 01                                          40


Philips Semiconductors                                                                                                              Product data sheet
    Dual UART                                                                                                                   SC28L202
REGISTER DESCRIPTIONS Mode Registers
MR0 Mode Register 0 MR0 is accessed by setting the MR pointer to 0 via the command register command B.
                  Bit 7               BIT 6               BIT (5:4)        BIT 3               BIT 2                  BIT 1          BIT 0
 MR0 A            Rx WATCH            RxINT BIT 2         TxINT (1:0)      FIFO Size           BAUD RATE              TEST 2         BAUD RATE
 MR0 B            DOG                 See Tables in       See table #4     0=8                 EXTENDED II            Set to 0       EXTENDED 1
 MR0 B[3:0]       0 = Disable         MR0 description                      1 = 256             0 = Norma                             0 = Normal
 are reserved     1 = Enable                                                                   1 = Extend II                         1 = Extend
MR0[7] This bit controls the receiver watchdog timer. 0 = disable,            MR0[5:4] – Tx interrupt fill level.
1 = enable. When enabled, the watch dog timer will generate a
receiver interrupt if the receiver FIFO has not been accessed within          Table 11. Transmitter FIFO Interrupt Fill Level
64 bit times of the receiver 1X clock. This is used to alert the control
processor that data is in the RxFIFO that has not been read. This
                                                                                           MR0[3] = 0
situation may occur when the byte count of the last part of a                   MR0[5:4]        Interrupt Condition
message is not large enough to generate an interrupt. This control              00              8 bytes empty (Tx EMPTY)
bit is duplicated WCXER(7:6)                                                    01              4 or more bytes empty
MR0[6] – Bit 2 of receiver FIFO interrupt level. This bit along with Bit        10              6 or more bytes empty
6 of MR1 sets the fill level of the 8 byte FIFO that generates the              11              1 or more bytes empty (Tx RDY)
receiver interrupt.
MR0[6] MR1[6] Note that this control is split between MR0 and MR1.            Table 12. Transmitter FIFO Interrupt Fill Level
This is for backward compatibility to the SC2692 and SCN2681.                              MR0[3] = 1
                                                                                MR0[5:4]        Interrupt Condition
Table 9. Receiver FIFO Interrupt Fill Level                                     00              256 bytes empty (Tx EMPTY)
              MR0[3] = 0                                                        01              128 or more bytes empty
 MR0[6] MR1[6]                 Interrupt Condition                              10              192 or more bytes empty
 00                            1 or more bytes in FIFO (Rx RDY)                 11              1 or more bytes empty (Tx RDY)
 01                            3 or more bytes in FIFO                        For the transmitter these bits control the number of FIFO positions
 10                            6 or more bytes in FIFO                        empty when the receiver will attempt to interrupt. After the reset the
                                                                              transmit FIFO has 8 bytes empty. It will then attempt to interrupt as
 11                            8 bytes in FIFO (Rx FULL)
                                                                              soon as the transmitter is enabled. The default setting of the MR0
                                                                              bits (00) condition the transmitter to attempt to interrupt only when it
Table 10. Receiver FIFO Interrupt Fill Level                                  is completely empty. As soon as one byte is loaded, it is no longer
              MR0[3] = 1                                                      empty and hence will withdraw its interrupt request.
 MR0[6] MR1[6]                 Interrupt Condition                            MR0[3] – FIFO Size
 00                            1 or more bytes in FIFO (Rx RDY)               MR0[2:0] – These bits are used to select one of the six–baud rate
 01                            128 or more bytes in FIFO                      groups.
 10                            192 or more bytes in FIFO                      See Table 13 for the group organization.
 11                            256 bytes in FIFO (Rx FULL)                    • 000 Normal mode
For the receiver these bits control the number of FIFO positions              • 001 Extended mode I
empty when the receiver will attempt to interrupt. After the reset the
receiver FIFO is empty. The default setting of these bits cause the
                                                                              • 100 Extended mode II
receiver to attempt to interrupt when it has one or more bytes in it.         Other combinations of MR2[2:0] should not be used
                                                                              NOTE: MR0[3:0] are not used in channel B and should be set to ‘0’.
2005 Nov 01                                                              41


Philips Semiconductors                                                                                                                     Product data sheet
   Dual UART                                                                                                                            SC28L202
MR1 Mode Register 1
              Bit 7              BIT 6               BIT 5              Bit (4:3)                           BIT 2                Bits (1:0)
 MR1 A        Rx                 RxINT               ERROR              PARITY MODE                         PARITY               BITS PER
 MR1 B        CONTROLS           BIT 1               MODE                                                   TYPE                 CHARACTER
              RTS
                                                                        00 = With Parity                                         00 = 5
              0 = No             0 = RxRDY           0 = Char           01 = Force Parity                   0 = Even             01 = 6
              1 = Yes            1 = FFULL           1 = Block          10 = No Parity                      1 = Odd              10 = 7
                                                                        11 = Multi–drop Mode                                     11 = 8
NOTE: * In block error mode the block error conditions must be cleared by using the error reset command (command 0x40) or a receiver reset.
MR1 A is accessed when the Channel A MR pointer points to MR1.                    mode, the status provided in the SR for these bits is the
The pointer is set to MR1 by RESET or by a ‘set pointer’ command                  accumulation (logical–OR) of the status for all characters coming to
applied via CR command 1. After reading or writing MR1 A, the                     the top of the FIFO since the last ‘reset error’ command for Channel
pointer will point to MR2 A.                                                      A was issued.
MR1 A[7] – Channel A Receiver Request–to–Send Control (Flow                       MR1 A[4:3| – Channel A Parity Mode Select
Control)                                                                          If ‘with parity’ or ‘force parity’ is selected a parity bit is added to the
This bit controls the deactivation of the RTSN A output (I/O0 B) by               transmitted character and the receiver performs a parity check on
the receiver. This output is normally asserted by setting OPR[0]B                 incoming data
and negated by resetting OPR[0]B.
                                                                                  MR1 A[4:3] = 11 selects Channel A to operate in the special
MR1 A[7] = 1 causes RTSN A to be negated (I/O0 B is driven to a ‘1’               multi–drop mode described in the Operation section.
[VCC]) upon receipt of a valid start bit if the Channel A FIFO is full.
This is the beginning of the reception of the ninth byte. If the FIFO is          MR1 A[2] – Channel A Parity Type Select
not read before the start of the tenth byte, an overrun condition will            Selects the parity type (odd or even) if the ‘‘with parity’ mode is
occur and the tenth byte will be lost. However, the bit in OPR[0] is              programmed by MR1 A[4:3], and the polarity of the forced parity bit if
not reset and RTSN A will be asserted again when an empty FIFO                    the ‘force parity’ mode is programmed; no effect if ‘no parity’ is
position is available. This feature can be used for flow control to               programmed. In the special multi–drop mode it selects the polarity of
prevent overrun in the receiver by using the RTSN A output signal to              the A/D bit.
control the CTSN input of the transmitting device.                                MR1 A[1:0] – Channel A Bits Per Character Select
MR1[6] – Receiver interrupt control bit 1. See description under                  This field selects the number of data bits per character to be
MR0[6].                                                                           transmitted and received. The character length does not include the
                                                                                  start, parity, and stop bits.
MR1 A[5] – Channel A Error Mode Select
                                                                                  MR2 A is accessed when the Channel A MR pointer points to MR2,
This bit select the operating mode of the three FIFOed status bits
                                                                                  which occurs after any access to MR1 A. Accesses to MR2 A do not
(FE, PE, received break) for Channel A. In the ‘character’ mode,
                                                                                  change the pointer.
status is provided on a character–by–character basis; the status
applies only to the character at the top of the FIFO. In the ‘block’
MR2 Mode Register 2
             Bit 7     BIT 6         BIT 5                     BIT 4             BIT 3           BIT 2               BIT 1            BIT 0
 MR2 A       CHANNEL MODE            Tx CONTROLS RTS           CTS               STOP BIT LENGTH
 MR2 B                                                         ENABLE Tx         NOTE: Add 0.5 to binary codes 0 – 7 for 5 bit character lengths.
             00 = Normal             0 = No                    0 = No            0 = 0.563 4 = 0.813 8 = 1.563 C = 1.813
             01 = Auto–Echo          1 = Yes                   1 = Yes           1 = 0.625 5 = 0.875 9 = 1.625 D = 1.875
             10 = Local loop                                                     2 = 0.688 6 = 0.938 A = 1.688 E = 1.938
             11 = Remote loop                                                    3 = 0.750 7 = 1.000 B = 1.750 F = 2.000
NOTE: *Add 0.5 to values shown for 0 – 7 if channel is programmed for 5 bits/char.
See description in the previous MR2 description
2005 Nov 01                                                                  42


Philips Semiconductors                                                                                                                  Product data sheet
    Dual UART                                                                                                                        SC28L202
SR Status Register
                   Bit 7           BIT 6            BIT 5            BIT 4              BIT 3             BIT 2              BIT 1          BIT 0
  SR A             RECEIVED        FRAMING          PARITY           OVERRUN            TxEMT             TxRDY              FFULL          RxRDY
  SR B             BREAK*          ERROR*           ERROR*           ERROR
                   0 = No          0 = No           0 = No           0 = No             0 = No            0 = No             0 = No         0 = No
                   1 = Yes         1 = Yes          1 = Yes          1 = Yes            1 = Yes           1 = Yes            1 = Yes        1 = Yes
  NOTE: *These status bits are appended to the corresponding data character in the receive FIFO. A read of the status provides these bits
  (7:5) from the top of the FIFO together with bits (4:0). These bits are cleared by a ‘reset error status’ command. In character mode they are
  discarded when the corresponding data character is read from the FIFO. In block error mode, the error–reset command (command 4x or
  receiver reset) must used to clear block error conditions
SR A[7] – Received Break
Channel A Received Break. This bit indicates that an all zero                   SR A[3] – Channel A Transmitter Empty (TxEMT A)
character of the programmed length has been received without a                  This bit will be set when the transmitter under runs, i.e., both the
stop bit. Only a single FIFO position is occupied when a break is               TxEMT and TxRDY bits are set. This bit and TxRDY are set when
received: further entries to the FIFO are inhibited until the RxD A line        the transmitter is first enabled and at any time it is re–enabled after
returns to the marking state for at least one–half a bit time two               either (a) reset, or (b) the transmitter has assumed the disabled
successive edges of the internal or external 1X clock. This will                state. It is always set after transmission of the last stop bit of a
usually require a high time of one X1 clock period or 3 X1 edges                character if no character is in the THR awaiting transmission.
since the clock of the controller is not synchronous to the X1 clock.
                                                                                It is reset when the THR is loaded by the CPU, a pending
When this bit is set, the Channel A ‘change in break’ bit in the ISR            transmitter disable is executed, the transmitter is reset, or the
(ISR[2]) is set. ISR[2] is also set when the end of the break                   transmitter is disabled while in the under run condition.
condition, as defined above, is detected.
                                                                                SR A[2] – Channel A Transmitter Ready (TxRDY A)
The break detect circuitry can detect breaks that originate in the              This bit, when set, indicates that the transmit FIFO is not full and
middle of a received character. However, if a break begins in the               ready to be loaded with another character. This bit is cleared when
middle of a character, it must persist until at least the end of the next       the transmit FIFO is loaded by the CPU and there are (after this
character time in order for it to be detected.                                  load) no more empty locations in the FIFO. It is set when a
This bit is reset by command 4 (0100) written to the command                    character is transferred to the transmit shift register. TxRDY A is
register or by receiver reset.                                                  reset when the transmitter is disabled and is set when the
                                                                                transmitter is first enabled. Characters loaded to the TxFIFO while
SR A[6] – Channel A Framing Error
                                                                                this bit is 0 will be lost. This bit has different meaning from ISR[0].
This bit, when set, indicates that a stop bit was not detected when
the corresponding data character in the FIFO was received. The                  SR A[1] – Channel A FIFO Full (FFULL A)
stop bit check is made in the middle of the first stop bit position.            This bit is set when a character is transferred from the receive shift
                                                                                register to the receive FIFO and the transfer causes the FIFO to
SR A[5] – Channel A Parity Error
                                                                                become full, i.e., all eight FIFO positions are occupied. It is reset
This bit is set when the ‘with parity’ or ‘force parity’ mode is
                                                                                when the CPU reads the receive FIFO. If a character is waiting in
programmed and the corresponding character in the FIFO was
                                                                                the receive shift register because the FIFO is full, FFULL A will not
received with incorrect parity.
                                                                                be reset when the CPU reads the receive FIFO. This bit has
In the special multi–drop mode the parity error bit stores the receive          different meaning from ISR1 when MR1 6 is programmed to a ‘1’.
A/D (Address/Data) bit.
                                                                                SR A[0] – Channel A Receiver Ready (RxRDY A)
SR A[4] – Channel A Overrun Error                                               This bit indicates that a character has been received and is waiting
This bit, when set, indicates that one or more characters in the                in the FIFO to be read by the CPU. It is set when the character is
received data stream have been lost. It is set upon receipt of a new            transferred from the receive shift register to the FIFO and reset
character when the FIFO is full and a character is already in the               when the CPU reads the receive FIFO, only if (after this read) there
receive shift register waiting for an empty FIFO position. When this            are no more characters in the FIFO.
occurs, the character in the receive shift register (and its break
detect, parity error and framing error status, if any) is lost.                 SR B – Channel B Status Register
                                                                                The bit definitions for this register are identical to the bit definitions
This bit is cleared by a ‘reset error status’ command.                          for SR A, except that all status applies to the Channel B receiver
                                                                                and transmitter and the corresponding inputs and outputs.
2005 Nov 01                                                                 43


Philips Semiconductors                                                                                                             Product data sheet
    Dual UART                                                                                                                   SC28L202
CSR A – Channel A Clock Select Register CSR A [7:4] – Channel A Receiver Clock Select
This field selects the baud rate clock for the Channel A receiver. The field definition is shown in Table 13.
CSR Clock Select Register
                           Bit 7     BIT 6            BIT 5          BIT 4            BIT 3              BIT 2           BIT 1            BIT 0
  CSR A & CSR B            RECEIVER CLOCK SELECT                                      TRANSMITTER CLOCK SELECT
                           See Text and Table 13                                      See Text and Table 13
Table 13. Baud Rate (Base on a 14.7456 MHz crystal clock)
                    MR0[0] = 0 (Normal Mode)                 MR0[0] = 1 (Extended Mode I)               MR0[2] = 1 (Extended Mode II)
  CSR A [7:4]       ACR[7] = 0          ACR[7] = 1           ACR[7] = 0            ACR[7] = 1           ACR[7] = 0             ACR[7] = 1
  0000              50                  75                   300                   450                  4,800                  7,200
  0001              110                 110                  110                   110                  880                    880
  0010              134.5               134.5                134.5                 134.5                1,076                  1,076
  0011              200                 150                  1200                  900                  19.2K                  14.4K
  0100              300                 300                  1800                  1800                 28.8K                  28.8K
  0101              600                 600                  3600                  3600                 57.6K                  57.6K
  0110              1,200               1,200                7200                  7,200                115.2K                 115.2K
  0111              1,050               2,000                1,050                 2,000                1,050                  2,000
  1000              2,400               2,400                14.4K                 14.4K                57.6K                  57.6K
  1001              4,800               4,800                28.8K                 28.8K                4,800                  4,800
  1010              7,200               1,800                7,200                 1,800                57.6K                  14.4K
  1011              9,600               9,600                57.6K                 57.6K                9,600                  9,600
  1100              38.4K               19.2K                230.4K                115.2K               38.4K                  19.2K
  1101              Timer               Timer                Timer                 Timer                Timer                  Timer
  1110              I/O4 A–16X          I/O4 A–16X           I/O4 A–16X            I/O4 A–16X           I/O4 A–16X             I/O4 A–16X
  1111              I/O4 A–1X           I/O4 A–1X            I/O4 A–1X             I/O4 A–1X            I/O4 A–1X              I/O4 A–1X
NOTE: The receiver clock is always a 16X clock except for CSR A [7:4] = 1111.
CSR A [3:0] – Channel A EXTERNAL Transmitter Clock Select                     The receiver clock is always a 16X clock except for
This field selects the baud rate clock for the Channel A transmitter.         CSR B[7:4] = 1111.
The field definition is as shown in Table 13, except as follows:
                                                                              CSR B [3:0] – Channel B Transmitter Clock Select
  CSR A [3:0]            ACR[7] = 0            ACR[7] = 1                     This field selects the baud rate clock for the Channel B transmitter.
  1110                   I/O3 A–16X            I/O3 A–16X                     The field definition is as shown in Table 13, except as follows:
  1111                   I/O3 A–1X             I/O3 A–1X                       CSR B [3:0]            ACR[7] = 0             ACR[7] = 1
The transmitter clock is always a 16X clock except for                         1110                   I/O5 A–16X             I/O5 A–16X
CSR[3:0] = 1111.                                                               1111                   I/O5 A–1X              I/O5 A–1X
CSR B [7:4] – Channel B Receiver Clock Select                                 The transmitter clock is always a 16X clock except for
This field selects the baud rate clock for the Channel B receiver. The        CSR B[3:0] = 1111.
field definition is as shown in Table 13, except as follows:
  CSR B [7:4]            ACR[7] = 0             ACR[7] = 1
  1110                   I/O6 A–16X             I/O6 A–16X
  111                    I/O6 A–1X              I/O6 A–1X
Rx FIFO Register. For characters shorter than 8 bits the unused bits are set to zero
               Bit 7             BIT 6             BIT 5           BIT 4             BIT 3             BIT 2           BIT 1          BIT 0
               Bits of the received data characters.
Tx FIFO register. For characters shorter than 8 bits the unused bits are set to zero
               Bit 7             BIT 6             BIT 5           BIT 4             BIT 3             BIT 2           BIT 1          BIT 0
               Bits of the data characters to be transmitted
2005 Nov 01                                                              44


Philips Semiconductors                                                                                                                 Product data sheet
     Dual UART                                                                                                                      SC28L202
CR A and B Command Register
CR, one for each channel, controls the channel commands and enables/disables the receiver and transmitter. Commands may be to the upper
and lower four bits in the same bus cycle. If both enable and disable bits are set to 1 in the lower four bits a disable will result.
CR Command Register
                    Bit 7           BIT 6            BIT 5             BIT 4      BIT 3               BIT 2             BIT 1               BIT 0
  CR A &CR B        MISCELLANEOUS COMMANDS                                        Disable Tx          Enable Tx         Disable Rx          Enable Rx
                    See Text of Channel Command Register                          1 = Yes             1 = Yes           1 = Yes             1 = Yes
                                                                                  0 = No              0 = No            0 = No              0 = No
NOTE: Access to the miscellaneous commands should be separated by 3 X1 clock edges. A disabled transmitter cannot be loaded.
COMMAND REGISTER TABLE A and B
Commands 0xE, 0xF (marked with *) are global and exist only in channel A’s register space.
  Channel Command Code             Channel Command                           Channel Command Code             Channel Command
  CR[7:4]                          Description                               CR[7:4]                          Description
  0000                             NOP                                       1000                             Assert RTSN (I/O0 B or I/O1 B)
  0001                             Set MR pointer to 1                       1001                             Negate RTSN (I/O0 B or I/O1 B)
  0010                             Reset Receiver                            1010                             Set C/T Receiver time–out mode on
  0011                             Reset Transmitter                         1011                             Set MR pointer to 0
  0100                             Reset Error Status                        1100                             Set C/T Receiver time–out mode off
  0101                             Reset Break Change Interrupt              1101                             Block Error Status on RxFIFO load
  0110                             Begin Transmit Break                      1110                             • Power Down Mode On
  0111                             End Transmit Break                        1111                             • Disable Power Down Mode
• 0000 No command.                                                                The transmitter must be enabled to start a break.
                                                                                  • 0111 Stop break. The TxD line will go high (marking) within two bit
• 0001 set MR pointer to 1                                                          times. TxD will remain high for one bit time before the next
• 0010 Reset receiver. Immediately resets the receiver as if                        character is transmitted.
    hardware reset had been applied. The receiver is reset and the               • 1000 Assert RTSN. Causes the RTSN output to be asserted (low).
    FIFO pointer is reset to the first location effectively discarding all
    unread characters in the FIFO.                                                • 1001 Negate RTSN. Causes the RTSN output to be negated
• 0011 Reset transmitter. Immediately resets the transmitter as if a                (high).
    hardware reset had been applied. The transmitter is reset and the                 NOTE: The two commands above actually reset and set,
    FIFO pointer is reset to the first location effectively discarding all            respectively, the I/O0 B or I/O1 B pin associated WITH the
    untransmitted characters in the FIFO.                                             OPR register.
• 0100 Reset error status. Clears the received break, parity error,               • 1010 Set C/T Receiver time out mode on. The receiver in this
    framing error, and overrun error bits in the status register                    channel will restart the C/T as reach receive character is
    (SR[7:4]). I                                                                    transferred from the shift register to the RxFIFO. The C/T is
It is used in either character or block mode. In block mode it would                placed in the Counter Mode, the Start/Stop Counter commands
normally be used after the block is read.                                           are disabled, the counter is stopped and the Counter Ready bit,
                                                                                    ISR(3), is reset.
• 0101 Reset break change interrupt. Causes the break detect
    change bit in the interrupt status register (ISR[2]) to be cleared to         • 1011 Set MR Pointer to 0
    zero.                                                                         • 1100 Set C/T Receiver time out mode off
• 0110 Start break. Forces the TxD output low (spacing). If the                   • 1101 Block error status accumulation on FIFO entry. Allows the
    transmitter is empty, the start of the break condition will be
                                                                                    ‘received break’, ‘framing error’ and ‘parity error’ bits to be set as
    delayed up to two bit times. If the transmitter is active and the
                                                                                    the received character is loaded to the RxFIFO. (normally these
    TxFIFO is empty then the break begins when transmission of the
                                                                                    bits are set on reading of the data from the RxFIFO) Setting this
    current character is completed. If there are characters in the
                                                                                    mode can give information about error data up to 256 bytes earlier
    TxFIFO, the start of break is delayed until all characters presently
                                                                                    than the normal mode. However it clouds the ability to know
    in the TxFIFO and any subsequent characters loaded have been
                                                                                    precisely which byte(s) are in error.
    transmitted. (Tx Idle must be true before break begins).
                                                                                  • 1110 Power Down Mode On
                                                                                  • 1111 Disable Power Down Mode
2005 Nov 01                                                                  45


Philips Semiconductors                                                                                                                   Product data sheet
    Dual UART                                                                                                                         SC28L202
IPCR Input Port Configuration Register
                     Bit 7                BIT 6              BIT 5              BIT 4              BIT 3         BIT 2          BIT 1           BIT 0
 IPCR                Delta                Delta              Delta              Delta              I/O 3A        I/O 2A         I/O 1A          I/O 0A
                     I/O 3A               I/O 2A             I/O 1A             I/O 0A
                     0 = no change        0 = no change      0 = no change      0 = no change      0 = low       0 = low        0 = low         0 = low
                     1 = change           1 = change         1 = change         1 = change         1 = High      1 = High       1 = High        1 = High
IPCR [7:4] I/03A, I/O2 A, I/O1 A, I/O0 A Change–of–State                            IPCR [3:0] I/O3 A, I/O2 A, I/O1 A, I/O0 A logical level of I/O pin.
These bits are set when a change–of–state, as defined in the input                  These bits provide the current state of the respective inputs. The
port section of this data sheet, occurs at the respective input pins.               information is unlatched and reflects the state of the input pins at the
They are cleared when the IPCR is read by the CPU. A read of                        time the IPCR is read.
the IPCR also clears ISR [7], the input change bit in the interrupt
status register. The setting of these bits can be programmed to
generate an interrupt to the CPU.
ACR Auxiliary Control Register
                      Bit 7           BIT 6      BIT 5       BIT 4     BIT 3                 BIT 2                BIT 1                 BIT 0
                      BRG SET         Counter Timer Mode               Delta                 Delta                Delta                 Delta
 ACR                  Select          and                              I/O3 A interrupt      I/O2 A interrupt     I/O1 A interrupt      I/O0 A interrupt
                                      clock source select              enable                enable               enable                enable
                      0 = set 1       See Table 14                     0 = off               0 = off              0 = off               0 = off
                      1 = set 2                                        1 = enabled           1 = enabled          1 = enabled           1 = enabled
ACR[7] – Baud Rate Generator Set Select                                             Table 14. ACR 6:4 Field Definition
This bit selects one of two sets of baud rates to be generated by the
                                                                                      ACR(6:4)     MODE       CLOCK SOURCE
BRG and it effects both channels. (see Table 13).
                                                                                      000          Counter    External (I/02A)
ACR[6:4] – Counter/Timer Mode And Clock Source Select
                                                                                      001          Counter    TxC A – 1X clock of Channel A
This field selects the operating mode of the counter/timer and its
                                                                                                              transmitter
clock source as shown in Table 14.
                                                                                      010          Counter    TxC B – 1X clock of Channel B
ACR[3:0] – I/O3 A, I/O2 A, I/O1 A, I/O0 A Change-of-State                                                     transmitter
Interrupt Enable                                                                      011          Counter     (X1/Sclk) clock divided by 16
This field selects which bits of the input port change register (IPCR)
cause the input change bit in the interrupt status register (ISR [7]) to              100          Timer      External (I/O 2A)
be set. If a bit is in the ‘on’ state the setting of the corresponding bit            101          Timer      External (I/O2 A) divided by 16
in the IPCR will also result in the setting of ISR[7], which results in               110          Timer      Crystal or external clock (X1/Sclk)
the generation of an interrupt output if IMR[7] = 1. If a bit is in the
‘off’ state, the setting of that bit in the IPCR has no effect on ISR[7].             111          Timer       (X1/Sclk) clock divided by 16
                                                                                      NOTE: The timer mode generates a square wave.
2005 Nov 01                                                                    46


Philips Semiconductors                                                                                                                 Product data sheet
    Dual UART                                                                                                                       SC28L202
ISR – Interrupt Status Register
This register provides the status of all potential interrupt sources. The contents of this register are masked by the Interrupt Mask Register (IMR).
If a bit in the ISR is a ‘1’ and the corresponding bit in the IMR is also a ‘1’ then INTRN output will be asserted (Low). If the corresponding bit in
the IMR is a zero the state of the bit in the ISR has no effect on the INTRN output. Note that the IMR does not mask the reading of the ISR – the
true status will be provided regardless of the contents of the IMR. The contents of this register are initialized to H‘00’ when the DUART is reset.
  ISR      Bit 7               BIT 6           BIT 5             BIT 4               BIT 3              BIT 2            BIT 1            BIT 0
           INPUT               DELTA           RxRDY/            TxRDY B             Counter            Delta            RxRDY/           TxRDY A
           PORT                Break B         FFULL B                               Ready              Break A          FFULL A
           CHANGE
           0=not enabled       0=not enabled   0=not enabled     0=not enabled       0=not enabled      0=not enabled    0=not enabled    0=not enabled
           1=enabled           1=enabled       1=enabled         1=enabled           1=enabled          1=enabled        1=enabled        1=enabled
ISR[7] – Input Port Change Status                                                 In the timer mode, this bit is set once each cycle of the generated
This bit is a ‘1’ when a change–of–state has occurred at the                      square wave (every other time that the counter/timer reaches zero
I/O(3:0)A or B inputs and that event has been selected to cause an                count). The bit is reset by a stop counter command. The command,
interrupt by the programming of ACR[3:0]. The bit is cleared when                 however, does not stop the counter/timer.
the CPU reads the IPCR.
                                                                                  ISR[2] – Channel A Change in Break
ISR[6] – Channel B Change In Break                                                This bit, when set, indicates that the Channel A receiver has
This bit, when set, indicates that the Channel B receiver has                     detected the beginning or the end of a received break. It is reset
detected the beginning or the end of a received break. It is reset                when the CPU issues a Channel A ‘reset break change interrupt’
when the CPU issues a Channel B ‘reset break change interrupt’                    command.
command.
                                                                                  ISR[1] – Rx A Interrupt
ISR[5] – Rx B Interrupt                                                           This bit indicates that the channel A receiver is interrupting
This bit indicates that the channel B receiver is interrupting                    according to the fill level programmed by the MR0 and MR1
according to the fill level programmed by the MR0 and MR1                         registers. This bit has a different meaning than the receiver
registers. This bit has a different meaning than the receiver                     ready/full bit in the status register.
ready/full bit in the status register.
                                                                                  ISR[0] – Tx A Interrupt
ISR[4] – Tx B Interrupt                                                           This bit indicates that the channel A transmitter is interrupting
This bit indicates that the channel B transmitter is interrupting                 according to the interrupt level programmed in the MR0[5:4] bits.
according to the interrupt level programmed in the MR0[5:4] bits.                 This bit has a different meaning than the Tx RDY bit in the status
This bit has a different meaning than the Tx RDY bit in the status                register.
register.
ISR[3] – Counter Ready.
In the counter mode, this bit is set when the counter reaches
terminal count and is reset when the counter is stopped by a stop
counter command.
2005 Nov 01                                                                  47


Philips Semiconductors                                                                                                               Product data sheet
   Dual UART                                                                                                                      SC28L202
IMR – Interrupt Mask Register
The programming of this register selects which bits in the ISR causes an interrupt output. If a bit in the ISR is a ‘1’ and the corresponding bit in
the IMR is also a ‘1’ the INTRN output will be asserted. If the corresponding bit in the IMR is a zero, the state of the bit in the ISR has no effect
on the INTRN output. Note that the IMR does not mask the programmable interrupt outputs I/O3 B–I/O7 B or the reading of the ISR.
 IMR            Bit 7             BIT 6             BIT 5            BIT 4           BIT 3          BIT 2             BIT 1             BIT 0
                INPUT PORT        Delta             RxRDY/           TxRDY B         Counter        Delta             RxRDY/            TxRDY A
                CHANGE            Break B           FFULL B                          Ready          Break A           FFULL A
                0=not             0=not             0=not            0=not           0=not          0=not             0=not             0=not
                enabled           enabled           enabled          enabled         enabled        enabled           enabled           enabled
                1=enabled         1=enabled         1=enabled        1=enabled       1=enabled      1=enabled         1=enabled         1=enabled
CTPU Counter Timer Preset Upper (Counter/Timer 0)
 CPTU         Bit 7             BIT 6             BIT 5            BIT 4            BIT 3          BIT 2             BIT 1             BIT 0
              The upper eight (8) bits for the 16 bit counter timer preset register
CTPL Counter –Timer Preset Lower (Counter/Timer 0)
 CTPL         Bit 7             BIT 6             BIT 5            BIT 4            BIT 3          BIT 2             BIT 1             BIT 0
              The lower eight (8) bits for the 16 bit counter timer preset register
CTVU Counter Timer Value Upper (Counter/Timer 0)
 CPVL         Bit 7             BIT 6             BIT 5            BIT 4            BIT 3          BIT 2             BIT 1             BIT 0
              The lower eight (8) bits for the 16 bit counter timer value
CTVL Counter –Timer Value Lower (Counter/Timer 0)
 CTVL         Bit 7             BIT 6             BIT 5            BIT 4            BIT 3          BIT 2             BIT 1             BIT 0
              The lower eight (8) bits for the 16 bit counter timer value register
Only the counter/timer 0 is available in the low order 16–position address map. Issuing the start command loads the C/T with the preset value.
The Stop command resets the C/T ready bit in the ISR (Interrupt status Register) and captures the C/T value in the output latches of the C/T. In
the special time out mode the start and stop commands are ignored. The ‘start command is executed by a read at address 0xE; the stop at 0xF.
IVR Interrupt Vector register in 68K mode and General purpose read write register in the x86 mode
 IVR          Bit 7             BIT 6             BIT 5            BIT 4            BIT 3          BIT 2             BIT 1             BIT 0
              The eight (8) bits of the interrupt vector in the 68K mode.
IPR Input Port Register I/O(6:0) A
 IPR          Bit 7             BIT 6              BIT 5            BIT 4            BIT 3            BIT 2              BIT 1             BIT 0
              Logical levels or the I/O[6:0] A, Bit 7 read as ‘1’
2005 Nov 01                                                                 48


Philips Semiconductors                                                                                                          Product data sheet
    Dual UART                                                                                                               SC28L202
OPCR Output Port Configuration Register. Controls [7:2] B
             Bit 7              BIT 6            BIT 5                  BIT 4                       BIT (3:2)                BIT (1:0)
             I/O7 B             I/O6 B           I/O5 B                 I/O4 B                      I/O3 B                   I/O2 B
             0 = OPR[7]         0 = OPR[6]       0 = OPR[5]             0 = OPR[4]                  00 = OPR[3]              00 = OPR[2]
             1 = Tx RDY B       1 = Tx RDY A     1 = Rx RDY / FFULL B   1 = Rx RDY / FFULL A        01 = C/T OUTPUT          01 = TxC A(16X)
                                                                                                    10 = TxC B(1X)           10 = TxC A(1X)
                                                                                                    11 = RxC B(1X)           11 = RxC A(1X)
NOTE: I/O0 B and I/O1 B output OPR(0) and OPR(1) respectively.               open–drain output. Note that this output is not masked by the
Under program control of MR1 and MR2 the signals RTSN A for                  contents of the IMR.
I/O0 B and RTSN B for I/O1 B may be assigned.
                                                                           OPCR[3:2] – This bit programs the I/O3 B output to provide one of
OPCR[7] – This bit programs the I/O7 B output to provide one of the        the following:
following:
                                                                           • 00 The complement of OPR[3].
• 0 The complement of OPR[7].
                                                                           • 01 The counter/timer output, in which case I/O3 acts as an
• 1 The Channel B transmitter interrupt output which is the                  open–drain output. In the timer mode, this output is a square wave
   complement of ISR[4]. When in this mode I/O7 acts as an open–             at the programmed frequency. In the counter mode, the output
   drain output. Note that this output is not masked by the contents         remains high until terminal count is reached, at which time it goes
   of the IMR.                                                               low. The output returns to the high state when the counter is
                                                                             stopped by a stop counter command. Note that this output is not
OPCR[6] – This bit programs the I/O6 B output to provide one of the
                                                                             masked by the contents of the IMR.
following:
• 0 The complement of OPR[6].                                              • 10 The 1X clock for the Channel B transmitter that shifts the
                                                                             transmitted data. If data is not being transmitted, a free running 1X
• 1 The Channel A transmitter interrupt output which is the                  clock is output.
                                                                           • 11 The 1X clock for the Channel B receiver that samples the
   complement of ISR[0]. When in this mode I/O6 acts as an open–
   drain output. Note that this output is not masked by the contents
   of the IMR.                                                               received data. If data is not being received, a free running 1X
                                                                             clock is output.
OPCR[5] – This bit programs the I/O5 B output to provide one of the
following:                                                                 OPCR[1:0] – This field programs the I/O2 B output to provide one of
• 0 The complement of OPR[5].                                              the following:
                                                                           • 00 The complement of OPR[2].
• 1 The Channel B receiver interrupt output which is the
   complement of ISR[5]. When in this mode I/O5 acts as an                 • 01 The 16X clock for the Channel A transmitter. This is the clock
   open–drain output. Note that this output is not masked by the             selected by CSR A [3:0], and will be a 1X clock if CSR A [3:0] =
   contents of the IMR.                                                      1111.
OPCR[4] – This field programs the I/O4 B output to provide one of
                                                                           • 10 The 1X clock for the Channel A transmitter that shifts the
                                                                             transmitted data. If data is not being transmitted, a free running 1X
the following:
                                                                             clock is output.
• 0 The complement of OPR[4].
                                                                           • 11 The 1X clock for the Channel A receiver that samples the
• 1 The Channel A receiver interrupt output which is the                     received data. If data is not being received, a free running 1X
   complement of ISR[1]. When in this mode I/O4 acts as an                   clock is output.
2005 Nov 01                                                           49


Philips Semiconductors                                                                                                             Product data sheet
   Dual UART                                                                                                                    SC28L202
SOPR – Set Bits in the OPR
Ones in the byte written to this register will cause the corresponding bit positions in the OPR to set to 1. Zeros have no effect. This allows
software to set individual bits without keeping a copy of the OPR bit configuration.
 Set OPR         Bit 7             BIT 6           BIT 5           BIT 4            BIT 3           BIT 2            BIT 1            BIT 0
 Bits
                 I/O7 B            I/O6 B          I/O5 B          I/O4 B           I/O3 B          I/O2 B           I/O1 B           I/O0 B
                 1=set bit         1=set bit       1=set bit       1=set bit        1=set bit       1=set bit        1=set bit        1=set bit
                 0=no change       0=no change     0=no change     0=no change      0=no change     0=no change      0=no change      0=no change
ROPR – Reset Bits in the OPR
Ones in the byte written to the ROPR will cause the corresponding bit positions in the OPR to set to 0. Zeros have no effect. This allows
software to reset individual bits with our keeping a copy of the OPR bit configuration.
 Reset OPR           Bit 7             BIT 6           BIT 5          BIT 4            BIT 3          BIT 2            BIT 1           BIT 0
 Bits
                     I/O7 B            I/O6 B          I/O5 B         I/O4 B           I/O3 B         I/O2 B           I/O1 B          I/O0 B
                     1=reset bit       1=reset bit     1=reset bit    1=reset bit      1=reset bit    1=reset bit      1=reset bit     1=reset bit
                     0=no change       0=no change     0=no change    0=no change      0=no change    0=no change      0=no change     0=no change
OPR Output Port Register
The bits in the OPR register are controlled by the use of the SOPR and ROPR commands. The output pins (OP pins) drive the compliment of
the data stored in this register.
 OPR               Bit 7             BIT 6           BIT 5           BIT 4            BIT 3          BIT 2            BIT 1           BIT 0
                   I/O7 B            I/O6 B          I/O5 B          I/O4 B           I/O3 B         I/O2 B           I/O1 B          I/O0 B
                   0=Pin High        0=Pin High      0=Pin High      0=Pin High       0=Pin High     0=Pin High       0=Pin High      0=Pin High
                   1=Pin Low         1=Pin Low       1=Pin Low       1=Pin Low        1=Pin Low      1=Pin Low        1=Pin Low       1=Pin Low
2005 Nov 01                                                               50


Philips Semiconductors                                                                                                           Product data sheet
   Dual UART                                                                                                                  SC28L202
REGISTER MAPS
The registers of the SC28L202 are loosely partitioned into two               most part, differences in address between channel A and B differ by
groups: those used in controlling data channels and those used in            0x08.
handling the actual data flow and status. Below is shown the general
                                                                             The first address from 0x00 to 0x0F refer to the legacy code for
configuration of all the register addressed. The ‘Register Map
                                                                             previous Philips/Signetics two channel UARTs (DUARTs). This
Summary’ shows the configuration of the lower four bits of the
                                                                             feature is directed to the SC26C92. That part has 89-byte FIFOs,
address that is the same for the individual UARTs. It also shows
                                                                             but powers up to look like it has a 3-byte receiver FIFO and a 1-byte
the addresses for the several in the address space of UART A and
                                                                             transmitter FIFO. Other control registers structures of legacy parts
UART B that apply to the total chip configuration. The ‘Register Map
                                                                             are compatible back to the SCN2681.
Detail’ shows the use of every address in the 8–bit address space.
                                                                             Registers that configure the whole chip are denoted by a ‘•’
Any programming using the SC28L202 as it is intended would
                                                                             symbol.
always use the address space form 0x10 through 0x7F. For the
REGISTER MAP DETAIL (based on 28L92)
NOTE: Addresses 0x00 to 0x0F represent the ‘C92 Register’ map.
 A[6:0]                READ                                                          WRITE
                       DEFAULT. The first 16 read and write locations are legacy code for other ’92-type UARTs.
 000 0000 (0x00)       Mode Register (MR0 A, MR1 A, MR2 A) DEFAULT                   Mode Register (MR0 A, MR1 A, MR2 A) DEFAULT
 000 0001 (0x01)       Status Register (SR A)                                        Clock Select Register (CSR A) DEFAULT
 000 0010 (0x02)                                                                     Command Register (CR A) DEFAULT
 000 0011 (0x03)       Receiver FIFO Register (RxFIFO A)                             Transmitter FIFO Register (TxFIFO A)
 000 0100 (0x04)       Input Port Change Register (IPCR) DEFAULT                     • Auxiliary Control Register (ACR) DEFAULT
 000 0101 (0x05)       • Interrupt Status Register (ISR) DEFAULT                     • Interrupt Mask Register (IMR) DEFAULT
 000 0110 (0x06)       Counter Timer Value Register Upper (CTVU 0)                   Counter Timer Preset Register Upper (CTPU 0)
 000 0111 (0x07)       Counter Timer Value Register Lower (CTVL 0)                   Counter Timer Preset Register Lower (CTPL 0)
 000 1000 (0x08)       Mode Register (MR0 B, MR1 B, MR2 B) DEFAULT                   Mode Register (MR0 B, MR1 B, MR2 B) DEFAULT
 000 1001 (0x09)       Status Register (SR B)                                        Clock Select Register (CSR B) DEFAULT
 000 1010 (0x0A)                                                                     Command Register (CR B) DEFAULT
 000 1011 (0x0B)       Receiver FIFO Register (RxFIFO B)                             Transmitter FIFO Register (TxFIFO B)
 000 1100 (0x0C)       • Interrupt Vector Register (IVR) GLOBAL                      • Interrupt Vector Register (IVR) GLOBAL
 000 1101 (0x0D)       Input Port Register (IPR) I/O(6:0) A                          Output Port Configuration Register (OPCR) I/O(7:2)B
 000 1110 (0x0E)       Start Counter Command DEFAULT C/T 0                           Set Output Port Register (SOPR) I/O(7:0)B
 000 1111 (0x0F)       Stop Counter Command DEFAULT C/T 0                            Reset Output Port Register (ROPR) I/O(7:0)B
                       EXTENSION
 001 0000 (0x10)       Receiver FIFO Fill Level (RxFL A)                             Set Output Port Register (SOPR A)
 001 0001 (0x11)       Transmitter FIFO Empty level (TxEL A)                         Reset Output Port Register (ROPR A)
 001 0010 (0x12)       • Enhanced Operation Status (EOS)                             Command Register Extension (CRx A)
 001 0011 (0x13)       Input Port Change Register Upper (IPCRU A)                    I/O Port Configuration Register 0 (I/OPCR 0)
 001 0100 (0x14)       Input Port Change Register Lower (IPCRL A)                    I/O Port Configuration Register 1 (I/OPCR 1)
 001 0101 (0x15)       Input Port Register (IPR A)
 001 0110 (0x16)       Counter Timer Value Register Upper (CTVU 0)                   Counter Timer Preset Register Upper (CTPU 0)
 001 0111 (0x17)       Counter Timer Value Register Lower (CTVL 0)                   Counter Timer Preset Register Lower (CTPL 0)
 001 1000 (0x18)       Receiver FIFO Fill Level (RxFL B)                             Set Output Port Register (SOPR B)
 001 1001 (0x19)       Transmitter FIFO Empty level (TxEL B)                         Reset Output Port Register (ROPR B)
 001 1010 (0x1A)                                                                     Command Register Extension (CRx B)
 001 1011 (0x1B)       Input Port Change Register Upper (IPCRU B)                    I/O Port Configuration Register 2 (I/OPCR 2)
 001 1100 (0x1C)       Input Port Change Register Lower (IPCRL B)                    I/O Port Configuration Register 3 (I/OPCR 3)
 001 1101 (0x1D)       Input Port Register (IPR B)
 001 1110 (0x1E)       Counter Timer Value Register Upper (CTVU 1)                   Counter Timer Preset Register Upper (CTPU 1)
 001 1111 (0x1F)       Counter Timer Value Register Lower (CTVL 1)                   Counter Timer Preset Register Lower (CTPL 1)
2005 Nov 01                                                             51


Philips Semiconductors                                                                                                    Product data sheet
  Dual UART                                                                                                            SC28L202
REGISTER MAP
NOTE: The register maps for channels A and B (UARTs A and B) contain some control registers that configure the entire chip.
These are denoted by a ‘•’ symbol
 A[6:0]             READ                                                    WRITE
                    EXTENSION
 010 0000 (0x20)    Mode Register 0 (MR0 A) NEW ADDRESS                     Mode Register 0 (MR0 A) NEW ADDRESS
 010 0001 (0x21)    Mode Register 1 (MR1 A) NEW ADDRESS                     Mode Register 1 (MR1 A) NEW ADDRESS
 010 0010 (0x22)    Mode Register 2 (MR2 A) NEW ADDRESS                     Mode Register 2 (MR2 A) NEW ADDRESS
 010 0011 (0x23)    Mode Register 3 (MR3 A) NEW ADDRESS                     Mode Register 3 (MR3 A) NEW ADDRESS
 010 0100 (0x24)    Counter/Timer Clock Source (CTCS 0)                     Counter/Timer Clock Source (CTCS 0)
 010 0101 (0x25)     Interrupt Status Register (ISR A)                      Interrupt Mask Register (IMR A)
 010 0110 (0x26)    Programmable BRG Preset Lower (PBRGPL 0)                Programmable BRG Preset Lower (PBRGPL 0)
 010 0111 (0x27)    Programmable BRG Preset Upper (PBRGPU 0)                Programmable BRG Preset Upper (PBRGPU 0)
 010 1000 (0x28)    Mode Register 0 (MR0 B) NEW ADDRESS                     Mode Register 0 (MR0 B) NEW ADDRESS
 010 1001 (0x29)    Mode Register 1 (MR1 B) NEW ADDRESS                     Mode Register 1 (MR1 B) NEW ADDRESS
 010 1010 (0x2A)    Mode Register 2 (MR2 B) NEW ADDRESS                     Mode Register 2 (MR2 B) NEW ADDRESS
 010 1011 (0x2B)    Mode Register 3 (MR3 B) NEW ADDRESS                     Mode Register 3 (MR3 B) NEW ADDRESS
 010 1100 (0x2C)    Counter/Timer Clock Source (CTCS 1)                     Counter/Timer Clock Source (CTCS 1)
 010 1101 (0x2D)    Interrupt Status Register (ISR B)                       • Interrupt Mask Register (IMR B)
 010 1110 (0x2E)
 010 1111 (0x2F)
 011 0000 (0x30)    Receiver Clock Select Register (RxCSR A)                Receiver Clock Select Register (RxCSR A)
 011 0001 (0x31)    Transmitter Clock Select Register (TxCSR A)             Transmitter Clock Select Register (TxCSR A)
 011 0010 (0x32)    Input Port Change Interrupt Enable (IPCE A)             Input Port Change Interrupt Enable (IPCE A)
 011 0011 (0x33)    Programmable BRG Clock Source (PBRGCS)                  Programmable BRG Clock Source (PBRGCS)
 011 0100 (0x34)
 011 0101 (0x35)
 011 0110 (0x36)    Programmable BRG Preset Lower (PBRGPL 1)                Programmable BRG Preset Lower (PBRGPL 1)
 011 0111 (0x37)    Programmable BRG Preset Upper (PBRGPU 1)                Programmable BRG Preset Upper (PBRGPU 1)
 011 1000 (0x38)    Receiver Clock Select Register (RxCSR B)                Receiver Clock Select Register (RxCSR B)
 011 1001 (0x39)    Transmitter Clock Select Register (TxCSR B)             Transmitter Clock Select Register (TxCSR B)
 011 1010 (0x3A)    Input Port Change Interrupt Enable (IPCE B)             Input Port Change Interrupt Enable (IPCE B)
 011 1011 (0x3B)
 011 1100 (0x3C)
 011 1101 (0x3D)
 011 1110 (0x3E)
 011 1111 (0x3F)
2005 Nov 01                                                      52


Philips Semiconductors                                                                                                    Product data sheet
  Dual UART                                                                                                            SC28L202
REGISTER MAP
NOTE: The register maps for channels A and B (UARTs A and B) contain some control registers that configure the entire chip.
These are denoted by a ‘•’ symbol
 A[6:0]             READ                                                    WRITE
                    NEW
 100 0000 (0x40)    System Enable Status (SES A)                            Watchdog, Character and X Enable(WCXER A)
 100 0001 (0x41)    Xon Character Register (XonCR A)                        Xon Character Register (XonCR A)
 100 0010 (0x42)    Xoff Character Register (XoffCR A)                      Xoff Character Register (XoffCR A)
 100 0011 (0x43)    Address Recognition Character (ARCR A)                  Address Recognition Character (ARCR A)
 100 0100 (0x44)    Xon/Xoff Interrupt Status Register (XISR A)
 100 0101 (0x45)    Special Function Register (SFR A)                       Special Function Register (SFR A)
 100 0110 (0x46)    Receiver FIFO Interrupt Level (RxFIL A)                 Receiver FIFO Interrupt Level (RxFIL A)
 100 0111 (0x47)    Transmitter FIFO Interrupt Level (TxFIL A)              Transmitter FIFO Interrupt Level (TxFIL A)
 100 1000 (0x48)    System Enable Status (SES B)                            Watchdog, Character and X Enable (WCXER B)
 100 1001 (0x49)    Xon Character Register (XonCR B)                        Xon Character Register (XonCR B)
 100 1010 (0x4A)    Xoff Character Register (XoffCR B)                      Xoff Character Register (XoffCR B)
 100 1011 (0x4B)    Address Recognition Character (ARCR B)                  Address Recognition Character (ARCR B)
 100 1100 (0x4C)    Xon/Xoff Interrupt Status Register (XISR B)
 100 1101 (0x4D)    Special Function Register (SFR B)                       Special Function Register (SFR B)
 100 1110 (0x4E)    Receiver FIFO Interrupt Level (RxFIL B)                 Receiver FIFO Interrupt Level (RxFIL B)
 100 1111 (0x4F)    Transmitter FIFO Interrupt Level (TxFIL B)              Transmitter FIFO Interrupt Level (TxFIL B)
 101 0000 (0x50)    Bidding Control Register – Break Change (BCRBRK A)      Bidding Control Register – Break Change (BCRBRK A)
 101 0001 (0x51)    Bidding Control Register – Change of State (BCRCOS A)   Bidding Control Register – Change of State (BCRCOS A)
 101 0010 (0x52)    Bidding Control Register – Counter/Timer (BCRCT A)      Bidding Control Register – Counter/Timer (BCRCT A)
 101 0011 (0x53)    Bidding Control Register – Xon (BCRx A)                 Bidding Control Register – Xon (BCRx A)
 101 0100 (0x54)    Bidding Control Register – Address (BCRA A)             Bidding Control Register – Address (BCRA A)
 101 0101 (0x55)    Bidding Control Register – Loop Back Error (BCRLBE A)   Bidding Control Register – Loop Back Error (BCRLBE A)
 101 0110 (0x56)
 101 0111 (0x57)
 101 1000 (0x58)    Bidding Control Register – Break Change (BCRBRK B)      Bidding Control Register – Break Change (BCRBRK B)
 101 1001 (0x59)    Bidding Control Register – Change of State (BCRCOS B)   Bidding Control Register – Change of State (BCRCOS B)
 101 1010 (0x5A)    Bidding Control Register – Counter/Timer (BCRCT B)      Bidding Control Register – Counter/Timer (BCRCT B)
 101 1011 (0x5B)    Bidding Control Register – Xon (BCRx B)                 Bidding Control Register – Xon (BCRx B)
 101 1100 (0x5C)    Bidding Control Register – Address (BCRA B)             Bidding Control Register – Address (BCRA B)
 101 1101 (0x5D)    Bidding Control Register – Loop Back Error (BCRLBE B)   Bidding Control Register – Loop Back Error (BCRLBE B)
 101 1110 (0x5E)
 101 1111 (0x5F)
2005 Nov 01                                                        53


Philips Semiconductors                                                                                                    Product data sheet
   Dual UART                                                                                                           SC28L202
REGISTER MAP
NOTE: The register maps for channels A and B (UARTs A and B) contain some control registers that configure the entire chip.
These are denoted by a ‘•’ symbol
 A[6:0]                READ                                                 WRITE
                       GLOBAL
 110 0000 (0x60)       • Interrupt Control Register (ICR)                   • Interrupt Control Register (ICR)
 110 0001 (0x61)       • Current Interrupt Register (CIR)                   • Update Current Interrupt Register (UCIR)
 110 0010 (0x62)
 110 0011 (0x63)
 110 0100 (0x64)       • Interrupt Vector Register (IVR)                    • Interrupt Vector Register (IVR)
 110 0101 (0x65)
 110 0110 (0x66)       • Global Chip Configuration Register (GCCR)          • Global Chip Configuration Register (GCCR)
 110 0111 (0x67)       • Test & Revision Register (TRR)                     • Test & Revision Register (TRR)
 110 1000 (0x68)
 110 1001 (0x69)
 110 1010 (0x6A)
 110 1011 (0x6B)
 110 1100 (0x6C)
 110 1101 (0x6D)
 110 1110 (0x6E)
 110 1111 (0x6F)
 111 0000 (0x70)       • Global Interrupt Channel Register (GICR)
 111 0001 (0x71)       • Global Interrupt Byte Count Register (GIBCR)
 111 0010 (0x72)       • Global Interrupt Type Register (GITR)
 111 0011 (0x73)       • Global RxFIFO Register (GRxFIFO)                   • Global TxFIFO Register (GTxFIFO)
 111 0100 (0x74)
 111 0101 (0x75)
 111 0110 (0x76)
 111 0111 (0x77)       • Scan Test Control Register (STCR)                  • Scan Test Control Register (STCR)
 111 1000 (0x78)
 111 1001 (0x79)
 111 1010 (0x7A)
 111 1011 (0x7B)
 111 1100 (0x7C)
 111 1101 (0x7D)
 111 1110 (0x7E)
 111 1111 (0x7F)
2005 Nov 01                                                          54


Philips Semiconductors                                                                                                            Product data sheet
    Dual UART                                                                                                                  SC28L202
GENERAL TIMING CONSIDERATIONS FOR THE SC28L202
This part is designed to operate in both the Intel (80xxx) and Motorola (68000) environments. When the Motorola mode is used, the definition,
function, polarity and timing of some pins change. See Figure 3 on page 61.
ABSOLUTE MAXIMUM RATINGS1
 SYMBOL              PARAMETER                                                                   RATING                      UNIT
 Tamb                Operating ambient temperature    range2                                     Note 4                      °C
 Tstg                Storage temperature range                                                   –65 to +150                 °C
 VCC                 Voltage from VCC to GND3                                                    –0.5 to +7.0                V
 VSS                 Voltage from any pin to GND3                                                –0.5 to VCC +0.5            V
 PD                  Maximum power dissipation (TSSOP56)                                         2.4                         W
 Rth(j-c)            Thermal resistance, junction to case (TSSOP56)                              20                          W/°C
 Rth(j-a)            Thermal resistance, junction to ambient (TSSOP56)                           83                          W/°C
NOTES:
1. Stresses above those listed under Absolute Maximum Ratings may cause permanent damage to the device. This is a stress rating only and
    functional operation of the device at these or any other condition above those indicated in the operation section of this specification is not
    implied.
2. For operating at elevated temperatures, the device must be derated based on + 150_C maximum junction temperature.
3. This product includes circuitry specifically designed for the protection of its internal devices from damaging effects of excessive static
    charge. Nonetheless, it is suggested that conventional precautions be taken to avoid applying any voltages larger than the rated maxima.
4. Parameters are valid over specified temperature range.
DC ELECTRICAL CHARACTERISTICS1, 2, 3 (NOMINAL 5 V)
VCC = 5 V ± 10%; Tamb = – 40 °C to +85 °C, unless otherwise specified
 SYMBOL       PARAMETER                                              TEST CONDITIONS                          LIMITS                          UNIT
                                                                                                              Min         Typ      Max
 VIL          Input low voltage                                                                               –           –        0.8        V
 VIH          Input high voltage (except X1/SCLK)                    –40 °C to +85 °C                         2.4         –        –          V
 VIH          Input high voltage (X1/SCLK)                                                                    0.8*VCC     –        –          V
 VOL          Output low voltage                                     IOL = 4 mA                               –           –        0.4        V
 VOH          Output high voltage (except open drain outputs)4       IOH = –400 µA                            VCC – 0.5   –        –          V
 IIX1PD       X1/SCLK input current – power-down                     VIN = 0 to VCC                           –1          –        1          µA
 IILX1        X1/SCLK input low current – operating                  VIN = 0 V                                –30         –        0          µA
 IIHX1        X1/SCLK input high current – operating                 VIN = VCC                                0           –        30         µA
              Input leakage current
 Ii               Input port and IACKN pins5                         VIN = 0 to VCC                           –10         –        1          µA
                  All other pins5                                    VIN = 0 to VCC                           –1          –        1          µA
 IOZH         Output off current high, 3–State data bus              VIN = VCC                                –           –        5          µA
 IOZL         Output off current low, 3–State data bus               VIN = 0 V                                –5          –        –          µA
 IODL         Open–drain output low current in off–state             VIN = 0 V                                –10         –        –          µA
 IODH         Open–drain output high current in off–state            VIN = VCC                                –           –        1          µA
              Power supply current6
 ICC              Operating mode                                     CMOS input levels; freq. = 10 MHz        –           9        20         mA
                  Power-down mode                                    CMOS input levels; freq. = 0 MHz         –           200      500        µA
NOTES:
1. Parameters are valid over specified temperature range.
2. All voltage measurements are referenced to ground (GND). For testing, all inputs swing between 0.4 V and 3.0 V with a transition time of
    5 ns maximum. For X1/SCLK this swing is between 0.4 V and 4.4 V. All time measurements are referenced at input voltages of 0.8 V and
    2.0 V and output voltages of 0.8 V and 2.0 V, as appropriate.
3. Typical values are at +25 °C, typical supply voltages, and typical processing parameters.
4. Test conditions for outputs: CL = 85 pF, except interrupt outputs. Test conditions for interrupt outputs: CL = 85 pF, RL = 2.7 kΩ to VCC.
5. I/O port and IACKN pins have active pull-up transistors that will source a typical 2 µA from VCC when they are at VSS. At VCC they
    source 0.0 µA.
6. All outputs are disconnected. Inputs are switching between CMOS levels of VCC – 0.2 V and VSS + 0.2 V.
2005 Nov 01                                                               55


Philips Semiconductors                                                                   Product data sheet
   Dual UART                                                                           SC28L202
AC CHARACTERISTICS1, 2, 3 (NOMINAL 5 V)
VCC = 5 V ± 10%; Tamb = – 40 °C to +85 °C unless otherwise specified.
                                                                           LIMITS4
 Symbol        Parameter                                                   Min     Typ Max     UNIT
 Reset timing (See Figures 4, 5)
 tRES          Reset Pulse Width                                           100     –   –       ns
 Bus Timing5 (See Figure 6)
 tAS           A6–A0 set-up time to RDN, WRN Low                           10      –   –       ns
 tAH           A6–A0 hold time from RDN, WRN low                           10      –   –       ns
 tCS           CEN set-up time from RDN. WRN LOW                           0       –   –       ns
 tCH           CEN hold time from RDN. WRN HIGH                            0       –   –       ns
 tRW           WRN, RDN pulse width (Low time)                             30      –   –       ns
 tDD           Data valid after RDN low (85 pf load)                       –       –   30      ns
 tDA           RDN low to data bus    active6                              0       –   –       ns
 tDF           Data bus floating after RDN or CEN high                     –       –   15      ns
 tDI           RDN or CEN high to data bus    invalid7                     0       –   –       ns
 tDS           Data bus set-up time before WRN or CEN high (write cycle)   15      –   –       ns
 tDH           Data hold time after WRN high                               0       –   –       ns
 tRWD          High time between read and/or write   cycles5,7             10      –   –       ns
 Port Timing5 (See Figure 10)
 tPS           Port in set-up time before RDN low (Read IP ports cycle)    0       –   –       ns
 tPH           Port in hold time after RDN high                            0       –   –       ns
 tPD           OP port valid after WRN or CEN high (OPR write cycle)       –       –   30      ns
 Interrupt Timing (See Figure 11)
 tIR           INTRN (or I/O[7:3]B when used as interrupts) negated from:
                  Read RxFIFO (RxRDY/FFULL interrupt)                      –       –   30      ns
                  Write TxFIFO (TxRDY interrupt)                           –       –   30      ns
                  Reset Command (delta break change interrupt)             –       –   30      ns
                  Stop C/T command (Counter/timer interrupt                –       –   30      ns
                  Read IPCR (delta input port change interrupt)            –       –   30      ns
                  Write IMR (Clear of change interrupt mask bit(s))        –       –   30      ns
 Clock Timing (See Figures 12, 13, 14)
 tCLK          X1/SCLK high or low time                                    8       –   –       ns
 fCLK          X1/SCLK frequency (7.0 to 16.2 MHz with crystal)            1.0     –   50      MHz
 tCTC          C/T Clk (IP2) high or low time (C/T external clock input)   10      –   –       ns
 fCTC          C/T Clk (IP2) frequency8                                    0       –   20      MHz
 tRX           RxC high or low time (16X)                                  8       –   –       ns
 fRX           RxC Frequency (16X)                                         0       –   50      MHz
               RxC Frequency (1x)8,9                                       0       –   3       MHz
 tTX           TxC High or low time (16X)                                  8       –   –       ns
 fTX           TxC frequency (16X)                                         –       –   50      MHz
               TxC frequency (1X)8,9                                       0       –   3       MHz
 Transmitter Timing (See Figures 13, 15)
 tTXD          TxD output delay from TxC low (TxC input pin)               –       –   30      ns
 tTCS          Output delay from TxC output pin low to TxD data output     –       –   30      ns
 Receiver Timing (See Figures 14, 16)
 tRXS          RxD data set-up time to RxC high                            20      –   –       ns
 tRXH          RxD data hold time from RxC high                            20      –   –       ns
2005 Nov 01                                                             56


Philips Semiconductors                                                                                                            Product data sheet
   Dual UART                                                                                                                   SC28L202
                                                                                                              LIMITS4
 Symbol            Parameter                                                                                  Min      Typ      Max      UNIT
 68000 or Motorola bus timing (See Figures 7, 8, 9)
 tCS(mot)          RWN set-up time to CEN LOW                                                                 5        –        –        ns
 tDS(mot)          Data bus set-up time before X1 HIGH10                                                      10       –        –        ns
 tDH(mot)          Data hold time after CEN HIGH                                                              0        –        –        ns
 tAS(mot)          Address set-up time to CEN LOW                                                             10       –        –        ns
 tAH(mot)          Address hold time from CEN LOW                                                             10       –        –        ns
 tDD(mot)          Data valid after CEN LOW                                                                   –        –        35       ns
 tRWD(mot)         HIGH time between read and/or write cycles5, 7                                             10       –        –        ns
 tDCR              DACKN LOW (read cycle) from X1 HIGH                                                        –        –        35       ns
 tDCW              DACKN LOW (write cycle) from X1 HIGH                                                       –        –        25       ns
 tDAT              DACKN high impedance from CEN or IACKN HIGH                                                –        –        15       ns
 tCSC              CEN or IACKN set–up time to X1 HIGH for minimum DACKN cycle                                10       –        –        ns
NOTES:
1. Parameters are valid over specified temperature range.
2. All voltage measurements are referenced to ground (GND). For testing, all inputs swing between 0.4 V and 3.0 V with a transition time of
    5 ns maximum. For X1/SCLK this swing is between 0.4 V and 4.4 V. All time measurements are referenced at input voltages of 0.8 V and
    2.0 V and output voltages of 0.8 V and 2.0 V, as appropriate.
3. Test conditions for outputs: CL = 85 pF, except interrupt outputs. Test conditions for interrupt outputs: CL = 85 pF, RL = 2.7 kΩ to VCC.
4. Typical values are at +25 °C, typical supply voltages, and typical processing parameters.
5. Timing is illustrated and referenced to the WRN and RDN inputs. Also, CEN may be the ‘strobing’ input. CEN and RDN (also CEN and
    WRN) are ORed internally. The signal asserted last initiates the cycle and the signal negated first terminates the cycle.
6. Guaranteed by characterization of sample units.
7. If CEN is used as the ‘strobing’ input, the parameter defines the minimum High times between one CEN and the next. The RDN signal must
    be negated for tRWD time to guarantee that any status register changes are valid.
8. Minimum frequencies are not tested but are guaranteed by design.
9. Clocks for 1X mode should be reasonably symmetrical.
10. Data is usually set up with respect to CEN going LOW—the leading edge of CEN. This mode strongly implies the use of DACKN. (Its use is
    not strictly required.) DACKN is derived from the X1/SCLK input. It is seldom that the system clocks that ultimately drive the CEN, address
    and RWN signals are synchronous to the X1/SCLK. If address, data, RWN are set up before CEN goes LOW and hold through DACKN, the
    timing parameters above will be guaranteed.
2005 Nov 01                                                              57


Philips Semiconductors                                                                                                            Product data sheet
    Dual UART                                                                                                                  SC28L202
DC ELECTRICAL CHARACTERISTICS1, 2, 3 (NOMINAL 3.3 V)
VCC = 3.3 V ± 10%; Tamb = – 40 °C to +85 °C unless otherwise specified
 SYMBOL       PARAMETER                                        TEST CONDITIONS                              LIMITS                           UNIT
                                                                                                            Min        Typ        Max
 VIL          Input low voltage                                                                             –          –          0.2*VCC    V
 VIH          Input high voltage (X1/SCLK)                                                                  0.8*VCC    –          –          V
 VIH          Input high voltage (X1/SCLK)                                                                  2.4        –          –          V
 VOL          Output low voltage                               IOL = 4 mA                                   –          –          0.4        V
 VOH          Output high voltage (except OD outputs)4         IOH = –400 µA                                VCC–0.5    –          –          V
 IIX1PD       X1/SCLK input current – power down               VIN = 0 V to VCC                             –1         –          1          µA
 IILX1        X1/SCLK input low current – operating            VIN = 0 V                                    –30        –          0          µA
 IIHX1        X1/SCLK input high current – operating           VIN = VCC                                    0          –          30         µA
 Ii           Input leakage current
                 I/O port pins and IACKN                       VIN = 0 V to VCC                             –10        –          1          µA
                 All other pins5                               VIN = 0 V to VCC                             –1         –          1          µA
 IOZH         Output off current high, 3–State data bus        VIN = VCC                                    0          –          5          µA
 IOZL         Output off current low, 3–State data bus         VIN = 0 V                                    –5         –          –          µA
 IODL         Open–drain output low current in off–state       VIN = 0 V                                    –10        –          –          µA
 IODH         Open–drain output high current in off–state      VIN = VCC                                    –          –          1          µA
 ICC          Power supply   current6
                 Operating mode                                CMOS input levels; freq. = 10 MHz            –          9          20         mA
                 Power down mode                               CMOS input levels; freq. = 0 MHz             –          200        500        µA
NOTES:
1. Parameters are valid over specified temperature range.
2. All voltage measurements are referenced to ground (GND). For testing, all inputs swing between 0.4 V and 3.0 V with a transition time of
    5 ns maximum. For X1/SCLK this swing is between 0.4 V and 4.4 V. All time measurements are referenced at input voltages of 0.8 V and
    2.0 V and output voltages of 0.8 V and 2.0 V, as appropriate.
3. Typical values are at +25 °C, typical supply voltages, and typical processing parameters.
4. Test conditions for outputs: CL = 85 pF, except interrupt outputs. Test conditions for interrupt outputs: CL = 85 pF, RL = 2.7 kΩ to VCC.
5. I/O port pins have active pull-up transistors that will source a typical 2 µA from VCC when they are at VSS. These pins at VCC source 0.0 µA.
6. All outputs are disconnected. Inputs are switching between CMOS levels of VCC – 0.2 V and VSS + 0.2 V.
2005 Nov 01                                                                58


Philips Semiconductors                                                                             Product data sheet
   Dual UART                                                                                      SC28L202
AC CHARACTERISTICS1, 2, 3 (NOMINAL 3.3 V)
VCC = 3.3 V ± 10%; Tamb = – 40 °C to +85 °C unless otherwise specified
                                                                                      LIMITS4
 Symbol       Parameter                                                               Min     Typ  Max      UNIT
 Reset timing (See Figures 4, 5)
 tRES         Reset Pulse Width                                                       100     –    –        ns
 Bus Timing (See Figure 6)
 tAS          A6–A0 set-up time to RDN, WRN Low                                       10      –    –        ns
 tAH          A6–A0 hold time from RDN, WRN low                                       10      –    –        ns
 tCS          CEN set-up time to RDN, WRN LOW                                         0       –    –        ns
 tCH          CEN Hold time from RDN, WRN HIGH                                        0       –    –        ns
 tRW          WRN, RDN pulse width (Low time)                                         40      –    –        ns
 tDD          Data valid after RDN low (125 pF load) See load table for smaller loads –       –    40       ns
 tDA          RDN low to data bus active                                              0       –    –        ns
 tDF          Data bus floating after RDN or CEN high                                 –       –    15       ns
 tDS          Data bus set-up time before WRN or CEN high (write cycle)               15      –    –        ns
 tDH          Data hold time after WRN high                                           0       –    –        ns
 tRWD         High time between read and/or write cycles                              10      –    –        ns
 Port Timing (See Figure 10)
 tPS          Port in set-up time before RDN low (Read IP ports cycle)                0       –    –        ns
 tPH          Port in hold time after RDN high                                        0       –    –        ns
 tPD          OP port valid after WRN or CEN high (OPR write cycle)                   –       –    40       ns
 Interrupt Timing (See Figure 11)
 tIR          INTRN (or I/O(7:3)B when used as interrupts) negated from:
                 Read RxFIFO (RxRDY/FFULL interrupt)                                  –       –    40       ns
                 Write TxFIFO (TxRDY interrupt)                                       –       –    40       ns
                 Reset Command (delta break change interrupt)                         –       –    40       ns
                 Stop C/T command (Counter/timer interrupt                            –       –    40       ns
                 Read IPCR (delta input port change interrupt)                        –       –    40       ns
                 Write IMR (Clear of change interrupt mask bit(s))                    –       –    40       ns
 Clock Timing (See Figures 12, 13, 14)
 tCLK         X1/SCLK high or low time                                                10      –    –        ns
 fCLK         X1/SCLK frequency (7.0 to 16.2 MHz with crystal)                        1       –    34       MHz
 tCTC         C/T Clk (IP2) high or low time (C/T external clock input)               10      –    –        ns
 fCTC         C/T Clk (IP2) frequency                                                 0       –    8        MHz
 tRX          RxC high or low time (16X)                                              10      –    –        ns
 fRX          RxC Frequency (16X)                                                     0       –    24       MHz
              RxC Frequency (1x)                                                      0       –    1.5      MHz
 tTX          TxC High or low time (16X)                                              10      –    –        ns
 fTX          TxC frequency (16X)                                                     0       –    24       MHz
              TxC frequency (1X)                                                      0       –    1.5      MHz
 Transmitter Timing (See Figures 13, 15)
 tTXD         TxD output delay from TxC low (TxC input pin)                           –       –    40       ns
 tTCS         Output delay from TxC output pin low to TxD data output                 –       –    40       ns
 Receiver Timing (See Figures 14, 16)
 tRXS         RxD data set-up time to RxC high                                        20      –    –        ns
 tRXH         RxD data hold time from RxC high                                        20      –    –        ns
2005 Nov 01                                                             59


Philips Semiconductors                                                                                                             Product data sheet
   Dual UART                                                                                                                    SC28L202
                                                                                                               LIMITS4
 Symbol           Parameter                                                                                    Min      Typ        Max        UNIT
 68000 or Motorola bus timing (See Figures 7, 8, 9)
 tCS(mot)         RWN set-up time to CEN LOW                                                                   5        –          –         ns
 tDS(mot)         Data bus set-up time before X1 HIGH                                                          10       –          –         ns
 tDH(mot)         Data hold time after CEN HIGH                                                                0        –          –         ns
 tAS(mot)         Address set-up time to CEN LOW                                                               10       –          –         ns
 tAH(mot)         Address hold time from CEN LOW                                                               10       –          –         ns
 tDD(mot)         Data valid after CEN LOW                                                                     –        –          45        ns
 tRWD(mot)        HIGH time between read and/or write cycles       5, 7                                        10       –          –         ns
 tDCR             DACKN Low (read cycle) from X1 High                                                          –        –          35        ns
 TDCW             DACKN Low (write cycle) from X1 High                                                         –        –          30        ns
 tDAT             DACKN High impedance from CEN or IACKN high                                                  –        –          15        ns
 tCSC             CEN or IACKN set-up time to X1 high for minimum DACKN cycle                                  10       –          –         ns
NOTES:
1. Parameters are valid over specified temperature range.
2. All voltage measurements are referenced to ground (GND). For testing, all inputs swing between 0.4 V and 3.0 V with a transition time of
    5 ns maximum. For X1/SCLK this swing is between 0.4 V and 4.4 V. All time measurements are referenced at input voltages of 0.8 V and
    2.0 V and output voltages of 0.8 V and 2.0 V, as appropriate.
3. Test conditions for outputs: CL = 85 pF, except interrupt outputs. Test conditions for interrupt outputs: CL = 85 pF, RL = 2.7 kΩ to VCC.
4. Typical values are at +25 °C, typical supply voltages, and typical processing parameters.
5. Timing is illustrated and referenced to the WRN and RDN inputs. Also, CEN may be the ‘strobing’ input. CEN and RDN (also CEN and
    WRN) are ORed internally. The signal asserted last initiates the cycle and the signal negated first terminates the cycle.
6. Guaranteed by characterization of sample units.
7. If CEN is used as the ‘strobing’ input, the parameter defines the minimum High times between one CEN and the next. The RDN signal must
    be negated for tRWD time to guarantee that any status register changes are valid.
8. Minimum frequencies are not tested but are guaranteed by design.
9. Clocks for 1X mode should be reasonably symmetrical.
10. Data is usually set up with respect to CEN going LOW—the leading edge of CEN. This mode strongly implies the use of DACKN. (Its use is
    not strictly required.) DACKN is derived from the X1/SCLK input. It is seldom that the system clocks that ultimately drive the CEN, address
    and RWN signals are synchronous to the X1/SCLK. If address, data, RWN are set up before CEN goes LOW and hold through DACKN, the
    timing parameters above will be guaranteed.
TIMING DIAGRAMS
The active time of read or write cycle exists only when CEN is LOW            For the 68K mode, the CEN is very much the clock or ‘strobing’
and RDN or CEN is also LOW.                                                   signal. The RDN and WRN signals have been combined into the
                                                                              RWN signal. Therefore, the part is always prepared to do a write or
Write = CEN and WRN LOW.
                                                                              read—it only needs CEN to enable.
Read = CEN and RDN LOW.
                                                                              In the 68K mode design, care should be given to system drift over
For the 68K mode:
                                                                              temperature, voltage, and age when RWN and CEN change very
Write = CEN LOW and RWN LOW and DACKN HIGH.                                   close to each other. If RWN switches shortly before CEN (due to
Read = CEN LOW and RWN HIGH.                                                  system drift) it is possible to produce very short internal read or write
                                                                              pulses which could change internal controls, FIFO address pointers,
In general, it is convenient (but is not at all required) to think of the
                                                                              for example.
Read/Write signal to be active and then let the CEN be the ‘strobing’
or clocking control. However, some users have wired CEN LOW and               Figure 3 loosely shows the timing conditions that may exist of the
allowed RDN or WRN to be the clocking or ‘strobing’ input. While              active area those signals will produce.
this is completely within the specified limits, it is not recommended
since it will greatly increase the part’s sensitivity to noise ‘glitches’
on the RDN and WRN signals.
2005 Nov 01                                                               60


Philips Semiconductors                                                                                     Product data sheet
    Dual UART                                                                                             SC28L202
     Intel-type bus:
               CEN                                                         Active area
                           RDN, RWN
              CEN
                     RDN, WRN
                               CEN
                    RDN, WRN
              CEN
         RDN, WRN
     Motorola-type:
              CEN                                                          Active area
                   RWN (Write)                                                                                 DACKN
                                                                                                               not used
                   RWN (Read)
                           CEN
              RWN                                                                                              When DACK
                                                                                                               controls
             DACKN
     NOTE: In the 68K mode, the write occurs on the rise of CEN or fall of DACKN, whichever occurs first.
                                                                                                                  SD00734
                                                       Figure 3. Active area in 68K mode.
If you have further questions, please direct them to the factory contact:
datacom.tech-support@philips.com
2005 Nov 01                                                               61


Philips Semiconductors                                                                                                   Product data sheet
  Dual UART                                                                                                            SC28L202
         RESETN                                                                       RESETN
                                tRES                                                                       tRES
                                           SD00729                                                                    SD00109
              Figure 4. Reset Timing (80XXX mode)                                        Figure 5. Reset Timing (68XXX mode)
                        A0–A3
                                       tAS
                                               tAH
                          CEN
                                       tCS                               tCH
                                                      tRW                          tRWD
                         RDN
                                                 tDD                       tDF
                        D0–D7                      NOT
                                   FLOAT          VALID            VALID                FLOAT
                       (READ)
                                                                                   tRWD
                         WDN
                                                            tDS
                                                                               tDH
                        D0–D7                                  VALID
                      (WRITE)
                                                                                                                    SD00087
                                                  Figure 6. Bus Timing (80XXX mode)
2005 Nov 01                                                          62


Philips Semiconductors                                                                                                    Product data sheet
  Dual UART                                                                                                              SC28L202
                                                                        tCSC
                                      X1/CLK
                                                         tAS
                                       A1–A4
                                                                     tCS                                 tCH
                                        RWN
                                                                                                      tRWD
                                         CEN                                  tAH
                                                                      tDD                                 tDF
                                       D0–D7                           NOT            DATA VALID
                                                                      VALID
                                                      tDA
                                      DACKN
                                                                                   tDCR
                                                                                                 tDAT
      NOTE: DACKN low requires two rising edges of X1 clock after CEN is low.                                 SD00730
                                                       Figure 7. Bus Timing (Read Cycle) (68XXX mode)
                                                                      tCSC
                                    X1/CLK
                                                        tAS
                                     A1–A4
                                                                    tCS                                  tCH
                                       RWN
                                                                                                        tRWD
                                       CEN                                  tAH
                                     D0–D7
                                                                                                          tDH
                                                                       tDS
                                    DACKN
                                                                                  tDCW
                                                                                                  tDAT
     NOTE: DACKN low requires two rising edges of X1 clock after CEN is low.                                     SD00731
                                                       Figure 8. Bus Timing (Write Cycle) (68XXX mode)
2005 Nov 01                                                                          63


Philips Semiconductors                                                                                                       Product data sheet
  Dual UART                                                                                                                 SC28L202
                                                                      tCSC
                             X1/CLK
                              INTRN
                              IACKN
                                                                     tDD                                 tDF
                              D0–D7
                             DACKN
                                                                                           tDCR
                                                                                                    tDAT
  NOTE: DACKN low requires two rising edges of X1 clock after IACKN is low.
                                                                                                                    SD00732
                                                        Figure 9. Interrupt Cycle Timing (68XXX mode)
                                          RDN
                                                            tPS                             tPH
                                       IP0–IP6
                             (a) INPUT PINS
                                         WRN
                                                                                                tPD
                                     OP0–OP7                             OLD DATA                       NEW DATA
                             (b) OUTPUT PINS
                                                                                                                 SD00135
                                                                          Figure 10. Port Timing
2005 Nov 01                                                                         64


Philips Semiconductors                                                                                                                                                Product data sheet
  Dual UART                                                                                                                                                       SC28L202
                                                          WRN                                                  VM
                                                                                                                  tIR
                                                INTERRUPT 1
                                                      OUTPUT                                                                  VOL +0.2 V
                                                                                                                                          VOL
                                                                                         VM
                                                          RDN
                                                                                                          tIR
                                                INTERRUPT 1
                                                      OUTPUT                                                              VOL +0.2 V
                                                                                                                                     VOL
       NOTES:
       1. INTRN or OP3-OP7 when used as interrupt outputs.
       2. The test for open-drain outputs is intended to guarantee switching of the output transistor. Measurement of this response is referenced from the midpoint of the switching
          signal, VM, to a point 0.2 V above VOL. This point represents noise margin that assures true switching has occurred. Beyond this level, the effects of external circuitry and
          test environment are pronounced and can greatly affect the resultant measurement.
                                                                                                                                                                             SD00735
                                                                Figure 11. Interrupt Timing (80xxx mode)
                                                  tCLK                                                                                  VCC
                                                  tCTC
                                                  tRx
                                                  tTx                                                           NOTE:
                                                                                                                RESISTOR REQUIRED           470 Ω
               X1/SCLK                                                                                          FOR TTL INPUT.
                CTCLK
                    RxC                                                                                        CLK                                                  X1/Sclk
                    TxC
                                                                             tCLK
                                                                             tCTC
                                                                             tRx
                                                                             tTx                               *NOTE: X2 MUST BE LEFT OPEN.                         X2*
                                                      3 pF                                                    SC28L202
                                         PARASITIC CAPACITANCE
                                                                                        X1                                                                   TO UART
                                                                                                                                                             CIRCUIT
                                                                                                       2pF
                                                         C1
                                                                                                                TYP.
                                                                                                                160 kΩ
                                                         C2
                                                                                        X2             4pF
                                                                         14.7456 MHz
                                                      3 pF
                                         PARASITIC CAPACITANCE
             C1 = C2 ∼ 24 pF FOR CL = 13.5 pF. For the oscillator feedback loop the capacitors C1 and C2 are in series.
             C1 and C2 should be chosen according to the crystal manufacturer’s specification.
             C1 and C2 values will include any parasitic capacitance of the wiring and X1 X2 pins.
             Package capacitance approximately 4 pF.
                                                                                                                                                                    SD00736
                                                                            Figure 12. Clock Timing
2005 Nov 01                                                                                  65


Philips Semiconductors                                                                                                Product data sheet
  Dual UART                                                                                                        SC28L202
                                                                  1 BIT TIME
                                                              (1 OR 16 CLOCKS)
                                                TxC
                                            (INPUT)
                                                             tTXD
                                                TxD
                                                                    tTCS
                                                TxC
                                      (1X OUTPUT)
                                                                                                 SD00138
                                                    Figure 13. Transmitter External Clocks
                                               RxC
                                       (1X INPUT)
                                                               tRXS             tRXH
                                               RxD
                                                                                                SD00139
                                                      Figure 14. Receiver External Clock
                          TxD                  D1             D2             D3       BREAK      D4                   D6
              TRANSMITTER
                   ENABLED
                      TxRDY
                        (SR2)
                         WRN
                                    D1         D8              D9    START          D10   STOP   D11 WILL     D12
                                                                    BREAK                 BREAK   NOT BE
                      CTSN1                                                                     WRITTEN TO
                         (IP0)                                                                  THE TxFIFO
                      RTSN2
                        (OP0)
                                   OPR(0) = 1                                                              OPR(0) = 1
      NOTES:
      1. Timing shown for MR2[4] = 1.
      2. Timing shown for MR2[5] = 1.                                                                                     SD00155
                                                         Figure 15. Transmitter Timing
2005 Nov 01                                                              66


Philips Semiconductors                                                                                                                    Product data sheet
  Dual UART                                                                                                                             SC28L202
                     RxD                   D1            D2           D8             D9           D10           D11         D12           D13
                                                                                                                    D12, D13 WILL BE LOST
                                                                                                                    DUE TO RECEIVER DISABLE.
              RECEIVER
              ENABLED
                 RxRDY
                   (SR0)
                  FFULL
                   (SR1)
                 RxRDY/
                  FFULL
                  (OP5)2
                    RDN
                                               STATUS DATA                                         STATUS DATA STATUS DATA STATUS DATA
                                                   D1                             D11 WILL BE LOST       D2         D3           D10
              OVERRUN                                                             DUE TO OVERRUN
                   (SR4)                                                                                                              RESET BY COMMAND
                    RTS1
                   (OP0)
                                  OPR[0] = 1
     NOTES:
     1. Timing shown for MR1[7] = 1.
     2. Shown for OPCR[4] = 1 and MR[6] = 0.                                                                                                    SD00156
                                                                Figure 16. Receiver Timing
                     MASTER STATION
                                                      BIT 9            BIT 9                                                    BIT 9
               TxD                              ADD#1 1           D0     0                                                ADD#2 1
    TRANSMITTER
        ENABLED
            TxRDY
             (SR2)
              WRN
                      MR1[4:3] = 11   ADD#1 MR1[2] = 0 D0                                      MR1[2] = 1 ADD#2
                       MR1[2] = 1
                     PERIPHERAL STATION
                                         BIT 9            BIT 9            BIT 9                                                  BIT 9           BIT 9
               RxD                        0        ADD#1 1           D0     0                                              ADD#2 1                 0
        RECEIVER
        ENABLED
           RxRDY
             (SR0)
        RDN/WRN
                   MR1[4:3] = 11                                ADD#1             STATUS DATA                                            STATUS DATA
                                                                                       D0                                                    ADD#2
                                                                                                                                                   SD00096
                                                                 Figure 17. Wake-Up Mode
2005 Nov 01                                                                      67


Philips Semiconductors                                                       Product data sheet
  Dual UART                                                                 SC28L202
                                          I = 2.4 mA
      INTRN                                                         +5 V
      DACKN
                     85 pF
                             I = 2.4 mA VOL return to VCC for a 0 level
                             I = 400 µA VOH return to VSS for a 1 level
      D0–D7
     TxDA/B
  OP0–OP7
                     85 pF
                                                              SD00733
             Figure 18. Test Conditions on Outputs
2005 Nov 01                                                              68


Philips Semiconductors                                                            Product data sheet
  Dual UART                                                                      SC28L202
 TSSOP56: plastic thin shrink small outline package; 56 leads; body width 6.1 mm     SOT364-1
2005 Nov 01                                       69


Philips Semiconductors                                                                                                       Product data sheet
  Dual UART                                                                                                              SC28L202
REVISION HISTORY
 Rev       Date        Description
 _7        20051101    Product data sheet. Supersedes data of 16 April 2004 (9397 750 13049).
                       Modifications:
                       • Page 3, description for pin 21, I/M: changed “When HIGH or not connected configures the bus interface ...”
                         to “When HIGH configures the bus interface ...:”
                       • Page 6, section “Bus Interface”, second sentence: changed “If this pin is high or left open ...” to
                         “If this pin is HIGH ...”
                       • Page 34, UCIR — Update CIR; first sentence: changed “... address 0x8C.” to “... address 0x61.”
 _6        20040416    Product data (9397 750 13049). Supersedes fifth version SC28L202_5 of 2002 Dec 03 (9397 750 10585).
 _5        20031202    Product data (9397 750 10585). Supersedes fourth version SC28L202_4 of 2000 Feb 10 (9397 750 06826).
 _4        20000210    Objective data (9397 750 06826).
2005 Nov 01                                                       70


Philips Semiconductors                                                                                                                                                Product data sheet
      Dual UART                                                                                                                                                   SC28L202
Data sheet status
                                             Product                 Definitions
  Level        Data sheet status [1]
                                             status [2] [3]
  I            Objective data                Development             This data sheet contains data from the objective specification for product development.
                                                                     Philips Semiconductors reserves the right to change the specification in any manner without notice.
  II          Preliminary data               Qualification           This data sheet contains data from the preliminary specification. Supplementary data will be published
                                                                     at a later date. Philips Semiconductors reserves the right to change the specification without notice, in
                                                                     order to improve the design and supply the best possible product.
  III         Product data                   Production              This data sheet contains data from the product specification. Philips Semiconductors reserves the
                                                                     right to make changes at any time in order to improve the design, manufacturing and supply. Relevant
                                                                     changes will be communicated via a Customer Product/Process Change Notification (CPCN).
 [1] Please consult the most recently issued data sheet before initiating or completing a design.
 [2] The product status of the device(s) described in this data sheet may have changed since this data sheet was published. The latest information is available on the Internet at URL
      http://www.semiconductors.philips.com.
 [3] For data sheets describing multiple type numbers, the highest-level product status determines the data sheet status.
 Definitions
 Short-form specification — The data in a short-form specification is extracted from a full data sheet with the same type number and title. For detailed information see
 the relevant data sheet or data handbook.
 Limiting values definition — Limiting values given are in accordance with the Absolute Maximum Rating System (IEC 60134). Stress above one or more of the limiting
 values may cause permanent damage to the device. These are stress ratings only and operation of the device at these or at any other conditions above those given
 in the Characteristics sections of the specification is not implied. Exposure to limiting values for extended periods may affect device reliability.
 Application information — Applications that are described herein for any of these products are for illustrative purposes only. Philips Semiconductors make no
 representation or warranty that such applications will be suitable for the specified use without further testing or modification.
 Disclaimers
 Life support — These products are not designed for use in life support appliances, devices, or systems where malfunction of these products can reasonably be
 expected to result in personal injury. Philips Semiconductors customers using or selling these products for use in such applications do so at their own risk and agree
 to fully indemnify Philips Semiconductors for any damages resulting from such application.
 Right to make changes — Philips Semiconductors reserves the right to make changes in the products—including circuits, standard cells, and/or software—described
 or contained herein in order to improve design and/or performance. When the product is in full production (status ‘Production’), relevant changes will be communicated
 via a Customer Product/Process Change Notification (CPCN). Philips Semiconductors assumes no responsibility or liability for the use of any of these products, conveys
 no license or title under any patent, copyright, or mask work right to these products, and makes no representations or warranties that these products are free from patent,
 copyright, or mask work right infringement, unless otherwise specified.
  Contact information                                                                                                                Koninklijke Philips Electronics N.V. 2005
       For additional information please visit                                                                                               All rights reserved. Printed in U.S.A.
       http://www.semiconductors.philips.com.                          Fax: +31 40 27 24825
                                                                                                                                                                 Date of release: 11-05
       For sales offices addresses send e-mail to:
       sales.addresses@www.semiconductors.philips.com.                                                       Document order number:                                           SC28L202_7
     
            
2005 Nov 01                                                                                   71


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
NXP:
 SC28L202A1DGG,112 SC28L202A1DGG/G:11 SC28L202A1DGG/G,11 SC28L202A1DGG,129
SC28L202A1DGG,118
