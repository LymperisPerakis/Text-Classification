                                                                                                   XR68C92/192
                                                         DUAL UNIVERSAL ASYNCHRONOUS
                                                             RECEIVER AND TRANSMITTER
                                                                                                                                                               August 2005
 DESCRIPTION
The XR68C92/192 is a Dual Universal Asynchronous Receiver and Transmitter with 8 (XR68C92) / 16 (XR68C192)
bytes transmit and receive FIFO. The XR68C92/192 is a pin-to-pin compatible and an improved version of the
XR68C681 and the Philips SCC68692 UART with faster data access and other additional features. The operating
speed of the receiver and transmitter can be selected independently from a table of eighteen fixed baud rates, a
16X clock derived from a programmable counter/timer, or an external 1X or 16X clock. The baud rate generator
and counter/timer can operate directly from a crystal or from external clock input. The XR68C92/192 provides a
power-down mode in which the oscillator is stopped but the register contents are retained. The XR68C92/192 is
fabricated in an advanced CMOS process to achieve low power and high speed requirements.
 FEATURES
Added features in devices with top marking of "D2" and                                     PLCC Package
  newer:
  • 5 volt tolerant inputs
                                                                                                                                                        41 -IACK
• Pin to pin compatible and improved version of the                        A2      IP1     A1      IP3     A0       N.C.      VCC       IP4     IP5                IP2
  SCC68692 and XR68C681                                                    6       5       4       3       2        1         44        43      42                 40
• Enhanced Multidrop mode operation with separate
                                                                A3    7                                                                                                    39 -CS
  storage for address and data tags (9th bit)
• 8 Bytes transmit/receive FIFO (XR68C92)                       IP0   8                                                                                                    38 -RESET
•16 Bytes transmit/receive FIFO (XR68C192)                     R/-W   9                                                                                                    37   XTAL2
• Standard baud rates from 50bps to 230.4kbps                -DTACK 10                                                                                                     36   XTAL1
• Non-standard baud rate of up to 1Mbps                        RXB    11                                                                                                   35   RXA
• Transmit and Receive trigger levels                          N.C.   12                                   XR68C92                                                         34   N.C.
• Watch dog timer                                                                                          XR68C192
                                                               TXB    13                                                                                                   33   TXA
• Programmable clock source for receiver and trans-
                                                               OP1    14                                                                                                   32   OP0
  mitter of each channel
• Single interrupt output                                      OP3    15                                                                                                   31   OP2
• 7 Multipurpose inputs, 8 Multipurpose outputs                OP5    16                                                                                                   30   OP4
• 2.97 to 5.5 volt operation                                   OP7    17                                                                                                   29   OP6
• Programmable character lengths (5, 6, 7, 8)
                                                                           D1 18   D3 19   D5 20   D7 21
                                                                                                           GND 22   N.C. 23   -INT 24
                                                                                                                                        D6 25   D4 26   D2 27      D0 28
• Parity, framing, and over run error detection
• Programmable 16-bit timer/counter
• On-chip crystal oscillator
• Power down mode
 ORDERING INFORMATION
 Part number   Package          Operating temperature Device Status
XR68C92CP      40-Lead   PDIP     0° C to + 70° C        Active. See the XR68C92CV for new designs.
XR68C92CJ      44-Lead   PLCC     0° C to + 70° C        Active
XR68C92CV      44-Lead   LQFP     0° C to + 70° C        Active
XR68C92IP      40-Lead   PDIP   -40° C to + 85° C        Active. See the XR68C92IV for new designs.
XR68C92IJ      44-Lead   PLCC   -40° C to + 85° C        Active
XR68C92IV      44-Lead   LQFP   -40° C to + 85° C        Active
XR68C192CJ     44-Lead   PLCC     0° C to + 70° C        Active
XR68C192CV     44-Lead   LQFP     0° C to + 70° C        Active
XR68C192IJ     44-Lead   PLCC   -40° C to + 85° C        Active
XR68C192IV     44-Lead   LQFP   -40° C to + 85° C        Active
     Rev. 1.33
      EXAR Corporation, 48720 Kato Road, Fremont, CA 94538 • (510) 668-7000 • FAX (510) 668-7017


XR68C92/192
Package Description
              40 Pin DIP Package                                    44 Pin LQFP Package
               A0    1               40   VCC                       A2   IP1   A1   IP3   A0    VCC   VCC    IP4   IP5   -IACK   IP2
               IP3   2               39   IP4
                                                                    44   43    42   41    40    39    38     37    36    35      34
               A1    3               38   IP5
               IP1   4               37 -IACK            A3    1                                                                       33   -CS
               A2    5               36   IP2           IP0    2                                                                       32   -RESET
               A3    6               35 -CS            R/-W    3                                                                       31   XTAL2
                                                      -DTACK   4                                                                       30   XTAL1
               IP0   7               34 -RESET
                                                       RXB     5                                                                       29   RXA
              R/-W   8               33   XTAL2
                                                                                          XR68C92                                           TXA
                                                        TXB    6                                                                       28
                          XR68C92
          -DTACK     9               32   XTAL1                                           XR68C192
                                                        OP1    7                                                                       27   OP0
              RXB    10              31   RXA
                                                        OP3    8                                                                       26   OP2
              TXB    11   XR68C192   30   TXA
                                                        OP5    9                                                                       25   OP4
              OP1    12              29   OP0           OP7    10                                                                      24   OP6
              OP3    13              28   OP2           N.C.   11                                                                      23   N.C.
              OP5    14              27   OP4
                                                                    12   13    14   15    16    17    18     19    20    21      22
              OP7    15              26   OP6
                                                                                          GND   GND   -INT
                                                                    D1   D3    D5   D7                       D6    D4    D2      D0
               D1    16              25   D0
               D3    17              24   D2
               D5    18              23   D4
               D7    19              22   D6
              GND    20              21   -INT
  Rev. 1.33
                                                  2


                                                                              XR68C92/192
Block Diagram
                                                                      Channel A
                                                                Transmit          Transmit
                Data Bus Buffers
                                                                 FIFO
                                                                Registers
                                                                                    Shift
                                                                                  Register
                                                                                                     TXA
   D0-D7
                       &
    R/-W                                                         Flow
-DTACK                                                          Control
                                                                 Logic
  -IACK
-RESET           Control Logic                                  Receive           Receive
                                                                 FIFO              Shift
                                                                Registers         Register
                                                                                                     RXA
                                                                 Flow                        Watch
                                                                Control                       Dog
                 Register                                                                    Timer
  A0-A3                                                          Logic
    -CS           Select
                  Logic                                               Channel B
                                   Interconnect Bus Lines
                                                                Transmit          Transmit
                                                                 FIFO               Shift            TXB
                                                                Registers         Register
                                             &                   Flow
                                                                Control
                                                                 Logic
                 Interrupt
                  Control              Control Signals
                                                                Receive           Receive
    -INT                                                         FIFO              Shift
                                                                                                     RXB
                   Logic                                        Registers         Register
                                                                 Flow                        Watch
                                                                Control                       Dog
                                                                 Logic                       Timer
                    Clock &
  XTAL1
                   Baud Rate                                                                         OP0-OP7
  XTAL2                                                                        Multi-
                   Generator
                                                                              Purpose
                                                                                I/O
                                                                              Control                IP0-IP5
                                                                               Logic
  Rev. 1.33
                                                            3


XR68C92/192
SYMBOL DESCRIPTION (* 44 pin LQFP)
    Symbol           Pin         Signal                       Pin Description
                44    40   44*    type
 -RESET         38    34    32       I  Master Reset (active low). A low on this pin will reset all the
                                        outputs and internal registers. The transmitter output and
                                        the receiver input will be disabled during reset time.
 A0-A3         2,4,  1,3, 40,42,
               6,7   5,6   44,1      I  Address select lines. To select internal registers.
 -IACK          41    37    35       I  Interrupt acknowledge (active low). A low on this pin indicates
                                        that the CPU has received an interrupt. If not used, this pin
                                        should be tied to VCC.
 -DACK          10     9     4      O   Data Transfer Acknowledge ( three-state active low output).
                                        A low on this pin indicates proper transfer of data between
                                        the CPU and XR68C92/192 during read, write and interrupt
                                        cycles.
 -CS            39    35    33       I  Chip select (active low). A low at this pin enables the data
                                        bus transfer operation.
 D0-D7        28,18 25,16 22,12         Bi-directional data bus. Eight bit, three state data bus to
              27,19 24,17 21,13    I/O  transfer information to or from the CPU. D0 is the least
              26,20 23,18 20,14         significant bit of the data bus and the first serial data bit to be
              25,21 22,19 19,15         received or transmitted.
 R/-W            9     8     3       I  Read/Write strobe. When -CS is asserted, a high on this pin
                                        transfers the contents of the XR68C92/192 data bus to the
                                        CPU, and a low on this pin will transfer the contents of the
                                        CPU data bus to the addressed register.
 -INT          24    21     18      O   Interrupt output (open drain, active low) This pin goes low
                                        upon occurrence of one or more of eight maskable interrupt
                                        conditions (when enabled by the interrupt mask register).
                                        CPU can read the interrupt status register to determine the
                                        interrupting condition(s). This output requires a 10k ohms
                                        pull-up resistor.
XTAL1          36    32     30       I  Crystal input 1 or external clock input. A crystal can be
                                        connected between this pin and XTAL2 pin to utilize the
                                        internal oscillator circuit. An external clock can be used to
                                        clock internal circuit and baud rate generator for custom
                                        transmission rates.
    Rev. 1.33
                                             4


                                                                 XR68C92/192
SYMBOL DESCRIPTION (* 44 pin LQFP)
  Symbol           Pin       Signal                      Pin Description
             44    40   44*   type
XTAL2        37    33    31     O   Crystal input 2 or buffered clock output. See XTAL1.
RXA, RXB    35,11 31,10 29,5    I   Serial data input. The serial information (data) received from
                                    serial port to XR68C92/192 receive input circuit. A mark
                                    (high) is logic one and a space (low) is logic zero.This input
                                    must be held at logic one when idle and during power down.
TXA, TXB    33,13 30,11 28,6    O   Serial data output. The serial data is transmitted via this pin
                                    with additional start , stop and parity bits. This output will be
                                    held in mark (high) state during reset, local loop back mode
                                    or when the transmitter is disabled.
IP0           8     7     2     I   Multi-purpose input or Channel A Clear-To-Send (-CTSA
                                    active low). If not used, this pin should be tied to VCC.
IP1           5     4    43     I   Multi-purpose input or Channel B Clear-To-Send (-CTSB
                                    active low). If not used, this pin should be tied to VCC.
IP2          40    36    34     I   Multi-purpose input or Channel B receive external clock
                                    input (received data is sampled on the rising edge of the
                                    clock) or Timer/Counter External clock input. If not used, this
                                    pin should be tied to VCC or GND.
IP3           3     2    41     I   Multi-purpose input or Channel A transmit external clock
                                    input. The transmit data is clocked on the falling edge of the
                                    clock. If not used, this pin should be tied to VCC or GND.
IP4          43    39    37     I   Multi-purpose input or Channel A receive external clock
                                    input. The received data is clocked on the rising edge of the
                                    clock. If not used, this pin should be tied to VCC or GND.
IP5          42    38    36     I   Multi-purpose input or Channel B transmit external clock
                                    input. The transmit data is clocked on the falling edge of the
                                    clock. If not used, this pin should be tied to VCC or GND.
OP0          32    29    27     O   Multi-purpose output. General purpose output or Channel A
                                    Request-To-Send (-RTSA active low).
OP1          14    12     7     O   Multi-purpose output. General purpose output or Channel B
                                    Request-To-Send (-RTSB active low).
OP2          31    28    26     O   Multi-purpose output. General purpose output or one of the
  Rev. 1.33
                                        5


XR68C92/192
SYMBOL DESCRIPTION (* 44 pin LQFP)
  Symbol          Pin       Signal                    Pin Description
             44   40   44*   type
                                   following functions can be selected for this output pin by
                                   programming the Output Port Confiuration Register bits 1,0;
                                   TxAClk1 -Transmit 1X clock.
                                   TxAClk16 -Transmit 16X clock
                                   RxAClk1 -Receive 1X clock
OP3          15   13    8      O   Multi-purpose output. General purpose output or one of the
                                   following functions can be selected for this output pin by
                                   programming the Output Port Confiuration Register bits 3,2;
                                   C/T -Counter timer output (Open drain output)
                                   TxBClk1 -Transmit 1X clock
                                   RxBClk1 -Receive 1X clock
OP4          30   27   25      O   Multi-purpose output. General purpose output or one of the
                                   following functions can be selected for this output pin by
                                   programming the Output Port Confiuration Register bit 4;
                                   -RxARDY -Receive ready signal (Open drain output)
                                   -RxAFULL - Receive FIFO full signal (Open drain output)
OP5          16   14    9      O   Multi-purpose output. General purpose output or one of the
                                   following functions can be selected for this output pin by
                                   programming the Output Port Confiuration Register bit 5;
                                   -RxBRDY - Receive ready signal (Open drain output)
                                   -RxBFULL - Receive FIFO full signal (Open drain output)
OP6          29   26   24      O   Multi-purpose output. General purpose output or Transmit A
                                   holding register empty interrupt (-TxARDY Open drain out-
                                   put).
OP7          17   15   10      O   Multi-purpose output. General purpose output or Transmit B
                                   holding register empty interrupt (-TxBRDY Open drain out-
                                   put)
GND          22   20  16,17  Pwr   Signal and power ground.
VCC          44   40  38,39   Pwr  Power supply input, 2.97V to 5.5V.
N.C.        1,12   -  11,23        No Connection.
            23,34
  Rev. 1.33
                                        6


                                                                                   XR68C92/192
INTERNAL CONTROL LOGIC                                       communication baud rates (if a typical 3.6864MHz
The internal control logic of the XR68C92/192 receives       crystal or clock is used) ranging from 50 to 230.4kbps
operation commands from the central processing unit          by producing internal clock outputs at 16 times the
(CPU) and generates appropriate signals to the inter-        actual baud rate. In addition, other baud rates can be
nal sections to control device operation. The internal       derived by connecting 16X or 1X clocks to multi-
control logic takes in the following inputs:                 purpose input port pins IP3 - IP6 that have alternate
• -CS, which is the XR68C92/192 chip-select;                 functions as receiver or transmitter clock inputs.
• R/-W which allows data transfers between the CPU           Clock selector logic consists of the clock selector
   and XR68C92/192via the data bus (D0 to D7);               register (CSRA, CSRB), bits 0 & 2 of Mode Register 0
• four register-select lines (A0 through A3) which are       (MR0A, MR0B) and bit-7 of Auxilliary Control Register
                                                             (ACR). These allow various combinations of these
  decoded to allow access to the registers within the
                                                             baud rates for receiver and transmitter of each chan-
   XR68C92/192;
                                                             nel. See Baud Rate Table on page 18 for more details.
• -RESET (reset), which initializes or resets all
  outputs and internal registers.                            The programmable 16-bit counter/timer (C/T) can pro-
                                                             duce a 16X clock for other baud rates by counting down
COMMUNICATION CHANNELS A AND B                               its programmed clock source. Users can program the
                                                             16 bit C/T within the XR68C92/192 to use one of
Each communication channel includes a full-duplex
                                                             several clock sources as its input. The output of the C/
asynchronous receiver/transmitter (UART). The oper-
                                                             T is available to the internal clock selectors and can
ating frequency for each receiver and each transmitter
                                                             also be programmed to appear at output OP3. In the
can be selected independently from the baud rate
                                                             timer mode, the C/T acts as a programmable divider
generator, the Counter/Timer (C/T), or from an exter-
                                                             and can generate a square-wave output at OP3. In the
nal clock. The transmitter accepts parallel data from
                                                             counter mode, the C/T can be started and stopped
the CPU, converts it to a serial bit stream in the form of
                                                             under program control. When stopped, the CPU can
a character and outputs it on the Transmit Data output
                                                             read its contents. The counter counts down the num-
pin (TXA, TXB). The character consists of start, stop,
                                                             ber of pulses stored in the concatenation of the C/T
and optional parity bits, The receiver accepts serial
                                                             upper register and C/T lower register and produces an
data on the Receive Data input pin (RXA, RXB),
                                                             interrupt. This is a system-oriented feature that can be
converts this serial input to parallel format, checks for
                                                             used to record timeouts when implementing various
a start bit, stop bit, parity bit (if any), framing error,
                                                             application protocols.
overrun or break condition, and transfers the data byte
to the CPU during read operations.
                                                             INTERRUPT CONTROL LOGIC
TIMING LOGIC                                                 The following registers are associated with the inter-
                                                             rupt control logic:
The timing logic consists of
                                                             • Interrupt Mask Register (IMR)
• a crystal oscillator,
• a baud rate generator (BRG),                               • Interrupt Status Register (ISR)
• clock selector logic, and                                  • Auxiliary Control Register (ACR)
• a programmable 16-bit counter/timer (C/T).                 • Interrupt Vector Register (IVR)
                                                             A single active-low interrupt output (-INT) can notify the
The crystal oscillator operates directly from a typical
                                                             CPU that any of eight internal events has occurred.
3.6864 MHz crystal connected across the XTAL1 and
                                                             These eight events are described in the discussion of
XTAL2 inputs or from an external clock of the appropri-
                                                             the interrupt status register (ISR). User can program
ate frequency connected to XTAL1. The XTAL1 clock
                                                             the interrupt mask register (IMR) to allow only certain
serves as the basic timing reference for the baud rate
                                                             conditions to cause -INT to be asserted while the CPU
generator, the C/T, and other internal circuits.
                                                             can read the ISR to determine all currently active
The baud rate generator operates from the XTAL1              interrupting conditions. When an active-low interrupt
clock input and can generate 28 commonly used data           acknowledge signal (-IACK) from the CPU is asserted
    Rev. 1.33
                                                           7


XR68C92/192
while the XR68C92/192 has an interrupt pending, the          sampled on two consecutive sampling clocks to detect
XR68C92/192 will place the contents of the interrupt         a change. Also, users can program the XR68C92/192
vector register (IVR, address 0x0C) on the data bus          to allow a change of state in any of the inputs IP0
and assert the data transfer acknowledge signal              through IP3 to generate an interrupt to the CPU. See
(-DACK). If the XR68C92/192 has no pending inter-            description of the Interrupt Status Register (ISR, ad-
rupt, it ignores the -IACK cycles. In addition, users can    dress 0x05) for details. The IPCR bits are cleared when
program the parallel outputs OP3 through OP7 to              the CPU reads the register. Also see the Baud Rate
provide discrete interrupt outputs for the transmitters,     Table on page 18.
the receivers, and the C/T. See 'Multi-purpose Out-
puts' section for details.                                   MULTI-PURPOSE OUTPUTS (OP0 - OP7)
                                                             The eight output pins (OP0 - OP7) can either be used
DATA BUS BUFFER (D0 - D7)                                    as general purpose outputs or can be used for alter-
The data bus buffer provides the interface between the       nate functions representing various conditions using
external and internal data buses. It is controlled by the    - Mode Registers 1 and 2 (MR1A, MR1B, MR2A,
internal control logic to allow read and write data          MR2B)
transfer operations to occur between the controlling         - Output Port Configuration Register (OPCR)
CPU and XR68C92/192 by way of the eight parallel             - Set Output Port Register (SOPR), and
data lines (D0 through D7).                                  - Reset Output Port Register (ROPR).
MULTI-PURPOSE INPUTS (IP0 - IP5)                             OP0 and OP1:
The states of the seven multi-purpose inputs (IP0            The output OP0 can function as the channel A request-
through IP5) can be read from the internal register IPR      to-send (-RTSA) output for either the transmitter
(address 0x0D). The bits in this register are the            (MR2A bit-5 = 1) or the receiver (MR1A bit-7 = 1). Note
complements of the actual inputs - for example, if the       that only one of these bits should be set to '1' at a given
IP0 is low, the corresponding bit in the IPR, bit-0 is a     time. See the description of the transmitter RTS and
logic '1'. Each of these inputs also has an alternate        receiver RTS in the 'Transmitter' and 'Receiver' sec-
control function capability. The alternate functions can     tions of this datasheet respectively. The output OP1
be enabled/disabled on a bit-by-bit basis. The table         acts as the channel B request-to-send (-RTSB) output
below shows how each of these inputs is configured for
its special function.
                                                                                 XR68C92/192
Four change-of-state detectors are associated with
inputs IP0, IP1, IP2, and IP3. If a high-to-low or low-to-
high transition occurs on any of these inputs, the
corresponding bit in the input port change register
                                                                                     200 - 500 kΩ
(IPCR - address 0x04) will be set accordingly. The
sampling clock of the change detectors is the XTAL1/
96 tap of the baud rate generator, which is 38.4kHz if                    XTAL1                   XTAL2
XTAL1 is 3.6864MHz. A new input level must be
                                                                                    Y1
  Input      Function           Programming
  IP0      -CTSA         Set MR2A bit-4 = 1                                         3.6864MHz
  IP1      -CTSB         Set MR2B bit-4 = 1                                         C1              C2
  IP2      C/T Ext. Clk  Set ACR[6:4] = 000                                       22-47pF         22-47pF
  IP3      TxA Ext. Clk  Set CSRA[3:0] = 1110 or 1111
  IP4      RxA Ext. Clk  Set CSRA[7:4] = 1110 or 1111
  IP5      TxB Ext. Clk  Set CSRB[3:0] = 1110 or 1111                Figure 1: Crystal Connection
    Rev. 1.33
                                                           8


                                                                                    XR68C92/192
and is controlled in a similar way by the channel B            NOTE: The terms assertion and negation will be used
registers.                                                     extensively to avoid confusion when dealing with a
                                                               mixture of “active low” and “active high” signals. The
OP2 - OP7:                                                     term assert or assertion indicates that a signal is active
The other outputs (OP2 - OP7) are configured via the           or true, independent of whether that level is repre-
OPCR. Please see the description under the OPCR                sented by a high or low voltage. The term negate or
register for the details.                                      negation indicates that a signal is inactive or false.
CRYSTAL INPUTS (XTAL1 & XTAL2)                                 IP3 or IP5: see CSR bits 3:0). After the transmission of
If a crystal is used, it is connected between XTAL1 and        the stop bits, and a new character is not available in the
XTAL2, in which case a capacitor of approximately 22           transmit FIFO, the transmitter serial data output (TXA,
to 47 pF should be connected from each of these pins           TXB) remains high. Transmission resumes when the
to ground (see Figure 1). If an external CMOS-level            CPU loads a new character into the transmit FIFO. If
clock is used, the pin XTAL2 must be left open.                the transmitter receives a disable command (CRA,
                                                               CRB bits 3:2), it will continue operating until the char-
RESET                                                          acter in the transmit shift register is completely sent
                                                               out. Other characters in the FIFO are neither sent nor
The XR68C92/192 can be reset by asserting the
                                                               discarded, but will be sent when the transmitter is re-
-RESET signal or by programming the appropriate
                                                               enabled.
internal registers. A hardware reset (assertion of
-RESET) clears the following registers:                        TX RTS Control: Users can program the transmitter to
• Status Registers A and B (SRA and SRB)                       automatically negate the request-to-send (RTS) out-
• Interrupt Mask Register (IMR)                                put (alternate function of OP0 and OP1 for channels A
                                                               and B respectively) on completion of a message trans-
• Interrupt Status Register (ISR)                              mission (using MR2A, MR2B bit-5). If the transmitter is
• Output Port Configuration Register (OPCR)                    programmed to operate with RTS control, the RTS
RESET also performs the following operations:                  output must be manually asserted before each mes-
                                                               sage is transmitted. Also, the transmitter needs to be
• Initializes the interrupt vector register (IVR) to 0x0F.
                                                               disabled after all the required data are loaded into the
• Places the outputs OP0 through OP7 in the high               FIFO. Then, the RTS output will be automatically
   state                                                       negated when the transmit-shift register and the TX
• Places the counter/timer in counter mode                     FIFO are both empty. In automatic RTS mode, no more
• Places channels A and B in the inactive state with the       characters can be written to the FIFO after the trans-
   transmitter serial-data outputs (TXA and TXB) in the        mitter is disabled.
   mark (high) state.                                          If auto clear-to-send (CTS) control is enabled (using
Reset commands can be programmed through the                   MR2A, MR2B bit-4), the CTS input (alternate function
command registers to reset the receiver, transmitter,          of IP0 and IP1 for channels A and B respectively) must
error status, or break-change interrupts for each chan-        be asserted (low) in order for the character to be
nel.                                                           transmitted. If it gets negated (high) in the middle of a
                                                               transmission, the character in the shift register is
TRANSMITTER                                                    transmitted and the transmit data output (TXA, TXB)
The transmitter converts the parallel data from the            then remains in the marking state until CTSA, CTSB
CPU to a serial bit stream on the transmitter output pin       gets asserted again.
(TXA, TXB). It automatically sends a start bit followed
                                                               The transmitter can also be forced to send a continu-
by the programmed number of data bits, an optional
                                                               ous low (space) condition by issuing the start-break
parity bit, and the programmed number of stop bits.
                                                               command (see CRA, CRB bits 7:4). The state of CTS
The least-significant bit is sent first. Data is shifted out
                                                               is ignored by the transmitter when it is set to send a
the transmit serial data output pin (TXA, TXB) on the
                                                               break.
falling edge of the programmed clock source (XTAL1,
     Rev. 1.33
                                                             9


XR68C92/192
A start-break is deferred as long as the transmitter has         locations in XR68C92/192 respectively) and a receive
characters to send, but if normal character transmis-            shift register connected to the receiver serial-data
sion is inhibited by CTS, the start-break will proceed.          input. Data is assembled in the shift register and
The start-break must be terminated by a stop-break or            loaded into the bottom most empty FIFO location. If the
a TX disable + TX reset before normal character                  character length is less than eight bits, the most
transmission can resume.                                         significant unused bits are set to zero.
The channel A and B transmitters are enabled for data            If the stop bit is sampled as a 1, the receiver will
transmission through their respective command regis-             immediately look for the next start bit. However, if the
ters (see CRA, CRB bits 3:2). The transmit FIFO                  stop bit is sampled as a 0, either a framing error or a
trigger levels (see MR0A, MR0B bits 4 and 5) are used            received break has occurred. If the stop bit is 0 and the
to generate an interrupt request to the CPU on the -INT          data and parity (if any) are not all zero, it is a framing
pin. This is also reflected in the Interrupt Status Regis-       error. The damaged character is transferred to the
ter, ISR bit-0 for channel A and bit-4 for channel B. This       FIFO with the framing error flag set. If the receiver
is different from the TxRDY bit in the status register.          serial data remains low for one-half of the bit period
                                                                 after the stop bit was sampled, the receiver operates as
The TxRDY bit in the status register (SRA, SRB bit-2)
                                                                 if a new start bit transition has been detected. If the stop
indicates if the TX FIFO has at least one empty
                                                                 bit is 0 and the data and parity (if any) bits are also all
location. This can also be programmed to appear at
                                                                 zero, it is a break. A character consisting of all zeros will
the output pin OP6/OP7. The TxEMT bit (SRA, SRB
                                                                 be loaded into the the FIFO with the received-break bit
bit-3) indicates if both the TX FIFO and the TX Shift
                                                                 (but not the framing error bit) set to one. The receiver
Register are empty.
                                                                 serial-data input must return to a high condition for at
The transmitter can be reset through a software com-             least one-half bit time before a search for the next start
mand (CRA, CRB bits 7:4). If it is reset, operation              bit begins. Also, at this time, the received break bit is
ceases immediately and must be enabled through the               reset.
command register before resuming operation. Reset
                                                                 The receiver can detect a break that starts in the middle
also discards any characters in the FIFO.
                                                                 of a character provided the break persists completely
                                                                 through the next character time or longer. When the
RECEIVER
                                                                 break begins in the middle of a character, the receiver
The channel A and B receivers are enabled for data               will place the damaged character in the FIFO with the
reception through the respective channels command                framing error bit set. Then, provided the break persists
register (CRA, CRB bits 1:0). The channels receiver              through the next character time, the receiver will also
looks for the high-to-low (mark-to-space) transition of          place an all-zero character in the FIFO with the re-
a start bit on the receiver serial-data input pin. If            ceived-break bit set. The parity error, framing error,
operating in 16X clock mode, the serial input data is re-        overrun error, and received-break conditions (if any)
sampled on the next 7 clocks. If the receiver serial data        set error and break flags in the status register at the
is sampled high, the start bit is invalid and the search         received character boundary and are valid only when
for a valid start bit begins again. If receiver serial data      the receiver-ready bit (RXRDY) in the status register is
is still low, a valid start bit is assumed and the receiver      set.
continues to sample the input at one bit time intervals
(at the theoretical center of the bit) until the proper          The receiver-ready bit in the status register (SRA, SRB
number of data bits and the parity bit (if any) have been        bit-0) is set whenever one or more characters are
assembled and one stop bit has been detected. If an 1X           available to be read by the CPU. A read of the receiver
clock is used, data is sampled at one bit time intervals         buffer produces an output of data from the top of the
throughout, including the start bit. Data on the receiver        FIFO stack. After the read cycle, the data at the top of
serial data input pin is sampled on the rising edge of the       the FIFO stack and its associated status bits are
programmed clock source (XTAL1, IP4 or IP6: see                  “popped” and new data can be added at the bottom of
CSR bits 7:4).                                                   the stack by the receive shift register. The FIFO-full
                                                                 status bit (SRA, SRB bit-1) is set if all 8 (or 16) stack
In this process, the least significant bit is received first.    positions are filled with data. Either the receiver-ready
The receiver buffer is composed of the FIFO (8/16
    Rev. 1.33
                                                              10


                                                                                        XR68C92/192
or the FIFO-full status bits can be selected to cause an         receiver when a valid start bit is received and the FIFO
interrupt (see MR1A, MR1B bit-6).                                stack is full. When a FIFO position becomes available,
                                                                 the request-to-send output will be reasserted auto-
In addition to the data byte, three status bits (parity
                                                                 matically by the receiver. Connecting the request-to-
error, framing error, and received break) are appended
                                                                 send output to the clear-to send (CTS) input of a
to each data character in the FIFO (overrun is not). By
                                                                 transmitting device prevents overrun errors in the
programming the error-mode control bit (MR1A, MR1B
                                                                 receiver. The RTS output must be manually asserted
bit-5), status can be provided for “character” or “block”
                                                                 the first time. Thereafter, the receiver will control the
modes. In the “character” mode, the status register
                                                                 RTS output.
(SRA, SRB) is updated on a character-by-character
basis and applies only to the character at the top of the        If the FIFO stack contains characters and the receiver
FIFO. Thus, the status must be read before the char-             is then disabled, the characters in the stack can still be
acter is read. Reading the character pops the data byte          read but no additional characters can be received until
and its error flags off the FIFO. In the “block” mode, the       the receiver is again enabled. If the receiver is disabled
status provided in the status register for the parity error,     while receiving a character, or while there is a charac-
framing error, and received-break conditions are the             ter in the shift register waiting for a FIFO opening, these
logical OR of these respective bits, for all the data bytes      characters are lost. If the receiver is reset, the FIFO
in the FIFO stack since the last reset error command             stack and all of the receiver status bits, the correspond-
(see CRA, CRB bits 7:4) was issued. That is, beginning           ing output ports, and the interrupt request are reset. No
immediately after the last reset-error command was               additional characters can be received until the receiver
issued, a continuous logical-OR function of corre-               is again enabled.
sponding status bits is produced in the status register
as each character enters the FIFO.                               LOOPBACK MODES
The block mode is useful in applications requiring the           Besides the normal operation mode in which the re-
exchange of blocks of information where the software             ceiver and transmitter operate independently, each
overhead of checking each character's error flags                XR68C92/192 channel can be configured to operate in
cannot be tolerated. In this mode, entire messages can           various looping modes (see MR2A, MR2B bits 7:6) that
be received and only one data integrity check is per-            are useful for local and remote system diagnostic
formed at the end of each message. Although data                 functions.
reception in this manner has speed advantages, there
                                                                 AUTOMATIC ECHO MODE
are also disadvantages. If an error occurs within a
message the error will not be recognized until the final         In this mode, the channel automatically retransmits the
check is performed. Also, there is no indication of              received data on a bit-by-bit basis. The local CPU-to-
which character(s) is in error within the message.               receiver communication continues normally but the
                                                                 CPU-to-transmitter link is disabled.
Reading the status register (SRA, SRB) does not affect
the FIFO. The FIFO is “popped” only when the receive             LOCAL LOOPBACK MODE
buffer is read. If the FIFO is full when a new character         In this mode, the transmitter output is internally con-
is received, that character is held in the receive shift         nected to the receiver input. The external TX pin is held
register until a FIFO position is available. If an addi-         in the mark (high) state in this mode. By sending data
tional character is received while this state exists, the        to the transmitter and checking that the data as-
contents of the FIFO are not affected, but the character         sembled by the receiver is the same data that was sent,
previously in the shift register is lost and the overrun-        proper channel operation can be assured. In this mode
error status bit will be set upon receipt of the start bit of    the CPU-to-transmitter and CPU-to-receiver commu-
the new overrunning character.                                   nications continue normally.
To support flow control, a receiver can automatically            REMOTE LOOPBACK MODE
negate and reassert the request-to-send (RTS) output
(RX RTS control - see MR1A, MR1B bit-7). The re-                 In this mode, the channel automatically retransmits the
quest-to-send output (at OP0 or OP1 for channel A or             received data on a bit-by-bit basis. The local CPU-to-
B respectively) will automatically be negated by the             receiver and CPU-to-transmitter links are disabled.
    Rev. 1.33
                                                              11


XR68C92/192
This mode is useful in testing the receiver and transmit-         tag). The received character is discarded if the received
ter operation of a remote channel. This mode requires             address/data bit is a '0' (data tag). If the receiver is
the remote channel receiver to be enabled.                        enabled, all received characters are transferred to the
                                                                  CPU during read operations. In either case, the data
MULTIDROP MODE - Enhanced with Extra A/D Tag                      bits are loaded into the data portion of the FIFO stack
Storage                                                           while the address/data bit is loaded into the status
Users can program the channel to operate in a wake-               portion of the FIFO stack normally used for parity error
up mode for Multidrop applications. In this mode of               (SRA, SRB bit-5). Framing error, overrun error, and
operation (set MR1A, MR1B bits 4:3 = 11), the                     break-detection operate normally regardless of whether
XR68C92/192, as a master station channel connected                the receiver is enabled or disabled. The address/data
to several slave stations (a maximum of 256 unique                (A/D) tag takes the place of the parity bit and parity is
slave stations), transmits an address character fol-              neither calculated nor checked for characters in this
lowed by a block of data characters targeted for one or           mode.
more of the slave stations. The channel receivers                 Extra Storage For The A/D Tag: The unique feature of
within the slave stations are disabled, but they continu-         XR68C92/192 is that the the user need not wait at all in
ously monitor the data stream sent out from the master            order to change the A/D tag from address to data
station. When the slave stations' receivers detect an             (whereas in the case of SC26C92, a wait of at least 2
address character, each receiver notifies its respective          bit-times is required before changing the A/D tag). This
CPU by setting receiver ready (-RXRDY) and generat-               allows the user to possibly load the entire polling packet
ing an interrupt, if programmed to do so. Each slave              data to the TX FIFO.
station CPU then compares the received address to its
station address and enables its receiver if the ad-               WATCHDOG TIMER
dresses match. Slave stations that are not addressed,
continue monitoring the data stream for the next ad-              Each of the two receivers (channel A & B) has its own
dress character. An address character marks the                   'watchdog timer' which is separate from and indepen-
beginning of a new block of data. After receiving a block         dent of the Counter/Timer. The watchdog timer is used
of data, the slave stations CPU may disable the chan-             to generate a receive ready time-out interrupt. When it
nel receiver and re-initiate the process.                         is enabled, a counter is started everytime a character
                                                                  is transferred from the receive shift register to the
A transmitted character from the master station con-              receive FIFO and times out after 64 bit-times, at which
sists of a start bit, the programmed number of data bits,         point it will generate a receive interrupt. This is a useful
an address/data (A/D) bit tag (replacing the parity bit           feature especially when the incoming data is not a
used in normal operation), and the programmed num-                continous stream of data. For example, if RX trigger
ber of stop bits. The A/D tag indicates to the slave              levels are used and the last set of characters is smaller
stations channel whether the character should be                  than the trigger level, a receive time-out interrupt is
interpreted as an address character or a data charac-             generated instead of a regular receive interrupt. The
ter. The character is interpreted as an address charac-           watchdog timer, however, is not accurate as it uses the
ter if the A/D tag is set to a '1' or interpreted as a data       incoming data for its timing. For more accurate timing,
character if it is set to a '0'. The polarity of the transmit-    the time-out mode in Counter/Timer should be used
ted A/D tag is selected by programming MR1A, MR1B                 (see below).
bit-2 to a '1' for an address character and to a '0' for data
characters. Users should program the mode register
                                                                  COUNTER/TIMER
prior to loading the corresponding data or address
characters into the transmit buffer.                              The 16-bit counter/timer (C/T) can operate in a counter
                                                                  mode or a timer mode. In either mode, users can
As a slave station, the XR68C92/192 receiver continu-             program the C/T input clock source to come from
ously monitors the received data stream regardless of             several sources (see ACR bits 6:4) and program the
whether it is enabled or disabled. If the receiver is             C/T output to appear on output port pin OP3 (see
disabled, it sets the receiver ready status bit and loads         OPCR bits 3:2). The value (pre-load value) stored in
the character into the FIFO receive holding register              the concatenation of the C/T upper register (CTPU,
stack provided the received A/D tag is a '1' (address             address 0x6) and the C/T lower register (CTPL, ad-
    Rev. 1.33
                                                               12


                                                                                    XR68C92/192
dress 0x7) can be from 0x0001 through 0xFFFF and can           address 0x6 or CLR, at address 0x7) can be read at a
be changed at any time. At power-up and after reset, the       time. If the counter is running, a decrement of CLR that
C/T operates in counter mode.                                  requires a borrow from the CUR could take place
                                                               between the two register reads. Figure 2 shows the
COUNTER MODE                                                   C/T output in the counter mode. OP3 can be pro-
                                                               grammed to show the C/T output.
In counter mode, the CPU can start and stop the C/T.
This mode allows the C/T to function as a system               In addition to the watch dog timer described above, the
stopwatch or a real-time single interrupt generator. In        C/T can be used for receive timeout function (see
this mode, the C/T counts down from the pre-load               description under CRA, CRB in the registers section
value using the programmed counter clock source.               also). The C/T is more accurate and the timeout period
When a read at the start counter command register              is programmable unlike the watchdog timer. However,
(address 0xE) is performed, the counter is initialized to      only one channel can use the C/T for receive timeout
the pre-load value and begins a countdown sequence.            at any given time. The C/T timeout mode uses the
When the counter counts from 0x0001 to 0x0000                  received data stream to start the counter. Each time a
(terminal count), the C/T-ready bit in the interrupt           character is shifted from the receive shift register to the
status register (ISR Bit-3) is set.                            receive FIFO, the C/T is reloaded with the pro-
3                                                              grammed value in CTPU and CTPL and it restarts on
Users can program the counter to generate an inter-            the next C/T clock. If a new character is not received
rupt request for this condition on the -INT output by          before the C/T reaches terminal count (= 0x0000), a
unmasking the bit-3 in the Interrupt Mask Register             counter ready interrupt (ISR bit-3) is generated. The
(IMR, address 0x5). After 0x0000 the count becomes             user can appropriately program the CTPU and CTPL
0xFFFF, and the counter continues counting down                for the desired timeout period. Typically this is slightly
from there. If the CPU changes the pre-load value, the         more than one character time. Note that if C/T is used
counter will not recognize the new value until it receives     for receiver timeout, a counter ready interrupt is gener-
the next start counter command (and is reinitialized).         ated whereas if the watchdog timer is used, a receiver
When a read at the stop counter command register               ready interrupt is generated.
(address 0xF) is performed, the counter stops the
countdown sequence and clears ISR Bit-3. The count             TIMER MODE
value should only be read while the counter is stopped         In the timer mode, the C/T runs continuously once the
because only one of the count registers (either CUR, at        start command is issued (by reading the start C/T
                         START C/T COMMAND
                               ISSUED
                              PRELOAD TERMINAL PRELOAD TERMINAL PRELOAD TERMINAL           PRELOAD
                               VALUE    COUNT       VALUE   COUNT       VALUE     COUNT      VALUE
              C/T OUTPUT IN
               TIMER MODE
                                       PRELOAD TERMINAL     PRELOAD TERMINAL      PRELOAD TERMINAL
                                        VALUE       COUNT     VALUE     COUNT      VALUE     COUNT
                              PRELOAD TERMINAL
                                VALUE   COUNT
                C/T OUTPUT IN
              COUNTER MODE
                         Figure 2: C/T output in Timer and Counter modes.
    Rev. 1.33
                                                           13


XR68C92/192
command register) and the CPU cannot stop it. When             ample, changing the number of bits per character while
the stop command is issued (by reading the stop C/T            the transmitter is active will result in transmitting an
command register), the CPU only resets the C/T inter-          incorrect character. The contents of the clock-select
rupt. This mode allows the C/T to be used as a                 register (CSR) and ACR Bit-7 should only be changed
programmable clock source for channels A and B (see            after the receiver(s) and transmitter(s) have been
CSRA, CSRB register), and/or a periodic interrupt              issued software RX and TX reset commands. Simi-
generator. In this mode, the C/T generates a square-           larly, changes to the auxiliary control register (ACR Bits
wave output (see Figure 2) derived from the pro-               4-6) should only be made while the counter/timer (C/T)
grammed timer input clock source. The square wave              is not used.
generated by the timer has a period of 2 X (pre-load
                                                               The mode registers of each channel MR0, MR1 and
value) X (period of clock source) and is available as a
                                                               MR2 are accessed via an auxiliary pointer. The pointer
clock source for both channels A and B. Since the timer
                                                               is set to mode register one (MR1) by RESET. It can be
cannot be stopped, the values in the registers
                                                               set to MR0 or MR1 by issuing a “reset pointer”
(CUR:CLR) should not be read. See description of
                                                               command (0xB0 or 0x10 respectively) via the
ACR register to see how to choose clock source for the
                                                               channel's command register. Any read or write of the
C/T.
                                                               mode register switches the pointer to next mode reg-
When the start counter command register (STCR,                 ister. All accesses subsequent to reading/writing MR1
address 0xE) is read, the C/T terminates the current           will address MR2 unless the pointer is reset to MR0 or
countdown sequence and sets its output to a '1' (OP3           MR1 as described above. The mode, command,
can be programmed to show this output). The C/T is             clock-select, and status registers are duplicated for
then initialized to the pre-load value, and begins a new       each channel to allow independent operation and
countdown sequence. When the terminal count is                 control (except that both channels are restricted to
reached (0x0000), the C/T sets its output to a '0'. Then,      baud rates that are in the same set).
it gets re-initialized to the pre-load value and repeats
the countdown sequence. See Figure 2 for the result-
ing waveform.
The timer sets the C/T-ready bit in the interrupt status
register (ISR Bit-3) every other time it reaches the
terminal count (at every rising edge of the output).
Users can program the timer to generate an interrupt
request for this condition (every second countdown
cycle) on the -INT output. If the CPU changes the pre-
load value, the timer will not recognize the new value
until either
(a) it reaches the next terminal count and is reinitialized
    automatically, or
(b) it is forced to re-initialize by a start command.
When a read at the stop counter command address is
performed, the timer clears ISR Bit-3 but does not stop.
Because in timer mode the C/T runs continuously, it
should be completely configured (pre-load value
loaded and start counter command issued) before
programming the timer output to appear on OP3.
OTHER PROGRAMMING REMARKS
The contents of internal registers should not be
changed during receiver/transmitter operation as cer-
tain changes can produce undesired results. For ex-
    Rev. 1.33
                                                            14


                                                             XR68C92/192
INTERNAL REGISTER DESCRIPTIONS
  A3 A2 A1 A0              READ Operation                    WRITE Operation
   0  0    0 0  Mode Register A (MR0A, MR1A, MR2A) Mode Register A (MR0A, MR1A, MR2A)
   0  0    0 1  Status Register A (SRA)            Clock-Select Register A (CSRA)
   0  0    1 0  Reserved                           Command Register A (CRA)
   0  0    1 1  Receiver Buffer A (RXA)            Transmitter Buffer A (TXA)
   0  1    0 0  Input Port Change Register (IPCR)  Auxiliary Control Register (ACR)
   0  1    0 1  Interrupt Status Register (ISR)    Interrupt Mask Register (IMR)
   0  1    1 0  Counter/Timer Upper Register (CUR) C/T Preload value Upper Register (CTPU)
   0  1    1 1  Counter/Timer Lower Register (CLR) C/T Preload value Lower Register (CTPL)
   1  0    0 0  Mode Register B (MR0B, MR1B, MR2B) Mode Register B (MR0B, MR1B, MR2B)
   1  0    0 1  Status Register B (SRB)            Clock-Select Register B (CSRB)
   1  0    1 0  Reserved                           Command Register B (CRB)
   1  0    1 1  Receiver Buffer B (RXB)            Transmitter Buffer B (TXB)
   1  1    0 0  Interrupt Vector Register (IVR)    Interrupt Vector Register (IVR)
   1  1    0 1  Input Port Register (IPR)          Output Port Configuration Register (OPCR)
   1  1    1 0  Start C/T Command (STCR)           Set Output Port Register (SOPR)
   1  1    1 1  Stop C/T Command (SPCR)            Reset Output Port Register (ROPR)
   Rev. 1.33
                                                15


XR68C92/192
 A3 A2 A1 A0  Register     BIT-7     BIT-6       BIT-5      BIT-4     BIT-3   BIT-2    BIT-1   BIT-0
              [Default]
  0  0   0  0  MRA0[00]   Watch        RX          TX         TX       Not     Baud   Factory   Baud
                        dog timer   trigger     trigger    trigger    used      rate     test    rate
                                   level [1]   level [1]   level [0]          ext. 2    mode   ext. 1
  1  0   0  0  MRB0[00]   Watch        RX          TX         TX       Not      Not      Not     Not
                        dog timer   trigger     trigger    trigger    used     used     used    used
                                   level [1]   level [1]   level [0]
  0  0   0  0  MRA1[00]     RX         RX        Error      Parity    Parity  Parity    Word    Word
  1  0   0  0 MRB1[00]      RTS     trigger      mode       mode      mode     type    length  length
                          control   level [0]
  0  0   0  0 MRA2[00]  Loopback Loopback          TX        Auto     Stop     Stop     Stop    Stop
  1  0   0  0 MRB2[00]     mode      mode         RTS        CTS        bit       bit      bit     bit
                          select    select     control    control    length   length   length  length
  0  0   0  1  SRA[00]  Received   Framing       Parity   Overrun       Tx        Tx  Rx FIFO     Rx
  1  0   0  1  SRB[00]     break     error       error       error   empty    ready       full ready
  0  0   0  1 CSRA[00]      RX         RX          RX         RX       TX        TX       TX      TX
  1  0   0  1 CSRB[00]     clock     clock       clock      clock     clock    clock    clock   clock
  0  0   1  0  CRA[00]     Misc.     Misc.       Misc.      Misc.      TX        TX       RX      RX
  1  0   1  0  CRB[00]  command   command     command    command     disable  enable  disable  enable
  0  0   1  1 RXA[XX]      Bit-7     Bit-6       Bit-5       Bit-4    Bit-3    Bit-2    Bit-1   Bit-0
  1  0   1  1 RXB[XX]
  0  0   1  1 TXA[XX]      Bit-7     Bit-6       Bit-5       Bit-4    Bit-3    Bit-2    Bit-1   Bit-0
  1  0   1  1  TXB[XX]
  0  1   0  0  IPCR[00]    Delta     Delta       Delta       Delta     IP3       IP2      IP1     IP0
                            IP3        IP2         IP1        IP0     input    input    input   input
  0  1   0  0  ACR[00]     Baud       C/T         C/T         C/T     Delta    Delta    Delta   Delta
                         rate set    mode        mode       mode       IP3       IP2      IP1     IP0
                          select                                       int.      int.     int.    int.
  0  1   0  1   ISR[00]    Input     Delta        RxB        TxB       C/T     Delta    RxA      TxA
                            port   break B      ready       ready    ready   break A   ready   ready
                         change
  0  1   0  1   IMR[00]    Input     Delta        RxB        TxB       C/T     Delta    RxA      TxA
                            port   break B      ready       ready    ready   break A   ready   ready
                         change
  0  1   1  0 CTPU[00]    Bit-15     Bit-14     Bit-13      Bit-12   Bit-11   Bit-10    Bit-9   Bit-8
               CUR[00]
  0  1   1  1 CTPL[00]     Bit-7     Bit-6       Bit-5       Bit-4    Bit-3    Bit-2    Bit-1   Bit-0
               CLR[00]
  1  1   0  0   IVR[0F]    Bit-7     Bit-6       Bit-5       Bit-4    Bit-3    Bit-2    Bit-1   Bit-0
  1  1   0  1   IPR[XX]     Not       Not          IP5        IP4      IP3       IP2      IP1     IP0
                           Used      Used
  1  1   0  1 OPCR[00]      OP7       OP6         OP5        OP4       OP3      OP3      OP2     OP2
  1  1   1  0 STCR[XX]       X          X           X          X        X         X        X       X
  1  1   1  0 SOPR[00]     Bit-7     Bit-6       Bit-5       Bit-4    Bit-3    Bit-2    Bit-1   Bit-0
  1  1   1  1 SPCR[XX]       X          X           X          X        X         X        X       X
  1  1   1  1 ROPR[00]     Bit-7     Bit-6       Bit-5       Bit-4    Bit-3    Bit-2    Bit-1   Bit-0
   Rev. 1.33
                                                      16


                                                                                 XR68C92/192
MODE REGISTER 0 (MR0A, MR0B)
This register is accessed only when command is               MR0A, MR0B Bit-7:
applied via CRA, CRB register (upper nibble = 0xB).          Receive time-out (watch dog timer).
After reading or writing to MR0A (or MR0B) register,         0 = Disabled (default)
the mode register pointer will point to MR1A (or MR1B)       1 = Enabled
register.                                                    See description under 'Watchdog Timer'.
MR0A Bit-0:                                                  MODE REGISTER 1 (MR1A, MR1B)
Extended baud rate table selection for both channels.
                                                             MR1A, MR1B are accessed after reset or by command
 0 = Normal baud rate tables
                                                             applied via CRA, CRB register (upper nibble = 0x1).
 1 = Extended baud rate tables 1
                                                             After reading or writing to MR1A (or MR1B) register,
MR0A Bit-1: Special Function.                                the mode register pointer will point to MR2A (or MR2B)
 0 = Normal                                                  register.
 1 = Factory test mode
                                                             MR1A, MR1B Bits 1-0:
MR0A Bit-2:                                                  Character Length
Extended baud rate table selection for both channels.        0 0 = 5 (default)         10=7
0 = Normal baud rate tables                                  01=6                      11=8
1 = Extend baud rate tables 2
                                                             MR1A, MR1B Bit-2:
MR0A Bit-3, MR0B Bits 3-0:                                   In non-Multidrop mode, this bit selects the parity.
Not Used. Any write to this bit is ignored.                  0 = Even Parity (default)
MR0A, MR0B Bits 5-4:                                         1 = Odd Parity
Transmit trigger level select.                               In Multidrop mode, this bit is the Address/Data flag.
Bit-5     Bit-4           XR68C92                            0 = Data (default)
  0        0        8  FIFO locations empty (default)        1 = Address
  0        1        4  FIFO locations empty                  MR1A, MR1B Bit 4-3: Parity mode.
  1        0        6  FIFO locations empty                  00 = With parity (default) 10 = No parity
  1        1        1  FIFO location empty                   01 = Force parity              11 = Multidrop mode
Bit-5     Bit-4           XR68C192                           MR1A, MR1B Bit-5: Data error mode.
  0        0      16   FIFO locations empty (default)        0 = Single Character mode (default)
  0        1        6  FIFO locations empty                  1 = Block (FIFO) mode
  1        0      12   FIFO locations empty
                                                             MR1A, MR1B Bit-6.
  1        1        1  FIFO location empty
                                                             Receive trigger levels. See description under MR0 bit-
MR0A, MR0B Bit-6:                                            6.
Receive trigger level select. This bit is associated with
                                                             MR1A, MR1B Bit-7: Receive RTS flow control.
MR1 Bit-6.
                                                             0 = No RX RTS control function (default)
MR0 Bit-6       MR1 Bit-6         XR68C92                    1 = Auto RX RTS control function
    0             0          1   byte in FIFO (default)      The output OP0 (OP1) serves as the -RTS signal for
    0             1          3   bytes in FIFO               channel A (channel B). Note that MR2 A/B bit-5 also
    1             0          6   bytes in FIFO               controls OP0 (OP1). Only one of MR1 bit-7 or MR2 bit-
    1             1          8   bytes in FIFO               5 should be set to '1'.
MR0 Bit-6       MR1 Bit-6         XR68C192                   MODE REGISTER 2 (MR2A, MR2B)
     0            0          1   byte in FIFO (default)      This register is accessed after any read or write
     0            1          6   bytes in FIFO               operation to MR1A (or MR1B) register is performed.
     1            0         12   bytes in FIFO               Any read or write to MR2A (or MR2B) does not change
     1            1         16   bytes in FIFO               the mode register pointer. User should use one of the
    Rev. 1.33
                                                          17


XR68C92/192
two reset MR pointer command (see Command                    SRA, SRB Bit-3: Transmit Empty.
Register) to reset the pointer to MR0 or MR1.                This bit will be set when the channel's transmitter is
MR2A, MR2B Bits 3-0: Stop bit length.                        empty. It indicates that both the transmit FIFO and the
                                                             transmit shift register are empty. It is set after transmis-
0000 = 0.563 (default)          1000 = 1.563
                                                             sion of the last stop bit of the last character in the TX
0001 = 0.625                    1001 = 1.625
                                                             FIFO. It is cleared when the CPU loads a character into
0010 = 0.688                    1010 = 1.688
                                                             the transmit FIFO or when the transmitter is disabled.
0011 = 0.750                    1011 = 1.750
0100 = 0.813                    1100 = 1.813                 SRA, SRB Bit-4: Overrun Error.
0101 = 0.875                    1101 = 1.875                 This bit is set when one or more characters in the
0110 = 0.938                    1110 = 1.938                 received data stream have been lost. It is set on receipt
0111 = 1.000                    1111 = 2.000                 of a valid start bit when the FIFO is full and a character
                                                             is already in the receive shift register waiting for an
MR2A, MR2B Bit-4: Auto CTS Flow control.
                                                             empty FIFO position. When this occurs, the character
0 = No Auto CTS flow control (default)
                                                             in the receive shift register (and its break detect, parity
1 = Auto CTS flow control enabled
                                                             error, and framing error status, if any) is overwritten. A
MR2A, MR2B Bit-5: Auto Transmit RTS control.                 reset error status command clears this bit.
0 = No Auto TX RTS control (default)
                                                             SRA, SRB Bit-5: Parity Error.
1 = Auto Transmit RTS function enabled
                                                             This bit is set when the “with parity” or “force parity”
The output OP0 (OP1) serves as the -RTS signal for
                                                             mode is programmed by MR1A (or MR1B) and an
channel A (channel B). Note that only one of MR1 bit-
                                                             incoming character is received with incorrect parity. In
7 or MR2 bit-5 should be set to '1'.
                                                             the Multidrop mode, the parity error bit position stores
MR2A, MR2B Bit 7-6: Loopback mode select.                    the received address/data tag. This bit is valid only
0 0 = No loopback (default)                                  when the RxRDY bit is set (SRA, SRB bit-0 = 1).
0 1 = Automatic Echo
                                                             SRA, SRB Bit-6: Framing Error.
1 0 = Local Loopback
                                                             This bit is set when a stop bit was not detected when the
1 1 = Remote Loopback
                                                             corresponding data character in the FIFO was re-
STATUS REGISTER (SRA, SRB)                                   ceived. The stop bit check is made in the middle of the
                                                             first stop bit position. At least one bit in the received
SRA, SRB Bit-0: Receive Ready.                               character (data or parity) must have been a “1” to signal
This bit indicates that one or more character(s) has         a framing error. After a framing error, the receiver does
been received and is waiting in the FIFO for the CPU         not wait for the line to return to the marking state (high).
to read them. It is set when the first character is          If the line remains low for 1/2 a bit time after the stop bit
transferred from the receive shift register to the empty     sample (that is, the nominal end of the first stop bit), the
FIFO, and cleared when the CPU reads the receiver            receiver treats it as the beginning of a new start bit.This
buffer and there are no more characters in the FIFO          bit is valid only when the RxRDY bit is set (SRA, SRB
after the read.                                              Bit-0 = 1).
SRA, SRB Bit-1: Receive FIFO Full.                           SRA, SRB Bit-7: Received Break.
This bit is set when a character is transferred from the     This bit indicates a character with all data bits being
receive shift register to the receiver FIFO and the          zero has been received without a stop bit. This bit is
transfer fills the FIFO. All eight (or 16 in XR88C192)       valid only when the RxRDY bit is set (SRA, SRB Bit-0
FIFO locations are occupied. It is cleared when the          = 1). Only a single FIFO position is occupied when a
CPU reads the receiver buffer, unless another charac-        break is received; for longer break signals, additional
ter is in the receive shift register waiting for an empty    entries to the FIFO are inhibited until the channel A/B
FIFO location.                                               receiver serial data input line returns to the marking
SRA, SRB Bit-2: Transmit Ready.                              state. The break-detect circuitry can detect a break
This bit (when set) indicates that the transmit FIFO is      that starts in the middle of a received character      how-
not full. Transmitter ready bit is set when the transmit     ever, the break condition must persist completely
FIFO has at least one empty location. This bit is cleared    through the end of the current character and the next
when the transmit FIFO is full.                              character time to be recognized as a break signal.
    Rev. 1.33
                                                          18


                                                                                     XR68C92/192
Baud Rate Table for a 3.6864MHz clock. Data rates would double for a 7.3728MHz clock.
                                   MR0A Bits                  MR0A Bit-0=1                MR0A Bit-0=0
                                     2,0=0                     Bit-2=0                         Bit-2=1
                                                          (extended table 1)          (extended table 2)
            CSRA, CSRB        SET-1         SET-2         SET-1         SET-2         SET-1            SET-2
            Bits 7:4 or        ACR           ACR           ACR            ACR          ACR             ACR
            Bits 3:0         Bit-7=0       Bit-7=1       Bit-7=0       Bit-7=1        Bit-7=0          Bit-7=1
            0000 (default)      50            75            300           450          4800            7200
                0001           110           110            110           110           880            880
                0010          134.5         134.5          134.5         134.5         1076            1076
                0011           200           150           1200           900          19.2k           14.4k
                0100           300           300           1800          1800          28.8k           28.8k
                0101           600           600           3600          3600          57.6k           57.6k
                0110          1200          1200           7200          7200         115.2k           115.2k
                0111          1050          2000           1050          2000          1050            2000
                1000          2400          2400           14.4k         14.4k         57.6k           57.6k
                1001          4800          4800           28.8k         28.8k         4800            4800
                1010          7200          1800           7200          1800          57.6k           14.4k
                1011          9600          9600           57.6k         57.6k         9600            9600
                1100          38.4k         19.2k         230.4k       115.2k          38.4k           19.2k
                1101          Timer         Timer          Timer         Timer         Timer           Timer
                1110*            IP3-16X (CSRA 3:0), IP4-16X (CSRA 7:4), IP5-16X (CSRB 3:0), IP6-16X (CSRB 7:4)
                1111*            IP3-1X (CSRA 3:0), IP4-1X (CSRA 7:4), IP5-1X (CSRB 3:0), IP6-1X (CSRB 7:4)
     * Baud Rate is independent of MR0 bit-0 & bit-2 and ACR bit-7 settings.
CLOCK SELECT REGISTER (CSRA, CSRB)                             CRA, CRB Bits 3-2: Transmitter Commands.
Transmit / Receive baud rates for channels A, B can be         0 0 = No Action, Stays in Present Mode (default)
selected via this register.                                    0 1 = Transmitter Enabled
CSRA, CSRB Bits 3-0.                                           1 0 = Transmitter Disabled
Transmit clock select(see baud rate table).                    1 1 = Don’t Use
CSRA, CSRB Bits 7-4.                                           CRA, CRB Bits 7-4: Miscellaneous Commands.
Receive clock select (see baud rate table).                    0 0 0 0 = No Command (default).
                                                               0 0 0 1 = Reset MR Pointer to MR1.
COMMAND REGISTER (CRA, CRB)                                    0 0 1 0 = Reset Receiver. Receiver is disabled and
CRA, CRB register is used to supply commands to A,                         FIFO is flushed.
B channels respectively. Multiple commands can be              0 0 1 1 = Reset Transmitter. Transmitter is disabled
specified in a single write to CRA, CRB as long as                         and FIFO is flushed.
commands are non-conflicting.                                  0 1 0 0 = Reset Error Status. Clears channel A/B,
                                                                           break, parity, and over-run error bits in the
                                                                           status register.
CRA, CRB Bits 1-0: Receiver Commands.                          0 1 0 1 = Reset Channel's Break-Change Interrupt.
0 0 = No Action, Stays in Present Mode (default)                           Clears channel A/B break detect change bit
0 1 = Receiver Enabled                                                     in the interrupt status register (ISR bit-2 for
1 0 = Receiver Disabled                                                    channel A and ISR bit-6 for channel B).
1 1 = Don’t Use
    Rev. 1.33
                                                           19


XR68C92/192
0 1 1 0 = Start Break. Forces the transmitter output to     RECEIVE BUFFER (RXA, RXB)
          go low and stay low. If transmitter is empty      The receive buffer consists of a 8-characters deep FIFO
          the start of the break condition will be de-      in XR68C92 and 16-characters deep FIFO in XR68C192.
          layed up to two bit times. If transmitter is      The received characters are transferred from the shift
          active, all the characters in the FIFO are        register one at a time to the FIFO and are stored there
          transmitted before break signal is sent.          until read by the CPU or flushed by a reset receiver
          Transmitter must to be enabled for this           command.
          command to work.
0 1 1 1 = Stop Break. Transmit output will go high          TRANSMIT BUFFER (TXA, TXB)
          within two bit times.
1 0 0 0 = Set -RTS output to low (assertion).               The transmit buffer consists of a 8-characters deep
1 0 0 1 = Reset -RTS output to high (negation).             FIFO in XR68C92 and 16-characters deep FIFO in
1 01 0 = Set Timeout Mode On. The receiver in this          XR68C192. Once loaded in the FIFO, the characters
          channel will restart the C/T as each receive      are transferred to the transmit shift register one at a
          character is transferred from the shift regis-    time and transmitted unless the transmitter is disabled.
          ter to the receive FIFO. The C/T is placed in
          the counter mode, the START/STOP                  INPUT PORT CHANGE REGISTER (IPCR)
          counter commands are disabled, the                This is a read-only register which gives the state and
          counter is stopped, and the Counter Ready         the change-of-state information of the multi-purpose
          Bit, ISR Bit-3 is reset. (See also Watchdog       inputs IP0, IP1, IP2 and IP3.
          timer description)                                IPCR Bits 3-0: Levels of IP3 - IP0.
1 0 1 1 = Set MR pointer to MR0.                            These show the current state of IP3, IP2, IP1 and IP0
1 1 0 0 = Disable Timeout Mode. This command re-            respectively.
          turns control of the C/T to the regular Start/    0 = Low
          Stop counter commands. It does not stop           1 = High
          the counter or clear any pending interrupts.
          After disabling the timeout mode, a “Stop         IPCR Bits 7-4: Transitions of IP3 - IP0.
          Counter” command should be issued to              These indicate if there has been a change of state in
          force a reset of the ISR Bit-3.                   IP3, IP2, IP1 and IP0 respectively. They are cleared
1 1 0 1 = Not used.                                         when the register is read by the CPU.
1 1 1 0 = Enable Power Down Mode. In this mode, the         0 = No
          DUART oscillator is stopped and all func-         1 = Yes
          tions requiring this clock are suspended.
          The execution of commands other than dis-         AUXILIARY CONTROL REGISTER (ACR)
          able power down mode (1111) requires a            ACR Bits 3-0:
          XTAL1. While in the power down mode, do           This field selects which bits of the input port change
          not issue any commands to the CRA or CRB          register (IPCR) cause the interrupt status register
          except the disable power down mode com-           (ISR) bit-7 to be set. For example, if bit-0 = 1, then a
          mand. The contents of all registers will be       change of state in IP0 will set ISR bit-7. If bit-0 and bit-
          saved while in this mode. It is recommended       2 are both '1', then whenever IP0 or IP2 changes state,
          that the transmitter and receiver be disabled     ISR bit-7 will be set.
          prior to placing the DUART into power down
          mode. This command is in CRA only.                0 = Disabled (default)
1 1 1 1 = Disable Power Down Mode. This command             1 = Enabled
          restarts the oscillator. After invoking this
                                                            ACR Bits 6-4:
          command, wait for the oscillator to start up
                                                            Counter/Timer Mode and Clock Source. These bits
          before writing further commands to the CR A/
                                                            should not be altered while the C/T is in use. Prior to
          B. For maximum power reduction all input
                                                            changing these bits, the C/T must be stopped if in
          pins should be at GND or VCC. This com-
                                                            counter mode. If the C/T is in timer mode, its output
          mand is in CRA only.
   Rev. 1.33
                                                         20


                                                                                       XR68C92/192
must be disabled and its interrupt must be masked. The          ISR Bit-1: Receive ready A .
following table shows how to select the clock source for        This bit is set when channel A's receive buffer (FIFO) is
the C/T when used in counter mode or timer mode:                filled above the programmed receive trigger level condi-
                                                                tion (see MR0A bit-6 and MR1A bit-6). For example, if
ACR Bit-7: Baud rate table Select.
                                                                a RX trigger level of '6' is chosen, this bit will be set
This bit is used to select between two sets of baud rate
                                                                whenever the RX FIFO contains six or more bytes. This
tables. See Baudrate table on Page 18. It should be
                                                                bit can be cleared by reading the data out of the FIFO
changed only after both channels have been reset and
                                                                till it falls below the trigger level.
disabled.
0 = Set 1                                                       ISR Bit-2: Channel A change in break.
1 = Set 2                                                       This bit is set when channel A receiver detects the
                                                                beginning or the end of a break condition. It is reset
                                                                when the CPU issues a channel A reset break change
  ACR          C/T           Clock Source                       interrupt command (CRA bits 7-4 = 0x5).
 Bits 6:4     Mode
                                                                ISR Bit-3: Counter/Timer (C/T) ready.
  000        Counter    External (IP2)                          In counter mode, this bit is set when the C/T reaches
  001        Counter    TXAClk1-Transmit A 1X clock             terminal count. In timer mode, this bit is set each time
  010        Counter    TXBClk1-Transmit B 1X clock             the C/T output switches from low to high (rising edge -
  011        Counter    Crystal or External Clock               see Figure 2). In either mode, this bit is cleared by a
                        (XTAL1/Clk) Divided by 16               stop counter command.
  100         Timer     External (IP2)
  101         Timer     External (IP2) Divided by 16            ISR Bit-4: Transmit ready B.
  110         Timer     Crystal or External Clock               This bit is set when channel B's transmit buffer (FIFO)
                        (XTAL1/Clk)                             is filled below the programmed transmit trigger level
  111         Timer     Crystal or External Clock               (see MR0B bits 5-4). For example, if a TX trigger level
                        (XTAL1/Clk) Divided by 16               of '4' is chosen, this bit will be set whenever the TX
                                                                FIFO has four or more empty locations. This bit can be
                                                                cleared by loading the TX FIFO above the trigger level.
INTERRUPT STATUS REGISTER (ISR)                                 ISR Bit-5: Receive ready B.
                                                                This bit is set when channel B's receive buffer (FIFO)
This register provides the status of all potential interrupt
                                                                is filled above the programmed receive trigger level
sources. The contents of this register are logically
                                                                condition (see MR0B bit-6 and MR1B bit-6). For ex-
“AND”-ed with the contents of the interrupt mask
                                                                ample, if a RX trigger level of '6' is chosen, this bit will
register, and the results are “OR”-ed. The resulting
                                                                be set whenever the RX FIFO contains six or more
signal is inverted to produce the -INT output. All active
                                                                bytes. This bit can be cleared by reading the data out
interrupt sources are visible by reading the ISR, re-
                                                                of the FIFO till it falls below the trigger level.
gardless of the contents of the interrupt mask register.
Reading the ISR has no effect on any interrupt source.          ISR Bit-6. Channel B change in break.
Each active interrupt source must be cleared in a               This bit is set when channel B receiver detects the
source-specific fashion to clear the ISR. All interrupt         beginning or the end of a break condition. It is reset
sources are cleared when the XR68C92/192 is reset.4             when the CPU issues a channel B reset break change
                                                                interrupt command (CRB bits 7-4 = 0x5).
                                                                ISR Bit-7. Input port change status.
ISR Bit-0: Transmit ready A.
                                                                This bit is set when a change of state has occurred at
This bit is set when channel A's transmit buffer (FIFO)
                                                                the IP0, IP1, IP2, or IP3 inputs, and that event has been
is filled below the programmed transmit trigger level
                                                                enabled to cause an interrupt by programming ACR
(see MR0A bits 5-4). For example, if a TX trigger level
                                                                Bits 3-0. This bit is cleared when the CPU reads the
of '4' is chosen, this bit will be set whenever the TX
                                                                input port change register.
FIFO has four or more empty locations. This bit can be
cleared by loading the TX FIFO above the trigger level.
     Rev. 1.33
                                                             21


XR68C92/192
INTERRUPT MASK REGISTER (IMR)                                  INPUT PORT REGISTER - Read Only
This register selects which bits in the interrupt status       The current state of the multi-purpose inputs (IP0-IP6)
register can cause an interrupt output. If a bit in the        can be read via this register.
interrupt status register is a “1” and the corresponding       IPR Bit 0-5:
bit in this register is also a “1”, the -INT output will be    0 = Inputs are in low state.
asserted. If the corresponding bit in this register is a       1 = Inputs are in high state.
zero, the state of the bit in the interrupt status register
has no effect on the -INT output. Note that the interrupt      IPR Bit 6-7:
mask register does not have any effect on the pro-             Not used and set to “0”.
grammable interrupt outputs OP7 through OP3 or the
value read from the interrupt status register.                 OUTPUT PORT CONFIGURATION REGISTER
0 = Interrupt output (-INT) disabled (default)                 (OPCR) - Write Only
1 = Enable interrupt output for the event controlled by        This register selects following options for the multi-
the corresponding bit in ISR.                                  purpose outputs OP2 to OP7.4Alternate functions of
                                                               OP1 and OP0 are controlled by the mode registers, not
COUNTER / TIMER REGISTERS                                      the OPCR. MR1A Bit-7 and MR2A Bit-5 control OP0.
                                                               MR1B Bit-7 and MR2B Bit-5 control OP1. For more
The Preload value Upper (CTPU) and Lower (CTPL)
                                                               details on these, see 'Multi-purpose Outputs' on page
registers hold the most-significant byte and the least-
                                                               8.
significant byte, respectively, of the value to be used by
the C/T (in both counter and timer modes). The C/T             OP2 Output Select
Upper (CUR) and Lower Registers (CLR) give the                 Bit-1 Bit-0
current value of the C/T, at the time they are read. In the      0     0         Controlled by SOPR and ROPR
counter mode, the CUR and CLR should only be read                                 (default)
when the counter is stopped. Upon receiving a start              0     1         TxAClk16-Transmit A 16X clock
command after a stop command, the counter starts a               1     0         TxAClk1-Transmit A 1X clock
fresh cycle and begins counting down from the original           1     1         RxAClk1- Receive A 1X clock
(preload) value written to CTPU and CTPL. Also
changing the value of these registers does not take            OP3 Output Select
effect till the current cycle is stopped and a subsequent      Bit-3 Bit-2
start command is issued.                                         0      0        Controlled by SOPR and ROPR
                                                                                  (default)
In the timer mode, the CUR and CLR registers cannot              0      1        C/T Output
be read by the CPU. A stop command will not stop the             1      0        TxBClk1-Transmit B 1X clock
timer, but will only clear the counter ready status bit in       1     1         RxBClk1- Receive B 1X clock
ISR (bit-3). Changing the value of the CTPU and CTPL
registers when the timer is running will change the            If OP3 is to be used for the timer output (a square wave
waveform after the current half-period of the square           of the programmed frequency), program the counter/
wave. For more details, see the Counter/Timer sec-             timer for timer mode (ACR Bit-6 = 1), initialize the
tion.                                                          counter/timer pre-load registers (CTPU and CTPL),
                                                               and read the 'Start C/T Command Register' (STCR)
GENERAL PURPOSE REGISTER (GPR)                                 before setting OPCR Bits 3-2 = 01. In the counter
                                                               mode, the output remains high until the terminal count
This is a general purpose scratchpad register which
                                                               is reached, at which time it goes low. The output
can be used to store and retrieve one byte of user
                                                               becomes high again when the counter is stopped by a
infomation.
                                                               stop counter command.
                                                               OP4 output select (Bit 4):
                                                               0 = Controlled by SOPR and ROPR (default)
                                                               1 = -RxARDY which is the complement of ISR bit-1
     Rev. 1.33
                                                            22


                                                                               XR68C92/192
OP5 output select (Bit 5):                                 RESET OUTPUT PORT REGISTER (ROPR) - Write
0 = Controlled by SOPR and ROPR (default)                  Only
1 = -RxBRDY which is the complement of ISR bit-5           Each output port bit can be changed to high state by
OP6 output select (Bit 6):                                 writing a “1” to each individual bit.
0 = Controlled by SOPR and ROPR (default)                  ROPR Bit 0-7:
1 = -TxARDY which is the complement of ISR bit-0           0 = No change (same state).
                                                           1 = Negate the corresponding output (Set it high).
OP7 output select (Bit 7):
0 = Controlled by SOPR and ROPR (default)
1 = -TxBRDY which is the complement of ISR bit-4
START COUNTER/TIMER REGISTER (STCR)                   -
Read Only
Reading from this register will start the C/T. Data
values returned should be ignored.
STOP COUNTER/TIMER REGISTER (SPCR) -
Read Only
Reading from this register will stop the C/T. Data
values returned should be ignored.
SET OUTPUT           PORT     REGISTER       (SOPR) -
Write Only
Output ports (OP0-OP7), when used as general pur-
pose outputs, can be asserted (set to low) by writing a
“1” to the corresponding bit in this register. Once an
output is asserted, it can be negated only by issuing a
command through the Reset Output Port Register (see
below).
However, note that SOPR and ROPR cannot be used
to assert and negate outputs that are programmed for
alternate functions (see description under OPCR). For
example, if OP0 is programmed to output -RTSA (see
'Configuring Multi-purpose Outputs), it cannot be con-
trolled by SOPR or ROPR. In that case, commands
from the Command Register should be issued to
assert (CRA bits 7:4 = 0x8) and negate (CRA bits 7:4
= 0x9) OP0.
SOPR Bit 0-7:
0 = No change (same state).
1 = Assert the corresponding output (Set it low).
    Rev. 1.33
                                                        23


XR68C92/192
PROGRAMMING EXAMPLES
The following examples show how to initialize the XR68C92/192 for various operating conditions:
A) The first example will initialize channel A of an XR68C92 device for regular RX/TX. The operating parameters
   will be 9600 baud, 8 word length, no parity and 1 stop bit.
 Operation       Register   Value         Remarks
 Write           CRA        0x20          ; reset RX (receiver)
 Write           CRA        0x30          ; reset TX (transmitter)
 Write           CRA        0x40          ; reset error status
 Write           CRA        0xB0          ; reset MR pointer to MR0
 Write           MR0A       0x00          ; use normal baud rate table. Now MR pointer points to MR1
 Write           MR1A       0x13          ; select word length & parity. Now MR pointer points to MR2
 Write           MR2A       0x07          ; normal mode (not loopback) & 1 stop bit
 Write           CSRA       0xBB          ; 9600 baud for RX & TX - clock source is XTAL1
 Write           CRA        0x05          ; enable RX & TX
 Read            SRA                      ; should get a value 0x0C
B) This example will show how to use hardware flow control for both RX (RTS via OP0) and TX (CTS via IP0):
 Write           CRA        0x10          ; reset MR pointer to MR1
 Write           MR1A       0x93          ; select auto RTS control. The -RTS signal is sent via output OP0
 Write           MR2A       0x17          ; select auto CTS control. The input IP0 serves as the -CTS signal
C) This example will configure clock sources for TX and RX of both channels and C/T. Specifically, XTAL1 will be used
 as channel A's TX clock; IP4 as channel A's 16X RX clock; IP5 as channel B's 1X TX clock and XTAL1 as channel
 B's RX clock. Also, the C/T will be initialized in the timer mode and IP2 will be used as its clock source. Some
 of these will be programmed to appear at the multi-purpose output pins:
 Write           ACR        0x40          ; C/T initialized in timer mode & IP2 chosen as its clock source
                                          ; also, bit-7 = 0, therefore baud rate Set1 has been selected
 Write           CTPU       0x00          ; It is essential to program CTPU & CTPL before programming OP3
 Write           CTPL       0x05          ; as C/T output (see below)
 Write           CSRA       0xEB          ; channel A RX clock source: IP4-16X, TX clock source: XTAL1 (if MR0A
                                          ; bits 2 and 0 = 0, the TX baud rate is 9600)
 Write           CSRB       0xBF          ; channel B RX clock source: XTAL1 (9600 baud), TX clock source: IP5-1X
 Read            STCR                     ; Start the C/T
 Write           OPCR       0x06          ; C/T output appears at OP3 and channel A's TX 1X clock (this is XTAL1
                            ; clock divided by 16) at OP2.
D) The next example will show how to configure and run channel B's transmitter in a multi-drop application. Note
 that all other relevant parameters should be configured already, like baud rate etc.
 Write           CRB        0x10          ; reset MR pointer to MR1
 Write           MR1B       0x1B          ; word length = 8 and use A/D tag in the place of parity
 Write           CRB        0x04          ; Enable transmitter of channel B
 Write           TXB        address       ; Send the address first (A/D tag = 1)
 Write           CRB        0x10          ; reset MR pointer to MR1
 Write           MR1B       0x13          ; change A/D tag = 0
 Write           TXB        data          ; You can load the data (A/D tag = 0) immediately after the address. There is no
                                          ; need to wait till the transmitter is empty. Load all the data. Check to see if the
 Read            SRB                      ; transmitter is empty & ready. You need to do this before you can load the next
                                          ; address. Repeat the last 5 steps to load different addresses and their data.
   Rev. 1.33
                                                                24


                                                                            XR68C92/192
ABSOLUTE MAXIMUM RATINGS
Supply range                                                                                           7 Volts
Voltage at any pin                                                                 GND - 0.3 V to VCC +0.3 V
Operating temperature                                                                        -40° C to +85° C
Storage temperature                                                                          -65° C to 150° C
Package dissipation                                                                                   500 mW
DC ELECTRICAL CHARACTERISTICS FOR XR68C92 AND XR68C192
TA=0° - 70°C (-40° - +85°C for Industrial grade packages), Vcc=3.3 - 5.0 V ± 10% unless otherwise specified.
  Symbol                        Parameter                      Limits        Limits      Units Conditions
                                                                 3.3           5.0
                                                            Min Max        Min      Max
     VILCK     Clock input low level                        -0.3     0.6  -0.5      0.6   V
     VIHCK     Clock input high level                        2.4    VCC    3.0     VCC    V
               (Devices with top marking of "CC" and older)
     VIHCK     Clock input high level                        2.4     5.5   3.0      5.5   V
               (Devices with top marking of "D2" and newer)
     VIL       Input low level                              -0.3     0.8  -0.5      0.8   V
     VIH       Input high level                              2.0    VCC    2.2     VCC    V
               (Devices with top marking of "CC" and older)
     VIH       Input high level                              2.0     5.5   2.2      5.5   V
               (Devices with top marking of "D2" and newer)
     VOL       Output low level on all outputs                                      0.4   V      IOL= 8 mA
     VOL       Output low level on all outputs                       0.4                  V      IOL= 5 mA
     VOH       Output high level                                           2.4            V      IOH= -8 mA
     VOH       Output high level                             2.4                          V      IOH= -1 mA
     IIL       Input leakage                                        ±10            ±10    µA
     ICL       Clock leakage                                        ±10            ±10    µA
     ICC       Avg power supply current                             1.0*           1.5*  mA
     IPD       Avg power-down supply current (68C92)                100*           150*   µA
     IPD       Avg power-down supply current (68C192)               200*           300*   µA
     CP        Input capacitance                                      5              5    pF
*All inputs tied to VCC/GND.
    Rev. 1.33
                                                        25


XR68C92/192
 AC ELECTRICAL CHARACTERISTICS
TA=0° - 70°C (-40° - +85°C for Industrial grade packages), Vcc=3.3 - 5.0 V ± 10% unless otherwise specified.
 Symbol                    Parameter                        Limits        Limits      Units   Conditions
                                                              3.3           5.0
                                                         Min      Max   Min     Max
    T1w,T2w  Clock pulse duration                         17            17             ns
    T3w      Oscillator/Clock frequency                             8            24   MHz
    TAS      Address Valid to -CS Low                      0             0             ns
    TAH      -CS High to Address Invalid                   0             0             ns
    TRWS     R/-W Setup Time to -CS Low                    0             0             ns
    TRWH     R/-W Hold Time from -CS High                  0             0             ns
    TDD      -CS/-IACK Low to Data Valid (Read)                    51            32    ns
    TDS      Data Valid to -CS High (Write)               20            10             ns
    TDH      -CS High to Data Invalid (Write)              1             1             ns
    TDF      -CS/-IACK High to Data Hi-Z (Read)                    30            20    ns
    TCSL     -CS Low Pulse Width                         100            70             ns
    TCSH     -CS High Pulse Width                        100            70             ns
    TAKL     -CS/-IACK Low to -DACK Low                            70            42    ns
    TAKH     -CS/-IACK High to -DACK High                          45            27    ns
    TAKT     -CS/-IACK High to -DACK Hi-Z                          70            43    ns
    T9s      Port input setup time                         0             0             ns
    T9h      Port input hold time                          0             0             ns
    T10d     Delay from R/-W to output                            110           110    ns
    T11d     Delay to reset interrupt from -CS                    100           100    ns
    TR       Reset pulse width                             2             2            clks*
    N        Baud rate divisor                             1      216-1  1      216-1  N/A
    * number of input clock (crystal or external clock) periods
   Rev. 1.33
                                                       26


                                                          XR68C92/192
                TAS                           TAH
          A4-A1
                         TRWS                        TRWH
           R/-W
                               TCSL
            -CS                                              TCSH
                     TDD                              TDF
          D7-D0               Valid Data
                                                   TAKT
         -DACK
                      TAKL                              TAKH
                              Read Cycle Timing
                TAS                            TAH
          A4-A1
                         TRWS                        TRWH
           R/-W
                               TCSL
            -CS                                               TCSH
                                   TDS
                                                     TDH
          D7-D0
                                                  TAKT
         -DACK
                      TAKL                              TAKH
                              Write Cycle Timing
                  Figure 3: Bus Timing (Read/Write cycle)
Rev. 1.33
                                     27


XR68C92/192
             IP6-IP0
                      T9s                      T9h
                 -CS                                                       XR92-IP
                                Figure 4: Input Port Timing
                  -CS
                                                 T10d
           OP7-OP0         Old Data                              New Data
                                                                            XR92-OP
                             Figure 5: Output Port Timing
                                   T1w          T2w
              ExCLK                                                         XR92-CK
                                          T3w
                          Figure 6: External clock Timing
               -INT
              -IACK
                          TDD                                TDF
             D7-D0               Interrupt Vector
                            TAKL                      TAKH
            -DACK                                                        Hi-Z
                                                         TAKT
                              Figure 7: Interrupt Timing
 Rev. 1.33
                                            28


                                                                          XR68C92/192
      RX          D1        D2          D8          D9          D10         D11        D12        D13
                                                                                   D12, D13 Will be lost
                                                                                   due to RX disable
      RX
ENABLE
 -RxRDY
  -FFULL
-RxRDY/
-FFULL
   -CS
  (Read)             Status Data                                  Status Data Status Data Status Data
                        (D1)               D11 Will be lost          (D2)        (D3)        (D10)
OVERRUN                                     due to overrun                                 Reset by
    ERROR                                                                                  command
    -RTS
                                                                                                XR92-RX
                                 Figure 8: Receive Timing
                     D1               D2          D3        Break         D4                     D5
             TX
             TX
      ENABLE
       -TxRDY
            -CS
          (Write)
          -CTS
          -RTS
                                                                                              XR692-TX
                                 Figure 9: Transmit Timing
    Rev. 1.33
                                               29


XR68C92/192
             P ACKAGE OUTLINE DRAW ING
                                                40 L EAD PLASTIC DUAL-IN-LINE
                                                               (PDIP)
                  40                                                                   21
                                                                                          E1
                  1                                                                    20
                                                      D
                                                                                             A2
 Seat ing A                                                                                  A1
  Plane    L
                         B
                                                        e                      B1
                                                        E
                                                                           C
                                                 α
                                                       eA
                                                       eB
                        Note: T he c ontrol dimens ion is the inc h c olumn
                                              INCHES                  MILLIMETERS
                        SY MBOL
                                         MIN         MA X           MIN         MA X
                            A           0.160        0.250          4.06        6.35
                           A1           0.015        0.070          0.38        1.78
                           A2           0.125        0.195          3.18        4.95
                            B           0.014        0.024          0.36        0.56
                           B1           0.030        0.070          0.76        1.78
                            C           0.008        0.014          0.20        0.38
                            D           1.980        2.095         50.29       53.21
                            E           0.600        0.625         15.24       15.88
                            E1          0.485        0.580         12.32       14.73
                            e               0.100 BSC                   2.54 BSC
                           eA               0.600 BSC                  15.24 BSC
                           eB           0.600        0.700         15.24       17.78
                            L           0.115        0.200          2.92        5.08
                            α             00          15 0           00           15 0
  Rev. 1.33
                                                         30


                                                                                      XR68C92/192
       P ACKAGE OUTLINE DRAW ING
                                  44LEAD PLASTIC LEADED CHIP CARRIER
                                                     (PL CC)
                               D                                                            C
                                                                                                  Seat ing Plane
                             D  1
                                                               45 ° x H 2      45 ° x H 1
                                                                                                      A2
                          2   1    44
                                                                                                           B1
       D   D1                                                                                              B
                                                             D3                                                D2
                                                                                                           e
                                                                                                     R
                               D3
                                                                                               A1
                                                                                             A
                        Note: The c ontrol dimens ion is the inc h c olumn
                                              INCHES                    MILLIMETERS
                        SY MBOL
                                         MIN           MA X            MIN           MA X
                            A           0.165         0.180            4.19          4.57
                           A1           0.090         0.120            2.29          3.05
                           A2           0.020          -----           0.51          ------
                            B           0.013         0.021            0.33          0.53
                           B1           0.026         0.032            0.66          0.81
                            C           0.008         0.013            0.19          0.32
                            D           0.685         0.695           17.40         17.65
                           D1           0.650         0.656           16.51         16.66
                           D2           0.590         0.630           14.99         16.00
                           D3                0.500 ty p                    12.70 ty p
                            e                0.50 BSC                      1.27BSC
                           H1           0.042         0.056            1.07          1.42
                           H2           0.042         0.048            1.07          1.22
                            R           0.025         0.045            0.64          1.14
Rev. 1.33
                                                     31


XR68C92/192
           PACKAGE OUTLINE DRAWING
                           44 LEAD LOW-PROFILE QUAD FLAT PACK
                                              (LQFP)
                                                   D
                                                   D1
                                       3                     2
                                       3                     3
                         3                                                   2
                         4                                                   2
                                                                                  D1 D
                         4                                                   1
                         4                                                   2
                                                             1
                                        1                    1
                                                      B
                                  A2        e
                                                                          C
                   A
           Seating                                                                 α
           Plane
                      A1
                                                                        L
                     Note: The control dimension is the inch column
                                          INCHES                MILLIMETERS
                     SYMBOL
                                    MIN          MAX           MIN          MAX
                         A         0.055         0.063         1.40          1.60
                         A1        0.002         0.006         0.05          0.15
                         A2        0.053         0.057         1.35          1.45
                         B         0.012         0.018         0.30          0.45
                         C         0.004         0.008         0.09          0.20
                         D         0.465         0.480        11.80         12.20
                         D1        0.390         0.398         9.90         10.10
                         e             0.0315 BSC                   0.80 BSC
                         L         0.018         0.030         0.45          0.75
                         α           0 0
                                                   7 0
                                                                0 0
                                                                               70
 Rev. 1.33
                                              32


                                                                                    XR68C92/192
EXPLANATION OF DATA SHEET REVISIONS:
  FROM         TO                                        CHANGES                                           DATE
  1.20         1.30      Added and updated Device Status to front page.                                August 2003
                         Added 5V tolerant input descriptions. Clarified Programming example D.
                         Clarified SRA, SRB Bit-2 description.
  1.30         1.31      Clarified that 5V tolerant inputs are only for devices with top marking of    Sept 2003
                         "D2" and newer. Devices with top marking of "CC" or newer do not
                         have 5V tolerant inputs.
  1.31         1.32      Clarified that Extended Baud Rate Tables can only be selected via             February 2005
                         MR0A for both channels.
  1.32         1.33      Removed discontinued packages in Ordering Information.                        August 2005
                         Updated the 1.4mm-thick Quad Flat Pack package description from
                         "TQFP" to "LQFP" to be consistent with JEDEC and Industry norms.
                                                           NOTICE
EXAR Corporation reserves the right to make changes to the products contained in this publication in order to
improve design, performance or reliability. EXAR Corporation assumes no responsibility for the use of any circuits
described herein, conveys no license under any patent or other right, and makes no representation that the circuits
are free of patent infringement. Charts and schedules contained here in are only for illustration purposes and may
vary depending upon a user's specific application. While the information in this publication has been carefully
checked; no responsibility, however, is assumed for inaccuracies.
EXAR Corporation does not recommend the use of any of its products in life support applications where the failure
of the product can reasonably be expected to cause failure of the life support system or to significantly affect its
safety or effectiveness. Products are not authorized for use in such applications unless EXAR Corporation receives,
in writing, assurances to its satisfaction that: (a) the risk of injury or damage has been minimized; (b) the user
assumes all such risks; (c) potential liability of EXAR Corporation is adequately protected under the circumstances.
Copyright 2005 EXAR Corporation
Datasheet August 2005
Send your UART technical inquiry with technical details to hotline: uarttechsupport@exar.com
Reproduction, in part or whole, without prior written consent of EXAR Corporation is prohibited.
    Rev. 1.33
                                                            33


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
MaxLinear:
 XR68C92CJ-0A-EVB XR68C192CV-0A-EVB XR68C92CV-0A-EVB XR68C192CJ-0A-EVB XR68C92IV-F
XR68C92CV-F XR68C92CVTR-F XR68C192IJ-F XR68C92IJ-F XR68C92CJ-F XR68C192CJTR-F XR68C92IJTR-F
 XR68C192CJ-F XR68C192CVTR-F XR68C192IJTR-F XR68C92IVTR-F XR68C92CJTR-F XR68C192IVTR-F
