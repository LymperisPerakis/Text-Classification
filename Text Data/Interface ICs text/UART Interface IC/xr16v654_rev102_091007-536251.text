                                                                                  XR16V654/654D
                                                   2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
SEPTEMBER 2007                                                                                                REV. 1.0.2
GENERAL DESCRIPTION                                        FEATURES
The XR16V6541 (V654) is an enhanced quad
                                                           • Pin-to-pin compatible with ST16C454, ST16C554,
Universal Asynchronous Receiver and Transmitter               TI’s TL16C754B and Philip’s SC16C654B
(UART) each with 64 bytes of transmit and receive          • Intel or Motorola Data Bus Interface select
FIFOs, programmable transmit and receive FIFO
trigger levels, automatic hardware and software flow
                                                           • Four independent UART channels
control, and data rates of up to 16 Mbps at 4X                   ■  Register Set Compatible to 16C550
sampling rate. Each UART has a set of registers that             ■  Data rates of up to 16 Mbps
provide the user with operating status and control,
                                                                 ■  64 Byte Transmit FIFO
receiver error indications, and modem serial interface
controls. An internal loopback capability allows                 ■  64 Byte Receive FIFO with error tags
onboard diagnostics. The V654 is available in a 48-              ■  4 Selectable TX and RX FIFO Trigger Levels
pin QFN, 64-pin LQFP, 68-pin PLCC, 80-pin LQFP                   ■  Automatic Hardware (RTS/CTS) Flow Control
and 100-pin QFP packages. The 64-pin and 80-pin
                                                                 ■  Automatic Software (Xon/Xoff) Flow Control
packages only offer the 16 mode interface, but the
48, 68 and 100 pin packages offer an additional 68               ■  Progammable Xon/Xoff characters
mode interface which allows easy integration with                ■  Wireless Infrared (IrDA 1.0) Encoder/Decoder
Motorola processors. The XR16V654IV (64-pin)                     ■  Full modem interface
offers three state interrupt output while the
XR16V654DIV provides continuous interrupt output.          • 2.25V to 3.6V supply operation
The 100 pin package provides additional FIFO status        • Sleep Mode with automatic wake-up
outputs (TXRDY# and RXRDY# A-D), separate
infrared transmit data outputs (IRTX A-D) and              • Crystal oscillator or external clock input
channel C external clock input (CHCCLK). The               APPLICATIONS
XR16V654 is compatible with the industry standard
ST16C554 and ST16C654/654D.                                • Portable Appliances
NOTE:  1 Covered by U.S. Patent #5,649,122.                • Telecommunication Network Routers
                                                           • Ethernet Network Routers
                                                           • Cellular Data Devices
                                                           • Factory Automation and Process Controls
FIGURE 1. XR16V654 BLOCK DIAGRAM
                                                         * 5 Volt Tolerant Inputs     2.25V to 3.6V VCC
               A2:A0                                       (Except XTAL1 input)       GND
               D7:D0                                      UART Channel A
                 IOR#
                                                     UART 64 Byte TX FIFO             TXA, RXA, IRTXA, DTRA#,
                IOW#                                 Regs                  IR         DSRA#, RTSA#, CTSA#,
                CSA#                                         TX & RX
                                                                        ENDEC         CDA#, RIA#
                CSB#                                 BRG
                                                              64 Byte RX FIFO
                CSC#
                CSD#                                     UART Channel B               TXB, RXB, IRTXB, DTRB#,
                                                       (same as Channel A)            DSRB#, RTSB#, CTSB#,
                  INTA              Data Bus                                          CDB#, RIB#
                 INTB               Interface
                 INTC                                                                 TXC, RXC, IRTXC, DTRC#,
                                                         UART Channel C
                 INTD                                  (same as Channel A)            DSRC#, RTSC#, CTSC#,
            CHCCLK                                                                    CDC#, RIC#
         TXRDY# A-D                                                                   TXD, RXD, IRTXD, DTRD#,
                                                         UART Channel D
         RXRDY# A-D                                                                   DSRD#, RTSD#, CTSD#,
                                                       (same as Channel A)
                Reset                                                                 CDD#, RID#
               16/68#
              INTSEL                                                                  XTAL1
             CLKSEL                                      Crystal Osc/Buffer
                                                                                      XTAL2
                                                                                                      654 BLK
Exar Corporation 48720 Kato Road, Fremont CA, 94538 • (510) 668-7000 • FAX (510) 668-7017 • www.exar.com


                              CDA#   RIA#   RXA   GND       D7      D6   D5   D4   D3      D2      D1       D0      INTSEL    VCC     RXD   RID#   CDD#                                                                CDA#   RIA#   RXA   GND       D7      D6   D5   D4   D3         D2      D1       D0      INTSEL    VCC     RXD   RID#   CDD#
                    RXRDYA#                                                                                                                               RXRDYD#   TXRDYD#                                  RXRDYA#                                                                                                                                  RXRDYD#   TXRDYD#
                    100       99     98     97    96        95      94   93   92   91      90      89       88      87        86      85    84     83     82        81                                       100       99     98     97    96        95      94   93   92   91         90      89       88      87        86      85    84     83     82        81
        N.C.   1                                                                                                                                                              80   N.C.          N.C.   1                                                                                                                                                                 80   N.C.
        N.C.   2                                                                                                                                                              79   N.C.          N.C.   2                                                                                                                                                                 79   N.C.
        N.C.   3                                                                                                                                                              78   N.C.          N.C.   3                                                                                                                                                                 78   N.C.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               XR16V654/654D
        N.C.   4                                                                                                                                                              77   N.C.          N.C.   4                                                                                                                                                                 77   N.C.
    TXRDYA#    5                                                                                                                                                              76   FSRS#     TXRDYA#    5                                                                                                                                                                 76   FSRS#
      IRTXA    6                                                                                                                                                              75   IRTXD       IRTXA    6                                                                                                                                                                 75   IRTXD
      DSRA#    7                                                                                                                                                              74   DSRD#       DSRA#    7                                                                                                                                                                 74   DSRD#
      CTSA#    8                                                                                                                                                              73   CTSD#       CTSA#    8                                                                                                                                                                 73   CTSD#
      DTRA#    9                                                                                                                                                              72   DTRD#       DTRA#    9                                                                                                                                                                 72   DTRD#
        VCC    10                                                                                                                                                             71   GND           VCC    10                                                                                                                                                                71   GND
      RTSA#    11                                                                                                                                                             70   RTSD#       RTSA#    11                                                                                                                                                                70   RTSD#
       IRQ#    12                                                                                                                                                             69   N.C.         INTA    12                                                                                                                                                                69   INTD
       CSA#    13                                                                                                                                                             68   N.C.         CSA#    13                                                                                                                                                                68   CSD#
                                                                                         XR16V654                                                                                                                                                                                         XR16V654
        TXA    14                                                                                                                                                             67   TXD           TXA    14                                                                                                                                                                67   TXD
                                                                                                                                                                                                                                                                                                                                                                                                                                                                   2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
       R/W#    15                                                                                                                                                             66   N.C.         IOW#    15                                                                                                                                                                66   IOR#
        TXB    16                                                                                                                                                             65   TXC           TXB    16                                                                                                                                                                     TXC
                                                                                        100-pin QFP                                                                                                                                                                                      100-pin QFP                                                                      65
2
         A3    17                                                                                                                                                             64   A4           CSB#    17                                                                                                                                                                64   CSC#
        N.C.   18                                                                                                                                                             63   N.C.         INTB    18                                                                                                                                                                63   INTC
                                                                                       Motorola Mode                                                                                                                                                                                      Intel Mode
      RTSB#    19                                                                                                                                                             62   RTSC#       RTSB#    19                                                                                                                                                                62   RTSC#
        GND    20                                                                                                                                                             61   VCC           GND    20                                                                                                                                                                61   VCC
      DTRB#    21                                                                                                                                                             60   DTRC#       DTRB#    21                                                                                                                                                                60   DTRC#
                                                                                   Connect 16/68# pin to GND                                                                                                                                                                        Connect 16/68# pin to VCC
      CTSB#    22                                                                                                                                                             59   CTSC#       CTSB#    22                                                                                                                                                                59   CTSC#
      DSRB#    23                                                                                                                                                             58   DSRC#       DSRB#    23                                                                                                                                                                58   DSRC#
      IRTXB    24                                                                                                                                                             57   IRTXC       IRTXB    24                                                                                                                                                                57   IRTXC
    TXRDYB#    25                                                                                                                                                             56   TXRDYC#   TXRDYB#    25                                                                                                                                                                56   TXRDYC#
                                                                                                                                                                                                                                                                                                                                                                                         FIGURE 2. PIN OUT ASSIGNMENT FOR 100-PIN QFP PACKAGES IN 16 AND 68 MODE
        N.C.   26                                                                                                                                                             55   N.C.          N.C.   26                                                                                                                                                                55   N.C.
        N.C.   27                                                                                                                                                             54   N.C.          N.C.   27                                                                                                                                                                54   N.C.
        N.C.   28                                                                                                                                                             53   N.C.          N.C.   28                                                                                                                                                                53   N.C.
        N.C.   29                                                                                                                                                             52   N.C.          N.C.   29                                                                                                                                                                52   N.C.
        N.C.   30                                                                                                                                                             51   N.C.          N.C.   30                                                                                                                                                                51   N.C.
                    31        32     33     34    35       36       37   38   39   40      41      42       43      44        45      46    47     48     49        50                                       31        32     33     34    35       36       37   38   39   40         41      42       43      44        45      46    47     48     49        50
                                                                    A2   A1   A0                                                                                                                                                                             A2   A1   A0
                                     RIB#   RXB                                                                                       GND   RXC    RIC#   CDC#                                                                RIB#   RXB                                                                                          GND   RXC    RIC#   CDC#
                              CDB#                         16/68#                  XTAL1   XTAL2                                                                                                                       CDB#                         16/68#                  XTAL1      XTAL2
                                                  CLKSEL                                                    RESET                                                                                                                          CLKSEL                                                       RESET
                                                                                                   CHCCLK           RXRDY#   TXRDY#                                                                                                                                                            CHCCLK           RXRDY#   TXRDY#
                    RXRDYB#                                                                                                                                         RXRDYC#                                  RXRDYB#                                                                                                                                            RXRDYC#
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    REV. 1.0.2


                                                                                                                                                                                                                                                                                                     XR16V654/654D
REV. 1.0.2                                                                                                                                                                                      2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
FIGURE 3. PIN OUT ASSIGNMENT FOR 68-PIN PLCC PACKAGES IN 16 AND 68 MODE AND 64-PIN LQFP PACKAGES
                                                                                                                                                                                                                                                                                                                                         CDD#
                                                                                                           INTSEL
                                                                                                                                                                                                             CDA#    RIA#    RXA   GND                                                                       GND      VCC   RXD   RID#
               CDA#   RIA#   RXA   GND      D7       D6   D5   D4   D3       D2      D1           D0                VCC     RXD      RID#         CDD#                                                                                       D7       D6    D5        D4    D3      D2      D1      D0
                                                                                                                                                                                                             9       8       7      6        5        4         3     2     1       68      67      66       65       64    63    62     63
               9      8      7     6        5        4    3    2    1        68      67           66       65       64      63       62           63
                                                                                                                                                                                      DSRA#         10                                                                                                                                          60   DSRD#
  DSRA#   10                                                                                                                                                      60   DSRD#
                                                                                                                                                                                       CTSA#        11                                                                                                                                          59   CTSD#
  CTSA#   11                                                                                                                                                      59   CTSD#
                                                                                                                                                                                      DTRA#         12                                                                                                                                          58   DTRD#
  DTRA#   12                                                                                                                                                      58   DTRD#
                                                                                                                                                                                           VCC      13                                                                                                                                          57   GND
   VCC    13                                                                                                                                                      57   GND
                                                                                                                                                                                       RTSA#        14                                                                                                                                          56   RTSD#
  RTSA#   14                                                                                                                                                      56   RTSD#
          15                                                                                                                                                      55                       IRQ#     15                                                                                                                                          55   N.C.
   INTA                                                                                                                                                                INTD
   CSA#   16
                                            XR16V654                                                                                                              54   CSD#                CS#      16
                                                                                                                                                                                                                                           XR16V654                                                                                             54   N.C.
    TXA   17
                                           68-pin PLCC                                                                                                            53   TXD                 TXA      17
                                                                                                                                                                                                                                          68-pin PLCC                                                                                           53   TXD
                                                                                                                                                                                           R/W#     18                                                                                                                                          52   N.C.
   IOW#   18
                                            Intel Mode                                                                                                            52   IOR#                                                              Motorola Mode
                                                                                                                                                                                           TXB      19                                                                                                                                          51   TXC
    TXB   19
                                   (16/68# pin connected to VCC)                                                                                                  51   TXC                                                         (16/68# pin connected to GND)
   CSB#   20                                                                                                                                                      50   CSC#                 A3      20                                                                                                                                          50   A4
   INTB   21                                                                                                                                                      49   INTC                N.C.     21                                                                                                                                          49   N.C.
  RTSB#   22                                                                                                                                                      48   RTSC#           RTSB#        22                                                                                                                                          48   RTSC#
   GND    23                                                                                                                                                      47   VCC                 GND      23                                                                                                                                          47   VCC
  DTRB#   24                                                                                                                                                      46   DTRC#          DTRB#         24                                                                                                                                          46   DTRC#
  CTSB#   25                                                                                                                                                      45   CTSC#           CTSB#        25                                                                                                                                          45   CTSC#
  DSRB#   26                                                                                                                                                      44   DSRC#          DSRB#         26                                                                                                                                          44   DSRC#
               27     28     29    30       31       32   33   34   35       36      37           38       39       40      41       42           43                                                         27      28      29     30       31       32        33    34    35      36      37      38       39       40    41    42     43
                                                                                                                                                                                                                                             16/68#
                                                                                                                                                                                                                                                                                                             TXRDY#
                                                                                                                                                                                                             CDB#
                                                                                                                                                                                                                                    CLKSEL                                                          RXRDY#
                                            16/68#
                                                                                                                                                                                                                     RIB#    RXB
                                                                                                                                                                                                                                                                            XTAL1   XTAL2   RESET
                                                                                                                                                                                                                                                                                                                      GND   RXC   RIC#   CDC#
                                                                                                                                                                                                                                                      A2        A1    A0
               CDB#
                                                                                                           TXRDY#
                                                                                                                                                  CDC#
                                   CLKSEL                                                         RXRDY#
                                                                                                                                     RIC#
                                                                                     RESET
                             RXB
                                                                    XTAL1    XTAL2
                      RIB#                                                                                          GND
                                                     A2   A1   A0
                                                                                                                            RXC
                                                                                                            CDA#     RIA#    RXA        GND              D7       D6   D5     D4   D3       D2      D1      D0      VCC     RXD    RID#      CDD#
                                                                                                            64       63       62            61           60       59   58     57   56       55      54      53      52      51     50        49
                                                                     DSRA#                   1                                                                                                                                                             48        DSRD#
                                                                      CTSA#                  2                                                                                                                                                             47        CTSD#
                                                                      DTRA#                  3                                                                                                                                                             46        DTRD#
                                                                            VCC              4                                                                                                                                                             45        GND
                                                                      RTSA#                  5                                                                                                                                                             44        RTSD#
                                                                            INTA             6                                                                                                                                                             43        INTD
                                                                            CSA#             7                                                                      XR16V654                                                                               42        CSD#
                                                                            TXA              8                                                                     64-pin TQFP                                                                             41        TXD
                                                                            IOW#             9                                                                    Intel Mode Only                                                                          40        IOR#
                                                                            TXB              10                                                                                                                                                            39        TXC
                                                                            CSB#             11                                                                                                                                                            38        CSC#
                                                                            INTB             12                                                                                                                                                            37        INTC
                                                                      RTSB#                  13                                                                                                                                                            36        RTSC#
                                                                            GND              14                                                                                                                                                            35        VCC
                                                                      DTRB#                  15                                                                                                                                                            34        DTRC#
                                                                      CTSB#                  16                                                                                                                                                            33        CTSC#
                                                                                                            17       18       19            20           21       22   23     24   25       26      27      28      29      30     31        32
                                                                                                                                                         CLKSEL
                                                                                                                              RIB#                                                                                                 CDC#
                                                                                                            DSRB#
                                                                                                                                                                                                                            RIC#
                                                                                                                                                                              A0
                                                                                                                     CDB#
                                                                                                                                                                  A2   A1
                                                                                                                                                                                   XTAL1                                                     DSRC#
                                                                                                                                                                                                                    RXC
                                                                                                                                                                                            XTAL2   RESET
                                                                                                                                            RXB                                                             GND
                                                                                                                                                                                   3


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                                                                                                                                                           REV. 1.0.2
FIGURE 4. PIN OUT ASSIGNMENT FOR 48-PIN QFN PACKAGE AND 80-PIN LQFP PACKAGE
                                                                                                                                                                       38 INTSEL
                                                                     47 GND                                                                                                                 37 VCC
                                                            RXA
                                                                                                           43 D4                          40 D1       39 D0
                                                                                                                   D3
                                                                                  46 D7   45 D6    44 D5                       41 D2
                                                            48                                                     42
                                        CTSA#         1                                                                                                                                              36    RXD
                                           VCC        2                                                                                                                                              35    CTSD#
                                        RTSA#         3                                                                                                                                              34    GND
                                         INTA         4                                                                                                                                              33    RTSD#
                                        CSA#          5                                                                                                                                              32    INTD
                                                                                                    XR16V654
                                           TXA        6                                                                                                                                               31 CSD#
                                                                                                    48-pin QFN
                                         IOW#         7                                                                                                                                              30    TXD
                                           TXB        8                                                                                                                                              29    IOR#
                                        CSB#          9                                                                                                                                              28    TXC
                                          INTB        10                                                                                                                                             27    CSC#
                                        RTSB#         11                                                                                                                                             26    INTC
                                        CTSB#         12                                                                                                                                             25    RTSC#
                                                             13        14         15      16       17      18      19          20         21          22               23                   24
                                                                        16/68#                             XTAL1                RESET
                                                             RXB                                                                           GND
                                                                                           A1
                                                                                                                                                       RXC
                                                                                   A2
                                                                                                                   XTAL2
                                                                                                                                                                                             VCC
                                                                                                    A0
                                                                                                                                                                         CTSC#
                          N.C.   CDA#   RIA#   RXA     GND                       D6       D5       D4       D3     D2             D1          D0          INTSEL                   VCC               RXD   RID#   CDD#   N.C.   N.C.
                                                                   D7
                          80     79     78     77      76          75            74       73       72      71      70            69           68          67                       66                65    64     63     62     61
               NC    1                                                                                                                                                                                                                 60   N.C.
               NC    2                                                                                                                                                                                                                 59   DSRD#
             DSRA#   3                                                                                                                                                                                                                 58   CTSD#
             CTSA#   4                                                                                                                                                                                                                 57   DTRD#
             DTRA#   5                                                                                                                                                                                                                 56   GND
              VCC    6                                                                                                                                                                                                                 55   RTSD#
             RTSA#   7                                                                                                                                                                                                                 54   INTD
              INTA   8                                                                                                                                                                                                                 53   CSD#
                                                                                                    XR16V654
              CSA#   9                                                                                                                                                                                                                 52   TXD
               TXA   10
                                                                                                   80-pin LQFP                                                                                                                         51   IOR#
              IOW#   11
                                                                                                  Intel Mode only                                                                                                                      50   TXC
               TXB   12                                                                                                                                                                                                                49   CSC#
              CSB#   13                                                                                                                                                                                                                48   INTC
              INTB   14                                                                                                                                                                                                                47   RTSC#
             RTSB#   15                                                                                                                                                                                                                46   VCC
              GND    16                                                                                                                                                                                                                45   DTRC#
             DTRB#   17                                                                                                                                                                                                                44   CTSC#
             CTSB#   18                                                                                                                                                                                                                43   DSRC#
             DSRB#   19                                                                                                                                                                                                                42   N.C.
               NC    20                                                                                                                                                                                                                41   N.C.
                          21     22      23    24         25       26            27       28       29       30         31         32          33              34                   35                36    37     38     39     40
                                                                                                                       XTAL1
                          N.C.   N.C.                                                                                                                                                                GND
                                                                   CLKSEL
                                                                                 N.C.                                                                                                                                           N.C.
                                                                                                                                  XTAL2       RESET
                                                                                                                                                              RXRDY#
                                                                                                                                                                                                                  RIC#   CDC#
                                                                                          A2       A1
                                                                                                                                                                                   TXRDY#
                                                                                                            A0
                                        CDB#   RIB#       RXB                                                                                                                                              RXC
                                                                                                                   4


                                                                                       XR16V654/654D
REV. 1.0.2                                            2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
ORDERING INFORMATION
                                                                OPERATING TEMPERATURE
           PART NUMBER                  PACKAGE                                                 DEVICE STATUS
                                                                         RANGE
            XR16V654IJ                68-Lead PLCC                   -40°C to +85°C                  Active
            XR16V654IV                64-Lead LQFP                   -40°C to +85°C                  Active
           XR16V654DIV                64-Lead LQFP                   -40°C to +85°C                  Active
            XR16V654IQ                100-Lead QFP                   -40°C to +85°C                  Active
            XR16V654IL                 48-pin QFN                    -40°C to +85°C                  Active
           XR16V654IV80               80-Lead LQFP                   -40°C to +85°C                  Active
PIN DESCRIPTIONS
Pin Description
              48-QFN   64-LQFP 68-PLCC 80-LQFP 100-QFP
   NAME                                                    TYPE                    DESCRIPTION
               PIN #     PIN #   PIN#     PIN #     PIN #
DATA BUS INTERFACE
     A2         15        22      32       28        37       I   Address data lines [2:0]. These 3 address
     A1         16        23      33       29        38           lines select one of the internal registers in
     A0         17        24      34       30        39           UART channel A-D during a data bus trans-
                                                                  action.
     D7         46        60       5       75        95     I/O   Data bus lines [7:0] (bidirectional).
     D6         45        59       4       74        94
     D5         44        58       3       73        93
     D4         43        57       2       72        92
     D3         42        56       1       71        91
     D2         41        55      68       70        90
     D1         40        54      67       69        89
     D0         39        53      66       68        88
    IOR#        29        40      52       51        66       I   When 16/68# pin is HIGH, the Intel bus
   (VCC)                                                          interface is selected and this input becomes
                                                                  read strobe (active low). The falling edge
                                                                  instigates an internal read cycle and
                                                                  retrieves the data byte from an internal reg-
                                                                  ister pointed by the address lines [A2:A0],
                                                                  puts the data byte on the data bus to allow
                                                                  the host processor to read it on the rising
                                                                  edge.
                                                                  When 16/68# pin is LOW, the Motorola bus
                                                                  interface is selected and this input is not
                                                                  used and should be connected to VCC.
                                                  5


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                     REV. 1.0.2
Pin Description
             48-QFN 64-LQFP 68-PLCC 80-LQFP 100-QFP
    NAME                                            TYPE                  DESCRIPTION
              PIN #   PIN #   PIN#    PIN #   PIN #
    IOW#        7       9      18      11      15     I  When 16/68# pin is HIGH, it selects Intel
   (R/W#)                                                bus interface and this input becomes write
                                                         strobe (active low). The falling edge insti-
                                                         gates the internal write cycle and the rising
                                                         edge transfers the data byte on the data
                                                         bus to an internal register pointed by the
                                                         address lines.
                                                         When 16/68# pin is LOW, the Motorola bus
                                                         interface is selected and this input becomes
                                                         read (logic 1) and write (logic 0) signal.
    CSA#        5       7      16       9      13     I  When 16/68# pin is HIGH, this input is chip
    (CS#)                                                select A (active low) to enable channel A in
                                                         the device.
                                                         When 16/68# pin is LOW, this input
                                                         becomes the chip select (active low) for the
                                                         Motorola bus interface.
    CSB#        9      11      20      13      17     I  When 16/68# pin is HIGH, this input is chip
      (A3)                                               select B (active low) to enable channel B in
                                                         the device.
                                                         When 16/68# pin is LOW, this input
                                                         becomes address line A3 which is used for
                                                         channel selection in the Motorola bus inter-
                                                         face.
    CSC#       27      38      50      49      64     I  When 16/68# pin is HIGH, this input is chip
      (A4)                                               select C (active low) to enable channel C in
                                                         the device.
                                                         When 16/68# pin is LOW, this input
                                                         becomes address line A4 which is used for
                                                         channel selection in the Motorola bus inter-
                                                         face.
    CSD#       31      42      54      53      68     I  When 16/68# pin is HIGH, this input is chip
    (VCC)                                                select D (active low) to enable channel D in
                                                         the device.
                                                         When 16/68# pin is LOW, this input is not
                                                         used and should be connected VCC.
     INTA       4       6      15       8      12    O   When 16/68# pin is HIGH for Intel bus inter-
   (IRQ#)                                           (OD) face, this ouput becomes channel A inter-
                                                         rupt output. The output state is defined by
                                                         the user and through the software setting of
                                                         MCR[3]. INTA is set to the active mode
                                                         when MCR[3] is set to a logic 1. INTA is set
                                                         to the three state mode when MCR[3] is set
                                                         to a logic 0 (default). See MCR[3].
                                                         When 16/68# pin is LOW for Motorola bus
                                                         interface, this output becomes device inter-
                                                         rupt output (active low, open drain). An
                                                         external pull-up resistor is required for
                                                         proper operation.
                                            6


                                                                                  XR16V654/654D
REV. 1.0.2                                      2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
Pin Description
             48-QFN 64-LQFP 68-PLCC 80-LQFP 100-QFP
   NAME                                              TYPE                     DESCRIPTION
              PIN #   PIN #   PIN#    PIN #   PIN #
    INTB       10      12      21      14      18      O   When 16/68# pin is HIGH for Intel bus inter-
    INTC       26      37      49      48      63          face, these ouputs become the interrupt
    INTD       32      43      55      54      69          outputs for channels B, C, and D. The out-
                                                           put state is defined by the user through the
   (N.C.)
                                                           software setting of MCR[3]. The interrupt
                                                           outputs are set to the active mode when
                                                           MCR[3] is set to a logic 1 and are set to the
                                                           three state mode when MCR[3] is set to a
                                                           logic 0 (default). See MCR[3].
                                                           When 16/68# pin is LOW for Motorola bus
                                                           interface, these outputs are unused and will
                                                           stay at logic zero level. Leave these out-
                                                           puts unconnected.
  INTSEL       38       -      65      67      87      I   Interrupt Select (active high, input with
                                                           internal pull-down).
                                                           When 16/68# pin is HIGH for Intel bus inter-
                                                           face, this pin can be used in conjunction
                                                           with MCR bit-3 to enable or disable the INT
                                                           A-D pins or override MCR bit-3 and enable
                                                           the interrupt outputs. Interrupt outputs are
                                                           enabled continuously when this pin is
                                                           HIGH. MCR bit-3 enables and disables the
                                                           interrupt output pins. In this mode, MCR
                                                           bit-3 is set to a logic 1 to enable the continu-
                                                           ous output. See MCR bit-3 description for
                                                           full detail. This pin must be LOW in the
                                                           Motorola bus interface mode. For the 64
                                                           pin packages, this pin is bonded to VCC
                                                           internally in the XR16V654D so the INT out-
                                                           puts operate in the continuous interrupt
                                                           mode. This pin is bonded to GND internally
                                                           in the XR16V654 and therefore requires
                                                           setting MCR bit-3 for enabling the interrupt
                                                           output pins.
 TXRDYA#        -       -       -       -       5      O  UART channels A-D Transmitter Ready
 TXRDYB#        -       -       -       -      25         (active low). The outputs provide the TX
                                                          FIFO/THR status for transmit channels A-D.
 TXRDYC#        -       -       -       -      56
                                                          See Table 5. If these outputs are unused,
 TXRDYD#        -       -       -       -      81         leave them unconnected.
 RXRDYA#        -       -       -       -     100      O   UART channels A-D Receiver Ready
 RXRDYB#        -       -       -       -      31          (active low). This output provides the RX
 RXRDYC#        -       -       -       -      50          FIFO/RHR status for receive channels A-D.
                                                           See Table 5. If these outputs are unused,
 RXRDYD#        -       -       -       -      82
                                                           leave them unconnected.
  TXRDY#        -       -      39      35      45      O   Transmitter Ready (active low). This output
                                                           is a logically ANDed status of TXRDY# A-
                                                           D. See Table 5. If this output is unused,
                                                           leave it unconnected.
  RXRDY#        -       -      38      34      44      O   Receiver Ready (active low). This output is
                                                           a logically ANDed status of RXRDY# A-D.
                                                           See Table 5. If this output is unused, leave
                                                           it unconnected.
                                            7


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                     REV. 1.0.2
Pin Description
             48-QFN 64-LQFP 68-PLCC 80-LQFP 100-QFP
    NAME                                            TYPE                   DESCRIPTION
              PIN #    PIN #   PIN#   PIN #   PIN #
   FSRS#        -        -       -      -      76     I  FIFO Status Register Select (active low
                                                         input with internal pull-up).
                                                         The content of the FSTAT register is placed
                                                         on the data bus when this pin becomes
                                                         active. However it should be noted, D0-D3
                                                         contain the inverted logic states of TXRDY#
                                                         A-D pins, and D4-D7 the logic states (un-
                                                         inverted) of RXRDY# A-D pins. A valid
                                                         address is not required when reading this
                                                         status register.
 MODEM OR SERIAL I/O INTERFACE
    TXA         6        8      17     10      14    O   UART channels A-D Transmit Data and
    TXB         8       10      19     12      16        infrared transmit data. Standard transmit
    TXC        28       39      51     50      65        and receive interface is enabled when
                                                         MCR[6] = 0. In this mode, the TX signal will
    TXD        30       41      53     52      67
                                                         be a logic 1 during reset, or idle (no data).
                                                         Infrared IrDA transmit and receive interface
                                                         is enabled when MCR[6] = 1. In the Infra-
                                                         red mode, the inactive state (no data) for
                                                         the Infrared encoder/decoder interface is a
                                                         logic 0.
   IRTXA        -        -       -      -       6    O   UART channel A-D Infrared Transmit Data.
   IRTXB        -        -       -      -      24        The inactive state (no data) for the Infrared
   IRTXC        -        -       -      -      57        encoder/decoder interface is LOW.
                                                         Regardless of the logic state of MCR bit-6,
   IRTXD        -        -       -      -      75
                                                         this pin will be operating in the Infrared
                                                         mode.
    RXA        48       62       7     77      97     I  UART channel A-D Receive Data or infra-
    RXB        13       20      29     25      34        red receive data. Normal receive data input
    RXC        22       29      41     37      47        must idle HIGH.
    RXD        36       51      63     65      85
   RTSA#        3        5      14      7      11    O   UART channels A-D Request-to-Send
   RTSB#       11       13      22     15      19        (active low) or general purpose output. This
   RTSC#       25       36      48     47      62        output must be asserted prior to using auto
                                                         RTS flow control, see EFR[6], MCR[1], and
   RTSD#       33       44      56     55      70
                                                         IER[6]. Also see Figure 12. If these out-
                                                         puts are not used, leave them unconnected.
   CTSA#        1        2      11      4       8     I  UART channels A-D Clear-to-Send (active
   CTSB#       12       16      25     18      22        low) or general purpose input. It can be
   CTSC#       23       33      45     44      59        used for auto CTS flow control, see EFR[7],
                                                         and IER[7]. Also see Figure 12. These
   CTSD#       35       47      59     58      73
                                                         inputs should be connected to VCC when
                                                         not used.
   DTRA#        -        3      12      5       9    O   UART channels A-D Data-Terminal-Ready
   DTRB#        -       15      24     17      21        (active low) or general purpose output. If
   DTRC#        -       34      46     45      60        these outputs are not used, leave them
                                                         unconnected.
   DTRD#        -       46      58     57      72
                                            8


                                                                                 XR16V654/654D
REV. 1.0.2                                      2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
Pin Description
             48-QFN 64-LQFP 68-PLCC 80-LQFP 100-QFP
    NAME                                             TYPE                    DESCRIPTION
              PIN #   PIN #   PIN#    PIN #   PIN #
   DSRA#        -       1      10       3       7      I   UART channels A-D Data-Set-Ready
   DSRB#        -      17      26      19      23          (active low) or general purpose input. This
   DSRC#        -      32      44      43      58          input should be connected to VCC when
                                                           not used. This input has no effect on the
   DSRD#        -      48      60      59      74
                                                           UART.
   CDA#         -      64       9      79      99      I   UART channels A-D Carrier-Detect (active
   CDB#         -      18      27      23      32          low) or general purpose input. This input
   CDC#         -      31      43      39      49          should be connected to VCC when not
                                                           used. This input has no effect on the UART.
   CDD#         -      49      61      63      83
    RIA#        -      63       8      78      98      I   UART channels A-D Ring-Indicator (active
    RIB#        -      19      28      24      33          low) or general purpose input. This input
    RIC#        -      30      42      38      48          should be connected to VCC when not
                                                           used. This input has no effect on the UART.
    RID#        -      50      62      64      84
ANCILLARY SIGNALS
   XTAL1       18      25      35      31      40      I   Crystal or external clock input. Caution: this
                                                           input is not 5V tolerant.
   XTAL2       19      26      36      32      41      O   Crystal or buffered clock output.
   16/68#      14       -      31       -      36      I   Intel or Motorola Bus Select (input with
                                                           internal pull-up).
                                                           When 16/68# pin is HIGH, 16 or Intel Mode,
                                                           the device will operate in the Intel bus type
                                                           of interface.
                                                           When 16/68# pin is LOW, 68 or Motorola
                                                           mode, the device will operate in the Motor-
                                                           ola bus type of interface.
                                                           Motorola bus interface is not available on
                                                           the 64 pin package.
  CLKSEL        -      21      30      26      35      I   Baud-Rate-Generator Input Clock Pres-
                                                           caler Select for channels A-D. This input is
                                                           only sampled during power up or a reset.
                                                           Connect to VCC for divide by 1 (default)
                                                           and GND for divide by 4. MCR[7] can over-
                                                           ride the state of this pin following a reset or
                                                           initialization. See MCR bit-7 and Figure 7
                                                           in the Baud Rate Generator section.
  CHCCLK        -       -       -       -      42      I   This input provides the clock for UART
                                                           channel C. An external 16X baud clock or
                                                           the crystal oscillator’s output, XTAL2, must
                                                           be connected to this pin for normal opera-
                                                           tion. This input may also be used with MIDI
                                                           (Musical Instrument Digital Interface) appli-
                                                           cations when an external MIDI clock is pro-
                                                           vided. This pin is only available in the 100-
                                                           pin QFP package.
                                            9


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                   REV. 1.0.2
Pin Description
              48-QFN    64-LQFP 68-PLCC 80-LQFP 100-QFP
    NAME                                                          TYPE                  DESCRIPTION
                PIN #     PIN #       PIN#      PIN #     PIN #
   RESET          20       27          37         33       43       I  When 16/68# pin is HIGH for Intel bus inter-
  (RESET#)                                                             face, this input becomes the Reset pin
                                                                       (active high). In this case, a 40 ns mini-
                                                                       mum HIGH pulse on this pin will reset the
                                                                       internal registers and all outputs. The UART
                                                                       transmitter output will be held HIGH, the
                                                                       receiver input will be ignored and outputs
                                                                       are reset during reset period (Table 17).
                                                                       When 16/68# pin is at LOW for Motorola
                                                                       bus interface, this input becomes Reset#
                                                                       pin (active low). This pin functions similarly,
                                                                       but instead of a HIGH pulse, a 40 ns mini-
                                                                       mum LOW pulse will reset the internal reg-
                                                                       isters and outputs.
                                                                       Motorola bus interface is not available on
                                                                       the 64 pin package.
     VCC      2, 24, 37 4, 35, 52   13, 47,   6, 46, 66  10, 61,   Pwr 2.25V to 3.6V power supply. All inputs,
                                       64                  86          except XTAL1, are 5V tolerant.
    GND        21, 47    14, 28,   6, 23, 40,  16, 36,   20, 46,   Pwr Power supply common, ground.
                         45, 61        57      56, 76    71, 96
    GND        Center      N/A        N/A        N/A       N/A    Pwr  The center pad on the backside of the QFN
                 Pad                                                   package is metallic and should be con-
                                                                       nected to GND on the PCB. The thermal
                                                                       pad size on the PCB should be the approxi-
                                                                       mate size of this center pad and should be
                                                                       solder mask defined. The solder mask
                                                                       opening should be at least 0.0025" inwards
                                                                       from the edge of the PCB thermal pad.
     N.C.          -        -           -               1, 2, 20,      No Connection. These pins are not used in
                                                         21, 22,       either the Intel or Motorola bus modes.
                                                         27, 40,
                                                         41, 42,
                                                         60, 61,
                                                         62, 80
Pin type: I=Input, O=Output, I/O= Input/output, OD=Output Open Drain.
                                                        10


                                                                                          XR16V654/654D
REV. 1.0.2                                                    2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
 1.0 PRODUCT DESCRIPTION
The XR16V654 (V654) integrates the functions of 4 enhanced 16C550 Universal Asynchrounous Receiver and
Transmitter (UART). Each UART is independently controlled and has its own set of device configuration
registers. The configuration registers set is 16550 UART compatible for control, status and data transfer.
Additionally, each UART channel has 64 bytes of transmit and receive FIFOs, automatic RTS/CTS hardware
flow control, automatic Xon/Xoff and special character software flow control, infrared encoder and decoder
(IrDA ver 1.0), programmable fractional baud rate generator with a prescaler of divide by 1 or 4, and data rate
up to 16 Mbps. The XR16V654 can operate from 2.25 to 3.6 volts. The V654 is fabricated with an advanced
CMOS process.
Enhanced FIFO
The V654 QUART provides a solution that supports 64 bytes of transmit and receive FIFO memory, instead of
16 bytes in the ST16C554, or one byte in the ST16C454. The V654 is designed to work with high performance
data communication systems, that require fast data processing time. Increased performance is realized in the
V654 by the larger transmit and receive FIFOs, FIFO trigger level control and automatic flow control
mechanism. This allows the external processor to handle more networking tasks within a given time. For
example, the ST16C554 with a 16 byte FIFO, unloads 16 bytes of receive data in 1.53 ms (This example uses
a character length of 11 bits, including start/stop bits at 115.2Kbps). This means the external CPU will have to
service the receive FIFO at 1.53 ms intervals. However with the 64 byte FIFO in the V654, the data buffer will
not require unloading/loading for 6.1 ms. This increases the service interval giving the external CPU additional
time for other applications and reducing the overall UART interrupt servicing time. In addition, the
programmable FIFO level trigger interrupt and automatic hardware/software flow control is uniquely provided
for maximum data throughput performance especially when operating in a multi-channel system. The
combination of the above greatly reduces the CPU’s bandwidth requirement, increases performance, and
reduces power consumption.
Data Rate
The V654 is capable of operation up to 16 Mbps at 3.3V with 4Xinternal sampling clock rate. The device can
operate at 3.3V with a crystal oscillator of up to 24 MHz crystal on pins XTAL1 and XTAL2, or external clock
source of 64 MHz on XTAL1 pin. With a typical crystal of 14.7456 MHz and through a software option, the user
can set the prescaler bit and sampling rate for data rates of up to 3.68 Mbps.
Enhanced Features
The rich feature set of the V654 is available through the internal registers. Automatic hardware/software flow
control, selectable transmit and receive FIFO trigger levels, selectable baud rates, infrared encoder/decoder
interface, modem interface controls, and a sleep mode are all standard features. MCR bit-5 provides a facility
for turning off (Xon) software flow control with any incoming (RX) character. In the 16 mode INTSEL and MCR
bit-3 can be configured to provide a software controlled or continuous interrupt capability. For backward
compatibility to the ST16C654, the 64-pin LQFP does not have the INTSEL pin. Instead, two different LQFP
packages are offered. The XR16V654DIV operates in the continuous interrupt enable mode by internally
bonding INTSEL to VCC. The XR16V654IV operates in conjunction with MCR bit-3 by internally bonding
INTSEL to GND.
The XR16V654 offers a clock prescaler select pin to allow system/board designers to preset the default baud
rate table on power up. The CLKSEL pin selects the div-by-1 or div-by-4 prescaler for the baud rate generator.
It can then be overridden following initialization by MCR bit-7.
The 100 pin packages offer several other enhanced features. These features include a CHCCLK clock input,
FSTAT register and separate IrDA TX outputs. The CHCCLK must be connected to the XTAL2 pin for normal
operation or to external MIDI (Music Instrument Digital Interface) oscillator for MIDI applications. A separate
register (FSTAT) is provided for monitoring the real time status of the FIFO signals TXRDY# and RXRDY# for
each of the four UART channels (A-D). This reduces polling time involved in accessing individual channels.
The 100 pin QFP package also offers four separate IrDA (Infrared Data Association Standard) TX outputs for
Infrared applications. These outputs are provided in addition to the standard asynchronous modem data
outputs.
                                                          11


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                              REV. 1.0.2
 2.0 FUNCTIONAL DESCRIPTIONS
 2.1     CPU Interface
The CPU interface is 8 data bits wide with 3 address lines and control signals to execute data bus read and
write transactions. The V654 data interface supports the Intel compatible types of CPUs and it is compatible to
the industry standard 16C550 UART. No clock (oscillator nor external clock) is required for a data bus
transaction. Each bus cycle is asynchronous using CS# A-D, IOR# and IOW# or CS#, R/W#, A4 and A3 inputs.
All four UART channels share the same data bus for host operations. A typical data bus interconnection for
Intel and Motorola mode is shown in Figure 5.
FIGURE 5. XR16V654 TYPICAL INTEL/MOTOROLA DATA BUS INTERCONNECTIONS
                         D0                                       D0                 VCC    VCC
                         D1                                       D1
                         D2                                       D2
                         D3                                       D3                 TXA
                         D4                                       D4                 RXA
                         D5                                       D5
                         D6                                       D6              DTRA#
                         D7                                       D7              RTSA#
                                                                         UART                 Serial Interface of
                                                                       Channel A  CTSA#            RS-232
                         A0                                       A0
                                                                  A1              DSRA#
                         A1
                                                                  A2               CDA#
                         A2
                                                                                    RIA#
                       IOR#                                     IOR#
                      IOW#                                      IOW#     UART
                                                                       Channel B   Similar
                UART_CSA#                                        CSA#             to Ch A
                UART_CSB#                                        CSB#
                UART_CSC#                                        CSC#
                UART_CSD#                                        CSD#    UART
                                                                       Channel C   Similar         Serial Interface of
                                                                                  to Ch A                RS-232
                 UART_INTA                                       INTA
                 UART_INTB                                       INTB
                 UART_INTC                                       INTC    UART
                 UART_INTD                                             Channel D   Similar
                                                                 INTD
                                                                                  to Ch A
               UART_RESET                                        RESET
                        VCC                                     16/68#              GND
                                    Intel Data Bus (16 Mode) Interconnections
                                                                                       VCC    VCC
                     D0                                           D0
                     D1                                           D1                   TXA
                     D2                                           D2
                     D3                                           D3                   RXA
                     D4                                           D4
                     D5                                                             DTRA#
                                                                  D5
                     D6                                           D6      UART      RTSA#        Serial Interface of
                     D7                                           D7                CTSA#
                                                                        Channel A                      RS-232
                     A0                                           A0                DSRA#
                     A1                                           A1                 CDA#
                     A2                                           A2                  RIA#
                     A3                                         CSB#
                     A4                                         CSC#      UART
                                                       VCC      CSD#    Channel B Similar
                                                                                   to Ch A
                                                       VCC       IOR#
                  R/W#                                          IOW#
                                                                          UART
             UART_CS#                                           CSA#                Similar
                                VCC                                     Channel C                Serial Interface of
                                                                                   to Ch A             RS-232
              UART_IRQ#                                          INTA
                                                (no connect)     INTB     UART
                                                                        Channel D   Similar
                                                (no connect)     INTC              to Ch A
                                                (no connect)     INTD
            UART_RESET#                                         RESET#
                                                                16/68#
                                                                                      GND
                                 Motorola Data Bus (68 Mode) Interconnections
                                                             12


                                                                                           XR16V654/654D
REV. 1.0.2                                                  2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
 2.2     Device Reset
The RESET input resets the internal registers and the serial interface outputs in both channels to their default
state (see Table 17). An active high pulse of longer than 40 ns duration will be required to activate the reset
function in the device. Following a power-on reset or an external reset, the V654 is software compatible with
previous generation of UARTs, 16C454 and 16C554.
 2.3     Channel Selection
The UART provides the user with the capability to bi-directionally transfer information between an external
CPU and an external serial communication device. During Intel Bus Mode (16/68# pin is connected to VCC), a
logic 0 on chip select pins, CSA#, CSB#, CSC# or CSD# allows the user to select UART channel A, B, C or D
to configure, send transmit data and/or unload receive data to/from the UART. Selecting all four UARTs can be
useful during power up initialization to write to the same internal registers, but do not attempt to read from all
four uarts simultaneously. Individual channel select functions are shown in Table 1.
                                   TABLE 1: CHANNEL A-D SELECT IN 16 MODE
                             CSA# CSB# CSC# CSD#                    FUNCTION
                               1       1      1       1         UART de-selected
                               0       1      1       1        Channel A selected
                               1       0      1       1        Channel B selected
                               1       1      0       1        Channel C selected
                               1       1      1       0        Channel D selected
                               0       0      0       0       Channels A-D selected
During Motorola Bus Mode (16/68# pin is connected to GND), the package interface pins are configured for
connection with Motorola, and other popular microprocessor bus types. In this mode the V654 decodes two
additional addresses, A3 and A4, to select one of the four UART ports. The A3 and A4 address decode
function is used only when in the Motorola Bus Mode. See Table 2.
                                   TABLE 2: CHANNEL A-D SELECT IN 68 MODE
                             CS#    A4     A3                  FUNCTION
                              1      X      X              UART de-selected
                              0      0      0              Channel A selected
                              0      0      1              Channel B selected
                              0      1      0              Channel C selected
                              0      1      1              Channel D selected
                                                        13


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                 REV. 1.0.2
 2.4     Channels A-D Internal Registers
Each UART channel in the V654 has a set of enhanced registers for controlling, monitoring and data loading
and unloading. The configuration register set is compatible to those already available in the standard single
16C550. These registers function as data holding registers (THR/RHR), interrupt status and control registers
(ISR/IER), a FIFO control register (FCR), receive line status and control registers (LSR/LCR), modem status
and control registers (MSR/MCR), programmable data rate (clock) divisor registers (DLL/DLM/DLD), and a
user accessible scratchpad register (SPR).
Beyond the general 16C550 features and capabilities, the V654 offers enhanced feature registers (EFR, Xon/
Xoff 1, Xon/Xoff 2, FSTAT) that provide automatic RTS and CTS hardware flow control and automatic Xon/Xoff
software flow control. All the register functions are discussed in full detail later in “Section 3.0, UART
INTERNAL REGISTERS” on page 26.
 2.5     INT Ouputs for Channels A-D
The interrupt outputs change according to the operating mode and enhanced features setup. Table 3 and 4
summarize the operating behavior for the transmitter and receiver. Also see Figure 21 through 26.
                         TABLE 3: INT PIN OPERATION FOR TRANSMITTER FOR CHANNELS A-D
                                                                FCR BIT-0 = 1 (FIFO ENABLED)
                      FCR BIT-0 = 0
                     (FIFO DISABLED)                 FCR Bit-3 = 0                        FCR Bit-3 = 1
                                                 (DMA Mode Disabled)                  (DMA Mode Enabled)
   INT Pin    LOW = a byte in THR         LOW = FIFO above trigger level        LOW = FIFO above trigger level
              HIGH = THR empty            HIGH = FIFO below trigger level or    HIGH = FIFO below trigger level or
                                          FIFO empty                            FIFO empty
                           TABLE 4: INT PIN OPERATION FOR RECEIVER FOR CHANNELS A-D
                      FCR BIT-0 = 0
                                                                FCR BIT-0 = 1 (FIFO ENABLED)
                     (FIFO DISABLED)
                                                     FCR Bit-3 = 0                        FCR Bit-3 = 1
                                                 (DMA Mode Disabled)                  (DMA Mode Enabled)
   INT Pin    LOW = no data               LOW = FIFO below trigger level        LOW = FIFO below trigger level
              HIGH = 1 byte               HIGH = FIFO above trigger level       HIGH = FIFO above trigger level
 2.6     DMA Mode
The device does not support direct memory access. The DMA Mode (a legacy term) in this document does not
mean “direct memory access” but refers to data block transfer operation. The DMA mode affects the state of
the RXRDY# A-D and TXRDY# A-D output pins. The transmit and receive FIFO trigger levels provide
additional flexibility to the user for block mode operation. The LSR bits 5-6 provide an indication when the
transmitter is empty or has an empty location(s) for more data. The user can optionally operate the transmit
and receive FIFO in the DMA mode (FCR bit-3 = 1). When the transmit and receive FIFOs are enabled and the
DMA mode is disabled (FCR bit-3 = 0), the V654 is placed in single-character mode for data transmit or receive
operation. When DMA mode is enabled (FCR bit-3 = 1), the user takes advantage of block mode operation by
                                                        14


                                                                                                  XR16V654/654D
REV. 1.0.2                                                      2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
loading or unloading the FIFO in a block sequence determined by the programmed trigger level. The following
table show their behavior. Also see Figure 21 through 26.
             TABLE 5: TXRDY# AND RXRDY# OUTPUTS IN FIFO AND DMA MODE FOR CHANNELS A-D
                      FCR BIT-0=0
      PINS                                                       FCR BIT-0=1 (FIFO ENABLED)
                    (FIFO DISABLED)
                                               FCR BIT-3 = 0                               FCR BIT-3 = 1
                                           (DMA MODE DISABLED)                        (DMA MODE ENABLED)
    RXRDY#       LOW = 1 byte         LOW = at least 1 byte in FIFO    HIGH to LOW transition when FIFO reaches the
                 HIGH = no data       HIGH = FIFO empty                trigger level, or timeout occurs
                                                                       LOW to HIGH transition when FIFO empties
    TXRDY#       LOW = THR empty      LOW = FIFO empty                 LOW = FIFO has at least 1 empty location
                 HIGH = byte in THR   HIGH = at least 1 byte in FIFO   HIGH = FIFO is full
 2.7     Crystal Oscillator or External Clock Input
The V654 includes an on-chip oscillator (XTAL1 and XTAL2) to produce a clock for both UART sections in the
device. The CPU data bus does not require this clock for bus operation. The crystal oscillator provides a
system clock to the Baud Rate Generators (BRG) section found in each of the UART. XTAL1 is the input to the
oscillator or external clock buffer input with XTAL2 pin being the output. Caution: the XTAL1 input is not 5V
tolerant. For programming details, see “Section 2.8, Programmable Baud Rate Generator with Fractional
Divisor” on page 15.
FIGURE 6. TYPICAL CRYSTAL CONNECTIONS
                                                   R=300K to 400K
                                              XTAL1     14.7456    XTAL2
                                                         MHz
                                                C1                  C2
                                             22-47pF              22-47pF
The on-chip oscillator is designed to use an industry standard microprocessor crystal (parallel resonant,
fundamental frequency with 10-22 pF capacitance load, ESR of 20-120 ohms and 100ppm frequency
tolerance) connected externally between the XTAL1 and XTAL2 pins. Typical oscillator connections are shown
in Figure 6. Alternatively, an external clock can be connected to the XTAL1 pin to clock the internal baud rate
generator for standard or custom rates. For further reading on oscillator circuit please see application note
DAN108 on EXAR’s web site.
 2.8     Programmable Baud Rate Generator with Fractional Divisor
Each UART has its own Baud Rate Generator (BRG) with a prescaler for the transmitter and receiver. The
prescaler is controlled by a software bit in the MCR register. The MCR register bit-7 sets the prescaler to divide
the input crystal or external clock by 1 or 4. The output of the prescaler clocks to the BRG. The BRG further
divides this clock by a programmable divisor between 1 and (216 - 0.0625) in increments of 0.0625 (1/16) to
obtain a 16X or 8X or 4X sampling clock of the serial data rate. The sampling clock is used by the transmitter
for data bit shifting and receiver for data sampling. The BRG divisor (DLL, DLM and DLD registers) defaults to
                                                           15


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                      REV. 1.0.2
the value of ’1’ (DLL = 0x01, DLM = 0x00 and DLD = 0x00) upon reset. Therefore, the BRG must be
programmed during initialization to the operating data rate. The DLL and DLM registers provide the integer part
of the divisor and the DLD register provides the fractional part of the divisor. Only the four lower bits of the DLD
are implemented and they are used to select a value from 0 (for setting 0000) to 0.9375 or 15/16 (for setting
1111). Programming the Baud Rate Generator Registers DLL, DLM and DLD provides the capability for
selecting the operating data rate. Table 6 shows the standard data rates available with a 24MHz crystal or
external clock at 16X clock rate. If the pre-scaler is used (MCR bit-7 = 1), the output data rate will be 4 times
less than that shown in Table 6. At 8X sampling rate, these data rates would double. And at 4X sampling rate,
they would quadruple. Also, when using 8X sampling mode, please note that the bit-time will have a jitter (+/- 1/
16) whenever the DLD is non-zero and is an odd number. When using a non-standard data rate crystal or
external clock, the divisor value can be calculated with the following equation(s):
  Required Divisor (decimal)=(XTAL1 clock frequency / prescaler) /(serial data rate x 16), with 16X mode, DLD[5:4]=’00’
  Required Divisor (decimal)= (XTAL1 clock frequency / prescaler / (serial data rate x 8), with 8X mode, DLD[5:4] = ’01’
  Required Divisor (decimal)= (XTAL1 clock frequency / prescaler / (serial data rate x 4), with 4X mode, DLD[5:4] = ’10’
The closest divisor that is obtainable in the V654 can be calculated using the following formula:
  ROUND( (Required Divisor - TRUNC(Required Divisor) )*16)/16 + TRUNC(Required Divisor), where
                                          DLM = TRUNC(Required Divisor) >> 8
                                         DLL = TRUNC(Required Divisor) & 0xFF
                           DLD = ROUND( (Required Divisor-TRUNC(Required Divisor) )*16)
In the formulas above, please note that:
TRUNC (N) = Integer Part of N. For example, TRUNC (5.6) = 5.
ROUND (N) = N rounded towards the closest integer. For example, ROUND (7.3) = 7 and ROUND (9.9) = 10.
A >> B indicates right shifting the value ’A’ by ’B’ number of bits. For example, 0x78A3 >> 8 = 0x0078.
FIGURE 7. BAUD RATE GENERATOR
                                        To Other
                                        Channels
                                                                      DLL, DLM and DLD
                                                                           Registers
                                                  Prescaler    MCR Bit-7=0
                                                 Divide by 1     (default)
                                                                                         16X or 8X or 4X
                 XTAL1          Crystal                                 Fractional Baud        Sampling
                                 Osc/                                   Rate Generator        Rate Clock
                 XTAL2          Buffer                                      Logic           to Transmitter
                                                 Prescaler                                 and Receiver
                                                 Divide by 4    MCR Bit-7=1
                                                             16


                                                                                              XR16V654/654D
REV. 1.0.2                                                     2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
          TABLE 6: TYPICAL DATA RATES WITH A 24 MHZ CRYSTAL OR EXTERNAL CLOCK AT 16X SAMPLING
      Required       DIVISOR FOR         DIVISOR
                                                      DLM PROGRAM     DLL PROGRAM       DLD PROGRAM   DATA ERROR
    Output Data        16x Clock     OBTAINABLE IN
                                                       VALUE (HEX)    VALUE (HEX)        VALUE (HEX)   RATE (%)
         Rate          (Decimal)           V654
         400              3750             3750              E              A6                0             0
        2400               625              625              2              71                0             0
        4800              312.5         312 8/16             1              38                8             0
        9600             156.25         156 4/16             0              9C                4             0
        10000              150              150              0              96                0             0
        19200            78.125         78 2/16              0              4E                2             0
        25000               60               60              0              3C                0             0
        28800           52.0833         52 1/16              0              34                1           0.04
        38400           39.0625         39 1/16              0              27                1             0
        50000               30               30              0              1E                0             0
        57600           26.0417         26 1/16              0              1A                1           0.08
        75000               20               20              0              14                0             0
       100000               15               15              0               F                0             0
       115200           13.0208              13              0               D                0           0.16
       153600            9.7656          9 12/16             0               9                C           0.16
       200000              7.5           7 8/16              0               7                8             0
       225000            6.6667          6 11/16             0               6                B           0.31
       230400            6.5104          6 8/16              0               6                8           0.16
       250000               6                6               0               6                0             0
       300000               5                5               0               5                0             0
       400000             3.75           3 12/16             0               3                C             0
       460800            3.2552          3 4/16              0               3                4           0.16
       500000               3                3               0               3                0             0
       750000               2                2               0               2                0             0
       921600            1.6276          1 10/16             0               1                A           0.16
      1000000              1.5           1 8/16              0               1                8             0
 2.9      Transmitter
The transmitter section comprises of an 8-bit Transmit Shift Register (TSR) and 64 bytes of FIFO which
includes a byte-wide Transmit Holding Register (THR). TSR shifts out every data bit with the 16X/8X/4X
internal clock. A bit time is 16/8/4 clock periods. The transmitter sends the start-bit followed by the number of
data bits, inserts the proper parity-bit if enabled, and adds the stop-bit(s). The status of the FIFO and TSR are
reported in the Line Status Register (LSR bit-5 and bit-6).
  2.9.1     Transmit Holding Register (THR) - Write Only
The transmit holding register is an 8-bit register providing a data interface to the host processor. The host
writes transmit data byte to the THR to be converted into a serial data stream including start-bit, data bits,
parity-bit and stop-bit(s). The least-significant-bit (Bit-0) becomes first data bit to go out. The THR is the input
register to the transmit FIFO of 64 bytes when FIFO operation is enabled by FCR bit-0. Every time a write
operation is made to the THR, the FIFO data pointer is automatically bumped to the next sequential data
location.
                                                           17


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                               REV. 1.0.2
 2.9.2     Transmitter Operation in non-FIFO Mode
The host loads transmit data to THR one character at a time. The THR empty flag (LSR bit-5) is set when the
data byte is transferred to TSR. THR flag can generate a transmit empty interrupt (ISR bit-1) when it is enabled
by IER bit-1. The TSR flag (LSR bit-6) is set when TSR becomes completely empty.
FIGURE 8. TRANSMITTER OPERATION IN NON-FIFO MODE
                                     Data                Transmit
                                     Byte                 Holding
                                                         Register
                                                          (THR)                    THR Interrupt (ISR bit-1)
                                                                                      Enabled by IER bit-1
                          16X or 8X or 4X
                                Clock
                             ( DLD[5:4] )                                                    M             L
                                               Transmit Shift Register (TSR)                 S             S
                                                                                             B             B
                                                                                                           TXNOFIFO1
 2.9.3     Transmitter Operation in FIFO Mode
The host may fill the transmit FIFO with up to 64 bytes of transmit data. The THR empty flag (LSR bit-5) is set
whenever the FIFO is empty. The THR empty flag can generate a transmit empty interrupt (ISR bit-1) when the
FIFO becomes empty. The transmit empty interrupt is enabled by IER bit-1. The TSR flag (LSR bit-6) is set
when TSR/FIFO becomes empty.
FIGURE 9. TRANSMITTER OPERATION IN FIFO AND FLOW CONTROL MODE
                                          Transmit                 Transmit
                                          Data Byte                 FIFO               THR Interrupt (ISR bit-1) falls
                                                                                       below the programmed Trigger
                                                                                       Level and then when becomes
                                                                                       empty. FIFO is Enabled by FCR
                                                                                       bit-0=1
                     Auto CTS Flow Control (CTS# pin)
                      Flow Control Characters
                     (Xoff1/2 and Xon1/2 Reg.)
                      Auto Software Flow Control
                   16X or 8X or 4X Clock
                          (DLD[5:4])                     Transmit Data Shift Register
                                                                  (TSR)
                                                                                                                TXFIFO1
                                                                    18


                                                                                                          XR16V654/654D
REV. 1.0.2                                                            2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
 2.10    Receiver
The receiver section contains an 8-bit Receive Shift Register (RSR) and 64 bytes of FIFO which includes a
byte-wide Receive Holding Register (RHR). The RSR uses the 16X/8X/4X clock (DLD[5:4]) for timing. It
verifies and validates every bit on the incoming character in the middle of each data bit. On the falling edge of
a start or false start bit, an internal receiver counter starts counting at the 16X/8X/4X clock rate. After 8 clocks
(or 4 if 8X or 2 if 4X) the start bit period should be at the center of the start bit. At this time the start bit is
sampled and if it is still a logic 0 it is validated. Evaluating the start bit in this manner prevents the receiver from
assembling a false character. The rest of the data bits and stop bits are sampled and validated in this same
manner to prevent false framing. If there were any error(s), they are reported in the LSR register bits 2-4. Upon
unloading the receive data byte from RHR, the receive FIFO pointer is bumped and the error tags are
immediately updated to reflect the status of the data byte in RHR register. RHR can generate a receive data
ready interrupt upon receiving a character or delay until it reaches the FIFO trigger level. Furthermore, data
delivery to the host is guaranteed by a receive data ready time-out interrupt when data is not received for 4
word lengths as defined by LCR[1:0] plus 12 bits time. This is equivalent to 3.7-4.6 character times. The RHR
interrupt is enabled by IER bit-0. See Figure 10 and Figure 11 below.
  2.10.1    Receive Holding Register (RHR) - Read-Only
The Receive Holding Register is an 8-bit register that holds a receive data byte from the Receive Shift
Register. It provides the receive data interface to the host processor. The RHR register is part of the receive
FIFO of 64 bytes by 11-bits wide, the 3 extra bits are for the 3 error tags to be reported in LSR register. When
the FIFO is enabled by FCR bit-0, the RHR contains the first data character received by the FIFO. After the
RHR is read, the next character byte is loaded into the RHR and the errors associated with the current data
byte are immediately updated in the LSR bits 2-4.
FIGURE 10. RECEIVER OPERATION IN NON-FIFO MODE
                 16X or 8X or 4X Clock
                       ( DLD[5:4] )                Receive Data Shift     Data Bit
                                                    Register (RSR)       Validation         Receive Data Characters
                                             Error
                         Receive                       Receive Data
                                            Tags in
                       Data Byte                      Holding Register             RHR Interrupt (ISR bit-2)
                                           LSR bits
                       and Errors                         (RHR)
                                              4:2
                                                                                                           RXFIFO1
                                                                19


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                                                              REV. 1.0.2
FIGURE 11. RECEIVER OPERATION IN FIFO AND AUTO RTS FLOW CONTROL MODE
          16X or 8X or 4X C lock
               ( D LD [5:4] )             R eceive D ata Shift      D ata Bit
                                           R egister (R SR )       V alidation                                    R eceive D ata C haracters
                                                                        E xam ple
                                                                            : - R X FIFO trigger level selected at 16 bytes
           64 bytes by 11-bit w ide                                                     (See N ote Below )
                     FIFO                                          D ata falls to   R TS# re-asserts w hen data falls below the flow
                                                                        8
                                                                                    control trigger level to restart rem ote transm itter.
                                                                                    Enable by EFR bit-6=1, M C R bit-1.
                                      Error Tags       R eceive
                                                      D ata FIFO      FIFO            R H R Interrupt (IS R bit-2) program m ed for
                                                                   Trigger=16
                                       (64-sets)                                      desired FIFO trigger level.
                                                                                      FIFO is Enabled by F C R bit-0=1
                                                                   D ata fills to    R TS# de-asserts w hen data fills above the flow
                                                                        56
                                                                                     control trigger level to suspend rem ote transm itter.
                                      Error Tags in
                                                                                     Enable by EFR bit-6=1, M C R bit-1.
                                                       R eceive
         R eceive D ata
                                                         D ata
         Byte and Errors              LSR bits 4:2
                                                                                                                                                   R X FIFO 1
2.11     Auto RTS (Hardware) Flow Control
Automatic RTS hardware flow control is used to prevent data overrun to the local receiver FIFO. The RTS#
output is used to request remote unit to suspend/resume data transmission. The auto RTS flow control
features is enabled to fit specific application requirement (see Figure 12):
• Enable auto RTS flow control using EFR bit-6.
• The auto RTS function must be started by asserting RTS# output pin (MCR bit-1 to logic 1 after it is enabled).
If using the Auto RTS interrupt:
Enable RTS interrupt through IER bit-6 (after setting EFR bit-4). The UART issues an interrupt when the RTS#
pin makes a transition from low to high: ISR bit-5 will be set to logic 1.
2.12     Auto RTS Hysteresis
The V654 has a new feature that provides flow control trigger hysteresis while maintaining compatibility with
the XR16C850, ST16C650A and ST16C550 family of UARTs. With the Auto RTS function enabled, an interrupt
is generated when the receive FIFO reaches the selected RX trigger level. The RTS# pin will not be forced
HIGH (RTS off) until the receive FIFO reaches one trigger level above the selected trigger level in the trigger
table (Table 12). The RTS# pin will return LOW after the RX FIFO is unloaded to one level below the selected
trigger level. Under the above described conditions, the V654 will continue to accept data until the receive
FIFO gets full. The Auto RTS function is initiated when the RTS# output pin is asserted LOW (RTS On).
                                      TABLE 7: AUTO RTS (HARDWARE) FLOW CONTROL
                                                                               RTS# DE-ASSERTED (HIGH)                    RTS# ASSERTED (LOW)
       RX TRIGGER LEVEL                        INT PIN ACTIVATION
                                                                               (CHARACTERS IN RX FIFO)                   (CHARACTERS IN RX FIFO)
                8                                         8                                   16                                               0
               16                                         16                                  56                                               8
               56                                         56                                  60                                           16
               60                                         60                                  60                                           56
                                                                          20


                                                                                                        XR16V654/654D
REV. 1.0.2                                                            2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
 2.13      Auto CTS Flow Control
Automatic CTS flow control is used to prevent data overrun to the remote receiver FIFO. The CTS# input is
monitored to suspend/restart the local transmitter. The auto CTS flow control feature is selected to fit specific
application requirement (see Figure 12):
• Enable auto CTS flow control using EFR bit-7.
If needed, the CTS interrupt can be enabled through IER bit-7 (after setting EFR bit-4). The UART issues an
interrupt when the CTS# pin is de-asserted (HIGH): ISR bit-5 will be set to 1, and UART will suspend
transmission as soon as the stop bit of the character in process is shifted out. Transmission is resumed after
the CTS# input is re-asserted (LOW), indicating more data may be sent.
FIGURE 12. AUTO RTS AND CTS FLOW CONTROL OPERATION
                          Local UART                                                         Remote UART
                             UARTA                                                              UARTB
                         Receiver FIFO          RXA                                TXB
                                                                                                Transmitter
                        Trigger Reached
                            Auto RTS           RTSA#                            CTSB#           Auto CTS
                          Trigger Level                                                          Monitor
                                               TXA                                RXB         Receiver FIFO
                           Transmitter                                                       Trigger Reached
                            Auto CTS            CTSA#                           RTSB#           Auto RTS
                             Monitor                                                          Trigger Level
                                      Assert RTS# to Begin
                                          Transmission
                                       1
                     RTSA#                      ON                                     10    ON
                                                                       OFF
                                          2                   7
                    CTSB#                         ON                      OFF             11     ON
                                                                    8
                                            3
                      TXB
                                Data Starts                        6               Restart
                                                                       Suspend
                                            4                                       9
                    RXA FIFO
                                 Receive                      RTS High            RTS Low             RX FIFO
                                   Data      RX FIFO     5                                     12
                      INTA                                    Threshold          Threshold            Trigger Level
                                          Trigger Level
                   (RXA FIFO
                    Interrupt)
                                                                                                            RTSCTS1
   The local UART (UARTA) starts data transfer by asserting RTSA# (1). RTSA# is normally connected to CTSB# (2) of
   remote UART (UARTB). CTSB# allows its transmitter to send data (3). TXB data arrives and fills UARTA receive FIFO
   (4). When RXA data fills up to its receive FIFO trigger level, UARTA activates its RXA data ready interrupt (5) and con-
   tinues to receive and put data into its FIFO. If interrupt service latency is long and data is not being unloaded, UARTA
   monitors its receive data fill level to match the upper threshold of RTS delay and de-assert RTSA# (6). CTSB# follows
   (7) and request UARTB transmitter to suspend data transfer. UARTB stops or finishes sending the data bits in its trans-
   mit shift register (8). When receive FIFO data in UARTA is unloaded to match the lower threshold of RTS delay (9),
   UARTA re-asserts RTSA# (10), CTSB# recognizes the change (11) and restarts its transmitter and data flow again until
   next receive FIFO trigger (12). This same event applies to the reverse direction when UARTA sends data to UARTB
   with RTSB# and CTSA# controlling the data flow.
                                                                 21


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                              REV. 1.0.2
 2.14     Auto Xon/Xoff (Software) Flow Control
When software flow control is enabled (See Table 16), the V654 compares one or two sequential receive data
characters with the programmed Xon or Xoff-1,2 character value(s). If receive character(s) (RX) match the
programmed values, the V654 will halt transmission (TX) as soon as the current character has completed
transmission. When a match occurs, the Xoff (if enabled via IER bit-5) flag will be set and the interrupt output
pin will be activated. Following a suspension due to a match of the Xoff character, the V654 will monitor the
receive data stream for a match to the Xon-1,2 character. If a match is found, the V654 will resume operation
and clear the flags (ISR bit-4).
Reset initially sets the contents of the Xon/Xoff 8-bit flow control registers to a logic 0. Following reset the user
can write any Xon/Xoff value desired for software flow control. Different conditions can be set to detect Xon/
Xoff characters (See Table 16) and suspend/resume transmissions. When double 8-bit Xon/Xoff characters
are selected, the V654 compares two consecutive receive characters with two software flow control 8-bit
values (Xon1, Xon2, Xoff1, Xoff2) and controls TX transmissions accordingly. Under the above described flow
control mechanisms, flow control characters are not placed (stacked) in the user accessible RX data buffer or
FIFO.
In the event that the receive buffer is overfilling and flow control needs to be executed, the V654 automatically
sends an Xoff message (when enabled) via the serial TX output to the remote modem. The V654 sends the
Xoff-1,2 characters two-character-times (= time taken to send two characters at the programmed baud rate)
after the receive FIFO crosses the programmed trigger level. To clear this condition, the V654 will transmit the
programmed Xon-1,2 characters as soon as receive FIFO is less than one trigger level below the programmed
trigger level. Table 8 below explains this.
                                   TABLE 8: AUTO XON/XOFF (SOFTWARE) FLOW CONTROL
                                                          XOFF CHARACTER(S) SENT                  XON CHARACTER(S) SENT
   RX TRIGGER LEVEL           INT PIN ACTIVATION
                                                          (CHARACTERS IN RX FIFO)                 (CHARACTERS IN RX FIFO)
             8                         8                               8*                                      0
            16                        16                              16*                                      8
            56                        56                              56*                                     16
            60                        60                              60*                                     56
* After the trigger level is reached, an xoff character is sent after a short span of time (= time required to send 2 characters);
for example, after 2.083ms has elapsed for 9600 baud and 10-bit word length setting.
 2.15      Special Character Detect
A special character detect feature is provided to detect an 8-bit character when bit-5 is set in the Enhanced
Feature Register (EFR). When this character (Xoff2) is detected, it will be placed in the FIFO along with normal
incoming RX data.
The V654 compares each incoming receive character with Xoff-2 data. If a match exists, the received data will
be transferred to the RX FIFO and ISR bit-4 will be set to indicate detection of special character. Although the
Internal Register Table shows Xon, Xoff Registers with eight bits of character information, the actual number of
bits is dependent on the programmed word length. Line Control Register (LCR) bits 0-1 defines the number of
character bits, i.e., either 5 bits, 6 bits, 7 bits, or 8 bits. The word length selected by LCR bits 0-1 also
determines the number of bits that will be used for the special character comparison. Bit-0 in the Xon, Xoff
Registers corresponds with the LSB bit for the receive character.
                                                                 22


                                                                                                                                           XR16V654/654D
REV. 1.0.2                                                                       2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
2.16     Infrared Mode
The V654 UART includes the infrared encoder and decoder compatible to the IrDA (Infrared Data Association)
version 1.0. The IrDA 1.0 standard that stipulates the infrared encoder sends out a 3/16 of a bit wide HIGH-
pulse for each “0” bit in the transmit data stream. This signal encoding reduces the on-time of the infrared LED,
hence reduces the power consumption. See Figure 13 below.
The infrared encoder and decoder are enabled by setting MCR register bit-6 to a ‘1’. When the infrared feature
is enabled, the transmit data output, TX, idles at logic zero level. Likewise, the RX input assumes an idle level
of logic zero from a reset and power up, see Figure 13.
Typically, the wireless infrared decoder receives the input pulse from the infrared sensing diode on the RX pin.
Each time it senses a light pulse, it returns a logic 1 to the data bit stream.
FIGURE 13. INFRARED TRANSMIT DATA ENCODING AND RECEIVE DATA DECODING
                                                                      Character
                                     Start
                                                                      Data Bits                                     Stop
                          TX Data     0         1         0       1        0        0       1       1       0        1
                          Transmit
                          IR Pulse
                          (TX Pin)
                                                                                                                      1/2 Bit Time
                                              Bit Time
                                                                               3/16 Bit Time
                                                                                                                               IrEncoder-1
                          Receive
                          IR Pulse
                          (RX pin)           Bit Time
                                                     1/16 Clock Delay
                          RX Data             0       1       0        1        0       0       1       1       0      1
                                             Start                         Data Bits                                  Stop
                                                                               Character
                                                                                                                             IRdecoder-1
                                                                        23


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                REV. 1.0.2
 2.17     Sleep Mode with Auto Wake-Up
The V654 supports low voltage system designs, hence, a sleep mode is included to reduce its power
consumption when the chip is not actively used.
All of these conditions must be satisfied for the V654 to enter sleep mode:
     ■  no interrupts pending for all four channels of the V654 (ISR bit-0 = 1)
     ■  sleep mode of all channels are enabled (IER bit-4 = 1)
     ■  modem inputs are not toggling (MSR bits 0-3 = 0)
     ■  RX input pins are idling HIGH
The V654 stops its crystal oscillator to conserve power in the sleep mode. User can check the XTAL2 pin for
no clock output as an indication that the device has entered the sleep mode.
The V654 resumes normal operation by any of the following:
     ■  a receive data start bit transition (HIGH to LOW)
     ■  a data byte is loaded to the transmitter, THR or FIFO
     ■  a change of logic state on any of the modem or general purpose serial inputs: CTS#, DSR#, CD#, RI#
If the V654 is awakened by any one of the above conditions, it will return to the sleep mode automatically after
all interrupting conditions have been serviced and cleared. If the V654 is awakened by the modem inputs, a
read to the MSR is required to reset the modem inputs. In any case, the sleep mode will not be entered while
an interrupt is pending from any channel. The V654 will stay in the sleep mode of operation until it is disabled
by setting IER bit-4 to a logic 0.
If the address lines, data bus lines, IOW#, IOR#, CSA#, CSB#, CSC#, CSD# and modem input lines remain
steady when the V654 is in sleep mode, the maximum current will be in the microamp range as specified in the
DC Electrical Characteristics on page 42. If the input lines are floating or are toggling while the V654 is in
sleep mode, the current can be up to 100 times more. If any of those signals are toggling or floating, then an
external buffer would be required to keep the address, data and control lines steady to achieve the low current.
A word of caution: owing to the starting up delay of the crystal oscillator after waking up from sleep mode, the
first few receive characters may be lost. Also, make sure the RX A-D pins are idling HIGH or “marking”
condition during sleep mode. This may not occur when the external interface transceivers (RS-232, RS-485 or
another type) are also put to sleep mode and cannot maintain the “marking” condition. To avoid this, the
system design engineer can use a 47k ohm pull-up resistor on each of the RX A-D inputs.
 2.18     Internal Loopback
The V654 UART provides an internal loopback capability for system diagnostic purposes. The internal
loopback mode is enabled by setting MCR register bit-4 to logic 1. All regular UART functions operate normally.
Figure 14 shows how the modem port signals are re-configured. Transmit data from the transmit shift register
output is internally routed to the receive shift register input allowing the system to receive the same data that it
was sending. The TX pin is held HIGH or mark condition while RTS# and DTR# are de-asserted, and CTS#,
DSR# CD# and RI# inputs are ignored. Caution: the RX input must be held HIGH during loopback test else
upon exiting the loopback test the UART may detect and report a false “break” signal.
                                                           24


                                                                                                                                                 XR16V654/654D
REV. 1.0.2                                                                                                             2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
FIGURE 14. INTERNAL LOOP BACK IN CHANNEL A AND B
                                                                                                                       VCC
                                                                                                                                       TX A-D
                                                             Transmit Shift Register
                                                                  (THR/FIFO)
                                                                                                             MCR bit-4=1
               Internal Data Bus Lines and Control Signals
                                                             Receive Shift Register
                                                                 (RHR/FIFO)                                                            RX A-D
                                                                                                                       VCC
                                                                                                                                       RTS# A-D
                                                                                                            RTS#
                                                                    Modem / General Purpose Control Logic
                                                                                                            CTS#                       CTS# A-D
                                                                                                                       VCC
                                                                                                                                       DTR# A-D
                                                                                                            DTR#
                                                                                                            DSR#
                                                                                                                                       DSR# A-D
                                                                                                                       OP1#
                                                                                                            RI#
                                                                                                                                       RI# A-D
                                                                                                                       OP2#
                                                                                                            CD#
                                                                                                                                       CD# A-D
                                                                                                                  25


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                        REV. 1.0.2
  3.0 UART INTERNAL REGISTERS
Each UART channel in the V654 has its own set of configuration registers selected by address lines A0, A1
and A2 with a specific channel selected (See Table 1 and Table 2). The complete register set is shown on
Table 9 and Table 10.
.
                                     TABLE 9: UART INTERNAL REGISTERS
    A2,A1,A0 ADDRESSES                     REGISTER                  READ/WRITE         COMMENTS
                                          16C550 COMPATIBLE REGISTERS
          0  0 0        RHR - Receive Holding Register                Read-only
                                                                                        LCR[7] = 0
                        THR - Transmit Holding Register               Write-only
         0   0 0        DLL - Divisor LSB                             Read/Write
         0   0 1        DLM - Divisor MSB                             Read/Write  LCR[7] = 1, LCR ≠ 0xBF
         0   1 0        DLD - Divisor Fractional                      Read/Write
         0   0 1        IER - Interrupt Enable Register               Read/Write
         0   1 0        ISR - Interrupt Status Register               Read-only         LCR[7] = 0
                        FCR - FIFO Control Register                   Write-only
         0   1 1        LCR - Line Control Register                   Read/Write
         1   0 0        MCR - Modem Control Register                  Read/Write
         1   0 1        LSR - Line Status Register                    Read-only
                                                                                        LCR[7] = 0
         1   1 0        MSR - Modem Status Register                   Read-only
         1   1 1        SPR - Scratch Pad Register                    Read/Write
                                               ENHANCED REGISTERS
         0   1 0        EFR - Enhanced Function Reg                   Read/Write
         1   0 0        Xon-1 - Xon Character 1                       Read/Write
         1   0 1        Xon-2 - Xon Character 2                       Read/Write       LCR = 0xBF
         1   1 0        Xoff-1 - Xoff Character 1                     Read/Write
         1   1 1        Xoff-2 - Xoff Character 2                     Read/Write
         X   X X        FSTAT - FIFO Status Register                  Read-only      FSRS# pin is LOW
                                                        26


                                                                                             XR16V654/654D
REV. 1.0.2                                                  2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
           TABLE 10: INTERNAL REGISTERS DESCRIPTION. SHADED BITS ARE ENABLED WHEN EFR BIT-4=1
 ADDRESS    REG    READ/
                           BIT-7    BIT-6     BIT-5       BIT-4      BIT-3     BIT-2   BIT-1    BIT-0  COMMENT
  A2-A0     NAME   WRITE
                                        16C550 Compatible Registers
   000      RHR     RD     Bit-7    Bit-6     Bit-5        Bit-4     Bit-3     Bit-2   Bit-1    Bit-0
   000      THR     WR     Bit-7    Bit-6     Bit-5        Bit-4     Bit-3     Bit-2   Bit-1    Bit-0
   001       IER  RD/WR      0/       0/        0/          0/      Modem RX Line        TX      RX
                                                                   Stat. Int.  Stat.  Empty     Data
                          CTS#      RTS#     Xoff Int.    Sleep     Enable      Int.     Int     Int.
                            Int.     Int.    Enable       Mode                Enable Enable Enable
                          Enable   Enable                Enable
   010       ISR    RD    FIFOs    FIFOs        0/          0/        INT       INT     INT     INT   LCR[7] = 0
                         Enabled Enabled                            Source    Source Source Source
                                               INT         INT       Bit-3     Bit-2   Bit-1    Bit-0
                                             Source      Source
                                              Bit-5        Bit-4
   010      FCR     WR   RX FIFO RX FIFO        0/          0/       DMA         TX     RX     FIFOs
                          Trigger Trigger                            Mode      FIFO    FIFO    Enable
                                            TX FIFO     TX FIFO     Enable     Reset  Reset
                                             Trigger     Trigger
   011      LCR   RD/WR   Divisor  Set TX      Set        Even       Parity    Stop    Word     Word
                          Enable    Break     Parity      Parity    Enable      Bits  Length Length
                                                                                       Bit-1    Bit-0
   100      MCR   RD/WR      0/       0/        0/       Internal  INT Out- Rsvd      RTS# DTR#
                                                        Lopback       put     (OP1#)  Output   Output
                           BRG    IR Mode XonAny         Enable     Enable            Control Control
                           Pres-   ENable
                                                                    (OP2#)
                           caler
   101      LSR     RD   RX FIFO   THR &      THR       RX Break RX Fram-       RX      RX       RX
                          Global    TSR      Empty                 ing Error   Parity Over-     Data  LCR[7] = 0
                           Error   Empty                                       Error    run    Ready
                                                                                       Error
   110      MSR     RD     CD#       RI#      DSR#        CTS#       Delta     Delta   Delta    Delta
                           Input    Input     Input       Input      CD#        RI#   DSR#     CTS#
   111      SPR   RD/WR    Bit-7    Bit-6     Bit-5        Bit-4     Bit-3     Bit-2   Bit-1    Bit-0
                                         Baud Rate Generator Divisor
   000      DLL   RD/WR    Bit-7    Bit-6     Bit-5        Bit-4     Bit-3     Bit-2   Bit-1    Bit-0  LCR[7]=1
                                                                                                      LCR≠0xBF
   001      DLM   RD/WR    Bit-7    Bit-6     Bit-5        Bit-4     Bit-3     Bit-2   Bit-1    Bit-0
  010       DLD   RD/WR    Rsvd     Rsvd    4X Mode 8X Mode          Bit-3     Bit-2   Bit-1    Bit-0 LCR[7] = 1
                                                                                                      LCR≠0xBF
                                                                                                      EFR[4] = 1
                                                       27


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                               REV. 1.0.2
             TABLE 10: INTERNAL REGISTERS DESCRIPTION. SHADED BITS ARE ENABLED WHEN EFR BIT-4=1
 ADDRESS       REG     READ/
                                  BIT-7   BIT-6    BIT-5     BIT-4     BIT-3  BIT-2    BIT-1   BIT-0    COMMENT
  A2-A0       NAME     WRITE
                                                 Enhanced Registers
   010         EFR     RD/WR      Auto    Auto    Special   Enable     Soft-  Soft-    Soft-   Soft-
                                  CTS#    RTS#      Char   IER [7:4],  ware   ware     ware    ware
                                 Enable  Enable    Select  ISR [5:4],  Flow   Flow     Flow    Flow
                                                           FCR[5:4],          Cntl     Cntl    Cntl
                                                                       Cntl
                                                           MCR[7:5],          Bit-2    Bit-1   Bit-0
                                                                       Bit-3
                                                             DLD
                                                                                                       LCR=0XBF
   100        XON1 RD/WR          Bit-7   Bit-6     Bit-5    Bit-4     Bit-3  Bit-2    Bit-1   Bit-0
   101        XON2 RD/WR          Bit-7   Bit-6     Bit-5    Bit-4     Bit-3  Bit-2    Bit-1   Bit-0
   110       XOFF1 RD/WR          Bit-7   Bit-6     Bit-5    Bit-4     Bit-3  Bit-2    Bit-1   Bit-0
   111       XOFF2 RD/WR          Bit-7   Bit-6     Bit-5    Bit-4     Bit-3  Bit-2    Bit-1   Bit-0
  XXX         FSTAT      RD        RX-     RX-      RX-      RX-       TX-     TX-      TX-    TX- FSRS# pin is
                                 RDYD#   RDYC#    RDYB#     RDYA#     RDYD#  RDYC# RDYB# RDYA# a logic 0. No
                                                                                                      address lines
                                                                                                         required.
 4.0 INTERNAL REGISTER DESCRIPTIONS
 4.1      Receive Holding Register (RHR) - Read- Only
SEE”RECEIVER” ON PAGE 19.
 4.2      Transmit Holding Register (THR) - Write-Only
SEE”TRANSMITTER” ON PAGE 17.
 4.3      Interrupt Enable Register (IER) - Read/Write
The Interrupt Enable Register (IER) masks the interrupts from receive data ready, transmit empty, line status
and modem status registers. These interrupts are reported in the Interrupt Status Register (ISR).
 4.3.1       IER versus Receive FIFO Interrupt Mode Operation
When the receive FIFO (FCR BIT-0 = 1) and receive interrupts (IER BIT-0 = 1) are enabled, the RHR interrupts
(see ISR bits 2 and 3) status will reflect the following:
A. The receive data available interrupts are issued to the host when the FIFO has reached the programmed
     trigger level. It will be cleared when the FIFO drops below the programmed trigger level.
B. FIFO level will be reflected in the ISR register when the FIFO trigger level is reached. Both the ISR register
     status bit and the interrupt will be cleared when the FIFO drops below the trigger level.
C. The receive data ready bit (LSR BIT-0) is set as soon as a character is transferred from the shift register to
     the receive FIFO. It is reset when the FIFO is empty.
                                                          28


                                                                                               XR16V654/654D
REV. 1.0.2                                                     2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
  4.3.2     IER versus Receive/Transmit FIFO Polled Mode Operation
When FCR BIT-0 equals a logic 1 for FIFO enable; resetting IER bits 0-3 enables the XR16V654 in the FIFO
polled mode of operation. Since the receiver and transmitter have separate bits in the LSR either or both can
be used in the polled mode by selecting respective transmit or receive control bit(s).
A. LSR BIT-0 indicates there is data in RHR or RX FIFO.
B. LSR BIT-1 indicates an overrun error has occurred and that data in the FIFO may not be valid.
C. LSR BIT 2-4 provides the type of receive data errors encountered for the data byte in RHR, if any.
D. LSR BIT-5 indicates THR is empty.
E. LSR BIT-6 indicates when both the transmit FIFO and TSR are empty.
F. LSR BIT-7 indicates a data error in at least one character in the RX FIFO.
IER[0]: RHR Interrupt Enable
The receive data ready interrupt will be issued when RHR has a data character in the non-FIFO mode or when
the receive FIFO has reached the programmed trigger level in the FIFO mode.
Logic 0 = Disable the receive data ready interrupt (default).
Logic 1 = Enable the receiver data ready interrupt.
IER[1]: THR Interrupt Enable
This bit enables the Transmit Ready interrupt which is issued whenever the THR becomes empty in the non-
FIFO mode or when data in the FIFO falls below the programmed trigger level in the FIFO mode. If the THR is
empty when this bit is enabled, an interrupt will be generated.
Logic 0 = Disable Transmit Ready interrupt (default).
Logic 1 = Enable Transmit Ready interrupt.
IER[2]: Receive Line Status Interrupt Enable
If any of the LSR register bits 1, 2, 3 or 4 is a logic 1, it will generate an interrupt to inform the host controller
about the error status of the current data byte in FIFO. LSR bit-1 generates an interrupt immediately when an
overrun occurs. LSR bits 2-4 generate an interrupt when the character in the RHR has an error.
• Logic 0 = Disable the receiver line status interrupt (default).
• Logic 1 = Enable the receiver line status interrupt.
IER[3]: Modem Status Interrupt Enable
• Logic 0 = Disable the modem status register interrupt (default).
• Logic 1 = Enable the modem status register interrupt.
IER[4]: Sleep Mode Enable (requires EFR[4] = 1)
• Logic 0 = Disable Sleep Mode (default).
• Logic 1 = Enable Sleep Mode. See Sleep Mode section for further details.
IER[5]: Xoff Interrupt Enable (requires EFR[4]=1)
• Logic 0 = Disable the software flow control, receive Xoff interrupt. (default)
• Logic 1 = Enable the software flow control, receive Xoff interrupt. See Software Flow Control section for
   details.
                                                          29


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                 REV. 1.0.2
IER[6]: RTS# Output Interrupt Enable (requires EFR[4]=1)
• Logic 0 = Disable the RTS# interrupt (default).
• Logic 1 = Enable the RTS# interrupt. The UART issues an interrupt when the RTS# pin makes a transition
  from LOW to HIGH (if enabled by EFR bit-6).
IER[7]: CTS# Input Interrupt Enable (requires EFR[4]=1)
• Logic 0 = Disable the CTS# interrupt (default).
• Logic 1 = Enable the CTS# interrupt. The UART issues an interrupt when CTS# pin makes a transition from
  LOW to HIGH (if enabled by EFR bit-7).
 4.4     Interrupt Status Register (ISR) - Read-Only
The UART provides multiple levels of prioritized interrupts to minimize external software interaction. The
Interrupt Status Register (ISR) provides the user with six interrupt status bits. Performing a read cycle on the
ISR will give the user the current highest pending interrupt level to be serviced, others are queued up to be
serviced next. No other interrupts are acknowledged until the pending interrupt is serviced. The Interrupt
Source Table, Table 11, shows the data values (bit 0-5) for the interrupt priority levels and the interrupt sources
associated with each of these interrupt levels.
 4.4.1      Interrupt Generation:
• LSR is by any of the LSR bits 1, 2, 3 and 4.
• RXRDY is by RX trigger level.
• RXRDY Time-out is by a 4-char plus 12 bits delay timer.
• TXRDY is by TX trigger level or TX FIFO empty.
• MSR is by any of the MSR bits 0, 1, 2 and 3.
• Receive Xoff/Special character is by detection of a Xoff or Special character.
• CTS# is when the remote transmitter toggles the input pin (from LOW to HIGH) during auto CTS flow control.
• RTS# is when its receiver toggles the output pin (from LOW to HIGH) during auto RTS flow control.
 4.4.2      Interrupt Clearing:
• LSR interrupt is cleared by a read to the LSR register.
• RXRDY interrupt is cleared by reading data until FIFO falls below the trigger level.
• RXRDY Time-out interrupt is cleared by reading RHR.
• TXRDY interrupt is cleared by a read to the ISR register or writing to THR.
• MSR interrupt is cleared by a read to the MSR register.
• Xoff interrupt is cleared by a read to the ISR register or when XON character(s) is received.
• Special character interrupt is cleared by a read to ISR register or after next character is received.
• RTS# and CTS# flow control interrupts are cleared by a read to the MSR register.
                                                        30


                                                                                              XR16V654/654D
REV. 1.0.2                                                   2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
]
                                 TABLE 11: INTERRUPT SOURCE AND PRIORITY LEVEL
  PRIORITY                  ISR REGISTER STATUS BITS                               SOURCE OF INTERRUPT
    LEVEL     BIT-5     BIT-4   BIT-3   BIT-2    BIT-1     BIT-0
      1         0         0       0       1        1         0      LSR (Receiver Line Status Register)
      2         0         0       1       1        0         0      RXRDY (Receive Data Time-out)
      3         0         0       0       1        0         0      RXRDY (Received Data Ready)
      4         0         0       0       0        1         0      TXRDY (Transmit Ready)
      5         0         0       0       0        0         0      MSR (Modem Status Register)
      6         0         1       0       0        0         0      RXRDY (Received Xoff or Special character)
      7         1         0       0       0        0         0      CTS#, RTS# change of state
      -         0         0       0       0        0         1      None (default)
ISR[0]: Interrupt Status
• Logic 0 = An interrupt is pending and the ISR contents may be used as a pointer to the appropriate interrupt
   service routine.
• Logic 1 = No interrupt pending (default condition).
ISR[3:1]: Interrupt Status
These bits indicate the source for a pending interrupt at interrupt priority levels (See Interrupt Source
Table 11).
ISR[4]: Interrupt Status (requires EFR bit-4 = 1)
This bit is enabled when EFR bit-4 is set to a logic 1. ISR bit-4 indicates that the receiver detected a data match
of the Xoff character(s) or a special character.
ISR[5]: Interrupt Status (requires EFR bit-4 = 1)
ISR bit-5 indicates that CTS# or RTS# has changed state from LOW to HIGH.
ISR[7:6]: FIFO Enable Status
These bits are set to a logic 0 when the FIFOs are disabled. They are set to a logic 1 when the FIFOs are
enabled.
  4.5     FIFO Control Register (FCR) - Write-Only
This register is used to enable the FIFOs, clear the FIFOs, set the transmit/receive FIFO trigger levels, and
select the DMA mode. The DMA, and FIFO modes are defined as follows:
FCR[0]: TX and RX FIFO Enable
• Logic 0 = Disable the transmit and receive FIFO (default).
• Logic 1 = Enable the transmit and receive FIFOs. This bit must be set to logic 1 when other FCR bits are
   written or they will not be programmed.
                                                         31


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                               REV. 1.0.2
FCR[1]: RX FIFO Reset
This bit is only active when FCR bit-0 is a ‘1’.
• Logic 0 = No receive FIFO reset (default)
• Logic 1 = Reset the receive FIFO pointers and FIFO level counter logic (the receive shift register is not
   cleared or altered). This bit will return to a logic 0 after resetting the FIFO.
FCR[2]: TX FIFO Reset
This bit is only active when FCR bit-0 is a ‘1’.
• Logic 0 = No transmit FIFO reset (default).
• Logic 1 = Reset the transmit FIFO pointers and FIFO level counter logic (the transmit shift register is not
   cleared or altered). This bit will return to a logic 0 after resetting the FIFO.
FCR[3]: DMA Mode Select
Controls the behavior of the -TXRDY and -RXRDY pins. See DMA operation section for details.
• Logic 0 = Normal Operation (default).
• Logic 1 = DMA Mode.
FCR[5:4]: Transmit FIFO Trigger Select (requires EFR bit-4 = 1)
(logic 0 = default, TX trigger level = 8)
These 2 bits set the trigger level for the transmit FIFO. The UART will issue a transmit interrupt when the
number of characters in the FIFO falls below the selected trigger level, or when it gets empty in case that the
FIFO did not get filled over the trigger level on last re-load. Table 12 below shows the selections.
FCR[7:6]: Receive FIFO Trigger Select
(logic 0 = default, RX trigger level = 8)
These 2 bits are used to set the trigger level for the receive FIFO. The UART will issue a receive interrupt when
the number of the characters in the FIFO crosses the trigger level. Table 12 shows the complete selections.
                        TABLE 12: TRANSMIT AND RECEIVE FIFO TRIGGER LEVEL SELECTION
                                                                    RECEIVE       TRANSMIT
                             FCR       FCR      FCR      FCR
                                                                    TRIGGER       TRIGGER
                            BIT-7      BIT-6    BIT-5    BIT-4
                                                                     LEVEL          LEVEL
                                                  0        0                          8
                                                  0        1                         16
                                                  1        0                         32
                                                  1        1                         56
                              0          0                              8
                              0          1                             16
                              1          0                             56
                              1          1                             60
                                                             32


                                                                                            XR16V654/654D
REV. 1.0.2                                                     2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
 4.6      Line Control Register (LCR) - Read/Write
The Line Control Register is used to specify the asynchronous data communication format. The word or
character length, the number of stop bits, and the parity are selected by writing the appropriate bits in this
register.
LCR[1:0]: TX and RX Word Length Select
These two bits specify the word length to be transmitted or received.
                                   BIT-1          BIT-0           WORD LENGTH
                                     0              0                5 (default)
                                     0              1                     6
                                     1              0                     7
                                     1              1                     8
LCR[2]: TX and RX Stop-bit Length Select
The length of stop bit is specified by this bit in conjunction with the programmed word length.
                                                   WORD           STOP BIT LENGTH
                                   BIT-2
                                                  LENGTH            (BIT TIME(S))
                                     0            5,6,7,8             1 (default)
                                     1               5                   1-1/2
                                     1             6,7,8                   2
LCR[3]: TX and RX Parity Select
Parity or no parity can be selected via this bit. The parity bit is a simple way used in communications for data
integrity check. See Table 13 for parity selection summary below.
• Logic 0 = No parity.
• Logic 1 = A parity bit is generated during the transmission while the receiver checks for parity error of the
   data character received.
LCR[4]: TX and RX Parity Select
If the parity bit is enabled with LCR bit-3 set to a logic 1, LCR BIT-4 selects the even or odd parity format.
• Logic 0 = ODD Parity is generated by forcing an odd number of logic 1’s in the transmitted character. The
   receiver must be programmed to check the same format (default).
• Logic 1 = EVEN Parity is generated by forcing an even number of logic 1’s in the transmitted character. The
   receiver must be programmed to check the same format.
                                                           33


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                             REV. 1.0.2
LCR[5]: TX and RX Parity Select
If the parity bit is enabled, LCR BIT-5 selects the forced parity format.
• LCR BIT-5 = logic 0, parity is not forced (default).
• LCR BIT-5 = logic 1 and LCR BIT-4 = logic 0, parity bit is forced to a logical 1 for the transmit and receive
   data.
• LCR BIT-5 = logic 1 and LCR BIT-4 = logic 1, parity bit is forced to a logical 0 for the transmit and receive
   data.
                                           TABLE 13: PARITY SELECTION
                             LCR BIT-5 LCR BIT-4 LCR BIT-3          PARITY SELECTION
                                X          X           0                No parity
                                0          0           1                Odd parity
                                0          1           1               Even parity
                                1          0           1        Force parity to mark, HIGH
                                1          1           1       Forced parity to space, LOW
LCR[6]: Transmit Break Enable
When enabled, the Break control bit causes a break condition to be transmitted (the TX output is forced to a
“space’, logic 0, state). This condition remains, until disabled by setting LCR bit-6 to a logic 0.
• Logic 0 = No TX break condition (default).
• Logic 1 = Forces the transmitter output (TX) to a “space”, logic 0, for alerting the remote receiver of a line
   break condition.
LCR[7]: Baud Rate Divisors Enable
Baud rate generator divisor (DLL/DLM/DLD) enable.
• Logic 0 = Data registers are selected (default).
• Logic 1 = Divisor latch registers are selected.
 4.7     Modem Control Register (MCR) or General Purpose Outputs Control - Read/Write
The MCR register is used for controlling the serial/modem interface signals or general purpose inputs/outputs.
MCR[0]: DTR# Output
The DTR# pin is a modem control output. If the modem interface is not used, this output may be used as a
general purpose output.
• Logic 0 = Force DTR# output HIGH (default).
• Logic 1 = Force DTR# output LOW.
MCR[1]: RTS# Output
The RTS# pin is a modem control output and may be used for automatic hardware flow control by enabled by
EFR bit-6. If the modem interface is not used, this output may be used as a general purpose output.
• Logic 0 = Force RTS# output HIGH (default).
• Logic 1 = Force RTS# output LOW.
                                                          34


                                                                                            XR16V654/654D
REV. 1.0.2                                                  2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
MCR[2]: Reserved
OP1# is not available as an output pin on the V654. But it is available for use during Internal Loopback Mode.
In the Loopback Mode, this bit is used to write the state of the modem RI# interface signal.
MCR[3]: INT Output Enable
Enable or disable INT outputs to become active or in three-state. This function is associated with the INTSEL
input, see below table for details. This bit is also used to control the OP2# signal during internal loopback
mode. INTSEL pin must be LOW during 68 mode.
• Logic 0 = INT (A-D) outputs disabled (three state) in the 16 mode (default). During internal loopback mode,
  OP2# is HIGH.
• Logic 1 = INT (A-D) outputs enabled (active) in the 16 mode. During internal loopback mode, OP2# is LOW.
                                        TABLE 14: INT OUTPUT MODES
                              INTSEL   MCR
                                                   INT A-D OUTPUTS IN 16 MODE
                                PIN    BIT-3
                                 0       0                   Three-State
                                 0       1                     Active
                                 1       X                     Active
MCR[4]: Internal Loopback Enable
• Logic 0 = Disable loopback mode (default).
• Logic 1 = Enable local loopback mode, see loopback section and Figure 14.
MCR[5]: Xon-Any Enable (requires EFR bit-4 = 1)
• Logic 0 = Disable Xon-Any function (for 16C550 compatibility, default).
• Logic 1 = Enable Xon-Any function. In this mode, any RX character received will resume transmit operation.
  The RX character will be loaded into the RX FIFO , unless the RX character is an Xon or Xoff character and
  the V654 is programmed to use the Xon/Xoff flow control.
MCR[6]: Infrared Encoder/Decoder Enable (requires EFR bit-4 = 1)
• Logic 0 = Enable the standard modem receive and transmit input/output interface. (Default)
• Logic 1 = Enable infrared IrDA receive and transmit inputs/outputs. The TX/RX output/input are routed to the
  infrared encoder/decoder. The data input and output levels conform to the IrDA infrared interface
  requirement. The RX FIFO may need to be flushed upon enable. While in this mode, the infrared TX output
  will be LOW during idle data conditions.
MCR[7]: Clock Prescaler Select (requires EFR bit-4 = 1)
• Logic 0 = Divide by one. The input clock from the crystal or external clock is fed directly to the Programmable
  Baud Rate Generator without further modification, i.e., divide by one (default).
• Logic 1 = Divide by four. The prescaler divides the input clock from the crystal or external clock by four and
  feeds it to the Programmable Baud Rate Generator, hence, data rates become one forth.
                                                        35


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                  REV. 1.0.2
 4.8      Line Status Register (LSR) - Read Only
This register provides the status of data transfers between the UART and the host. If IER bit-2 is enabled, LSR
bit 1 will generate an interrupt immediately and LSR bits 2-4 will generate an interrupt when a character with an
error is in the RHR.
LSR[0]: Receive Data Ready Indicator
• Logic 0 = No data in receive holding register or FIFO (default).
• Logic 1 = Data has been received and is saved in the receive holding register or FIFO.
LSR[1]: Receiver Overrun Flag
• Logic 0 = No overrun error (default).
• Logic 1 = Overrun error. A data overrun error condition occurred in the receive shift register. This happens
   when additional data arrives while the FIFO is full. In this case the previous data in the receive shift register
   is overwritten. Note that under this condition the data byte in the receive shift register is not transferred into
   the FIFO, therefore the data in the FIFO is not corrupted by the error.
LSR[2]: Receive Data Parity Error Tag
• Logic 0 = No parity error (default).
• Logic 1 = Parity error. The receive character in RHR does not have correct parity information and is suspect.
   This error is associated with the character available for reading in RHR.
LSR[3]: Receive Data Framing Error Tag
• Logic 0 = No framing error (default).
• Logic 1 = Framing error. The receive character did not have a valid stop bit(s). This error is associated with
   the character available for reading in RHR.
LSR[4]: Receive Break Tag
• Logic 0 = No break condition (default).
• Logic 1 = The receiver received a break signal (RX was LOW for at least one character frame time). In the
   FIFO mode, only one break character is loaded into the FIFO. The break indication remains until the RX
   input returns to the idle condition, “mark” or HIGH.
LSR[5]: Transmit Holding Register Empty Flag
This bit is the Transmit Holding Register Empty indicator. The THR bit is set to a logic 1 when the last data byte
is transferred from the transmit holding register to the transmit shift register. The bit is reset to logic 0
concurrently with the data loading to the transmit holding register by the host. In the FIFO mode this bit is set
when the transmit FIFO is empty, it is cleared when the transmit FIFO contains at least 1 byte.
LSR[6]: THR and TSR Empty Flag
This bit is set to a logic 1 whenever the transmitter goes idle. It is set to logic 0 whenever either the THR or
TSR contains a data character. In the FIFO mode this bit is set to a logic 1 whenever the transmit FIFO and
transmit shift register are both empty.
LSR[7]: Receive FIFO Data Error Flag
• Logic 0 = No FIFO error (default).
• Logic 1 = A global indicator for the sum of all error bits in the RX FIFO. At least one parity error, framing error
   or break indication is in the FIFO data. This bit clears when there is no more error(s) in any of the bytes in the
   RX FIFO.
                                                          36


                                                                                          XR16V654/654D
REV. 1.0.2                                                   2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
 4.9      Modem Status Register (MSR) - Read Only
This register provides the current state of the modem interface input signals. Lower four bits of this register are
used to indicate the changed information. These bits are set to a logic 1 whenever a signal from the modem
changes state. These bits may be used for general purpose inputs when they are not used with modem
signals.
MSR[0]: Delta CTS# Input Flag
• Logic 0 = No change on CTS# input (default).
• Logic 1 = The CTS# input has changed state since the last time it was monitored. A modem status interrupt
   will be generated if MSR interrupt is enabled (IER bit-3).
MSR[1]: Delta DSR# Input Flag
• Logic 0 = No change on DSR# input (default).
• Logic 1 = The DSR# input has changed state since the last time it was monitored. A modem status interrupt
   will be generated if MSR interrupt is enabled (IER bit-3).
MSR[2]: Delta RI# Input Flag
• Logic 0 = No change on RI# input (default).
• Logic 1 = The RI# input has changed from LOW to HIGH, ending of the ringing signal. A modem status
   interrupt will be generated if MSR interrupt is enabled (IER bit-3).
MSR[3]: Delta CD# Input Flag
• Logic 0 = No change on CD# input (default).
• Logic 1 = Indicates that the CD# input has changed state since the last time it was monitored. A modem
   status interrupt will be generated if MSR interrupt is enabled (IER bit-3).
MSR[4]: CTS Input Status
CTS# pin may function as automatic hardware flow control signal input if it is enabled and selected by Auto
CTS (EFR bit-7). Auto CTS flow control allows starting and stopping of local data transmissions based on the
modem CTS# signal. A HIGH on the CTS# pin will stop UART transmitter as soon as the current character has
finished transmission, and a LOW will resume data transmission. Normally MSR bit-4 bit is the compliment of
the CTS# input. However in the loopback mode, this bit is equivalent to the RTS# bit in the MCR register. The
CTS# input may be used as a general purpose input when the modem interface is not used.
MSR[5]: DSR Input Status
Normally this bit is the complement of the DSR# input. In the loopback mode, this bit is equivalent to the DTR#
bit in the MCR register. The DSR# input may be used as a general purpose input when the modem interface is
not used.
MSR[6]: RI Input Status
Normally this bit is the complement of the RI# input. In the loopback mode this bit is equivalent to bit-2 in the
MCR register. The RI# input may be used as a general purpose input when the modem interface is not used.
MSR[7]: CD Input Status
Normally this bit is the complement of the CD# input. In the loopback mode this bit is equivalent to bit-3 in the
MCR register. The CD# input may be used as a general purpose input when the modem interface is not used.
 4.10     Scratch Pad Register (SPR) - Read/Write
This is a 8-bit general purpose register for the user to store temporary data. The content of this register is
preserved during sleep mode but becomes 0xFF (default) after a reset or a power off-on cycle.
                                                          37


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                           REV. 1.0.2
 4.11    Baud Rate Generator Registers (DLL and DLM) - Read/Write
These registers make-up the value of the baud rate divisor. The concatenation of the contents of DLM and DLL
gives the 16-bit divisor value. Then the value is added to DLD[3:0]/16 to achieve the fractional baud rate
divisor. DLD must be enabled via EFR bit-4 before it can be accessed. See Table 15 below and See ”Section
2.8, Programmable Baud Rate Generator with Fractional Divisor” on page 15.
DLD[5:4]: Sampling Rate Select
These bits select the data sampling rate. By default, the data sampling rate is 16X. The maximum data rate will
double if the 8X mode is selected and will quadruple if the 4X mode is selected. See Table 15 below.
                                       TABLE 15: SAMPLING RATE SELECT
                DLD[5]                               DLD[4]                           SAMPLING RATE
                   0                                     0                                 16X
                   0                                     1                                  8X
                   1                                    X                                   4X
DLD[7:6]: Reserved
 4.12    Enhanced Feature Register (EFR) - Read/Write
Enhanced features are enabled or disabled using this register. Bit 0-3 provide single or dual consecutive
character software flow control selection (see Table 16). When the Xon1 and Xon2 and Xoff1 and Xoff2 modes
are selected, the double 8-bit words are concatenated into two sequential characters. Caution: note that
whenever changing the TX or RX flow control bits, always reset all bits back to logic 0 (disable) before
programming a new setting.
EFR[3:0]: Software Flow Control Select
Single character and dual sequential characters software flow control is supported. Combinations of software
flow control can be selected by programming these bits.
                                                        38


                                                                                              XR16V654/654D
REV. 1.0.2                                                     2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
                                  TABLE 16: SOFTWARE FLOW CONTROL FUNCTIONS
     EFR BIT-3         EFR BIT-2      EFR BIT-1      EFR BIT-0
                                                                    TRANSMIT AND RECEIVE SOFTWARE FLOW CONTROL
      CONT-3            CONT-2          CONT-1        CONT-0
         0                 0              0              0       No TX and RX flow control (default and reset)
         0                 0              X              X       No transmit flow control
         1                 0              X              X       Transmit Xon1, Xoff1
         0                 1              X              X       Transmit Xon2, Xoff2
         1                 1              X              X       Transmit Xon1 and Xon2, Xoff1 and Xoff2
         X                X               0              0       No receive flow control
         X                X               1              0       Receiver compares Xon1, Xoff1
         X                X               0              1       Receiver compares Xon2, Xoff2
         1                 0              1              1       Transmit Xon1, Xoff1
                                                                 Receiver compares Xon1 or Xon2, Xoff1 or Xoff2
         0                 1              1              1       Transmit Xon2, Xoff2
                                                                 Receiver compares Xon1 or Xon2, Xoff1 or Xoff2
         1                 1              1              1       Transmit Xon1 and Xon2, Xoff1 and Xoff2,
                                                                 Receiver compares Xon1 and Xon2, Xoff1 and Xoff2
         0                 0              1              1       No transmit flow control,
                                                                 Receiver compares Xon1 and Xon2, Xoff1 and Xoff2
EFR[4]: Enhanced Function Bits Enable
Enhanced function control bit. This bit enables IER bits 4-7, ISR bits 4-5, FCR bits 4-5, MCR bits 5-7, and DLD
to be modified. After modifying any enhanced bits, EFR bit-4 can be set to a logic 0 to latch the new values.
This feature prevents legacy software from altering or overwriting the enhanced functions once set. Normally, it
is recommended to leave it enabled, logic 1.
• Logic 0 = modification disable/latch enhanced features. IER bits 4-7, ISR bits 4-5, FCR bits 4-5, MCR bits 5-
   7, and DLD are saved to retain the user settings. After a reset, the IER bits 4-7, ISR bits 4-5, FCR bits 4-5,
   and MCR bits 5-7, and DLD are set to a logic 0 to be compatible with ST16C550 mode (default).
• Logic 1 = Enables the above-mentioned register bits to be modified by the user.
EFR[5]: Special Character Detect Enable
• Logic 0 = Special Character Detect Disabled (default).
• Logic 1 = Special Character Detect Enabled. The UART compares each incoming receive character with
   data in Xoff-2 register. If a match exists, the receive data will be transferred to FIFO and ISR bit-4 will be set
   to indicate detection of the special character. Bit-0 corresponds with the LSB bit of the receive character. If
   flow control is set for comparing Xon1, Xoff1 (EFR [1:0]= ‘10’) then flow control and special character work
   normally. However, if flow control is set for comparing Xon2, Xoff2 (EFR[1:0]= ‘01’) then flow control works
   normally, but Xoff2 will not go to the FIFO, and will generate an Xoff interrupt and a special character
   interrupt, if enabled via IER bit-5.
                                                           39


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                             REV. 1.0.2
EFR[6]: Auto RTS Flow Control Enable
RTS# output may be used for hardware flow control by setting EFR bit-6 to logic 1. When Auto RTS is
selected, an interrupt will be generated when the receive FIFO is filled to the programmed trigger level and
RTS de-asserts HIGH at the next upper trigger level/hysteresis level. RTS# will return LOW when FIFO data
falls below the next lower trigger level/hysteresis level. The RTS# output must be asserted (LOW) before the
auto RTS can take effect. RTS# pin will function as a general purpose output when hardware flow control is
disabled.
• Logic 0 = Automatic RTS flow control is disabled (default).
• Logic 1 = Enable Automatic RTS flow control.
EFR[7]: Auto CTS Flow Control Enable
Automatic CTS Flow Control.
• Logic 0 = Automatic CTS flow control is disabled (default).
• Logic 1 = Enable Automatic CTS flow control. Data transmission stops when CTS# input de-asserts to logic
  1. Data transmission resumes when CTS# returns to a logic 0.
 4.13    Software Flow Control Registers (XOFF1, XOFF2, XON1, XON2) - Read/Write
These registers are used as the programmable software flow control characters xoff1, xoff2, xon1, and xon2.
For more details, see Table 8.
 4.14    FIFO Status Register (FSTAT) - Read/Write
This register is applicable only to the 100 pin QFP XR16V654. The FIFO Status Register provides a status
indication for each of the transmit and receive FIFO. These status bits contain the inverted logic states of the
TXRDY# A-D outputs and the (un-inverted) logic states of the RXRDY# A-D outputs. The contents of the
FSTAT register are placed on the data bus when the FSRS# pin (pin 76) is a logic 0. Also see FSRS# pin
description.
FSTAT[3:0]: TXRDY# A-D Status Bits
Please see Table 5 for the interpretation of the TXRDY# signals.
FSTAT[7:4]: RXRDY# A-D Status Bits
Please see Table 5 for the interpretation of the RXRDY# signals.
                                                        40


                                                                           XR16V654/654D
REV. 1.0.2                                   2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
           TABLE 17: UART RESET CONDITIONS FOR CHANNELS A-D
            REGISTERS                        RESET STATE
             DLM, DLL   DLM = 0x00 and DLL = 0x01. Only resets to these val-
                        ues during a power up. They do not reset when the
                        Reset Pin is asserted.
                 DLD    Bits 7-0 = 0x00
                RHR     Bits 7-0 = 0xXX
                 THR    Bits 7-0 = 0xXX
                 IER    Bits 7-0 = 0x00
                 FCR    Bits 7-0 = 0x00
                 ISR    Bits 7-0 = 0x01
                 LCR    Bits 7-0 = 0x00
                MCR     Bits 7-0 = 0x00
                 LSR    Bits 7-0 = 0x60
                MSR     Bits 3-0 = Logic 0
                        Bits 7-4 = Logic levels of the inputs inverted
                 SPR    Bits 7-0 = 0xFF
                 EFR    Bits 7-0 = 0x00
               XON1     Bits 7-0 = 0x00
               XON2     Bits 7-0 = 0x00
               XOFF1    Bits 7-0 = 0x00
               XOFF2    Bits 7-0 = 0x00
               FSTAT    Bits 7-0 = 0xFF
           I/O SIGNALS                       RESET STATE
                  TX    HIGH
                IRTX    LOW
                RTS#    HIGH
               DTR#     HIGH
              RXRDY#    HIGH
              TXRDY#    LOW
                 INT    XR16V654 = Three-State Condition (INTSEL = LOW)
             (16 Mode)  XR16V654 = LOW (INTSEL = HIGH)
                        XR16V654D = LOW
                IRQ#    Three-State Condition (INTSEL = LOW)
             (68 Mode)
                                         41


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                     REV. 1.0.2
ABSOLUTE MAXIMUM RATINGS
 Power Supply Range                                                                     4 Volts
 Voltage at Any Pin                                                               GND-0.3 V to 4 V
 Operating Temperature                                                              -40o to +85oC
 Storage Temperature                                                               -65o to +150oC
 Package Dissipation                                                                   500 mW
TYPICAL PACKAGE THERMAL RESISTANCE DATA (MARGIN OF ERROR: ± 15%)
 Thermal Resistance (48-QFN)                                          theta-ja = 28oC/W, theta-jc = 10.5oC/W
 Thermal Resistance (64-LQFP)                                          theta-ja = 49oC/W, theta-jc = 10oC/W
 Thermal Resistance (68-PLCC)                                          theta-ja = 39oC/W, theta-jc = 17oC/W
 Thermal Resistance (80-LQFP)                                           theta-ja = 37oC/W, theta-jc = 7oC/W
 Thermal Resistance (100-QFP)                                          theta-ja = 45oC/W, theta-jc = 12oC/W
  ELECTRICAL CHARACTERISTICS
DC ELECTRICAL CHARACTERISTICS
UNLESS OTHERWISE NOTED: TA = -40O TO +85OC, VCC IS 2.25 TO 3.6V
                                                         LIMITS                LIMITS
  SYMBOL                 PARAMETER                        2.5V                  3.3V            UNITS    CONDITIONS
                                                     MIN       MAX         MIN       MAX
    VILCK    Clock Input Low Level                  -0.3         0.4      -0.3         0.6        V
    VIHCK    Clock Input High Level                 2.0         VCC       2.4         VCC         V
     VIL     Input Low Voltage                      -0.3         0.5      -0.3         0.7        V
     VIH     Input High Voltage                     1.8          5.5      2.0          5.5        V
     VOL     Output Low Voltage                                                        0.4        V    IOL = 6 mA
                                                                 0.4                              V    IOL = 4 mA
     VOH     Output High Voltage                                          2.0                     V    IOH = -4 mA
                                                    1.8                                           V    IOH = -2 mA
      IIL    Input Low Leakage Current                          ±15                   ±15        uA
      IIH    Input High Leakage Current                         ±15                   ±15        uA
     CIN     Input Pin Capacitance                                5                     5        pF
     ICC     Power Supply Current                                1.7                    3        mA    Ext Clk = 2MHz
   ISLEEP    Sleep Current                                      350                   450        uA    See Test 1
Test 1: The following inputs remain steady at VCC or GND state to minimize Sleep current: A0-A2, D0-D7, IOR#, IOW#,
CSA#, CSB#, CSC#, and CSD#. Also, RXA, RXB, RXC, and RXD inputs must idle at HIGH while asleep.
                                                           42


                                                                                   XR16V654/654D
REV. 1.0.2                                                2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
AC ELECTRICAL CHARACTERISTICS
TA = -40O TO +85OC, VCC IS 2.25 TO 3.6V, 70 PF LOAD WHERE APPLICABLE
                                                                       LIMITS         LIMITS
  SYMBOL                           PARAMETER                        2.5V ± 10%     3.3V ± 10%    UNIT
                                                                   MIN        MAX MIN        MAX
  XTAL1     UART Crystal Frequency                                            24             24  MHz
   ECLK     External Clock Frequency                                          50             64  MHz
   TECLK    External Clock Time Period                              10             7              ns
    TAS     Address Setup Time (16 Mode)                             0             0              ns
    TAH     Address Hold Time (16 Mode)                              0             0              ns
    TCS     Chip Select Width (16 Mode)                             50             40             ns
    TRD     IOR# Strobe Width (16 Mode)                             50             40             ns
    TDY     Read Cycle Delay (16 Mode)                              50             40             ns
   TRDV     Data Access Time (16 Mode)                                        45             35   ns
    TDD     Data Disable Time (16 Mode)                                       10             10   ns
    TWR     IOW# Strobe Width (16 Mode)                             50             40             ns
    TDY     Write Cycle Delay (16 Mode)                             50             40             ns
    TDS     Data Setup Time (16 Mode)                               10             10             ns
    TDH     Data Hold Time (16 Mode)                                 5             5              ns
   TADS     Address Setup (68 Mode)                                  0             0              ns
   TADH     Address Hold (68 Mode)                                   0             0              ns
   TRWS     R/W# Setup to CS# (68 Mode)                              0             0              ns
   TRDA     Data Access Time (68 mode)                                        45             35   ns
   TRDH     Data Disable Time (68 mode)                                       10             10   ns
   TWDS     Write Data Setup (68 mode)                              10             15             ns
   TWDH     Write Data Hold (68 Mode)                                5             5              ns
   TRWH     CS# De-asserted to R/W# De-asserted (68 Mode)           10             5              ns
   TCSL     CS# Strobe Width (68 Mode)                              50             40             ns
   TCSD     CS# Cycle Delay (68 Mode)                               50             40             ns
   TWDO     Delay From IOW# To Output                                         50             50   ns
   TMOD     Delay To Set Interrupt From MODEM Input                           50             50   ns
    TRSI    Delay To Reset Interrupt From IOR#                                50             50   ns
                                                     43


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                           REV. 1.0.2
AC ELECTRICAL CHARACTERISTICS
TA = -40O TO +85OC, VCC IS 2.25 TO 3.6V, 70 PF LOAD WHERE APPLICABLE
                                                                    LIMITS               LIMITS
  SYMBOL                            PARAMETER                    2.5V ± 10%           3.3V ± 10%        UNIT
                                                                MIN        MAX      MIN         MAX
    TSSI     Delay From Stop To Set Interrupt                               1                     1     Bclk
    TRRI     Delay From IOR# To Reset Interrupt                            45                    45      ns
     TSI     Delay From Start To Interrupt                                 45                    45      ns
    TINT     Delay From Initial INT Reset To Transmit Start       8        24         8          24     Bclk
   TWRI      Delay From IOW# To Reset Interrupt                            45                    45      ns
   TSSR      Delay From Stop To Set RXRDY#                                  1                     1     Bclk
    TRR      Delay From IOR# To Reset RXRDY#                               45                    45      ns
    TWT      Delay From IOW# To Set TXRDY#                                 45                    45      ns
   TSRT      Delay From Center of Start To Reset TXRDY#                     8                     8     Bclk
   TRST      Reset Pulse Width                                   40                  40                  ns
    Bclk     Baud Clock                                             16X or 8X or 4X of data rate         Hz
FIGURE 15. CLOCK TIMING
                                     CLK              CLK
      EXTERNAL
         CLOCK
                                             OSC
                                                           44


                                                                                                                          XR16V654/654D
REV. 1.0.2                                                                    2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
FIGURE 16. MODEM INPUT/OUTPUT TIMING FOR CHANNELS A-D
      IO W #                    A c t iv e
      IO W
                                                       TW DO
      RTS#               C h a n g e o f s ta te          C h a n g e o f s ta te
      DTR#
      CD#
      CTS#                                                            C h a n g e o f s ta te          C h a n g e o f s ta te
      DSR#
                                                      TMOD                                             TMOD
      IN T                                                                      A c t iv e              A c t iv e                      A c t iv e
                                                                                                 T RSI
      IO R #                                                                     A c t iv e              A c t iv e                       A c t iv e
                                                                                                                                     TMOD
      R I#                                                                                                                     C h a n g e o f s ta te
FIGURE 17. 16 MODE (INTEL) DATA BUS READ TIMING FOR CHANNELS A-D
             A0-A7                Valid Address                                                        Valid Address
                   TAS                                                                        TAS
                                                                     TAH                                                                 TAH
                                             TCS                                                            TCS
             CS#
                                                                                 TDY
                                           TRD                                                                 TRD
             IOR#
                                                                     TDD                                                               TDD
                        TRDV                                                                   TRDV
             D0-D7                              Valid Data                                                        Valid Data
                                                                                                                                                RDTm
                                                                      45


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                      REV. 1.0.2
FIGURE 18. 16 MODE (INTEL) DATA BUS WRITE TIMING FOR CHANNELS A-D
        A0-A7                Valid Address                                  Valid Address
                     TAS                                                TAS
                                                         TAH                                         TAH
                                     TCS                                         TCS
         CS#
                                                               TDY
                                   TWR                                            TWR
        IOW#
                                                        TDH                                          TDH
                                       TDS                                          TDS
       D0-D7                           Valid Data                                   Valid Data
                                                                                                        16Write
FIGURE 19. 68 MODE (MOTOROLA) DATA BUS READ TIMING FOR CHANNELS A-D
     A0-A7                        Valid Address                                      Valid Address
                        TADS
                                         TCSL                TADH
      CS#
                                                                   TCSD
                      TRWS
     R/W#                                               TRWH
                                                             TRDH
                       TRDA
     D0-D7                                   Valid Data                                      Valid Data
                                                                                                             68Read
                                                            46


                                                                                          XR16V654/654D
REV. 1.0.2                                                     2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
FIGURE 20. 68 MODE (MOTOROLA) DATA BUS WRITE TIMING FOR CHANNELS A-D
      A0-A7                        Valid Address                                 Valid Address
                          TADS
                                           TCSL            TADH
       CS#
                                                                  TCSD
                       TRWS
                                                        TRWH
      R/W#
                                                           T WDH
                                             TWDS
      D0-D7                                  Valid Data                                  Valid Data
                                                                                                        68Write
FIGURE 21. RECEIVE READY & INTERRUPT TIMING [NON-FIFO MODE] FOR CHANNELS A-D
      RX            Start                 Stop
                              D0:D7        Bit            D0:D7                     D0:D7
                     Bit
                                                 TSSR                    TSSR                         TSSR
                                                1 Byte                  1 Byte                       1 Byte
                                               in RHR                  in RHR                       in RHR
      INT
                                                 TSSR                    TSSR                       TSSR
      RXRDY#                                    Active                  Active                       Active
                                                 Data                    Data                         Data
                                                Ready                   Ready                        Ready
                                            TRR                      TRR                          TRR
      IOR#
      (Reading data
      out of RHR)
                                                                                                        RXNFM
                                                          47


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                                     REV. 1.0.2
FIGURE 22. TRANSMIT READY & INTERRUPT TIMING [NON-FIFO MODE] FOR CHANNELS A-D
      TX                     Start               Stop
      (Unloading)                     D0:D7       Bit               D0:D7                                  D0:D7
                              Bit
              IER[1]                ISR is read                   ISR is read                             ISR is read
              enabled
     INT*
                 TWRI                        TWRI                                       TWRI
                                     TSRT                           TSRT                                    TSRT
     TXRDY#
                           TWT                          TWT                                     TWT
     IOW#
      (Loading data
      into THR)
       *INT is cleared when the ISR is read or when data is loaded into the THR.                                   TXNonFIFO
FIGURE 23. RECEIVE READY & INTERRUPT TIMING [FIFO MODE, DMA DISABLED] FOR CHANNELS A-D
                     Start
                       Bit
     RX
                       S D0:D7     S D0:D7 T          D0:D7     S D0:D7 T     S D0:D7 T S D0:D7 T     S D0:D7 T
                             Stop                                                                 RX FIFO drops
                                                       TSSI
                              Bit                                                                    below RX
                                                                                                   Trigger Level
     INT
                                    TSSR                                                                         FIFO
                                                 RX FIFO fills up to RX                                        Empties
                                                Trigger Level or RX Data
     RXRDY#                                              Timeout
                 First Byte is
                 Received in                                                             TRRI                  TRR
                   RX FIFO
     IOR#
     (Reading data out
     of RX FIFO)
                                                                                                                    RXINTDMA#
                                                                     48


                                                                                                                                XR16V654/654D
REV. 1.0.2                                                                               2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
FIGURE 24. RECEIVE READY & INTERRUPT TIMING [FIFO MODE, DMA ENABLED] FOR CHANNELS A-D
                         Start        Stop
                          Bit          Bit
     RX
                          S D0:D7          S D0:D7 T                D0:D7    S D0:D7 T       S D0:D7 T S D0:D7 T             S D0:D7 T
                                                                      TSSI                                              RX FIFO drops
                                                                                                                            below RX
                                                                                                                          Trigger Level
     INT
                                     RX FIFO fills up to RX
                                                                              TSSR                                                      FIFO
                                    Trigger Level or RX Data
                                                                                                                                     Empties
                                              Timeout
     RXRDY#
                                                                                                           TRRI                       TRR
     IOR#
     (Reading data out
     of RX FIFO)
                                                                                                                                           RXFIFODMA
FIGURE 25. TRANSMIT READY & INTERRUPT TIMING [FIFO MODE, DMA MODE DISABLED] FOR CHANNELS A-D
                                            Start        Stop
                                                                                                                                       Last Data Byte
                    TX FIFO                  Bit          Bit
                                                                                                                                         Transmitted
                     Empty
           TX
                                             S D0:D7 T                S D0:D7 T S D0:D7 T        T S D0:D7 T S D0:D7 T                S D0:D7 T
       (Unloading)
                                                                                             TSI                 ISR is read
                       IER[1]                ISR is read                                                                                       TSRT
                      enabled
           INT*
                                                                                                                                             TX FIFO
                                                                                                                                              Empty
                                                     TX FIFO fills up
                                                                                                        TX FIFO drops
                                                      to trigger level
                                                                                     TWRI              below trigger level
                            Data in
                           TX FIFO
           TXRDY#
                                                 TWT
           IOW#
       (Loading data
          into FIFO)
        *INT is cleared when the ISR is read or when TX FIFO fills up to the trigger level.                                                 TXDMA#
                                                                                  49


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                                                  REV. 1.0.2
FIGURE 26. TRANSMIT READY & INTERRUPT TIMING [FIFO MODE, DMA MODE ENABLED] FOR CHANNELS A-D
                          Start      Stop
                                      Bit                                                                                      Last Data Byte
                           Bit
                                                                                                                                Transmitted
         TX
                           S D0:D7 T S D0:D7 T                     D0:D7       S D0:D7 T      S D0:D7 T S D0:D7 T             S D0:D7 T
      (Unloading)
                    IER[1]          ISR Read                                                                               ISR Read
                   enabled                                                               TSRT                    TSI
         INT*
                                                 TX FIFO fills up                                              TX FIFO drops
                                                  to trigger level                                            below trigger level
                                                                                    TWRI
                                                                                                                      At least 1
                                                                               TX FIFO                              empty location
         TXRDY#
                                                                                   Full                                 in FIFO
                                                                                                  TWT
         IOW#
      (Loading data
        into FIFO)
      *INT cleared when the ISR is read or when TX FIFO fills up to trigger level.                                                   TXDMA
                                                                                50


                                                                                      XR16V654/654D
REV. 1.0.2                                            2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
PACKAGE DIMENSIONS
48 LEAD QUAD FLAT NO LEAD (7 x 7 x 0.9 mm, 0.50 mm pitch QFN)
                                                                        Note: The actual center pad is
                                                                        metallic and the size (D2) is
                                                                        device-dependent with a typical
                                                                        tolerance of 0.3mm. The lead
                                                                        may be half-etched terminal.
                   Note: The control dimension is the millimeter column
                                       INCHES                  MILLIMETERS
                    SYMBOL        MIN          MAX           MIN           MAX
                        A        0.031        0.039          0.80          1.00
                       A1        0.000        0.002          0.00          0.05
                       A3        0.006        0.010          0.15          0.25
                       D         0.270        0.281          6.85          7.15
                       D2        0.201        0.209          5.10          5.30
                        b        0.007        0.012          0.18          0.30
                        e            0.0197 BSC                   0.50 BSC
                        L        0.012        0.020          0.30          0.50
                        k        0.008           -           0.20            -
                                                 51


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                  REV. 1.0.2
64 LEAD LOW-PROFILE QUAD FLAT PACK (10 x 10 x 1.4 mm LQFP)
                                                             D
                                                             D1
                                                 48                      33
                                      49                                          32
                                                                                     D1  D
                                      64                                          17
                                                 1                      16
                                                             B
                                            A2
                                                     e
                                                                                 C
                                 A
                   Seating Plane                                                        α
                                   A1
                                                                              L
                        Note: The control dimension is the millimeter column
                                               INCHES               MILLIMETERS
                          SYMBOL          MIN          MAX         MIN        MAX
                               A         0.055         0.063       1.40        1.60
                              A1         0.002         0.006       0.05        0.15
                              A2         0.053         0.057       1.35        1.45
                               B         0.007         0.011       0.17        0.27
                               C         0.004         0.008       0.09        0.20
                               D         0.465         0.480      11.80       12.20
                              D1         0.390         0.398       9.90       10.10
                               e              0.020 BSC                0.50 BSC
                               L         0.018         0.030       0.45        0.75
                               α           0°            7°         0°          7°
                                                         52


                                                                                            XR16V654/654D
REV. 1.0.2                                              2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
68 LEAD PLASTIC LEADED CHIP CARRIER (PLCC)
                                 D                                                    C
                                                                                              Seating Plane
                                D1                                         45° x H1              A2
                                                              45° x H2
                               2 1 68
                                                                                                    B1
                                                                                                     B
                                                           D3                                           D2
           D D1
                                                                                                     e
                                                                                                R
                                D3
                                                                                         A1
                                                                                       A
                    Note: The control dimension is the inch column
                                         INCHES                  MILLIMETERS
                     SYMBOL        MIN           MAX           MIN              MAX
                         A         0.165         0.200          4.19             5.08
                        A1         0.090         0.130          2.29             3.30
                        A2         0.020           ---.         0.51              ---
                         B         0.013         0.021          0.33             0.53
                        B1         0.026         0.032          0.66             0.81
                         C         0.008         0.013          0.19             0.32
                         D         0.985         0.995         25.02            25.27
                        D1         0.950         0.958         24.13            24.33
                        D2         0.890         0.930         22.61            23.62
                        D3              0.800 typ.                   20.32 typ.
                         e              0.050 BSC                     1.27 BSC
                        H1         0.042         0.056          1.07             1.42
                        H2         0.042         0.048          1.07             1.22
                         R         0.025         0.045          0.64             1.14
                                                   53


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                     REV. 1.0.2
80 LEAD PLASTIC QUAD FLAT PACK (12 mm x 12 mm LQFP, 1.4 mm Form)
                                                            p
                      Note: The control dimension is in the millimeter column
                                        INCHES               MILLIMETERS
                     SYMBOL        MIN        MAX           MIN         MAX
                        A         0.055       0.063         1.40         1.60
                        A1        0.002       0.006         0.05         0.15
                        A2        0.053       0.057         1.35         1.45
                        B         0.007       0.011         0.17         0.27
                        C         0.004       0.008         0.09         0.20
                        D         0.543       0.559        13.80        14.20
                        D1        0.465       0.480        11.80        12.20
                        e        0.0197 BSC                     0.50 BSC
                        L         0.018       0.030         0.45         0.75
                        α           0°          7°           0°           7°
                                                54


                                                                                          XR16V654/654D
REV. 1.0.2                                                   2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
100 LEAD PLASTIC QUAD FLAT PACK (14 mm x 20 mm QFP, 1.95 mm Form)
                                                          D
                                                          D1
                                   80                                          51
                       81                                                                50
                                                                                            E1 E
                      100                                         p                      31
                                   1                                           30
                                               B
                                A2
                                        e
                                                                                       C
                       A
            Seating Plane
                                                                                          α
                          A1
                                                                                     L
                         Note: The control dimension is the millimeter column
                                             INCHES                  MILLIMETERS
                          SYMBOL        MIN          MAX            MIN         MAX
                              A        0.102        0.134           2.60        3.40
                             A1        0.002        0.014           0.05        0.35
                             A2        0.100        0.120           2.55        3.05
                              B        0.009        0.015           0.22        0.38
                             C         0.004        0.009           0.11        0.23
                             D         0.931        0.951          23.65       24.15
                             D1        0.783        0.791          19.90       20.10
                              E        0.695        0.715          17.65       18.15
                             E1        0.547        0.555          13.90       14.10
                              e            0.0256 BSC                   0.65 BSC
                              L        0.029        0.040           0.73        1.03
                              α          0°            7°            0°          7°
                                                       55


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                  REV. 1.0.2
REVISION HISTORY
        DATE             REVISION                                         DESCRIPTION
     April 2006        Rev A1.0.0     Advanced Datasheet.
      May 2006         Rev P1.0.0     Preliminary Datasheet.
      July 2006        Rev P1.0.1     Updated AC Electrical Characteristics.
    October 2006       Rev P1.0.2     Updated DC Electrical Characteristics.
    January 2007        Rev 1.0.0     Final Datasheet.
      May 2007          Rev 1.0.1     Updated QFN package dimensions drawing to show minimum "k" parameter.
  September 2007        Rev 1.0.2     Corrected RX and TX FIFO trigger levels.
                                                        NOTICE
EXAR Corporation reserves the right to make changes to the products contained in this publication in order to
improve design, performance or reliability. EXAR Corporation assumes no responsibility for the use of any
circuits described herein, conveys no license under any patent or other right, and makes no representation that
the circuits are free of patent infringement. Charts and schedules contained here in are only for illustration
purposes and may vary depending upon a user’s specific application. While the information in this publication
has been carefully checked; no responsibility, however, is assumed for inaccuracies.
EXAR Corporation does not recommend the use of any of its products in life support applications where the
failure or malfunction of the product can reasonably be expected to cause failure of the life support system or
to significantly affect its safety or effectiveness. Products are not authorized for use in such applications unless
EXAR Corporation receives, in writing, assurances to its satisfaction that: (a) the risk of injury or damage has
been minimized; (b) the user assumes all such risks; (c) potential liability of EXAR Corporation is adequately
protected under the circumstances.
Copyright 2007 EXAR Corporation
Datasheet September 2007.
Send your UART technical inquiry with technical details to hotline: uarttechsupport@exar.com.
Reproduction, in part or whole, without the prior written consent of EXAR Corporation is prohibited.
                                                             56


                                                                                                                                                XR16V654/654D
REV. 1.0.2                                                                            2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO
                                                   TABLE OF CONTENTS
GENERAL DESCRIPTION................................................................................................ 1
  FEATURES .................................................................................................................................................... 1
  APPLICATIONS .............................................................................................................................................. 1
      FIGURE 1. XR16V654 BLOCK DIAGRAM ...........................................................................................................................................   1
      FIGURE 2. PIN OUT ASSIGNMENT FOR 100-PIN QFP PACKAGES IN 16 AND 68 MODE .......................................................................                                2
      FIGURE 3. PIN OUT ASSIGNMENT FOR 68-PIN PLCC PACKAGES IN 16 AND 68 MODE AND 64-PIN LQFP PACKAGES .........................                                                     3
      FIGURE 4. PIN OUT ASSIGNMENT FOR 48-PIN QFN PACKAGE AND 80-PIN LQFP PACKAGE ...............................................................                                    4
PIN DESCRIPTIONS ........................................................................................................ 5
  ORDERING INFORMATION ............................................................................................................................... 5
1.0 PRODUCT DESCRIPTION .................................................................................................................... 11
2.0 FUNCTIONAL DESCRIPTIONS ............................................................................................................ 12
    2.1 CPU INTERFACE .............................................................................................................................................. 12
      FIGURE 5. XR16V654 TYPICAL INTEL/MOTOROLA DATA BUS INTERCONNECTIONS........................................................................... 12
    2.2 DEVICE RESET ................................................................................................................................................. 13
    2.3 CHANNEL SELECTION .................................................................................................................................... 13
      TABLE 1: CHANNEL A-D SELECT IN 16 MODE ................................................................................................................................. 13
      TABLE 2: CHANNEL A-D SELECT IN 68 MODE ................................................................................................................................. 13
    2.4 CHANNELS A-D INTERNAL REGISTERS ....................................................................................................... 14
    2.5 INT OUPUTS FOR CHANNELS A-D................................................................................................................. 14
      TABLE 3: INT PIN OPERATION FOR TRANSMITTER FOR CHANNELS A-D ........................................................................................... 14
      TABLE 4: INT PIN OPERATION FOR RECEIVER FOR CHANNELS A-D ................................................................................................. 14
    2.6 DMA MODE ....................................................................................................................................................... 14
      TABLE 5: TXRDY# AND RXRDY# OUTPUTS IN FIFO AND DMA MODE FOR CHANNELS A-D ........................................................... 15
    2.7 CRYSTAL OSCILLATOR OR EXTERNAL CLOCK INPUT.............................................................................. 15
      FIGURE 6. TYPICAL CRYSTAL CONNECTIONS .................................................................................................................................. 15
    2.8 PROGRAMMABLE BAUD RATE GENERATOR WITH FRACTIONAL DIVISOR ........................................... 15
      FIGURE 7. BAUD RATE GENERATOR ............................................................................................................................................... 16
      TABLE 6: TYPICAL DATA RATES WITH A 24 MHZ CRYSTAL OR EXTERNAL CLOCK AT 16X SAMPLING ................................................... 17
    2.9 TRANSMITTER.................................................................................................................................................. 17
         2.9.1 TRANSMIT HOLDING REGISTER (THR) - WRITE ONLY...........................................................................................                              17
         2.9.2 TRANSMITTER OPERATION IN NON-FIFO MODE ....................................................................................................                          18
      FIGURE 8. TRANSMITTER OPERATION IN NON-FIFO MODE ..............................................................................................................               18
         2.9.3 TRANSMITTER OPERATION IN FIFO MODE .............................................................................................................                     18
      FIGURE 9. TRANSMITTER OPERATION IN FIFO AND FLOW CONTROL MODE .....................................................................................                           18
    2.10 RECEIVER ....................................................................................................................................................... 19
         2.10.1 RECEIVE HOLDING REGISTER (RHR) - READ-ONLY ............................................................................................ 19
      FIGURE 10. RECEIVER OPERATION IN NON-FIFO MODE .................................................................................................................. 19
      FIGURE 11. RECEIVER OPERATION IN FIFO AND AUTO RTS FLOW CONTROL MODE ....................................................................... 20
    2.11 AUTO RTS (HARDWARE) FLOW CONTROL ................................................................................................ 20
    2.12 AUTO RTS HYSTERESIS ............................................................................................................................... 20
      TABLE 7: AUTO RTS (HARDWARE) FLOW CONTROL ........................................................................................................................ 20
    2.13 AUTO CTS FLOW CONTROL......................................................................................................................... 21
      FIGURE 12. AUTO RTS AND CTS FLOW CONTROL OPERATION ....................................................................................................... 21
    2.14 AUTO XON/XOFF (SOFTWARE) FLOW CONTROL...................................................................................... 22
      TABLE 8: AUTO XON/XOFF (SOFTWARE) FLOW CONTROL ............................................................................................................... 22
    2.15 SPECIAL CHARACTER DETECT.................................................................................................................. 22
    2.16 INFRARED MODE ........................................................................................................................................... 23
      FIGURE 13. INFRARED TRANSMIT DATA ENCODING AND RECEIVE DATA DECODING .......................................................................... 23
    2.17 SLEEP MODE WITH AUTO WAKE-UP .......................................................................................................... 24
    2.18 INTERNAL LOOPBACK................................................................................................................................. 24
      FIGURE 14. INTERNAL LOOP BACK IN CHANNEL A AND B ................................................................................................................ 25
3.0 UART INTERNAL REGISTERS............................................................................................................. 26
      TABLE 9: UART CHANNEL A AND B UART INTERNAL REGISTERS ..................................................................................... 26
      TABLE 10: INTERNAL REGISTERS DESCRIPTION. SHADED BITS ARE ENABLED WHEN EFR BIT-4=1 ....................................... 27
4.0 INTERNAL REGISTER DESCRIPTIONS .............................................................................................. 28
    4.1 RECEIVE HOLDING REGISTER (RHR) - READ- ONLY .................................................................................. 28
    4.2 TRANSMIT HOLDING REGISTER (THR) - WRITE-ONLY ............................................................................... 28
    4.3 INTERRUPT ENABLE REGISTER (IER) - READ/WRITE ................................................................................ 28
         4.3.1 IER VERSUS RECEIVE FIFO INTERRUPT MODE OPERATION ............................................................................... 28
                                                                                I


XR16V654/654D
2.25V TO 3.6V QUAD UART WITH 64-BYTE FIFO                                                                                                                                         REV. 1.0.2
         4.3.2 IER VERSUS RECEIVE/TRANSMIT FIFO POLLED MODE OPERATION .................................................................. 29
    4.4 INTERRUPT STATUS REGISTER (ISR) - READ-ONLY .................................................................................. 30
         4.4.1 INTERRUPT GENERATION: ........................................................................................................................................ 30
         4.4.2 INTERRUPT CLEARING: ............................................................................................................................................. 30
      TABLE 11: INTERRUPT SOURCE AND PRIORITY LEVEL ..................................................................................................................... 31
    4.5 FIFO CONTROL REGISTER (FCR) - WRITE-ONLY......................................................................................... 31
      TABLE 12: TRANSMIT AND RECEIVE FIFO TRIGGER LEVEL SELECTION ............................................................................................ 32
    4.6 LINE CONTROL REGISTER (LCR) - READ/WRITE......................................................................................... 33
      TABLE 13: PARITY SELECTION ........................................................................................................................................................ 34
    4.7 MODEM CONTROL REGISTER (MCR) OR GENERAL PURPOSE OUTPUTS CONTROL - READ/WRITE.. 34
      TABLE 14: INT OUTPUT MODES ..................................................................................................................................................... 35
    4.8 LINE STATUS REGISTER (LSR) - READ ONLY..............................................................................................                                                36
    4.9 MODEM STATUS REGISTER (MSR) - READ ONLY .......................................................................................                                                     37
    4.10 SCRATCH PAD REGISTER (SPR) - READ/WRITE .......................................................................................                                                    37
    4.11 BAUD RATE GENERATOR REGISTERS (DLL AND DLM) - READ/WRITE.................................................                                                                          38
      TABLE 15: SAMPLING RATE SELECT ............................................................................................................................................... 38
    4.12 ENHANCED FEATURE REGISTER (EFR) - READ/WRITE ........................................................................... 38
      TABLE 16: SOFTWARE FLOW CONTROL FUNCTIONS ........................................................................................................................ 39
    4.13 SOFTWARE FLOW CONTROL REGISTERS (XOFF1, XOFF2, XON1, XON2) - READ/WRITE................... 40
    4.14 FIFO STATUS REGISTER (FSTAT) - READ/WRITE...................................................................................... 40
      TABLE 17: UART RESET CONDITIONS FOR CHANNELS A-D .................................................................................................. 41
ABSOLUTE MAXIMUM RATINGS.................................................................................. 42
TYPICAL PACKAGE THERMAL RESISTANCE DATA (MARGIN OF ERROR: ± 15%) 42
ELECTRICAL CHARACTERISTICS ............................................................................... 42
  DC ELECTRICAL CHARACTERISTICS ............................................................................................................. 42
  AC ELECTRICAL CHARACTERISTICS ............................................................................................................. 43
  TA = -40O TO +85OC, VCC IS 2.25 TO 3.6V, 70 PF LOAD WHERE APPLICABLE ............................................. 43
      FIGURE 15. CLOCK TIMING ............................................................................................................................................................. 44
      FIGURE 16. MODEM INPUT/OUTPUT TIMING FOR CHANNELS A-D .................................................................................................... 45
      FIGURE 17. 16 MODE (INTEL) DATA BUS READ TIMING FOR CHANNELS A-D.................................................................................... 45
      FIGURE 18. 16 MODE (INTEL) DATA BUS WRITE TIMING FOR CHANNELS A-D .................................................................................. 46
      FIGURE 19. 68 MODE (MOTOROLA) DATA BUS READ TIMING FOR CHANNELS A-D........................................................................... 46
      FIGURE 21. RECEIVE READY & INTERRUPT TIMING [NON-FIFO MODE] FOR CHANNELS A-D ............................................................ 47
      FIGURE 20. 68 MODE (MOTOROLA) DATA BUS WRITE TIMING FOR CHANNELS A-D ......................................................................... 47
      FIGURE 22. TRANSMIT READY & INTERRUPT TIMING [NON-FIFO MODE] FOR CHANNELS A-D .......................................................... 48
      FIGURE 23. RECEIVE READY & INTERRUPT TIMING [FIFO MODE, DMA DISABLED] FOR CHANNELS A-D........................................... 48
      FIGURE 24. RECEIVE READY & INTERRUPT TIMING [FIFO MODE, DMA ENABLED] FOR CHANNELS A-D............................................ 49
      FIGURE 25. TRANSMIT READY & INTERRUPT TIMING [FIFO MODE, DMA MODE DISABLED] FOR CHANNELS A-D............................... 49
      FIGURE 26. TRANSMIT READY & INTERRUPT TIMING [FIFO MODE, DMA MODE ENABLED] FOR CHANNELS A-D ............................... 50
  PACKAGE DIMENSIONS ................................................................................................................................ 51
  REVISION HISTORY...................................................................................................................................... 56
                                                                                      II


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
MaxLinear:
 XR16V654IJ-0A-EVB XR16V654IV-0A-EVB XR16V654DIV-0A-EB XR16V654IL-0A-EVB XR16V654IV80-0A-EB
XR16V654IQ-0A-EVB XR16V654IV-F XR16V654IQ-F XR16V654IJ-F XR16V654IL-F XR16V654DIV-F
XR16V654IV80-F XR16V654ILTR-F XR16V654DIVTR-F XR16V654IQTR-F XR16V654IJTR-F XR16V654IV80TR-F
XR16V654IVTR-F
