             AVAILAB
                       LE                                                                                                         MAX3100
                                                            SPI/MICROWIRE-Compatible
                                                                     UART in QSOP-16
                              General Description                                      ____________________________Features
The MAX3100 universal asynchronous receiver transmit-                                  ♦ Small TQFN and QSOP Packages Available
ter (UART) is the first UART specifically optimized for
small microcontroller-based systems. Using an                                          ♦ Full-Featured UART:
SPI™/MICROWIRE™ interface for communication with                                         —IrDA SIR Timing Compatible
the host microcontroller (µC), the MAX3100 comes in a                                    —8-Word FIFO Minimizes Processor
compact 16-pin QSOP. The asynchronous I/O is suitable                                      Overhead at High Data Rates
for use in RS-232, RS-485, IR, and opto-isolated data                                    —Up to 230k Baud with a 3.6864MHz Crystal
links. IR-link communication is easy with the MAX3100’s                                  —9-Bit Address-Recognition Interrupt
infrared data association (IrDA) timing mode.                                            —Receive Activity Interrupt in Shutdown
The MAX3100 includes a crystal oscillator and a baud-                                  ♦ SPI/MICROWIRE-Compatible µC Interface
rate generator with software-programmable divider ratios
for all common baud rates from 300 baud to 230k baud.                                  ♦ Lowest Power:
A software- or hardware-invoked shutdown lowers quies-                                   —150µA Operating Current at 3.3V
cent current to 10µA, while allowing the MAX3100 to                                      —10µA in Shutdown with Receive Interrupt
detect receiver activity.
                                                                                       ♦ +2.7V to +5.5V Supply Voltage in Operating Mode
An 8-word-deep first-in/first-out (FIFO) buffer minimizes
processor overhead. This device also includes a flexible                               ♦ Schmitt-Trigger Inputs for Opto-Couplers
interrupt with four maskable sources, including address                                ♦ TX and RTS Outputs Sink 25mA for Opto-Couplers
recognition on 9-bit networks. Two hardware-handshak-
ing control lines are included (one input and one output).
The MAX3100 is available in 14-pin plastic DIP and small,                                                            Ordering Information
16-pin QSOP packages in the commercial and extended
                                                                                                   PART            TEMP RANGE              PIN-PACKAGE
temperature ranges.
                                                                                        MAX3100CPD+                0°C to +70°C            14 Plastic DIP
________________________Applications                                                    MAX3100CEE+                0°C to +70°C            16 QSOP
 Handheld Instruments                                                                   MAX3100EPD+               -40°C to +85°C           14 Plastic DIP
 Intelligent Instrumentation                                                            MAX3100EEE+               -40°C to +85°C           16 QSOP
 UART in SPI Systems                                                                    MAX3100ETG+               -40°C to +85°C           24 TQFN-EP*
                     Functional
 Small Networks in HVAC               Diagrams
                        or Building Control                                            +Denotes a lead(Pb)-free/RoHS-compliant package.
                                                                                       EP = Exposed pad.
 Isolated RS-232/RS-485: Directly Drives Opto-Couplers
 Low-Cost IR Data Links for Computers/Peripherals                                      Typical Operating Circuit appears at end of data sheet.
                                                                                                                             Pin Configurations
                                                                                                                             Pin Configurations
 TOP VIEW
                                                            N.C.   RX      RTS    CTS    N.C.   N.C.
                       +                                    18     17      16     15    14      13                           +
               DIN 1                  14 VCC                                                                        DIN 1                     16 VCC
                                                  N.C. 19                                              12 N.C.
             DOUT 2                   13 TX                                                                        DOUT 2                     15 TX
                                                  N.C. 20                                              11 X1
             SCLK 3                   12 RX                                                                        SCLK 3                     14 RX
                                                   TX 21                                               10 X2
               CS 4        MAX3100    11 RTS
                                                                          MAX3100                                    CS 4        MAX3100      13 RTS
                                                  VCC 22                                               9   GND
               IRQ 5                  10 CTS                                                                        N.C. 5                    12 N.C.
                                                   DIN 23                                              8   SHDN
             SHDN 6                   9   X1                                                 *EP                    IRQ 6                     11 CTS
                                                  N.C. 24   +                                          7   N.C.
              GND 7                   8   X2                                                                       SHDN 7                     10 X1
                                                            1      2       3      4      5      6
                                                                                                                    GND 8                      9   X2
                                                            N.C.   DOUT    SCLK
                                                                                  CS     IRQ    N.C.
Pin Configurations appearDIPat end of data sheet.
                                                                  TQFN-EP                                                         QSOP
Functional Diagrams continued at end of data sheet.
                                              *EP = EXPOSED
UCSP is a trademark of Maxim Integrated Products, Inc.      PAD, CONNECT EP TO GROUND
 SPI is a
 SPI is a trademark
          trademark of
                    of Motorola,
                       Motorola, Inc.
                                 Inc. MICROWIRE
                                      MICROWIRE is  is a
                                                       a trademark
                                                         trademark ofof National
                                                                        National Semiconductor
                                                                                   Semiconductor Corp.
                                                                                                 Corp.
For pricing, delivery, and ordering information, please contact Maxim Direct
at 1-888-629-4642, or visit Maxim’s website at www.maximintegrated.com.                                                                       19-1259; Rev 2; 1/09


MAX3100
SPI/MICROWIRE-Compatible
UART in QSOP-16
ABSOLUTE MAXIMUM RATINGS
VCC to GND ...........................................................................+6V      Continuous Power Dissipation (TA = +70°C)
Input Voltage to GND                                                                             Plastic DIP (derate 10.00mW/°C above +70°C) .......... 800mW
   (CS, SHDN, X1, CTS, RX, DIN, SCLK) ....-0.3V to (VCC + 0.3V)                                  QSOP (derate 8.30mW/°C above +70°C) .....................667mW
Output Voltage to GND                                                                            TQFN (derate 33.3mW/°C above +70°C) ................2666.7mW
   (DOUT, RTS, TX, X2) ..............................-0.3V to (VCC + 0.3V)                     Operating Temperature Ranges
   IRQ...........................................................................-0.3V to 6V     MAX3100C_ _ ......................................................0°C to +70°C
TX, RTS Output Current ....................................................100mA                 MAX3100E_ _ ...................................................-40°C to +85°C
X2, DOUT, IRQ Short-Circuit Duration                                                           Storage Temperature Range ............................ -65°C to +160°C
   (to VCC or GND) .........................................................Indefinite         Lead Temperature (soldering, 10s) ................................ +300°C
 Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional
 operation of the device at these or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to
 absolute maximum rating conditions for extended periods may affect device reliability.
ELECTRICAL CHARACTERISTICS
(VCC = +2.7V to +5.5V, TA = TMIN to TMAX, unless otherwise noted. Typical values are measured at 9600 baud at TA = +25°C.)
         PARAMETER                           SYMBOL                                   CONDITIONS                          MIN            TYP              MAX           UNITS
  LOGIC INPUTS (DIN, SCLK, CS, SHDN, CTS, RX)
  Input High Voltage                              VIH                                                                 0.7 x VCC                                            V
  Input Low Voltage                                VIL                                                                                                0.3 x VCC            V
  Input Hysteresis                              VHYST            VCC = 3.3V                                                         0.05 x VCC                             V
  Input Leakage                                     IIL                                                                                                     ±1            µA
  Input Capacitance                               CIN                                                                                      5                              pF
  OSCILLATOR INPUT (X1)
  Input High Voltage                              VIH                                                                 0.7 x VCC VCC / 2                                    V
  Input Low Voltage                                VIL                                                                                 VCC / 2        0.2 x VCC            V
                                                                                               Active mode                                                    25
  Input Current                                    IIN           VX1 = 0V and 5.5V                                                                                        µA
                                                                                               Shutdown mode                                                   2
  Input Capacitance                               CIN            VX1 = 0V and 5.5V                                                         5                              pF
  OUTPUTS (DOUT, TX, RTS)
                                                                 ISOURCE = 5mA                                        VCC - 0.5
  Output High Voltage                             VOH                                                                                                                      V
                                                                 ISOURCE = 25µA, TX only                              VCC - 0.5
                                                                 TX, RTS: ISINK = 25mA                                                                      0.9
  Output Low Voltage                              VOL                                                                                                                      V
                                                                 DOUT, TX, RTS: ISINK = 4mA                                                                 0.4
  Output Leakage                                   ILK           DOUT only, CS = VCC                                                                        ±1            µA
  Output Capacitance                             COUT                                                                                      5                              pF
  IRQ OUTPUT (Open Drain)
  Output Low Voltage                              VOL            ISINK = 4mA                                                                                0.4            V
   Output Leakage                                  ILK           V IRQ = 5.5V                                                                               ±1            µA
  Output Capacitance                             COUT                                                                                      5                              pF
  POWER REQUIREMENTS
                                                                 With 1.8432MHz crystal;          VCC = 5V                               0.27                1
  VCC Supply Current in
                                                  ICC            all other logic inputs are at                                                                            mA
  Normal Mode                                                                                     VCC = 3.3V                             0.15               0.4
                                                                 0V or VCC
  VCC Supply Current in                                          SHDN bit = 1 or SHDN = 0,
                                                  ICC                                                                                                       10            µA
  Shutdown                                                       logic inputs are at 0V or VCC
  Supply Voltage                                  VCC                                                                      2.7                              5.5            V
2                                                                                                                                                               Maxim Integrated


                                                                                                         MAX3100
                                                         SPI/MICROWIRE-Compatible
                                                                                   UART in QSOP-16
ELECTRICAL CHARACTERISTICS (continued)
(VCC = +2.7V to +5.5V, TA = TMIN to TMAX, unless otherwise noted. Typical values are at TA = +25°C.)
        PARAMETER                SYMBOL                    CONDITIONS                        MIN       TYP       MAX      UNITS
 AC TIMING (Figure 1)
 CS Low to DOUT Valid                  tDV  CLOAD = 100pF                                                        100        ns
 CS High to DOUT Tri-State             tTR  CLOAD = 100pF, R CS = 10kΩ                                           100        ns
 CS to SCLK Setup Time               tCSS                                                    100                            ns
 CS to SCLK Hold Time                tCSH                                                     0                             ns
 SCLK Fall to DOUT Valid               tDO  CLOAD = 100pF                                                        100        ns
 DIN to SCLK Setup Time                tDS                                                   100                            ns
 DIN to SCLK Hold Time                 tDH                                                    0                             ns
 SCLK Period                           tCP                                                   238                            ns
 SCLK High Time                        tCH                                                   100                            ns
 SCLK Low Time                         tCL                                                   100                            ns
 SCLK Rising Edge
                                      tCS0 (Note 1)                                          100                            ns
 to CS Falling
 CS Rising Edge
                                      tCS1 (Note 1)                                          200                            ns
 to SCLK Rising
 CS High Pulse Width                 tCSW                                                    200                            ns
 Output Rise Time                       tr  TX, RTS, DOUT: CLOAD = 100pF                                10                  ns
 Output Fall Time                       tf  TX, RTS, DOUT, IRQ: CLOAD = 100pF                           10                  ns
Note 1: tCS0 and tCS1 specify the minimum separation between SCLK rising edges used to write to other devices on the SPI bus
          and the CS used to select the MAX3100. A separation greater than tCS0 and tCS1 ensures that the SCLK edge is ignored.
       CS                                                      •••
                            tCSS                       tCH                                         tCSH
                 tCSH                         tCL
     SCLK                                                      •••
                               tDS
                                   tDH
      DIN                                                      •••
                          tDV                                                       tDO                      tTR
     DOUT                                                      •••
Figure 1. Detailed Serial-Interface Timing
Maxim Integrated                                                                                                                3


MAX3100
SPI/MICROWIRE-Compatible
UART in QSOP-16
__________________________________________Typical Operating Characteristics
(TA = +25°C, unless otherwise noted.)
                                                                                                                                                         SHUTDOWN CURRENT                                                                                SUPPLY CURRENT vs.
                                   SUPPLY CURRENT vs. TEMPERATURE                                                                                         vs. TEMPERATURE                                                                             EXTERNAL CLOCK FREQUENCY
                          1000                                                                                                          10                                                                                               700
                                                                                              MAX3100-01                                                                                         MAX3100-02                                                                                  MAX3100-03
                                                          1.8432MHz CRYSTAL                                                                                            1.8432MHz CRYSTAL
                          900                             TRANSMITTING AT                                                               9                                                                                                600
                          800                             115.2 kbps                                                                     8
SUPPLY CURRENT (μA)                                                                                          SHUTDOWN CURRENT (μA)                                                                            SUPPLY CURRENT (μA)
                          700                                                                                                           7                                                                                                500
                                                                                                                                                                                                                                                               VCC = 5V
                          600                                                                                                            6
                                                                                                                                                                                                                                         400
                                                                                                                                                                                                                                                                          VCC = 3.3V
                          500                                                                                                           5
                                                                          VCC = 5V                                                                                                                                                       300
                          400                                                                                                            4
                          300                                                                                                           3                                                                                                200
                          200                                             VCC = 3.3V                                                     2                                VCC = 5V
                                                                                                                                                                                                                                         100
                          100                                                                                                           1
                            0                                                                                                            0                                                                                                 0
                                 -40     -20      0       20         40      60        80   100                                              -40   -20    0       20     40     60        80   100                                             0        1       2         3         4    5
                                                      TEMPERATURE (°C)                                                                                        TEMPERATURE (°C)                                                                        EXTERNAL CLOCK FREQUENCY (MHz)
                                                                                                                                                TX, RTS, DOUT OUTPUT CURRENT                                                                         TX, RTS, DOUT OUTPUT CURRENT
                                        SUPPLY CURRENT vs. BAUD RATE                                                                         vs. OUTPUT LOW VOLTAGE (VCC = 3.3V)                                                                   vs. OUTPUT LOW VOLTAGE (VCC = 5V)
                           400                                                                                                          70                                                                                                90
                                                                                                                                                                                                                                                                                             MAX3100-05
                                                                                               MAX3100-03a
                                                                                                                                                                                                 MAX3100-04
                                       1.8432 MHz
                                                        5V                                                                                                                                                                                80
                           350          CRYSTAL                                                                                         60
                                                        TRANSMITTING
                                                                                                             OUTPUT SINK CURRENT (mA)                                                                         OUTPUT SINK CURRENT (mA)
                                                                                                                                                                                                                                          70                                  RTS
    SUPPLY CURRENT (μA)
                           300                                                                                                          50                                    RTS
                                                                                  5V                                                                                                                                                      60                                        TX
                                                                                  STANDBY                                                                                            TX
                           250                                                                                                          40                                                                                                50
                                                                                                                                                                                                                                          40                                   DOUT
                           200                                                                                                          30
                                               3V                                                                                                                                    DOUT                                                 30
                           150                 TRANSMITTING                                                                             20
                                                                                                                                                                                                                                          20
                           100                                             3V                                                           10                                                                                                10
                                                                           STANDBY
                            50                                                                                                           0                                                                                                 0
                                 100           1000            10k            100k          1M                                                0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0                                                        0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0
                                                       BAUD RATE (bps)                                                                                          VOLTAGE (V)                                                                                    VOLTAGE (V)
4                                                                                                                                                                                                                                                                         Maxim Integrated


                                                                                                       MAX3100
                                                    SPI/MICROWIRE-Compatible
                                                                                  UART in QSOP-16
                                                                                                       Pin Description
                 PIN
                                        NAME                                         FUNCTION
   QSOP          DIP     TQFN-EP
      1           1          23           DIN     SPI/MICROWIRE Serial-Data Input. Schmitt-trigger input.
      2           2           2         DOUT      SPI/MICROWIRE Serial-Data Output. High impedance when CS is high.
      3           3           3          SCLK     SPI/MICROWIRE Serial-Clock Input. Schmitt-trigger input.
                                                  Active-Low Chip-Select Input. DOUT goes high impedance when CS is high,
      4           4           4            CS
                                                  IRQ, TX, and RTS are always active. Schmitt-trigger input.
      6           5           5           IRQ     Active-Low Interrupt Output. Open-drain interrupt output to microprocessor.
                                                  Hardware-Shutdown Input. When shut down (SHDN = 0), the oscillator turns
      7           6           8         SHDN      off immediately without waiting for the current transmission to end, reducing
                                                  supply current to just leakage currents.
      8           7           9          GND      Ground
                                                  Crystal Connection. Leave X2 unconnected for external clock. See Crystal-
      9           8          10            X2
                                                  Oscillator Operation—X1, X2 Connection section.
                                                  Crystal Connection. X1 also serves as an external clock input. See Crystal-
     10           9          11            X1
                                                  Oscillator Operation—X1, X2 Connection section.
                                                  General-Purpose Active-Low Input. Read via the CTS register bit; often used
     11          10          15           CTS
                                                  for RS-232 clear-to-send input (Table 1).
                                                  General-Purpose Active-Low Output. Controlled by the CTS register bit. Often
     13          11          16           RTS
                                                  used for RS-232 request-to-send output or RS-485 driver enable.
                                                  Asynchronous Serial-Data (receiver) Input. The serial information received
     14          12          17            RX     from the modem or RS-232/RS-485 receiver. A transition on RX while in
                                                  shutdown generates an interrupt (Table 5).
     15          13          21            TX     Asynchronous Serial-Data (transmitter) Output
     16          14          22           VCC     Positive Supply Pin (2.7V to 5.5V)
                         1, 6, 7, 12,
    5, 12         —      13, 14, 18,     N.C.     No Connection. Not internally connected.
                         19, 20, 24
     —            —           —            EP     Exposed Pad. Connect EP to ground or leave unconnected.
                        Detailed Description                      Transmit data by writing a 16-bit word to a write-data
                                                                  register, where the last 7 or 8 bits are actual data to be
The MAX3100 universal asynchronous receiver trans-
                                                                  transmitted. Also included is the state of the transmitted
mitter (UART) interfaces the SPI/MICROWIRE-compati-
                                                                  parity bit (if enabled). This register controls the state of
ble, synchronous serial data from a microprocessor
                                                                  the RTS output pin. Received words generate an inter-
(µP) to asynchronous, serial-data communication ports
                                                                  rupt if the receive-bit interrupt is enabled.
(RS-232, RS-485, IrDA). Figure 2 shows the MAX3100
functional diagram.                                               Read data from a 16-bit register that holds the oldest
                                                                  data from the receive FIFO, the received parity data,
The MAX3100 combines a simple UART and a baud-
                                                                  and the logic level at the CTS input pin. This register
rate generator with an SPI interface and an interrupt
                                                                  also contains a bit that is the framing error in normal
generator. Configure the UART by writing a 16-bit word
                                                                  operation and a receive-activity indicator in shutdown.
to a write-configuration register, which contains the
baud rate, data-word length, parity enable, and enable            The baud-rate generator determines the rate at which
of the 8-word receive first-in/first-out (FIFO). The write        the transmitter and receiver operate. Bits B0 to B3 in
configuration selects between normal UART timing and              the write-configuration register determine the baud-rate
IrDA timing, controls shutdown, and contains 4 interrupt          divisor (BRD), which divides down the X1 oscillator fre-
mask bits.                                                        quency. The baud clock is 16 times the data rate (baud
                                                                  rate).
Maxim Integrated                                                                                                                5


MAX3100
SPI/MICROWIRE-Compatible
UART in QSOP-16
                                                                                    9
                                                                      Pt   TX-BUFFER REGISTER
                                                                                    9
                                                                      Pt    TX-SHIFT REGISTER                        TX
                                                                                  D0t–D7t
                                                             SHDN
                                             DIN
                                                                                             X1
                                             CS                 B0                              XTAL
                                                       SPI
                                                   INTERFACE    B1           BAUD-RATE
                                             SCLK                            GENERATOR               RA
                                                                B2                                        ACTIVITY
                                             DOUT               B3                                         DETECT
                                                                                             X2
                                                                                                     FE START/STOP-
                                                                                                         BIT DETECT
                                                                   Pr    RX-SHIFT REGISTER                           RX
                                                                              D0r–D7r
                                                                                    9
               (SOURCES)
             T R Pr RA/FE
                                                                        Pr   RX-BUFFER REGISTER                      CTS
                                 (MASKS)                                                                      I/O
                                                                        Pr   RX-BUFFER REGISTER
                              TRANSMIT-DONE (TM)
                              DATA-RECEIVED (RM)                                                                     RTS
              INTERRUPT                                                             9
    IRQ
                 LOGIC        PARITY (PM)
                              FRAMING ERROR (RAM)/
                              RECEIVE ACTIVITY
 Figure 2. Functional Diagram
The transmitter section accepts SPI/MICROWIRE data,                buffer register from the SPI/MICROWIRE interface. The
formats it, and transmits it in asynchronous serial format         MAX3100 adds start and stop bits to the data and
from the TX output. Data is loaded into the transmit-              clocks the data out at the selected baud rate (Table 7).
6                                                                                                                   Maxim Integrated


                                                                                                                          MAX3100
                                                              SPI/MICROWIRE-Compatible
                                                                                                 UART in QSOP-16
                                                                      ONE BAUD PERIOD
       RX         A
    BAUD            1      2      3       4      5      6      7      8       9       10      11     12     13     14     15     16
   BLOCK
                                                                                       MAJORITY
                                                                                        CENTER
                                                                                       SAMPLER
Figure 3. Start-Bit Timing
                                                                                                                                     DATA
                                                                                                                                    UPDATED
    CS
  SCLK            1      2      3       4      5      6      7      8       9       10      11     12     13     14     15     16
    DIN         1      1     FEN    SHDN    TM     RM     PM     RAM     IR      ST       PE     L      B3     B2     B1     B0
  DOUT          R      T      0       0      0      0      0      0       0       0       0      0      0      0      0      0
Figure 4. SPI Interface (Write Configuration)
The receiver section receives data in serial form. The                                                                              SPI Interface
MAX3100 detects a start bit on a high-to-low RX transi-                        The bit streams for DIN and DOUT consist of 16 bits,
tion (Figure 3). An internal clock samples data at 16                          with bits assigned as shown in the MAX3100
times the data rate. The start bit can occur as much as                        Operations section. DOUT transitions on SCLK’s falling
one clock cycle before it is detected, as indicated by                         edge, and DIN is latched on SCLK’s rising edge (Figure
the shaded portion. The state of the start bit is defined                      4). Most operations, such as the clearing of internal
as the majority of the 7th, 8th, and 9th sample of the                         registers, are executed only on CS’s rising edge. The
internal 16x baud clock. Subsequent bits are also                              DIN stream is monitored for its first two bits to tell the
majority sampled. Receive data is stored in an 8-word                          UART the type of data transfer being executed (Write
FIFO. The FIFO is cleared if it overflows.                                     Config, Read Config, Write Data, Read Data).
The on-board oscillator can use a 1.8432MHz or                                 Only 16-bit words are expected. If CS goes high in the
3.6864MHz crystal, or it can be driven at X1 with a 45%                        middle of a transmission (any time before the 16th bit),
to 55% duty-cycle square wave.                                                 the sequence is aborted (i.e., data does not get written
                                                                               to individual registers). Every time CS goes low, a new
                                                                               16-bit stream is expected. An example of a write con-
                                                                               figuration is shown in Figure 4.
Maxim Integrated                                                                                                                                 7


MAX3100
SPI/MICROWIRE-Compatible
UART in QSOP-16
                              MAX3100 Operations               MAX3100. The device enters test mode if bit 0 = 1. In
                                        Write Operations       this mode, if CS = 0, the RTS pin acts as the 16x clock
Table 1 shows write-configuration data. A 16-bit               generator’s output. This may be useful for direct baud-
SPI/MICROWIRE write configuration clears the receive           rate generation (in this mode, TX and RX are in digital
FIFO and the R, T, RA/FE, D0r–D7r, D0t–D7t, Pr, and Pt         loopback).
registers. RTS and CTS remain unchanged. The new               Normally, the write-data register loads the TX-buffer
configuration is valid on CS’s rising edge if the transmit     register. To change the RTS pin’s state without writing
buffer is empty (T = 1) and transmission is over. If the       data, set the TE bit. Setting the TE bit high inhibits the
latest transmission has not been completed, the regis-         write command (Table 3).
ters are updated when the transmission is over (T = 0).        Reading data clears the R bit and interrupt IRQ (Table 4).
The write-configuration bits (FEN, SHDNi, IR, ST, PE, L,
B3–B0) take effect after the current transmission is                                           Register Functions
over. The mask bits (TM, RM, PM, RAM) take effect              Table 5 shows read/write operation and power-on reset
immediately after the 16th clock’s rising edge at SCLK.        state (POR), and describes each bit used in program-
                                                               ming the MAX3100. Figure 5 shows parity and word-
                                        Read Operations        length control.
Table 2 shows read-configuration data. This register
reads back the last configuration written to the
 Table 1. Write Configuration (D15, D14 = 1, 1)
   BIT      15    14      13       12     11     10     9     8        7     6     5      4      3       2      1      0
   DIN       1     1     FEN    SHDNi     TM     RM    PM   RAM       IR    ST    PE      L     B3      B2     B1     B0
  DOUT      R      T       0        0      0      0     0     0        0     0     0      0      0       0      0      0
 Table 2. Read Configuration (D15, D14 = 0, 1)
   BIT      15    14     13       12      11     10    9     8       7      6     5      4      3       2      1       0
   DIN       0     1      0        0       0      0    0     0       0      0     0      0      0       0      0     TEST
  DOUT      R      T    FEN    SHDNo      TM    RM    PM   RAM      IR     ST    PE      L     B3      B2     B1      B0
Table 3. Write Data (D15, D14 = 1, 0)
   BIT      15    14     13     12     11      10      9     8       7      6     5      4      3       2      1       0
   DIN       1     0      0      0      0      TE     RTS   Pt      D7t   D6t    D5t    D4t    D3t     D2t    D1t     D0t
  DOUT      R      T      0      0      0    RA/FE    CTS   Pr      D7r   D6r    D5r    D4r    D3r     D2r    D1r     D0r
 Table 4. Read Data (D15, D14 = 0, 0)
   BIT      15    14     13     12     11      10      9     8       7     6      5      4      3       2      1       0
   DIN       0     0      0      0      0       0      0     0       0     0      0      0      0       0      0       0
  DOUT      R      T      0      0      0    RA/FE    CTS   Pr      D7r   D6r    D5r    D4r    D3r     D2r    D1r     D0r
8                                                                                                           Maxim Integrated


                                                                                                       MAX3100
                                                 SPI/MICROWIRE-Compatible
                                                                                UART in QSOP-16
Table 5. Bit Descriptions
    BIT       READ/   POR
                                                                        DESCRIPTION
  NAME        WRITE  STATE
  B0–B3          w    0000   Baud-Rate Divisor Select Bits. Sets the baud clock’s value (Table 6).
  B0–B3          r    0000   Baud-Rate Divisor Select Bits. Reads the 4-bit baud clock value assigned to these registers.
                       No    Clear-to-Send-Input. Records the state of the CTS pin (CTS bit = 0 implies CTS pin = logic
   CTS           r
                     change  high).
                             Transmit-Buffer Register. Eight data bits written into the transmit-buffer register. D7t is ignored
 D0t–D7t         w     X
                             when L = 1.
                             Eight data bits read from the receive FIFO or the receive register. These will be all 0s when
 D0r–D7r         r  00000000
                             the receive FIFO or the receive registers are empty. When L = 1, D7r is always 0.
   FEN           w      0    FIFO Enable. Enables the receive FIFO when FEN = 0. When FEN = 1, FIFO is disabled.
   FEN           r      0    FIFO-Enable Readback. FEN’s state is read.
    IR           w      0    Enables the IrDA timing mode when IR = 1.
    IR           r      0    Reads the value of the IR bit.
                             Bit for setting the word length of the transmitted or received data. L = 0 results in 8-bit words
     L           w      0
                             (9-bit words if PE = 1), see Figure 5. L = 1 results in 7-bit words (8-bit words if PE = 1).
     L           r      0    Reads the value of the L bit.
                             Transmit-Parity Bit. This bit is treated as an extra bit that will be transmitted if PE = 1. To be
     Pt          w     X     useful in 9-bit networks, the MAX3100 does not calculate parity. If PE = 0, then this bit (Pt) is
                             ignored in transmit mode (see the Nine-Bit Networks section).
                             Receive-Parity Bit. This bit is the extra bit received if PE = 1. Therefore, PE = 1 results in 9-bit
    Pr           r     X     transmissions (L = 0). If PE = 0, then Pr is set to 0. Pr is stored in the FIFO with the receive
                             data (see the Nine-Bit Networks section).
                             Parity-Enable Bit. Appends the Pt bit to the transmitted data when PE = 1, and sends the Pt
                             bit as written. No parity bit is transmitted when PE = 0. With PE = 1, an extra bit is expected to
    PE           w      0
                             be received. This data is put into the Pr register. Pr = 0 when PE = 0. The MAX3100 does not
                             calculate parity.
    PE           r      0    Reads the value of the Parity-Enable bit.
    PM           w      0    Mask for Pr bit. IRQ is asserted if PM = 1 and Pr = 1 (Table 6).
    PM           r      0    Reads the value of the PM bit (Table 6).
                             Receive Bit or FIFO Not Empty Flag. R = 1 means new data is available to be read from the
     R           r      0
                             receive register or FIFO.
    RM           w      0    Mask for R bit. IRQ is asserted if RM = 1 and R = 1 (Table 6).
    RM           r      0    Reads the value of the RM bit (Table 6).
   RAM           w      0    Mask for RA/FE bit. IRQ is asserted if RAM = 1 and RA/FE = 1 (Table 6).
   RAM           r      0    Reads the value of the RAM bit (Table 6).
                             Request-to-Send Bit. Controls the state of the RTS output. This bit is reset on power-up (RTS
   RTS           w      0
                             bit = 0 sets the RTS pin = logic high).
Maxim Integrated                                                                                                                  9


MAX3100
SPI/MICROWIRE-Compatible
UART in QSOP-16
Table 5. Bit Descriptions (continued)
    BIT       READ/        POR
                                                                                    DESCRIPTION
   NAME       WRITE       STATE
                                        Receiver-Activity/Framing-Error Bit. In shutdown mode, this is the RA bit. In normal operation,
                                        this is the FE bit. In shutdown mode, a transition on RX sets RA = 1. In normal mode, a fram-
                                        ing error sets FE = 1. A framing error occurs if a zero is received when the first stop bit is
                                        expected. FE is set when a framing error occurs, and cleared upon receipt of the next proper-
   RA/FE          r          0
                                        ly framed character independent of the FIFO being enabled. When the device wakes up, it is
                                        likely that a framing error will occur. This error can be cleared with a write configuration. The
                                        FE bit is not cleared on a Read Data operation. When an FE is encountered, the UART resets
                                        itself to the state where it is looking for a start bit.
                                        Software-Shutdown Bit. Enter software shutdown with a write configuration where SHDNi = 1.
                                        Software shutdown takes effect after CS goes high, and causes the oscillator to stop as soon
                                        as the transmitter becomes idle. Software shutdown also clears R, T, RA/FE, D0r–D7r,
   SHDNi          w          0          D0t–D7t, Pr, Pt, and all data in the receive FIFO. RTS and CTS can be read and updated
                                        while in shutdown. Exit software shutdown with a write configuration where SHDNi = 0. The
                                        oscillator restarts typically within 50ms of CS going high. RTS and CTS are unaffected. Refer
                                        to the Pin Description for hardware shutdown (SHDN input).
                                        Shutdown Read-Back Bit. The read-configuration register outputs SHDNo = 1 when the UART
                                        is in shutdown. Note that this bit is not sent until the current byte in the transmitter is sent (T =
   SHDNo          r          0
                                        1). This tells the processor when it may shut down the RS-232 driver. This bit is also set imme-
                                        diately when the device is shut down through the SHDN pin.
                                        Transmit-Stop Bit. One stop bit will be transmitted when ST = 0. Two stop bits will be transmit-
     ST           w          0
                                        ted when ST = 1. The receiver only requires one stop bit.
     ST           r          0          Reads the value of the ST bit.
                                        Transmit-Buffer-Empty Flag. T = 1 means that the transmit buffer is empty and ready to
      T           r          1
                                        accept another data word.
                                        Transmit-Enable Bit. If TE = 1, then only the RTS pin will be updated on CS’s rising edge. The
     TE           w          0
                                        contents of RTS, Pt, and D0t–D7t transmit on CS’s rising edge when TE = 0.
     TM           w          0          Mask for T bit. IRQ is asserted if TM = 1 and T = 1 (Table 6).
     TM           r          0          Reads the value of the TM bit (Table 6).
                                  PE = 0, L = 0
                    IDLE    START   D0        D1    D2     D3    D4      D5    D6     D7     STOP   STOP     IDLE
                                  PE = 0, L = 1
                    IDLE    START   D0        D1    D2     D3    D4      D5    D6     STOP   STOP   IDLE
                                  PE = 1, L = 0
                    IDLE    START   D0        D1    D2     D3    D4      D5    D6     D7       Pt  STOP     STOP    IDLE
                                  PE = 1, L = 1
                    IDLE    START   D0        D1    D2     D3    D4      D5    D6      Pt     STOP  STOP     IDLE
                    TIME
                                                                                      SECOND STOP BIT IS OMITTED IF ST = 0.
 Figure 5. Parity and Word-Length Control
10                                                                                                                            Maxim Integrated


                                                                                                                 MAX3100
                                                      SPI/MICROWIRE-Compatible
                                                                                       UART in QSOP-16
                     Interrupt Sources and Masks                       shows the functional diagram for the interrupt sources
A Read Data operation clears the interrupt IRQ. Table                  and mask blocks.
6 gives the details for each interrupt source. Figure 6
Table 6. Interrupt Sources and Masks—Bit Descriptions
   BIT      MASK              MEANING
                                                                                      DESCRIPTION
  NAME         BIT           WHEN SET
                                                 The Pr bit reflects the value in the word currently in the receive-buffer register
                                                 (oldest data available). The Pr bit is set when parity is enabled (PE = 1) and the
                                                 received parity bit is 1. The Pr bit is cleared either when parity is not enabled (PE
    Pr         PM      Received parity bit = 1
                                                 = 0), or when parity is enabled and the received bit is 0. An interrupt is issued
                                                 based on the oldest Pr value in the receiver FIFO. The oldest Pr value is the next
                                                 value that will be read by a Read Data operation.
                                                 The R bit is set when new data is available to be read from the receive register/
    R          RM      Data available            FIFO. FIFO is cleared when all data has been read. An interrupt is asserted as long
                                                 as R = 1 and RM = 1.
                                                 This is the RA (RX-transition) bit in shutdown, and the FE (framing-error) bit in
                                                 operating mode. RA is set if there has been a transition on RX since entering
                       Transition on RX when     shutdown. RA is cleared when the MAX3100 exits shutdown. IRQ is asserted
                       in shutdown; framing      when RA is set and RAM = 1.
  RA/FE       RAM
                       error when not in         FE is determined solely by the currently received data, and is not stored in FIFO.
                       shutdown                  The FE bit is set if a zero is received when the first stop bit is expected. FE is
                                                 cleared upon receipt of the next properly framed character. IRQ is asserted
                                                 when FE is set and RAM = 1.
                                                 The T bit is set when the transmit buffer is ready to accept data. IRQ is asserted
                       Transmit buffer is        low if TM = 1 and the transmit buffer becomes empty. This source is cleared on
    T          TM
                       empty                     CS’s rising edge during a Read Data operation. Although the interrupt is cleared,
                                                 T may be polled to determine transmit-buffer status.
                                                                                       S      NEW DATA AVAILABLE
                                                                                    Q
                                                             R                         R      DATA READ
                                                                                   RM MASK
                                                                                       S      TRANSMIT BUFFER EMPTY
                                                             T                      Q
                                                                                       R      DATA READ
                                                                                   TM MASK
             IRQ
                                                                                       S      PE = 1 AND RECEIVED PARITY BIT = 1
                                                             Pr                     Q
                  N                                                                    R      PE = 0 OR RECEIVED PARITY BIT = 0
                                                                                   PM MASK
                                                                                   TRANSITION ON RX
                                                             RA
                                                                                                  SHUTDOWN
                                                                                   RAM MASK
                                                                                   FRAMING ERROR
                                                             FE
                                                                                                  SHUTDOWN
                                                                                   RAM MASK
Figure 6. Interrupt Sources and Masks Functional Diagram
Maxim Integrated                                                                                                                       11


MAX3100
SPI/MICROWIRE-Compatible
UART in QSOP-16
Table 7. Baud-Rate Selection Table*                       Shutdown clears the receive FIFO, R, A, RA/FE,
                                                          D0r–D7r, Pr, and Pt registers and sets the T bit high.
                                     BAUD         BAUD    Configuration bits (RM, TM, PM, RAM, IR, ST, PE, L,
       BAUD           DIVISION       RATE         RATE    B0-3, and RTS) can be modified when SHDNo = 1 and
  B3   B2 B1 B0        RATIO        (fOSC =      (fOSC =  CTS can also be read. Even though RA is reset upon
                                  1.8432MHz)   3.6864MHz)
                                                          entering shutdown, it will go high when any transitions
   0    0    0   0**      1         115.2k**     230.4k** are detected on the RX pin. This allows the UART to
   0    0    0   1        2          57.6k        115.2k  monitor activity on the receiver when in shutdown.
   0    0    1   0        4          28.8k         57.6k  The command to power up (SHDNi = 0) turns on the
                                                          oscillator when CS goes high if SHDN pin = logic high,
   0    0    1   1        8          14.4k         28.8k
                                                          with a start-up time of about 25ms. This is done through
   0    1    0   0       16           7200         14.4k  a write configuration, which clears all registers but RTS
   0    1    0   1       32           3600         7200   and CTS. Since the crystal oscillator typically requires
   0    1    1   0       64           1800         3600
                                                          25ms to start, the first received characters will be gar-
                                                          bled, and a framing error may occur.
   0    1    1   1       128           900         1800
   1    0    0   0        3          38.4k         76.8k   __________Applications Information
   1    0    0   1        6          19.2k         38.4k                                Driving Opto-Couplers
   1    0    1   0       12           9600         19.2k  Figure 7 shows the MAX3100 in an isolated serial inter-
   1    0    1   1       24           4800         9600
                                                          face. The MAX3100 Schmitt-trigger inputs are driven
                                                          directly by opto-coupler outputs. Isolated power is pro-
   1    1    0   0       48           2400         4800   vided by the MAX253 transformer driver and linear reg-
   1    1    0   1       96           1200         2400   ulator shown. A significant feature of this application is
   1    1    1   0       192           600         1200   that the opto-coupler’s skew does not affect the asyn-
                                                          chronous serial output’s timing. Only the set-up and
   1    1    1   1       384           300          600
                                                          hold times of the SPI interface need to be met.
 *Standard baud rates shown in bold                       Figure 8 shows a bidirectional opto-isolated interface
 **Default baud rate                                      using only two opto-isolators. Over 81% power savings
                                                          is realized using IrDA mode due to its 3/16-wide baud
                                                          periods.
                     Clock-Oscillator Baud Rates
Bits B0–B3 of the write-configuration register determine                     Crystal-Oscillator Operation—
the baud rate. Table 7 shows baud-rate divisors for given                                    X1, X2 Connection
input codes, as well as the given baud rate for           The MAX3100 includes a crystal oscillator for baud-rate
1.8432MHz and 3.6864MHz crystals. Note that the baud      generation. For standard baud rates, use a 1.8432MHz
rate = crystal frequency / 16x division ratio.            or 3.6864MHz crystal. The 1.8432MHz crystal results in
                                                          lower operating current; however, the 3.6864MHz crys-
                                        Shutdown Mode     tal may be more readily available in surface mount.
In shutdown, the oscillator turns off to reduce power
dissipation (ICC < 10µA). The MAX3100 enters shut-        Ceramic resonators are low-cost alternatives to crystals
down in one of two ways: by a software command            and operate similarly, though the “Q” and accuracy are
(SHDNi bit = 1) or by a hardware command (SHDN =          lower. Some ceramic resonators are available with inte-
logic low). The hardware shutdown is effective immedi-    gral load capacitors, which can further reduce cost.
ately and will immediately terminate any transmission in  The tradeoff between crystals and ceramic resonators
progress. The software shutdown, requested by setting     is in initial frequency accuracy and temperature drift.
SHDNi bit = 1, is entered upon completing the trans-      The total error in the baud-rate generator should be
mission of the data in both the transmit register and the kept below 1% for reliable operation with other systems.
transmit-buffer register. The SHDNo bit is set when the   This is accomplished easily with a crystal, and in most
MAX3100 enters shutdown (either hardware or soft-         cases can be achieved with ceramic resonators. Table
ware). The microcontroller (µC) can monitor the SHDNo     8 lists the different types of crystals and resonators and
bit to determine when all data has been transmitted,      their suppliers.
and shut down any external circuitry (such as RS-232
transceivers) at that time.
12                                                                                                      Maxim Integrated


                                                                                             MAX3100
                                                         SPI/MICROWIRE-Compatible
                                                                                UART in QSOP-16
                                                                     ISO
                                                                     +5V
                                                       2kΩ
                                       VCC 6N136
                                                             DIN
                            470Ω
                  DOUT                                            MAX3100
                                                                                       ISO
                                                                                       +5V
                                                       2kΩ
                                                                                     MAX3222
                                       VCC
                                            6N136            SCLK
                                                                             TX
                                                                             RX
                            470Ω
                  SCLK                                                      CTS
                                      VCC
                                                                            RTS
                                   2k
                                                      470Ω
                   DIN                      6N136
                                                             DOUT
                                                       2kΩ
                                       VCC
                                            6N136            CS
                            470Ω
                    CS
                                      +5V
                                                                    MAX667
                                                   MBR0520
                                                                    LINEAR        ISO
                                                                  REGULATOR       5V
                          MAX253
                       TRANSFORMER
                          DRIVER
                                            HALO
                                          TGM-010P3
Figure 7. Driving Optocouplers
Maxim Integrated                                                                                    13


MAX3100
SPI/MICROWIRE-Compatible
UART in QSOP-16
                                                                                         ISO +5V
                                     +5V
                                                                 2kΩ
                                      VCC                                                  VCC
                                              TX                                   RX
                    CS                                                                                   CS
                                                 470Ω
                 SCLK                                                                                    SCLK
                   DIN             MAX3100                                              MAX3100          DIN
                 DOUT                                        +5V                                         DOUT
                                                         2kΩ
                                              RX                                   TX
                                     GND                                    470Ω           GND
 Figure 8. Bidirectional Opto-Isolated Interface
 Table 8. Component and Supplier List
                             FREQUENCY             TYPICAL                                       PART             PHONE
     DESCRIPTION                                                       SUPPLIER
                                  (MHz)           C1, C2 (pF)                                   NUMBER           NUMBER
   Through-Hole Crystal
                                 1.8432                 25       ECS International, Inc.    ECS-18-13-1       (913) 782-7787
   (HC-49/U)
   Through-Hole
                                 1.8432                 47       Murata North America       CSA1.84MG         (800) 831-9172
   Resonator
   Through-Hole Crystal
                                 3.6864                 33       ECS International, Inc.    ECS-36-18-4       (913) 782-7787
   (HC-49/US)
   SMT Crystal                   3.6864                 39       ECS International, Inc.    ECS-36-20-5P      (913) 782-7787
                                                      None
   SMT Resonator                 3.6864                          AVX/Kyocera                PBRC-3.68B        (803) 448-9411
                                                    (integral)
This oscillator supports parallel-resonant mode crystals          ified load capacitance of 11pF would use capacitors of
and ceramic resonators, or can be driven from an                  22pF on either side of the crystal to ground. Series-res-
external clock source. Internally, the oscillator consists        onant mode crystals have a slight frequency error, typi-
of an inverting amplifier with its input, X1, tied to its out-    cally oscillating 0.03% higher than specified series-
put, X2, by a bias network that self-biases the inverter          resonant frequency, when operated in parallel mode.
at approximately VCC / 2. The external feedback circuit,          It is very important to keep crystal, resonator, and
usually a crystal, from X2 to X1 provides 180° of phase           load-capacitor leads and traces as short and direct as
shift, causing the circuit to oscillate. As shown in the          possible. The X1 and X2 trace lengths and ground
standard application circuit, the crystal or resonator is         tracks should be tight, with no other intervening traces.
connected between X1 and X2, with the load capaci-                This helps minimize parasitic capacitance and noise
tance for the crystal being the series combination of C1          pickup in the oscillator, and reduces EMI. Minimize
and C2. For example, a 1.8432MHz crystal with a spec-             capacitive loading on X2 to minimize supply current.
14                                                                                                              Maxim Integrated


                                                                                                             MAX3100
                                                                       SPI/MICROWIRE-Compatible
                                                                                UART in QSOP-16
The MAX3100 X1 input can be driven directly by an                           The parity/9th-bit interrupt is controlled only by the data
external CMOS clock source. The trip level is approxi-                      in the receive register, and is not affected by data in the
mately equal to VCC / 2. No connection should be made                       FIFO, so the most effective use of the parity/9th-bit
to X2 in this mode. If a TTL or non-CMOS clock source                       interrupt is with FIFO disabled. With the FIFO disabled,
is used, AC couple with a 10nF capacitor to X1. The                         received nonaddress words can be ignored and not
peak-to-peak swing on the input should be at least 2V                       even read from the UART.
for reliable operation.
                                                                                                                   SIR IrDA Mode
                                                           9-Bit Networks   The MAX3100’s IrDA mode can be used to communicate
The MAX3100 supports a common multidrop communi-                            with other IrDA SIR-compatible devices, or to reduce
cation technique referred to as 9-bit mode. In this mode,                   power consumption in opto-isolated applications.
the parity bit is set to indicate a message that contains a                 In IrDA mode, a bit period is shortened to 3/16 of a
header with a destination address. The MAX3100 parity                       baud period (1.6µs at 115,200 baud) (Figure 9). A data
mask can be set to generate interrupts for this condition.                  zero is transmitted as a pulse of light (TX pin = logic
Operating a network in this mode reduces the process-                       low, RX pin = logic high).
ing overhead of all nodes by enabling the slave con-
trollers to ignore most message traffic. This can relieve                   In receive mode, the RX signal’s sampling is done
the remote processor to handle more useful tasks.                           halfway into the transmission of a high level. The sam-
                                                                            pling is done once, instead of three times, as in normal
In 9-bit mode, the MAX3100 is set up with 8 bits plus                       mode. The MAX3100 ignores pulses shorter than
parity. The parity bit in all normal messages is clear, but                 approximately 1/16 of the baud period. The IrDA device
is set in an address-type message. The MAX3100 pari-                        that is communicating with the MAX3100 must be set to
ty-interrupt mask is enabled to generate an interrupt on                    transmit pulses at 3/16 of the baud period. For compati-
high parity. When the master sends an address mes-                          bility with other IrDA devices, set the format to 8-bit
sage with the parity bit set, all MAX3100 nodes issue an                    data, one stop, no parity.
interrupt. All nodes then retrieve the received byte to
compare to their assigned address. Once addressed,                                                                    IrDA Module
the node continues to process each received byte. If the                    The MAX3100 was optimized for direct optocoupler
node was not addressed, it ignores all message traffic                      drive, whereas IrDA modules contain inverting buffers.
until a new address is sent out by the master.                              Invert the RX and TX outputs as shown in Figure 10.
                                                                                          8051 Example: IrDA to RS-232 Converter
                                                                            Figure 10 shows the MAX3100 with an 8051 µC. This
                                                                            circuit receives IrDA data and outputs standard RS-232
                                                                STOP        data. Although the 8051 contains an internal UART, it
   NORMAL UART     START                                                    does not support IrDA or high-speed communications.
            TX             1   0   1     0   0     1   1    0    1
                                                                            The MAX3100 can easily interface to the 8051 to sup-
          IrDA
                                                                            port these high-performance communications modes.
            TX                                                              The 8051 does not have an SPI interface, so communi-
                                                                            cation with the MAX3100 is accomplished with port pins
          IrDA                                                              and a short software routine (Figure 12a).
            RX                                                              The software routine polls the IRQ output to see if data
                                                                            is available from the MAX3100 UART. It then shifts the
       NORMAL                                                               data out, using the 8051 port pins, and transmits it out
           RX       0      1   0   1     0   0     1   1    0    1          the RS-232 side through the MAX3221 driver. The 8051
                                                                            simultaneously monitors its internal UART for incoming
                   START               DATA BITS
                                                                STOP        communications from the RS-232 side, and transmits
                                                                            this data out the IrDA side through the MAX3100. The
                                   UART FRAME
                                                                            low-level routine (UTLK) is the core routine that sends
                                                                            and receives data over the port pins to simulate an SPI
                                                                            port on the 8051. This technique is useful for any 8051-
Figure 9. IrDA Timing                                                       based MAX3100 port-pin-interfaced application.
Maxim Integrated                                                                                                                     15


MAX3100
SPI/MICROWIRE-Compatible
UART in QSOP-16
                                   DIRECT                                                      IR MODULE
                               OPTO-COUPLER                                 OR                    DRIVE
                                   DRIVE
                                                                +5V
                                                                     330Ω
            MAX3221                                                  IR LED
                                                    TX
                                                                +5V                  TX                  TXD
                          8051
                                                                   100Ω                    1/6 HC00
                                          MAX3100                              3100                            IR
                                                                                                             MODULE
                                                          0.1μF
                                      IRQ           RX                               RX                  RXD
                                                                     10kΩ
                                                                                            1/6 HC00
                                          1.8432MHz
                                   22pF              22pF
 Figure 10. Bidirectional RS-232 IrDA Using an 8051
                          Interface to PIC Processor                The software routine (Figure 12) begins by reading the
                    (“Quick Brown Fox” Generator)                   DIP switch on port RB. The switch data includes 4 bits
Figure 11 illustrates the use of the MAX3100 with the               for the baud rate, 1 bit for number of stop bits, 1 bit for
PIC®. This circuit is a “Quick Brown Fox” generator that            a word length of 7 or 8 bits, and 1 bit for delay between
repeatedly transmits “THE QUICK BROWN FOX JUMPS                     messages. The PIC reads the switch only at initializa-
OVER THE LAZY DOG” (covering the entire alphabet)                   tion (reset), and programs the parameters into the
over an RS-232 link with adjustable baud rate, word                 MAX3100. It then begins sending the message repeat-
length, and delay. Although a software-based UART                   edly. If the delay bit is set, it inserts a 1sec delay
could be implemented on the PIC, features like accu-                between transmissions. As in the 8051 example, the
rate variable baud rates, high baud rates, and simple               main routine is called UTLK, and can be used in any
protocol selection would be difficult to implement reli-            PIC-based, port-pin-interfaced application.
ably. The 16C54 in the example is the most basic of the
PICs. Thus, it is possible to implement the example on
any member of the PIC family.
 PIC is a registered trademark of Microchip Corporation.
16                                                                                                                Maxim Integrated


                                                                                         MAX3100
                                                   SPI/MICROWIRE-Compatible
                                                                     UART in QSOP-16
                       VCC
                   GO                 RB7
                               100kΩ
                                          PIC16C54
        Y/N 1μs Delay                 RB6          RA0  DIN
                                                                                     MAX3221
                               100kΩ
                                                             MAX3100
        1/2 STOP BITS                 RB5          RA1  DOUT            TX                   TX
                               100kΩ
              7/8 BITS                RB4          RA2  SCLK
                               100kΩ
                    B3                RB3          RA3  CS
                               100kΩ                      X1         X2
                    B2                RB2                                 1. 8432MHz
                               100kΩ
                                                              22pF        22pF
                    B1                RB1
                               100kΩ
                    B0                RB0
                                100kΩ
Figure 11. Quick Brown Fox Generator
Maxim Integrated                                                                                17


MAX3100
SPI/MICROWIRE-Compatible
UART in QSOP-16
  __________MAX3100 Synchronous-to-Asynchronous SPI UART at a Glance
 Table 9. Synchronous Data Input Format (DIN pin from microprocessor, SPI MOSI)
                                           Bit Number
   Oper-
   ation  15 14   13   12   11  10   9     8         7   6   5   4   3   2    1        0
   Write                                            IR
           1  1  FEN SHDNi  TM  RM  PM   RAM            ST  PE   L  B3  B2   B1       B0
   Config                                        (IrDA)
   Read
           0  1    0    0    0   0   0     0         0   0   0   0   0   0    0      TEST
   Config
   Write
           1  0    0    0    0  TE  RTS   Pt       D7t  D6t D5t D4t D3t D2t  D1t      D0t
   Data
   Read
           0  0    0    0    0   0   0     0         0   0   0   0   0   0    0        0
   Data
 Table 10. Synchronous Data Output Format (DOUT pin to microprocessor, SPI MISO)
                                          Bit Number
   Oper-
   ation  15 14   13   12   11  10   9    8          7   6   5   4   3   2     1       0
   Write
          R   T    0    0    0   0   0    0          0   0   0   0   0   0     0       0
   Config
   Read                                             IR
          R   T  FEN SHDNo  TM  RM  PM  RAM             ST  PE   L  B3  B2    B1      B0
   Config                                        (IrDA)
   Write                       RA/
          R   T    0    0    0      CTS   Pr       D7r  D6r D5r D4r D3r D2r  D1r      D0r
   Data                         FE
   Read                        RA/
          R   T    0    0    0      CTS   Pr       D7r  D6r D5r D4r D3r D2r  D1r      D0r
   Data                         FE
18                                                                          Maxim Integrated


                                                                                               MAX3100
                                                          SPI/MICROWIRE-Compatible
                                                                            UART in QSOP-16
Table 11. Bit Definitions*
                 Bit                                                         Bit
 Register                     Bit Set (1)         Bit Clear (0)    Register            Bit Set (1)      Bit Clear (0)
               Name                                                         Name
                           Disable FIFO         Enable FIFO                         Word length =     Word length =
  Config        FEN                                                 Config     L
                           buffer               buffer                              7 bits            8 bits
  Config       SHDNi       Shutdown             Operate              Write                            Enable normal
                                                                              TE    Inhibit TX output
                                                                     Data                             operation
                           Enable transmit-     Disable transmit-
  Config         TM
                           done interrupt       done interrupt       Write          Drive RTS output  Drive RTS out-
                                                                             RTS
                                                                     Data           pin low           put pin high
                           Enable data-         Disable data-
  Config         RM        received inter-      received             Write          Transmit          Transmit
                                                                              Pt
                           rupt                 interrupt            Data           parity = 1        parity = 0
                           Enable parity        Disable parity       Read           Data overrun or
  Config         PM                                                         RA/FE                     Normal
                           interrupt            interrupt            Data           framing error
                           Enable framing-      Disable framing-     Read           CTS input pin is  CTS input pin is
  Config        RAM                                                          CTS
                           error interrupt      error interrupt      Data           low               high
                           Enable IrDA          Standard                            Data has been     Data buffer is
  Config          IR                                                  All      R
                           timing mode          timing                              received          empty
  Config          ST       Two stop bits        One stop bit                        Transmit buffer   UART is busy
                                                                      All      T
  Config          PE       Parity enabled       Parity disabled                     is empty          transmitting
*Default setting is clear
Table 12. Field Definitions                                       Table 13. 1.8432MHz Baud Rates
     Register            Field Name              Meaning            B3...B0 BRD   Baud        B3...B0  BRD       Baud
      Config                B3–B0          Baud-rate divisor       0 0 0 0    1   115.2k     1 0 0 0      3      38.4k
    Write Data             D7t–D0t         Transmit data           0 0 0 1    2     56k      1 0 0 1      6      19.2k
    Read Data                 Pr           Received parity bit     0 0 1 0    4     28k      1 0 1 0     12      9600
    Read Data              D7r–D0r         Received data           0 0 1 1    8     14k      1 0 1 1     24      4800
                                                                   0 1 0 0   16    7200      1 1 0 0     48      2400
                                                                   0 1 0 1   32    3600      1 1 0 1     96      1200
                                                                   0 1 1 0   64    1800      1 1 1 0    192       600
                                                                   0 1 1 1  128    900       1 1 1 1    384       300
Maxim Integrated                                                                                                       19


MAX3100
SPI/MICROWIRE-Compatible
UART in QSOP-16
 Figure 12a. 8051 IrDA/RS-232 Code
20                                 Maxim Integrated


                                                MAX3100
                                 SPI/MICROWIRE-Compatible
                                          UART in QSOP-16
Figure 12b. MAX3100 Using PIC µC
Maxim Integrated                                         21


MAX3100
SPI/MICROWIRE-Compatible
UART in QSOP-16
 Figure 12b. MAX3100 Using PIC µC (continued)
22                                            Maxim Integrated


                                                                                        MAX3100
                                       SPI/MICROWIRE-Compatible
                                                                   UART in QSOP-16
 ___________________________________________________Typical Operating Circuit
                                          MAX3100                                    MAX3223
                     SPI/MICROWIRE                                                                  RS-232 I/O
                                     DIN           TX
                                     DOUT          RX
               μC
                                     SCLK         CTS
                                     CS           RTS
                                     IRQ
                                   C1               C2
 ___________________Chip Information                                        Package Information
                                                   For the latest package outline information and land patterns, go
PROCESS: BiCMOS                                    to www.maxim-ic.com/packages.
SUBSTRATE CONNECTED TO GND                           PACKAGE TYPE         PACKAGE CODE          DOCUMENT NO.
                                                       14 Plastic DIP            P14-3               21-0043
                                                         16 QSOP                 E16-1               21-0055
                                                        24 TQFN-EP              T2444-4              21-0139
Maxim Integrated                                                                                                  23


MAX3100
SPI/MICROWIRE-Compatible
UART in QSOP-16
                                                                                                                            Revision History
  REVISION          REVISION                                                                                                                 PAGES
                                                                         DESCRIPTION
  NUMBER               DATE                                                                                                                CHANGED
       1               12/01       Changed pin labeling                                                                                         17
       2                1/09       Added 24 TQFN information                                                                                1, 2, 5, 24
Maxim cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim product. No circuit patent licenses are implied.
Maxim reserves the right to change the circuitry and specifications without notice at any time. The parametric values (min and max limits) shown in the Electrical
Characteristics table are guaranteed. Other parametric values quoted in this data sheet are provided for guidance.
24                                             Maxim Integrated 160 Rio Robles, San Jose, CA 95134 USA 1-408-601-1000
©      Maxim Integrated                                  The Maxim logo and Maxim Integrated are trademarks of Maxim Integrated Products, Inc.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Maxim Integrated:
 MAX3100CEE+ MAX3100CPD+ MAX3100EEE+ MAX3100EPD+ MAX3100CEE MAX3100CEE+T MAX3100CEE-
T MAX3100EEE+T MAX3100ETG+ MAX3100ETG+T
