                                                                                       XR68C681
                                                                                                       
                                                                                                    
                                                                                                          
FEATURES
    !" # $         $         %            #   ; '        '3  $-
    %& '  %  ' (   $  %(                  <0        ,% %
 )$ *++  $  ' ( "  *++  $              /0        ,% # % (   - +  %
     %(                                                 '%  # %
 ,-  *(% ( ./ *( # '            %     ' ( %'( + &%
 #    *(  0        % ( 1 (++     *(
                                                           $& $   $'  ( - , 
     %
 # $  $  *(    '( + 2'  %(           ( (   /</<  $ 
     $  ' (                                              (- (' /</  (' %
 2!   '3 ((&                                  $ ' $  : ,   '          -&
 !( *(  4 5 '3  .%"
    /5 '3  67.%                                  APPLICATIONS
 8"        29" :' :,* 7  $
                                                          ( $( &% %
      :,* 7 $ %
 (+ '( / *(   .(                        (  , .,    (    
 #    ( 2(-  %3 #              2 + $   ('( &% %
     $(( %
GENERAL DESCRIPTION
 25             ( % %& '  %  ' (   $    5/</< $ (' ++ %  %( - # %( + 
 %(    (%  $ ' ('( % $ ('        /< +(& + ('' %%%
  ($ %  +& ( $  $  + $ !               (% +(' $ %( - $ ' $  &   "
%& '  % ' ('( % '             % (  %( -  (  (-  + ' $ %(& 2,#. < ' %%
'3-               (% $ %(- $ + % (             ($ (-  + '  $    ' %( "
('' %% % $ %&% %  $ &  % $ (            $ (% '3- $ (  = ( #,   == ( ,:
 $  (   $(      (  
ORDERING INFORMATION
                              Pin          Operating                                  Pin           Operating
        Part No.           Package       Temperature             Part No.         Package         Temperature
                                             Range                                                    Range
      5/</<>            == ,:         ?@         5/</<8           = #,        =  ?<6
       5/</<>            == ,:      =  ?<6        5/</<,           = ,#,          ?@
                                                                5/</<,           = ,#,       =  ?<6
       
     


XR68C681
      5       5                5*      5*                         #,  #,6                      ,  ,@
                                                                 #,                          ,
                                                                           - +
                                                                          '%                   ,
      9       9                9      9                                                         '(   '
                                                                                                          :-('
                                                                            #,
     $  -(% %                 $  -(% %
                                                                                                          ,
                                                                              
      %  -(%               %  -(% 
                                       *                            #  ,                     ,
                                                   #     *%
                        (                 #                            (( -
                                                             #;                                      *
                                *
                                                                                         *( 
    *%                                                     #                            0     
    *++ 
                       $  '$                         #                            .( 
                        $$ %%  '$                       #                              %'(
     @        = .A        7    22       # 7     #8                      5.:7      5
  ( $(' % 8 '(  #:<<1 ,$'
                          Figure 1. Block Diagram of the XR68C681 DUART Device
  
                                                        


                                                                                                                                                         XR68C681
PIN CONFIGURATION
                                                                          == ;''                      # 7                                                          =   ''
                               6 #,            1 #,1              8                       = #,6            = #,
                       1                                
                                                                                                                                              #,1                    1   #,=
                       /               =                                 =1 #,=                       =                                           1                1<   #,6
                                                                                                                                              #,    =                1@   # 7
                                                                                                                                                1    6                1/   #,
                                                                                                                                                         XR68C681
          =      @                                                                                                          1                =    /                16   
        #,      <                                                                                                          1< 22          #,    @                1=   22
       .A                                                                                                                 1@ 5           .A8     <                11   5
      :7                                                                                                                1/   5.:7    78                     1   5.:7
      5*                                                                                                                                  5*                    1   5
                                                                                                                          16   5
        8                                                                                                                                  5*                    1   5
                                                XR68C681CJ                                                                1= 8
                                                                                                                                             ,                       ,
      5*      1                                                                                                          11 5           ,1    1               <    ,
          ,   =                                                                                                          1 ,           ,6    =               @    ,=
          ,1   6                                                                                                          1 ,           ,@    6               /    ,/
          ,6   /                                                                                                          1 ,=                /               6    
          ,@   @                                                                                                           ,/             1   @               =    
                                                                                                                                               6   <               1    =
                                                                                                                                               @                      /
                       <   1     6    @              8 1              / 6   = /      @    <
                                                        08            #8B =
                                                                                                                                             08                       #8
                                                  44 Pin PLCC                                                                                       40 Pin PDIP, CDIP
                                                                                                                                                         (0.600â€)
PIN DESCRIPTION
 Pin Number          Pin Number                            Symbol                           Type                 Description
(44 pin PLCC)        (40 pin DIP)
                                                                 8                                             No Connect.
                                                                                              #               LSB of Address Input.  (% ( "  - ( $$ %% ( %"   =
                                                                                                                  % $  %  ' ' (  -(% % ( (    $ (' $( -
                                                                                                                  $  $ (  ( % (  , 
      1                                                         #,1                             #               Input Port 3. 0   % (         !   ''3 (  +
                                                            5                                                       %(  5 
      =                       1                                                                 #               Address Input.
      6                       =                                  #,                             #               Input Port 1. 0     % (   (% (  '  ' +(- $ 
                                                            *                                                     '(        *   $ #  *
      /                       6                                      1                           #               Address Input.
      @                       /                                      =                           #               MSB of Address Input.  (% ( "  - (     $$ %% # %"  
                                                                                                                  1  % $  %  ' ' (  -(% % ( (      $ (' 
   
                                                                                                                        1


 XR68C681
PIN DESCRIPTION (CONTâ€™D)
  Pin Number   Pin Number    Symbol   Type   Description
 (44 pin PLCC) (40 pin DIP)
        <            @         #,      #    Input Port 0. 0        % (   (% (  ' % 
                                        ' +(- $           '(  '           $ # 
                                              
                    <         .A      #    Read/Write Input. #+  (% (  (% (-  (  (% "           
                                             , (%  +( -  2  '&' (    #+  (% ( 
                                             (% "  (  (% "          , (%  +( -  A#2
                                             '&' (   
                           7          Data Transfer Acknowledge.    " '( 4 
                                               %% %  7 ( $   ( +  ,   
                                              %  2   A#2  ( (% & '   
                                             /< +(& + , %  C( %  (% %(-  + (%  ( 
                                             $ (' %" ( $   C('3&  $  & '   2  
                                             A#2 '&' 
                                             #+    %% %  7 $( -  2   ( " ( ( $(
                                             ' %   ,      C % $ $ (%   $ %
                                             #+  7 (% %%  $ $( -  #   '3  $- '&' "
                                                (% ( +( -  ,    '  % +  #;
                                             #   ; '  -(%   (   $ %
                                             #+    %% %   7 $( -  A#2 '&' " ( (%
                                             ( +( -  ,    $"   $ %" % 
                                             ' $ (   $ % ++  +    $ (' 
                          5*      #    Receiver Serial Data Input- Channel B.   % %(- (+(' 
                                             ( +  ' '  (%  ' ( $ +(% #+  !    ' ( 
                                             ''3 (% % '(+( $"   ' ( $ $ (% % $   (%( -
                                               $- +  (% ''3
                             8            No Connect.
       1                   5*          Transmitter Serial Data Output - Channel B.   % %(- (+
                                             ('  ( +  '         (%  %( $ +(%  (%  (% $ (
                                              3( -  (-  %               %(  (% ($ " $(% $"
                                               ( - (  ' :,* 7 $  #+  !   ''3
                                             (% % '(+( $"   %( $ $ (% % (+ $  +  
                                              %(   (+  -(%    +( - $- +  (% ''3
       =                    ,          Output 1.      -     %   (%  ' % 
                             *          ' +(- $ %      '(  '         *  C % $ 
                                             *
       6           1         ,1          Output 3.      -     %   (%  ( ' %
                             5*           ' +(- $    '               *  %(  5 '3 
                                             5*"  '           *  ' (  5 '3  5*"  %
                             5*           '( "  $(   .(   $& 
                            .DE          .DE
       /           =         ,6          Output 5. -         %   (%  ( ' %
                            5E.           ' +(- $     $( " '(  '                *
                                             5E.         :: " '( 
                                ::D*
   
                                           =


                                                                                 XR68C681
PIN DESCRIPTION (CONTâ€™D)
  Pin Number   Pin Number      Symbol   Type   Description
 (44 pin PLCC) (40 pin DIP)
       @           6           ,@          Output 7.     -      %   (%  ( ' %
                             5ED           ' +(- $     $( '(  '               
                                               5E 
       <           /                 #.   Three State Data Bus.
                  @           1      #.   Three State Data Bus.
                  <           6      #.   Three State Data Bus.
                             @      #.   MSB of Eight Bit Three State Data Bus.   %+ %  
                                                      ,  $   3 '    $ % ' 
                                               %(%% + ( %   @  % (%   % $           
                                               (  (% (- " !'  $( -  # 7 '&' 
                            08            Ground.  +       '
       1                        8            No Connect.
       =                     #8          Interrupt Request. '( :"  (  #8 (% %%  $
                                                 '' ' +    +  ' (F% %3
                                               (  ( - ' $(( %  (% %(-  (  ( %%  $
                                                -   (   % (' (  $ (           - $
                                                '  ' $(( % '%( -  (    C % % 
                                                 ((  $
       6                      /      #.   Three State Data Bus.
       /           1           =      #.   Three State Data Bus.
       @           =                 #.   Three State Data Bus.
       <           6                 #.   LSB of the Eight Bit Three State Data Bus.         %+ %
                                                       ,  $ )  3 '    (% % 
                                               % (%   % $          (  (% (- " !'  $( - 
                                               # 7 '&' 
                  /           ,/          Output 6.     -      %   (%  ( ' %
                             5ED           ' +(- $    '( "  $( '             
                                               5E  5ED 
       1           @           ,=          Output 4.     -      %   (%  ( ' %
                              5E.           ' +(- $     $( '              5E.        ::
                                                '( 
                                  ::D 
       1           <           ,          Output 2.     -      %   (%  ( ' %
                             5 D5          ' +(- $   (  5  /5 ''3  +  '  
                                                     %( 
                            5 D/5
       1                      ,          Output 0.     -      %   (%  ( ' %
                                           ' +(- $    '(                C % $
                                                 
    
                                             6


 XR68C681
PIN DESCRIPTION (CONTâ€™D)
  Pin Number   Pin Number    Symbol  Type     Description
 (44 pin PLCC) (40 pin DIP)
       11           1        5            Transmitter Serial Data Output.                  % %(- (+
                                              ('  ( (%  %( $ +(%  (%  (% $ (  3( -
                                               (-  %           %(  (% ($ " $(% $"   ( -
                                              (  ' :,* 7 $  #+ !   ''3 (% % '(+( $"
                                                %( $ $ (% % (+ $  +    %(   (+
                                               -(%    +( - $- +  ''3
       1=                      8             No Connect.
       16           1        5       #     Receiver Serial Data Input.                % %(- (+(' 
                                              ( (%  ' ( $ +(% #+  !    ' (  ''3 (% % '(+( $"
                                                ' ( $ $ (% % $   (%( - $- +  ''3
       1/           1       5.:7  #     Crystal Output or External Clock Input.  (% ( (%  ' 
                                                 '( +  %($ +  '&%  $  ''(  - $
                                                      (    %'( (% % $ #+  %'( (%  % $"
                                               !   ''3 %(-  %  %( $   (% ( 
                                              # $  +  5/</< $ ('  + '(  &"  % 
                                              % %&  %(-  ( + C '( %              9G  $
                                              = 9G  (%  C(   '    & (   '&% %'(
                                                &      !   :'( ''3 %(- 
       1@           11         5       #     Crystal Input.          '( +  %($ +  '&% %(
                                              + 5.:7 #+  %'( (% % $"  ''( % % 
                                              '      ' $ +  (% (  - $  (% ( %   +  (+
                                               !   ''3 (% %( $  5.:7
       1<           1=       22      #     Master Reset.           (% ( ' % (     -(% %  "
                                              *" #" #" ," ," ( (((G %  #;   /" %%
                                                 .( " ' %    ( %" ,  ,@ (
                                               -(' H (- I % "  $ ' %  % ( '           % ( 
                                              ( '( % (  5  $ 5*  3( -  (- 
       1           16                #     Chip Select. '(   $ % (%   % $ 
                                               (% (-   %+ %             ,  $    ( 
                                               @         $        (% 
       =           1/         #,      #     Input 2. 0        % (   (% (  ' %  ' +(-
                            .D25           $   . !   ''3 ( "   '             *  ' ( 
                                              '3 #  5*
                             5*
       =           1@        # 7      #     Interrupt Acknowledge. '( :  (% (  (%  , F%
                                               % %   (    C % (%% $ &    $ (' 
                                              A         , %% %  (% ( " ( ( $(' %     F%
                                              (    C % (%    % (' $"  $     & !
                                              % '&' (   (   '3  $- '&'    
                                              (  % $   , F% (   '3  $- & '( - 
                                              '  % +  #   ; '  -(%  #;   $ %
                                                @
   
                                            /


                                                                          XR68C681
PIN DESCRIPTION (CONTâ€™D)
  Pin Number   Pin Number   Symbol Type   Description
 (44 pin PLCC) (40 pin DIP)
       =           1<        #,6    #    Input 5. 0   % (   (% (  ' %  ' +(-
                            5*         $ %  '      *  %(  !   ''3 (  5*
       =1           1        #,=    #    Input 4. 0   % (   (% (  ' %  ' +(-
                            5          $ %  '       ' (  2!   '3 #  5 
       ==           =        ;
    
                                        @


   XR68C681
DC ELECTRICAL CHARACTERISTICS 1, 2, 3
Test Conditions: TA = 0 - 70C, VCC = 5V +5% unless otherwise specified.
    Symbol      Parameter                                  Min        Typ        Max       Unit    Conditions
        ;#:     #  : ;-                            6                  <        ;
        ;#9     #  9(- ;-                                              ;        ;
        ;#9     #  9(- ;- ((&                                              ;       J 66  6
     ;#95      #  9(- ;- 5.:7                   =                  ;        ;
       ;:       : ;-                                                =        ;      #: J = 
       ;9       9(- ;-                           =                             ;      #9 J =
         ##:    #  : 3-                           6                   6              ;#8 J   ;
     ##:2:       ' ,( : 3-                       1                  ?1              ;#8 J   ;
       #5:     5 #  :                                                              ;#8 J 
       #5:     5 #  :                                      @                  
       #5#9     5 #  9(-                                                               ;#8 J ;
       #59     5 #  9(-                                                               ;#8 J ;
         #::     % ( : 3-                                                ; J   ;
        #          (  : 3-                                               ; J   ;
      #       ,  &       =                               /         6                '( $
      #      ,  &       =                               1                        $& $
Notes
1. Parameters are valid over the specified temperature and operating supply ranges. Typical values are 25C, V
                                                                                                               CC = 5V and typical
   processing parameters.
2. All voltages are referenced to ground (GND). For testing, input signal levels are 0.4V and 2.4V with a transition time of 20ns
   maximum. All time measurements are referenced at input voltages of 0.8V and 2.0V as appropriate. See Figure 31.
3. For prime grade N, P, J, L, M, ML, V
                                          CC = 5V + 10%
4. Measured operating with a 3.6864MHz crystal and with all outputs open.
     
                                                              <


                                                                                    XR68C681
AC ELECTRICAL CHARACTERISTICS 1, 2, 3
Test Conditions: TA = 0 - 70C, VCC = 5.0V +5% unless otherwise specified.
   Symbol     Parameter                                  Min    Typ        Max Unit Conditions
 Rest Timing (See Figure 32)
     2     22 ,% A($                                                %
 Read, Write and Interrupt Cycle Timing (Figure 33, Figure 34, Figure 35 )
               =   (   :                                       %
         9      = 9$ ( +  9(-                                       %
     A     .A   (   :                                           %
     A9     .A   ( +  9(-                                         %
     A      9(- ,% A($       =" 6                                      %
            # 7 9(- +  7 :                                    %
            ;($ +   # 7 :/                              @6   %
             *% ( - +   # 7                              %
              9(-
              (   :                                          %
       9     9$ ( +  :                  6                     %
         :   7 : +  $  ;($                                    %
         9   7 9(- +   # 7 9(-                                   %
            7 9(- # $ ' +                                  6   %
              # 7 9(-
            # 7 %   (  H9(- I@            <                     %
 Port Timing (Figure 36)
       ,    , #    (   :                                  %
              .A 9(-
       ,9    , #  9$ ( +  9(-                                   %
       ,    ,  ;($ + .A"  9(-                           =   %
 Interrupt Output Timing (Figure 37)
        #   #8  ,1,@            % $ % #                     1   %
              % 9(- +4                                              1   %
                + #  % % *(% ( # 
              #,
                + #   %3 ( #
 Clock Timing (Figure 38)
      :7    5.:7 2!   9(-  : (                                %
      :7    5.:7 &%  2!    C        '&     1/<=     @1@ 9G
            .(  2!   '3 9(-                              %
              : ( #,
            .(  2!   '3                              @1@ 9G
                 C '&
    
                                                            


   XR68C681
AC ELECTRICAL CHARACTERISTICS 1, 2, 3 (CONTâ€™D)
Test Conditions: TA = 0 - 70C, VCC = 5.0V +5% unless otherwise specified.
    Symbol       Parameter                                          Min      Typ         Max        Unit    Conditions
 Clock Timing (Figure 38)
       5      5  $ 5 2!   9(-                                                       %
                 : ( <
       +5      5  $ 5 2!    C '&
                 /5                                                                    /       9G
                 5                                                                             9G
 Transmitter Timing (Figure 39)
       5      5   &  5 2!                                         16           %
                 :
             5   &  5 #                                          6           %
                  :
 Receiver Timing (Figure 40)
       5      5    (  5                          =                                %
                 2!   9(-
       59      5  9$ ( + 5                                                         %
                 2!   9(-
Notes
1. Parameters are valid over the specified temperature and operating supply ranges. Typical values are 25C, V
                                                                                                                       CC = 5V and typical
   processing parameters.
2. All voltages are referenced to ground (GND). For testing, input signal levels are 0.4V and 2.4V with a transition time of 20ns
   maximum. All time measurements are referenced at input voltages of 0.8V and 2.0V as appropriate. See Figure 31.
3. AC test conditions for outputs: CL = 50pF, RL = 2.7kâ€¢ to V .
                                                                       CC
4. Consecutive write operations to the same register require at least three edges of the X1 clock between writes.
5. This specification imposes a 6 MHz maximum 68000 clock frequency if a read or write cycle follows immediately after the previous
   read or write cycle. A higher 68000 clock can be used if this is not the case.
6. This specification imposes a lower bound on CS and IACK low, guaranteeing that they will be low for at least one CLK period.
7. This parameter is specified only to insure DTACK is asserted with respect to the rising edge of X1/CLK as shown in the timing dia-
   gram, not to guarantee operation of the part. If the specified setup time is violated, DTACK may be asserted as shown or may be
   asserted one clock cycle later.
8. The minimum high time must be at least 1.5 times the X1/CLK period and the minimum low time must be at least equal to the X1/CLK
   period if either channelâ€™s Receiver is operating in external 1X clock mode.
                                              Specifications are subject to change without notice
ABSOLUTE MAXIMUM RATINGS1
 & ;-                          @;
-                 /6  6
   ;- % (  % '  0 $    6;  ?@;
1. Stresses above those listed under the Absolute Maximum Ratings may cause permanent damage to the device.             This is a stress rat-
   ing only, and functional operation of the device at these or any other conditions above those indicated in the â€œElectrical Characteris-
   ticsâ€ section of this specification is not implied. Exposure to absolute maximum rating conditions for extended periods may affect
   device reliability.
2. This product includes circuitry specifically designed for the protection of its internal devices from damaging effects of excessive stat-
   ic charge. Nonetheless, it is suggested that conventional precautions be taken to avoid applying any voltage larger than the rated
   maximum.
     
                                                                      


                                                                                              XR68C681
SYSTEM DESCRIPTION                                              A. DATA BUS BUFFER
                                                                     $ % ++  ($ %  (  +'           
 5/</< ' %(%% +  ( $  $ " +$ !               (    ( (  ' (  $ !   $ % % # (%
' ('( '           %K ' ' %(%( - +  (           '   $ &       ( '  '3   $
 %(   $  ' (  2' '               +            %+ %  3 '               % ,  $ 
&  ( $  $ & - $ +  ( - $                       
 $ $ +    (% $ %(- $  (  +' (
     /< (& + ('' %%% ( ( (                B. OPERATION CONTROL BLOCK
  !   '       %         ( - % $ + '           '  -(' +   ( '  '3  ' ( %
 ' (   $  %(  &  %  ' $ +  + 1             ( - ' $% +  ,  $ -             %  
(   & -      $ +(! $ (  %" +  ''3 $ ( $    %(- %        (% % '( % +        
+  (      .( "  +              !  &   ( '  '3 + '( % %  %  (  +' 
%( $ !  /! ''3           (  -             % +  $ ('   '(+('&" ( (%  % %( +
%' +        1 $(++   +(! $ (  % '              -(%  $$ %% $ '$( -"  $ ' $
$( '& +  '&% '     ' $ '%%  ( %  +     $ '$( -   +  ' $%  %  $  %"
 !   ''3  ((&  ( $  $ & -               (&"   ' ('( '   %" % 
     ( - % $ +          ' (   $  %(  +     %    .(    $( -  H%%  -(% I 
  ' '        3 %    '( + %( % $            ( $ ' ('(  + '  ' %% $
'       ('( % %' % '%  $  (  %&% %       (   ( '  '3
 ' (  $ (% C$ $++  $  $   %(                  (     '  '3 ( '   
$ (% $++  $ (  ' ( # % ( $                  + ' % $   +( - (  %(- %4
( ((G        (%3 +  ' (     $   $'                 $$ %%  -(%    ' (%4   =
  $ ( (   $(         ('( %               .A # 
% ($ %  + '  '((&  ( ((                 # 
 %(%%( +    $ ('                ++  +       22
 ' (( -   (% +"  %   ( - %% + $
                                                                       ( '$ %    %+  '3  $-
       % ($ %  -               % / (      7   (' (% %%  $ $( - $  %+ 
  .(   ('          & %              % $ %     '&' % ( $   ( +        ,          C % $
- (  -          %"  (% / (     (     %        '  $       %%  $  7
(    $  (% < (  %               %(-  ( $(' %"   , "    (  $ % 
                                                                ' $" &          $ % ++ " $( -  (
                                                                '&' K     C % $ $ +    (%  
                                                                $ %  $ (% ($ $( -   $ '&' "    
PRINCIPLES OF OPERATION
                                                                (    ' (%        $ % $( -  (  
                                                                '3  $- '&' 
Figure 1  % %    '3 $(- +  /</<            A       %( -  /< +(& ' %%"  5<</<
  % (% $ (  '3 $(-"                        $ % ++  % $  % $ ( (  +  (%
' %(%% +  +( - L + '(  '3%4                $ ('   ( +(    (  +'  /< (&
                                                                ,' %%         5<</< $ (' "  % %         
  *% *++                                                5<</< $ %         
 #    
                                                                B.1 DUART REGISTER ADDRESSING
 #  ,
  (  ('( %              %     $*                $$ %%( - +  (     -(% % +    (%
                                                                 %  $ ( Table 1 , %              % + 
  (  
                                                                 -(% %  H $  &I  $  %  HA(  &I
 (( -                                                        2' '          (% ($ $ (     +( - $ $(' $
  ,                                                   $$ %%   -(% %
     
                                                             


  XR68C681
   $  -(%                                     ( &"     ' ( % $$((   -(% %  
  $  -(% %   $                         % + '( %     % ( $ ' ('( "
  %  -(%                                     %' %    %  $  '  %.( %
  '3   '  -(% 
   ' (  9$( -  -(%  9  $  %(
   9$( -  -(%  9                               ,    -(%  ,
  $$(( &"    ' ( %  +( -  -(% %
  %.'   '       (%              #  ,  +(-(  -(%  #,
  #   %  -(%  #                       .(    *&  -(%   
  #   %3  -(%  #
  %3 $ #   %  -(%  #               .(  :  *&  -(%  :
  #   ; '  -(%  #;
    !((&    -(%                       ,  -(%  ,
    
                                                   


                                                                                                  XR68C681
                                Read Mode Registers                                      Write Mode Registers
   Address           Register Name                 Symbol                     Register Name                 Symbol
    (HEX)
             $  -(% " '                  "                     $  -(% "               " 
                                                                                 '     
              %  -(% " '                                    '3   '  -(% "             
                                                                                 '      
              %3 $ #   %              #                   $  -(% "                  
                          -(%                                                 '      
      1          ! 9$( -  -(% "               9                   ! 9$( -  -(% "              9
                       '                                                       '      
      =           #  ,   -                  #,                 !((&    -(%             
                          -(% 
      6        #   %  -(%              #                #   %3  -(%               #
      /            .(                                          .(                    
                      *&  -(%                                              *&  -(% 
      @            .(  :                  :                   .(  :                  :
                      *&  -(%                                              *&  -(% 
      <       $  -(% " '        *        *" *            $  -(% " '         *       *" *
              %  -(% " '                  *                 '3   '  -(% "             *
                            *                                                    '      *
                      22;2                                             $  -(% "                  *
                                                                                 '      *
      *          ! 9$( -  -(% "               9*                  ! 9$( -  -(% "              9*
                        '      *                                               '      *
              #   ; '  -(%              #;               #   ; '  -(%              #;
                      #  ,                     #,               ,  +(-(              ,
                                                                           -(%  ,  ,@
      2             .(                                       , *(%             ,*
                         $                                                   $
                     .(                                     , *(%            ,*
                         $                                                   $
                                   Table 1. DUART Port And Register Addressing
Note:
  The shaded blocks are not Read/Write registers but rather, â€œAddress-Triggeredâ€ Commands.
   
                                                          1


  XR68C681
Table 1 ( $(' %   ' '             (% C( $ (      (%% $ & (( -  ( $   (
H$  -(% %I %%'( $ ( ' +  % H$                    '       F% ' $  -(%    + "  $
 -(% I (% (%  H$  -(% I (     (          -(% %" ( (  -( '           "   % -('
   ' (.%&%      22 '  (   (%              $$ %%  +  %  $ + '( % +     
H( ( - I  '           -(%  , %             '  $ &         $  -(% %  $(%'%% $ (
 %++(! H I (% % $           $ +  & +  %  -(%       $ ( ( Section G.3
%&% ( $    + " -       ('&"  (  '     %
 * 9  "  '  % +   (   ( % (+             B.2 COMMAND DECODING
+  $$ %% +    -(%     +                  2' '          (% C( $ (  ' $  -(%  #
 -(% " ( $( & +( -  &  $  ( '' %%        -    "       +  % ' $  -(% %  
   -(%    (   ( ' (   H(                   .$(%            %( "       .$(%     
I    -(%   (  $  %  ''%                  ' ( "  - ( +'((( -  % ( % +  
 (  H22  ,#82I ' $ %                           (%'  % ' $%                  ( + + '
( 3 $  H22  ,#82I ' $ '                        ' $  -(%  (%  %  $  
      Bit 7           Bit 6            Bit 5          Bit 4         Bit 3            Bit 2           Bit 1             Bit 0
                  Miscellaneous Commands                        Enable/Disable Transmitter        Enable/Disable Receiver
                             ( -  !                            J 8   -                      J 8   -
                                                                        J 2  !                     J 2  !
                                                                        J (% !                    J (% !
                                                                        J 8 ;($                     J 8 ($
                                                                           %                        $  % 
                                           Table 2. Command Register - CRA, CRB
 + '( +    ( +  ' $  -(% % (% +(& %(- +$  (% ( (% % $  (                      
$(%   %(   $.  ' ( 
      ( +         ' $  -(%  (% % $  ( 3  % ( % + (%'         % ' $% Table 3
$ +( %  ' $% %%'( $ (    ( +  ' $  -(% % , %       (
' $% /  - */ ++ '%  &   + ' + ' $  -(% F% '                        9  " ' $% /
 - / ++ '% %&%   ' (     ( 
    
                                                             =


                                                                                                   XR68C681
  Bit 7     Bit 6  Bit 5  Bit 4 Description
                            Null Command:
                            Reset MRn Pointer: % %            '      F%  (    (    
                            Reset Receiver:  % %  ( $(($ '                  ' (  % (+  $  %  %
                                      ( $   ' (  (% $(% $  $               #  (% +% $
                            Reset Transmitte4  % %  ( $(($ '                   %(  % (+  $  % 
                                  $      ( $  5  (% +' $   (-   
                            Reset Error Status:  %   ' ( $ * 3 *" ,(& 2 ,2" ( -
                                2  2  $   2 2 %% (%" M@41N
                                 '(+('&" (+    $ " +  (' '               (% %   H*'3I  $ "
                                 (% ' $ (  %    +   ' (   ( $('% (  %%  -(% 
                                #  '3  $ "  ' (   ,2" 2" 2  * ''%"  (%  ( ' 
                                (    +-- $ (  '             %%  -(% "  (  (% ' $ (% (%% $
                                #+  2 $ " +  (' '          (% %   H ' I 2 $ "               
                                '  % +  %  -(%  + ,2" 2  $ *   + ' $   ' '  &
                                ' '  %(' #  H ' I 2 $ "  % +  % ( $('% (%
                                % $  &   ' '    (%    +  9
                                 2 ( $(' (% &% +-- $ %  H*'3I 2 $ ( $('"  $  C( %
                                 (% ' $    % 
                            Reset Break Change Interrupt:  %             '          F%  3 '  - (   %%
                                (
                            Start Break: '     %  5     %(  %                          $  %
                                  3 #+      %(  (% &"  % +   3 &  $ & $   
                                ( ( % #+    %(  (% '( "   3  -( %                      %(%%( +
                                 % ' ' % (     9 (% '  $" (G" 52, %    + 
                                 3 (  -( 
                            Stop Break:  5 (           ( - (- ( (  ( ( % 5 (  (                     (-
                                +  ( (  +           ! ' ' " (+  &" (%  %( $
                            Set Rx BRG Select Extend Bit:  %             '         F% H ' (  *0   ' 2!            $
                                *(I  HI  - !J
                            Clear Rx BRG Select Extend Bit:  %             '            F% H ' (  *0   '
                                2! $ *(I  - !J
                            Set Tx BRG Select Extend Bit:  %             '        F% H %(  *0   ' 2!
                                 $ *(I  HI
                            Clear Tx BRG Select Extend Bit:  %                   '          F% H %(  *0  
                                 ' 2! $ *(I  HI
                            Set Standby Mode (Channel A): A                (% ' $ (% ( 3 $ (  '                     
                                ' $  -(% "   (%   $ + ' +   %( %"  ' ( %"
                                  .(   $ $$((  '('(%  '    (  % $&   
                                  $  , %     (% ' $ ++ '%   ( +                             (
                                ' ( 8  ( (%  % $ &  $  %   & ( 3( -  H2 
                                #;2 2I ' $
                            Set Active Mode (Channel A): A              (% ' $ (% ( 3 $ (  '                   
                                ' $  -(% "    (%   $ +  % $& $  $  % %
                                    ( 
                            Reserved
                            Reserved
Table 3. Miscellaneous Commands, Upper Nibble of all Command Registers, Unless Otherwise Specified.
    
                                                   6


   XR68C681
# $$((   ' $%  ('  (  -                    % +    ( %  '  % + 
     ' $  -(% %"                  % ++ %         ( $(($ (% ( (  , 9 ' " (+ ,MN (% %  
H $$ %%(--  $I ' $%  % ' $%                      HI"  % +  ' % $( -   ( " ," (%
(% $ ( Table 1"   , 8 20#2                              %    -(' HI  % C &"  '  ( 3 + 
  2#80IK  $  +  ($ (+( $ &  ( -                    H2  ,  , *#I ' $ %  H:2 
H% $ $I (   '(+('&"  % ' $%  4                       ,  , ,#8I ' $    $ ( $
                                                                  $(%'%%( (    ( +   %"  %
    82.#2  8                                     % Section F
 ,  82.#2  8
 2  ,  , *#  8                                    C. INTERRUPT CONTROL BLOCK
 :2   ,  , *#  8                                   (   '  '3 %  %   & 
                                                                    (  H#   ( I                  (   
2' +  % ' $%  ( 3 $ & (   $( -                    ( '$ %  #    C %  %(- 
(( - $   ( ' % $( -   $$ %% % %              #8 (% ($ $  (' &  - $  
% '(+( $ ( Table 1                                              %%  $            '' ' +  & +          +( -
   ! "     82.#2  8                           %4
(% ( 3 $ &  ' $ +  $( -   $$ %%
2/ , %              (% H $  ( I (           %( 9$  -(%           *  $&
 % ( '( -  '  % +     -(%                      ' ( 9$  -(%            *  $&
$ %   &  ( -   (  " (  % % 
                                                                    ' (       #       * 
 (% ' $ K (%               .(  ( ( ((
' ( -   $ ( $ $(%'%%( (    ( +                 2 $ +  ' ( $ * 3 (              %     *
   .( %"  % % Section D.2                             2 $ +   .(     '             $
      ! +  H $$ %%(--  $I ' $%                     - +   (  ( %" #," #," #," #,1
(%     H2  ,  , *# I  $  (%
' $ (% ( 3 $ &  +( -  ( + $                  (   '  '3 ' %(%% +  #   %
  $$ %% 2/ A                        %  ( 3 %  (%     -(%  #"  #   %3  -(%  #" 
' $ " .% (% % ( - ' ( (%  HI ( (               %3 $ #   %  -(%  #  $  #  
,  ,  -(%     (%" ( (  ,             ; '  -(%  #; Table 4 (%%  %  -(% %"  $
  % '(+( $   % "   '  - $                           ( $$ %% '( ( (   
                                                                                               Address Location
     Register         Description                                                         (in DUART Address Space)
        #           #   %  -(%                                                  6/  $  &
        #           #   %3  -(%                                                    6/A(  &
       #           %3 $ #   %  -(%                                           / $  &
        #;           #   ; '  -(%                                                        /
                       Table 4. Listing and Brief Description of Interrupt Control Block Registers
       $ %         +   '    +   %    -(% %     (   ' $(( % #+  & (% ( (  %  -(% % 
$ +( $ % +%4                                                -- $ H (- I"        ' % $( - ' $(( %  (%
                                                                  ''( - # -       "  '  % +  # ( ( $('
C.1 Interrupt Status Registers (ISR)                                ' %%"  %'    % +  (  
                                                                   C % +                     (+ +      #
    '     % +     # ( $(' %     %% +   (  -(%  (%  %  $ % +%
     
                                                               /


                                                                                                       XR68C681
       Bit 7               Bit 6            Bit 5           Bit 4         Bit 3            Bit 2            Bit 1          Bit 0
   Input Port         Delta Break         RXRDY/         TXRDYB        Counter         Delta Break       RXRDY/          TXRDYA
     Change                   B          FFULLB                          Ready               A           FFULLA
       J 8              J 8             J 8          J 8          J 8            J 8            J 8          J 8
     JE %              JE %             JE %           JE %         JE %             JE %           JE %           JE %
                                        Table 5. Interrupt Status Register - (ISR) Bit Format
        ( -        ( $ ' +        % (% (% $ +(   $     ISR[5] RXRDYB/FFULLB - Channel B Receiver
                                                                     Ready or FIFO Full
ISR[7]: Input Port Change of State:
                                                                           + '( +  (% ( (% %  ' $ & -( -
#+  (% ( (%   -(' HI"            H'  - + % I %     *M/N #+ - $ %                     ' (   $&
$  ' $   #,  #,1 ( %              %  $ % ('  (%   ( $(' 5E*" ( ( $(' %     % 
(   &  $( -  #, (+            #M@N J  #M@N (%    ' '  + $ (% (  9*  $ (%  $&    $ &
'  $            , %  $             #, *&  $( -        ,   (% ( (% %                ' '  (%  %+  $
#,"  %  ( $  ( 4                                          +   ' ( $ % (+  -(%   9*  $ (% '  $
         ( $(($ #  , (   '  - $ %                             ,  $% 9* #+    %( 
                                                                     ' ' % ( 9* +    $  ( "  ( ( 
         +(  % +   ( $ (  %" +( -
                                                                     %  -( +  9* (% H $I
           - +  
                                                                     #+  (% ( (% - $ % #   ( $('            ::*"
    $ ( $ $ %'(( +           #,"  % %
                                                                     ( (% %          ' '  (%  %+  $ +   
Section E
                                                                     9*  $   %+  '% % 9*   ' +  (%
, %    ( $     (% (   ' $(( "               ( (% '  $           ,  $% 9*K  $   &
 %  % $   ( -%4                                           H( -I         # " 3( -  +         ! ' '  #+
 A(  ( $     ( +                         ' '  (% (( - (    '% 9* (% +"
        !((&    -(% " M14N #  (% % "             (% ( (  %  -( +    $  ( "             
      %  (% % '(+&( -  (' (  ( % % $ (--              ' '  (% $ $ (  9*
      H#  ,   - I (    C %
 A(  -(' HI  #M@N                                       ISR[4] TXRDYB - Channel B Transmitter Ready
ISR[6] Delta Break Indicator - Channel B:                             (% ("         % " ( $(' %   9* (% &  $ (%
                                                                      $&  ''   ' '  +              ,         ( (%
A         (% ( (% % " ( ( $(' %    '        *  ' (   '  $           , ( %   ' '   9*K
  % $  ' $   -( ( -  $ +   ' ( $  3                    $ (% %  -( "            ' '  (%  %+  $  
 (% ( (% '  $   %                   , ( 3 %         5E (% %                         %(  (% ( ((&
'         * H22 *2 7 9 802 #82 ,I                              $  $ (% '  $            %(  (% $(% $
' $              ( +( (                F%       ' % $ $ (  9*  (                  %(  (%
 % %   *2 7 ' $(( "  % % Section G.2                   $(% $ (    %( $
     
                                                                  @


  XR68C681
ISR[3] Counter Ready
#       #2 $ "         .   .(  ( %       ( 9 +    $  ( "                ( (  %  -(
#M1N  '       ' '&' +         %  %C          +  9 (% H $I
(        ,1 (  #M1N (  '  $ &          #+  (% ( (% - $ %           #  9 + ( $('
( 3( -  H,  82I ' $ *  ( ( $"                       :: " ( (% %         ' '  (%  %+  $ +
  (         #2 $ "           H,  82I              9  $                    &  %+  $ ' ' 
' $ (  %  .                                     '% % 9   ' + # (% '  $                    ,
#        82 $ "  (% ( (% %                   .    $% 9  #+  ' '  (% (( - (    '%
 ' %   (  '   /  $ (% '  $               9 (% +"  (% ( (  %  -( +                      $
 . (% % $ &  H,  82I ' $                    ( "           ' '  (% $ $ (  9 
A          .(  (% (   82 $ "  (%
' $ ( %  '                                      ISR[0]: Channel A Transmitter Ready
                                                                 (% ("         % " ( $(' %   9 (% &  $ (%
ISR[2]: Delta Break Indicator - Channel A                        $&  ''   ' '  +               ,            ( (%
                                                                '  $           , ( %   ' '   9 K
  %% ( +  (% ( ( $(' %    '          ' (       $ (% %  -( "           ' '  (%  %+  $  
  % $  ' $   -( ( -  $ +   ' ( $ * 3                5E (% %                         %(  (% ( ((&
*  (% ( (% '  $       , ( 3 %  '                   $  $ (% '  $            %(  (% $(% $
   H22 *2 7 9 802 #82 ,I ' $                       ' % $ $ (  9  (                      %(  (%
    ( +( (           F%  % %             $(% $ (    %( $
*2 7 ' $(( "  % % Section G.2
                                                                C.2 Interrupt Mask Register (IMR)
ISR[1] RXRDYA/FFULLA - Channel A Receiver
Ready or FIFO Full                                                    (   %3  -(%  (%  HA(  &I  -(% 
                                                                 ('         %  %   %  '  ' $(( %   (
     + '( +  (% ( (% %  ' $ & -( -            '%             (%%  (    C %  
 M/N      #+ - $ %              ' (   $&      ' %% #   $%"                %     %       ( +
( $(' 5E "  (% ( ( $(' %     (%   %     %3( -  '3( - ' ( ' $(( % + '%( - 
 ' '  + $ ( 9 "  $ (%  $&    $ &              (%%  (    C %   + " 
 ,   (% ( (% %             ' '  (%  %+  $    (+ +  # (% %% (&  % %  #
+         9  $ (% '  $               ,        9  " + '           %%"  ( + +  # (%
 $%  H%I 9  #+    %(  ' ' %           %  $ (  +( -  
      Bit 7           Bit 6           Bit 5           Bit 4         Bit 3            Bit 2             Bit 1              Bit 0
   Input Port     Delta Break       RXRDY/         TXRDYB         Counter         Delta Break       RXRDY/              TXRDYA
    Change              B          FFULLB                          Ready               A            FFULLA
      J ++          J ++          J ++          J ++        J ++           J ++            J ++             J ++
     J             J            J              J           J              J               J                J
                                                  Table 6. IMR Bit Format
    
                                                             <


                                                                                                    XR68C681
#+  %  (% %    ' ( (  " .%                         % C &" $( - ( (((G( +   "  % 
% $ (  HI   (" ( (  #" ' % $( -               (   $  #; (  !$ '(  % +
   (   ' $((  :(3 (% "  $(%  %3              %            =/ /=  -         / 66"
  ' ( ' $(( '%( -  (  "                   %    ( '%( &  (% (%   - +   %" (  /<!F%
% $ (  HI   ( '( ' % $( -                  !' (  '  "              %  $ + H % 
' $((     (  %  %  $ (                   #   ; 'I   & '( +  H I
        HI%   (%  -(%                                   (   % (' ( '  + $ & (&( - 
                                                                     '  % +  #; & = 9 ' "  %  % $ 3
, %           # (%  H(  &I  -(% "  $
                                                                     '  3 %    (   % (' ( %%
  + " '    $ &  ' %%
                                                                      M  % + #;N  = ( -  &
C.3 Masked Interrupt Status Register (MISR)                           5/</<" (3  &   /<% ( %  ( 
                                                                     $ (' %  $ %(- $ %'    $ + '  % +
 '  % +  #  -(%  (% %('&                   %%   ( #; +( -  22 ' $((  (%  /
+ 8( -  #  $ # -                                         % C &" (+" $( -  H(   '3  $- I '&'
                                                                     %          ! % '(   ,  $%    / +
#            J M#       %N M#        %N
                                                                       K  $ H ( (((G $ #   ; 'I !' (
 ((( + (   ( %    &   $( -                (  -       $
# (%    (% ( (  # ' -- H (- I $ 
 ( ' % $( - ' $(( %       &                      C.5 Limitations of the DUART Interrupt Structure
     $ &          #   + "             % " +( -    (   %' ++  $ &    % 
 $( -         (   %%  -(% " (   3           %   -             -         (  % (
(%( % +K  $ ! '  H(&(I 8 +  #                  % %  ' ( 9  $ 9  #  ' $(( %K 
 $ # '  % ( '  # (%  HA(  &I  -(%                 H  .(   $&I ' $(( "  $  '  - % ( 
 $ '    $ &  ' %%"  '  % +                        3 ' $((    ' (  9  " %($ +
# (    % $ (% %&%   &" +                         H  * 3  $(( I"           F% (  
 '  $$((  $  $ %+   $                      %' $ %   + (    C %% $ 
 C( $  %  (% '((& '  ((  $ ( % +             ' (   % %' % ,(& 2 ,2"  ' ( 
 #                                                                2 2"  ( - 2  2   
                                                                     % $ %  ++   %   ((&  ' +(-  +
C.4 Interrupt Vector Register, IVR                                     %   &  '' ' +  & +  %
                                                                     ' $(( %         %  (%"   + "  ' $ $ 
         /< +(& + ('' %%% %%                   H($ I       ' ( $ & + C &  $( - 
 ' $(   ' %%( -                '(+('&" $( -    %%  -(% K  $ ' '3( - +  &  G   
(   % ('( -"             (  % $                   (  %  (% (% % '(&  '% (+  %  %
(   '3  $- %(- " +  , " & '( -                  %        $  H ' I  M6N J 
 '  % +  #;   $ %"    $ & 
,  ( -   ( "  '  % +  #; (%                   C.6 Servicing DUART Interrupts
  $   '( (  &"    (                             /< +(& + ('' %%% %%
(   % (' (          +      (  ( -           ' $(   ' %%( -        #  ' $(  
 %($ %                                                             ' %%( -"           (  $ (' "  % %( +
  + " (  ' $ (   ('( %"             '    %   C %( -         (  " ( ($ (+& (% +  
+  #; ''(%   ( -%4                                       ('' %%" $( -           H#   '3  $- I
                                                                     '&'   '  ('' %% 3 %  ('  ( 
 #$ (+&           (    '         %  C %( -        $ (' (%  C %( -  (  "  ('' %% (
     (                                                        $  (  '( +  ( (   % ('
            ,  $  (                '( +K  $     (    (  &"  $  ' - '    
      ' - '                '( " ( -      '( 
      &"   ' ( %                ( (         $ - + %( - H; ' $#  I ' %%( -
     % (' ( +  (  ( -                               H, $#  I ' %%( - (% %(- (+('  (
     
                                                                  


  XR68C681
( '((' ('( % %( -  &  ( % $ (' %      ( (   % (' (   (  C( $ 
# H, $#  I ' %%( -"   $  '( +             ' +  %  (  $ (' % $$%   (  
(    C %"       ('' %% (   -          '&  ($    $     (' $ ''
 -  $  '  $  &  (  $ (' (                  $( -  ' $(   ' %%( -
$   $  (  $ (' '%( -  (    &             Figure 2  % %  %( (%( +   (  +'
+   (% ( - ' $ (% '  $ '                          /< ' %% + (   % ('
('' %%  '          - '                ' %($ ( %
                                                                            #,:
                                                     #  
                                 #8                 ,((&              #,:
                                                     2 '$ 
                                                                            #,:
                                                       '(                 
                                # 7                  $                    
                                                     '$ 
                                                                             
                                @                                         @
                                7                                         7
                   XR68C681                                                          MC68000 Processor
                            Figure 2. Simple Illustration Depicting the Interfacing of the
                                      XR68C681 DUART to a 68000 Processor
    
                                                          


                                                                                               XR68C681
Figure 3  % %   $ ( $ %' (' +                    $  -  $$ %% $ '$    %  
5/</< $ (' (  +'( -   /< ('' %%          9  " (+  +  % $$ %% (%   -(' HI   "
 (% +(- % %  &  (   ' %%( - ( +          H#.  (   '  '$ I ( %           $ #  (%
     ('' %%.  (  +'                $$ %%    +(- "     $  (  %%  $"   &
$ '$( - '('(& + $$ %% % (% <  1 (%           %% ( -   (  +    , %    
( '$ $  (% '('( ' %(%% +  H#   ,((&         $ %   C(   (F%  (   %%  $ (
2 '$ I 8@=:=<"  $  1( <(                    $    % $   H#   '3  $- I '&' 
$ '$ % 8@=:1<  $(%'%%( % %"  +                      &  C( %   (% H# 7I (  
 % 8@=:1< $ (' %    $ H# 7  '$ I                %%  $
 $    (%   $ H#.  (   '  '$ I #  (%
+(- "       %  (   ((&    + =           #  % %   %% ( +  # 7 ( "   
                                                        ( '        '  % +          #; #   ; '
                                                                -(%    $ %   @"   ( '   $
    + '(  $ %'(( +  (% '('( +% #+         &  ,   '    % ' $  '  % +
   C( % % (' +  , " ( ( %%                 #;   $ %" ( ( %%    7  (
'( "  $( "  %(- " #8 A             (%  $   ( +  ,   $ (%  $&    $ +
%(-  -- % HI           (   ((&     '$     $ %  , (                  ! '  (% H $I ( 
8@=:=< ( -                  ( (             ($ (' (  &    $ '&'   '  (%
((&     $  %   (% ((&      ,  #      H $I '&' (% '  $"  , ( -  
                                                                 & -( -  # 7 (  +   K  $ 
 (% '% "  (   ((&    (% = #,: J " #,: J
                                                                 (" (  " -   7    , 
" #,: J  #  % %   ((&    = (  
                                                                '   7  %                    - $"  (  
 C %"  , ( ' '3  (   %3 (% + (%
                                                               '&' (% '  $"  $            ! %    $  $ (
 (    %%  -(%  ( $   $  (           
                                                               '&' % ( (3 &  $ $(' $  % ('( -           
 %  (   ((&    #+         %  (  
                                                               (  
((&    (% =   %%K  , ( '3  $-  $
 -( % (' +  (%    (    C % #+ 
                                                               #+     %  $  & ( (((G $  #;" (  %
 %  (   ((&    (% 6  -  "   F%
                                                                -( -          /= =/  $ 66  /"  , (
(    C % (   % (' $  ( ' ( + 
                                                               (&  (%  & =" ( $   $  (  '( "
  (-  ((& (  %  '             ('' %%
                                                               (  &" +             (   % (' ( 
$ '($ %  % ('  (% (' (    C %" ( (     + $%  (% $$ %% '( (  $ $ (  
$ % & %% ( -  +      '( $ %   J       - '   +  ,   $  , (  '
"  J "  J " ( $   ( $('    (% ! %        - '    (% '(  (%&"  %  %
'&' (   (   '3  $- '&'  $$(( &"             %          ( (   % (' (
          /< , (% (   $" ( (            !(%%   '( ( %&%      & #+  % 
$$ %% (% " "  $ 1"  (   ((&   "         % +( $  ( (((G      #;" (% '  % (  &
 ( $$ %% (% =  1   %    -('               $ +  /  5/</< $ (' " (3  &  
     + "  , ( '3  $-  (%                  /< % ( %  ( %  $ %(- $    $ +
(    C % & % ( -  J "  J " 1 J "  $        +  ( (    '  -(% %    / #+"
   = 1 J   '  +          '( $ %        $( -  (   '&' "  ,  $%  / + 
% "  8 8 - @=: ( %%   +                    #;"  , ( (&  (%  & ="  $ (
( % +  H# 7  '$ I $$(( &"            $$ %%     ' - '               H ( (((G $ #  
    ( %  %%  $ ( $   %         ; 'I !' ( % (' ( " ' $  1/ (
       ! % '&'   ' ( (% %%  $"                &
(  +  # 7 $ '$  ( %  %%  $ A           
  ( %  %%  $"              # 7 $ '$  (    A        , %  & % (' $  (    $ 
%%      $ H# 7="   & %% ( -              ' $(( % '%( -         (    C %% + 
# 7 (  +          #   (           # 7=                      ((  $"  #8  + 
%(-   ( - %%  $"        $$ %% (%" <  1"          (          - $
     
                                                            


XR68C681
                      .A                                                             .A
                     7                                                              7
                   @                                         #)@                 @
                                                          =
                                                                         ;''
                                                          1        #)/
                                                                  #)6
                       #,:                                                  #)=
                                                                                     #8
                       #,:                 @                                # 7=
                                                         1        #)1
                       #,:                 /                                         # 7
                                                                 #)
                                                                                 
                                                                 #)                 
                                             8@=:=<                         
                                                                                      
                                                                                 1
                                                                                      1
                                                                                 =
                                                                                      =
                                @=:
                                                                                      
                                          =   6         @     # 7@                       5/</<
                                                              # 7/      #
                                               # 7
                     @                     '$         # 76                      
                                                                               =   6        @    @
                                                          # 71         6                   /
                                                     1                         #.  (
                                                              # 7         /                  6
                                      1                                               '
                                           1           =                        
                                                               # 7         @      '$       =
                   <  1                             6      8                1               1
                                            8@=:1<                                        1    
                                                                                             =    
             /<
                                   $$ %%               $$ %%                          6
                                  '$( - ('(&    '$( - ('(&                           
                                                                                 8@=:1<
          Figure 3. Detailed Schematics of the XR68C681 Interfacing to the 68000 Processor
  
                                                   


                                                                                                XR68C681
Figure 4  % %  (( - $(- $ ('( -         % C    ' +    %   ( ''       ., (  +' " $( -
 (   % '&' 
          #8
      #,: 
         #,:
       
       1
     =  1
        # 7
        @                                          ;2
       7
                                     Figure 4. XR68C681/68000 CPU Interrupt Cycle Timing
Interrupt Service Routine                                        D. TIMING CONTROL BLOCK
    L '( % +     (   % (' (       4        (( - '  '3 %  %   % '(+&  (
                                                                  %   .% (% %   %(  $  ' ( $ 
 )('3& ($    (+&      ' $((    '%( -     (      ' '              (( - '  '3 ' %(%% + 
     C %                                                     +( -   %4
 )('3& % ('            (   &    (( ( -         %'( ('(
    ' $(( '%( -        #                             *(  0         
# $   ($ (+&        '% +  (  "  ,              / (   .( 
%  $         (   %%  -(%   %3 $           =  2!   #  ,( %  ''3       %( %
#  % %  -(%  +     '  % +                   $  ' ( %" $( '&
 # ($ (+( %         ' $(( % '%( -  (  
 C % Section C.1 $ +( %  ( + +  #  $              '3   '  -(% % 14  5%
$(%'%% %   '  ' +  (% ( (  #
    
                                                            1


  XR68C681
                                                                       #,=        #,1
                                                                     !      ! 
                                 , %   -(% %                                                   14
                                  " :                                                        5         !
       5
       5*
       #,                                                                                          14
                                       .                                                       5         !
                (($ & /          (
                                      ( 
      M=/N
                                                                                                    14
                                                                                                     5         !*
                                     (($ & /
                                                                                                    14
                                                                                                     5         !*
    5.:7
                   %'(             *( 
        5           ('(              0     
                                                                      #,6          #,
                                                                    5*       5*
                                             M@N
                              Figure 5. Block Diagram of DUART Timing Control Block
Figure 5  % %  '3 $(- +            (( - '   %(- " + %         &       (     -     "  $
'3 +  5/</< $ ('                                       .(          '&%  : %(-  + C '& +
2'    +  (( - '  '3 (% $(%'%% $ (                        9G  $ = 9G (%  C( $ +  
 +( - % '(                                              ( +    9  "  '&%  : %(- 
                                                                + C '& + 1/</= 9G (%  C( $ +  -           ( +
D.1 Oscillator Circuit:                                         % $$ (  % &  (  -          Table 3
                                                                Figure 6  % %   ' $ $ %' (' + 
   '&% %'( (% &('& '         ' $ !  &    5 : %'( '('(& #+         %  $ %( %  
'%%     5.:7  $ 5 ( %             %'( '('(    %  % +  %( - '&% %'("
( (     ' ( + '( % %       $ +   %         Figure 7  % %  '  $                       ' %%&
'&% %'("  $ ++ %       %( - %'(( -   '('(&  ''(%  (% L '( 
    
                                                             =


                                                                                                               XR68C681
                                            4  ? & O 6 
                                            4  ? & O 6 
                                            4 â€¢
                                            4 â€¢                        
                                                                                      5
                                 
                                                                                             XR68C681
                                 
                                                                            
                                                                                      5
                                                   1/</=9G
                                             ,   %   &%
                          Figure 6. A Recommended Schematic for the XTAL Oscillator Circuitry
Note:
   The user also has an option to drive the oscillator circuit with a TTL input signal, in lieu of using a crystal oscillator. If this approach is
   used, the TTL must be driven into the X1/CLK pin, and the X2 pin must be left floating.
#+  %  $ %( %    %  % +  %( - '&% %'(" Figure 7  %                                %  '  $ 
    ' %%& '('(&  ''(%  (% L '( 
                                                             XR68C681
                                                     5                        5
                                                               1/<=9G
                                                                                                    @=9=
                                                                  E
                                                                                                                             5 ( % +
                                                                                                                               %
      Figure 7. A Recommended Schematic to Drive Multiple DUARTs From the Same Crystal Oscillator
     
                                                                    6


  XR68C681
D.2 Bit Rate Generator
 *0 *(  0            '' %  (( -          %  ' %  '  +  $(++   % % + (  %" 
+  %'( '('(  $ -       ''3 %(-  + 1       -        $ +  *0  (% %  '( (% $ &
' & % $ $ ' ('( (  %  -( -                % ( -  ' ( - M@N    (%( - +  % % % + (
+ 6 %   6 7% , %     *0                 %" +  *0" (%  %  $ (  $(%'%%( + 
(  & -      % % $$ (  % (+  %'(        '3   '  -(% % % ( Section D.5      '3
'('( (%  ( -  1/</= 9G $$(( &"  '           $(- +  *0 '('(& (%  %  $ ( Figure 8
''3 + C '( %  +  *0   / ( %
 %  %
                                                                                         M@4=N
                                                                                        14  5        !
                                                                                         M14N
                                                         M@N
                                                                                        14  5        !
            5.:7            %'(         *(  0     
               5              ('(           '     %  $ *
                                                                                        *M@4=N
                                                                                        14  5        !*
                                                                                        *M14N
                                                                                        14  5        !*
                                 Figure 8. Block Diagram of the Bit Rate Generator
                                         Portion of the Timing Control Block
    
                                                          /


                                                                                                     XR68C681
D.3 Counter/Timer
      (( - '  '3 % ' ( %  / (                    -(%  (% /  - = , % % Table 7 + 
  .(  .  . (%  - / (                    ( % (              .(  $ "  $ 
$ '    (' ' %                    + %   (( -        (( - %' '  % + (% M/4=N  . 
%' % % (% (  Figure 9  % %  '3 $(- +            (% (        ''3 %  '  -(% % + % % 
 '('(& % $( -  .  %  '( +  %                     - (  -          +   %( %  $
(( - %' % +        .(  '  $ &                    ' ( %
(( -  ( $  M/4=N  !((&  
                         %'(
                          ('(
                                                               , %   -(% %
                                                                 " :
                                        (($ & /
                                                                                                     $ *
                                                                                                  14  5%
                         #,
                                                                   .( 
                                       (($ & /
                        5
                                                                                               .DE
                                                                                                 ,1
                        5*
                                                                     M=/N
                                         Figure 9. A Block Diagram of the Circuitry
                                              Associated with the Counter/Timer
  Bit 6     Bit 5  Bit 4        C/T Mode                                 Timing Source
                                        2!   #   #,
                                        5 5  '3 + '             %( 
                                        5* 5  '3 + '         *  %( 
                                        5.:7 #  (($ $ & /
                                (         2!   #   #,
                                (         2!   #   #," (($ $ & /
                                (         5.:7 # 
                                (         5.:7 #  (($ $ & /
                                       Table 7. ACR[6:4] Bit Field Definition - C/T
    
                                                              @


   XR68C681
D.3.1 Timer Mode:
, %    +   . $ %"  (  $ (%                      ! + '&' +  %C    .  -( %
  & $  (' (%       + '( + (               ( %( -   % (  .:   ' ( +
%  '(  9  " + '           %%"  '   $       $$ %%(--  H   82I ' $ 
(% % $(%'%% $                                          Table 1
#  (  $ "  . '% %  - $(($               .            % ' ( %&          %% C  H 
 $-        %  %C   %  ($ (% ('                82I ' $ '% %  .   (  
 ( ''3  ($% +                  '  % +         '  (( - '&'  $  -(   (( - '&' %( -
  .(   -(% %"    $ :  . '                    '   % % $ (    $ : 
 % $ %  - (  -              ( $     82 2 E %% (" (                     #   %
$'  /5 ''3 +  & (   ($ $ &               -(%  #M1N" (% %   ' ' '&' +  %C
*0  %C  " (-( ( - +  . (%                 (% %               % +        . %   ($('
   ( " ,1                                         (   -       " (+       ' $(( (% - $ 
#+  . (% - $    (  (  $ "               -       (   (             #   %3  -(% 
+ C '& +           %( - . %C  '               #      #1@ '  '  $ & (%%( - 
  ! %% $ % +%4                                          $$ %%(--  $ H,  82I ' $ 
                                                                Table 1 #  #2 $ "   "  ' $
C/T Output Frequency =
                                                                $ %  '& %  .
                               fsts
                 â€¢ MCTURN â€¢  < +     MCTLRN                 D.3.2 COUNTER MODE
where:
                                                                #  '   $ "  . ' % $                        +
fSTS = The frequency of the selected timing source (See         % % ( (   .:"  -( ( -    ' (
Table 7)                                                        +  H   82I ' $                                 
[CTUR] = the contents of the CTUR register in decimal            82.2 E %% ( #M1N (% %  
form                                                             ' ( -  '  + /  . ( ' (  
                                                                '  %  /  $  $ + (                   ! ' 
[CTLR] = the contents of the CTLR register in decimal
                                                                 ( -         /   ( ( (% %  $ &     ,   (  H,
form
                                                                 82I ' $ #+ ,1 (% - $   
( '  .  (%  $ $ %  /5 ''3 %(-  &             +       ."          (  (     (-  ( 
      '('(&"           %( - (  (% ./        (  '  (%  ' $"   (' (   - %
+ C '& +  .  %(-    + "  (  "           #        %          (- %  $ #M1N (% '  $
$ ( $ +  . '  ! %% $ % +%4                               . (% % $ (            H,  82I
Bit Rate =                                                      ' $          H   82I ' $  ( 
                                                                '   (%  ( -  %%  '   (   % (
                           fsts                                  .:                , & '  -              '  % +
            1 â€¢ MCTURN â€¢  < +      MCTLRN                      :   & (                    '  3 % ++ '
                                                                 & +   %% C     82 ' $
 '  % +     $ :  -(% % &                     #+   %   - $   (%  %
'  - $   & ( "  (  &  -(  3 ++ '            %  $  $ % $ +                ! '&' 
     
                                                             <


                                                                                                   XR68C681
D.4 External Inputs                                                D.5 Clock Select Registers, CSRA and CSRB
                                                                   # Figure 5"  '3   '  -(% % %  
   % + % +  #  , ( % #,                   14  5F%  ''3 %  '  -(% %     %  
#,6   % $ % $( ' !   ( %              (( -         %  ' %  '  (' ''3 %(- % ( $( 
'  '3 % (( - %' % +   %( %  $              %( %  $  ' ( % +  '          %  %
 ' ( % +  '         % , %     %  '              %   %  '  1 $(++   % $$ (  %
% '(+&     ''3 %(- " ( $   +  %                  +      *0"         .(  "   % 
 !   ( %" (%  5   /5 ''3 %(- K (  ''3          !   (  %       (( - %' +   %( %
%  '  -(% % %                  $ ( $           $  ' ( %        Table 8  $ Table 9  %  
$(%'%%(   (   ( %  $  ( + '( "  %              ( % (           '  % +  %  $ 
% Section E                                                       ''3 %' $(( -   %( %  $  ' ( %
     Bit 7            Bit 6            Bit 5           Bit 4           Bit 3           Bit 2           Bit 1           Bit 0
                      ' (  '3   '                                            %(  '3   '
                               Table 9                                                          
                        Table 8. Bit Format of the Clock Select Registers, CSRA and CSRB
             Field                                                           Bit Rate
           CSR[7:4]                        ACR[7] = 0 (Bit Rate Set #1)                    ACR[7] = 1 (Bit Rate Set #2)
           CSR[3:0]                        X=0                    X=1                      X=0                    X=1
                                         6                     @6                       @6                     6
                                                                                                      
                                      1=6                   1=6                    1=6                  1=6
                                                            6                      6                    
                                        1                   1/                      1                   1/
                                        /                   ==7                     /                   ==7
                                                          <<7                                       <<7
                                       6                   6@/7                                       6@/7
                                       =                  67                    =                  67
                                       =<                   =<                     =<                   =<
                                       @                   <                     <                   @
                                       /                   /                     /                   /
                                      1<=7                   7                    7                  1<=7
                                      (                    (                     (                   ( 
                                  2!    /5         2!    /5           2!    /5          2!    /5
                                  2!    5           2!    5           2!    5           2!    5
                     Table 9. Bit Format of the Clock Select Registers CSR[3:0] and CSR[7:4]
    
                                                             


  XR68C681
, %    Table 6 '% +          %   % '(+&          (Note: the b suffix denotes a binary expression. x = donâ€™t care
+( -   %4                                               value).
     M@N   % %(- (+('  ( * +          !(       5        ' 2!     $ (
    (&    -(% 
                                                                    2'  %(   $  ' ( " ( (    % 
 5        2!   $ (
                                                                      ! $ (   '  %   '  $ & (( - 
  M@N (%  * +  !((& '   -(% "  $               ( $            '      F% ' $  -(% 
'      %(&  - $ & (( - !!!!!!!                      -  (% ( +( '  + $ ( Table 1
!!!!!!!             " ( $   %   ' "               Table 10 %(G %  % ' $%"  $  ( ++ '
 % '( &                                                              ! $ (%
                 Register                      Contents        Resulting Action
         $  -(%  "                      </           ! *0   ' 2!     $ *( 5 J 
         $  -(%  "                      /           ! *0   ' 2!     $ *( 5 J 
         $  -(%  *" *                    /           ! *0   ' 2!     $ *( 5 J 
         $  -(%  *" *                   */           ! *0   ' 2!     $ *( 5 J 
                              Table 10. Command Register Control Over the Extend Bit
Note: if the user programs either nibble of the Clock               A  %  H5 '3I  & % %  %(- %  '  
Select Register (CSRn[7:4] or CSRn[3:0]) with values                (  ($   (%"  % $ ' '& ' '$  
ranging from 0 16 to C 16, then the user is using the BRG as        -   '''&   (   %  ' (  $ (
a source for timing. However, these standard bit rates                  % +       /5 ''3 ( (  +         5 ''3 
(presented in Table 9) apply only if the X1/CLK pin is              +( - - % ( '(+&   % %
driven with a 3.6864 MHz signal. If a signal with a different
frequency (fo) is applied to the X1/CLK pin, then the                   ' (  (  +    '                 % (% ''3 $ & 
DUART channel is running at the following baud rate:                ' (( - %' +  (( - '  '3 #+  (%
                                                                     ' (  (% '(  $ (%  ' (( - $ +   
Actual Baud Rate =
                                                                    % (  %( "    %(  (% % ''3 $ & (%
                                                                     ' (( - %'  9 ' "   (%  - 
                MTable  Baud Rate ValueN â€¢ fo
                                                                          ''3 + C '& +          ' (  (% !'& 
                           1/</= MHz
                                                                    % %   +               %(   (% (% 
                                                                    ' ' (%('      +      %& '  %         % (    $
provided that fo is between 2.0 MHz and 4.0 MHz.
                                                                    ' ('(           -           ' (   $  
  $$(( &" % (     '% + % $$ $  %"               %(                 - $   ' (  $
' + C '& +       ''3 %(-  (  / ( %  %           %( $  !'&          % $  " %++('( 
 %                                                             $(++  ' % (  + C '( % +   ''3 %' %
                                                                    '  ' (   $    %(  ' ' ( 
1X vs 16X Clock Signals                                             ( % (   ' (( - ' %%" %  %  $ ( 
                                                                    +( - $(%'%%( 
  % H5 '3I  $ H/5 '3I                  ( $
 -   (%  !   + " ( (% (   $(%'%%          %      % ( $  %(%%( %&% 
 (   ( -  $ %(- (+(' '                   H/5 '3I         % $ (' $ ( Figure 10  (% %&%  ' %(%% +   
 % %   ' ( $ % ( $ &  +' + /               %(  5"  $  '  ' (  5
    
                                                              1


                                                                                           XR68C681
                                  Transmitter                        Receiver
                                      TX                               RX
                                   TX Clock                          RX Clock
                          Figure 10. Example of a Serial Data Transmission System
:  % +  %%     ' (  (% ''3 $ &              (  ($    Figure 11  % %      %% +  (%
%'   (% %(- & +%      +   %( "            
 $     ' (  (%  & %( -  % ( $  '
                        Figure 11. Receiver (1X) Sampling, if the RX clock is slightly faster
                                                   than the TX clock.
Figure 11 % %     %  ( %       (             ' (  $(+ #+   (%  ' '( +  ' (  $(+"
 ' ( F% %( - (   $ ' %         ( $ ( (%     (   & % (               %(%%(  $
'  -( - #  (% '% "         ' (  (%  %( - '        ' ( +  (% % ( $" % $ (' $   (
% ( $ (" (   $ (  (      (  ($" (    Figure 12.
 ' %'' %%( $ (  (%              (% 3  %
    
                                                          1


  XR68C681
                    Received Data        0     1      0         1       0     0       1       0      1
                     Actual Data         0      1       0         1        0       1        0       1
                               Figure 12. Illustration of an Error Due to Receiver Drift.
Figure 12 % %   ' (  %( -  (-  ( %( -             $ (' % ''$ % /5  ' (   %( - +
+ $ ( (    # (% (   %( -                (   + " (  % $ (' %"                
 " (  (% +(- "      ' (  % $  #            ' (  $  '%  '' ' +    (" ( 
% $   $    ' (  $(+ ' %     (+           ' (  (  -(  %( -  (%   ( & 
 '  ' (  (% %        %(                 +' + / 9  " +  %  /5 ''3  ($% %
''3                                                              % $"      ' (  ( %%  (% (  ( ( 
                                                                    (    ($ (  +  (  ($"  $ (
# -       (  " +  (% H ' ' $I %&%        ' %  %( - +               ("  $ + 
(%  + '( +  (( - $(++  ' %             5  $        %% C  $   (% ( "  -           $ + 
5 ' ''3 %(- % 9  " ( $   ' ' +           ' ' "   ' (  ( %  % ( $ % 
 ' (  $(+  $  ( ((G  *2 $( - % ( $              5    $    &"  '   ' (  %
 %(%%( "  &        % (  3  ' " &              ' $   (  (  %    ($(  +   
 ' (   %( - +            ( A            (%    ("   ' (  (" +   ( "  -( %( - 
+  (% & $"   ' ( "  $  '( +                   % ( $  (  ($ (  % % Figure 13 + 
  (" (  -(  %( -  (%   ( &                 ' (  %  ' ( $  , (" ( ( ( 
% (  -  +' &('&" + %  %  $&                '' ' +    (  '    ( %
    %"  (%  % +' (% /  5/</<                       $  ' $"  (%  %( - ' $ (%    $
    
                                                             1


                                                                                                  XR68C681
                                   % %
                                    ($( 
                                   +  *(
                                         *( , ($
                           @ /5 ''3
                              ($%
                               Figure 13. The Typical Sampling Pattern of each Receiver
                                                   within the XR68C681 Device.
  %( -  ' (C ((- %  & +  % (                 D.7 Application Examples using the Timing Control
$ ( % &  ( -  $L%                  ' (   Block
%( - ( "    ($(  +  (  ($%"  
                                                                  # $   '(+&      % +  %% % ( (    (( -
' '   ' '  %(%  (% ' (% %'' %%+
                                                                  '  '3"        ! %  ( '$ $
+   % %4
 # ++ %  ($(' ' '(         ' (  %( -       Example A: Using the BRG
    ( 
                                                                  %    %  (% %   ' (  $  %( $
 # ((%       ' (  $(+                            + 63% ( '          %  % $ 
    %( - (  $L% %  &('&  %             +( -
    (% < ( ' '  ? (&  $ , (%                    %  1/</= 9G '&% %'( '%% 
                                                                      5.:7  $ 5 ( %K  $(( -  1/</= 9G :
  + " (+  %  %  '%   ' ( $   $ 
                                                                      %(-  (   5.:7 ( (  5 ( +( -
+ / $K  $  '( +                   (" 
 ' (  (  -( %( -           $  / ! / J       A(  /   $  -(%  
61"/ 9G          9  "  '                 ' (     %       (% %  ( %    %(  *0   ' 2!       $
 % $    @ 61/ 39G ''3 % " ( (                 ( 5 J 
3  (% '( %  ($(  +    ( 
                                                                  1 A( </   $  -(%  
 (% (   "  61/ 39G ''3 %(-  (% $(($ $ & / 
-       % ''3 / 9G +   ( ( -                      (% %  ( %    ' (  *0   ' 2!      $ (
$  $   $ (% +  ' '                                  5 J 
                                                                  = A( !!!!!!!  
     5/</< $ (' -( %               %        ( 
$ '  !   (  ''3 %(-  % (   5                     (% %  %  '% H*(  I   P   Table 9 +  (%
/5 ''3 %(-  A            %  (% -(  ' ('               $ %     
% (   5  /5 ''3 %(-     '3   '                  A    %++(! $  %  ( & ! %%( "  $ !
 -(% %"      %  (% $(% $  &% %             /5       $  %  H$ F ' I  +  ( & ! %%( 
''3" ( $   ((-        ++ '% +  ' (  $(+ 
%  (% +  $(% $    %  5 ''3 +  %              6 A( <</   
+   "   %%  ( '( - % ( $ %  (%                     (% %  % %        ' (  $  %( (  +
%& '  % (   ' (  5 ''3                                '        63%   Table 8  $ Table 9
    
                                                               11


  XR68C681
Example B: Programming the Bit Rate via the                     Example C: Using the External Input Ports
Counter/Timer
                                                                %  " ( $$((   ( - '                   * 
%  %  (% %   %(  $  ' ( $               /63% % 2! *" .%  %   %(  $
/63% ( '           * , %     (% ('      ' ( $  % ( '            
(  (%  ++  $ &  *0 #  (% '%  %  '             %          $%   +  +  % %  %        $(
$  +( -                                                 2! *"  - (  +( -4
 (  = 9G : %(-  (              5.:7 ( "  (    A(    !!!!!!             ,          ,
         5 ( (%  + +( -                                    +(-(  -(% 
 A( /     $ /  :                           (% %  %   9G %C  +              . 
      (% % %  %% (  . -         ( -  %C        ,1
     + + C '& J = 9G.MN J  9G                          2!  & '     '  ,1 (   #,1  $ #,= ( %
1 A(   M/4=N                                              & &( -   9G %C  (   %
                                                                     (  ( %
      (% ( %   . (   (  $ "  $ %  ' 
                                                                1 A(      /   
     (( - %' +  .    5.:7 ( 
                                                                 (% %  ( % '(+&          (( - %' + 
= A( /  *
                                                                 %(   $  ' (  + '            (  $ ( $
      (% ( % '(+&    (( - %' +   ' (        + (  ( % #,1  $ #,="  % '( & $$(( &"
      $  %(  + '         * (  $ ( $ +       (% %          $   %  
     .     , %                            (%      % (  %(-   5 %(- % 9 ' "   (% 
     - $ (  (% ' +(-( "              .   $((%( &/ +  (% %(-    + "        (  +
       % %  /5   % +   %( $  $            '       (%  %
      ' ( $ $   + "  ' ( '('(& ( $(($
                                                                , %    (+  %     &  (% ! "
       9G %C  & /" L% (3 + ''3 %(- %
                                                                   .%    $   % %( +           %( -   
     (-( ( - +  *0
                                                                ( '( - % ( $ %  (% %& '  % (             
      %4 *(  J  9G./ J /63%                       9G 5 ''3 %(- K ( $   ( ((G ( %
    
                                                             1=


                                                                                                    XR68C681
D.8 Explanation of Clock Timing Signals
 % +  (% % '( (%  !(                      % '(+('(   (( -   *'3   % # 
%"  (% %L ' %           %' + ' %($  ' +%( &  % % %
                                                                                             Limits
         Symbol        Parameter                                                 Min.         Typ.         Max.        Units
          :7         5.:7 2!   9(-  : (                                                               %
          +:7         5.:7 &%  2!    C     '&                             1/</=         =         9G
                     .(  2!   '3 9(-  : (                                                   %
                       #, # 
          +           .(  2!   '3  C       '&  #,                                    =         9G
                       # 
          5         5  $ 5 2!   9(-  : (  (                                                    %
                       #," #,1" #,=  $ #,6
          +5         5  $ 5 2!    C       '&  ( #,"
                       #,1" #,="  $ #,6
       +5  /5      /5                                                                                          9G
        +5  5      5                                                                                           9G
           Table 11. The XR68C681 Data Sheet presents the following parameter specifications, in the
                                             â€œAC ELECTRICAL CHARACTERISTICSâ€
tCLK - X1/CLK (External) High or Low Time                            fCTC - Counter/Timer External Clock Frequency - IP2
                                                                     Input
   &% $& (' -('  -  ' +
(% '('(&   + " '3" ''"  $ +' ((%  $ $(
$   %    $ (' ( + '(  &  (%                 (%    ' %    ((                 ( 
   ' %    ((     + (                  + C '&  ( - ( $          #, ( " + % & 
 %(-  ( $   5.:7 ( %  %($                          .(         % ' %('& % %    %(- 
  (-  $  % %                                                 ( + C '&   = 9G '  ( $   #,
                                                                     ( "  $ %(   &  $ $ &    .( 
  fCLK - X1/CLK Crystal High or Low Time                              (% % ' (%    $      5"  (' %
                                                                     % '(+( % ((%  %(- % ( $  #,    ( 
 (%    % '(+( %                - + + C '( %           ( %" + %        !   ''3 %' +  %( 
 (%%(           5.:7 ( " ( (  '&%                $  ' ( %
%'(  ( $ : (  %(-    + "  %
'  & &              $ = 9G   (% ( 
                                                                     tRTX - RXC and TXC (External) High or Low Time -
tCTC - Counter/Timer External Clock High or Low                      via IP2, IP3, IP4 and IP5
Time - IP2 Input
 (%    ' %    ((     + (                 (% % ' ' %    ((     + (   
   %(- "  ( - ( $   #, ( + % &                  %(- "  ( - ( $   -         % (  ( %"
  .( " '  %($                  (-  $  % %       #,  #,6" + % %   %(   $  ' (  ''3
, %           (% (( %   ( % ( (                %' " '  %($         (-   %   (% % ' %
   5"  (' (%    % ' %%'( $ (                      ( % (  "   - ( (% % ( % 
#, (                                                            (  ( #,
     
                                                              16


  XR68C681
fRTX - RXC and TXC (External) Frequency - via IP2,           E. INPUT PORT
IP3, IP4, and IP5
 (% % ' ' % ((%    5  $ /5 !              (   '  % $ %  -           % (  
%(- %      % $  ''3   %( %  $           '  - $  % % +  %
 ' ( % #+  %  (% %  %  5 ''3" .% '           ( % + % '( + '( %        '  % + 
 & &  %(-  ( + C '( %    9G  (%       ( %   (%  ' $  '   $ &  , &
(  (  %% (  (  + % % 2!  #+      $( -  #,  -(%  +  % % + #,  #,6       (-
 %  (% %  %  /5 ''3" .% '  & &             (  %(-    #,M N (  %% (  -(' HI ( 
 %(-  ( + C '( %   9G ( '  (%           #,M N ( %(( " ( (  #,  -(%  :(3 (% "  HI
9G ''3 %(-  (%  /5 %(- "  (% (  % (        (  %(-    #, (  %% (  -(' HI (  #,M N
!( (  + 63%                                  ( %(( " ( (  #,  -(% 
# %&"               (( - '  '3 -( % 
%   ((&  -        (&  & $   
 % $ %( %          (( - '  '3 -( %  %     E.1 Alternate Functions for the Input Port
'' %%   +(     -  %' %4
 1 $(++       % $$ (  % (    *0
                                                             Table 12 $ %'( %     % % +  #  ,
    .( "  (' '  ' +(- $  -                ( %" %' % ''3 ( %  $ $ + '  %(- %"
      (  %  ('   ( +  *0            $ ( '$ %  ( + %&            - 
 # %   (( -   *'3 ( % (                + '(   $ +  #,  -(% % ( %  
    ( %  (' %  % + !   ''3 %(-         -(' %         ( "  -$ %% + (% - $
     %  -       '% (                       + '( 
    
                                                          1/


                                                                                                         XR68C681
   Input
    Port      Alternate Function(s)                                        Approach to Program Alternate Functions
    #,        4        $  (  + '                   #, '  - $  + '( %   ( 
              8 4  (% (  (% '( :" +     + '(           & % ( -  M=N J    $ ( $ $(%'%%(
                                                                             (% + '( "  % % Section G.3
    #,       *4        $  (  + '       *           #, '  - $  + '( %  * ( 
              8 4  (% (  (% '( : +       + '(           & % ( - *M=N J    $ ( $ $(%'%%(
                                                                             (% + '( "  % % Section G.3
    #,       D254   .(   2!   '3 #                 #, '  - $  + '( %              !  
              5*4 2!   '3 (  +  ' (  '         *        ''3 (  +    .(  & % ( - M/4=N J
                                                                           M" " N    $ ( $ $(%'%%( (            ++ '
                                                                           +  (% '(  % % Section D.2
                                                                           #, ' %  - $  + '( %               !  
                                                                           ''3 (  +   ' (  + '         * & % ( -
                                                                           *M@4=N J M" " " N +  /5 '3"  *M@4=N
                                                                           J M" " " N +  5 '3
    #,1       5 4 2!   '3 (  +  %(  '               #,1 '  - $  + '( %              !  
                                                                           ''3 (  +   %(  + '         & % ( -
                                                                            M14N J M" " " N +  /5 '3"   M14N
                                                                           J M" " " N +  5 '3
    #,=       5 4 2!   '3 (  +  ' (  '                  #,= '  - $  + '( %              !  
                                                                           ''3 (  +   ' (  + '         & % ( -
                                                                            M@4=N J M" " " N +  /5 '3"   M@4=N
                                                                           J M" " " N +  5 '3
    #,6       5*4 2!   '3 (  +  %(  '        *      #,6 '  - $  + '( %              !  
                                                                           ''3 (  +   %(  + '         * & % ( -
                                                                           *M14N J M" " " N +  /5 '3"  *M14N
                                                                           J M" " " N +  5 '3
                             Table 12. Listing of Alternate Function for the Input Port Pins
E.2 Input Port Configuration Registers (IPCR)
 #  ,  +(-(  -(%  (%  H $ &I                   % C &"             #  ,  +(-(        -(%  (%
 -(%    %%  +( -  + '( %4                    + '( & $(($ (   % '( %4
     %  3   (' +  + (   ( % 4
                                                                      *(% @  =4 H  - ( :-('  I #$             (+('( (%
     #,  #,1" % '  - $ -(' % " %( '  %  $
     +  (%  -(%                                                 *(% 1 4           '    % + #  ,( % #,  #,1
     %  3            '    -(' % +    %         ( + +  #  ,  +(-(  -(%  (%
     + (  ( %                                                 %  $   ( Table 13.
      Bit 7            Bit 6           Bit 5           Bit 4             Bit 3              Bit 2            Bit 1            Bit 0
     #,1          #,          #,         #,            #,1                #,              #,              #,
      J 8            J 8           J 8           J 8            J :              J :          J :            J :
    JE %            JE %            JE %           JE %             J 9(-             J 9(-           J 9(-           J 9(-
                         Table 13. Bit Format of the Input Port Configuration Register (IPCR)
  ( + $(%'%%( + ' (+( $" ( (  (%  -(%  +%
    
                                                               1@


  XR68C681
Bits 7 - 4: â€œChange in Logic Stateâ€ Identification Bits
 % (+( $%  H %    $I  $  '  $ & H  - +    '%I  % H  - + 
  '%I  ($ $ + (  ( % #,  - #,1 #+  % H  - +    '%I $  '  '  - ( -('
% (  & +  % + (  ( %"             & ( ($ (+&  H--( -I (  & % ( -  ' % $( - H I (+( $
( (  #,  HI #+  H  - +    '%I $  $  '  '  - + % "   (' ( "                           &
(  + '  (% & 3 ( -  ' % $( - (+( $% %   HI
#       $%" (+ (  ( #,1 ! (        ' %  '  - ( -(' % "            ( @ ( ' (  -(' HI
Bits 3 - 0: â€œThe Current State of Input Pins IP0 - IP3â€
    % (+( $%  H $  &I  $  + '          '      -(' %      #,  - #,1 (  ( %
# $                H#  ,   - +  I (  "          % $       +( -
 A(  ( $     ( +   ( +% +  (%  %                                   $   , %        
       (' (%" ( (                -(% "  % $ $
    ( +  #, ( ( $('  (' +  + ( % ( % ! ( ' $  '  - + %  
      ( +  #,  % %   %  % +  % ( %   + "                                   $( -  #," (  
    % %   H  - +  I (  "  , ( $  ( 4
                (  ( %   -- $
                +(  % +  '  -( - (  (
                ( - # M@N
       Bit 7             Bit 6           Bit 5            Bit 4             Bit3             Bit 2             Bit 1          Bit 0
    BRG Set               Counter/Timer Mode and Source                  Delta IP3        Delta IP2        Delta IP1       Delta IP0
      Select                                                             Interrupt        Interrupt        Interrupt        Interrupt
    J                                Table 7                         J              J              J              J
    J                                                                  J 8            J 8            J 8            J 8
                                           Table 14. ACR- Auxiliary Control Register
Note:
   This â€œtwo-tieredâ€ interrupt enabling/disabling approach, for the â€œInput Change of Stateâ€ interrupt allows tremendous flexibility for the
  user. Setting or clearing the bits in ACR[3:0] allows the user to specify exactly which Input Port pins to be enabled (or disabled) for
  generating the â€œInput Port Change of Stateâ€ interrupt. Setting or clearing IMR[7] allows the user to â€œgloballyâ€ enable or disable this
  interrupt.
    
                                                                  1<


                                                                                                    XR68C681
F. OUTPUT PORT                                                    F.1 Writing Data to the OPR/Output Port Pins
   ' %(%% +  < (                       %  ( $ ( "                 % +         ,  $
  '  % $ %  -                %     ' % C &"             ( % (% '  $ & 
'  % $ +  (( -  $ %% %(- % &                 H $$ %% (--  $I ' $%
( & -( - +  $  -(% %  "
*  $  " *  $ %    ' +(-(
                                                                      , *(%  $
 -(% " , A            % $   %% %(- % 
  ( %   $( "  (' %  ( % (                  , *(%  $
(  (   %'  
                                                                   ' $  $ ++ ' + %( -                % ' $% 
,-( -    (%  ( $(++   +               $(%'%% $ (  +( - % '( 
'  (  ( %   &('      $
%    '('(& ' %(%% +   ,            F.1.1 SET OUTPUT PORT BITS COMMAND
 -(%  ,"  $               ( %  %  %
 '  % +  ,  '  % +  '                       ' ' $ % $  ( 3  H2  , 
% +    ( %  ! " (+  ( ,M6N            , *#I ' $ (%                    % % (( - 
(% %    -(' HI"  (% (  % (  ,6 (  ( -       '  %   $ % @      $$ %%
-(' HI :(3 (% " (+  ( ,M6N (% %    -(' HI"  (%  2/ + ,@  ,   & HI   !(%% ( ( 
 %% (  ,6 (  ( -   -(' HI     ( -             ' $ '  % +  $ %"  ' % $( - ("
  3 % -( -      ( $$ (%            ( (  , (% %    -(' H (- I   & HI   (%
' $              % %  ''(%  (% +           %    $ %  $ (% (    $$ %%
A       (( -   (%    "  % ( 3        2/"  % +  ' % $( - (" ( (  , (%
      +      $$ %% (--  $ ' $%4 H2                '  - $
 ,  , *#I  $ H:2   ,  ,                          A '$ %  (%    & %4   & HI   (%
*#I # (% (                  ( 3( -  H2     %               $ %" $( -        % +      H2
 ,  , *#I ' $"  %  (% % ( -                      ,  , *#I ' $"                       ' % $( -
(%  -(' HI (  , 9  "  (% '(  %%            ( (% %    -(' HI       $ +  & HI  
( % ( -  ' % $( -   ( %"  -(' HIK         (%  %    $ %" $( -  (% ' $"  %
$   '  &  ( % (                     %    +  ' % $( -   ( (%  '  - $
+    ( %  $  (% (  , :(3 (% "
                                                                     ! 4
        H:2   ,  , *#I ' $ (%
( 3 $"  % '(+( $ (%" ( (  ,  H'  $I             %    '   +  ,  ,M@4N J M" "
-(' HI 9  "  ' % $( -   ( %            " " " " " N 9 ' "  % +    ( % 
%    -(' HI %                                          % +%4
                                                                  M,@" ,/" ,6" ,=" ,1" ," ," ,N J M" " " "
 % + ' ( ( (  ," +( -  ,                  " " " N
 %  ," (%  HI   + "  % + ' 
                                                                  #+  (             +( -          $$ %% 2/K
 ( " +( -  , (% -(' HI
                                                                  M@""N J M" " " " " " " NK     %( - % + 
                                                                     -(%  (% +%4
 (% +  , '  %   $ '  $ ( $(($&
( (% %  &  $$ %%(--  $ H2  ,  ,                ,M@4N J M" " " " " " " N
*#I ' $ %            Table 1 (         '' &( -     % C        &"     % +        ( %  %
$"   $ %" % '(+&( -  (%" ( (  ,"              +%4
  %    J % "  J  '  -  ( (% '  $ & 
$$ %% (--  $ H:2   ,  , *#I                        M,@" ,/" ,6" ,=" ,1" ," ," ,N J M" " " "
' $ % Table 1 (  '' &( - $"                    " " " N
 $ %" % '(+&( -  (%    %   J '  $"            (% ! +                H2  ,  , *#I
J  '  -                                                       ' $ (% (% $ ( Figure 14.
     
                                                               1


  XR68C681
                                                                State of Output Port Pins (OP7 - OP0)
                 # (( ,M@4N                                                  
               *%" @                                          $$ %% 2
                   (  ,M@4N                                                   
                    Figure 14. Illustration of the â€œSET OUTPUT PORT BITâ€ Command and its
                     Effect on the Output Port Register and the State of the Output Port Pins.
# %&" +              H2  ,  , *#I           % +  ' % $( - ,  -(%  ("  $ (
' $K                                                       % +    ( (%  '  - $
 J K  %% (         '  - + ,M N"         ! 4
( ,                                                       %    '  % +   ,  -(% "
                                                             , J M" " " " " " " N  % C &"  % + 
 J K  %% ( ,M N J HI"  $   ( "
                                                               ( %  4
, J HI
                                                             M,@" ,/" ,6" ,=" ,1" ," ," ,N J M" " " "
                                                             " " " N
F.1.2 CLEAR OUTPUT PORT BITS COMMAND
                                                              #+     ( M@""N J M" " " " " " " N 
                                                               $$ %%  /"   %( - '  % +  
 ' $ + ( 3( -  (% ' $ (%  & %((           -(%  (  4
   + H2  ,  , *#  8IK
                                                             ,M@4N J M" " " " " " " N
  !'     %   ( %    $$ %%  /
+ M,@"",N                                                 "      %( - % +      ( % (  4
    & HI   (% H( I   (% $$ %%"             M,@" ,/" ,6" ,=" ,1" ," ," ,N J M" " " "
' % $( - ( (  ,  -(%  (% %    -(' HI   " " " N
 $  ' % $( -   ( " , (% %              (% ! +                  H2  ,  , *#
-(' H (- I   & HI   (% (   (% $$ %%"      8I ' $ (% (% $ ( Figure 15.
    
                                                          =


                                                                                              XR68C681
                                                                State of Output Port Pins (OP7 - OP0)
             # (( ,M@4N                                                     
             *%" @                                          $$ %% 
               (  ,M@4N                                                     
                   Figure 15. Illustration of the â€œCLEAR OUTPUT PORT BITâ€ Command and its
                      Effect on the Output Port Register and the State of the Output Port Pins.
M,@" ,/" ,6" ,=" ,1" ," ," ,N J M" " " "      F.2 Output Port Configuration Register (OPCR)
" " " N
# %&" +           H:2   ,  , *#I                  ( % '  % $ % -        %
' $K                                                      ( %"   & '  ' +(- $   % $ (
                                                                + '( % Table 15 (%%     + '( %
 J "  %% (  '  - + ,M N  $  '  - (            + ' +    ( %
 % +    ( " , 
 J "  %% ( ,M N J "  $ % %      ' % $( -
  (   -(' HI
    
                                                         =


  XR68C681
     Output Port                                                     Alternate Function(s)
        ,            RTSA:  C %      $   + '            8 4  (%  (% '( : +       + '
                       ( 
        ,            RTSB:  C %      $   + '           * 8 4  (%  (% '( : +      + '
                       ( 
        ,            TXCA_16X Output:                 /5  %(  '3 4
                       TXCA_1X Output:                 5  %(  '3 
                       RXCA_1X: Output:                 5  ' (  '3 
        ,1            TXCB_1X Output:             * 5  %(  '3 4
                       RXCB_1X Output:            * 5  ' (  '3 
                       C/T_1_RDY:    .(   $&  + . P Note: This output is an Open-Drain output
                       when used as the Counter/Timer Ready Output.
        ,=            RXRDY/FFULL_A Output:                   ' (   $&. #   # $(' 8 4  (% (%            
                       (  +  5E.             ::D + '( 
        ,6            RXRDY/FFULL_B Output:                  *  ' (   $&. #   # $(' 8 4  (% (%          
                       (  +  5E.             ::D* + '( 
        ,/            TXRDY_A Output:                  %(   $& # $('  (% (%       (  + 
                       5ED + '( 
        ,@            TXRDY_B Output:              *  %(   $& # $('  (% (%        (  + 
                       5ED* + '( 
                            Table 15. Listing of the Alternate Functions for the Output Port
 & +           '( % +  (%   ( %  %  ' $ & (( -                ( $       ,
 ( + +  (%  -(%  +%
       Bit 7                Bit 6           Bit 5                Bit 4           Bit 3         Bit 2         Bit 1          Bit 0
       OP7                  OP6             OP5                  OP4                    OP3                        OP2
  J ,M@N          J ,M/N           J ,M6N          J ,M=N         J ,M1N                  J ,MN
  J 5E*          J 5E            J 5E.          J 5E.         J . P            J 5 /5
                                            ::*                  ::           J 5*5                J 5 5
                                                                              J 5* 5               J 5 5
                                  Table 16. Output Port Configuration Register - OPCR
Note:
  OPCR only addresses the alternate functions for output port pins, OP7 - OP2. OP0 and OP1 assume their RTS roles if either
  MR1n[7] = 1 or MR2n[5] = 1. Setting those mode register bits enables the RTS function. Otherwise, these two ports will only be
  general purpose output ports.
G. SERIAL CHANNELS A and B
2' % ( '              +        '(% %                     ('         ' (   $  %(  +        ' '        
+$ ! %& '  %  ' (   $  %(                        ( $  $ &"    '                  ' +(- $ 
 '       % ' ( $  $ & %  '  (  ( -                      ( (% ( - $ %"  ('           % + +
+ C '& +  *0"  ."   !   ''3 %                     '  $   $(- %('%" %   %        (  3 
  %  ( - $  * %($ %               $ (               $ % $ + ($ ('( %
    
                                                                  =


                                                                                                          XR68C681
#  (% % '( ' ( %&% (  % $  $                         '3   '  -(%            Section D" (( -  
' ( % '% +        %(   $  ' (                           *'3
$ +( (( + % +  % %&% +%
5       %(   (   +                      G.1 Transmitter (TSR and THR)
5       %(  '3 (-  +           
5       ' (   (  #  +                            %(  '' %   $ +  ,  $
5       ' (  '3 (-  +                                 '  % (   % ( ( %    ( (%   
 (% % '( +  $ %            $(%'%% %   %' %              5 ( " $$( - %" %  $ (  (& (% %
   (  ' '               %  %' %                C( $ &  %& '  % '
(% $  4
                                                                       2'  %(  ' %(%% +   %(  (+  -(% 
  %(   %( 9$( -  -(%   $  %(                    $   %( 9$( -  -(%  9  9
     (+  -(%                                                     (% '&   & #  Figure 16  % %  %((+( $
  ' (   ' ( 9$( -  -(%   $  ' (                         (%( +    $ 9  , ( (( % 
     (+  -(%                                                      %(%%( + % ( $ & (( - ' '  $  
 %  -(%                                                       9  ' '  (  $ $ (   $ ' %% $
                                                                        -          # "  ( (  ' %   ( - 
 $  -(%                                                           %(( +  9   "  ' '  $ (%
  $  -(%              Section B.2"  $                  % ((G $  $ (%  %( $  +  ' ( (  5
     '$( -                                                          ( 
                                            %(  '3 + (( - *'3
                                                           5
                                                                                   %(  (+  -(%              5
                                                                                                              -( -
                                                                                                               ( 
                            $ %
                          ,   +
                           ,
                                                     %( 9$( -
                                                           -(% 
                         Figure 16. A Simplified Drawing depicting the Transmit Shift Regis-
                                             ter and the Transmit Holding Register.
     
                                                                 =1


  XR68C681
A           %(  (% ($  ( '( "           5       ("   % %(- (+('  ( +  ' '  (  %  +(%
 +   (' '            (  ' ( %&      + $ & - %%( &  %(- (+('  (% #+ 
3( -   -(' H (- I 9  " L% (                ' ('( ' '% + ("         %(  (
 %(%%( +  ' ' "              %(   %       % $  H(&I (            % %(- (+('  ( + 
 ' (  & -      ( -    (    ( (%              ' '   $         , ( Figure 17  % % 
%('&  5  --( - HI +  (  ($"             + + +   %(  5   #
+( -  ($  ($   , ( +   ' $( -                 (% '% "       %(  (% % $( - 6*/" ( <8
' '  # $( & +   %(%%( +                   ' < (%   ' ' " 8(&"  *(
                           %(  #$
                            *(
              5                                                                         
                               *(                                                               *(
                                  Figure 17. The Output Waveform of the Transmitter
                                              while sending 5D16 (8-N-1 protocol).
   '  - $  -                      (       G.2 Receiver (RSR and RHR)
 C %        , & % ( - #MN  $ #M=N +
'       % "  $ *"  % '( & #  (% '% "                 + '( +  % (  ' (  (%   ' (  % ( $
$ -       (    C %  &(   %(              5 ( K '   (    $"   ( '
9  $   & + ' ' %  , '                           $ &  ,    ' (  (% %  % %( +
% ('  (% (    C % & (( -  ' '             '( -  $ ' '3( - (&" (+ (& (%  ( - % $
  & 9                                                          ' (  ' %(%% +   ' (  (+  -(%  
      %(  '             $  $(% $ (             $   ' ( 9$( -  -(%  9  9 (%" (
' $  -(%  %         Table 2 ( Section B.2 #+              %% ' "    & #    ' (   ' ( % $ 
' $ (% (%% $  $(%   %( "  (                   5 ( "   ( (% ' %% $  -  
 %( ' ' % (  9  $ "   %(                    + $%"  $ (% '   $    +"  $ (%
( ' (   %(( -  +   ( ( - $ ( (             %+  $   9  (% ' '  (%          ' %% $
    9  $ "  (  &  '  & & +                   -  1 & % + #   '   ' ( $ ' ' 
' ' % 8  ' ' % '  (   9                     ' %   +          # " ( '  H $I   $ &
 '  # *:2  8#2 ' $ %                               , K            (  $%  9 Figure 18 $ ('% 
(%% $                                                            %((+( $ $( - +   ' ( 
    
                                                              ==


                                                                                                    XR68C681
                                                              ' (  '3 + (( - *'3
                                   ' (  (+  -(%                    5
          # '( -       5
           ( 
                                                                                                   $ %
                                                                                                     $ &    ,
                                                                      ' ( 9$( -
                                                                           -(% 
                                  Figure 18. A Simplified Drawing of the Receiver Shift
                                           Register and Receiver Holding Register
  ' (  + '( % & % %( -  -                         (+&    $  ' $ HI    (  5 ( 
5 (  A           + $  %(  (% ($ " (% 5            (% ( $ $    (
  $ ' % C &"                 5      (  (%         %(%   %  ( % (                  ! (
' ( %& H3( -I ( -  (%  ($   ' (  (%               %( - ''3"  $  ( '( - % ( $ % 
( '(  $ (%   ' (( -  ' %%( -  & $                     ($  (%  % ' $ ( (  ($$ + (%
9  "           + $  %(  % $%                      (  ($
(" ( (% 5  --( - HI"   ' (  ''3"        , %    (+  /5 ''3 (% %  ' $ +   ' ( "
 (' (% / ( %  $  (  /! ''3" (                 %( - ' $ ''% (               '  $  &
% %( -  (%   ( #+   ' (  $  ( %             % (
  (% 5 (  (% %( HI +  (% @ % " 
                                                                     ' (  ( ' (   %  $  ' (  '
  ' (  $ ' %($ %  (% %(-     ($
                                                                   ( +  ' '    +%    ("   (
  ( #+         5 (  (%  II           @
                                                                   ( (  %   ' ( +  ' ' F% * 
% "   ' (  ( (-   (% $ $ % %
                                                                    ' (  ( ' '3 (& (+ - $  ( %
H (% I   (% @ %  "   ' (  ( %
                                                                   +  , ( #+   ' (  % %  3 ' $((
  ' %'' %%( (          ( ($ (  % .$
                                                                     (% (  $          (& ' '3 (+  & % ($K 
  (  ! ''3  % +  (% /! ''3 (%
                                                                   %'' %%+  ' ( +  ' '  (%  % $K  $
     +$
                                                                        ' (  (    % %  $  % 
                                                                   '' ' +    ( +                 ! ' ' 
     
                                                            =6


   XR68C681
Receiver Errors
#+   ' (  $ %  %  H3I"    % $                 ' -(   C % $ (+ - $  $ +-- $ (
( +  , ("  ( - 2  2 (% +-- $ &                (   %%  -(% 
% ( -"  M/N J #+"  '   ' ( +                      '  - $  -                      (  
' ' "  %% C  (& ' '3 (% ( ' '"  ,(&           C %   , (+  5E  ' (   $&  
2 ,2 (% +-- $ & % ( -  M6N J  #+  9 %                ::  #   ' $(( !(%% + (  '              
+"  $    ' '  !(% $ (  K  $ (+               5E ' $(( !(%%                 %  ' '  +
$  %    (  ' % $( - 5 ( K                      $ !(%% ( (  9"  $ (% ( & (( -  
       ' '  (   (   ( "  $                 H $I  $  $ &  ,                       :: ' $((
H ' (    2I 2 ' $(( (  +-- $ (               !(%%       9 (% '  & +  $ '  '' 
     %  -(%   M=N J   (%                        &  ' ' % +    (  ,                  %  $
(%&  %% (  %% + $                                 H $I          #   %  ' %  '  (  
  ( & (+  5 (  (% $   %' ' $(( +                C %  '' $  (       5E 
      ( ' '   ($"  $  , ( % $  ' $                 :: ' $(( (  '           $  -(% %  %
, ( %( -  % $ (  %' K   ' ( $                 (  %          $ & % ( - #MN  $ #M6N +
* 3 ' $(( * (%  % $ A             (% ' $(( (%     '       %  $ *"  % '( &
$  ' $ %    ( -%                                        2' '          (% C( $ (  %    -(% %
         H ' ( $ * 3I ' $((      (% +-- $ (              % $  ($ '   $  (( - +  %
     %  -(%   M@N J                                  '       %  +  %  -(% %   $(%'%% $ (
                                                                     (  % '( % +  $ %          9  "  $ ( $
         H* 3I ' '  (% $ $ (            9       $(%'%%( +             ( $  +  %  -(% % 
     9  "  +  $ (%  ' ( $  $ $ (              %  $ (  +( - %  '( 
     9  (        5 (    %            H3I
     ' $((                                                     G.3 Mode Registers, MR1n and MR2n
1          ' % $( - H  * 3I (   (%
                                                                    $  -(% %"   %   % '(+&  '
      C % $ (+ - $  $ +-- $ (  (  
                                                                     %   .% $ (3  '                      
     %%  -(% 
                                                                    %  -(% % %               %   ' +(- 
 '          5 (    %          H3I ' $(( "        '             %     -- ( $   $% 3( -
%% C  ' ' % (  $ $ (   9"  $                  ' (C %  (% ( ( ' +  %  -(% % 
     ' % $( - H  * 3I (   ' $(( (          $(%'%% $  
       Bit 7           Bit 6          Bit 5           Bit 4            Bit 3             Bit 2          Bit 1           Bit 0
     Rx RTS        Rx Interrupt   Error Mode               Parity Mode              Parity Type            Number of Bits
     Control          Select         Select                   Select                                        per Character
       J 8        J!E       J '              J A( ,(&               J 2                     J 6
      JE %         J      ::      J *'3             J ' ,(&                J $$                    J /
                                                           J 8 ,(&                                         J @
                                                       J ( $                                        J <
                             Table 17. The Bit Format for Mode Registers MR1A and MR1B
     
                                                             =/


                                                                                                  XR68C681
 + ' '              (% '' %% $       '         F%  ' $ ( 3 $ (  '                F% ' $  -(% 
 (   ( %    (   (% %    &             +   &  $  (  "                (   (
  $ 22  &  H22  ,#82I                       ('& (   
      Bit 7           Bit 6           Bit 5          Bit 4          Bit 3           Bit 2            Bit 1              Bit 0
         Channel Mode               Tx RTS      CTS Enable                                 Bit Length
                                    Control           Tx
            J 8                J 8         J 8                  J 6/1                         < J 6/1
          J  2'                JE %         JE %                   J /6                          J /6
          J :' :                                                   J /<<                           J /<<
        J   :                                                    1 J @6                         * J @6
                                                                          = J <1                          J <1
                                                                          6 J <@6                          J <@6
                                                                          / J 1<                         2 J 1<
                                                                          @ J                            J 
                             Table 18. The Bit Format for Mode Registers MR2A and MR2B
MR1n[7] - Receiver Request to Send Control                      MR1n[5] - Error Mode Select
$( (&"   C %   $ (% %%  $  - $            (% ( ' %   ( +               #  %% (%
& ( 3( -  H2  ,  , *#  8I                    ,2" 2"  ' ( $ * 3 +                  #+  (% ( (% % 
 H:2   ,  , *#  8I (                           HI"  (% (' '             (   ( 
(          9  " (+  M@N J  (% % "        H ' I  $  #+  (% (% (% %   HI"  (%
     ' (  (  '              -( +         (' '        (   (  H*'3I  $ 
   '(+('&" % ( -  (% ( (  
                                                                #  ' '  $  % %% (% &  &  
 ' (        -  (+ (% 9 (% +  (% H+
                                                                ' '    (% ' &    +              #  # 
' I  ' (C (% % + (   ( -  ' (   
                                                                '3 $ "  % (%   %   '( -('
  %
                                                                 +  %% +  ' ' % '( -    + 
                                                                  #  %( '  % H22 2   I ' $
Figure 24  % %  $(-  (' (% %                 +  '          % (%% $
 ' ( '  $  C %  % $ ' +(-( $
+ '(                                                        MR1n[4:3] - Parity Mode Select
MR1n[6] - Receiver Interrupt Select
                                                                #+ HA#9 , #EI  H 2 , #EI  ( (%
 (% ( %  '% (   5E %% (                ::   - $"  (& ( (% $$ $                   %( $
%% ( +      '          % $ %     '( ( +   ' ' %  $   ' (   +%  (& ' '3 
-     ( -  (    C %         , " #MN +      ' ( $ ' ' %  Section H.2 + $ %'(( +
'         $ #M6N + '         *                        ( $  ( 
     
                                                             =@


  XR68C681
MR1n[2] - Parity Type Select                                    Mode Register 2 (Channels A and B)
 (% ( %  '%   2;28 (& (+ HA#9 , #E              + ' '                  (% '' %% $          '         F%
                                                                 ,(   ( %   "  (' ''% +   &
2I (% - $  $  % +  +' $ (&
                                                                '' %%   '             F%   -(%  % C   $%
( (+  H 2 , #EI $ (% - $ # 
                                                                 ( %   $ %  '  -  '  % +  
($ $ ( %  '%  % +              . +- (  (  
 (% ( %  ++ ' (+ H8 , #EI (% %  ' $ (
 M=41N                                                      MR2n[7:6] - Channel Mode Select
                                                                2'             '   (            + + $ %
MR1n[1:0] - Bits per Character Select
                                                                  ( -  M@4/N J  ' +(- %  '                     
                                                                      (             $  #  (% $ "   
  '%       + (%    %( $  $  ' ( $            ' (   $  %(    ( $  $ &
(  $ +( $ +  ' '   (% $ %  ( '$                  Figure 19  % %  $(- $ ('( - 
 " , #E"  $ , (%                                       $  ( 
                                                           5 5
             # '( -      5                                                                      5      -( -  (
              (             ' (  (+  -(%                  %(  (+  -(%                     
                                                                                                     %( 9$( -
                                                                                                         -(% 
                ' ( 9$( -
                     -(% 
                                                                                     <
                                              <
                                        $ %                              $ %
                                     $ &  ,                  ,  $ +  , 
                             Figure 19. A Block Diagram Depicting Normal Mode Operation
    
                                                            =<


                                                                                                    XR68C681
  ( -  M@4/N J  ' %  '              (               ' ( $ $ (%  %( $                '     F% 5
   (' '  $ "  (' ('&   %                   
   (%   ' ( $ $ Figure 20  % %  $(                     ' (  %             $        %(     $
   - $ ('( - (' '  $  ( 
                                                                               $
    +( - ' $(( % &  ( (  (% $ 
                                                       5     5
                      5                                                                       5
         # '( -             ' (  (+  -(%                        %(  (+  -(%            -( -  (
          (                                                                                              
                                                                                                  %( 9$( -
                                                                                                       -(% 
            ' ( 9$( -
                -(% 
                                       <
                                    $ %                              ,     %  '' %% 
                                 $ &  ,                                 %( 
                     Figure 20. A Block Diagram Depicting â€œAutomatic Echo Modeâ€ Operation
1  '          F% 5E  $ 52 %% (%                 @ ,   ' (  ' ('( %   % &"
   ( '(                                                             ,   %(  ( 3 (% $(% $
=   ' ( $ (& (% ' '3 $  (%  -            $ +        2'   '                '  ' +(- $ (           +
    %(%%(   %"  %( $ (& (% %  ' ( $              $(- %(' $ %
6  '  +( - (% ' '3 $              % (%        Local Loopback Mode
    %( $ %  ' ( $
                                                                    (% $ (% %  ' $ & % ( -  M@4/N J 
/     ' ( $  3 (% '  $ %  ' ( $  (           !      Figure 21 (%  $(- $ ('( - ' '3 $
   ($ % ( (% $  ' $                                     ( 
    
                                                             =


  XR68C681
                                                                                                   ;
                                                         5
       5                    ' (  (+  -(%                    %(  (+  -(%                  5
                                                                                             %( 9$( -
                                                                                                  -(% 
             ' ( 9$( -
                -(% 
                                                                                 <
                                          <
                                    $ %                             $ %
                                $ &  ,                   ,   + , 
                     Figure 21. A Block Diagram Depicting â€œLocal Loopback Modeâ€ Operation
#  (% $ 4
   %(   (% (   & '        ' $      =     '       F% 5 (  (% (-  $
    ' (  (                                            6      %(  (%      $"      ' ( $ $ 
                                                                       $
      %( ''3 (% % $ +      ' ( 
                                                             / ,   %(   $  ' (  ' ('( %
1     '     F% 5  (%      $ 3( -  (-         ' (  &
    
                                                          6


                                                                                                                XR68C681
Remote Loopback Mode
 (% $ (% %  ' $ & % ( -  M@4/N J  Figure 22  %                      %  $(- $ ('( -   '3 $
 ( 
                                       5                                                    5
                     5                                                                                         5
         # '( -                                                                                                         -( -
                               ' (  (+  -(%                                    %(  (+  -(% 
         (                                                                                                         ( 
                                                                                                                  %( 9$( -
                                                                                                                       -(% 
           ' ( 9$( -
               -(% 
                                 Note: The CPU has no access to the Serial Data during Remote Loopback Mode.
                    Figure 22. A Block Diagram Depicting â€œRemote Loopback Modeâ€ Operation
#  (% $ 4                                                               8I (                 (            &    %&% 
                                                                          %+  9  " % ( -  M6N J  % 
  ' ( $ $ (%  %( $            '       F% 5
                                                                          '           %(   -  ('&"  (
   
                                                                          ( +   ' ' % (    $ 9  
  ' ( $ $ (%  %    ,                $                  %( $  $   &
   %% ' $(( %   ' '3 $                                        Figure 26  % %  $(- (%                         
1 ,(&  $ +( - % (%             %( $ %              %( '  $  C %  % $ ' +(-(
    ' ( $                                                              $ + '( 
=      ' (  %           $                                    MR2n[4] - Clear to Send Control
6       ' ( $  3 (% '  $ %  ' ( $  (                       #+  (% ( (%  "  '           %  (  #, + '       
      ! ($ % ( (% $  ' $                                       "  #, + '          * %  ++ '    %(  #+
                                                                           ( (%  HI"   %(  ( ' '3  % + (%
MR2n[5] - Transmitter Request-to-Send Control                              (  ' ( (% (  $&  % $  ' '  #+
                                                                           (%   H I"  ' '  (%  %( $ #+
$( (&"    C %   $  (% %%  $                      (% (-  - $" 5  ( % (  3( -
 - $ & ( 3( -  H2  ,  , *#                              %  $             %(%%( +                ! ' '  (%
 8I  H:2   ,  , *#                                       $ & $  (  - %    - % (   ( 
    
                                                                  6


   XR68C681
 (  ' '  (%  ( - % ((G $ $  ++ '                 H3I  H  2I  2 (% +-- $ (              %
 %(%%( +   ' '   (%                  (%       -(% 
+  (% $ ( Figure 24  $ Figure 26
                                                                 G.4 Status Register, SRn
MR2n[3:0] - Stop Bit Length
                                                                  %%  -(%  ($ %  %  ( %%  
                                                                 9  $ 9  ' (   $  %(                     # %"
 (% ( +( $ -%            $( +      % (%
                                                                  % '( &K  $ %  %  ($              , ( 
 $ $  '  %( $ ' '   (
                                                                  % +         C(& +       ' ( + $ & 
$( + ./   ( (  $  ./   ( ( %" (
                                                                  ' (       #  %% ( $('%  % + (  $
( '  % + ./ (% '  - $ + ' ' 
                                                                 %&% %  $ %          ,  ' '3  $ %            (+ 
 - % + /" @  $ < (%   6 ( ' ' "  % (
                                                                  %(  (% &  $. (%  $& + $ + 
$( '  - $ + ./   ( ( %
                                                                 ,           #  %% ( $('% % ( $('    
#+  !   ! ''3 (% - $ +   %(                 9 %  ' ' "  (' (% (( -    $
''3 5 "  M1N J  %  '%  % ( $( +          &  , "  (% +  $ ( ' +  ' (( -  & 
 ( (  $  M1N J  %  '%  $( +  (           ' ' % (                      %(   $
( % +  %(%%(                                            ' (  #  %% ( $('%  ' $ (   
  ' (   & ' '3% + 3 ' $((   '                   ( +  %%  -(% 
+  +(% % (   (%"  ( ( +   % $         ( +  %%  -(%   %              %  +
(& ( (% % $  -$ %% +             - $      & $  ' ( %  (+ +               %
 %( $ % (  -  #+   ' (  $ %  %           -(%   $  $(%'%%( + ' ( +%4
      Bit 7             Bit 6             Bit 5        Bit 4          Bit 3          Bit 2            Bit 1          Bit 0
    Received         Framing         Parity Error    Overrun        TXEMT           TXRDY           FFULL           RXRDY
     Break             Error                           Error
      J 8            J 8              J 8        J 8          J 8          J 8            J 8          J 8
     JE %            JE %             JE %         JE %         JE %           JE %           JE %           JE %
                              Table 19. The Bit Format of the Status Registerâ€™s SRA and SRB
SRn[7] Received Break
 (% ( ( $(' %     G  ' '  +                 #+         $ +          '        %         %  
- $ ' '   - %  ' ( $ (                   H ' I $ "  (% (  & ( %   ' '  
% (  &  %( - #  %(( (% ''( $                   +  9  (% ( (  '  $ (+  5
 3 (%  ' ( $ $$((   %+ % (            #      (  (% -    -(' H (- I   " (                  !
( (( $  (  5 (   %   3( - % +            ' ' 
  % +  ( (   (% (% $ +( $ %  %'' %%(         #+  H2I $ %            %   H*'3I $ "        (%
  $- % +  (     !   ! ''3                        ("  ' %  (  ( %%  $  (              H22
A        (% ( (% % "  '         F% H9 802 #8 *2 7       2   I ' $ %                    ( 3 $  %
  I ( (  # (% %   ( (  # (% % %             % Table 2
             $ +   3 ' $(( " % $ +( $  " (%
$  ' $                                                        SRn[6] Framing Error
 ' (F%  3 $  ' -(' ' $  '  3%    -(             ( -  ' ( +           ' '  (%"  $  &
(  ($$ +  ' '  9  "   3 %                  %%'( $ (& ("   ' (  ( ' '3 +  H3I
 %(%  (       $ +       ! ' '  ( ( $  + ( ' $((  (( +( -  % $  (& (
  $  ' $                                                    (% H3I ' $(( (%  , ( #+   ' (  $ %
     
                                                             6


                                                                                                  XR68C681
   $  '  H3I   (% ( "  ( (% -- $ H (- I         SRn[3] Transmitter Empty (TXEMT)
+--( -  '' ' +   2  2
                                                                    (% ( (% %           %(   $  % # (% % 
#+       $ %            %   H ' I $ "  (%     +   %(%%( +  % % ( +  ' '   $ (+
(  & ( %   ' '     +  9 #+                (%  ' '  (                9   (( -
 (% ( (% %  +  -( ' ' " ( (  '  $ (+          %(%%(   (% ( (% '  $             %(  (%
, ( (%  & $  ' $ (               ! ' '        $(% $"          , ( %   ' '   
#+  H2I $ %             %   H*'3I $ "        (%  9
("  ' %  (  ( %%  $  (                 H22
2   I ' $ %                       ( 3 $  %     SRn[2] Transmitter Ready (TXRDY)
% Table 2 , %    (+               $ (% H*'3I
 (% (" (         %%  -(%  (  ( % " +         (% ("       % " ( $(' %    9 (% &  $
%% C  ' ' %" ( $  $  +  ' $(( +                    $&  ''   ' '  +            ,      ( (%
 %  ' ( $ ' ' %"  (               H22 2         '  $         , ( %   ' '    9"
  I ' $ %                 ( 3 $                        $ (% %           ' '  (%  %+  $   
                                                                   5E (% %             %(  (% ( ((&  $  $
SRn[5] Parity Error                                                (%  %              %(  (% $(% $  ' %
                                                                   $ $ (   9  (   %(  (% $(% $ (
 (% ( (% %                HA#9 , #EI  H 2                 %( $
, #EI $ %                 - $  $ (+ 
' % $( - ' '  (  $ #  %  ' ( $                  SRn[1] FIFO Full (FFULL)
( ( ' ' (&
#+       $ %            %   H ' I $ "  (%      (% ( (% %          ' '  (%  %+  $ + 
(  & ( %   ' '     +  9 #+                 9  $   %+  '% % (   ' +
 (% ( (% %  +  -( ' ' " ( (  '  $ (+         ( "       #  %(( %  ''( $ # (%  % 
 ' ( $ (& (% ' ' (           ! ' '                       ,  $%  9 #+  ' '  (% (( - (
                                                                      '%             #  (% +"    :: (    % 
#+  H2I $ %             %   H*'3I $ "        (%          ,  $%  9
("  ' %  (  ( %%  $  (                 H22
2   I ' $ %                       ( 3 $  %
                                                                   SRn[0] Receiver Ready (RXRDY)
% Table 2  , %    (+               $ (% H*'3I
 (% (" (         %%  -(%  (  ( % " +         (% ( ( $(' %     %        ' '  % 
%% C  ' ' %" ( $  $  +  ' $(( +                    ' ( $  $ (% (( - (        #     $ &  , 
 %  ' ( $ ' ' %"  (               H22 2         # (% %        ' '  (%  %+  $ +   
  I ' $ %                 ( 3 $                            9  $ (% '  $ (            ,  $%       %
                                                                   ' '  ' & % $ (           # 
SRn[4] Overrun Error
                                                                   , %    % +  ' $(( %    +-- $
#+ % "  (% ( ( $(' %      ' ' % (             &        %%  -(%  ' %  - $ 
 ' ( $ $              % # (% %    ' ( +      -        (    C %   ,  9  "  
     ' '                #  (% +  $  ' '  (%      % ' $(( %    +-- $ &  %%  -(% 
 $& (   (( - +  & #  %((                      '   - $  -                  (  
A        (% ''%"  ' '  (   (%  (              % ' $(( %  (% $  4
, %        "    (3       %%  -(%  (% + 2        M/N  ( - 2
 ( - 2" ,2 ,(& 2  $ *  ' ( $                  M6N  ,(& 2
* 3"  2   2 ( $(' (% &% +-- $
  H*'3I  $ %(%  2 ' $(( (%                       M=N    2
+-- $   ' ' ' '  %(%"  $  &                   + " (+ %&%     ' '3( - (%  & $"
'  $           H22 2   I ' $ (%                 %  (%  ' $ $  ($ ' ' '  &
( 3 $                                                           ' '3( -  %%  -(% 
     
                                                                61


  XR68C681
H. SPECIAL MODES OF OPERATION
H.1 RTS/CTS Handshaking                                 H.1.1 Receiver-Controlled RTS/CTS Handshaking
      '  - $  % .
  $% 3( -" %    % + $ + '  (     #  (% $ "   ' (  %  ((&  ('&
$ (' %  (% % '( $ %'( %  ( %            -                      %(( - $ (' 
  %        %  ( (  ( - .           '(+('&"  (% $ %   ' (   - 
9 $% 3( -  '(+('&"  % ( %  4              %(-  (+ (% 9 (% +K  $" (%   &"  & ++ '(
                                                        (   ( -  ' (    % Figure 23  % %
  ' (   $ . 9 $% 3( -                $(- +  ! (%( -   ( + 
  %(   $ . 9 $% 3( -             ' ( '  $  ' +(-( 
                    Receiving Device                            Transmitting Device
                                                              *
                                  ,                           #,
                                 5                             5*
                                  5                            5*
                                                              *
                          ::       #,                         ,
                            ,=
                        ,
               ::
              
              5
                        Figure 23. Block Diagram and Timing Sequence of Two DUARTs
                            Connected in the Receiver-RTS Controlled Configuration.
    
                                                    6=


                                                                                             XR68C681
Figure 23 % %    $ (' %"                     $  ( $(' ( -- +%  #  (% '% "               ::
H ' (( -  (' I  $              $ H %(( -   ( $(' (% '     ' $  % (   +  ,  #
 (' I       (% ! (-  %            +'          % %             :: --( - +% "  , $
H ' (( -  (' I %   %(   $                   (     (% H -(  $- I +        :: %  (  
H %(( -  (' I %   ' (              "  (%    C %         , $ % ('  (% H#  I &
  ! " (% %( - '          +     H ' (( -  (' I    H(( -I M@""N J M" " " " " " " N   
 $'          * +  H %(( -  (' I                 $$ %% 2/  (% '( ! ' %  H2  , 
       ! %% (             %%(           ,  8I  $ '% % ,MN  -- H (- I
H ' (( -  (' I %              - $ %'          $   ( ,     -- HI
 M@N J  ''$( -  Section G.3"  (%  %% (           % C &"  (%  %%  $
-( -          H ' (( -  (' I +  ' (       A(    +             H ' (( -  (' I     ( -
'  $$(( &"  H %(( -  (' I %             %%  $   (  +  H %(( -  ('            I (%
- $ %'   *M=N J                 ''$( -       %%  $ %  "  $ $  %(%%( +         
Section G.3"            %(  + '       * +        H %(( -  (' I   H ' (( -  (' I (%         
H %(( -  (' I %              - $         ( $
 $  * (  '  #  (% ! "  H ' (( -
 (' I ' %           %(-   (%       Figure 23 % %         5 (   ' (( - $ + 
%(-  (% + $ $( '& (   * (  +   %(( -     %           %%  $ 9  " (  (% ! "  (%
$ ('                                                           &  ' ( $ ' '   '% % 9 + 
#+ 9 +  H ' (( -  (' I (% + % $ (' $ &        H ' (( -  (' I   +                :: ( $('
         ::   ( -   -(' H (- I"  (        %% (%  %%  $  $  +               H ' (( -
('&            - $ & ( +         ' (    (' I (%  ('&        - $ (       ' ( 
'  $  +  %  % C &"  '                *  '           %(-    + "  %(%%(
 %(  +  H %(( -  (' I (  (% *       + '        * +   %(( - $ (' (%"  ' -( "
(  - $  $ (    ( $   %(  &           ( (( $
$  5 +  H ' (( -  (' I                          Figure 24  % %  + $(- (%( - 
#+  ,  $%  H%I  9 +                 ' (( -  -(    '$  % $ ( (  ( - 
$ (' " 9 (   -   +"  $                  ::     ' ( '  $ .  $% 3( - $ 
     
                                                           66


  XR68C681
                                            ' (( -  ('
                                        M@N J 
                                            %(( -  ('
                                       *M@N J 
                                                    
                                     2 
                                   A(   )         $$ %% 2
                                    (% ( 3 %  H2  , 
                                   , *#  8I  $ % %
                                     , ( " ,   -('
                                    HI
                                                      #%
                                     8                ::
                                                   %%  $Q
                                                          E2                 8
                                            (% ('&                   #%       E2
                                           8 - $ &  ' (                      ::
                                             $   '(              8 - $Q
                      Figure 24. A Flow Diagram Depicting an Algorithm That Could be Used
                           to Apply the Receiver-Controlled RTS/CTS Handshaking Mode
H.1.2 Transmitter-Controlled RTS/CTS Handshaking
#  (% $ "   %(   %  ((&  -                (% $  %        %(     -    
      ' (( -  ('   '(+('&"             %(- "  (  ($ +  &( - (% 9  $ 
    
                                                          6/


                                                                                              XR68C681
                                Transmitting Device                        Receiving Device
                                              RTSA                         IP2
                                             (OP0)                       (RTS-in)
                                             CTSA                          OP3
                                              (IP0)                      (CTS-out)
                                             TXDA                         RXDB
                                     TXRDY_A
                                      (OP7)
                                       To CPU
                     TXRDY_A
                       RTSA
                       CTSA
                       RXDA
                    Figure 25. Block Diagram and Timing Sequence of Two DUARTs Connected
                                    in the Transmitter-RTS Controlled Configuration.
Figure 25 % %    $ (' %"                      $  H %(( -  (' I  $  (   %( $  
H %(( -  (' I  $   " H ' (( -  (' I          H ' (( -  (' I
 (% ! %% (                %%(             ' '          %(  % ( $  (% 9  $
H %(   (' I %            - $ %'           + $" ( (       -     " ( 
 M6N J   ('  %% ( -( -                        H %(   I +   A                
H %(( -  (' I +  %(     (%         +  H %(( -  (' I (% -- $ H (- I" 
  ! +  %% %    H %(( -  (' I            #, (  (% % -- $ H (- I"   & -         ( -
  %      - $ %'    M=N J  ''$( -              H#    - +  I (    C %  
 Section G.3"         %(  + '             +     ,  A( #,MN J "           (3 & (   % ('
H %(( -  (' I %               - $        ( $   HA( I M@"" N J M" " " " " " "
 $   (  '                                        N    $$ %%  / #  (% % "            #  
                                                               % (' (       $ ( 3        H:2   , 
#  '% +  H ' (( -  (' I" #, (  %               , *#  8I"  $ (  ' %% -- ,1
      - $  -         H#  ,   - +         H (- I  (% $ (          -  
 I (    C %   ,   +( +              (  +        H %(( -  (' I  $ ( (( 
(   % (' ( % (% ( %'   (+  #,             %(%%( + $ +            '            + 
(     '  -  $ #,MN J "  , $                 H %(( -  (' I
H( I M@"" N J M" " " " " " " N           Figure 26  % %   (-  (' $ ('% 
$$ %% 2/ #  (% % "  (   % (' (              -(    '$  % $  (   
$ ( 3             H2  ,  , *#                  %( '  .  $% 3( - $  , %
 8I"  $ (  ' %% -- ,M1N   -('                    % $ $ '3%  (  '' ' % ( (
H (- I  $    ( " ,1"    -('            H ' (( -  (' I A  %           HA ( I '3%
HI  (% $" (  " %%    (  +               (   ( ( (  H %(( -  (' I
     
                                                            6@


  XR68C681
                          
           2                                                0      H#  ,   - +  I
          A( 9        $$ %% 2 
                                                                   #   #, (  ' (( -  ('
                                                                                                     8
                                                                                                                #%
           #8,  # 22                                  00:2 ,1 D ,#8                    #, J 
            %(%%( (%   ( $                       H:AI
                                                                                                         8     Q
                                                                A( <    $$ %% 2 
                                                                                                                   E %
                          #%
                        52
                        %%  $     8
                           Q
                             E %
          (% ('& 8 - $ &
          ' (    $   '( 
         , -- % H9(- I
            #8,  # 820 2                                                          00:2 ,1 D ,#8
             %(%%( (% $(% $                                                  H9#09I
                                                                                          A( <    $$ %%     
                           #%
                       5E
            E %        8 - $Q          8
                   Figure 26. A Flow Diagram Depicting an Algorithm That Could be Used to Realize
                                   the Transmitter-Controlled RTS/CTS Handshaking Mode
H.2 Multi-drop (8051 9 bit) Mode                               H.2.1 Concept of Multi-Drop Mode
2' % ( '          +    '  ' +(- $             (% $ (% '( (  % ( H8( ( $ I +
  (  3  $ % + + ($                  <6 +(& ('' % #  (% $ +  ( 
(' %% ('( %  (% % '( ( +(%  %      H%  %( I" '         ' $   !( + 6/ %
    ' '  +  ($ $   $ &"                %( % (% %%( " % $ (' $ ( Figure 27
+ '(  $ ' $ +  ( -    ( 
($ $ 
    
                                                         6<


                                                                                                    XR68C681
                                                       %   ('
                                                            5
                                     5            5              5                    5
                                                                  
                                                           (' %
                        Figure 27. An Illustration Depicting the Concept of Multi-Drop Mode
                                 :*                                         *     .
                                                  < *(  '                                $$ %%. *(
                           Figure 28. Bit Format of Character Data Being Transmitted in
                                                   the Multi-Drop Mode
      H%  ( I ' (' %                 H        & (  (   $ -(               ! $$ %% &
( %I &  %(( -  ' '  &('&  &  (        (%  %( $ &  H%   (' I
 H $$ %%.I ( +-  $ $                 $ + 
' '   (% &('&  %% ( ( (% + $  ( -            H.2.2 DUART Multi-Drop Operation
 %( $ +  & ' '  & " %  %  $ (                     -( '          ( (    (% - $ ( 
Figure 28                                                            ($ $ & % ( -  M=41N J H" I #  (%
                                                                    $ "   %( $ ' '  ' %(%% +    ("
A        H%  ( I  %   %(  '3 +              - $   + $ (%"              $$ %%.
$   + %   % %" ( +(% % $%   $$ %%             . +- (K  $  - $ , (  -  .
&   ($ (+( %  H-   I          $$ %% &           J  ( $(' %         ' '  (% $"  (    . J 
$(++ % +  $ & (          (  ( (%  HI (          ($ (+( % ( %  $$ %%
$$ %% &  $  HI (  $ & 
                                                                    Transmitter Operation During Multi-Drop Mode
    $$ %% & "   " (  %  H %I %                   % ., ' %          % +       %( $
  ' '      !(          ' ( $ &   % (+ (             ' '  & -( -  MN +  '               (
( $(($ % $ ('  (%  ( - $$ %% $   ' (                $( -  $ (% (   9  ( -  MN J
+  $$ %% $ % (          $  $ (   +         HI  %% ( . J HI  $ % ( -  MN J HI  %% (
 ' ( +  $ & %   +%  % %                    . J HI Figure 29  % %  ' $ + $(-
   $$ %% $ (   %  (  ' ( % $(% $"               +  %(( - ' ' %  $$ %%  "  ( ( 
 $ ( ' (   (-          $ & %   +%         ($ $ 
     
                                                              6


  XR68C681
                                                 
                                      # 3  H22 
                                      ,#82I ' $                                . *(  HI
                                      A( !  (                     A( !!!!!!!  
                                       $  -(%                                    -(% 
                                               . *(  HI                   %(   ' 
                                        A( !!!!!!!                             (' 
                                                -(%                         A(  '   9 
                                          %( $$ %%
                                      '     (' 
                                    A(  '   9                                 
                                                                                         
                                                                                     ' %          E %
                                                                                      A(  '(
                                                                                        (' Q
                                      # 3  H22 
                                        ,#82I ' $
                                      A( !  (                                   8
                                          $  -(% 
                            Figure 29. A Flow Diagram Depicting a Procedure That Can be Used to
                                               Transmit Characters in the Multi-Drop Mode.
Receiver Operation during Multi-Drop Mode
A        '           %              - $ (                ( +  %% C  '3% + $  ' 
($ $ "  $   ' (  %                      $(% $     ' (  %               $   ' (  % ( $ ( 
&(' ' +(-( "   ' (  ( $  ' '                ' %% $ % (              (              ' ( $
(       9  $ %               5E ( $('  $.           ' ' %  '' %%(                 , &  $( - 
(   (+      . ( (% HI  $$ %% +- 9  "            9  % +               . +- ( (% (   M6N"
' '  (  $(%'$ $ (+ (% . ( (% HI  +-              %%  -(%  ( & % $  ( $(' H,(&
  + " (  % %   5E ( $('"  ,                         2I   + " ( ' L '( (  ' (  '                
% $          $   ' ( $ ' '   $ $  ( (+               ' ' "  , % $ ' (    (  M6N (
 $$ %%   (   % % ' %   +  ,  #+                   $    (+&   ( (%  HI  ' ' % ' 
 $$ %% % $ ' " ( $('( -   ( (%  H-                  H-  , I $  '%   $$ %% ' ' "  M6N
 I"             , % $                      ' ( " (   JHI" ( % $ '  (% $$ %% ( (%   #+ 
    
                                                                    /


                                                                                           XR68C681
$$ %% % $  ' "           (% , (%   (  $ $        ' $ $ ' $ +  $( -  ' ( $
 '((  +      ! '3 + $"  $  % $ $(%      ' ' %  ( (  ($ $ 
  ' (  Figure 30  % %  + $(- $ ('( -
                                      
                                                                         %
                              ' (  (% (% $                 8 &  ' ( $     8         L '  ' 
                                                                    $$ %% '
                                  (%  $ $                  ,      $$ %%           ' (   ( % (% $
                           (  ( $                           Q
                              M=41N J M" N
                                                                             E %
                                                                   2   ' ( 
                                       9%                       A( !  
                     8       5E # $('                    (       
                                       %%  $                  $  -(% 
                                        Q
                                                                $ (   ' 
                                          E %                        + 9
                                                                      '3  M6N
                                 $ (     $$ %%
                             '  + 9
                                                                        #% 
                                                      8           8   '      E %
                                                                     ' 
                                                                      M6N J 
                                                                           Q
                               Figure 30. A Flow Diagram Depicting a Procedure That Can
                                   be Used to Receive Characters in the Multi-Drop Mode.
H.3 Standby Mode
       &  ' $ (  % $& $                     % ( 3 $ (        '         ' $  -(% "
' %             (%  ( (%   C( $         % %       $ ('    ( ( ( 6â€¢ %
 % "    (  (  H #;2 ,2 #8I                    % ( -   %( %  $  ' ( %  $ (( - 
$       H2  8*E 2I ' $ (%% $ (              (   # #   %3  -(%   + -( - ( 
 '         ' $  -(%  $(% %  ''3%              % $& $ " (%  ' $ $      &
$ (' !'  +  '&% %'("  (' %(- (+(' &      %(% (  % +  ( - -        $       ' (
 $' %   ( - '  #  % $& $ "                % $   - $ +   H2 #;2 2I
 & + '( %  (' ( ' (     ' '&        ' $" %( '  -(%  '  %   -  $ 
 $( -      (  " (( -            $   ( % $( -  % $& $  '(  (
( 3( -  H2 #;2 2I ' $   "                ' %   % $ ( $  % 
    
                                                           /


  XR68C681
I. PROGRAMMING
 ( +    (% - $ & (( - '               $ (%  ( -  ' ( $ &  % (  ' ( +
$% (        (  -(% %"  (  (            % ' '  # -           " '  - %   -(% %
+ $'3 (% ($ $ & %%  -(% %  (' '                  (' '   ' (    %(   ( % $ 
 $ &        ,   -(%  $$ %%( - (% %  (               $  &  (   %(    ' (   $(% $"
Table 1      $  %  ' %  '  % +   "             $ ' ( '  - %             % $  $  &
#" #" ,"  $ ,  -(% %  $ ( (((G %                      . (% % $
#;   / ( -  ( " ' % $  ! '(% $ (+          $ " ' $" ''3 %  '"  $ %%  -(% % 
 '  % + '   -(% %    '  - $" %( '             $(' $ + ' '           ($  ( $  $ 
' ( '  - % &  % ( (   (                  (  Table 10 %(G %  ( %%(-  % +
  ! " '  -( -          + (%   ' '   (       '  -(% 
      Bit 7          Bit 6           Bit 5          Bit 4           Bit 3           Bit 2           Bit 1            Bit 0
    Rx RTS       Rx Int Select   Error Mode          Parity Mode Select        Parity Select        Number of Bits/Char.
    Control
      J 8        J5E         J               J A( ,(&            J 2                     J 6
    JE %          J     ::       J *'3            J ' ,(&              J $$                   J /
                                                         J 8 ,(&                                      J @
                                                     J ( $                                      J <
                                      Table 20. Mode Registers 1: MR1A, MR1B
      Bit 7          Bit 6           Bit 5          Bit 4           Bit 3           Bit 2           Bit 1            Bit 0
         Channel Mode              Tx RTS        CTS Enable                           Stop Bit Length
                                   Control           Tx
            J 8               J 8          J 8                  J 6/1                       < J 6/1
          J  2'               JE %          JE %                   J /6                        J /6
         J :' :                                                    J /<<                          J /<<
        J   :                                                    1 J @6                       * J @6
                                                                          = J <1                        J <1
                                                                          6 J <@6                        J <@6
                                                                          / J 1<                       2 J 1<
                                                                          @ J                           J 
                                       Table 21. Mode Register 2: MR2A, MR2B
      Bit 7          Bit 6           Bit 5          Bit 4           Bit 3           Bit 2           Bit 1            Bit 0
                      ' (  '3   '                                         %(  '3   '
                             Table 6                                                      Table 6
                                   Table 22. Clock Select Registers: CSRA, CSRB
    
                                                           /


                                                                                     XR68C681
    Bit 7      Bit 6           Bit 5          Bit 4          Bit 3            Bit 2       Bit 1            Bit 0
           Miscellaneous Commands                              Enable / Disable             Enable / Disable
                                                                   Transmitter                   Receiver
                  ! ( Section B.2                            J 8   -                 J 8   -
                                                                  J 2  !                 J 2  !
                                                                 J (% !                J (% !
                                                                  J 8 ;($                J 8 ;($
                                                                   8 %                    8 % 
                                Table 23. Command Registers: CRA, CRB
    Bit 7      Bit 6           Bit 5          Bit 4          Bit 3            Bit 2       Bit 1            Bit 0
 Received   Framing       Parity Error      Overrun        TXEMT            TXRDY        FFULL           RXRDY
   Break      Error                           Error
    J 8     J 8           J 8           J 8          J 8            J 8       J 8            J 8
  JE %      JE %           JE %           JE %         JE %            JE %       JE %            JE %
                                   Table 24. Status Registers: SRA, SRB
    Bit 7      Bit 6           Bit 5          Bit 4          Bit 3            Bit 2       Bit 1            Bit 0
    OP7        OP6             OP5            OP4                     OP3                          OP2
 J,M@N   J,M/N       J,M6N        J,M=N      J ,M1N                   J ,MN
J5E*   J5E         J5E.        J5E.      J . P             J 5 /5
                                  ::*            ::      J 5* 5                J 5 5
                                                         J 5* 5                J 5 5
                         Table 25. Output Port Configuration Register: OPCR
    Bit 7      Bit 6           Bit 5          Bit 4          Bit 3            Bit 2       Bit 1            Bit 0
 BRG Set      Counter/Timer #1 Mode and Source            Delta IP3        Delta IP2   Delta IP1        Delta IP0
   Select                                                 Interrupt        Interrupt   Interrupt        Interrupt
   J                       Table 4                    J              J         J              J
   J                                                     J 8            J 8       J 8            J 8
                                Table 26. Auxilliary Control Register: ACR
    Bit 7      Bit 6           Bit 5          Bit 4          Bit 3            Bit 2       Bit 1            Bit 0
 Delta IP3  Delta IP2       Delta IP1       Delta IP0         IP3              IP2         IP1              IP0
    J 8     J 8           J 8           J 8         J :           J :      J :           J :
  JE %      JE %           JE %           JE %          J 9(-           J 9(-      J 9(-           J 9(-
                           Table 27. Input Port Configuration Register , IPCR
  
                                                     /1


XR68C681
   Bit 7       Bit 6       Bit 5          Bit 4        Bit 3          Bit 2    Bit 1    Bit 0
Input Port Delta Break   RXRDY/        TXRDYB       Counter #1   Delta Break RXRDY/   TXRDYA
 Change         B        FFULLB                       Ready            A     FFULLA
   J 8      J 8        J 8          J 8        J 8         J 8     J 8    J 8
  JE %      JE %       JE %          JE %         JE %         JE %    JE %     JE %
                              Table 28. Interrupt Status Register, ISR
   Bit 7       Bit 6       Bit 5          Bit 4        Bit 3          Bit 2    Bit 1    Bit 0
Input Port Delta Break   RXRDY/        TXRDYB       Counter #1   Delta Break RXRDY/   TXRDYA
 Change         B        FFULLB                       Ready            A     FFULLA
   J ++     J ++       J ++         J ++       J ++        J ++    J ++   J ++
  J        J          J            J          J           J       J      J
                               Table 29. Interrupt Mask Register, IMR
   Bit 7       Bit 6       Bit 5          Bit 4        Bit 3          Bit 2    Bit 1    Bit 0
  .6    .=     .1        .       .       .   .   .<
                       Table 30. Counter/Timer Upper Byte Register, CTUR
   Bit 7       Bit 6       Bit 5          Bit 4        Bit 3          Bit 2    Bit 1    Bit 0
  .@      ./      .6         .=       .1         .   .   .
                       Table 31. Counter/Timer Lower Byte Register, CTLR
   Bit 7       Bit 6       Bit 5          Bit 4        Bit 3          Bit 2    Bit 1    Bit 0
  #;@      #;/      #;6         #;=       #;1         #;   #;   #;
                              Table 32. Interrupt Vector Register: IVR
  
                                                 /=


             XR68C681
  
          /6


  XR68C681
J. Timing Diagrams
                                                  ;                                            ;
                                     =;                            % :  %
                                                  <;                                            <;
                             Figure 31. Input and Output Levels for Timing Measurements
Note:
  AC testing inputs are driven at 0.4V for a logic â€œ0â€ and 2.4V for a logic â€œ1â€ except for -40 to 85C and -55 to 125C, logic â€œ1â€ shall be
  2.6V. Timing measurements are made at 0.8V for a logic â€œ0â€ and 2.0V for a logic â€œ1â€.
      22
                                                                    2
                                                          Figure 32. Reset Timing
    
                                                                 //


                                                    XR68C681
                  
 5.:7
                                     9
   =
              A                         A9
    .A
                                             A
     
                                              
              
   @
                             
                        :
 7
                               9
                                       
              Figure 33. XR68C681 Read Cycle Timing
  
                              /@


XR68C681
                           
       5.:7
                                             9
        =
                 A
                                                      A9
         .A
                                                    A
          
                         
         @
                                  :
                                      
       7
                                                           9
                                                
                     Figure 34. XR68C681 Write Cycle Timing
  
                                      /<


                                                        XR68C681
              
     5.:7
       #8
      # 7
                                           
       @                 ;2
                         :      
      7
                                        9
                          
                                            
             Figure 35. XR68C681 Interrupt Cycle Timing
  
                                  /


XR68C681
       
                   ,                               ,9
  #,  #,6
   .A 
    
 ,  ,@             :                               82A  
                                                   ,
                            Figure 36. Port Timing
            .A 
              
                                                       #
             #8
                         Figure 37. Interrupt Timing
  
                                     @


                                                               XR68C681
                      4  ? & O 6 
                      4  ? & O 6 
                      4   
                      4   
                                             
                                                   5
                   
                                                     5/</<
                   
                                             
                                                  5
                        1/</=9G
                        ,   %   &%
           5.:7
                                                          :7
          . :7
               5                                        
               5                                        5
                                       :7
                                       
                                       5
                            Figure 38. Clock Timing
  
                                         @


XR68C681
                           *( (
                         / '3%
      5
     # 
              5
       5
                           
    5
 5 
                      Figure 39. Transmitter Timing
     5
    5 # 
                   5                59
        5
                         Figure 40. Receiver Timing
  
                                         @


                                                                                XR68C681
             44 LEAD PLASTIC LEADED CHIP CARRIER
                                          (PLCC)
                                         Rev. 1.00
                       D                                                   C
                                                                                  ( - ,
                      D                                          45 x H1
                                                  45 x H2                          A2
                     ==
                                                                                       B1
        D D1                                                                            B D
                                                 D3                                          2
                                                                                        e
                                                                                   R
                       D3
                                                                             A1
                                                                           A
                                      INCHES                MILLIMETERS
                  SYMBOL           MIN      MAX            MIN      MAX
                                 /6     <           =       =6@
                                                       16
                                       RRR          6        RRR
                   *             1                11       61
                   *            /     1           //       <
                                <     1                  1
                                /<6     /6          @=     @/6
                               /6     /6/          /6     ///
                               6     /1          =     /
                   1                 6 &              @ &
                                     6 *                @ *
                   9            =     6/           @       =
                   9            =     =<           @       
                                6     =6           /=       =
                 Note: The control dimension is the inch column
  
                                            @1


XR68C681
                    40 LEAD CERAMIC DUAL-IN-LINE
                                    (600 MIL CDIP)
                                           Rev. 1.00
               =                                                    
                                                                    
                                                                                  E
                                    D                                             E1
  Base      A1
  Plane                                                                       A
 Seating  L
  Plane
                                 e                                                   c
                  B                                    B1                       
                                         INCHES                MILLIMETERS
                     SYMBOL           MIN       MAX           MIN       MAX
                                          6          6=       6@
                                   6      @6          1<       
                      *             =      /          1/       //
                      *            =6      /6          =       /6
                      '             <      <                 =/
                                                  666      61
                      2            66      /         1@      6=
                      2                  / *               6= *
                                          *                6= *
                      :             6                1<       6<
                                              6                    6
                    Note: The control dimension is the inch column
  
                                              @=


                                                                                        XR68C681
                                                         8#2
25  (  %  %  (-   3 '  - %   $'% ' ( $ (  (% ('( ( $   (
 $ %(- "  + '   (((& 25  ( %% %   % %(((& +  % +  & '('(% $ 
%'( $  ( " '  &%  (' %  $   &      (- "  $ 3 %    % (    '('(% 
+ +   ( +( -    %  $ %' $ % ' ( $  (   & + (%( % %  $ & &
$  $( -   % F% % '(+(' ('(  A (  ( +( (  (% ('( %              ' +& ' '3 $K
    % %(((&"   " (% %% $ + ( '''( %
25  ( $ %   ' $  % +  & + (% $'% ( (+ % ('( %    +( 
+ '( +  $' '  % &  ! ' $  '% +( +  (+ % %&%    %(- (+(' &
++ ' (% %+ &  ++ '(  %% ,$'%    (G $ + % ( %' ('( %   %% 25  (
 ' ( %" ( (( -" %% ' %  (% %(%+'(  4   (%3 + ( L&  $- %       ( ((G $K  
%  %% %  %' (%3%K '  ( (((& + 25  ( (% $ C &  ' $  $   '('
% ' %
&(-   25  (
%            
 $'( " (     " (       ( (    ' %  + 25  ( (%  (( $
   
                                                          @6


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
MaxLinear:
 XR68C681J-F XR68C681CJ-F XR68C681JTR-F XR68C681CJTR-F
