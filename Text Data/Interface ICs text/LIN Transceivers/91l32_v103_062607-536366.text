xr                                                                                                                                                                                                                    XRT91L32
                                                                                 STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
JUNE 2007                                                                                                                                                                                                                                 REV. 1.0.3
GENERAL DESCRIPTION                                                                                                                                   parallel clock signal from the framer/mapper to
                                                                                                                                                      synchronize the transmit section timing. The device
The XRT91L32 is a fully integrated SONET/SDH                                                                                                          can internally monitor Loss of Signal (LOS) condition
transceiver for SONET/SDH 622.08 Mbps STS-12/                                                                                                         and automatically mute received data upon LOS. An
STM-4 or 155.52 Mbps STS-3/STM-1 applications.                                                                                                        on-chip SONET/SDH frame byte and boundary
The transceiver includes an on-chip Clock Multiplier                                                                                                  detector and frame pulse generator offers the ability
Unit (CMU), which uses a high frequency Phase-                                                                                                        recover SONET/SDH framing and to byte align the
Locked Loop (PLL) to generate the high-speed                                                                                                          receive serial data stream into the 8-bit parallel bus.
transmit serial clock from a slower external clock
reference. It also provides Clock and Data Recovery                                                                                                   APPLICATIONS
(CDR) function by synchronizing its on-chip Voltage                                                                                                   • SONET/SDH-based Transmission Systems
Controlled Oscillator (VCO) to the incoming serial
data stream. The internal CDR unit can be disabled                                                                                                    • Add/Drop Multiplexers
and bypassed in lieu of an externally recovered                                                                                                       • Cross Connect Equipment
received clock from the optical module. Either the                                                                                                    • ATM and Multi-Service Switches, Routers and
internally recovered clock or the externally recovered                                                                                                      Switch/Routers
clock can be used for loop timing applications. The
chip provides serial-to-parallel and parallel-to-serial                                                                                               • DSLAMS
converters using an 8-bit wide LVTTL system                                                                                                           • SONET/SDH Test Equipment
interface in both receive and transmit directions.                                                                                                    • DWDM Termination Equipment
The transmit section includes an option to accept a
FIGURE 1. BLOCK DIAGRAM OF XRT91L32
                                                                                                                            XRT91L32
                                                                                                        STS-12/STM-4 or STS-3/STM-1
                                                                                                               TRANSCEIVER
            TXDI[7:0]                                                                                       PISO                                                                                                                 TXOP/N
                                                                                                                                                                           Re-Timer
                                                                                                        (Parallel Input
                                                                                                        Serial Output)
                        8      ENB
                                             ENB           MUX
         TXPCLK_IO
                                                                        Div by
            REFCLKP/N                                                     8
                                     XOR
                                                                                                                                                      CMU                                                ALOOP
                                                                                                                                                                     RLOOPS
         TTLREFCLK
                                                                                         DLOOP
        CDRAUXREFCLK                                                    MUX
                                                                                                          MUX
                                                                         SIPO
            RXDO[7:0]                                                (Serial Input                                                                              CDR                                                              RXIP/N
                                                                    Parallel Output)
                                        8                                                                              MUX
                                                                                                                                                                                                                               XRXCLKIP/N
         RXPCLKO                                             Div by 8
                                                                                                                           Control Block                                                               Clock Control
                             Loop Filters
                            CAP1P    CAP2P         CAP1N    CAP2N
                                                                                                                                                                       DLOSDIS   LOSEXT                               CDRDIS
                                                                                                                                                               OOF
                                                                                                                             RLOOPS   DLOOP
                                                                                                                                                                                          CMUFREQSEL
                                                                                                                                                                                                          CDRREFSEL
                                                                                                                LOOPTIME
                                                                                 Reset                                                        ALOOP
                                                                                         STS-12/STS-3
                                                                                                                                                        FRAMEPULSE
Exar Corporation 48720 Kato Road, Fremont CA, 94538 • (510) 668-7000 • FAX (510) 668-7017 • www.exar.com


XRT91L32                                                                                           xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                         REV. 1.0.3
FEATURES
• Targeted for SONET STS-12/STS-3 and SDH STM-4/STM-1 Applications
• Selectable full duplex operation between STS-12/STM-4 standard rate of 622.08 Mbps or STS-3/STM-1
  155.52 Mbps
• Single-chip fully integrated solution containing parallel-to-serial converter, clock multiplier unit (CMU), serial-
  to-parallel converter, clock data recovery (CDR) functions, and a SONET/SDH frame and byte boundary
  detection circuit
• Ability to disable and bypass onchip CDR for external based received reference clock recovery thru
  Differential LVPECL input pins XRXCLKIP/N
• 8-bit LVTTL parallel data bus paths running at 77.76 Mbps in STS-12/STM-4 or 19.44 Mbps in STS-3/STM-1
  mode of operation
• Uses Differential LVPECL or Single-Ended LVTTL CMU reference clock frequencies of either 19.44 MHz or
  77.76 MHz for both STS-12/STM-1 or STS-3/STM-1 operations
• Optional use of 77.76 MHz Single-Ended LVTTL input for independent CDR reference clock operation
• Able to Detect and Recover SONET/SDH frame boundary and byte align received data on the parallel bus
• Diagnostics features include LOS monitoring and automatic received data mute upon LOS
• Provides Local, Remote and Split Loop-Back modes as well as Loop Timing mode
• Optional flexibility to re-configure the transmit parallel bus clock output to a clock input and accept timing
  signal from the framer/mapper device to permit the framer/mapper device time domain to be synchronized
  with the transceiver transmit timing.
• Meets Telcordia, ANSI, Bellcore TR-NWT-000253 and GR-253-CORE, and G.783 ITU-T jitter requirements
• Operates at 3.3V with 3.3V I/O
• Less than 660mW in STS-3/STM-1 mode or 800mW in STS-12/STM-4 mode Typical Power Dissipation
• Package: 10 x 10 x 2.0 mm 100-pin QFP
                                                         2


xr                                                                                     XRT91L32
REV. 1.0.3                                    STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
                            FIGURE 2. 100 QFP PIN OUT OF THE XRT91L32 (TOP VIEW)
                                              DLOOP
                                              VDD3.3
                                              CDRREFSEL
                                              STS12/STS3
                                              NC
                                              TXDI0
                                              TXDI1
                                              GND
                                              TXDI2
                                              TXDI3
                                              NC
                                              TXIN4
                                              TXDI5
                                              GND
                                              TXDI6
                                              TXDI7
                                              GND
                                              NC
                                              TXPCLK_IO
                                              VDD
                                              81
                                              82
                                              83
                                              84
                                              85
                                              86
                                              87
                                              88
                                              89
                                              90
                                              91
                                              92
                                              93
                                              94
                                              95
                                              96
                                              97
                                              98
                                              99
                                              100
                                    RLOOPS    1                             80      NC
                                     VDD3.3   2                             79      NC
                                     ALOOP    3                             78      NC
                                     RESET    4                             77      NC
                                 LOOPTIME     5                             76      VDD3.3
                                        NC    6                             75      GND
                                        NC    7                             74      NC
                               CMUFREQSEL     8                             73      NC
                                 VDD_PECL     9                             72      GND
                                      TXOP    10                            71      AGND_RX
                                      TXON    11                            70      AGND_RX
                                       GND    12                            69      AVDD3.3_RX
                                        NC    13                            68      AVDD3.3_RX
                                        NC    14                            67      AVDD3.3_RX
                                 VDD_PECL                                   66      CAP2P
                                        NC
                                              15
                                              16
                                                           XRT91L32         65      CAP2N
                                   DLOSDIS    17                            64      CAP1N
                                       GND    18                            63      CAP1P
                                  XRXCLKIP    19                            62      AVDD3.3_TX
                                  XRXCLKIN    20                            61      NC
                                 VDD_PECL     21                            60      AGND_TX
                                       OOF    22                            59      AGND_TX
                                    CDRDIS    23                            58      VDD3.3
                                       RXIP   24                            57      NC
                                       RXIN   25                            56      TTLREFCLK
                                        NC    26                            55      GND
                                        NC    27                            54      VDD3.3
                                     VDD3.3   28                            53      LOSEXT
                                   REFCLKP    29                            52      NC
                                   REFCLKN    30                            51      CDRAUXREFCLK
                                               31
                                               32
                                               33
                                               34
                                               35
                                               36
                                               37
                                               38
                                               39
                                               40
                                               41
                                               42
                                               43
                                               44
                                               45
                                               46
                                               47
                                               48
                                               49
                                               50
                                                    VDD3.3
                                                       NC
                                                       NC
                                                      GND
                                                    RXDO0
                                                    RXD01
                                                      GND
                                                    RXDO2
                                                    RXDO3
                                                      GND
                                                    RXDO4
                                                    RXDO5
                                                      GND
                                                    RXDO6
                                                    RXDO7
                                                      GND
                                                  RXPCLKO
                                               FRAMEPULSE
                                                    VDD3.3
                                                       NC
                                        ORDERING INFORMATION
             PART NUMBER                            PACKAGE               OPERATING TEMPERATURE RANGE
             XRT91L32IQ-F                          100 Pin QFP                     -40°C to +85°C
                                                       3


XRT91L32                                                                                                                                                   xr
REV. 1.0.3                                                            STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
                                                           TABLE OF CONTENTS
GENERAL DESCRIPTION .................................................................................................1
  APPLICATIONS ...........................................................................................................................................1
       FIGURE 1. BLOCK DIAGRAM OF XRT91L32 ...................................................................................................................................... 1
  FEATURES ......................................................................................................................................................2
       FIGURE 2. 100 QFP PIN OUT OF THE XRT91L32 (TOP VIEW).......................................................................................................... 3
     ORDERING INFORMATION.....................................................................................................................3
TABLE OF CONTENTS ............................................................................................................ I
PIN DESCRIPTIONS ..........................................................................................................4
   .....................................................................................................................................................................4
  HARDWARE CONTROL ....................................................................................................................................4
  TRANSMITTER SECTION ..................................................................................................................................6
  RECEIVER SECTION ........................................................................................................................................8
  POWER AND GROUND ....................................................................................................................................9
1.0 FUNCTIONAL DESCRIPTION .............................................................................................................11
     1.1 STS-12/STM-4 AND STS-3/STM-1 MODE OF OPERATION ......................................................................... 11
     1.2 CLOCK INPUT REFERENCE FOR CLOCK MULTIPLIER (SYNTHESIZER) UNIT ...................................... 11
       TABLE 1: CMU REFERENCE FREQUENCY OPTIONS (DIFFERENTIAL OR SINGLE-ENDED) ................................................................... 11
     1.3 DATA LATENCY ............................................................................................................................................. 11
       TABLE 2: DATA INGRESS TO DATA EGRESS LATENCY ....................................................................................................................... 11
2.0 RECEIVE SECTION .............................................................................................................................12
     2.1 RECEIVE SERIAL INPUT ............................................................................................................................... 12
       FIGURE 3. RECEIVE SERIAL INPUT INTERFACE BLOCK ..................................................................................................................... 12
     2.2 RECIEVE SERIAL DATA INPUT TIMING ...................................................................................................... 13
       FIGURE 4. RECEIVE HIGH-SPEED SERIAL DATA INPUT TIMING DIAGRAM .......................................................................................... 13
       TABLE 3: RECEIVE HIGH-SPEED SERIAL DATA INPUT TIMING (STS-12/STM-4 OPERATION) ............................................................. 13
       TABLE 4: RECEIVE HIGH-SPEED SERIAL DATA INPUT TIMING (STS-3/STM-1 OPERATION) ............................................................... 13
     2.3 RECEIVE CLOCK AND DATA RECOVERY .................................................................................................. 14
       TABLE 5: CLOCK DATA RECOVERY UNIT REFERENCE CLOCK SETTINGS ............................................................................................ 14
       TABLE 6: CLOCK AND DATA RECOVERY UNIT PERFORMANCE .......................................................................................................... 15
           2.3.1 INTERNAL CLOCK AND DATA RECOVERY BYPASS ............................................................................................ 15
       FIGURE 5. INTERNAL CLOCK AND DATA RECOVERY BYPASS ............................................................................................................ 15
     2.4 EXTERNAL RECEIVE LOOP FILTER CAPACITORS ................................................................................... 16
       FIGURE 6. EXTERNAL LOOP FILTERS .............................................................................................................................................. 16
     2.5 LOSS OF SIGNAL .......................................................................................................................................... 16
       FIGURE 7. LOS DECLARATION CIRCUIT ........................................................................................................................................... 16
     2.6 SONET FRAME BOUNDARY DETECTION AND BYTE ALIGNMENT RECOVERY .................................... 17
     2.7 RECEIVE SERIAL INPUT TO PARALLEL OUTPUT (SIPO) ......................................................................... 17
       FIGURE 8. SIMPLIFIED BLOCK DIAGRAM OF SIPO ........................................................................................................................... 17
     2.8 RECEIVE PARALLEL OUTPUT INTERFACE ............................................................................................... 18
       FIGURE 9. RECEIVE PARALLEL OUTPUT INTERFACE BLOCK ............................................................................................................. 18
     2.9 DISABLE PARALLEL RECEIVE DATA OUTPUT UPON LOS ..................................................................... 18
     2.10 RECEIVE PARALLEL DATA OUTPUT TIMING .......................................................................................... 19
       FIGURE 10. RECEIVE PARALLEL OUTPUT TIMING ............................................................................................................................ 19
       TABLE 7: RECEIVE PARALLEL DATA OUTPUT TIMING (STS-12/STM-4 OPERATION) ......................................................................... 19
       TABLE 8: RECEIVE PARALLEL DATA OUTPUT TIMING (STS-3/STM-1 OPERATION) ........................................................................... 19
       TABLE 9: PECL AND TTL RECEIVE OUTPUTS TIMING SPECIFICATION .............................................................................................. 20
3.0 TRANSMIT SECTION ..........................................................................................................................21
     3.1 TRANSMIT PARALLEL INPUT INTERFACE ................................................................................................. 21
       FIGURE 11. TRANSMIT PARALLEL INPUT INTERFACE BLOCK ............................................................................................................. 21
     3.2 TRANSMIT PARALLEL DATA INPUT TIMING .............................................................................................. 22
       FIGURE 12. TRANSMIT PARALLEL INPUT TIMING .............................................................................................................................. 22
       TABLE 10: TRANSMIT PARALLEL DATA INPUT TIMING (STS-12/STM-4 OPERATION)......................................................................... 22
       TABLE 11: TRANSMIT PARALLEL DATA INPUT TIMING (STS-3/STM-1 OPERATION)........................................................................... 22
     3.3 TRANSMIT PARALLEL INPUT TO SERIAL OUTPUT (PISO) ...................................................................... 23
       FIGURE 13. SIMPLIFIED BLOCK DIAGRAM OF PISO ......................................................................................................................... 23
     3.4 CLOCK MULTIPLIER UNIT (CMU) AND RE-TIMER ..................................................................................... 23
       TABLE 12: CLOCK MULTIPLIER UNIT PERFORMANCE ....................................................................................................................... 23
     3.5 LOOP TIMING AND CLOCK CONTROL ........................................................................................................ 24
       TABLE 13: LOOP TIMING AND CLOCK RECOVERY CONFIGURATIONS ................................................................................................. 24
                                                                                     I


xr                                                                                                                                                                            XRT91L32
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                                                                                                 REV. 1.0.3
        FIGURE 14. LOOP TIMING MODE USING INTERNAL CDR OR AN EXTERNAL RECOVERED CLOCK ....................................................... 25
     3.6 TRANSMIT SERIAL OUTPUT CONTROL ..................................................................................................... 25
        FIGURE 15. TRANSMIT SERIAL OUTPUT INTERFACE BLOCK .............................................................................................................. 25
4.0 DIAGNOSTIC FEATURES ................................................................................................................... 26
     4.1 SERIAL REMOTE LOOPBACK ..................................................................................................................... 26
        FIGURE 16. SERIAL REMOTE LOOPBACK ......................................................................................................................................... 26
     4.2 DIGITAL LOCAL LOOPBACK ....................................................................................................................... 26
        FIGURE 17. DIGITAL LOCAL LOOPBACK ........................................................................................................................................... 26
     4.3 ANALOG LOCAL LOOPBACK ...................................................................................................................... 27
        FIGURE 18. ANALOG LOCAL LOOPBACK .......................................................................................................................................... 27
     4.4 SPLIT LOOPBACK ......................................................................................................................................... 27
        FIGURE 19. SPLIT LOOPBACK ......................................................................................................................................................... 27
     4.5 EYE DIAGRAM ............................................................................................................................................... 28
        FIGURE 20. STS-3/STM-1 EYE DIAGRAM ...................................................................................................................................... 28
        FIGURE 21. STS-12/STM-4 EYE DIAGRAM .................................................................................................................................... 28
     4.6 SONET JITTER REQUIREMENTS ................................................................................................................. 29
            4.6.1 JITTER TOLERANCE: ................................................................................................................................................ 29
        FIGURE 22. JITTER TOLERANCE MASK............................................................................................................................................ 29
        FIGURE 23. XRT91L32 MEASURED JITTER TOLERANCE AT 622.08 MBPS STS-12/STM-4.............................................................. 30
        FIGURE 24. XRT91L32 MEASURED JITTER TOLERANCE AT 155.52 MBPS STS-3/STM-1................................................................ 30
            4.6.2 JITTER GENERATION................................................................................................................................................ 31
        FIGURE 25. XRT91L32 MEASURED ELECTRICAL PHASE NOISE TRANSMIT JITTER GENERATION AT 622.08 MBPS STS-12/STM4 USING
                     ’1010’ OUTPUT PATTERN ................................................................................................................................................. 31
5.0 ELECTRICAL CHARACTERISTICS ................................................................................................... 32
  ABSOLUTE MAXIMUM RATINGS .................................................................................................................. 32
  ABSOLUTE MAXIMUM POWER AND INPUT/OUTPUT RATINGS ......................................................... 32
  POWER AND CURRENT DC ELECTRICAL CHARACTERISTICS .................................................................... 32
   ................................................................................................................................................................... 32
  LVPECL AND LVTTL LOGIC SIGNAL DC ELECTRICAL CHARACTERISTICS...................................... 33
     ORDERING INFORMATION .................................................................................................................. 34
PACKAGE DIMENSIONS ................................................................................................ 34
  REVISION HISTORY ...................................................................................................................................... 35
                                                                                      II


XRT91L32                                                                                xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                REV. 1.0.3
PIN DESCRIPTIONS
L32
HARDWARE CONTROL
     NAME         LEVEL     TYPE   PIN                              DESCRIPTION
    RESET         LVTTL       I     4    Remote Serial Loopback
                                         Active "High." When this pin is pulled "High" , the internal state
                                         machines are set to their default state.
                                         "Low" = Normal Operation
                                         "High" = Master Hardware Reset ( minimum 100nS)
  STS12/STS3      LVTTL       I    97    Data Rate Selection
                                         Selects SONET/SDH transmission and reception speed rate
                                         "Low" = STS-3/STM-1 155.52 Mbps
                                         "High" = STS-12/STM-4 622.08 Mbps
 CMUFREQSEL       LVTTL       I     8    Clock Multiplier Unit Reference Frequency Select
                                         This pin is used to select the frequency of the REFCLKP/N or
                                         TTLREFCLK input to the CMU.
                                         "Low" = 77.76 MHz reference clock
                                         "High" = 19.44 MHz reference clock
                                                                      REFCLKP/N OR
                                              CMU-        STS12/       TTLREFCLK
                                                                                           DATA RATE
                                            FREQSEL        STS3         REFERENCE
                                                                        FREQUENCY
                                                0            0           77.76 MHz        STS-3/STM-1
                                                                                          155.52 Mbps
                                                0            1           77.76 MHz       STS-12/STM-4
                                                                                          622.08 Mbps
                                                1            0           19.44 MHz        STS-3/STM-1
                                                                                          155.52 Mbps
                                                1            1           19.44 MHz       STS-12/STM-4
                                                                                          622.08 Mbps
                                         NOTE: REFCLKP/N or TTLREFCLK input should be generated
                                                  from an LVPECL/LVTTL crystal oscillator which has a
                                                  frequency accuracy better than 20ppm in order for the
                                                  transmitted data rate frequency to have the necessary
                                                  accuracy required for SONET systems..
                                           4


xr                                                                                           XRT91L32
REV. 1.0.3                     STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
       NAME   LEVEL    TYPE    PIN                                DESCRIPTION
  CDRREFSEL   LVTTL      I     98     Clock and Data Recover Unit Reference Frequency Select
                                      Selects the Clock and Data Recovery Unit reference frequency
                                      based on the table below.
                                      "Low" = CDR uses CMU’s reference clock
                                      "High" = CDR reference clock from CDRAUXREFCLK
                                        CDRREFSEL        STS12/     CDRAUXREFCLK
                                                                                           DATA RATE
                                                          STS3         FREQUENCY
                                                                 CDR uses CMU’s reference clock
                                              0                     (see CMUFREQSEL pin)
                                              1             0          77.76 MHz         STS-3/STM-1
                                                                                          155.52 Mbps
                                              1             1          77.76 MHz         STS-12/STM-4
                                                                                          622.08 Mbps
                                      NOTE:      CDRAUXREFCLK requires accuracy of 77.76 MHz
                                                +/- 500ppm.
   LOOPTIME   LVTTL      I      5     Loop Timing Mode
                                      When the loop timing mode is activated the external reference
                                      clock to the input of the Retimer is replaced with the high-speed
                                      recovered receive clock from the CDR.
                                      "Low" = Disabled
                                      "High" = Loop timing Activated
     CDRDIS   LVTTL      I     23     Clock and Data Recovery Unit Disable
                                      Active "High." Disables internal Clock and Data Recovery unit.
                                      Received serial data bypasses the integrated CDR block.
                                      RXINP/N is then sampled on the rising edge of externally
                                      recovered differential clock XRXCLKIP/N coming from the opti-
                                      cal module.
                                      "Low" = Internal CDR unit is Enabled
                                      "High" = Internal CDR unit is Disabled and Bypassed
     RLOOPS   LVTTL      I      1     Serial Remote Loopback
                                      The serial remote loopback mode interconnects the receive
                                      serial data input to the transmit serial data output. If serial
                                      remote loopback is enabled, the 8-bit parallel transmit data
                                      input is ignored while the 8-bit parallel receive data output is
                                      maintained.
                                      "Low" = Disabled
                                      "High" = Serial Remote Loopback Mode Enabled
                                      NOTE: DLOOP and RLOOPS can be enabled simultaneously
                                                to achieve a dual loopback diagnostic feature in normal
                                                operation.
         NC No Connect   -   6,7,13, NOTE: No connect
                            14,16,26,
                            27,32,33,
                            50,52,57,
                            61,73,74,
                            77,78,79,
                            80,83,90,
                               96
                                         5


XRT91L32                                                                                 xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                  REV. 1.0.3
     NAME         LEVEL     TYPE   PIN                               DESCRIPTION
    ALOOP         LVTTL       I     3    Analog Local Loopback
                                         This loopback feature serializes the 8-bit parallel transmit data
                                         input and presents the data to the transmit serial output and in
                                         addition it also internally routes the serialized data back to the
                                         Clock and Data Recovery block for serial to parallel conversion.
                                         The received serial data input is ignored.
                                         "Low" = Disabled
                                         "High" = Analog Local Loopback Mode Enabled
    DLOOP         LVTTL       I    100   DLOOP Local Loopback
                                         This digital loopback mode interconnects the 8-bit parallel
                                         transmit data input and TXCLK to the 8-bit parallel receive data
                                         output and receive RXCLK respectively while maintaining the
                                         transmit serial data output. If digital loopback is enabled, the
                                         receive serial data input is ignored.
                                         "Low" = Disabled
                                         "High" = Digital Local Loopback Mode Enabled
                                         NOTE: DLOOP and RLOOPS can be enabled simultaneously
                                                  to achieve a dual loopback diagnostic feature in normal
                                                  operation.
TRANSMITTER SECTION
     NAME         LEVEL     TYPE   PIN                               DESCRIPTION
     TXDI0        LVTTL       I     95   Transmit Parallel Data Input
     TXDI1                          94   Transmit Parallel Clock Output Operation
     TXDI2                          92   The 77.76 Mbps (STS-12/STM-4) / 19.44 Mbps (STS-3/STM-1)
     TXDI3                          91   8-bit parallel transmit data should be applied to the transmit
     TXDI4                          89   parallel bus and simultaneously referenced to the rising edge of
                                         the TXPCLK_IO clock output. The 8-bit parallel interface is mul-
     TXDI5                          88
                                         tiplexed into the transmit serial output interface with the MSB
     TXDI6                          86   first (TXDI[7:0]).
     TXDI7                          85
                                         Alternate Transmit Parallel Clock Input Operation
                                         When operating is this mode, TXPCLK_IO is no longer a paral-
                                         lel clock output reference but reverses direction and serves as
                                         the parallel transmit clock input reference for the PISO (Parallel
                                         Input to Serial Output) block. The 77.76 Mbps (STS-12/STM-4)
                                         / 19.44 Mbps (STS-3/STM-1) 8-bit parallel transmit data should
                                         be applied to the transmit parallel bus and simultaneously refer-
                                         enced to the rising edge of the TXPCLK_IO clock input.
     TXOP       LVPECL Diff  O      10   Transmit Serial Data Output
     TXON                           11   The transmit serial data stream is generated by multiplexing the
                                         8-bit parallel transmit data input into a 622.08 Mbps STS-12/
                                         STM-4 or 155.52 Mbps STS-3/STM-1 serial data stream.
                                            6


xr                                                                                          XRT91L32
REV. 1.0.3                     STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
TRANSMITTER SECTION
       NAME     LEVEL     TYPE PIN                              DESCRIPTION
   TXPCLK_O     LVTTL      O   82    Transmit Parallel Clock Output (77.76/19.44 MHz)
                                     Transmit Parallel Clock Output Operation
                                     This pin will output a 77.76 MHz (STS-12/STM-4) or 19.44 MHz
                                     (STS-3/STM-1) clock output reference for the 8-bit parallel
                                     transmit data input TXDI[7:0]. This clock is used by the framer/
                                     mapper device to present the TXDI[7:0] data which the
                                     XRT91L32 will latch on the rising edge of this clock. This
                                     enables the framer/mapper device and the XRT91L32 trans-
                                     ceiver to be in synchronization.
    REFCLKP   LVPECL Diff   I  29    Reference Clock Input (77.76 MHz or 19.44 MHz)
    REFCLKN                    30    This differential clock input reference is used for the transmit
                                     clock multiplier unit (CMU) and clock data recovery (CDR) to
                                     provide the necessary high speed clock reference for this
                                     device. It will accept either a 77.76 MHz or a 19.44 MHz Differ-
                                     ential LVPECL clock source. Pin CMUFREQSEL determines
                                     the value used as the reference. See Pin CMUFREQSEL for
                                     more details. REFCLKP/N inputs are internally biased to 1.65V.
                                     NOTE:     In the event that TTLREFCLK LVTTL input is used
                                              instead of these differential inputs for clock reference,
                                              the REFCLKP should be tied to ground.
   TTLREFCLK    LVTTL       I  56    Auxillary Reference Clock Input (77.76 MHz or 19.44 MHz)
                                     This LVTTL clock input reference is used for the transmit clock
                                     multiplier unit (CMU) and clock data recovery (CDR) to provide
                                     the necessary high speed clock reference for this device. It will
                                     accept either a 77.76 MHz or a 19.44 MHz LVTTL clock source.
                                     Pin CMUFREQSEL determines the value used as the refer-
                                     ence. See Pin CMUFREQSEL for more details.
                                     NOTE: In the event that REFCLKP/N differential inputs is used
                                              instead of this LVTTL input for clock reference, the
                                              TTLREFCLK should be tied to ground.
                                        7


XRT91L32                                                                                  xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                  REV. 1.0.3
RECEIVER SECTION
     NAME          LEVEL    TYPE   PIN                              DESCRIPTION
    RXDO0         LVTTL      O     35    Receive Parallel Data Output
    RXDO1                          36    77.76 Mbps (STS-12/STM-4) / 19.44 Mbps (STS-3/STM-1)
    RXDO2                          38    8-bit parallel receive data output is updated simultaneously on
    RXDO3                          39    the rising edge of the RXPCLKO output. The 8-bit parallel inter-
                                         face is de-multiplexed from the receive serial data input MSB
    RXDO4                          41
                                         first (RXDO[7:0]). The XRT91L32 will output the data on the
    RXDO5                          42    rising edge of this clock.
    RXDO6                          44
    RXDO7                          45
     RXIP      Diff LVPECL    I    24    Receive Serial Data Input
     RXIN                          25    The differential receive serial data stream of 622.08 Mbps
                                         STS-12/STM-1 or 155.52 Mbps STS-3/STM-1 is applied to
                                         these input pins.
   XRXCLKIP    Diff LVPECL    I    19    External Recovered Receive Clock Input
   XRXCLKIN                        20    The differential receive serial data stream of 622.08 Mbps
                                         STS-12/STM-1 or 155.52 Mbps STS-3/STM-1 is sampled on
                                         the rising edge of this externally recovered differential clock
                                         coming from the optical module. It is used when the internal
                                         CDR unit is disabled and bypassed by the CDRDIS pin.
                                         NOTE: In the event that XRXCLKIP/N differential input pins are
                                                  unused, XRXCLKIP should be tied to VCC with a 1k
                                                  Ohm pull-up and XRXCLKIN should be tied to Ground
                                                  with a 1k Ohm pull-down.
   RXPCLKO        LVTTL      O     47    Receive Parallel Clock Output (77.76 MHz or 19.44 MHz)
                                         77.76 MHz (STS-12/STM-4) or 19.44 MHz (STS-3/STM-1)
                                         clock output reference for the 8-bit parallel receive data output
                                         RXDO[7:0]. The parallel received data output bus will be
                                         updated on the falling edge of this clock.
   CDRAUX-        LVTTL       I    51    Clock and Data Recovery Auxillary Reference Clock
    REFCLK                               77.76 MHz ± 500 ppm auxillary reference clock for the CDR.
                                         NOTE: In the event that CDRAUXREFCLK LVTTL input pin is
                                                  unused, CDRAUXREFCLK should be tied to ground.
     OOF          LVTTL       I    22    Out of Frame Input Indicator
                                         This level sensitive input pin is used to initiate frame detection
                                         and byte alignment recovery when OOF is declared by the
                                         downstream device. When this pin is held High, FRAME-
                                         PULSE will pulse for a single RXPCLKO period upon the detec-
                                         tion of every third frame alignment A2 byte in the incoming
                                         SONET/SDH Frame.
                                         "Low" = Normal Operation
                                         "High" = OOF Indication initiating frame detection and byte
                                                   boundary recovery and activating FRAMEPULSE
 FRAMEPULSE       LVTTL      O     48    Sonet Frame Alignment Pulse
                                         This pin will generate a single pulse for an RXPCLKO clock
                                         period upon the detection of the third frame alignment A2 byte
                                         whenever the OOF input pin is held High. The parallel received
                                         data output bus will then be byte aligned to this newly recov-
                                         ered SONET/SDH frame.
                                            8


xr                                                                                                  XRT91L32
REV. 1.0.3                             STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
       NAME      LEVEL      TYPE       PIN                              DESCRIPTION
      CAP1P     Analog        -        63     CDR Non-Inverting External Feeback Capacitor
      CAP2P                            66     C1 = 0.47μF ± 10% tolerance
                                              (Isolate from noise and place close to pin)
      CAP1N     Analog        -        64     CDR Inverting External Feeback Capacitor
      CAP2N                            65     C2 = 0.47μF ± 10% tolerance
                                              (Isolate from noise and place close to pin)
     DLOSDIS    LVTTL         I        17     LOS (Los of Signal) Detect Disable
                                              Disables internal LOS monitoring and automatic muting of
                                              RXDO[7:0] upon LOS detection (according to gating shown in
                                              Figure 7.) LOS is declared when a string of 128 consecutive
                                              zeros occur on the line. LOS condition is cleared when the 16
                                              or more pulse transitions is detected for 128 bit period sliding
                                              window.
                                              "Low" = Monitor and Mute received data upon LOS declaration
                                              "High" = Disable internal LOS monitoring (see Figure 7 for logic
                                              operation.)
     LOSEXT   SE-LVPECL       I        53     LOS or Signal Detect Input from Optical Module
                                              Active "Low." When active, this pin can force the received data
                                              output bus RXDO[7:0] to a logic state of ’0’ per Figure 7.
                                              "Low" = Forced LOS
                                              "High" = Normal Operation
POWER AND GROUND
      NAME   TYPE             PIN                                       DESCRIPTION
    VDD3.3   PWR        2,28,31,49,54,     3.3V CMOS Power Supply
                         58,76,99,81       VDD3.3 should be isolated from the analog VDD power supplies.
                                           Use a ferrite bead along with an internal power plane separation.
                                           The VDD3.3 power supply pins should have bypass capacitors to
                                           the nearest ground. For best results, refer to Application notes
                                           about general board layout guidelines.
 AVDD3.3_TX  PWR              62           Analog 3.3V Transmitter Power Supply
                                           AVDD3.3_TX should be isolated from the digital power supplies.
                                           For best results, use a ferrite bead along with an internal power
                                           plane separation. The AVDD3.3_TX power supply pins should
                                           have bypass capacitors to the nearest ground.
 AVDD3.3_RX  PWR           67,,68,69       Analog 3.3V Receiver Power Supply
                                           AVDD3.3_RX should be isolated from the digital power supplies.
                                           For best results, use a ferrite bead along with an internal power
                                           plane separation. The AVDD3.3_RX power supply pins should
                                           have bypass capacitors to the nearest ground.
 VDD_LVPECL  PWR            9,15,21        3.3V Input/Output LVPECL Bus Power Supply
                                           These pins require a 3.3V potential voltage for properly biasing
                                           the Differential LVPECL input and output pins.
  AGND_TX    PWR             59,60         Transmitter Analog Ground for 3.3V Analog Power Supplies
                                           It is recommended that all ground pins of this device be tied
                                           together.
                                                 9


XRT91L32                                                                                      xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                     REV. 1.0.3
    NAME       TYPE            PIN                                       DESCRIPTION
  AGND_RX     PWR             70,71           Receiver Analog Ground for 3.3V Analog Power Supplies
                                              It is recommended that all ground pins of this device be tied
                                              together.
    GND        GND   12,18,34,37,40,43,46,55, Power Supply and Thermal Ground
                          72,75,84,87,93      It is recommended that all ground pins of this device be tied
                                              together.
                                                   10


xr                                                                                                  XRT91L32
REV. 1.0.3                                     STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
 1.0 FUNCTIONAL DESCRIPTION
The XRT91L32 transceiver is designed to operate with a SONET Framer/ASIC device and provide a high-
speed serial interface to optical networks. The transceiver converts 8-bit parallel data running at 77.76 Mbps
(STS-12/STM-4) or 19.44 Mbps (STS-3/STM-1) to a serial Differential LVPECL bit stream at 622.08 Mbps or
155.52 Mbps and vice-versa. It implements a clock multiplier unit (CMU), SONET/SDH serialization/de-
serialization (SerDes), receive clock and data recovery (CDR) unit and a SONET/SDH frame and byte
boundary detection circuit. The transceiver is divided into Transmit and Receive sections and is used to
provide the front end component of SONET equipment, which includes primarily serial transmit and receive
functions.
 1.1     STS-12/STM-4 and STS-3/STM-1 Mode of Operation
Functionality of the transceiver can be configured by using the appropriate signal level on the STS-12/STS-3
pin. STS-3/STM-1 mode is selected by pulling STS-12/STS-3 "Low" as described in the Hardware Pin
Descriptions. However, if STS-12/STM-4 mode is desired, it is selected by pulling STS-12/STS-3 "High."
Therefore, the following sections describe the functionality rather than how each function is controlled. Hence,
the hardware Pin and the Register Bit Descriptions focus on device configuration.
 1.2     Clock Input Reference for Clock Multiplier (Synthesizer) Unit
The XRT91L32 can accept both a 19.44 MHz or a 77.76 MHz Differential LVPECL clock input at REFCLKP/N
or a Single-Ended LVTTL clock at TTLREFCLK as its internal timing reference for generating higher speed
clocks. The REFCLKP/N or TTLREFCLK input should be generated from an LVPECL/LVTTL crystal oscillator
which has a frequency accuracy better than 20ppm in order for the transmitted data rate frequency to have the
necessary accuracy required for SONET systems. The reference clock can be provided with one of two
frequencies chosen by CMUFREQSEL. The reference frequency options for the XRT91L32 are listed in
Table 1.
               TABLE 1: CMU REFERENCE FREQUENCY OPTIONS (DIFFERENTIAL OR SINGLE-ENDED)
                                              REFCLKP/N OR TTLREFCLK
    CMUFREQSEL             STS12/STS3                                                     DATA RATE
                                                  REFERENCE FREQUENCY
            0                     0                    77.76 MHz                        STS-3/STM-1
                                                                                         155.52 Mbps
            0                     1                    77.76 MHz                       STS-12/STM-4
                                                                                         622.08 Mbps
            1                     0                    19.44 MHz                        STS-3/STM-1
                                                                                         155.52 Mbps
            1                     1                    19.44 MHz                       STS-12/STM-4
                                                                                         622.08 Mbps
 1.3     Data Latency
Due to different operating modes and data logic paths through the device, there is an associated latency from
data ingress to data egress. Table 2 specifies the data latency for a typical path.
                               TABLE 2: DATA INGRESS TO DATA EGRESS LATENCY
        MODE OF                         DATA PATH                     CLOCK REFERENCE RANGE OF CLOCK
       OPERATION                                                                                 CYCLES
        Thru-mode        MSB at RXIP/N to data on RXDO[7:0]           Recoved RXIP/N Clock        25 to 35
 Serial Remote Loopback MSB at RXIP/N to MSB at TXOP/N                Recoved RXIP/N Clock         2 to 4
                                                       11


XRT91L32                                                                                             xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                          REV. 1.0.2
 2.0 RECEIVE SECTION
The receive section of XRT91L32 include the inputs RXIP/N, followed by the clock and data recovery unit
(CDR) and receive serial-to-parallel converter. The receiver accepts the high speed Non-Return to Zero (NRZ)
serial data at 622.08 Mbps or 155.52 Mbps through the input interfaces RXIP/N. The clock and data recovery
unit recovers the high-speed receive clock from the incoming scrambled NRZ data stream. The recovered
serial data is converted into an 8-bit-wide, 77.76 Mbps or 19.44 Mbps parallel data and presented to the
RXDO[7:0] parallel interface. This parallel interface is designed for Single-Ended LVTTL operation. A divide-
by-8 version of the high-speed recovered clock RXPCLKOP/N, is used to synchronize the transfer of the 8-bit
RXDO[7:0] data with the receive portion of the framer/mapper device. Upon initialization or loss of signal or
loss of lock, the external reference clock signal of 19.44 MHz or 77.76 MHz is used to start-up the clock
recovery phase-locked loop for proper operation. In certain applications, the CDR block on the XRT91L32 can
be disabled and bypassed by enabling the CDRDIS pin to permit the flexibility of using an externally recovered
receive clock thru the XRXCLKIP/N pins.7
 2.1     Receive Serial Input
The receive serial inputs are applied to RXIP/N. The receive serial inputs can be AC or DC coupled to an
optical module or an electrical interface. A simplified AC coupling block diagram is shown in Figure 3.(Also,
FIGURE 3. RECEIVE SERIAL INPUT INTERFACE BLOCK
                                     Install terminators close to
                                        RXIP and RXIN pins
                                        82 Ohm
                  RXIP
                                                                         SFP, Optical Module
                  RXIN
                                                                                                      Optical Fiber
                                   130 Ohm                              Internally
          XRT91L32
                                                                      AC coupled
         STS-12/STM-4
               or                                          1KOhm
         STS-3/STM-1                                              Tie unused differential input pins
          Transceiver                                                    to VCC and GND
              XRXCLKIP                                    1KOhm
             XRXCLKIN
                          (optional)
refer to application note TAN-9132.)
NOTE: Some optical modules integrate AC coupling capacitors within the module. AC or DC coupling is largely specific to
        system design and optical module of choice.
                                                                  12


xr                                                                                            XRT91L32
REV. 1.0.2                                        STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
 2.2      Recieve Serial Data Input Timing
The received High-Speed Serial Differential Data Input must adhere to the set-up and hold time timing
specifications below.
FIGURE 4. RECEIVE HIGH-SPEED SERIAL DATA INPUT TIMING DIAGRAM
                                                                    tRXCLK
                XRXCLKIP
                XRXCLKIN
                                                                           tRX_HD
                                                tRX_SU
                  RXIP
                  RXIN
              TABLE 3: RECEIVE HIGH-SPEED SERIAL DATA INPUT TIMING (STS-12/STM-4 OPERATION)
       SYMBOL                                   PARAMETER                         MIN  TYP  MAX   UNITS
        tRXCLK         Receive external recovered clock period                        1.608        ns
        tRX_SU         Serial data setup time with respect to XRXCLKIP/N          400              ps
        tRX_HD         Serial data hold time with respect to XRXCLKIP/N           100              ps
              TABLE 4: RECEIVE HIGH-SPEED SERIAL DATA INPUT TIMING (STS-3/STM-1 OPERATION)
        SYMBOL                                  PARAMETER                         MIN  TYP  MAX  UNITS
         tRXCLK        Receive external recovered clock period                        6.43         ns
         tRX_SU        Serial data setup time with respect to XRXCLKIP/N          1.5              ns
         tRX_HD        Serial data hold time with respect to XRXCLKIP/N           1.5              ns
                                                            13


XRT91L32                                                                                                            xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                                            REV. 1.0.2
 2.3        Receive Clock and Data Recovery
The clock and data recovery (CDR) unit accepts the high speed NRZ serial data from the Differential LVPECL
receiver and generates a clock that is the same frequency as the incoming data. The clock recovery can either
utilize the transmitter’s CMU reference clock from either REFCLKP/N or TTLREFCLK or it can use
independent clock source CDRAUXREFCLK to train and monitor its clock recovery PLL. Initially upon startup,
the PLL locks to the local reference clock within ±500 ppm. Once this is achieved, the PLL then attempts to
lock onto the incoming receive data stream. Whenever the recovered clock frequency deviates from the local
reference clock frequency by more than approximately ±500 ppm, the clock recovery PLL will switch and lock
back onto the local reference clock. Whenever a Loss of Lock or a Loss of Signal event occurs, the CDR will
continue to supply a receive clock (based on the local reference) to the framer/mapper device. When the
LOSEXT is asserted by the optical module or when LOS is detected, the receive parallel data output will be
forced to a logic zero state for the entire duration that a LOS condition is detected. This acts as a receive data
mute upon LOS function to prevent random noise from being misinterpreted as valid incoming data. When the
LOSEXT becomes inactive and the recovered clock is determined to be within ±500 ppm accuracy with respect
to the local reference source and LOS is no longer declared, the clock recovery PLL will switch and lock back
onto the incoming receive data stream. Table 5 shows Clock and Data Recovery reference clock settings.
Table 6 specifies the Clock and Data Recovery Unit performance characteristics.
                            TABLE 5: CLOCK DATA RECOVERY UNIT REFERENCE CLOCK SETTINGS
                                                           REFCLKP/N1OR
                                          STS12/                                      CDRAUXREFCLK2                  CDR OUTPUT
 CMUFREQSEL CDRREFSEL                                       TTLREFCLK1
                                            STS3                                       FREQUENCY (MHZ)            FREQUENCY (MHZ)
                                                          FREQUENCY (MHZ)
          0                  0                0                77.76 MHz                     not used                   155.52
          0                  0                1                77.76 MHz                     not used                   622.08
          1                  0                0                19.44 MHz                     not used                   155.52
          1                  0                1                19.44 MHz                     not used                   622.08
          X                  1                0        not referenced by CDR                77.76 MHz                   155.52
          X                  1                1        not referenced by CDR                77.76 MHz                   622.08
      1
        Requires frequency accuracy better than 20ppm in order for the transmitted data rate frequency to have the necessary
       accuracy required for SONET systems.
      2
        CDRAUXREFCLK requires accuracy of 77.76 MHz +/- 500ppm.
                                                                    14


xr                                                                                                XRT91L32
REV. 1.0.2                                               STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
                                 TABLE 6: CLOCK AND DATA RECOVERY UNIT PERFORMANCE
    NAME                                           PARAMETER                                       MIN       TYP       MAX       UNITS
REFDUTY           Reference clock duty cycle                                                       40                   60           %
REFJIT            Reference clock jitter (rms) with 19.44 MHz reference1                                                 5           ps
REFJIT            Reference clock jitter (rms) with 77.76 MHz reference1                                                13           ps
REFTOL            Reference clock frequency tolerance2                                             -20                  +20          ppm
TOLJIT            Input jitter tolerance with 1 MHz < f < 20 MHz PRBS pattern                      0.3       0.4                     UI
OCLKFREQ          Frequency output                                                                 620                  624          MHz
OCLKDUTY          Clock output duty cycle                                                          40                   60           %
    Jitter specification is defined using a 12kHz to 1.3/5MHz LP-HP single-pole filter.
    1
     These reference clock jitter limits are required for the outputs to meet SONET system level jitter requirements (<10 mUIrms).
    2
        Required to meet SONET output frequency stability requirements.
 2.3.1        Internal Clock and Data Recovery Bypass
Optionally, the internal CDR unit can be disabled and bypassed in lieu of an externally recovered clock.
Asserting the CDRDIS "High" disables the internal Clock and Data Recovery unit and the received serial data
bypasses the integrated CDR block. RXINP/N is then sampled on the rising edge of the externally recovered
differential clock XRXCLKIP/N coming from the optical module or an external clock recovery unit. Figure 5
shows the possible internal paths of the recovered clock and data.
FIGURE 5. INTERNAL CLOCK AND DATA RECOVERY BYPASS
                                                                                                                     XRXCLKIP
                                                                   MUX
                                                                                                                     XRXCLKIN
                                                         CLOCK
                                                                                  Clk
                                                                                                                      RXIP
              CDRDIS                                                                      CDR                         RXIN
                                                                                  Data
           Div by 8 CLOCK
                                            SIPO         DATA       MUX
          Parallel DATA
                            8
                                                                    15


XRT91L32                                                                                           xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                       REV. 1.0.2
 2.4      External Receive Loop Filter Capacitors
These external loop filter 0.47μF non-polarized capacitors provide the necessary components to achieve the
required receiver jitter performance. They must be well isolated to prohibit noise entering the CDR block and
should be placed as close to the pins as much as possible. Figure 6 shows the pin connections and external
loop filter components. These two non-polarized capacitors should be of +/- 10% tolerance.
FIGURE 6. EXTERNAL LOOP FILTERS
                                    0.47uF                           0.47uF
                                  non-polarized                    non-polarized
                      Pin 63                       Pin 66 Pin 64                     Pin 65
                         CAP1P                  CAP2P        CAP1N               CAP2N
 2.5      Loss Of Signal
XRT91L32 supports internal Loss of Signal detection (LOS) and external LOS detection. The internal Loss of
Signal Detector monitors the incoming data stream and if the incoming data stream has no transition
continuously for more than 128 bit periods, Loss of Signal is declared. This LOS detection will be removed
when the circuit detects 16 transitions in a 128 bit period sliding window. Pulling the corresponding DLOSDIS
signal to a high level will disable the internal LOS detection circuit. The external LOS function is supported by
the LOSEXT input. The Single-Ended LVPECL input usually comes from the optical module through an output
usually called “SD” or “FLAG” which indicates the lack or presence of optical power. Depending on the
manufacturer of these devices the polarity of this signal can be either active "Low" or active "High." LOSEXT is
an active "Low" signal requiring a low level to assert or invoke a forced LOS. The external LOSEXT input pin
and internal LOS detector are gated to control detection and declaration of Loss of Signal (see Figure 7.)
Whenever LOS is internally detected or an external LOS is asserted thru the LOSEXT pin, the XRT91L32 will
automatically force the receive parallel data output to a logic state "0" for the entire duration that a LOS
condition is declared. This acts as a receive data mute upon LOS function to prevent random noise from being
misinterpreted as valid incoming data.
FIGURE 7. LOS DECLARATION CIRCUIT
                    Internal LO S D etect
                                 D LO SD IS                                      LO S D eclaration
                           LO S E X T ( S D )
                                                          16


xr                                                                                                           XRT91L32
REV. 1.0.2                                                          STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
2.6      SONET Frame Boundary Detection and Byte Alignment Recovery
A Frame and Byte Boundary Detection circuit searches the incoming data channel for three consecutive A1
(0xF6 Hex) bytes followed by three consecutive A2 (0x28 Hex) bytes. The detector operates under the control
of the OOF (Out of Frame) signals provided from the SONET Framer. Detection is enabled when OOF is held
"High" and remains active until OOF goes "Low." When framing pattern detection is enabled, the framing
pattern is used to locate byte and frame boundaries in the incoming receive data stream. The receive serial-to-
parallel converter block uses the located byte boundary to assemble the incoming data stream into bytes for
output on the parallel data output bus RXDO[7:0]. The frame boundary is reported on the frame pulse
(FRAMEPULSE) output at the onset of detecting the third A2 byte pattern when any serial 48-bit pattern
matching the framing pattern is detected on the incoming data stream. While in the pattern search and
detection state and so long is OOF is active, the frame pulse (FRAMEPULSE) output is activated for one byte
clock cycle (RXPCLKO = 12.86 ns pulse duration for STS-12/STM-4 or 51.44 ns pulse duration for STS-3/
STM-1) anytime a 48-bit pattern matching the framing pattern is detected on the incoming data stream. Once
the SONET Framer Overhead Circuitry has verified that frame and byte synchronization are correct, the OOF
input pin should be de-asserted by the SONET Framer to disable the XRT91L32 frame search process from
trying to synchronize repeatedly and to de-activate FRAMEPULSE. When the XRT91L32’s framing pattern
detection is disabled upon the de-assertion of OOF input pin from the SONET Framer, the byte boundary will
lock to the detected location and will remain locked to that location found when detection was previously
enabled.
2.7      Receive Serial Input to Parallel Output (SIPO)
During STS-12/STM-4 operation, the SIPO is used to convert the 622.08 Mbps serial data input to 77.76 Mbps
parallel data output which can interface to a SONET Framer/ASIC. If the XRT91L32 is operating in STS-3/
STM-1, the SIPO will convert the 155.52 Mbps serial data input to 19.44 Mbps parallel data output. The SIPO
bit de-interleaves the serial data input into an 8-bit parallel output to RXDO[7:0]. A simplified block diagram is
shown in Figure 8. XRT91L32 clocks data out on RXDO[7:0] at the falling edge of RXPCLKO.
FIGURE 8. SIMPLIFIED BLOCK DIAGRAM OF SIPO
                     8-bit Parallel LVTTL Output Data
             RXDO0                   b03 b02 b01 b00
                                                                                                   622.08 Mbps STS-12/STM-4 or
             RXDOn                   bn3 bn2 bn1 bn0                                          155.52 Mbps STS-3/STM-1 serial data rate
                                                                  SIPO          b73 b63 b53 b43 b33 b23 b13          b70 b60 b50 b40 b30 b20 b10 b00   RXIP/N
         RXDOn+                      bn+3 bn+2 bn+1 bn+0
         RXDO7                       b73 b72 b71 b70
        RXPCLKO                                            77.76 MHz (STS-12/STM-4) or 19.44 MHz (STS-3/STM-1)
                                                                                 17


XRT91L32                                                                                     xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                    REV. 1.0.2
 2.8     Receive Parallel Output Interface
The 8-bit Single-Ended LVTTL running at 77.76 Mbps (STS-12/STM-4) or 19.44 Mbps (STS-3/STM-1) parallel
data output of the receive path is used to interface to a SONET Framer/ASIC synchronized to the recovered
clock. A simplified block diagram is shown in Figure 9.
FIGURE 9. RECEIVE PARALLEL OUTPUT INTERFACE BLOCK
                                                         RXDO[7:0]  XRT91L32
                                                                   STS-12/STM-4
                                                     8                  or
                                                          RXPCLKO
                                                                   STS-3/STM-1
                                                                    Transceiver
                                 SONET Framer/ASIC
 2.9     Disable Parallel Receive Data Output Upon LOS
The parallel receiver outputs are automatically pulled "Low" or forced to a logic state of "0" during a LOS
condition to prevent data chattering unless LOS detection is disabled by asserting DLOSDIS and keeping
LOSEXT input pin "high." In addition, the user can also assert LOSEXT input pin "low" from the optical module
to force an LOS and mute the parallel receiver outputs as well (while DLOSDIS input is also low, see Figure 7.)
                                                       18


xr                                                                                               XRT91L32
REV. 1.0.2                                         STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
 2.10     Receive Parallel Data Output Timing
The receive parallel data output from the STS-12/STM-4 or STS-3/STM-1 receiver will adhere to the setup and
hold times shown in Figure 10 ,Table 7, and Table 8. Table 9 shows the PECL and TTL output timing
specifications.
FIGURE 10. RECEIVE PARALLEL OUTPUT TIMING
                                          tRXCLK
                   RXIP
                   RXIN
                                                   tRXPCLKO
                RXPCLKO
                RXDO[7:0]    A1                A2            A2             A2        A2
                                                                       tRXDO_VALID
              FRAMEPULSE
                                                                        tPULSE_WID
                 TABLE 7: RECEIVE PARALLEL DATA OUTPUT TIMING (STS-12/STM-4 OPERATION)
        SYMBOL                                    PARAMETER                        MIN    TYP  MAX   UNITS
         tRXCLK         Receive high-speed serial clock period                           1.608         ns
       tRXPCLKO         Receive parallel data output byte clock period                   12.86         ns
     tRXDO_VALID        Time the data is valid on RXDO[7:0] and FRAMEPULSE          4                  ns
                        before and after the rising edge of RXPCLKO
      tPULSE_WID        Pulse width of frame detection pulse on FRAMEPULSE               12.86         ns
                  TABLE 8: RECEIVE PARALLEL DATA OUTPUT TIMING (STS-3/STM-1 OPERATION)
        SYMBOL                                    PARAMETER                        MIN    TYP  MAX   UNITS
         tRXCLK         Receive high-speed serial clock period                            6.43         ns
       tRXPCLKO         Receive parallel data output byte clock period                   51.44         ns
     tRXDO_VALID        Time the data is valid on RXDO[7:0] and FRAMEPULSE         22                  ns
                        before and after the rising edge of RXPCLKO
      tPULSE_WID        Pulse width of frame detection pulse on FRAMEPULSE               51.44         ns
                                                             19


XRT91L32                                                                         xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                     REV. 1.0.2
                  TABLE 9: PECL AND TTL RECEIVE OUTPUTS TIMING SPECIFICATION
     SYMBOL                              PARAMETER                  MIN      TYP  MAX    UNITS
     tR_PECL     PECL output rise time (20% to 80%)                         350            ps
     tF_PECL     PECL output fall time (80% to 20%)                         350            ps
      tR_TTL     TTL output rise time (10% to 90%)                            2            ns
      tF_TTL     TTL output fall time (90% to 10%)                           1.5           ns
                                                    20


xr                                                                                                     XRT91L32
REV. 1.0.3                                       STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
 3.0 TRANSMIT SECTION
The transmit section of the XRT91L32 accepts 8-bit parallel data and converts it to serial Differential LVPECL
data output intented to interface to an optical module. It consists of an 8-bit parallel Single-Ended LVTTL
interface, Parallel-to-Serial Converter, a clock multiplier unit (CMU), a Low Voltage Positive-referenced Emitter-
Coupled Logic (LVPECL) differential line driver, and Loop Timing modes. The LVPECL serial data output rate is
622.08 Mbps for STS-12/STM-4 applications and 155.52 Mbps for STS-3/STM-1 applications. The high
frequency serial clock is synthesized by a PLL, which uses a low frequency clock as its input reference. In
order to synchronize the data transfer process, the synthesized 622.08 MHz for STS-12/STM-4 or 155.52 MHz
STS-3/STM-1 serial clock output is divided by eight and the 77.76 MHz (STS-12/STM-4) or 19.44 MHz (STS-3/
STM-1) clock respectively is presented to the framer/mapper device to be used as its timing source.
 3.1      Transmit Parallel Input Interface
The parallel data from an framer/mapper device is presented to the XRT91L32 through an 8-bit Single-Ended
LVTTL parallel bus interface TXDI[7:0]. To directly interface to the XRT91L32, the SONET Framer/ASIC must
be synchronized to the same timing source TXPCLK_IO in presenting data on the parallel bus interface. The
data must meet setup and hold times with respect to TXPCLK_IO. This clock output source is used to
synchronize the SONET Framer/ASIC to the XRT91L32. The framer/mapper device should use TXPCLK_IO
as its timing source so that parallel data is phase aligned with the serial transmit data. The data is latched into
a parallel input register on the rising edge of TXPCLK_IO. TXPCLK_IO is derived from a divide-by-8 of the high
speed synthesized clock resulting in a 77.76/ 19.44 MHz Single-Ended LVTTL clock output source to be used
by the framer/mapper device for parallel bus synchronization. A simplified block diagram of the transmit
parallel bus clock output system interface is shown in Figure 11.
FIGURE 11. TRANSMIT PARALLEL INPUT INTERFACE BLOCK
                                                  TXDI[7:0]
                                                                             XRT91L32
                                                            8              STS-12/STM-4
                                                                                 or
                                                                           STS-3/STM-1
                                                          TXPCLK_IO         Transceiver
                            SONET Framer/ASIC
                                                                                    CMUREFSEL
                                                                                 REFCLKN
                                                                               REFCLKP
                                                                       TTLREFCLK
                                                              21


XRT91L32                                                                                       xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                   REV. 1.0.3
 3.2      Transmit Parallel Data Input Timing
When applying parallel data input to the transmitter, the setup and hold times should be followed as shown in
Figure 12 and Table 10, Table 11.
FIGURE 12. TRANSMIT PARALLEL INPUT TIMING
    Transmit Parallel                           Transmit Parallel Clock Output
     Clock driven by
                                                         tTXPCLK_IO
   XRT91L32 Device
        TXPCLK_IO
                                                                            tTXDI_HD
                                                tTXDI_SU
         TXDI[7:0]
                   TABLE 10: TRANSMIT PARALLEL DATA INPUT TIMING (STS-12/STM-4 OPERATION)
        SYMBOL                                  PARAMETER                            MIN  TYP   MAX    UNITS
      tTXPCLK_IO        Transmit Clock Output period                                     12.86          ns
       tTXDI_SU         Transmit data setup time with respect to TXPCLK_IO           1.0                ns
       tTXDI_HD         Transmit data hold time with respect to TXPCLK_IO1           1.0                ns
                   TABLE 11: TRANSMIT PARALLEL DATA INPUT TIMING (STS-3/STM-1 OPERATION).
        SYMBOL                                  PARAMETER                            MIN  TYP   MAX    UNITS
      tTXPCLK_IO        Transmit Clock Output period                                     51.44          ns
       tTXDI_SU         Transmit data setup time with respect to TXPCLK_IO           1.0                ns
       tTXDI_HD         Transmit data hold time with respect to TXPCLK_IO1           1.0                ns
                                                              22


xr                                                                                                                XRT91L32
REV. 1.0.3                                                               STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
3.3        Transmit Parallel Input to Serial Output (PISO)
The PISO is used to convert 77.76 Mbps or 19.44 Mbps parallel data input to 622.08 Mbps STS-12/STM-1 or
155.52 Mbps STS-3/STM-1 serial data output respectively, which can interface to an optical module. The
PISO bit interleaves parallel data input into a serial bit stream taking the first bit from TXDI7, then the first bit
from TXDI6, and so on as shown in Figure 13.
FIGURE 13. SIMPLIFIED BLOCK DIAGRAM OF PISO
                      8-bit Parallel LVTTL Input Data
          TXDI0      b07 b06 b05 b04 b03 b02 b01 b00
                                                                               time (0)
                                                                                                   622.08 Mbps STS-12/STM-4 or
          TXDIn      bn7 bn6 bn5 bn4 bn3 bn2 bn1 bn0                                          155.52 Mbps STS-3/STM-1 serial data rate
                                                                      PISO       b77 b67 b57 b47 b37 b27 b17 b07     b70 b60 b50 b40 b30 b20 b10 b00       TXOP/N
          TXDIn+ bn+7 bn+6 bn+5 bn+4 bn+3 bn+2 bn+1 bn+0
          TXDI7      b77 b76 b75 b74 b73 b72 b71 b70
         TXPCLK_IO                                         77.76 MHz (STS-12/STM-4) or 19.44 MHz (STS-3/STM-1)
3.4        Clock Multiplier Unit (CMU) and Re-Timer
The clock synthesizer uses a 77.76 MHz or a 19.44 MHz reference clock to generate the 622.08 MHz (for STS-
12/STM-4) or 155.52 MHz (for STS-3/STM-1) SONET/SDH transmit serial data rate frequency. Differential
LVPECL input REFCLKP/N accepts a clock reference of 77.76 MHz or 19.44 MHz to synthesize a high speed
622.08 MHz clock for STS-12/STM-4 or 155.52 MHz clock for STS-3/STM-1 applications. Optionally, if a
Differential LVPECL clock source is not available, TTLREFCLK can accept an LVTTL clock signal. The clock
synthesizer uses a PLL to lock-on to the differential input REFCLKP/N or Single-Ended input TTLREFCLK
reference clock. The REFCLKP/N input should be generated from an LVPECL crystal oscillator which has a
frequency accuracy better than 20ppm in order for the transmitted data rate frequency to have the necessary
accuracy required for SONET systems. If the TTLREFCLK reference clock is used, the TTLREFCLK
reference input should be tied to a LVTTL crystal oscillator with 20ppm accuracy. The two reference clocks are
XNOR’ed and the choice between the LVPECL and LVTTL clocks are controlled tying either REFCLKP or
TTLREFCLK to ground. Table 1, on page 11 shows the CMU reference clock frequency settings. Table 12
specifies the Clock Multiplier Unit’s requirements for the reference clock.
                            TABLE 12: CLOCK MULTIPLIER UNIT REQUIREMETNS FOR REFERENCE CLOCK
      NAME                                                      PARAMETER                                                 MIN            TYP      MAX         UNITS
REFDUTY              Reference clock duty cycle                                                                            40                      60           %
REFJIT               Reference clock jitter (rms) with 19.44 MHz reference1                                                                            5        ps
REFJIT               Reference clock jitter (rms) with 77.76 MHz reference1                                                                        13           ps
REFTOL               Reference clock frequency tolerance2                                                                  -20                    +20          ppm
ECLKJIT              STS-3/STM-1 Electrical Clock output jitter (rms) with 19.44 MHz reference                                           1                   mUIrms
ECLKJIT              STS-12/STM-4 Electrical Clock output jitter (rms) with 19.44 MHz reference                                          5                   mUIrms
ECLKJIT              STS-3/STM-1 Electrical Clock output jitter (rms) with 77.76 MHz reference                                           2                   mUIrms
                                                                                     23


XRT91L32                                                                                                                xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                                                REV. 1.0.3
     NAME                                             PARAMETER                                        MIN        TYP      MAX      UNITS
 ECLKJIT           STS-12/STM-4 Electrical Clock output jitter (rms) with 77.76 MHz reference                      4               mUIrms
 OCLKFREQ          Frequency output                                                                    620                  624       MHz
 OCYCDUTY          Clock output duty cycle (’1010’ data pattern)                                        45                   55        %
     Jitter specification is defined using a 12kHz to 1.3/5MHz LP-HP single-pole filter.
     1These   reference clock jitter limits are required for the outputs to meet SONET system level jitter requirements (<10 mUIrms).
     2
       Required to meet SONET output frequency stability requirements.
 3.5       Loop Timing and Clock Control
Two types of loop timing are possible in the XRT91L32.
In the internal loop timing mode, loop timing is controlled by the LOOPTIME pin. This mode is selected by
asserting the LOOPTIME signal to a high level. When the loop timing mode is activated, the CMU synthesized
hi-speed reference clock input to the Retimer is replaced with the hi-speed internally recovered receive clock
coming from the CDR. Under this condition both the transmit and receive sections are synchronized to the
internally recovered receive clock. Loop time mode directly locks the Retimer to the recovered receive clock.
In external loop timing mode, the XRT91L32 allows the user the flexibility of using an externally recovered
receive clock for retiming the high speed serial data. First, the CDRDIS input pin should be set high. By doing
so, the internal CDR is disabled and bypassed and the XRT91L32 will sample the incoming high speed serial
data on RXIP/N with the externally recovered receive clock connected to the XRXCLKIP/N inputs. In this state,
the receive clock de-jittering and recovery is done externally and fed thru XRXCLKIP/N and the XRT91L32 will
sample RXIP/N on the rising edge of XRXCLKIP/N. Secondly, the LOOPTIME pin must also be set high in
order to select the externally recovered receive clock on XRXCLKIP/N as the reference clock source for the
transmit serial data output stream TXOP/N.
Table 13 provides configuration for selecting the loop timing and clock recovery modes. The use of the on-chip
CDR or an external recovered clock in loop timing applications is shown in Figure 14.
                                TABLE 13: LOOP TIMING AND CLOCK RECOVERY CONFIGURATIONS
       CDRDIS                  LOOPTIME                 TRANSMIT CLOCK SOURCE                         RECEIVE CLOCK SOURCE
                                                                                                             CDR Enabled.
            0                          0                      Clock Multiplier Unit
                                                                                             Clock and Data recovery by internal CDR
                                                                                                             CDR Enabled.
            0                          1                         Internal CDR
                                                                                             Clock and Data recovery by internal CDR
                                                                                                             CDR Disabled.
                                                                                             Externally recovered Receive Clock from
            1                          0                      Clock Multiplier Unit                           XRXCLKIP/N
                                                                                          622.08/155.52 Mbps data on RXIP/N sampled at
                                                                                                     rising edge of XRXCLKIP/N
                                                                                                             CDR Disabled.
                                                                                             Externally recovered Receive Clock from
            1                          1               External CDR thru XRXCLKIP/N                           XRXCLKIP/N
                                                                                          622.08/155.52 Mbps data on RXIP/N sampled at
                                                                                                     rising edge of XRXCLKIP/N
                                                                         24


xr                                                                                                                    XRT91L32
REV. 1.0.3                                                                   STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
FIGURE 14. LOOP TIMING MODE USING INTERNAL CDR OR AN EXTERNAL RECOVERED CLOCK
                           REFCLKP                                                                XRT91L32
                           REFCLKN                                         622.08/
                                                                         155.52MHz
                         TTLREFCLK                                          CMU
                                                                                            MUX
                                                                                                            DATA                              TXOP
                           TXDI[7:0]
                                                                                 PISO                                                         TXON
                                                                                                                                Retimer
                           TXPCLK_IO                      8   0                                              CLK   to Retimer
                                            ENB                   MUX
                                                              1
                                                    ENB
                                                                        Div by
                                                                          8
                                  VDD
                          LOOPTIME                                                                                                            XRXCLKIP
                                                                                                           MUX
                            CDRDIS                                                                                                            XRXCLKIN
                                                                                          CLK                      Clk
                                                                                                                                              RXIP
                                                                                                                          CDR                 RXIN
                         RXDO[7:0]                                                                                 Data
                                        ~                     8
                                                                         SIPO           DATA        MUX                                   ~
                         RXPCLKO                  Div by 8
3.6      Transmit Serial Output Control
The 622.08 Mbps STS-12/STM-4 or 155.52 Mbps STS-3/STM-1 transmit serial output is avaliable on TXOP/N
pins. The transmit serial output can be AC or DC coupled to an optical module or electrical interface. A
simplified block diagram with internally AC-coupled SFP is shown in Figure 15. Also, refer to application note
FIGURE 15. TRANSMIT SERIAL OUTPUT INTERFACE BLOCK
                      TXOP
                                                                                                  SFP, Optical Module
                      TXON
                                                                                                                                               Optical Fiber
                                                                                                Internally AC coupled and
                                                                                                 terminated into 100 Ohm
                XRT91L32                                                   187 Ohm
               STS-12/STM-4
                                                                                  Install close to 91L30
                    or
               STS-3/STM-1
                Transceiver
TAN-9132.)
NOTE: Some optical modules integrate AC coupling capacitors within the module. AC or DC coupling is largely specific to
      system design and optical module of choice.
                                                                                                  25


XRT91L32                                                                                           xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                             REV. 1.0.3
 4.0 DIAGNOSTIC FEATURES
 4.1      Serial Remote Loopback
The serial remote loopback function is activated by setting RLOOPS "High". When serial remote loopback is
activated, the high-speed serial receive data from RXIP/N is presented at the high speed transmit output
TXOP/N, and the high-speed recovered clock is selected and presented to the high-speed transmit clock input
of the Retimer. During serial remote loopback, the high-speed receive data (RXIP/N) is also converted to
parallel data and presented at the low-speed receive parallel interface RXDO[7:0]. The recovered receive clock
is also divided by 8 and presented at the low-speed clock output RXPCLKO to synchronize the transfer of the
8-bit received parallel data. A simplified block diagram of serial remote loopback is shown in Figure 16.
FIGURE 16. SERIAL REMOTE LOOPBACK
                                Serial Rem ote Loopback
                                                                                              Tx Serial O utput
                                                                                LVPECL
                                         PISO                 Re-Timer
                                                                             O utput Drivers
        R x Parallel O utput
                                                                                               Rx Serial Input
                                                                               LVPECL
                                         SIPO                    CD R
                                                                             Input Drivers
 4.2      Digital Local Loopback
The digital local loopback is activated when the DLOOP signal is set "High." When digital local loopback is
activated, the high-speed data from the output of the parallel to serial converter is looped back and presented
to the high-speed input of the receiver serial to parallel converter. The CMU output is also looped back to the
receive section and is used to synchronize the transfer of the data through the receiver. In Digital loopback
mode, the transmit data from the transmit parallel interface TXDI[7:0] is serialized and presented to the high-
speed transmit output TXOP/N using the high-speed 622.08/155.52 MHz transmit clock generated from the
clock multiplier unit and presented to the input of the Retimer and SIPO. A simplified block diagram of digital
loopback is shown in Figure 17. Receive Data mute upon LOS, as shown in Figure 7, applies to Digital Local
FIGURE 17. DIGITAL LOCAL LOOPBACK
                                       Digital Loopback
              Tx Parallel Input                                                              Tx Serial Output
                                                                                LVPECL
                                            PISO              Re-Timer
                                                                            Output Drivers
             Rx Parallel Output
                                                                               LVPECL
                                            SIPO                 CDR
                                                                            Input Drivers
Loopback Mode
                                                        26


xr                                                                                                          XRT91L32
REV. 1.0.3                                          STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
 4.3     Analog Local Loopback
Analog Local Loopback (ALOOP) controls a more comprehensive version of digital local loopback in which the
point where the transmit data is looped back is moved all the way back to the high-speed receive I/O. The
transmit data from the transmit parallel interface TXDI[7:0] is serialized and presented to the high-speed
transmit output TXOP/N using the high-speed 622.08/155.52 MHz transmit clock generated from the clock
multiplier unit. In addition, the high-speed transmit data TXOP/N is looped back to the receive clock and data
recovery unit, replacing the RXIP/N. The signal is then processed by the CDR, and is sent through the serial to
parallel converter and presented at the low-speed receive parallel interface RXDO[7:0]. ALOOP is invoked by
asserting the ALOOP pin "High." A simplified block diagram of parallel remote loopback is shown in Figure 18.
Receive data mute upon "LOS
FIGURE 18. ANALOG LOCAL LOOPBACK
                                   Analog Local Loop back
            Tx Parallel Input
                                                                                             Tx Serial Output
                                                                                 LVPECL
                                   PISO               Re-Timer
                                                                              Output Drivers
           Rx Parallel Output
                                                               LVPECL
                                  SIPO           CDR
                                                            Input Drivers
 4.4     Split Loopback
The serial remote loopback and the digital local loopback can be combined to form a split loopback. The
output of the parallel to serial converter is looped back and presented to the high-speed input of the receiver
serial to parallel converter. The high-speed serial receive data from RXIP/N is presented at the high speed
transmit output TXOP/N, and the high-speed recovered clock is selected to re-time the high speed transmit
data output. A simplified block diagram of parallel remote loopback is shown in Figure 19.
FIGURE 19. SPLIT LOOPBACK
                                     Split Loopback
            Tx Parallel Input
                                                                                             Tx Serial Output
                                                                                 LVPECL
                                         PISO                        Re-Timer
                                                                              Output Drivers
           Rx Parallel Output
                                                                                              Rx Serial Input
                                                                                LVPECL
                                         SIPO                          CDR
                                                                              Input Drivers
                                                             27


XRT91L32                                                                                      xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                              REV. 1.0.3
 4.5   Eye Diagram
The XRT91L32 Eye diagram illustrates the transmit serial output signal integrity and quality.
FIGURE 20. STS-3/STM-1 EYE DIAGRAM
FIGURE 21. STS-12/STM-4 EYE DIAGRAM
                                                    28


xr                                                                                                               XRT91L32
REV. 1.0.3                                         STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
 4.6      SONET Jitter Requirements
SONET equipment jitter requirements are specified for the following three types of jitter. The definitions of each
of these types of jitter are given below. SONET equipment jitter requirements are specified for the following
three types of jitter.
 4.6.1        Jitter Tolerance:
Jitter tolerance is defined as the peak-to-peak amplitude of sinusoidal jitter applied on the input OC-N
equipment interface that causes an equivalent 1dB optical power penalty. OC-1/STS-1, OC-3/STS-3, OC-12
and OC-48 category II SONET interfaces should tolerate, the input jitter applied according to the mask of
Figure 22, with the corresponding parameters specified in the figure.
FIGURE 22. JITTER TOLERANCE MASK
                 A3
                                                        slope= -20dB/decade
       Input
       Jitter
     Amplitude
       (UIpp)
                 A2                                                                               slope= -20dB/decade
                 A1
                            f0          f1                       f2          f3                   f4
                                                         Jitter Frequency (Hz)
                       OC-N/STS-N LEVEL    F0 (HZ) F1 (HZ)      F2 (HZ) F3 (HZ) F4 (HZ) A1 (UIPP)    A2 (UIPP) A3 (UIPP)
                                1            10      30           300      2K     20K     0.15          1.5        15
                                3            10      30           300     6.5K   65K      0.15          1.5        15
                               12            10      30           300     25K    250K     0.15          1.5        15
                               48            10     600          6000    100K   1000K     0.15          1.5        15
                                                               29


XRT91L32                                                                  xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                          REV. 1.0.3
FIGURE 23. XRT91L32 MEASURED JITTER TOLERANCE AT 622.08 MBPS STS-12/STM-4
FIGURE 24. XRT91L32 MEASURED JITTER TOLERANCE AT 155.52 MBPS STS-3/STM-1
                                             30


xr                                                                                        XRT91L32
REV. 1.0.3                                       STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
 4.6.2           Jitter Generation
Jitter generation is defined as the amount of jitter at the STS-N output in the absence of applied input jitter. The
Bellcore and ITU requirement for this type jitter is 0.01UI rms measured with a specific band-pass filter.
For more information on these specifications refer to Bellcore TR-NWT-000253 sections 5.6.2-5 and GR-253-
CORE section 5.6.
Phase noise plot shows the power of the noise with respect to the carrier power. When this curve is integrated
in the frequency band of interest, the outcome is the noise power. Jitter generation in rms is then derived by
factoring with the appropriate period for the clock cycle.
FIGURE 25. XRT91L32 MEASURED ELECTRICAL PHASE NOISE TRANSMIT JITTER GENERATION AT 622.08 MBPS
STS-12/STM4 USING ’1010’ OUTPUT PATTERN
                                          Phase Noise Transmit Jitter Generation
                                               (Wide Band) using HP8560E
                 -90
                 -95
                -100
       dBC/Hz
                -105
                -110
                -115
                -120
                       1             10              100                 1000         10000             100000
                                                           Frequency (kHz)
                                                           REFCLK = 19.44 MHz
                                                             31


XRT91L32                                                                                                                 xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                                                 REV. 1.0.3
 5.0 ELECTRICAL CHARACTERISTICS
ABSOLUTE MAXIMUM RATINGS
Thermal Resistance of QFP Package........ΘjA = 45°C/W                   Operating Temperature Range.................-40°C to 85°C
Thermal Resistance of QFP Package........ΘjC = 12°C/W                   Case Temperature under bias..................-55°C to 125°C
ESD Protection (HBM)..........................................>2000V    Storage Temperature ...............................-65°C to 150°C
ABSOLUTE MAXIMUM POWER AND INPUT/OUTPUT RATINGS
    SYMBOL        TYPE                           PARAMETER                        MIN.      TYP.                   MAX.             UNITS
     VDD3.3               CMOS Digital Power Supply                               -0.5                              6.0               V
 VDDLVPECL                PECL I/O Power Supply                                   -0.5                              6.0               V
   AVDD_IO                3.3V Analog I/O and Power Supply                        -0.5                              6.0               V
                LVPECL    DC logic signal input voltage                           -0.5                   VDDLVPECL +0.5               V
                 LVTTL    DC logic signal input voltage                           -0.5                              5.5               V
                 LVTTL    DC logic signal output voltage                          -0.5                       VDD3.3 +0.5              V
                LVPECL    Input current                                           -100                              100              mA
                 LVTTL    Input current                                           -100                              100              mA
NOTE: Stresses listed under Absolute Maximum Power and I/O ratings may be applied to devices one at a time without
         causing permanent damage. Functionality at or above the values listed is not implied. Exposure to these values for
         extended periods will severely affect device reliability.
POWER AND CURRENT DC ELECTRICAL CHARACTERISTICS
Test Conditions: TA = 25°C, VDD = 3.3V + 5% unless otherwise specified
  SYMBOL       TYPE                               PARAMETER                         MIN.  TYP.        MAX.        UNITS        CONDITIONS
   VDD3.3               Power Supply Voltage                                       3.135   3.3       3.465            V
  AVDD3.3               Transmit Power Supply Voltage (AVDD3.3_TX)                 3.135   3.3       3.465            V
  AVDD3.3               Receiver Power Supply Voltage (AVDD3.3_RX)                 3.135   3.3       3.465            V
     VDD                PECL I/O Power Supply Voltage                              3.135   3.3       3.465            V
    LVPECL
   IDD-OC3              Total Power Supply Current                                        200                       mA
  IDD-OC12              Total Power Supply Current                                        242                       mA
  PDD-OC3               Total Power Consumption                                           660                       mW
 PDD-OC12               Total Power Consumption                                           800                       mW
                                                                     32


xr                                                                                             XRT91L32
REV. 1.0.3                                       STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER
LVPECL AND LVTTL LOGIC SIGNAL DC ELECTRICAL CHARACTERISTICS
Test Conditions: TA = 25°C, VDD = 3.3V + 5% unless otherwise specified
 SYMBOL      TYPE             PARAMETER                   MIN     TYP       MAX    UNITS    CONDITIONS
   VOH     LVPECL    Output High Voltage                                 VDDLVPECL   V
                                                                            - 0.9
   VOL     LVPECL    Output Low Voltage                   0.7                        V
 VOCOMM    LVPECL    Output Common Mode Voltage           1.1            VDDLVPECL   V
                                                                            - 1.3
  VODIFF   LVPECL    Output Differential Voltage         600                1300    mV    Terminate with
                                                                                               50Ω to
                                                                                         VDDLVPECL- 2.0
   VIH     LVPECL    Input High Voltage               VDDLVPECL          VDDLVPECL   V          For
                                                         - 0.9              - 0.3          Single-Ended
   VIL     LVPECL    Input Low Voltage                     0             VDDLVPECL   V          For
                                                                           - 1.72          Single-Ended
  VIDIFF   LVPECL    Input PECL Differential Voltage     400                1600    mV
 VICOMM    LVPECL    Input PECL Common Mode                        2.0               V
                     Voltage
   VOH      LVTTL    Output High Voltage                  2.0                        V    IOH = -18.0mA
                                                                                            at VOH=2.4V
   VOL      LVTTL    Output Low Voltage                    0                 0.8     V     IOL = 15.0mA
                                                                                            at VOL=0.4V
   VIH      LVTTL    Input High Voltage                   2.0                        V
   VIL      LVTTL    Input Low Voltage                     0                 0.8     V
    IIH     LVTTL    Input High Current                            50       500     μA   2.0V<VIN<5.5V
                                                                                         VIN=2.4V typical
    IIL     LVTTL    Input Low Current                                      -500    μA   -0.5V<VIN<0.8V
                                                        33


XRT91L32                                                                                             xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                            REV. 1.0.3
                                       ORDERING INFORMATION
  PART NUMBER                                  PACKAGE                                OPERATING TEMPERATURE RANGE
 XRT91L32IQ-F      100-pin Plastic Quad Flat Pack (14.0 x 20.0 x 2.7 mm3, QFP)                 -40°C to +85°C
PACKAGE DIMENSIONS
                                          (14 x 20 x 2.7mm, QFP, 1.6mm form)
                                                           Rev. 1.00
                                                            D
                                                            D1
                                      80                                          51
                        81                                                                    50
                                                                                                E1
                                                                                                    E
                       100                                                                    31
                                       1                                          30
                                                                         (Pin 1 feature is mfger option)
                                   A2             B
                                            e
                                                                                          C
                        A
         Seating Plane                                                                         α
                           A1                                                           L
                                                       1.6mm form
                                              INCHES            MILLIMETERS
                            SYMBOL        MIN       MAX         MIN       MAX
                               A         0.102      0.134      2.60       3.40
                               A1        0.010      0.020      0.25       0.50
                               A2        0.100      0.120      2.55       3.05
                               B         0.009      0.015      0.22       0.38
                               C         0.005      0.009      0.13       0.23
                               D         0.904      0.923      22.95      23.45
                               D1        0.783      0.791      19.90      20.10
                               E         0.667      0.687      16.95      17.45
                               E1        0.547      0.555      13.90      14.10
                                e         0.0256 BSC               0.65 BSC
                                L        0.029      0.040      0.73       1.03
                                α          0°         7°         0°        7°
                          Note: The control dimension is the millimeter column
                                                          34


XRT91L32                                                                                                xr
STS-12/STM-4 OR STS-3/STM-1 SONET/SDH TRANSCEIVER                                                                REV. 1.0.3
REVISION HISTORY
      REVISION #            DATE                                            DESCRIPTION
         1.0.0       November 2006 XRT91L32 datasheet release version.
         1.0.1            11/07/06      correct typo errors
         1.0.2            11/08/06      Added Min Reset pulse width of 100nS in pin description, correct typo errors.
         1.0.3            06/14/07      Corrected Figure 3 to portray an application with AC-coupled SFP
                                        Corrected the serial data bit order in Figure 13
                                        Made pin 81 VDD only
                                        Minor editorial corrections
                                                           NOTICE
EXAR Corporation reserves the right to make changes to the products contained in this publication in order to
improve design, performance or reliability. EXAR Corporation assumes no responsibility for the use of any
circuits described herein, conveys no license under any patent or other right, and makes no representation that
the circuits are free of patent infringement. Charts and schedules contained here in are only for illustration
purposes and may vary depending upon a user’s specific application. While the information in this publication
has been carefully checked; no responsibility, however, is assumed for inaccuracies.
EXAR Corporation does not recommend the use of any of its products in life support applications where the
failure or malfunction of the product can reasonably be expected to cause failure of the life support system or
to significantly affect its safety or effectiveness. Products are not authorized for use in such applications unless
EXAR Corporation receives, in writing, assurances to its satisfaction that: (a) the risk of injury or damage has
been minimized; (b) the user assumes all such risks; (c) potential liability of EXAR Corporation is adequately
protected under the circumstances.
Copyright 2006 EXAR Corporation
Datasheet November 2006.
Reproduction, in part or whole, without the prior written consent of EXAR Corporation is prohibited.
                                                              35


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
MaxLinear:
 XRT91L32IQ-F XRT91L32ES XRT91L32IQTR-F
