                                                 MC33910G5AC/MC3433910G5AC
NXP Semiconductors                                                                                       Document Number: MC33911
Technical Data                                                                                                     Rev. 10.0, 7/2016
LIN system basis chip with DC motor
pre-driver                                                                                                33911
The 33911G5/BAC is a SMARTMOS Serial Peripheral Interface (SPI) controlled
System Basis Chip (SBC), combining many frequently used functions in an MCU
based system, plus a Local Interconnect Network (LIN) transceiver. The 33911
has a 5.0 V, 50 mA/60 mA low dropout regulator with full protection and reporting            SYSTEM BASIS CHIP WITH LIN
features. The device provides full SPI readable diagnostics and a selectable
timing watchdog for detecting errant operation. The LIN Protocol Specification
2.0 and 2.1 compliant LIN transceiver has waveshaping circuitry which can be
disabled for higher data rates.
One 50 mA/60 mA high-side switch and two 150 mA/160 mA low-side switches
with output protection are available. All outputs can be pulse-width modulated
(PWM). Two high-voltage inputs are available for use in contact monitoring, or
as external wake-up inputs. These inputs can be used as high-voltage Analog
Inputs. The voltage on these pins is divided by a selectable ratio and available
via an analog multiplexer.
The 33911 has three main operating modes: Normal (all functions available),                           AC SUFFIX (Pb-FREE)
Sleep (VDD off, wake-up via LIN, wake-up inputs (L1, L2), cyclic sense, and                              98ASH70029A
forced wake-up), and Stop (VDD on with limited current capability, wake-up via                            32-PIN LQFP
CS, LIN bus, wake-up inputs, cyclic sense, forced wake-up, and external reset).
The 33911 is compatible with LIN Protocol Specification 2.0, 2.1, and
SAEJ2602-2.
Features
                                                                                    Applications
• Full-duplex SPI interface at frequencies up to 4.0 MHz
                                                                                    • Window lift
• LIN transceiver capable of up to 100 kbps with wave shaping
                                                                                    • Mirror switch
• One 50 mA/60 mA high-side and two 150 mA/60 mA low-side protected
                                                                                    • Door lock
   switches
                                                                                    • Sunroof
• Two high-voltage analog/logic Inputs
                                                                                    • Light control
• Configurable window watchdog
• 5.0 V low drop regulator with fault detection and low-voltage reset (LVR)
   circuitry
                             VBAT                                  33911
                                                         VS1            VSENSE
                                                         VS2               HS1
                                                                              L1
                                                                              L2
                                    LIN INTERFACE        LIN
                                                         VDD
                                                         PWMIN
                                                         ADOUT0             LS1
                                                                                                  M
                                     MCU                 MOSI               LS2
                                                         MISO
                                                         SCLK
                                                         CS
                                                         RXD           WDCONF
                                                         TXD    LGND
                                                         IRQ    PGND
                                                         RST    AGND
                                            Figure 1. 33911 simplified application diagram
© 2016 NXP B.V.


1          Orderable parts
The 33911G5 data sheet is within MC33911G5 product specifications - page 3 to page 52.
The 33911BAC data sheet is within MC33911BAC product specifications - page 53 to page 100.
Table 1. Orderable part variations
        Device           Temperature    Package   Generation
  MC33911G5AC/R2      - 40 °C to 125 °C                           • Increase ESD GUN IEC61000-4-2 (gun test contact with 150 pF, 330 Ω
                                                                    test conditions) performance to achieve ±6.0 kV min on the LIN pin.
                                                                  • Immunity against ISO7637 pulse 3b
                                                      2.5         • Reduce EMC emission level on LIN
  MC34911G5AC/R2       - 40 °C to 85 °C                           • Improve EMC immunity against RF – target new specification including 3
                                        32-LQFP
                                                                    x 68 pF
                                                                  • Comply with J2602 conformance test
   MC33911BAC/R2      - 40 °C to 125 °C
                                                      2.0                                      Initial release
   MC34911BAC/R2       - 40 °C to 85 °C
33911
2                                                                                                                  NXP Semiconductors


2        MC33911G5 product specifications - page 3 to page 52
                                                              33911
NXP Semiconductors                                              3


3       Internal block diagram
                  RST IRQ                                             VS2                        VS1         VDD
                        INTERRUPT CONTROL
                                                       INTERNAL BUS
                               MODULE                                                                                       AGND
                               LVI, HVI,
                                                                                                 VOLTAGE REGULATOR
                      ALL OT (VDD,HS,LS,LIN,SD)
                        RESET CONTROL
                            MODULE
                        LVR, WD, EXT ΜC
                                                                                                                             LS1
                             WINDOW                                                              LOW-SIDE
                            WATCHDOG                                                             CONTROL
                                                                                                  MODULE                     LS2
                             MODULE
          PWMIN                                                                                                              PGND
                                                                                                                    VS2
           MISO                                                                                  HIGH-SIDE
                                                                                                 CONTROL                    HS1
                                                                                                  MODULE
           MOSI
                               SPI
                                &
           SCLK              CONTROL
                                                                            ANALOG MULTIPLEXER
            CS                                                                                         VBAT
                                                                                                                            VSENSE
                                                                                                   SENSE MODULE
         ADOUT0                                                                                  CHIP TEMPERATURE
                                                                                                   SENSE MODULE
                                                                                                   ANALOG INPUT
                        WAKE-UP MODULE                                                                                      L1
                                                                                                     MODULE
                                                                                                                            L2
                                                                                   DIGITAL INPUT MODULE
           RXD
                            LIN PHYSICAL
            TXD                 LAYER
                                                                                                                           LIN
                                LGND              WDCONF
                              Figure 2. 33911G5 simplified internal block diagram
33911
4                                                                                                                         NXP Semiconductors


4          Pin connections
4.1        Pinout diagram
                                                 AGND    VDD   NC*   VSENSE   NC*   VS1    VS2   HS1
                                                 32      31    30    29       28    27     26    25
                               RXD     1                                                               24   NC*
                               TXD     2                                                               23   L1
                               MISO    3                                                               22   L2
                               MOSI    4                                                               21   NC*
                               SCLK    5                                                               20   NC*
                                CS     6                                                               19   LS1
                            ADOUT0     7         * See Recommendation in Table below                   18   PGND
                             PWMIN     8                                                               17   LS2
                                                 9       10    11    12       13    14     15    16
                                                 RST     IRQ   NC*                         NC*   NC*
                                                                     WDCONF
                                                                              LIN
                                                                                    LGND
                                                        Figure 3. 33911 pin connections
4.2        Pin definitions
A functional description of each pin can be found in the Functional pin description section beginning on page 23.
Table 2. 33911 Pin definitions
     Pin            Pin name            Formal name                                                     Definition
                                                                This pin is the receiver output of the LIN interface which reports the state of the bus
      1               RXD              Receiver Output
                                                                voltage to the MCU interface.
                                                                This pin is the transmitter input of the LIN interface which controls the state of the bus
      2               TXD              Transmitter Input
                                                                output.
                                                                SPI (Serial Peripheral Interface) data output. When CS is high, pin is in the high-
      3               MISO                 SPI Output
                                                                impedance state.
      4               MOSI                 SPI Input            SPI (Serial Peripheral Interface) data input.
      5              SCLK                  SPI Clock            SPI (Serial Peripheral Interface) clock Input.
      6                CS               SPI Chip Select         SPI (Serial Peripheral Interface) chip select input pin. CS is active low.
      7             ADOUT0            Analog Output Pin 0       Analog multiplexer output.
      8              PWMIN                 PWM Input            High-side and low-side pulse width modulation input.
                                                                                                                                                      33911
NXP Semiconductors                                                                                                                                        5


Table 2. 33911 Pin definitions (continued)
     Pin               Pin name            Formal name                                                     Definition
                                                                 Bidirectional Reset I/O pin - driven low when any internal reset source is asserted. RST
       9                  RST           Internal Reset I/O
                                                                 is active low.
                                         Internal Interrupt      Interrupt output pin, indicating wake-up events from Stop mode or events from Normal
     10                   IRQ
                                               Output            and Normal request modes. IRQ is active low.
   11 & 30                 NC             Not Connected          This pin must not be connected.
                                             Watchdog            This input pin is for configuration of the watchdog period and allows the disabling of the
     12                WDCONF
                                         Configuration Pin       watchdog.
     13                   LIN                 LIN Bus            This pin represents the single-wire bus transmitter and receiver.
     14                  LGND             LIN Ground Pin         This pin is the device LIN ground connection. It is internally connected to the PGND pin.
15,16, 20, and
                           NC             Not Connected          This pin must not be connected or connected to ground.
     21
     17                   LS2
                                         Low-side Outputs        Relay drivers low-side outputs.
     19                   LS1
                                                                 This pin is the device low-side ground connection. It is internally connected to the LGND
     18                  PGND           Power Ground Pin
                                                                 pin.
     22                    L2                                    These pins are the wake-up capable digital inputs (1). In addition, all Lx inputs can be
                                          Wake-up Inputs
     23                    L1                                    sensed analog via the analog multiplexer.
     24                    NC             Not Connected          This pin must not be connected or connected to VS2.
     25                   HS1            High-side Output        High-side switch output.
     26                   VS2                                    These pins are device battery level power supply pins. VS2 is supplying the HS1 driver
                                        Power Supply Pin
     27                   VS1                                    while VS1 supplies the remaining blocks.(2)
     28                    NC             Not Connected          This pin can be left opening or connected to any potential ground or power supply
     29                 VSENSE          Voltage Sense Pin        Battery voltage sense input. (3)
                                        Voltage Regulator
     31                   VDD                                    +5.0 V main voltage regulator output pin. (4)
                                               Output
     32                  AGND           Analog Ground Pin        This pin is the device analog ground connection.
Notes
  1. When used as digital input, a series 33 kΩ resistor must be used to protect against automotive transients.
  2. Reverse battery protection series diodes must be used externally to protect the internal circuitry.
  3. This pin can be connected directly to the battery line for voltage measurements. The pin is self protected against reverse battery connections. It
        is strongly recommended to connect a 10 kΩ resistor in series with this pin for protection purposes.
  4. External capacitor (2.0 µF < C < 100 µF; 0.1 Ω < ESR < 10 Ω) required.
33911
6                                                                                                                                    NXP Semiconductors


5             Electrical characteristics
5.1           Maximum ratings
Table 3. Maximum ratings
All voltages are with respect to ground unless otherwise noted. Exceeding these ratings may cause a malfunction or permanent damage
to the device.
      Symbol                                             Ratings                                              Value      Unit Notes
 Electrical Ratings
                    Supply Voltage at VS1 and VS2
      VSUP(SS)        • Normal Operation (DC)                                                              -0.3 to 27     V
      VSUP(PK)        • Transient Conditions (load dump)                                                   -0.3 to 40
         VDD        Supply Voltage at VDD                                                                  -0.3 to 5.5    V
                                                                                                                               (5)
                    Input / Output Pins Voltage
         VIN          • CS, RST, SCLK, PWMIN, ADOUT0, MOSI, MISO, TXD, RXD                             -0.3 to VDD +0.3   V
      VIN(IRQ)        • Interrupt Pin (IRQ)                                                                -0.3 to 11          (6)
         VHS        HS1 Pin Voltage (DC)                                                             - 0.3 to VSUP +0.3   V
         VLS        LS1 and LS2 Pin Voltage (DC)                                                           -0.3 to 45     V
                    L1 and L2 Pin Voltage
       VLxDC          • Normal Operation with a series 33 kΩ resistor (DC)                                  -18 to 40
                                                                                                                          V
                      • Transient input voltage with external component (according to ISO7637-2)              ±100
        VLxTR
                        (See Figure 5, page 19)
      VVSENSE       VSENSE Pin Voltage (DC)                                                                 -27 to 40     V
                    LIN Pin Voltage
      VBUSDC          • Normal Operation (DC)                                                               -18 to 40
                                                                                                                          V
                      • Transient input voltage with external component (according to ISO7637-2)          -150 to 100
       VBUSTR
                        (See Figure 5, page 19)
        IVDD        VDD Output Current                                                                Internally Limited  A
 Notes
    5. Exceeding voltage limits on specified pins may cause a malfunction or permanent damage to the device.
    6. Extended voltage range for programming purpose only.
                                                                                                                               33911
NXP Semiconductors                                                                                                                 7


Table 3. Maximum ratings (continued)
All voltages are with respect to ground unless otherwise noted. Exceeding these ratings may cause a malfunction or permanent damage
to the device.
       Symbol                                               Ratings                                             Value                Unit       Notes
                       ESD Capability
                        • AECQ100
       VESD1-1          • Human Body Model - JESD22/A114 (CZAP = 100 pF, RZAP = 1500 Ω)                         ± 8.0k
       VESD1-2          • LIN Pin                                                                               ± 6.0k
       VESD1-3          • L1 and L2                                                                             ±2000
                        • all other Pins
       VESD2-1          • Charge Device Model - JESD22/C101 (CZAP = 4.0 pF)                                     ± 750
       VESD2-2          • Corner Pins (Pins 1, 8, 9, 16, 17, 24, 25 and 32)                                     ± 500
                        • All other Pins (Pins 2-7, 10-15, 18-23, 26-31)
                        • According to LIN Conformance Test Specification / LIN EMC Test
                          Specification, August 2004 (CZAP = 150 pF, RZAP = 330 Ω)
                                                                                                                                       V
       VESD3-1          • Contact Discharge, Unpowered                                                          ± 20 k
                        • LIN pin with 220 pF                                                                   ± 11 k
       VESD3-2
                        • LIN pin without capacitor                                                            >± 12 k
       VESD3-3                                                                                                  ±6000
                        • VS1/VS2 (100 nF to ground)
       VESD3-4          • Lx inputs (33 kΩ serial resistor)
                        • According to IEC 61000-4-2 (CZAP = 150 pF, RZAP = 330 Ω)
                        • Unpowered
       VESD4-1          • LIN pin with 220 pF and without capacitor                                            ± 8000
       VESD4-2          • VS1/VS2 (100 nF to ground)                                                           ± 8000
       VESD4-3          • Lx inputs (33 kΩ serial resistor)                                                    ± 8000
 Thermal ratings
                       Operating Ambient Temperature
          TA            • 33911                                                                              -40 to 125               °C            (7)
                        • 34911                                                                               -40 to 85
          TJ           Operating Junction Temperature                                                        -40 to 150               °C
        TSTG           Storage Temperature                                                                   -55 to 150               °C
                       Thermal Resistance, Junction to Ambient
         RθJA                                                                                                                                    (7), (8)
                       Natural Convection, Single Layer board (1s)                                                85                °C/W
                       Natural Convection, Four Layer board (2s2p)                                                56                             (7), (9)
         RθJC          Thermal Resistance, Junction to Case                                                       23                °C/W           (10)
        TPPRT          Peak Package Reflow Temperature During Reflow                                           Note 12                °C       (11), (12)
 Notes
    7.   Junction temperature is a function of on-chip power dissipation, package thermal resistance, mounting site (board) temperature, ambient
         temperature, air flow, power dissipation of other components on the board, and board thermal resistance.
    8.   Per JEDEC JESD51-2 with the single layer board (JESD51-3) horizontal.
    9.   Per JEDEC JESD51-6 with the board (JESD51-7) horizontal.
  10.    Thermal resistance between the die and the case top surface as measured by the cold plate method (MIL SPEC-883 Method 1012.1).
  11.    Pin soldering temperature limit is for 10 seconds maximum duration. Not designed for immersion soldering. Exceeding these limits may cause
         malfunction or permanent damage to the device.
  12.    Freescale’s Package Reflow capability meets Pb-free requirements for JEDEC standard J-STD-020C. For Peak Package Reflow Temperature
         and Moisture Sensitivity Levels (MSL), go to www.freescale.com, search by part number [e.g. remove prefixes/suffixes and enter the core ID to
         view all orderable parts. (i.e. MC33xxxD enter 33xxx), and review parametrics.
 33911
8                                                                                                                               NXP Semiconductors


5.2            Static electrical characteristics
Table 4. Static electrical characteristics
Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, -40 °C ≤ TA ≤ 125 °C for the 33911 and -40 °C ≤ TA ≤ 85 °C for the 34911,
unless otherwise noted. Typical values noted reflect the approximate parameter mean at TA = 25 °C under nominal conditions, unless
otherwise noted.
      Symbol                                       Characteristic                               Min. Typ.  Max.      Unit       Notes
Supply voltage range (VS1, VS2)
         VSUP           Nominal Operating Voltage                                                5.5    –   18        V
      VSUPOP            Functional Operating Voltage                                              –    –    27        V           (13)
      VSUPLD            Load Dump                                                                 –    –    40        V
Supply current range (VSUP = 13.5 V)
          IRUN          Normal Mode (IOUT at VDD = 10 mA), LIN Recessive State                    –   4.5   10       mA           (14)
                        Stop Mode, VDD ON with IOUT = 100 µA, LIN Recessive State
                         • 5.5 V < VSUP < 12 V                                                    –   47    80                 (14), (15),
         ISTOP                                                                                                        µA
                         • VSUP = 13.5 V                                                          –   62    90                 (16), (17)
                         • 13.5 V < VSUP < 18 V                                                   –   180  400
                        Sleep Mode, VDD OFF, LIN Recessive State
                         • 5.5 V < VSUP < 12 V                                                    –    27   35
        ISLEEP                                                                                                        µA       (14), (16)
                         • VSUP = 13.5 V                                                          –    33   48
                         • 13.5 V ≤ VSUP < 18 V                                                   –   160  300
       ICYCLIC          Cyclic Sense Supply Current Adder                                         –    10    –        µA          (18)
Supply under/overvoltage detections
                        Power-On Reset (BATFAIL)
      VBATFAIL           • Threshold (measured on VS1)                                           1.5  3.0   3.9       V        (18), (19)
   VBATFAIL_HYS          • Hysteresis (measured on VS1)                                           –   0.9    –
                        VSUP Undervoltage Detection (VSUV Flag) (Normal and Normal
                        Request Modes, Interrupt Generated)
         VSUV                                                                                                         V
                         • Threshold (measured on VS1)                                          5.55  6.0   6.6
     VSUV_HYS            • Hysteresis (measured on VS1)                                           –   0.2    –
                        VSUP Overvoltage Detection (VSOV Flag) (Normal and Normal
                        Request Modes, Interrupt Generated)
         VSOV                                                                                                         V
                         • Threshold (measured on VS1)                                           18  19.25 20.5
     VSOV_HYS            • Hysteresis (measured on VS1)                                           –   1.0    –
Notes
  13. Device is fully functional. All features are operating.
  14. Total current (IVS1 + IVS2) measured at GND pins excluding all loads, cyclic sense disabled.
  15.     Total IDD current (including loads) below 100 µA.
  16.     Stop and Sleep modes current increases if VSUP exceeds 13.5 V.
  17.     This parameter is guaranteed after 90 ms.
  18.     This parameter is guaranteed by process monitoring but not production tested.
  19.     The Flag is set during power up sequence. To clear the flag, a SPI read must be performed.
                                                                                                                                  33911
NXP Semiconductors                                                                                                                    9


Table 4. Static electrical characteristics (continued)
Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, -40 °C ≤ TA ≤ 125 °C for the 33911 and -40 °C ≤ TA ≤ 85 °C for the 34911,
unless otherwise noted. Typical values noted reflect the approximate parameter mean at TA = 25 °C under nominal conditions, unless
otherwise noted.
      Symbol                                     Characteristic                             Min.   Typ.   Max.       Unit      Notes
Voltage   regulator(20) (VDD)
                      Normal Mode Output Voltage
      VDDRUN                                                                                4.75   5.00    5.25        V
                        • 1.0 mA < IVDD < 50 mA; 5.5 V < VSUP < 27 V
      IVDDRUN         Normal Mode Output Current Limitation                                   60   110     200        mA
                      Dropout Voltage
     VDDDROP                                                                                   –    0.1    0.25        V        (21)
                        • IVDD = 50 mA
                      Stop Mode Output Voltage
     VDDSTOP                                                                                4.75    5.0    5.25        V
                        • IVDD < 5.0 mA
     IVDDSTOP         Stop Mode Output Current Limitation                                    6.0    13      36        mA
                      Line Regulation
       LRRUN            • Normal Mode, 5.5 V < VSUP < 18 V; IVDD = 10 mA                       –     –      25        mV
      LRSTOP            • Stop Mode, 5.5 V < VSUP < 18 V; IVDD = 1.0 mA                        –     –      25
                      Load Regulation
       LDRUN            • Normal Mode, 1.0 mA < IVDD < 50 mA                                   –     –      80        mV
      LDSTOP            • Stop Mode, 0.1 mA < IVDD < 5.0 mA                                    –     –      50
                      Overtemperature Prewarning (Junction)
        TPRE                                                                                                          °C        (22)
                        • Interrupt generated, VDDOT Bit Set                                  90   115     140
     TPRE_HYS         Overtemperature Prewarning Hysteresis                                    –    13       –        °C        (22)
        TSD           Overtemperature Shutdown Temperature (Junction)                        150   170     190        °C        (22)
      TSD_HYS         Overtemperature Shutdown Hysteresis                                     –     13       –        °C        (22)
RST input/output pin (RST)
       VRSTTH         VDD Low-voltage Reset Threshold                                        4.3    4.5     4.7        V
                      Low-state Output Voltage
         VOL                                                                                 0.0     –      0.9        V
                        • IOUT = 1.5 mA; 3.5 V ≤ VSUP ≤ 27 V
         IOH          High-state Output Current (0 V < VOUT < 3.5 V)                        -150   -250    -350       µA
                      Pull-down Current Limitation (internally limited)
      IPD_MAX                                                                                1.5     –      8.0       mA
                      VOUT = VDD
         VIL          Low-state Input Voltage                                               -0.3     –  0.3 x VDD      V
         VIH          High-state Input Voltage                                           0.7 x VDD   –  VDD +0.3       V
 Notes
  20. Specification with external capacitor 2.0 µF < C < 100 µF and 100 mΩ ≤ ESR ≤ 10 Ω.
  21. Measured when voltage has dropped 250 mV below its nominal Value (5.0 V).
  22. This parameter is guaranteed by process monitoring but not production tested.
33911
10                                                                                                                NXP Semiconductors


Table 4. Static electrical characteristics (continued)
Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, -40 °C ≤ TA ≤ 125 °C for the 33911 and -40 °C ≤ TA ≤ 85 °C for the 34911,
unless otherwise noted. Typical values noted reflect the approximate parameter mean at TA = 25 °C under nominal conditions, unless
otherwise noted.
      Symbol                                  Characteristic                         Min.      Typ.       Max.       Unit      Notes
MISO SPI output pin (MISO)
                    Low-state Output Voltage
         VOL                                                                          0.0       –          1.0        V
                      • IOUT = 1.5 mA
                    High-state Output Voltage
         VOH                                                                      VDD -0.9      –          VDD        V
                      • IOUT = -250 µA
                    Tri-state Leakage Current
      ITRIMISO                                                                       -10        –           10        µA
                      • 0 V ≤ VMISO ≤ VDD
SPI input pins (MOSI, SCLK, CS)
          VIL       Low-state Input Voltage                                          -0.3       –       0.3 x VDD     V
          VIH       High-state Input Voltage                                      0.7 x VDD     –       VDD +0.3      V
                    MOSI, SCLK Input Current
          IIN                                                                        -10        –           10        µA
                      • 0 V ≤ VIN ≤ VDD
                    CS Pull-up Current
        IPUCS                                                                         10        20          30        µA
                      • 0 V < VIN < 3.5 V
 Interrupt output pin (IRQ)
                    Low-state Output Voltage
         VOL                                                                          0.0       –          0.8        V
                      • IOUT = 1.5 mA
                    High-state Output Voltage
         VOH                                                                      VDD -0.8      –          VDD        V
                      • IOUT = -250 µA
                    Leakage Current
         IOUT                                                                          –        –          2.0       mA
                      • VDD ≤ VOUT ≤ 10 V
Pulse width modulation input pin (PWMIN)
          VIL       Low-state Input Voltage                                          -0.3       –       0.3 x VDD     V
          VIH       High-state Input Voltage                                      0.7 x VDD     –       VDD +0.3      V
                    Pull-up current
     IPUPWMIN                                                                         10        20          30        µA
                      • 0 V < VIN < 3.5 V
                                                                                                                                 33911
NXP Semiconductors                                                                                                                11


Table 4. Static electrical characteristics (continued)
Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, -40 °C ≤ TA ≤ 125 °C for the 33911 and -40 °C ≤ TA ≤ 85 °C for the 34911,
unless otherwise noted. Typical values noted reflect the approximate parameter mean at TA = 25 °C under nominal conditions, unless
otherwise noted.
      Symbol                                     Characteristic                                Min.         Typ.        Max.           Unit    Notes
High-side output HS1 pin (HS1)
                     Output Drain-to-Source On Resistance
                      • TJ = 25 °C, ILOAD = 50 mA; VSUP > 9.0 V                                  –             –         7.0
      RDS(on)                                                                                                                           Ω        (23)
                      • TJ = 150 °C, ILOAD = 50 mA; VSUP > 9.0 V                                 –             –          10
                      • TJ = 150 °C, ILOAD = 30 mA; 5.5 V < VSUP < 9.0 V                         –             –          14                     (23)
                     Output Current Limitation
      ILIMHS1                                                                                   60            90         250           mA        (24)
                      • 0 V < VOUT < VSUP - 2.0 V
       IOLHS1        Open Load Current Detection                                                 –           5.0         7.5           mA        (25)
                     Leakage Current
        ILEAK                                                                                    –             –          10            µA
                      • -0.2 V < VHS1 < VS2 + 0.2 V
                     Short-circuit Detection Threshold
       VTHSC                                                                                 VSUP -2.0         –           –             V       (26)
                      • 5.5 V < VSUP < 27 V
       THSSD         Overtemperature Shutdown                                                  140           160         180            °C    (27), (31)
    THSSD_HYS        Overtemperature Shutdown Hysteresis                                         –           10            –            °C       (31)
Low-side outputs LS1 and LS2 pins (LS1, LS2)
                     Output Drain-to-Source On Resistance
                      • TJ = 25 °C, ILOAD = 150 mA, VSUP > 9.0 V                                 –             –         2.5
      RDS(on)                                                                                                                           Ω
                      • TJ = 125 °C, ILOAD = 150 mA, VSUP > 9.0 V                                –             –         4.5
                      • TJ = 125 °C, ILOAD = 120 mA, 5.5 V < VSUP < 9.0 V                        –             –          10
                     Output Current Limitation
      ILIMLSX                                                                                  160           275         350           mA        (28)
                      • 2.0 V < VOUT < VSUP
       IOLLSX        Open Load Current Detection                                                 –           7.5          12           mA        (29)
                     Leakage Current
        ILEAK                                                                                    –             –          10            µA
                      • -0.2 V < VOUT < VS1
                     Active Output Energy Clamp
      VCLAMP                                                                                VSUP +2.0          –     VSUP +5.0           V
                      • IOUT = 150 mA
                     Short-circuit Detection Threshold
       VTHSC                                                                                    2.0            –           –             V       (26)
                      • 5.5 V < VSUP < 27 V
       TLSSD         Overtemperature Shutdown                                                  140           160         180            °C    (30), (31)
    TLSSD_HYS        Overtemperature Shutdown Hysteresis                                         –           10            –            °C       (31)
 Notes
  23. This parameter is production tested up to TA = 125 °C, and guaranteed by process monitoring up to TJ = 150 °C.
  24.    When overcurrent occurs, the corresponding high-side stays ON with limited current capability and the HS1CL flag is set in the HSSR.
  25.    When open load occurs, the flag (HS1OP) is set in the HSSR.
  26.    HS and LS automatically shutdown if HSOT or LSOT occurs or if the HVSE flag is enabled and an overvoltage occurs.
  27.    When overtemperature shutdown occurs, the high-side is turned off. All flags in HSSR are set.
  28.    When overcurrent occurs, the corresponding low-side stays ON with limited current capability and the LSxCL flag is set in the LSSR.
  29.    When open load occurs, the flag (LSxOP) is set in the LSSR.
  30.    When overtemperature shutdown occurs, both low-sides are turned off. All flags in LSSR are set.
  31.    Guaranteed by characterization but not production tested
33911
12                                                                                                                               NXP Semiconductors


Table 4. Static electrical characteristics (continued)
Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, -40 °C ≤ TA ≤ 125 °C for the 33911 and -40 °C ≤ TA ≤ 85 °C for the 34911,
unless otherwise noted. Typical values noted reflect the approximate parameter mean at TA = 25 °C under nominal conditions, unless
otherwise noted.
      Symbol                                     Characteristic                                 Min.         Typ.        Max.         Unit      Notes
L1 and L2 input pins (L1 and L2)
                      Low Detection Threshold
        VTHL                                                                                     2.0          2.5         3.0           V        (32)
                        • 5.5 V < VSUP < 27 V
                      High Detection Threshold
        VTHH                                                                                     3.0          3.5         4.0           V        (32)
                        • 5.5 V < VSUP < 27 V
                      Hysteresis
        VHYS                                                                                     0.4          0.8         1.4           V        (32)
                        • 5.5 V < VSUP < 27 V
                      Input Current
         IIN                                                                                     -10           –           10          µA        (33)
                        • -0.2 V < VIN < VS1
        RLXIN         Analog Input Impedance                                                     800        1300         2000          kΩ        (34)
                      Analog Input Divider Ratio (RATIOLx = VLx / VADOUT0)
      RATIOLX           • LXDS (Lx Divider Select) = 0                                          0.95          1.0        1.05
                        • LXDS (Lx Divider Select) = 1                                          3.42          3.6        3.78
                      Analog Output offset Ratio
 VRATIOLx-OFFSET        • LXDS (Lx Divider Select) = 0                                           -80          6.0          80          mV
                        • LXDS (Lx Divider Select) = 1                                           -22          2.0          22
                      Analog Inputs Matching
    LXMATCHING          • LXDS (Lx Divider Select) = 0                                            96         100          104          %
                        • LXDS (Lx Divider Select) = 1                                            96         100          104
Window watchdog configuration pin (WDCONF) (35)
        REXT          External Resistor Range                                                     20           –          200          kΩ
       WDACC          Watchdog Period Accuracy with External Resistor (Excluding Resistor                                                        (36)
                                                                                                 -15           –           15          %
                     Accuracy)
Analog multiplexer
                      Temperature Sense Analog Output Voltage
                        • TA = -40 °C                                                            2.0           –          2.8
  VADOUT0_TEMP                                                                                                                          V
                        • TA = 25 °C                                                             2.8          3.0         3.6
                        • TA = 125 °C                                                            3.6           –          4.6
                      Temperature Sense Analog Output Voltage per characterization
    VADOUT0_25                                                                                                                          V        (37)
                        • TA = 25 °C                                                             3.1         3.15         3.2
       STTOV          Internal Chip Temperature Sense Gain                                       9.0         10.5          12        mV/K
      STTOV_3T        Internal Chip Temperature Sense Gain per characterization at 3                                                             (37)
                                                                                                 9.9         10.2        10.5        mV/K
                     temperatures. See Figure 16, Temperature sense gain
                      VSENSE Input Divider Ratio (RATIOVSENSE = VVSENSE / VADOUT0)
   RATIOVSENSE
                        • 5.5 V < VSUP < 27 V                                                    5.0         5.25         5.5
Notes
  32.   The unused Lx pins must be connected to ground.
  33.   Analog multiplexer input disconnected from Lx input pin.
  34.   Analog multiplexer input connected to Lx input pin.
  35.   For VSUP 4.7 V to 18 V
  36.   Watchdog timing period calculation formula: tPWD [ms] = [0.466 * (REXT - 20)] + 10 with (REXT in kΩ)
  37.   These limits have been defined after laboratory characterization on 3 lots and 30 samples. These tightened limits could not be guaranteed by
        production test.
                                                                                                                                                 33911
NXP Semiconductors                                                                                                                                 13


Table 4. Static electrical characteristics (continued)
Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, -40 °C ≤ TA ≤ 125 °C for the 33911 and -40 °C ≤ TA ≤ 85 °C for the 34911,
unless otherwise noted. Typical values noted reflect the approximate parameter mean at TA = 25 °C under nominal conditions, unless
otherwise noted.
      Symbol                                   Characteristic                                  Min.         Typ.          Max.         Unit      Notes
Analog multiplexer (continued)
                    VSENSE Input Divider Ratio (RATIOVSENSE=Vsense/Vadout0) per
  RATIOVSENSECZ     characterization                                                           5.15          5.25          5.35                   (38)
                     • 5.5 <VSUP< 27 V
  OFFSETVSENSE      VSENSE Output Related Offset                                                -30          -10            30         mV
 OFFSETVSENSE_CZ VSENSE Output Related Offset per characterization                              -30         -12.6            0         mV         (38)
Analog output (ADOUT0)
                    Maximum Output Voltage
     VOUT_MAX                                                                               VDD -0.35         –            VDD          V
                     • -5.0 mA < IO < 5.0 mA
                    Minimum Output Voltage
     VOUT_MIN                                                                                   0.0           –            0.35         V
                     • -5.0 mA < IO < 5.0 mA
RxD output pin (LIN physical layer) (RxD)
                    Low-state Output Voltage
        VOL                                                                                     0.0           –            0.8          V
                     • IOUT = 1.5 mA
                    High-state Output Voltage
        VOH                                                                                  VDD -0.8         –            VDD          V
                     • IOUT = -250 µA
TXD input pin (LIN physical layer) (TXD)
         VIL        Low-state Input Voltage                                                    -0.3           –         0.3 x VDD       V
         VIH        High-state Input Voltage                                                0.7 x VDD         –         VDD +0.3        V
       IPUIN        Pin Pull-up Current, 0 V < VIN < 3.5 V                                       10           20            30         µA
LIN physical layer with J2602 feature enabled (bit DIS_J2602 = 0)
   VTH_UNDER_       LIN Undervoltage threshold
                                                                                                5.0                         6.0         V
    VOLTAGE          • Positive and Negative threshold (VTHP, VTHN)
    VJ2602_DEG      Hysteresis (VTHP - VTHN)                                                                 400                       mV
Notes
  38. These limits have been defined after laboratory characterization on 3 lots and 30 samples. These tighter limits cannot be guaranteed by production
        test.
33911
14                                                                                                                                NXP Semiconductors


Table 4. Static electrical characteristics (continued)
Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, -40 °C ≤ TA ≤ 125 °C for the 33911 and -40 °C ≤ TA ≤ 85 °C for the 34911,
unless otherwise noted. Typical values noted reflect the approximate parameter mean at TA = 25 °C under nominal conditions, unless
otherwise noted.
       Symbol                                       Characteristic                             Min.         Typ.          Max.         Unit      Notes
LIN physical layer, transceiver       (LIN)(39)
         VBAT          Operating Voltage Range                                                   8.0          –            18            V
         VSUP          Supply Voltage Range                                                      7.0          –            18            V
   VSUP_NON_OP         Voltage Range within which the device is not destroyed                   -0.3          –            40            V
                       Current Limitation for Driver Dominant State
       IBUS_LIM                                                                                  40          90           200          mA
                         • Driver ON, VBUS = 18 V
                       Input Leakage Current at the receiver
   IBUS_PAS_DOM                                                                                 -1.0          –             –          mA
                         • Driver off; VBUS = 0 V; VBAT = 12 V
                       Leakage Output Current to GND
   IBUS_PAS_REC                                                                                   –           –            20          µA
                         • Driver Off; 8.0 V < VBAT < 18 V; 8.0 V < VBUS < 18 V; VBUS ≥ VBAT
                       Control Unit Disconnected from Ground
    IBUS_NO_GND                                                                                 -1.0          –            1.0         mA         (40)
                         • GNDDEVICE = VSUP; VBAT = 12 V; 0 < VBUS < 18 V
     IBUSNO_BAT        VBAT Disconnected; VSUP_DEVICE = GND; 0 V < VBUS < 18 V                    –           –           100          µA         (41)
      VBUSDOM          Receiver Dominant State                                                    –           –           0.4         VSUP
       VBUSREC         Receiver Recessive State                                                  0.6          –             –         VSUP
                       Receiver Threshold Center
      VBUS_CNT                                                                                 0.475         0.5         0.525        VSUP
                         • (VTH_DOM + VTH_REC)/2
                       Receiver Threshold Hysteresis
         VHYS                                                                                     –           –          0.175        VSUP
                         • (VTH_REC - VTH_DOM)
      VSERDIODE        Voltage Drop at the Serial Diode in pull-up path                         0.4                       1.0            V
     VSHIFT_BAT        VBAT_SHIFT                                                                 0                     11.5%         VBAT
     VSHIFT_GND        GND_SHIFT                                                                  0                      11.5%        VBAT
       VBUSWU          LIN Wake-up Threshold from Stop or Sleep Mode                                         5.3           5.8           V        (42)
        RSLAVE         LIN Pull-up Resistor to VSUP                                              20          30            60          kΩ
        TLINSD         Overtemperature Shutdown                                                 140         160           180           °C        (43)
     TLINSD_HYS        Overtemperature Shutdown Hysteresis                                        –          10             –           °C
Notes
  39.    Parameters guaranteed for 7.0 V ≤ VSUP ≤ 18 V.
  40.    Loss of local ground must not affect communication in the residual network.
  41.    Node has to sustain the current which can flow under this condition. Bus must remain operational under this condition.
  42.    This parameter is 100% tested on an Automatic Tester. However, since it has not been monitored during reliability stresses, Freescale does not
         guarantee this parameter during the product's life time.
  43.    When overtemperature shutdown occurs, the LIN bus goes in recessive state and the flag LINOT in LINSR is set.
                                                                                                                                                  33911
NXP Semiconductors                                                                                                                                  15


5.3            Dynamic electrical characteristics
Table 5. Dynamic electrical characteristics
Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, -40 °C ≤ TA ≤ 125 °C for the 33911 and -40 °C ≤ TA ≤ 85 °C for the 34911,
unless otherwise noted. Typical values noted reflect the approximate parameter mean at TA = 25 °C under nominal conditions, unless
otherwise noted.
     Symbol                                         Characteristic                                     Min. Typ. Max.     Unit  Notes
SPI interface timing (see Figure 13, page 22)
      f SPIOP       SPI Operating Frequency                                                              –    –  4.0     MHz
      tPSCLK        SCLK Clock Period                                                                  250    –  N/A       ns
     tWSCLKH        SCLK Clock High Time                                                               110    –  N/A       ns    (44)
     tWSCLKL        SCLK Clock Low Time                                                                110    –  N/A       ns    (44)
       tLEAD        Falling Edge of CS to Rising Edge of SCLK                                          100    –  N/A       ns    (44)
         tLAG       Falling Edge of SCLK to CS Rising Edge                                             100    –  N/A       ns    (44)
        tSISU       MOSI to Falling Edge of SCLK                                                        40    –  N/A       ns    (44)
          tSIH      Falling Edge of SCLK to MOSI                                                        40    –  N/A       ns    (44)
                    MISO Rise Time
         tRSO                                                                                                              ns    (44)
                      • CL = 220 pF                                                                      –   40    –
                    MISO Fall Time
         tFSO                                                                                                              ns    (44)
                      • CL = 220 pF                                                                      –   40    –
                    Time from Falling or Rising Edges of CS to:
       tSOEN        - MISO Low-impedance                                                                0.0   –   50       ns    (44)
      tSODIS        - MISO High-impedance                                                               0.0   –   50
                    Time from Rising Edge of SCLK to MISO Data Valid
       tVALID                                                                                                              ns    (44)
                      • 0.2 x VDD ≤ MISO ≥ 0.8 x VDD, CL = 100 pF                                       0.0   –   75
RST output pin
        t RST       Reset Low-level Duration After VDD High (see Figure 12, page 22)                   0.65  1.0 1.35     ms
      t RSTDF       Reset Deglitch Filter Time                                                         350  480  900       ns
Window watchdog configuration pin (WDCONF)
                    Watchdog Time Period
                      • External Resistor REXT = 20 kΩ (1%)                                             8.5  10  11.5
        t PWD                                                                                                             ms     (45)
                      • External Resistor REXT = 200 kΩ (1%)                                            79   94  108
                      • Without External Resistor REXT (WDCONF Pin Open)                               110  150  205
Notes
  44. This parameter is guaranteed by process monitoring but not production tested.
  45. Watchdog timing period calculation formula: tPWD [ms] = [0.466 * (REXT - 20)] + 10 with (REXT in kΩ)
33911
16                                                                                                                   NXP Semiconductors


Table 5. Dynamic electrical characteristics (continued)
Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, -40 °C ≤ TA ≤ 125 °C for the 33911 and -40 °C ≤ TA ≤ 85 °C for the 34911,
unless otherwise noted. Typical values noted reflect the approximate parameter mean at TA = 25 °C under nominal conditions, unless
otherwise noted.
      Symbol                                              Characteristic                            Min.      Typ.         Max.      Unit     Notes
L1 and L2 inputs
         t WUF          Lx Filter Time Deglitcher                                                   8.0         20           38       μs       (46)
State machine timing
         t STOP         Delay Between CS LOW-to-HIGH Transition (at End of the SPI Stop Command)                                               (46)
                                                                                                      –          –          5.0       μs
                        and Stop Mode Activation
     t NR TOUT          Normal Request Mode Timeout (see Figure 12, page 22)                        110        150          205       ms
           TON          Cyclic Sense ON Time from Stop and Sleep Mode                               130        200          270       µs       (47)
                        Cyclic Sense Accuracy                                                       -35                     +35       %        (46)
                        Delay Between the SPI Command and HS /LS Turn On
         t S-ON                                                                                       –          –           10       μs       (48)
                          • 9.0 V < VSUP < 27 V
                        Delay Between the SPI Command and HS /LS Turn Off
        t S-OFF                                                                                      –           –           10       μs       (48)
                          • 9.0 V < VSUP < 27 V
       t SNR2N          Delay Between Normal Request and Normal Mode After a Watchdog Trigger                                                  (46)
                                                                                                     –           –           10       μs
                        Command (Normal Request Mode)
                        Delay Between CS Wake-up (CS LOW to HIGH) in Stop Mode and:
        t WUCS            • Normal Request Mode, VDD ON and RST HIGH                                9.0         15           80       μs
       t WUSPI            • First Accepted the SPI Command                                           90         —           N/A
          t 2CS         Minimum Time Between Rising and Falling Edge on the CS                      4.0         —            —        μs
J2602 deglitcher
                         VSUP Deglitcher
    tJ2602_DEG                                                                                       35         50           70       μs       (49)
                          • (DIS_J2602 = 0)
LIN physical layer: driver characteristics for normal slew rate - 20 kBit/sec according to LIN physical layer specification (50), (51)
                        Duty Cycle 1:
                          • THREC(MAX) = 0.744 * VSUP
           D1             • THDOM(MAX) = 0.581 * VSUP
                                                                                                   0.396        —            —
                          • D1 = tBUS_REC(MIN)/(2 x tBIT), tBIT = 50 µs, 7.0 V ≤ VSUP ≤ 18 V
                        Duty Cycle 2:
                          • THREC(MIN) = 0.422 * VSUP
           D2             • THDOM(MIN) = 0.284 * VSUP
                                                                                                     —          —          0.581
                          • D2 = tBUS_REC(MAX)/(2 x tBIT), tBIT = 50 µs, 7.6 V ≤ VSUP ≤ 18 V
Notes
  46. This parameter is guaranteed by process monitoring but not production tested.
  47. This parameter is 100% tested on an Automatic Tester. However, since it has not been monitored during reliability stresses, Freescale does not
           guarantee this parameter during the product's life time.
  48. Delay between turn on or off command (rising edge on CS) and HS or LS ON or OFF, excluding rise or fall time due to external load.
  49. This parameter has not been monitoring during operating life test.
  50. See Figure 7, page 20.
  51. See Figure 8, page 20.
                                                                                                                                               33911
NXP Semiconductors                                                                                                                               17


Table 5. Dynamic electrical characteristics (continued)
Characteristics noted under conditions 5.5 V ≤ VSUP ≤ 18 V, -40 °C ≤ TA ≤ 125 °C for the 33911 and -40 °C ≤ TA ≤ 85 °C for the 34911,
unless otherwise noted. Typical values noted reflect the approximate parameter mean at TA = 25 °C under nominal conditions, unless
otherwise noted.
        Symbol                                            Characteristic                                Min.     Typ.       Max.         Unit   Notes
LIN physical layer: driver characteristics for slow slew ratE - 10.4 kBit/sec according to lin physical layer specification    (52), (53)
                         Duty Cycle 3:
                          • THREC(MAX) = 0.778 * VSUP
            D3            • THDOM(MAX) = 0.616 * VSUP
                          • D3 = tBUS_REC(MIN)/(2 x tBIT), tBIT = 96 µs, 7.0 V ≤ VSUP ≤ 18 V           0.417       —         —
                         Duty Cycle 4:
                          • THREC(MIN) = 0.389 * VSUP
            D4            • THDOM(MIN) = 0.251 * VSUP
                          • D4 = tBUS_REC(MAX)/(2 x tBIT), tBIT = 96 µs, 7.6 V ≤ VSUP ≤ 18 V              —        —       0.590
LIN physical layer: driver characteristics for fast slew rate
        SRFAST           LIN Fast Slew Rate (Programming Mode)                                            —        20        —          V / μs
                                                                  (54)
LIN physical layer: characteristics and wake-up timings
                         Propagation Delay and Symmetry
       t REC_PD           • Propagation Delay of Receiver, tREC_PD=MAX (tREC_PDR, tREC_PDF)               —        4.2       6.0           μs    (55)
     t REC_SYM            • Symmetry of Receiver Propagation Delay, tREC_PDF - tREC_PDR                 - 2.0      —         2.0
                                                                                                                                               (56),(60),
       t PROPWL          Bus Wake-up Deglitcher (Sleep and Stop Modes)                                   42        70        95            μs    (57)
                         Bus Wake-up Event Reported
    t WAKE_SLEEP                                                                                                                                 (58)
                          • From Sleep Mode                                                               —        —        1500           μs
     t WAKE_STOP          • From Stop Mode                                                               9.0       27        35                  (59)
       t TXDDOM          TXD Permanent Dominant State Delay                                             0.65       1.0      1.35            s
Pulse width modulation input pin (PWMIN)
                         PWMIN pin
         fPWMIN                                                                                           —        10        —            kHz    (60)
                          • Max. frequency to drive HS and LS output pins
Notes
  52. Bus load RBUS and CBUS 1.0 nF / 1.0 kΩ, 6.8 nF / 660 Ω, 10 nF / 500 Ω. Measurement thresholds: 50% of TXD signal to LIN signal threshold
           defined at each parameter. See Figure 6, page 20.
  53. See Figure 8, page 20.
  54. VSUP from 7.0 to 18 V, bus load RBUS and CBUS 1.0 nF / 1.0 kΩ, 6.8 nF / 660 Ω, 10 nF / 500 Ω. Measurement thresholds: 50% of TXD signal to
           LIN signal threshold defined at each parameter. See Figure 6, page 20.
  55. See Figure 9, page 21
  56. See Figure 10, page 21 for Sleep and Figure 11, page 21 for Stop mode.
  57. This parameter is tested on automatic tester but has not been monitoring during operating life test.
  58. The measurement is done with 1.0 µF capacitor and 0 mA current load on VDD. The value takes into account the delay to charge the capacitor.
           The delay is measured between the bus wake-up threshold (VBUSWU) rising edge of the LIN bus and when VDD reaches 3.0 V. See Figure 10,
           page 21. The delay depends of the load and capacitor on VDD.
  59.      In Stop mode, the delay is measured between the bus wake-up threshold (VBUSWU) and the falling edge of the IRQ pin. See Figure 11, page 21.
  60.      This parameter is guaranteed by process monitoring but not production tested.
33911
18                                                                                                                              NXP Semiconductors


5.4      Timing diagrams
                         33911
                                              1.0 nF         TRANSIENT PULSE
                                                                GENERATOR
                                   LIN                             (NOTE)
                                                                     GND
                    PGND LGND   AGND
                        Note Waveform per ISO 7637-2. Test Pulses 1, 2, 3a, 3b.
                           Figure 4. Test circuit for transient test pulses (LIN)
                         33911
                                                 1.0 nF        Transient Pulse
                                L1, L2                            Generator
                                                                    (Note)
                                         10 kΩ
                                                                     GND
                    PGND LGND AGND
                        Note Waveform per ISO 7637-2. Test Pulses 1, 2, 3a, 3b,.
                             Figure 5. Test circuit for transient test pulses (Lx)
                              VSUP
                                                           R0
                    TXD                   LIN
                    RXD                                            R0 AND C0 COMBINATIONS:
                                                                   • 1.0 KΩ and 1.0 nF
                                                           C0      • 660 Ω and 6.8 nF
                                                                   • 500 Ω and 10 nF
                           Figure 6. Test circuit for LIN timing measurements
                                                                                           33911
NXP Semiconductors                                                                          19


      TXD
                                      tBIT                               tBIT
                                       tBUS_DOM(MAX)                       tBUS_REC(MIN)
     VLIN_REC
        THREC(MAX)   74.4% VSUP                                                                            Thresholds of
                                                                                                           receiving node 1
       THDOM(MAX)     58.1% VSUP
 LIN
                     42.2% VSUP                                                                            Thresholds of
        THREC(MIN)
                                                                                                           receiving node 2
        THDOM(MIN)   28.4% VSUP
                                          tBUS_DOM(MIN)                  tBUS_REC(MAX)
   RXD
 Output of receiving Node 1
           tREC_PDF(1)                                                       tREC_PDR(1)
  RXD
 Output of receiving Node 2
                                                   tREC_PDR(2)                             tREC_PDF(2)
                                        Figure 7. LIN timing measurements for normal slew rate
           TXD
                                            tBIT                               tBIT
                                             tBUS_DOM(MAX)                       tBUS_REC(MIN)
          VLIN_REC
             THREC(MAX)   77.8% VSUP                                                                            Thresholds of
                                                                                                                receiving node 1
             THDOM(MAX)    61.6% VSUP
      LIN
                          38.9% VSUP                                                                            Thresholds of
              THREC(MIN)
                                                                                                                receiving node 2
              THDOM(MIN)  25.1% VSUP
                                                tBUS_DOM(MIN)                  tBUS_REC(MAX)
        RXD
      Output of receiving Node 1
                tREC_PDF(1)                                                        tREC_PDR(1)
       RXD
      Output of receiving Node 2
                                                       tREC_PDR(2)                             tREC_PDF(2)
                                          Figure 8. LIN timing measurements for slow slew rate
33911
20                                                                                                               NXP Semiconductors


            VLIN_REC
              VBUSREC        0.6% VSUP
                                                                                              VSUP
                             0.4% VSUP  LIN BUS SIGNAL
              VBUSDOM
              RXD
                         tREC_PDF                                 tREC_PDR
                                                  Figure 9. LIN receiver timing
                   VLIN_REC
                          LIN
                                       5.0 V
                                                                             VBUSWU
                                            DOMINANT LEVEL
                                                                                        3.0 V
                        VDD
                                                                            tWAKE_SLEEP
                                             tPROPWL
                                          Figure 10. LIN wake-up sleep mode timing
                VLIN_REC
                       LIN
                                       5.0 V
                                                                             VBUSWU
                                             DOMINANT LEVEL
                         IRQ                                            tWAKE_STOP
                                              tPROPWL
                                           Figure 11. LIN wake-up stop mode timing
                                                                                                   33911
NXP Semiconductors                                                                                  21


              VSUP
                 VDD
                 RST
                                                         tNRTOUT
                                  tRST
                          Figure 12. Power on reset and normal request timeout timing
                               tPSCLK
      CS
           tLEAD        tWSCLKH
                                                                                    tLAG
      SCLK
                                            tWSCLKL
                            tSISU      tSIH
      MOSI UNDEFINED             D0            DON’T CARE                     D7            DON’T CARE
                 tVALID
                                                                                         tSODIS
             tSOEN
      MISO
                            D0                 DON’T CARE                            D7
                                        Figure 13. SPI timing characteristics
33911
22                                                                                                NXP Semiconductors


6            Functional description
6.1          Introduction
The 33911 was designed and developed as a highly integrated and cost-effective solution for automotive and industrial applications. The
33911 is well suited to perform relay control in applications such as a window lift, sunroof, etc. via the LIN bus, for automotive body
electronics
Power switches are provided on the device configured as high-side and low-side outputs. Other ports are also provided, which include a
current and voltage sense port and two wake-up capable pins. An internal voltage regulator provides power to a MCU device. Also
included in this device is a LIN physical layer, which communicates using a single wire. This enables this device to be compatible with 3-
wire bus systems, where one wire is used for communication, one for battery, and one for ground.
6.2          Functional pin description
See Figure 1, 33911 simplified application diagram, page 1, for a graphic representation of the various pins referred to in the following
paragraphs. See the 33911 pin connections on page 5 for a description of the pin locations in the package.
6.2.1        Receiver output pin (RXD)
The RXD pin is a digital output. It is the receiver output of the LIN interface and reports the state of the bus voltage: RXD Low when LIN
bus is dominant, RXD High when LIN bus is recessive.
6.2.2        Transmitter input pin (TXD)
The TXD pin is a digital input. It is the transmitter input of the LIN interface and controls the state of the bus output (dominant when TXD
is Low, recessive when TXD is High). This pin has an internal pull-up to force recessive state in case the input is left floating.
6.2.3        Lin bus pin (LIN)
The LIN pin represents the single-wire bus transmitter and receiver. It is suited for automotive bus systems and is compliant to the LIN
bus specification 2.0, 2.1, and SAE J2602-2. The LIN interface is only active during Normal mode. See Operating modes overview on
page 28.
6.2.4        Serial data clock pin (SCLK)
The SCLK pin is the SPI clock input. MISO data changes on the positive transition of the SCLK. MOSI is sampled on the negative edge
of the SCLK.
6.2.5        Master out slave in pin (MOSI)
The MOSI digital pin receives the SPI data from the MCU. This data input is sampled on the negative edge of SCLK.
6.2.6        Master in slave out pin (MISO)
The MISO pin sends data to an SPI-enabled MCU. It is a digital tri-state output used to shift serial data to the microcontroller. Data on this
output pin changes on the positive edge of the SCLK. When CS is High, this pin remains in the high-impedance state.
6.2.7        Chip select pin (CS)
CS is an active low digital input. It must remain low during a valid SPI communication and allow for several devices to be connected in the
same SPI bus without contention. A rising edge on CS signals the end of the transmission and the moment the data shifted in is latched.
A valid transmission must consist of 8 bits only. While in STOP mode, a low-to-high level transition on this pin generates a wake-up
condition for the 33911.
                                                                                                                                        33911
NXP Semiconductors                                                                                                                       23


6.2.8         Analog multiplexer pin (ADOUT0)
The ADOUT0 pin can be configured via the SPI to allow the MCU A/D converter to read the several inputs of the Analog Multiplexer,
including the VSENSE, L1, L2 input voltages, and the internal junction temperature.
6.2.9         PWM input control pin (PWMIN)
This digital input can control the high-side and low-sides drivers in Normal Request and Normal mode. To enable PWM control, the MCU
must perform a write operation to the High-side Control Register (HSCR) or the Low-side Control Register (LSCR). This pin has an internal
20 μA current pull-up.
6.2.10 Reset pin (RST)
This bidirectional pin is used to reset the MCU in case the 33911 detects a reset condition, or to inform the 33911 the MCU has just been
reset. After release of the RST pin, Normal Request mode is entered. The RST pin is an active low filtered input and output formed by a
weak pull-up and a switchable pull-down structure, which allows this pin to be shorted either to VDD or to GND during software
development, without the risk of destroying the driver.
6.2.11 Interrupt pin (IRQ)
The IRQ pin is a digital output used to signal events or faults to the MCU while in Normal and Normal Request mode or to signal a wake-
up from Stop mode. This active low output transitions to high only after the interrupt is acknowledged by a SPI read of the respective status
bits.
6.2.12 Watchdog configuration pin (WDCONF)
The WDCONF pin is the configuration pin for the internal watchdog. A resistor can be connected to this pin to configure the window
watchdog period. When connected directly to ground, the watchdog is disabled. When this pin is left open, the watchdog period is fixed
to its lower precision internal default value (150 ms typical).
6.2.13 Ground connection pins (AGND, PGND, LGND)
The AGND, PGND and LGND pins are the Analog and Power ground pins. The AGND pin is the ground reference of the voltage regulator.
The PGND and LGND pins are used for high current load return as in the relay-drivers and LIN interface pin. Note: PGND, AGND, and
LGND pins must be connected together.
6.2.14 Low-side pins (LS1 and LS2)
LS1 and LS2 are the low-side driver outputs. Those outputs are short-circuit protected and include active clamp circuitry to drive inductive
loads. Due to the energy clamp voltage on this pin, it can raise above the battery level when switched off. The switches are controlled
through the SPI and can be configured to respond to a signal applied to the PWMIN input pin.
Both low-side switches are protected against overheating. In case of VS1 disconnection and the low-sides are still supplied by VBAT
through a load, both low-sides have a VDS voltage equal to the clamping value, as stated in the specification.
6.2.15 Digital/analog pins (L1 and L2)
The Lx pins are multi purpose inputs. They can be used as digital inputs, which can be sampled by reading the SPI and used for wake-
up when 33911 is in low-power mode or used as analog inputs for the analog multiplexer. When used to sense voltage outside the module,
a 33 kΩ series resistor must be used on each input. When used as wake-up inputs, L1 and L2 can be configured to operate in cyclic-sense
mode. In this mode, the high-side switch is configured to be periodically turned on and sample the wake-up inputs. If a state change is
detected between two cycles a wake-up is initiated. The 33911 can also wake-up from Stop or Sleep by a simple state change on L1 and
L2. When used as analog inputs, the voltage present on the Lx pins is scaled down by an selectable internal voltage divider and can be
routed to the ADOUT0 output through the analog multiplexer.
Note: If an Lx input is selected in the analog multiplexer, it is disabled as a digital input and remains disabled in low-power mode. No wake-
up feature is available in this condition.
When an Lx input is not selected in the analog multiplexer, the voltage divider is disconnected from this input.
 33911
24                                                                                                                         NXP Semiconductors


6.2.16 High-side output pin (HS1)
This high-side switch is able to drive loads such as relays or lamps. Its structure is connected to the VS2 supply pin. The pin is short-circuit
protected and also protected against overheating. HS1 is controlled by the SPI and can respond to a signal applied to the PWMIN input
pin. The HS1 output can also be used during Low-power mode for the cyclic-sense of the wake inputs.
6.3          Power supply pins (VS1 and VS2)
These are the battery level voltage supply pins. In an application, VS1 and VS2 pins must be protected against reverse battery connection
and negative transient voltages with external components. These pins sustain standard automotive voltage conditions such as a load
dump at 40 V. The high-side switch (HS1) is supplied by the VS2 pin. All other internal blocks are supplied by the VS1 pin.
6.3.1        Voltage sense pin (VSense)
This input can be connected directly to the battery line. It is protected against battery reverse connection. The voltage present in this input
is scaled down by an internal voltage divider, and can be routed to the ADOUT0 output pin and used by the MCU to read the battery
voltage. The ESD structure on this pin allows for excursion up to +40 V and down to -27 V, allowing this pin to be connected directly to
the battery line. It is strongly recommended to connect a 10 kΩ resistor in series with this pin for protection purposes.
6.3.2        +5.0 V main regulator output pin (VDD)
An external capacitor has to be placed on the VDD pin to stabilize the regulated output voltage. The VDD pin is intended to supply a
microcontroller. The pin is current limited against shorts to GND and overtemperature protected. During Stop mode, the voltage regulator
does not operate with its full drive capabilities and the output current is limited. During Sleep mode, the regulator output is completely
shutdown.
                                                                                                                                          33911
NXP Semiconductors                                                                                                                         25


7             Functional device operations
7.1           Operational modes
7.1.1         Introduction
The 33911 offers three main operating modes: Normal (Run), Stop, and Sleep (Low-power). In Normal mode, the device is active and is
operating under normal application conditions. The Stop and Sleep modes are Low-power modes with wake-up capabilities. In Stop mode,
the voltage regulator still supplies the MCU with VDD (limited current capability), while in Sleep mode the voltage regulator is turned off
(VDD = 0 V). Wake-up from Stop mode is initiated by a wake-up interrupt. Wake-up from Sleep mode is done by a reset and the voltage
regulator is turned back on. The selection of the different modes is controlled by the MOD1:2 bits in the Mode Control Register (MCR).
Figure 14 describes how transitions are done between the different operating modes. Table 6, gives an overview of the operating modes.
7.1.2         Reset mode
The 33911 enters the Reset mode after a power up. In this mode, the RST pin is low for 1.0 ms (typical value). After this delay, it enters
the Normal Request mode and the RST pin is driven high. The Reset mode is entered if a reset condition occurs (VDD low, watchdog
trigger fail, after wake-up from Sleep mode, Normal Request mode timeout occurs).
7.1.3         Normal request mode
This is a temporary mode automatically accessed by the device after the Reset mode, or after a wake-up from Stop mode. In Normal
Request mode, the VDD regulator is ON, the RESET pin is High, and the LIN is operating in RX Only mode. As soon as the device enters
in the Normal Request mode an internal timer is started for 150 ms (typical value). During these 150 ms, the MCU must configure the
Timing Control Register (TIMCR) and the Mode Control Register (MCR) with MOD2 and MOD1 bits set = 0, to enter the Normal mode. If
within the 150 ms timeout, the MCU does not command the 33911 to Normal mode, it enters in Reset mode. If the WDCONF pin is
grounded to disable the watchdog function, it goes directly in Normal mode after the Reset mode.
7.1.4         Normal mode
In Normal mode, all 33911 functions are active and can be controlled by the SPI interface and the PWMIN pin. The VDD regulator is ON
and delivers its full current capability. If an external resistor is connected between the WDCONF pin and the Ground, the window watchdog
function is enabled. The wake-up inputs (L1 and L2) can be read as digital inputs or have its voltage routed through the analog-multiplexer.
The LIN interface has slew rate and timing compatible with the LIN protocol specification 2.0, 2.1, and SAEJ2602. The LIN bus can
transmit and receive information. The high-side and low-side switches are active and have PWM capability according to the SPI
configuration. The interrupts are generated to report failures for VSUP over/undervoltage, thermal shutdown, or thermal shutdown
prewarning on the main regulator.
7.1.5         Sleep mode
The Sleep mode is a Low-power mode. From Normal mode, the device enters into Sleep mode by sending one SPI command through
the Mode Control Register (MCR), or (VDD low > 150 ms) with VSUV = 0. When in Reset mode, a VDD undervoltage condition with no VSUP
undervoltage (VSUV = 0) sends the device to Sleep mode. All blocks are in their lowest power consumption condition. Only some wake-
up sources (wake-up inputs with or without cyclic sense, forced wake-up and LIN receiver) are active. The 5.0 V regulator is OFF. The
internal low-power oscillator may be active if the IC is configured for cyclic-sense. In this condition, the high-side switch is turned on
periodically and the wake-up inputs are sampled. Wake-up from Sleep mode is similar to a power-up. The device goes in Reset mode
except the SPI reports the wake-up source and the BATFAIL flag is not set.
7.1.6         Stop mode
The Stop mode is the second low-power mode, but in this case the 5.0 V regulator is ON with limited current drive capability. The
application MCU is always supplied while the 33911 is operating in Stop mode. The device can enter into Stop mode only by sending the
SPI command. When the application is in this mode, it can wake-up from the 33911 side (for example: cyclic sense, force wake-up, LIN
bus, wake inputs) or the MCU side (CS, RST pins). Wake-up from Stop mode transitions the 33911 to Normal Request mode and
generates an interrupt except if the wake-up event is a low to high transition on the CS pin or comes from the RST pin.
 33911
26                                                                                                                      NXP Semiconductors


                                                       Normal Request   Timeout
                                                              Normal Request      Expired
                                                                             timeout          (t NRTOUT
                                                                                     expired (NR  TOUT)
                                                                                                        )
                                                                                VVDD  Low
                                                                                   DD Low
                                                                           VDD High and
                           Power Up                                Reset   Delay  (t Delay
           Power                                                  VDD High and Reset RST) (tExpired
                                                                                             RST) expired              Normal
                                               Reset
           Down                                                                                                        Request
                                                                                                            WDtrigger
                                                                                                            WD
                                                                                                                 Trigger         WD  Disabled
                                                                                                                                 WD disabled
                                                                                                                                                Wake-up  (Interrupt)
                                                                               VVDDLow
                                                                                    Low
                                                                                 DD
                                                                                                                                                Wake-Up Interrupt
                                                                            WD
                                                                             WDFailed
                                                                                failed
                                                                                                                           Normal
                                                                                                                              Stop
                                                                                                                               STOPCommand
                                                   VVDD  LOW (>t NRTOUT
                                                     DD Low (>NRTOUT ) expired) Expired
                                                          andand VSUV
                                                              VSUV =0      =0                Sleep Command
                                                                                                SLEEP Command
                                                                                                                                    Command
                                                Wake-up
                                                 Wake-Up (Reset)
                                                         (Reset)
                                                                                 Sleep                                            Stop
                                                                            VDD
                                                                             VDD Low
                                                                                 Low
   Legend
   WD: Watchdog
             Notes:
   WD Disabled: Watchdog disabled (WDCONF pin connected to GND)
             WD
   WD Trigger:    - meansisWatchdog
               Watchdog      triggered by SPI command
   WD Failed:WD
              No disabled
                 watchdog- trigger
                             means orWatchdog    disabled
                                       trigger occurs      (WDCONF
                                                        in closed       terminal connected to GND)
                                                                   window
             WD trigger
   Stop Command:    Stop –command
                           means Watchdog     is triggered by SPI command
                                    sent via SPI
             WD failed
   Sleep Command:       – means
                     Sleep        no Watchdog
                            command              trigger or trigger occurs in closed window
                                      sent via SPI
             STOP
   Wake-up from StopCommand
                       mode: L1- or
                                  means   STOP
                                    L2 state      command
                                              change,    LIN sent  via SPI Periodic wake-up, CS rising edge wake-up or RST wake-up.
                                                              bus wake-up,
             SLEEP
   Wake-up from SleepCommand
                       mode: L1 -ormeans   SLEEP
                                    L2 state change, command
                                                        LIN bussend   via SPI
                                                                 wake-up,  Periodic wake-up.
             Wake-Up - means L1 or L2 state change or LIN bus wake up or SS rising edge
                                                 Figure 14. Operating modes and transitions
                                                                                                                                                                       33911
NXP Semiconductors                                                                                                                                                      27


Table 6. Operating modes overview
      Function       Reset mode      Normal request mode         Normal mode       Stop mode      Sleep mode
        VDD               Full                 Full                     Full          Stop             -
        LSx                -               SPI/PWM(61)              SPI/PWM              -             -
        HS1                -               SPI/PWM(61)              SPI/PWM          Note(62)       Note(63)
     Analog Mux            -                    SPI                     SPI              -             -
         Lx                -                  Inputs                  Inputs        Wake-up        Wake-up
         LIN               -                 Rx-Only              Full/Rx-Only   Rx-Only/Wake-up   Wake-up
      Watchdog             -          150 ms (typ.) timeout            (64)              -             -
                                                                    On      /Off
 Voltage Monitoring    VSUP/VDD             VSUP/VDD                VSUP/VDD           VDD             -
 Notes
  61.   Operation can be controlled by the PWMIN input.
  62.   HS1 switch can be configured for cyclic sense operation in Stop mode.
  63.   HS1 switch can be configured for cyclic sense operation in Sleep mode.
  64.   Windowing operation when enabled by an external resistor.
7.1.7        Interrupts
Interrupts are used to signal a microcontroller a peripheral needs to be serviced. The interrupts which can be generated, change according
to the operating mode. While in Normal and Normal Request modes, the 33911 signals through interrupts special conditions which may
require a MCU software action. Interrupts are not generated until all pending wake-up sources are read in the Interrupt Source Register
(ISR).
While in Stop mode, interrupts are used to signal wake-up events. Sleep mode does not use interrupts. Wake-up is performed by
powering-up the MCU. In Normal and Normal Request mode the wake-up source can be read by SPI. The interrupts are signaled to the
MCU by a low logic level of the IRQ pin, which remains low until the interrupt is acknowledged by a SPI read command of the ISR register.
The IRQ pin is then driven high. Interrupts are only asserted while in Normal, Normal Request, and Stop mode. Interrupts are not
generated while the RST pin is low. The following is a list of the interrupt sources in Normal and Normal Request modes. Some of these
can be masked by writing to the SPI - Interrupt Mask Register (IMR).
7.1.7.1         Low-voltage interrupt
Signals when the supply line (VS1) voltage drops below the VSUV threshold (VSUV).
7.1.7.2         High-voltage interrupt
Signals when the supply line (VS1) voltage increases above the VSOV threshold (VSOV).
7.1.7.3         Overtemperature prewarning
This signal is when the 33911 temperature has reached the pre-shutdown warning threshold. It is used to warn the MCU an
overtemperature shutdown in the main 5.0 V regulator is imminent.
7.1.7.4         LIN overtemperature shutdown/TXD stuck at dominant/RXD short-circuit
These signal fault conditions within the LIN interface cause the LIN driver to be disabled. To restart the operation, the fault must be
removed and TXD must go recessive.
7.1.7.5         High-side overtemperature shutdown
Signals a shutdown in the high-side output.
 33911
28                                                                                                                     NXP Semiconductors


7.1.7.6          Low-side overtemperature shutdown
This signals a shutdown in the low-side outputs.
7.1.8        Reset
To reset a MCU the 33911 drives the RST pin low for the time the reset condition lasts. After the reset source is removed, the state
machine drives the RST output low for at least 1.0 ms (typical value) before driving it high. In the 33911, four main reset sources exist.
7.1.8.1          5.0 V regulator low-voltage-reset (VRSTTH)
The 5.0 V regulator output VDD is continuously monitored against brown outs. If the supply monitor detects the voltage at the VDD pin has
dropped below the reset threshold VRSTTH and the 33911 issues a reset. In case of an overtemperature, the voltage regulator is disabled
and the voltage monitoring issues a VDDOT Flag independently of the VDD voltage.
7.1.8.2          Window watchdog overflow
If the watchdog counter is not properly serviced while its window is open, the 33911 detects an MCU software run-away and resets the
microcontroller.
7.1.8.3          Wake-up from sleep mode
During Sleep mode, the 5.0 V regulator is not active, hence all wake-up requests from Sleep mode require a power-up/reset sequence.
7.1.8.4          External reset
The 33911 has a bidirectional reset pin which drives the device to a safe state (same as Reset mode) for as long as this pin is held low.
The RST pin must be held low long enough to pass the internal glitch filter and get recognized by the internal reset circuit. This functionality
is also active in Stop mode. After the RST pin is released, there is no extra t RST to be considered.
7.1.9        Wake-up capabilities
Once entered into one of the Low-power modes (Sleep or Stop), only wake-up sources can bring the device into Normal mode operation.
In Stop mode, a wake-up is signaled to the MCU as an interrupt, while in Sleep mode the wake-up is performed by activating the 5.0 V
regulator and resetting the MCU. In both cases the MCU can detect the wake-up source by accessing the SPI registers and reading the
Interrupt Source Register. There is no specific SPI register bit to signal a CS wake-up or external reset. If necessary this condition is
detected by excluding all other possible wake-up sources.
7.1.9.1          Wake-up from wake-up inputs (L1 and L2) with cyclic sense disabled
The wake-up lines are dedicated to sense state changes of external switches and wake-up the MCU (in Sleep or Stop mode). To select
and activate direct wake-up from Lx inputs, the Wake-up Control Register (WUCR) must be configured with appropriate LxWE inputs
enabled or disabled. The wake-up input’s state is read through the Wake-up Status Register (WUSR). Lx inputs are also used to perform
cyclic-sense wake-up.
Note: Selecting an Lx input in the analog multiplexer before entering Low-power mode disables the wake-up capability of the Lx input
7.1.9.2          Wake-up from wake-up inputs (L1 and L2) with cyclic sense timer enabled
The SBCLIN can wake-up at the end of a cyclic sense period if on one of the two wake-up input lines (L1-L2) a state change occurs. The
HS1 switch can be activated in Sleep or Stop modes from an internal timer. Cyclic sense and force wake-up are exclusive. If cyclic sense
is enabled, the force wake-up can not be enabled.
To select and activate the cyclic sense wake-up from Lx inputs, before entering in Low-power modes (Stop or Sleep modes), the following
SPI set-up has to be performed:
In WUCR: select the Lx input to WU-enable.
In HSCR: enable the desired HS1.
    • In TIMCR: select the CS/WD bit and determine the cyclic sense period with CYSTx bits.
    • Perform Go to Sleep/Stop command.
                                                                                                                                          33911
NXP Semiconductors                                                                                                                         29


7.1.9.3          Forced wake-up
The 33911 can wake-up automatically after a predetermined time spent in Sleep or Stop mode. Cyclic sense and Forced wake-up are
exclusive. If Forced wake-up is enabled, the Cyclic Sense can not be enabled.
To determine the wake-up period, the following SPI set-up has to be sent before entering in low-power modes:
   • In TIMCR: select the CS/WD bit and determine the Low-power mode period with CYSTx bits.
   • In HSCR: The HS1 bit must be disabled.
7.1.9.4          CS wake-up
While in Stop mode, a rising edge on the CS causes a wake-up. The CS wake-up does not generate an interrupt, and is not reported on
SPI.
7.1.9.5          LIN wake-up
While in the Low-power mode, the 33911 monitors the activity on the LIN bus. A dominant pulse larger than t PROPWL followed by a
dominant to recessive transition causes a LIN wake-up. This behavior protects the system from a short to ground bus condition. The bit
RXONLY = 1 from LINCR Register disables the LIN wake-up from Stop mode.
7.1.9.6          RST wake-up
While in Stop mode, the 33911 can wake-up when the RST pin is held low long enough to pass the internal glitch filter. Then, the 33911
changes to Normal Request or Normal modes depending on the WDCONF pin configuration. The RST wake-up does not generate an
interrupt and is not reported via SPI.
From Stop mode, the following wake-up events can be configured:
   • Wake-up from Lx inputs without cyclic sense
   • Cyclic sense wake-up inputs
   • Force wake-up
   • CS wake-up
   • LIN wake-up
   • RST wake-up
From Sleep mode, the following wake-up events can be configured:
   • Wake-up from Lx inputs without cyclic sense
   • Cyclic sense wake-up inputs
   • Force wake-up
   • LIN wake-up
7.1.9.7          Window watchdog
The 33911 includes a configurable window watchdog which is active in Normal mode. The watchdog can be configured by an external
resistor connected to the WDCONF pin. The resistor is used to achieve higher precision in the timebase used for the watchdog.
SPI clears are performed by writing through the SPI in the MOD bits of the Mode Control Register (MCR).
During the first half of the SPI timeout, watchdog clears are not allowed, but after the first half of the SPI timeout window, the clear
operation opens. If a clear operation is performed outside the window, the 33911 resets the MCU, in the same way as when the watchdog
overflows.
 33911
30                                                                                                                       NXP Semiconductors


                                                   WINDOW CLOSED                  WINDOW OPEN
                                                NO WATCHDOG CLEAR                FOR WATCHDOG
                                                      ALLOWED                          CLEAR
                                              WD TIMING X 50%                  WD TIMING X 50%
                                                                 WD PERIOD (tPWD)
                                                    WD TIMING SELECTED BY RESISTOR
                                                                ON WDCONF PIN
                                                   Figure 15. Window watchdog operation
To disable the watchdog function in Normal mode the user must connect the WDCONF pin to ground. This measure effectively disables
Normal Request mode. The WDOFF bit in the Watchdog Status Register (WDSR) is set. This condition is only detected during Reset
mode. If neither a resistor nor a connection to ground is detected, the watchdog falls back to the internal lower precision timebase of
150 ms (typ.) and signals the faulty condition through the Watchdog Status Register (WDSR).
The watchdog timebase can be further divided by a prescaler which can be configured by the Timing Control Register (TIMCR). During
Normal Request mode, the window watchdog is not active but there is a 150 ms (typ.) timeout for leaving the Normal Request mode. In
case of a timeout, the 33911 enters into Reset mode, resetting the microcontroller before entering again into Normal Request mode.
7.1.10 Faults detection management
The 33911 has the capability to detect faults like an over or undervoltage on VS1, TxD in permanent Dominant State, Overtemperature
on HS, LIN. It is able to take corrective actions accordingly. Most of faults are monitoring through the SPI and the Interrupt pin. The
microcontroller can also take actions. The following table summarizes all fault sources the device is able to detect with associated
conditions. The status for a device recovery and the SPI or pins monitoring are also described.
Table 7. Fault detection management conditions
                                                                                                                         Monitoring(66)
     Block              Fault              Mode            Condition           Fallout          Recovery
                                                                                                                REG (Flag, Bit)     INTERRUPT
                                                       VSUP<3.0 V (typ)                                         VSR (BATFAIL,
                     Battery Fail        All modes                                -          Condition gone                                 -
                                                         then power-up                                                0)
                                                                          In Normal mode,
                                                                                           Condition gone, to
                                                        VSUP > 19.25 V       HS and LS                                                IRQ low +
                  VSUP Overvoltage                                                           re-enable HS or
                                                                           shutdown if bit                      VSR (VSOV,3)
                                     Normal, Normal           (typ)                        LS write to HSCR                        ISR (0101)(67)
                                                                            HVSE=1 (reg
                                          Request                                          or LSCR registers
                                                                                MCR)
 Power Supply           VSUP                                                                                                      IRQ low + ISR
                                                       VSUP < 6.0 V (typ)         -                             VSR (VSUV,2)
                    Undervoltage                                                                                                         (0101)
                  VDD Undervoltage   All except Sleep  VDD < 4.5 V (typ)      Reset (65)                               -                    -
                    VDD Overtemp                         Temperature >                       Condition gone                       IRQ low + ISR
                                                                                  -                            VSR (VDDOT,1)
                     Prewarning      All except Low-      115 °C (typ)                                                                   (0101)
                         VDD           power modes       Temperature >     VDD shutdown,
                                                                                                                       -                    -
                   Overtemperature                        170 °C (typ)    Reset then Sleep
                    Rxd Pin Short                       RXD pin shorted       LIN trans                             LINSR,
                        Circuit                         to GND or 5.0 V       shutdown                          (RXSHORT,3)
                                                                                           LIN transmitter re-
                       Txd Pin                          TXD pin low for                                                           IRQ low + ISR
                                     Normal, Normal                                         enabled once the        LINSR
       LIN           Permanent                           more than 1.0s
                      Dominant
                                          Request
                                                              (typ)        LIN transmitter  condition is gone     (TXDOM,2)            (0100)(67)
                                                                              shutdown      and TXD is high
                      Lin Driver                         Temperature >
                                                                                                               LINSR (LINOT,1)
                   Overtemperature                        160 °C (typ)
                                                                                                                                              33911
NXP Semiconductors                                                                                                                              31


Table 7. Fault detection management conditions
                                                                                                                              Monitoring(66)
     Block               Fault             Mode             Condition          Fallout          Recovery
                                                                                                                  REG (Flag, Bit)       INTERRUPT
                                                                                           Condition gone, to                          IRQ low + ISR
                   High-side Driver                      Temperature >       HS1 thermal                         All flags in HSSR
                                                                                             re-enable HS1
                  Overtemperature                          160 °C (typ)       shutdown                                  are set           (0010) (67)
                                                                                           write to HSCR reg
                                                        Current through
                   Hs1 Open Load                                                                                        HSSR
                                      Normal, Normal      HS1 < 5.0 mA             -
   High-side          Detection                                                                                      (HS1OP,1)
                                          Request              (typ)
                                                        Current through      HS1 on with     Condition gone                                   -
                                                       HS1 tends to rise   limited current
                   Hs1 Overcurrent                                                                              HSSR (HS1CL,0)
                                                       above the current  capability 60 mA
                                                       limit 60 mA (min)        (min)
                                                                                           Condition gone, to                          IRQ low + ISR
                   Low-side Drivers                      Temperature >    Both LS thermal                        All flags in LSSR
                                                                                           re-enable LS write
                  Overtemperature                          160 °C (typ)       shutdown
                                                                                               to LSCR reg
                                                                                                                        are set           (0011) (67)
                    Ls1 Open Load                       Current through                                          LSSR (LS1OP,1)
                                      Normal, Normal      LSx < 7.5 mA             -
   Low-side         Ls2 Open Load                                                                                LSSR (LS2OP,3)
                                          Request              (typ)
                   Ls1 Overcurrent                      Current through      LSx on with             -           LSSR (LS1CL,0)               -
                                                       LSx tends to rise   limited current
                   Ls2 Overcurrent                     above the current capability 160 mA                       LSSR (LS2CL,2)
                                                      limit 160 mA (min)        (min)
                                                       The MCU did not
                                                          command the
                   Normal Request                      device to Normal
                                     Normal Request                             Reset                                      -
                  Time-out Expired                      mode within the
                                                         150 ms timeout
                                                            after reset                              -
                                                         WD timeout or
   Watchdog                                                                                                                                   -
                      Watchdog                          WD clear within                                           WDSR (WDTO,
                                          Normal                                Reset
                       Timeout                             the window                                                     3)
                                                              closed
                                                                         WD internal lower
                                                                                                 Connect
                                                        WDCONF pin is         precision                         WDSR (WDERR,
                   Watchdog Error         Normal                                             WDCONF to a
                                                             floating    timebase 150 ms                                  2)
                                                                                           resistor or to GND
                                                                                 (typ)
Notes
 65. When in Reset mode a VDD undervoltage condition combined with no VSUP undervoltage (VSUV=0) sends the device to Sleep mode.
 66.   Registers to be read when back in Normal Request or Normal mode depending on the fault. Interrupts only generated in Normal, Normal Request
       and Stop modes
 67.   Unless masked, If masked IRQ remains high and the ISR flags are not set.
7.1.11 Temperature sense gain
The analog multiplexer can be configured via the SPI to allow the ADOUT0 pin to deliver the internal junction temperature of the device.
Table 16 illustrates the internal chip temp sense obtained per characterization at 3 temperatures with 3 different lots and 30 samples.
33911
32                                                                                                                              NXP Semiconductors


                                               Temperature Sense Analog Output Voltage
                                5
                               4.5
                                4
                 Vadout0 (V)
                               3.5
                                3
                               2.5
                                2
                                     -50   0                50               100              150
                                                       Temperature (°C)
                                                   Figure 16. Temperature sense gain
7.1.12 High-side output pins HS1
This output is one high-side driver intended to drive small resistive loads or LEDs incorporating the following features:
  • PWM capability (software maskable)
  • Open load detection
  • Current limitation
  • Overtemperature shutdown (with maskable interrupt)
  • High-voltage shutdown (software maskable)
  • Cyclic sense
The high-side switch is controlled by the bit HS1 in the High-side Control Register (HSCR).
7.1.12.1       PWM capability (direct access)
The high-side driver offers additional (to the SPI control) direct control via the PWMIN pin. If the bit HS1 and PWMHS1 are set in the High-
side Control Register (HSCR), then the HS1 driver is turned on if the PWMIN pin is high and turned of if the PWMIN pin is low.
                                                                                                                                      33911
NXP Semiconductors                                                                                                                     33


                                         Interrupt
     HVSE                                 Control                                                                                                   VDD
                                          Module                                                                                              VDD
                        High-voltage Shutdown
                                                                                                                                                            PWMIN
                                                                High-side Interrupt
                                                                                                                               PWMHS1
                                                                                                                                                    VS2
     MOD1:2                                                                                                HIgh-side Driver
                                                                                      on/off
                                                                                                               charge pump
      HS1
                                                                                                            open load detection
                                                Control
     HS1OP                                                                            Status
                                                                                                              current limitation
                                                                                               overtemperture shutdown (interrupt maskable)
     HS1CL                                                                                           High-voltage shutdown (maskable)
                                                                                                                                                            HS1
                                                 Cyclic Sense
                                      Wake up
                                      Module
                                                                                                    Figure 17. High-side drivers HS1
7.1.12.2       Open load detection
The high-side driver signals an open load condition if the current through the high-side is below the open load current threshold. The open
load condition is indicated with the bit HS1OP in the High-side Status Register (HSSR).
7.1.12.3       Current limitation
The high-side driver has an output current limitation. In combination with the overtemperature shutdown the high-side driver is protected
against overcurrent and short-circuit failures. When the driver operates in the current limitation area, it is indicated with the HS1CL bit in
the HSSR.
Note: If the driver is operating in current limitation mode, excessive power might be dissipated.
7.1.12.4       Overtemperature protection (HS interrupt)
The high-side driver is protected against overtemperature. During an overtemperature condition, the high-side driver is shutdown and the
event is latched in the Interrupt Control Module. The shutdown is indicated as HS Interrupt in the Interrupt Source Register (ISR). A thermal
shutdown of the high-side driver is indicated by setting the HS1OP and HS1CL bits simultaneously. If the bit HSM is set in the Interrupt
Mask Register (IMR), then an interrupt (IRQ) is generated. A write to the High-Side Control Register (HSCR), when the overtemperature
condition is gone, re-enables the high-side driver.
7.1.12.5       High-voltage shutdown
If a high-voltage condition occurs and if the high-voltage shutdown is enabled (bit HVSE in the Mode Control Register (MCR) is set the
high-side driver is shutdown. A write to the High-side Control Register (HSCR), when the high-voltage condition is gone, re-enables the
high-side driver.
7.1.12.6       Sleep and stop mode
The high-side driver can be enabled to operate in Sleep and Stop mode for cyclic sensing. See Table 6, Operating modes overview.
33911
34                                                                                                                                                        NXP Semiconductors


7.1.13 Low-side output pins LS1 and LS2
These outputs are two low-side drivers intended to drive relays incorporating the following features:
  • PWM capability (software maskable)
  • Open load detection
  • Current limitation
  • Overtemperature shutdown (with maskable interrupt)
  • Active clamp (for driving relays)
  • High-voltage shutdown (software maskable)
The low-side switches are controlled by the LS1:2 bit in the Low-side Control Register (LSCR). To protect the device against overvoltage
when an inductive load (relay) is turned off. An active clamp re-enables the low-side FET if the voltage on the LS1 or LS2 pin exceeds a
certain level.
7.1.13.1       PWM capability (direct access)
Each low-side driver offers additional (to the SPI control) direct control via the PWMIN pin. If both the bits LS1 and PWMLS1 are set in
the Low-side Control Register (LSCR), then the LS1 driver is turned on if the PWMIN pin is high and turned off if the PWMIN pin is low.
The same applies to the LS2 and PWMLS2 bits for the LS2 driver.
                                                                                                                                                 VDD
                                         Interrupt
                                                                                                                                  VDD
    HVSE                                  Control
                                          Module
                                                                                                                                                        PWMIN
                        High-voltage Shutdown
                                                                                                                   PWMLSx
                                                     Low Side Interrupt
                                                                                                                                        active
                                                                                                                                        clamp
                                                                                                                                                        LSx
   MOD1:2                                                                                      Low-side Driver
                                                                          on/off
                                                                                                   (active clamp)
    LSx
                                                                                               Open load Detection
                                                Control
   LSxOP                                                                  Status
                                                                                                 Current Limitation
                                                                                   Overtemperture Shutdown (interrupt maskable)
   LSxCL                                                                                 High-voltage shutdown (maskable)
                                                                                                                                                 PGND
                                                                                   Figure 18. Low-side drivers LS1 and LS2
7.1.13.2       Open load detection
Each low-side driver signals an open load condition if the current through the low-side is below the open load current threshold. The open
load condition is indicated with the bit LS1OP and LS2OP in the Low-side Status Register (LSSR).
7.1.13.3       Current limitation
Each low-side driver has a current limitation. In combination with the overtemperature shutdown the low-side drivers are protected against
overcurrent and short-circuit failures. When the drivers operate in current limitation, this is indicated with the bits LS1CL and LS2CL in the
LSSR.
Note: If the drivers are operating in current limitation mode excessive power might be dissipated.
7.1.13.4       Overtemperature protection (LS interrupt)
Both low-side drivers are protected against overtemperature. During an overtemperature condition, both low-side drivers are shutdown
and the event is latched in the Interrupt Control Module. The shutdown is indicated as an LS Interrupt in the Interrupt Source Register
(ISR). If the bit LSM is set in the Interrupt Mask Register (IMR) then an Interrupt (IRQ) is generated. A write to the Low-side Control
Register (LSCR), when the overtemperature condition is gone, re-enables the low-side drivers.
                                                                                                                                                                33911
NXP Semiconductors                                                                                                                                               35


7.1.13.5        High-voltage shutdown
In case of a high-voltage condition and if the high-voltage shutdown is enabed (bit HVSE in the Mode Control Register (MCR) is set), both
low-side drivers are shutdown. A write to the Low-side Control Register (LSCR), when the high-voltage condition is gone, re-enables the
low-side drivers.
7.1.13.6        Sleep and stop mode
The low-side drivers are disabled in Sleep and Stop mode. See Table 6, Operating modes overview.
7.1.14 LIN physical layer
The LIN bus pin provides a physical layer for single-wire communication in automotive applications. The LIN physical layer is designed to
meet the LIN physical layer specification and has the following features:
   • LIN physical layer 2.0, 2.1 and SAEJ2602 compliant
   • Slew rate selection
   • Overtemperature shutdown
   • Advanced diagnostics
The LIN driver is a low-side MOSFET with thermal shutdown. An internal pull-up resistor with a serial diode structure is integrated, so no
external pull-up components are required for the application in a slave node. The fall time from dominant to recessive and the rise time
from recessive to dominant is controlled. The symmetry between both slopes is guaranteed.
7.1.14.1        LIN pin
The LIN pin offers a high susceptibility immunity level from external disturbance, guaranteeing communication during external disturbance.
                                                                          WAKE-UP
                                                                          MODULE
                                                                   LIN
                                                                   Wake-up
                   MOD1:2
                    LSR0:1
                                                                                            VS1
                                                           LIN DRIVER
                     J2602
                   RXONLY                          Slope and Slew Rate Control
                  RXSHORT                  Overtemperature Shutdown (interrupt maskable)
                   TXDOM
                    LINOT
                                                                                                30 K
                                                                                                             LIN
                    TXD
                                                                    SLOPE
                                                                    CONTROL
                                                                                           LGND
                                                   WAKE-UP
                                                    FILTER
                    RXD
                                                                      RECEIVER
                                                            Figure 19. LIN interface
 33911
36                                                                                                                  NXP Semiconductors


7.1.14.2         Slew rate selection
The slew rate can be selected for optimized operation at 10.4 and 20 kBit/s as well as a fast baud rate for test and programming. The slew
rate can be adapted with the bits LSR1:0 in the LIN Control Register (LINCR). The initial slew rate is optimized for 20 kBit/s.
7.1.14.3         J2602 conformance
To be compliant with the SAE J2602-2 specification, the J2602 feature has to be enabled in the LINCR Register (bit DIS_J2602 sets to
0). The LIN transmitter is disabled if a VSUP undervoltage condition occurs and TXD is in the Recessive State: the LIN bus goes in
Recessive State and RXD goes high. The LIN transmitter is not disabled if TXD is in Dominant State. A deglitcher on VSUP (tJ2602_DEG)
is implemented to avoid false switching.
If the (DIS_J2602) bit is set to 1, the J2602 feature is disabled and the communication TXD-LIN-RXD works for VSUP down to 4.6 V (typical
value) and then the communication is interrupted. The (DIS_J2602) bit is set per default to 0.
7.1.14.4         Overtemperature shutdown (LIN interrupt)
The output low-side FET is protected against overtemperature conditions. In case of an overtemperature condition, the transmitter is
shutdown and the LINOT bit in the LIN Status Register (LINSR) is set. If the LINM bit is set in the Interrupt Mask Register (IMR), an
Interrupt IRQ is generated. The transmitter is automatically re-enabled once the condition is gone and TXD is high.
7.1.14.5         RXD short-circuit detection (LIN interrupt)
The LIN transceiver has a short-circuit detection for the RXD output pin. If the device transmits and in case of a short-circuit condition, on
either 5.0 V or Ground, the RXSHORT bit in the LIN Status Register (LINSR) is set and the transmitter is shutdown. If the LINM bit is set
in the Interrupt Mask Register (IMR), an Interrupt IRQ is generated. The transmitter is automatically re-enabled once the condition is gone
(transition on RXD) and TXD is high. A read of the LIN Status Register (LINSR) without the RXD pin short-circuit condition clears the bit
RXSHORT.
7.1.14.6         TXD dominant detection (LIN interrupt)
The LIN transceiver monitors the TXD input pin to detect a stuck in dominant (0 V) condition. During a stuck condition (TXD pin 0 V for
more than 1 second (typ.)), the transmitter is shutdown and the TXDOM bit in the LIN Status Register (LINSR) is set. If the LINM bit is set
in the IMR, an Interrupt IRQ is generated. The transmitter is automatically re-enabled once TXD is high. A read of the LIN Status Register
(LINSR) with the TXD pin at 5.0 V clears the bit TXDOM.
7.1.14.7         LIN receiver operation only
While in Normal mode, the activation of the RXONLY bit disables the LIN TXD driver. In case of a LIN error condition, this bit is
automatically set. If Stop mode is selected with this bit set, the LIN wake-up functionality is disabled and the RXD pin reflects the state of
the LIN bus.
7.1.14.8         Stop mode and wake-up feature
During Stop mode operation, the transmitter of the physical layer is disabled. The receiver is still active and able to detect wake-up events
on the LIN bus line. A dominant level longer than tPROPWL followed by a rising edge generates a wake-up interrupt, and is reported in the
Interrupt Source Register (ISR). See Figure 11.
7.1.14.9         Sleep mode and wake-up feature
During Sleep mode operation, the transmitter of the physical layer is disabled. The receiver must be active to detect wake-up events on
the LIN bus line. A dominant level longer than tPROPWL followed by a rising edge generates a system wake-up (Reset), and is reported in
the Interrupt Source Register (ISR). See Figure 10.
                                                                                                                                         33911
NXP Semiconductors                                                                                                                        37


7.2          Logic commands and registers
7.2.1        33911 SPI interface and configuration
The serial peripheral interface creates the communication link between a microcontroller (master) and the 33911. The interface consists
of four pins (see Figure 20):
   • CS — Chip Select
   • MOSI — Master-out Slave-in
   • MISO — Master-in Slave-out
   • SCLK— Serial Clock
A complete data transfer via the SPI consists of 1 byte. The master sends 4 bits of address (A3:A0) + 4 bits of control information (C3:C0)
and the slave replies with 4 system status bits (VMS,LINS,HSS,LSS) + 4 bits of status information (S3:S0).
                   CS
                                                                 Register Write Data
                 MOSI                           A3     A2     A1    A0    C3     C2  C1   C0
                                                                Register Read Data
                 MISO                          VMS LINS HSS         LSS    S3    S2  S1   S0
                SCLK
                       Read Data Latch                                                                Write Data Latch
                Rising: 33911 changes MISO/        Falling: 33911 samples MOSI/
                         MCU changes MOSI          MCU samples MISO
                                                             Figure 20. SPI protocol
During the inactive phase of the CS (HIGH), the new data transfer is prepared. The falling edge of the CS indicates the start of a new data
transfer, puts the MISO in the low-impedance state, and latches the analog status data (Register read data). With the rising edge of the
SPI clock (SCLK), the data is moved to the MISO/MOSI pins. With the falling edge of the SPI clock (SCLK), the data is sampled by the
receiver. The data transfer is only valid if exactly 8 sample clock edges are present during the active (low) phase of CS.
The rising edge of the Chip Select CS indicates the end of the transfer and latches the write data (MOSI) into the register. The CS high
forces MISO to the high-impedance state. Register reset values are described along with the reset condition. Reset condition is the
condition causing the bit to be set to its reset value. The main reset conditions are:
- Power-On Reset (POR): the level at which the logic is reset and BATFAIL flag sets.
- Reset mode
- Reset done by the RST pin (ext_reset)
 33911
38                                                                                                                     NXP Semiconductors


7.2.2       SPI register overview
Table 8. System status register
                                                                                                     BIT
  Adress(A3:A0)            Register Name / Read / Write Information
                                                                                  7             6              5        4
      $0 - $F                SYSSR - System Status Register            R        VMS           LINS           HSS      LSS
Table 9 summarizes the SPI Register content for Control Information (C3:C0) = W and status information (S3:S0) = R.
Table 9. SPI register overview
                                                                                                      BIT
  Adress(A3:A0)            Register Name / Read / Write Information
                                                                                  3             2               1        0
                               MCR - Mode Control Register             W       HVSE             0           MOD2     MOD1
        $0
                              VSR - Voltage Status Register            R       VSOV           VSUV         VDDOT    BATFAIL
        $1                    VSR - Voltage Status Register            R       VSOV           VSUV         VDDOT    BATFAIL
                            WUCR - Wake-up Control Register            W          0             0           L2WE     L1WE
        $2
                            WUSR - Wake-up Status Register             R          -             -              L2       L1
        $3                  WUSR - Wake-up Status Register             R          -             -              L2       L1
                               LINCR - LIN Control Register            W     DIS_J2602      RXONLY          LSR1     LSR0
        $4
                                LINSR - LIN Status Register            R     RXSHORT         TXDOM          LINOT        0
        $5                      LINSR - LIN Status Register            R     RXSHORT         TXDOM          LINOT        0
                            HSCR - High-side Control Register          W          0         PWMHS1              0      HS1
        $6
                            HSSR - High-side Status Register           R          -             -          HS1OP     HS1CL
        $7                  HSSR - High-side Status Register           R          -             -          HS1OP     HS1CL
                            LSCR - Low-side Control Register           W      PWMLS2        PWMLS1            LS2      LS1
        $8
                             LSSR - Low-side Status Register           R       LS2OP         LS2CL         LS1OP     LS1CL
        $9                   LSSR - Low-side Status Register           R       LS2OP         LS2CL         LS1OP     LS1CL
                                                                                              WD2            WD1      WD0
                             TIMCR - Timing Control Register           W       CS/WD
        $A                                                                                   CYST2         CYST1     CYST0
                            WDSR - Watchdog Status Register            R       WDTO         WDERR          WDOFF    WDWO
        $B                  WDSR - Watchdog Status Register            R       WDTO         WDERR          WDOFF    WDWO
        $C             AMUXCR - Analog Multiplexer Control Register    W        LXDS           MX2           MX1      MX0
        $D                     CFR - Configuration Register            W          0          CYSX8              0        0
                               IMR - Interrupt Mask Register           W        HSM            LSM           LINM     VMM
        $E
                              ISR - Interrupt Source Register          R        ISR3          ISR2           ISR1     ISR0
        $F                    ISR - Interrupt Source Register          R        ISR3          ISR2           ISR1     ISR0
                                                                                                                           33911
NXP Semiconductors                                                                                                          39


7.2.3       Register definitions
7.2.3.1        System status register - SYSSR
The System Status Register (SYSSR) is always transferred with every SPI transmission and gives a quick system status overview. It
summarizes the status of the Voltage Monitor Status (VMS), LIN Status (LINS), High-side Status (HSS), and the Low-side Status (LSS).
                                       Table 10. System status register
                                                          S7         S6          S5     S4
                                           Read          VMS        LINS        HSS    LSS
7.2.3.2        VMS - voltage monitor status
This read-only bit indicates one or more bits in the VSR are set.
1 = Voltage Monitor bit set
0 = None
                                                       BATFAIL
                                                       VDDOT
                                                                             VMS
                                                       VSUV
                                                       VSOV
                                                    Figure 21. Voltage monitor status
7.2.3.3        LINS - LIN status
This read-only bit indicates one or more bits in the LINSR are set.
1 = LIN Status bit set
0 = None
                                                       LINOT
                                                                             LINS
                                                       TXDOM
                                                       RXSHORT
                                                            Figure 22. LIN status
7.2.3.4        HSS - high-side switch status
This read-only bit indicates one or more bits in the HSSR are set.
1 = High-side Status bit set
0 = None
                                                     HS1CL
                                                                            HSS
                                                     HS1OP
                                                        Figure 23. High-side status
33911
40                                                                                                             NXP Semiconductors


7.2.3.5         LSS - low-side switch status
This read-only bit indicates one or more bits in the LSSR are set.
1 = Low-side Status bit set
0 = None
                                                      LS1CL
                                                      LS1OP
                                                                             LSS
                                                      LS2CL
                                                      LS2OP
                                                         Figure 24. Low-side status
7.2.3.6         Mode control register - MCR
The Mode Control Register (MCR) allows switching between the operation modes and to configure the 33911. Writing the MCR returns
the VSR.
                                      Table 11. Mode control register - $0
                                                            C3          C2          C1        C0
                                            Write          HVSE          0        MOD2      MOD1
                                        Reset Value          1           0           -         -
                                       Reset Condition     POR         POR           -         -
7.2.3.7         HVSE - high-voltage shutdown enable
This write-only bit enables/disables automatic shutdown of the high-side and the low-side drivers during a high-voltage VSOV condition.
1 = automatic shutdown enabled
0 = automatic shutdown disabled
7.2.3.8         MOD2, MOD1 - mode control bits
These write-only bits select the operating mode and allow clearing the watchdog in accordance with Table 7 Mode Control Bits.
                                     Table 12. Mode control bits
                                        MOD2        MOD1                     Description
                                          0            0                    Normal mode
                                          0            1                      Stop mode
                                          1            0                     Sleep mode
                                          1            1           Normal mode + Watchdog Clear
7.2.3.9         Voltage status register - VSR
Returns the status of the several voltage monitors. This register is also returned when writing to the Mode Control Register (MCR).
                                       Table 13. Voltage status register - $0/$1
                                                          S3         S2           S1         S0
                                           Read         VSOV        VSUV        VDDOT    BATFAIL
                                                                                                                                  33911
NXP Semiconductors                                                                                                                  41


7.2.3.10         VSOV - VSUP overvoltage
This read-only bit indicates an overvoltage condition on the VS1 pin.
1 = Overvoltage condition.
0 = Normal condition.
7.2.3.11         VSUV - VSUP undervoltage
This read-only bit indicates an undervoltage condition on the VS1 pin.
1 = Undervoltage condition.
0 = Normal condition.
7.2.3.12         VDDOT - main voltage regulator overtemperature warning
This read-only bit indicates the main voltage regulator temperature reached the Overtemperature Prewarning Threshold.
1 = Overtemperature Prewarning
0 = Normal
7.2.3.13         BATFAIL - battery fail flag
This read-only bit is set during power-up and indicates the 33911 had a Power-On-Reset (POR). Any access to the MCR or VSR clears
the BATFAIL flag.
1 = POR Reset has occurred
0 = POR Reset has not occurred
7.2.3.14         Wake-up control register - WUCR
This register is used to control the digital wake-up inputs. Writing the WUCR returns the Wake-up Status Register (WUSR).
                                          Table 14. Wake-up control register - $2
                                                              C3          C2        C1         C0
                                                 Write         0          0      L2WE       L1WE
                                              Reset Value      1          1         1          1
                                            Reset Condition       POR, Reset mode or ext_reset
7.2.3.15         LxWE - wake-up input x enable
This write-only bit enables/disables which Lx inputs are enabled. In Stop and Sleep mode the LxWE bit determines which wake inputs are
active for wake-up. If one of the Lx inputs is selected on the analog multiplexer, the corresponding LxWE is masked to 0.
1 = Wake-up Input x enabled.
0 = Wake-up Input x disabled.
7.2.3.16         Wake-up status register - WUSR
This register is used to monitor the digital wake-up inputs and is also returned when writing to the WUCR.
                                        Table 15. Wake-up status register - $2/$3
                                                           S3          S2         S1            S0
                                             Read           -           -         L2            L1
 33911
42                                                                                                                NXP Semiconductors


7.2.3.17         Lx - wake-up input X
This read-only bit indicates the status of the corresponding Lx input. If the Lx input is not enabled, then the according Wake-up status
returns 0. After a wake-up from Stop or Sleep mode these bits also allow to determine which input has caused the wake-up, by first reading
the Interrupt Status Register (ISR) and then reading the WUSR. The source of the wake-up is only reported on the first WUCR or WUSR
access.
1 = Lx pin high, or Lx is the source of the wake-up.
0 = Lx pin low, disabled or selected as an analog input.
7.2.3.18         LIN control register - LINCR
This register controls the LIN physical interface block. Writing the LIN Control Register (LINCR) returns the LIN Status Register (LINSR).
                                    Table 16. LIN control register - $4
                                                            C3                 C2              C1        C0
                                          Write         DIS_J2602          RXONLY             LSR1      LSR0
                                       Reset Value          0                   0               0         0
                                                                       POR, Reset mode,
                                     Reset Condition       POR          ext_reset or LIN           POR
                                                                         failure gone*
* LIN failure gone: if LIN failure (overtemp, TXD/RXD short) was set, the flag resets automatically when the failure is gone.
7.2.3.19         J2602 - LIN dominant voltage select
This write-only bit controls the J2602 circuitry. If the circuitry is enabled (bit sets to 0), the TXD-LIN-RXD communication works down to
the battery undervoltage condition is detected. Below, the bus is in recessive state. If the circuitry is disabled (bit sets to 1), the
communication TXD-LIN-RXD works down to 4.6 V (typical value).
0 = Enabled J2602 feature.
1 = Disabled J2602 feature.
7.2.3.20         RXONLY - LIN receiver operation only
This write-only bit controls the behavior of the LIN transmitter. In Normal mode, the activation of the RXONLY bit disables the LIN
transmitter. During a LIN error condition, this bit is automatically set. In Stop mode this bit disables the LIN wake-up functionality, and the
RXD pin reflects the state of the LIN bus.
1 = only LIN receiver active (Normal mode) or LIN wake-up disabled (Stop mode).
0 = LIN fully enabled.
7.2.3.21         LSRx - LIN slew-rate
This write-only bit controls the LIN driver slew-rate in accordance with Table 17.
                                      Table 17. LIN slew rate control
                                          LSR1        LSR0                        Description
                                            0           0              Normal Slew Rate (up to 20 kb/s)
                                            0           1               Slow Slew Rate (up to 10 kb/s)
                                            1           0               Fast Slew Rate (up to 100 kb/s)
                                            1           1                          Reserved
                                                                                                                                          33911
NXP Semiconductors                                                                                                                         43


7.2.3.22         LIN status register - LINSR
This register returns the status of the LIN physical interface block and is also returned when writing to the LINCR.
                                       Table 18. LIN status register - $4/$5
                                                          S3           S2            S1           S0
                                           Read       RXSHORT       TXDOM          LINOT           0
7.2.3.23         RXSHORT - RXD pin short-circuit
This read-only bit indicates a short-circuit condition on the RXD pin (shorted either to 5.0 V or to Ground). The short-circuit delay must be
a worst case of 8.0 μs to be detected and to shutdown the driver. To clear this bit, it must be read after the condition is gone (transition
detected on RXD pin). The LIN driver is automatically re-enabled once the condition is gone and TXD is high.
1 = RXD short-circuit condition.
0 = None.
7.2.3.24         TXDOM - TXD permanent dominant
This read-only bit signals the detection of a TXD pin stuck at dominant (Ground) condition and the resultant shutdown in the LIN
transmitter. This condition is detected after the TXD pin remains in dominant state for more than 1.0 second (typical value). To clear this
bit, it must be read after TXD has gone high. The LIN driver is automatically re-enabled once TXD goes High.
1 = TXD stuck at dominant fault detected.
0 = None.
7.2.3.25         LINOT - LIN driver overtemperature
This read-only bit signals the LIN transceiver was shutdown due to overtemperature. The transmitter is automatically re-enabled after the
overtemperature condition is gone and TXD is high. The LINOT bit is cleared after the SPI read once the condition is gone.
1 = LIN overtemperature shutdown
0 = None
7.2.3.26         High-side control register - HSCR
This register controls the operation of the high-side driver. Writing to this register returns the High-side Status Register (HSSR).
                                   Table 19. High-side control register - $6
                                                         C3        C2            C1                C0
                                         Write            0     PWMHS1            0               HS1
                                      Reset Value         0         0             0                 0
                                                                           POR, Reset mode, ext_reset, HS1
                                     Reset Condition         POR
                                                                              overtemp or (VSOV & HVSE)
7.2.3.27         PWMHS1 - PWM input control enable.
This write-only bit enables/disables the PWMIN input pin to control the high-side switch. The high-side switch must be enabled (HS1 bit).
1 = PWMIN input controls HS1 output.
0 = HS1 is controlled only by SPI.
 33911
44                                                                                                                      NXP Semiconductors


7.2.3.28        HS1 - HS1 switch control.
This write-only bit enables/disables the high-side switch.
1 = HS1 switch on.
0 = HS1 switch off.
7.2.3.29        High-side status register - HSSR
This register returns the status of the high-side switch and is also returned when writing to the HSCR.
                                              Table 20. High-side status register - $6/$7
                                                            S3          S2        S1       S0
                                                 Read        -           -     HS1OP     HS1CL
7.2.3.30        High-side thermal shutdown
A thermal shutdown of the high-side driver is indicated by setting the HS1OP and HS1CL bits simultaneously.
7.2.3.31        HS1OP - high-side switch open load detection
This read-only bit signals the high-side switch is conducting current below a certain threshold indicating possible load disconnection.
1 = HS1 Open Load detected (or thermal shutdown)
0 = Normal
7.2.3.32        HS1CL - high-side current limitation
This read-only bit indicates the high-side switch is operating in current limitation mode.
1 = HS1 in current limitation (or thermal shutdown)
0 = Normal
7.2.3.33        Low-side control register - LSCR
This register controls the operation of the low-side drivers. Writing the Low-side Control Register (LSCR) also returns the Low-side Status
Register (LSSR).
                                 Table 21. Low-side control register - $8
                                                       C3         C2            C1                 C0
                                        Write       PWMLS2 PWMLS1               LS2               LS1
                                     Reset Value        0          0              0                 0
                                                                            POR, Reset mode, ext_reset, LSx
                                   Reset Condition         POR
                                                                             overtemp or (VSOV & HVSE)
7.2.3.34        PWMLx - PWM input control enable
This write-only bit enables/disables the PWMIN input pin to control the respective low-side switch. The corresponding low-side switch must
be enabled (LSx bit).
1 = PWMIN input controls LSx.
0 = LSx is controlled only by SPI.
                                                                                                                                      33911
NXP Semiconductors                                                                                                                     45


7.2.3.35         LSx - LSx switch control
This write-only bit enables/disables the corresponding low-side switch.
1 = LSx switch on.
0 = LSx switch off.
7.2.3.36         Low-side status register - LSSR
This register returns the status of the low-side switches and is also returned when writing to the LSCR.
                                            Table 22. Low-side status register - $8/$9
                                                           C3         C2         C1           C0
                                                Read     LS2OP      LS2CL      LS1OP        LS1CL
7.2.3.37         Low-side thermal shutdown
A thermal shutdown of the low-side drivers is indicated by setting all LSxOP and LSxCL bits simultaneously.
7.2.3.38         LSxOP - low-side switch open load detection
This read-only bit signals the low-side switches are conducting current below a certain threshold indicating possible load disconnection.
1 = LSx Open Load detected (or thermal shutdown)
0 = Normal
7.2.3.39         LSxCL - low-side current limitation
This read-only bit indicates the respective low-side switch is operating in current limitation mode.
1 = LSx in current limitation (or thermal shutdown)
0 = Normal
7.2.3.40         Timing control register - TIMCR
This register allows to configure the watchdog, the cyclic sense and forced wake-up periods. Writing to the Timing Control Register
(TIMCR) also returns the Watchdog Status Register (WDSR).
                                       Table 23. Timing control register - $A
                                                              C3          C2          C1          C0
                                                                         WD2        WD1          WD0
                                               Write        CS/WD
                                                                       CYST2       CYST1        CYST0
                                           Reset Value         -           0          0           0
                                         Reset Condition       -                    POR
7.2.3.41         CS/WD - cyclic sense or watchdog prescaler select
This write-only bit selects which prescaler is being written to the Cyclic Sense/Forced Wake-up prescaler or the Watchdog prescaler.
1 = Cyclic Sense/Forced Wake-up Prescaler selected
0 = Watchdog Prescaler select
7.2.3.42         WDx - watchdog prescaler
This write-only bits selects the divider for the watchdog prescaler and therefore selects the watchdog period in accordance with Table 24.
This configuration is valid only if windowing watchdog is active.
 33911
46                                                                                                                    NXP Semiconductors


                                       Table 24. Watchdog prescaler
                                          WD2       WD1       WD0               Prescaler divider
                                            0         0         0                       1
                                            0         0         1                       2
                                            0         1         0                       4
                                            0         1         1                       6
                                            1         0         0                       8
                                            1         0         1                      10
                                            1         1         0                      12
                                            1         1         1                      14
7.2.3.43        CYSTx - cyclic sense period prescaler select
This write-only bits selects the interval for the wake-up cyclic sensing together with the bit CYSX8 in the Configuration Register (CFR)
(see Configuration register - CFR on page 49). This option is only active if the high-side switch is enabled when entering in Stop or Sleep
mode. Otherwise a timed wake-up is performed after the period shown in Table 25.
                                      Table 25. Cyclic sense and force wake-up interval
                                       CYSX8 (68)    CYST2      CYST1       CYST0            Interval
                                            X           0          0           0       No cyclic sense (69)
                                            0           0          0           1               20 ms
                                            0           0          1           0               40 ms
                                            0           0          1           1               60 ms
                                            0           1          0           0               80 ms
                                            0           1          0           1              100 ms
                                            0           1          1           0              120 ms
                                            0           1          1           1              140 ms
                                            1           0          0           1              160 ms
                                            1           0          1           0              320 ms
                                            1           0          1           1              480 ms
                                            1           1          0           0              640 ms
                                            1           1          0           1              800 ms
                                            1           1          1           0             960 ms
                                            1           1          1           1             1120 ms
                                       Notes
                                        68. bit CYSX8 is located in Configuration Register (CFR)
                                        69. No Cyclic Sense and no Force Wake up available.
                                                                                                                                      33911
NXP Semiconductors                                                                                                                     47


7.2.3.44        Watchdog status register - WDSR
This register returns the Watchdog status information and is also returned when writing to the TIMCR.
                                             Table 26. Watchdog status register - $A/$B
                                                             S3        S2         S1          S0
                                                Read       WDTO      WDERR      WDOFF       WDWO
7.2.3.45        WDTO - watchdog timeout
This read-only bit signals the last reset was caused by either a watchdog timeout or by an attempt to clear the watchdog within the window
closed. Any access to this register or the Timing Control Register (TIMCR) clears the WDTO bit.
1 = Last reset caused by watchdog timeout
0 = None
7.2.3.46        WDERR - watchdog error
This read-only bit signals the detection of a missing watchdog resistor. In this condition the watchdog is using the internal, lower precision
timebase. The Windowing function is disabled.
1 = WDCONF pin resistor missing
0 = WDCONF pin resistor not floating
7.2.3.47        WDOFF - watchdog off
This read-only bit signals the watchdog pin connected to Ground and therefore disabled. In this case, watchdog timeouts are disabled and
the device automatically enters Normal mode out of Reset. This might be necessary for software debugging and for programming the flash
memory.
1 = Watchdog is disabled
0 = Watchdog is enabled
7.2.3.48        WDWO - watchdog window open
This read-only bit signals when the watchdog window is open for clears. The purpose of this bit is for testing. This should be ignored if
WDERR is High.
1 = Watchdog window open
0 = Watchdog window closed
7.2.3.49        Analog multiplexer control register - MUXCR
This register controls the analog multiplexer and selects the divider ration for the Lx input divider.
                                          Table 27. Analog multiplexer control register -$C
                                                                 C3         C2         C1         C0
                                                 Write          LXDS       MX2        MX1        MX0
                                              Reset Value         1         0           0          0
                                            Reset Condition     POR      POR, Reset mode or ext_reset
7.2.3.50        LXDS - Lx analog input divider select
This write-only bit selects the resistor divider for the Lx analog inputs. Voltage is internally clamped to VDD.
0 = Lx Analog divider: 1
1 = Lx Analog divider: 3.6 (typ.)
 33911
48                                                                                                                      NXP Semiconductors


7.2.3.51        MXx - analog multiplexer input select
These write-only bits selects which analog input is multiplexed to the ADOUT0 pin according to Table 28. When disabled or when in Stop
or Sleep mode, the output buffer is not powered and the ADOUT0 output is left floating to achieve lower current consumption.
                              Table 28. Analog multiplexer channel select
                                   MX2           MX1            MX0                         Meaning
                                    0              0              0                          Disabled
                                    0              0              1                         Reserved
                                    0              1              0                 Die Temperature Sensor (70)
                                    0              1              1                       VSENSE input
                                    1              0              0                          L1 input
                                    1              0              1                          L2 input
                                    1              1              0                         Reserved
                                    1              1              1                         Reserved
                               Notes
                                70. Accessing the Die Temperature Sensor directly from the Disabled state is not
                                      recommended. If this transition must be performed and to avoid the intermediate
                                      state, wait at least 1.0 ms, then start the die temp measurement.
                                      Possible access is Disabled → Vsense input → Die Temperature Sensor.
7.2.3.52        Configuration register - CFR
This register controls the cyclic sense timing multiplier.
                                   Table 29. Configuration register - $D
                                                                  C3                  C2         C1         C0
                                         Write                     0                CYSX8         0          0
                                      Reset Value                  0                   0          0          0
                                                        POR, Reset mode or
                                    Reset Condition                                  POR        POR        POR
                                                               ext_reset
7.2.3.53        CYSX8 - cyclic sense timing x 8
This write-only bit influences the cyclic sense and forced wake-up period as shown in Table 25.
1 = Multiplier enabled
0 = None
                                                                                                                                 33911
NXP Semiconductors                                                                                                                49


7.2.3.54         Interrupt mask register - IMR
This register allows masking of some of the interrupt sources. No interrupt is generated to the MCU and no flag is set in the ISR register.
The 5.0 V Regulator overtemperature prewarning interrupt and undervoltage (VSUV) interrupts can not be masked and always causes
an interrupt. Writing to the IMR returns the ISR.
                                        Table 30. Interrupt mask register - $E
                                                                 C3        C2       C1         C0
                                                 Write          HSM       LSM      LINM       VMM
                                              Reset Value         1         1        1          1
                                            Reset Condition                    POR
7.2.3.55         HSM - high-side interrupt mask
This write-only bit enables/disables interrupts generated in the high-side block.
1 = HS Interrupts Enabled
0 = HS Interrupts Disabled
7.2.3.56         LSM - low-side interrupt mask
This write-only bit enables/disables interrupts generated in the low-side block.
1 = LS Interrupts Enabled
0 = LS Interrupts Disabled
7.2.3.57         LINM - LIN interrupts mask
This write-only bit enables/disables interrupts generated in the LIN block.
1 = LIN Interrupts Enabled
0 = LIN Interrupts Disabled
7.2.3.58         VMM - voltage monitor interrupt mask
This write-only bit enables/disables interrupts generated in the voltage monitor block. The only maskable interrupt in the voltage monitor
block is the VSUP overvoltage interrupt.
1 = Interrupts Enabled
0 = Interrupts Disabled
7.2.3.59         Interrupt source register - ISR
This register allows the MCU to determine the source of the last interrupt or wake-up respectively. A read of the register acknowledges
the interrupt and leads IRQ pin to high, in case there are no other pending interrupts. If there are pending interrupts, IRQ is driven high
for 10µs and then be driven low again. This register is also returned when writing to the Interrupt Mask Register (IMR).
                                             Table 31. Interrupt source register - $E/$F
                                                            S3       S2         S1         S0
                                               Read        ISR3     ISR2      ISR1       ISR0
 33911
50                                                                                                                    NXP Semiconductors


7.2.3.60        ISRx - interrupt source register
These read-only bits indicate the interrupt source following Table 32. If no interrupt is pending then all bits are 0. In case more than one
interrupt is pending, the interrupt sources are handled sequentially multiplex.
Table 32. Interrupt sources
                                                                         Interrupt source                                         Priority
  ISR3   ISR2   ISR1   ISR0                    none maskable                                          maskable
    0      0      0      0                        no interrupt                                        no interrupt                  none
    0      0      0      1          Lx Wake-up from Stop and Sleep mode                                     -                     highest
    0      0      1      0                              -                                   HS Interrupt (overtemperature)
    0      0      1      1                              -                                   LS Interrupt (overtemperature)
    0      1      0      0                       LIN Wake-up                         LIN Interrupt (RXSHORT, TXDOM, LIN OT)
                                Voltage Monitor Interrupt (low-voltage and VDD
    0      1      0      1                                                             Voltage Monitor Interrupt (high-voltage)
                                              overtemperature)
    0      1      1      0                    Forced Wake-up                                                -                      lowest
                                                                                                                                        33911
NXP Semiconductors                                                                                                                        51


8              Typical application
The 33911 can be configured in several applications. The figure below shows the 33911 in the typical slave node application.
                                                                                                                                                                                                     VBAT
                                                                                                                                                                                         D1
                                                                                                                                VS1     VS2
                                                                                                                                                             C2     C1
                                 VDD
                                                                                   Internal
                                                                                       Bus
                                                     Interrupt
                                 IRQ                                                                               Voltage Regulator
          C4     C3                              Control Module
                                                LVI, HVI, HTI, OCI
                                                                                                                                               AGND
        VDD                                          Reset
                                 RST                                                                                                                          LS1
                                                Control Module
                        IRQ                   LVR, HVR, HTR, WD,
                                                                                                                   Low Side Control                                      HB Type Relay
                                                                                                                       Module                                 LS2
                       RST                                                                                                                            PGND
                                                    Window
                               PWMIN            Watchdog Module                                                                                                           Motor Output                   R1
                      TIMER
                                                                                                                   High Side Control
                                                                                                                        Module
                                                                                                                                                              HS1
                                MISO
                                MOSI                                                                                  Chip Temp Sense Module
                                                       SPI
                        SPI                             &
                                SCLK                 CONTROL
                                                                                              Analog Multiplexer
                                                                                                                         VBAT Sense Module                          VSENSE
                                  CS
               MCU
                                                                                                                                                                           R2
                                                            