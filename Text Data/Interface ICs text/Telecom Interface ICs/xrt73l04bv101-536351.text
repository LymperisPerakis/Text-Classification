                                                                                                                                      XRT73L04B
                                                                                      4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
OCTOBER 2003                                                                                                                                        REV. 1.0.1
GENERAL DESCRIPTION                                                                               FEATURES
The XRT73L04B, 4-Channel, DS3/E3/STS-1 Line In-                                                   • Incorporates an improved Timing Recovery circuit
terface Unit is a low power CMOS version of the                                                     and is pin and functional compatible to XRT73L04A
XRT73L04A and consists of four independent line                                                   • Meets E3/DS3/STS-1 Jitter Tolerance Require-
transmitters and receivers integrated on a single chip                                              ments
designed for DS3, E3 or SONET STS-1 applications.                                                 • Contains a 4-Wire Microprocessor Serial Interface
Each channel of the XRT73L04B can be configured                                                   • Full Loop-Back Capability
to support the E3 (34.368 Mbps), DS3 (44.736 Mbps)
                                                                                                  • Transmit and Receive Power Down Modes
or the SONET STS-1 (51.84 Mbps) rates. Each
channel can be configured to operate in a mode/data                                               • Full Redundancy Support
rate that is independent of the other channels.                                                   • Uses Minimum External components
In the transmit direction, each channel encodes input                                             • Single +3.3V Power Supply
data to either B3ZS (DS3/STS-1) or HDB3 (E3) for-                                                 • Low Power CMOS design
mat and converts the data into the appropriate pulse                                              • 5V tolerant I/O
shapes for transmission over coaxial cable via a 1:1
transformer.                                                                                      • -40°C to +85°C Operating Temperature Range
                                                                                                  • Available in a Thermally Enhanced 144 pin LQFP
In the receive direction, the XRT73L04B performs
                                                                                                    package
equalization on incoming signals, performs Clock Re-
covery, decodes data from either B3ZS or HDB3 for-                                                APPLICATIONS
mat, converts the receive data into TTL/CMOS for-                                                 • Digital Cross Connect Systems
mat, checks for LOS or LOL conditions and detects
                                                                                                  • CSU/DSU Equipment
and declares the occurrence of Line Code Violations.
                                                                                                  • Routers
                                                                                                  • Fiber Optic Terminals
                                                                                                  • Multiplexers
                                                                                                  • ATM Switches
FIGURE 1. XRT73L04B BLOCK DIAGRAM
                                 E3_(n)         STS-1/DS3_(n)          Host/(HW)    RLOL_(n) EXClk_(n)       RxOFF       RxClkINV
                   RTIP_(n)               AGC/                                            Clock
                                                                       Slicer                                              Invert        RxClk_(n)
                 RRing_(n)             Equalizer                                         Recovery
                REQEN_(n)                                 Peak                                            Data                           RPOS_(n)
                                                                                                                            HDB3/
                                                        Detector                                        Recovery             B3ZS        RNEG_(n)/
                                                                                                                           Decoder
                                                                            LOS Detector                                                 (LCV_(n))
                  LOSTHR
                       SDI
                      SDO                 Serial                                                                                         RLOS_(n)
                      SClk            Processor                                                                                          LLB_(n)
                                        Interface                  Loop MUX
                CS/(SR/DR)                                                                                                               RLB_(n)
                     REGR
                                                                                                                                         TAOS_(n)
                  TTIP_(n)                                                         HDB3/            Transmit                             TPData_(n)
                                                                 Pulse              B3ZS             Logic                               TNData_(n)
                                                               Shaping            Encoder                          Duty Cycle Adjust     TxClk_(n)
                 TRing_(n)
                  MTIP_(n)                                        Tx                                                                     TxLEV_(n)
                                            Device             Control                                                                   TxOFF
                 MRing_(n)                  Monitor
                                                                                                   Channel 0
                  DMO_(n)
                                                                                                           Channel 1
                                                                                                                   Channel 2
                                                                                                                            Channel 3
                     Notes: 1. (n) = 0, 1, 2 , or 3 for respective Channels
                           2. Serial Processor Interface input pins are shared by the four Channels in HOST Mode and redefined in
                                Hardware Mode.
Exar Corporation 48720 Kato Road, Fremont CA, 94538 • (510) 668-7000 • FAX (510) 668-7017 • www.exar.com


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
TYPICAL APPLICATIONS
FIGURE 2. MULTICHANNEL ATM APPLICATION
                                             RPOS         RRPOS      RPOS           RPOS         RTIP
                                             RNEG         RRNEG      RNEG           RNEG        RRing
                                         RxLineClk        RRClk      RxClk          RxClk
                  ATM
                Switch/
                  SAR             XRT74L74                 XRT71D04                 XRT73L04B
                                                                      MClk
                                             TPOS                                   TPOS         TTIP
                                             TNEG                                   TNEG        TRing
                                         TxLineClk                                  TxClk
                               4 Channel E3/DS3 ATM
                                                        4 Channel E3/DS3 J/A     4 Channel E3/DS3 LIU
                                        UNI
FIGURE 3. MULTISERVICE - FRAME RELAY APPLICATION
                                             RPOS         RRPOS      RPOS          RPOS          RTIP
                                             RNEG         RRNEG      RNEG          RNEG        RRing
                                         RxLineClk        RRClk      RxClk         RxClk
                  Frame
                  Relay
                                   XRT72L58                XRT71D04                 XRT73L04B
                                                                      MClk
                                             TPOS                                  TPOS          TTIP
                                             TNEG                                  TNEG         TRing
                                          TxLineClk                                TxClk
                              8 Channel E3/DS3 Framer 2 x 4 Channel E3/DS3 J/A 2 x 4 Channel E3/DS3 LIU
TRANSMIT INTERFACE CHARACTERISTICS:                           RECEIVE INTERFACE CHARACTERISTICS:
• Accepts either Single-Rail or Dual-Rail data from           • Integrated Adaptive Receive Equalization (optional)
  Terminal Equipment and generates a bipolar signal              and Timing Recovery
  from the line                                               • Declares and Clears the LOS defect per ITU-T
• Integrated Pulse Shaping Circuit                               G.775 requirements (E3 and DS3 applications)
• Built-in B3ZS/HDB3 Encoder (which can be dis-               • Meets Jitter Tolerance Requirements as specified
  abled)                                                         in ITU-T G.823_1993 (E3 Applications)
• Contains Transmit Clock Duty Cycle Correction               • Meets Jitter Tolerance Requirements as specified
  Circuit on-chip                                                in Bellcore GR-499-CORE (DS3 Applications)
• Generates pulses that comply with the ITU-T G.703           • Declares Loss of Signal (LOS) and Loss of Lock
  pulse template (E3 applications)                               (LOL) Alarms
• Generates pulses that comply with the DSX-3 pulse           • Built-in B3ZS/HDB3 Decoder (which can be dis-
  template as specified in Bellcore GR-499-CORE                  abled)
  and ANSI T1.102_1993                                        • Recovered Data can be muted while the LOS Con-
• Generates pulses that comply with the STSX-1                   dition is declared
  pulse template as specified in Bellcore GR-253-             • Outputs either Single-Rail or Dual-Rail data to the
  CORE                                                           Terminal Equipment
• Transmitter can be turned off in order to support           • Receiver can be powered down in order to con-
  redundancy designs                                             serve power in redundancy designs
                                                            2


                                                                                         XRT73L04B
                                                     4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                 REV. 1.0.1
FIGURE 4. PIN OUT OF THE XRT73L04B IN THE 144 PIN TQFP PACKAGE
                               E3_2
                               E3_3
                               STS1/DS3_2
                               LLB_2
                               RLB_2
                               RxAVDD_2
                               RRing_2
                               RTIP_2
                               RxAGND_2
                               REQEN_2
                               STS1/DS3_3
                               LLB_3
                               RLB_3
                               RxAVDD_3
                               RRing_3
                               RTIP_3
                               RxAGND_3
                               REQEN_3
                               REQEN_1
                               RxAGND_1
                               RTIP_1
                               RRing_1
                               RxAVDD_1
                               RLB_1
                               LLB_1
                               STS1/DS3_1
                               REQEN_0
                               RxAGND_0
                               RTIP_0
                               RRing_0
                               RxAVDD_0
                               RLB_0
                               LLB_0
                               LOSTHR
                               ICT
                               STS1/DS3_0
                               108
                               107
                               106
                               105
                               104
                               103
                               102
                               101
                               100
                                99
                                98
                                97
                                96
                                95
                                94
                                93
                                92
                                91
                                90
                                89
                                88
                                87
                                86
                                85
                                84
                                83
                                82
                                81
                                80
                                79
                                78
                                77
                                76
                                75
                                74
                                73
           AGND_2        109                                                    72       SDO/E3_0
    REGR/(RxClkINV)      110                                                    71       SDI/E3_1
        LOSMUTEN         111                                                    70       SClk/(RxOFF)
           AGND_3        112                                                    69       CS/(SR/DR)
            RLOL_3       113                                                    68       RLOL_1
           RLOS_3        114                                                    67       RLOS_1
           EXClk_2       115                                                    66       EXClk_0
            RLOL_2       116                                                    65       RLOL_0
           RLOS_2        117                                                    64       RLOS_0
         RxDGND_2        118                                                    63       AGND_1
           RPOS_2        119                                                    62       RxDGND_0
     RNEG_2/LCV_2        120                                                    61       RPOS_0
            RxClk_2      121                                                    60       RNEG_0/LCV_0
         RxDVDD_2        122                                                    59       RxClk_0
           EXClk_3       123                                                    58       RxDVDD_0
         RxDGND_3        124                                                    57       EXClk_1
           RPOS_3
      RNEG3/LCV_3
            RxClk_3
                         125
                         126
                         127
                                         XRT73L04B                              56
                                                                                55
                                                                                54
                                                                                         RxDGND_1
                                                                                         RPOS_1
                                                                                         RNEG_1/LCV_1
         RxDVDD_3        128                                                    53       RxClk_1
         EXDGNDA         129                                                    52       Host/(HW)
         EXDVDDA         130                                                    51       RxDVDD_1
             TxOFF       131                                                    50       AGND_0
         TxAGND_2        132                                                    49       TxAGND_0
            DMO_2        133                                                    48       DMO_0
         TxAVDD_2        134                                                    47       TxAVDD_0
           TAOS_2        135                                                    46       TAOS_0
           TAOS_3        136                                                    45       TAOS_1
           TxLEV_2       137                                                    44       TxLEV_0
           TxLEV_3       138                                                    43       TxLEV_1
            TxClk_2      139                                                    42       TxClk_0
          TPData_2       140                                                    41       TPData_0
          TNData_2       141                                                    40       TNData_0
                NC       142                                                    39       NC
                NC       143                                                    38       NC
                NC       144                                                    37       NC
                               1
                               2
                               3
                               4
                               5
                               6
                               7
                               8
                               9
                               10
                               11
                               12
                               13
                               14
                               15
                               16
                               17
                               18
                               19
                               20
                               21
                               22
                               23
                               24
                               25
                               26
                               27
                               28
                               29
                               30
                               31
                               32
                               33
                               34
                               35
                               36
                                 MRing_2
                                  MTIP_2
                                  TTIP_2
                               TxAVDD_2
                                 TRing_2
                               TxAGND_2
                                 TxClk_3
                                TPData_3
                                TNData_3
                               TxAVDD_3
                                  DMO_3
                                  TTIP_3
                               TxAVDD_3
                                 TRing_3
                               TxAGND_3
                                  MTIP_3
                                 MRing_3
                               TxAGND_3
                               TxAGND_1
                                 MRing_1
                                  MTIP_1
                               TxAGND_1
                                 TRing_1
                               TxAVDD_1
                                  TTIP_1
                                  DMO_1
                               TxAVDD_1
                                TNData_1
                                TPData_1
                                 TxClk_1
                               TxAGND_0
                                 TRing_0
                               TxAVDD_0
                                  TTIP_0
                                  MTIP_0
                                 MRing_0
ORDERING INFORMATION
                PART #                    PACKAGE                OPERATING TEMPERATURE RANGE
           XRT73L04BIV          144 Pin LQFP 20 X 20 X 1.4 mm           -40oC to +85oC
                                                    3


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
                                                  TABLE OF CONTENTS
GENERAL DESCRIPTION ......................................................................................................... 1
    FEATURES .................................................................................................................................................... 1
    APPLICATIONS .........................................................................................................................................        1
Figure 1.XRT73L04B Block Diagram ................................................................................................................                 1
    TYPICAL APPLICATIONS .................................................................................................................................        2
Figure 2.MultiChannel ATM Application ............................................................................................................                2
Figure 3.MultiService - Frame Relay Application ..............................................................................................                    2
    TRANSMIT INTERFACE CHARACTERISTICS: .....................................................................................................                     2
    RECEIVE INTERFACE CHARACTERISTICS: .......................................................................................................                    2
Figure 4.Pin out of the XRT73L04B in the 144 Pin TQFP package ..................................................................                                  3
ORDERING INFORMATION ....................................................................................................... 3
TABLE OF CONTENTS ....................................................................................................... I
PIN DESCRIPTIONS (BY FUNCTION) ......................................................................................... 4
    TRANSMIT INTERFACE ................................................................................................................................... 4
    RECEIVE INTERFACE ..................................................................................................................................... 6
    CLOCK INTERFACE ........................................................................................................................................ 7
    OPERATING MODE SELECT ........................................................................................................................... 8
    CONTROL AND ALARM INTERFACE ................................................................................................................. 9
    MICROPROCESSOR INTERFACE .................................................................................................................... 11
    POWER AND GROUND PINS ......................................................................................................................... 13
    NO CONNECTION PINS ................................................................................................................................ 14
ELECTRICAL CHARACTERISTICS ........................................................................................... 15
    ABSOLUTE MAXIMUM RATINGS .................................................................................................................... 15
         DC Electrical Characteristics .......................................................................................................... 15
         AC Electrical Characteristics (See Figure 5) ........................................................................................................ 16
         Terminal Side Timing Parameters (See Figure 6 and Figure 7) -- {(n) = 0, 1, 2 or 3 } ......................................... 16
Figure 5.Transmit Pulse Amplitude Test Circuit for E3, DS3 and STS-1 Rates (typical channel) .................. 17
Figure 6.Timing Diagram of the Transmit Terminal Input Interface ................................................................. 17
Figure 7.Timing Diagram of the Receive Terminal Output Interface ............................................................... 17
         Line Side Parameters E3 Application ................................................................................................................... 18
         Transmit Characteristics (see Figure 5) ............................................................................................................... 18
         Line Side Parameters Sonet STS-1 Application ...................................................................................................        19
         Transmit Characteristics (See Figure 5) ............................................................................................................... 19
         Line Side Parameters DS3 Application ................................................................................................................   20
         Transmit Characteristics (see Figure 5) ............................................................................................................... 20
Figure 8.ITU-T G.703 Transmit Output Pulse Template for E3 Applications ..................................................                                       21
Figure 9.Bellcore GR-499-CORE Transmit Output Pulse Template for DS3 Applications .............................                                                  21
Figure 10.Bellcore GR-253-CORE Transmit Output Pulse Template for SONET STS-1 Applications ...........                                                           22
Figure 11.Microprocessor Serial Interface Data Structure ..............................................................................                          22
         Microprocessor Serial Interface Timing (See Figure 12) ...................................................................................... 23
Figure 12.Timing Diagram for the Microprocessor Serial Interface ................................................................. 23
SYSTEM DESCRIPTION .................................................................................................. 24
    THE TRANSMIT SECTION - CHANNELS 0, 1, 2, AND 3 .................................................................................... 24
    THE RECEIVE SECTION - CHANNELS 0, 1, 2 AND 3 ....................................................................................... 24
    THE MICROPROCESSOR SERIAL INTERFACE ................................................................................................. 24
Table 1:Role of Microprocessor Serial Interface pins when the XRT73L04B is operating in the Hardware Mode
         24
Figure 13.Functional Block Diagram of the XRT73L04B ................................................................................ 25
                                                                            I


                                                                                                                                     XRT73L04B
                                                                       4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                                             REV. 1.0.1
1.0 SELECTING THE DATA RATE ............................................................................................................... 25
        1.1 CONFIGURING CHANNEL(N) ............................................................................................................ 25
Table 2:Hexadecimal Addresses and Bit Formats of XRT73L04B Command Registers ............................... 26
Table 3:Selecting the Data Rate for Channel(n) via the E3_(n) and STS-1/DS3_(n) input pins (Hardware Mode)
        27
        COMMAND REGISTER, CR4-(N) ........................................................................................................... 27
Table 4:Selecting the Data Rate for Channel(n) via the STS-1/DS3_(n) and the E3_(n) bit-fields within the Ap-
        propriate Command Register (HOST Mode) ..................................................................................... 27
2.0 THE TRANSMIT SECTION ...................................................................................................................... 28
        2.1 THE TRANSMIT LOGIC BLOCK ......................................................................................................... 28
        Accepting Dual-Rail Data from the Terminal Equipment ................................................................... 28
Figure 14. The typical interface for the Transmission of Data in a Dual-Rail Format from the Transmitting Ter-
         minal Equipment to the Transmit Section of a channel .................................................................... 28
Figure 15.The XRT73L04B Samples the data on the TPData and TNData input pins ................................... 28
        Accepting Single-Rail Data from the Terminal Equipment ................................................................ 29
        COMMAND REGISTER CR3-(N) ............................................................................................................ 29
Figure 16.The Behavior of the TPData and TxClk Input Sgnals, while the Transmit Logic Block is Accepting Sin-
         gle-Rail Data from the Terminal Equipment ..................................................................................... 29
        2.2 THE TRANSMIT CLOCK DUTY CYCLE ADJUST CIRCUITRY ................................................................. 29
        2.3 THE HDB3/B3ZS ENCODER BLOCK ............................................................................................... 29
        B3ZS Encoding .................................................................................................................................. 29
Figure 17.An Example of B3ZS Encoding ...................................................................................................... 30
        HDB3 Encoding ................................................................................................................................. 30
Figure 18.An Example of HDB3 Encoding ..................................................................................................... 30
        Disabling the HDB3/B3ZS Encoder ................................................................................................... 30
        COMMAND REGISTER CR3-(N) ............................................................................................................ 31
        2.4 THE TRANSMIT PULSE SHAPING CIRCUITRY ....................................................................................                    31
Figure 19.The Bellcore GR-499-CORE Transmit Output Pulse Template for DS3 Applications ....................                                              31
Figure 20.The Bellcore GR-253-CORE Transmit Output Pulse Template for SONET STS-1 Applications ...                                                       32
        Enabling the Transmit Line Build-Out Circuit .....................................................................................               32
        COMMAND REGISTER, CR1-(N) ........................................................................................................... 32
        Disabling the Transmit Line Build-Out Circuit .................................................................................... 32
        COMMAND REGISTER, CR1-(N) ........................................................................................................... 33
        Design Guideline for Setting the Transmit Line Build-Out Circuit ......................................................                          33
        The Transmit Line Build-Out Circuit and E3 Applications ..................................................................                       33
        2.5 INTERFACING THE TRANSMIT SECTIONS OF THE XRT73L04B TO THE LINE ......................................                                        33
Figure 21.Recommended Schematic for Interfacing the Transmit Section of the XRT73L04B to the Line ....                                                   33
        TRANSFORMER RECOMMENDATIONS .................................................................................................... 34
3.0 THE RECEIVE SECTION ......................................................................................................................... 35
        3.1 INTERFACING THE RECEIVE SECTIONS OF THE XRT73L04B TO THE LINE ........................................ 35
Figure 22.Recommended Schematic for Interfacing the Receive Section of the XRT73L04B to the Line (Trans-
         former-Coupling) .............................................................................................................................. 35
        3.2 THE RECEIVE EQUALIZER BLOCK ................................................................................................... 36
Figure 23.The Typical Application for the System Installer ............................................................................ 36
         Guidelines for Setting the Receive Equalizer ................................................................................... 36
                                                                     II


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
         COMMAND REGISTER CR-2(N) ............................................................................................................ 37
         3.3 CLOCK RECOVERY PLL ..................................................................................................................                 38
         The Training Mode .............................................................................................................................           38
         The Data/Clock Recovery Mode ........................................................................................................                     38
         3.4 THE HDB3/B3ZS DECODER ..........................................................................................................                      38
         B3ZS Decoding (DS3/STS-1 Applications) ........................................................................................                           38
Figure 24.An Example of B3ZS Decoding ......................................................................................................                       38
         HDB3 Decoding (E3 Applications) .....................................................................................................                     38
Figure 25.An Example of HDB3 Decoding ......................................................................................................                       39
         Configuring the HDB3/B3ZS Decoder ................................................................................................                        39
         COMMAND REGISTER CR3-(N) ............................................................................................................ 39
         3.5 LOS DECLARATION/CLEARANCE ..................................................................................................... 39
         The LOS Declaration/Clearance Criteria for E3 Applications ............................................................. 39
Figure 26.The Signal Levels that the XRT73L04B declares and clears LOS ................................................. 40
Figure 27.The Behavior of the LOS Output Indicator in response to the Loss of Signal and the Restoration of
           Signal ................................................................................................................................................ 41
         The LOS Declaration/Clearance Criteria for DS3 and STS-1 Applications ........................................ 41
Table 5:The ALOS (Analog LOS) Declare and Clear Thresholds for a given setting of LOSTHR and REQEN
         (DS3 and STS-1 Applications) ........................................................................................................... 41
         COMMAND REGISTER CR0-(N) ............................................................................................................ 42
         COMMAND REGISTER CR2-(N) ............................................................................................................ 42
         COMMAND REGISTER CR0-(N) ............................................................................................................ 42
         COMMAND REGISTER CR2-(N) ............................................................................................................ 42
         Muting the Recovered Data while the LOS is being Declared ........................................................... 42
         COMMAND REGISTER CR3-(N) ............................................................................................................ 43
         3.6 ROUTING THE RECOVERED TIMING AND DATA INFORMATION TO THE RECEIVING TERMINAL EQUIPMENT .
         43
         Routing Dual-Rail Format Data to the Receiving Terminal Equipment .............................................. 43
Figure 28.The typical interface for the Transmission of Data in a Dual-Rail Format, from the Receive Section of
           the XRT73L04B to the Receiving Terminal Equipment .................................................................... 43
Figure 29.How the XRT73L04B outputs data on the RPOS and RNEG output pins ...................................... 44
Figure 30.The Behavior of the RPOS, RNEG, and RxClk signals when RxClk is inverted ............................. 44
         COMMAND REGISTER CR3-(N) ............................................................................................................ 45
         Routing Single-Rail Format (Binary Data Stream) data to the Receive Terminal Equipment ............ 45
         COMMAND REGISTER CR3-(N) ............................................................................................................ 45
Figure 31.The typical interface for the Transmission of Data in a Single-Rail Format from the Receive Section
           of the XRT73L04B to the Receiving Terminal Equipment ................................................................ 45
Figure 32.The behavior of the RPOS and RxClk output signals while the XRT73L04B is transmitting Single-Rail
           data to the Receiving Terminal Equipment ....................................................................................... 46
         3.7 SHUTTING OFF THE RECEIVE SECTION ........................................................................................... 46
         COMMAND REGISTER CR3-(N) ............................................................................................................ 46
4.0 DIAGNOSTIC FEATURES OF THE XRT73L04B .................................................................................... 47
         4.1 THE ANALOG LOCAL LOOP-BACK MODE ......................................................................................... 47
Figure 33. A channel operating in the Analog Local Loop-Back Mode ........................................................... 47
         4.2 THE DIGITAL LOCAL LOOP-BACK MODE. ......................................................................................... 48
                                                                              III


                                                                                                                                       XRT73L04B
                                                                         4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                                               REV. 1.0.1
        COMMAND REGISTER CR4-(N) ............................................................................................................ 48
Figure 34.The Digital Local Loop-Back path within a given channel .............................................................. 48
        COMMAND REGISTER CR4-(N) ............................................................................................................ 48
        4.3 THE REMOTE LOOP-BACK MODE ................................................................................................... 49
Figure 35.The Remote Loop-Back path, within a given channel .................................................................... 49
        COMMAND REGISTER CR4-(n) ............................................................................................................ 49
        4.4 TXOFF FEATURES ......................................................................................................................... 50
        COMMAND REGISTER CR1-(N) ............................................................................................................ 50
Table 6:The Relationship Between the TxOFF Input Pin, the TxOFF Bit Field and the State of the Transmitter
        50
        4.5 THE TRANSMIT DRIVE MONITOR FEATURES .................................................................................... 50
Figure 36.The XRT73L04B employing the Transmit Drive Monitor Features ................................................. 51
        4.6 THE TAOS (TRANSMIT ALL ONES) FEATURE ................................................................................. 51
5.0 THE MICROPROCESSOR SERIAL INTERFACE ................................................................................... 51
        5.1 DESCRIPTION OF THE COMMAND REGISTERS .................................................................................. 51
        COMMAND REGISTER CR1-(N) ............................................................................................................ 51
Table 7:Hexadecimal Addresses and Bit Formats of XRT73L04B Command Registers ............................... 52
        5.2 DESCRIPTION OF BIT-FIELDS FOR EACH COMMAND REGISTER ......................................................... 53
        Command Register - CR0-(n) ............................................................................................................ 53
        COMMAND REGISTER CR0-(N) ............................................................................................................. 53
        COMMAND REGISTER CR1-(N) ............................................................................................................ 54
        Command Register CR2-(n) .............................................................................................................. 54
        COMMAND REGISTER CR2-(N) ............................................................................................................ 54
        COMMAND REGISTER CR3-(N) ............................................................................................................ 55
        COMMAND REGISTER CR4-(N) ............................................................................................................ 56
Table 8:Contents of LLB_(n) and RLB_(n) and the Corresponding Loop-Back Mode for Channel(n) ...........                                                    56
        5.3 OPERATING THE MICROPROCESSOR SERIAL INTERFACE. .................................................................                               56
Figure 37.Microprocessor Serial Interface Data Structure .............................................................................                     57
Figure 38.Timing Diagram for the Microprocessor Serial Interface ................................................................                          58
ORDERING INFORMATION ..................................................................................................... 59
PACKAGE DIMENSIONS ........................................................................................................ 59
    REVISION HISTORY ..................................................................................................................................... 60
                                                                       IV


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
PIN DESCRIPTIONS (BY FUNCTION)
TRANSMIT INTERFACE
   PIN #     NAME         TYPE                                     DESCRIPTION
    34      TTIP_0         O       Transmit TTIP Output - Channel (n):
    25      TTIP_1                 The XRT73L04B uses this pin along with TRing_(n) to transmit a bipolar
     3      TTIP_2                 line signal via a 1:1 transformer.
    12      TTIP_3
    32      TRing_0        O       Transmit Ring Output - Channel (n):
    23      TRing_1                The XRT73L04B uses this pin along with TTIP_(n) to transmit a bipolar
     5      TRing_2                line signal via a 1:1 transformer.
    14      TRing_3
    42      TxClk_0         I      Transmit Clock Input for TPData and TNData - Channel (n):
    30      TxClk_1                This input pin must be driven at 34.368 MHz (for E3 applications),
   139      TxClk_2                44.736 MHz (for DS3 applications), or 51.84 MHz (for SONET STS-1
     7      TxClk_3                applications). The XRT73L04B uses this signal to sample the
                                   TPData_(n) and TNData_(n) input pins. By default, the XRT73L04B is
                                   configured to sample these two pins on the falling edge of this signal.
                                   NOTE: If the XRT73L04B is operating in the HOST Mode, then the
                                   device can be configured to sample the TPData_(n) and TNData_(n)
                                   input pins on either the rising or falling edge of TxClk_(n).
    41     TPData_0         I      Transmit Positive Data Input - Channel (n):
    29     TPData_1                The XRT73L04B samples this pin on the falling edge of TxClk_(n). If the
   140     TPData_2                device samples a "1", then it generates and transmits a positive polarity
     8     TPData_3                pulse to the line.
                                   The data should be applied to this input pin if the Transmit Section is
                                   configured to accept Single-Rail data from the Terminal Equipment.
                                   NOTE: If the XRT73L04B is operating in the HOST Mode, then the
                                   XRT73L04B can be configured to sample the TPData_(n) pin on either
                                   the rising or falling edge of TxClk_(n).
    40     TNData_0         I      Transmit Negative Data Input - Channel (n):
    28     TNData_1                The XRT73L04B samples this pin on the falling edge of TxClk_(n). If the
   141     TNData_2                device samples a "1", then it generates and transmits a negative polarity
     9     TNData_3                pulse to the line.
                                   In Single-Rail Mode, this pin must be tied to GND to enable the HDB3/
                                   B3ZS Encoder and Decoder, (internally pulled-down).
                                   In Dual-Rail Mode this input is the N-Rail Data input.
                                   NOTE: If the XRT73L04B is operating in the HOST Mode, then the
                                   XRT73L04B can be configured to sample the TNData_(n) pin on either
                                   the rising or falling edge of TxClk_(n).
                                                4


                                                                                    XRT73L04B
                                      4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                             REV. 1.0.1
TRANSMIT INTERFACE
  PIN #      NAME  TYPE                                   DESCRIPTION
   44      TxLEV_0   I  Transmit Line Build-Out Enable/Disable Select - Channel (n):
   43      TxLEV_1      This input pin permits the Transmit Line Build-Out circuit, within Channel
  137      TxLEV_2      (n), to be enabled or disabled. In E3 mode, this pin has no effect on the
  138      TxLEV_3      transmit pulse shape.
                        Setting this pin to "High" disables the Line Build-Out circuit. In this
                        mode, Channel (n) outputs partially-shaped pulses onto the line via the
                        TTIP_(n) and TRing_(n) output pins.
                        Setting this pin to "Low" enables the Line Build-Out circuit within Chan-
                        nel (n). In this mode, Channel (n) outputs shaped pulses onto the line
                        via the TTIP_(n) and TRing_(n) output pins.
                        To comply with the Isolated DSX-3/STSX-1 Pulse Template Require-
                        ments per Bellcore GR-499-CORE or Bellcore GR-253-CORE:
                        1. Set this input pin to "1" if the cable length between the Cross-Connect
                        and the transmit output of Channel (n) is greater than 225 feet.
                        2. Set this input pin to "0" if the cable length between the Cross-Connect
                        and the transmit output of Channel (n) is less than 225 feet.
                        This pin is active only if the following two conditions are true:
                        a. The XRT73L04B is configured to operate in either the DS3 or SONET
                        STS-1 Modes.
                        b. The XRT73L04B is configured to operate in the Hardware Mode.
                        NOTE: This pin to should be tied to GND if the XRT73L04B is going to be
                        operating in the HOST Mode, (internally pulled-down).
  131       TxOFF    I  Transmitter OFF Input:
                        Setting this input pin "High" turns off all of the Transmitter Sections. In
                        this mode the TTIP and TRing outputs are tri-stated.
                        NOTES:
                              1. This input pin controls the TTIP and TRing outputs even when
                                 the XRT73L04B is operating in the HOST Mode.
                              2. For HOST Mode Operation, this pin is tied to GND if the Trans-
                                 mitter is intended to be turned off via the Microprocessor Serial
                                 Interface.
                                     5


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
 RECEIVE INTERFACE
   PIN #       NAME       TYPE                                     DESCRIPTION
     59       RxClk_0       O     Receive Clock Output - Channel (n):
     53       RxClk_1             This output pin is the Recovered Clock signal from the incoming line sig-
    121       RxClk_2             nal for Channel (n). The Receive Section of Channel (n) outputs data via
    127       RxClk_3             the RPOS_(n) and RNEG_(n) output pins on the rising edge of this clock
                                  signal.
                                  Configure the Receive Section of Channel (n) to update the data on the
                                  RPOS_(n) and RNEG_(n) output pins on the falling edge of RxClk_(n)
                                  by doing one of the following:
                                   a. Operating in the Hardware Mode
                                  Pull the RxClkINV pin to "High".
                                   b. Operating in the HOST Mode
                                  Write a "1" into the RxClkINV bit-field within the Command Register.
     60    RNEG_0/LCV_0     O     Receive Negative Data Output - Channel (n):
     54    RNEG_1/LCV_1           The function of this pin is dependent on whether the 73L04A is in the
    120    RNEG_2/LCV_2           Hardware or HOST Mode (HOST/HW) and the condition of CS/(SR/DR).
    126    RNEG_3/LCV_3            a. Operating in the Hardware Mode
                                  Receive Negative Data:
                                  Setting the CS/(SR/DR) pin ”Low”, (Dual-Rail operation) this output pin
                                  pulses "High" whenever Channel (n) has received a Negative Polarity
                                  pulse in the incoming line signal at the RTIP_(n) and RRing_(n) inputs.
                                  Line Code Violation:
                                  When CS/(SR/DR) is set “High”, (Single-Rail operation), the B3ZS/HDB3
                                  Encoder/Decoder is activated and the Line Code Violation signal is out-
                                  put on this pin.
                                   b. Operating in the HOST Mode
                                  Receive Negative Data:
                                  Writing a “0” to the (SR/DR)_(n) bit in the command register configures
                                  channel(n) in the Dual-Rail Mode and activates RNEG_(n).
                                  Writing a “1” to (SR/DR)_(n) bit of the Command Register configures the
                                  Single-Rail Mode and activates LCV_(n).
                                  If the B3ZS/HDB3 Decoder is enabled then the zero suppression pat-
                                  terns in the incoming line signal (such as: "00V", "000V", "B0V", "B00V")
                                  is not reflected at this output.
     61      RPOS_0         O     Receive Positive Data Output - Channel (n):
     55      RPOS_1               The function of this pin is dependent on the setting of the CS/(SR/DR)
    119      RPOS_2               pin.
    125      RPOS_3               Receive Positive Data
                                  If CS/(SR/DR) is set “Low” (Dual-Rail Mode), this output pin pulses
                                  "High" whenever Channel (n) has received a Positive Polarity pulse in
                                  the incoming line signal at the RTIP_(n)/RRing_(n) inputs.
                                  Data Output
                                  If CS/(SR/DR) is set “High” (Single-Rail Mode), data is output on this pin.
                                  If the B3ZS/HDB3 Decoder is enabled then the zero suppression pat-
                                  terns in the incoming line signal (such as: "00V", "000V", "B0V", "B00V")
                                  is not reflected at this output.
     79      RRing_0        I     Receive Ring Input - Channel (n):
     87      RRing_1              This input pin along with RTIP_(n) is used to receive the bipolar line sig-
    102      RRing_2              nal from the Remote DS3/E3/STS-1 Terminal.
     94      RRing_3
                                                6


                                                                                      XRT73L04B
                                          4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                               REV. 1.0.1
RECEIVE INTERFACE
  PIN #       NAME    TYPE                                 DESCRIPTION
     80      RTIP_0     I  Receive TIP Input - Channel (n):
     88      RTIP_1        This input pin along with RRing_(n) is used to receive the bipolar line sig-
    101      RTIP_2        nal from the Remote DS3/E3/STS-1 Terminal.
     93      RTIP_3
     82    REQEN_0      I  Receive Equalization Enable Input - Channel (n):
     90    REQEN_1         Setting this input pin "High" enables the Internal Receive Equalizer
     99    REQEN_2         within Channel (n). Setting this pin "Low" disables the Internal Receive
     91    REQEN_3         Equalizer. The guidelines for enabling and disabling the Receive Equal-
                           izer are described in Section 3.2.
                           NOTE: This pin is ignored and should be tied to GND if the XRT73L04B
                           is going to be operating in the HOST Mode, (internally pulled-down).
    110     RxClkINV    I  Invert RxClk_(n) Output - Select:
                           The function of this pin depends upon the mode of operation.
                           Hardware Mode - Invert RxClk Output Select:
                           Setting this input pin "High" configures the Receive Section of all Chan-
                           nels to invert their RxClk_(n) clock output signals.
                           Setting this pin "Low" configures Channel(n) to output the recovered
                           data via the RPOS_(n) and RNEG_(n) output pins on the rising edge of
                           RxClk_(n).
                           Setting this input pin "High" configures Channel (n) to output the recov-
                           ered data via the RPOS_(n) and RNEG_(n) output pins on the falling
                           edge of RxClk_(n).
                           NOTE: This pin is internally pulled “High”.
CLOCK INTERFACE
  PIN #     NAME     TYPE                                   DESCRIPTION
    66     EXClk_0     I    External Reference Clock Input - Channel (n):
    57     EXClk_1          Apply a 34.368 MHz clock signal for E3 applications, a 44.736 MHz
   115     EXClk_2          clock signal for DS3 applications or a 51.84 MHz clock signal for SONET
  123      EXClk_3          STS-1 applications.
                            The Channel (n) Clock Recovery PLL uses this signal as a Reference
                            Signal for Declaring and Clearing the Receive Loss of Lock Alarm. The
                            Clock recovery PLL also generates the exact clock for the LIU.
                            It is permissible to use the same clock that drives the TxClk_(n) input
                            pin.
                            It is permissible to operate the four Channels at different data rates.
                                         7


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
OPERATING MODE SELECT
   PIN #      NAME        TYPE                                      DESCRIPTION
    69      SR/DR/CS         I     Microprocessor Serial Interface - Chip Select Input/Encoder-
                                   Decoder Disable Input:
                                   The function of this pin depends upon whether the XRT73L04B is oper-
                                   ating in the HOST Mode or in the Hardware Mode.
                                   NOTE: This pin is internally pulled "High".
                                   Hardware Mode - Receive Output Single-Rail/Dual-Rail Select:
                                    In Hardware Mode, setting this pin “High” configures each of the four
                                   channels to operate in the Single-Rail Mode. When each of the four
                                   channels are configured to operate in the Single-Rail Mode, then the
                                   Receive Section of each channel will output data via the RPOS_(n) out-
                                   put pin.
                                   NOTE: Tie the TNData_(n) input to GND to enable HDB3/B3ZS Encod-
                                   ing and Decoding.
                                   Setting this pin “Low” configures each of the four channels to operate in
                                   the Dual-Rail Mode. When each of the four channels are configured to
                                   operate in the Dual-Rail Mode, then the Receive Section of each chan-
                                   nel will output data via both the RPOS_(n) and RNEG_(n) output pins.
                                   NOTE: This input pin functions as the CS input pin, if the XRT73L04B
                                   device has been configured to operate in the HOST Mode.
    72      E3_0/SDO       I/O     E3_Mode Select - Channel 0:
                                   This pin has a dual function. In HOST mode, this pin functions as SDO.
    71      E3_1/SDI         I     E3_Mode Select - Channel 1
                                   This pin has a dual function. In HOST mode,this pin functions as SDI.
                                   E3_Mode Select - Channel 2
   108        E3_2           I     E3_Mode Select - Channel 3
   107        E3_3           I
                                   Hardware Mode Operation - E3 Mode Select - Channel (n):
                                   This input pin is used to configure Channel (n) of the XRT73L04B to
                                   operate in the E3 or STS-1/DS3 Modes. Setting this input pin to "High"
                                   configures Channel (n) to operate in the E3 Mode. Setting it "Low" con-
                                   figures Channel (n) to operate in either the DS3 or STS-1 Modes,
                                   depending upon the state of the STS-1/DS3_(n) input pin.
                                   NOTE: This pin is internally pulled “Low” when XRT73L04B is in the
                                   Hardware Mode.
    73     STS1/DS3_0        I     STS-1/DS3 Select Input - Channel (n):
    83     STS1/DS3_1              “High” for STS-1 and “Low” for DS3 Operation.
   106     STS1/DS3_2              The XRT73L04B ignores this pin if the E3_(n) pin is set to "1".
    98     STS1/DS3_3              This input pin is ignored if the XRT73L04B is operating in the HOST
                                   Mode.
                                   NOTE: This pin should be tied to GND if the XRT73L04B is going to be
                                   operating in the HOST Mode, (internally pulled-down).
                                                8


                                                                                          XRT73L04B
                                             4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                  REV. 1.0.1
OPERATING MODE SELECT
  PIN #    NAME        TYPE                                    DESCRIPTION
   52    HOST/(HW)       I    HOST-Hardware Mode Select:
                              This input pin is used to enable or disable the Microprocessor Serial
                              Interface (e.g., consisting of the SDI, SDO, SClk, and CS pins).
                              Setting this input pin "High" enables the Microprocessor Serial Interface
                              (e.g. configures the XRT73L04B to operate in the HOST Mode). In this
                              mode, configure the XRT73L04B via the Microprocessor Serial Interface.
                              When the XRT73L04B is operating in the HOST Mode, then it ignores
                              the states of many of the discrete input pins. Setting this input pin "Low"
                              disables the Microprocessor Serial Interface (e.g., configures the
                              XRT73L04B to operate in the Hardware Mode). In this mode, many of
                              the external input control pins are functional. (Internally Pulled-up)
CONTROL AND ALARM INTERFACE
  PIN #      NAME        TYPE                                  DESCRIPTION
    36     MRing_0         I  Monitor Ring Input - Channel (n):
    20     MRing_1            The bipolar line output signal from TRing_(n) can be connected to this
     1     MRing_2            pin via a 270-ohm resistor in order to check for line driver failure. This
    17     MRing_3            pin is internally pulled "High".
    35      MTIP_0         I  Monitor Tip Input - Channel (n):
    21      MTIP_1            The bipolar line output signal from TTIP_(n) can be connected to this pin
     2      MTIP_2            via a 270-ohm resistor in order to check for line driver failure. This pin is
    16      MTIP_3            internally pulled "High".
    48      DMO_0          O  Drive Monitor Output - Channel (n):
    26      DMO_1             If no transmitted AMI signal is present on MTIP_(n) and MRing_(n) input
   133      DMO_2             pins for 128±32 TxClk periods, then DMO_(n) toggles and remains
    11      DMO_3             "High" until the next AMI signal is detected.
    46      TAOS_0         I  Transmit All Ones Select - Channel (n):
    45      TAOS_1            A "High" on this pin causes the Transmit Section, within Channel (n), to
   135      TAOS_2            generate and transmit a continuous AMI all “1’s" pattern onto the line.
   136      TAOS_3            The frequency of this "1’s" pattern is determined by TxClk_(n).
                              This input pin is ignored if the XRT73L04B is operating in the HOST
                              Mode.
                              NOTE: This pin should be tied to GND if the XRT73L04B is going to be
                              operating in the HOST Mode, (internally pulled-down).
    64      RLOS_0         O  Receive Loss of Signal Output Indicator - Channel (n):
    67      RLOS_1            This output pin toggles "High" if Channel (n) has detected a Loss of Sig-
   117      RLOS_2            nal Condition in the incoming line signal.
   114      RLOS_3            The criteria that the XRT73L04B uses to declare an LOS Condition
                              depends upon whether the device is operating in the E3 or STS-1/DS3
                              Mode.
    65      RLOL_0         O  Receive Loss of Lock Output Indicator - Channel (n):
    68      RLOL_1            This output pin toggles "High" if Channel (n) has detected a Loss of Lock
   116      RLOL_2            Condition. Channel (n) declares an LOL (Loss of Lock) condition if the
   113      RLOL_3            recovered clock frequency deviates from the Reference Clock frequency
                              (available at the EXClk_(n) input pin) by more than 0.5%.
                                           9


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
CONTROL AND ALARM INTERFACE
   PIN #       NAME         TYPE                                   DESCRIPTION
    60     RNEG_0/(LCV_0)    O    Line Code Violation - Channel (n):
    54     RNEG_1/(LCV_1)         The function of this pin is dependent on whether the XRT73L04B is in
   120     RNEG_2/(LCV_2)         the Hardware or HOST Mode (HOST/HW) and if CS/(SR/DR) is set
   126     RNEG_3/(LCV_3)         “High”.
                                  Hardware Mode
                                  Line Code Violation:
                                  When CS/(SR/DR) is set “High”, (Single-Rail operation), the B3ZS/HDB3
                                  Encoder/Decoder is activated and the Line Code Violation signal is out-
                                  put on this pin.
                                  HOST Mode
                                  Receive Negative Data:
                                  Writing a “1” to (SR/DR)_(n) bit of the Command Register configures the
                                  Single-Rail Mode and activates LCV_(n).
                                  If the B3ZS/HDB3 Decoder is enabled then the zero suppression pat-
                                  terns in the incoming line signal (such as: "00V", "000V", "B0V", "B00V")
                                  is not reflected at this output.
    74          ICT           I   In-Circuit Test Input:
                                  Setting this pin "Low" causes all digital and analog outputs to go into a
                                  high-impedance state to allow for in-circuit testing. This pin should be
                                  set to "High" for normal operation.
                                  This pin is internally pulled "High".
    75        LOSTHR          I   Loss of Signal Threshold Control:
                                  Forcing the LOSTHR pin to GND or VDD provides two settings. This pin
                                  must be set to a “High” or “Low” level upon power up and should not be
                                  changed during operation.
                                  This pin is only applicable during DS3 or STS-1 operations.
    76         LLB_0          I   Local Loop-back - Channel (n):
    84         LLB_1              This input pin along with RLB_(n) dictates which Loop-Back mode Chan-
   105         LLB_2              nel (n) is operating in.
    97         LLB_3              A "High" on this pin with RLB_(n) set to "Low" configures Channel (n) to
                                  operate in the Analog Local Loop-Back Mode.
                                  A "High" on this pin with RLB_(n) also being set to "High" configures
                                  Channel (n) to operate in the Digital Local Loop-Back Mode.
                                  NOTE: This pin is ignored and should be tied to GND if the XRT73L04B
                                  is going to be operating in the HOST Mode.
    77         RLB_0          I   Remote Loop-Back - Channel (n):
    85         RLB_1              This input pin in conjunction with LLB_(n) dictates which Loop-Back
   104         RLB_2              mode Channel (n) is operating in.
    96         RLB_3              A "High" on this pin with LLB_(n) being set to "Low" configures Channel
                                  (n) to operate in the Remote Loop-Back Mode.
                                  A "High" on this pin with LLB_(n) also being set to "High" configures
                                  Channel (n) to operate in the Digital Local Loop-Back Mode.
                                  NOTE: This pin is ignored and should be tied to GND if the XRT73L04B
                                  is going to be operating in the HOST Mode.
                                               10


                                                                                         XRT73L04B
                                            4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                REV. 1.0.1
CONTROL AND ALARM INTERFACE
  PIN #       NAME      TYPE                                  DESCRIPTION
   111    LOSMUTEN        I  MUTE-upon-LOS Enable Input (Hardware Mode):
                             This input pin is use to configure the XRT73L04B, while it is operating in
                             the Hardware Mode, to MUTE the recovered data via the RPOS_(n),
                             RNEG_(n) output pins whenever one of the Channels declares an LOS
                             conditions.
                             Setting this input pin “High" configures all Channels to automatically pull
                             the RPOS_(n) and RNEG_(n) output pins “Low” whenever it is declaring
                             an LOS condition, thereby MUTing the data being output to the Terminal
                             Equipment.
                             Setting this input pin "Low" configures all Channels to NOT automatically
                             MUTE the recovered data whenever an LOS condition is declared.
                             NOTES:
                                   1. This pin is ignored and should be tied to GND if the XRT73L04B
                                      is going to be operating in the HOST Mode.
                                   2. This pin is internally pulled "Low".
MICROPROCESSOR INTERFACE
  PIN #    NAME       TYPE                                   DESCRIPTION
   69        CS/        I    Microprocessor Serial Interface - Chip Select Input/Encoder-
           SR/DR             Decoder Disable Input:
                             The function of this pin depends upon whether the XRT73L04B is oper-
                             ating in the HOST Mode or in the Hardware Mode.
                             HOST Mode Operation - Chip Select Input:
                             The Local Microprocessor must assert this pin to "0" in order to enable
                             communication with the XRT73L04B via the Microprocessor Serial Inter-
                             face.
                             NOTE: This pin is internally pulled "High".
   70   SClk/(RxOFF)    I    Microprocessor Serial Interface Clock Signal/Receiver Shut OFF
                             Input:
                             The function of this pin depends upon:
                             HOST Mode - Microprocessor Serial Interface Clock Signal:
                             This signal is used to sample the data on the SDI pin on the rising edge
                             of this signal. During Read operations the Microprocessor Serial Inter-
                             face updates the SDO output on the falling edge of this signal.
                             Hardware Mode - Receiver Shut OFF input:
                             Setting this input pin "High" shuts off all of the Receiver Sections. Set-
                             ting this input pin "Low" enables all of the Receive Sections for full oper-
                             ation.
   71    SDI/E3_1       I    Serial Data Input for the Microprocessor Serial Interface
                             This pin has a dual function.
                             HOST Mode:
                             To read or write data into the Command Registers over the Microproces-
                             sor Serial Interface, apply the Read/Write bit, the Address Values of the
                             Command Registers and Data Value to be written during Write Opera-
                             tions to this pin.
                             This input is sampled on the rising edge of the SClk pin.
                                          11


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
MICROPROCESSOR INTERFACE
  PIN #     NAME          TYPE                                    DESCRIPTION
    72     SDO/E3_0        O       Serial Data Output from the Microprocessor Serial Interface
                                   The function of this pin depends upon the mode of operation.
                                   HOST Mode Operation:
                                   This pin serially outputs the contents of the specified Command Register
                                   during Read Operations. The data on this pin is updated on the falling
                                   edge of the SClk input signal. This pin is tri-stated upon completion of
                                   data transfer.
   110      REGR/           I      Register Reset Input (Invert RxClk_(n) Output - Select):
           RxClkINV                The function of this pin depends upon the mode of operation.In Hard-
                                   ware mode, this pin functions as RxClkINV.
                                   HOST Mode - Register Reset Input:
                                   Setting this input pin "Low" causes the XRT73L04B to reset the contents
                                   of the Command Registers to their default settings and to its default
                                   operating configuration.
                                   NOTE: This pin is internally pulled “High”.
                                               12


                                                                              XRT73L04B
                                        4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                  REV. 1.0.1
POWER AND GROUND PINS
  PIN #    NAME       TYPE                             DESCRIPTION
    4    TxAVDD_2      **** Transmitter Analog Supply, 3.3V + 5% - Channel(n)
    6   TxAGND_2       **** Transmitter Analog Ground - Channel(n)
   10    TxAVDD_3      **** Transmitter Analog Supply, 3.3V + 5% - Channel(n)
   13    TxAVDD_3      **** Transmitter Analog Supply, 3.3V + 5% - Channel(n)
   15   TxAGND_3       **** Transmitter Analog Ground - Channel(n)
   18   TxAGND_3       **** Transmitter Analog Ground - Channel(n)
   19   TxAGND_1       **** Transmitter Analog Ground - Channel(n)
   22   TxAGND_1       **** Transmitter Analog Ground - Channel(n)
   24    TxAVDD_1      **** Transmitter Analog Supply, 3.3V + 5% - Channel(n)
   27    TxAVDD_1      **** Transmitter Analog Supply, 3.3V + 5% - Channel(n)
   31   TxAGND_0       **** Transmitter Analog Ground - Channel(n)
   33    TxAVDD_0      **** Transmitter Analog Supply, 3.3V + 5% - Channel(n)
   47    TxAVDD_0      **** Transmitter Analog Supply, 3.3V + 5% - Channel(n)
   49   TxAGND_0       **** Transmitter Analog Ground - Channel (n)
   50     AGND_0       **** Analog Ground Pin - Channel (n)
   51   RxDVDD_1       **** Receiver Digital Supply 3.3V + 5% Channel (n)
   56   RxDGND_1       **** Receiver Digital Ground - Channel(n)
   58   RxDVDD_0       **** Receiver Digital Supply 3.3V + 5% Channel (n)
   62   RxDGND_0       **** Receiver Digital Ground - Channel(n)
   63     AGND_1       **** Analog Ground Pin - Channel(n)
   78   RxAVDD_0       **** Receiver Analog Supply 3.3V + 5% - Channel (n)
   81   RxAGND_0       **** Receiver Analog Ground - Channel (n)
   86   RxAVDD_1       **** Receiver Analog Supply 3.3V + 5% - Channel (n)
   89   RxAGND_1       **** Receiver Analog Ground - Channel (n)
   92   RxAGND_3       **** Receiver Analog Ground - Channel (n)
   95   RxAVDD_3       **** Receiver Analog Supply 3.3V + 5% - Channel (n)
   100  RxAGND_2       **** Receiver Analog Ground - Channel (n)
   103  RxAVDD_2       **** Receiver Analog Supply 3.3V + 5% - Channel (n)
   109    AGND_2       **** Analog Ground Pin - Channel (n)
   112    AGND_3       **** Analog Ground Pin - Channel (n)
   118  RxDGND_2       **** Receiver Digital Ground - Channel(n)
   122  RxDVDD_2       **** Receiver Digital Supply 3.3V + 5% - Channel (n)
                                      13


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
POWER AND GROUND PINS
  PIN #      NAME         TYPE                                DESCRIPTION
   124     RxDGND_3        ****    Receiver Digital Ground - Channel(n)
   128     RxDVDD_3        ****    Receiver Digital Supply 3.3V + 5% - Channel (n)
   129     EXDGNDA         ****    External Clock Digital Ground
   130     EXDVDDA         ****    External Clock Digital Supply
   132     TxAGND_2        ****    Transmitter Analog Ground - Channel (n)
   134     TxAVDD_2        ****    Transmitter Analog Supply 3.3V + 5% - Channel(n)
NO CONNECTION PINS
  PIN #      NAME         TYPE                                DESCRIPTION
    37        NC                   No connection
    38        NC                   No connection
    39        NC                   No connection
   142        NC                   No connection
   143        NC                   No connection
   144        NC                   No connection
                                             14


                                                                                                        XRT73L04B
                                                            4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                REV. 1.0.1
ELECTRICAL CHARACTERISTICS
                          ABSOLUTE MAXIMUM RATINGS
                           Storage Temperature                          - 65°C to + 150°C
                           Operating Temperature                         - 40°C to + 85°C
                           Supply Voltage Range                          -0.5V to +3.465V
                           Theta-JA                                          24° C/W
                           Theta-JC                                          5.5° C/W
NOTE: The XRT73L04B is assembled in a thermally               Ground connections of the device. This Heat Slug can be
enhanced package with an integral Copper Heat Slug. The       soldered to the mounting board if desired, but must be elec-
Heat Slug is solder plated and is exposed on the bottom of    trically isolated from any VDD connections.
the package and is electrically connected to the internal
ELECTRICAL CHARACTERISTICS (TA = 25°C, VDD = 3.3V + 5%, UNLESS OTHERWISE SPECIFIED)
  SYMBOL                                 PARAMETER                                     MIN.    TYP.     MAX.      UNITS
 DC Electrical Characteristics
   DVDD     Digital DC Supply Voltage                                                 3.135    3.3      3.465       V
   AVDD     Analog DC Supply Voltage                                                  3.135    3.3      3.465       V
    ICC     Supply Current (Measured while Transmitting and Receiving all "1’s")                         500       mA
    VIL     Input Low Voltage *                                                                           0.8       V
    VIH     Input High Voltage *                                                       2.0                5.0       V
    VOL     Output Low Voltage, IOUT = -4.0mA *                                                           0.4       V
    VOH     Output High Voltage, IOUT = 4.0mA *                                        2.8                          V
     IL     Input Leakage Current *                                                                      ±10       µA
NOTE: * Not applicable to pins with pull-up or pull-down
resistors.
                                                           15


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
ELECTRICAL CHARACTERISTICS (CONTINUED) (TA = 25°C, VDD = 3.3V + 5%, UNLESS OTHERWISE SPECIFIED)
AC ELECTRICAL CHARACTERISTICS (SEE FIGURE 5)
TERMINAL SIDE TIMING PARAMETERS (SEE FIGURE 6 AND FIGURE 7) -- {(n) = 0, 1, 2 OR 3 }
 SYMBOL                                 PARAMETER                              MIN.         TYP.       MAX.       UNITS
              TxClk_(n) Clock Duty Cycle (STS-1/DS3)                             30          50         70          %
              TxClk_(n) Clock Duty Cycle (E3)                                    30          50         70          %
              TxClk_(n) Frequency (SONET STS-1)                                            51.84                   MHz
              TxClk_(n) Frequency (DS3)                                                   44.736                   MHz
              TxClk_(n) Frequency (E3)                                                    34.368                   MHz
    tRTX      TxClk_(n) Clock Rise Time (10% to 90%)                                          3          5          ns
    tFTX      TxClk_(n) Clock Fall Time (90% to 10%)                                          3          5          ns
    tTSU      TPData_(n)/TNData_(n) to TxClk_(n) Falling Set up time              3         1.5                     ns
    tTHO      TPData_(n)/TNData_(n) to TxClk_(n) Falling Hold time                3         1.5                     ns
   tLCVO      RxClk_(n) to rising edge of LCV_(n) output delay                              2.5                     ns
    tTDY      TTIP_(n)/TRing_(n) to TxClk_(n) Rising Propagation Delay time                   8                     ns
              RxClk_(n) Clock Duty Cycle                                                     50                     %
              RxClk_(n) Frequency (SONET STS-1)                                            51.84                   MHz
              RxClk_(n) Frequency (DS3)                                                   44.736                   MHz
              RxClk_(n) Frequency (E3)                                                    34.368                   MHz
     tCO      RxClk_(n) to RPOS_(n)/RNEG_(n) Delay Time                           0         2.5                     ns
    tRRX      RxClk_(n) Clock Rise Time (10% to 90%)                                        1.5                     ns
    tFRX      RxClk_(n) Clock Fall Time (10% to 90%)                                        1.5                     ns
      CI      Input Capacitance                                                                         10          pF
     CL       Load Capacitance                                                                          10          pF
NOTES:                                                             2. All XRT73L04B digital outputs are also TTL 5V
      1. All XRT73L04B digital inputs are designed to be              compliant. However, these outputs will not drive to
         TTL 5V compliant.                                            5V nor will they accept external 5V pull-ups.
                                                             16


                                                                                      XRT73L04B
                                                       4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                           REV. 1.0.1
FIGURE 5. TRANSMIT PULSE AMPLITUDE TEST CIRCUIT FOR E3, DS3 AND STS-1 RATES (TYPICAL CHANNEL)
                                                   TTIP_(n)
                                                               R1
                                          Channel (n)        31.6Ω
                                             Channel (n)
              TxPOS_(n)                TPData_(n)                                  R3
              TxNEG_(n)                TNData_(n)                                 75Ω
           TxLineClk_(n)               TxClk_(n)
                                                                            1:1
                                                                R2
                                                              31.6Ω
                                                  TRing_(n)
                                    Only One Channel Shown
     FIGURE 6. TIMING DIAGRAM OF THE TRANSMIT TERMINAL INPUT INTERFACE
                               tRTX           tFTX
                 TClk
                                         tTSU                  tTHO
           TPDATA or
            TNDATA
            TTIP or           tTDY
            TRING
    FIGURE 7. TIMING DIAGRAM OF THE RECEIVE TERMINAL OUTPUT INTERFACE
                                tRRX           tFRX
                  RClk
                                  tLCVO
                 LCV
                            tCO
            RPOS or
             RNEG
                                                      17


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
ELECTRICAL CHARACTERISTICS (CONTINUED), (TA = 25°C, VDD = 3.3V + 5%, UNLESS OTHERWISE SPECIFIED)
LINE SIDE PARAMETERS E3 APPLICATION
TRANSMIT CHARACTERISTICS (SEE FIGURE 5)
 SYMBOL                                   PARAMETER                  MIN.   TYP.    MAX       UNITS
           Transmit Output Pulse Amplitude                           0.90   1.00    1.10       Vpk
           (Measured at Secondary Output of Transformer)
           Transmit Output Pulse Amplitude Ratio                     0.95   1.00    1.05
           Transmit Output Pulse Width                               12.5  14.55    16.5        ns
           Transmit Output Pulse Width Ratio                         0.95   1.00    1.05
           Transmit Output Jitter with jitter-free input @ TxClk_(n)        0.02    0.05      UIpp
 Receive Line Characteristics
           Receive Sensitivity (Length of cable)                     1200   1400               feet
           Interference Margin                                        -20    -15                dB
           Signal Level to Declare Loss of Signal                                    -35        dB
           Signal Level to Clear Loss of Signal                       -15                       dB
           Occurrence of LOS to LOS Declaration Time                  10             255        UI
           Termination of LOS to LOS Clearance Time                   10             255        UI
           Intrinsic Jitter (all “1’s” pattern)                             0.02                UI
           Jitter Tolerance @ Jitter Frequency = 100Hz                64                        UI
           Jitter Tolerance @ Jitter Frequency = 1kHz                 30                        UI
           Jitter Tolerance @ Jitter Frequency = 10kHz                 4                        UI
           Jitter Tolerance @ Jitter Frequency = 800kHz              0.15   0.20                UI
                                                             18


                                                                                               XRT73L04B
                                                               4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                     REV. 1.0.1
ELECTRICAL CHARACTERISTICS (CONTINUED), (TA = 25°C, VDD = 3.3V + 5%, UNLESS OTHERWISE SPECIFIED)
LINE SIDE PARAMETERS SONET STS-1 APPLICATION
TRANSMIT CHARACTERISTICS (SEE FIGURE 5)
 SYMBOL                                         PARAMETER                          MIN.   TYP.  MAX    UNITS
           Transmit Output Pulse Amplitude (Measured with TxLEV=0)                 0.65   0.75  0.90    Vpk
           Transmit Output Pulse Amplitude (Measured with TxLEV=1)                 0.90   1.00  1.10    Vpk
           Transmit Output Pulse Width                                              8.6   9.65  10.6     ns
           Transmit Output Pulse Amplitude Ratio                                   0.90   1.00  1.10
           Transmit Output Jitter with jitter-free input @ TxClk_(n)                      0.02  0.05     UI
 Receive Line Characteristics
           Receive Sensitivity (Length of cable)                                   900   1100           feet
           Signal Level to Declare or Clear Loss of Signal (See Table 5 )                               mV
           Intrinsic Jitter (all “1’s” pattern)                                           0.02           UI
           Jitter Tolerance @ Jitter Frequency = 100Hz                              64                   UI
           Jitter Tolerance @ Jitter Frequency = 1kHz                               64                   UI
           Jitter Tolerance @ Jitter Frequency = 10kHz                               5                   UI
           Jitter Tolerance @ Jitter Frequency = 400kHz                            0.15   0.35           UI
                                                             19


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
ELECTRICAL CHARACTERISTICS (CONTINUED), (TA = 25°C, VDD = 3.3V + 5%, UNLESS OTHERWISE SPECIFIED)
LINE SIDE PARAMETERS DS3 APPLICATION
TRANSMIT CHARACTERISTICS (SEE FIGURE 5)
 SYMBOL                                         PARAMETER                  MIN.  TYP.   MAX   UNITS
           Transmit Output Pulse Amplitude (Measured at 0 feet, TxLEV=0)  0.65  0.75   0.85    Vpk
           Transmit Output Pulse Amplitude (Measured at 0 feet, TxLEV=1)  0.90  1.00   1.10    Vpk
           Transmit Output Pulse Width                                    10.10 11.18  12.28     ns
           Transmit Output Pulse Amplitude Ratio                           0.90 1.00    1.10
           Transmit Output Jitter with jitter-free input @ TxClk_(n)            0.02   0.05      UI
 Receive Line Characteristics
           Receive Sensitivity (Length of cable)                           900  1100           feet
           Signal Level to Declare or Clear Loss of Signal (See Table 5 )                      mV
           Intrinsic Jitter (all “1’s” pattern)                                  0.02            UI
           Jitter Tolerance @ Jitter Frequency = 100Hz                      64                   UI
           Jitter Tolerance @ Jitter Frequency = 1kHz                       64                   UI
           Jitter Tolerance @ Jitter Frequency = 10kHz                       5                   UI
           Jitter Tolerance @ Jitter Frequency = 300kHz (Cat II)           0.35 0.45             UI
                                                             20


                                                                                                                                                                                              XRT73L04B
                                                                                                                                4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                                                                                                      REV. 1.0.1
Figure 8, Figure 9 and Figure 10 present the Pulse
Template requirements for the E3, DS3 and STS-1
Rates.
FIGURE 8. ITU-T G.703 TRANSMIT OUTPUT PULSE TEMPLATE FOR E3 APPLICATIONS
                                                                                                                       17 ns
                                                                                                                   (14.55 + 2.45)
                                                                                                                     8.65 ns
                                      V = 100%
                                                                                                                                                               Nominal Pulse
                                      50%
                                                                                                                      14.55ns
                                                                                                                       12.1ns
                                                            10%                                                     (14.55 - 2.45)
                                           0%
                                                                       10%
                                                                                                          20%
FIGURE 9. BELLCORE GR-499-CORE TRANSMIT OUTPUT PULSE TEMPLATE FOR DS3 APPLICATIONS
                                                                                                           DS3 Pulse Template
                                    1.2
                                      1
                                    0.8
             Normalized Amplitude
                                    0.6
                                                                                                                                                                                        Lower Curve
                                                                                                                                                                                        Upper Curve
                                    0.4
                                    0.2
                                      0
                                    -0.2
                                     -1    -09    -08    -07    -06    -05    -04    -03    -02    -01    0   0.1     2
                                                                                                                     0.   0.3   0.4   5
                                                                                                                                      0.   6
                                                                                                                                           0.   7
                                                                                                                                                0.   8
                                                                                                                                                     0.   9
                                                                                                                                                          0.    1   1
                                                                                                                                                                    1.   2
                                                                                                                                                                         1.    3
                                                                                                                                                                              1.   4
                                                                                                                                                                                   1.
                                              .      .      .      .      .      .      .      .      .
                                                                                                                    Time, in UI
                                                                                                                               21


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
FIGURE 10. BELLCORE GR-253-CORE TRANSMIT OUTPUT PULSE TEMPLATE FOR SONET STS-1 APPLICATIONS
                                                                                                               STS-1 Pulse Template
                                     1.2
                                       1
                                     0.8
              Normalized Amplitude
                                     0.6
                                                                                                                                                                                                                 Lower Curve
                                                                                                                                                                                                                 Upper Curve
                                     0.4
                                     0.2
                                       0
                                     -0.2
                                      -1    -0.9   -0.8   -0.7   -0.6   -0.5   -0.4   -0.3   -0.2   -0.1
                                                                                                               0   0.1    0.2   0.3   0.4   0.5       0.6   0.7   0.8   0.9
                                                                                                                                                                               1   1.1   1.2   1.3   1.4
                                                                                                                         Time, in UI
     FIGURE 11. MICROPROCESSOR SERIAL INTERFACE DATA STRUCTURE
                CS
             SClk                                                1        2           3        4           5        6           7      8          9         10      11        12    13         14     15    16
              SDI                                          R/W          A0       A1          A2       A3           A4       0         A6    D0          D1        D2      D3       D4      D5        D6    D7
                                                                             High Z                                                                                                                               High Z
             SDO                                                                                                                            D0          D1        D2      D3       D4      0         0     0
NOTES:                                                                                                                                                3. R/W = "0" for "Write" Operations
    1. A5 is always "0".                                                                                                                              4. A shaded pulse, denotes a “don’t care” value.
    2. R/W = "1" for "Read" Operations
                                                                                                                                    22


                                                                                         XRT73L04B
                                                      4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                             REV. 1.0.1
ELECTRICAL CHARACTERISTICS (CONTINUED), (TA = 25°C, VDD = 3.3V + 5%, UNLESS OTHERWISE SPECIFIED)
MICROPROCESSOR SERIAL INTERFACE TIMING (SEE FIGURE 12)
 SYMBOL                                 PARAMETER                   MIN.     TYP.       MAX   UNITS
   t21     CS Low to Rising Edge of SClk Setup Time                  5                         ns
   t22     CS High to Rising Edge of SClk Hold Time                  5                         ns
   t23     SDI to Rising Edge of SClk Setup Time                     5                         ns
   t24     SDI to Rising Edge of SClk Hold Time                      5                         ns
   t25     SClk "Low" Time                                          65        80               ns
   t26     SClk "High" Time                                         65        80               ns
   t27     SClk Period                                              160                        ns
   t28     CS Low to Rising Edge of SClk Hold Time                   5                         ns
   t29     CS "Inactive" Time                                       160                        ns
   t30     Falling Edge of SClk to SDO Valid Time                                        80    ns
   t31     Falling Edge of SClk to SDO Invalid Time                                     65     ns
   t32     Rising edge of CS to High Z                                       100               ns
   t33     Rise/Fall time of SDO Output                                                  20    ns
NOTE: The load is 10pF
   FIGURE 12. TIMING DIAGRAM FOR THE MICROPROCESSOR SERIAL INTERFACE
                                                                                t29
        CS                     t21
                                                          t27            t28
                   t22
       SCLK                                           t25
                                                                t26
                       t23       t24
        SDI                   R/W                 A0            A1
        CS
       SCLK
                  t30                   t31                 t33                     t32
        SDO                   D0                  D1            D2           D7
                Hi-Z
                                    Hi-Z
        SDI
                                                     23


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
SYSTEM DESCRIPTION                                                   a. Operating in the Hardware Mode
A functional block diagram of the XRT73L04B E3/                     When the XRT73L04B is operating in the Hardware
DS3/STS-1 Transceiver IC is presented in Figure 13.                 Mode, then the following is true:
The XRT73L04B contains four separate channels                        1. The Microprocessor Serial Interface block is dis-
with three distinct sections:                                             abled.
• The Transmit Section - Channels 0, 1, 2, and 3                     2. The XRT73L04B is configured via input pin set-
• The Receive Section - Channels 0, 1, 2, and 3                           tings.
• The Microprocessor Serial Interface Section                       The XRT73L04B can be configured to operate in the
                                                                    Hardware Mode by tying the HOST/(HW) input pin to
THE TRANSMIT SECTION - CHANNELS 0, 1, 2,                            GND.
AND 3
                                                                    Each of the pins associated with the Microprocessor
The Transmit Section, within each Channel, accepts
                                                                    Serial Interface takes on their alternative role as de-
TTL/CMOS level signals from the Terminal Equip-
                                                                    fined inTable 1.
ment in either a Single-Rail or Dual-Rail format. The
Transmit Section then takes this data and does the                         TABLE 1: ROLE OF MICROPROCESSOR SERIAL
following:                                                           INTERFACE PINS WHEN THE XRT73L04B IS OPERATING
                                                                                      IN THE HARDWARE MODE
• Encode this data into the B3ZS format if the DS3 or
   SONET STS-1 Modes has been selected or into                                                        FUNCTION, WHILE IN
   the HDB3 format if the E3 Mode has been selected.                  PIN #        PIN NAME
                                                                                                       HARDWARE MODE
• Convert the CMOS level B3ZS or HDB3 encoded
                                                                       69         CS/(SR/DR)               (SR/DR)
   data into pulses with shapes that are compliant with
   the various industry standard pulse template                         70       SClk/(RxOFF)               RxOFF
   requirements.
                                                                        71        SDI/(E3_1)                 E3_1
• Drive these pulses onto the line via the TTIP_(n)
   and TRing_(n) output pins across a 1:1 Trans-                        72        SDO/(E3_0)                 E3_0
   former.
                                                                       110     REGR/(RxClkINV)            RxClkINV
NOTE: The Transmit Section drives a "1" (or a Mark) onto
the line by driving either a positive or negative polarity pulse    When the XRT73L04B is operating in the Hardware
across the 1:1 Transformer within a given bit period. The
                                                                    Mode, all of the remaining input pins become active.
Transmit Section drives a "0" (or a Space) onto the line by
driving no pulse onto the line.                                     b. Operating in the HOST Mode
THE RECEIVE SECTION - CHANNELS 0, 1, 2 AND                          The XRT73L04B can be configured to operate in the
3                                                                   HOST Mode by tying the HOST/(HW) input pin to
The Receive Section, within each Channel, receives                  VDD.
a bipolar signal from the line via the RTIP and RRing               When the XRT73L04B is operating in the HOST
signals through a 1:1 Transformer or 0.01µF Capaci-                 Mode, then the following is true.
tor.                                                                 1. The Microprocessor Serial Interface block is
The recovered clock and data outputs to the Local                         enabled. Writing the appropriate data into the on-
Terminal Equipment in the form of CMOS level sig-                         chip Command Registers makes many configura-
nals via the RPOS_(n), RNEG_(n) and RxClk_(n)                             tion selections.
output pins.                                                         2. All of the following input pins are disabled and
                                                                          should be connected to ground:
THE MICROPROCESSOR SERIAL INTERFACE
The XRT73L04B can be configured to operate in ei-                      • Pins 43, 44, 137 & 138 - TxLEV_(n)
ther the Hardware Mode or the HOST Mode.                               • Pins 45, 46, 135 & 136 TAOS_(n)
The XRT73L04B contains four identical channels.                        • Pin 82, 90, 91 & 99 - REQEN_(n)
The Microprocessor Interface Inputs are common to                      • Pin 77, 85, 96 & 104 - RLB_(n)
all channels. The descriptions that follow refer to                    • Pin 76, 84, 97 & 105 - LLB_(n)
Channel(n) where (n) represents channel 0, 1, 2 or 3.
                                                                       • Pin 107 & 108 - E3_(n)
                                                                       • Pin 73, 83, 98 &106 - STS-1/DS3_(n)
                                                                 24


                                                                                                                               XRT73L04B
                                                                                     4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                                        REV. 1.0.1
In HOST Mode Operation, the TxOFF input pins can                                       redundancy to quickly switch out a defective line card
be used to turn on or turn off the Transmit Output                                     and switch-in the back-up line card.
Drivers within all Channels concurrently. The intent
behind this feature is to permit a system designed for
FIGURE 13. FUNCTIONAL BLOCK DIAGRAM OF THE XRT73L04B
                       E3_(n)         STS-1/DS3_(n)          Host/(HW)    RLOL_(n) EXClk_(n)       RxOFF       RxClkINV
         RTIP_(n)               AGC/                                            Clock
                                                             Slicer                                              Invert            RxClk_(n)
       RRing_(n)             Equalizer                                         Recovery
      REQEN_(n)                                 Peak                                            Data                               RPOS_(n)
                                                                                                                  HDB3/
                                              Detector                                        Recovery             B3ZS            RNEG_(n)/
                                                                                                                 Decoder
                                                                  LOS Detector                                                     (LCV_(n))
        LOSTHR
             SDI
            SDO                 Serial                                                                                             RLOS_(n)
            SClk            Processor                                                                                              LLB_(n)
                              Interface                  Loop MUX
      CS/(SR/DR)                                                                                                                   RLB_(n)
           REGR
                                                                                                                                   TAOS_(n)
        TTIP_(n)                                                         HDB3/            Transmit                                 TPData_(n)
                                                       Pulse              B3ZS             Logic                                   TNData_(n)
                                                     Shaping            Encoder                          Duty Cycle Adjust         TxClk_(n)
       TRing_(n)
        MTIP_(n)                                        Tx                                                                         TxLEV_(n)
                                  Device             Control                                                                       TxOFF
       MRing_(n)                  Monitor
                                                                                         Channel 0
        DMO_(n)
                                                                                                 Channel 1
                                                                                                         Channel 2
                                                                                                                  Channel 3
           Notes: 1. (n) = 0, 1, 2 , or 3 for respective Channels
                 2. Serial Processor Interface input pins are shared by the four Channels in HOST Mode and redefined in
                      Hardware Mode.
 1.0 SELECTING THE DATA RATE                                                            1.1 CONFIGURING CHANNEL(n)
Each channel within the XRT73L04B can be config-                                       For the following disscussion the reader should refer
ured to support the E3 (34.368 Mbps), DS3 (44.736                                      toTable 2 to determine the appropriate Address for
Mbps) or the SONET STS-1 (51.84 Mbps) rates. Fur-                                      each command register of each channel in the
ther, each channel can be configured to operate in a                                   XRT73L04B. The command register description re-
mode/data rate that is independent of the other chan-                                  fers to CR(x)-(n), where (x) = 0 to 7 and (n) refers to a
nels.                                                                                  particular channel of the XRT73L04B.
Two methods are available to select the data rate for
each channel of the XRT73L04B.
                                                                                  25


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
           TABLE 2: HEXADECIMAL ADDRESSES AND BIT FORMATS OF XRT73L04B COMMAND REGISTERS
                                                             REGISTER BIT-FORMAT
                COMMAND
  ADDRESS                      TYPE        D4            D3            D2           D1       D0
                REGISTER
                                               CHANNEL 0
     0x00          CR0-0        RO       RLOL_0        RLOS_0        ALOS_0      DLOS_0     DMO_0
     0x01          CR1-0        R/W      TxOFF_0       TAOS_0      TxClkINV_0    TxLEV_0   Reserved
     0x02          CR2-0        R/W      Reserved      Reserved    ALOSDIS_0    DLOSDIS_0  REQEN_0
     0x03          CR3-0        R/W     (SR/DR)_0     LOSMUT_0       RxOFF      RxClk_0INV Reserved
     0x04          CR4-0        R/W      Reserved    STS-1/DS3_0      E3_0        LLB_0     RLB_0
     0x05          CR5-0        R/W      Reserved      Reserved     Reserved     Reserved  Reserved
     0x06          CR6-0        R/W      Reserved      Reserved     Reserved     Reserved  Reserved
     0x07          CR7-0        R/W      Reserved      Reserved     Reserved     Reserved  Reserved
                                               CHANNEL 1
     0x08          CR0-1        RO       RLOL_1        RLOS_1        ALOS_1      DLOS_1     DMO_1
     0x09          CR1-1        R/W      TxOFF_1       TAOS_1      TxClkINV_1    TxLEV_1   Reserved
     0x0A          CR2-1        R/W      Reserved      Reserved    ALOSDIS_1    DLOSDIS_1  REQEN_1
     0x0B          CR3-1        R/W     (SR/DR)_1     LOSMUT_1       RxOFF      RxClk_1INV Reserved
     0x0C          CR4-1        R/W      Reserved    STS-1/DS3_1      E3_1        LLB_1     RLB_1
     0x0D          CR5-1        R/W      Reserved      Reserved     Reserved     Reserved  Reserved
     0x0E          CR6-1        R/W      Reserved      Reserved     Reserved     Reserved  Reserved
     0x0F          CR7-1        R/W      Reserved      Reserved     Reserved     Reserved  Reserved
                                               CHANNEL 2
     0x10          CR0-2        RO       RLOL_2        RLOS_2        ALOS_2      DLOS_2     DMO_2
     0x11          CR1-2        R/W      TxOFF_2       TAOS_2      TxClkINV_2    TxLEV_2   Reserved
     0x12          CR2-2        R/W      Reserved      Reserved    ALOSDIS_2    DLOSDIS_2  REQEN_2
     0x13          CR3-2        R/W     (SR/DR)_2     LOSMUT_2       RxOFF      RxClk_2INV Reserved
     0x14          CR4-2        R/W      Reserved    STS-1/DS3_2      E3_2        LLB_2     RLB_2
     0x15          CR5-2        R/W      Reserved      Reserved     Reserved     Reserved  Reserved
     0x16          CR6-2        R/W      Reserved      Reserved     Reserved     Reserved  Reserved
     0x17          CR7-2        R/W      Reserved      Reserved     Reserved     Reserved  Reserved
                                                  26


                                                                                                        XRT73L04B
                                                           4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                 REV. 1.0.1
           TABLE 2: HEXADECIMAL ADDRESSES AND BIT FORMATS OF XRT73L04B COMMAND REGISTERS
                                                                        REGISTER BIT-FORMAT
                COMMAND
  ADDRESS                         TYPE           D4                D3              D2              D1              D0
                REGISTER
                                                      CHANNEL3
      0x18         CR0-3           RO         RLOL_3            RLOS_3          ALOS_3         DLOS_3           DMO_3
      0x19         CR1-3           R/W        TxOFF_3           TAOS_3        TxClkINV_3      TxLEV_3          Reserved
      0x1A         CR2-3           R/W        Reserved         Reserved       ALOSDIS_3      DLOSDIS_3         REQEN_3
      0x1B         CR3-3           R/W       (SR/DR)_3        LOSMUT_3          RxOFF        RxClk_3INV        Reserved
      0x1C         CR4-3           R/W        Reserved       STS-1/DS3_3         E3_3           LLB_3            RLB_3
      0x1D         CR5-3           R/W        Reserved         Reserved        Reserved       Reserved         Reserved
      0x1E         CR6-3           R/W        Reserved         Reserved        Reserved       Reserved         Reserved
      0x1F         CR7-3           R/W        Reserved         Reserved        Reserved       Reserved         Reserved
Address:                                                    The default value for each of the bit-fields within these reg-
                                                            isters is "0".
The register addresses are presented in the Hexa-
decimal format.                                              a. Operating in the Hardware Mode.
Type:                                                       In order to configure individual Channels into the ap-
                                                            propriate mode, set the E3_(n), and the STS-1/
The Command Registers are either Read-Only (RO)             DS3_(n) input pins (where n = 0, 1, 2, or 3) to the ap-
type of registers or Read/Write (R/W) type of regis-        propriate logic states, as presented below inTable 3.
ters.
      TABLE 3: SELECTING THE DATA RATE FOR CHANNEL(n) VIA THE E3_(n) AND STS-1/DS3_(n) INPUT PINS
                                                (HARDWARE MODE)
                                                                                     MODE OF B3ZS/HDB3 ENCODER/
        DATA RATE           STATE OF E3_(n) PIN      STATE OF STS-1/DS3_(n) PIN
                                                                                            DECODER BLOCKS
 E3 (34.368 Mbps)                    1                      X (Don’t Care)                          HDB3
 DS3 (44.736 Mbps)                   0                             0                                B3ZS
 STS-1 (51.84 Mbps)                  0                             1                                B3ZS
b. Operating in the HOST Mode.                              Table 4 relates the values of these two bit-fields to the
To configure a Channel into the appropriate mode,           selected data rates.
write the appropriate values into the STS-1/DS3_(n)         TABLE 4: SELECTING THE DATA RATE FOR CHANNEL(n)
and E3_(n) bit-fields within the Command Register             VIA THE STS-1/DS3_(n) AND THE E3_(n) BIT-FIELDS
CR4-(n), as illustrated below (refer to Table 2 for the     WITHIN THE APPROPRIATE COMMAND REGISTER (HOST
correct address for each channel).                                                    MODE)
            COMMAND REGISTER, CR4-(n)                         SELECTED DATA       STS-1/DS3_(n)             E3_(n)
  D4            D3              D2       D1       D0                 RATE              (D3)                   (D2)
   X     STS-1/(DS3)_(n))     E3_(n)   LLB_(n) RLB_(n)                E3           X (Don’t Care)               1
   x             x               x        x        x                 DS3                 0                      0
                                                                    STS-1                1                      0
                                                         27


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
 2.0 THE TRANSMIT SECTION                                   2.1 THE TRANSMIT LOGIC BLOCK
Figure 13 indicates that the Transmit Section within       The purpose of the Transmit Logic Block is to accept
each Channel of the XRT73L04B consists of the fol-         either Dual-Rail or Single-Rail (e.g., a binary data
lowing blocks:                                             stream) TTL/CMOS level data and timing information
• Transmit Logic Block                                     from the Terminal Equipment.
• TxClk_(n) Duty Cycle Adjust Block                          2.1.1 Accepting Dual-Rail Data from the Termi-
                                                            nal Equipment
• HDB3/(B3ZS) Encoder
                                                           Whenever the XRT73L04B accepts Dual-Rail data
• Pulse Shaping Block
                                                           from the Terminal Equipment, it does so via the fol-
The purpose of the Transmit Section is to take TTL/        lowing input signals:
CMOS level data from the terminal equipment and
                                                           • TPData_(n)
encode it into a format such that it can:
                                                           • TNData_(n)
 1. Be efficiently transmitted over coaxial cable at
    E3, DS3, or STS-1 data rates.                          • TxClk_(n)
 2. Be reliably received by the Remote Terminal            Figure 14 illustrates the typical interface for the trans-
    Equipment at the other end of the E3, DS3, or          mission of data in a Dual-Rail Format between the
    STS-1 data link.                                       Terminal Equipment and the Transmit Section of the
 3. Comply with the applicable pulse template              XRT73L04B.
    requirements.
                     FIGURE 14. THE TYPICAL INTERFACE FOR THE TRANSMISSION OF DATA IN A DUAL-RAIL FOR-
                     MAT FROM THE TRANSMITTING TERMINAL EQUIPMENT TO THE TRANSMIT SECTION OF A CHANNEL
                                               TxPOS      TPData
                              Terminal         TxNEG      TNData       Transmit
                             Equipment                                  Logic
                          (E3/DS3 or STS-1                              Block
                                               TxLineClk TxClk
                               Framer)
                                                           Exar E3/DS3/STS-1 LIU
The manner that the LIU handles Dual-Rail data is          data on the TPData_(n) and TNData_(n) input pins
described below and illustrated in Figure 15. The          on the falling edge of TxClk_(n).
Transmit Section (of a Channel) typically samples the
    FIGURE 15. THE XRT73L04B SAMPLES THE DATA ON THE TPDATA AND TNDATA INPUT PINS
           Data                        1                     1                     0
       TPData
       TNData
          TxClk
                                                        28


                                                                                                        XRT73L04B
                                                          4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                               REV. 1.0.1
TxClk_(n) is the clock signal that is of the selected
data rate frequency, E3 = 34.368 MHz, DS3 = 44.736                        COMMAND REGISTER CR3-(n)
MHz and STS-1 = 51.84 MHz. If the Transmit Sec-                    D4            D3         D2         D1           D0
tion samples a "1" on the TPData_(n) input pin, then
the Transmit Section of the device generates a posi-          (SR/DR)_(n) LOSMUT_(n) RxOFF RxClk_(n)INV Reserved
tive polarity pulse via the TTIP_(n) and TRing_(n)
                                                                   1              x          x          x            x
output pins across a 1:1 transformer. If the Transmit
Section samples a "1" on the TNData_(n) input pin,          The Transmit Section (of each channel) samples this
then the Transmit Section of the device generates a         input pin on the falling edge of the TxClk_(n) clock
negative polarity pulse via the TTIP_(n) and                signal and encodes this data into the appropriate bi-
TRing_(n) output pins across a 1:1 transformer.             polar line signal across the TTIP_(n) and TRing_(n)
  2.1.2 Accepting Single-Rail Data from the Ter-            output pins.
 minal Equipment                                            NOTES:
To transmit data in a Single-Rail data from the Termi-            1. In this mode, the Transmit Logic Block ignores the
nal Equipment, configure the XRT73L04B in the                        TNData_(n) input pin.
HOST Mode.                                                        2. If the Transmit Section of a given channel is config-
                                                                     ured to accept Single-Rail data from the Terminal
To Configure Channel(n) to accept Single-Rail Da-                    Equipment, the B3ZS/HDB3 Encoder must be
ta from the Terminal Equipment:                                      enabled.
Write a "1" into the (SR/DR)_(n) bit-field, within Com-     Figure 16 Illustrates the behavior of the TPData_(n)
mand Register CR3-(n) shown below. (Please refer            and TxClk_(n) signals when the Transmit Logic Block
toTable 2 for the Address of the individual (n) chan-       has been configured to accept Single-Rail data from
nel.                                                        the Terminal Equipment.
     FIGURE 16. THE BEHAVIOR OF THE TPDATA AND TXCLK INPUT SGNALS, WHILE THE TRANSMIT LOGIC BLOCK IS
     ACCEPTING SINGLE-RAIL DATA FROM THE TERMINAL EQUIPMENT
            Data                        1                      1                       0
        TPData
           TxClk
 2.2 THE TRANSMIT CLOCK DUTY CYCLE ADJUST CIR-              The Transmit Clock Duty Cycle Adjust Circuitry ac-
        CUITRY                                              cepts clock pulses via the TxClk_(n) input pin at duty
The on-chip Pulse-Shaping circuitry within the Trans-       cycles ranging from 30% to 70% and converts them
mit Section of each Channel in the XRT73L04B gen-           to a 50% duty cycle.
erates pulses of the appropriate shapes and width to          2.3 THE HDB3/B3ZS ENCODER BLOCK
meet the applicable pulse template requirements.            The purpose of the HDB3/B3ZS Encoder Block is to
The widths of these output pulses are defined by the        aid in the Clock Recovery process at the Remote Ter-
width of the half-period pulses within the TxClk_(n)        minal Equipment by ensuring an upper limit on the
signal.                                                     number of consecutive zeros that can exist within the
However, if the widths of the pulses within the             line signal.
TxClk_(n) clock signal are allowed to vary significant-        2.3.1 B3ZS Encoding
ly, this could jeopardize the chip’s ability to generate
                                                            If the XRT73L04B has been configured to operate in
Transmit Output pulses of the appropriate width and
                                                            the DS3 or SONET STS-1 Modes, then the HDB3/
thereby not meet the Pulse Template requirement
                                                            B3ZS Encoder blocks operate in the B3ZS Mode.
specification. Consequently, the chip’s ability to gen-
                                                            When the Encoder is operating in this mode, it pars-
erate compliant pulses could depend upon the duty
                                                            es through and searches the Transmit Binary Data
cycle of the clock signal applied to the TxClk_(n) input
                                                            Stream from the Transmit Logic Block for the occur-
pin.
                                                         29


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
rence of three (3) consecutive zeros (e.g., "000"). If                                  "V" represents a Bipolar Violation (e.g., a bipolar
the B3ZS Encoder finds an occurrence of three con-                                      pulse that violates the Alternating Polarity require-
secutive zeros, then it substitutes these three "0’s",                                  ments of the AMI line code).
with either a "00V" or a "B0V" pattern.                                                 The B3ZS Encoder decides whether to substitute
Where:                                                                                  with either the “00V" or the "B0V" pattern in order to
"B" represents a Bipolar pulse that is compliant with                                   insure that an odd number of bipolar pulses exist be-
the Alternating Polarity requirements of the AMI (Al-                                   tween any two consecutive violation pulses.
ternate Mark Inversion) line code; and                                                  Figure 17 illustrates the B3ZS Encoder at work with
                                                                                        two separate strings of three (or more) consecutive
                                                                                        zeros
     FIGURE 17. AN EXAMPLE OF B3ZS ENCODING
             TClk
            TPOS
                        1   0   1   1   0    0     0    0   0   1    1   1 1  0   1   1   0   1   1   0    0   1   1    0     0     0     0    1    1     0    0   1    0    0
           SR data
         Encoded
                        1   0   0   1   0    0    1    0    0   0   1   0  1  0  0   1   0   0   1   0    0    0   1    0    0     0     0     1    0    0    0    1    0   0
          PDATA
         Encoded
                        0   0   1   0   0    0    0    0    0   1   0   1  0  0  1   0   0   1   0   0    0    1   0    1    0     1     0     0    1    0    0    0    0   0
          NDATA
                                         0    0    V
        Line signal
                                                                                                                         B     0    V
  2.3.2 HDB3 Encoding                                                                   "0’s", with either a "000V" or a "B00V" pattern. The
If the XRT73L04B is configured to operate in the E3                                     HDB3 Encoder decides whether to substitute with ei-
Mode, then the HDB3/B3ZS Encoder blocks operate                                         ther the "000V" or the "B00V" pattern in order to in-
in the HDB3 Mode. When the Encoder is operating in                                      sure that an odd number of bipolar pulses exist be-
this mode, it parses through and searches the Trans-                                    tween any two consecutive violation pulses.
mit Data Stream from the Transmit Logic Block for the                                   Figure 18 illustrates the HDB3 Encoder at work with
occurrence of four (4) consecutive zeros (e.g.,                                         two separate strings of four (or more) consecutive ze-
"0000"). If the HDB3 Encoder finds an occurrence of                                     ros.
four consecutive zeros, then it substitutes these four
     FIGURE 18. AN EXAMPLE OF HDB3 ENCODING
                 TClk
                TPOS
                          1   0   1   1    0    0    0    0   0   1   1  1  1  0  1   1   0 1   1    0   0   1   1    0    0     0     0     1    1    0    0    1    0   0
               SR data
            Encoded
                          1   0   0   1   0    0    0    1   0   0   1  0  1  0  0   1   0  0   1   0   0    0   1   0     0     0    0     1    0    0    0    1    0   0
             PDATA
            Encoded
                          0   0   1   0   0    0    0    0   0   1   0  1  0  0  1   0   0  1   0   0   0    1   0   1     0     0    1     0    1    0    0    0    0   0
             NDATA
                                           0    0    0    V
            Line signal
                                                                                                                       B    0     0    V
  2.3.3 Disabling the HDB3/B3ZS Encoder                                                 The HBD3/B3ZS Encoder blocks within all channels
The XRT73L04B HDB3/B3ZS Encoder can be dis-                                             are disabled by setting the CS/(SR/DR) input pin to
abled by two methods.                                                                   "1".
 a. Operating in the Hardware Mode.                                                     NOTE: By executing this step the HDB3/B3ZS Encoder and
                                                                                        Decoder blocks in all channels of the XRT73L04B are glo-
                                                                                        bally disabled.
                                                                                    30


                                                                                                                                                                                         XRT73L04B
                                                                                                                                4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                                                                                                       REV. 1.0.1
a. Operating in the HOST Mode.                                                                                                     Disable the HDB3/B3ZS Encoder block within Chan-
When the XRT73L04B is operating in the HOST                                                                                        nel(n) by setting the (SR/DR)_(n) bit-field within Com-
Mode, then the HDB3/B3ZS Encoders within each                                                                                      mand Register (CR3-(n)) to "1" as illustrated below.
channel can be individually enabled or disabled.
                                                                                               COMMAND REGISTER CR3-(n)
          D4                                                                D3                                         D2                                       D1                                D0
     (SR/DR)_(n)                                                    LOSMUT_(n)                                        RxOFF                             RxClk_(n)INV                      Reserved
          1                                                                     X                                          X                                    X                                 X
NOTE: This method can only be used if the XRT73L04B is                                                                             uration of each channel to transmit an output pulse
operating in the HOST Mode.                                                                                                        which is compliant to either of the following pulse
If either of these methods are used to disable the                                                                                 template requirements when measured at the Digital
HDB3/B3ZS Encoder, then the LIU transmits the data                                                                                 Cross Connect System. Each of these Bellcore spec-
as received via the TPData_(n) and TNData_(n) input                                                                                ifications state that the cable length between the
pins.                                                                                                                              Transmit Output and the Digital Cross Connect sys-
 2.4 THE TRANSMIT PULSE SHAPING CIRCUITRY                                                                                          tem can range anywhere from 0 to 450 feet.
The Transmit Pulse Shaper Circuitry consists of a                                                                                  The Isolated DSX-3 Pulse Template Requirement per
Transmit Line Build-Out circuit which can be enabled                                                                               Bellcore GR-499-CORE is illustrated in Figure 19 and
or disabled by setting the TxLEV_(n) input pin or                                                                                  the Isolated STSX-1 Pulse Template Requirement
TxLEV_(n) bit-field to “High”or "Low". The purpose of                                                                              per Bellcore GR-253-CORE is illustrated in Figure 20.
the Transmit Line Build-Out circuit is to permit config-
    FIGURE 19. THE BELLCORE GR-499-CORE TRANSMIT OUTPUT PULSE TEMPLATE FOR DS3 APPLICATIONS
                                                                                                         D S3 Pu lse T em p late
                                      1.2
                                        1
                                      0.8
           Norm a lize d Am plitude
                                      0.6
                                                                                                                                                                                    Lower Curve
                                                                                                                                                                                    Upper Curve
                                      0.4
                                      0.2
                                        0
                                      -0.2
                                       -1     .9    .8    .7    .6    .5    .4      .3    .2    .1   0     1
                                                                                                          0.    0.2    3
                                                                                                                      0.   0.  4    5
                                                                                                                                   0.   6
                                                                                                                                        0.   7
                                                                                                                                             0.   8
                                                                                                                                                  0.    9
                                                                                                                                                       0.   1   1
                                                                                                                                                                1.    2
                                                                                                                                                                     1.   3
                                                                                                                                                                          1.   4
                                                                                                                                                                               1.
                                             -0    -0    -0    -0    -0    -0    -0      -0    -0
                                                                                                               Tim e , in UI
                                                                                                                           31


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
.
    FIGURE 20. THE BELLCORE GR-253-CORE TRANSMIT OUTPUT PULSE TEMPLATE FOR SONET STS-1 APPLI-
    CATIONS
                                                                                                               ST S-1 Pulse T emplate
                                        1.2
                                          1
                                        0.8
             Norm a lize d Am plitude
                                        0.6
                                                                                                                                                                                              Lower Curve
                                                                                                                                                                                              Upper Curve
                                        0.4
                                        0.2
                                          0
                                        -0.2
                                         -1      9      8      7      6      5        4     3      2      1    0   1
                                                                                                                   0.     2
                                                                                                                         0.    3
                                                                                                                              0.   0. 4    5
                                                                                                                                          0.   6
                                                                                                                                               0.   7
                                                                                                                                                    0.   8
                                                                                                                                                         0.   9
                                                                                                                                                              0.   1   1
                                                                                                                                                                       1.   1.  2   3
                                                                                                                                                                                    1.   4
                                                                                                                                                                                         1.
                                               -0 .   -0 .   -0 .   -0 .   -0 .   -0 .    -0 .   -0 .   -0 .
                                                                                                                        Time, in UI
  2.4.1 Enabling the Transmit Line Build-Out Cir-                                                                                         Enable the Transmit Line Build-Out circuit for each
 cuit                                                                                                                                     channel by doing the following:
If the Transmit Line Build-Out Circuit is enabled, then                                                                                   a. Operating in the Hardware Mode
the Transmit Section of the Channel outputs shaped
                                                                                                                                          Set the TxLEV_(n) input pin to “Low".
pulses onto the line via the TTIP_(n) and TRing_(n)
output pins.                                                                                                                              b. Operating in the HOST Mode
                                                                                                                                          Set the TxLEV_(n) bit-field to "0", as illustrated below.
                                                                                                        COMMAND REGISTER, CR1-(n)
             D4                                                              D3                                               D2                                        D1                             D0
      TxOFF_(n)                                                       TAOS_(n)                                      TxClkINV_(n)                                   TxLEV_(n)                      Reserved
                       0                                                          X                                            X                                            0                           X
  2.4.2 Disabling the Transmit Line Build-Out Cir-                                                                                        Disable the Transmit Line Build-Out circuit by doing
 cuit                                                                                                                                     the following:
If the Transmit Line Build-Out circuit is disabled, then                                                                                  a. Operating in the Hardware Mode
the XRT73L04B outputs partially shaped pulses onto
                                                                                                                                          Set the TxLEV_(n) input pin to “High".
the line via the TTIP_(n) and TRing_(n) output pins.
                                                                                                                                          b. Operating in the HOST Mode
                                                                                                                                          Set the TxLEV_(n) bit-field to "1" as illustrated below.
                                                                                                                                   32


                                                                                                            XRT73L04B
                                                               4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                    REV. 1.0.1
                                            COMMAND REGISTER, CR1-(n)
            D4                   D3                         D2                          D1                      D0
       TxOFF_(n)              TAOS_(n)                 TxClkINV_(n)                 TxLEV_(n)                Reserved
             0                    X                         X                            1                       X
  2.4.3 Design Guideline for Setting the Transmit                output pins. The cable loss that these pulses experience
 Line Build-Out Circuit                                          over long cable lengths (e.g., greater than 225 feet) cause
                                                                 these pulses to be properly shaped and comply with the
The TxLEV_(n) input pins or bit-fields should be set
                                                                 appropriate pulse template requirement.
based upon the overall cable length between the
Transmitting Terminal and the Digital Cross Connect                2.4.4 The Transmit Line Build-Out Circuit and
system where the pulse template measurements are                  E3 Applications
made.                                                            The ITU-T G.703 Pulse Template Requirements for
If the cable length between the Transmitting Ter-                E3 states that the E3 transmit output pulse should be
minal and the DSX-3 or STSX-1 is less than 225                   measured at the Secondary Side of the Transmit Out-
feet, enable the Transmit Line Build-Out circuit by              put Transformer for Pulse Template compliance. In
setting the TxLEV_(n) input pin or bit-field to "0".             other words, there is no Digital Cross Connect Sys-
                                                                 tem pulse template requirement for E3. Consequent-
NOTE: In this case, the configured channel outputs shaped
                                                                 ly, the Transmit Line Build-Out circuit within a given
(e.g., not square-wave) pulses onto the line via its TTIP_(n)
                                                                 Channel is disabled whenever that channel has been
and TRing_(n) output pins. The shape of this output pulse
is such that it complies with the pulse template require-        configured to operate in the E3 Mode.
ments even when subjected to cable loss ranging from 0 to         2.5 INTERFACING THE TRANSMIT SECTIONS OF THE
225 feet.                                                               XRT73L04B TO THE LINE
If the cable length between the Transmitting Ter-                The E3, DS3 and SONET STS-1 specification docu-
minal and the DSX-3 or STSX-1 is greater than 225                ments all state that line signals transmitted over coax-
feet, disable the Transmit Line Build-Out circuit                ial cable are to be terminated with 75 Ohm resistor.
by setting the TxLEV_(n) input pin or bit-field to               Interface the Transmit Section of the XRT73L04B in
"1".                                                             the manner illustrated in Figure 21.
NOTE: In this case, the configured channel outputs partially
shaped pulses onto the line via the TTIP_(n) and TRing_(n)
         FIGURE 21. RECOMMENDED SCHEMATIC FOR INTERFACING THE TRANSMIT SECTION OF THE XRT73L04B TO
         THE LINE
                                                           TTIP_(n)
                                                                            R1
                                                                          31.6Ω                            J1
                                                   Channel (n)
                                                                                                          BNC
                   TxPOS_(n)                  TPData_(n)
                   TxNEG_(n)                  TNData_(n)
                TxLineClk_(n)                 TxClk_(n)
                                                                                                1:1
                                                                            R2
                                                                           31.6Ω
                                                          TRing_(n)
                                           Only One Channel Shown
                                                              33


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
                              TRANSFORMER RECOMMENDATIONS
                                  PARAMETER                       VALUE
                                  Turns Ratio                       1:1
                             Primary Inductance                   40µH
                               Isolation Voltage                1500Vrms
                             Leakage Inductance                   0.6µH
                PART NUMBER           VENDOR             INSULATION         PACKAGE TYPE
                  PE-68629             Pulse               3000V           Large Thru-Hole
                  PE-65966             Pulse               1500V           Small Thru-Hole
                  PE-65967             Pulse               1500V             Small SMT
                   T3001               Pulse               1500V             Small SMT
                TG01-0406NS             Halo               1500V             Small SMT
                TTI 7601-SM        Trans-Power             1500V             Small SMT
TRANSFORMER VENDOR INFORMATION
Pulse                                               Halo Electronics
Corporate Office                                    Corporate Office
12220 World Trade Drive                             P.O. Box 5826
San Diego, CA 92128                                 Redwood City, CA 94063
Tel: (858)-674-8100                                 Tel: (650)568-5800
FAX: (858)-674-8262                                 FAX: (650)568-6165
Europe                                              Email: info@haloelectronics.com
1 & 2 Huxley Road                                   Website: http://www.haloelectronics.com
The Surrey Research Park
Guildford, Surrey GU2 5RE                           Transpower Technologies, Inc.
United Kingdom                                      Corporate Office
Tel: 44-1483-401700                                 Park Center West Building
FAX: 44-1483-401701                                 9805 Double R Blvd, Suite # 100
Asia                                                Reno, NV 89511
150 Kampong Ampat                                   (800)500-5930 or (775)852-0140
#07-01/02                                           Email: info@trans-power.com
KA Centre                                           Website: http://www.trans-power.com
Singapore 368324
Tel: 65-287-8998
FAX: 65-280-0080
Website: http://www.pulseeng.com
                                                 34


                                                                                                  XRT73L04B
                                                          4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                          REV. 1.0.1
 3.0 THE RECEIVE SECTION                                   line and encode it back into the TTL/CMOS format
Figure 13 indicates the Receive Section consists of        where it can be received and processed by the Termi-
the following blocks:                                      nal Equipment.
• AGC/Equalizer                                              3.1 INTERFACING THE RECEIVE SECTIONS OF THE
• Peak Detector                                                    XRT73L04B TO THE LINE
                                                           The design of the Receive Circuitry should be trans-
• Slicer
                                                           former-coupled to the Receive Section to the line.
• Clock Recovery PLL                                       The specification documents for E3, DS3, and STS-1
• Data Recovery                                            all specify 75 Ohm termination loads when transmit-
• HDB3/B3ZS Decoder                                        ting over coaxial cable. The recommended method to
                                                           interface the Receive Section to the line in a manner
The purpose of the Receive Section is to take an in-
                                                           is shown in Figure 22.
coming attenuated/distorted bipolar signal from the
             FIGURE 22. RECOMMENDED SCHEMATIC FOR INTERFACING THE RECEIVE SECTION OF THE
             XRT73L04B TO THE LINE (TRANSFORMER-COUPLING)
                                               RTIP_(n)
                                                                                             J1
                                         Channel (n)           R1                    T1     BNC
                                                              37.4Ω
                 RxPOS_(n)                                                C1
                                      RPOS_(n)                          0.01uf
                 RxNEG_(n)            RNEG_(n)
                  RxClk_(n)           RxClk_(n)
                                                               R2                    1:1
                                                              37.4Ω
                                              RRing_(n)
                                   Only One Channel Shown
                                                       35


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
  3.2 THE RECEIVE EQUALIZER BLOCK                             Equalizer attempts to restore the shape of the line
The purpose of this block is to equalize the incoming         signal so that the transmitted data and clock can be
distorted signal due to cable loss. The Receive               recovered reliably.
                                                              .
FIGURE 23. THE TYPICAL APPLICATION FOR THE SYSTEM INSTALLER
                                                                          Pulses that are
                                                                          compliant to the
                                                                          Isolated DSX-3 or
                                              Digital Cross-Connect       STSX-1 Pulse Template
                                                      System              Requirement
           Transmitting
             Terminal
                                                       DSX-3
                          0 to 450 feet of
                               Cable                     or
                                                      STSX-1
                                                                            0 to 450 feet of Cable
                                                                                                  Receiving
                                                                                                   Terminal
  3.2.1    Guidelines for Setting the Receive Equal-          Equalizer by setting either the REQEN_(n) input pin
 izer                                                         “high” or the REQEN_(n) bit-field to “1”. The remain-
This data sheet presents guidelines for setting the           der of this section provides an explanation why we
Receive Equalizer, for the following conditions.              recommend enabling the Receive Equalizer for these
                                                              applications.
 1. If the overall cable length, from the local Receiv-
                                                                 3.2.1.1.1 The Use of the Receive Equalizer in a
     ing Terminal to the Remote Transmitting Terminal
                                                                Typical DS3 or STS-1 Application
     is NOT known.
 2. If the overall cable length, from the Local Receiv-       Most System Manufacturers of equipment supporting
     ing Terminal to the remote Transmitting Terminal         DS3 and STS-1 lines, interface their equipment to ei-
     is known.                                                ther a DSX-3 or STSX-1 Cross-Connect. While in-
  3.2.1.1 If the Overall Cable Length is NOT                  stalling their equipment the Transmit Line Build-Out
 Known                                                        circuit is set to the proper setting that makes the
                                                              transmit output pulse compliant with the Isolated
This section presents recommendations on what                 DSX-3 or STSX-1 Pulse Template requirements. For
state to set the Receive Equalizer when the overall           the XRT73L04B, this is achieved by setting the
cable-length, from the local Receiving Terminal to the        TXLEV_(n) input pin or bit-field to the appropriate lev-
remote Transmitting Terminal is NOT known. For                el.
DS3, STS-1 and E3 applications, enable the Receive
                                                           36


                                                                                                          XRT73L04B
                                                         4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                 REV. 1.0.1
When the System Manufacturer is interfacing the Re-        In E3 System installation, it is recommended that the
ceive Section of the XRT73L04B to the Cross-Con-           Receive Equalizer of the XRT73L04B be enabled by
nect, they should be aware of the following facts:         pulling the REQEN_(n) input pins “High” or by setting
 1. All DS3 or STS-1 line signals that are present at      the REQEN_(n) bit-fields to “1”.
      either the DSX-3 or the STSX-1 Cross Connect         NOTE: The results of extensive testing indicates that when
      are required to meet the Isolated Pulse Template     the Receive Equalizer is enabled, the XRT73L04B is capa-
      Requirements per Bellcore GR-499-CORE for            ble of receiving an E3 line signal with anywhere from 0 to
      DS3 applications, or Bellcore GR-253-CORE for        12dB of cable loss over the Industrial Temperature range.
      STS-1 applications.                                  • Design Considerations for E3 Applications or if
 2. Bellcore documents state that the amplitude of            the Overall Cable Length is known
      these pulses at the DSX-3 or STSX-1 location         If during System Installation the overall cable length
      can range in amplitude from 360mVpk to               is known, then in order to optimize the performance
      850mVpk.                                             of the XRT73L04B in terms of receive intrinsic jitter,
Bellcore documents stipulate that the Receiving Ter-       etc., enable or disable the Receive Equalizer based
minal must be able to receive the pulse template           upon the following recommendations:
compliant line signal over a cable length of 0 to 450      The Receive Equalizer should be turned ON if the
feet from the DSX-3 or the STSX-1 Cross-Connect lo-        Receive Section of a given channel is going to re-
cation.                                                    ceive a line signal with an overall cable length of 300
These facts are reflected in Figure 23.                    feet or greater. Conversely, turn OFF the Receive
                                                           Equalizer if the Receive Section of a given channel is
Design Considerations for DS3 and STS-1 Appli-             going to receive a line signal over a cable length of
cations                                                    less than 300 feet.
When installing equipment into environments depict-        NOTES:
ed in Figure 23, the system installation personnel              1. If the Receive Equalizer block is turned ON when it
may be able to determine the cable length between                   is receiving a line signal over short cable length,
the local terminal equipment and the DSX-3/STSX-1                   the received line signal may be over-equalized
Cross-Connect Patch-Panel. The cable length be-                     which could degrade performance by increasing
tween the local terminal equipment and the DSX-3/                   the amount of jitter that exists in the recovered data
STSX-1 Cross-Connect Patch Panel ranges between                     and clock signals or by creating bit-errors
0 and 450 feet.                                                 2. The Receive Equalizer has been designed to
                                                                    counter the frequency-dependent cable loss that a
It is extremely unlikely that the system installation
                                                                    line signal experiences as it travels from the trans-
personnel will know the cable length between the
                                                                    mitting terminal to the receiving terminal. However,
DSX-3/STSX-1 Cross-Connect Patch-Panel and the                      the Receive Equalizer was not designed to counter
remote terminal equipment. Therefore, we recom-                     flat loss where all of the Fourier frequency compo-
mend that the Receive Equalizer be enabled by set-                  nents within the line signal are subject to the same
ting the REQEN_(n) input pin or bit-field to “1”.                   amount of attenuation. Flat loss is handled by the
The only time that the Receive Equalizer should be                  AGC block.
disabled is when there is an off-chip equilizer in the     Disable the Receive Equalizer block by doing either
Receive path between the DSX-3/STSX-1 Cross-               of the following.
Connect and the RTIP_(n)/RRING_(n) input pins, or           a. Operating in the Hardware Mode
in applications where the Receiver is directly monitor-
                                                           Setting the REQEN_(n) input pin “Low".
ing the transmit output signal directly.
                                                           b. Operating in the HOST Mode
  3.2.1.2     Design Considerations for E3 Applica-
 tions                                                     Writing a "0" to the REQEN_(n) bit-field within Com-
                                                           mand Register CR2, as illustrated below.
                                         COMMAND REGISTER CR-2(n)
            D4                      D3                    D2                       D1                         D0
         Reserved                Reserved             ALOSDIS_(n)             DLOSDIS_(n)                REQEN_(n)
             X                       X                     X                        X                          0
                                                        37


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
 3.3 CLOCK RECOVERY PLL                                       3.4 THE HDB3/B3ZS DECODER
The purpose of the Clock Recovery PLL is to track            The Remote Transmitting Terminal typically encodes
the incoming Dual-Rail data stream and to derive and         the line signal into some sort of Zero Suppression
generate a recovered clock signal.                           Line Code (e.g., HDB3 for E3, and B3ZS for DS3 and
It is important to note that the Clock Recovery PLL re-      STS-1). The purpose of this encoding activity was to
quires a line rate clock signal at the EXClk_(n) input       aid in the Clock Recovery process of this data within
pin.                                                         the Near-End Receiving Terminal. However, once the
                                                             data has made it across the E3, DS3 or STS-1 Trans-
The Clock Recovery PLL operates in one of two                port Medium and has been recovered by the Clock
modes:                                                       Recovery PLL, it is now necessary to restore the orig-
• The Training Mode.                                         inal content of the data. Hence, the purpose of the
• The Data/Clock Recovery Mode                               HDB3/B3ZS Decoding block is to restore the data
                                                             transmitted over the E3, DS3 or STS-1 line to its orig-
  3.3.1 The Training Mode
                                                             inal content prior to Zero Suppression Coding.
If a given channel is not receiving a line signal via the
RTIP and RRing input pins, or if the frequency differ-         3.4.1 B3ZS Decoding (DS3/STS-1 Applications)
ence between the line signal and that applied via the        If the XRT73L04B is configured to operate in the DS3
EXClk_(n) input pin exceeds 0.5%, then the channel           or STS-1 Modes, then the HDB3/B3ZS Decoding
operates in the Training Mode. When the channel is           Blocks performs B3ZS Decoding. When the Decod-
operating in the Training Mode, it does the following:       ers are operating in this mode, each of the Decoders
                                                             parses through its respective incoming Dual-Rail data
 a. Declare a Loss of Lock indication by toggling its        and checks for the occurrence of either a “00V" or a
      respective RLOL_(n) output pin “High".                 "B0V" pattern. If the B3ZS Decoder detects this par-
b. Output a clock signal via the RxClk_(n) output            ticular pattern, then it substitutes these bits with a
      pins which is derived from the signal applied to       "000" pattern.
      the EXClk_(n) input pin.                               NOTE: If the B3ZS Decoder detects any bipolar violations
  3.3.2 The Data/Clock Recovery Mode                         that is not in accordance with the B3ZS Line Code format,
If the frequency difference between the line signal          or if the B3ZS Decoder detects a string of 3 (or more) con-
                                                             secutive "0’s” in the incoming line signal, then the B3ZS
and that applied via the EXClk_(n) input pin is less
                                                             Decoder flags this event as a Line Code Violation by puls-
than 0.5%, then the channel operates in the Data/
                                                             ing the LCV output pin “High".
Clock Recovery mode. In this mode, the Clock Re-
                                                             Figure 24 illustrates the B3ZS Decoder at work with
covery PLL locks onto the line signal via the RTIP
                                                             two separate Zero Suppression patterns in the in-
and RRing input pins.
                                                             coming Dual-Rail Data Stream.
  FIGURE 24. AN EXAMPLE OF B3ZS DECODING
                                  0 0 V
          Line Signal
                                                                                                   B 0 V
             RCLK
             RPOS
             RNEG
              Data    0 1 0 1 1 0 0 0 1 0 1 1 1 1 0 1 1 0 1 1 0 0 1 1 1                               0 0 0 1
  3.4.2 HDB3 Decoding (E3 Applications)                      operating in this mode, they each parse through the
If the XRT73L04B is configured to operate in the E3          incoming Dual-Rail data and check for the occurrence
Mode, then each of the HDB3/B3ZS Decoding Blocks             of either a "000V" or a "B00V" pattern. If the HDB3
performs HDB3 Decoding. When the Decoders are
                                                          38


                                                                                                         XRT73L04B
                                                               4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                  REV. 1.0.1
Decoder detects this particular pattern, then it substi-         Figure 25 illustrates the HDB3 Decoder at work with
tutes these bits with a “0000" pattern.                          two separate Zero Suppression patterns, in the in-
                                                                 coming Dual-Rail Data Stream.
   FIGURE 25. AN EXAMPLE OF HDB3 DECODING
                                     0 0 0 V
          Line Signal
                                                                                               B 0 0 V
              RCLK
              RPOS
             RNEG
                Data    0   1 0 1 1 0 0 0 0 0 1 1 1 1 0 1 1 0 1 1 0 0 1 1 0 0 0 0 1
NOTE: If the HDB3 Decoder detects any bipolar violation          The XRT73L04B can enable or disable the HDB3/
(e.g., "V") pulses that is not in accordance with the HDB3       B3ZS Decoder blocks by either of the following
Line Code format, or if the HDB3 Decoder detects a string        means.
of 4 (or more) "0’s" in the incoming line signal, then the
HDB3 Decoder flags this event as a Line Code Violation by         a. Operating in the HOST Mode
pulsing the LCV output pin “High".                               Enable the HDB3/B3ZS Decoder block of Channel(n)
  3.4.3    Configuring the HDB3/B3ZS Decoder                     by writing a "0" into the (SR/DR)_(n) bit-field within
                                                                 Command Register CR3-(n), as illustrated below.
                                             COMMAND REGISTER CR3-(n)
            D4                        D3                    D2                       D1                       D0
       (SR/DR)_(n)               LOSMUT_(n)                RxOFF                RxClk_(n)INV              Reserved
             0                         X                     X                        X                        X
b. Operating in the Hardware Mode                                declares a Loss of Signal (LOS) condition. The chan-
To globally enable all HDB3/B3ZS Decoder blocks,                 nel declares the LOS condition by toggling its respec-
pull the CS/(SR/DR)_(n) input pin "Low". To globally             tive RLOS_(n) output pin “High" and by setting its cor-
disable all HDB3/B3ZS Decoder blocks and configure               responding RLOS_(n) bit field within Command Reg-
the device to transmit and receive in an AMI format              ister 0 (or Command Register 8) to "1".
by pulling the CS/(SR/DR)_(n) input pin "High".                  Conversely, if the channel determines that the incom-
  3.5 LOS DECLARATION/CLEARANCE                                  ing line signal has been restored (e.g., there is suffi-
                                                                 cient amplitude and pulses in the incoming line sig-
Each channel contains circuitry that monitors the fol-
                                                                 nal), then it clears the LOS condition by toggling its
lowing two parameters associated with the incoming
                                                                 respective RLOS_(n) output pin “Low" and setting its
line signals.
                                                                 corresponding RLOS_(n) bit-field to "0".
 1. The amplitude of the incoming line signal via the
                                                                 In general, the LOS Declaration/Clearance scheme
     RTIP and RRing inputs.
                                                                 that is employed in the XRT73L04B is based upon
 2. The number of pulses detected in the incoming                ITU-T Recommendation G.775 for both E3 and DS3
     line signal within a certain amount of time.                applications.
If a given channel determines that the incoming line
                                                                   3.5.1 The LOS Declaration/Clearance Criteria
signal is missing either due to insufficient amplitude
                                                                  for E3 Applications
or a lack of pulses in the incoming line signal, then it
                                                              39


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
When the XRT73L04B is operating in the E3 Mode, a         receive line signal amplitude rises back to -15dB or
given channel declares an LOS Condition if its re-        above. Figure 26 illustrates the signal levels at which
ceive line signal amplitude drops to -35dB or below.      each channel of the XRT73L04B declares and clears
Further, the channel clears the LOS Condition if its      LOS.
     FIGURE 26. THE SIGNAL LEVELS THAT THE XRT73L04B DECLARES AND CLEARS LOS
                0 dB
                                                                         Maximum Cable Loss for E3
                                    LOS Signal Must be Cleared
                -12 dB
                 -15dB
                                     LOS Signal may be Cleared or Declared
                -35dB
                                      LOS Signal Must be Declared
Timing Requirements associated with Declaring             bit-periods) after the actual time the LOS condition
and Clearing the LOS Indicator                            occurred. Further, the channel clears the LOS indica-
The XRT73L04B was designed to meet the ITU-T              tor within 10 to 255 UI after restoration of the incom-
G.775 specification timing requirements for declaring     ing line signal. Figure 27 illustrates the LOS Declara-
and clearing the LOS indicator. In particular, a chan-    tion and Clearance behavior in response to the Loss
nel declares an LOS between 10 and 255 UI (or E3          of Signal event and then the restoration of the signal.
                                                       40


                                                                                                     XRT73L04B
                                                          4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                            REV. 1.0.1
FIGURE 27. THE BEHAVIOR OF THE LOS OUTPUT INDICATOR IN RESPONSE TO THE LOSS OF SIGNAL AND THE RES-
TORATION OF    SIGNAL
                                   Actual Occurrence                Line Signal
                                   of LOS Condition                 is Restored
     RTIP/
     RRing
                                                       Time Range for
                                  10 UI       255 UI                                        10 UI      255 UI
                                                       LOS Declaration
       RLOS Output Pin
                           0 UI                                                     0 UI
                                           G.775                             Time Range for            G.775
                                        Compliance                           LOS Clearance          Compliance
  3.5.2 The LOS Declaration/Clearance Criteria              1. The Analog LOS (ALOS) Declaration/Clearance
 for DS3 and STS-1 Applications                             Criteria
When the XRT73L04B is operating in the DS3 or               A channel declares an Analog LOS (ALOS_(n)) Con-
STS-1 Mode, then each channel declares and clears           dition if the amplitude of the incoming line signal
LOS based upon the following two criteria.                  drops below a specific amplitude as defined by the
   • Analog LOS (ALOS) Declaration/Clearance Crite-         voltage at the LOSTHR input pin, and whether the
     ria                                                    Receive Equalizer is enabled or not.
   • Digital LOS (DLOS) Declaration/Clearance Crite-        Table 5 presents the various voltage levels at the
     ria                                                    LOSTHR input pin, the state of the Receive Equalizer
In the DS3 Mode, the LOS output (RLOS) is simply            and the corresponding ALOS (Analog LOS) threshold
the logical "OR" of the ALOS and DLOS states.               amplitudes.
 TABLE 5: THE ALOS (ANALOG LOS) DECLARE AND CLEAR THRESHOLDS FOR A GIVEN SETTING OF LOSTHR AND
                                      REQEN (DS3 AND STS-1 APPLICATIONS)
                                                                          SIGNAL LEVEL TO      SGNAL LEVEL TO CLEAR
    APPLICATION        REQEN SETTING             LOSTHR SETTING
                                                                          DECLARE ALOS                ALOS
        DS3                     1                       1                      <22mV                  >90mV
                                0                       1                      <17mV                  <70mV
       STS-1                    1                       1                      <25mV                 >115mV
                                0                       1                      <20mV                  <90mV
Declaring ALOS                                              A channel(n) clears ALOS_(n) whenever the ampli-
A channel(n) declares ALOS_(n) whenever the ampli-          tude of the receive line signal increases above the
tude of the receive line signal falls below the Signal      Signal Level to Clear ALOS levels, as specified in
Level to Declare ALOS levels, as specified inTable 5.       Table 5.
Clearing ALOS_(n)                                           There is approximately a 2dB hysteresis in the re-
                                                            ceived signal level that exists between declaring and
                                                         41


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
clearing ALOS_(n) in order to prevent chattering in            If the XRT73L04B is operating in the HOST Mode,
the RLOS_(n) output signal.                                    the state of ALOS_(n) of Channel(n) can be polled or
Monitoring the State of ALOS_(n)                               monitored by reading in the contents of Command
                                                               Register CR0. .
                                            COMMAND REGISTER CR0-(n)
             D4                     D3                      D2                      D1                     D0
         RLOL_(n)                RLOS_(n)                 ALOS_(n)               DLOS_(n)              DMO_(n)
         Read Only              Read Only                Read Only               Read Only            Read Only
If the ALOS_(n) bit-field contains a "1", then the cor-        For debugging purposes, it may be useful to disable
responding Channel(n) is currently declaring an                the ALOS Detector. If the XRT73L04B is operating in
ALOS condition. Conversely, if the ALOS_(n) bit-field          the HOST Mode, disable the Channel(n) ALOS De-
contains a "0", then the channel is not currently de-          tector by writing a "1" into the ALOSDIS_(n) bit-field
claring an ALOS condition.                                     in Command Register CR2.
Disabling the ALOS Detector
                                            COMMAND REGISTER CR2-(n)
             D4                     D3                      D2                      D1                     D0
         Reserved                Reserved              ALOSDIS_(n)             DLOSDIS_(n)            REQEN_(n)
              X                      X                       1                       X                     X
2. The Digital LOS (DLOS) Declaration/Clearance
Criteria                                                                  COMMAND REGISTER CR0-(n)
A given channel(n) declares a Digital LOS                           D4         D3          D2        D1          D0
(DLOS_(n)) condition if the XRT73L04B detects
                                                                 RLOL_(n) RLOS_(n) ALOS_(n) DLOS_(n) DMO_(n)
160±32 or more consecutive "0’s" in the incoming da-
ta.                                                             Read Only Read Only Read Only Read Only Read Only
The channel clears DLOS if it detects four consecu-
                                                               If the DLOS_(n) bit-field contains a “1”, then the cor-
tive sets of 32 bit-periods, each of which contains at
                                                               responding channel(n) is currently declaring a DLOS
least 10 "1’s" (e.g., average pulse density of greater
                                                               condition. If the DLOS_(n) bit-field contains a “0”,
than 33%).
                                                               then the channel(n) is currently declaring the DLOS
Monitoring the State of DLOS                                   condition.
If the XRT73L04B is operating in the HOST Mode the             Disabling the DLOS Detector
state of DLOS_(n) of Channel(n) can be polled or               For debugging purposes, it is useful to disable the
monitored by reading in the contents of Command                DLOS_(n) detector. If the XRT73L04B is operating in
Register CR0.                                                  the HOST Mode, the DLOS Detector can be disabled
                                                               by writing a “1” into the DLOSDIS_(n) bit-field in Com-
                                                               mand Register CR2.
                                            COMMAND REGISTER CR2-(n)
             D4                     D3                      D2                      D1                     D0
         Reserved                Reserved              ALOSDIS_(n)             DLOSDIS_(n)            REQEN_(n)
              X                      X                       X                        1                    X
NOTE: Setting both the ALOSDIS_(n) and DLOSDIS_(n)               3.5.3 Muting the Recovered Data while the LOS
bit-fields to "1" disables LOS Declaration by Channel(n).       is being Declared
                                                            42


                                                                                                     XRT73L04B
                                                          4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                             REV. 1.0.1
In some applications it is not desirable for a channel      This feature is available whenever XRT73L04B is op-
within the E3/DS3/STS-1 LIU to recover data and             erating in the HOST Mode or Hardware Mode.
route it to the Receiving Terminal while the channel is       a. Operating in the Hardware Mode.
declaring an LOS condition. Consequently, the
XRT73L04B includes an LOS Muting feature. This              The Muting upon LOS feature is enabled by pulling
feature, if enabled, causes a given channel to halt         the LOSMUTEN output pin “High". This enables the
transmission of the recovered data to the Receiving         Muting upon LOS feature globally for all channels.
Terminal while the LOS condition is "true". In this           b. Operating in the HOST Mode.
case, the RPOS_(n) and RNEG_(n) output pins are             The Muting upon LOS feature for each Channel can
forced to "0". Once the LOS condition has been              be enabled by writing a "1" into the LOSMUT_(n) bit-
cleared, then the channel(n) resumes normal trans-          field within Command Register 3.
mission of the recovered data to the Receiving Termi-
nal.
                                         COMMAND REGISTER CR3-(n)
           D4                    D3                   D2                        D1                       D0
      (SR/DR)_(n)          LOSMUT_(n)               RxOFF                 RxClk_(n)INV                Reserved
            X                    1x                    x                         x                        x
NOTE: This step only enables the Muting upon LOS feature       3.6.1 Routing Dual-Rail Format Data to the
within Channel(n).                                            Receiving Terminal Equipment
 3.6 ROUTING THE RECOVERED TIMING AND DATA                  Whenever a channel delivers Dual-Rail format to the
       INFORMATION TO THE RECEIVING TERMINAL                Terminal Equipment, it does so via the following sig-
       EQUIPMENT                                            nals.
Each channel ultimately takes the Recovered Timing          • RPOS_(n)
and Data information, converts it into CMOS levels          • RNEG_(n)
and routes it to the Receiving Terminal Equipment via
the RPOS_(n), RNEG_(n) and RxClk_(n) output pins.           • RxClk_(n)
                                                            Figure 28 illustrates the typical interface for the trans-
Each channel can deliver the recovered data and
                                                            mission of data in a Dual-Rail Format from the Re-
clock information to the Receiving Terminal in either a
                                                            ceive Section of a channel to the Receiving Terminal
Single-Rail or Dual-Rail format.
                                                            Equipment.
                                                            .
                 FIGURE 28. THE TYPICAL INTERFACE FOR THE TRANSMISSION OF DATA IN A DUAL-RAIL FORMAT,
                 FROM THE RECEIVE SECTION OF THE XRT73L04B TO THE RECEIVING TERMINAL EQUIPMENT
                                                RxPOS      RPOS
                               Terminal         RxNEG      RNEG         Receive
                              Equipment                                  Logic
                          (E3/DS3 or STS-1                               Block
                                                RxClk      RxClk
                               Framer)
                                                             Exar E3/DS3/STS-1 LIU
The manner that a given channel transmits Dual-Rail         scribed below and illustrated in Figure 29. Each
data to the Receiving Terminal Equipment is de-             channel(n) typically updates the data on the
                                                         43


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
RPOS_(n) and RNEG_(n) output pins on the rising
edge of RxClk_(n).
     FIGURE 29. HOW THE XRT73L04B OUTPUTS DATA ON THE RPOS AND RNEG OUTPUT PINS
         RPOS
        RNEG
        RxClk
RxClk_(n) is the Recovered Clock signal from the in-      RNEG_(n) output data to the Receiving Terminal
coming Received line signal. As a result, these clock     Equipment. This feature may be useful for those cus-
signals are typically 34.368 MHz for E3 applications,     tomers whose Receiving Terminal Equipment logic
44.736 MHz for DS3 applications and 51.84 MHz for         design is such that the RPOS_(n) and RNEG_(n) da-
SONET STS-1 applications.                                 ta must be sampled on the rising edge of RxClk_(n).
In general, if a given channel received a positive-po-    Figure 30 illustrates the behavior of the RPOS_(n),
larity pulse in the incoming line signal via the          RNEG_(n) and RxClk_(n) signals when the
RTIP_(n) and RRing_(n) input pins, then the channel       RxClk_(n) signal has been inverted.
pulses its corresponding RPOS_(n) output pin “High".      In the Hardware Mode:
Conversely, if the channel received a negative-polari-    Setting the RxClkINV pin “High” results in all chan-
ty pulse in the incoming line signal via the RTIP_(n)     nels of the XRT73L04B to output the recovered data
and RRing_(n) input pins, then the channel(n) pulses      on RPOS_(n) and RNEG_(n) on the falling edge of
its corresponding RNEG_(n) output pin “High".             RxClk_(n). Setting this pin “Low” results in the recov-
Inverting the RxClk_(n) outputs                           ered data on RPOS_(n) and RNEG_(n) to output on
Each channel can invert the RxClk_(n) signals with        the rising edge of RxClk_(n).
respect to the delivery of the RPOS_(n) and
     FIGURE 30. THE BEHAVIOR OF THE RPOS, RNEG, AND RXCLK SIGNALS WHEN RXCLK IS INVERTED
         RPOS
        RNEG
        RxClk
 a. Operating in the HOST Mode                            To invert RxClk_(n), associated with Channel(n),
In order to configure a channel(n) to invert the          write a "1" into the RxClk_(n)INV bit-field within Com-
RxClk_(n) output signal, the XRT73L04B must be op-        mand Register CR-3.
erating in the HOST Mode.
                                                       44


                                                                                                    XRT73L04B
                                                         4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                            REV. 1.0.1
                                       COMMAND REGISTER CR3-(n)
          D4                    D3                    D2                      D1                       D0
      (SR/DR)_(n)         LOSMUT_(n)                RxOFF                RxClk_(n)INV                Reserved
           X                    X                     X                        1                        X
b. Operating in the Hardware Mode                         To route Single-Rail format data (e.g., a binary data
Setting the RxClkINV input pin “High" inverts all the     stream) from the Receive Section of a channel to the
RxClk_(n) output signals.                                 Receiving Terminal Equipment, do the following.
  3.6.2 Routing Single-Rail Format (Binary Data             a. Operating in the HOST Mode
 Stream) data to the Receive Terminal Equipment           To configure Channel(n) to output Single-Rail data to
                                                          the Terminal Equipment, write a "1" into the (SR/
                                                          DR)_(n) bit-field within Command Register CR3-(n).
                                       COMMAND REGISTER CR3-(n)
          D4                    D3                    D2                      D1                       D0
      (SR/DR)_(n)         LOSMUT_(n)                RxOFF                RxClk_(n)INV                Reserved
           1                    X                     X                        X                        X
The configured channel outputs Single-Rail data to        The XRT73L04B is configure to output Single-Rail
the Receiving Terminal Equipment via its correspond-      data from the Receive Sections of all channels by
ing RPOS_(n) and RxClk_(n) output pins, as illustrat-     pulling the (SR/DR) pin to VDD.
ed in Figure 31 and Figure 32.                            NOTE: When the XRT73L04B is operating in the Hardware
b. Operating in the Hardware Mode                         Mode, the setting of the (SR/DR) input pin applies globally
                                                          to all channels.
The XRT73L04B is configure to output Dual-Rail data       .
from the Receive Sections of all channels by pulling
the (SR/DR) pin to GND.
              FIGURE 31. THE TYPICAL INTERFACE FOR THE TRANSMISSION OF DATA IN A SINGLE-RAIL FORMAT
              FROM THE RECEIVE SECTION OF THE XRT73L04B TO THE RECEIVING TERMINAL EQUIPMENT
                                            RxPOS        RPOS
                                                                         Receive
                     TerminalEquipment                                     Logic
                      (E3/DS3 or STS-1                                     Block
                           Framer)          RxClk        RxClk
                                                             Exar E3/DS3/STS-1 LIU
                                                       45


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
     FIGURE 32. THE BEHAVIOR OF THE RPOS AND RXCLK OUTPUT SIGNALS WHILE THE XRT73L04B IS TRANSMIT-
     TING   SINGLE-RAIL DATA TO THE RECEIVING TERMINAL EQUIPMENT
         RPOS
         RxClk
NOTE: The RNEG_(n) output pin is internally tied to Ground     a. Operating in the Hardware Mode
whenever this feature is implemented.
                                                              Shut off the Receive Sections by pulling the RxOFF
 3.7 SHUTTING OFF THE RECEIVE SECTION                         input pin “High". Turn on the Receiver Sections by
The Receive Section of each channel in the                    pulling the RxOFF input pin to “Low".
XRT73L04B can be shut off. This feature may come              b. Operating in the HOST Mode
in handy in some redundant system designs. Particu-
larly, in those designs where the Receive Termination         Shut off the Receive Sections by writing a "1" into the
within the Secondary LIU Line Card has been                   RxOFF bit-field within Command Register CR3-(n).
switched-out and is not receiving any traffic in parallel                COMMAND REGISTER CR3-(n)
with the Primary Line Card. In this case, having the
LIU on the Secondary Line Card consume the normal                  D4          D3         D2        D1         D0
amount of current is a waste of power. This feature            (SR/DR)_(n) LOSMUT_(n) RxOFF RxClk_(n)INV Reserved
can permit powering down the Receive Section of the
LIU’s on the Secondary Line Card which reduces                      X           X          1         X          X
their power consumption by approximately 80%
                                                              Turn on the Receive Section of Channel(n) by writing
                                                              a "0" into the RxOFF bit-field within Command Regis-
                                                              ter CR3-(n).
                                                           46


                                                                                                                                 XRT73L04B
                                                                                     4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                                          REV. 1.0.1
 4.0 DIAGNOSTIC FEATURES OF THE                                                        via the TPData_(n), TNData_(n) and TxClk_(n) input
        XRT73L04B                                                                      pins. This data is processed through the Transmit
The XRT73L04B supports equipment diagnostic ac-                                        Clock Duty Cycle Adjust PLL and the HDB3/B3ZS
tivities by supporting the following Loop-Back modes                                   Encoder. Finally, this data is output to the line via the
within each channel.                                                                   TTIP_(n) and TRing_(n) output pins. Additionally, this
                                                                                       data which is being output via the TTIP_(n) and
• Analog Local Loop-Back.
                                                                                       TRing_(n) output pins is also looped back into the At-
• Digital Local Loop-Back                                                              tenuator/Receive Equalizer Block. Consequently, this
• Remote Loop-Back                                                                     data is processed through the entire Receive Section
NOTE: In this data sheet we use the convention that Chan-                              of the channel. After this post-Loop-Back data has
nel(n) refers to either channel 0, 1, 2 or 3. Similarly, specific                      been processed through the Receive Section it out-
input and output pins uses this convention to denote which                             puts to the Near-End Receiving Terminal Equipment
channel it is associated with.                                                         via the RPOS_(n), RNEG_(n) and RxClk_(n) output
 4.1 THE ANALOG LOCAL LOOP-BACK MODE                                                   pins.
When a given channel is configured to operate in the                                   Figure 33 illustrates the path that the data takes when
Analog Local Loop-Back Mode, the channel ignores                                       the channel is configured to operate in the Analog Lo-
any signals that are input to its RTIP_(n) and                                         cal Loop-Back Mode.
RRing_(n) input pins. The Transmitting Terminal
Equipment transmits clock and data into this channel
FIGURE 33. A CHANNEL OPERATING IN THE ANALOG LOCAL LOOP-BACK MODE
                                                                            RLOL_(n) EXClk_(n)
           RTIP_(n)               AGC/                                              Clock
                                                              Slicer                                              Invert           RxClk_(n)
          RRing_(n)             Equalizer                                         Recovery
         REQEN_(n)                                  Peak                                            Data           HDB3/           RPOS_(n)
                                                  Detector                                       Recovery           B3ZS           RNEG_(n)
                                                                                                                  Decoder
                                                                     LOS Detector                                                  LCV_(n)
       LOSTHR_(n)
                SDI
               SDO                Serial                                                                                           RLOS_(n)
              SClk             Processor             Analog Local                                                                  LLB_(n)
                                Interface                                                     Loop MUX
        CS/(SR/DR)                                 Loop-Back Path                                                                  RLB_(n)
             REGR
                                                                                                                                   TAOS_(n)
           TTIP_(n)                                                        HDB3/             Transmit                              TPData_(n)
                                                        Pulse               B3ZS              Logic                                TNData_(n)
                                                       Shaping            Encoder                         Duty Cycle Adjust        TxClk_(n)
          TRing_(n)
         TxLEV_(n)                                                                                                                 MTIP_(n)
                                                                             Device
         TxOFF_(n)                                                           Monitor
                                                                                                                                   MRing_(n)
           DMO_(n)
             Notes: 1. (n) = 0, 1, 2, or 3 for respective Channels
                    2. Serial Processor Interface input pins are shared by the four Channels in HOST Mode and redefined in
                       Hardware Mode.
Configure a given channel to operate in the Analog                                      a. Operating in the HOST Mode
Local Loop-Back Mode by employing either one of                                        NOTE: See Table 2 for a description of Command Regis-
the following two steps                                                                ters and Addresses for the different channels.
                                                                                       To configure Channel (n) to operate in the Analog Lo-
                                                                                       cal Loop-Back Mode, write a “1" into the LLB_(n) bit-
                                                                                       field and a "0" into the RLB_(n) bit-field within Com-
                                                                                       mand Register CR4.
                                                                                   47


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
                                                                                   any signals that are input to the RTIP and RRing in-
             COMMAND REGISTER CR4-(n)                                              put pins. The Transmitting Terminal Equipment trans-
  D4             D3                    D2              D1            D0            mits clock and data into the XRT73L04B via the TP-
                                                                                   Data, TNData and TxClk input pins. This data is pro-
   X     STS-1/DS3_(n)              E3_(n)         LLB_(n)         RLB_(n)         cessed through the Transmit Clock Duty Cycle Adjust
                                                                                   PLL and the HDB3/B3ZS Encoder block. At this
   X              X                     X               1            0
                                                                                   point, this data is looped back to the HDB3/B3ZS De-
 b. Operating in the Hardware Mode                                                 coder block. After this post-Loop-Back data has been
                                                                                   processed through the HDB3/B3ZS Decoder block, it
To configure Channel (n) to operate in the Analog Lo-
                                                                                   outputs to the Near-End Receiving Terminal Equip-
cal Loop-Back Mode, set the LLB_(n) input pin (pin
                                                                                   ment via the RPOS, RNEG and RxClk output pins.
76, 84, 97 or 105) “High" and the RLB_(n) input pin
(pin 77, 85, 96 or 104) "Low".                                                     Figure 34 illustrates the path that the data takes when
 4.2 THE DIGITAL LOCAL LOOP-BACK MODE.                                             the chip is configured to operate in the Digital Local
                                                                                   Loop-Back Mode.
When a given channel is configured to operate in the
Digital Local Loop-Back Mode, the channel ignores
FIGURE 34. THE DIGITAL LOCAL LOOP-BACK PATH WITHIN A GIVEN CHANNEL
                                                                         RLOL_(n) EXClk_(n)
          RTIP_(n)               AGC/                                           Clock
                                                            Slicer                                               Invert             RxClk_(n)
         RRing_(n)             Equalizer                                      Recovery
       REQEN_(n)                                  Peak                                          Data              HDB3/             RPOS_(n)
                                                 Detector                                     Recovery             B3ZS             RNEG_(n)
                                                                                                                 Decoder
                                                                 LOS Detector                                                       LCV_(n)
      LOSTHR_(n)
               SDI
                                                 Digital Local
              SDO                Serial                                                                                             RLOS_(n)
                                               Loop-Back Path
             SClk             Processor                                                                                             LLB_(n)
                               Interface                                                  Loop MUX
       CS/(SR/DR)                                                                                                                   RLB_(n)
            REGR
                                                                                                                                    TAOS_(n)
          TTIP_(n)                                                      HDB3/            Transmit                                   TPData_(n)
                                                      Pulse              B3ZS             Logic                                     TNData_(n)
                                                     Shaping           Encoder                           Duty Cycle Adjust          TxClk_(n)
         TRing_(n)
        TxLEV_(n)                                                                                                                   MTIP_(n)
                                                                          Device
        TxOFF_(n)                                                         Monitor
                                                                                                                                    MRing_(n)
          DMO_(n)
            Notes: 1. (n) = 0, 1, 2, or 3 for respective Channels
                   2. Serial Processor Interface input pins are shared by the four Channels in HOST Mode and redefined in
                      Hardware Mode.
Configure a channel to operate in the Digital Local                                To configure Channel (n) to operate in the Digital Lo-
Loop-Back Mode by employing either one of the fol-                                 cal Loop-Back Mode, write a "1" into both the LLB
lowing two-steps:                                                                  and RLB bit-fields within Command Register CR4-(n).
 a. Operating in the Host Mode                                                                  COMMAND REGISTER CR4-(n)
                                                                                      D4             D3                    D2    D1          D0
                                                                                      X       STS-1/DS3_(n)             E3_(n) LLB_(n) RLB_(n)
                                                                                      X                X                   X      1           1
                                                                               48


                                                                                                                               XRT73L04B
                                                                                 4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                                       REV. 1.0.1
b. Operating in the Hardware Mode.                                                put to the Receive Terminal Equipment via the RPOS,
To configure Channel (n) to operate in the Digital Lo-                            RNEG and RxClk output pins. Additionally, this data
cal Loop-Back Mode, pull both the LLB input pin and                               is also internally looped back into the Pulse-Shaping
the RLB input pin "High".                                                         block within the Transmit Section. At this point, this
                                                                                  data is routed through the remainder of the Transmit
 4.3 THE REMOTE LOOP-BACK MODE                                                    Section of the channel and transmitted out onto the
When a given channel is configured to operate in the                              line via the TTIP_(n) and TRing_(n) output pins.
Remote Loop-Back Mode, the channel ignores any
                                                                                  Figure 35 illustrates the path that the data takes when
signals that are input to the TPData and TNData input
                                                                                  the chip is configured to operate in the Remote Loop-
pins. The channel receives the incoming line signal
                                                                                  Back Mode.
via the RTIP and RRing input pins. This data is pro-
cessed through the entire Receive Section and is out-
FIGURE 35. THE REMOTE LOOP-BACK PATH, WITHIN A GIVEN CHANNEL
                                                                        RLOL_(n) EXClk_(n)
         RTIP_(n)               AGC/                                           Clock
                                                           Slicer                                              Invert             RxClk_(n)
        RRing_(n)             Equalizer                                      Recovery
      REQEN_(n)                                  Peak                                           Data            HDB3/             RPOS_(n)
                                                Detector                                     Recovery            B3ZS             RNEG_(n)
                                                                                                               Decoder
                                                                LOS Detector                                                      LCV_(n)
     LOSTHR_(n)
              SDI
             SDO                Serial                                                                                            RLOS_(n)
                                                    Remote
            SClk             Processor                                                                                            LLB_(n)
                              Interface        Loop-Back Path                            Loop MUX
      CS/(SR/DR)                                                                                                                  RLB_(n)
           REGR
                                                                                                                                  TAOS_(n)
         TTIP_(n)                                                      HDB3/            Transmit                                  TPData_(n)
                                                     Pulse              B3ZS              Logic                                   TNData_(n)
                                                    Shaping           Encoder                          Duty Cycle Adjust          TxClk_(n)
        TRing_(n)
       TxLEV_(n)                                                                                                                  MTIP_(n)
                                                                         Device
       TxOFF_(n)                                                         Monitor
                                                                                                                                  MRing_(n)
         DMO_(n)
           Notes: 1. (n) = 0, 1, 2, or 3 for respective Channels
                  2. Serial Processor Interface input pins are shared by the four Channels in HOST Mode and redefined in
                     Hardware Mode.
Configure a channel to operate in the Remote Loop-
Back Mode by employing either one of the following                                              COMMAND REGISTER CR4-(n)
two steps                                                                            D4              D3                  D2    D1           D0
 a. Operating in the HOST Mode
                                                                                     X       STS-1/DS3_(n)            E3_(n) LLB_(n)   RLB_(n)
To configure Channel (n) to operate in the Remote
Loop-Back Mode, write a "1" into the RLB bit-field,                                  X               X                   X      0           1
and a "0" into the LLB bit-field, within Command Reg-                             b. Operating in the Hardware Mode
ister CR4.
                                                                                  To configure Channel(n) to operate in the Remote
                                                                                  Loop-Back Mode, pull both the RLB_(n) input pin to
                                                                                  “High" and the LLB_(n) input pin to "Low".
                                                                              49


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
 4.4 TXOFF FEATURES
                                                                        COMMAND REGISTER CR1-(n)
The Transmit Section of each Channel in the
XRT73L04B can be shut off. When this feature is in-              D4         D3            D2           D1          D0
voked, the Transmit Section of the configured chan-
nel is shut-off and the Transmit Output signals (e.g.,       TxOFF_(n) TAOS_(n) TxClkINV_(n) TxLEV_(n) Reserved
TTIP_(n) and TRing_(n)) is tri-stated. This feature is            1          X            X             X           X
useful for system redundancy conditions or during di-
agnostic testing.                                           Writing a "0" into this bit-field enables the Chan-
                                                            nel(n)Transmit Driver.
 a. Operating in the Hardware Mode
                                                            NOTE: In order to permit a system designed for redundancy
Shut off the Transmit Driver concurrently within all        to quickly shut-off a defective line card and turn-on the
Channels by toggling the TxOFF input pin “High".            back-up line card, the XRT73L04B was designed such that
Turn on the Transmit Driver by toggling the TxOFF in-       either Transmitter can quickly be turned-on or turned-off by
put pin “Low".                                              toggling the TxOFF input pins. This approach is much
b. Operating in the HOST Mode                               quicker then setting the TxOFF_(n) bit-fields via the Micro-
                                                            processor Serial Interface.
Turn off the Transmit Driver within Channel(n) by set-
                                                            Table 6 presents a Truth Table which relates the set-
ting the TxOFF_(n) bit-field within Command Register
                                                            ting of the TxOFF external pin and bit-field for a chan-
CR1-(n) to "1".
                                                            nel to the state of the Transmitter. This table applies
                                                            to all Channels of the XRT73L04B.
   TABLE 6: THE RELATIONSHIP BETWEEN THE TXOFF INPUT PIN, THE TXOFF BIT FIELD AND THE STATE OF THE
                                                    TRANSMITTER
  STATE OF THE TXOFF      STATE OF THE TXOFF
                                                                      STATE OF THE TRANSMITTER
        INPUT PIN               BIT FIELD
           LOW                      0                                  ON (Transmitter is Active)
           LOW                      1                               OFF (Transmitter is Tri-Stated)
          HIGH                      0                               OFF (Transmitter is Tri-Stated)
          HIGH                      1                               OFF (Transmitter is Tri-Stated)
To control the state of all transmitters via the Micro-     Activate the Channel(n) Transmit Drive Monitor by
processor Serial interface, connect the TxOFF input         connecting the MTIP_(n) pin to the TTIP_(n) line
pin to GND.                                                 through a 270 Ohm resistor connected in series, and
 4.5 THE TRANSMIT DRIVE MONITOR FEATURES                    connecting the MRing_(n) pin to the TRing_(n) line
The Transmit Drive Monitor is used to monitor the line      through a 270 Ohm resistor connected in series.
in the Transmit Direction for the occurrence of fault       Such an approach is illustrated in Figure 36.
conditions such as a short circuit on the line, a defec-
tive Transmit Drive in the XRT73L04B or another LIU.
                                                         50


                                                                                                        XRT73L04B
                                                             4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                               REV. 1.0.1
      FIGURE 36. THE XRT73L04B EMPLOYING THE TRANSMIT DRIVE MONITOR FEATURES
                                                                                                            J1
                                                                                                           BNC
                                                    TTIP_(n)
                                                                                R1 = 31.6Ω
                                                   TRing_(n)
             TxPOS_(n)                                                          R2 = 31.6Ω       1:1
                                        TPData_(n)
             TxNEG_(n)                  TNData_(n)
         TxLineClk_(n)                  TxClk_(n)
                                                    MTIP_(n)
                                                               R3 = 270Ω
                                                  MRing_(n)
                                                               R4 = 270Ω
                                             Channel (n)
                                       Only One Channel Shown
When the Transmit Drive Monitor circuitry within a             b. Operating in the HOST Mode
given line is connected to the line, as illustrated in         Configure Channel(n) to transmit an all “1’s" pattern
Figure 36, then it monitors the line for transitions. As       by writing to Command Register CR1-(n) and setting
long as the Transmit Drive Monitor circuitry detects           the TAOS_(n) bit-field (bit D3) to "1".
transitions on the line via the MTIP_(n) and
MRing_(n) pins, then it keeps the DMO (Drive Moni-                        COMMAND REGISTER CR1-(n)
tor Output) signal "Low". If the Transmit Drive Moni-               D4         D3          D2           D1       D0
tor circuit detects no transitions on the line for 128+32
TxClk periods, then the DMO (Drive Monitor Output)              TxOFF_(n) TAOS_(n) TxClkINV_(n) TxLEV_(n) Reserved
signal toggles "High".
                                                                     0          1           X           X         X
NOTE: The Transmit Drive Monitor circuit does not have to
be used to operate the Transmit Section of the XRT73L04B.      Terminate the all “1’s" pattern by writing to Command
This is purely a diagnostic feature.                           Register CR1-(n) and setting the TAOS_(n) bit-field
 4.6 THE TAOS (TRANSMIT ALL ONES) FEATURE                      (D3) to "0".
The XRT73L04B can command any channel to trans-                 5.0 THE MICROPROCESSOR SERIAL INTER-
mit an all “1’s" pattern onto the line by toggling a sin-              FACE
gle input pin or by setting a single bit-field within one
                                                               The on-chip Command Registers of XRT73L04B
of the Command Registers to "1".
                                                               DS3/E3/STS-1 Line Interface Unit IC are used to con-
NOTE: When this feature is activated, the Transmit Section     figure the XRT73L04B into a wide-variety of modes.
of the configured channel overwrites the Terminal Equip-       This section discusses the following:
ment data with this all “1’s" pattern.
                                                               1. The description of the Command Registers.
 a. Operating in the Hardware Mode
                                                               2. A description on how to use the Microprocessor
Configure Channel(n) to transmit an all “1’s" pattern
                                                               Serial Interface.
by toggling the TAOS_(n) input pin (pin 45, 46, 135 or
136) “High". Terminate the all “1’s" pattern by tog-            5.1 DESCRIPTION OF THE COMMAND REGISTERS
gling the TAOS_(n) input pin “Low".                             (repeated as Table 7), lists the Command Registers,
                                                               their Addresses and their bit-formats.
                                                            51


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
           TABLE 7: HEXADECIMAL ADDRESSES AND BIT FORMATS OF XRT73L04B COMMAND REGISTERS
                                                              REGISTER BIT-FORMAT
                COMMAND
  ADDRESS                     TYPE        D4            D3             D2           D1        D0
                REGISTER
                                               CHANNEL 0
     0x00         CR0-0         RO      RLOL_0       RLOS_0         ALOS_0        DLOS_0    DMO_0
     0x01         CR1-0        R/W      TxOFF_0      TAOS_0        TxClkINV_0    TxLEV_0   Reserved
     0x02         CR2-0        R/W      Reserved     Reserved     ALOSDIS_0     DLOSDIS_0  REQEN_0
     0x03         CR3-0        R/W     (SR/DR)_0    LOSMUT_0         RxOFF      RxClk_0INV Reserved
     0x04         CR4-0        R/W      Reserved   STS-1/DS3_0        E3_0         LLB_0    RLB_0
     0x05         CR5-0        R/W      Reserved     Reserved       Reserved     Reserved  Reserved
     0x06         CR6-0        R/W      Reserved     Reserved       Reserved     Reserved  Reserved
     0x07         CR7-0        R/W      Reserved     Reserved       Reserved     Reserved  Reserved
                                               CHANNEL 1
     0x08         CR0-1         RO      RLOL_1       RLOS_1         ALOS_1        DLOS_1    DMO_1
     0x09         CR1-1        R/W      TxOFF_1      TAOS_1        TxClkINV_1    TxLEV_1   Reserved
     0x0A         CR2-1        R/W      Reserved     Reserved     ALOSDIS_1    DLOSDIS_1   REQEN_1
     0x0B         CR3-1        R/W      SR/DR_1     LOSMUT_1         RxOFF      RxClk_1INV Reserved
     0x0C         CR4-1        R/W      Reserved   STS-1/DS3_1        E3_1         LLB_1    RLB_1
     0x0D         CR5-1        R/W      Reserved     Reserved       Reserved     Reserved  Reserved
     0x0E         CR6-1        R/W      Reserved     Reserved       Reserved     Reserved  Reserved
     0x0F         CR7-1        R/W      Reserved     Reserved       Reserved     Reserved  Reserved
                                               CHANNEL 2
     0x10         CR0-2         RO      RLOL_2       RLOS_2         ALOS_2        DLOS_2    DMO_2
     0x11         CR1-2        R/W      TxOFF_2      TAOS_2       TxClkINV_2     TxLEV_2   Reserved
     0x12         CR2-2        R/W      Reserved     Reserved     ALOSDIS_2     DLOSDIS_2  REQEN_2
     0x13         CR3-2        R/W      SR/DR_2     LOSMUT_2         RxOFF      RxClk_2INV Reserved
     0x14         CR4-2        R/W      Reserved   STS-1/DS3_2        E3_2         LLB_2    RLB_2
     0x15         CR5-2        R/W      Reserved     Reserved       Reserved     Reserved  Reserved
     0x16         CR6-2        R/W      Reserved     Reserved       Reserved     Reserved  Reserved
     0x17         CR7-2        R/W      Reserved     Reserved       Reserved     Reserved  Reserved
                                                  52


                                                                                                            XRT73L04B
                                                              4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                   REV. 1.0.1
           TABLE 7: HEXADECIMAL ADDRESSES AND BIT FORMATS OF XRT73L04B COMMAND REGISTERS
                                                                           REGISTER BIT-FORMAT
                  COMMAND
   ADDRESS                           TYPE           D4              D3                D2              D1            D0
                   REGISTER
                                                          CHANNEL 3
      0x18           CR0-3            RO         RLOL_3          RLOS_3            ALOS_3          DLOS_3        DMO_3
      0x19           CR1-3            R/W        TxOFF_3         TAOS_3          TxClkINV_3        TxLEV_3      Reserved
      0x1A           CR2-3            R/W        Reserved       Reserved         ALOSDIS_3        DLOSDIS_3     REQEN_3
      0x1B           CR3-3            R/W        SR/DR_3       LOSMUT_3            RxOFF          RxClk_3INV    Reserved
     0x1C            CR4-3            R/W        Reserved     STS-1/DS3_3           E3_3            LLB_3         RLB_3
     0x1D            CR5-3            R/W        Reserved       Reserved          Reserved         Reserved     Reserved
      0x1E           CR6-3            R/W        Reserved       Reserved          Reserved         Reserved     Reserved
      0x1F           CR7-3            R/W        Reserved       Reserved          Reserved         Reserved     Reserved
Address                                                         This bit-field is set to "1" if the Clock Recovery PLL is
The register addresses are presented in the Hexa-               out of lock with the incoming line signal.
decimal format.                                                 Bit D3 - RLOS_(n) (Receive Loss of Signal Status -
Type:                                                           Channel(n))
The Command Registers are either Read-Only (RO)                 This Read-Only bit-field indicates whether or not the
type of registers or Read/Write (R/W) type of regis-            Channel(n) of the Receiver is currently declaring an
ters. Each channel of the XRT73L04B has eight                   LOS (Loss of Signal) Condition.
command registers, CR0-(n) through CR7-(n) where                This bit-field is set to "0" if Channel(n) is not currently
(n) = 0, 1, 2 or 3. The associated addresses for each           declaring the LOS Condition.
channel are presented in , (repeated as Table 7).               This bit-field is set to "1" if Channel(n) is declaring an
NOTE: The default value for each of the bit-fields within       LOS Condition.
these register is "0".
                                                                Bit D2 - ALOS_(n) (Analog Loss of Signal Status -
 5.2 DESCRIPTION OF BIT-FIELDS FOR EACH COM-                    Channel(n))
        MAND REGISTER
                                                                This Read-Only bit-field indicates whether or not the
  5.2.1 Command Register - CR0-(n)                              Channel(n) Analog LOS Detector is currently declar-
The bit-format and default values for Command Reg-              ing an LOS condition.
ister CR0-(n) are listed below followed by the function         This bit-field is set to "0" if the Analog LOS Detector
of each of these bit-fields.                                    within Channel(n) is NOT currently declaring an LOS
            COMMAND REGISTER CR0-(n)                            condition. This bit-field is set to "1" if the Analog LOS
                                                                Detector is currently declaring an LOS condition.
     D4           D3           D2        D1           D0
                                                                NOTE: The purpose is to isolate the Detector (e.g., either
 RLOL_(n) RLOS_(n) ALOS_(n) DLOS_(n) DMO_(n)                    the Analog LOS or the Digital LOS detector) that is declar-
                                                                ing the LOS condition. This feature may be useful for trou-
      1            1            1         1            1        bleshooting/debugging purposes
                                                                Bit D1 - DLOS_(n) (Digital Loss of Signal Status -
Bit D4 - RLOL_(n) (Receive Loss of Lock Status -
                                                                Channel(n))
Channel(n))
                                                                This Read-Only bit-field indicates whether or not the
This Read-Only bit-field reflects the lock status of the
                                                                Channel(n) Digital LOS Detector is currently declar-
Channel(n) Clock Recovery Phase-Locked-Loop
                                                                ing an LOS condition.
This bit-field is set to “0” if the Channel(n) Clock Re-        This bit-field is set to "0" if the Channel(n) Digital LOS
covery PLL is in lock with the incoming line signal.            Detector is NOT currently declaring an LOS condi-
                                                             53


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
tion. This bit-field is set to "1" if the Channel(n) Digital    Writing a "1" to this bit-field configures the Transmitter
LOS Detector is currently declaring an LOS condition.           to sample the TPData and TNData input pins on the
NOTE: The purpose is to isolate the Detector (e.g., either      rising edge of TxClk. Writing a “0" to this bit-field con-
the Analog LOS or the Digital LOS detector) that is declar-     figures the Transmitter to sample the TPData and
ing the LOS condition. This feature may be useful for trou-     TNData input pins on the falling edge of TxClk.
bleshooting/debugging purposes.                                 Bit D1 - TxLEV_(n) (Transmit Line Build-Out En-
Bit D0 - DMO_(n) (Drive Monitor Output Status -                 able/Disable Select - Channel(n))
Channel(n))
                                                                This Read/Write bit-field is used to enable or disable
This Read-Only bit-field reflects the status of the             the Channel(n) Transmit Line Build-Out circuit.
DMO output pin.
                                                                Setting this bit-field "High" disables the Channel(n)
  5.2.2 Command Register CR1                                    Line Build-Out circuit. In this mode, Channel(n) out-
The bit-format and default values for Command Reg-              puts partially-shaped pulses onto the line via the
ister CR1-(n) are listed below followed by the function         TTIP_(n) and TRing_(n) output pins.
of each of these bit-fields..                                   Setting this bit-field "Low" enables the Channel(n)
             COMMAND REGISTER CR1-(n)                           Line Build-Out circuit. In this mode, Channel(n) out-
                                                                puts shaped pulses onto the line via the TTIP_(n) and
      D4         D3            D2           D1        D0        TRing_(n) output pins.
 TxOFF_(n) TAOS_(n) TxClkINV_(n) TxLEV_(n) Reserved             In order to comply with the Isolated DSX-3/STSX-1
                                                                Pulse Template Requiremnts per Bellcore GR-499-
       0          0             0            0         0
                                                                CORE or GR-253-CORE:
Bit D4 - TxOFF_(n) (Transmitter OFF - Channel(n))               a. Set this bit-field to "1" if the cable length between
This Read/Write bit-field is used to turn off the Chan-         the Cross-Connect and the transmit output of Chan-
nel(n) Transmitter.                                             nel(n) is greater than 225 feet.
Writing a "1" to this bit field turns off the Transmitter       b. Set this bit-field to "0" if the cable length between
and tri-state the Transmit Output. Writing a "0" to this        the Cross-Connect and the transmit output of Chan-
bit-field turns on the Transmitter.                             nel(n) is less than 225 feet.
Bit D3 - TAOS_(n) (Transmit All OneS - Chan-                    This bit-field is active only if the XRT73L04B is config-
nel(n))                                                         ured to operate in the DS3 or SONET STS-1 Modes.
This Read/Write bit-field is used to command the                If the cable length is greater than 225 feet, set this bit-
Channel(n) Transmitter to generate and transmit an              field to "1" in order to increase the amplitude of the
all “1’s” pattern onto the line.                                Transmit Output Signal. If the cable length is less
                                                                than 225 feet, set this bit-field to "0".
Writing a "1" to this bit-field commands the Transmit-
                                                                NOTE: This option is only available when the XRT73L04B
ter to transmit an all “1’s” pattern onto the line. Writ-
                                                                is operating in the DS3 or STS-1 Mode.
ing a "0" to this bit-field commands normal operation.
                                                                  5.2.3 Command Register CR2-(n)
Bit D2 - TxClkINV_(n) (Transmit Clock Invert -
Channel(n))                                                     The bit-format and default values for Command Reg-
                                                                ister CR2-(n) are listed below followed by the function
This Read/Write bit-field is used to configure the              of each of these bit fields.
Transmitter to sample the signal at the TPData and
TNData pins on the rising edge or falling edge of Tx-
Clk (the Transmit Line Clock signal).
                                             COMMAND REGISTER CR2-(n)
            D4                         D3                    D2                        D1                      D0
         Reserved                 Reserved              ALOSDIS_(n)              DLOSDIS_(n)               REQEN_(n)
             X                          0                     0                        0                        0
                                                             54


                                                                                                      XRT73L04B
                                                          4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                              REV. 1.0.1
Bit D4 - Reserved                                           Writing a "0" to this bit-field enables the Digital LOS
Bit D3 - Reserved                                           Detector. Writing a "1" to this bit-field disables the
                                                            Digital LOS Detector.
Bit D2 - ALOSDIS_(n) (Analog LOS Disable -
                                                            NOTE: If the Digital LOS Detector is disabled, then the
Channel(n))
                                                            RLOS input pin is only asserted by the ALOS (Analog LOS
This Read/Write bit-field is used to enable or disable      Detector).
the Channel(n) Analog LOS Detector.
                                                            Bit D0 - REQEN_(n) (Receive Equalization Enable
Writing a "0" to this bit-field enables the Analog LOS      - Channel(n))
Detector. Writing a "1" to this bit-field disables the      This Read/Write bit-field is used to enable or disable
Analog LOS Detector.                                        the internal Channel(n) Receive Equalizer.
NOTE: If the Analog LOS Detector is disabled, then the
                                                            Writing a "1" to this bit-field enables the Internal
RLOS input pin is only asserted by the DLOS (Digital LOS
Detector).                                                  Equalizer. Writing a "0" to this bit-field disables the
                                                            Internal Equalizer.
Bit D1 - DLOSDIS_(n) (Digital LOS Disable - Chan-
nel(n))                                                       5.2.4 Command Register CR3-(n)
                                                            The bit-format and default values for Command Reg-
This Read/Write bit-field to used to enable or disable
                                                            ister CR3-(n) are listed below followed by the function
the Channel(n) Digital LOS Detector .
                                                            of each of these bit fields.
                                            COMMAND REGISTER CR3-(n)
             D4                         D3                 D2                      D1                      D0
         SR/DR_(n)                 LOSMUT_(n)            RxOFF               RxClk_(n)INV                Reserved
              0                          0                  0                       0                       0
Bit D4 - SR/DR (Single-Rail/Dual-Rail Data Output           Writing a "0" to this bit-field configures the chip to out-
- Channel(n))/(B3ZS/HDB3 Encoder/Decoder-Dis-               put recovered data even while the XRT73L04B is de-
able - Channel(n))                                          claring an LOS condition. Writing a "1" to this bit-field
This Read/Write bit-field is used to configure Chan-        configures the chip to NOT output the recovered data
nel(n) to output the received data from the Remote          while an LOS condition is being declared.
Terminal in a binary or Dual-Rail format and Enable or      NOTE: In this mode, RPOS_(n) and RNEG_(n) is set to "0",
Disable the B3ZS/HDB3 Encoder and Decoder                   asynchronously.
blocks.                                                     Bit D2 - RxOFF (Receive Section - Shut OFF Se-
Writing a "1" to this bit-field enables the B3ZS/HDB3       lect)
Encoder and Decoder blocks. Writing a "0" to this bit-      This Read/Write bit-field is used to shut-off the Re-
field disables the B3ZS/HDB3 Encoder and Decoder            ceive Sections. The purpose is to conserve power
blocks.                                                     consumption when this device is the back-up device
NOTE: This Encoder/Decoder performs HDB3 Encoding/          in a Redundancy System.
Decoding if the XRT73L04B is operating in the E3 Mode.      Writing a "1" into this bit-field shuts off the Receive
Otherwise, it performs B3ZS Encoding/Decoding.              Sections. Writing a "0" into this bit-field turns on the
.Writing a "1" to this bit-field also configures Chan-      Receive Sections.
nel(n) to output data to the Terminal Equipment in a        Bit D1 - RxClk_(n)INV (Invert RxClk_(n))
binary (Single-Rail) format via the RPOS_(n) output
                                                            This Read/Write bit-field is used to configure the
pin, RNEG_(n) is grounded. Writing a "0" to this bit-
                                                            Channel(n) Receiver to output the recovered data on
field configures Channel(n) to output data to the Ter-
                                                            either the rising edge or the falling edge of the
minal Equipment in a Dual-Rail format via both the
                                                            RxClk_(n) clock signal.
RPOS_(n) and RNEG_(n) output pins.
Bit D3 - LOSMUT_(n) (Recovered Data Muting,                 Writing a "0" to this bit-field configures the Receiver to
during LOS Condition - Channel(n))                          output the recovered data on the rising edge of the
                                                            RxClk_(n) output signal. Writing a "1" to this bit-field
This Read/Write bit-field is used to configure Chan-        configures the Receiver to output the recovered data
nel(n) to not output any recovered data from the line       on the falling edge of the RxClk_(n) output signal.
while it is declaring an LOS condition.
                                                            Bit D0 - Reserved
                                                         55


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
This bit-field has no defined functionality                       Bit D2 - E3 Mode Select - Channel(n)
Command Register CR4-(n)                                          This Read/Write bit-field is used to configure Chan-
The bit-format and default values for Command Reg-                nel(n) to operate in the E3 Mode.
ister CR4 are listed below followed by the function of            Writing a "0" into this bit-field configures Channel(n)
each of these bit-fields.                                         to operate in either the DS3 or SONET STS-1 Mode
                                                                  as specified by the setting of the DS3 bit-field within
                                                                  this Command Register. Writing a "1" into this bit-
            COMMAND REGISTER CR4-(n)                              field configures Channel(n) to operate in the E3
     D4            D3             D2        D1           D0       Mode.
                                                                  Bit D1 - LLB_(n) (Local Loop-Back - Channel(n))
 Reserved STS-1/DS3_(n)        E3_(n)    LLB_(n) RLB_(n)
                                                                  This Read/Write bit-field along with RLB_(n) is used
      0             0               0        0            0       to configure Channel(n) to operate in any one of a va-
                                                                  riety of Loop-Back modes.
Bit D4 - Reserved
                                                                  Table 8 relates the contents of LLB_(n) and RLB_(n)
This bit-field has no defined functionality                       and the corresponding Loop-Back mode for Chan-
Bit D3 - STS-1/(DS3_(n)) - Channel(n) - Mode Se-                  nel(n).
lect                                                              Bit D0 - RLB_(n) (Remote Loop-Back - Chan-
This Read/Write bit field is used to configure Chan-              nel(n))
nel(n) to operate in either the SONET STS-1 Mode or
                                                                  This Read/Write bit-field, along with LLB_(n), is used
the DS3 Mode.
                                                                  to configure Channel(n) to operate in any one of a va-
Writing a "0" into this bit-field configures Channel(n)           riety of Loop-Back modes.
to operate in the DS3 Mode. Writing a "1" into this bit-          Table 8 relates the contents of LLB_(n) and RLB_(n)
field configures Channel(n) to operate in the SONET               and the corresponding Loop-Back mode for Chan-
STS-1 Mode.                                                       nel(n).
NOTE: This bit-field is ignored if the E3_(n) bit-field (e.g.,
D2 within this Command Register) is set to "1".
  TABLE 8: CONTENTS OF LLB_(n) AND RLB_(n) AND THE CORRESPONDING LOOP-BACK MODE FOR CHANNEL(n)
         LLB_(n)                    RLB_(n)                             LOOP-BACK MODE (FOR CHANNEL(n))
            0                          0                                              None
            1                          0                       Analog Loop-Back Mode (See Section 4.1 for details)
            1                          1                       Digital Loop-Back Mode (See Section 4.2 for details)
            0                          1                       Remote Loop-Back Mode (See Section 4.3 for details)
 5.3 OPERATING THE MICROPROCESSOR SERIAL                          to the diagram in Figure 37 and the timing diagram in
        INTERFACE.                                                Figure 38.
The XRT73L04B Serial Interface is a simple four wire              In order to use the Microprocessor Serial Interface, a
interface that is compatible with many of the micro-              clock signal must be first applied to the SClk input
controllers available in the market. This interface               pin. Then, initiate a Read or Write operation by as-
consists of the following signals:                                serting the active-low Chip Select input pin CS. It is
• CS - Chip Select (Active Low)                                   important to assert the CS pin (e.g., toggle it “Low") at
                                                                  least 5ns prior to the very first rising edge of the clock
• SClk - Serial Clock
                                                                  signal.
• SDI - Serial Data Input
                                                                  Once the CS input pin has been asserted, the type of
• SDO - Serial Data Output                                        operation and the target register address must now
Using the Microprocessor Serial Interface                         be specified. Provide this information to the Micro-
The following instructions for using the Microproces-             processor Serial Interface by writing eight serial bits
sor Serial Interface are best understood by referring             of data into the SDI input.
                                                               56


                                                                                                               XRT73L04B
                                                                4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                     REV. 1.0.1
NOTE: Each of these bits is clocked into the SDI input on         mand Register at Address [A4, A3, A2, A1, A0] via
the rising edge of SClk.                                          the SDO output pin can begin. The Microprocessor
Bit 1 - R/W (Read/Write) Bit                                      Serial Interface outputs this five bit data word (D0
                                                                  through D4) in ascending order with the LSB first on
This bit is clocked into the SDI input, on the first rising
                                                                  the falling edges of the SClk pin. Consequently, the
edge of SClk after CS has been asserted. This bit in-
                                                                  data on the SDO output pin is sufficiently stable for
dicates whether the current operation is a Read or
                                                                  reading by the Microprocessor on the very next rising
Write operation. A "1" in this bit specifies a Read op-
                                                                  edge of the SClk pin.
eration, a "0" in this bit specifies a Write operation.
                                                                  Write Operation
Bits 2 through 6: The five (5) bit Address Values
(labeled A0, A1, A2 , A3 and A4)                                  Once the last address bit (A4) has been clocked into
                                                                  the SDI input, the Write operation proceeds through
The next five rising edges of the SClk signal clocks in
                                                                  an idle period lasting two SClk periods. Prior to the
the 5-bit address value for this particular Read or
                                                                  rising edge of SClk Cycle # 9 (see Figure 37). Apply
Write operation. The address selects the Command
                                                                  the desired eight bit data word to the SDI input pin via
Register in the XRT73L04B that the user is either
                                                                  the Microprocessor Serial Interface. The Micropro-
reading data from or writing data to. The address bits
                                                                  cessor Serial Interface latches the value on the SDI
must be supplied to the SDI input pin in ascending or-
                                                                  input pin on the rising edge of SClk. Apply this word
der with the LSB (least significant bit) first.
                                                                  (D0 through D7) serially, in ascending order with the
Bit 7:                                                            LSB first.
A5 must be set to "0", as shown in Figure 37.                     Simplified Interface Option
Bit 8 - A6                                                        The design of the circuitry connecting to the Micro-
The value of A6 is a don’t care.                                  processor Serial Interface can be simplified by tying
                                                                  both the SDO and SDI pins together and reading data
Once these first 8 bits have been written into the Mi-
                                                                  from and/or writing data to this combined signal. This
croprocessor Serial Interface, the subsequent action
                                                                  simplification is possible because only one of these
depends upon whether the current operation is a
                                                                  signals are active at any given time. The inactive sig-
Read or Write operation.
                                                                  nal is tri-stated.
Read Operation
                                                                  NOTES:
Once the last address bit (A4) has been clocked into                     1.    A5 is always "0"
the SDI input, the Read operation proceeds through                       2.  R/W = "1" for Read Operations
an idle period lasting two SClk periods. On the falling                  3.  R/W = "0" for Write Operations
edge of SClk Cycle #8 (see Figure 37) the serial data
                                                                         4.  Shaded box denotes a “don't care” value
output signal (SDO) becomes active. At this point,
reading the data contents of the addressed Com-
      FIGURE 37. MICROPROCESSOR SERIAL INTERFACE DATA STRUCTURE
                CS
               SClk            1     2    3    4   5   6    7    8     9     10    11   12  13   14  15  16
                SDI          R/W   A0   A1   A2  A3  A4   0    A6    D0     D1   D2   D3   D4   D5  D6  D7
                                      High Z                                                                High Z
               SDO                                                   D0     D1   D2   D3   D4   0   0   0
                                                              57


XRT73L04B
4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
REV. 1.0.1
FIGURE 38. TIMING DIAGRAM FOR THE MICROPROCESSOR SERIAL INTERFACE
                                                                         t29
          CS              t21
                                                    t27           t28
                 t22
         SCLK                                   t25
                                                          t26
                     t23    t24
          SDI            R/W            A0                A1
          CS
        SCLK
                t30                t31                t33                    t32
          SDO            D0             D1                D2          D7
              Hi-Z
                               Hi-Z
          SDI
                                              58


                                                                                                                 XRT73L04B
                                                                     4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                                         REV. 1.0.1
ORDERING INFORMATION
        PART #                                             PACKAGE                               OPERATING TEMPERATURE RANGE
     XRT73L04BIV                             144 Pin LQFP 20 x 20 x 1.4mm                                 -40°C to +85°C
  THERMAL INFORMATION                             Theta-JA = 24° C/W                                   Theta-JC = 5.5° C/W
PACKAGE DIMENSIONS
                                                  144 LEAD QUAD FLAT PACK
                                                     (20 x 20 x 1.4 mm LQFP)
                                                                rev. 1.00
                                                                 D
                                                                 D1
                                     108                                                      73
                         109                                                                     72
                                                                                                    D1  D
                         144                                                                     37
                                      1                                                       36
                                         A2
                                                e        B
                                A                                                                   C
                    Seating Plane                                                                       α
                                  A1
                                                                                                 L
                                       Note: The control dimension is the millimeter column
                                                        INCHES              MILLIMETERS
                                      SYMBOL        MIN        MAX          MIN          MAX
                                           A       0.055      0.063          1.4          1.6
                                          A1       0.002      0.006        0.05          0.15
                                          A2       0.053      0.057        1.35          1.45
                                           B       0.007      0.011        0.17          0.27
                                           C       0.004      0.008        0.09          0.20
                                           D       0.858      0.874        21.8          22.2
                                          D1       0.783      0.791        19.9          20.1
                                           e          0.020 BSC                 0.50 BSC
                                           L       0.018       0.03        0.45          0.75
                                           α         0o         7o            0o          7o
                                           β       0.490      0.510         12.45        12.96
                                                                  59


XRT73L04B                                                        4 CHANNEL DS3/E3/STS-1 LINE INTERFACE UNIT
                                                                                                        REV. 1.0.1
REVISION HISTORY
    REV #         DATE                                             CHANGES MADE
   P1.0.0       May 2002       Original
    1.0.0       July 2003      Final Release. Changed Theta-JA and Theta-JC. ICC in electrical tables returned to
                               500mA max for the 4-channel device. Changed TQFP to LQFP.
    1.0.1     October 2003     Changed the default register setting for LOSMUT_(n) in CR3.
                                                      NOTICE
EXAR Corporation reserves the right to make changes to the products contained in this publication in order
to improve design, performance or reliability. EXAR Corporation assumes no responsibility for the use of
any circuits described herein, conveys no license under any patent or other right, and makes no represen-
tation that the circuits are free of patent infringement. Charts and schedules contained here in are only for
illustration purposes and may vary depending upon a user’s specific application. While the information in
this publication has been carefully checked; no responsibility, however, is assumed for inaccuracies.
EXAR Corporation does not recommend the use of any of its products in life support applications where
the failure or malfunction of the product can reasonably be expected to cause failure of the life support sys-
tem or to significantly affect its safety or effectiveness. Products are not authorized for use in such applica-
tions unless EXAR Corporation receives, in writing, assurances to its satisfaction that: (a) the risk of injury
or damage has been minimized; (b) the user assumes all such risks; (c) potential liability of EXAR Corpo-
ration is adequately protected under the circumstances.
Copyright 2003 EXAR Corporation
Datasheet October 2003.
Reproduction, in part or whole, without the prior written consent of EXAR Corporation is prohibited.
                                                            60


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
MaxLinear:
 XRT73L04BIV-F XRT73L04BES
