                                                         SINGLE CHANNEL T1/E1/J1
                                                                                                                                     IDT82V2041E
                                                         SHORT HAUL LINE INTER-
                                                         FACE UNIT
FEATURES
•     Single channel T1/E1/J1 short haul line interfaces                               - PRBS (Pseudo Random Bit Sequence) generation and detection
•     Supports HPS (Hitless Protection Switching) for 1+1 protection                     with 215-1 PRBS polynomials for E1
      without external relays                                                          - QRSS (Quasi Random Sequence Signals) generation and detection
•     Programmable T1/E1/J1 switchability allowing one bill of ma-
                                                                                         with 220-1 QRSS polynomials for T1/J1
      terial for any line condition
                                                                                       - 16-bit BPV (Bipolar Pulse Violation) /Excess Zero/PRBS or QRSS
•     Single 3.3 V power supply with 5 V tolerance on digital interfaces
                                                                                         error counter
•     Meets or exceeds specifications in
                                                                                       - Analog loopback, Digital loopback, Remote loopback and Inband
      - ANSI T1.102, T1.403 and T1.408
                                                                                         loopback
      - ITU I.431, G.703, G.736, G.775 and G.823
                                                                                 •     Adaptive receive sensitivity up to -20 dB (Host Mode only)
      - ETSI 300-166, 300-233 and TBR12/13
                                                                                 •     Short circuit protection and internal protection diode for line
      - AT&T Pub 62411
                                                                                       drivers
•     Software programmable or hardware selectable on:
                                                                                 •     LOS (Loss Of Signal) detection with programmable LOS levels
      - Wave-shaping templates
                                                                                       (Host Mode only)
      - Line terminating impedance (T1:100 Ω, J1:110 Ω, E1:75 Ω/120 Ω)
                                                                                 •     AIS (Alarm Indication Signal) detection
      - Adjustment of arbitrary pulse shape
                                                                                 •     Supports serial control interface, Motorola and Intel Multiplexed
      - JA (Jitter Attenuator) position (receive path or transmit path)
                                                                                       interfaces and hardware control mode
      - Single rail/dual rail system interfaces
                                                                                 •     Pin compatibe to 82V2081 T1/E1/J1 Long Haul/Short Haul LIU
      - B8ZS/HDB3/AMI line encoding/decoding
                                                                                       and 82V2051E E1 Short Haul LIU
      - Active edge of transmit clock (TCLK) and receive clock (RCLK)
                                                                                 •     Package:
      - Active level of transmit data (TDATA) and receive data (RDATA)
                                                                                       Available in 44-pin TQFP packages
      - Receiver or transmitter power down
                                                                                       Green package options available
      - High impedance setting for line drivers
DESCRIPTION
    The IDT82V2041E can be configured as a single channel T1, E1 or J1           chip, and different types of loopbacks can be set according to the applica-
Line Interface Unit. The IDT82V2041E performs clock/data recovery, AMI/          tions. Four different kinds of line terminating impedance, 75 Ω, 100 Ω, 110
B8ZS/HDB3 line decoding and detects and reports the LOS conditions. An           Ω and 120 Ω are selectable. The chip also provides driver short-circuit pro-
integrated Adaptive Equalizer is available to increase the receive sensitivity   tection and internal protection diode. The chip can be controlled by either
and enable programming of LOS levels. In transmit path, there is an AMI/         software or hardware.
B8ZS/HDB3 encoder and Waveform Shaper. There is one Jitter Attenua-
                                                                                     The IDT82V2041E can be used in LAN, WAN, Routers, Wireless Base
tor, which can be placed in either the receive path or the transmit path. The
                                                                                 Stations, IADs, IMAs, IMAPs, Gateways, Frame Relay Access Devices,
Jitter Attenuator can also be disabled. The IDT82V2041E supports both
                                                                                 CSU/DSU equipment, etc.
Single Rail and Dual Rail system interfaces. To facilitate the network main-
tenance, a PRBS/QRSS generation/detection circuit is integrated in the
                                                                               1                                                      December 9, 2005
                                                                                                                                                  DSC-6775/1


IDT82V2041E                                                                                                                     SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
FUNCTIONAL BLOCK DIAGRAM
                          LOS/AIS
     LOS                  Detector
    RCLK                    B8ZS/                                                                                  Data and                                 Adaptive           Receiver                  RTIP
                                                   Jitter                                                                                 Data
  RD/RDP                  HDB3/AMI                                                                                  Clock                                   Equalizer           Internal
                                                Attenuator                                                                                Slicer
  CV/RDN                   Decoder                                                                                 Recovery                                                   Termination                RRING
                PRBS Detector         Remote                                     Digital                                                                                                     Analog
                IBLC Detector        Loopback                                   Loopback                                                                                                    Loopback
    TCLK                    B8ZS/                                                                                                                                             Transmitter                TTIP
                                                   Jitter                                                                  Waveform                 Line
  TD/TDP                  HDB3/AMI                                                                                                                                              Internal
                                                Attenuator                                                                  Shaper                 Driver                                                TRING
     TDN                   Decoder                                                                                                                                            Termination
               PRBS Generator
                IBLC Generator
                   TAOS
                  Clock                                                                                                      Register
                                      Software Control Interface                                                                                                Pin Control
                 Generator                                                                                                    Files
                                                                                                                                                                                                 VDDIO
                   MCLK
                                                                                                                                                MODE[1:0]
                                                                                                  SDI/ WR /R/W
                                                                                                                 AD[7:0]
                                     INT   CS
                                                SDO / ACK / RDY   SCLK/ALE/AS   RD / DS / SCLKE
                                                                                                                                                    TERM
                                                                                                                                               RXTXM[1:0]
                                                                                                                                                PULS[3:0]
                                                                                                                                                 PATT[1:0]                                       VDDD
                                                                                                                                                   JA[1:0]
                                                                                                                                                    MONT                                         VDDA
                                                                                                                                                                                                 VDDT
                                                                                                                                                   LP[1:0]
                                                                                                                                                     THZ
                                                                                                                                                   RCLKE
                                                                                                                                                     RPD
                                                                                                                                                      RST
                                                                                                  Figure-1 Block Diagram
Functional Block Diagram                                                                                                              2                                                         December 9, 2005


                                                                                           Table of Contents
1    IDT82V2041E Pin Configurations ............................................................................................... 8
2    Pin Description ............................................................................................................................ 9
3    Functional Description .............................................................................................................. 15
     3.1     Control Mode Selection .................................................................................................... 15
     3.2     T1/E1/J1 Mode Selection .................................................................................................. 15
     3.3     Transmit Path ................................................................................................................... 15
             3.3.1 Transmit Path System Interface.............................................................................. 15
             3.3.2 Encoder.................................................................................................................. 15
             3.3.3 Pulse Shaper .......................................................................................................... 15
                     3.3.3.1 Preset Pulse Templates .......................................................................... 15
                     3.3.3.2 User-Programmable Arbitrary Waveform ................................................ 17
             3.3.4 Transmit Path Line Interface................................................................................... 20
             3.3.5 Transmit Path Power Down .................................................................................... 20
     3.4     Receive Path .................................................................................................................... 21
             3.4.1 Receive Internal Termination .................................................................................. 21
             3.4.2 Line Monitor ............................................................................................................ 22
             3.4.3 Adaptive Equalizer .................................................................................................. 23
             3.4.4 Receive Sensitivity.................................................................................................. 23
             3.4.5 Data Slicer .............................................................................................................. 23
             3.4.6 CDR (Clock & Data Recovery)................................................................................ 23
             3.4.7 Decoder .................................................................................................................. 23
             3.4.8 Receive Path System Interface............................................................................... 24
             3.4.9 Receive Path Power Down ..................................................................................... 24
     3.5     Jitter Attenuator ................................................................................................................ 24
             3.5.1 Jitter Attenuation Function Descripton .................................................................... 24
             3.5.2 Jitter Attenuator Performance ................................................................................. 25
     3.6     Los And AIS Detection ...................................................................................................... 25
             3.6.1 LOS Detection......................................................................................................... 25
             3.6.2 AIS Detection .......................................................................................................... 26
     3.7     Transmit And Detect Internal Patterns .............................................................................. 28
             3.7.1 Transmit All Ones ................................................................................................... 28
             3.7.2 Transmit All Zeros................................................................................................... 28
             3.7.3 PRBS/QRSS Generation And Detection................................................................. 28
     3.8     Loopback .......................................................................................................................... 28
             3.8.1 Analog Loopback .................................................................................................... 28
             3.8.2 Digital Loopback ..................................................................................................... 28
             3.8.3 Remote Loopback................................................................................................... 28
Table of Contents                                                   3                                                        December 9, 2005


 IDT82V2041E                                                  SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
             3.8.4 Inband Loopback .................................................................................................... 30
                     3.8.4.1 Transmit Activate/Deactivate Loopback Code......................................... 30
                     3.8.4.2 Receive Activate/Deactivate Loopback Code.......................................... 30
                     3.8.4.3 Automatic Remote Loopback .................................................................. 31
     3.9     Error Detection/Counting And Insertion ............................................................................ 32
             3.9.1 Definition Of Line Coding Error ............................................................................... 32
             3.9.2 Error Detection And Counting ................................................................................. 32
             3.9.3 Bipolar Violation And PRBS Error Insertion ............................................................ 33
     3.10    Line Driver Failure Monitoring ........................................................................................... 33
     3.11    MCLK And TCLK .............................................................................................................. 34
             3.11.1 Master Clock (MCLK).............................................................................................. 34
             3.11.2 Transmit Clock (TCLK) ........................................................................................... 34
     3.12    Microcontroller Interfaces ................................................................................................. 35
             3.12.1 Parallel Microcontroller Interface ............................................................................ 35
             3.12.2 Serial Microcontroller Interface ............................................................................... 35
     3.13    Interrupt Handling ............................................................................................................. 35
     3.14    5V Tolerant I/O Pins ......................................................................................................... 36
     3.15    Reset Operation ................................................................................................................ 36
     3.16    Power Supply .................................................................................................................... 36
4    Programming Information ........................................................................................................ 37
     4.1     Register List And Map ...................................................................................................... 37
     4.2     Reserved Registers .......................................................................................................... 37
     4.3     Register Description ......................................................................................................... 38
             4.3.1 Control Registers .................................................................................................... 38
             4.3.2 Transmit Path Control Registers............................................................................. 40
             4.3.3 Receive Path Control Registers.............................................................................. 42
             4.3.4 Network Diagnostics Control Registers .................................................................. 44
             4.3.5 Interrupt Control Registers...................................................................................... 47
             4.3.6 Line Status Registers.............................................................................................. 50
             4.3.7 Interrupt Status Registers ....................................................................................... 52
             4.3.8 Counter Registers ................................................................................................... 54
5    Hardware Control Pin Summary .............................................................................................. 55
6    Test Specifications .................................................................................................................... 57
7    Microcontroller Interface Timing Characteristics ................................................................... 70
     7.1     Serial Interface Timing ...................................................................................................... 70
     7.2     Parallel Interface Timing ................................................................................................... 71
Table of Contents                                                 4                                                        December 9, 2005


                                                                                                      List of Tables
Table-1        Pin Description ................................................................................................................ 9
Table-2        Transmit Waveform Value For E1 75 ohm.................................................................... 17
Table-3        Transmit Waveform Value For E1 120 ohm.................................................................. 18
Table-4        Transmit Waveform Value For T1 0~133 ft................................................................... 18
Table-5        Transmit Waveform Value For T1 133~266 ft............................................................... 18
Table-6        Transmit Waveform Value For T1 266~399 ft............................................................... 18
Table-7        Transmit Waveform Value For T1 399~533 ft............................................................... 19
Table-8        Transmit Waveform Value For T1 533~655 ft............................................................... 19
Table-9        Transmit Waveform Value For J1 0~655 ft ................................................................... 19
Table-10       Impedance Matching for Transmitter ............................................................................ 20
Table-11       Impedance Matching for Receiver ................................................................................ 21
Table-12       Criteria of Starting Speed Adjustment........................................................................... 25
Table-13       LOS Declare and Clear ................................................................................................ 26
Table-14       LOS Declare and Clear Criteria, Adaptive Equalizer Enabled ...................................... 26
Table-15       AIS Condition ................................................................................................................ 27
Table-16       Criteria for Setting/Clearing the PRBS_S Bit ................................................................ 28
Table-17       EXZ Definition ............................................................................................................... 32
Table-18       Interrupt Event............................................................................................................... 36
Table-19       Register List and Map ................................................................................................... 37
Table-20       ID: Device Revision Register ........................................................................................ 38
Table-21       RST: Reset Register ..................................................................................................... 38
Table-22       GCF: Global Configuration Register ............................................................................. 38
Table-23       TERM: Transmit and Receive Termination Configuration Register .............................. 38
Table-24       JACF: Jitter Attenuation Configuration Register ........................................................... 39
Table-25       TCF0: Transmitter Configuration Register 0 ................................................................. 40
Table-26       TCF1: Transmitter Configuration Register 1 ................................................................. 40
Table-27       TCF2: Transmitter Configuration Register 2 ................................................................. 41
Table-28       TCF3: Transmitter Configuration Register 3 ................................................................. 41
Table-29       TCF4: Transmitter Configuration Register 4 ................................................................. 41
Table-30       RCF0: Receiver Configuration Register 0..................................................................... 42
Table-31       RCF1: Receiver Configuration Register 1..................................................................... 42
Table-32       RCF2: Receiver Configuration Register 2..................................................................... 43
Table-33       MAINT0: Maintenance Function Control Register 0...................................................... 44
Table-34       MAINT1: Maintenance Function Control Register 1...................................................... 44
Table-35       MAINT2: Maintenance Function Control Register 2...................................................... 45
Table-36       MAINT3: Maintenance Function Control Register 3...................................................... 45
Table-37       MAINT4: Maintenance Function Control Register 4...................................................... 45
Table-38       MAINT5: Maintenance Function Control Register 5...................................................... 45
Table-39       MAINT6: Maintenance Function Control Register 6...................................................... 46
Table-40       INTM0: Interrupt Mask Register 0 ................................................................................. 47
Table-41       INTM1: Interrupt Masked Register 1 ............................................................................. 48
List of Tables                                                    5                                                        December 9, 2005


IDT82V2041E                                                   SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-42       INTES: Interrupt Trigger Edge Select Register .............................................................                    49
Table-43       STAT0: Line Status Register 0 (real time status monitor).............................................                          50
Table-44       STAT1: Line Status Register 1 (real time status monitor).............................................                          51
Table-45       INTS0: Interrupt Status Register 0 ................................................................................            52
Table-46       INTS1: Interrupt Status Register 1 ................................................................................            53
Table-47       CNT0: Error Counter L-byte Register 0.........................................................................                 54
Table-48       CNT1: Error Counter H-byte Register 1 ........................................................................                 54
Table-49       Hardware Control Pin Summary ...................................................................................               55
Table-50       Absolute Maximum Rating ............................................................................................           57
Table-51       Recommended Operation Conditions ...........................................................................                   57
Table-52       Power Consumption......................................................................................................        58
Table-53       DC Characteristics ........................................................................................................    58
Table-54       E1 Receiver Electrical Characteristics ..........................................................................              59
Table-55       T1/J1 Receiver Electrical Characteristics......................................................................                60
Table-56       E1 Transmitter Electrical Characteristics ......................................................................               61
Table-57       T1/J1 Transmitter Electrical Characteristics..................................................................                 62
Table-58       Transmitter and Receiver Timing Characteristics .........................................................                      63
Table-59       Jitter Tolerance ............................................................................................................. 64
Table-60       Jitter Attenuator Characteristics ....................................................................................         67
Table-61       Serial Interface Timing Characteristics .........................................................................              70
Table-62       Multiplexed Motorola Read Timing Characteristics.......................................................                        71
Table-63       Multiplexed Motorola Write Timing Characteristics .......................................................                      72
Table-64       Multiplexed Intel Read Timing Characteristics ..............................................................                   73
Table-65       Multiplexed Intel Write Timing Characteristics ..............................................................                  74
List of Tables                                                    6                                                        December 9, 2005


                                                                                                     List of Figures
Figure-1        Block Diagram ................................................................................................................. 2
Figure-2        IDT82V2041E TQFP44 Package Pin Assignment .......................................................... 8
Figure-3        E1 Waveform Template Diagram .................................................................................. 16
Figure-4        E1 Pulse Template Test Circuit ..................................................................................... 16
Figure-5        DSX-1 Waveform Template .......................................................................................... 16
Figure-6        T1 Pulse Template Test Circuit ..................................................................................... 16
Figure-7        Receive Monitor Gain Adaptive Equalizer ..................................................................... 21
Figure-8        Transmit/Receive Line Circuit ....................................................................................... 22
Figure-9        Monitoring Receive Line in Another Chip ...................................................................... 22
Figure-10       Monitor Transmit Line in Another Chip .......................................................................... 22
Figure-11       Jitter Attenuator ............................................................................................................. 24
Figure-12       LOS Declare and Clear ................................................................................................. 25
Figure-13       Analog Loopback .......................................................................................................... 29
Figure-14       Digital Loopback ............................................................................................................ 29
Figure-15       Remote Loopback ......................................................................................................... 30
Figure-16       Auto Report Mode ......................................................................................................... 32
Figure-17       Manual Report Mode ..................................................................................................... 33
Figure-18       TCLK Operation Flowchart ............................................................................................ 34
Figure-19       Serial Microcontroller Interface Function Timing ........................................................... 35
Figure-20       Transmit System Interface Timing ................................................................................ 64
Figure-21       Receive System Interface Timing ................................................................................. 64
Figure-22       E1 Jitter Tolerance Performance .................................................................................. 65
Figure-23       T1/J1 Jitter Tolerance Performance .............................................................................. 66
Figure-24       E1 Jitter Transfer Performance ..................................................................................... 68
Figure-25       T1/J1 Jitter Transfer Performance ................................................................................ 69
Figure-26       Serial Interface Write Timing ......................................................................................... 70
Figure-27       Serial Interface Read Timing with SCLKE=1 ................................................................ 70
Figure-28       Serial Interface Read Timing with SCLKE=0 ................................................................ 70
Figure-29       Multiplexed Motorola Read Timing ................................................................................ 71
Figure-30       Multiplexed Motorola Write Timing ................................................................................ 72
Figure-31       Multiplexed Intel Read Timing ....................................................................................... 73
Figure-32       Multiplexed Intel Write Timing ....................................................................................... 74
List of Figures                                                    7                                                        December 9, 2005


IDT82V2041E                                                                                                               SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
1    IDT82V2041E PIN CONFIGURATIONS
                                                                                                                                                 ALE / AS / SCLK/ LP1   WR / R/W / SDI / LP0   RDY / ACK / SDO / TERM
                                      AD7 / PULS3   AD6 / PULS2   AD5 / PULS1   AD4 / PULS0              AD2 / RPD   AD1 / PATT1   AD0 / PATT0
                                                                                              AD3
                                      33            32            31            30            29         28          27            26            25                     24                      23
                       IC        34                                                                                                                                                                                     22   RD / DS / SCLKE / MONT
                     VDDT        35                                                                                                                                                                                     21   CS / RXTXM1
                    TRING        36                                                                                                                                                                                     20   INT / RXTXM0
                     TTIP        37                                                                                                                                                                                     19   VDDIO
                    GNDT                                                                                                                                                                                                18   GNDIO
                                                          IDT82V2041E
                                 38
                    GNDA         39                                                                                                                                                                                     17   MODE1
                    RRING        40                                                                                                                                                                                     16   MODE0
                     RTIP        41                                                                                                                                                                                     15   JA1
                    VDDA         42                                                                                                                                                                                     14   JA0
                      REF        43                                                                                                                                                                                     13   THZ
                       IC        44                                                                                                                                                                                     12   RST
                                        1             2             3             4            5          6           7             8               9                      10                     11
                                      TCLK
                                                    TDP / TD
                                                                  TDN           RCLK
                                                                                              RDP / RD   RDN / CV
                                                                                                                     LOS
                                                                                                                                   VDDD          MCLK                   GNDD                   RCLKE
                            Figure-2 IDT82V2041E TQFP44 Package Pin Assignment
IDT82V2041E Pin Configurations                                                                                                          8                                                                                                             December 9, 2005


 IDT82V2041E                                                                          SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
2        PIN DESCRIPTION
Table-1 Pin Description
   Name        Type            Pin No.                                                                Description
    TTIP      Analog             37        TTIP/TRING: Transmit Bipolar Tip/Ring
   TRING      output             36        These pins are the differential line driver outputs. They will be in high impedance state under the following conditions:
                                           •     THZ pin is high;
                                           •     THZ bit is set to 1;
                                           •     Loss of MCLK;
                                           •     Loss of TCLK (exceptions: Remote Loopback; transmit internal pattern by MCLK);
                                           •     Transmit path power down;
                                           •     After software reset; pin reset and power on.
    RTIP      Analog             41        RTIP/RRING: Receive Bipolar Tip/Ring
  RRING        input             40        These signals are the differential receiver inputs.
  TD/TDP           I              2        TD: Transmit Data
    TDN                           3        When the device is in single rail mode, the NRZ data to be transmitted is input on this pin. Data on TD pin is sampled into the
                                           device on the active edge of TCLK and is encoded by AMI, HDB3 or B8ZS line code rules before being transmitted. In this
                                           mode, TDN should be connected to ground.
                                           TDP/TDN: Positive/Negative Transmit Data
                                           When the device is in dual rail mode, the NRZ data to be transmitted for positive/negative pulse is input on these pins. Data
                                           on TDP/TDN pin is sampled into the device on the active edge of TCLK. The line code in dual rail mode is as follows:
                                                              TDP                     TDN            Output Pulse
                                                                0                      0          Space
                                                                0                      1          Positive Pulse
                                                                1                      0          Negative Pulse
                                                                1                      1          Space
   TCLK            I              1        TCLK: Transmit Clock input
                                           This pin inputs 1.544 MHz for T1/J1 mode or 2.048 MHz for E1 mode transmit clock. The transmit data at TD/TDP or TDN is
                                           sampled into the device on the active edge of TCLK. If TCLK is missing1 and the TCLK missing interrupt is not masked, an inter-
                                           rupt will be generated.
  RD/RDP          O               5        RD: Receive Data output
  CV/RDN                          6        In single rail mode, this pin outputs NRZ data. The data is decoded according to AMI, HDB3 or B8ZS line code rules.
                                           CV: Code Violation indication
                                           In single rail mode, the BPV/CV code violation will be reported by driving the CV pin to high level for a full clock cycle. B8ZS/
                                           HDB3 line code violation can be indicated if the B8ZS/HDB3 decoder is enabled. When AMI decoder is selected, bipolar vio-
                                           lation will be indicated.
                                           In hardware control mode, the EXZ, BPV/CV errors in received data stream are always monitored by the CV pin if single rail
                                           mode is chosen.
                                           RDP/RDN: Positive/Negative Receive Data output
                                           In dual rail mode, this pin outputs the re-timed NRZ data when CDR is enabled, or directly outputs the raw RZ slicer data if CDR
                                           is bypassed.
                                           Active edge and level select:
                                           Data on RDP/RDN or RD is clocked with either the rising or the falling edge of RCLK. The active polarity is also selectable.
Notes:
1. TCLK missing: the state of TCLK continues to be high level or low level over 70 MCLK cycles.
 Pin Description                                                                          9                                                         December 9, 2005


 IDT82V2041E                                                          SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-1 Pin Description (Continued)
   Name     Type      Pin No.                                                              Description
   RCLK       O          4    RCLK: Receive Clock output
                              This pin outputs 1.544 MHz for T1/J1 mode or 2.048 MHz for E1 mode receive clock. Under LOS condition with AIS enabled
                              (bit AISE=1), RCLK is derived from MCLK. In clock recovery mode, this signal provides the clock recovered from the RTIP/
                              RRING signal. The receive data (RD in single rail mode or RDP and RDN in dual rail mode) is clocked out of the device on the
                              active edge of RCLK. If clock recovery is bypassed, RCLK is the exclusive OR (XOR) output of the dual rail slicer data RDP
                              and RDN. This signal can be used in applications with external clock recovery circuitry.
   MCLK        I         9    MCLK: Master Clock input
                              A built-in clock system that accepts selectable 2.048MHz reference for E1 operating mode and 1.544MHz reference for T1/J1
                              operating mode. This reference clock is used to generate several internal reference signals:
                              •     Timing reference for the integrated clock recovery unit.
                              •     Timing reference for the integrated digital jitter attenuator.
                              •     Timing reference for microcontroller interface.
                              •     Generation of RCLK signal during a loss of signal condition.
                              •     Reference clock to transmit All Ones, all zeros, PRBS/QRSS pattern as well as activate or deactivate Inband Loopback
                                    code if MCLK is selected as the reference clock. Note that for ATAO and AIS, MCLK is always used as the reference
                                    clock.
                              •     Reference clock during the Transmit All Ones (TAO) condition or sending PRBS/QRSS in hardware control mode.
                              The loss of MCLK will turn TTIP/TRING into high impedance status.
    LOS       O          7    LOS: Loss of Signal Output
                              This is an active high signal used to indicate the loss of received signal. When LOS pin becomes high, it indicates the loss of
                              received signal. The LOS pin will become low automatically when valid received signal is detected again. The criteria of loss
                              of signal are described in 3.6 Los And AIS Detection.
    REF        I        43    REF: reference resister
                              An external resistor (3 KΩ, 1%) is used to connect this pin to ground to provide a standard reference current for internal circuit.
  MODE1        I        17    MODE[1:0]: operation mode of Control interface select
  MODE0                 16    The level on this pin determines which control mode is used to control the device as follows:
                                                MODE[1:0]                         Control Interface mode
                                                     00               Hardware interface
                                                     01               Serial Microcontroller Interface
                                                     10               Parallel –Multiplexed -Motorola Interface
                                                     11               Parallel –Multiplexed -Intel Interface
                              •     The serial microcontroller Interface consists of CS, SCLK, SCLKE, SDI, SDO and INT pins. SCLKE is used for the
                                    selection of the active edge of SCLK.
                              •     The parallel multiplexed microcontroller interface consists of CS, AD[7:0], DS/RD, R/W/WR, ALE/AS, ACK/RDY and
                                    INT pins. (refer to 3.12 Microcontroller Interfaces for details)
                              •     Hardware interface consists of PULS[3:0], THZ, RCLKE, LP[1:0], PATT[1:0], JA[1:0], MONT, TERM, RPD, MODE[1:0]
                                    and RXTXM[1:0]
  RCLKE        I        11    RCLKE: the active edge of RCLK select
                              In hardware control mode, this pin selects the active edge of RCLK
                              •     L= select the rising edge as the active edge of RCLK
                              •     H= select the falling edge as the active edge of RCLK
                              In software control mode, this pin should be connected to GNDIO.
 Pin Description                                                          10                                                         December 9, 2005


 IDT82V2041E                                                            SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-1 Pin Description (Continued)
   Name     Type      Pin No.                                                               Description
    CS         I        21    CS: Chip Select
                              In serial or parallel microcontroller interface mode, this is the active low enable signal. A low level on this pin enables serial or
                              parallel microcontroller interface.
  RXTXM1                      RXTXM[1:0]: Receive and transmit path operation mode select
                              In hardware control mode, these pins are used to select the single rail or dual rail operation modes as well as AMI or HDB3/
                              B8ZS line coding:
                              •     00= single rail with HDB3/B8ZS coding
                              •     01= single rail with AMI coding
                              •     10= dual rail interface with CDR enabled
                              •     11= slicer mode (dual rail interface with CDR disabled)
    INT       O         20    INT: Interrupt Request
                              In software control mode, this pin outputs the general interrupt request for all interrupt sources. These interrupt sources can be
                              masked individually via registers (INTM0, 14H) and (INTM1, 15H). The interrupt status is reported via the registers (INTS0,
                              19H) and (INTS1, 1AH).
                              Output characteristics of this pin can be defined to be push-pull (active high or active low) or open-drain (active low) by setting
                              INT_PIN[1:0] (GCF, 02H).
  RXTXM0       I              RXTXM0
                              See RXTXM1 above.
   SCLK        I        25    SCLK: Shift Clock
                              In serial microcontroller interface mode, this signal is the shift clock for the serial interface. Configuration data on SDI pin is sam-
                              pled on the rising edge of SCLK. Configuration and status data on SDO pin is clocked out of the device on the falling edge of
                              SCLK if SCLKE pin is high, or on the rising edge of SCLK if SCLKE pin is low.
    ALE                       ALE: Address Latch Enable
                              In parallel microcontroller interface mode with multiplexed Intel interface, the address on AD[7:0] is sampled into the device on
                              the falling edge of ALE.
    AS                        AS: Address Strobe
                              In parallel microcontroller interface mode with multiplexed Motorola interface, the address on AD[7:0] is latched into the device
                              on the falling edge of AS.
    LP1                       LP[1:0]: Loopback mode select
                              When the chip is configured by hardware, this pin is used to select loopback operation modes (Inband Loopback is not provided
                              in hardware control mode):
                              •     00= no loopback
                              •     01= analog loopback
                              •     10= digital loopback
                              •     11= remote loopback
    SDI        I        24    SDI: Serial Data Input
                              In serial microcontroller interface mode, this signal is the input data to the serial interface. Configuration data at SDI pin is sam-
                              pled by the device on the rising edge of SCLK.
    WR                        WR: Write Strobe
                              In Intel parallel multiplexed interface mode, this pin is asserted low by the microcontroller to initiate a write cycle. The data on
                              AD[7:0] is sampled into the device in a write operation.
    R/W                       R/W: Read/Write Select
                              In Motorola parallel multiplexed interface mode, this pin is low for write operation and high for read operation.
    LP0                       LP0
                              See LP1 above.
 Pin Description                                                            11                                                               December 9, 2005


 IDT82V2041E                                                            SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-1 Pin Description (Continued)
   Name     Type      Pin No.                                                              Description
    SDO        O        23    SDO: Serial Data Output
                              In serial microcontroller interface mode, this signal is the output data of the serial interface. Configuration or Status data at SDO
                              pin is clocked out of the device on the falling edge of SCLK if SCLKE pin is high, or on the rising edge of SCLK if SCLKE pin
                              is low.
    ACK                       ACK: Acknowledge Output
                              In Motorola parallel mode interface, the low level on this pin means:
                              •      The valid information is on the data bus during a read operation.
                              •      The write data has been accepted during a write cycle.
    RDY                       RDY: Ready signal output
                              In Intel parallel mode interface, the low level on this pin means a read or write operation is in progress; a high acknowledges
                              a read or write operation has been completed.
   TERM         I             TERM: Internal or external termination select in hardware mode
                              This pin selects internal or external impedance matching for both receiver and transmitter.
                              •      0 = ternary interface with external impedance matching network
                              •      1 = ternary interface with internal impedance matching network
  SCLKE         I       22    SCLKE: Serial Clock Edge Select
                              In serial microcontroller interface mode, this signal selects the active edge of SCLK for outputting SDO. The output data is valid
                              after some delay from the active clock edge. It can be sampled on the opposite edge of the clock. The active clock edge which
                              clocks the data out of the device is selected as shown below:
                                            SCLKE                            SCLK
                                              Low         Rising edge is the active edge.
                                             High         Falling edge is the active edge.
     RD                       RD: Read Strobe
                              In Intel parallel multiplexed interface mode, the data is driven to AD[7:0] by the device during low level of RD in a read operation.
     DS                       DS: Data Strobe
                              In Motorola parallel multiplexed interface mode, this signal is the data strobe of the parallel interface. In a write operation (R/
                              W = 0), the data on AD[7:0] is sampled into the device. In a read operation (R/W = 1), the data is driven to AD[7:0] by the device.
  MONT                        MONT: Receive Monitor gain select
                              In hardware control mode with ternary interface, this pin selects the receive monitor gain of receiver:
                              0= 0 dB
                              1= 26 dB
    AD7       I/O       33    AD7: Address/Data Bus bit7
                              In Intel/Motorola multiplexed interface mode, this signal is the multiplexed bi-directional address/data bus of the microcontroller
                              interface.
                              In serial microcontroller interface mode, this pin should be connected to ground through a 10 kΩ resistor.
  PULS3         I             PULS[3:0]: these pins are used to select the following functions in hardware control mode:
                              •      T1/J1/E1 mode
                              •      Transmit pulse template
                              •      Internal termination impedance (75Ω/120Ω/100Ω/110Ω)
                              Refer to 5 Hardware Control Pin Summary for details.
 Pin Description                                                            12                                                             December 9, 2005


 IDT82V2041E                                                          SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-1 Pin Description (Continued)
   Name     Type      Pin No.                                                             Description
   AD6        I/O       32    AD6: Address/Data Bus bit6
                              In Intel/Motorola multiplexed interface mode, this signal is the multiplexed bi-directional address/data bus of the microcontroller
                              interface.
                              In serial microcontroller interface mode, this pin should be connected to ground through a 10 kΩ resistor.
  PULS2         I             See above.
   AD5        I/O       31    AD5: Address/Data Bus bit5
                              In Intel/Motorola multiplexed interface mode, this signal is the multiplexed bi-directional address/data bus of the microcontroller
                              interface.
                              In serial microcontroller interface mode, this pin should be connected to ground through a 10 kΩ resistor.
  PULS1         I             See above.
   AD4        I/O       30    AD4: Address/Data Bus bit4
                              In Intel/Motorola multiplexed interface mode, this signal is the multiplexed bi-directional address/data bus of the microcontroller
                              interface.
                              In serial microcontroller interface mode, this pin should be connected to ground through a 10 kΩ resistor.
  PULS0         I             See above.
   AD3        I/O       29    AD3: Address/Data Bus bit3
                              In Intel/Motorola multiplexed interface mode, this signal is the multiplexed bi-directional address/data bus of the microcontroller
                              interface.
                              In serial microcontroller interface mode, this pin should be connected to ground through a 10 kΩ resistor.
                              In Hardware mode, this pin has to be tied to GND.
   AD2        I/O       28    AD2: Address/Data Bus bit2
                              In Intel/Motorola multiplexed interface mode, this signal is the multiplexed bi-directional address/data bus of the microcontroller
                              interface.
                              In serial microcontroller interface mode, this pin should be connected to ground through a 10 kΩ resistor.
   RPD          I             RPD: Receiver power down control in hardware control mode
                              •      0= normal operation
                              •      1= receiver power down
   AD1        I/O       27    AD1: Address/Data Bus bit1
                              In Intel/Motorola multiplexed interface mode, this signal is the multiplexed bi-directional address/data bus of the microcontroller
                              interface.
                              In serial microcontroller interface mode, this pin should be connected to ground through a 10 kΩ resistor.
  PATT1         I             PATT[1:0]: Transmit pattern select
                              In hardware control mode, this pin selects the transmit pattern
                              •      00 = normal
                              •      01= All Ones
                              •      10= PRBS
                              •      11= transmitter power down
   AD0        I/O       26    AD0: Address/Data Bus bit0
                              In Intel/Motorola multiplexed interface mode, this signal is the multiplexed bi-directional address/data bus of the microcontroller
                              interface.
                              In serial microcontroller interface mode, this pin should be connected to ground through a 10 kΩ resistor.
  PATT0         I             See above.
 Pin Description                                                         13                                                             December 9, 2005


 IDT82V2041E                                                           SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-1 Pin Description (Continued)
   Name     Type      Pin No.                                                             Description
    JA1        I        15    JA[1:0]: Jitter attenuation position, bandwidth and the depth of FIFO select (only used for hardware control mode)
                              •     00 = JA is disabled
                              •     01 = JA in receiver, broad bandwidth, FIFO=64 bits
                              •     10 = JA in receiver, narrow bandwidth, FIFO=128 bits
                              •     11 = JA in transmitter, narrow bandwidth, FIFO=128 bits
                              In software control mode, this pin should be connected to ground.
    JA0        I        14    See above.
    RST        I        12    RST: Hardware reset
                              The chip is forced to reset state if a low signal is input on this pin for more than 100 ns. MCLK must be active during reset.
    THZ        I        13    THZ: Transmitter Driver High Impedance Enable
                              This signal enables or disables transmitter driver. A low level on this pin enables the driver while a high level on this pin places
                              driver in high impedance state. Note that the functionality of the internal circuits is not affected by this signal.
                                                          Power Supplies and Grounds
  VDDIO       -         19    3.3 V I/O power supply
  GNDIO        -        18    I/O ground
   VDDT        -        35    3.3 V power supply for transmitter driver
   GNDT       -         38    Analog ground for transmitter driver
   VDDA        -        42    3.3 V analog core power supply
  GNDA        -         39    Analog core ground
   VDDD       -          8    Digital core power supply
  GNDD        -         10    Digital core ground
                                                                        Others
     IC       -         34    IC: Internal connection
                              Internal Use. This pin should be left open when in normal operation.
     IC       -         44    IC: Internal connection
                              Internal Use. This pin should be connected to ground when in normal operation.
 Pin Description                                                           14                                                             December 9, 2005


  IDT82V2041E                                                            SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
3         FUNCTIONAL DESCRIPTION                                              bit (TCF0, 05H). And the active level of the data on TD/TDP and TDN can
                                                                              be selected by the TD_INV bit (TCF0, 05H). In hardware control mode, the
3.1       CONTROL MODE SELECTION                                              falling edge of TCLK and the active high of transmit data are always used.
    The IDT82V2041E can be configured by software or by hardware. The              The transmit data from the system side can be provided in two different
software control mode supports Serial Control Interface, Motorola Multi-      ways: Single Rail and Dual Rail. In Single Rail mode, only TD pin is used
plexed Control Interface and Intel Multiplexed Control Interface. The Con-    for transmitting data and the T_MD[1] bit (TCF0, 05H) should be set to ‘0’.
trol mode is selected by MODE1 and MODE0 pins as follows:                     In Dual Rail Mode, both TDP pin and TDN pin are used for transmitting data,
                                                                              the T_MD[1] bit (TCF0, 05H) should be set to ‘1’.
                                      Control Interface mode
                                                                              3.3.2      ENCODER
        00         Hardware interface
        01         Serial Microcontroller Interface.                               In Single Rail mode, when T1/J1 mode is selected, the Encoder can be
        10         Parallel –Multiplexed -Motorola Interface                  selected to be a B8ZS encoder or an AMI encoder by setting T_MD[0] bit
                                                                              (TCF0, 05H).
        11         Parallel –Multiplexed -Intel Interface
                                                                                   In Single Rail mode, when E1 mode is selected, the Encoder can be con-
•     The serial microcontroller Interface consists of CS, SCLK, SCLKE,       figured to be a HDB3 encoder or an AMI encoder by setting T_MD[0] bit
      SDI, SDO and INT pins. SCLKE is used for the selection of active        (TCF0, 05H).
      edge of SCLK.
                                                                                   In both T1/J1 mode and E1 mode, when Dual Rail mode is selected (bit
•     The parallel Multiplexed microcontroller Interface consists of CS,
      AD[7:0], DS/RD, R/W/WR, ALE/AS, ACK/RDY and INT pins.                   T_MD[1] is ‘1’), the Encoder is by-passed. In Dual Rail mode, a logic ‘1’ on
•     Hardware interface consists of PULS[3:0], THZ, RCLKE, LP[1:0],          the TDP pin and a logic ‘0’ on the TDN pin results in a negative pulse on the
      PATT[1:0], JA[1:0], MONT, TERM, RPD, MODE[1:0] and                      TTIP/TRING; a logic ‘0’ on TDP pin and a logic ‘1’ on TDN pin results in a
      RXTXM[1:0]. Refer to 5 Hardware Control Pin Summary for details         positive pulse on the TTIP/TRING. If both TDP and TDN are high or low,
      about hardware control.                                                 the TTIP/TRING outputs a space (Refer to TD/TDP, TDN Pin Description).
                                                                                   In hardware control mode, the operation mode of receive and transmit
3.2       T1/E1/J1 MODE SELECTION
                                                                              path can be selected by setting RXTXM1 and RXTXM0 pins. Refer to 5
    When the chip is configured by software, T1/E1/J1 mode is selected by     Hardware Control Pin Summary for details.
the T1E1 bit (GCF, 02H). In E1 application, the T1E1 bit (GCF, 02H) should
be set to ‘0’. In T1/J1 application, the T1E1 bit should be set to ‘1’.       3.3.3      PULSE SHAPER
    When the chip is configured by hardware, T1/E1/J1 mode is selected             The IDT82V2041E provides two ways of manipulating the pulse shape
by PULS[3:0] pins. These pins also determine transmit pulse template and      before sending it. One is to use preset pulse templates, the other is to use
internal termination impedance. Refer to 5 Hardware Control Pin Summary       user-programmable arbitrary waveform template.
for details.                                                                       In software control mode, the pulse shape can be selected by setting
                                                                              the related registers.
3.3       TRANSMIT PATH
                                                                                   In hardware control mode, the pulse shape can be selected by setting
    The transmit path of IDT82V2041E consists of an Encoder, an optional      PULS[3:0] pins. Refer to 5 Hardware Control Pin Summary for details.
Jitter Attenuator, a Waveform Shaper, a Line Driver and a Programmable
Transmit Termination.                                                         3.3.3.1 PRESET PULSE TEMPLATES
                                                                                   For E1 applications, the pulse shape is shown in Figure-3 according to
3.3.1     TRANSMIT PATH SYSTEM INTERFACE
                                                                              the G.703 and the measuring diagram is shown in Figure-4. In internal
    The transmit path system interface consists of TCLK pin, TD/TDP pin       impedance matching mode, if the cable impedance is 75 Ω, the PULS[3:0]
and TDN pin. In E1 mode, TCLK is a 2.048 MHz clock. In T1/J1 mode, TCLK       bits (TCF1, 06H) should be set to ‘0000’; if the cable impedance is 120 Ω,
is a 1.544 MHz clock. If TCLK is missing for more than 70 MCLK cycles, an     the PULS[3:0] bits (TCF1, 06H) should be set to ‘0001’. In external imped-
interrupt will be generated if it is not masked.                              ance matching mode, for both E1/75 Ω and E1/120 Ω cable impedance,
                                                                              PULS[3:0] should be set to ‘0001’.
    Transmit data is sampled on the TD/TDP and TDN pins by the active
edge of TCLK. The active edge of TCLK can be selected by the TCLK_SEL
  Functional Description                                                   15                                                       December 9, 2005


 IDT82V2041E                                                                                                                   SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
                                                                                                                                      grades, and there are five pulse templates used for each of the cable length.
                              1 .2 0                                                                                                  The pulse template is selected by PULS[3:0] bits (TCF1, 06H).
                               1 .0 0
                                                                                                                                                                1.2
                               0 .8 0
                                                                                                                                                                  1
       Normalized Amplitude
                               0 .6 0
                                                                                                                                                                0.8
                                                                                                                                                                0.6
                                                                                                                                         Normalized Amplitude
                               0 .4 0
                                                                                                                                                                0.4
                               0 .2 0
                                                                                                                                                                0.2
                               0 .0 0
                                                                                                                                                                  0
                               -0 .2 0
                                         - 0 .6   -0 .4       -0 .2                 0                  0 .2      0 .4   0 .6                                    -0.2
                                                                      T im e in U n it In te rv a ls
                                                                                                                                                                -0.4
                              Figure-3 E1 Waveform Template Diagram                                                                                             -0.6
                                                                                                                                                                       0          250     500               750         1000          1250
                                                                                                                                                                                                Time (ns)
                                                                                                                                                                            Figure-5 DSX-1 Waveform Template
                                                      TTIP
                         IDT82V2041E                                                                          RLOAD     VOUT
                                                                                                                                                                                  TTIP
                                                      TRING
                                                                                                                                                                                                             Cable
                                                                                                                                                                IDT82V2041E                                                    RLOAD VOUT
  Note: 1. For RLOAD = 75 Ω (nom), Vout (Peak)=2.37V (nom)
                                                                                                                                                                                  TRING
        2. For RLOAD =120 Ω (nom), Vout (Peak)=3.00V (nom)
                              Figure-4 E1 Pulse Template Test Circuit                                                                               Note: RLOAD = 100 Ω ± 5%
   For T1 applications, the pulse shape is shown in Figure-5 according to                                                                                                  Figure-6 T1 Pulse Template Test Circuit
the T1.102 and the measuring diagram is shown in Figure-6. This also
meets the requirement of G.703, 2001. The cable length is divided into five                                                              For J1 applications, the PULS[3:0] (TCF1, 06H) should be set to ‘0111’.
                                                                                                                                      Table-10 lists these values.
Functional Description                                                                                                           16                                                                                  December 9, 2005


 IDT82V2041E                                                                  SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
3.3.3.2 USER-PROGRAMMABLE ARBITRARY WAVEFORM                                           (6).Write the scaling data to SCAL[5:0] bits (TCF2, 07H) to scale the
                                                                                           amplitude of the waveform based on the selected standard pulse
    When the PULS[3:0] bits are set to ‘11xx’, user-programmable arbitrary
                                                                                           amplitude
waveform generator mode can be used. This allows the transmitter perfor-
mance to be tuned for a wide variety of line condition or special application.         When more than one UI is used to compose the pulse template, the over-
                                                                                   lap of two consecutive pulses could make the pulse amplitude overflow
    Each pulse shape can extend up to 4 UIs (Unit Interval), addressed by
                                                                                   (exceed the maximum limitation) if the pulse amplitude is not set properly.
UI[1:0] bits (TCF3, 08H) and each UI is divided into 16 sub-phases,
                                                                                   This overflow is captured by DAC_OV_IS bit (INTS1, 1AH), and, if enabled
addressed by the SAMP[3:0] bits (TCF3, 08H). The pulse amplitude of each
                                                                                   by the DAC_OV_IM bit (INTM1, 15H), an interrupt will be generated.
phase is represented by a binary byte, within the range from +63 to -63,
stored in WDAT[6:0] bits (TCF4, 09H) in signed magnitude form. The most                The following tables give all the sample data based on the preset pulse
positive number +63 (D) represents the positive maximum amplitude of the           templates in detail for reference. For preset pulse templates, scaling up/
transmit pulse while the most negative number -63 (D) represents the max-          down against the pulse amplitude is not supported.
imum negative amplitude of the transmit pulse. Therefore, up to 64 bytes               1.Table-2 Transmit Waveform Value For E1 75 Ω
are used.                                                                              2.Table-3 Transmit Waveform Value For E1 120 Ω
  There are eight standard templates which are stored in an on-chip ROM.               3. Table-4 Transmit Waveform Value For T1 0~133 ft
User can select one of them as reference and make some changes to get                  4.Table-5 Transmit Waveform Value For T1 133~266 ft
the desired waveform.                                                                  5.Table-6 Transmit Waveform Value For T1 266~399 ft
                                                                                       6.Table-7 Transmit Waveform Value For T1 399~533 ft
    User can change the wave shape and the amplitude to get the desired
                                                                                       7.Table-8 Transmit Waveform Value For T1 533~655 ft
pulse shape. In order to do this, firstly, users can choose a set of waveform
                                                                                       8.Table-9 Transmit Waveform Value For J1 0~655 ft
value from the following eight tables, which is the most similar to the desired
pulse shape. Table-2, Table-3, Table-4, Table-5, Table-6, Table-7, Table-8
and Table-9 list the sample data and scaling data of each of the eight tem-        Table-2 Transmit Waveform Value For E1 75 ohm
plates. Then modify the corresponding sample data to get the desired trans-            Sample            UI 1          UI 2            UI 3         UI 4
mit pulse shape.                                                                            1          0000000      0000000          0000000      0000000
    Secondly, through the value of SCAL[5:0] bits increased or decreased                    2          0000000      0000000          0000000      0000000
by 1, the pulse amplitude can be scaled up or down at the percentage ratio                  3          0000000      0000000          0000000      0000000
against the standard pulse amplitude if needed. For different pulse shapes,                 4          0001100      0000000          0000000      0000000
the value of SCAL[5:0] bits and the scaling percentage ratio are different.
                                                                                            5          0110000      0000000          0000000      0000000
The following eight tables list these values.
                                                                                            6          0110000      0000000          0000000      0000000
    Do the followings step by step, the desired waveform can be pro-                        7          0110000      0000000          0000000      0000000
grammed, based on the selected waveform template:
                                                                                            8          0110000      0000000          0000000      0000000
    (1).Select the UI by UI[1:0] bits (TCF3, 08H)
    (2).Specify the sample address in the selected UI by SAMP [3:0] bits                    9          0110000      0000000          0000000      0000000
        (TCF3, 08H)                                                                        10          0110000      0000000          0000000      0000000
    (3).Write sample data to WDAT[6:0] bits (TCF4, 09H). It contains the                   11          0110000      0000000          0000000      0000000
        data to be stored in the RAM, addressed by the selected UI and the                 12          0110000      0000000          0000000      0000000
        corresponding sample address.                                                      13          0000000      0000000          0000000      0000000
    (4).Set the RW bit (TCF3, 08H) to ‘0’ to implement writing data to RAM,
                                                                                           14          0000000      0000000          0000000      0000000
        or to ‘1’ to implement read data from RAM
    (5).Implement the Read from RAM/Write to RAM by setting the DONE                       15          0000000      0000000          0000000      0000000
        bit (TCF3, 08H)                                                                    16          0000000      0000000          0000000      0000000
                                                                                    SCAL[5:0] = 100001 (default), One step change of this value of SCAL[5:0]
    Repeat the above steps until all the sample data are written to or read
                                                                                    results in 3% scaling up/down against the pulse amplitude.
from the internal RAM.
 Functional Description                                                         17                                                         December 9, 2005


 IDT82V2041E                                                                 SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-3 Transmit Waveform Value For E1 120 ohm                                    Table-5 Transmit Waveform Value For T1 133~266 ft
    Sample           UI 1         UI 2               UI 3              UI 4          Sample      UI 1      UI 2         UI 3        UI 4
       1           0000000      0000000           0000000            0000000            1      0011011   1000011      0000000     0000000
       2           0000000      0000000           0000000            0000000            2      0101110   1000010      0000000     0000000
       3           0000000      0000000           0000000            0000000            3      0101100   1000001      0000000     0000000
       4           0001111      0000000           0000000            0000000            4      0101010   0000000      0000000     0000000
       5           0111100      0000000           0000000            0000000            5      0101001   0000000      0000000     0000000
       6           0111100      0000000           0000000            0000000            6      0101000   0000000      0000000     0000000
       7           0111100      0000000           0000000            0000000            7      0100111   0000000      0000000     0000000
       8           0111100      0000000           0000000            0000000            8      0100110   0000000      0000000     0000000
       9           0111100      0000000           0000000            0000000            9      0100101   0000000      0000000     0000000
       10          0111100      0000000           0000000            0000000           10      1010000   0000000      0000000     0000000
       11          0111100      0000000           0000000            0000000           11      1001111   0000000      0000000     0000000
       12          0111100      0000000           0000000            0000000           12      1001101   0000000      0000000     0000000
       13          0000000      0000000           0000000            0000000           13      1001010   0000000      0000000     0000000
       14          0000000      0000000           0000000            0000000           14      1001000   0000000      0000000     0000000
       15          0000000      0000000           0000000            0000000           15      1000110   0000000      0000000     0000000
       16          0000000      0000000           0000000            0000000           16      1000100   0000000      0000000     0000000
SCAL[5:0] = 100001 (default), One step change of this value of SCAL[5:0]                                  See Table-4
results in 3% scaling up/down against the pulse amplitude.
                                                                                  Table-6 Transmit Waveform Value For T1 266~399 ft
Table-4 Transmit Waveform Value For T1 0~133 ft                                      Sample      UI 1      UI 2         UI 3        UI 4
    Sample           UI 1         UI 2               UI 3              UI 4             1      0011111   1000011      0000000     0000000
       1           0010111      1000010           0000000            0000000            2      0110100   1000010      0000000     0000000
       2           0100111      1000001           0000000            0000000            3      0101111   1000001      0000000     0000000
       3           0100111      0000000           0000000            0000000            4      0101100   0000000      0000000     0000000
       4           0100110      0000000           0000000            0000000            5      0101011   0000000      0000000     0000000
       5           0100101      0000000           0000000            0000000            6      0101010   0000000      0000000     0000000
       6           0100101      0000000           0000000            0000000            7      0101001   0000000      0000000     0000000
       7           0100101      0000000           0000000            0000000            8      0101000   0000000      0000000     0000000
       8           0100100      0000000           0000000            0000000            9      0100101   0000000      0000000     0000000
       9           0100011      0000000           0000000            0000000           10      1010111   0000000      0000000     0000000
       10          1001010      0000000           0000000            0000000           11      1010011   0000000      0000000     0000000
       11          1001010      0000000           0000000            0000000           12      1010000   0000000      0000000     0000000
       12          1001001      0000000           0000000            0000000           13      1001011   0000000      0000000     0000000
       13          1000111      0000000           0000000            0000000           14      1001000   0000000      0000000     0000000
       14          1000101      0000000           0000000            0000000           15      1000110   0000000      0000000     0000000
       15          1000100      0000000           0000000            0000000           16      1000100   0000000      0000000     0000000
       16          1000011      0000000           0000000            0000000                              See Table-4
SCAL[5:0] = 1101101 (default), One step change of this value of SCAL[5:0]
results in 2% scaling up/down against the pulse amplitude.
1. In T1 mode, when arbitrary pulse for short haul application is configured,
users should write ‘110110’ to SCAL[5:0] bits if no scaling is required.
 Functional Description                                                        18                                           December 9, 2005


 IDT82V2041E                                           SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-7 Transmit Waveform Value For T1 399~533 ft           Table-9 Transmit Waveform Value For J1 0~655 ft
   Sample       UI 1      UI 2        UI 3        UI 4         Sample            UI 1         UI 2             UI 3        UI 4
     1        0100000   1000011     0000000    0000000              1          0010111      1000010          0000000     0000000
     2        0111011   1000010     0000000    0000000              2          0100111      1000001          0000000     0000000
     3        0110101   1000001     0000000    0000000              3          0100111      0000000          0000000     0000000
     4        0101111   0000000     0000000    0000000              4          0100110      0000000          0000000     0000000
     5        0101110   0000000     0000000    0000000              5          0100101      0000000          0000000     0000000
     6        0101101   0000000     0000000    0000000              6          0100101      0000000          0000000     0000000
     7        0101100   0000000     0000000    0000000              7          0100101      0000000          0000000     0000000
     8        0101010   0000000     0000000    0000000              8          0100100      0000000          0000000     0000000
     9        0101000   0000000     0000000    0000000              9          0100011      0000000          0000000     0000000
     10       1011000   0000000     0000000    0000000             10          1001010      0000000          0000000     0000000
     11       1011000   0000000     0000000    0000000             11          1001010      0000000          0000000     0000000
     12       1010011   0000000     0000000    0000000             12          1001001      0000000          0000000     0000000
     13       1001100   0000000     0000000    0000000             13          1000111      0000000          0000000     0000000
     14       1001000   0000000     0000000    0000000             14          1000101      0000000          0000000     0000000
     15       1000110   0000000     0000000    0000000             15          1000100      0000000          0000000     0000000
     16       1000100   0000000     0000000    0000000             16          1000011      0000000          0000000     0000000
                        See Table-4                         SCAL[5:0] = 110110 (default), One step change of this value of SCAL[5:0]
                                                            results in 2% scaling up/down against the pulse amplitude.
Table-8 Transmit Waveform Value For T1 533~655 ft
   Sample       UI 1      UI 2        UI 3        UI 4
     1        0100000   1000011     0000000    0000000
     2        0111111   1000010     0000000    0000000
     3        0111000   1000001     0000000    0000000
     4        0110011   0000000     0000000    0000000
     5        0101111   0000000     0000000    0000000
     6        0101110   0000000     0000000    0000000
     7        0101101   0000000     0000000    0000000
     8        0101100   0000000     0000000    0000000
     9        0101001   0000000     0000000    0000000
     10       1011111   0000000     0000000    0000000
     11       1011110   0000000     0000000    0000000
     12       1010111   0000000     0000000    0000000
     13       1001111   0000000     0000000    0000000
     14       1001001   0000000     0000000    0000000
     15       1000111   0000000     0000000    0000000
     16       1000100   0000000     0000000    0000000
                        See Table-4
 Functional Description                                  19                                                        December 9, 2005


 IDT82V2041E                                                                          SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
3.3.4      TRANSMIT PATH LINE INTERFACE                                                    PULS[3:0] pins will be set to select the specific internal impedance. Refer
                                                                                           to 5 Hardware Control Pin Summary for details.
     The transmit line interface consists of TTIP pin and TRING pin. The
impedance matching can be realized by the internal impedance matching                           The TTIP/TRING pins can also be turned into high impedance by setting
circuit or the external impedance matching circuit. If T_TERM[2] is set to                 the THZ bit (TCF1, 06H) to ‘1’. In this state, the internal transmit circuits are
‘0’, the internal impedance matching circuit will be selected. In this case,               still active.
the T_TERM[1:0] bits (TERM, 03H) can be set to choose 75 Ω, 100 Ω, 110
                                                                                                In hardware control mode, TTIP/TRING can be turned into high imped-
Ω or 120 Ω internal impedance of TTIP/TRING. If T_TERM[2] is set to ‘1’,
                                                                                           ance by pulling THZ pin to high. Refer to 5 Hardware Control Pin Summary
the internal impedance matching circuit will be disabled. In this case, the
                                                                                           for details.
external impedance matching circuit will be used to realize the impedance
matching. For T1/J1 mode, the external impedance matching circuit for the                       Besides, in the following cases, both TTIP/TRING pins will also become
transmitter is not supported. Figure-8 shows the appropriate external com-                 high impedance:
ponents to connect with the cable. Table-10 is the list of the recommended                 •      Loss of MCLK;
impedance matching for transmitter.                                                        •      Loss of TCLK (exceptions: Remote Loopback; Transmit internal
                                                                                                  pattern by MCLK);
     In hardware control mode, TERM pin can be used to select impedance                    •      Transmit path power down;
matching for both receiver and transmitter. If TERM pin is low, external                   •      After software reset; pin reset and power on.
impedance network will be used for impedance matching. If TERM pin is
high, internal impedance will be used for impedance matching and
Table-10 Impedance Matching for Transmitter
        Cable Configuration                                     Internal Termination                                         External Termination
                                                 T_TERM[2:0]                PULS[3:0]        RT             T_TERM[2:0]              PULS[3:0]                 RT
               E1/75 Ω                                 000                    0000           0Ω                  1XX                   0001                  9.4 Ω
               E1/120 Ω                                001                    0001                                                     0001
             T1/0~133 ft                               010                    0010                                 -                      -                     -
            T1/133~266 ft                                                     0011
            T1/266~399 ft                                                     0100
            T1/399~533 ft                                                     0101
            T1/533~655 ft                                                     0110
              J1/0~655 ft                              011                    0111
     Note: The precision of the resistors should be better than ± 1%
3.3.5      TRANSMIT PATH POWER DOWN                                                             In hardware control mode, the transmit path can be powered down by
                                                                                           pulling both PATT1 and PATT0 pins to high. Refer to 5 Hardware Control
     The transmit path can be powered down by setting the T_OFF bit (TCF0,
                                                                                           Pin Summary for details.
05H) to ‘1’. In this case, the TTIP/TRING pins are turned into high imped-
ance.
 Functional Description                                                                 20                                                         December 9, 2005


 IDT82V2041E                                                             SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
3.4     RECEIVE PATH                                                             is set to ‘0’, the internal impedance matching circuit will be selected. In this
                                                                                 case, the R_TERM[1:0] bits (TERM, 03H) can be set to choose 75 Ω, 100
   The receive path consists of Receive Internal Termination, Monitor            Ω, 110 Ω or 120 Ω internal impedance of RTIP/RRING. If R_TERM[2] is
Gain, Amplitude/Wave Shape Detector, Digital Tuning Controller, Adaptive         set to ‘1’, the internal impedance matching circuit will be disabled. In this
Equalizer, Data Slicer, CDR (Clock & Data Recovery), Optional Jitter             case, the external impedance matching circuit will be used to realize the
Attenuator, Decoder and LOS/AIS Detector. Refer to Figure-7.                     impedance matching. Figure-8 shows the appropriate external compo-
3.4.1   RECEIVE INTERNAL TERMINATION                                             nents to connect with the cable. Table-11 is the list of the recommended
                                                                                 impedance matching for receiver.
   The impedance matching can be realized by the internal impedance
matching circuit or the external impedance matching circuit. If R_TERM[2]
                                                                                                                                    LOS/AIS
                                                                                                                                                          LOS
                                                                                                                                    Detector
                                                                                                                                                          RCLK
           RTIP                 Receive                                                          Clock
                                                    Adaptive Equalizer/      Data Slicer        and Data             Jitter          Decoder              RDP
                                Internal               Monitor Gain                                               Attenuator
          RRING               termination                                                      Recovery                                                   RDN
                                          Figure-7 Receive Monitor Gain Adaptive Equalizer
Table-11 Impedance Matching for Receiver
            Cable Configuration                           Internal Termination                                          External Termination
                                                     R_TERM[2:0]                      RR                    R_TERM[2:0]                          RR
                  E1/75 Ω                                  000                      120 Ω                       1XX                             75 Ω
                  E1/120 Ω                                 001                                                                                  120 Ω
                      T1                                   010                                                                                  100 Ω
                      J1                                   011                                                                                  110 Ω
 Functional Description                                                      21                                                             December 9, 2005


 IDT82V2041E                                                                               SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
                                                                               VDDA
                                           1:1                                  D8
                                   A      • •                    •                    •·    RTIP                                                  3.3 V
                                                                                D7                                        VDDA
                             RX Line                         4       VDDA                                                                    68µF 1
                                                        RR                                                                       0.1µF
                                                                     D6
                                                                                                        IDT82V2041E
                                   B                             •        •·                RRING                         GNDA           •
                                                                     D5        VDDT
                                           2:1                   R T4           D4
                                          • •                                         •·    TTIP
                                                                                D3                                                                3.3 V
                                                                                                                          VDDT
                               TX Line             Cp                                                                                        68µF 1
                                                                                                                                 0.1µF
                                                                               VDDT
                                                                                D2                                        GNDT           •
                                                                      4
                                                                                      •·    TRING
                                                                 RT             D1
               Note: 1. Common decoupling capacitor, one per chip
                    2. Cp 0-560 (pF)
                    3. D1 - D8, Motorola - MBR0540T1; International Rectifier - 11DQ04 or 10BQ060
                    4. RT/ RR: refer to Table-10 and Table-11 respecivley for RT and RR values
                                                   Figure-8 Transmit/Receive Line Circuit
     In hardware control mode, TERM and PULS[3:0] pins can be used to
select impedance matching for both receiver and transmitter. If TERM pin                                  DSX cross connect
is low, external impedance network will be used for impedance matching.                                         point
                                                                                                                                                       RTIP
If TERM pin is high, internal impedance will be used for impedance match-
                                                                                                                                                                   monitor
ing and PULS[3:0] pins can be set to select the specific internal impedance.                                                                                      gain=0dB
Refer to 5 Hardware Control Pin Summary for details.                                                                                                  RRING
                                                                                                                      R
3.4.2   LINE MONITOR                                                                                                                                            normal receive mode
    In both T1/J1 and E1 short haul applications, the non-intrusive monitor-
                                                                                                                                                       RTIP
ing on channels located in other chips can be performed by tapping the mon-
                                                                                                                                                                   monitor gain
itored channel through a high impedance bridging circuit. Refer to Figure-                                                                                         =22/26/32dB
9 and Figure-11.
                                                                                                                                                      RRING
   After a high resistance bridging circuit, the signal arriving at the RTIP/                                                                                   monitor mode
RRING is dramatically attenuated. To compensate this attenuation, the
Monitor Gain can be used to boost the signal by 22 dB, 26 dB and 32 dB,                             Figure-9 Monitoring Receive Line in Another Chip
selected by MG[1:0] bits (RCF2, 0CH). For normal operation, the Monitor
Gain should be set to 0 dB.
                                                                                                        DSX cross connect
    In hardware control mode, MONT pin can be used to set the Monitor                                         point
                                                                                                                                               TTIP
Gain. When MONT pin is low, the Monitor Gain is 0 dB. When MONT pin
is high, the Monitor Gain is 26 dB. Refer to 5 Hardware Control Pin Summary
for details.                                                                                                                                   TRING
                                                                                                                      R
  Note that LOS indication is not supported if the device is operated in Line                                                                                   normal transmit mode
Monitor Mode
                                                                                                                                               RTIP
                                                                                                                                                               monitor gain
                                                                                                                                                                monitor gain
                                                                                                                                                               =22/26/32dB
                                                                                                                                               RRING
                                                                                                                                                                    monitor mode
                                                                                                    Figure-10 Monitor Transmit Line in Another Chip
Functional Description                                                                       22                                                               December 9, 2005


  IDT82V2041E                                                           SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
3.4.3      ADAPTIVE EQUALIZER                                                3.4.4    RECEIVE SENSITIVITY
     The Adaptive Equalizer can be enabled to increase the receive sensi-        The Receive Sensitivity for both E1 and T1/J1 is -10 dB. With the Adap-
tivity and to allow programming of the LOS level up to -24 dB. See3.6 Los    tive Equalizer enabled, the receive sensitivity will be -20 dB.
And AIS Detection. It can be enabled or disabled by setting EQ_ON bit to
                                                                                 In Hardware mode, the Adaptive Equalizer can not be enabled and the
‘1’ or ‘0’ (RCF1, 0BH).
                                                                             receive sensitivity is fixed at -10 dB for both E1 and T1/J1. Refer to 5 Hard-
                                                                             ware Control Pin Summary for details.
                                                                             3.4.5    DATA SLICER
                                                                                 The Data Slicer is used to generate a standard amplitude mark or a
                                                                             space according to the amplitude of the input signals. The threshold can
                                                                             be 40%, 50%, 60% or 70%, as selected by the SLICE[1:0] bits (RCF2, 0CH).
                                                                             The output of the Data Slicer is forwarded to the CDR (Clock & Data Recov-
                                                                             ery) unit or to the RDP/RDN pins directly if the CDR is disabled.
                                                                             3.4.6    CDR (CLOCK & DATA RECOVERY)
                                                                                 The CDR is used to recover the clock and data from the received signal.
                                                                             The recovered clock tracks the jitter in the data output from the Data Slicer
                                                                             and keeps the phase relationship between data and clock during the
                                                                             absence of the incoming pulse. The CDR can also be by-passed in the Dual
                                                                             Rail mode. When CDR is by-passed, the data from the Data Slicer is output
                                                                             to the RDP/RDN pins directly.
                                                                             3.4.7    DECODER
                                                                                 In T1/J1 applications, the R_MD[1:0] bits (RCF0, 0AH) is used to select
                                                                             the AMI decoder or B8ZS decoder. In E1 applications, the R_MD[1:0] bits
                                                                             (RCF0, 0AH) are used to select the AMI decoder or HDB3 decoder.
                                                                                 When the chip is configured by hardware, the operation mode of receive
                                                                             and transmit path can be selected by setting RXTXM1 and RXTXM0 pins.
                                                                             Refer to 5 Hardware Control Pin Summary for details.
 Functional Description                                                   23                                                        December 9, 2005


 IDT82V2041E                                                                   SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
3.4.8     RECEIVE PATH SYSTEM INTERFACE                                             3.5         JITTER ATTENUATOR
    The receive path system interface consists of RCLK pin, RD/RDP pin                   There is one Jitter Attenuator in the IDT82V2041E. The Jitter Attenuator
and RDN pin. In E1 mode, the RCLK outputs a recovered 2.048 MHz clock.              can be deployed in the transmit path or the receive path, and can also be
In T1/J1 mode, the RCLK outputs a recovered 1.544 MHz clock. The                    disabled. This is selected by the JACF[1:0] bits (JACF, 04H).
received data is updated on the RD/RDP and RDN pins on the active edge
of RCLK. The active edge of RCLK can be selected by the RCLK_SEL bit                     In hardware control mode, Jitter Attenuator position, bandwidth and the
(RCF0, 0AH). And the active level of the data on RD/RDP and RDN can be              depth of FIFO can be selected by JA[1:0] pins. Refer to 5 Hardware Control
selected by the RD_INV bit (RCF0, 0AH).                                             Pin Summary for details.
    In hardware control mode, only the active edge of RCLK can be                   3.5.1       JITTER ATTENUATION FUNCTION DESCRIPTON
selected. If RCLKE is set to high, the falling edge will be chosen as the active         The Jitter Attenuator is composed of a FIFO and a DPLL, as shown in
edge of RCLK. If RCLKE is set to low, the rising edge will be chosen as the         Figure-11. The FIFO is used as a pool to buffer the jittered input data, then
active edge of RCLK. The active level of the data on RD/RDP and RDN is              the data is clocked out of the FIFO by a de-jittered clock. The depth of the
the same as that in software control mode.                                          FIFO can be 32 bits, 64 bits or 128 bits, as selected by the JADP[1:0] bits
    The received data can be output to the system side in two different ways:       (JACF, 04H). In hardware control mode, the depth of FIFO can be selected
Single Rail or Dual Rail, as selected by R_MD bit [1] (RCF0, 0AH). In Single        by JA[1:0] pins. Refer to 5 Hardware Control Pin Summary for details. Con-
Rail mode, only RD pin is used to output data and the RDN/CV pin is used            sequently, the constant delay of the Jitter Attenuator will be 16 bits, 32 bits
to report the received errors. In Dual Rail Mode, both RDP pin and RDN pin          or 64 bits. Deeper FIFO can tolerate larger jitter, but at the cost of increasing
are used for outputting data.                                                       data latency time.
    In the receive Dual Rail mode, the CDR unit can be by-passed by setting
R_MD[1:0] to ‘11’ (binary). In this situation, the output data from the Data
Slicer will be output to the RDP/RDN pins directly, and the RCLK outputs
                                                                                                                                                        RD/RDP
the exclusive OR (XOR) of the RDP and RDN. This is called receiver slicer                                              FIFO
mode. In this case, the transmit path is still operating in Dual Rail mode.                 Jittered Data                               De-jittered Data
                                                                                                                     32/64/128
                                                                                                                                                        RDN
3.4.9     RECEIVE PATH POWER DOWN
    The receive path can be powered down by setting R_OFF bit (RCF0,
0AH) to ‘1’. In this case, the RCLK, RD/RDP, RDN and LOS will be logic low.                                   W                      R
                                                                                           Jittered Clock                                De-jittered Clock
    In hardware control mode, receiver power down can be selected by pull-                                             DPLL                              RCLK
ing RPD pin to high. Refer to 5 Hardware Control Pin Summary for more
details.
                                                                                                                          MCLK
                                                                                                          Figure-11 Jitter Attenuator
                                                                                         In E1 applications, the Corner Frequency of the DPLL can be 0.9 Hz or
                                                                                    6.8 Hz, as selected by the JABW bit (JACF, 04H). In T1/J1 applications,
                                                                                    the Corner Frequency of the DPLL can be 1.25 Hz or 5.00 Hz, as selected
                                                                                    by the JABW bit (JACF, 04H). The lower the Corner Frequency is, the longer
                                                                                    time is needed to achieve synchronization.
                                                                                         When the incoming data moves faster than the outgoing data, the FIFO
                                                                                    will overflow. This overflow is captured by the JAOV_IS bit (INTS1, 1AH).
                                                                                    If the incoming data moves slower than the outgoing data, the FIFO will
                                                                                    underflow. This underflow is captured by the JAUD_IS bit (INTS1, 1AH). For
                                                                                    some applications that are sensitive to data corruption, the JA limit mode
                                                                                    can be enabled by setting JA_LIMIT bit (JACF, 04H) to ‘1’. In the JA limit
                                                                                    mode, the speed of the outgoing data will be adjusted automatically when
                                                                                    the FIFO is close to its full or emptiness. The criteria of starting speed adjust-
                                                                                    ment are shown in Table-12. The JA limit mode can reduce the possibility
                                                                                    of FIFO overflow and underflow, but the quality of jitter attenuation is dete-
                                                                                    riorated.
 Functional Description                                                          24                                                           December 9, 2005


 IDT82V2041E                                                                  SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-12 Criteria of Starting Speed Adjustment
                                                                                                                       LOS=1
     FIFO Depth             Criteria for Adjusting Data Outgoing Speed
       32 Bits                    2 bits close to its full or emptiness
       64 Bits                    3 bits close to its full or emptiness
       128 Bits                   4 bits close to its full or emptiness
                                                                                             signal level>P                               signal level<Q
3.5.2     JITTER ATTENUATOR PERFORMANCE                                                     density=OK
    The performance of the Jitter Attenuator in the IDT82V2041E meets the              (observing windows= M)                            (observing windows= N)
ITU-T I.431, G.703, G.736-739, G.823, G.824, ETSI 300011, ETSI TBR12/
13, AT&T TR62411 specifications. Details of the Jitter Attenuator perfor-
mance is shown in Table-59 Jitter Tolerance and Table-60 Jitter Attenuator                                            LOS=0
Characteristics.
3.6       LOS AND AIS DETECTION                                                                     Figure-12 LOS Declare and Clear
3.6.1     LOS DETECTION                                                                 • LOS detect level threshold
    The Loss of Signal Detector monitors the amplitude of the incoming sig-             With the Adaptive Equalizer off, the amplitude threshold Q is fixed on
nal level and pulse density of the received signal on RTIP and RRING.              800 mVpp, while P=Q+200 mVpp (200 mVpp is the LOS level detect hys-
    • LOS declare (LOS=1)                                                          teresis).
    A LOS is detected when the incoming signal has “no transitions”, i.e.,              With the Adaptive Equalizer on, the value of Q can be selected by
when the signal level is less than Q dB below nominal for N consecutive            LOS[4:0] bit (RCF1, 0BH), while P=Q+4 dB (4 dB is the LOS level detect
pulse intervals. Here N is defined by LAC bit (MAINT0, 0DH). LOS will be           hysteresis). Refer to Table-26 TCF1: Transmitter Configuration Register 1
declared by pulling LOS pin to high (LOS=1) and LOS interrupt will be gen-         for LOS[4:0] bit values available.
erated if it is not masked.                                                             When the chip is configured by hardware, the Adaptive Equalizer can
    Note that LOS indication is not supported if the device is operated in Line    not be enabled and Programmable LOS levels are not available (pin 29 has
Monitor Mode. Refer to 3.4.2 Line Monitor.                                         to be set to ‘0’).
    • LOS clear (LOS=0)                                                                 • Criteria for declare and clear of a LOS detect
    The LOS is cleared when the incoming signal has “transitions”, i.e.,                The detection supports ANSI T1.231 and I.431 for T1/J1 mode and
when the signal level is greater than P dB below nominal and has an aver-          G.775 and ETSI 300233/I.431 for E1 mode. The criteria can be selected
age pulse density of at least 12.5% for M consecutive pulse intervals, start-      by LAC bit (MAINT0, 0DH) and T1E1 bit (GCF, 02H).
ing with the receipt of a pulse. Here M is defined by LAC bit (MAINT0, 0DH).            Table-13 and Table-14 summarize LOS declare and clear criteria for
LOS status is cleared by pulling LOS pin to low.                                   both with and without the Adaptive Equalizer enabled.
                                                                                        • All Ones output during LOS
                                                                                        On the system side, the RDP/RDN will reflect the input pulse “transition”
                                                                                   at the RTIP/RRING side and output recovered clock (but the quality of the
                                                                                   output clock can not be guaranteed when the input level is lower than the
                                                                                   maximum receive sensitivity) when AISE bit (MAINT0, 0DH) is 0; or output
                                                                                   All Ones as AIS when AISE bit (MAINT0, 0DH) is 1. In this case, RCLK out-
                                                                                   put is replaced by MCLK.
                                                                                        On the line side, the TTIP/TRING will output All Ones as AIS when ATAO
                                                                                   bit (MAINT0, 0DH) is 1. The All Ones pattern uses MCLK as the reference
                                                                                   clock.
                                                                                        LOS indicator is always active for all kinds of loopback modes.
 Functional Description                                                         25                                                          December 9, 2005


 IDT82V2041E                                                               SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-13 LOS Declare and Clear
            Control bit                              LOS declare threshold                                          LOS clear threshold
      T1E1               LAC
                                                                                               Level > 1 Vpp
                                    Level < 800 mVpp                                           M=128 bits
                   0=T1.231
                                    N=175 bits                                                 12.5% mark density
                                                                                               <100 consecutive zeroes
     1=T1/J1
                                                                                               Level > 1 Vpp
                                    Level < 800 mVpp                                           M=128 bits
                   1=I.431
                                    N=1544 bits                                                12.5% mark density
                                                                                               <100 consecutive zeroes
                                                                                               Level > 1 Vpp
                                    Level < 800 mVpp                                           M=32 bits
                   0=G.775
                                    N=32 bits                                                  12.5% mark density
                                                                                               <16 consecutive zeroes
      0=E1
                                                                                               Level > 1 Vpp
                                    Level < 800 mVpp                                           M=32 bits
                   1=I.431/ETSI
                                    N=2048 bits                                                12.5% mark density
                                                                                               <16 consecutive zeroes
Table-14 LOS Declare and Clear Criteria, Adaptive Equalizer Enabled
                              Control bit                         LOS declare threshold     LOS clear threshold                         Note
      T1E1               LAC              LOS[4:0]       Q (dB)
                                    00000            -4
                                                                                          Level > Q+ 4dB
                                    00001            -6
                                                                 Level < Q                M=128 bits
                     0     T1.231 …                  …
                                                                 N=175 bits               12.5% mark density
                                    01010            -24
                                                                                          <100 consecutive zeroes
                                    01011 - 11111    Reserved
                                    00000             -4
     1=T1/J1
                                -   …
                                    00110            -16                                  Level > Q+ 4dB
                                                                 Level < Q                M=128 bits
                     1              00111            -18                                                              I.431 Level detect range is -18 to -30 dB.
                                                                 N=1544 bits              12.5% mark density
                                    ...              ...                                  <100 consecutive zeroes
                             I.431
                                    01010            -24
                                    01011 - 11111    Reserved
                                    00000            -4
                                -   …                …
                                    00010            -8                                   Level > Q+ 4dB
                                                                 Level < Q                M=32 bits
                     0              00011            -10                                                              G.775 Level detect range is -9 to -35 dB.
                                                                 N=32 bits                12.5% mark density
                                    …                …                                    <16 consecutive zeroes
                           G.775
                                    01010            -24
      0=E1                          01011 - 11111    Reserved
                                -   00000             -4
                                                                                          Level > Q+ 4dB
                                    00001            -6          Level < Q                M=32 bits
                     1      I.431/ …                 …                                                                I.431 Level detect range is -6 to -20 dB.
                                                                 N=2048 bits              12.5% mark density
                             ETSI 01010              -24                                  <16 consecutive zeroes
                                    01011 - 11111    Reserved
3.6.2    AIS DETECTION                                                          for declaring/clearing AIS detection are in compliance with the ANSI
                                                                                T1.231. In E1 applications, the criteria for declaring/clearing AIS detection
    The Alarm Indication Signal can be detected by the IDT82V2041E when
                                                                                comply with the ITU G.775 or the ETSI 300233, as selected by the LAC bit
the Clock & Data Recovery unit is enabled. The status of AIS detection is
reflected in the AIS_S bit (STAT0, 17H). In T1/J1 applications, the criteria
 Functional Description                                                      26                                                        December 9, 2005


 IDT82V2041E                                                               SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
(MAINT0, 0DH). Table-15 summarizes different criteria for AIS detection
Declaring/Clearing.
Table-15 AIS Condition
                               ITU G.775 for E1                               ETSI 300233 for E1                          ANSI T1.231 for T1/J1
                       (LAC bit is set to ‘0’ by default)                    (LAC bit is set to ‘1’)
     AIS      Less than 3 zeros contained in each of two consecutive Less than 3 zeros contained in a 512-bit Less than 9 zeros contained in an 8192-bit stream
  detected    512-bit streams are received                           stream are received                      (a ones density of 99.9% over a period of 5.3 ms)
     AIS      3 or more zeros contained in each of two consecutive 3 or more zeros contained in a 512-bit 9 or more zeros contained in an 8192-bit stream
   cleared    512-bit streams are received                           stream are received                      are received
 Functional Description                                                       27                                                       December 9, 2005


  IDT82V2041E                                                                     SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
3.7       TRANSMIT AND DETECT INTERNAL PATTERNS                                             PRBS data can be inverted through setting the PRBS_INV bit (MAINT0,
                                                                                       0DH).
    The internal patterns (All Ones, All Zeros, PRBS/QRSS pattern and
Activate/Deactivate Loopback Code) will be generated and detected by                        Any change of PRBS_S bit will be captured by PRBS_IS bit (INTS0,
IDT82V2041E. TCLK is used as the reference clock by default. MCLK can                  19H). The PRBS_IES bit (INTES, 16H) can be used to determine whether
also be used as the reference clock by setting the PATT_CLK bit (MAINT0,               the ‘0’ to ‘1’ change of PRBS_S bit will be captured by the PRBS_IS bit or
0DH) to ‘1’.                                                                           any changes of PRBS_S bit will be captured by the PRBS_IS bit. When the
                                                                                       PRBS_IS bit is ‘1’, an interrupt will be generated if the PRBS_IM bit (INTM0,
    If the PATT_CLK bit (MAINT0, 0DH) is set to ‘0’ and the PATT[1:0] bits             14H) is set to ‘1’.
(MAINT0, 0DH) are set to ‘00’, the transmit path will operate in normal mode.
                                                                                            The received PRBS/QRSS logic errors can be counted in a 16-bit
    When the chip is configured by hardware, the transmit path will operate
                                                                                       counter if the ERR_SEL [1:0] bits (MAINT6, 13H) are set to ‘00’. Refer to
in normal mode by setting PATT[1:0] pins to ‘00’. Refer to 5 Hardware Con-
                                                                                       3.9 Error Detection/Counting And Insertion for the operation of the error
trol Pin Summary for details.
                                                                                       counter.
3.7.1     TRANSMIT ALL ONES
                                                                                       3.8        LOOPBACK
    In transmit direction, the All Ones data can be inserted into the data
stream when the PATT[1:0] bits (MAINT0, 0DH) are set to ‘01’. The transmit                  To facilitate testing and diagnosis, the IDT82V2041E provides four dif-
data stream is output from TTIP/TRING. In this case, either TCLK or MCLK               ferent loopback configurations: Analog Loopback, Digital Loopback,
can be used as the transmit clock, as selected by the PATT_CLK bit                     Remote Loopback and Inband Loopback.
(MAINT0, 0DH).                                                                         3.8.1      ANALOG LOOPBACK
    In hardware control mode, the All Ones data can be inserted into the data               When the ALP bit (MAINT1, 0EH) is set to ‘1’, the chip is configured in
stream in transmit direction by setting PATT[1:0] pins to ‘01’. Refer to 5             Analog Loopback mode. In this mode, the transmit signals are looped back
Hardware Control Pin Summary for details.                                              to the Receiver Internal Termination in the receive path then output from
3.7.2     TRANSMIT ALL ZEROS                                                           RCLK, RD, RDP/RDN. At the same time, the transmit signals are still output
                                                                                       to TTIP/TRING in transmit direction. The all-ones pattern can be generated
    If the PATT_CLK bit (MAINT0, 0DH) is set to ‘1’, the All Zeros will be             during analog loopback. Figure-13 shows the process.
inserted into the transmit data stream when the PATT[1:0] bits (MAINT0,
0DH) are set to ‘00’.                                                                  3.8.2      DIGITAL LOOPBACK
3.7.3     PRBS/QRSS GENERATION AND DETECTION                                                When the DLP bit (MAINT1, 0EH) is set to ‘1’, the chip is configured in
                                                                                       Digital Loopback mode. In this mode, the transmit signals are looped back
    A PRBS/QRSS will be generated in the transmit direction and detected               to the jitter attenuator (if enabled) and decoder in receive path, then output
in the receive direction by IDT82V2041E. The QRSS is 220-1 for T1/J1                   from RCLK, RD, RDP/RDN. At the same time, the transmit signals are still
applications and the PRBS is 215-1 for E1 applications, with maximum zero              output to TTIP/TRING in transmit direction. Figure-14 shows the process.
restrictions according to AT&T TR62411 and ITU-T O.151.                                     Both Analog Loopback mode and Digital Loopback mode allow the
    When the PATT[1:0] bits (MAINT0, 0DH) are set to ‘10’, the PRBS/                   sending of the internal patterns (All Ones, All Zeros, PRBS, etc.) which will
QRSS pattern will be inserted into the transmit data stream with the MSB               overwrite the transmit signals. In this case, either TCLK or MCLK can be
first. The PRBS/QRSS pattern will be transmitted directly or invertedly.               used as the reference clock for internal patterns transmission.
    In hardware control mode, the PRBS data will be generated in the trans-                 In hardware control mode, Digital Loopback can be selected by setting
mit direction and inserted into the transmit data stream by setting PATT[1:0]          LP[1:0] pins to ‘10’.
pins to ‘10’. Refer to 5 Hardware Control Pin Summary for details.                     3.8.3      REMOTE LOOPBACK
    The PRBS/QRSS in the received data stream will be monitored. If the                     When the RLP bit (MAINT1, 0EH) is set to ‘1’, the chip is configured in
PRBS/QRSS has reached synchronization status, the PRBS_S bit                           Remote Loopback mode. In this mode, the recovered clock and data output
(STAT0, 17H) will be set to ‘1’, even in the presence of a logic error rate less       from Clock and Data Recovery on the receive path is looped back to the
than or equal to 10-1. The criteria for setting/clearing the PRBS_S bit are            jitter attenuator (if enabled) and Waveform Shaper in transmit path. Figure-
shown in Table-16.                                                                     15 shows the process.
                                                                                            In hardware control mode, Remote Loopback can be selected by setting
Table-16 Criteria for Setting/Clearing the PRBS_S Bit                                  LP[1:0] pins to ‘11’.
 PRBS/QRSS           6 or less than 6 bit errors detected in a 64 bits hopping win-
 Detection           dow.
 PRBS/QRSS           More than 6 bit errors detected in a 64 bits hopping window.
 Missing
 Functional Description                                                             28                                                         December 9, 2005


IDT82V2041E                                                       SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
                      LOS/AIS
         LOS
                     Detection
       RCLK             B8ZS/                              Clock and                                        Receiver                  RTIP
                                          Jitter                          Data             Adaptive
     RD/RDP          HDB3/AMI                                Data                                            Internal
                                       Attenuator                         Slicer           Equalizer                                  RRING
     CV/RDN            Decoder                             Recovery                                        Termination
                                                                                                                             Analog
                                                                                                                            Loopback
        TCLK            B8ZS/                                                                              Transmitter                TTIP
                                          Jitter             Waveform                 Line
     TD/TDP          HDB3/AMI                                                                                Internal
                                       Attenuator             Shaper                 Driver
         TDN           Encoder                                                                             Termination                TRING
                                                    Figure-13 Analog Loopback
                LOS/AIS
       LOS
                Detection
     RCLK         B8ZS/                                       Clock and                                               Receiver         RTIP
                                  Jitter                                      Data                Adaptive             Internal
   RD/RDP       HDB3/AMI                                         Data
                               Attenuator                                     Slicer             Equalizer          Termination
   CV/RDN        Decoder                                      Recovery                                                                 RRING
                                                  Digital
                                                 Loopback
     TCLK         B8ZS/                                                                                           Transmitter          TTIP
                                  Jitter                       Waveform                   Line
   TD/TDP       HDB3/AMI                                                                                            Internal
                               Attenuator                        Shaper                  Driver
      TDN        Encoder                                                                                          Termination         TRING
                                                     Figure-14 Digital Loopback
Functional Description                                                29                                                        December 9, 2005


  IDT82V2041E                                                                  SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
                           LOS/AIS
           LOS
                           Detection
          RCLK                B8ZS/                                        Clock and                                                    Receiver        RTIP
                                                          Jitter                                  Data              Adaptive             Internal
       RD/RDP              HDB3/AMI                                          Data
                                                       Attenuator                                Slicer            Equalizer          Termination
       CV/RDN                Decoder                                       Recovery                                                                     RRING
                                         Remote
                                        Loopback
          TCLK                B8ZS/                                                                                                 Transmitter         TTIP
                                                          Jitter            Waveform                        Line
        TD/TDP             HDB3/AMI                                                                                                   Internal
                                                       Attenuator             Shaper                       Driver
            TDN              Encoder                                                                                                Termination         TRING
                                                              Figure-15 Remote Loopback
3.8.4      INBAND LOOPBACK                                                           3.8.4.2 RECEIVE ACTIVATE/DEACTIVATE LOOPBACK CODE
    When PATT[1:0] bits (MAINT0, 0DH) are set to ‘11’, the IDT82V2041E                    The pattern of the receive Activate Loopback Code is defined by the
is configured in Inband Loopback mode. In this mode, an unframed activate/           RIBLBA[7:0] bits (MAINT4, 11H). The length of this pattern ranges from 5
Deactivate Loopback Code is generated repeatedly in transmit direction               bits to 8 bits, as selected by the RIBLBA_L [1:0] bits (MAINT2, 0FH). The
per ANSI T1. 403 which overwrite the transmit signals. In receive direction,         pattern can be programmed to 6-bit-long or 8-bit-long respectively by
the framed or unframed code is detected per ANSI T1. 403, even in the pres-          repeating itself if it is 3-bit-long or 4-bit-long.
ence of 10-2 bit error rate.                                                              The pattern of the receive Deactivate Loopback Code is defined by the
    If the Automatic Remote Loopback is enabled by setting ARLP bit                  RIBLBD[7:0] bits (MAINT5, 12H). The length of the receive Deactivate
(MAINT1, 0EH) to ‘1’, the chip will establish/demolish the Remote Loop-              Loopback Code ranges from 5 bits to 8 bits, as selected by the
back based on the reception of the Activate Loopback Code/Deactivate                 RIBLBD_L[1:0] bits (MAINT2, 0FH). The pattern can be programmed to 6-
Loopback Code for 5.1 s. If the ARLP bit (MAINT1, 0EH) is set to ‘0’, the            bit-long or 8-bit-long respectively by repeating itself if it is 3-bit-long or 4-
Remote Loopback can also be demolished forcedly.                                     bit-long.
3.8.4.1 TRANSMIT ACTIVATE/DEACTIVATE LOOPBACK CODE                                        After the Activate Loopback Code has been detected in the receive data
                                                                                     for more than 30 ms (in E1 mode) / 40 ms (in T1/J1 mode), the IBLBA_S
    The pattern of the transmit Activate/Deactivate Loopback Code is
                                                                                     bit (STAT0, 17H) will be set to ‘1’ to declare the reception of the Activate
defined by the TIBLB[7:0] bits (MAINT3, 10H). Whether the code repre-
                                                                                     Loopback Code.
sents an Activate Loopback Code or a Deactivate Loopback Code is judged
by the far end receiver. The length of the pattern ranges from 5 bits to 8 bits,          After the Deactivate Loopback Code has been detected in the receive
as selected by the TIBLB_L[1:0] bits (MAINT2, 0FH). The pattern can be               data for more than 30 ms (In E1 mode) / 40 ms (In T1/J1 mode), the IBLBD_S
programmed to 6-bit-long or 8-bit-long by repeating itself respectively if it        bit (STAT0, 17H) will be set to ‘1’ to declare the reception of the Deactivate
is 3-bit-long or 4-bit-long. When the PATT[1:0] bits (MAINT0, 0DH) are set           Loopback Code.
to ‘11’, the transmission of the Activate/Deactivate Loopback Code is initi-              When the IBLBA_IES bit (INTES, 16H) is set to ‘0’, only the ‘0’ to ‘1’ tran-
ated. If the PATT_CLK bit (MAINT0, 0DH) is set to ‘0’ and the PATT[1:0]              sition of the IBLBA_S bit will generate an interrupt and set the IBLBA_IS bit
bits (MAINT0, 0DH) are set to ‘00’, the transmission of the Activate/Deac-           (INTS0, 19H) to ‘1’. When the IBLBA_IES bit is set to ‘1’, any changes of
tivate Loopback Code will stop.                                                      the IBLBA_S bit will generate an interrupt and set the IBLBA_IS bit (INTS0,
    The local transmit activate/deactivate code setting should be the same           19H) to ‘1’. The IBLBA_IS bit will be reset to ‘0’ after being read.
as the receive code setting in the remote end. It is the same thing for the               When the IBLBD_IES bit (INTES, 16H) is set to ‘0’, only the ‘0’ to ‘1’ tran-
other way round.                                                                     sition of the IBLBD_S bit will generate an interrupt and set the IBLBD_IS
                                                                                     bit (INTS0, 19H) to ‘1’. When the IBLBD_IES bit is set to ‘1’, any changes
                                                                                     of the IBLBD_S bit will generate an interrupt and set the IBLBD_IS bit
                                                                                     (INTS0, 19H) to ‘1’. The IBLBD_IS bit will be reset to ‘0’ after being read.
 Functional Description                                                           30                                                              December 9, 2005


  IDT82V2041E                                                              SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
3.8.4.3 AUTOMATIC REMOTE LOOPBACK                                               will still be kept even if the receiver stop receiving the Activate Loopback
                                                                                Code.
    When ARLP bit (MAINT1, 0EH) is set to ‘1’, the IDT82V2041E is con-
figured into the Automatic Remote Loopback mode. In this mode, if the Acti-         If the Deactivate Loopback Code has been detected in the receive data
vate Loopback Code has been detected in the receive data for more than          for more than 5.1 s, the Remote Loopback will be demolished automatically,
5.1 s, the Remote Loopback (shown as Figure-15) will be established auto-       and the RLP_S bit (STAT1, 18H) will set to ‘0’ to indicate the demolishment
matically, and the RLP_S bit (STAT1, 18H) will be set to ‘1’ to indicate the    of the Remote Loopback. The IBLBD_S bit (STAT0, 17H) is set to ‘1’ to gen-
establishment of the Remote Loopback. The IBLBA_S bit (STAT0, 17H) is           erate an interrupt.
set to ‘1’ to generate an interrupt. In this case, the Remote Loopback mode
                                                                                    The Remote Loopback can also be demolished forcedly by setting
                                                                                ARLP bit (MAINT1, 0EH) to ‘0’.
 Functional Description                                                      31                                                        December 9, 2005


  IDT82V2041E                                                                  SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
3.9        ERROR DETECTION/COUNTING AND INSERTION                                   •    HDB3/B8ZS Code Violation (CV) Error: In HDB3/B8ZS coding, a
                                                                                         CV error is declared when two consecutive BPV errors are
3.9.1      DEFINITION OF LINE CODING ERROR                                               detected, and the pulses that have the same polarity as the previ-
    The following line encoding errors can be detected and counted by the                ous pulse are not the HDB3/B8ZS zero substitution pulses.
IDT82V2041E:                                                                        •    Excess Zero (EXZ) Error: There are two standards defining the
•     Received Bipolar Violation (BPV) Error: In AMI coding, when two                    EXZ errors: ANSI and FCC. The EXZ_DEF bit (MAINT6, 13H)
      consecutive pulses of the same polarity are received, a BPV error                  chooses which standard will be adopted by the chip to judge the
      is declared.                                                                       EXZ error. Table-17 shows definition of EXZ. In hardware control
                                                                                         mode, only ANSI standard is adopted.
Table-17 EXZ Definition
                                                                                     EXZ Definition
                                                      ANSI                                                                    FCC
           AMI                     More than 15 consecutive 0s are detected                             More than 80 consecutive 0s are detected
         HDB3                      More than 3 consecutive 0s are detected                              More than 3 consecutive 0s are detected
          B8ZS                     More than 7 consecutive 0s are detected                              More than 7 consecutive 0s are detected
3.9.2      ERROR DETECTION AND COUNTING
    Which type of the receiving errors (Received CV/BPV errors, excess                                           Auto Report Mode
                                                                                                                   (CNT_MD=1)
zero errors and PRBS logic errors) will be counted is determined by
ERR_SEL[1:0] bits (MAINT6, 13H). Only one type of receiving error can be
counted at a time except that when the ERR_SEL[1:0] bits are set to ‘11’,
both CV/BPV and EXZ errors will be detected and counted.                                                              counting
    The selected type of receiving errors is counted in an internal 16-bit Error                 N                                               next second
Counter. Once an error is detected, an error interrupt which is indicated by                                                                     repeats the
                                                                                                          One-Second Timer expired?             same process
corresponding bit in (INTS1, 1AH) will be generated if it is not masked. This
Error Counter can be operated in two modes: Auto Report Mode and Man-
                                                                                                                            Y
ual Report Mode, as selected by the CNT_MD bit (MAINT6, 13H). In Single                                CNT0, CNT1           data in counter
Rail mode, once BPV or CV errors are detected, the CV pin will be driven                               counter         0
to high for one RCLK period.                                                                                 Bit TMOV_IS is set to '1'
    • Auto Report Mode
    In Auto Report Mode, the internal counter starts to count the received
errors when the CNT_MD bit (MAINT6, 13H) is set to ‘1’. A one-second timer                            read the data in CNT0, CNT1 within
                                                                                                      the next second
is used to set the counting period. The received errors are counted within
                                                                                                          Bit TMOV_IS is cleared after
one second. If the one-second timer expires, the value in the internal
                                                                                                           the interrupt register is read
counter will be transferred to (CNT0, 1BH) and (CNT1, 1CH), then the inter-
nal counter will be reset and start to count received errors for the next sec-                       Figure-16 Auto Report Mode
ond. The errors occurred during the transfer will be accumulated to the next
round. The expiration of the one-second timer will set TMOV_IS bit (INTS1,
1AH) to ‘1’, and will generate an interrupt if the TIMER_IM bit (INTM1, 15H)
is set to ‘0’. The TMOV_IS bit (INTS1, 1AH) will be cleared after the interrupt
register is read. The content in the (CNT0, 1BH) and (CNT1, 1CH) should
be read within the next second. If the counter overflows, a counter overflow
interrupt which is indicated by CNT_OV_IS bit (INTS1, 1AH) will be gener-
ated if it is not masked by CNT_IM bit (INTM1, 15H).
  Functional Description                                                         32                                                         December 9, 2005


 IDT82V2041E                                                                  SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
    • Manual Report Mode                                                            3.9.3     BIPOLAR VIOLATION AND PRBS ERROR INSERTION
    In Manual Report Mode, the internal Error Counter starts to count the               Only when three consecutive ‘1’s are detected in the transmit data
received errors when the CNT_MD bit (MAINT6, 13H) is set to ‘0’. When               stream, will a ‘0’ to ‘1’ transition on the BPV_INS bit (MAINT6, 13H) generate
there is a ‘0’ to ‘1’ transition on the CNT_TRF bit (MAINT6, 13H), the data         a bipolar violation pulse, and the polarity of the second ‘1’ in the series will
in the counter will be transferred to (CNT0, 1BH) and (CNT1, 1CH), then             be inverted.
the counter will be reset. The errors occurred during the transfer will be
accumulated to the next round. If the counter overflows, a counter overflow             A ‘0’ to ‘1’ transition on the EER_INS bit (MAINT6, 13H) will generate a
interrupt indicated by CNT_OV_IS bit (INTS1, 1AH) will be generated if it           logic error during the PRBS/QRSS transmission.
is not masked by CNT_IM bit (INTM1, 15H).
                                                                                    3.10 LINE DRIVER FAILURE MONITORING
                                                                                        The transmit driver failure monitor can be enabled or disabled by setting
                          Manual Report mode                                        DFM_OFF bit (TCF1, 06H). If the transmit driver failure monitor is enabled,
                               (CNT_MD=0)
                                                                                    the transmit driver failure will be captured by DF_S bit (STAT0, 17H). The
                                                                                    transition of the DF_S bit is reflected by DF_IS bit (INTS0, 19H), and, if
                                                                                    enabled by DF_IM bit (INTM0, 14H), will generate an interrupt. When there
                                   counting
                                                                                    is a short circuit on the TTIP/TRING port, the output current will be limited
                    N                                                               to 100 mA (typical), and an interrupt will be generated.
                            A '0' to '1' transition                                     In hardware control mode, the transmit driver failure monitor is always
                              on CNT_TRF?
                                                                                    enabled.
                                           Y           next round
                                                        repeat the
                         CNT0, CNT1           data in same process
                         counter
                         counter 0
                          Read the data in CNT0,
                          CNT1 within next round1
                          Reset CNT_TRF for the
                           next '0' to '1' transition
                   Figure-17 Manual Report Mode
Note: It is recommended that users should do the followings within next round of
        error counting: Read the data in CNT0 and CNT1; Reset CNT_TRF bit for
        the next ‘0’ to ‘1’ transition on this bit.
 Functional Description                                                          33                                                           December 9, 2005


  IDT82V2041E                                                                  SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
3.11 MCLK AND TCLK                                                                    3.11.2 TRANSMIT CLOCK (TCLK)
3.11.1 MASTER CLOCK (MCLK)                                                                 TCLK is used to sample the transmit data on TD/TDP and TDN. The
                                                                                      active edge of TCLK can be selected by the TCLK_SEL bit (TCF0, 05H).
    MCLK is an independent, free-running reference clock. MCLK is 1.544               During Transmit All Ones, PRBS/QRSS patterns or Inband Loopback
MHz for T1/J1 applications and 2.048 MHz in E1 mode. This reference clock             Code, either TCLK or MCLK can be used as the reference clock. This is
is used to generate several internal reference signals:                               selected by the PATT_CLK bit (MAINT0, 0DH).
•     Timing reference for the integrated clock recovery unit.
•     Timing reference for the integrated digital jitter attenuator.                       But for Automatic Transmit All Ones and AIS, only MCLK is used as the
•     Timing reference for microcontroller interface.                                 reference clock and the PATT_CLK bit is ignored. In Automatic Transmit
•     Generation of RCLK signal during a loss of signal condition if AIS is           All Ones condition, the ATAO bit (MAINT0, 0DH) is set to ‘1’. In AIS condi-
      enabled.                                                                        tion, the AISE bit (MAINT0, 0DH) is set to ‘1’.
•     Reference clock during Transmit All Ones, All Zeros, PRBS/QRSS                       If TCLK has been missing for more than 70 MCLK cycles, TCLK_LOS
      pattern and Inband Loopback code if it is selected as the reference             bit (STAT0, 17H) will be set, and the TTIP/TRING will become high imped-
      clock. For ATAO and AIS, MCLK is always used as the reference                   ance if the chip is not used for remote loopback or is not using MCLK to trans-
      clock.                                                                          mit internal patterns (TAOS, All Zeros, PRBS and in-band loopback code).
•     Reference clock during Transmit All Ones (TAO) condition or send-               When TCLK is detected again, TCLK_LOS bit (STAT0, 17H) will be cleared.
      ing PRBS/QRSS in hardware control mode.                                         The reference frequency to detect a TCLK loss is derived from MCLK.
    Figure-18 shows the chip operation status in different conditions of
MCLK and TCLK. The missing of MCLK will set the TTIP/TRING to high
impedance state.
                                                                             Clocked
                                     MCLK=H/L?
                                             yes
                                                                                       L/H                                        clocked
                                                                                                          TCLK status?
                                                                  generate transmit clock loss
                                                                  interrupt if not masked in
                            transmitter high impedance            software control mode;                                   normal operation
                                                                  transmitter high impedance
                                                       Figure-18 TCLK Operation Flowchart
  Functional Description                                                           34                                                         December 9, 2005


 IDT82V2041E                                                                 SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
3.12 MICROCONTROLLER INTERFACES                                                    3.12.1 PARALLEL MICROCONTROLLER INTERFACE
    The microcontroller interface provides access to read and write the reg-           The interface is compatible with Motorola or Intel microcontroller. When
isters in the device. The chip supports serial microcontroller interface and       MODE[1:0] pins are set to ‘10’, Parallel-Multiplexed-Motorola interface is
two kinds of parallel microcontroller interface: Motorola multiplexed mode         selected. When MODE[1:0] pins are set to ‘11’, Parallel-Multiplexed-Intel
and Intel multiplexed mode. Different microcontroller interfaces can be            Interface is selected.
selected by setting MODE[1:0] pins to different values. Refer to MODE1             3.12.2 SERIAL MICROCONTROLLER INTERFACE
and MODE0 in pin description and Microcontroller Interface Timing Char-
acteristics for details.                                                               When MODE[1:0] pins are set to ‘01’, Serial Interface is selected. In this
                                                                                   mode, the registers are programmed through a 16-bit word which contains
                                                                                   an 8-bit address/command byte (5 address bits A0~A4 and bit R/W) and
                                                                                   an 8-bit data byte (D0~D7). When bit R/W is ‘1’, data is read out from pin
                                                                                   SDO. When bit R/W is ‘0’, data is written into SDI pin. Refer to Figure-19.
                          CS
                         SCLK
                          SDI       A0    A1  A2   A3     A4 R/W     -     -    D0     D1    D2    D3   D4     D5    D6    D7
                                            address/command byte                     input data byte (R/W=0)
                          SDO                                                   D0    D1     D2   D3    D4     D5   D6     D7
                                           remains high impedance                        output data byte (R/W=1)
                                        Figure-19 Serial Microcontroller Interface Function Timing
3.13 INTERRUPT HANDLING                                                                There are totally thirteen kinds of events that could be the interrupt
                                                                                   source:
    All kinds of interrupt of the IDT82V2041E are indicated by the INT pin.
                                                                                       (1).LOS Detected
When the INT_PIN[0] bit (GCF, 02H) is ‘0’, the INT pin is open drain active
                                                                                       (2).AIS Detected
low, with a 10 KΩ external pull-up resistor. When the INT_PIN[1:0] bits                (3).Driver Failure Detected
(GCF, 02H) are ‘01’, the INT pin is push-pull active low; when the                     (4).TCLK Loss
INT_PIN[1:0] bits are ‘10’, the INT pin is push-pull active high.                      (5).Synchronization Status of PRBS
    An active level on the INT pin represents an interrupt of the                      (6).PRBS Error Detected
IDT82V2041E.                                                                           (7).Code Violation Received
                                                                                       (8).Excessive Zeros Received
    The interrupt event is captured by the corresponding bit in the Interrupt
                                                                                       (9).JA FIFO Overflow/Underflow
Status Register (INTS0, 19H) or (INTS1, 1AH). Every kind of interrupt can
                                                                                       (10).Inband Loopback Code Status
be enabled/disabled individually by the corresponding bit in the register
                                                                                       (11).One-Second Timer Expired
(INTM0, 14H) or (INTM1, 15H). Some event is reflected by the correspond-
                                                                                       (12).Error Counter Overflow
ing bit in the Status Register (STAT0, 17H) or (STAT1, 18H), and the Inter-
                                                                                       (13).Arbitrary Waveform Generator Overflow
rupt Trigger Edge Selection Register can be used to determine how the
Status Register sets the Interrupt Status Register.                                    Table-18 is a summary of all kinds of interrupt and the associated Status
                                                                                   bit, Interrupt Status bit, Interrupt Trigger Edge Selection bit and Interrupt
    After the Interrupt Status Register (INTS0, 19H) or (INTS1, 1AH) is read,
                                                                                   Mask bit.
the INT pin become inactive.
 Functional Description                                                        35                                                        December 9, 2005


  IDT82V2041E                                                                   SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-18 Interrupt Event
                    Interrupt Event                           Status bit           Interrupt Status bit         Interrupt Edge Selection bit    Interrupt Mask bit
                                                           (STAT0, STAT1)            (INTS0, INTS1)                        (INTES)               (INTM0, INTM1)
                     LOS Detected                              LOS_S                       LOS_IS                         LOS_IES                     LOS_IM
                     AIS Detected                               AIS_S                      AIS_IS                          AIS_IES                    AIS_IM
               Driver Failure Detected                          DF_S                        DF_IS                          DF_IES                      DF_IM
                      TCLK Loss                              TCLK_LOS                 TCLK_LOS_IS                         TCLK_IES                   TCLK_IM
     Synchronization Status of PRBS/QRSS                      PRBS_S                     PRBS_IS                         PRBS_IES                    PRBS_IM
                   PRBS/QRSS Error                                                         ERR_IS                                                     ERR_IM
              Code Violation Received                                                       CV_IS                                                      CV_IM
             Excessive Zeros Received                                                      EXZ_IS                                                     EXZ_IM
                   JA FIFO Overflow                                                       JAOV_IS                                                    JAOV_IM
                  JA FIFO Underflow                                                      JAUD_IS                                                     JAUD_IM
     Inband Loopback Activate Code Status                     IBLBA_S                    IBLBA_IS                        IBLBA_IES                  IBLBA_IM
    Inband Loopback Deactivate Code Status                    IBLBD_S                    IBLBD_IS                        IBLBD_IES                  IBLBD_IM
             One-Second Timer Expired                                                    TMOV_IS                                                    TIMER_IM
               Error Counter Overflow                                                  CNT_OV_IS                                                      CNT_IM
   Arbitrary Waveform Generator Overflow                                               DAC_OV_IS                                                   DAC_OV_IM
3.14 5V TOLERANT I/O PINS                                                                    MCLK. For T1/J1 operation, bit T1E1(GCF0) is set after reset.
                                                                                             Before accessing any other registers a delay of 50 us is required to
     All digital input pins will tolerate 5.0 ± 10% volts and are compatible with
                                                                                             allow the internal clocking to be settled.
TTL logic.
                                                                                            After reset, all drivers output are in high impedance state, all the internal
3.15 RESET OPERATION                                                                  flip-flops are reset, and all the registers are initialized to default values.
     The chip can be reset in two ways:                                               When performing a software reset, the T1E1 bit (GCF0) will not be reset
•      Software Reset: Writing to the RST register (01H) will reset the chip          and stay with the set value.
       in 1 us.                                                                       3.16 POWER SUPPLY
•      Hardware Reset: Asserting the RST pin low for a minimum of 100
       ns will reset the chip.                                                              This chip uses a single 3.3 V power supply.
       During Hardware Reset, the device requires an active clock on
  Functional Description                                                          36                                                           December 9, 2005


 IDT82V2041E                                                              SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
4        PROGRAMMING INFORMATION
4.1      REGISTER LIST AND MAP                                                   4.2      RESERVED REGISTERS
      The registers banks include control registers, status registers and           When writing to registers with reserved bit locations, the default state
counter registers.                                                               must be written to the reserved bits to ensure proper device operation.
Table-19 Register List and Map
  Address (hex)       Register    R/W                                                           Map
                                             b7              b6            b5             b4              b3             b2            b1            b0
Control Registers
        00                ID       R        ID7             ID6           ID5            ID4             ID3            ID2           ID1           ID0
        01               RST       W
        02              GCF       R/W         -               -             -              -               -          T1E1        INT_PIN1      INT_PIN0
        03             TERM       R/W         -               -       T_TERM2        T_TERM1         T_TERM0       R_TERM2        R_TERM1       R_TERM0
        04              JACF      R/W         -               -       JA_LIMIT         JACF1           JACF0         JADP1          JADP0         JABW
Transmit Path Control Registers
        05              TCF0      R/W         -               -             -          T_OFF           TD_INV      TCLK_SEL         T_MD1         T_MD0
        06              TCF1      R/W         -               -       DFM_OFF            THZ           PULS3         PULS2          PULS1         PULS0
        07              TCF2      R/W         -               -         SCAL5          SCAL4           SCAL3         SCAL2          SCAL1         SCAL0
        08              TCF3      R/W      DONE             RW            UI1            UI0           SAMP3         SAMP2          SAMP1         SAMP0
        09              TCF4      R/W         -           WDAT6         WDAT5          WDAT4           WDAT3         WDAT2         WDAT1         WDAT0
Receive Path Control Registers
        0A              RCF0      R/W         -               -             -          R_OFF          RD_INV      RCLK_SEL          R_MD1         R_MD0
        0B              RCF1      R/W         -           EQ_ON             -           LOS4            LOS3          LOS2           LOS1          LOS0
        0C              RCF2      R/W         -               -         SLICE1         SLICE0              -              -          MG1           MG0
Network Diagnostics Control Registers
        0D            MAINT0      R/W         -           PATT1         PATT0        PATT_CLK        PRBS_INV          LAC           AISE          ATAO
        0E            MAINT1      R/W         -               -             -              -            ARLP           RLP            ALP           DLP
        0F            MAINT2      R/W         -               -       TIBLB_L1       TIBLB_L0       RIBLBA_L1     RIBLBA_L0      RIBLBD_L1     RIBLBD_L0
        10            MAINT3      R/W     TIBLB7          TIBLB6        TIBLB5         TIBLB4          TIBLB3        TIBLB2         TIBLB1        TIBLB0
        11            MAINT4      R/W    RIBLBA7         RIBLBA6       RIBLBA5        RIBLBA4         RIBLBA3       RIBLBA2        RIBLBA1       RIBLBA0
        12            MAINT5      R/W    RIBLBD7         RIBLBD6       RIBLBD5        RIBLBD4         RIBLBD3       RIBLBD2       RIBLBD1       RIBLBD0
        13            MAINT6      R/W         -          BPV_INS      ERR_INS        EXZ_DEF        ERR_SEL1      ERR_SEL0         CNT_MD       CNT_TRF
Interrupt Control Registers
        14             INTM0      R/W         -         IBLBA_IM      IBLBD_IM       PRBS_IM          TCLK_IM        DF_IM          AIS_IM       LOS_IM
        15             INTM1      R/W  DAC_OV_IM        JAOV_IM        JAUD_IM        ERR_IM           EXZ_IM        CV_IM        TIMER_IM       CNT_IM
        16             INTES      R/W         -        IBLBA_IES     IBLBD_IES       PRBS_IES        TCLK_IES        DF_IES        AIS_IES      LOS_IES
Line Status Register
        17             STAT0       R          -          IBLBA_S       IBLBD_S        PRBS_S        TCLK_LOS          DF_S          AIS_S         LOS_S
        18             STAT1       R          -               -         RLP_S              -               -              -             -             -
Interrupt Status Register
        19             INTS0       R          -         IBLBA_IS      IBLBD_IS        PRBS_IS     TCLK_LOS_IS         DF_IS         AIS_IS       LOS_IS
        1A             INTS1       R   DAC_OV_IS         JAOV_IS       JAUD_IS        ERR_IS           EXZ_IS        CV_IS        TMOV_IS      CNT_OV_IS
Counter Registers
        1B              CNT0       R        Bit7            Bit6          Bit5           Bit4            Bit3          Bit2           Bit1          Bit0
        1C              CNT1       R       Bit15           Bit14         Bit13          Bit12           Bit11          Bit10          Bit9          Bit8
 Programming Information                                                      37                                                      December 9, 2005


 IDT82V2041E                                                               SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
4.3      REGISTER DESCRIPTION
4.3.1    CONTROL REGISTERS
Table-20 ID: Device Revision Register
               (R, Address = 00H)
      Symbol             Bit        Default                                                         Description
       ID[7:0]           7-0         00H    Current silicon chip ID.
Table-21 RST: Reset Register
                 (W, Address = 01H)
      Symbol             Bit        Default                                                         Description
      RST[7:0]           7-0         00H    Software reset. A write operation on this register will reset all internal registers to their default values, and the status
                                            of all ports are set to the default status. The content in this register can not be changed. After reset, all drivers output
                                            are in high impedance state.
                                            Note: Bit T1E1 (GCF0) will keep set value and will not be reset.
Table-22 GCF: Global Configuration Register
                  (R/W, Address = 02H)
      Symbol             Bit        Default                                                         Description
          -              7-3        00000   Reserved.
        T1E1              2           0     This bit selects the E1 or T1/J1 operation mode globally.
                                            = 0: E1 mode is selected.
                                            = 1: T1/J1 mode is selected.
                                                Note: After bit T1E1 is changed: Before accessing any other regisers a delay of 50us is required to allow the internal clocking
                                            to be settled.
    INT_PIN[1:0]         1-0          00    Interrupt pin control
                                            = x0: Open drain, active low (with an external pull-up resistor)
                                            = 01: Push-pull, active low
                                            = 11: Push-pull, active high
Table-23 TERM: Transmit and Receive Termination Configuration Register
                    (R/W, Address = 03H)
      Symbol             Bit        Default                                                         Description
          -              7-6          00    Reserved.
    T_TERM[2:0]          5-3         000    These bits select the internal termination for transmit line impedance matching.
                                            = 000: Internal 75 Ω impedance matching
                                            = 001: Internal 120 Ω impedance matching
                                            = 010: Internal 100 Ω impedance matching
                                            = 011: Internal 110 Ω impedance matching
                                            = 1xx: Selects external impedance matching resistors for E1 mode only. T1/J1 does not require external impedance
                                            resistors (see Table-10).
    R_TERM[2:0]          2-0         000    These bits select the internal termination for receive line impedance matching.
                                            = 000: Internal 75 Ω impedance matching
                                            = 001: Internal 120 Ω impedance matching
                                            = 010: Internal 100 Ω impedance matching
                                            = 011: Internal 110 Ω impedance matching
                                            = 1xx: Selects external impedance matching resistors (see Table-11).
 Programming Information                                                      38                                                                  December 9, 2005


 IDT82V2041E                                                         SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-24 JACF: Jitter Attenuation Configuration Register
               (R/W, Address = 04H)
     Symbol           Bit       Default                                            Description
        -             7-6         00     Reserved.
    JA_LIMIT           5           1     = 0: Normal mode
                                         = 1: JA limit mode
    JACF[1:0]         4-3         00     Jitter attenuation configuration
                                         = 00/10: JA not used
                                         = 01: JA in transmit path
                                         = 11: JA in receive path
    JADP[1:0]         2-1         00     Jitter attenuation depth select
                                         = 00: 128 bits
                                         = 01: 64 bits
                                         = 1x: 32 bits
      JABW             0           0     Jitter transfer function bandwidth select
                                         = 0: 6.8 Hz (E1)
                                              5 Hz (T1/J1)
                                         = 1: 0.9 Hz (E1)
                                              1.25 Hz (T1/J1)
 Programming Information                                                 39                                 December 9, 2005


 IDT82V2041E                                                                         SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
4.3.2      TRANSMIT PATH CONTROL REGISTERS
Table-25 TCF0: Transmitter Configuration Register 0
                       (R/W, Address = 05H)
        Symbol                 Bit          Default                                                            Description
             -                 7-5            000         Reserved.
        T_OFF                   4               0         Transmitter power down enable
                                                          = 0: Transmitter power up
                                                          = 1: Transmitter power down (line driver high impedance)
        TD_INV                  3               0         Transmit data invert
                                                          = 0: Data on TD or TDP/TDN is active high
                                                          = 1: Data on TD or TDP/TDN is active low
     TCLK_SEL                   2               0         Transmit clock edge select
                                                          = 0: Data on TDP/TDN is sampled on the falling edge of TCLK
                                                          = 1: Data on TDP/TDN is sampled on the rising edge of TCLK
      T_MD[1:0]                0-1             00         Transmitter operation mode control
                                                          T_MD[1:0] select different stages of the transmit data path
                                                          = 00: Enable HDB3/B8ZS encoder and waveform shaper blocks. Input on pin TD is single rail NRZ data
                                                          = 01: Enable AMI encoder and waveform shaper blocks. Input on pin TD is single rail NRZ data
                                                          = 1x: Encoder is bypassed, dual rail NRZ transmit data input on pin TDP/TDN
Table-26 TCF1: Transmitter Configuration Register 1
                       (R/W, Address = 06H)
       Symbol               Bit      Default                                                               Description
            -              7-6         00        Reserved. This bit should be ‘0’ for normal operation.
     DFM_OFF                 5          0        Transmit driver failure monitor disable
                                                 = 0: DFM is enabled
                                                 = 1: DFM is disabled
          THZ                4          1        Transmit line driver high impedance enable
                                                 = 0: Normal state
                                                 = 1: Transmit line driver high impedance enable (other transmit path still work normally)
     PULS[3:0]              3-0       0000       These bits select the transmit template:
                                                                          T1/E1/J1                TCLK           Cable impedance              Cable range      Allowable Cable loss
                                                        00001                 E1               2.048 MHz                  75 Ω                     -                  0-24 dB
                                                         0001                 E1               2.048 MHz                 120 Ω                     -                  0-24 dB
                                                         0010               DSX1               1.544 MHz                 100 Ω                  0-133 ft             0-0.6 dB
                                                         0011               DSX1               1.544 MHz                 100 Ω                 133-266 ft           0.6-1.2 dB
                                                         0100               DSX1               1.544 MHz                 100 Ω                 266-399 ft           1.2-1.8 dB
                                                         0101               DSX1               1.544 MHz                 100 Ω                 399-533 ft           1.8-2.4 dB
                                                         0110               DSX1               1.544 MHz                 100 Ω                 533-655 ft           2.4-3.0 dB
                                                         0111                 J1               1.544 MHz                 110 Ω                  0-655 ft             0-3.0 dB
                                                     1000 - 1011                                                         Reserved
                                                        11XX                                            User programmable waveform setting
   1. In internal impedance matching mode, for E1/75 Ω cable impedance, the PULS[3:0] bits (TCF1, 06H) should be set to ‘0000’. In external impedance matching mode, for E1/75 Ω cable
      impedance, the PULS[3:0] bits should be set to ‘0001’.
 Programming Information                                                                 40                                                                December 9, 2005


 IDT82V2041E                                                            SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-27 TCF2: Transmitter Configuration Register 2
               (R/W, Address = 07H)
     Symbol          Bit        Default                                                           Description
         -           7-6          00     Reserved.
    SCAL[5:0]        5-0        100001   SCAL specifies a scaling factor to be applied to the amplitude of the user-programmable arbitrary pulses which is
                                         to be transmitted if needed. The default value of SCAL[5:0] is ‘100001’. Refer to 3.3.3.2 User-Programmable Arbi-
                                         trary Waveform.
                                         = 110110: Default value for T1 0~133 ft, T1 133~266 ft, T1 266~399 ft, T1 399~533 ft, T1 533~655 ft, J1 0~655 ft.
                                            One step change of this value results in 2% scaling up/down against the pulse amplitude.
                                         = 100001: Default value for E1 75 Ω and 120 Ω. One step change of this value results in 3% scaling up/down
                                            against the pulse amplitude.
                                         t
Table-28 TCF3: Transmitter Configuration Register 3
               (R/W, Address = 08H)
     Symbol          Bit        Default                                                           Description
      DONE            7            0     After ‘1’ is written to this bit, a read or write operation is implemented.
       RW             6            0     This bit selects read or write operation
                                         = 0: Write to RAM
                                         = 1: Read from RAM
      UI[1:0]        5-4          00     These bits specify the unit interval address. There are totally 4 unit intervals.
                                         = 00: UI address is 0 (The most left UI)
                                         = 01: UI address is 1
                                         = 10: UI address is 2
                                         = 11: UI address is 3
    SAMP[3:0]        3-0         0000    These bits specify the sample address. Each UI has totally 16 samples.
                                         = 0000: Sample address is 0 (The most left sample)
                                         = 0001: Sample address is 1
                                         = 0010: Sample address is 2
                                         ……
                                         = 1110: Sample address is 14
                                         = 1111: Sample address is 15
Table-29 TCF4: Transmitter Configuration Register 4
               (R/W, Address = 09H)
     Symbol          Bit        Default                                                           Description
         -            7            0     Reserved
    WDAT[6:0]        6-0       0000000   In Indirect Write operation, the WDAT[6:0] will be loaded to the pulse template RAM, specifying the amplitude of
                                         the Sample.
                                         After an Indirect Read operation, the amplitude data of the Sample in the pulse template RAM will be output to the
                                         WDAT[6:0].
 Programming Information                                                     41                                                     December 9, 2005


 IDT82V2041E                                                        SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
4.3.3    RECEIVE PATH CONTROL REGISTERS
Table-30 RCF0: Receiver Configuration Register 0
                (R/W, Address = 0AH)
       Symbol         Bit        Default                                                       Description
          -           7-5         000    Reserved
       R_OFF           4            0    Receiver power down enable
                                         = 0: Receiver power up
                                         = 1: Receiver power down
       RD_INV          3            0    Receive data invert
                                         = 0: Data on RD or RDP/RDN is active high
                                         = 1: Data on RD or RDP/RDN is active low
     RCLK_SEL          2            0    Receive clock edge select (this bit is ignored in slicer mode)
                                         = 0: Data on RD or RDP/RDN is updated on the rising edge of RCLK
                                         = 1: Data on RD or RDP/RDN is updated on the falling edge of RCLK
      R_MD[1:0]       1-0          00    Receive path decoding selection
                                         = 00: Receive data is HDB3 (E1)/B8ZS (T1/J1) decoded and output on RD pin with single rail NRZ format
                                         = 01: Receive data is AMI decoded and output on RD pin with single rail NRZ format
                                         = 10: Decoder is bypassed, re-timed dual rail data with NRZ format output on RDP/RDN (dual rail mode with clock
                                         recovery)
                                         = 11: CDR and decoder are bypassed, slicer data with RZ format output on RDP/RDN (slicer mode)
Table-31 RCF1: Receiver Configuration Register 1
                (R/W, Address= 0BH)
       Symbol         Bit        Default                                                      Description
          -            7            0    Reserved
       EQ_ON           6            0    = 0: Receive equalizer off
                                         = 1: Receive equalizer on (LOS programming enabled)
          -            5            0    Reserved.
       LOS[4:0]       4:0        10101                                              LOS Clear Level (dB)               LOS Declare Level (dB)
                                                          00000                     0                                  <-4
                                                          00001                     >-2                                <-6
                                                          00010                     >-4                                <-8
                                                          00011                     >-6                                <-10
                                                          00100                     >-8                                <-12
                                                          00101                     >-10                               <-14
                                                          00110                     >-12                               <-16
                                                          00111                     >-14                               <-18
                                                          01000                     >-16                               <-20
                                                          01001                     >-18                               <-22
                                                          01010                     >-20                               <-24
                                                      01011 - 11111                 Reserved
 Programming Information                                               42                                                       December 9, 2005


 IDT82V2041E                                                       SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-32 RCF2: Receiver Configuration Register 2
               (R/W, Address = 0CH)
     Symbol          Bit        Default                                                       Description
        -            7-6          00    Reserved.
    SLICE[1:0]       5-4          01    Receive slicer threshold
                                        = 00: The receive slicer generates a mark if the voltage on RTIP/RRING exceeds 40% of the peak amplitude.
                                        = 01: The receive slicer generates a mark if the voltage on RTIP/RRING exceeds 50% of the peak amplitude.
                                        = 10: The receive slicer generates a mark if the voltage on RTIP/RRING exceeds 60% of the peak amplitude.
                                        = 11: The receive slicer generates a mark if the voltage on RTIP/RRING exceeds 70% of the peak amplitude.
        -            3-2          10    Reserved
     MG[1:0]         1-0          00    Monitor gain setting: these bits select the internal linear gain boost
                                        = 00: 0 dB
                                        = 01: 22 dB
                                        = 10: 26 dB
                                        = 11: 32 dB
 Programming Information                                               43                                                     December 9, 2005


 IDT82V2041E                                                       SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
4.3.4    NETWORK DIAGNOSTICS CONTROL REGISTERS
Table-33 MAINT0: Maintenance Function Control Register 0
                 (R/W, Address = 0DH)
       Symbol        Bit       Default                                                       Description
          -           7           00   Reserved.
      PATT[1:0]      6-5          00   These bits select the internal pattern and insert it into transmit data stream.
                                       = 00: Normal operation (PATT_CLK = 0) / insert all zeros (PATT_CLK = 1)
                                       = 01: Insert All Ones
                                       = 10: Insert PRBS (E1: 215-1) or QRSS (T1/J1: 220-1)
                                       = 11: Insert programmable Inband loopback activate or deactivate code (default value 00001)
     PATT_CLK         4           0    Selects reference clock for transmitting internal pattern
                                       = 0: Uses TCLK as the reference clock
                                       = 1: Uses MCLK as the reference clock
     PRBS_INV         3            0   Inverts PRBS
                                       = 0: The PRBS data is not inverted
                                       = 1: The PRBS data is inverted before transmission and detection
         LAC          2            0   LOS/AIS criterion is selected as below:
                                       = 0: G.775 (E1) / T1.231 (T1/J1)
                                       = 1: ETSI 300233& I.431 (E1) / I.431 (T1/J1)
        AISE          1            0   AIS enable during LOS
                                       = 0: AIS insertion on RDP/RDN/RCLK is disabled during LOS
                                       = 1: AIS insertion on RDP/RDN/RCLK is enabled during LOS
        ATAO          0            0   Automatically Transmit All Ones (enabled only when PATT[1:0] = 00)
                                       = 0: Disabled
                                       = 1: Automatically Transmit All Ones pattern at TTIP/TRING during LOS
Table-34 MAINT1: Maintenance Function Control Register 1
                  (R/W, Address= 0EH)
       Symbol        Bit       Default                                                       Description
          -          7-4        0000   Reserved
        ARLP          3           0    Automatic remote loopback enable
                                       = 0: Disables automatic remote loopback (normal transmit and receive operation)
                                       = 1: Enables automatic remote loopback
         RLP          2           0    Remote loopback enable
                                       = 0: Disables remote loopback (normal transmit and receive operation)
                                       = 1: Enables remote loopback
         ALP          1            0   Analog loopback enable
                                       = 0: Disables analog loopback (normal transmit and receive operation)
                                       = 1: Enables analog loopback
         DLP          0           0    Digital loopback enable
                                       = 0: Disables digital loopback (normal transmit and receive operation)
                                       = 1: Enables digital loopback
 Programming Information                                              44                                                      December 9, 2005


 IDT82V2041E                                                           SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-35 MAINT2: Maintenance Function Control Register 2
                 (R/W, Address = 0FH)
      Symbol         Bit        Default                                                   Description
         -           7-6          00     Reserved
    TIBLB_L[1:0]     5-4          00     Defines the length of the user-programmable transmit loopback activate/deactivate code contained in TIBLB reg-
                                         ister. The default selection is 5 bits length.
                                         = 00: 5-bit long activate code in TIBLB [4:0]
                                         = 01: 6-bit long activate code in TIBLB [5:0]
                                         = 10: 7-bit long activate code in TIBLB [6:0]
                                         = 11: 8-bit long activate code in TIBLB [7:0]
   RIBLBA_L[1:0]     3-2          00     Defines the length of the user-programmable receive activate loopback code contained in RIBLBA register. The
                                         default selection is 5 bits length.
                                         = 00: 5-bit long activate code in RIBLBA [4:0]
                                         = 01: 6-bit long activate code in RIBLBA [5:0]
                                         = 10: 7-bit long activate code in RIBLBA [6:0]
                                         = 11: 8-bit long activate code in RIBLBA [7:0]
   RIBLBD_L[1:0]     1-0          01     Defines the length of the user-programmable receive deactivate loopback code contained in RIBLBD register. The
                                         default selection is 6 bits length.
                                         = 00: 5-bit long deactivate code in RIBLBD [4:0]
                                         = 01: 6-bit long deactivate code in RIBLBD [5:0]
                                         = 10: 7-bit long deactivate code in RIBLBD [6:0]
                                         = 11: 8-bit long deactivate code in RIBLBD [7:0]
Table-36 MAINT3: Maintenance Function Control Register 3
                  (R/W, Address = 10H)
      Symbol         Bit        Default                                                   Description
     TIBLB[7:0]      7-0      (000)00001 Defines the user-programmable transmit Inband loopback activate or deactivate code. The default selection is
                                         00001.
                                         TIBLB [7:0] form the 8-bit repeating code
                                         TIBLB [6:0] form the 7-bit repeating code
                                         TIBLB [5:0] form the 6-bit repeating code
                                         TIBLB [4:0] form the 5-bit repeating code
Table-37 MAINT4: Maintenance Function Control Register 4
                 (R/W, Address = 11H)
      Symbol         Bit        Default                                                   Description
    RIBLBA[7:0]      7-0      (000)00001 Defines the user-programmable receive Inband loopback activate code. The default selection is 00001.
                                         RIBLBA [7:0] form the 8-bit repeating code
                                         RIBLBA [6:0] form the 7-bit repeating code
                                         RIBLBA [5:0] form the 6-bit repeating code
                                         RIBLBA [4:0] form the 5-bit repeating code
Table-38 MAINT5: Maintenance Function Control Register 5
                 (R/W, Address = 12H)
      Symbol         Bit        Default                                                   Description
    RIBLBD[7:0]      7-0      (00)001001 Defines the user-programmable receive Inband loopback deactivate code. The default selection is 001001.
                                         RIBLBD [7:0] form the 8-bit repeating code
                                         RIBLBD [6:0] form the 7-bit repeating code
                                         RIBLBD [5:0] form the 6-bit repeating code
                                         RIBLBD [4:0] form the 5-bit repeating code
 Programming Information                                                  45                                                    December 9, 2005


 IDT82V2041E                                                          SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-39 MAINT6: Maintenance Function Control Register 6
                (R/W, Address = 13H)
     Symbol         Bit       Default                                                           Description
        -            7            0   Reserved.
     BPV_INS         6            0   BPV error insertion
                                      A ‘0’ to ‘1’ transition on this bit will cause a single bipolar violation error to be inserted into the transmit data stream.
                                      This bit must be cleared and set again for a subsequent error to be inserted.
    ERR_INS          5            0   PRBS logic error insertion
                                      A ‘0’ to ‘1’ transition on this bit will cause a single PRBS logic error to be inserted into the transmit PRBS data stream.
                                      This bit must be cleared and set again for a subsequent error to be inserted.
    EXZ_DEF          5            0   EXZ definition select
                                      = 0: ANSI
                                      = 1: FCC
    ERR_SEL        3-2           00   These bits choose which type of error will be counted
                                      = 00: The PRBS logic error is counted by a 16-bit error counter.
                                      = 01: The EXZ error is counted by a 16-bit error counter.
                                      = 10: The Received CV (BPV) error is counted by a 16-bit error counter.
                                      = 11: Both CV (BPV) and EXZ errors are counted by a 16-bit error counter.
     CNT_MD          1            0   Counter operation mode select
                                      = 0: Manual Report mode
                                      = 1: Auto Report mode
    CNT_TRF          0            0   = 0: Clear this bit for the next ‘0’ to ‘1’ transition on this bit.
                                      = 1: Error counting result is transferred to CNT0 and CNT1 and the error counter is reset.
 Programming Information                                                   46                                                              December 9, 2005


 IDT82V2041E                                                          SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
4.3.5     INTERRUPT CONTROL REGISTERS
Table-40 INTM0: Interrupt Mask Register 0
                  (R/W, Address = 14H)
        Symbol         Bit        Default                                                   Description
           -            7           1     Reserved
      IBLBA_IM          6           1     In-band Loopback activate code detect interrupt mask
                                          = 0: In-band Loopback activate code detect interrupt enabled
                                          = 1: In-band Loopback activate code detect interrupt masked
      IBLBD_IM          5           1     In-band Loopback deactivate code detect interrupt mask
                                          = 0: In-band Loopback deactivate code detect interrupt enabled
                                          = 1: In-band Loopback deactivate code detect interrupt masked
      PRBS_IM           4           1     PRBS synchronic signal detect interrupt mask
                                          = 0: PRBS synchronic signal detect interrupt enabled
                                          = 1: PRBS synchronic signal detect interrupt masked
       TCLK_IM          3           1     TCLK loss detect interrupt mask
                                          = 0: TCLK loss detect interrupt enabled
                                          = 1: TCLK loss detect interrupt masked
        DF_IM           2           1     Driver Failure interrupt mask
                                          = 0: Driver Failure interrupt enabled
                                          = 1: Driver Failure interrupt masked
        AIS_IM          1           1     Alarm Indication Signal interrupt mask
                                          = 0: Alarm Indication Signal interrupt enabled
                                          = 1: Alarm Indication Signal interrupt masked
       LOS_IM           0           1     Loss Of Signal interrupt mask
                                          = 0: Loss Of Signal interrupt enabled
                                          = 1: Loss Of Signal interrupt masked
 Programming Information                                                  47                                 December 9, 2005


 IDT82V2041E                                                        SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-41 INTM1: Interrupt Masked Register 1
                (R/W, Address = 15H)
     Symbol           Bit       Default                                                  Description
   DAC_OV_IM           7          1     DAC arithmetic overflow interrupt mask
                                        = 0: DAC arithmetic overflow interrupt enabled
                                        = 1: DAC arithmetic overflow interrupt masked
    JAOV_IM            6          1     JA overflow interrupt mask
                                        = 0: JA overflow interrupt enabled
                                        = 1: JA overflow interrupt masked
    JAUD_IM            5          1     JA underflow interrupt mask
                                        = 0: JA underflow interrupt enabled
                                        = 1: JA underflow interrupt masked
     ERR_IM            4          1     PRBS/QRSS logic error detect interrupt mask
                                        = 0: PRBS/QRSS logic error detect interrupt enabled
                                        = 1: PRBS/QRSS logic error detect interrupt masked
     EXZ_IM            3          1     Receive excess zeros interrupt mask
                                        = 0: Receive excess zeros interrupt enabled
                                        = 1: Receive excess zeros interrupt masked
      CV_IM            2          1     Receive error interrupt mask
                                        = 0: Receive error interrupt enabled
                                        = 1: Receive error interrupt masked
    TIMER_IM           1          1     One-Second Timer expiration interrupt mask
                                        = 0: One-Second Timer expiration interrupt enabled
                                        = 1: One-Second Timer expiration interrupt masked
     CNT_IM            0          1     Counter overflow interrupt mask
                                        = 0: Counter overflow interrupt enabled
                                        = 1: Counter overflow interrupt masked
 Programming Information                                               48                                  December 9, 2005


 IDT82V2041E                                                         SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-42 INTES: Interrupt Trigger Edge Select Register
                (R/W, Address = 16H)
      Symbol          Bit       Default                                                           Description
         -             7           0     Reserved
    IBLBA_IES          6           0     This bit determines the Inband Loopback Activate Code interrupt event.
                                         = 0: Interrupt event is generated as a ‘0’ to ‘1’ transition of the IBLBA_S bit in STAT0 status register
                                         = 1: Interrupt event is generated as either a ‘0’ to ‘1’ transition or a ‘1’ to ‘0’ transition of the IBLBA_S bit in STAT0
                                         status register
    IBLBD_IES          5           0     This bit determines the Inband Loopback Deactivate Code interrupt event.
                                         = 0: Interrupt event is generated as a ‘0’ to ‘1’ transition of the IBLBD_S bit in STAT0 status register
                                         = 1: Interrupt event is generated as either a ‘0’ to ‘1’ transition or a ‘1’ to ‘0’ transition of the IBLBD_S bit in STAT0
                                         status register
    PRBS_IES           4           0     This bit determines the PRBS/QRSS synchronization status interrupt event.
                                         = 0: Interrupt event is generated as a ‘0’ to ‘1’ transition of the PRBS_S bit in STAT0 status register
                                         = 1: Interrupt event is generated as either a ‘0’ to ‘1’ transition or a ‘1’ to ‘0’ transition of the PRBS_S bit in STAT0
                                         status register
     TCLK_IES          3           0     This bit determines the TCLK Loss interrupt event.
                                         = 0: Interrupt event is generated as a ‘0’ to ‘1’ transition of the TCLK_LOS bit in STAT0 status register
                                         = 1: Interrupt event is generated as either a ‘0’ to ‘1’ transition or a ‘1’ to ‘0’ transition of the TCLK_LOS bit in STAT0
                                         status register
      DF_IES           2           0     This bit determines the Driver Failure interrupt event.
                                         = 0: Interrupt event is generated as a ‘0’ to ‘1’ transition of the DF_S bit in STAT0 status register
                                         = 1: Interrupt event is generated as either a ‘0’ to ‘1’ transition or a ‘1’ to ‘0’ transition of the DF_S bit in STAT0 status
                                         register
      AIS_IES          1           0     This bit determines the AIS interrupt event.
                                         = 0: Interrupt event is generated as a ‘0’ to ‘1’ transition of the AIS_S bit in STAT0 status register
                                         = 1: Interrupt event is generated as either a ‘0’ to ‘1’ transition or a ‘1’ to ‘0’ transition of the AIS_S bit in STAT0 status
                                         register
     LOS_IES           0           0     This bit determines the LOS interrupt event.
                                         = 0: Interrupt is generated as a ‘0’ to ‘1’ transition of the LOS_S bit in STAT0 status register
                                         = 1: Interrupt is generated as either a ‘0’ to ‘1’ transition or a ‘1’ to ‘0’ transition of the LOS_S bit in STAT0 status
                                         register
 Programming Information                                                 49                                                                     December 9, 2005


 IDT82V2041E                                                             SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
4.3.6    LINE STATUS REGISTERS
Table-43 STAT0: Line Status Register 0 (real time status monitor)
                  (R, Address = 17H)
       Symbol           Bit       Default                                                         Description
          -              7           0    Reserved
      IBLBA_S            6           0    In-band Loopback activate code receive status indication
                                          = 0: No Inband Loopback activate code is detected
                                          = 1: Activate signal is detected and then received over a period of more than t ms, with a bit error rate less than 10-
                                          2. The bit remains set as long as the bit error rate does not exceed 10-2.
                                          Note1:
                                          If automatic remote loopback switching is disabled (ARLP = 0), t = 40 ms.
                                          If automatic remote loopback switching is enabled (ARLP = 1), t = 5.1 s. The rising edge of this bit activates the
                                          remote loopback operation in local end.
                                          Note2:
                                          If IBLBA_IM=0:
                                          A ‘0’ to ‘1’ transition on this bit causes an activate code detected interrupt if IBLBA _IES bit is ‘0’;
                                          Any changes of this bit causes an activate code detected interrupt if IBLBA _IES bit is set to ‘1’.
      IBLBD_S            5           0    In-band Loopback deactivate code receive status indication
                                          = 0: No Inband Loopback deactivate signal is detected
                                          = 1: The Inband Loopback deactivate signal is detected and then received over a period of more than t, with a bit
                                          error rate less than 10-2. The bit remains set as long as the bit error rate does not exceed 10-2.
                                          Note1:
                                          If automatic remote loopback switching is disabled (ARLP = 0), t = 40 ms.
                                          If automatic remote loopback switching is enabled (ARLP = 1), t = 5.1 s. The rising edge of this bit disables the
                                          remote loopback operation.
                                          Note2:
                                          If IBLBD_IM=0:
                                          A ‘0’ to ‘1’ transition on this bit causes a deactivate code detected interrupt if IBLBD _IES bit is ‘0’
                                          Any changes of this bit causes a deactivate code detected interrupt if IBLBD _IES bit is set to ‘1’
      PRBS_S             4           0    Synchronous status indication of PRBS/QRSS (real time)
                                          = 0: 215-1 (E1) PRBS or 220-1 (T1/J1) QRSS is not detected
                                          = 1: 215-1 (E1) PRBS or 220-1 (T1/J1) QRSS is detected
                                          Note:
                                          If PRBS_IM=0:
                                          A ‘0’ to ‘1’ transition on this bit causes a synchronous status detected interrupt if PRBS _IES bit is ‘0’.
                                          Any changes of this bit causes an interrupt if PRBS_IES bit is set to ‘1’.
     TCLK_LOS            3           0    TCLK loss indication
                                          = 0: Normal
                                          = 1: TCLK pin has not toggled for more than 70 MCLK cycles.
                                          Note:
                                          If TCLK_IM=0:
                                          A ‘0’ to ‘1’ transition on this bit causes an interrupt if TCLK _IES bit is ‘0’.
                                          Any changes of this bit causes an interrupt if TCLK_IES bit is set to ‘1’.
 Programming Information                                                     50                                                         December 9, 2005


 IDT82V2041E                                                            SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-43 STAT0: Line Status Register 0 (real time status monitor) (Continued)
                (R, Address = 17H)
     Symbol           Bit       Default                                                          Description
      DF_S             2           0     Line driver status indication
                                         = 0: Normal operation
                                         = 1: Line driver short circuit is detected.
                                         Note:
                                         If DF_IM=0
                                         A ‘0’ to ‘1’ transition on this bit causes an interrupt if DF _IES bit is ‘0’.
                                         Any changes of this bit causes an interrupt if DF_IES bit is set to ‘1’.
      AIS_S            1           0     Alarm Indication Signal status detection
                                         = 0: No AIS signal is detected in the receive path
                                         = 1: AIS signal is detected in the receive path
                                         Note:
                                         If AIS_IM=0
                                         A ‘0’ to ‘1’ transition on this bit causes an interrupt if AIS _IES bit is ‘0’.
                                         Any changes of this bit causes an interrupt if AIS_IES bit is set to ‘1’.
     LOS_S             0           0     Loss Of Signal status detection
                                         = 0: Loss of signal on RTIP/RRING is not detected.
                                         = 1: Loss of signal on RTIP/RRING is detected.
                                         Note:
                                         If LOS_IM=0
                                         A ‘0’ to ‘1’ transition on this bit causes an interrupt if LOS _IES bit is ‘0’.
                                         Any changes of this bit causes an interrupt if LOS_IES bit is set to ‘1’.
Table-44 STAT1: Line Status Register 1 (real time status monitor)
                (R, Address = 18H)
     Symbol           Bit       Default                                                          Description
        -            7-6           00    Reserved.
     RLP_S             5           0     Indicating the status of Remote Loopback
                                         = 0: The remote loopback is inactive.
                                         = 1: The remote loopback is active (closed).
        -            4-0         00000   Reserved
 Programming Information                                                    51                                           December 9, 2005


 IDT82V2041E                                                              SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
4.3.7    INTERRUPT STATUS REGISTERS
Table-45 INTS0: Interrupt Status Register 0
                (R, Address = 19H) (this register is reset and relevant interrupt request is cleared after a read)
       Symbol         Bit       Default                                                           Description
           -           7            0        Reserved
      IBLBA_IS         6            0        This bit indicates the occurrence of the Inband Loopback Activate Code interrupt event.
                                             = 0: No Inband Loopback Activate Code interrupt event occurred
                                             = 1: Inband Loopback Activate Code interrupt event occurred
      IBLBD_IS         5            0        This bit indicates the occurrence of the Inband Loopback Deactivate Code interrupt event.
                                             = 0: No Inband Loopback Deactivate Code interrupt event occurred
                                             = 1: Interrupt event of the received Inband Loopback Deactivate Code occurred.
      PRBS_IS          4            0        This bit indicates the occurrence of the interrupt event generated by the PRBS/QRSS synchronization status.
                                             = 0: No PRBS/QRSS synchronization status interrupt event occurred
                                             = 1: PRBS/QRSS synchronization status interrupt event occurred
   TCLK_LOS_IS         3            0        This bit indicates the occurrence of the interrupt event generated by the TCLK loss detection.
                                             = 0: No TCLK loss interrupt event.
                                             = 1: TCLK loss interrupt event occurred.
        DF_IS          2            0        This bit indicates the occurrence of the interrupt event generated by the Driver Failure.
                                             = 0: No Driver Failure interrupt event occurred
                                             = 1: Driver Failure interrupt event occurred
        AIS_IS         1            0        This bit indicates the occurrence of the AIS (Alarm Indication Signal) interrupt event.
                                             = 0: No AIS interrupt event occurred
                                             = 1: AIS interrupt event occurred
       LOS_IS          0            0        This bit indicates the occurrence of the LOS (Loss of signal) interrupt event.
                                             = 0: No LOS interrupt event occurred
                                             = 1: LOS interrupt event occurred
 Programming Information                                                     52                                                        December 9, 2005


 IDT82V2041E                                                            SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-46 INTS1: Interrupt Status Register 1
                (R, Address = 1AH) (this register is reset and the relevant interrupt request is cleared after a read)
      Symbol          Bit       Default                                                          Description
    DAC_OV_IS          7            0       This bit indicates the occurrence of the pulse amplitude overflow of Arbitrary Waveform Generator interrupt event.
                                            = 0: No pulse amplitude overflow of Arbitrary Waveform Generator interrupt event occurred
                                            = 1: The pulse amplitude overflow of Arbitrary Waveform Generator interrupt event occurred
     JAOV_IS           6            0       This bit indicates the occurrence of the Jitter Attenuator Overflow interrupt event.
                                            = 0: No JA Overflow interrupt event occurred
                                            = 1: JA Overflow interrupt event occurred
     JAUD_IS           5            0       This bit indicates the occurrence of the Jitter Attenuator Underflow interrupt event.
                                            = 0: No JA Underflow interrupt event occurred
                                            = 1: JA Underflow interrupt event occurred
      ERR_IS           4            0       This bit indicates the occurrence of the interrupt event generated by the detected PRBS/QRSS logic error.
                                            = 0: No PRBS/QRSS logic error interrupt event occurred
                                            = 1: PRBS/QRSS logic error interrupt event occurred
      EXZ_IS           3            0       This bit indicates the occurrence of the Excessive Zeros interrupt event.
                                            = 0: No Excessive Zeros interrupt event occurred
                                            = 1: EXZ interrupt event occurred
       CV_IS           2            0       This bit indicates the occurrence of the Code Violation interrupt event.
                                            = 0: No Code Violation interrupt event occurred
                                            = 1: Code Violation interrupt event occurred
     TMOV_IS           1            0       This bit indicates the occurrence of the One-Second Timer Expiration interrupt event.
                                            = 0: No One-Second Timer Expiration interrupt event occurred
                                            = 1: One-Second Timer Expiration interrupt event occurred
    CNT_OV_IS          0            0       This bit indicates the occurrence of the Counter Overflow interrupt event.
                                            = 0: No Counter Overflow interrupt event occurred
                                            = 1: Counter Overflow interrupt event occurred
 Programming Information                                                   53                                                        December 9, 2005


 IDT82V2041E                                                         SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
4.3.8   COUNTER REGISTERS
Table-47 CNT0: Error Counter L-byte Register 0
                (R, Address = 1BH)
      Symbol          Bit        Default                                                      Description
     CNT_L[7:0]       7-0          00H   This register contains the lower eight bits of the 16-bit error counter. CNT_L[0] is the LSB.
Table-48 CNT1: Error Counter H-byte Register 1
                (R, Address = 1CH)
      Symbol          Bit        Default                                                      Description
     CNT_H[7:0]       7-0          00H   This register contains the upper eight bits of the 16-bit error counter. CNT_H[7] is the MSB.
 Programming Information                                                54                                                           December 9, 2005


 IDT82V2041E                                                           SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
5       HARDWARE CONTROL PIN SUMMARY
Table-49 Hardware Control Pin Summary
    Pin No.     Symbol                                                               Description
     TQFP
      17        MODE1      MODE[1:0]: Operation mode of control interface select
      16        MODE0      00= Hardware interface
                           01= Serial interface
                           10= Parallel – multiplexed – Motorola Interface
                           11= Parallel – multiplexed – Intel Interface
      23         TERM      TERM: Termination interface select
                           This pin selects internal or external impedance matching for both receiver and transmitter
                           0= ternary interface with external impedance matching network. External impedance matching is not supported in T1/J1 transmit
                               line interface.
                           1= ternary interface with internal impedance matching network
      21       RXTXM1      RXTXM[1:0]: Receive and transmit path operation mode select
      20       RXTXM0      00= single rail with HDB3/B8ZS coding
                           01= single rail with AMI coding
                           10= dual rail interface with CDR enable
                           11= slicer mode
      33        PULS3      PULS[3:0]: These pins are used to select the following functions:
      32        PULS2      •      T1/E1/J1 mode
      31        PULS1      •      Transmit pulse template
      30        PULS0      •      Internal termination impedance (75Ω/100Ω/110Ω/120Ω)
                                 PULS[3:0]               T1/E1/J1             TCLK          Cable impedance           Cable range       Cable loss
                                                                                            (internal matching
                                                                                            impedance)
                                    0000                    E1             2.048 MHz                 75Ω                   -              0-24 dB
                                    0001                    E1             2.048 MHz               120Ω                    -              0-24 dB
                                    0010                  DSX1             1.544 MHz               100Ω                 0-133 ft          0-0.6 dB
                                     0011                 DSX1             1.544 MHz               100Ω                133-266 ft        0.6-1.2 dB
                                    0100                  DSX1             1.544 MHz               100Ω                266-399 ft        1.2-1.8 dB
                                    0101                  DSX1             1.544 MHz               100Ω                399-533 ft        1.8-2.4 dB
                                     0110                 DSX1             1.544 MHz               100Ω                533-655 ft        2.4-3.0 dB
                                     0111                   J1             1.544 MHz                110Ω                0-655 ft          0-3.0 dB
                                1000 - 1111                                                       Reserved
      28          RPD      RPD: Receiver power down control
                           0= Normal operation
                           1= receiver power down
      27        PATT1      PATT[1:0]: Transmit test pattern select
      26        PATT0      In hardware control mode, these pins select the transmit pattern
                           00 = normal
                           01= All Ones
                           10= PRBS
                           11= transmitter power down
      15          JA1      JA[1:0]: Jitter attenuation position, bandwidth and the depth of FIFO select
      14          JA0      00= JA is disabled
                           01= JA in receiver, broad bandwidth, FIFO=64 bits
                           10= JA in receiver, narrow bandwidth, FIFO=128 bits
                           11= JA in transmitter, narrow bandwidth, FIFO=128 bits
 Hardware Control Pin Summary                                            55                                                       December 9, 2005


 IDT82V2041E                                                          SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-49 Hardware Control Pin Summary (Continued)
    Pin No.     Symbol                                                                  Description
     TQFP
      22         MONT      MONT: Receive monitor n gain select
                           0= 0 dB
                           1= up to 26 dB
      25          LP1      LP[1:0]: Loopback mode select
      24          LP0      00= no loopback
                           01= analog loopback
                           10= digital loopback
                           11= remote loopback
      13          THZ      THZ: Transmitter Driver High Impedance Enable
                           This signal enables or disables transmitter driver. A low level on this pin enables the driver while a high level on this pin places the
                           driver in high impedance state.
      11        RCLKE      RCLKE: the active edge of RCLK select when hardware control mode is used
                           0= select the rising edge as active edge of RCLK
                           1= select the falling edge as active edge of RCLK
      29           -       In Hardware mode, this pin has to be tied to GND.
 Hardware Control Pin Summary                                             56                                                             December 9, 2005


  IDT82V2041E                                                                               SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
6           TEST SPECIFICATIONS
Table-50 Absolute Maximum Rating
            Symbol                                              Parameter                                             Min                        Max                         Unit
 VDDA, VDDD                         Core Power Supply                                                                 -0.5                        4.6                          V
 VDDIO                              I/O Power Supply                                                                  -0.5                       4.6                           V
 VDDT                               Transmit Power Supply                                                             -0.5                       4.6                           V
                                    Input Voltage, Any Digital Pin                                                GND-0.5                        5.5                           V
 Vin                                                                                                              GND-0.5                    VDDA+0.5                          V
                                    Input Voltage, Any RTIP and RRING pin1
                                    ESD Voltage, any pin                                                            2000 2                                                     V
                                                                                                                     500 3                                                     V
                                    Transient latch-up current, any pin                                                                          100                         mA
 Iin                                                               4                                                  -10                         10                         mA
                                    Input current, any digital pin
                                    DC Input current, any analog pin    4                                                                       ±100                         mA
 Pd                                 Maximum power dissipation in package                                                                         1.41                         W
 Tc                                 Case Temperature                                                                                             120                          °C
 Ts                                 Storage Temperature                                                               -65                       +150                          °C
 CAUTION:
 Exceeding these values may cause permanent damage. Functional operation under these conditions is not implied. Exposure to absolute maximum rating conditions
 for extended periods may affect device reliability.
1.Reference to ground
2.Human body model
3.Charge device model
4.Constant input current
Table-51 Recommended Operation Conditions
                  Symbol                                               Parameter                                     Min                Typ                Max                   Unit
 VDDA, VDDD                                     Core Power Supply                                                   3.13                 3.3               3.47                    V
 VDDIO                                          I/O Power Supply                                                    3.13                 3.3               3.47                    V
 VDDT                                           Transmitter Power Supply                                            3.13                 3.3               3.47                    V
 TA                                             Ambient operating temperature                                        -40                 25                  85                   °C
                                                E1, 75 Ω load
                                                                                 50% ones density data                 -                 52                  58                  mA
                                                                                100% ones density data                 -                 64                  70
                                                E1, 120 Ω Load
                                                                                 50% ones density data                 -                 58                  64                  mA
 Total current dissipation1,2,3                                                 100% ones density data                 -                 70                  76
                                                T1, 100 Ω Load
                                                                                 50% ones density data                 -                 59                  65                  mA
                                                                                100% ones density data                 -                 88                  95
                                                J1, 110 Ω Load
                                                                                 50% ones density data                 -                 47                  53                  mA
                                                                                100% ones density data                 -                 58                  64
1.Power consumption includes power consumption on device and load. Digital levels are 10% of the supply rails and digital outputs driving a 50 pF capacitive load.
2.Maximum power consumption over the full operating temperature and power supply voltage range.
3.In short haul mode, if internal impedance matching is chosen, E1 75 Ω power dissipation values are measured with template PULS[3:0] = 0000; E1 120 Ω power dissipation values are measured
   with template PULS[3:0] = 0001; T1 power dissipation values are measured with template PULS[3:0] = 0110; J1 power dissipation values are measured with template PULS[3:0] = 0111.
  Test Specifications                                                                          57                                                                December 9, 2005


  IDT82V2041E                                                                          SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-52 Power Consumption
     Symbol                                       Parameter                                             Min     Typ       Max1,2          Unit
                  E1, 3.3 V, 75 Ω Load
                                                                       50% ones density data:             -     172         -             mW
                                                                    100% ones density data:               -     212        243
                  E1, 3.3 V, 120 Ω Load
                                                                       50% ones density data:             -     192         -             mW
                                                                    100% ones density data:               -     243        264
                  T1, 3.3 V, 100 Ω Load3
                                                                       50% ones density data:             -     195         -             mW
                                                                    100% ones density data:               -     291        330
                  J1, 3.3 V, 110 Ω Load
                                                                       50% ones density data:             -     155                       mW
                                                                    100% ones density data:               -     192        222
1.Maximum power and current consumption over the full operating temperature and power supply voltage range.
2.Power consumption includes power absorbed by line load and external transmitter components.
3.T1 is measured with maximum cable length.
Table-53 DC Characteristics
     Symbol                           Parameter                                     Min                     Typ      Max               Unit
 VIL              Input Low Level Voltage                                             -                      -       0.8                V
 VIH              Input High Voltage                                                 2.0                     -         -                V
 VOL              Output Low level Voltage (Iout=1.6mA)                               -                      -       0.4                V
 VOH              Output High level Voltage (Iout=400µA)                             2.4                     -      VDDIO               V
 VMA              Analog Input Quiescent Voltage (RTIP, RRING                                               1.5                         V
                  pin while floating)
 IZL              High Impedance Leakage Current                                     -10                             10                µA
 Ci               Input capacitance                                                                                   15                pF
 Co               Output load capacitance                                                                            50                 pF
 Co               Output load capacitance (bus pins)                                                                 100                pF
  Test Specifications                                                                    58                                      December 9, 2005


 IDT82V2041E                                              SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-54 E1 Receiver Electrical Characteristics
    Symbol                        Parameter          Min     Typ    Max      Unit                  Test conditions
              Receiver sensitivity
                   Adaptive Equalizer Disabled:                     -10       dB
                   Adaptive Equalizer Enabled:                      -20
              Analog LOS level                                                     A LOS level is programmable with Adaptive
                   Adaptive Equalizer Disabled:              800            mVp-p  Equalizer enabled. Not available in Hardware
                   Adaptive Equalizer Enabled:        -4            -24       dB   mode.
              Allowable consecutive zeros before LOS
                   G.775:                                     32
                   I.431/ETSI300233:                         2048
              LOS reset                              12.5                  % ones  G.775, ETSI 300 233
              Receive Intrinsic Jitter
              20 Hz - 100 kHz                                       0.05     U.I.  JA enabled
              Input Jitter Tolerance
                   1 Hz – 20 Hz                       37                     U.I.  G.823, with 6 dB cable attenuation
                   20 Hz – 2.4 KHz                     5                     U.I.
                   18 KHz – 100 KHz                    2                     U.I.
ZDM           Receiver Differential Input Impedance   20                     KΩ    Internal mode
              Input termination resistor tolerance                  ±1%
              Receive Return Loss
RRX                 51 KHz – 102 KHz                  20                      dB   G.703 Internal termination
                   102 KHz – 2.048 MHz                20                      dB
                   2.048 MHz – 3.072 MHz              20                      dB
              Receive path delay
RPD           Single rail                                     7              U.I.  JA disabled
              Dual rail                                       2              U.I.
 Test Specifications                                        59                                            December 9, 2005


 IDT82V2041E                                                SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-55 T1/J1 Receiver Electrical Characteristics
    Symbol                         Parameter           Min      Typ   Max      Unit                  Test conditions
               sensitivity
                                                                       -10     dB
                                                                        -
               Analog LOS level
                                                                800           mVp-p
                                                        -4              -      dB
               Allowable consecutive zeros before LOS
                    T1.231-1993                                 175
                     I.431                                     1544
               LOS reset                              12.5                   % ones  G.775, ETSI 300 233
               Receive Intrinsic Jitter                                              JA enabled
               10 Hz - 8 kHz                                          0.02     U.I.
               10 Hz - 40 kHz                                         0.025    U.I.
               8 kHz - 40 kHz                                         0.025    U.I.
               Wide band                                              0.050    U.I.
               Input Jitter Tolerance
                    0.1 Hz – 1 Hz                     138.0                    U.I.  AT&T62411
                    4.9 Hz – 300 Hz                   28.0                     U.I.
                   10 KHz – 100 KHz                    0.4                     U.I.
ZDM            Receiver Differential Input Impedance   20                      KΩ    Internal mode
               Input termination resistor tolerance                   ±1%
RRX            Receive Return Loss
                    39 KHz – 77 KHz                    20                      dB    G.703
                    77 KHz - 1.544 MHz                 20                      dB    Internal termination
                    1.544 MHz – 2.316 MHz              20                      dB
RPD            Receive path delay                                                    JA disabled
                   Single rail                                   7             U.I.
                   Dual rail                                     2             U.I.
 Test Specifications                                          60                                            December 9, 2005


 IDT82V2041E                                                                SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-56 E1 Transmitter Electrical Characteristics
    Symbol                                                Parameter                                           Min   Typ   Max      Unit
Vo-p          Output pulse amplitudes
                    E1, 75 Ω load                                                                             2.14  2.37  2.60       V
                    E1, 120 Ω load                                                                             2.7  3.0    3.3       V
Vo-s          Zero (space) level
                    E1, 75 Ω load                                                                            -0.237      0.237       V
                    E1, 120 Ω load                                                                            -0.3         0.3       V
              Transmit amplitude variation with supply                                                         -1          +1       %
              Difference between pulse sequences for 17 consecutive pulses (T1.102)                                       200      mV
Tpw           Output Pulse Width at 50% of nominal amplitude                                                  232   244   256       ns
              Ratio of the amplitudes of Positive and Negative Pulses at the center of the pulse interval     0.95        1.05
              (G.703)
              Ratio of the width of Positive and Negative Pulses at the center of the pulse interval (G.703)  0.95        1.05
RTX           Transmit Return Loss (G.703)
              51 KHz – 102 KHz                                                                                       20             dB
              102 KHz - 2.048 MHz                                                                                    15             dB
              2.048 MHz – 3.072 MHz                                                                                  12             dB
JTXp-p        Intrinsic Transmit Jitter (TCLK is jitter free)
              20 Hz – 100 KHz                                                                                            0.050     U.I.
Td            Transmit path delay (JA is disabled)
              Single rail                                                                                           8.5            U.I.
              Dual rail                                                                                             4.5            U.I.
Isc           Line short circuit current (measured on the TTIP/TRING pins)                                          100            mAp
 Test Specifications                                                            61                                       December 9, 2005


 IDT82V2041E                                                             SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-57 T1/J1 Transmitter Electrical Characteristics
       Symbol                                    Parameter                           Min          Typ        Max          Unit
Vo-p                Output pulse amplitudes                                          2.4          3.0        3.6            V
Vo-s                Zero (space) level                                              -0.15                    0.15           V
                    Transmit amplitude variation with supply                          -1                      +1           %
                    Difference between pulse sequences for 17 consecutive pulses                             200          mV
                    (T1.102)
TPW                 Output Pulse Width at 50% of nominal amplitude                   338          350        362           ns
                    Pulse width variation at the half amplitude (T1.102)                                      20           ns
                    Imbalance between Positive and Negative Pulses amplitude        0.95                     1.05
                    (T1.102)
                    Output power level (T1.102)
                    @772 kHz                                                        12.6                     17.9         dBm
                    @1544 kHz (referenced to power at 772kHz)                        -29                                  dBm
RTX                 Transmit Return Loss
                          39 KHz – 77 KHz                                                          20                      dB
                          77 KHz – 1.544 MHz                                                       15                      dB
                          1.544 MHz – 2.316 MHz                                                    12                      dB
JTXP-P              Intrinsic Transmit Jitter (TCLK is jitter free)
                          10 Hz – 8 KHz                                                                     0.020        U.I.p-p
                           8 KHz – 40 KHz                                                                   0.025        U.I.p-p
                          10 Hz – 40 KHz                                                                    0.025        U.I.p-p
                           wide band                                                                        0.050        U.I.p-p
Td                  Transmit path delay (JA is disabled)
                    Single rail                                                                   8.5                     U.I.
                    Dual rail                                                                     4.5                     U.I.
ISC                 Line short circuit current (measured on the TTIP/TRING pins)                  100                     mAp
 Test Specifications                                                       62                                     December 9, 2005


  IDT82V2041E                                                                              SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-58 Transmitter and Receiver Timing Characteristics
           Symbol                                           Parameter                                          Min                Typ                    Max                    Unit
                                MCLK frequency
                                E1:                                                                                              2.048                                          MHz
                                T1/J1:                                                                                           1.544
                                MCLK tolerance                                                                 -100                                       100                   ppm
                                MCLK duty cycle                                                                 30                                         70                     %
 Transmit path
                                TCLK frequency
                                E1:                                                                                              2.048                                          MHz
                                T1/J1:                                                                                           1.544
                                TCLK tolerance                                                                  -50                                       +50                   ppm
                                TCLK Duty Cycle                                                                 10                                         90                     %
 t1                             Transmit Data Setup Time                                                        40                                                                ns
 t2                             Transmit Data Hold Time                                                         40                                                                ns
                                Delay time of THZ low to driver high impedance                                                                             10                     us
                                Delay time of TCLK low to driver high impedance                                                    75                                            U.I.
 Receive path
                                Clock recovery capture range 1             E1                                                    ± 80                                           ppm
                                                                           T1/J1                                                 ± 180
                                RCLK duty cycle 2                                                               40                 50                      60                     %
 t4                             RCLK pulse width 2
                                E1:                                                                             457               488                     519                     ns
                                T1/J1:                                                                          607               648                     689
 t5                             RCLK pulse width low time
                                E1:                                                                             203               244                     285                     ns
                                T1/J1:                                                                          259               324                     389
 t6                             RCLK pulse width high time
                                E1:                                                                             203               244                     285                     ns
                                T1/J1:                                                                          259               324                     389
                                Rise/fall time 3                                                                                                           20                     ns
 t7                             Receive Data Setup Time
                                E1:                                                                             200               244                                             ns
                                T1/J1:                                                                          200               324
 t8                             Receive Data Hold Time
                                E1:                                                                             200               244                                             ns
                                T1/J1:                                                                          200               324
1.Relative to nominal frequency, MCLK= ± 100 ppm
2.RCLK duty cycle widths will vary depending on extent of received pulse jitter displacement. Maximum and minimum RCLK duty cycles are for worst case jitter conditions (0.2 UI displacement
   for E1 per ITU G.823).
3.For all digital outputs. C load = 15 pF
  Test Specifications                                                                          63                                                               December 9, 2005


 IDT82V2041E                                                SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
                TCLK
                                                       t1                  t2
              TD/TDP
              TDN
                                          Figure-20 Transmit System Interface Timing
                                                          t4
                       RCLK                       t6                   t5
                                                  t7                  t8
                      RDP/RD
             (RCLK_SEL = 0 software mode)
               (RCLKE = 0 hardware mode)
                      RDN/CV
                                                                       t7                 t8
                      RDP/RD
             (RCLK_SEL = 1 software mode)
               (RCLKE = 1 hardware mode)
                      RDN/CV
                                          Figure-21 Receive System Interface Timing
Table-59 Jitter Tolerance
                   Jitter Tolerance                Min        Typ         Max        Unit                Standard
E1: 1 Hz                                            37                               U.I.    G.823
     20 Hz – 2.4 KHz                               1.5                               U.I.    Cable attenuation is 6 dB
     18 KHz – 100 KHz                              0.2                               U.I.
T1/J1: 1 Hz                                       138.0                              U.I.    AT&T 62411
        4.9 Hz – 300 Hz                            28.0                              U.I.
        10 KHz – 100 KHz                           0.4                               U.I.
 Test Specifications                                           64                                        December 9, 2005


IDT82V2041E                           SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
                    Figure-22 E1 Jitter Tolerance Performance
Test Specifications                      65                                  December 9, 2005


IDT82V2041E                             SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
                    Figure-23 T1/J1 Jitter Tolerance Performance
Test Specifications                        66                                  December 9, 2005


 IDT82V2041E                                                                 SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-60 Jitter Attenuator Characteristics
                                             Parameter                                       Min        Typ     Max         Unit
Jitter Transfer Function Corner (-3 dB) Frequency
                                                         E1, 32/64/128 bits FIFO
                                                             JABW = 0:                                  6.8                  Hz
                                                             JABW = 1:                                  0.9                  Hz
                                                         T1/J1, 32/64/128 bits FIFO
                                                                 JABW = 0:                               5                   Hz
                                                                 JABW = 1:                             1.25                  Hz
Jitter Attenuator
E1: (G.736)
@ 3 Hz                                                                                       -0.5
@ 40 Hz                                                                                      -0.5                            dB
@ 400 Hz                                                                                    +19.5
@ 100 kHz                                                                                   +19.5
T1/J1: (Per AT&T pub.62411)
@ 1 Hz                                                                                         0
@ 20 Hz                                                                                        0
@ 1 kHz                                                                                     +33.3
@ 1.4 kHz                                                                                     40
@ 70 kHz                                                                                      40
Jitter Attenuator Latency Delay
32 bits FIFO:                                                                                            16                 U.I.
64 bits FIFO:                                                                                            32                 U.I.
128 bits FIFO:                                                                                           64                 U.I.
Input jitter tolerance before FIFO overflow or underflow
32 bits FIFO:                                                                                            28                 U.I.
64 bits FIFO:                                                                                            58                 U.I.
128 bits FIFO:                                                                                          120                 U.I.
 Test Specifications                                                             67                                 December 9, 2005


IDT82V2041E                          SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
                    Figure-24 E1 Jitter Transfer Performance
Test Specifications                     68                                  December 9, 2005


IDT82V2041E                            SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
                    Figure-25 T1/J1 Jitter Transfer Performance
Test Specifications                      69                                   December 9, 2005


 IDT82V2041E                                                    SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
7        MICROCONTROLLER INTERFACE TIMING CHARACTERISTICS
7.1      SERIAL INTERFACE TIMING
Table-61 Serial Interface Timing Characteristics
   Symbol                                  Parameter                           Min        Typ      Max         Unit          Comments
      t1     SCLK High Time                                                    100                              ns
      t2     SCLK Low Time                                                     100                              ns
      t3     Active CS to SCLK Setup Time                                        5                              ns
      t4     Last SCLK Hold Time to Inactive CS Time                            41                              ns
      t5     CS Idle Time                                                       41                              ns
      t6     SDI to SCLK Setup Time                                              0                              ns
      t7     SCLK to SDI Hold Time                                              82                              ns
     t10     SCLK to SDO Valid Delay Time                                                           95          ns
     t11     Inactive CS to SDO High Impedance Hold Time                                            90          ns
                 CS
                               t3     t1        t2                                                       t4     t5
                 SCLK
                               t6                        t7                            t7
                 SDI               LSB                             LSB                             MSB
                                                Figure-26 Serial Interface Write Timing
                       1      2       3       4      5      6 7     8       9     10   11     12   13      14    15       16
    SCLK
                                                                     t10                                               t4
     CS
                                                                                                                            t11
    SDO                                                                     0      1    2      3    4       5      6       7
                                       Figure-27 Serial Interface Read Timing with SCLKE=1
                       1      2       3       4      5      6 7     8       9     10   11     12   13      14    15       16
    SCLK
                                                                                                                               t4
     CS                                                                  t10
                                                                                                                                t11
    SDO                                                                       0      1     2     3     4      5      6         7
                                       Figure-28 Serial Interface Read Timing with SCLKE=0
 Microcontroller Interface Timing Characteristics                  70                                              December 9, 2005


 IDT82V2041E                                                            SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
7.2    PARALLEL INTERFACE TIMING
Table-62 Multiplexed Motorola Read Timing Characteristics
       Symbol                                Parameter                                Min                     Max      Unit
         tRC           Read Cycle Time                                                190                               ns
         tDW           Valid DS Width                                                 180                               ns
        tRWV           Delay from DS to Valid Read                                                             15       ns
        tRWH           R/W to DS Hold Time                                             65                               ns
        tASW           Valid AS Width                                                  10                               ns
        tADD           Delay from AS active to DS active                                0                               ns
        tADS           Address to AS Setup Time                                        5                                ns
        tADH           Address to AS Hold Time                                         5                                ns
        tPRD           DS to Valid Read Data Propagation Delay                                                175       ns
        tDAZ           Delay from DS inactive to data bus High Impedance               5                       20       ns
        tAKD           Acknowledgement Delay                                                                  190       ns
        tAKH           Acknowledgement Hold Time                                        5                      15       ns
        tAKZ           Acknowledgement Release Time                                                             5       ns
      tRecovery        Recovery Time from Read Cycle                                    5                               ns
                                                                      tRC                         tRecovery
                                                                                tDW
                       DS+CS
                                                                                  tRWH
                                                                    tRWV
                         R/W
                                                      tASW     tADD
                          AS
                                                                           tPRD                      tDAZ
                                                     Valid address                        Valid Data
                    READ AD[7:0]
                                                        tADS tADH
                                                                            tAKD                 tAKH       tAKZ
                             ACK
                                            Figure-29 Multiplexed Motorola Read Timing
 Microcontroller Interface Timing Characteristics                         71                                      December 9, 2005


 IDT82V2041E                                                           SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-63 Multiplexed Motorola Write Timing Characteristics
      Symbol                                             Parameter                                         Min     Max         Unit
        tWC         Write Cycle Time                                                                       120                  ns
        tDW         Valid DS Width                                                                         100                  ns
       tRWV         Delay from DS to Valid Write                                                                    15          ns
       tRWH         R/W to DS Hold Time                                                                    65                   ns
       tASW         Valid AS Width                                                                         10                   ns
       tADD         Delay from AS active to DS active                                                       0                   ns
       tADS         Address to AS Setup Time                                                                5                   ns
       tADH         Address to AS Hold Time                                                                 5                   ns
        tDV         Delay from DS to Valid Write Data                                                               15          ns
       tDHW         Write Data to DS Hold Time                                                             65                   ns
       tAKD         Acknowledgement Delay                                                                          150          ns
       tAKH         Acknowledgement Hold Time                                                               5       15          ns
       tAKZ         Acknowledgement Release Time                                                                     5          ns
     tRecovery      Recovery Time from Write Cycle                                                          5
                                                                      tWC                           tRecovery
                                                                                 tDW
                        DS+CS
                                                                                   tRWH
                                                                    tRWV
                           R/W
                                                      tASW     tADD
                           AS
                                                                                        tDHW
                                                                           tDV
                                                     Valid address                          Valid Data
                     Write AD[7:0]
                                                        tADS tADH
                                                                             tAKD                  tAKH       tAKZ
                             ACK
                                            Figure-30 Multiplexed Motorola Write Timing
 Microcontroller Interface Timing Characteristics                         72                                           December 9, 2005


 IDT82V2041E                                                            SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-64 Multiplexed Intel Read Timing Characteristics
    Symbol                               Parameter                                     Min                    Max      Unit
       tRC     Read Cycle Time                                                         190                              ns
      tRDW     Valid RD Width                                                          180                              ns
      tARD     Delay from ALE to Valid Read                                              0                              ns
     tALEW     Valid ALE Width                                                          10                              ns
      tADS     Address to ALE Setup Time                                                 5                              ns
      tADH     Address to ALE Hold Time                                                  5                              ns
      tPRD     RD to Valid Read Data Propagation Delay                                                        175       ns
      tDAZ     Delay from RD inactive to data bus High Impedance                         5                     20       ns
      tAKD     Acknowledgement Delay                                                                          190       ns
      tAKH     Acknowledgement Hold Time                                                 5                     15       ns
      tAKZ     Acknowledgement Release Time                                                                     5       ns
   tRecovery   Recovery Time from Read Cycle                                             5
                                                                          tRC                      tRecovery
                                                                                  tRDW
                           RD+CS
                                                        tALEW      tARD
                            ALE
                                                                              tPRD                    tDAZ
                                                         Valid address                     Valid Data
                        READ AD[7:0]
                                                           tADS tADH
                                                                               tAKD               tAKH       tAKZ
                               RDY
                                               Figure-31 Multiplexed Intel Read Timing
 Microcontroller Interface Timing Characteristics                          73                                     December 9, 2005


 IDT82V2041E                                                         SINGLE CHANNEL T1/E1/J1 SHORT HAUL LINE INTERFACE UNIT
Table-65 Multiplexed Intel Write Timing Characteristics
      Symbol                              Parameter                                   Min                          Max       Unit
          tWC      Write Cycle Time                                                   120                                     ns
        tWRW       Valid WR Width                                                     100                                     ns
       tALEW       Valid ALE Width                                                     10                                     ns
        tAWD       Delay from ALE to Valid Write                                        0                                     ns
         tADS      Address to ALE Setup Time                                            5                                     ns
         tADH      Address to ALE Hold Time                                             5                                     ns
          tDV      Delay from WR to Valid Write Data                                                                15        ns
        tDHW       Write Data to WR Hold Time                                          65                                     ns
         tAKD      Acknowledgement Delay                                                                           150        ns
         tAKH      Acknowledgement Hold Time                                            5                           15        ns
         tAKZ      Acknowledgement Release Time                                                                      5        ns
     tRecovery     Recovery Time from Write Cycle                                      5
                                                                       tWC                            tRecovery
                                                                                 tWRW
                            WR+CS
                                                     tALEW      tAWD
                             ALE
                                                                                          tDHW
                                                                           tDV
                                                      Valid address                           Valid Data
                         Write AD[7:0]
                                                        tADS tADH
                                                                             tAKD                    tAKH       tAKZ
                                 RDY
                                               Figure-32 Multiplexed Intel Write Timing
 Microcontroller Interface Timing Characteristics                       74                                             December 9, 2005


 IDT82V2041E
 IDT82P2816                                                SINGLE CHANNELHIGH-DENSITY
                                                                          T1/E1/J1 SHORT   HAUL LINE INTERFACE UNIT
                                                                                        T1/E1/J1
ORDERING INFORMATION
  IDT       XXXXXXX                          XX                X
          Device Type                                       Process/
                                                          Temperature
                                                             Range
                                                                        Blank       Industrial (-40 °C to +85 °C)
                                                                        PP          Thin Quad Flatpack (TQFP, PP44)
                                                                        PPG         Green Thin Quad Flatpack
                                                                                    (TQFP, PPG44)
                                                                         82V2041E   Short Haul LIU
DATASHEET DOCUMENT HISTORY
12/09/2005 pgs. 1, 14, 21, 22, 28, 36, 37, 44, 62, 63, 75
                                                              75


 IMPORTANT NOTICE AND DISCLAIMER
 RENESAS ELECTRONICS CORPORATION AND ITS SUBSIDIARIES (“RENESAS”) PROVIDES TECHNICAL
 SPECIFICATIONS AND RELIABILITY DATA (INCLUDING DATASHEETS), DESIGN RESOURCES (INCLUDING
 REFERENCE DESIGNS), APPLICATION OR OTHER DESIGN ADVICE, WEB TOOLS, SAFETY INFORMATION, AND
 OTHER RESOURCES “AS IS” AND WITH ALL FAULTS, AND DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED,
 INCLUDING, WITHOUT LIMITATION, ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 PARTICULAR PURPOSE, OR NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY RIGHTS.
 These resources are intended for developers skilled in the art designing with Renesas products. You are solely responsible
 for (1) selecting the appropriate products for your application, (2) designing, validating, and testing your application, and (3)
 ensuring your application meets applicable standards, and any other safety, security, or other requirements. These
 resources are subject to change without notice. Renesas grants you permission to use these resources only for
 development of an application that uses Renesas products. Other reproduction or use of these resources is strictly
 prohibited. No license is granted to any other Renesas intellectual property or to any third party intellectual property.
 Renesas disclaims responsibility for, and you will fully indemnify Renesas and its representatives against, any claims,
 damages, costs, losses, or liabilities arising out of your use of these resources. Renesas' products are provided only subject
 to Renesas' Terms and Conditions of Sale or other applicable terms agreed to in writing. No use of any Renesas resources
 expands or otherwise alters any applicable warranties or warranty disclaimers for these products.
                                                                                                               (Rev.1.0 Mar 2020)
Corporate Headquarters                                                  Contact Information
TOYOSU FORESIA, 3-2-24 Toyosu,                                          For further information on a product, technology, the most
Koto-ku, Tokyo 135-0061, Japan                                          up-to-date version of a document, or your nearest sales
www.renesas.com                                                         office, please visit:
                                                                        www.renesas.com/contact/
Trademarks
Renesas and the Renesas logo are trademarks of Renesas
Electronics Corporation. All trademarks and registered
trademarks are the property of their respective owners.
                                                                      © 2020 Renesas Electronics Corporation. All rights reserved.


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
Renesas Electronics:
 82V2041EPP8 82V2041EPP 82P5088BBG8 82V2041EPPG8
