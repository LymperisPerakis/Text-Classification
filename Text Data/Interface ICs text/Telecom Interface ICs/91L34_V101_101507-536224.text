                                                                                                                            XRT91L34
                         QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
OCTOBER 2007                                                                                                                               REV. 1.0.1
GENERAL DESCRIPTION                                                           attempts to lock onto the incoming receive serial data
                                                                              stream. Whenever the recovered clock frequency
The XRT91L34 is a fully integrated quad channel                               deviates from the local reference clock frequency by
multirate Clock and Data Recovery (CDR) device for                            more than approximately ±500 ppm, the clock
SONET/SDH 622.08 Mbps STS-12/STM-4 or 155.52                                  recovery PLL will switch and lock back onto the local
Mbps STS-3/STM-1 or 51.84 Mbps STS-1/STM-0                                    reference clock and declare a Loss of Lock.
applications. The device provides Clock and Data                              Whenever a Loss of Lock or a Loss of Signal event
Recovery (CDR) function by synchronizing its on-chip                          occurs, the CDR will continue to supply a recovered
Voltage Controlled Oscillator (VCO) to the incoming                           clock (based on the local reference) to the framer/
serial data stream. The device internally monitors                            mapper device. When the SDEXT is de-asserted by
Loss of Lock (LOL) conditions and automatically                               the optical module or when internal DLOS is
mutes recovered data upon Loss of Signal (LOS)                                asserted, the receive serial data output will be forced
conditions.                                                                   to a logic zero state for the entire duration that a LOS
CLOCK AND DATA RECOVERY OVERVIEW                                              condition is declared. This acts as a receive data
                                                                              mute upon LOS function to prevent random noise
The clock and data recovery (CDR) unit accepts the                            from being misinterpreted as valid incoming data.
high speed NRZ serial data from the LVDS or                                   When the SDEXT becomes active and the recovered
Differential LVPECL receiver and generates a clock                            clock is determined to be within ±500 ppm accuracy
that is the same frequency as the incoming data. The                          with respect to the local reference source and LOS is
CDR block uses a reference clock to train and                                 no longer declared, the clock recovery PLL will switch
monitor its clock recovery PLL. All four channels                             and lock back onto the incoming receive serial data
share a single 77.76MHz or 19.44MHz reference                                 stream. Figure 1 shows the block diagram of the
clock. Upon startup, the PLL locks to the local                               XRT91L34.
reference clock. Once this is achieved, the PLL
FIGURE 1. BLOCK DIAGRAM OF XRT91L34
                                                                                                                                      TEST
             RESET
                                                                                                                                   OUTCFG
             HOST /HW                                          XRT91L34
                          0        DLOSDIS                                                                                     CDRREFSEL
             DLOSDIS /SDI
                                     SDI                                                   REFCLKP
                          1                                    Global Control Block
                                                                                                            19.44 / 77.76 MHz
              INT                 Serial Proccesor                                         REFCLKN
                                                                                                                               TTLREFCLK
                                      Interface
                  CS                                                                     LVDS/LVPECL LEVEL SELECT
                  SCLK                                                                            RCLKDIS0
                  SDO
                                                                                                                           LVDS/LVPECL
                                                                                                                           Output Drivers
                          LVDS/LVPECL
                            Input Drivers
                RXDI0P                                                                   RECVD-
                                                                                         DATAOUT   0                              RXDO0P
                RXDI0N        100
                                                RXDATAIN
                                                                    CDR                                                           RXDO0N
                                                                    STS-12/3/1                     1
                                                                        or
                                                                    STM-4/1/0            RECVD-             0                     RXCLKO0P
                                                                  Clock and Data         CLKOUT
                                     RX LOOP
                                      FILTER                         Recovery                                                     RXCLKO0N
                                                                                                            1
                                                                                                     HOST MODE
                                                                                                        ONLY
                                                                          DLOSDIS                                                    LOL0
             CDRDIS0                     Channel Control Block
             DATA0RATE1                                               DLOS
             DATA0RATE0
               SDEXT0
               POL0
                                                                                                     Channel 0
                                                                                                         Channel 1
                                                                                                             Channel 2
                                                                                                                Channel 3
Exar Corporation 48720 Kato Road, Fremont CA, 94538 • (510) 668-7000 • FAX (510) 668-7017 • www.exar.com


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                        REV. 1.0.1
APPLICATIONS
• SONET/SDH-based Transmission Systems
• Add/Drop Multiplexers
• Cross Connect Equipment
• ATM and Multi-Service Switches, Routers and Switch/Routers
• DSLAMS
• SONET/SDH Test Equipment
• DWDM Termination Equipment
FEATURES
• Quad Channel CDR targeted for SONET STS-12/STS-3/STS-1 and SDH STM-4/STM-1/STM-0 Applications
• Selectable data rate operation between 622.08 Mbps, 155.52 Mbps, or 51.84 Mbps.
• Single-chip fully integrated solution containing quad-channel clock and data recovery (CDR) functions
• Optional flexibility to configure for LVDS or Differential LVPECL High Speed I/O Interface
• Internal 100Ω termination for the high speed LVDS/Differential LVPECL inputs included
• Utilizes reference clock frequency of either 19.44 MHz or 77.76 MHz
• Host mode serial microprocessor interface simplifies monitor and control, including LOS monitoring
• Diagnostics features include LOS monitoring in Host Mode and automatic recovered data mute upon LOS
• Loss of Lock Detect output for each channel
• Permits mixed data rate configuration of the four channels
• Independent power down control of unused channels for lower power operation
• Meets Telcordia, ANSI and ITU-T G.783 and G.825 SDH jitter requirements including T1.105.03 - 2002
  SONET Jitter Tolerance specification, and GR-253 CORE, GR-253 ILR SONET Jitter specifications.
• Complies with ANSI/TIA/EIA-644 and IEEE P1596.3 3.3V LVDS standard, 3.3V Differential LVPECL, and
  JESD 8-B LVTTL and LVCMOS standard.
• Operates with dual power supply of 1.8V core and 3.3V IO supply
• 90mW LVDS/ 350mW Differential LVPECL per channel Typical Power Dissipation
• Package: 14 x 14 x 1.4 mm 128-pin LQFP
• RoHS Compliant Lead-Free package availability
• ESD greater than 2kV on all pins
                                                          2


                                                                                             XRT91L34
REV. 1.0.1                          QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
                             FIGURE 2. 128 LQFP PIN OUT OF THE XRT91L34 (TOP VIEW)
                                    n/c
                                    SDEXT0
                                    POL0
                                    SDEXT1
                                    POL1
                                    AVDD1.8
                                    HOST/HW
                                    GND
                                    TTLREFCLK
                                    CDRREFSEL
                                    REFCLKN
                                    REFCLKP
                                    DATA0RATE0
                                    DATA0RATE1
                                    DATA1RATE0
                                    DATA1RATE1
                                    DVDD1.8
                                    GND
                                    GND
                                    CAP0P
                                    CAP0N
                                    CDRDIS0
                                    CDRDIS1
                                    AVDD1.8
                                    AVDD1.8
                                    CAP1P
                                    CAP1N
                                    GND
                                    GND
                                    LOL1
                                    LOL0
                                    n/c
                                    128
                                    127
                                    126
                                    125
                                    124
                                    123
                                    122
                                    121
                                    120
                                    119
                                    118
                                    117
                                    116
                                    115
                                    114
                                    113
                                    112
                                    111
                                    110
                                    109
                                    108
                                    107
                                    106
                                    105
                                    104
                                    103
                                    102
                                    101
                                    100
                                     99
                                     98
                                     97
                       n/c     1                                              96      VDD_IO
                       n/c     2                                              95      VDD_IO
                   RXDI0P      3                                              94      RXDO0P
                   RXDI0N      4                                              93      RXDO0N
                   VDD_IO      5                                              92      GND_IO
                   VDD_IO      6                                              91      GND_IO
                   GND_IO      7                                              90      RXCLKO0P
                   GND_IO      8                                              89      RXCLKO0N
                       n/c     9                                              88      VDD_IO
                       n/c     10                                             87      VDD_IO
                   RXDI1P      11                                             86      RXDO1P
                   RXDI1N      12                                             85      RXDO1N
                   VDD_IO      13                                             84      GND_IO
                   VDD_IO      14                                             83      GND_IO
                   GND_IO      15                                             82      RXCLKO1P
                   GND_IO
                   GND_IO
                   GND_IO
                               16
                               17
                               18
                                                  XRT91L34                    81
                                                                              80
                                                                              79
                                                                                      RXCLKO1N
                                                                                      RXCLKO2N
                                                                                      RXCLKO2P
                   VDD_IO      19                                             78      GND_IO
                   VDD_IO      20                                             77      GND_IO
                   RXDI2N      21                                             76      RXDO2N
                   RXDI2P      22                                             75      RXDO2P
                       n/c     23                                             74      VDD_IO
                       n/c     24                                             73      VDD_IO
                   GND_IO      25                                             72      RXCLKO3N
                   GND_IO      26                                             71      RXCLKO3P
                   VDD_IO      27                                             70      GND_IO
                   VDD_IO      28                                             69      GND_IO
                   RXDI3N      29                                             68      RXDO3N
                   RXDI3P      30                                             67      RXDO3P
                       n/c     31                                             66      VDD_IO
                       n/c     32                                             65      VDD_IO
                                    33
                                    34
                                    35
                                    36
                                    37
                                    38
                                    39
                                    40
                                    41
                                    42
                                    43
                                    44
                                    45
                                    46
                                    47
                                    48
                                    49
                                    50
                                    51
                                    52
                                    53
                                    54
                                    55
                                    56
                                    57
                                    58
                                    59
                                    60
                                    61
                                    62
                                    63
                                    64
                                        SDEXT3
                                          POL3
                                        SDEXT2
                                          POL2
                                          SCLK
                                             CS
                                    DLOSDIS/SDI
                                           SDO
                                            INT
                                       AVDD1.8
                                           GND
                                       OUTCFG
                                          TEST
                                         RESET
                                    DATA3RATE0
                                    DATA3RATE1
                                    DATA2RATE0
                                    DATA2RATE1
                                       DVDD1.8
                                           GND
                                         CAP3P
                                         CAP3N
                                       CDRDIS3
                                       CDRDIS2
                                       AVDD1.8
                                       AVDD1.8
                                         CAP2P
                                         CAP2N
                                           GND
                                           GND
                                          LOL2
                                          LOL3
                                          ORDERING INFORMATION
             PART NUMBER                            PACKAGE                 OPERATING TEMPERATURE RANGE
             XRT91L34IV                         128 Pin Lead LQFP                    -40°C to +85°C
             XRT91L34IV-F                     128 Pin Lead-Free LQFP                 -40°C to +85°C
                                                        3


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                                                                                                   REV. 1.0.1
                                                    TABLE OF CONTENTS
GENERAL DESCRIPTION .................................................................................................1
     FIGURE 1. BLOCK DIAGRAM OF XRT91L34 ...................................................................................................................................... 1
  APPLICATIONS ...........................................................................................................................................2
  FEATURES ......................................................................................................................................................2
     FIGURE 2. 128 LQFP PIN OUT OF THE XRT91L34 (TOP VIEW)........................................................................................................ 3
   ORDERING INFORMATION.....................................................................................................................3
TABLE OF CONTENTS .......................................................................................................... IV
PIN DESCRIPTIONS ..........................................................................................................6
  HARDWARE CONTROL ....................................................................................................................................6
  RECEIVER SECTION ........................................................................................................................................9
  POWER AND GROUND ..................................................................................................................................10
  SERIAL MICROPROCESSOR INTERFACE ......................................................................................................11
1.0 FUNCTIONAL DESCRIPTION .............................................................................................................12
   1.1 HARDWARE MODE VS. HOST MODE .......................................................................................................... 12
   1.2 STS-12/STM-4 AND STS-3/STM-1 AND STS-1/STM-0 MODE OF OPERATION ......................................... 12
     TABLE 1: CHANNEL DATA RATE SELECTION .................................................................................................................................... 12
   1.3 REFERENCE CLOCK INPUT ......................................................................................................................... 13
     TABLE 2: CDR REFERENCE FREQUENCY OPTIONS (LVDS/ DIFF LVPECL OR SINGLE-ENDED LVTTL/LVCMOS)............................ 13
     FIGURE 3. REFERENCE CLOCK DESIGN OPTIONS ............................................................................................................................ 13
2.0 RECEIVE SECTION .............................................................................................................................14
   2.1 RECEIVE SERIAL INPUT ............................................................................................................................... 14
     FIGURE 4. RECEIVE SERIAL INPUT INTERFACE USING LVDS/DIFF LVPECL DC COUPLING INTERNAL TERM....................................... 14
     FIGURE 5. RECEIVE SERIAL INPUT INTERFACE USING DIFF LVPECL AC COUPLING INTERNAL TERMINATION ..................................... 15
   2.2 RECEIVE CLOCK AND DATA RECOVERY .................................................................................................. 15
     TABLE 3: CLOCK AND DATA RECOVERY UNIT PERFORMANCE .......................................................................................................... 16
        2.2.1 INTERNAL CLOCK AND DATA RECOVERY DISABLE ........................................................................................... 16
   2.3 EXTERNAL RECEIVE LOOP FILTER CAPACITORS ................................................................................... 16
     FIGURE 6. EXTERNAL LOOP FILTERS .............................................................................................................................................. 16
   2.4 INTERNAL DIGITAL LOSS OF SIGNAL AND EXTERNAL SIGNAL DETECTION ...................................... 17
     FIGURE 7. LOSS OF SIGNAL DECLARATION CIRCUIT ........................................................................................................................ 17
     TABLE 4: EXTERNAL LOS DECLARATION POLARITY SETTING ........................................................................................................... 17
   2.5 MULTICHANNEL RECOVERED OUTPUT INTERFACE ............................................................................... 18
     FIGURE 8. MULTICHANNEL RECOVERED OUTPUT INTERFACE BLOCK ................................................................................................ 18
   2.6 DIFFERENTIAL RECOVERED DATA OUTPUT TIMING ............................................................................... 19
     FIGURE 9. DIFFERENTIAL RECOVERED OUTPUT TIMING ................................................................................................................... 19
     TABLE 5: RECOVERED DATA OUTPUT TIMING (STS-12/STM-4 OPERATION).................................................................................... 19
     TABLE 6: RECOVERED DATA OUTPUT TIMING (STS-3/STM-1 OPERATION)...................................................................................... 19
     TABLE 7: RECOVERED DATA OUTPUT TIMING (STS-1/STM-0 OPERATION)...................................................................................... 19
3.0 JITTER PERFORMANCE ....................................................................................................................20
   3.1 SONET JITTER REQUIREMENTS ................................................................................................................. 20
        3.1.1 RX JITTER TOLERANCE: .......................................................................................................................................... 20
     FIGURE 10. GR-253/G.783 JITTER TOLERANCE MASK ................................................................................................................... 20
     FIGURE 11. XRT91L34 MEASURED JITTER TOLERANCE AT 51.84 MBPS STS-1/STM-0 .................................................................. 20
     FIGURE 12. XRT91L34 MEASURED JITTER TOLERANCE AT 155.52 MBPS STS-3/STM-1 ................................................................ 21
     FIGURE 13. XRT91L34 MEASURED JITTER TOLERANCE AT 622.08 MBPS STS-12/STM-4 .............................................................. 21
        3.1.2 RX JITTER TRANSFER .............................................................................................................................................. 22
     FIGURE 14. XRT91L34 MEASURED JITTER TRANSFER AT 51.84 MBPS STS-1/STM-0 .................................................................... 22
     FIGURE 15. XRT91L34 MEASURED JITTER TRANSFER AT 155.52 MBPS STS-3/STM-1 .................................................................. 22
     FIGURE 16. XRT91L34 MEASURED JITTER TRANSFER AT 622.08 MBPS STS-12/STM-4 ................................................................ 23
4.0 SERIAL MICROPROCESSOR INTERFACE BLOCK ..........................................................................24
     FIGURE 17. SIMPLIFIED BLOCK DIAGRAM OF THE SERIAL MICROPROCESSOR INTERFACE ................................................................. 24
   4.1 SERIAL TIMING INFORMATION .................................................................................................................... 24
     FIGURE 18. TIMING DIAGRAM FOR THE SERIAL MICROPROCESSOR INTERFACE ................................................................................ 24
   4.2 16-BIT SERIAL DATA INPUT DESCRITPTION ............................................................................................. 25
        4.2.1 R/W (SCLK1) ............................................................................................................................................................... 25
        4.2.2 A[5:0] (SCLK2 - SCLK7).............................................................................................................................................         25
        4.2.3 X (DUMMY BIT SCLK8) ..............................................................................................................................................          25
        4.2.4 D[7:0] (SCLK9 - SCLK16)...........................................................................................................................................          25
   4.3 8-BIT SERIAL DATA OUTPUT DESCRIPTION ............................................................................................. 25
                                                                                    IV


                                                                                                                                                                    XRT91L34
REV. 1.0.1                        QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
5.0 REGISTER MAP AND BIT DESCRIPTIONS ....................................................................................... 26
      TABLE 8: MICROPROCESSOR INTERFACE REGISTER MAP ................................................................................................................ 26
      TABLE 9: MICROPROCESSOR INTERFACE REGISTER 0X00 BIT DESCRIPTION .................................................................................... 27
      TABLE 10: MICROPROCESSOR INTERFACE REGISTER 0X01 BIT DESCRIPTION .................................................................................. 28
      TABLE 11: MICROPROCESSOR INTERFACE REGISTER 0X02 BIT DESCRIPTION .................................................................................. 28
      TABLE 12: MICROPROCESSOR INTERFACE REGISTER 0X03 BIT DESCRIPTION .................................................................................. 29
      TABLE 13: MICROPROCESSOR INTERFACE REGISTER 0X04 BIT DESCRIPTION .................................................................................. 29
      TABLE 14: MICROPROCESSOR INTERFACE REGISTER 0X05 BIT DESCRIPTION .................................................................................. 29
      TABLE 15: MICROPROCESSOR INTERFACE REGISTER 0X08, 0X10, 0X18, 0X20 BIT DESCRIPTION .................................................... 30
      TABLE 16: MICROPROCESSOR INTERFACE REGISTER 0X09, 0X11, 0X19, 0X21 BIT DESCRIPTION .................................................... 31
      TABLE 17: MICROPROCESSOR INTERFACE REGISTER 0X0A, 0X12, 0X1A, 0X22 BIT DESCRIPTION ................................................... 32
6.0 ELECTRICAL CHARACTERISTICS ................................................................................................... 33
  ABSOLUTE MAXIMUM RATINGS .................................................................................................................. 33
      TABLE 18: ABSOLUTE MAXIMUM POWER AND INPUT/OUTPUT RATINGS ........................................................................................... 33
      TABLE 19: POWER AND CURRENT DC ELECTRICAL CHARACTERISTICS ............................................................................................ 33
      TABLE 20: LVDS/DIFFERENTIAL LVPECL INPUT LOGIC SIGNAL DC ELECTRICAL CHARACTERISTICS ................................................ 34
      FIGURE 19. LVDS/DIFFERENTIAL LVPECL VOLTAGE PARAMETER CONVENTION ............................................................................. 35
      TABLE 21: LVDS OUTPUT LOGIC SIGNAL DC ELECTRICAL CHARACTERISTICS ................................................................................. 36
      TABLE 22: DIFFERENTIAL LVPECL OUTPUT LOGIC SIGNAL DC ELECTRICAL CHARACTERISTICS....................................................... 36
      TABLE 23: LVTTL/LVCMOS SIGNAL DC ELECTRICAL CHARACTERISTICS ....................................................................................... 36
      TABLE 24: ORDERING INFORMATION ............................................................................................................................................... 37
PACKAGE DIMENSIONS ................................................................................................ 37
      TABLE 25: REVISION HISTORY ........................................................................................................................................................ 38
                                                                                   V


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                   REV. 1.0.1
PIN DESCRIPTIONS
HARDWARE CONTROL
     NAME         LEVEL TYPE      PIN                              DESCRIPTION
    RESET        LVTTL,   I        46    Master Reset Input
                LVCMOS                   Active "Low." When this pin is pulled "Low", the internal state
                                         machines and registers are set to their default state.
                                         "Low" = Master Hardware Reset
                                         "High" = Normal Operation
                                         This pin is provided with an internal pull-up.
     TEST        LVTTL,   I        45    Test Input
                LVCMOS                   Active "High." When this pin is pulled "High", the 91L34 internal
                                         state machines will enter into a factory test mode.
                                         "Low" = Normal Operation
                                         "High" = Factory Test Diagnostic Mode
                                         NOTE: This pin should be pulled Low for normal operation.
                                         This pin is provided with an internal pull-down.
 DATA0RATE[1:0]  LVTTL,   I     115, 116 Data Rate Selection
                LVCMOS                   Selects SONET/SDH reception speed rate for each of the four
                                         channels independently according to the logic below.
 DATA1RATE[1:0]  LVTTL,   I     113, 114
                LVCMOS                        DATANRATE[1:0]                     DATA RATE
 DATA2RATE[1:0]  LVTTL,   I      50, 49         0            0                  STS-1/STM-0
                LVCMOS                                                            51.84 Mbps
 DATA3RATE[1:0]  LVTTL,   I      48, 47         0            1                  STS-3/STM-1
                LVCMOS                                                           155.52 Mbps
                                                1            0                  STS-12/STM-4
                                                                                 622.08 Mbps
                                                1            1                  STS-12/STM-4
                                                                                 622.08 Mbps
                                         NOTE: These pins have no function in Host Mode.
                                         These pins are provided with internal pull-down.
                                            6


                                                                                       XRT91L34
REV. 1.0.1           QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
       NAME    LEVEL    TYPE   PIN                             DESCRIPTION
  CDRREFSEL   LVTTL,      I    119  Clock and Data Recovery Unit Reference Frequency Select
             LVCMOS                 Selects the Clock and Data Recovery Unit reference frequency
                                    on REFCLKP/N pins or TTLREFCLK pin based on the table
                                    below.
                                    "Low" = 77.76 MHz reference clock
                                    "High" = 19.44 MHz reference clock
                                                       REFCLKP/N OR
                                                                                 CHANNEL 0 - 3
                                      CDRREFSEL         TTLREFCLK
                                                                            AVAILABLE DATA RATES
                                                         FREQUENCY
                                            0            77.76 MHz
                                                                          STS-12/STM-4 622.08 Mbps
                                                                           STS-3/STM-1 155.52 Mbps
                                            1            19.44 MHz         STS-1/STM-0 51.84 Mbps
                                    NOTE: REFCLKP/N or TTLREFCLK input should be generated
                                             from a crystal oscillator which has a frequency
                                             accuracy better than 100ppm in order for the received
                                             data rate frequency to have the necessary accuracy
                                             required for SONET systems.
                                    NOTE: This pin has no function in Host Mode.
                                    This pin is provided with an internal pull-down.
     OUTCFG   LVTTL,      I     44  Output Configuration
             LVCMOS                 Globally selects recovered clock and data outputs to be LVDS
                                    or Differential LVPECL on all four channels based on table
                                    below.
                                    "Low" = LVDS Standard Output
                                    "High" = Differential LVPECL Standard Output
                                        OUTCFG                Input                    Output
                                                          Configuration            Configuration
                                            0                 LVDS/
                                                                                       LVDS
                                                       Differential LVPECL
                                            1                 LVDS/
                                                                                Differential LVPECL
                                                       Differential LVPECL
                                    This pin is provided with an internal pull-down.
     CDRDIS0  LVTTL,      I    107  Clock and Data Recovery Unit Disable
     CDRDIS1 LVCMOS            106  Active "High." Disables internal Clock and Data Recovery unit
     CDRDIS2                   56   for respective channel. This enables lower power operation
     CDRDIS3                   55   when channel is unused.
                                    "Low" = Internal CDR unit is Enabled
                                    "High" = Internal CDR unit is Disabled
                                    NOTE: These pins have no function in Host Mode.
                                    These pins are provided with internal pull-down.
                                       7


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                    REV. 1.0.1
     NAME        LEVEL   TYPE     PIN                               DESCRIPTION
   DLOSDIS      LVTTL,     I       39   DLOS (Digital Loss of Signal) Disable
     /SDI     LVCMOS                    Hardware Mode Disables internal DLOS monitoring and auto-
                                        matic muting of RXDO[3:0]P/N recovered data output pins upon
                                        DLOS detection. DLOS is declared when the incoming data
                                        stream has no transition for more than 2.5µs. DLOS is cleared
                                        when transitions are detected within a 128µs interval sliding
                                        window.
                                        "Low" = Monitor & Mute recovered data upon DLOS declaration
                                        "High" = Disable internal DLOS monitoring
                                        This pin is provided with an internal pull-down.
                                        Host Mode This pin is functions as the microprocessor Serial
                                        Data Input.
     POL0       LVTTL,     I      126   Polarity for SDEXT Input
     POL1     LVCMOS              124   Controls the Signal Detect polarity convention of SDEXT.
     POL2                          36   "Low" = SDEXT is active "Low."
     POL3                          34   "High" = SDEXT is active "High."
                                        NOTE: These pins have no function in Host Mode.
                                        These pins are provided with internal pull-down.
    SDEXT0      LVTTL,     I      127   Signal Detect Input from Optical Module
    SDEXT1    LVCMOS,             125   When inactive, it will immediately declare a Loss of Signal
    SDEXT2                        35    (LOS) condition and assert LOS register bit and mute the activ-
    SDEXT3                        33    ity of the RXDO[3:0]P/N serial data output on the respective
                                        channel.
                                        "Active" = Normal Operation
                                        "Inactive" = LOS Condition (SDEXT detects signal absence)
                                        These pins are provided with internal pull-down.
   REFCLKP       LVDS,     I      117   Reference Clock Input (77.76 MHz or 19.44 MHz)
   REFCLKN   Diff LVPECL          118   This differential reference clock input will accept either a 77.76
                                        MHz or a 19.44 MHz LVDS/Differential LVPECL clock source.
                                        Pin CDRREFSEL determines the value used as the reference.
                                        See Pin CDRREFSEL for more details. REFCLKP/N inputs are
                                        internally biased to 1.2V via 15kΩ resistance. These pins are
                                        equipped with a 100Ω line-to-line internal termination.
                                        NOTE: In the event that TTLREFCLK LVTTL/LVCMOS input is
                                                  used instead of these differential inputs for clock
                                                  reference, the REFCLKP should be left unconnected
                                                  and REFCLKN should be tied to GND.
  TTLREFCLK     LVTTL,     I      120   TTL Reference Clock Input (77.76 MHz or 19.44 MHz)
              LVCMOS                    This optional single-ended clock input reference can be used
                                        instead of the differential REFCLKP/N input. It will accept
                                        either a 77.76 MHz or a 19.44 MHz LVTTL clock source. Pin
                                        CDRREFSEL determines the value used as the reference. See
                                        Pin CDRREFSEL for more details.
                                        NOTE:     In the event that REFCLKP/N differential inputs are
                                                  used instead of this LVTTL/LVCMOS input for clock
                                                  reference, the TTLREFCLK should be tied to ground.
                                        This pin is provided with an internal pull-down.
                                           8


                                                                                         XRT91L34
REV. 1.0.1              QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
RECEIVER SECTION
       NAME       LEVEL    TYPE   PIN                             DESCRIPTION
      RXDI0P      LVDS,      I     3   Receive Serial Data Input
      RXDI0N  Diff LVPECL          4   The differential receive serial data stream of 622.08 Mbps
      RXDI1P                       11  STS-12/STM-1 or 155.52 Mbps STS-3/STM-1 or 51.84 Mbps
      RXDI1N                      12   STS-1/STM-0 is applied to these differential input pins. These
                                       pins accept LVDS or Differential LVPECL input standard.
      RXDI2P                      22
                                       These pins are internally biased to 1.2V via 15kΩ resistance
      RXDI2N                      21
                                       and are equipped with a 100Ω line-to-line internal termination.
      RXDI3P                      30
      RXDI3N                      29
     RXDO0P       LVDS,     O     94   Recovered Serial Data Output
     RXDO0N   Diff LVPECL         93   622.08 Mbps STS-12/STM-4 / 155.52 Mbps STS-3/STM-1 /
     RXDO1P                       86   51.84 Mbps STS-1/STM-0 differential recovered serial data out-
     RXDO1N                       85   put that is updated simultaneously on the falling edge of the
                                       corresponding channel RXCLKO output. User selectable LVDS
     RXDO2P                       75
                                       standard or Differential LVPECL standard output based on
     RXDO2N                       76   OUTCFG pin state.
     RXDO3P                       67
     RXDO3N                       68
   RXCLKO0P       LVDS,     O     90   Recovered Clock Output
   RXCLKO0N   Diff LVPECL         89   (622.08 MHz/ 155.52 MHz/ 51.84 MHz)
   RXCLKO1P                       82   622.08 MHz STS-12/STM-4 / 155.52 MHz STS-3/STM-1 /
   RXCLKO1N                       81   51.84 MHz STS-1/STM-0 differential clock output for the corre-
   RXCLKO2P                       79   sponding recovered data output RXDO[0:3]P/N. The recovered
                                       serial data output port will be updated on the falling edge of
   RXCLKO2N                       80
                                       this clock. User selectable LVDS standard or Differential
   RXCLKO3P                       71   LVPECL standard output based on OUTCFG pin state.
   RXCLKO3N                       72
       LOL0    LVCMOS       O     98   CDR LOL Detect Output
       LOL1                       99   This pin is used to monitor the lock condition of the PLL in the
       LOL2                       63   clock and data recovery unit of each channel.
       LOL3                       64   "Low" = CDR Locked
                                       "High" = CDR Out of Lock
      CAP0P      Analog      -    109  CDR Non-polarized External Loop Filter Capacitors
      CAP0N                       108  Mode of Operation:
                                       1. STS12/STM4: CAP[0:3]P/N = 0.47µF ± 10% tolerance
      CAP1P      Analog      -    103
                                       2. STS3/STM1: CAP[0:3]P/N = 0.47µF ± 10% tolerance
      CAP1N                       102
                                       3. STS1/STM0: CAP[0:3]P/N = 1.0µF ± 10% tolerance
      CAP2P      Analog      -     59  Use type X7R or X5R for improved stability over temperature.
      CAP2N                        60  (Isolate from noise and place close to pin)
      CAP3P      Analog      -     53
      CAP3N                        54
                                          9


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                         REV. 1.0.1
POWER AND GROUND
    NAME     TYPE              PIN                                      DESCRIPTION
   AVDD1.8   PWR    42, 57, 58, 104, 105,    1.8V Analog Core Power Supply
                              123            AVDD1.8 should be isolated from DVDD1.8 and 3.3V VDD_IO
                                             power supplies. For best results, use a ferrite bead along with an
                                             internal power plane separation. The AVDD1.8 power supply pins
                                             should have bypass capacitors to the nearest ground.
  DVDD1.8    PWR             51, 112         1.8V Digital Core Power Supply
                                             DVDD1.8 should be isolated from AVDD1.8 and 3.3V VDD_IO
                                             power supplies. For best results, use an internal power plane
                                             separation. The DVDD1.8 power supply pins should have bypass
                                             capacitors to the nearest ground.
   VDD_IO    PWR   5, 6, 13, 14, 19, 20, 27, 3.3V Input/Output Bus Power Supply
                    28, 65, 66, 73, 74, 87,  These pins require a 3.3V potential voltage for properly biasing
                           88, 95, 96        the Differential LVDS/Differential LVPECL and LVCMOS/LVTTL
                                             input and output pins.
                                             VDD_IO should be isolated from the AVDD1.8 and DVDD1.8
                                             Core power supplies. For best results, use a ferrite bead along
                                             with an internal power plane separation. The VDD_IO power sup-
                                             ply pins should have bypass capacitors to the nearest ground.
   GND_IO    GND   7, 8, 15, 16, 17, 18, 25, Ground for 3.3V VDD Input/Output Power Supplies
                    26, 69, 70, 77, 78, 83,  It is recommended that all ground pins of this device be tied
                           84, 91, 92        together.
    GND      GND  43, 52, 61, 62, 100, 101,  Power Supply and Thermal Ground
                         110, 111, 121       It is recommended that all ground pins of this device be tied
                                             together.
     NC             1, 2, 9, 10, 23, 24, 31, No Connect
                          32, 97, 128
                                                   10


                                                                                       XRT91L34
REV. 1.0.1          QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
SERIAL MICROPROCESSOR INTERFACE
     NAME     LEVEL  TYPE    PIN                               DESCRIPTION
  HOST/HW    LVTTL,    I     122 Host or Hardware Mode Select Input
            LVCMOS               The XRT91L34 offers two modes of operation for interfacing to the
                                 device. The Host mode uses a serial microprocessor interface for
                                 programming individual registers. The Hardware mode is controlled
                                 by the state of the hardware pins set by the user. When left uncon-
                                 nected, by default, the device is configured in the Hardware mode.
                                 "Low" = Hardware Mode
                                 "High" = Host Mode
                                 This pin is provided with an internal pull-down.
      CS     LVTTL,    I     38  Chip Select Input (Host Mode)
            LVCMOS               Active "Low" signal. This signal enables the serial microprocessor
                                 interface by pulling chip select "Low". The serial microprocessor is
                                 disabled when the chip select signal returns "High".
                                 NOTES:
                                       1.  The serial microprocessor interface does not support burst
                                           mode. Chip Select must be de-asserted after each
                                           operation cycle.
                                       2.  Chip Select is only active in Host Mode.
                                 This pin is provided with an internal pull-up.
    SCLK     LVTTL,    I      37 Serial Clock Input (Host Mode Only)
            LVCMOS               Once CS is pulled "Low", the serial microprocessor interface
                                 requires 16 clock cycles for a complete Read or Write operation.
                                 Serial Clock Input is only active in Host Mode.
                                 This pin is provided with an internal pull-down.
  DLOSDIS    LVTTL,    I     39  Serial Data Input (Host Mode Only)
     /SDI   LVCMOS               When CS is pulled "Low", the serial data input is sampled on the ris-
                                 ing edge of SCLK.
                                 Serial Data Input is only active in Host Mode.
                                 This pin is provided with an internal pull-down.
                                 Hardware Mode This pin is functions as the DLOSDIS control pin.
     SDO    LVCMOS    O       40 Serial Data Output (Host Mode Only)
                                 If a Read function is initiated, the serial data output is updated on
                                 the falling edge of SCLK8 through SCLK15, with the LSB (D0)
                                 updated first. This enables the data to be sampled on the rising
                                 edge of SCLK9 through SCLK16.
                                 Serial Data Output is only active in Host Mode.
      INT   LVCMOS    O      41  Interrupt Output (Host Mode Only)
                                 Active "Low" signal. This signal is asserted "Low" when a change in
                                 alarm status occurs. Once the status registers have been read, the
                                 interrupt pin will return "High".
                                 Interrupt Output is only active in Host Mode.
                                 NOTE:     This open-drain output pin requires an external pull-up
                                          resistor.
                                        11


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                     REV. 1.0.1
 1.0 FUNCTIONAL DESCRIPTION
The XRT91L34 Quad Channel CDR is designed to operate with a multichannel SONET Framer/ASIC device
and provide a high-speed serial clock and data recovery interface to optical networks. The CDR receives
differential NRZ serial bit stream running at STS-12/STM-4 or STS-3/STM-1 or STS-1/STM-0, and outputs
recovered serial clock and data via differential LVDS/LVPECL drivers. It implements four independently
configurable receive clock and data recovery (CDR) units and a LOL and LOS detection circuit (Host Mode
Only) for each channel. The CDR is used to provide the front end component of SONET equipment.
 1.1     Hardware Mode vs. Host Mode
Functional control of the receiver can be configured by using either Host mode or Hardware mode. Hardware
mode is selected by pulling HOST/HW "Low" or leaving this pin unconnected. The receiver functionality is then
controlled by the hardware pins described in the Hardware Pin Descriptions. Host mode is selected by pulling
HOST/HW "High". In Host mode the functionality is controlled by programming internal R/W registers using the
Serial Microprocessor interface. Host mode offers functions not available in Hardware mode, such as Loss of
Signal Monitoring, Interrupt Generation and Disabling of the recovered clock output.
 1.2     STS-12/STM-4 and STS-3/STM-1 and STS-1/STM-0 Mode of Operation
The data rate of each receiver channel can be configured by using the appropriate signal level on the
DATAnRATE1:0] pins (where n = channel 0, 1, 2, or 3) as shown in Table 1.
                                   TABLE 1: CHANNEL DATA RATE SELECTION
                                                             DATA RATE SELECTED FOR
                                    DATANRATE[1:0]
                                                                    CHANNEL N
                                   0               0              STS-1/STM-0
                                                                   51.84 Mbps
                                   0               1              STS-3/STM-1
                                                                  155.52 Mbps
                                   1               0             STS-12/STM-4
                                                                  622.08 Mbps
                                   1               1             STS-12/STM-4
                                                                  622.08 Mbps
NOTE: n denotes channel number.
                                                      12


                                                                                                                                  XRT91L34
REV. 1.0.1                                  QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
 1.3        Reference Clock Input
The XRT91L34 can accept either a 19.44 MHz or 77.76 MHz Differential clock input at REFCLKP/N or a
Single-Ended LVTTL clock input at TTLREFCLK. The REFCLKP/N or TTLREFCLK should be generated from
a source which has a frequency accuracy better than ±100ppm in order for the CDR Loss of Lock detector to
have the necessary accuracy required for SONET systems. The reference clock can be provided with one of
two frequencies chosen by CDRREFSEL. The reference frequency options for the XRT91L34 are listed in
Table 2. Figure 3 illustrate the reference clock design options.
  TABLE 2: CDR REFERENCE FREQUENCY OPTIONS (LVDS/ DIFF LVPECL OR SINGLE-ENDED LVTTL/LVCMOS)
                                                          REFCLKP/N OR TTLREFCLK                             CHANNEL 0 - 3
                       CDRREFSEL
                                                                        FREQUENCY                      AVAILABLE DATA RATES
                           0                                           77.76 MHz                    STS-1/STM-0 51.84 Mbps
                           1                                           19.44 MHz                   STS-3/STM-1 155.52 Mbps
                                                                                                   STS-12/STM-4 622.08 Mbps
FIGURE 3. REFERENCE CLOCK DESIGN OPTIONS
                           Differential LVPECL or LVDS                                                     Single-Ended LVTTL/LVCMOS
                               Reference Clock Option                                                         Reference Clock Option
                              REFCLKP and REFCLKN pins
                           internally biased and terminated with
                                    100 Ohm line-to-line
  Differential Clock                       REFCLKP                                    Leave REFCLKP unconnected    REFCLKP
        Source                                                   100 VBB 1.2                      and              REFCLKN     100 VBB 1.2
                                           REFCLKN
  77.76/19.44 MHz                                                                       tie REFCLKN pin to GND
                                            130 Ohm
         Resistors for LVPECL
           Remove for LVDS
                                                                             Internal                                                      Internal
                                                                             REFCLK                                                        REFCLK
                                         TTLREFCLK                                                              TTLREFCLK
     Tie unused TTLREFCLK                                                                        Single Ended
         input pin to GND                                                                        Clock Source
                                                                  XRT91L34                     77.76/19.44 MHz                     XRT91L34
                                                                                   13


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                                                          REV. 1.0.1
 2.0 RECEIVE SECTION
The receive section of XRT91L34 includes four differential input buffers RXDI[3:0]P/N, followed by clock and
data recovery units (CDR) and recovered serial data and clock differential output drivers. The receiver accepts
the high speed Non-Return to Zero (NRZ) serial data at 622.08/155.52/51.84 Mbps through the input interfaces
RXDI[3:0]P/N. The clock and data recovery unit recovers the high-speed receive clock from the incoming data
stream. The recovered serial data is presented to the RXDO[3:0]P/N differential output driver interface. The
high-speed recovered clock RXCLKO[3:0]P/N, is used to synchronize the transfer of the RXDO[3:0]P/N data
with the receive portion of a framer/mapper device. The recovered data RXDO[3:0]P/N and clock
RXCLKO[3:0]P/N differential output driver interfaces are designed for ultimate flexibility by supporting either
LVDS or Differential LVPECL protocol level. Upon initialization or loss of signal or loss of lock, the external
reference clock signal of 19.44 MHz or 77.76 MHz is used to start-up the clock recovery phase-locked loop for
proper operation. The included CDR blocks in the XRT91L34 can be individually disabled by asserting the
CDRDIS[3:0] pins to permit the flexibility of powering down unused channels.
 2.1     Receive Serial Input
The receive serial inputs are applied to RXDI[3:0]P/N. The XRT91L34 includes internal termination, this has
the advantage of reducing the number of external board components. The XRT91L34 terminates the receive
inputs using 100Ω line-to-line method of termination. Differential LVPECL operation of receive inputs can be
supported, provided each optical module Differential LVPECL output pin must have a 130Ω DC current path
resistor to GND whether internally or externally. A simplified LVDS/Differential LVPECL DC coupling block
diagram is shown in Figure 4.
FIGURE 4. RECEIVE SERIAL INPUT INTERFACE USING LVDS/DIFF LVPECL DC COUPLING INTERNAL TERM
                                        Internal 100 Ohm line-to-line
                                            termination active on          LVDS or DIFF LVPECL Operation
                                       RXDI[3:0]P and RXDI[3:0]N pins   Internal 130 Ohm line to GND DC current path resistors
                                               RXDI0P                     required for Optical Module DIFF LVPECL Operation
                        VBB1.2 100
                                               RXDI0N                 Channel 0         Optical Module
                                                                                                                               Optical Fiber
                                               RXDI1P
          XRT91L34      VBB1.2 100
                                               RXDI1N                 Channel 1         Optical Module
          STS-12/3/1                                                                                                           Optical Fiber
              or
                                               RXDI2P
           STM-4/1/0
        Clock and Data  VBB1.2 100
                                               RXDI2N
                                                                      Channel 2         Optical Module
           Recovery
                                                                                                                               Optical Fiber
                                               RXDI3P
                        VBB1.2 100
                                               RXDI3N                 Channel 3         Optical Module
                                                                                                                               Optical Fiber
NOTE: Some optical modules integrate AC coupling capacitors and DC current path resistors internally within the module.
        AC or DC coupling is largely specific to system design and optical module of choice.
                                                                     14


                                                                                                                     XRT91L34
REV. 1.0.1                                QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
The receive serial inputs can also be AC coupled to an optical module or an electrical interface. A simplified
Differential LVPECL AC coupling using external passive components block diagram is shown in Figure 5.
FIGURE 5. RECEIVE SERIAL INPUT INTERFACE USING DIFF LVPECL AC COUPLING INTERNAL TERMINATION
                                                      DIFF LVPECL A/C Coupling using
                  Internal 100 Ohm line-to-line
                      termination active on            External Passive Components
                 RXDI[3:0]P and RXDI[3:0]N pins
                                                                                                         Channel 0
                                              RXDI0P                                                                Optical Fiber
                      VBB1.2 100
                                              RXDI0N                                                 Optical Module
                                                                                                         Channel 1
                                              RXDI1P                                                                Optical Fiber
       XRT91L34         VBB1.2 100
                                               RXDI1N                                                Optical Module
       STS-12/3/1
           or                                                                                            Channel 2
       STM-4/1/0
                                              RXDI2P                                                                Optical Fiber
     Clock and Data     VBB1.2 100
                                               RXDI2N                                                Optical Module
        Recovery
                                                                                                         Channel 3
                                              RXDI3P                                                                Optical Fiber
                      VBB1.2 100                                                                     Optical Module
                                              RXDI3N
                                                              130 x 8
                                                                          Install DC current path resistors
                                                                             as close to Optical Module
                                                                             LVPECL output driver pins
NOTE: Some optical modules integrate AC coupling capacitors and DC current path resistors internally within the module.
 2.2     Receive Clock and Data Recovery
The clock and data recovery (CDR) unit accepts the high speed NRZ serial data from the Differential receiver
and generates a clock that is the same frequency as the incoming data. The clock recovery block utilizes the
reference clock from REFCLKP/N or TTLREFCLK to train and monitor its clock recovery PLL. Upon startup,
the PLL locks to the local reference clock. Once this is achieved, the PLL then attempts to lock onto the
incoming receive serial data stream. Whenever the recovered clock frequency deviates from the local
reference clock frequency by more than approximately ±500 ppm, the clock recovery PLL will switch to the
local reference clock, declare a Loss of Lock and output a high level signal on the LOL output pin. Whenever a
Loss of Lock (LOL) or a Loss of Signal (LOS) event occurs, the CDR will continue to supply a receive clock
(based on the local reference). When the SDEXT becomes active and internal DLOS is cleared and the
recovered clock is determined to be within ±500 ppm accuracy with respect to the local reference source, the
clock recovery PLL will switch back to the incoming receive serial data stream. Table 3 specifies the Clock and
Data Recovery Unit performance characteristics.
                                                                    15


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                                                        REV. 1.0.1
                                      TABLE 3: CLOCK AND DATA RECOVERY UNIT PERFORMANCE
       NAME                                                PARAMETER                                             MIN        TYP MAX    UNITS
 REFDUTY             Reference clock duty cycle                                                                  40              60      %
 REFTOL              Reference clock frequency tolerance2                                                       -100            +100   ppm
 TOLJIT              Input jitter tolerance with 1 MHz < f < 20 MHz PRBS pattern                                 0.3        0.4          UI
 OCLKDUTY            Clock output duty cycle                                                                     45              55      %
     Jitter specification is defined using a 12kHz to 0.4/1.3/5MHz LP-HP single-pole filter.
     1
      These reference clock jitter limits are required for the outputs to meet SONET system level jitter requirements (<10 mUIrms).
     2
       Required to meet SONET output frequency stability requirements.
 2.2.1        Internal Clock and Data Recovery Disable
Optionally, each of the four internal CDR unit can be disabled and powered down when the channel is not in
use. Asserting the CDRDISn pin (where n = channel 0, 1, 2, or 3 ) "High" in Hardware Mode or setting
CDRDISn bit (where n = channel 0, 1, 2, or 3 ) in Host Mode, disables the internal Clock and Data Recovery
unit for that particular channel.
 2.3       External Receive Loop Filter Capacitors
For STS12/STM4 and STS3/STM1 operation, use 0.47µF (or greater) non-polarized external loop filter
capacitors to achieve the required receiver jitter performance for each of the channels. For STS1/STM0
operation, use a minimum of 1.0µF non-polarized capacitors. If all 3 data rates STS12/STS3/STS1 are
required in an application, then use 1uF loop filter capacitors. They must be well isolated to prohibit noise
entering the CDR block and should be placed as close to the pins as possible. Figure 6 shows the pin
connections and external loop filter components. These four non-polarized capacitors should be of +/- 10%
tolerance. Use type X7R or X5R capacitors for improved stability over temperature.
FIGURE 6. EXTERNAL LOOP FILTERS
                                               0.47uF                                                  0.47uF
                                             non-polarized                                           non-polarized
                                         Channel 0 Loop Filter                                   Channel 1 Loop Filter
                                          External Capacitor                                      External Capacitor
                                   pin 109                 pin 108                         pin 103                  pin 102
                                   CAP0P                    CAP0N                          CAP1P                    CAP1N
                                                                   Use 1.0uF non-polarized
                                                                         ..
                                                                         ..
                                               0.47uF                   capacitors for                 0.47uF
                                             non-polarized          STS1/STM0 Operation              non-polarized
                                         Channel 2 Loop Filter                                   Channel 3 Loop Filter
                                          External Capacitor                                      External Capacitor
                                    pin 59                  pin 60                          pin 53                  Pin 54
                                    CAP2P                   CAP2N                          CAP3P                    CAP3N
                                                                            16


                                                                                                     XRT91L34
REV. 1.0.1                      QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
 2.4      Internal Digital Loss of Signal and External Signal Detection
XRT91L34 has an integrated Digital Loss of Signal (DLOS) circuit and supports external Signal Detection
(SDEXT) for detecting and determining received signal integrity. The internal DLOS circuit monitors the
incoming data stream. If the incoming data stream has no transition for more than 2.5µs, Loss of Signal is
declared. This LOS condition will be cleared when the circuit detects transitions in a 128µs interval sliding
window. Pulling the DLOSDIS pin signal to a high level in hardware mode or setting DLOSDIS bit in host mode
will disable the internal DLOS detection circuit to permit the framer/mapper interface to determine the Loss of
Signal declaration and clearance criteria for specific applications. The external Signal Detect function is
supported by the SDEXT input. An LVCMOS/LVTTL signal comes from the optical module through an output
usually called “SD” or “FLAG” which indicates the lack or presence of optical power. Depending on the
manufacturer of these devices, the polarity of this signal can be either active "Low" or active "High." The
SDEXT and POL inputs are Exclusive OR’ed to determine external Loss of Signal (LOS) condition. In the event
that internal DLOS is detected or an external SDEXT input indicates signal absence, the recovered serial data
output will be forced to a logic state "0," and the LOS status register is set whenever the host mode serial
microprocessor interface is active. This acts as a receive data mute upon LOS function to prevent data
chattering and to prevent random noise from being misinterpreted as valid incoming data. Figure 7 shows the
Loss of Signal Detection logic circuit. Table 4 specifies LOS declaration polarity settings.
FIGURE 7. LOSS OF SIGNAL DECLARATION CIRCUIT
                  DLOSDIS
    (Internal) DLOS Detect                                               LOS Declaration
                                                                              and
                       POL                                            Recovered Data Mute
          (External) SDEXT
                            TABLE 4: EXTERNAL LOS DECLARATION POLARITY SETTING
                                                                            LOS BIT STATE
               SDEXT        POL      INTERNAL SIGNAL DETECT                                RXDO[3:0]P/N
                                                                          (HOST MODE ONLY)
                  0           0     Active Low. Optical signal presence
                                                                                              Normal
                                    indicated by SDEXT logic 0 input from        Low
                                                                                             Operation
                                    optical module.
                  0           1     Active High. Optical signal presence
                                                                                 High
                                    indicated by SDEXT logic 1 input from                     Muted
                                                                             LOS declared
                                    optical module.
                  1           0     Active Low. Optical signal presence
                                                                                 High
                                    indicated by SDEXT logic 0 input from                     Muted
                                                                             LOS declared
                                    optical module.
                  1           1     Active High. Optical signal presence
                                                                                              Normal
                                    indicated by SDEXT logic 1 input from        Low
                                                                                             Operation
                                    optical module.
                                                            17


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                                                REV. 1.0.1
 2.5     Multichannel Recovered Output Interface
The recovered data RXDO[3:0]P/N differential output drivers along with the recovered clock RXCLKO[3:0]P/N
differential output drivers can be configured for LVDS or Differential LVPECL standard operation. In addition,
Host Mode operation permits each of the channelized recovered clock output to be independently disabled
such as in repeater applications to save power.
FIGURE 8. MULTICHANNEL RECOVERED OUTPUT INTERFACE BLOCK
                         LVDS Operation                    OUTCFG = 0
                                                  RXDO0P
                                                  RXDO0N      Channel 0   100
                                                                                         SONET Framer/
                                                  RXDO1P                                          ASIC
                      XRT91L34                                Channel 1   100
                                                  RXDO1N
                       STS-12/3/1
                           or                                                        Internal or External 100 Ohm
                                                  RXDO2P                          line-to-line termination required on
                       STM-4/1/0                                                  RXDO[3:0]P and RXDO[3:0]N pins
                     Clock and Data                           Channel 2   100      on the SONET Framer/ASIC end
                                                  RXDO2N
                        Recovery
                                                  RXDO3P
                                                  RXDO3N      Channel 3   100
                                                        RXCLKO[3:0]P and
                                                          RXCLKO[3:0]N
                                                        Clock Output pins
                                                       terminated similarly
                                                           OUTCFG = 1
                                                     VDDIO
                                                                                             Install terminators as close to
                                                                              120 x 8         SONET Framer/ ASIC pins
                        LVPECL Operation
                                                  RXDO0P
                                                                                 Channel 0
                                                  RXDO0N
                                                                                            SONET Framer/
                                                  RXDO1P                                              ASIC
                      XRT91L34                                                   Channel 1
                                                  RXDO1N
                       STS-12/3/1
                           or
                                                  RXDO2P
                       STM-4/1/0
                     Clock and Data                                              Channel 2
                                                  RXDO2N
                        Recovery
                                                  RXDO3P
                                                  RXDO3N                         Channel 3
                                     RXCLKO[3:0]P and
                                       RXCLKO[3:0]N                           82 x 8
                                     Clock Output pins
                                    terminated similarly
                                                                18


                                                                                               XRT91L34
REV. 1.0.1                      QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
 2.6     Differential Recovered Data Output Timing
The differential recovered data and clock outputs operating at the STS-12/STM-4 or STS-3/STM-1 or STS-1/
STM-0 datarates will adhere to the data valid output timing shown in Figure 9 ,Table 5, Table 6, and Table 7.
FIGURE 9. DIFFERENTIAL RECOVERED OUTPUT TIMING
                                                  tRXCLKO
             RXCLKO[3:0]P/N
              RXDO[3:0]P/N   D1              D2           D3              D4          D5
                                                                      tRXDO_VALID
                    TABLE 5: RECOVERED DATA OUTPUT TIMING (STS-12/STM-4 OPERATION)
       SYMBOL                                   PARAMETER                          MIN    TYP   MAX    UNITS
       tRXCLKO         Recovered high-speed output clock period                          1.608           ns
     tRXDO_VALID       Time the data is valid on RXDO[3:0]P/N before and after the 0.5                   ns
                       rising edge of RXCLKO[3:0]P/N
                     TABLE 6: RECOVERED DATA OUTPUT TIMING (STS-3/STM-1 OPERATION)
       SYMBOL                                   PARAMETER                          MIN    TYP   MAX    UNITS
       tRXCLKO         Recovered high-speed output clock period                           6.43           ns
     tRXDO_VALID       Time the data is valid on RXDO[3:0]P/N before and after the 2.8                   ns
                       rising edge of RXCLKO[3:0]P/N
                     TABLE 7: RECOVERED DATA OUTPUT TIMING (STS-1/STM-0 OPERATION)
       SYMBOL                                   PARAMETER                          MIN    TYP   MAX    UNITS
       tRXCLKO         Recovered high-speed output clock period                          19.29           ns
     tRXDO_VALID       Time the data is valid on RXDO[3:0]P/N before and after the 8.3                   ns
                       rising edge of RXCLKO[3:0]P/N
                                                          19


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                                                                                                        REV. 1.0.1
3.0 JITTER PERFORMANCE
3.1      SONET Jitter Requirements
SONET receive equipment jitter requirements are specified jitter tolerance and jitter transfer. The definitions of
each of these types of jitter are given below.
 3.1.1     Rx Jitter Tolerance:
OC-1/STM-0, OC-3/STM-1, and OC-12/STM-4 category II SONET interfaces should tolerate, the input jitter
applied according to the mask of Figure 10, with the corresponding parameters specified in the figure.
                   FIGURE 10. GR-253/G.783 JITTER TOLERANCE MASK
                                                     A3
                                                                                                     slope= -20dB/decade
                                           Input
                                           Jitter
                                         Amplitude
                                          (UIpp)
                                                     A2                                                                                             slope= -20dB/decade
                                                     A1
                                                                 f0            f1                          f2          f3                           f4
                                                                                                     Jitter Frequency (Hz)
                                                          OC-N   STM-X LEVEL        F0 (HZ)   F1 (HZ)     F2 (HZ)   F3 (HZ)   F4 (HZ)   A1 (UIPP)        A2 (UIPP)   A3 (UIPP)
                                                           OC1/STS11   STM0           10        30         300        2K       20K        0.15              1.5         15
                                                           OC3/STS33   STM1           10        30         300       6.5K      65K        0.15              1.5         15
                                                           OC12/STS12
                                                                  12  STM4            10        30         300       25K       250K       0.15              1.5         15
                   FIGURE 11. XRT91L34 MEASURED JITTER TOLERANCE AT 51.84 MBPS STS-1/STM-0
                                                          Jitte r T ole rance , G R -253, O C -1 (51 M bps)
                                                                                    Mas k                                             Jitter Toleranc e
                              1 0 0 .0 0
                                         1 0 .0 0
                        Amplitude (UI)
                                          1 .0 0
                                          0 .1 0
                                          0 .0 1
                                                1 E+0                 1 E+1                1E+2     1 E+3      1 E+4                                 1 E+5                   1 E+6
                                                                                              Fre que nc y (Hz)
                                                                                                         20


                                                                                                            XRT91L34
REV. 1.0.1   QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
               FIGURE 12. XRT91L34 MEASURED JITTER TOLERANCE AT 155.52 MBPS STS-3/STM-1
                                                              Jitter Tolerance, GR-253, OC-3 (155 Mbps)
                                                                           Jitter Tolerance                      Mask
                                        100.00
                                                 10.00
                                    Amplitude (UI)
                                                     1.00
                                                     0.10
                                                     0.01
                                                        1E+0      1E+1      1E+2       1E+3   1E+4       1E+5    1E+6     1E+7
                                                                                      Frequency (Hz)
               FIGURE 13. XRT91L34 MEASURED JITTER TOLERANCE AT 622.08 MBPS STS-12/STM-4
                                                            Jitte r T ole rance , G R -253, O C -12 (622 M bps)
                                                                          Jitter Toler anc e                      Mas k
                   1 0 0 0 .0 0
                           1 0 0 .0 0
                   Amplitude (UI)
                                    1 0 .0 0
                                             1 .0 0
                                             0 .1 0
                                             0 .0 1
                                                      1 E+ 0     1 E +1    1 E+2      1 E +3    1 E +4   1 E+5    1 E+6    1 E +7
                                                                                   Fre que nc y (Hz)
                                                                                         21


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                                        REV. 1.0.1
 3.1.2     Rx Jitter Transfer
Jitter Transfer function is defined as the ratio of jitter on the output relative to the jitter applied on the input
versus frequency. It displays the ability of the component unit to attenuate jitter at the specified injected jitter
frequencies. There are two distinct characteristics in jitter transfer, jitter gain (jitter peaking) defined as the
highest ratio above 0dB and jitter transfer bandwidth. The overall jitter transfer bandwidth is controlled by a low
bandwidth loop.
The XRT91L34 meets the latest jitter transfer characteristics as shown in the Figure 14, Figure 15, and
Figure 16. The XRT91L34 complies with STS-12/3/1 and STM-4/1/0 jitter transfer masks set forth by Bellcore
GR-253 Core section 5.6.2.1 and ITUT G.783 section 15.1.3 as defined in G.825.
                     FIGURE 14. XRT91L34 MEASURED JITTER TRANSFER AT 51.84 MBPS STS-1/STM-0
                                                         Jitter Transfer, GR253H, OC-1 (52Mbps)
                                                                  Mask                     Jitter Transfer
                                                 5
                                                 0
                                                 -5
                                 Gain (dB)
                                             -10
                                             -15
                                             -20
                                             -25
                                             -30
                                                  1E+1       1E+2         1E+3      1E+4         1E+5         1E+6
                                                                        Frequuency (Hz)
                     FIGURE 15. XRT91L34 MEASURED JITTER TRANSFER AT 155.52 MBPS STS-3/STM-1
                                                      Jitter Transfer, GR253H, OC-3 (155 Mbps)
                                                                 Mask                      Jitter Transf er
                                             5
                                             0
                                         -5
                             Gain (dB)
                                 -10
                                 -15
                                 -20
                                 -25
                                 -30
                                             1E+1         1E+2      1E+3      1E+4     1E+5        1E+6       1E+7
                                                                           Frequuency (Hz)
                                                                             22


                                                                                XRT91L34
REV. 1.0.1   QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
              FIGURE 16. XRT91L34 MEASURED JITTER TRANSFER AT 622.08 MBPS STS-12/STM-4
                                     Jitte r T ransfe r, G R253H , O C -12 (622 M bps)
                                                Mas k                    Jitter Trans f er
                                5
                                0
                                -5
                    Gain (dB)
                            -10
                            -15
                            -20
                            -25
                            -30
                                 1E+1    1E+2      1E+3       1E+4     1E+5       1E+6       1E+7
                                                          Frequuency (Hz)
                                                             23


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                                    REV. 1.0.1
 4.0 SERIAL MICROPROCESSOR INTERFACE BLOCK
The Serial Microprocessor Interface uses a standard 3-pin serial port with CS, SCLK, and SDI for programming
the device. Optional pins such as SDO, INT, and RESET allow the ability to read back contents of the registers,
monitor the device via an interrupt pin, and reset the device to its default configuration by pulling reset "Low"
for more than 10ns. A simplified block diagram of the Serial Microprocessor Interface is shown in Figure 17.
FIGURE 17. SIMPLIFIED BLOCK DIAGRAM OF THE SERIAL MICROPROCESSOR INTERFACE
                        SDI                                                   Data out         SDO
                                                          Shift Register
                      SCLK
                                                           Address              Data
                                                              bus                bus
                      CS                                                                                 INT
                                                                     Register
                                                                       Bank
                          Status bits and error                                                Controls to
                            Flags from CDRs                                                      CDRs
                  RESET
 4.1 SERIAL TIMING INFORMATION
The serial port requires 16 bits of data applied to the SDI (Serial Data Input) pin. The Serial Microprocessor
Interface samples SDI on the rising edge of SCLK (Serial Clock Input). The data is not latched into the device
until all 16 bits of serial data have been sampled. A timing diagram of the Serial Microprocessor Interface is
shown in Figure 18.
FIGURE 18. TIMING DIAGRAM FOR THE SERIAL MICROPROCESSOR INTERFACE
          CS
                       25nS              50nS
        SCLK                1      2     3      4   5   6     7      8     9  10     11  12   13   14     15  16
          SDI            R/W    A0     A1     A2  A3  A4   A5      X    D0   D1    D2   D3  D4   D5     D6   D7
                                          High-Z                                                                 High-Z
         SDO                                                            D0   D1    D2   D3  D4   D5     D6   D7
NOTE: The serial microprocessor interface does NOT support "burst write" or "burst read" operations. Chip Select (active
         "Low") must be de-asserted at the end of each write or read operation.
                                                                24


                                                                                                        XRT91L34
REV. 1.0.1                        QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
 4.2 16-BIT SERIAL DATA INPUT DESCRITPTION
The serial data input is sampled on the rising edge of SCLK. For read operations, the SDO signal is updated
on the falling edge of SCLK. The serial data must be applied to the serial port LSB first. The 16 bits of serial
data are described below.
  4.2.1   R/W (SCLK1)
The first serial bit applied to the device SDI pin determines whether a Read or Write operation is desired. If the
R/W bit is set to “0”, the serial port is configured for a Write operation. If the R/W bit is set to “1”, the serial port
is configured for a Read operation.
  4.2.2   A[5:0] (SCLK2 - SCLK7)
The next 6 SCLK cycles are used to provide the address to which a Read or Write operation will occur. A0
(LSB) must be sent to the SDI pin first followed by A1 and so forth until all 6 address bits have been sampled
by SCLK.
  4.2.3   X (Dummy Bit SCLK8)
The dummy bit sampled by SCLK8 is used to allow sufficient time for the serial data output pin to update data
if the readback mode is selected by setting R/W = “1”. Therefore, the state of this bit is ignored and can hold
either “0” or “1” during both Read and Write operations.
  4.2.4 D[7:0] (SCLK9 - SCLK16)
The next 8 SCLK cycles are used to provide the data to be written into the internal register chosen by the ad-
dress bits. D0 (LSB) must be sent to the SDI pin first followed by D1 and so forth until all 8 data bits have been
sampled by SCLK. Once 16 SCLK cycles have been complete, the data is held until CS is pulled “High”
whereby, the serial port latches the data into the selected internal register.
 4.3 8-BIT SERIAL DATA OUTPUT DESCRIPTION
When R/W is set to “1” (Read operation) the serial data output is updated on the falling edge of SCLK8 -
SCLK16, D0 (LSB) is provided at the SDO pin on the falling edge of SCLK8, followed by D1 and so forth until
all 8 data bits have been updated after which the SDO output pin returns to a high impedance state until the
next read operation.
                                                           25


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                 REV. 1.0.1
 5.0 REGISTER MAP AND BIT DESCRIPTIONS
The XRT91L34 consists of 6 Common Registers including the Device ID and Revision ID registers and 12
channelized registers. Table 8 below presents the overall Register Map.
                             TABLE 8: MICROPROCESSOR INTERFACE REGISTER MAP
 REG     ADDR TYPE      D7         D6          D5          D4       D3       D2        D1         D0
Control Registers (0x00 - 0x22)
  0        0x00 R/W  Reserved    Reserved    Reserved    DLOSDIS  Reserved MINT_EN  CDRREFSEL  SWRST
  1        0x01 RO   Reserved    Reserved    Reserved    Reserved  INTS3    INTS2     INTS1     INTS0
  2        0x02 RO  Device ID MSB (See Bit Description)
  3        0x03 RO  Device ID LSB (See Bit Description)
  4        0x04 RO  Revision ID MSB (Register value is 0x00)
  5        0x05 RO  Revision ID LSB (See Bit Description)
  6        0x06 R/W  Reserved    Reserved    Reserved    Reserved Reserved Reserved  Reserved Reserved
   7       0x07 R/W  Reserved    Reserved    Reserved    Reserved Reserved Reserved  Reserved Reserved
                                                    CHANNEL 0
  8        0x08 R/W  Reserved    Reserved    Reserved    Reserved Reserved RCLKDIS0  CDRDIS0     POL0
  9        0x09 R/W  Reserved    Reserved  DATA0RATE1 DATA0RATE0  Reserved Reserved  LOL0_IE   LOS0_IE
  10       0x0A RO   Reserved    Reserved     LOL0        LOS0    Reserved Reserved  LOL0_IS   LOS0_IS
                RUR
   0x0B - 0x0F  RO  Reserved
                                                    CHANNEL 1
  16       0x10 R/W  Reserved    Reserved    Reserved    Reserved Reserved RCLKDIS1  CDRDIS1     POL1
  17       0x11 R/W  Reserved    Reserved  DATA1RATE1 DATA1RATE0  Reserved Reserved  LOL1_IE   LOS1_IE
  18       0x12 RO   Reserved    Reserved     LOL1        LOS1    Reserved Reserved  LOL1_IS   LOS1_IS
                RUR
    0x13 - 0x17 RO  Reserved
                                                    CHANNEL 2
  24       0x18 R/W  Reserved    Reserved    Reserved    Reserved Reserved RCLKDIS2  CDRDIS2     POL2
  25       0x19 R/W  Reserved    Reserved  DATA2RATE1 DATA2RATE0  Reserved Reserved  LOL2_IE   LOS2_IE
  26       0x1A RO   Reserved    Reserved     LOL2        LOS2    Reserved Reserved  LOL2_IS   LOS2_IS
                RUR
   0x1B - 0x1F  RO  Reserved
                                                    CHANNEL 3
  32       0x20 R/W  Reserved    Reserved    Reserved    Reserved Reserved RCLKDIS3  CDRDIS3     POL3
  33       0x21 R/W  Reserved    Reserved  DATA3RATE1 DATA3RATE0  Reserved Reserved  LOL3_IE   LOS3_IE
  34       0x22 RO   Reserved    Reserved     LOL3        LOS3    Reserved Reserved  LOL3_IS   LOS3_IS
                RUR
                                                       26


                                                                                                        XRT91L34
REV. 1.0.1               QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
COMMON CONTROL REGISTERS
                TABLE 9: MICROPROCESSOR INTERFACE REGISTER 0X00 BIT DESCRIPTION
                                       GLOBAL CONTROL REGISTER (0X00)
                                                                                                  Regis-    Default
     BIT      NAME                                      FUNCTION                                    ter     Value
                                                                                                  Type    (HW Reset)
     D7     Reserved   This Register Bit is Not Used                                               RO         0
     D6     Reserved   This Register Bit is Not Used                                               RO         0
     D5     Reserved   This Register Bit is Not Used                                               RO         0
     D4     DLOSDIS    DLOS (Digital Loss of Signal) Disable                                       R/W        0
                       This global bit is used to disable the channelized internal DLOS
                       monitoring and automatic muting of RXDO[3:0]P/N recovered data
                       output pins upon DLOS detection.
                       "0" = Monitor & Mute recovered data upon LOS declaration
                       "1" = Disable internal DLOS monitoring
     D3     Reserved   This Register Bit is Not Used                                               RO         0
     D2     MINT_EN    Master Interrupt Enable                                                     R/W        0
                       "0" = Disables Interrupt generation
                       "1" = Enables Interrupt generation
     D1    CDRREFSEL Clock and Data Recovery Unit Reference Frequency Select                       R/W        0
                       This bit is used to select the clock input reference.
                       "0" = 77.76 MHz reference frequency support
                       "1" = 19.44 MHz reference frequency support
     D0      SWRST     Software Reset                                                              R/W        0
                       A "0" to "1" transition will asynchronously reset the device and all
                       register bit settings to their default state. This bit will automatically
                       reset itself to "0". User does not have to write "0" to this bit to resume
                       normal operation.
                       "0" = Normal Operation
                       "1" = Resets all registers to default values
                                                        27


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                         REV. 1.0.1
              TABLE 10: MICROPROCESSOR INTERFACE REGISTER 0X01 BIT DESCRIPTION
                                 CHANNEL INTERRUPT STATUS REGISTER (0X01)
                                                                                             Regis-   Default
   BIT       NAME                                        FUNCTION                              ter     Value
                                                                                              Type  (HW Reset)
   D7     Reserved     This Register Bit is Not Used                                           RO        0
   D6     Reserved     This Register Bit is Not Used                                           RO        0
   D5     Reserved     This Register Bit is Not Used                                           RO        0
   D4     Reserved     This Register Bit is Not Used                                           RO        0
   D3       INTS3      Channel 3 Interrupt Status                                              RO        0
                       This bit indicates an interrupt occuring in Channel 3.
                       "0" = No Interrupt Generated
                       "1" = Channel Interrupt Occurring
   D2       INTS2      Channel 2 Interrupt Status                                              RO        0
                       This bit indicates an interrupt occuring in Channel 2.
                       "0" = No Interrupt Generated
                       "1" = Channel Interrupt Occurring
   D1       INTS1      Channel 1 Interrupt Status                                              RO        0
                       This bit indicates an interrupt occuring in Channel 1.
                       "0" = No Interrupt Generated
                       "1" = Channel Interrupt Occurring
   D0       INTS0      Channel 0 Interrupt Status                                              RO        0
                       This bit indicates an interrupt occuring in Channel 0.
                       "0" = No Interrupt Generated
                       "1" = Channel Interrupt Occurring
              TABLE 11: MICROPROCESSOR INTERFACE REGISTER 0X02 BIT DESCRIPTION
                                         DEVICE "ID" REGISTER (0X02)
                                                                                           Register   Default
   BIT     NAME                                      FUNCTION                               Type       Value
                                                                                                    (HW reset)
   D7    Device "ID" The device "ID" of the XRT91L34 CDR is 0x8405h. Along with the          RO          1
   D6      MSB       revision "ID", the device "ID" is used to enable software to identify               0
   D5                the silicon adding flexibility for system control and debug.                        0
   D4                                                                                                    0
   D3                                                                                                    0
   D2                                                                                                    1
   D1                                                                                                    0
   D0                                                                                                    0
                                                         28


                                                                                                    XRT91L34
REV. 1.0.1                  QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
                 TABLE 12: MICROPROCESSOR INTERFACE REGISTER 0X03 BIT DESCRIPTION
                                            DEVICE "ID" REGISTER (0X03)
                                                                                             Register   Default
     BIT     NAME                                      FUNCTION                               Type       Value
                                                                                                      (HW reset)
     D7    Device "ID" The device "ID" of the XRT91L34 CDR is 0x8405h. Along with the          RO          0
     D6       LSB      revision "ID", the device "ID" is used to enable software to identify               0
     D5                the silicon adding flexibility for system control and debug.                        0
     D4                                                                                                    0
     D3                                                                                                    0
     D2                                                                                                    1
     D1                                                                                                    0
     D0                                                                                                    1
                 TABLE 13: MICROPROCESSOR INTERFACE REGISTER 0X04 BIT DESCRIPTION
                                           REVISION "ID" REGISTER (0X04)
                                                                                             Register   Default
     BIT     NAME                                      FUNCTION                               Type       Value
                                                                                                      (HW reset)
     D7     Revision   The revision "ID" of the XRT91L34 CDR is used to enable software        RO          0
     D6       "ID"     to identify which revision of silicon is currently being tested. This               0
     D5      MSB       MSB revision "ID" register will always contain the value 0x00h.                     0
     D4                                                                                                    0
     D3                                                                                                    0
     D2                                                                                                    0
     D1                                                                                                    0
     D0                                                                                                    0
                 TABLE 14: MICROPROCESSOR INTERFACE REGISTER 0X05 BIT DESCRIPTION
                                           REVISION "ID" REGISTER (0X05)
                                                                                             Register   Default
     BIT     NAME                                      FUNCTION                               Type       Value
                                                                                                      (HW reset)
     D7     Revision   The revision "ID" of the XRT91L34 CDR is used to enable software        RO      This byte
     D6       "ID"     to identify which revision of silicon is currently being tested. The            shows the
     D5       LSB      revision "ID" for the first revision of silicon (Revision A) will be           revision of
                       0x01h.                                                                         the device.
     D4
     D3
     D2
     D1
     D0
                                                           29


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                           REV. 1.0.1
CHANNELIZED REGISTERS
         TABLE 15: MICROPROCESSOR INTERFACE REGISTER 0X08, 0X10, 0X18, 0X20 BIT DESCRIPTION
                  CHANNEL CONTROL REGISTER (CH0 = 0X08, CH1 = 0X10, CH2 = 0X18, CH3 = 0X20)
                                                                                             Register   Default
  BIT        NAME                                       FUNCTION                              Type       Value
                                                                                                      (HW reset)
  D7       Reserved      This Register Bit is Not Used                                         RO          0
  D6       Reserved      This Register Bit is Not Used                                         RO          0
  D5       Reserved      This Register Bit is Not Used                                         RO          0
  D4       Reserved      This Register Bit is Not Used                                         RO          0
  D3       Reserved      This Register Bit is Not Used                                         RO          0
  D2       RCLKDISn      Recovered Serial Clock Output Disable                                R/W          0
                         This bit is used to control the activity of the 622.08/155.52/51.84
                         MHz differential serial clock output. Tristating RXCLKOnP/N output
                         reduces power consumption.
                         "0" = RXCLKOnP/N output Enabled
                         "1" = RXCLKOnP/N output Tristated
  D1       CDRDISn       Clock and Data Recovery Unit Disable                                 R/W          0
                         Disables Internal Clock and Data Recovery Unit.
                         "0" = Internal CDR Unit is Enabled
                         "1" = Internal CDR Unit is Disabled
  D0         POLn        Polarity for SDEXT Input                                             R/W          0
                         Controls the Signal Detect polarity convention of SDEXT.
                         "0" = SDEXT is active "Low"
                         "1" = SDEXT is active "High"
NOTE: n denotes channel number.
                                                           30


                                                                                              XRT91L34
REV. 1.0.1                    QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
           TABLE 16: MICROPROCESSOR INTERFACE REGISTER 0X09, 0X11, 0X19, 0X21 BIT DESCRIPTION
    CONFIGURATION AND INTERRUPT ENABLE CHANNEL REGISTER (CH0 = 0X09, CH1 = 0X11, CH2 = 0X19, CH3 = 0X21)
                                                                                       Register    Default
  BIT          NAME                                   FUNCTION                          Type        Value
                                                                                                 (HW reset)
  D7         Reserved    This Register Bit is Not Used                                   RO           0
  D6         Reserved    This Register Bit is Not Used                                   RO           0
  D5        DATAnRATE1   Data Rate Selection Bit-1 and Bit-0                            R/W           0
                         These bits selects SONET/SDH reception speed rate for each of
  D4        DATAnRATE0                                                                  R/W           0
                         the four channels independently according to the logic below.
                               DATANRATE[1:0]                   DATA RATE
                                  0            0               STS-1/STM-0
                                                                51.84 Mbps
                                  0            1               STS-3/STM-1
                                                                155.52 Mbps
                                  1            0               STS-12/STM-4
                                                                622.08 Mbps
                                  1            1               STS-12/STM-4
                                                                622.08 Mbps
  D3         Reserved    This Register Bit is Not Used                                   RO           0
  D2         Reserved    This Register Bit is Not Used                                   RO           0
  D1          LOLn_IE    Loss of Lock Interrupt Enable                                  R/W           0
                         "0" = Masks the LOL interrupt generation
                         "1" = Enables Interrupt generation
  D0          LOSn_IE    Loss of Signal Interrupt Enable                                R/W           0
                         "0" = Masks the LOS interrupt generation
                         "1" = Enables Interrupt generation
NOTE: n denotes channel number.
                                                         31


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                            REV. 1.0.1
        TABLE 17: MICROPROCESSOR INTERFACE REGISTER 0X0A, 0X12, 0X1A, 0X22 BIT DESCRIPTION
             INTERRUPT STATUS CONTROL REGISTER (CH0 = 0X0A, CH1 = 0X12, CH2 = 0X1A, CH3 = 0X22)
                                                                                              Register   Default
    BIT         NAME                                    FUNCTION                               Type       Value
                                                                                                       (HW reset)
    D7        Reserved   This Register Bit is Not Used                                          RO          0
    D6        Reserved   This Register Bit is Not Used                                          RO          0
    D5          LOLn     Loss of Lock Detection                                                 RO          0
                         The Loss of Lock Detect is used to indicate whether the CDR PLL
                         is locked.
                         "0" = CDR Locked
                         "1" = CDR Out of Lock
    D4          LOSn     Loss of Signal                                                         RO          0
                         The LOS indicates the Loss of Signal activity.
                         "0" = No Alarm
                         "1" = A LOS condition is present
    D3        Reserved   This Register Bit is Not Used                                          RO          0
    D2        Reserved   This Register Bit is Not Used                                          RO          0
    D1        LOLn_IS    Loss of Lock Interrupt Status                                         RUR          0
                         An external interrupt will not occur unless the LOLn_IE interrupt
                         enable bit is set in the appropriate registers 0x09, 0x11, 0x19, and
                         0x21 for channels 0, 1, 2, and 3 respectively.
                         "0" = No Change
                         "1" = Change in CDR Lock Status Occurred
    D0        LOSn_IS    Loss of Signal Interrupt Status                                       RUR          0
                         An external interrupt will not occur unless the LOSn_IE interrupt
                         enable bit is set in the appropriate registers 0x09, 0x11, 0x19, and
                         0x21 for channels 0, 1, 2, and 3 respectively.
                         "0" = No Change
                         "1" = Change in LOS Status Occurred
NOTE: n denotes channel number.
                                                           32


                                                                                                                           XRT91L34
REV. 1.0.1                         QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
 6.0 ELECTRICAL CHARACTERISTICS
ABSOLUTE MAXIMUM RATINGS
Air Thermal Resistance of LQFP Package.....ΘjA = 25°C/W                 Operating Temperature Range.................-40°C t o 85°C
Case Thermal Resistance of LQFP Package.ΘjC = 4°C/W                     Case Temperature under bias..................-55°C to 125°C
ESD Protection (HBM)..........................................>2000V    Storage Temperature ...............................-65°C to 150°C
                        TABLE 18: ABSOLUTE MAXIMUM POWER AND INPUT/OUTPUT RATINGS
    SYMBOL        TYPE                            PARAMETER                      MIN.      TYP.                  MAX.               UNITS
    VDD1.8                  1.8V Core Power Supplies                             -0.5                              3.6                V
    VDDIO                   3.3V Input/Output Power Supplies                     -0.5                              5.5                V
                  LVDS      DC logic signal input voltage                        -0.5                       VDDIO +0.5                V
                LVPECL      DC logic signal input voltage                        -0.5                       VDDIO +0.5                V
                 LVTTL/ DC logic signal input voltage                            -0.5                       VDDIO +0.5                V
               LVCMOS
                  LVDS      DC logic signal output voltage                       -0.5                       VDDIO +0.5                V
                LVPECL      DC logic signal output voltage                       -0.5                       VDDIO +0.5                V
               LVCMOS DC logic signal output voltage                             -0.5                       VDDIO +0.5                V
                  LVDS      Input current                                        -200                             200                mA
                LVPECL      Input current                                        -200                             200                mA
                 LVTTL/ Input current                                            -200                             200                mA
               LVCMOS
NOTE: Stresses listed under Absolute Maximum Power and I/O ratings may be applied to devices one at a time without
         causing permanent damage. Functionality at or above the values listed is not implied. Exposure to these values for
         extended periods will severely affect device reliability.
                        TABLE 19: POWER AND CURRENT DC ELECTRICAL CHARACTERISTICS
Test Conditions: VDD1.8 = 1.8V + 5%, VDDIO = 3.3V + 5% unless otherwise specified
    SYMBOL        TYPE                            PARAMETER                       MIN.  TYP.       MAX.        UNITS         CONDITIONS
     VDD1.8              Core Power Supply Voltage                               1.710   1.8      1.890            V
     VDDIO               I/O Power Supply Voltage                                3.135   3.3      3.465            V
   IDD1.8-OC1            1.8V 51.84Mbps Total Power Supply Current                                               mA          LVDS Mode
   IDD1.8-OC3            1.8V 155.52Mbps Total Power Supply Current                                              mA          LVDS Mode
  IDD1.8-OC12            1.8V 622.08Mbps Total Power Supply Current                     117                      mA          LVDS Mode
   IDD3.3-OC1            3.3V 51.84Mbps Total Power Supply Current                                               mA          LVDS Mode
   IDD3.3-OC3            3.3V 155.52Mbps Total Power Supply Current                                              mA          LVDS Mode
                                                                     33


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                         REV. 1.0.1
                      TABLE 19: POWER AND CURRENT DC ELECTRICAL CHARACTERISTICS
Test Conditions: VDD1.8 = 1.8V + 5%, VDDIO = 3.3V + 5% unless otherwise specified
   SYMBOL       TYPE                      PARAMETER                MIN.    TYP.   MAX.    UNITS    CONDITIONS
 IDD3.3-OC12          3.3V 622.08Mbps Total Power Supply Current             50            mA     LVDS Mode
 IDD3.3-OC12          3.3V 622.08Mbps Total Power Supply Current             30            mA     LVDS Mode
                                                                                                  RXCLKO dis-
                                                                                                     abled
   PDD-OC1            Total Power Consumption                                             mW      LVDS Mode
   PDD-OC3            Total Power Consumption                                             mW      LVDS Mode
  PDD-OC12            Total Power Consumption                               376           mW      LVDS Mode
   PDD-OC12           Total Power Consumption                               310           mW      LVDS Mode
                                                                                                  RXCLKO dis-
                                                                                                     abled
  IDD1.8-OC1          1.8V 51.84Mbps Total Power Supply Current                            mA    LVPECL Mode
  IDD1.8-OC3          1.8V 155.52Mbps Total Power Supply Current                           mA    LVPECL Mode
 IDD1.8-OC12          1.8V 622.08Mbps Total Power Supply Current            117            mA    LVPECL Mode
  IDD3.3-OC1          3.3V 51.84Mbps Total Power Supply Current                            mA    LVPECL Mode
  IDD3.3-OC3          3.3V 155.52Mbps Total Power Supply Current                           mA    LVPECL Mode
 IDD3.3-OC12          3.3V 622.08Mbps Total Power Supply Current            386            mA    LVPECL Mode
 IDD3.3-OC12          3.3V 622.08Mbps Total Power Supply Current            198            mA    LVPECL Mode
                                                                                                  RXCLKO dis-
                                                                                                     abled
   PDD-OC1            Total Power Consumption                                             mW     LVPECL Mode
   PDD-OC3            Total Power Consumption                                             mW     LVPECL Mode
  PDD-OC12            Total Power Consumption                              1485           mW     LVPECL Mode
   PDD-OC12           Total Power Consumption                               865           mW     LVPECL Mode
                                                                                                  RXCLKO dis-
                                                                                                     abled
        TABLE 20: LVDS/DIFFERENTIAL LVPECL INPUT LOGIC SIGNAL DC ELECTRICAL CHARACTERISTICS
Test Condition: VDD1.8 = 1.8V + 5%, VDDIO = 3.3V + 5% unless otherwise specified
 SYMBOL          TYPE                  PARAMETER             MIN         TYP       MAX       UNITS CONDITIONS
    VIH      LVDS/LVPECL Input High Voltage                                     VDDIO + 100   mV
    VIL      LVDS/LVPECL Input Low Voltage               VDDIO - 100                          mV
  VIDIFF     LVDS/LVPECL Input Differential Voltage          100                   2400       mV
                            | VIH - VIL |
 VICOMM      LVDS/LVPECL Input Common Mode Voltage            0         1200      VDDIO       mV
                                                      34


                                                                                          XRT91L34
REV. 1.0.1               QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
FIGURE 19. LVDS/DIFFERENTIAL LVPECL VOLTAGE PARAMETER CONVENTION
                        "1"                           "0"                    "1"
             VIN_P                                                                   VIH
                                               VIDIFF
                                                                                     VICOMM
             VIN_N                                                                   VIL
                        VIDIFF = | VIH - VIL |            VICOMM = ( VIH + VIL ) / 2
                                                     35


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                             REV. 1.0.1
                    TABLE 21: LVDS OUTPUT LOGIC SIGNAL DC ELECTRICAL CHARACTERISTICS
Test Condition: VDD1.8 = 1.8V + 5%, VDDIO = 3.3V + 5% unless otherwise specified
  SYMBOL       TYPE                PARAMETER            MIN            TYP           MAX     UNITS   CONDITIONS
    VOH       LVDS       Output High Voltage           1100           1250           1500     mV   100 Ω line - line
    VOL       LVDS       Output Low Voltage             700            900           1200     mV   100 Ω line - line
  VODIFF      LVDS       Output Differential Voltage    250                           450     mV   100 Ω line - line
                         | VOH - VOL |
 VOCOMM       LVDS       Output Common Mode Voltage     850           1050           1350     mV   100 Ω line - line
          TABLE 22: DIFFERENTIAL LVPECL OUTPUT LOGIC SIGNAL DC ELECTRICAL CHARACTERISTICS
Test Conditions: VDD1.8 = 1.8V + 5%, VDDIO = 3.3V + 5% unless otherwise specified
 SYMBOL       TYPE                PARAMETER           MIN              TYP            MAX    UNITS   CONDITIONS
   VOH      LVPECL      Output High Voltage                       VDDIO - 900                 mV
    VOL     LVPECL      Output Low Voltage                        VDDIO - 1800                mV
  VODIFF    LVPECL      Output Differential Voltage   600                             1100    mV   Terminate with
                        | VOH - VOL |                                                                  50Ω to
                                                                                                    VDD_IO-2.0
 VOCOMM     LVPECL      Output Common Mode Voltage                VDDIO - 1350                 V
                      TABLE 23: LVTTL/LVCMOS SIGNAL DC ELECTRICAL CHARACTERISTICS
Test Condition: VDD1.8 = 1.8V + 5%, VDDIO = 3.3V + 5% unless otherwise specified
  SYMBOL       TYPE               PARAMETER             MIN           TYP          MAX       UNITS    CONDITIONS
    VOH     LVCMOS       Output High Voltage            2.4                      VDD_IO        V    IOH = -8.0mA
    VOL     LVCMOS       Output Low Voltage              0                          0.4        V     IOH = 8.0mA
    VIH      LVTTL/      Input High Voltage             2.0                      VDD_IO        V
            LVCMOS
    VIL      LVTTL/      Input Low Voltage               0                          0.8        V
            LVCMOS
   ILEAK     LVTTL/      Input Leakage Current          -10                         10        µA    VIN = VDD_IO
            LVCMOS                                                                                    or VIN = 0
 ILEAK_PU    LVTTL/      Input Leakage Current with    -100                         10        µA       VIN = 0
            LVCMOS       Pull-Up Resistor
 ILEAK_PD    LVTTL/      Input Leakage Current with     -10                        100        µA    VIN = VDD_IO
            LVCMOS       Pull-Down Resistor
NOTE: All input control pins are LVCMOS and LVTTL compatible. All output control pins are LVCMOS compatible only.
                                                      36


                                                                                                                 XRT91L34
REV. 1.0.1                 QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR
                                   TABLE 24: ORDERING INFORMATION
  PART NUMBER                              PACKAGE                                              OPERATING TEMPERATURE RANGE
   XRT91L34IV   128-pin Plastic Quad Flat Pack (14.0 x 14.0 x 1.4 mm, LQFP)                             -40°C to +85°C
  XRT91L34IV-F 128-pin Pb-Free Quad Flat Pack (14.0 x 14.0 x 1.4 mm, LQFP)                              -40°C to +85°C
PACKAGE DIMENSIONS
                             128-PIN Low Profile QUAD FLAT PACK
                                        (14 x 14 x 1.4 mm, LQFP)
                                                           Rev. 1.00
                                                                D
                                         96                     D1                       65
                               97                                                                 64
                                                                                                     D1 D
                             128                                                                  33
                                         1                                              32
                                   A2             e       B
                          A                                                                        C
                  Seating
                                                                                                         α
                   Plane                                                                        L
                             A1
                                                       INCHES                    MILLIMETERS
                                   SYMBOL
                                                 MIN          MAX             MIN          MAX
                                       A        0.055         0.063           1.40         1.60
                                      A1        0.002         0.006           0.05         0.15
                                      A2        0.053         0.057           1.35         1.45
                                       B        0.005         0.009           0.13         0.23
                                       C        0.004         0.008           0.09         0.20
                                       D        0.622         0.638          15.80        16.20
                                      D1        0.547         0.555          13.90        14.10
                                       e             0.0157BSC                     0.40BSC
                                       L        0.018         0.030           0.45         0.75
                                       α          0o            7o             0o           7o
                                   Note: The control dimension is in millimeter.
                                                          37


XRT91L34
QUAD CHANNEL MULTIRATE STS-12/3/1 AND STM-4/1/0 SONET/SDH CDR                                   REV. 1.0.1
                                    TABLE 25: REVISION HISTORY
   REVISION #      DATE                                        DESCRIPTION
     1.0.0    September 2007 New Release
     1.0.1     October 2007  Fixed VOH, VOL and VOCOMM specs in Figure 21 as per design input and prod-
                             uct engineering characterization.
                                                  38


Mouser Electronics
Authorized Distributor
Click to View Pricing, Inventory, Delivery & Lifecycle Information:
MaxLinear:
 XRT91L34IV-F XRT91L34ES XRT91L34IVTR XRT91L34IVTR-F
